<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cetusMobigenDatasetCategory">

    <delete id="deleteAll" parameterType="Long">
        /* cetusMobigenDatasetCategory.deleteAll */
        DELETE FROM CETUS_MOBIGEN_DATASET_CATEGORY
              WHERE DATASET_UID = #{datasetUid}
    </delete>

    <insert id="insert" parameterType="CetusMobigenDatasetCategory">
        /* cetusMobigenDatasetCategory.insert */
        INSERT INTO CETUS_MOBIGEN_DATASET_CATEGORY (
             DATASET_UID
            ,CATEGORY_UID
        ) VALUES (
              #{datasetUid}
             ,#{categoryUid}
        )
    </insert>

    <select id="getMobigenDatasetCategoryList" parameterType="SearchCategory" resultType="CategoryList">
        /* cetusMobigenDatasetCategory.getMobigenDatasetCategoryList */
        SELECT CMC.UID AS CATEGORY_UID
              ,CMC.CATEGORY_NM AS CATEGORY_NM
          FROM CETUS_MOBIGEN_CATEGORY CMC
         WHERE 1 = 1
        <if test="@Ognl@isNotEmpty(categoryNm)">
            AND CMC.CATEGORY_NM LIKE '%' || #{categoryNm} || '%'
        </if>
    </select>

    <select id="getMobigenDatasetCategoryListByDatasetUid" parameterType="Long" resultType="CategoryList">
        /* cetusMobigenDatasetCategory.getMobigenDatasetCategoryListByDatasetUid */
        SELECT CMDC.UID
              ,CMDC.CATEGORY_UID
              ,CMC.CATEGORY_NM AS CATEGORY_NM
          FROM CETUS_MOBIGEN_DATASET_CATEGORY CMDC
         INNER JOIN CETUS_MOBIGEN_CATEGORY CMC ON CMC.UID = CMDC.CATEGORY_UID
         WHERE CMDC.DATASET_UID = #{datasetUid}
    </select>

</mapper>