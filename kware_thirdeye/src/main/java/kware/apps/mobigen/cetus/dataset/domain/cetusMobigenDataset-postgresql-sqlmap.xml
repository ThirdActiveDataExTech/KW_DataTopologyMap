<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cetusMobigenDataset">

    <select id="getAllMobigenDatasetPage" resultType="MobigenDatasetList" parameterType="SearchMobigenDataset">
        /* cetusMobigenDataset.getAllMobigenDatasetPage */
        SELECT CMD.UID
              ,CMD.TITLE
              ,CMD.DESCRIPTION
              ,COALESCE(CMD.REGISTRANT_ID, '자동 저장') AS REGISTRANT_ID
              ,CMD.REG_DT
          FROM CETUS_MOBIGEN_DATASET CMD
         WHERE 1 = 1
        <if test="@Ognl@isNotEmpty(registrantId)">
           AND CMD.REGISTRANT_ID LIKE '%' || #{registrantId} || '%'
        </if>
         ORDER BY CMD.REG_DT DESC
        <if test="@Ognl@isNotEmpty(startNumber) and  @Ognl@isNotEmpty(endNumber)">
        OFFSET ${startNumber} LIMIT ${endNumber}
        </if>
    </select>

    <select id="getAllMobigenDatasetPageCount" resultType="int" parameterType="SearchMobigenDataset">
        /* cetusMobigenDataset.getAllMobigenDatasetPageCount */
        SELECT COUNT(*)
          FROM CETUS_MOBIGEN_DATASET CMD
         WHERE 1 = 1
        <if test="@Ognl@isNotEmpty(registrantId)">
           AND CMD.REGISTRANT_ID LIKE '%' || #{registrantId} || '%'
        </if>
    </select>
</mapper>