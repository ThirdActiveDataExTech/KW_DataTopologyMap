<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default}">

<th:block layout:fragment="center-image">
  <th:block th:with="title1=${currentPageName}, title2=${navigation}, leftImg=${centerLeftImage}, rightImg=${centerRightImage}">
    <th:block th:replace="fragments/center-image :: main-image-title(${title1}, ${title2}, ${leftImg}, ${rightImg})"></th:block>
  </th:block>
</th:block>

<th:block layout:fragment="head">
  <link rel="stylesheet" th:href="@{'/assets/css/page/admin/mobigen-metadata.css'}" />
</th:block>

<th:block layout:fragment="content">
  <div class="related-product-area pb-100 pt-80" data-aos="fade-up" data-aos-delay="200">
    <div class="container">

      <div class="section-title-2 st-border-center text-center mb-35">
        <h2>패키지 데이터셋 등록</h2>
      </div>
      <hr>

      <!-- s:buttons -->
      <div>
        <div class="d-flex justify-content-end pe-4">
          <div class="btn-container" style="margin-top: 0px !important;">
            <!-- 왼쪽 버튼 -->
            <!-- 오른쪽 버튼들 -->
            <div class="right-buttons">
              <button type="button" class="custom-button" id="list-btn">목록</button>
              <button id="new-submit-btn" class="custom-button">등록하기</button>
            </div>
          </div>
        </div>
      </div>
      <!-- e:buttons -->

      <!-- s: 신규 데이터셋 등록 -->
      <div class="card card-custom" style="margin-top: 10px">
        <h4>패키지 파일 등록 화면</h4>
        <!-- 메타데이터 업로드 -->
        <div class="file-row">
          <label>패키지 파일 파일</label>
          <div class="file-display">
            <div class="file-row" style="position: relative;">
              <input type="text" id="package-filename" class="file-text" placeholder="선택된 파일 없음" readonly>
              <button type="button" id="package-clear" class="clear-file">×</button>
            </div>
            <span style="font-size: 11px;color: #393838;">* zip 형태만 업로드 가능합니다.</span>
          </div>
          <button type="button" class="file-btn" id="package-upload-btn">패키지 파일 업로드</button>
          <div id="package-uploader" style="display: none;"></div>
        </div>
      </div>
      <!-- e: 신규 데이터셋 등록 -->

    </div>
  </div>

</th:block>

<th:block layout:fragment="script">
  <script th:src="@{'/assets/js/page/admin/metadata/mobigen/mobigen-dataset-control-package.js'}"></script>
  <script th:inline="javascript">

    $(function () {

      mobigenDatasetPackageJS.initPackageUploader("package-filename", "package-uploader", null);

      $("#list-btn").on('click', async function () {
        const isOk = await Util.confirm("작성중이신 정보는 저장되지 않습니다. <br> 목록으로 돌아가시겠습니까?")
        if (isOk) {
          window.location.href = '/admin/metadata/dataset'
        }
      });

      // ===============================
      // 신규 데이터 등록 > 패키지 파일 > 업로드, 삭제
      // ===============================
      $('#package-upload-btn').on('click', function () {
        mobigenDatasetPackageJS.packageFileUpload();
      });
      $("#package-clear").on('click', function () {
        mobigenDatasetPackageJS.packageFileDelete();
      });

      // ===============================
      // 등록 버튼 클릭 이벤트
      // ===============================
      $('#new-submit-btn').click(function(){
        mobigenDatasetPackageJS.packageFileSaveClickEvent();
      });

    });

  </script>
</th:block>
</html>