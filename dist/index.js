/*! For license information please see index.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("kw",[],t):"object"==typeof exports?exports.kw=t():e.kw=t()}(this,()=>(()=>{var e={6483:function(e){var t,n;t=0,n=function(){"use strict";var e="millisecond",t="second",n="minute",r="hour",i="week",a="month",s="quarter",u="year",c="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},y="en",_={};_[y]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||"th")+"]"}};var x="$isDayjsObject",b=function(e){return e instanceof A||!(!e||!e[x])},S=function e(t,n,r){var i;if(!t)return y;if("string"==typeof t){var a=t.toLowerCase();_[a]&&(i=a),n&&(_[a]=n,i=a);var s=t.split("-");if(!i&&s.length>1)return e(s[0])}else{var u=t.name;_[u]=t,i=u}return!r&&i&&(y=i),i||!r&&y},w=function(e,t){if(b(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new A(n)},M={s:v,z:function(e){var t=-e.utcOffset(),n=Math.abs(t);return(t<=0?"+":"-")+v(Math.floor(n/60),2,"0")+":"+v(n%60,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,a),s=n-i<0,u=t.clone().add(r+(s?-1:1),a);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(h){return({M:a,y:u,w:i,d:"day",D:c,h:r,m:n,s:t,ms:e,Q:s})[h]||String(h||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};M.l=S,M.i=b,M.w=function(e,t){return w(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var A=function(){function v(e){this.$L=S(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[x]=!0}var y=v.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(M.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(p);if(r){var i=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return M},y.isValid=function(){return this.$d.toString()!==h},y.isSame=function(e,t){var n=w(e);return this.startOf(t)<=n&&n<=this.endOf(t)},y.isAfter=function(e,t){return w(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<w(e)},y.$g=function(e,t,n){return M.u(e)?this[t]:this.set(n,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,s){var h=this,p=!!M.u(s)||s,f=M.p(e),v=function(e,t){var n=M.w(h.$u?Date.UTC(h.$y,t,e):new Date(h.$y,t,e),h);return p?n:n.endOf("day")},y=function(e,t){return M.w(h.toDate()[e].apply(h.toDate("s"),(p?[0,0,0,0]:[23,59,59,999]).slice(t)),h)},_=this.$W,x=this.$M,b=this.$D,S="set"+(this.$u?"UTC":"");switch(f){case u:return p?v(1,0):v(31,11);case a:return p?v(1,x):v(0,x+1);case i:var w=this.$locale().weekStart||0,A=(_<w?_+7:_)-w;return v(p?b-A:b+(6-A),x);case"day":case c:return y(S+"Hours",0);case r:return y(S+"Minutes",1);case n:return y(S+"Seconds",2);case t:return y(S+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(i,s){var h,p=M.p(i),f="set"+(this.$u?"UTC":""),v=((h={}).day=f+"Date",h[c]=f+"Date",h[a]=f+"Month",h[u]=f+"FullYear",h[r]=f+"Hours",h[n]=f+"Minutes",h[t]=f+"Seconds",h[e]=f+"Milliseconds",h)[p],y="day"===p?this.$D+(s-this.$W):s;if(p===a||p===u){var _=this.clone().set(c,1);_.$d[v](y),_.init(),this.$d=_.set(c,Math.min(this.$D,_.daysInMonth())).$d}else v&&this.$d[v](y);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[M.p(e)]()},y.add=function(e,s){var c,h=this;e=Number(e);var p=M.p(s),f=function(t){var n=w(h);return M.w(n.date(n.date()+Math.round(t*e)),h)};if(p===a)return this.set(a,this.$M+e);if(p===u)return this.set(u,this.$y+e);if("day"===p)return f(1);if(p===i)return f(7);var v=((c={})[n]=6e4,c[r]=36e5,c[t]=1e3,c)[p]||1,y=this.$d.getTime()+e*v;return M.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=M.z(this),a=this.$H,s=this.$m,u=this.$M,c=n.weekdays,p=n.months,v=n.meridiem,y=function(e,n,i,a){return e&&(e[n]||e(t,r))||i[n].slice(0,a)},_=function(e){return M.s(a%12||12,e,"0")},x=v||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(f,function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return M.s(t.$y,4,"0");case"M":return u+1;case"MM":return M.s(u+1,2,"0");case"MMM":return y(n.monthsShort,u,p,3);case"MMMM":return y(p,u);case"D":return t.$D;case"DD":return M.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return y(n.weekdaysMin,t.$W,c,2);case"ddd":return y(n.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(a);case"HH":return M.s(a,2,"0");case"h":return _(1);case"hh":return _(2);case"a":return x(a,s,!0);case"A":return x(a,s,!1);case"m":return String(s);case"mm":return M.s(s,2,"0");case"s":return String(t.$s);case"ss":return M.s(t.$s,2,"0");case"SSS":return M.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")})},y.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},y.diff=function(e,c,h){var p,f=this,v=M.p(c),y=w(e),_=(y.utcOffset()-this.utcOffset())*6e4,x=this-y,b=function(){return M.m(f,y)};switch(v){case u:p=b()/12;break;case a:p=b();break;case s:p=b()/3;break;case i:p=(x-_)/6048e5;break;case"day":p=(x-_)/864e5;break;case r:p=x/36e5;break;case n:p=x/6e4;break;case t:p=x/1e3;break;default:p=x}return h?p:M.a(p)},y.daysInMonth=function(){return this.endOf(a).$D},y.$locale=function(){return _[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=S(e,t,!0);return r&&(n.$L=r),n},y.clone=function(){return M.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},v}(),C=A.prototype;return w.prototype=C,[["$ms",e],["$s",t],["$m",n],["$H",r],["$W","day"],["$M",a],["$y",u],["$D",c]].forEach(function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),w.extend=function(e,t){return e.$i||(e(t,A,w),e.$i=!0),w},w.locale=S,w.isDayjs=b,w.unix=function(e){return w(1e3*e)},w.en=_[y],w.Ls=_,w.p={},w},e.exports=n()},1110:function(e){function t(e,t,n){function r(){var h=Date.now()-u;h<t&&h>=0?i=setTimeout(r,t-h):(i=null,!n&&(c=e.apply(s,a),s=a=null))}null==t&&(t=100);var i,a,s,u,c,h=function(){s=this,a=arguments,u=Date.now();var h=n&&!i;return!i&&(i=setTimeout(r,t)),h&&(c=e.apply(s,a),s=a=null),c};return h.clear=function(){i&&(clearTimeout(i),i=null)},h.flush=function(){i&&(c=e.apply(s,a),s=a=null,clearTimeout(i),i=null)},h}t.debounce=t,e.exports=t},3341:function(e){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;0!=i--;){var r,i,a,s=a[i];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}},6521:function(e,t,n){"use strict";var r,i,a,s,u,c,h=n(5271),p=n(7537);function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v=new Set,y={};function _(e,t){x(e,t),x(e+"Capture",t)}function x(e,t){for(y[e]=t,e=0;e<t.length;e++)v.add(t[e])}var b=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),S=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M={},A={};function C(e,t,n,r,i,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){T[e]=new C(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];T[t]=new C(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){T[e]=new C(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){T[e]=new C(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){T[e]=new C(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){T[e]=new C(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){T[e]=new C(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){T[e]=new C(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){T[e]=new C(e,5,!1,e.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function D(e){return e[1].toUpperCase()}function P(e,t,n,r){var i,a=T.hasOwnProperty(t)?T[t]:null;if(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1]){;(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":if(r)return!1;if(null!==n)return!n.acceptsBooleans;return"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e;default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1})(t,n,a,r)&&(n=null),r||null===a?(i=t,(!!S.call(A,i)||!S.call(M,i)&&(w.test(i)?A[i]=!0:(M[i]=!0,!1)))&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n))):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)))}}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(I,D);T[t]=new C(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(I,D);T[t]=new C(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(I,D);T[t]=new C(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){T[e]=new C(e,1,!1,e.toLowerCase(),null,!1,!1)}),T.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){T[e]=new C(e,1,!1,e.toLowerCase(),null,!0,!0)});var R=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),O=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),z=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),W=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var j=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var X=Symbol.iterator;function Y(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=X&&e[X]||e["@@iterator"])?e:null}var J,Z=Object.assign;function q(e){if(void 0===J)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);J=t&&t[1]||""}return"\n"+J+e}var K=!1;function Q(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,u=a.length-1;1<=s&&0<=u&&i[s]!==a[u];)u--;for(;1<=s&&0<=u;s--,u--)if(i[s]!==a[u]){if(1!==s||1!==u)do if(s--,0>--u||i[s]!==a[u]){var c="\n"+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=u);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function $(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ee(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function et(e){e._valueTracker||(e._valueTracker=function(e){var t=ee(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function en(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ee(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function er(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function ei(e,t){var n=t.checked;return Z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ea(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function eo(e,t){null!=(t=t.checked)&&P(e,"checked",t,!1)}function es(e,t){eo(e,t);var n=$(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r){e.removeAttribute("value");return}t.hasOwnProperty("value")?eu(e,t.type,n):t.hasOwnProperty("defaultValue")&&eu(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function el(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function eu(e,t,n){("number"!==t||er(e.ownerDocument)!==e)&&(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ec=Array.isArray;function eh(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(i=0,n=""+$(n),t=null;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ed(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(f(91));return Z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ep(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(f(92));if(ec(n)){if(1<n.length)throw Error(f(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function ef(e,t){var n=$(t.value),r=$(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function eg(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function em(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ev(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?em(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ey,e_,ex=(ey=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((e_=e_||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=e_.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ey(e,t,n,r)})}:ey);function eb(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType){n.nodeValue=t;return}}e.textContent=t}var eS={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ew=["Webkit","ms","Moz","O"];function eM(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||eS.hasOwnProperty(e)&&eS[e]?(""+t).trim():t+"px"}function eA(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=eM(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(eS).forEach(function(e){ew.forEach(function(t){eS[t=t+e.charAt(0).toUpperCase()+e.substring(1)]=eS[e]})});var eC=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eT(e,t){if(t){if(eC[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(f(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(f(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(f(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(f(62))}}function eE(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eI=null;function eD(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var eP=null,eR=null,eL=null;function eO(e){if(e=rG(e)){if("function"!=typeof eP)throw Error(f(280));var t=e.stateNode;t&&(t=rW(t),eP(e.stateNode,e.type,t))}}function ek(e){eR?eL?eL.push(e):eL=[e]:eR=e}function eB(){if(eR){var e=eR,t=eL;if(eL=eR=null,eO(e),t)for(e=0;e<t.length;e++)eO(t[e])}}function eN(e,t){return e(t)}function eF(){}var ez=!1;function eU(e,t,n){if(ez)return e(t,n);ez=!0;try{return eN(e,t,n)}finally{ez=!1,(null!==eR||null!==eL)&&(eF(),eB())}}function eH(e,t){var n=e.stateNode;if(null===n)return null;var r=rW(n);if(null===r)return null;switch(n=r[t],t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(f(231,t,typeof n));return n}var eG=!1;if(b)try{var eV={};Object.defineProperty(eV,"passive",{get:function(){eG=!0}}),window.addEventListener("test",eV,eV),window.removeEventListener("test",eV,eV)}catch(e){eG=!1}function eW(e,t,n,r,i,a,s,u,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(e){this.onError(e)}}var ej=!1,eX=null,eY=!1,eJ=null,eZ={onError:function(e){ej=!0,eX=e}};function eq(e,t,n,r,i,a,s,u,c){ej=!1,eX=null,eW.apply(eZ,arguments)}function eK(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 0!=(4098&(t=e).flags)&&(n=t.return),e=t.return;while(e)}return 3===t.tag?n:null}function eQ(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function e$(e){if(eK(e)!==e)throw Error(f(188))}function e0(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=eK(e)))throw Error(f(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return e$(i),e;if(a===r)return e$(i),t;a=a.sibling}throw Error(f(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(f(189))}}if(n.alternate!==r)throw Error(f(190))}if(3!==n.tag)throw Error(f(188));return n.stateNode.current===n?e:t}(e))?function e(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var n=e(t);if(null!==n)return n;t=t.sibling}return null}(e):null}var e1=p.unstable_scheduleCallback,e2=p.unstable_cancelCallback,e3=p.unstable_shouldYield,e5=p.unstable_requestPaint,e4=p.unstable_now,e6=p.unstable_getCurrentPriorityLevel,e9=p.unstable_ImmediatePriority,e8=p.unstable_UserBlockingPriority,e7=p.unstable_NormalPriority,te=p.unstable_LowPriority,tt=p.unstable_IdlePriority,tn=null,tr=null,ti=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(ta(e)/to|0)|0},ta=Math.log,to=Math.LN2,ts=64,tl=4194304;function tu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return 0x7c00000&e;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0x40000000;default:return e}}function tc(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=0xfffffff&n;if(0!==s){var u=s&~i;0!==u?r=tu(u):0!=(a&=s)&&(r=tu(a))}else 0!=(s=n&~i)?r=tu(s):0!==a&&(r=tu(a));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!=(4194240&a)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ti(t)),r|=e[n],t&=~i;return r}function th(e){return 0!=(e=-0x40000001&e.pendingLanes)?e:0x40000000&e?0x40000000:0}function td(){var e=ts;return 0==(4194240&(ts<<=1))&&(ts=64),e}function tp(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tf(e,t,n){e.pendingLanes|=t,0x20000000!==t&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,e[t=31-ti(t)]=n}function tg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ti(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var tm=0;function tv(e){return 1<(e&=-e)?4<e?0!=(0xfffffff&e)?16:0x20000000:4:1}var ty,t_,tx,tb,tS,tw=!1,tM=[],tA=null,tC=null,tT=null,tE=new Map,tI=new Map,tD=[],tP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tR(e,t){switch(e){case"focusin":case"focusout":tA=null;break;case"dragenter":case"dragleave":tC=null;break;case"mouseover":case"mouseout":tT=null;break;case"pointerover":case"pointerout":tE.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tI.delete(t.pointerId)}}function tL(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&null!==(t=rG(t))&&t_(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function tO(e){var t=rH(e.target);if(null!==t){var n=eK(t);if(null!==n){if(13===(t=n.tag)){if(null!==(t=eQ(n))){e.blockedOn=t,tS(e.priority,function(){tx(n)});return}}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=3===n.tag?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tk(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=tX(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=rG(n))&&t_(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);eI=r,n.target.dispatchEvent(r),eI=null;t.shift()}return!0}function tB(e,t,n){tk(e)&&n.delete(t)}function tN(){tw=!1,null!==tA&&tk(tA)&&(tA=null),null!==tC&&tk(tC)&&(tC=null),null!==tT&&tk(tT)&&(tT=null),tE.forEach(tB),tI.forEach(tB)}function tF(e,t){e.blockedOn===t&&(e.blockedOn=null,tw||(tw=!0,p.unstable_scheduleCallback(p.unstable_NormalPriority,tN)))}function tz(e){function t(t){return tF(t,e)}if(0<tM.length){tF(tM[0],e);for(var n=1;n<tM.length;n++){var r=tM[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==tA&&tF(tA,e),null!==tC&&tF(tC,e),null!==tT&&tF(tT,e),tE.forEach(t),tI.forEach(t),n=0;n<tD.length;n++)(r=tD[n]).blockedOn===e&&(r.blockedOn=null);for(;0<tD.length&&null===(n=tD[0]).blockedOn;)tO(n),null===n.blockedOn&&tD.shift()}var tU=R.ReactCurrentBatchConfig,tH=!0;function tG(e,t,n,r){var i=tm,a=tU.transition;tU.transition=null;try{tm=1,tW(e,t,n,r)}finally{tm=i,tU.transition=a}}function tV(e,t,n,r){var i=tm,a=tU.transition;tU.transition=null;try{tm=4,tW(e,t,n,r)}finally{tm=i,tU.transition=a}}function tW(e,t,n,r){if(tH){var i=tX(e,t,n,r);if(null===i)rp(e,t,r,tj,n),tR(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return tA=tL(tA,e,t,n,r,i),!0;case"dragenter":return tC=tL(tC,e,t,n,r,i),!0;case"mouseover":return tT=tL(tT,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return tE.set(a,tL(tE.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,tI.set(a,tL(tI.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(tR(e,r),4&t&&-1<tP.indexOf(e)){for(;null!==i;){var a=rG(i);if(null!==a&&ty(a),null===(a=tX(e,t,n,r))&&rp(e,t,r,tj,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else rp(e,t,r,null,n)}}var tj=null;function tX(e,t,n,r){if(tj=null,null!==(e=rH(e=eD(r)))){if(null===(t=eK(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=eQ(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}return tj=e,null}function tY(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(e6()){case e9:return 1;case e8:return 4;case e7:case te:return 16;case tt:return 0x20000000;default:return 16}default:return 16}}var tJ=null,tZ=null,tq=null;function tK(){if(tq)return tq;var e,t,n=tZ,r=n.length,i="value"in tJ?tJ.value:tJ.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[a-t];t++);return tq=i.slice(e,1<t?1-t:void 0)}function tQ(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function t$(){return!0}function t0(){return!1}function t1(e){function t(t,n,r,i,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?t$:t0,this.isPropagationStopped=t0,this}return Z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=t$)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=t$)},persist:function(){},isPersistent:t$}),t}var t2,t3,t5,t4={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},t6=t1(t4),t9=Z({},t4,{view:0,detail:0}),t8=t1(t9),t7=Z({},t9,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nc,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==t5&&(t5&&"mousemove"===e.type?(t2=e.screenX-t5.screenX,t3=e.screenY-t5.screenY):t3=t2=0,t5=e),t2)},movementY:function(e){return"movementY"in e?e.movementY:t3}}),ne=t1(t7),nt=t1(Z({},t7,{dataTransfer:0})),nn=t1(Z({},t9,{relatedTarget:0})),nr=t1(Z({},t4,{animationName:0,elapsedTime:0,pseudoElement:0})),ni=t1(Z({},t4,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),na=t1(Z({},t4,{data:0})),no={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ns={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nu(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=nl[e])&&!!t[e]}function nc(){return nu}var nh=t1(Z({},t9,{key:function(e){if(e.key){var t=no[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tQ(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ns[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nc,charCode:function(e){return"keypress"===e.type?tQ(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tQ(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),nd=t1(Z({},t7,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),np=t1(Z({},t9,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nc})),nf=t1(Z({},t4,{propertyName:0,elapsedTime:0,pseudoElement:0})),ng=t1(Z({},t7,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),nm=[9,13,27,32],nv=b&&"CompositionEvent"in window,ny=null;b&&"documentMode"in document&&(ny=document.documentMode);var n_=b&&"TextEvent"in window&&!ny,nx=b&&(!nv||ny&&8<ny&&11>=ny),nb=!1;function nS(e,t){switch(e){case"keyup":return -1!==nm.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nw(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var nM=!1,nA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!nA[e.type]:"textarea"===t}function nT(e,t,n,r){ek(r),0<(t=rg(t,"onChange")).length&&(n=new t6("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var nE=null,nI=null;function nD(e){rs(e,0)}function nP(e){if(en(rV(e)))return e}function nR(e,t){if("change"===e)return t}var nL=!1;if(b){if(b){var nO="oninput"in document;if(!nO){var nk=document.createElement("div");nk.setAttribute("oninput","return;"),nO="function"==typeof nk.oninput}r=nO}else r=!1;nL=r&&(!document.documentMode||9<document.documentMode)}function nB(){nE&&(nE.detachEvent("onpropertychange",nN),nI=nE=null)}function nN(e){if("value"===e.propertyName&&nP(nI)){var t=[];nT(t,nI,e,eD(e)),eU(nD,t)}}function nF(e,t,n){"focusin"===e?(nB(),nE=t,nI=n,nE.attachEvent("onpropertychange",nN)):"focusout"===e&&nB()}function nz(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return nP(nI)}function nU(e,t){if("click"===e)return nP(t)}function nH(e,t){if("input"===e||"change"===e)return nP(t)}var nG="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function nV(e,t){if(nG(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!S.call(t,i)||!nG(e[i],t[i]))return!1}return!0}function nW(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nj(e,t){var n,r=nW(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=nW(r)}}function nX(){for(var e=window,t=er();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(n)e=t.contentWindow;else break;t=er(e.document)}return t}function nY(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nJ=b&&"documentMode"in document&&11>=document.documentMode,nZ=null,nq=null,nK=null,nQ=!1;function n$(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;nQ||null==nZ||nZ!==er(r)||(r="selectionStart"in(r=nZ)&&nY(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},nK&&nV(nK,r)||(nK=r,0<(r=rg(nq,"onSelect")).length&&(t=new t6("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=nZ)))}function n0(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var n1={animationend:n0("Animation","AnimationEnd"),animationiteration:n0("Animation","AnimationIteration"),animationstart:n0("Animation","AnimationStart"),transitionend:n0("Transition","TransitionEnd")},n2={},n3={};function n5(e){if(n2[e])return n2[e];if(!n1[e])return e;var t,n=n1[e];for(t in n)if(n.hasOwnProperty(t)&&t in n3)return n2[e]=n[t];return e}b&&(n3=document.createElement("div").style,"AnimationEvent"in window||(delete n1.animationend.animation,delete n1.animationiteration.animation,delete n1.animationstart.animation),"TransitionEvent"in window||delete n1.transitionend.transition);var n4=n5("animationend"),n6=n5("animationiteration"),n9=n5("animationstart"),n8=n5("transitionend"),n7=new Map,re="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rt(e,t){n7.set(e,t),_(t,[e])}for(var rn=0;rn<re.length;rn++){var rr=re[rn];rt(rr.toLowerCase(),"on"+(rr[0].toUpperCase()+rr.slice(1)))}rt(n4,"onAnimationEnd"),rt(n6,"onAnimationIteration"),rt(n9,"onAnimationStart"),rt("dblclick","onDoubleClick"),rt("focusin","onFocus"),rt("focusout","onBlur"),rt(n8,"onTransitionEnd"),x("onMouseEnter",["mouseout","mouseover"]),x("onMouseLeave",["mouseout","mouseover"]),x("onPointerEnter",["pointerout","pointerover"]),x("onPointerLeave",["pointerout","pointerover"]),_("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_("onBeforeInput",["compositionend","keypress","textInput","paste"]),_("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ra=new Set("cancel close invalid load scroll toggle".split(" ").concat(ri));function ro(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,!function(e,t,n,r,i,a,s,u,c){if(eq.apply(this,arguments),ej){if(ej){var h=eX;ej=!1,eX=null}else throw Error(f(198));eY||(eY=!0,eJ=h)}}(r,t,void 0,e),e.currentTarget=null}function rs(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var u=r[s],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==a&&i.isPropagationStopped())break e;ro(i,u,h),a=c}else for(s=0;s<r.length;s++){if(c=(u=r[s]).instance,h=u.currentTarget,u=u.listener,c!==a&&i.isPropagationStopped())break e;ro(i,u,h),a=c}}}if(eY)throw e=eJ,eY=!1,eJ=null,e}function rl(e,t){var n=t[rF];void 0===n&&(n=t[rF]=new Set);var r=e+"__bubble";n.has(r)||(rd(t,e,2,!1),n.add(r))}function ru(e,t,n){var r=0;t&&(r|=4),rd(n,e,r,t)}var rc="_reactListening"+Math.random().toString(36).slice(2);function rh(e){if(!e[rc]){e[rc]=!0,v.forEach(function(t){"selectionchange"!==t&&(ra.has(t)||ru(t,!1,e),ru(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[rc]||(t[rc]=!0,ru("selectionchange",!1,t))}}function rd(e,t,n,r){switch(tY(t)){case 1:var i=tG;break;case 4:i=tV;break;default:i=tW}n=i.bind(null,t,n,e),i=void 0,eG&&("touchstart"===t||"touchmove"===t||"wheel"===t)&&(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function rp(e,t,n,r,i){var a=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&((c=s.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;s=s.return}for(;null!==u;){if(null===(s=rH(u)))return;if(5===(c=s.tag)||6===c){r=a=s;continue e}u=u.parentNode}}r=r.return}eU(function(){var r=a,i=eD(n),s=[];e:{var u=n7.get(e);if(void 0!==u){var c=t6,h=e;switch(e){case"keypress":if(0===tQ(n))break e;case"keydown":case"keyup":c=nh;break;case"focusin":h="focus",c=nn;break;case"focusout":h="blur",c=nn;break;case"beforeblur":case"afterblur":c=nn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=ne;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=nt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=np;break;case n4:case n6:case n9:c=nr;break;case n8:c=nf;break;case"scroll":c=t8;break;case"wheel":c=ng;break;case"copy":case"cut":case"paste":c=ni;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=nd}var p=0!=(4&t),f=!p&&"scroll"===e,v=p?null!==u?u+"Capture":null:u;p=[];for(var y,_=r;null!==_;){var x=(y=_).stateNode;if(5===y.tag&&null!==x&&(y=x,null!==v&&null!=(x=eH(_,v))&&p.push(rf(_,x,y))),f)break;_=_.return}0<p.length&&(u=new c(u,h,null,n,i),s.push({event:u,listeners:p}))}}if(0==(7&t)){e:if(u="mouseover"===e||"pointerover"===e,c="mouseout"===e||"pointerout"===e,!(u&&n!==eI&&(h=n.relatedTarget||n.fromElement)&&(rH(h)||h[rN]))){if((c||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,c?(h=n.relatedTarget||n.toElement,c=r,null!==(h=h?rH(h):null)&&(f=eK(h),h!==f||5!==h.tag&&6!==h.tag)&&(h=null)):(c=null,h=r),c!==h)){if(p=ne,x="onMouseLeave",v="onMouseEnter",_="mouse",("pointerout"===e||"pointerover"===e)&&(p=nd,x="onPointerLeave",v="onPointerEnter",_="pointer"),f=null==c?u:rV(c),y=null==h?u:rV(h),(u=new p(x,_+"leave",c,n,i)).target=f,u.relatedTarget=y,x=null,rH(i)===r&&((p=new p(v,_+"enter",h,n,i)).target=y,p.relatedTarget=f,x=p),f=x,c&&h)t:{for(p=c,v=h,_=0,y=p;y;y=rm(y))_++;for(y=0,x=v;x;x=rm(x))y++;for(;0<_-y;)p=rm(p),_--;for(;0<y-_;)v=rm(v),y--;for(;_--;){if(p===v||null!==v&&p===v.alternate)break t;p=rm(p),v=rm(v)}p=null}else p=null;null!==c&&rv(s,u,c,p,!1),null!==h&&null!==f&&rv(s,f,h,p,!0)}}e:{if("select"===(c=(u=r?rV(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===c&&"file"===u.type)var b,S=nR;else if(nC(u)){if(nL)S=nH;else{S=nz;var w=nF}}else(c=u.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(S=nU);if(S&&(S=S(e,r))){nT(s,S,n,i);break e}w&&w(e,u,r),"focusout"===e&&(w=u._wrapperState)&&w.controlled&&"number"===u.type&&eu(u,"number",u.value)}switch(w=r?rV(r):window,e){case"focusin":(nC(w)||"true"===w.contentEditable)&&(nZ=w,nq=r,nK=null);break;case"focusout":nK=nq=nZ=null;break;case"mousedown":nQ=!0;break;case"contextmenu":case"mouseup":case"dragend":nQ=!1,n$(s,n,i);break;case"selectionchange":if(nJ)break;case"keydown":case"keyup":n$(s,n,i)}if(nv)t:{switch(e){case"compositionstart":var M="onCompositionStart";break t;case"compositionend":M="onCompositionEnd";break t;case"compositionupdate":M="onCompositionUpdate";break t}M=void 0}else nM?nS(e,n)&&(M="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(M="onCompositionStart");M&&(nx&&"ko"!==n.locale&&(nM||"onCompositionStart"!==M?"onCompositionEnd"===M&&nM&&(b=tK()):(tZ="value"in(tJ=i)?tJ.value:tJ.textContent,nM=!0)),0<(w=rg(r,M)).length&&(M=new na(M,e,null,n,i),s.push({event:M,listeners:w}),b?M.data=b:null!==(b=nw(n))&&(M.data=b))),(b=n_?function(e,t){switch(e){case"compositionend":return nw(t);case"keypress":if(32!==t.which)return null;return nb=!0," ";case"textInput":return" "===(e=t.data)&&nb?null:e;default:return null}}(e,n):function(e,t){if(nM)return"compositionend"===e||!nv&&nS(e,t)?(e=tK(),tq=tZ=tJ=null,nM=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nx&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=rg(r,"onBeforeInput")).length&&(i=new na("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=b)}rs(s,t)})}function rf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rg(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=eH(e,n))&&r.unshift(rf(e,a,i)),null!=(a=eH(e,t))&&r.push(rf(e,a,i))),e=e.return}return r}function rm(e){if(null===e)return null;do e=e.return;while(e&&5!==e.tag);return e||null}function rv(e,t,n,r,i){for(var a=t._reactName,s=[];null!==n&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(null!==c&&c===r)break;5===u.tag&&null!==h&&(u=h,i?null!=(c=eH(n,a))&&s.unshift(rf(n,c,u)):i||null!=(c=eH(n,a))&&s.push(rf(n,c,u))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var ry=/\r\n?/g,r_=/\u0000|\uFFFD/g;function rx(e){return("string"==typeof e?e:""+e).replace(ry,"\n").replace(r_,"")}function rb(e,t,n){if(t=rx(t),rx(e)!==t&&n)throw Error(f(425))}function rS(){}var rw=null,rM=null;function rA(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rC="function"==typeof setTimeout?setTimeout:void 0,rT="function"==typeof clearTimeout?clearTimeout:void 0,rE="function"==typeof Promise?Promise:void 0,rI="function"==typeof queueMicrotask?queueMicrotask:void 0!==rE?function(e){return rE.resolve(null).then(e).catch(rD)}:rC;function rD(e){setTimeout(function(){throw e})}function rP(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType){if("/$"===(n=i.data)){if(0===r){e.removeChild(i),tz(t);return}r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++}n=i}while(n);tz(t)}function rR(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function rL(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var rO=Math.random().toString(36).slice(2),rk="__reactFiber$"+rO,rB="__reactProps$"+rO,rN="__reactContainer$"+rO,rF="__reactEvents$"+rO,rz="__reactListeners$"+rO,rU="__reactHandles$"+rO;function rH(e){var t=e[rk];if(t)return t;for(var n=e.parentNode;n;){if(t=n[rN]||n[rk]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=rL(e);null!==e;){if(n=e[rk])return n;e=rL(e)}return t}n=(e=n).parentNode}return null}function rG(e){return(e=e[rk]||e[rN])&&(5===e.tag||6===e.tag||13===e.tag||3===e.tag)?e:null}function rV(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(f(33))}function rW(e){return e[rB]||null}var rj=[],rX=-1;function rY(e){return{current:e}}function rJ(e){0>rX||(e.current=rj[rX],rj[rX]=null,rX--)}function rZ(e,t){rj[++rX]=e.current,e.current=t}var rq={},rK=rY(rq),rQ=rY(!1),r$=rq;function r0(e,t){var n=e.type.contextTypes;if(!n)return rq;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function r1(e){return null!=(e=e.childContextTypes)}function r2(){rJ(rQ),rJ(rK)}function r3(e,t,n){if(rK.current!==rq)throw Error(f(168));rZ(rK,t),rZ(rQ,n)}function r5(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(f(108,function(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return function e(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case k:return"Fragment";case O:return"Portal";case N:return"Profiler";case B:return"StrictMode";case H:return"Suspense";case G:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case z:return(t.displayName||"Context")+".Consumer";case F:return(t._context.displayName||"Context")+".Provider";case U:var n=t.render;return(t=t.displayName)||(t=""!==(t=n.displayName||n.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case V:return null!==(n=t.displayName||null)?n:e(t.type)||"Memo";case W:n=t._payload,t=t._init;try{return e(t(n))}catch(e){}}return null}(t);case 8:return t===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}(e)||"Unknown",i));return Z({},n,r)}function r4(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||rq,r$=rK.current,rZ(rK,e),rZ(rQ,rQ.current),!0}function r6(e,t,n){var r=e.stateNode;if(!r)throw Error(f(169));n?(e=r5(e,t,r$),r.__reactInternalMemoizedMergedChildContext=e,rJ(rQ),rJ(rK),rZ(rK,e)):rJ(rQ),rZ(rQ,n)}var r9=null,r8=!1,r7=!1;function ie(e){null===r9?r9=[e]:r9.push(e)}function it(){if(!r7&&null!==r9){r7=!0;var e=0,t=tm;try{var n=r9;for(tm=1;e<n.length;e++){var r=n[e];do r=r(!0);while(null!==r)}r9=null,r8=!1}catch(t){throw null!==r9&&(r9=r9.slice(e+1)),e1(e9,it),t}finally{tm=t,r7=!1}}return null}var ir=[],ii=0,ia=null,io=0,is=[],il=0,iu=null,ic=1,ih="";function id(e,t){ir[ii++]=io,ir[ii++]=ia,ia=e,io=t}function ip(e,t,n){is[il++]=ic,is[il++]=ih,is[il++]=iu,iu=e;var r=ic;e=ih;var i=32-ti(r)-1;r&=~(1<<i),n+=1;var a=32-ti(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,ic=1<<32-ti(t)+i|n<<i|r,ih=a+e}else ic=1<<a|n<<i|r,ih=e}function ig(e){null!==e.return&&(id(e,1),ip(e,1,0))}function im(e){for(;e===ia;)ia=ir[--ii],ir[ii]=null,io=ir[--ii],ir[ii]=null;for(;e===iu;)iu=is[--il],is[il]=null,ih=is[--il],is[il]=null,ic=is[--il],is[il]=null}var iv=null,iy=null,i_=!1,ix=null;function ib(e,t){var n=s1(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function iS(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,iv=e,iy=rR(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,iv=e,iy=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==iu?{id:ic,overflow:ih}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:0x40000000},(n=s1(18,null,null,0)).stateNode=t,n.return=e,e.child=n,iv=e,iy=null,!0);default:return!1}}function iw(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function iM(e){if(i_){var t=iy;if(t){var n=t;if(!iS(e,t)){if(iw(e))throw Error(f(418));t=rR(n.nextSibling);var r=iv;t&&iS(e,t)?ib(r,n):(e.flags=-4097&e.flags|2,i_=!1,iv=e)}}else{if(iw(e))throw Error(f(418));e.flags=-4097&e.flags|2,i_=!1,iv=e}}}function iA(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;iv=e}function iC(e){if(e!==iv)return!1;if(!i_)return iA(e),i_=!0,!1;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!rA(e.type,e.memoizedProps)),t&&(t=iy)){if(iw(e))throw iT(),Error(f(418));for(;t;)ib(e,t),t=rR(t.nextSibling)}if(iA(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(f(317));e:{for(t=0,e=e.nextSibling;e;){if(8===e.nodeType){var t,n=e.data;if("/$"===n){if(0===t){iy=rR(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}iy=null}}else iy=iv?rR(e.stateNode.nextSibling):null;return!0}function iT(){for(var e=iy;e;)e=rR(e.nextSibling)}function iE(){iy=iv=null,i_=!1}function iI(e){null===ix?ix=[e]:ix.push(e)}var iD=R.ReactCurrentBatchConfig;function iP(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(f(309));var r=n.stateNode}if(!r)throw Error(f(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(f(284));if(!n._owner)throw Error(f(290,e))}return e}function iR(e,t){throw Error(f(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function iL(e){return(0,e._init)(e._payload)}function iO(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=s3(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return(t.index=r,e)?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=s9(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===k?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===W&&iL(a)===t.type)?((r=i(t,n.props)).ref=iP(e,t,n),r.return=e,r):((r=s5(n.type,n.key,n.props,null,e.mode,r)).ref=iP(e,t,n),r.return=e,r)}function h(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=s8(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,a){return null===t||7!==t.tag?((t=s4(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function v(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=s9(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case L:return(n=s5(t.type,t.key,t.props,null,e.mode,n)).ref=iP(e,null,t),n.return=e,n;case O:return(t=s8(t,e.mode,n)).return=e,t;case W:return v(e,(0,t._init)(t._payload),n)}if(ec(t)||Y(t))return(t=s4(t,e.mode,n,null)).return=e,t;iR(e,t)}return null}function y(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case L:return n.key===i?c(e,t,n,r):null;case O:return n.key===i?h(e,t,n,r):null;case W:return y(e,t,(i=n._init)(n._payload),r)}if(ec(n)||Y(n))return null!==i?null:p(e,t,n,r,null);iR(e,n)}return null}function _(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case L:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return h(t,e=e.get(null===r.key?n:r.key)||null,r,i);case W:return _(e,t,n,(0,r._init)(r._payload),i)}if(ec(r)||Y(r))return p(t,e=e.get(n)||null,r,i,null);iR(t,r)}return null}return function u(c,h,p,x){if("object"==typeof p&&null!==p&&p.type===k&&null===p.key&&(p=p.props.children),"object"==typeof p&&null!==p){switch(p.$$typeof){case L:e:{for(var b=p.key,S=h;null!==S;){if(S.key===b){if((b=p.type)===k){if(7===S.tag){n(c,S.sibling),(h=i(S,p.props.children)).return=c,c=h;break e}}else if(S.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===W&&iL(b)===S.type){n(c,S.sibling),(h=i(S,p.props)).ref=iP(c,S,p),h.return=c,c=h;break e}n(c,S);break}t(c,S);S=S.sibling}p.type===k?((h=s4(p.props.children,c.mode,x,p.key)).return=c,c=h):((x=s5(p.type,p.key,p.props,null,c.mode,x)).ref=iP(c,h,p),x.return=c,c=x)}return s(c);case O:e:{for(S=p.key;null!==h;){if(h.key===S){if(4===h.tag&&h.stateNode.containerInfo===p.containerInfo&&h.stateNode.implementation===p.implementation){n(c,h.sibling),(h=i(h,p.children||[])).return=c,c=h;break e}else{n(c,h);break}}t(c,h);h=h.sibling}(h=s8(p,c.mode,x)).return=c,c=h}return s(c);case W:return u(c,h,(S=p._init)(p._payload),x)}if(ec(p))return function(i,s,u,c){for(var h=null,p=null,f=s,x=s=0,b=null;null!==f&&x<u.length;x++){f.index>x?(b=f,f=null):b=f.sibling;var S=y(i,f,u[x],c);if(null===S){null===f&&(f=b);break}e&&f&&null===S.alternate&&t(i,f),s=a(S,s,x),null===p?h=S:p.sibling=S,p=S,f=b}if(x===u.length)return n(i,f),i_&&id(i,x),h;if(null===f){for(;x<u.length;x++)null!==(f=v(i,u[x],c))&&(s=a(f,s,x),null===p?h=f:p.sibling=f,p=f);return i_&&id(i,x),h}for(f=r(i,f);x<u.length;x++)null!==(b=_(f,i,x,u[x],c))&&(e&&null!==b.alternate&&f.delete(null===b.key?x:b.key),s=a(b,s,x),null===p?h=b:p.sibling=b,p=b);return e&&f.forEach(function(e){return t(i,e)}),i_&&id(i,x),h}(c,h,p,x);if(Y(p))return function(i,s,u,c){var h=Y(u);if("function"!=typeof h)throw Error(f(150));if(null==(u=h.call(u)))throw Error(f(151));for(var p=h=null,x=s,b=s=0,S=null,w=u.next();null!==x&&!w.done;b++,w=u.next()){x.index>b?(S=x,x=null):S=x.sibling;var M=y(i,x,w.value,c);if(null===M){null===x&&(x=S);break}e&&x&&null===M.alternate&&t(i,x),s=a(M,s,b),null===p?h=M:p.sibling=M,p=M,x=S}if(w.done)return n(i,x),i_&&id(i,b),h;if(null===x){for(;!w.done;b++,w=u.next())null!==(w=v(i,w.value,c))&&(s=a(w,s,b),null===p?h=w:p.sibling=w,p=w);return i_&&id(i,b),h}for(x=r(i,x);!w.done;b++,w=u.next())null!==(w=_(x,i,b,w.value,c))&&(e&&null!==w.alternate&&x.delete(null===w.key?b:w.key),s=a(w,s,b),null===p?h=w:p.sibling=w,p=w);return e&&x.forEach(function(e){return t(i,e)}),i_&&id(i,b),h}(c,h,p,x);iR(c,p)}return"string"==typeof p&&""!==p||"number"==typeof p?(p=""+p,null!==h&&6===h.tag?(n(c,h.sibling),(h=i(h,p)).return=c):(n(c,h),(h=s9(p,c.mode,x)).return=c),s(c=h)):n(c,h)}}var ik=iO(!0),iB=iO(!1),iN=rY(null),iF=null,iz=null,iU=null;function iH(){iU=iz=iF=null}function iG(e){var t=iN.current;rJ(iN),e._currentValue=t}function iV(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function iW(e,t){iF=e,iU=iz=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(op=!0),e.firstContext=null)}function ij(e){var t=e._currentValue;if(iU!==e){if(e={context:e,memoizedValue:t,next:null},null===iz){if(null===iF)throw Error(f(308));iz=e,iF.dependencies={lanes:0,firstContext:e}}else iz=iz.next=e}return t}var iX=null;function iY(e){null===iX?iX=[e]:iX.push(e)}function iJ(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,iY(t)):(n.next=i.next,i.next=n),t.interleaved=n,iZ(e,r)}function iZ(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var iq=!1;function iK(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iQ(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function i$(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function i0(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&se)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,iZ(e,n)}return null===(i=r.interleaved)?(t.next=t,iY(r)):(t.next=i.next,i.next=t),r.interleaved=t,iZ(e,n)}function i1(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tg(e,n)}}function i2(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function i3(e,t,n,r){var i=e.updateQueue;iq=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var c=u,h=c.next;c.next=null,null===s?a=h:s.next=h,s=c;var p=e.alternate;null!==p&&(u=(p=p.updateQueue).lastBaseUpdate)!==s&&(null===u?p.firstBaseUpdate=h:u.next=h,p.lastBaseUpdate=c)}if(null!==a){var f=i.baseState;for(s=0,p=h=c=null,u=a;;){var v=u.lane,y=u.eventTime;if((r&v)===v){null!==p&&(p=p.next={eventTime:y,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var _=e,x=u;switch(v=t,y=n,x.tag){case 1:if("function"==typeof(_=x.payload)){f=_.call(y,f,v);break e}f=_;break e;case 3:_.flags=-65537&_.flags|128;case 0:if(null==(v="function"==typeof(_=x.payload)?_.call(y,f,v):_))break e;f=Z({},f,v);break e;case 2:iq=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(v=i.effects)?i.effects=[u]:v.push(u))}else y={eventTime:y,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===p?(h=p=y,c=f):p=p.next=y,s|=v;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;else u=(v=u).next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}if(null===p&&(c=f),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=p,null!==(t=i.shared.interleaved)){i=t;do s|=i.lane,i=i.next;while(i!==t)}else null===a&&(i.shared.lanes=0);sl|=s,e.lanes=s,e.memoizedState=f}}function i5(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(f(191,i));i.call(r)}}}var i4={},i6=rY(i4),i9=rY(i4),i8=rY(i4);function i7(e){if(e===i4)throw Error(f(174));return e}function ae(e,t){switch(rZ(i8,t),rZ(i9,e),rZ(i6,i4),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ev(null,"");break;default:t=(e=8===e?t.parentNode:t).namespaceURI||null,t=ev(t,e=e.tagName)}rJ(i6),rZ(i6,t)}function at(){rJ(i6),rJ(i9),rJ(i8)}function an(e){i7(i8.current);var t=i7(i6.current),n=ev(t,e.type);t!==n&&(rZ(i9,e),rZ(i6,n))}function ar(e){i9.current===e&&(rJ(i6),rJ(i9))}var ai=rY(0);function aa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function as(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var al=R.ReactCurrentDispatcher,au=R.ReactCurrentBatchConfig,ac=0,ah=null,ad=null,ap=null,af=!1,ag=!1,am=0,av=0;function ay(){throw Error(f(321))}function a_(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nG(e[n],t[n]))return!1;return!0}function ax(e,t,n,r,i,a){if(ac=a,ah=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,al.current=null===e||null===e.memoizedState?a3:a5,e=n(r,i),ag){a=0;do{if(ag=!1,am=0,25<=a)throw Error(f(301));a+=1,ap=ad=null,t.updateQueue=null,al.current=a4,e=n(r,i)}while(ag)}if(al.current=a2,t=null!==ad&&null!==ad.next,ac=0,ap=ad=ah=null,af=!1,t)throw Error(f(300));return e}function ab(){var e=0!==am;return am=0,e}function aS(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ap?ah.memoizedState=ap=e:ap=ap.next=e,ap}function aw(){if(null===ad){var e=ah.alternate;e=null!==e?e.memoizedState:null}else e=ad.next;var t=null===ap?ah.memoizedState:ap.next;if(null!==t)ap=t,ad=e;else{if(null===e)throw Error(f(310));e={memoizedState:(ad=e).memoizedState,baseState:ad.baseState,baseQueue:ad.baseQueue,queue:ad.queue,next:null},null===ap?ah.memoizedState=ap=e:ap=ap.next=e}return ap}function aM(e,t){return"function"==typeof t?t(e):t}function aA(e){var t=aw(),n=t.queue;if(null===n)throw Error(f(311));n.lastRenderedReducer=e;var r=ad,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var u=s=null,c=null,h=a;do{var p=h.lane;if((ac&p)===p)null!==c&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var v={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===c?(u=c=v,s=r):c=c.next=v,ah.lanes|=p,sl|=p}h=h.next}while(null!==h&&h!==a);null===c?s=r:c.next=u,nG(r,t.memoizedState)||(op=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do a=i.lane,ah.lanes|=a,sl|=a,i=i.next;while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function aC(e){var t=aw(),n=t.queue;if(null===n)throw Error(f(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);nG(a,t.memoizedState)||(op=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function aT(){}function aE(e,t){var n=ah,r=aw(),i=t(),a=!nG(r.memoizedState,i);if(a&&(r.memoizedState=i,op=!0),r=r.queue,aU(aP.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ap&&1&ap.memoizedState.tag){if(n.flags|=2048,ak(9,aD.bind(null,n,r,i,t),void 0,null),null===st)throw Error(f(349));0!=(30&ac)||aI(n,t,i)}return i}function aI(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ah.updateQueue)?(t={lastEffect:null,stores:null},ah.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function aD(e,t,n,r){t.value=n,t.getSnapshot=r,aR(t)&&aL(e)}function aP(e,t,n){return n(function(){aR(t)&&aL(e)})}function aR(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nG(e,n)}catch(e){return!0}}function aL(e){var t=iZ(e,1);null!==t&&sE(t,e,1,-1)}function aO(e){var t=aS();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:aM,lastRenderedState:e},t.queue=e,e=e.dispatch=aQ.bind(null,ah,e),[t.memoizedState,e]}function ak(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ah.updateQueue)?(t={lastEffect:null,stores:null},ah.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function aB(){return aw().memoizedState}function aN(e,t,n,r){var i=aS();ah.flags|=e,i.memoizedState=ak(1|t,n,void 0,void 0===r?null:r)}function aF(e,t,n,r){var i=aw();r=void 0===r?null:r;var a=void 0;if(null!==ad){var s=ad.memoizedState;if(a=s.destroy,null!==r&&a_(r,s.deps)){i.memoizedState=ak(t,n,a,r);return}}ah.flags|=e,i.memoizedState=ak(1|t,n,a,r)}function az(e,t){return aN(8390656,8,e,t)}function aU(e,t){return aF(2048,8,e,t)}function aH(e,t){return aF(4,2,e,t)}function aG(e,t){return aF(4,4,e,t)}function aV(e,t){return"function"==typeof t?(t(e=e()),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function aW(e,t,n){return n=null!=n?n.concat([e]):null,aF(4,4,aV.bind(null,t,e),n)}function aj(){}function aX(e,t){var n=aw();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&a_(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function aY(e,t){var n=aw();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&a_(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function aJ(e,t,n){return 0==(21&ac)?(e.baseState&&(e.baseState=!1,op=!0),e.memoizedState=n):(nG(n,t)||(n=td(),ah.lanes|=n,sl|=n,e.baseState=!0),t)}function aZ(e,t){var n=tm;tm=0!==n&&4>n?n:4,e(!0);var r=au.transition;au.transition={};try{e(!1),t()}finally{tm=n,au.transition=r}}function aq(){return aw().memoizedState}function aK(e,t,n){var r=sT(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},a$(e)?a0(t,n):null!==(n=iJ(e,t,n,r))&&(sE(n,e,r,sC()),a1(n,t,r))}function aQ(e,t,n){var r=sT(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(a$(e))a0(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(i.hasEagerState=!0,i.eagerState=u,nG(u,s)){var c=t.interleaved;null===c?(i.next=i,iY(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch(e){}finally{}null!==(n=iJ(e,t,i,r))&&(sE(n,e,r,i=sC()),a1(n,t,r))}}function a$(e){var t=e.alternate;return e===ah||null!==t&&t===ah}function a0(e,t){ag=af=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function a1(e,t,n){if(0!=(4194240&n)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tg(e,n)}}var a2={readContext:ij,useCallback:ay,useContext:ay,useEffect:ay,useImperativeHandle:ay,useInsertionEffect:ay,useLayoutEffect:ay,useMemo:ay,useReducer:ay,useRef:ay,useState:ay,useDebugValue:ay,useDeferredValue:ay,useTransition:ay,useMutableSource:ay,useSyncExternalStore:ay,useId:ay,unstable_isNewReconciler:!1},a3={readContext:ij,useCallback:function(e,t){return aS().memoizedState=[e,void 0===t?null:t],e},useContext:ij,useEffect:az,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,aN(4194308,4,aV.bind(null,t,e),n)},useLayoutEffect:function(e,t){return aN(4194308,4,e,t)},useInsertionEffect:function(e,t){return aN(4,2,e,t)},useMemo:function(e,t){var n=aS();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=aS();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=aK.bind(null,ah,e),[r.memoizedState,e]},useRef:function(e){var t=aS();return e={current:e},t.memoizedState=e},useState:aO,useDebugValue:aj,useDeferredValue:function(e){return aS().memoizedState=e},useTransition:function(){var e=aO(!1),t=e[0];return e=aZ.bind(null,e[1]),aS().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ah,i=aS();if(i_){if(void 0===n)throw Error(f(407));n=n()}else{if(n=t(),null===st)throw Error(f(349));0!=(30&ac)||aI(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,az(aP.bind(null,r,a,e),[e]),r.flags|=2048,ak(9,aD.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=aS(),t=st.identifierPrefix;if(i_){var n=ih,r=ic;t=":"+t+"R"+(n=(r&~(1<<32-ti(r)-1)).toString(32)+n),0<(n=am++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=av++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},a5={readContext:ij,useCallback:aX,useContext:ij,useEffect:aU,useImperativeHandle:aW,useInsertionEffect:aH,useLayoutEffect:aG,useMemo:aY,useReducer:aA,useRef:aB,useState:function(){return aA(aM)},useDebugValue:aj,useDeferredValue:function(e){return aJ(aw(),ad.memoizedState,e)},useTransition:function(){return[aA(aM)[0],aw().memoizedState]},useMutableSource:aT,useSyncExternalStore:aE,useId:aq,unstable_isNewReconciler:!1},a4={readContext:ij,useCallback:aX,useContext:ij,useEffect:aU,useImperativeHandle:aW,useInsertionEffect:aH,useLayoutEffect:aG,useMemo:aY,useReducer:aC,useRef:aB,useState:function(){return aC(aM)},useDebugValue:aj,useDeferredValue:function(e){var t=aw();return null===ad?t.memoizedState=e:aJ(t,ad.memoizedState,e)},useTransition:function(){return[aC(aM)[0],aw().memoizedState]},useMutableSource:aT,useSyncExternalStore:aE,useId:aq,unstable_isNewReconciler:!1};function a6(e,t){if(e&&e.defaultProps)for(var n in t=Z({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}function a9(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Z({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var a8={isMounted:function(e){return!!(e=e._reactInternals)&&eK(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=sC(),i=sT(e),a=i$(r,i);a.payload=t,null!=n&&(a.callback=n),null!==(t=i0(e,a,i))&&(sE(t,e,i,r),i1(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=sC(),i=sT(e),a=i$(r,i);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=i0(e,a,i))&&(sE(t,e,i,r),i1(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sC(),r=sT(e),i=i$(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=i0(e,i,r))&&(sE(t,e,r,n),i1(t,e,r))}};function a7(e,t,n,r,i,a,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||!nV(n,r)||!nV(i,a)}function oe(e,t,n){var r=!1,i=rq,a=t.contextType;return"object"==typeof a&&null!==a?a=ij(a):(i=r1(t)?r$:rK.current,a=(r=null!=(r=t.contextTypes))?r0(e,i):rq),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=a8,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ot(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&a8.enqueueReplaceState(t,t.state,null)}function on(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},iK(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=ij(a):(a=r1(t)?r$:rK.current,i.context=r0(e,a)),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(a9(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&a8.enqueueReplaceState(i,i.state,null),i3(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function or(e,t){try{var n="",r=t;do n+=function(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=Q(e.type,!1);case 11:return e=Q(e.type.render,!1);case 1:return e=Q(e.type,!0);default:return""}}(r),r=r.return;while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function oi(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function oa(e,t){}var oo="function"==typeof WeakMap?WeakMap:Map;function os(e,t,n){(n=i$(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){sm||(sm=!0,sv=r),oa(e,t)},n}function ol(e,t,n){(n=i$(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){oa(e,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){oa(e,t),"function"!=typeof r&&(null===sy?sy=new Set([this]):sy.add(this));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}function ou(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new oo;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=sZ.bind(null,e,t,n),t.then(e,e))}function oc(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function oh(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=i$(-1,1)).tag=2,i0(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var od=R.ReactCurrentOwner,op=!1;function of(e,t,n,r){t.child=null===e?iB(t,null,n,r):ik(t,e.child,n,r)}function og(e,t,n,r,i){n=n.render;var a=t.ref;return(iW(t,i),r=ax(e,t,n,r,a,i),n=ab(),null===e||op)?(i_&&n&&ig(t),t.flags|=1,of(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,oO(e,t,i))}function om(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||s2(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=s5(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ov(e,t,a,r,i))}if(a=e.child,0==(e.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:nV)(s,r)&&e.ref===t.ref)return oO(e,t,i)}return t.flags|=1,(e=s3(a,r)).ref=t.ref,e.return=t,t.child=e}function ov(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(nV(a,r)&&e.ref===t.ref){if(op=!1,t.pendingProps=r=a,0==(e.lanes&i))return t.lanes=e.lanes,oO(e,t,i);else 0!=(131072&e.flags)&&(op=!0)}}return ox(e,t,n,r,i)}function oy(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},rZ(sa,si),si|=n;else{if(0==(0x40000000&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=0x40000000,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,rZ(sa,si),si|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,rZ(sa,si),si|=r}}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,rZ(sa,si),si|=r;return of(e,t,i,n),t.child}function o_(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ox(e,t,n,r,i){var a=r1(n)?r$:rK.current;return(a=r0(t,a),iW(t,i),n=ax(e,t,n,r,a,i),r=ab(),null===e||op)?(i_&&r&&ig(t),t.flags|=1,of(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,oO(e,t,i))}function ob(e,t,n,r,i){if(r1(n)){var a=!0;r4(t)}else a=!1;if(iW(t,i),null===t.stateNode)oL(e,t),oe(t,n,r),on(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,u=t.memoizedProps;s.props=u;var c=s.context,h=n.contextType;h="object"==typeof h&&null!==h?ij(h):r0(t,h=r1(n)?r$:rK.current);var p=n.getDerivedStateFromProps,f="function"==typeof p||"function"==typeof s.getSnapshotBeforeUpdate;f||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(u!==r||c!==h)&&ot(t,s,r,h),iq=!1;var v=t.memoizedState;s.state=v,i3(t,r,s,i),c=t.memoizedState,u!==r||v!==c||rQ.current||iq?("function"==typeof p&&(a9(t,n,p,r),c=t.memoizedState),(u=iq||a7(t,n,u,r,v,c,h))?(f||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=h,r=u):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,iQ(e,t),u=t.memoizedProps,h=t.type===t.elementType?u:a6(t.type,u),s.props=h,f=t.pendingProps,v=s.context,c="object"==typeof(c=n.contextType)&&null!==c?ij(c):r0(t,c=r1(n)?r$:rK.current);var y=n.getDerivedStateFromProps;(p="function"==typeof y||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(u!==f||v!==c)&&ot(t,s,r,c),iq=!1,v=t.memoizedState,s.state=v,i3(t,r,s,i);var _=t.memoizedState;u!==f||v!==_||rQ.current||iq?("function"==typeof y&&(a9(t,n,y,r),_=t.memoizedState),(h=iq||a7(t,n,h,r,v,_,c)||!1)?(p||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,_,c),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,_,c)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=_),s.props=r,s.state=_,s.context=c,r=h):("function"!=typeof s.componentDidUpdate||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return oS(e,t,n,r,a,i)}function oS(e,t,n,r,i,a){o_(e,t);var s=0!=(128&t.flags);if(!r&&!s)return i&&r6(t,n,!1),oO(e,t,a);r=t.stateNode,od.current=t;var u=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=ik(t,e.child,null,a),t.child=ik(t,null,u,a)):of(e,t,u,a),t.memoizedState=r.state,i&&r6(t,n,!0),t.child}function ow(e){var t=e.stateNode;t.pendingContext?r3(e,t.pendingContext,t.pendingContext!==t.context):t.context&&r3(e,t.context,!1),ae(e,t.containerInfo)}function oM(e,t,n,r,i){return iE(),iI(i),t.flags|=256,of(e,t,n,r),t.child}var oA={dehydrated:null,treeContext:null,retryLane:0};function oC(e){return{baseLanes:e,cachePool:null,transitions:null}}function oT(e,t,n){var r,i=t.pendingProps,a=ai.current,s=!1,u=0!=(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!=(2&a)),r?(s=!0,t.flags&=-129):(null===e||null!==e.memoizedState)&&(a|=1),rZ(ai,1&a),null===e)return(iM(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated))?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=0x40000000,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0==(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=s6(u,i,0,null),e=s4(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=oC(n),t.memoizedState=oA,e):oE(t,u));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,oI(e,t,s,r=oi(Error(f(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=s6({mode:"visible",children:r.children},i,0,null),a=s4(a,i,s,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!=(1&t.mode)&&ik(t,e.child,null,s),t.child.memoizedState=oC(s),t.memoizedState=oA,a);if(0==(1&t.mode))return oI(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,oI(e,t,s,r=oi(a=Error(f(419)),r,void 0))}if(u=0!=(s&e.childLanes),op||u){if(null!==(r=st)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:i=32;break;case 0x20000000:i=0x10000000;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,iZ(e,i),sE(r,e,i,-1))}return sH(),oI(e,t,s,r=oi(Error(f(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=sK.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,iy=rR(i.nextSibling),iv=t,i_=!0,ix=null,null!==e&&(is[il++]=ic,is[il++]=ih,is[il++]=iu,ic=e.id,ih=e.overflow,iu=t),t=oE(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,a,n);if(s){s=i.fallback,u=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0==(1&u)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=s3(a,c)).subtreeFlags=0xe00000&a.subtreeFlags,null!==r?s=s3(r,s):(s=s4(s,u,n,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?oC(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=oA,i}return e=(s=e.child).sibling,i=s3(s,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function oE(e,t){return(t=s6({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function oI(e,t,n,r){return null!==r&&iI(r),ik(t,e.child,null,n),e=oE(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function oD(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),iV(e.return,t,n)}function oP(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function oR(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(of(e,t,r.children,n),0!=(2&(r=ai.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&oD(e,n,t);else if(19===e.tag)oD(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(rZ(ai,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(i=null,n=t.child;null!==n;)null!==(e=n.alternate)&&null===aa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),oP(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===aa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}oP(t,!0,n,null,a);break;case"together":oP(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function oL(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function oO(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),sl|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(f(153));if(null!==t.child){for(n=s3(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=s3(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ok(e,t){if(!i_)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function oB(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=0xe00000&i.subtreeFlags,r|=0xe00000&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}i=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},a=function(){},s=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,i7(i6.current);var a,s=null;switch(n){case"input":i=ei(e,i),r=ei(e,r),s=[];break;case"select":i=Z({},i,{value:void 0}),r=Z({},r,{value:void 0}),s=[];break;case"textarea":i=ed(e,i),r=ed(e,r),s=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=rS)}for(h in eT(n,r),n=null,i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&null!=i[h]){if("style"===h){var u=i[h];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(y.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null))}for(h in r){var c=r[h];if(u=null!=i?i[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(null!=c||null!=u)){if("style"===h){if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(h,n)),n=c}else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(s=s||[]).push(h,c)):"children"===h?"string"!=typeof c&&"number"!=typeof c||(s=s||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(y.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&rl("scroll",e),s||u===c||(s=[])):(s=s||[]).push(h,c))}}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},u=function(e,t,n,r){n!==r&&(t.flags|=4)};var oN=!1,oF=!1,oz="function"==typeof WeakSet?WeakSet:Set,oU=null;function oH(e,t){var n=e.ref;if(null!==n){if("function"==typeof n)try{n(null)}catch(n){sJ(e,t,n)}else n.current=null}}function oG(e,t,n){try{n()}catch(n){sJ(e,t,n)}}var oV=!1;function oW(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&oG(t,n,a)}i=i.next}while(i!==r)}}function oj(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function oX(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag;e=n;"function"==typeof t?t(e):t.current=e}}function oY(e){return 5===e.tag||3===e.tag||4===e.tag}function oJ(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||oY(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}var oZ=null,oq=!1;function oK(e,t,n){for(n=n.child;null!==n;)oQ(e,t,n),n=n.sibling}function oQ(e,t,n){if(tr&&"function"==typeof tr.onCommitFiberUnmount)try{tr.onCommitFiberUnmount(tn,n)}catch(e){}switch(n.tag){case 5:oF||oH(n,t);case 6:var r=oZ,i=oq;oZ=null,oK(e,t,n),oZ=r,oq=i,null!==oZ&&(oq?(e=oZ,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):oZ.removeChild(n.stateNode));break;case 18:null!==oZ&&(oq?(e=oZ,n=n.stateNode,8===e.nodeType?rP(e.parentNode,n):1===e.nodeType&&rP(e,n),tz(e)):rP(oZ,n.stateNode));break;case 4:r=oZ,i=oq,oZ=n.stateNode.containerInfo,oq=!0,oK(e,t,n),oZ=r,oq=i;break;case 0:case 11:case 14:case 15:if(!oF&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,void 0!==s&&(0!=(2&a)?oG(n,t,s):0!=(4&a)&&oG(n,t,s)),i=i.next}while(i!==r)}oK(e,t,n);break;case 1:if(!oF&&(oH(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){sJ(n,t,e)}oK(e,t,n);break;case 21:default:oK(e,t,n);break;case 22:1&n.mode?(oF=(r=oF)||null!==n.memoizedState,oK(e,t,n),oF=r):oK(e,t,n)}}function o$(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new oz),t.forEach(function(t){var r=sQ.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function o0(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=a;e:for(;null!==s;){switch(s.tag){case 5:oZ=s.stateNode,oq=!1;break e;case 3:case 4:oZ=s.stateNode.containerInfo,oq=!0;break e}s=s.return}if(null===oZ)throw Error(f(160));oQ(e,a,i),oZ=null,oq=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(e){sJ(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)o1(t,e),t=t.sibling}function o1(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(o0(t,e),o2(e),4&r){try{oW(3,e,e.return),oj(3,e)}catch(t){sJ(e,e.return,t)}try{oW(5,e,e.return)}catch(t){sJ(e,e.return,t)}}break;case 1:o0(t,e),o2(e),512&r&&null!==n&&oH(n,n.return);break;case 5:if(o0(t,e),o2(e),512&r&&null!==n&&oH(n,n.return),32&e.flags){var i=e.stateNode;try{eb(i,"")}catch(t){sJ(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===a.type&&null!=a.name&&eo(i,a),eE(u,s);var h=eE(u,a);for(s=0;s<c.length;s+=2){var p=c[s],v=c[s+1];"style"===p?eA(i,v):"dangerouslySetInnerHTML"===p?ex(i,v):"children"===p?eb(i,v):P(i,p,v,h)}switch(u){case"input":es(i,a);break;case"textarea":ef(i,a);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var _=a.value;null!=_?eh(i,!!a.multiple,_,!1):!!a.multiple!==y&&(null!=a.defaultValue?eh(i,!!a.multiple,a.defaultValue,!0):eh(i,!!a.multiple,a.multiple?[]:"",!1))}i[rB]=a}catch(t){sJ(e,e.return,t)}}break;case 6:if(o0(t,e),o2(e),4&r){if(null===e.stateNode)throw Error(f(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(t){sJ(e,e.return,t)}}break;case 3:if(o0(t,e),o2(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{tz(t.containerInfo)}catch(t){sJ(e,e.return,t)}break;case 4:default:o0(t,e),o2(e);break;case 13:o0(t,e),o2(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,a&&(null===i.alternate||null===i.alternate.memoizedState)&&(sp=e4())),4&r&&o$(e);break;case 22:if(p=null!==n&&null!==n.memoizedState,1&e.mode?(oF=(h=oF)||p,o0(t,e),oF=h):o0(t,e),o2(e),8192&r){if(h=null!==e.memoizedState,(e.stateNode.isHidden=h)&&!p&&0!=(1&e.mode))for(oU=e,p=e.child;null!==p;){for(v=oU=p;null!==oU;){switch(_=(y=oU).child,y.tag){case 0:case 11:case 14:case 15:oW(4,y,y.return);break;case 1:oH(y,y.return);var x=y.stateNode;if("function"==typeof x.componentWillUnmount){r=y,n=y.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(e){sJ(r,n,e)}}break;case 5:oH(y,y.return);break;case 22:if(null!==y.memoizedState){o5(v);continue}}null!==_?(_.return=y,oU=_):o5(v)}p=p.sibling}e:for(p=null,v=e;;){if(5===v.tag){if(null===p){p=v;try{i=v.stateNode,h?(a=i.style,"function"==typeof a.setProperty?a.setProperty("display","none","important"):a.display="none"):(u=v.stateNode,s=null!=(c=v.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,u.style.display=eM("display",s))}catch(t){sJ(e,e.return,t)}}}else if(6===v.tag){if(null===p)try{v.stateNode.nodeValue=h?"":v.memoizedProps}catch(t){sJ(e,e.return,t)}}else if((22!==v.tag&&23!==v.tag||null===v.memoizedState||v===e)&&null!==v.child){v.child.return=v,v=v.child;continue}if(v===e)break;for(;null===v.sibling;){if(null===v.return||v.return===e)break e;p===v&&(p=null),v=v.return}p===v&&(p=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:o0(t,e),o2(e),4&r&&o$(e);case 21:}}function o2(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(oY(n)){var r=n;break e}n=n.return}throw Error(f(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(eb(i,""),r.flags&=-33);var a=oJ(e);!function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,u=oJ(e);!function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!=(r=r._reactRootContainer)||null!==n.onclick||(n.onclick=rS));else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,u,s);break;default:throw Error(f(161))}}catch(t){sJ(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function o3(e){for(;null!==oU;){var t=oU;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:oF||oj(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!oF){if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:a6(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}}var a=t.updateQueue;null!==a&&i5(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}i5(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var h=t.alternate;if(null!==h){var p=h.memoizedState;if(null!==p){var v=p.dehydrated;null!==v&&tz(v)}}}break;default:throw Error(f(163))}oF||512&t.flags&&oX(t)}catch(e){sJ(t,t.return,e)}}if(t===e){oU=null;break}if(null!==(n=t.sibling)){n.return=t.return,oU=n;break}oU=t.return}}function o5(e){for(;null!==oU;){var t=oU;if(t===e){oU=null;break}var n=t.sibling;if(null!==n){n.return=t.return,oU=n;break}oU=t.return}}function o4(e){for(;null!==oU;){var t=oU;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{oj(4,t)}catch(e){sJ(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){sJ(t,i,e)}}var a=t.return;try{oX(t)}catch(e){sJ(t,a,e)}break;case 5:var s=t.return;try{oX(t)}catch(e){sJ(t,s,e)}}}catch(e){sJ(t,t.return,e)}if(t===e){oU=null;break}var u=t.sibling;if(null!==u){u.return=t.return,oU=u;break}oU=t.return}}var o6=Math.ceil,o9=R.ReactCurrentDispatcher,o8=R.ReactCurrentOwner,o7=R.ReactCurrentBatchConfig,se=0,st=null,sn=null,sr=0,si=0,sa=rY(0),so=0,ss=null,sl=0,su=0,sc=0,sh=null,sd=null,sp=0,sf=1/0,sg=null,sm=!1,sv=null,sy=null,s_=!1,sx=null,sb=0,sS=0,sw=null,sM=-1,sA=0;function sC(){return 0!=(6&se)?e4():-1!==sM?sM:sM=e4()}function sT(e){return 0==(1&e.mode)?1:0!=(2&se)&&0!==sr?sr&-sr:null!==iD.transition?(0===sA&&(sA=td()),sA):0!==(e=tm)?e:e=void 0===(e=window.event)?16:tY(e.type)}function sE(e,t,n,r){if(50<sS)throw sS=0,sw=null,Error(f(185));tf(e,n,r),(0==(2&se)||e!==st)&&(e===st&&(0==(2&se)&&(su|=n),4===so&&sL(e,sr)),sI(e,r),1===n&&0===se&&0==(1&t.mode)&&(sf=e4()+500,r8&&it()))}function sI(e,t){var n,r=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-ti(a),u=1<<s,c=i[s];-1===c?(0==(u&n)||0!=(u&r))&&(i[s]=function(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}(u,t)):c<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var i=tc(e,e===st?sr:0);if(0===i)null!==r&&e2(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=r&&e2(r),1===t){;0===e.tag?(n=sO.bind(null,e),r8=!0,ie(n)):ie(sO.bind(null,e)),rI(function(){0==(6&se)&&it()}),r=null}else{switch(tv(i)){case 1:r=e9;break;case 4:r=e8;break;case 16:default:r=e7;break;case 0x20000000:r=tt}r=function(e,t){return e1(e,t)}(r,sD.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function sD(e,t){if(sM=-1,sA=0,0!=(6&se))throw Error(f(327));var n=e.callbackNode;if(sX()&&e.callbackNode!==n)return null;var r=tc(e,e===st?sr:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=sG(e,r);else{t=r;var i=se;se|=2;var a=sU();for((st!==e||sr!==t)&&(sg=null,sf=e4()+500,sF(e,t));;)try{(function(){for(;null!==sn&&!e3();)sV(sn)})();break}catch(t){sz(e,t)}iH(),o9.current=a,se=i,null!==sn?t=0:(st=null,sr=0,t=so)}if(0!==t){if(2===t&&0!==(i=th(e))&&(r=i,t=sP(e,i)),1===t)throw n=ss,sF(e,0),sL(e,r),sI(e,e4()),n;if(6===t)sL(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!nG(a(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=sG(e,r))&&0!==(a=th(e))&&(r=a,t=sP(e,a)),1===t))throw n=ss,sF(e,0),sL(e,r),sI(e,e4()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(f(345));case 2:case 5:sj(e,sd,sg);break;case 3:if(sL(e,r),(0x7c00000&r)===r&&10<(t=sp+500-e4())){if(0!==tc(e,0))break;if(((i=e.suspendedLanes)&r)!==r){sC(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=rC(sj.bind(null,e,sd,sg),t);break}sj(e,sd,sg);break;case 4:if(sL(e,r),(4194240&r)===r)break;for(i=-1,t=e.eventTimes;0<r;){var s=31-ti(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=e4()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*o6(r/1960))-r)){e.timeoutHandle=rC(sj.bind(null,e,sd,sg),r);break}sj(e,sd,sg);break;default:throw Error(f(329))}}}return sI(e,e4()),e.callbackNode===n?sD.bind(null,e):null}function sP(e,t){var n=sh;return e.current.memoizedState.isDehydrated&&(sF(e,t).flags|=256),2!==(e=sG(e,t))&&(t=sd,sd=n,null!==t&&sR(t)),e}function sR(e){null===sd?sd=e:sd.push.apply(sd,e)}function sL(e,t){for(t&=~sc,t&=~su,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ti(t),r=1<<n;e[n]=-1,t&=~r}}function sO(e){if(0!=(6&se))throw Error(f(327));sX();var t=tc(e,0);if(0==(1&t))return sI(e,e4()),null;var n=sG(e,t);if(0!==e.tag&&2===n){var r=th(e);0!==r&&(t=r,n=sP(e,r))}if(1===n)throw n=ss,sF(e,0),sL(e,t),sI(e,e4()),n;if(6===n)throw Error(f(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sj(e,sd,sg),sI(e,e4()),null}function sk(e,t){var n=se;se|=1;try{return e(t)}finally{0===(se=n)&&(sf=e4()+500,r8&&it())}}function sB(e){null!==sx&&0===sx.tag&&0==(6&se)&&sX();var t=se;se|=1;var n=o7.transition,r=tm;try{if(o7.transition=null,tm=1,e)return e()}finally{tm=r,o7.transition=n,0==(6&(se=t))&&it()}}function sN(){si=sa.current,rJ(sa)}function sF(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rT(n)),null!==sn)for(n=sn.return;null!==n;){var r=n;switch(im(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&r2();break;case 3:at(),rJ(rQ),rJ(rK),as();break;case 5:ar(r);break;case 4:at();break;case 13:case 19:rJ(ai);break;case 10:iG(r.type._context);break;case 22:case 23:sN()}n=n.return}if(st=e,sn=e=s3(e.current,null),sr=si=t,so=0,ss=null,sc=su=sl=0,sd=sh=null,null!==iX){for(t=0;t<iX.length;t++)if(null!==(r=(n=iX[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}iX=null}return e}function sz(e,t){for(;;){var n=sn;try{if(iH(),al.current=a2,af){for(var r=ah.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}af=!1}if(ac=0,ap=ad=ah=null,ag=!1,am=0,o8.current=null,null===n||null===n.return){so=1,ss=t,sn=null;break}e:{var a=e,s=n.return,u=n,c=t;if(t=sr,u.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var h=c,p=u,v=p.tag;if(0==(1&p.mode)&&(0===v||11===v||15===v)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var _=oc(s);if(null!==_){_.flags&=-257,oh(_,s,u,a,t),1&_.mode&&ou(a,h,t),t=_,c=h;var x=t.updateQueue;if(null===x){var b=new Set;b.add(c),t.updateQueue=b}else x.add(c);break e}if(0==(1&t)){ou(a,h,t),sH();break e}c=Error(f(426))}else if(i_&&1&u.mode){var S=oc(s);if(null!==S){0==(65536&S.flags)&&(S.flags|=256),oh(S,s,u,a,t),iI(or(c,u));break e}}a=c=or(c,u),4!==so&&(so=2),null===sh?sh=[a]:sh.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var w=os(a,c,t);i2(a,w);break e;case 1:u=c;var M=a.type,A=a.stateNode;if(0==(128&a.flags)&&("function"==typeof M.getDerivedStateFromError||null!==A&&"function"==typeof A.componentDidCatch&&(null===sy||!sy.has(A)))){a.flags|=65536,t&=-t,a.lanes|=t;var C=ol(a,u,t);i2(a,C);break e}}a=a.return}while(null!==a)}sW(n)}catch(e){t=e,sn===n&&null!==n&&(sn=n=n.return);continue}break}}function sU(){var e=o9.current;return o9.current=a2,null===e?a2:e}function sH(){(0===so||3===so||2===so)&&(so=4),null===st||0==(0xfffffff&sl)&&0==(0xfffffff&su)||sL(st,sr)}function sG(e,t){var n=se;se|=2;var r=sU();for((st!==e||sr!==t)&&(sg=null,sF(e,t));;)try{(function(){for(;null!==sn;)sV(sn)})();break}catch(t){sz(e,t)}if(iH(),se=n,o9.current=r,null!==sn)throw Error(f(261));return st=null,sr=0,so}function sV(e){var t=c(e.alternate,e,si);e.memoizedProps=e.pendingProps,null===t?sW(e):sn=t,o8.current=null}function sW(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=function(e,t,n){var r=t.pendingProps;switch(im(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oB(t),null;case 1:case 17:return r1(t.type)&&r2(),oB(t),null;case 3:return r=t.stateNode,at(),rJ(rQ),rJ(rK),as(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(null===e||null===e.child)&&(iC(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==ix&&(sR(ix),ix=null))),a(e,t),oB(t),null;case 5:ar(t);var c=i7(i8.current);if(n=t.type,null!==e&&null!=t.stateNode)s(e,t,n,r,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(f(166));return oB(t),null}if(e=i7(i6.current),iC(t)){r=t.stateNode,n=t.type;var h=t.memoizedProps;switch(r[rk]=t,r[rB]=h,e=0!=(1&t.mode),n){case"dialog":rl("cancel",r),rl("close",r);break;case"iframe":case"object":case"embed":rl("load",r);break;case"video":case"audio":for(c=0;c<ri.length;c++)rl(ri[c],r);break;case"source":rl("error",r);break;case"img":case"image":case"link":rl("error",r),rl("load",r);break;case"details":rl("toggle",r);break;case"input":ea(r,h),rl("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!h.multiple},rl("invalid",r);break;case"textarea":ep(r,h),rl("invalid",r)}for(var p in eT(n,h),c=null,h)if(h.hasOwnProperty(p)){var v=h[p];"children"===p?"string"==typeof v?r.textContent!==v&&(!0!==h.suppressHydrationWarning&&rb(r.textContent,v,e),c=["children",v]):"number"==typeof v&&r.textContent!==""+v&&(!0!==h.suppressHydrationWarning&&rb(r.textContent,v,e),c=["children",""+v]):y.hasOwnProperty(p)&&null!=v&&"onScroll"===p&&rl("scroll",r)}switch(n){case"input":et(r),el(r,h,!0);break;case"textarea":et(r),eg(r);break;case"select":case"option":break;default:"function"==typeof h.onClick&&(r.onclick=rS)}r=c,t.updateQueue=r,null!==r&&(t.flags|=4)}else{p=9===c.nodeType?c:c.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=em(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=p.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=p.createElement(n,{is:r.is}):(e=p.createElement(n),"select"===n&&(p=e,r.multiple?p.multiple=!0:r.size&&(p.size=r.size))):e=p.createElementNS(e,n),e[rk]=t,e[rB]=r,i(e,t,!1,!1),t.stateNode=e;e:{switch(p=eE(n,r),n){case"dialog":rl("cancel",e),rl("close",e),c=r;break;case"iframe":case"object":case"embed":rl("load",e),c=r;break;case"video":case"audio":for(c=0;c<ri.length;c++)rl(ri[c],e);c=r;break;case"source":rl("error",e),c=r;break;case"img":case"image":case"link":rl("error",e),rl("load",e),c=r;break;case"details":rl("toggle",e),c=r;break;case"input":ea(e,r),c=ei(e,r),rl("invalid",e);break;case"option":default:c=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},c=Z({},r,{value:void 0}),rl("invalid",e);break;case"textarea":ep(e,r),c=ed(e,r),rl("invalid",e)}for(h in eT(n,c),v=c)if(v.hasOwnProperty(h)){var _=v[h];"style"===h?eA(e,_):"dangerouslySetInnerHTML"===h?null!=(_=_?_.__html:void 0)&&ex(e,_):"children"===h?"string"==typeof _?("textarea"!==n||""!==_)&&eb(e,_):"number"==typeof _&&eb(e,""+_):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(y.hasOwnProperty(h)?null!=_&&"onScroll"===h&&rl("scroll",e):null!=_&&P(e,h,_,p))}switch(n){case"input":et(e),el(e,r,!1);break;case"textarea":et(e),eg(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$(r.value));break;case"select":e.multiple=!!r.multiple,null!=(h=r.value)?eh(e,!!r.multiple,h,!1):null!=r.defaultValue&&eh(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof c.onClick&&(e.onclick=rS)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return oB(t),null;case 6:if(e&&null!=t.stateNode)u(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(f(166));if(n=i7(i8.current),i7(i6.current),iC(t)){if(r=t.stateNode,n=t.memoizedProps,r[rk]=t,(h=r.nodeValue!==n)&&null!==(e=iv))switch(e.tag){case 3:rb(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&rb(r.nodeValue,n,0!=(1&e.mode))}h&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[rk]=t,t.stateNode=r}return oB(t),null;case 13:if(rJ(ai),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i_&&null!==iy&&0!=(1&t.mode)&&0==(128&t.flags))iT(),iE(),t.flags|=98560,h=!1;else if(h=iC(t),null!==r&&null!==r.dehydrated){if(null===e){if(!h)throw Error(f(318));if(!(h=null!==(h=t.memoizedState)?h.dehydrated:null))throw Error(f(317));h[rk]=t}else iE(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;oB(t),h=!1}else null!==ix&&(sR(ix),ix=null),h=!0;if(!h)return 65536&t.flags?t:null}if(0!=(128&t.flags))return t.lanes=n,t;return(r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&ai.current)?0===so&&(so=3):sH())),null!==t.updateQueue&&(t.flags|=4),oB(t),null;case 4:return at(),a(e,t),null===e&&rh(t.stateNode.containerInfo),oB(t),null;case 10:return iG(t.type._context),oB(t),null;case 19:if(rJ(ai),null===(h=t.memoizedState))return oB(t),null;if(r=0!=(128&t.flags),null===(p=h.rendering)){if(r)ok(h,!1);else{if(0!==so||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(p=aa(e))){for(t.flags|=128,ok(h,!1),null!==(r=p.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)h=n,e=r,h.flags&=0xe00002,null===(p=h.alternate)?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=p.childLanes,h.lanes=p.lanes,h.child=p.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=p.memoizedProps,h.memoizedState=p.memoizedState,h.updateQueue=p.updateQueue,h.type=p.type,e=p.dependencies,h.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return rZ(ai,1&ai.current|2),t.child}e=e.sibling}null!==h.tail&&e4()>sf&&(t.flags|=128,r=!0,ok(h,!1),t.lanes=4194304)}}else{if(!r){if(null!==(e=aa(p))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ok(h,!0),null===h.tail&&"hidden"===h.tailMode&&!p.alternate&&!i_)return oB(t),null}else 2*e4()-h.renderingStartTime>sf&&0x40000000!==n&&(t.flags|=128,r=!0,ok(h,!1),t.lanes=4194304)}h.isBackwards?(p.sibling=t.child,t.child=p):(null!==(n=h.last)?n.sibling=p:t.child=p,h.last=p)}if(null!==h.tail)return t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=e4(),t.sibling=null,n=ai.current,rZ(ai,r?1&n|2:1&n),t;return oB(t),null;case 22:case 23:return sN(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(0x40000000&si)&&(oB(t),6&t.subtreeFlags&&(t.flags|=8192)):oB(t),null;case 24:case 25:return null}throw Error(f(156,t.tag))}(n,t,si))){sn=n;return}}else{if(null!==(n=function(e,t){switch(im(t),t.tag){case 1:return r1(t.type)&&r2(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return at(),rJ(rQ),rJ(rK),as(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ar(t),null;case 13:if(rJ(ai),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(f(340));iE()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return rJ(ai),null;case 4:return at(),null;case 10:return iG(t.type._context),null;case 22:case 23:return sN(),null;default:return null}}(n,t))){n.flags&=32767,sn=n;return}if(null!==e)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{so=6,sn=null;return}}if(null!==(t=t.sibling)){sn=t;return}sn=t=e}while(null!==t);0===so&&(so=5)}function sj(e,t,n){var r=tm,i=o7.transition;try{o7.transition=null,tm=1,function(e,t,n,r){do sX();while(null!==sx);if(0!=(6&se))throw Error(f(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(f(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(!function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ti(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,a),e===st&&(sn=st=null,sr=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||s_||(s_=!0,function(e,t){e1(e,t)}(e7,function(){return sX(),null})),a=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||a){a=o7.transition,o7.transition=null;var s,u,c,h=tm;tm=1;var p=se;se|=4,o8.current=null,!function(e,t){if(rw=tH,nY(e=nX())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i,a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(e){n=null;break e}var u=0,c=-1,h=-1,p=0,v=0,y=e,_=null;t:for(;;){for(;y!==n||0!==a&&3!==y.nodeType||(c=u+a),y!==s||0!==r&&3!==y.nodeType||(h=u+r),3===y.nodeType&&(u+=y.nodeValue.length),null!==(i=y.firstChild);){;_=y,y=i}for(;;){if(y===e)break t;if(_===n&&++p===a&&(c=u),_===s&&++v===r&&(h=u),null!==(i=y.nextSibling))break;_=(y=_).parentNode}y=i}n=-1===c||-1===h?null:{start:c,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(rM={focusedElem:e,selectionRange:n},tH=!1,oU=t;null!==oU;)if(e=(t=oU).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,oU=e;else for(;null!==oU;){t=oU;try{var x=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==x){var b=x.memoizedProps,S=x.memoizedState,w=t.stateNode,M=w.getSnapshotBeforeUpdate(t.elementType===t.type?b:a6(t.type,b),S);w.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var A=t.stateNode.containerInfo;1===A.nodeType?A.textContent="":9===A.nodeType&&A.documentElement&&A.removeChild(A.documentElement);break;default:throw Error(f(163))}}catch(e){sJ(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,oU=e;break}oU=t.return}x=oV,oV=!1}(e,n),o1(n,e),!function(e){var t=nX(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!!t&&!!n&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&nY(n)){if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=nj(n,a);var s=nj(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}(rM),tH=!!rw,rM=rw=null,e.current=n,s=n,u=e,c=i,oU=s,function e(t,n,r){for(var i=0!=(1&t.mode);null!==oU;){var a=oU,s=a.child;if(22===a.tag&&i){var u=null!==a.memoizedState||oN;if(!u){var c=a.alternate,h=null!==c&&null!==c.memoizedState||oF;c=oN;var p=oF;if(oN=u,(oF=h)&&!p)for(oU=a;null!==oU;)h=(u=oU).child,22===u.tag&&null!==u.memoizedState?o4(a):null!==h?(h.return=u,oU=h):o4(a);for(;null!==s;)oU=s,e(s,n,r),s=s.sibling;oU=a,oN=c,oF=p}o3(t,n,r)}else 0!=(8772&a.subtreeFlags)&&null!==s?(s.return=a,oU=s):o3(t,n,r)}}(s,u,c),e5(),se=p,tm=h,o7.transition=a}else e.current=n;if(s_&&(s_=!1,sx=e,sb=i),0===(a=e.pendingLanes)&&(sy=null),!function(e){if(tr&&"function"==typeof tr.onCommitFiberRoot)try{tr.onCommitFiberRoot(tn,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode,r),sI(e,e4()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(sm)throw sm=!1,e=sv,sv=null,e;0!=(1&sb)&&0!==e.tag&&sX(),0!=(1&(a=e.pendingLanes))?e===sw?sS++:(sS=0,sw=e):sS=0,it()}(e,t,n,r)}finally{o7.transition=i,tm=r}return null}function sX(){if(null!==sx){var e=tv(sb),t=o7.transition,n=tm;try{if(o7.transition=null,tm=16>e?16:e,null===sx)var r=!1;else{if(e=sx,sx=null,sb=0,0!=(6&se))throw Error(f(331));var i=se;for(se|=4,oU=e.current;null!==oU;){var a=oU,s=a.child;if(0!=(16&oU.flags)){var u=a.deletions;if(null!==u){for(var c=0;c<u.length;c++){var h=u[c];for(oU=h;null!==oU;){var p=oU;switch(p.tag){case 0:case 11:case 15:oW(8,p,a)}var v=p.child;if(null!==v)v.return=p,oU=v;else for(;null!==oU;){var y=(p=oU).sibling,_=p.return;if(!function e(t){var n=t.alternate;null!==n&&(t.alternate=null,e(n)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(n=t.stateNode)&&(delete n[rk],delete n[rB],delete n[rF],delete n[rz],delete n[rU]),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}(p),p===h){oU=null;break}if(null!==y){y.return=_,oU=y;break}oU=_}}}var x=a.alternate;if(null!==x){var b=x.child;if(null!==b){x.child=null;do{var S=b.sibling;b.sibling=null,b=S}while(null!==b)}}oU=a}}if(0!=(2064&a.subtreeFlags)&&null!==s)s.return=a,oU=s;else for(;null!==oU;){if(a=oU,0!=(2048&a.flags))switch(a.tag){case 0:case 11:case 15:oW(9,a,a.return)}var w=a.sibling;if(null!==w){w.return=a.return,oU=w;break}oU=a.return}}var M=e.current;for(oU=M;null!==oU;){var A=(s=oU).child;if(0!=(2064&s.subtreeFlags)&&null!==A)A.return=s,oU=A;else for(s=M;null!==oU;){if(u=oU,0!=(2048&u.flags))try{switch(u.tag){case 0:case 11:case 15:oj(9,u)}}catch(e){sJ(u,u.return,e)}if(u===s){oU=null;break}var C=u.sibling;if(null!==C){C.return=u.return,oU=C;break}oU=u.return}}if(se=i,it(),tr&&"function"==typeof tr.onPostCommitFiberRoot)try{tr.onPostCommitFiberRoot(tn,e)}catch(e){}r=!0}return r}finally{tm=n,o7.transition=t}}return!1}function sY(e,t,n){t=os(e,t=or(n,t),1),e=i0(e,t,1),t=sC(),null!==e&&(tf(e,1,t),sI(e,t))}function sJ(e,t,n){if(3===e.tag)sY(e,e,n);else for(;null!==t;){if(3===t.tag){sY(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===sy||!sy.has(r))){e=ol(t,e=or(n,e),1),t=i0(t,e,1),e=sC(),null!==t&&(tf(t,1,e),sI(t,e));break}}t=t.return}}function sZ(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=sC(),e.pingedLanes|=e.suspendedLanes&n,st===e&&(sr&n)===n&&(4===so||3===so&&(0x7c00000&sr)===sr&&500>e4()-sp?sF(e,0):sc|=n),sI(e,t)}function sq(e,t){0===t&&(0==(1&e.mode)?t=1:(t=tl,0==(0x7c00000&(tl<<=1))&&(tl=4194304)));var n=sC();null!==(e=iZ(e,t))&&(tf(e,t,n),sI(e,n))}function sK(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),sq(e,n)}function sQ(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(f(314))}null!==r&&r.delete(t),sq(e,n)}function s$(e,t){return e1(e,t)}function s0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function s1(e,t,n,r){return new s0(e,t,n,r)}function s2(e){return!(!(e=e.prototype)||!e.isReactComponent)}c=function(e,t,n){if(null!==e){if(e.memoizedProps!==t.pendingProps||rQ.current)op=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return op=!1,function(e,t,n){switch(t.tag){case 3:ow(t),iE();break;case 5:an(t);break;case 1:r1(t.type)&&r4(t);break;case 4:ae(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;rZ(iN,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState)){if(null!==r.dehydrated)return rZ(ai,1&ai.current),t.flags|=128,null;if(0!=(n&t.child.childLanes))return oT(e,t,n);return rZ(ai,1&ai.current),null!==(e=oO(e,t,n))?e.sibling:null}rZ(ai,1&ai.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return oR(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),rZ(ai,ai.current),!r)return null;break;case 22:case 23:return t.lanes=0,oy(e,t,n)}return oO(e,t,n)}(e,t,n);op=0!=(131072&e.flags)}}else op=!1,i_&&0!=(1048576&t.flags)&&ip(t,io,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;oL(e,t),e=t.pendingProps;var i=r0(t,rK.current);iW(t,n),i=ax(null,t,r,e,i,n);var a=ab();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,r1(r)?(a=!0,r4(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,iK(t),i.updater=a8,t.stateNode=i,i._reactInternals=t,on(t,r,e,n),t=oS(null,t,r,!0,a,n)):(t.tag=0,i_&&a&&ig(t),of(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(oL(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return s2(e)?1:0;if(null!=e){if((e=e.$$typeof)===U)return 11;if(e===V)return 14}return 2}(r),e=a6(r,e),i){case 0:t=ox(null,t,r,e,n);break e;case 1:t=ob(null,t,r,e,n);break e;case 11:t=og(null,t,r,e,n);break e;case 14:t=om(null,t,r,a6(r.type,e),n);break e}throw Error(f(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:a6(r,i),ox(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:a6(r,i),ob(e,t,r,i,n);case 3:e:{if(ow(t),null===e)throw Error(f(387));r=t.pendingProps,i=(a=t.memoizedState).element,iQ(e,t),i3(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){i=or(Error(f(423)),t),t=oM(e,t,r,n,i);break e}else if(r!==i){i=or(Error(f(424)),t),t=oM(e,t,r,n,i);break e}else for(iy=rR(t.stateNode.containerInfo.firstChild),iv=t,i_=!0,ix=null,n=iB(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(iE(),r===i){t=oO(e,t,n);break e}of(e,t,r,n)}t=t.child}return t;case 5:return an(t),null===e&&iM(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,rA(r,i)?s=null:null!==a&&rA(r,a)&&(t.flags|=32),o_(e,t),of(e,t,s,n),t.child;case 6:return null===e&&iM(t),null;case 13:return oT(e,t,n);case 4:return ae(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ik(t,null,r,n):of(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:a6(r,i),og(e,t,r,i,n);case 7:return of(e,t,t.pendingProps,n),t.child;case 8:case 12:return of(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,rZ(iN,r._currentValue),r._currentValue=s,null!==a){if(nG(a.value,s)){if(a.children===i.children&&!rQ.current){t=oO(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var u=a.dependencies;if(null!==u){s=a.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=i$(-1,n&-n)).tag=2;var h=a.updateQueue;if(null!==h){var p=(h=h.shared).pending;null===p?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),iV(a.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(f(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),iV(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}}of(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,iW(t,n),r=r(i=ij(i)),t.flags|=1,of(e,t,r,n),t.child;case 14:return i=a6(r=t.type,t.pendingProps),i=a6(r.type,i),om(e,t,r,i,n);case 15:return ov(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:a6(r,i),oL(e,t),t.tag=1,r1(r)?(e=!0,r4(t)):e=!1,iW(t,n),oe(t,r,i),on(t,r,i,n),oS(null,t,r,!0,e,n);case 19:return oR(e,t,n);case 22:return oy(e,t,n)}throw Error(f(156,t.tag))};function s3(e,t){var n=e.alternate;return null===n?((n=s1(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=0xe00000&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function s5(e,t,n,r,i,a){var s=2;if(r=e,"function"==typeof e)s2(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case k:return s4(n.children,i,a,t);case B:s=8,i|=8;break;case N:return(e=s1(12,n,t,2|i)).elementType=N,e.lanes=a,e;case H:return(e=s1(13,n,t,i)).elementType=H,e.lanes=a,e;case G:return(e=s1(19,n,t,i)).elementType=G,e.lanes=a,e;case j:return s6(n,i,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case F:s=10;break e;case z:s=9;break e;case U:s=11;break e;case V:s=14;break e;case W:s=16,r=null;break e}throw Error(f(130,null==e?e:typeof e,""))}return(t=s1(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function s4(e,t,n,r){return(e=s1(7,e,r,t)).lanes=n,e}function s6(e,t,n,r){return(e=s1(22,e,r,t)).elementType=j,e.lanes=n,e.stateNode={isHidden:!1},e}function s9(e,t,n){return(e=s1(6,e,null,t)).lanes=n,e}function s8(e,t,n){return(t=s1(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function s7(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tp(0),this.expirationTimes=tp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function le(e,t,n,r,i,a,s,u,c){return e=new s7(e,t,n,u,c),1===t?(t=1,!0===a&&(t|=8)):t=0,a=s1(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},iK(a),e}function lt(e){if(!e)return rq;e=e._reactInternals;e:{if(eK(e)!==e||1!==e.tag)throw Error(f(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(r1(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(f(171))}if(1===e.tag){var n=e.type;if(r1(n))return r5(e,n,t)}return t}function ln(e,t,n,r,i,a,s,u,c){return(e=le(n,r,!0,e,i,a,s,u,c)).context=lt(null),n=e.current,r=sC(),(a=i$(r,i=sT(n))).callback=null!=t?t:null,i0(n,a,i),e.current.lanes=i,tf(e,i,r),sI(e,r),e}function lr(e,t,n,r){var i=t.current,a=sC(),s=sT(i);return n=lt(n),null===t.context?t.context=n:t.pendingContext=n,(t=i$(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=i0(i,t,s))&&(sE(e,i,s,a),i1(e,i,s)),s}function li(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function la(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function lo(e,t){la(e,t),(e=e.alternate)&&la(e,t)}var ls="function"==typeof reportError?reportError:function(e){};function ll(e){this._internalRoot=e}function lu(e){this._internalRoot=e}function lc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function lh(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ld(){}lu.prototype.render=ll.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(f(409));lr(e,t,null,null)},lu.prototype.unmount=ll.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;sB(function(){lr(null,e,null,null)}),t[rN]=null}},lu.prototype.unstable_scheduleHydration=function(e){if(e){var t=tb();e={blockedOn:null,target:e,priority:t};for(var n=0;n<tD.length&&0!==t&&t<tD[n].priority;n++);tD.splice(n,0,e),0===n&&tO(e)}};function lp(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if("function"==typeof i){var u=i;i=function(){var e=li(s);u.call(e)}}lr(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"==typeof r){var a=r;r=function(){var e=li(s);a.call(e)}}var s=ln(t,r,e,0,null,!1,!1,"",ld);return e._reactRootContainer=s,e[rN]=s.current,rh(8===e.nodeType?e.parentNode:e),sB(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var u=r;r=function(){var e=li(c);u.call(e)}}var c=le(e,0,!1,null,null,!1,!1,"",ld);return e._reactRootContainer=c,e[rN]=c.current,rh(8===e.nodeType?e.parentNode:e),sB(function(){lr(t,c,n,r)}),c}(n,t,e,i,r);return li(s)}ty=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=tu(t.pendingLanes);0!==n&&(tg(t,1|n),sI(t,e4()),0==(6&se)&&(sf=e4()+500,it()))}break;case 13:sB(function(){var t=iZ(e,1);null!==t&&sE(t,e,1,sC())}),lo(e,1)}},t_=function(e){if(13===e.tag){var t=iZ(e,0x8000000);null!==t&&sE(t,e,0x8000000,sC()),lo(e,0x8000000)}},tx=function(e){if(13===e.tag){var t=sT(e),n=iZ(e,t);null!==n&&sE(n,e,t,sC()),lo(e,t)}},tb=function(){return tm},tS=function(e,t){var n=tm;try{return tm=e,t()}finally{tm=n}},eP=function(e,t,n){switch(t){case"input":if(es(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=rW(r);if(!i)throw Error(f(90));en(r),es(r,i)}}}break;case"textarea":ef(e,n);break;case"select":null!=(t=n.value)&&eh(e,!!n.multiple,t,!1)}},eN=sk,eF=sB;var lf={findFiberByHostInstance:rH,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lg={bundleType:lf.bundleType,version:lf.version,rendererPackageName:lf.rendererPackageName,rendererConfig:lf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=e0(e))?null:e.stateNode},findFiberByHostInstance:lf.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lm.isDisabled&&lm.supportsFiber)try{tn=lm.inject(lg),tr=lm}catch(e){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={usingClientEntryPoint:!1,Events:[rG,rV,rW,ek,eB,sk]},t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!lc(t))throw Error(f(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:O,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!lc(e))throw Error(f(299));var n=!1,r="",i=ls;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=le(e,1,!1,null,null,n,!1,r,i),e[rN]=t.current,rh(8===e.nodeType?e.parentNode:e),new ll(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(f(188));throw Error(f(268,e=Object.keys(e).join(",")))}return e=null===(e=e0(t))?null:e.stateNode},t.flushSync=function(e){return sB(e)},t.hydrate=function(e,t,n){if(!lh(t))throw Error(f(200));return lp(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!lc(e))throw Error(f(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=ls;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=ln(t,null,e,1,null!=n?n:null,i,!1,a,s),e[rN]=t.current,rh(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new lu(t)},t.render=function(e,t,n){if(!lh(t))throw Error(f(200));return lp(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!lh(e))throw Error(f(40));return!!e._reactRootContainer&&(sB(function(){lp(null,null,e,!1,function(){e._reactRootContainer=null,e[rN]=null})}),!0)},t.unstable_batchedUpdates=sk,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!lh(n))throw Error(f(200));if(null==e||void 0===e._reactInternals)throw Error(f(38));return lp(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},8751:function(e,t,n){"use strict";var r=n(967);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},967:function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){}}(),e.exports=n(6521)},2514:function(e,t){"use strict";var n;t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},1041:function(e,t,n){e.exports=function(e){"use strict";var t,r,i,a,s,u={},c=n(5271),h=n(5297),p=Object.assign;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),M=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=R&&e[R]||e["@@iterator"])?e:null}function O(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case S:return"Profiler";case b:return"StrictMode";case C:return"Suspense";case T:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case M:return(e.displayName||"Context")+".Consumer";case w:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:O(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return O(e(t))}catch(e){}}return null}function k(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 0!=(4098&(t=e).flags)&&(n=t.return),e=t.return;while(e)}return 3===t.tag?n:null}function B(e){if(k(e)!==e)throw Error(f(188))}function N(e){var t=e.alternate;if(!t){if(null===(t=k(e)))throw Error(f(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return B(i),e;if(a===r)return B(i),t;a=a.sibling}throw Error(f(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(f(189))}}if(n.alternate!==r)throw Error(f(190))}if(3!==n.tag)throw Error(f(188));return n.stateNode.current===n?e:t}function F(e){return null!==(e=N(e))?function e(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var n=e(t);if(null!==n)return n;t=t.sibling}return null}(e):null}var z,U=Array.isArray,H=e.getPublicInstance,G=e.getRootHostContext,V=e.getChildHostContext,W=e.prepareForCommit,j=e.resetAfterCommit,X=e.createInstance,Y=e.appendInitialChild,J=e.finalizeInitialChildren,Z=e.prepareUpdate,q=e.shouldSetTextContent,K=e.createTextInstance,Q=e.scheduleTimeout,$=e.cancelTimeout,ee=e.noTimeout,et=e.isPrimaryRenderer,en=e.supportsMutation,er=e.supportsPersistence,ei=e.supportsHydration,ea=e.getInstanceFromNode,eo=e.preparePortalMount,es=e.getCurrentEventPriority,el=e.detachDeletedInstance,eu=e.supportsMicrotasks,ec=e.scheduleMicrotask,eh=e.supportsTestSelectors,ed=e.findFiberRoot,ep=e.getBoundingRect,ef=e.getTextContent,eg=e.isHiddenSubtree,em=e.matchAccessibilityRole,ev=e.setFocusIfFocusable,ey=e.setupIntersectionObserver,e_=e.appendChild,ex=e.appendChildToContainer,eb=e.commitTextUpdate,eS=e.commitMount,ew=e.commitUpdate,eM=e.insertBefore,eA=e.insertInContainerBefore,eC=e.removeChild,eT=e.removeChildFromContainer,eE=e.resetTextContent,eI=e.hideInstance,eD=e.hideTextInstance,eP=e.unhideInstance,eR=e.unhideTextInstance,eL=e.clearContainer,eO=e.cloneInstance,ek=e.createContainerChildSet,eB=e.appendChildToContainerChildSet,eN=e.finalizeContainerChildren,eF=e.replaceContainerChildren,ez=e.cloneHiddenInstance,eU=e.cloneHiddenTextInstance,eH=e.canHydrateInstance,eG=e.canHydrateTextInstance,eV=e.canHydrateSuspenseInstance,eW=e.isSuspenseInstancePending,ej=e.isSuspenseInstanceFallback,eX=e.registerSuspenseInstanceRetry,eY=e.getNextHydratableSibling,eJ=e.getFirstHydratableChild,eZ=e.getFirstHydratableChildWithinContainer,eq=e.getFirstHydratableChildWithinSuspenseInstance,eK=e.hydrateInstance,eQ=e.hydrateTextInstance,e$=e.hydrateSuspenseInstance,e0=e.getNextHydratableInstanceAfterSuspenseInstance,e1=e.commitHydratedContainer,e2=e.commitHydratedSuspenseInstance,e3=e.clearSuspenseBoundary,e5=e.clearSuspenseBoundaryFromContainer,e4=e.shouldDeleteUnhydratedTailInstances,e6=e.didNotMatchHydratedContainerTextInstance,e9=e.didNotMatchHydratedTextInstance;function e8(e){if(void 0===z)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var e7=!1;function te(e,t){if(!e||e7)return"";e7=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,u=a.length-1;1<=s&&0<=u&&i[s]!==a[u];)u--;for(;1<=s&&0<=u;s--,u--)if(i[s]!==a[u]){if(1!==s||1!==u)do if(s--,0>--u||i[s]!==a[u]){var c="\n"+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=u);break}}}finally{e7=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?e8(e):""}var tt=Object.prototype.hasOwnProperty,tn=[],tr=-1;function ti(e){return{current:e}}function ta(e){0>tr||(e.current=tn[tr],tn[tr]=null,tr--)}function to(e,t){tn[++tr]=e.current,e.current=t}var ts={},tl=ti(ts),tu=ti(!1),tc=ts;function th(e,t){var n=e.type.contextTypes;if(!n)return ts;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function td(e){return null!=(e=e.childContextTypes)}function tp(){ta(tu),ta(tl)}function tf(e,t,n){if(tl.current!==ts)throw Error(f(168));to(tl,t),to(tu,n)}function tg(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(f(108,function(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O(t);case 8:return t===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}(e)||"Unknown",i));return p({},n,r)}function tm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ts,tc=tl.current,to(tl,e),to(tu,tu.current),!0}function tv(e,t,n){var r=e.stateNode;if(!r)throw Error(f(169));n?(e=tg(e,t,tc),r.__reactInternalMemoizedMergedChildContext=e,ta(tu),ta(tl),to(tl,e)):ta(tu),to(tu,n)}var ty=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(t_(e)/tx|0)|0},t_=Math.log,tx=Math.LN2,tb=64,tS=4194304;function tw(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return 0x7c00000&e;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0x40000000;default:return e}}function tM(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=0xfffffff&n;if(0!==s){var u=s&~i;0!==u?r=tw(u):0!=(a&=s)&&(r=tw(a))}else 0!=(s=n&~i)?r=tw(s):0!==a&&(r=tw(a));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!=(4194240&a)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ty(t)),r|=e[n],t&=~i;return r}function tA(e){return 0!=(e=-0x40000001&e.pendingLanes)?e:0x40000000&e?0x40000000:0}function tC(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tT(e,t,n){e.pendingLanes|=t,0x20000000!==t&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,e[t=31-ty(t)]=n}function tE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ty(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var tI=0;function tD(e){return 1<(e&=-e)?4<e?0!=(0xfffffff&e)?16:0x20000000:4:1}var tP=h.unstable_scheduleCallback,tR=h.unstable_cancelCallback,tL=h.unstable_shouldYield,tO=h.unstable_requestPaint,tk=h.unstable_now,tB=h.unstable_ImmediatePriority,tN=h.unstable_UserBlockingPriority,tF=h.unstable_NormalPriority,tz=h.unstable_IdlePriority,tU=null,tH=null,tG="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},tV=null,tW=!1,tj=!1;function tX(e){null===tV?tV=[e]:tV.push(e)}function tY(){if(!tj&&null!==tV){tj=!0;var e=0,t=tI;try{var n=tV;for(tI=1;e<n.length;e++){var r=n[e];do r=r(!0);while(null!==r)}tV=null,tW=!1}catch(t){throw null!==tV&&(tV=tV.slice(e+1)),tP(tB,tY),t}finally{tI=t,tj=!1}}return null}var tJ=v.ReactCurrentBatchConfig;function tZ(e,t){if(tG(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!tt.call(t,i)||!tG(e[i],t[i]))return!1}return!0}function tq(e,t){if(e&&e.defaultProps)for(var n in t=p({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var tK=ti(null),tQ=null,t$=null,t0=null;function t1(){t0=t$=tQ=null}function t2(e,t,n){et?(to(tK,t._currentValue),t._currentValue=n):(to(tK,t._currentValue2),t._currentValue2=n)}function t3(e){var t=tK.current;ta(tK),et?e._currentValue=t:e._currentValue2=t}function t5(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function t4(e,t){tQ=e,t0=t$=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(r6=!0),e.firstContext=null)}function t6(e){var t=et?e._currentValue:e._currentValue2;if(t0!==e){if(e={context:e,memoizedValue:t,next:null},null===t$){if(null===tQ)throw Error(f(308));t$=e,tQ.dependencies={lanes:0,firstContext:e}}else t$=t$.next=e}return t}var t9=null,t8=!1;function t7(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ne(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function nn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==i5&&0!=(1&e.mode)&&0==(2&i3)?(null===(e=n.interleaved)?(t.next=t,null===t9?t9=[n]:t9.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function nr(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tE(e,n)}}function ni(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function na(e,t,n,r){var i=e.updateQueue;t8=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var c=u,h=c.next;c.next=null,null===s?a=h:s.next=h,s=c;var f=e.alternate;null!==f&&(u=(f=f.updateQueue).lastBaseUpdate)!==s&&(null===u?f.firstBaseUpdate=h:u.next=h,f.lastBaseUpdate=c)}if(null!==a){var v=i.baseState;for(s=0,f=h=c=null,u=a;;){var y=u.lane,_=u.eventTime;if((r&y)===y){null!==f&&(f=f.next={eventTime:_,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var x=e,b=u;switch(y=t,_=n,b.tag){case 1:if("function"==typeof(x=b.payload)){v=x.call(_,v,y);break e}v=x;break e;case 3:x.flags=-65537&x.flags|128;case 0:if(null==(y="function"==typeof(x=b.payload)?x.call(_,v,y):x))break e;v=p({},v,y);break e;case 2:t8=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(y=i.effects)?i.effects=[u]:y.push(u))}else _={eventTime:_,lane:y,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===f?(h=f=_,c=v):f=f.next=_,s|=y;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;else u=(y=u).next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}if(null===f&&(c=v),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=f,null!==(t=i.shared.interleaved)){i=t;do s|=i.lane,i=i.next;while(i!==t)}else null===a&&(i.shared.lanes=0);at|=s,e.lanes=s,e.memoizedState=v}}function no(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(f(191,i));i.call(r)}}}var ns=(new c.Component).refs;function nl(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:p({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var nu={isMounted:function(e){return!!(e=e._reactInternals)&&k(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=a_(),i=ax(e),a=nt(r,i);a.payload=t,null!=n&&(a.callback=n),nn(e,a),null!==(t=ab(e,i,r))&&nr(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=a_(),i=ax(e),a=nt(r,i);a.tag=1,a.payload=t,null!=n&&(a.callback=n),nn(e,a),null!==(t=ab(e,i,r))&&nr(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=a_(),r=ax(e),i=nt(n,r);i.tag=2,null!=t&&(i.callback=t),nn(e,i),null!==(t=ab(e,r,n))&&nr(t,e,r)}};function nc(e,t,n,r,i,a,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||!tZ(n,r)||!tZ(i,a)}function nh(e,t,n){var r=!1,i=ts,a=t.contextType;return"object"==typeof a&&null!==a?a=t6(a):(i=td(t)?tc:tl.current,a=(r=null!=(r=t.contextTypes))?th(e,i):ts),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=nu,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function nd(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&nu.enqueueReplaceState(t,t.state,null)}function np(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ns,t7(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=t6(a):(a=td(t)?tc:tl.current,i.context=th(e,a)),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(nl(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&nu.enqueueReplaceState(i,i.state,null),na(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}var nf=[],ng=0,nm=null,nv=0,ny=[],n_=0,nx=null,nb=1,nS="";function nw(e,t){nf[ng++]=nv,nf[ng++]=nm,nm=e,nv=t}function nM(e,t,n){ny[n_++]=nb,ny[n_++]=nS,ny[n_++]=nx,nx=e;var r=nb;e=nS;var i=32-ty(r)-1;r&=~(1<<i),n+=1;var a=32-ty(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,nb=1<<32-ty(t)+i|n<<i|r,nS=a+e}else nb=1<<a|n<<i|r,nS=e}function nA(e){null!==e.return&&(nw(e,1),nM(e,1,0))}function nC(e){for(;e===nm;)nm=nf[--ng],nf[ng]=null,nv=nf[--ng],nf[ng]=null;for(;e===nx;)nx=ny[--n_],ny[n_]=null,nS=ny[--n_],ny[n_]=null,nb=ny[--n_],ny[n_]=null}var nT=null,nE=null,nI=!1,nD=!1,nP=null;function nR(e,t){var n=aJ(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function nL(e,t){switch(e.tag){case 5:return null!==(t=eH(t,e.type,e.pendingProps))&&(e.stateNode=t,nT=e,nE=eJ(t),!0);case 6:return null!==(t=eG(t,e.pendingProps))&&(e.stateNode=t,nT=e,nE=null,!0);case 13:if(null!==(t=eV(t))){var n=null!==nx?{id:nb,overflow:nS}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:0x40000000},(n=aJ(18,null,null,0)).stateNode=t,n.return=e,e.child=n,nT=e,nE=null,!0}return!1;default:return!1}}function nO(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function nk(e){if(nI){var t=nE;if(t){var n=t;if(!nL(e,t)){if(nO(e))throw Error(f(418));t=eY(n);var r=nT;t&&nL(e,t)?nR(r,n):(e.flags=-4097&e.flags|2,nI=!1,nT=e)}}else{if(nO(e))throw Error(f(418));e.flags=-4097&e.flags|2,nI=!1,nT=e}}}function nB(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;nT=e}function nN(e){if(!ei||e!==nT)return!1;if(!nI)return nB(e),nI=!0,!1;if(3!==e.tag&&(5!==e.tag||e4(e.type)&&!q(e.type,e.memoizedProps))){var t=nE;if(t){if(nO(e)){for(e=nE;e;)e=eY(e);throw Error(f(418))}for(;t;)nR(e,t),t=eY(t)}}if(nB(e),13===e.tag){if(!ei)throw Error(f(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(f(317));nE=e0(e)}else nE=nT?eY(e.stateNode):null;return!0}function nF(){ei&&(nE=nT=null,nD=nI=!1)}function nz(e){null===nP?nP=[e]:nP.push(e)}function nU(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(f(309));var r=n.stateNode}if(!r)throw Error(f(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=i.refs;t===ns&&(t=i.refs={}),null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(f(284));if(!n._owner)throw Error(f(290,e))}return e}function nH(e,t){throw Error(f(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nG(e){return(0,e._init)(e._payload)}function nV(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=aq(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return(t.index=r,e)?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=a0(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===D&&nG(a)===t.type)?((r=i(t,n.props)).ref=nU(e,t,n),r.return=e,r):((r=aK(n.type,n.key,n.props,null,e.mode,r)).ref=nU(e,t,n),r.return=e,r)}function h(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=a1(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,a){return null===t||7!==t.tag?((t=aQ(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function v(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=a0(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case y:return(n=aK(t.type,t.key,t.props,null,e.mode,n)).ref=nU(e,null,t),n.return=e,n;case _:return(t=a1(t,e.mode,n)).return=e,t;case D:return v(e,(0,t._init)(t._payload),n)}if(U(t)||L(t))return(t=aQ(t,e.mode,n,null)).return=e,t;nH(e,t)}return null}function b(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case y:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?h(e,t,n,r):null;case D:return b(e,t,(i=n._init)(n._payload),r)}if(U(n)||L(n))return null!==i?null:p(e,t,n,r,null);nH(e,n)}return null}function S(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case y:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return h(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return S(e,t,n,(0,r._init)(r._payload),i)}if(U(r)||L(r))return p(t,e=e.get(n)||null,r,i,null);nH(t,r)}return null}return function u(c,h,p,w){if("object"==typeof p&&null!==p&&p.type===x&&null===p.key&&(p=p.props.children),"object"==typeof p&&null!==p){switch(p.$$typeof){case y:e:{for(var M=p.key,A=h;null!==A;){if(A.key===M){if((M=p.type)===x){if(7===A.tag){n(c,A.sibling),(h=i(A,p.props.children)).return=c,c=h;break e}}else if(A.elementType===M||"object"==typeof M&&null!==M&&M.$$typeof===D&&nG(M)===A.type){n(c,A.sibling),(h=i(A,p.props)).ref=nU(c,A,p),h.return=c,c=h;break e}n(c,A);break}t(c,A);A=A.sibling}p.type===x?((h=aQ(p.props.children,c.mode,w,p.key)).return=c,c=h):((w=aK(p.type,p.key,p.props,null,c.mode,w)).ref=nU(c,h,p),w.return=c,c=w)}return s(c);case _:e:{for(A=p.key;null!==h;){if(h.key===A){if(4===h.tag&&h.stateNode.containerInfo===p.containerInfo&&h.stateNode.implementation===p.implementation){n(c,h.sibling),(h=i(h,p.children||[])).return=c,c=h;break e}else{n(c,h);break}}t(c,h);h=h.sibling}(h=a1(p,c.mode,w)).return=c,c=h}return s(c);case D:return u(c,h,(A=p._init)(p._payload),w)}if(U(p))return function(i,s,u,c){for(var h=null,p=null,f=s,y=s=0,_=null;null!==f&&y<u.length;y++){f.index>y?(_=f,f=null):_=f.sibling;var x=b(i,f,u[y],c);if(null===x){null===f&&(f=_);break}e&&f&&null===x.alternate&&t(i,f),s=a(x,s,y),null===p?h=x:p.sibling=x,p=x,f=_}if(y===u.length)return n(i,f),nI&&nw(i,y),h;if(null===f){for(;y<u.length;y++)null!==(f=v(i,u[y],c))&&(s=a(f,s,y),null===p?h=f:p.sibling=f,p=f);return nI&&nw(i,y),h}for(f=r(i,f);y<u.length;y++)null!==(_=S(f,i,y,u[y],c))&&(e&&null!==_.alternate&&f.delete(null===_.key?y:_.key),s=a(_,s,y),null===p?h=_:p.sibling=_,p=_);return e&&f.forEach(function(e){return t(i,e)}),nI&&nw(i,y),h}(c,h,p,w);if(L(p))return function(i,s,u,c){var h=L(u);if("function"!=typeof h)throw Error(f(150));if(null==(u=h.call(u)))throw Error(f(151));for(var p=h=null,y=s,_=s=0,x=null,w=u.next();null!==y&&!w.done;_++,w=u.next()){y.index>_?(x=y,y=null):x=y.sibling;var M=b(i,y,w.value,c);if(null===M){null===y&&(y=x);break}e&&y&&null===M.alternate&&t(i,y),s=a(M,s,_),null===p?h=M:p.sibling=M,p=M,y=x}if(w.done)return n(i,y),nI&&nw(i,_),h;if(null===y){for(;!w.done;_++,w=u.next())null!==(w=v(i,w.value,c))&&(s=a(w,s,_),null===p?h=w:p.sibling=w,p=w);return nI&&nw(i,_),h}for(y=r(i,y);!w.done;_++,w=u.next())null!==(w=S(y,i,_,w.value,c))&&(e&&null!==w.alternate&&y.delete(null===w.key?_:w.key),s=a(w,s,_),null===p?h=w:p.sibling=w,p=w);return e&&y.forEach(function(e){return t(i,e)}),nI&&nw(i,_),h}(c,h,p,w);nH(c,p)}return"string"==typeof p&&""!==p||"number"==typeof p?(p=""+p,null!==h&&6===h.tag?(n(c,h.sibling),(h=i(h,p)).return=c):(n(c,h),(h=a0(p,c.mode,w)).return=c),s(c=h)):n(c,h)}}var nW=nV(!0),nj=nV(!1),nX={},nY=ti(nX),nJ=ti(nX),nZ=ti(nX);function nq(e){if(e===nX)throw Error(f(174));return e}function nK(e,t){to(nZ,t),to(nJ,e),to(nY,nX),e=G(t),ta(nY),to(nY,e)}function nQ(){ta(nY),ta(nJ),ta(nZ)}function n$(e){var t=nq(nZ.current),n=nq(nY.current);t=V(n,e.type,t),n!==t&&(to(nJ,e),to(nY,t))}function n0(e){nJ.current===e&&(ta(nY),ta(nJ))}var n1=ti(0);function n2(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||eW(n)||ej(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var n3=[];function n5(){for(var e=0;e<n3.length;e++){var t=n3[e];et?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}n3.length=0}var n4=v.ReactCurrentDispatcher,n6=v.ReactCurrentBatchConfig,n9=0,n8=null,n7=null,re=null,rt=!1,rn=!1,rr=0,ri=0;function ra(){throw Error(f(321))}function ro(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!tG(e[n],t[n]))return!1;return!0}function rs(e,t,n,r,i,a){if(n9=a,n8=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,n4.current=null===e||null===e.memoizedState?rV:rW,e=n(r,i),rn){a=0;do{if(rn=!1,rr=0,25<=a)throw Error(f(301));a+=1,re=n7=null,t.updateQueue=null,n4.current=rj,e=n(r,i)}while(rn)}if(n4.current=rG,t=null!==n7&&null!==n7.next,n9=0,re=n7=n8=null,rt=!1,t)throw Error(f(300));return e}function rl(){var e=0!==rr;return rr=0,e}function ru(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===re?n8.memoizedState=re=e:re=re.next=e,re}function rc(){if(null===n7){var e=n8.alternate;e=null!==e?e.memoizedState:null}else e=n7.next;var t=null===re?n8.memoizedState:re.next;if(null!==t)re=t,n7=e;else{if(null===e)throw Error(f(310));e={memoizedState:(n7=e).memoizedState,baseState:n7.baseState,baseQueue:n7.baseQueue,queue:n7.queue,next:null},null===re?n8.memoizedState=re=e:re=re.next=e}return re}function rh(e,t){return"function"==typeof t?t(e):t}function rd(e){var t=rc(),n=t.queue;if(null===n)throw Error(f(311));n.lastRenderedReducer=e;var r=n7,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var u=s=null,c=null,h=a;do{var p=h.lane;if((n9&p)===p)null!==c&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var v={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===c?(u=c=v,s=r):c=c.next=v,n8.lanes|=p,at|=p}h=h.next}while(null!==h&&h!==a);null===c?s=r:c.next=u,tG(r,t.memoizedState)||(r6=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do a=i.lane,n8.lanes|=a,at|=a,i=i.next;while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function rp(e){var t=rc(),n=t.queue;if(null===n)throw Error(f(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);tG(a,t.memoizedState)||(r6=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function rf(){}function rg(e,t){var n=n8,r=rc(),i=t(),a=!tG(r.memoizedState,i);if(a&&(r.memoizedState=i,r6=!0),r=r.queue,rC(ry.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==re&&1&re.memoizedState.tag){if(n.flags|=2048,rb(9,rv.bind(null,n,r,i,t),void 0,null),null===i5)throw Error(f(349));0!=(30&n9)||rm(n,t,i)}return i}function rm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=n8.updateQueue)?(t={lastEffect:null,stores:null},n8.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function rv(e,t,n,r){t.value=n,t.getSnapshot=r,r_(t)&&ab(e,1,-1)}function ry(e,t,n){return n(function(){r_(t)&&ab(e,1,-1)})}function r_(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tG(e,n)}catch(e){return!0}}function rx(e){var t=ru();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rh,lastRenderedState:e},t.queue=e,e=e.dispatch=rN.bind(null,n8,e),[t.memoizedState,e]}function rb(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=n8.updateQueue)?(t={lastEffect:null,stores:null},n8.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function rS(){return rc().memoizedState}function rw(e,t,n,r){var i=ru();n8.flags|=e,i.memoizedState=rb(1|t,n,void 0,void 0===r?null:r)}function rM(e,t,n,r){var i=rc();r=void 0===r?null:r;var a=void 0;if(null!==n7){var s=n7.memoizedState;if(a=s.destroy,null!==r&&ro(r,s.deps)){i.memoizedState=rb(t,n,a,r);return}}n8.flags|=e,i.memoizedState=rb(1|t,n,a,r)}function rA(e,t){return rw(8390656,8,e,t)}function rC(e,t){return rM(2048,8,e,t)}function rT(e,t){return rM(4,2,e,t)}function rE(e,t){return rM(4,4,e,t)}function rI(e,t){return"function"==typeof t?(t(e=e()),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function rD(e,t,n){return n=null!=n?n.concat([e]):null,rM(4,4,rI.bind(null,t,e),n)}function rP(){}function rR(e,t){var n=rc();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ro(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function rL(e,t){var n=rc();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ro(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function rO(e,t){var n=tI;tI=0!==n&&4>n?n:4,e(!0);var r=n6.transition;n6.transition={};try{e(!1),t()}finally{tI=n,n6.transition=r}}function rk(){return rc().memoizedState}function rB(e,t,n){var r=ax(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rF(e)?rz(t,n):(rU(e,t,n),null!==(e=ab(e,r,n=a_()))&&rH(e,t,r))}function rN(e,t,n){var r=ax(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rF(e))rz(t,i);else{rU(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(i.hasEagerState=!0,i.eagerState=u,tG(u,s))return}catch(e){}finally{}null!==(e=ab(e,r,n=a_()))&&rH(e,t,r)}}function rF(e){var t=e.alternate;return e===n8||null!==t&&t===n8}function rz(e,t){rn=rt=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function rU(e,t,n){null!==i5&&0!=(1&e.mode)&&0==(2&i3)?(null===(e=t.interleaved)?(n.next=n,null===t9?t9=[t]:t9.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function rH(e,t,n){if(0!=(4194240&n)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tE(e,n)}}var rG={readContext:t6,useCallback:ra,useContext:ra,useEffect:ra,useImperativeHandle:ra,useInsertionEffect:ra,useLayoutEffect:ra,useMemo:ra,useReducer:ra,useRef:ra,useState:ra,useDebugValue:ra,useDeferredValue:ra,useTransition:ra,useMutableSource:ra,useSyncExternalStore:ra,useId:ra,unstable_isNewReconciler:!1},rV={readContext:t6,useCallback:function(e,t){return ru().memoizedState=[e,void 0===t?null:t],e},useContext:t6,useEffect:rA,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,rw(4194308,4,rI.bind(null,t,e),n)},useLayoutEffect:function(e,t){return rw(4194308,4,e,t)},useInsertionEffect:function(e,t){return rw(4,2,e,t)},useMemo:function(e,t){var n=ru();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ru();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=rB.bind(null,n8,e),[r.memoizedState,e]},useRef:function(e){var t=ru();return e={current:e},t.memoizedState=e},useState:rx,useDebugValue:rP,useDeferredValue:function(e){var t=rx(e),n=t[0],r=t[1];return rA(function(){var t=n6.transition;n6.transition={};try{r(e)}finally{n6.transition=t}},[e]),n},useTransition:function(){var e=rx(!1),t=e[0];return e=rO.bind(null,e[1]),ru().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=n8,i=ru();if(nI){if(void 0===n)throw Error(f(407));n=n()}else{if(n=t(),null===i5)throw Error(f(349));0!=(30&n9)||rm(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,rA(ry.bind(null,r,a,e),[e]),r.flags|=2048,rb(9,rv.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ru(),t=i5.identifierPrefix;if(nI){var n=nS,r=nb;t=":"+t+"R"+(n=(r&~(1<<32-ty(r)-1)).toString(32)+n),0<(n=rr++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ri++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rW={readContext:t6,useCallback:rR,useContext:t6,useEffect:rC,useImperativeHandle:rD,useInsertionEffect:rT,useLayoutEffect:rE,useMemo:rL,useReducer:rd,useRef:rS,useState:function(){return rd(rh)},useDebugValue:rP,useDeferredValue:function(e){var t=rd(rh),n=t[0],r=t[1];return rC(function(){var t=n6.transition;n6.transition={};try{r(e)}finally{n6.transition=t}},[e]),n},useTransition:function(){return[rd(rh)[0],rc().memoizedState]},useMutableSource:rf,useSyncExternalStore:rg,useId:rk,unstable_isNewReconciler:!1},rj={readContext:t6,useCallback:rR,useContext:t6,useEffect:rC,useImperativeHandle:rD,useInsertionEffect:rT,useLayoutEffect:rE,useMemo:rL,useReducer:rp,useRef:rS,useState:function(){return rp(rh)},useDebugValue:rP,useDeferredValue:function(e){var t=rp(rh),n=t[0],r=t[1];return rC(function(){var t=n6.transition;n6.transition={};try{r(e)}finally{n6.transition=t}},[e]),n},useTransition:function(){return[rp(rh)[0],rc().memoizedState]},useMutableSource:rf,useSyncExternalStore:rg,useId:rk,unstable_isNewReconciler:!1};function rX(e,t){try{var n="",r=t;do n+=function(e){switch(e.tag){case 5:return e8(e.type);case 16:return e8("Lazy");case 13:return e8("Suspense");case 19:return e8("SuspenseList");case 0:case 2:case 15:return e=te(e.type,!1);case 11:return e=te(e.type.render,!1);case 1:return e=te(e.type,!0);default:return""}}(r),r=r.return;while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function rY(e,t){}var rJ="function"==typeof WeakMap?WeakMap:Map;function rZ(e,t,n){(n=nt(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){au||(au=!0,ac=r),rY(e,t)},n}function rq(e,t,n){(n=nt(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){rY(e,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){rY(e,t),"function"!=typeof r&&(null===ah?ah=new Set([this]):ah.add(this));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}function rK(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new rJ;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=aG.bind(null,e,t,n),t.then(e,e))}function rQ(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function r$(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=nt(-1,1)).tag=2,nn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function r0(e){e.flags|=4}function r1(e,t){if(null!==e&&e.child===t.child)return!0;if(0!=(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!=(12854&e.flags)||0!=(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(en)t=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)Y(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},r=function(){},i=function(e,t,n,r,i){(e=e.memoizedProps)!==r&&(n=Z(t.stateNode,n,e,r,i,nq(nY.current)),(t.updateQueue=n)&&r0(t))},a=function(e,t,n,r){n!==r&&r0(t)};else if(er){t=function(e,n,r,i){for(var a=n.child;null!==a;){if(5===a.tag){var s=a.stateNode;r&&i&&(s=ez(s,a.type,a.memoizedProps,a)),Y(e,s)}else if(6===a.tag)s=a.stateNode,r&&i&&(s=eU(s,a.memoizedProps,a)),Y(e,s);else if(4!==a.tag){if(22===a.tag&&null!==a.memoizedState)null!==(s=a.child)&&(s.return=a),t(e,a,!0,!0);else if(null!==a.child){a.child.return=a,a=a.child;continue}}if(a===n)break;for(;null===a.sibling;){if(null===a.return||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};var r2=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=ez(a,i.type,i.memoizedProps,i)),eB(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=eU(a,i.memoizedProps,i)),eB(e,a);else if(4!==i.tag){if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),r2(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};r=function(e,t){var n=t.stateNode;if(!r1(e,t)){var r=ek(e=n.containerInfo);r2(r,t,!1,!1),n.pendingChildren=r,r0(t),eN(e,r)}},i=function(e,n,r,i,a){var s=e.stateNode,u=e.memoizedProps;if((e=r1(e,n))&&u===i)n.stateNode=s;else{var c=n.stateNode,h=nq(nY.current),p=null;u!==i&&(p=Z(c,r,u,i,a,h)),e&&null===p?n.stateNode=s:(J(s=eO(s,p,r,u,i,n,e,c),r,i,a,h)&&r0(n),n.stateNode=s,e?r0(n):t(s,n,!1,!1))}},a=function(e,t,n,r){n!==r?(e=nq(nZ.current),n=nq(nY.current),t.stateNode=K(r,e,n,t),r0(t)):t.stateNode=e.stateNode}}else r=function(){},i=function(){},a=function(){};function r3(e,t){if(!nI)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function r5(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=0xe00000&i.subtreeFlags,r|=0xe00000&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}var r4=v.ReactCurrentOwner,r6=!1;function r9(e,t,n,r){t.child=null===e?nj(t,null,n,r):nW(t,e.child,n,r)}function r8(e,t,n,r,i){n=n.render;var a=t.ref;return(t4(t,i),r=rs(e,t,n,r,a,i),n=rl(),null===e||r6)?(nI&&n&&nA(t),t.flags|=1,r9(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ix(e,t,i))}function r7(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||aZ(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=aK(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ie(e,t,a,r,i))}if(a=e.child,0==(e.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:tZ)(s,r)&&e.ref===t.ref)return ix(e,t,i)}return t.flags|=1,(e=aq(a,r)).ref=t.ref,e.return=t,t.child=e}function ie(e,t,n,r,i){if(null!==e&&tZ(e.memoizedProps,r)&&e.ref===t.ref){if(r6=!1,0==(e.lanes&i))return t.lanes=e.lanes,ix(e,t,i);else 0!=(131072&e.flags)&&(r6=!0)}return ii(e,t,n,r,i)}function it(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},to(i8,i9),i9|=n;else{if(0==(0x40000000&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=0x40000000,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,to(i8,i9),i9|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,to(i8,i9),i9|=r}}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,to(i8,i9),i9|=r;return r9(e,t,i,n),t.child}function ir(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ii(e,t,n,r,i){var a=td(n)?tc:tl.current;return(a=th(t,a),t4(t,i),n=rs(e,t,n,r,a,i),r=rl(),null===e||r6)?(nI&&r&&nA(t),t.flags|=1,r9(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ix(e,t,i))}function ia(e,t,n,r,i){if(td(n)){var a=!0;tm(t)}else a=!1;if(t4(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),nh(t,n,r),np(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,u=t.memoizedProps;s.props=u;var c=s.context,h=n.contextType;h="object"==typeof h&&null!==h?t6(h):th(t,h=td(n)?tc:tl.current);var p=n.getDerivedStateFromProps,f="function"==typeof p||"function"==typeof s.getSnapshotBeforeUpdate;f||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(u!==r||c!==h)&&nd(t,s,r,h),t8=!1;var v=t.memoizedState;s.state=v,na(t,r,s,i),c=t.memoizedState,u!==r||v!==c||tu.current||t8?("function"==typeof p&&(nl(t,n,p,r),c=t.memoizedState),(u=t8||nc(t,n,u,r,v,c,h))?(f||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=h,r=u):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,ne(e,t),u=t.memoizedProps,h=t.type===t.elementType?u:tq(t.type,u),s.props=h,f=t.pendingProps,v=s.context,c="object"==typeof(c=n.contextType)&&null!==c?t6(c):th(t,c=td(n)?tc:tl.current);var y=n.getDerivedStateFromProps;(p="function"==typeof y||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(u!==f||v!==c)&&nd(t,s,r,c),t8=!1,v=t.memoizedState,s.state=v,na(t,r,s,i);var _=t.memoizedState;u!==f||v!==_||tu.current||t8?("function"==typeof y&&(nl(t,n,y,r),_=t.memoizedState),(h=t8||nc(t,n,h,r,v,_,c)||!1)?(p||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,_,c),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,_,c)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=_),s.props=r,s.state=_,s.context=c,r=h):("function"!=typeof s.componentDidUpdate||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return io(e,t,n,r,a,i)}function io(e,t,n,r,i,a){ir(e,t);var s=0!=(128&t.flags);if(!r&&!s)return i&&tv(t,n,!1),ix(e,t,a);r=t.stateNode,r4.current=t;var u=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=nW(t,e.child,null,a),t.child=nW(t,null,u,a)):r9(e,t,u,a),t.memoizedState=r.state,i&&tv(t,n,!0),t.child}function is(e){var t=e.stateNode;t.pendingContext?tf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&tf(e,t.context,!1),nK(e,t.containerInfo)}function il(e,t,n,r,i){return nF(),nz(i),t.flags|=256,r9(e,t,n,r),t.child}var iu={dehydrated:null,treeContext:null,retryLane:0};function ic(e){return{baseLanes:e,cachePool:null}}function ih(e,t,n){var r,i=t.pendingProps,a=n1.current,s=!1,u=0!=(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!=(2&a)),r?(s=!0,t.flags&=-129):(null===e||null!==e.memoizedState)&&(a|=1),to(n1,1&a),null===e)return(nk(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated))?(0==(1&t.mode)?t.lanes=1:ej(e)?t.lanes=8:t.lanes=0x40000000,null):(a=i.children,e=i.fallback,s?(i=t.mode,s=t.child,a={mode:"hidden",children:a},0==(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=a):s=a$(a,i,0,null),e=aQ(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=ic(n),t.memoizedState=iu,e):id(t,a));if(null!==(a=e.memoizedState)){if(null!==(r=a.dehydrated)){if(u)return 256&t.flags?(t.flags&=-257,im(e,t,n,Error(f(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,a=t.mode,i=a$({mode:"visible",children:i.children},a,0,null),s=aQ(s,a,n,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!=(1&t.mode)&&nW(t,e.child,null,n),t.child.memoizedState=ic(n),t.memoizedState=iu,s);if(0==(1&t.mode))t=im(e,t,n,null);else if(ej(r))t=im(e,t,n,Error(f(419)));else if(i=0!=(n&e.childLanes),r6||i){if(null!==(i=i5)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:s=32;break;case 0x20000000:s=0x10000000;break;default:s=0}0!==(i=0!=(s&(i.suspendedLanes|n))?0:s)&&i!==a.retryLane&&(a.retryLane=i,ab(e,i,-1))}aO(),t=im(e,t,n,Error(f(421)))}else eW(r)?(t.flags|=128,t.child=e.child,eX(r,t=aW.bind(null,e)),t=null):(n=a.treeContext,ei&&(nE=eq(r),nT=t,nI=!0,nP=null,nD=!1,null!==n&&(ny[n_++]=nb,ny[n_++]=nS,ny[n_++]=nx,nb=n.id,nS=n.overflow,nx=t)),t=id(t,t.pendingProps.children),t.flags|=4096);return t};}return s?(i=ig(e,t,i.children,i.fallback,n),s=t.child,a=e.child.memoizedState,s.memoizedState=null===a?ic(n):{baseLanes:a.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=iu,i):(n=ip(e,t,i.children,n),t.memoizedState=null,n)}function id(e,t){return(t=a$({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ip(e,t,n,r){var i=e.child;return e=i.sibling,n=aq(i,{mode:"visible",children:n}),0==(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function ig(e,t,n,r,i){var a=t.mode,s=(e=e.child).sibling,u={mode:"hidden",children:n};return 0==(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=aq(e,u)).subtreeFlags=0xe00000&e.subtreeFlags,null!==s?r=aq(s,r):(r=aQ(r,a,i,null),r.flags|=2),r.return=t,n.return=t,n.sibling=r,t.child=n,r}function im(e,t,n,r){return null!==r&&nz(r),nW(t,e.child,null,n),e=id(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function iv(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),t5(e.return,t,n)}function iy(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function i_(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(r9(e,t,r.children,n),0!=(2&(r=n1.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&iv(e,n,t);else if(19===e.tag)iv(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(to(n1,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(i=null,n=t.child;null!==n;)null!==(e=n.alternate)&&null===n2(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),iy(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===n2(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}iy(t,!0,n,null,a);break;case"together":iy(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ix(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),at|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(f(153));if(null!==t.child){for(n=aq(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=aq(e,e.pendingProps)).return=t;n.sibling=null}return t.child}var ib=!1,iS=!1,iw="function"==typeof WeakSet?WeakSet:Set,iM=null;function iA(e,t){var n=e.ref;if(null!==n){if("function"==typeof n)try{n(null)}catch(n){aH(e,t,n)}else n.current=null}}function iC(e,t,n){try{n()}catch(n){aH(e,t,n)}}var iT=!1;function iE(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&iC(t,n,a)}i=i.next}while(i!==r)}}function iI(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iD(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=H(n);else e=n;"function"==typeof t?t(e):t.current=e}}function iP(e,t,n){if(tH&&"function"==typeof tH.onCommitFiberUnmount)try{tH.onCommitFiberUnmount(tU,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!=(2&i)?iC(t,n,a):0!=(4&i)&&iC(t,n,a)),r=r.next}while(r!==e)}break;case 1:if(iA(t,n),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){aH(t,n,e)}break;case 5:iA(t,n);break;case 4:en?iB(e,t,n):er&&er&&(n=ek(t=t.stateNode.containerInfo),eF(t,n))}}function iR(e,t,n){for(var r=t;;)if(iP(e,r,n),null===r.child||en&&4===r.tag){if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function iL(e){return 5===e.tag||3===e.tag||4===e.tag}function iO(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||iL(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ik(e){if(en){e:{for(var t=e.return;null!==t;){if(iL(t))break e;t=t.return}throw Error(f(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(eE(t),n.flags&=-33),n=iO(e),function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?eM(r,t,n):e_(r,t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t);break;case 3:case 4:t=n.stateNode.containerInfo,n=iO(e),function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?eA(r,t,n):ex(r,t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t);break;default:throw Error(f(161))}}}function iB(e,t,n){for(var r,i,a=t,s=!1;;){if(!s){s=a.return;e:for(;;){if(null===s)throw Error(f(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===a.tag||6===a.tag)iR(e,a,n),i?eT(r,a.stateNode):eC(r,a.stateNode);else if(18===a.tag)i?e5(r,a.stateNode):e3(r,a.stateNode);else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(iP(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(s=!1)}a.sibling.return=a.return,a=a.sibling}}function iN(e,t){if(en){switch(t.tag){case 0:case 11:case 14:case 15:iE(3,t,t.return),iI(3,t),iE(5,t,t.return);return;case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&ew(n,a,i,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(f(162));n=t.memoizedProps,eb(t.stateNode,null!==e?e.memoizedProps:n,n);return;case 3:ei&&null!==e&&e.memoizedState.isDehydrated&&e1(t.stateNode.containerInfo);return;case 13:case 19:iF(t);return}throw Error(f(163))}switch(t.tag){case 0:case 11:case 14:case 15:iE(3,t,t.return),iI(3,t),iE(5,t,t.return);return;case 12:case 22:case 23:return;case 13:case 19:iF(t);return;case 3:ei&&null!==e&&e.memoizedState.isDehydrated&&e1(t.stateNode.containerInfo)}e:if(er){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:eF((t=t.stateNode).containerInfo,t.pendingChildren);break e}throw Error(f(163))}}function iF(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new iw),t.forEach(function(t){var r=aj.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function iz(e){for(;null!==iM;){var t=iM;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:iS||iI(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!iS){if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:tq(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}}var a=t.updateQueue;null!==a&&no(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=H(t.child.stateNode);break;case 1:n=t.child.stateNode}no(t,s,n)}break;case 5:var u=t.stateNode;null===n&&4&t.flags&&eS(u,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(ei&&null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var p=h.dehydrated;null!==p&&e2(p)}}}break;default:throw Error(f(163))}iS||512&t.flags&&iD(t)}catch(e){aH(t,t.return,e)}}if(t===e){iM=null;break}if(null!==(n=t.sibling)){n.return=t.return,iM=n;break}iM=t.return}}function iU(e){for(;null!==iM;){var t=iM;if(t===e){iM=null;break}var n=t.sibling;if(null!==n){n.return=t.return,iM=n;break}iM=t.return}}function iH(e){for(;null!==iM;){var t=iM;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iI(4,t)}catch(e){aH(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){aH(t,i,e)}}var a=t.return;try{iD(t)}catch(e){aH(t,a,e)}break;case 5:var s=t.return;try{iD(t)}catch(e){aH(t,s,e)}}}catch(e){aH(t,t.return,e)}if(t===e){iM=null;break}var u=t.sibling;if(null!==u){u.return=t.return,iM=u;break}iM=t.return}}var iG=0,iV=1,iW=2,ij=3,iX=4;if("function"==typeof Symbol&&Symbol.for){var iY=Symbol.for;iG=iY("selector.component"),iV=iY("selector.has_pseudo_class"),iW=iY("selector.role"),ij=iY("selector.test_id"),iX=iY("selector.text")}function iJ(e){var t=ea(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(f(364));return t}if(null===(e=ed(e)))throw Error(f(362));return e.stateNode.current}function iZ(e,t){switch(t.$$typeof){case iG:if(e.type===t.value)return!0;break;case iV:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],a=t[i];if(5!==r.tag||!eg(r)){for(;null!=a&&iZ(r,a);)a=t[++i];if(i===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,i),r=r.sibling}}t=!1}return t;case iW:if(5===e.tag&&em(e.stateNode,t.value))return!0;break;case iX:if((5===e.tag||6===e.tag)&&null!==(e=ef(e))&&0<=e.indexOf(t.value))return!0;break;case ij:if(5===e.tag&&"string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase())return!0;break;default:throw Error(f(365))}return!1}function iq(e){switch(e.$$typeof){case iG:return"<"+(O(e.value)||"Unknown")+">";case iV:return":has("+(iq(e)||"")+")";case iW:return'[role="'+e.value+'"]';case iX:return'"'+e.value+'"';case ij:return'[data-testname="'+e.value+'"]';default:throw Error(f(365))}}function iK(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],a=e[r++],s=t[a];if(5!==i.tag||!eg(i)){for(;null!=s&&iZ(i,s);)s=t[++a];if(a===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,a),i=i.sibling}}return n}function iQ(e,t){if(!eh)throw Error(f(363));e=iK(e=iJ(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)eg(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var i$=Math.ceil,i0=v.ReactCurrentDispatcher,i1=v.ReactCurrentOwner,i2=v.ReactCurrentBatchConfig,i3=0,i5=null,i4=null,i6=0,i9=0,i8=ti(0),i7=0,ae=null,at=0,an=0,ar=0,ai=null,aa=null,ao=0,as=1/0;function al(){as=tk()+500}var au=!1,ac=null,ah=null,ad=!1,ap=null,af=0,ag=0,am=null,av=-1,ay=0;function a_(){return 0!=(6&i3)?tk():-1!==av?av:av=tk()}function ax(e){return 0==(1&e.mode)?1:0!=(2&i3)&&0!==i6?i6&-i6:null!==tJ.transition?(0===ay&&(e=tb,0==(4194240&(tb<<=1))&&(tb=64),ay=e),ay):0!==(e=tI)?e:es()}function ab(e,t,n){if(50<ag)throw ag=0,am=null,Error(f(185));var r=aS(e,t);return null===r?null:(tT(r,t,n),(0==(2&i3)||r!==i5)&&(r===i5&&(0==(2&i3)&&(an|=t),4===i7&&aT(r,i6)),aw(r,n),1===t&&0===i3&&0==(1&e.mode)&&(al(),tW&&tY())),r)}function aS(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function aw(e,t){var n,r=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-ty(a),u=1<<s,c=i[s];-1===c?(0==(u&n)||0!=(u&r))&&(i[s]=function(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}(u,t)):c<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var i=tM(e,e===i5?i6:0);if(0===i)null!==r&&tR(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=r&&tR(r),1===t){;0===e.tag?(n=aE.bind(null,e),tW=!0,tX(n)):tX(aE.bind(null,e)),eu?ec(function(){0===i3&&tY()}):tP(tB,tY),r=null}else{switch(tD(i)){case 1:r=tB;break;case 4:r=tN;break;case 16:default:r=tF;break;case 0x20000000:r=tz}r=function(e,t){return tP(e,t)}(r,aM.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function aM(e,t){if(av=-1,ay=0,0!=(6&i3))throw Error(f(327));var n=e.callbackNode;if(az()&&e.callbackNode!==n)return null;var r=tM(e,e===i5?i6:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=ak(e,r);else{t=r;var i=i3;i3|=2;var a=aL();for((i5!==e||i6!==t)&&(al(),aP(e,t));;)try{(function(){for(;null!==i4&&!tL();)aB(i4)})();break}catch(t){aR(e,t)}t1(),i0.current=a,i3=i,null!==i4?t=0:(i5=null,i6=0,t=i7)}if(0!==t){if(2===t&&0!==(i=tA(e))&&(r=i,t=aA(e,i)),1===t)throw n=ae,aP(e,0),aT(e,r),aw(e,tk()),n;if(6===t)aT(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!tG(a(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ak(e,r))&&0!==(a=tA(e))&&(r=a,t=aA(e,a)),1===t))throw n=ae,aP(e,0),aT(e,r),aw(e,tk()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(f(345));case 2:case 5:aF(e,aa);break;case 3:if(aT(e,r),(0x7c00000&r)===r&&10<(t=ao+500-tk())){if(0!==tM(e,0))break;if(((i=e.suspendedLanes)&r)!==r){a_(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Q(aF.bind(null,e,aa),t);break}aF(e,aa);break;case 4:if(aT(e,r),(4194240&r)===r)break;for(i=-1,t=e.eventTimes;0<r;){var s=31-ty(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=tk()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*i$(r/1960))-r)){e.timeoutHandle=Q(aF.bind(null,e,aa),r);break}aF(e,aa);break;default:throw Error(f(329))}}}return aw(e,tk()),e.callbackNode===n?aM.bind(null,e):null}function aA(e,t){var n=ai;return e.current.memoizedState.isDehydrated&&(aP(e,t).flags|=256),2!==(e=ak(e,t))&&(t=aa,aa=n,null!==t&&aC(t)),e}function aC(e){null===aa?aa=e:aa.push.apply(aa,e)}function aT(e,t){for(t&=~ar,t&=~an,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ty(t),r=1<<n;e[n]=-1,t&=~r}}function aE(e){if(0!=(6&i3))throw Error(f(327));az();var t=tM(e,0);if(0==(1&t))return aw(e,tk()),null;var n=ak(e,t);if(0!==e.tag&&2===n){var r=tA(e);0!==r&&(t=r,n=aA(e,r))}if(1===n)throw n=ae,aP(e,0),aT(e,t),aw(e,tk()),n;if(6===n)throw Error(f(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,aF(e,aa),aw(e,tk()),null}function aI(e){null!==ap&&0===ap.tag&&0==(6&i3)&&az();var t=i3;i3|=1;var n=i2.transition,r=tI;try{if(i2.transition=null,tI=1,e)return e()}finally{tI=r,i2.transition=n,0==(6&(i3=t))&&tY()}}function aD(){i9=i8.current,ta(i8)}function aP(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==ee&&(e.timeoutHandle=ee,$(n)),null!==i4)for(n=i4.return;null!==n;){var r=n;switch(nC(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&tp();break;case 3:nQ(),ta(tu),ta(tl),n5();break;case 5:n0(r);break;case 4:nQ();break;case 13:case 19:ta(n1);break;case 10:t3(r.type._context);break;case 22:case 23:aD()}n=n.return}if(i5=e,i4=e=aq(e.current,null),i6=i9=t,i7=0,ae=null,ar=an=at=0,aa=ai=null,null!==t9){for(t=0;t<t9.length;t++)if(null!==(r=(n=t9[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}t9=null}return e}function aR(e,t){for(;;){var n=i4;try{if(t1(),n4.current=rG,rt){for(var r=n8.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}rt=!1}if(n9=0,re=n7=n8=null,rn=!1,rr=0,i1.current=null,null===n||null===n.return){i7=1,ae=t,i4=null;break}e:{var a=e,s=n.return,u=n,c=t;if(t=i6,u.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var h=c,p=u,v=p.tag;if(0==(1&p.mode)&&(0===v||11===v||15===v)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var _=rQ(s);if(null!==_){_.flags&=-257,r$(_,s,u,a,t),1&_.mode&&rK(a,h,t),t=_,c=h;var x=t.updateQueue;if(null===x){var b=new Set;b.add(c),t.updateQueue=b}else x.add(c);break e}if(0==(1&t)){rK(a,h,t),aO();break e}c=Error(f(426))}else if(nI&&1&u.mode){var S=rQ(s);if(null!==S){0==(65536&S.flags)&&(S.flags|=256),r$(S,s,u,a,t),nz(c);break e}}a=c,4!==i7&&(i7=2),null===ai?ai=[a]:ai.push(a),c=rX(c,u),u=s;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var w=rZ(u,c,t);ni(u,w);break e;case 1:a=c;var M=u.type,A=u.stateNode;if(0==(128&u.flags)&&("function"==typeof M.getDerivedStateFromError||null!==A&&"function"==typeof A.componentDidCatch&&(null===ah||!ah.has(A)))){u.flags|=65536,t&=-t,u.lanes|=t;var C=rq(u,a,t);ni(u,C);break e}}u=u.return}while(null!==u)}aN(n)}catch(e){t=e,i4===n&&null!==n&&(i4=n=n.return);continue}break}}function aL(){var e=i0.current;return i0.current=rG,null===e?rG:e}function aO(){(0===i7||3===i7||2===i7)&&(i7=4),null===i5||0==(0xfffffff&at)&&0==(0xfffffff&an)||aT(i5,i6)}function ak(e,t){var n=i3;i3|=2;var r=aL();for(i5===e&&i6===t||aP(e,t);;)try{(function(){for(;null!==i4;)aB(i4)})();break}catch(t){aR(e,t)}if(t1(),i3=n,i0.current=r,null!==i4)throw Error(f(261));return i5=null,i6=0,i7}function aB(e){var t=s(e.alternate,e,i9);e.memoizedProps=e.pendingProps,null===t?aN(e):i4=t,i1.current=null}function aN(e){var n=e;do{var s=n.alternate;if(e=n.return,0==(32768&n.flags)){if(null!==(s=function(e,n,s){var u=n.pendingProps;switch(nC(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return r5(n),null;case 1:case 17:return td(n.type)&&tp(),r5(n),null;case 3:return u=n.stateNode,nQ(),ta(tu),ta(tl),n5(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(null===e||null===e.child)&&(nN(n)?r0(n):null===e||e.memoizedState.isDehydrated&&0==(256&n.flags)||(n.flags|=1024,null!==nP&&(aC(nP),nP=null))),r(e,n),r5(n),null;case 5:n0(n),s=nq(nZ.current);var c=n.type;if(null!==e&&null!=n.stateNode)i(e,n,c,u,s),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!u){if(null===n.stateNode)throw Error(f(166));return r5(n),null}if(e=nq(nY.current),nN(n)){if(!ei)throw Error(f(175));e=eK(n.stateNode,n.type,n.memoizedProps,s,e,n,!nD),n.updateQueue=e,null!==e&&r0(n)}else{var h=X(c,u,s,e,n);t(h,n,!1,!1),n.stateNode=h,J(h,c,u,s,e)&&r0(n)}null!==n.ref&&(n.flags|=512,n.flags|=2097152)}return r5(n),null;case 6:if(e&&null!=n.stateNode)a(e,n,e.memoizedProps,u);else{if("string"!=typeof u&&null===n.stateNode)throw Error(f(166));if(e=nq(nZ.current),s=nq(nY.current),nN(n)){if(!ei)throw Error(f(176));if(e=n.stateNode,(s=eQ(e,u=n.memoizedProps,n,!nD))&&null!==(c=nT))switch(h=0!=(1&c.mode),c.tag){case 3:e6(c.stateNode.containerInfo,e,u,h);break;case 5:e9(c.type,c.memoizedProps,c.stateNode,e,u,h)}s&&r0(n)}else n.stateNode=K(u,e,s,n)}return r5(n),null;case 13:if(ta(n1),u=n.memoizedState,nI&&null!==nE&&0!=(1&n.mode)&&0==(128&n.flags)){for(e=nE;e;)e=eY(e);return nF(),n.flags|=98560,n}if(null!==u&&null!==u.dehydrated){if(u=nN(n),null===e){if(!u)throw Error(f(318));if(!ei)throw Error(f(344));if(!(e=null!==(e=n.memoizedState)?e.dehydrated:null))throw Error(f(317));e$(e,n)}else nF(),0==(128&n.flags)&&(n.memoizedState=null),n.flags|=4;return r5(n),null}if(null!==nP&&(aC(nP),nP=null),0!=(128&n.flags))return n.lanes=s,n;return u=null!==u,s=!1,null===e?nN(n):s=null!==e.memoizedState,u&&!s&&(n.child.flags|=8192,0!=(1&n.mode)&&(null===e||0!=(1&n1.current)?0===i7&&(i7=3):aO())),null!==n.updateQueue&&(n.flags|=4),r5(n),null;case 4:return nQ(),r(e,n),null===e&&eo(n.stateNode.containerInfo),r5(n),null;case 10:return t3(n.type._context),r5(n),null;case 19:if(ta(n1),null===(c=n.memoizedState))return r5(n),null;if(u=0!=(128&n.flags),null===(h=c.rendering)){if(u)r3(c,!1);else{if(0!==i7||null!==e&&0!=(128&e.flags))for(e=n.child;null!==e;){if(null!==(h=n2(e))){for(n.flags|=128,r3(c,!1),null!==(e=h.updateQueue)&&(n.updateQueue=e,n.flags|=4),n.subtreeFlags=0,e=s,u=n.child;null!==u;)s=u,c=e,s.flags&=0xe00002,null===(h=s.alternate)?(s.childLanes=0,s.lanes=c,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=h.childLanes,s.lanes=h.lanes,s.child=h.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=h.memoizedProps,s.memoizedState=h.memoizedState,s.updateQueue=h.updateQueue,s.type=h.type,c=h.dependencies,s.dependencies=null===c?null:{lanes:c.lanes,firstContext:c.firstContext}),u=u.sibling;return to(n1,1&n1.current|2),n.child}e=e.sibling}null!==c.tail&&tk()>as&&(n.flags|=128,u=!0,r3(c,!1),n.lanes=4194304)}}else{if(!u){if(null!==(e=n2(h))){if(n.flags|=128,u=!0,null!==(e=e.updateQueue)&&(n.updateQueue=e,n.flags|=4),r3(c,!0),null===c.tail&&"hidden"===c.tailMode&&!h.alternate&&!nI)return r5(n),null}else 2*tk()-c.renderingStartTime>as&&0x40000000!==s&&(n.flags|=128,u=!0,r3(c,!1),n.lanes=4194304)}c.isBackwards?(h.sibling=n.child,n.child=h):(null!==(e=c.last)?e.sibling=h:n.child=h,c.last=h)}if(null!==c.tail)return n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=tk(),n.sibling=null,e=n1.current,to(n1,u?1&e|2:1&e),n;return r5(n),null;case 22:case 23:return aD(),u=null!==n.memoizedState,null!==e&&null!==e.memoizedState!==u&&(n.flags|=8192),u&&0!=(1&n.mode)?0!=(0x40000000&i9)&&(r5(n),en&&6&n.subtreeFlags&&(n.flags|=8192)):r5(n),null;case 24:case 25:return null}throw Error(f(156,n.tag))}(s,n,i9))){i4=s;return}}else{if(null!==(s=function(e,t){switch(nC(t),t.tag){case 1:return td(t.type)&&tp(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return nQ(),ta(tu),ta(tl),n5(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return n0(t),null;case 13:if(ta(n1),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(f(340));nF()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ta(n1),null;case 4:return nQ(),null;case 10:return t3(t.type._context),null;case 22:case 23:return aD(),null;default:return null}}(s,n))){s.flags&=32767,i4=s;return}if(null!==e)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{i7=6,i4=null;return}}if(null!==(n=n.sibling)){i4=n;return}i4=n=e}while(null!==n);0===i7&&(i7=5)}function aF(e,t){var n=tI,r=i2.transition;try{i2.transition=null,tI=1,function(e,t,n){do az();while(null!==ap);if(0!=(6&i3))throw Error(f(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(f(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(!function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ty(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,a),e===i5&&(i4=i5=null,i6=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||ad||(ad=!0,function(e,t){tP(e,t)}(tF,function(){return az(),null})),a=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||a){a=i2.transition,i2.transition=null;var s,u,c,h=tI;tI=1;var p=i3;i3|=4,i1.current=null,!function(e,t){for(W(e.containerInfo),iM=t;null!==iM;)if(t=(e=iM).child,0!=(1028&e.subtreeFlags)&&null!==t)t.return=e,iM=t;else for(;null!==iM;){e=iM;try{var n=e.alternate;if(0!=(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,a=e.stateNode,s=a.getSnapshotBeforeUpdate(e.elementType===e.type?r:tq(e.type,r),i);a.__reactInternalSnapshotBeforeUpdate=s}break;case 3:en&&eL(e.stateNode.containerInfo);break;default:throw Error(f(163))}}catch(t){aH(e,e.return,t)}if(null!==(t=e.sibling)){t.return=e.return,iM=t;break}iM=e.return}n=iT,iT=!1}(e,r),!function(e,t){for(iM=t;null!==iM;){var n=(t=iM).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e;en?iB(a,i,t):iR(a,i,t);var s=i.alternate;null!==s&&(s.return=null),i.return=null}catch(e){aH(i,t,e)}}if(n=t.child,0!=(12854&t.subtreeFlags)&&null!==n)n.return=t,iM=n;else for(;null!==iM;){t=iM;try{var u=t.flags;if(32&u&&en&&eE(t.stateNode),512&u){var c=t.alternate;if(null!==c){var h=c.ref;null!==h&&("function"==typeof h?h(null):h.current=null)}}if(8192&u)switch(t.tag){case 13:if(null!==t.memoizedState){var p=t.alternate;(null===p||null===p.memoizedState)&&(ao=tk())}break;case 22:var f=null!==t.memoizedState,v=t.alternate,y=null!==v&&null!==v.memoizedState;if(n=t,en){e:if(r=n,i=f,a=null,en)for(var _=r;;){if(5===_.tag){if(null===a){a=_;var x=_.stateNode;i?eI(x):eP(_.stateNode,_.memoizedProps)}}else if(6===_.tag){if(null===a){var b=_.stateNode;i?eD(b):eR(b,_.memoizedProps)}}else if((22!==_.tag&&23!==_.tag||null===_.memoizedState||_===r)&&null!==_.child){_.child.return=_,_=_.child;continue}if(_===r)break;for(;null===_.sibling;){if(null===_.return||_.return===r)break e;a===_&&(a=null),_=_.return}a===_&&(a=null),_.sibling.return=_.return,_=_.sibling}}if(f&&!y&&0!=(1&n.mode)){iM=n;for(var S=n.child;null!==S;){for(n=iM=S;null!==iM;){var w=(r=iM).child;switch(r.tag){case 0:case 11:case 14:case 15:iE(4,r,r.return);break;case 1:iA(r,r.return);var M=r.stateNode;if("function"==typeof M.componentWillUnmount){var A=r.return;try{M.props=r.memoizedProps,M.state=r.memoizedState,M.componentWillUnmount()}catch(e){aH(r,A,e)}}break;case 5:iA(r,r.return);break;case 22:if(null!==r.memoizedState){iU(n);continue}}null!==w?(w.return=r,iM=w):iU(n)}S=S.sibling}}}switch(4102&u){case 2:ik(t),t.flags&=-3;break;case 6:ik(t),t.flags&=-3,iN(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,iN(t.alternate,t);break;case 4:iN(t.alternate,t)}}catch(e){aH(t,t.return,e)}if(null!==(n=t.sibling)){n.return=t.return,iM=n;break}iM=t.return}}}(e,r,i),j(e.containerInfo),e.current=r,s=r,u=e,c=i,iM=s,function e(t,n,r){for(var i=0!=(1&t.mode);null!==iM;){var a=iM,s=a.child;if(22===a.tag&&i){var u=null!==a.memoizedState||ib;if(!u){var c=a.alternate,h=null!==c&&null!==c.memoizedState||iS;c=ib;var p=iS;if(ib=u,(iS=h)&&!p)for(iM=a;null!==iM;)h=(u=iM).child,22===u.tag&&null!==u.memoizedState?iH(a):null!==h?(h.return=u,iM=h):iH(a);for(;null!==s;)iM=s,e(s,n,r),s=s.sibling;iM=a,ib=c,iS=p}iz(t,n,r)}else 0!=(8772&a.subtreeFlags)&&null!==s?(s.return=a,iM=s):iz(t,n,r)}}(s,u,c),tO(),i3=p,tI=h,i2.transition=a}else e.current=r;if(ad&&(ad=!1,ap=e,af=i),0===(a=e.pendingLanes)&&(ah=null),!function(e){if(tH&&"function"==typeof tH.onCommitFiberRoot)try{tH.onCommitFiberRoot(tU,e,void 0,128==(128&e.current.flags))}catch(e){}}(r.stateNode,n),aw(e,tk()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(au)throw au=!1,e=ac,ac=null,e;0!=(1&af)&&0!==e.tag&&az(),0!=(1&(a=e.pendingLanes))?e===am?ag++:(ag=0,am=e):ag=0,tY()}(e,t,n)}finally{i2.transition=r,tI=n}return null}function az(){if(null!==ap){var e=tD(af),t=i2.transition,n=tI;try{if(i2.transition=null,tI=16>e?16:e,null===ap)var r=!1;else{if(e=ap,ap=null,af=0,0!=(6&i3))throw Error(f(331));var i=i3;for(i3|=4,iM=e.current;null!==iM;){var a=iM,s=a.child;if(0!=(16&iM.flags)){var u=a.deletions;if(null!==u){for(var c=0;c<u.length;c++){var h=u[c];for(iM=h;null!==iM;){var p=iM;switch(p.tag){case 0:case 11:case 15:iE(8,p,a)}var v=p.child;if(null!==v)v.return=p,iM=v;else for(;null!==iM;){var y=(p=iM).sibling,_=p.return;if(!function e(t){var n=t.alternate;null!==n&&(t.alternate=null,e(n)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(n=t.stateNode)&&el(n),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}(p),p===h){iM=null;break}if(null!==y){y.return=_,iM=y;break}iM=_}}}var x=a.alternate;if(null!==x){var b=x.child;if(null!==b){x.child=null;do{var S=b.sibling;b.sibling=null,b=S}while(null!==b)}}iM=a}}if(0!=(2064&a.subtreeFlags)&&null!==s)s.return=a,iM=s;else for(;null!==iM;){if(a=iM,0!=(2048&a.flags))switch(a.tag){case 0:case 11:case 15:iE(9,a,a.return)}var w=a.sibling;if(null!==w){w.return=a.return,iM=w;break}iM=a.return}}var M=e.current;for(iM=M;null!==iM;){var A=(s=iM).child;if(0!=(2064&s.subtreeFlags)&&null!==A)A.return=s,iM=A;else for(s=M;null!==iM;){if(u=iM,0!=(2048&u.flags))try{switch(u.tag){case 0:case 11:case 15:iI(9,u)}}catch(e){aH(u,u.return,e)}if(u===s){iM=null;break}var C=u.sibling;if(null!==C){C.return=u.return,iM=C;break}iM=u.return}}if(i3=i,tY(),tH&&"function"==typeof tH.onPostCommitFiberRoot)try{tH.onPostCommitFiberRoot(tU,e)}catch(e){}r=!0}return r}finally{tI=n,i2.transition=t}}return!1}function aU(e,t,n){t=rZ(e,t=rX(n,t),1),nn(e,t),t=a_(),null!==(e=aS(e,1))&&(tT(e,1,t),aw(e,t))}function aH(e,t,n){if(3===e.tag)aU(e,e,n);else for(;null!==t;){if(3===t.tag){aU(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ah||!ah.has(r))){e=rq(t,e=rX(n,e),1),nn(t,e),e=a_(),null!==(t=aS(t,1))&&(tT(t,1,e),aw(t,e));break}}t=t.return}}function aG(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=a_(),e.pingedLanes|=e.suspendedLanes&n,i5===e&&(i6&n)===n&&(4===i7||3===i7&&(0x7c00000&i6)===i6&&500>tk()-ao?aP(e,0):ar|=n),aw(e,t)}function aV(e,t){0===t&&(0==(1&e.mode)?t=1:(t=tS,0==(0x7c00000&(tS<<=1))&&(tS=4194304)));var n=a_();null!==(e=aS(e,t))&&(tT(e,t,n),aw(e,n))}function aW(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),aV(e,n)}function aj(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(f(314))}null!==r&&r.delete(t),aV(e,n)}function aX(e,t){return tP(e,t)}function aY(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function aJ(e,t,n,r){return new aY(e,t,n,r)}function aZ(e){return!(!(e=e.prototype)||!e.isReactComponent)}s=function(e,t,n){if(null!==e){if(e.memoizedProps!==t.pendingProps||tu.current)r6=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return r6=!1,function(e,t,n){switch(t.tag){case 3:is(t),nF();break;case 5:n$(t);break;case 1:td(t.type)&&tm(t);break;case 4:nK(t,t.stateNode.containerInfo);break;case 10:t2(t,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r){if(null!==r.dehydrated)return to(n1,1&n1.current),t.flags|=128,null;if(0!=(n&t.child.childLanes))return ih(e,t,n);return to(n1,1&n1.current),null!==(e=ix(e,t,n))?e.sibling:null}to(n1,1&n1.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return i_(e,t,n);t.flags|=128}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),to(n1,n1.current),!r)return null;break;case 22:case 23:return t.lanes=0,it(e,t,n)}return ix(e,t,n)}(e,t,n);r6=0!=(131072&e.flags)}}else r6=!1,nI&&0!=(1048576&t.flags)&&nM(t,nv,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=th(t,tl.current);t4(t,n),i=rs(null,t,r,e,i,n);var a=rl();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,td(r)?(a=!0,tm(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,t7(t),i.updater=nu,t.stateNode=i,i._reactInternals=t,np(t,r,e,n),t=io(null,t,r,!0,a,n)):(t.tag=0,nI&&a&&nA(t),r9(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return aZ(e)?1:0;if(null!=e){if((e=e.$$typeof)===A)return 11;if(e===I)return 14}return 2}(r),e=tq(r,e),i){case 0:t=ii(null,t,r,e,n);break e;case 1:t=ia(null,t,r,e,n);break e;case 11:t=r8(null,t,r,e,n);break e;case 14:t=r7(null,t,r,tq(r.type,e),n);break e}throw Error(f(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tq(r,i),ii(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tq(r,i),ia(e,t,r,i,n);case 3:e:{if(is(t),null===e)throw Error(f(387));r=t.pendingProps,i=(a=t.memoizedState).element,ne(e,t),na(t,r,null,n);var s=t.memoizedState;if(r=s.element,ei&&a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=il(e,t,r,n,i=Error(f(423)));break e}else if(r!==i){t=il(e,t,r,n,i=Error(f(424)));break e}else for(ei&&(nE=eZ(t.stateNode.containerInfo),nT=t,nI=!0,nP=null,nD=!1),n=nj(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(nF(),r===i){t=ix(e,t,n);break e}r9(e,t,r,n)}t=t.child}return t;case 5:return n$(t),null===e&&nk(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,q(r,i)?s=null:null!==a&&q(r,a)&&(t.flags|=32),ir(e,t),r9(e,t,s,n),t.child;case 6:return null===e&&nk(t),null;case 13:return ih(e,t,n);case 4:return nK(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=nW(t,null,r,n):r9(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tq(r,i),r8(e,t,r,i,n);case 7:return r9(e,t,t.pendingProps,n),t.child;case 8:case 12:return r9(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,t2(t,r,s=i.value),null!==a){if(tG(a.value,s)){if(a.children===i.children&&!tu.current){t=ix(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var u=a.dependencies;if(null!==u){s=a.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=nt(-1,n&-n)).tag=2;var h=a.updateQueue;if(null!==h){var p=(h=h.shared).pending;null===p?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),t5(a.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(f(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),t5(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}}r9(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,t4(t,n),r=r(i=t6(i)),t.flags|=1,r9(e,t,r,n),t.child;case 14:return i=tq(r=t.type,t.pendingProps),i=tq(r.type,i),r7(e,t,r,i,n);case 15:return ie(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tq(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,td(r)?(e=!0,tm(t)):e=!1,t4(t,n),nh(t,r,i),np(t,r,i,n),io(null,t,r,!0,e,n);case 19:return i_(e,t,n);case 22:return it(e,t,n)}throw Error(f(156,t.tag))};function aq(e,t){var n=e.alternate;return null===n?((n=aJ(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=0xe00000&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function aK(e,t,n,r,i,a){var s=2;if(r=e,"function"==typeof e)aZ(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case x:return aQ(n.children,i,a,t);case b:s=8,i|=8;break;case S:return(e=aJ(12,n,t,2|i)).elementType=S,e.lanes=a,e;case C:return(e=aJ(13,n,t,i)).elementType=C,e.lanes=a,e;case T:return(e=aJ(19,n,t,i)).elementType=T,e.lanes=a,e;case P:return a$(n,i,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case w:s=10;break e;case M:s=9;break e;case A:s=11;break e;case I:s=14;break e;case D:s=16,r=null;break e}throw Error(f(130,null==e?e:typeof e,""))}return(t=aJ(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function aQ(e,t,n,r){return(e=aJ(7,e,r,t)).lanes=n,e}function a$(e,t,n,r){return(e=aJ(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={},e}function a0(e,t,n){return(e=aJ(6,e,null,t)).lanes=n,e}function a1(e,t,n){return(t=aJ(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function a2(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ee,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tC(0),this.expirationTimes=tC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tC(0),this.identifierPrefix=r,this.onRecoverableError=i,ei&&(this.mutableSourceEagerHydrationData=null)}function a3(e,t,n,r,i,a,s,u,c){return e=new a2(e,t,n,u,c),1===t?(t=1,!0===a&&(t|=8)):t=0,a=aJ(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},t7(a),e}function a5(e){if(!e)return ts;e=e._reactInternals;e:{if(k(e)!==e||1!==e.tag)throw Error(f(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(td(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(f(171))}if(1===e.tag){var n=e.type;if(td(n))return tg(e,n,t)}return t}function a4(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(f(188));throw Error(f(268,e=Object.keys(e).join(",")))}return null===(e=F(t))?null:e.stateNode}function a6(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function a9(e,t){a6(e,t),(e=e.alternate)&&a6(e,t)}function a8(e){return null===(e=F(e))?null:e.stateNode}function a7(){return null}return u.attemptContinuousHydration=function(e){13===e.tag&&(ab(e,0x8000000,a_()),a9(e,0x8000000))},u.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=a_(),n=ax(e);ab(e,n,t),a9(e,n)}},u.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=tw(t.pendingLanes);0!==n&&(tE(t,1|n),aw(t,tk()),0==(6&i3)&&(al(),tY()))}break;case 13:var r=a_();aI(function(){return ab(e,1,r)}),a9(e,1)}},u.batchedUpdates=function(e,t){var n=i3;i3|=1;try{return e(t)}finally{0===(i3=n)&&(al(),tW&&tY())}},u.createComponentSelector=function(e){return{$$typeof:iG,value:e}},u.createContainer=function(e,t,n,r,i,a,s){return a3(e,t,!1,null,n,r,i,a,s)},u.createHasPseudoClassSelector=function(e){return{$$typeof:iV,value:e}},u.createHydrationContainer=function(e,t,n,r,i,a,s,u,c){return(e=a3(n,r,!0,e,i,a,s,u,c)).context=a5(null),n=e.current,r=a_(),(a=nt(r,i=ax(n))).callback=null!=t?t:null,nn(n,a),e.current.lanes=i,tT(e,i,r),aw(e,r),e},u.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},u.createRoleSelector=function(e){return{$$typeof:iW,value:e}},u.createTestNameSelector=function(e){return{$$typeof:ij,value:e}},u.createTextSelector=function(e){return{$$typeof:iX,value:e}},u.deferredUpdates=function(e){var t=tI,n=i2.transition;try{return i2.transition=null,tI=16,e()}finally{tI=t,i2.transition=n}},u.discreteUpdates=function(e,t,n,r,i){var a=tI,s=i2.transition;try{return i2.transition=null,tI=1,e(t,n,r,i)}finally{tI=a,i2.transition=s,0===i3&&al()}},u.findAllNodes=iQ,u.findBoundingRects=function(e,t){if(!eh)throw Error(f(363));t=iQ(e,t),e=[];for(var n=0;n<t.length;n++)e.push(ep(t[n]));for(t=e.length-1;0<t;t--){n=e[t];for(var r=n.x,i=r+n.width,a=n.y,s=a+n.height,u=t-1;0<=u;u--)if(t!==u){var c=e[u],h=c.x,p=h+c.width,v=c.y,y=v+c.height;if(r>=h&&a>=v&&i<=p&&s<=y){e.splice(t,1);break}if(r!==h||n.width!==c.width||y<a||v>s){if(!(a!==v||n.height!==c.height||p<r||h>i)){h>r&&(c.width+=h-r,c.x=r),p<i&&(c.width=i-h),e.splice(t,1);break}}else{v>a&&(c.height+=v-a,c.y=a),y<s&&(c.height=s-v),e.splice(t,1);break}}}return e},u.findHostInstance=a4,u.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=N(e))?function e(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){if(4!==t.tag){var n=e(t);if(null!==n)return n}t=t.sibling}return null}(e):null)?null:e.stateNode},u.findHostInstanceWithWarning=function(e){return a4(e)},u.flushControlled=function(e){var t=i3;i3|=1;var n=i2.transition,r=tI;try{i2.transition=null,tI=1,e()}finally{tI=r,i2.transition=n,0===(i3=t)&&(al(),tY())}},u.flushPassiveEffects=az,u.flushSync=aI,u.focusWithin=function(e,t){if(!eh)throw Error(f(363));for(t=Array.from(t=iK(e=iJ(e),t)),e=0;e<t.length;){var n=t[e++];if(!eg(n)){if(5===n.tag&&ev(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},u.getCurrentUpdatePriority=function(){return tI},u.getFindAllNodesFailureDescription=function(e,t){if(!eh)throw Error(f(363));var n=0,r=[];e=[iJ(e),0];for(var i=0;i<e.length;){var a=e[i++],s=e[i++],u=t[s];if((5!==a.tag||!eg(a))&&(iZ(a,u)&&(r.push(iq(u)),++s>n&&(n=s)),s<t.length))for(a=a.child;null!==a;)e.push(a,s),a=a.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(iq(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},u.getPublicRootInstance=function(e){if(!(e=e.current).child)return null;if(5===e.child.tag)return H(e.child.stateNode);return e.child.stateNode},u.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:a8,findFiberByHostInstance:e.findFiberByHostInstance||a7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{tU=t.inject(e),tH=t}catch(e){}e=!!t.checkDCE}}return e},u.isAlreadyRendering=function(){return!1},u.observeVisibleRects=function(e,t,n,r){if(!eh)throw Error(f(363));var i=ey(e=iQ(e,t),n,r).disconnect;return{disconnect:function(){i()}}},u.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},u.runWithPriority=function(e,t){var n=tI;try{return tI=e,t()}finally{tI=n}},u.shouldError=function(){return null},u.shouldSuspend=function(){return!1},u.updateContainer=function(e,t,n,r){var i=t.current,a=a_(),s=ax(i);return n=a5(n),null===t.context?t.context=n:t.pendingContext=n,(t=nt(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),nn(i,t),null!==(e=ab(i,s,a))&&nr(e,i,s),s},u}},611:function(e,t,n){"use strict";e.exports=n(2514)},6191:function(e,t,n){"use strict";e.exports=n(1041)},8193:function(e,t,n){"use strict";var r=n(5271),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(e,t,n){var r,a={},h=null,p=null;for(r in void 0!==n&&(h=""+n),void 0!==t.key&&(h=""+t.key),void 0!==t.ref&&(p=t.ref),t)s.call(t,r)&&!c.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:h,ref:p,props:a,_owner:u.current}}t.Fragment=a,t.jsx=h,t.jsxs=h},7596:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.iterator,_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,b={};function S(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||_}function w(){}function M(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||_}S.prototype.isReactComponent={},S.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},S.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=S.prototype;var A=M.prototype=new w;A.constructor=M,x(A,S.prototype),A.isPureReactComponent=!0;var C=Array.isArray,T=Object.prototype.hasOwnProperty,I={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,r){var i,a={},s=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(s=""+t.key),t)T.call(t,i)&&!D.hasOwnProperty(i)&&(a[i]=t[i]);var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){for(var h=Array(c),p=0;p<c;p++)h[p]=arguments[p+2];a.children=h}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===a[i]&&(a[i]=c[i]);return{$$typeof:n,type:e,key:s,ref:u,props:a,_owner:I.current}}function R(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var L=/\/+/g;function O(e,t){var n,r;return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36)}function k(e,t,i){if(null==e)return e;var a=[],s=0;return!function e(t,i,a,s,u){var c,h,p,f=typeof t;("undefined"===f||"boolean"===f)&&(t=null);var v=!1;if(null===t)v=!0;else switch(f){case"string":case"number":v=!0;break;case"object":switch(t.$$typeof){case n:case r:v=!0}}if(v){;return u=u(v=t),t=""===s?"."+O(v,0):s,C(u)?(a="",null!=t&&(a=t.replace(L,"$&/")+"/"),e(u,i,a,"",function(e){return e})):null!=u&&(R(u)&&(c=u,h=a+(!u.key||v&&v.key===u.key?"":(""+u.key).replace(L,"$&/")+"/")+t,u={$$typeof:n,type:c.type,key:h,ref:c.ref,props:c.props,_owner:c._owner}),i.push(u)),1}if(v=0,s=""===s?".":s+":",C(t))for(var _=0;_<t.length;_++){var x=s+O(f=t[_],_);v+=e(f,i,a,x,u)}else{;if("function"==typeof(x=null===(p=t)||"object"!=typeof p?null:"function"==typeof(p=y&&p[y]||p["@@iterator"])?p:null))for(t=x.call(t),_=0;!(f=t.next()).done;)x=s+O(f=f.value,_++),v+=e(f,i,a,x,u);else if("object"===f)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(i=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.")}return v}(e,a,"","",function(e){return t.call(i,e,s++)}),a}function B(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},F={transition:null};function z(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:k,forEach:function(e,t,n){k(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return k(e,function(){t++}),t},toArray:function(e){return k(e,function(e){return e})||[]},only:function(e){if(!R(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=S,t.Fragment=i,t.Profiler=s,t.PureComponent=M,t.StrictMode=a,t.Suspense=p,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:F,ReactCurrentOwner:I},t.act=z,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=x({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=I.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(h in t)T.call(t,h)&&!D.hasOwnProperty(h)&&(i[h]=void 0===t[h]&&void 0!==c?c[h]:t[h])}var h=arguments.length-2;if(1===h)i.children=r;else if(1<h){c=Array(h);for(var p=0;p<h;p++)c[p]=arguments[p+2];i.children=c}return{$$typeof:n,type:e.type,key:a,ref:s,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=P,t.createFactory=function(e){var t=P.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:h,render:e}},t.isValidElement=R,t.lazy=function(e){return{$$typeof:v,_payload:{_status:-1,_result:e},_init:B}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=F.transition;F.transition={};try{e()}finally{F.transition=t}},t.unstable_act=z,t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.3.1"},5271:function(e,t,n){"use strict";e.exports=n(7596)},2676:function(e,t,n){"use strict";e.exports=n(8193)},247:function(e,t){"use strict";function n(e,t){var n=e.length;for(e.push(t);0<n;){var r=n-1>>>1,i=e[r];if(0<a(i,t))e[r]=t,e[n]=i,n=r;else break}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;for(var r=0,i=e.length,s=i>>>1;r<s;){var u=2*(r+1)-1,c=e[u],h=u+1,p=e[h];if(0>a(c,n))h<i&&0>a(p,c)?(e[r]=p,e[h]=n,r=h):(e[r]=c,e[u]=n,r=u);else if(h<i&&0>a(p,n))e[r]=p,e[h]=n,r=h;else break}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s,u=performance;t.unstable_now=function(){return u.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var p=[],f=[],v=1,y=null,_=3,x=!1,b=!1,S=!1,w="function"==typeof setTimeout?setTimeout:null,M="function"==typeof clearTimeout?clearTimeout:null,A="undefined"!=typeof setImmediate?setImmediate:null;function C(e){for(var t=r(f);null!==t;){if(null===t.callback)i(f);else if(t.startTime<=e)i(f),t.sortIndex=t.expirationTime,n(p,t);else break;t=r(f)}}function T(e){if(S=!1,C(e),!b){if(null!==r(p))b=!0,z(I);else{var t=r(f);null!==t&&U(T,t.startTime-e)}}}function I(e,n){b=!1,S&&(S=!1,M(R),R=-1),x=!0;var a=_;try{for(C(n),y=r(p);null!==y&&(!(y.expirationTime>n)||e&&!k());){var s=y.callback;if("function"==typeof s){y.callback=null,_=y.priorityLevel;var u=s(y.expirationTime<=n);n=t.unstable_now(),"function"==typeof u?y.callback=u:y===r(p)&&i(p),C(n)}else i(p);y=r(p)}if(null!==y)var c=!0;else{var h=r(f);null!==h&&U(T,h.startTime-n),c=!1}return c}finally{y=null,_=a,x=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var D=!1,P=null,R=-1,L=5,O=-1;function k(){return!(t.unstable_now()-O<L)}function B(){if(null!==P){var e=t.unstable_now();O=e;var n=!0;try{n=P(!0,e)}finally{n?s():(D=!1,P=null)}}else D=!1}if("function"==typeof A)s=function(){A(B)};else if("undefined"!=typeof MessageChannel){var N=new MessageChannel,F=N.port2;N.port1.onmessage=B,s=function(){F.postMessage(null)}}else s=function(){w(B,0)};function z(e){P=e,D||(D=!0,s())}function U(e,n){R=w(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){b||x||(b=!0,z(I))},t.unstable_forceFrameRate=function(e){0>e||125<e||(L=0<e?Math.floor(1e3/e):5)},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return r(p)},t.unstable_next=function(e){switch(_){case 1:case 2:case 3:var t=3;break;default:t=_}var n=_;_=t;try{return e()}finally{_=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=_;_=e;try{return t()}finally{_=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch(a="object"==typeof a&&null!==a?"number"==typeof(a=a.delay)&&0<a?s+a:s:s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=0x3fffffff;break;case 4:u=1e4;break;default:u=5e3}return u=a+u,e={id:v++,callback:i,priorityLevel:e,startTime:a,expirationTime:u,sortIndex:-1},a>s?(e.sortIndex=a,n(f,e),null===r(p)&&e===r(f)&&(S?(M(R),R=-1):S=!0,U(T,a-s))):(e.sortIndex=u,n(p,e),b||x||(b=!0,z(I))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=_;return function(){var n=_;_=t;try{return e.apply(this,arguments)}finally{_=n}}}},5297:function(e,t,n){"use strict";e.exports=n(247)},8088:function(e,t){"use strict";function n(e,t){var n=e.length;for(e.push(t);0<n;){var r=n-1>>>1,i=e[r];if(0<a(i,t))e[r]=t,e[n]=i,n=r;else break}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;for(var r=0,i=e.length,s=i>>>1;r<s;){var u=2*(r+1)-1,c=e[u],h=u+1,p=e[h];if(0>a(c,n))h<i&&0>a(p,c)?(e[r]=p,e[h]=n,r=h):(e[r]=c,e[u]=n,r=u);else if(h<i&&0>a(p,n))e[r]=p,e[h]=n,r=h;else break}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s,u=performance;t.unstable_now=function(){return u.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var p=[],f=[],v=1,y=null,_=3,x=!1,b=!1,S=!1,w="function"==typeof setTimeout?setTimeout:null,M="function"==typeof clearTimeout?clearTimeout:null,A="undefined"!=typeof setImmediate?setImmediate:null;function C(e){for(var t=r(f);null!==t;){if(null===t.callback)i(f);else if(t.startTime<=e)i(f),t.sortIndex=t.expirationTime,n(p,t);else break;t=r(f)}}function T(e){if(S=!1,C(e),!b){if(null!==r(p))b=!0,z(I);else{var t=r(f);null!==t&&U(T,t.startTime-e)}}}function I(e,n){b=!1,S&&(S=!1,M(R),R=-1),x=!0;var a=_;try{for(C(n),y=r(p);null!==y&&(!(y.expirationTime>n)||e&&!k());){var s=y.callback;if("function"==typeof s){y.callback=null,_=y.priorityLevel;var u=s(y.expirationTime<=n);n=t.unstable_now(),"function"==typeof u?y.callback=u:y===r(p)&&i(p),C(n)}else i(p);y=r(p)}if(null!==y)var c=!0;else{var h=r(f);null!==h&&U(T,h.startTime-n),c=!1}return c}finally{y=null,_=a,x=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var D=!1,P=null,R=-1,L=5,O=-1;function k(){return!(t.unstable_now()-O<L)}function B(){if(null!==P){var e=t.unstable_now();O=e;var n=!0;try{n=P(!0,e)}finally{n?s():(D=!1,P=null)}}else D=!1}if("function"==typeof A)s=function(){A(B)};else if("undefined"!=typeof MessageChannel){var N=new MessageChannel,F=N.port2;N.port1.onmessage=B,s=function(){F.postMessage(null)}}else s=function(){w(B,0)};function z(e){P=e,D||(D=!0,s())}function U(e,n){R=w(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){b||x||(b=!0,z(I))},t.unstable_forceFrameRate=function(e){0>e||125<e||(L=0<e?Math.floor(1e3/e):5)},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return r(p)},t.unstable_next=function(e){switch(_){case 1:case 2:case 3:var t=3;break;default:t=_}var n=_;_=t;try{return e()}finally{_=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=_;_=e;try{return t()}finally{_=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch(a="object"==typeof a&&null!==a?"number"==typeof(a=a.delay)&&0<a?s+a:s:s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=0x3fffffff;break;case 4:u=1e4;break;default:u=5e3}return u=a+u,e={id:v++,callback:i,priorityLevel:e,startTime:a,expirationTime:u,sortIndex:-1},a>s?(e.sortIndex=a,n(f,e),null===r(p)&&e===r(f)&&(S?(M(R),R=-1):S=!0,U(T,a-s))):(e.sortIndex=u,n(p,e),b||x||(b=!0,z(I))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=_;return function(){var n=_;_=t;try{return e.apply(this,arguments)}finally{_=n}}}},7537:function(e,t,n){"use strict";e.exports=n(8088)},9350:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeSensorId=t.SensorTabIndex=t.SensorClassName=void 0;t.SizeSensorId="size-sensor-id";t.SensorClassName="size-sensor-object";t.SensorTabIndex="-1"},2912:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=null;return function(){for(var r=this,i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];clearTimeout(n),n=setTimeout(function(){e.apply(r,a)},t)}}},1298:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=1;t.default=function(){return"".concat(n++)}},8611:function(e,t,n){"use strict";t.clear=t.bind=void 0;var r,i=n(2470);t.bind=function(e,t){var n=(0,i.getSensor)(e);return n.bind(t),function(){n.unbind(t)}};t.clear=function(e){var t=(0,i.getSensor)(e);(0,i.removeSensor)(t)}},2470:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeSensor=t.getSensor=t.Sensors=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1298)),i=n(8170),a=n(9350),s={};function u(e){e&&s[e]&&delete s[e]}t.Sensors=s;t.getSensor=function(e){var t=e.getAttribute(a.SizeSensorId);if(t&&s[t])return s[t];var n=(0,r.default)();e.setAttribute(a.SizeSensorId,n);var c=(0,i.createSensor)(e,function(){return u(n)});return s[n]=c,c};t.removeSensor=function(e){var t=e.element.getAttribute(a.SizeSensorId);e.destroy(),u(t)}},8170:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSensor=void 0;var r=n(4865),i=n(9842),a="undefined"!=typeof ResizeObserver?i.createSensor:r.createSensor;t.createSensor=a},4865:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSensor=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2912)),i=n(9350);t.createSensor=function(e,t){var n=void 0,a=[],s=function(){"static"===getComputedStyle(e).position&&(e.style.position="relative");var t=document.createElement("object");return t.onload=function(){t.contentDocument.defaultView.addEventListener("resize",u),u()},t.style.display="block",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.height="100%",t.style.width="100%",t.style.overflow="hidden",t.style.pointerEvents="none",t.style.zIndex="-1",t.style.opacity="0",t.setAttribute("class",i.SensorClassName),t.setAttribute("tabindex",i.SensorTabIndex),t.type="text/html",e.appendChild(t),t.data="about:blank",t},u=(0,r.default)(function(){a.forEach(function(t){t(e)})}),c=function(){n&&n.parentNode&&(n.contentDocument&&n.contentDocument.defaultView.removeEventListener("resize",u),n.parentNode.removeChild(n),e.removeAttribute(i.SizeSensorId),n=void 0,a=[],t&&t())};return{element:e,bind:function(e){!n&&(n=s()),-1===a.indexOf(e)&&a.push(e)},destroy:c,unbind:function(e){var t=a.indexOf(e);-1!==t&&a.splice(t,1),0===a.length&&n&&c()}}}},9842:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSensor=void 0;var r=n(9350),i=function(e){return e&&e.__esModule?e:{default:e}}(n(2912));t.createSensor=function(e,t){var n=void 0,a=[],s=(0,i.default)(function(){a.forEach(function(t){t(e)})}),u=function(){var t=new ResizeObserver(s);return t.observe(e),s(),t},c=function(){n.disconnect(),a=[],n=void 0,e.removeAttribute(r.SizeSensorId),t&&t()};return{element:e,bind:function(e){!n&&(n=u()),-1===a.indexOf(e)&&a.push(e)},destroy:c,unbind:function(e){var t=a.indexOf(e);-1!==t&&a.splice(t,1),0===a.length&&n&&c()}}}},7613:function(e,t,n){"use strict";var r=n(5005),i=n(2932),a=TypeError;e.exports=function(e){if(r(e))return e;throw new a(i(e)+" is not a function")}},6241:function(e,t,n){"use strict";var r=n(7051).has;e.exports=function(e){return r(e),e}},3010:function(e,t,n){"use strict";var r=n(296),i=TypeError;e.exports=function(e,t){if(r(t,e))return e;throw new i("Incorrect invocation")}},5089:function(e,t,n){"use strict";var r=n(9061),i=String,a=TypeError;e.exports=function(e){if(r(e))return e;throw new a(i(e)+" is not an object")}},3097:function(e,t,n){"use strict";var r=n(5145),i=n(2293),a=n(6724),s=function(e){return function(t,n,s){var u,c=r(t),h=a(c);if(0===h)return!e&&-1;var p=i(s,h);if(e&&n!=n){for(;h>p;)if((u=c[p++])!=u)return!0}else for(;h>p;p++)if((e||p in c)&&c[p]===n)return e||p||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},5568:function(e,t,n){"use strict";var r=n(9987),i=n(5541),a=TypeError,s=Object.getOwnPropertyDescriptor,u=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=u?function(e,t){if(i(e)&&!s(e,"length").writable)throw new a("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},5069:function(e,t,n){"use strict";var r=n(3639),i=n(7720),a=n(5717);e.exports=function(e,t,n,s){try{var u=a(e,"return");if(u)return i("Promise").resolve(r(u,e)).then(function(){t(n)},function(e){s(e)})}catch(e){return s(e)}t(n)}},1230:function(e,t,n){"use strict";var r=n(3639),i=n(354),a=n(5089),s=n(7958),u=n(5972),c=n(8593),h=n(7431),p=n(5947),f=n(7720),v=n(5717),y=n(3716),_=n(3939),x=n(8643),b=f("Promise"),S=h("toStringTag"),w="AsyncIteratorHelper",M="WrapForValidAsyncIterator",A=p.set,C=function(e){var t=!e,n=p.getterFor(e?M:w),u=function(e){var r=i(function(){return n(e)}),a=r.error,s=r.value;return a||t&&s.done?{exit:!0,value:a?b.reject(s):b.resolve(_(void 0,!0))}:{exit:!1,value:s}};return c(s(y),{next:function(){var e=u(this),t=e.value;if(e.exit)return t;var n=i(function(){return a(t.nextHandler(b))}),r=n.error,s=n.value;return r&&(t.done=!0),r?b.reject(s):b.resolve(s)},return:function(){var t,n,s=u(this),c=s.value;if(s.exit)return c;c.done=!0;var h=c.iterator,p=i(function(){if(c.inner)try{x(c.inner.iterator,"normal")}catch(e){return x(h,"throw",e)}return v(h,"return")});return(t=n=p.value,p.error)?b.reject(n):void 0===t?b.resolve(_(void 0,!0)):(n=(p=i(function(){return r(t,h)})).value,p.error)?b.reject(n):e?b.resolve(n):b.resolve(n).then(function(e){return a(e),_(void 0,!0)})}})},T=C(!0),I=C(!1);u(I,S,"Async Iterator Helper"),e.exports=function(e,t){var n=function(n,r){r?(r.iterator=n.iterator,r.next=n.next):r=n,r.type=t?M:w,r.nextHandler=e,r.counter=0,r.done=!1,A(this,r)};return n.prototype=t?T:I,n}},8631:function(e,t,n){"use strict";var r=n(3639),i=n(7613),a=n(5089),s=n(9061),u=n(9754),c=n(7720),h=n(9720),p=n(5069),f=function(e){var t=0===e,n=1===e,f=2===e,v=3===e;return function(e,y,_){a(e);var x=void 0!==y;(x||!t)&&i(y);var b=h(e),S=c("Promise"),w=b.iterator,M=b.next,A=0;return new S(function(e,i){var c=function(e){p(w,i,e,i)},h=function(){try{if(x)try{u(A)}catch(e){c(e)}S.resolve(a(r(M,w))).then(function(r){try{if(a(r).done)t?(_.length=A,e(_)):e(!v&&(f||void 0));else{var u=r.value;try{if(x){var b=y(u,A),M=function(r){if(n)h();else if(f)r?h():p(w,e,!1,i);else if(t)try{_[A++]=r,h()}catch(e){c(e)}else r?p(w,e,v||u,i):h()};s(b)?S.resolve(b).then(M,c):M(b)}else _[A++]=u,h()}catch(e){c(e)}}}catch(e){i(e)}},i)}catch(e){i(e)}};h()})}};e.exports={toArray:f(0),forEach:f(1),every:f(2),some:f(3),find:f(4)}},4013:function(e,t,n){"use strict";var r=n(3639),i=n(7613),a=n(5089),s=n(9061),u=n(9720),c=n(1230),h=n(3939),p=n(5069),f=c(function(e){var t=this,n=t.iterator,i=t.mapper;return new e(function(u,c){var f=function(e){t.done=!0,c(e)},v=function(e){p(n,f,e,f)};e.resolve(a(r(t.next,n))).then(function(n){try{if(a(n).done)t.done=!0,u(h(void 0,!0));else{var r=n.value;try{var c=i(r,t.counter++),p=function(e){u(h(e,!1))};s(c)?e.resolve(c).then(p,v):p(c)}catch(e){v(e)}}}catch(e){f(e)}},f)})});e.exports=function(e){return a(this),i(e),new f(u(this),{mapper:e})}},3716:function(e,t,n){"use strict";var r,i,a=n(5835),s=n(6660),u=n(5005),c=n(7958),h=n(4023),p=n(9016),f=n(7431),v=n(1979),y="USE_FUNCTION_CONSTRUCTOR",_=f("asyncIterator"),x=a.AsyncIterator,b=s.AsyncIteratorPrototype;if(b)r=b;else if(u(x))r=x.prototype;else if(s[y]||a[y])try{i=h(h(h(Function("return async function*(){}()")()))),h(i)===Object.prototype&&(r=i)}catch(e){}r?v&&(r=c(r)):r={},!u(r[_])&&p(r,_,function(){return this}),e.exports=r},3427:function(e,t,n){"use strict";var r=n(5089),i=n(8643);e.exports=function(e,t,n,a){try{return a?t(r(n)[0],n[1]):t(n)}catch(t){i(e,"throw",t)}}},3973:function(e,t,n){"use strict";var r=n(7626),i=r({}.toString),a=r("".slice);e.exports=function(e){return a(i(e),8,-1)}},9944:function(e,t,n){"use strict";var r=n(2401),i=n(5005),a=n(3973),s=n(7431)("toStringTag"),u=Object,c="Arguments"===a(function(){return arguments}()),h=function(e,t){try{return e[t]}catch(e){}};e.exports=r?a:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=h(t=u(e),s))?n:c?a(t):"Object"===(r=a(t))&&i(t.callee)?"Arguments":r}},828:function(e,t,n){"use strict";var r=n(1185),i=n(4549),a=n(1791),s=n(7631);e.exports=function(e,t,n){for(var u=i(t),c=s.f,h=a.f,p=0;p<u.length;p++){var f=u[p];!r(e,f)&&!(n&&r(n,f))&&c(e,f,h(t,f))}}},4294:function(e,t,n){"use strict";var r=n(6848);e.exports=!r(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},3939:function(e){"use strict";e.exports=function(e,t){return{value:e,done:t}}},5972:function(e,t,n){"use strict";var r=n(9987),i=n(7631),a=n(9753);e.exports=r?function(e,t,n){return i.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},9753:function(e){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7223:function(e,t,n){"use strict";var r=n(9987),i=n(7631),a=n(9753);e.exports=function(e,t,n){r?i.f(e,t,a(0,n)):e[t]=n}},3039:function(e,t,n){"use strict";var r=n(9476),i=n(7631);e.exports=function(e,t,n){return n.get&&r(n.get,t,{getter:!0}),n.set&&r(n.set,t,{setter:!0}),i.f(e,t,n)}},9016:function(e,t,n){"use strict";var r=n(5005),i=n(7631),a=n(9476),s=n(6908);e.exports=function(e,t,n,u){!u&&(u={});var c=u.enumerable,h=void 0!==u.name?u.name:t;if(r(n)&&a(n,h,u),u.global)c?e[t]=n:s(t,n);else{try{u.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return e}},8593:function(e,t,n){"use strict";var r=n(9016);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},6908:function(e,t,n){"use strict";var r=n(5835),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},9987:function(e,t,n){"use strict";var r=n(6848);e.exports=!r(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},2160:function(e,t,n){"use strict";var r=n(5835),i=n(9061),a=r.document,s=i(a)&&i(a.createElement);e.exports=function(e){return s?a.createElement(e):{}}},9754:function(e){"use strict";var t=TypeError;e.exports=function(e){if(e>0x1fffffffffffff)throw t("Maximum allowed index exceeded");return e}},5711:function(e){"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1594:function(e,t,n){"use strict";var r=n(5835).navigator,i=r&&r.userAgent;e.exports=i?String(i):""},5080:function(e,t,n){"use strict";var r,i,a=n(5835),s=n(1594),u=a.process,c=a.Deno,h=u&&u.versions||c&&c.version,p=h&&h.v8;p&&(i=(r=p.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},2794:function(e,t,n){"use strict";var r=n(5835),i=n(1791).f,a=n(5972),s=n(9016),u=n(6908),c=n(828),h=n(1595);e.exports=function(e,t){var n,p,f,v,y,_=e.target,x=e.global,b=e.stat;if(n=x?r:b?r[_]||u(_,{}):r[_]&&r[_].prototype)for(p in t){if(v=t[p],f=e.dontCallGetSet?(y=i(n,p))&&y.value:n[p],!h(x?p:_+(b?".":"#")+p,e.forced)&&void 0!==f){if(typeof v==typeof f)continue;c(v,f)}(e.sham||f&&f.sham)&&a(v,"sham",!0),s(n,p,v,e)}}},6848:function(e){"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},612:function(e,t,n){"use strict";var r=n(2255),i=n(7613),a=n(610),s=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:a?s(e,t):function(){return e.apply(t,arguments)}}},610:function(e,t,n){"use strict";var r=n(6848);e.exports=!r(function(){var e=(function(){}).bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},3639:function(e,t,n){"use strict";var r=n(610),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},3735:function(e,t,n){"use strict";var r=n(9987),i=n(1185),a=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,u=i(a,"name"),c=u&&(!r||r&&s(a,"name").configurable);e.exports={EXISTS:u,PROPER:u&&"something"===(function(){}).name,CONFIGURABLE:c}},4484:function(e,t,n){"use strict";var r=n(7626),i=n(7613);e.exports=function(e,t,n){try{return r(i(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}}},2255:function(e,t,n){"use strict";var r=n(3973),i=n(7626);e.exports=function(e){if("Function"===r(e))return i(e)}},7626:function(e,t,n){"use strict";var r=n(610),i=Function.prototype,a=i.call,s=r&&i.bind.bind(a,a);e.exports=r?s:function(e){return function(){return a.apply(e,arguments)}}},7720:function(e,t,n){"use strict";var r=n(5835),i=n(5005);e.exports=function(e,t){var n;return arguments.length<2?i(n=r[e])?n:void 0:r[e]&&r[e][t]}},9720:function(e){"use strict";e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},2722:function(e,t,n){"use strict";var r=n(9944),i=n(5717),a=n(6989),s=n(8026),u=n(7431)("iterator");e.exports=function(e){if(!a(e))return i(e,u)||i(e,"@@iterator")||s[r(e)]}},3833:function(e,t,n){"use strict";var r=n(3639),i=n(7613),a=n(5089),s=n(2932),u=n(2722),c=TypeError;e.exports=function(e,t){var n=arguments.length<2?u(e):t;if(i(n))return a(r(n,e));throw new c(s(e)+" is not iterable")}},5717:function(e,t,n){"use strict";var r=n(7613),i=n(6989);e.exports=function(e,t){var n=e[t];return i(n)?void 0:r(n)}},8111:function(e,t,n){"use strict";var r=n(7613),i=n(5089),a=n(3639),s=n(154),u=n(9720),c="Invalid size",h=RangeError,p=TypeError,f=Math.max,v=function(e,t){this.set=e,this.size=f(t,0),this.has=r(e.has),this.keys=r(e.keys)};v.prototype={getIterator:function(){return u(i(a(this.keys,this.set)))},includes:function(e){return a(this.has,this.set,e)}},e.exports=function(e){i(e);var t=+e.size;if(t!=t)throw new p(c);var n=s(t);if(n<0)throw new h(c);return new v(e,n)}},5835:function(e,t,n){"use strict";var r=function(e){return e&&e.Math===Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},1185:function(e,t,n){"use strict";var r=n(7626),i=n(7018),a=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return a(i(e),t)}},352:function(e){"use strict";e.exports={}},4579:function(e,t,n){"use strict";var r=n(7720);e.exports=r("document","documentElement")},4684:function(e,t,n){"use strict";var r=n(9987),i=n(6848),a=n(2160);e.exports=!r&&!i(function(){return 7!==Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a})},378:function(e,t,n){"use strict";var r=n(7626),i=n(6848),a=n(3973),s=Object,u=r("".split);e.exports=i(function(){return!s("z").propertyIsEnumerable(0)})?function(e){return"String"===a(e)?u(e,""):s(e)}:s},7901:function(e,t,n){"use strict";var r=n(7626),i=n(5005),a=n(6660),s=r(Function.toString);!i(a.inspectSource)&&(a.inspectSource=function(e){return s(e)}),e.exports=a.inspectSource},5947:function(e,t,n){"use strict";var r,i,a,s=n(2713),u=n(5835),c=n(9061),h=n(5972),p=n(1185),f=n(6660),v=n(6765),y=n(352),_="Object already initialized",x=u.TypeError,b=u.WeakMap;if(s||f.state){var S=f.state||(f.state=new b);S.get=S.get,S.has=S.has,S.set=S.set,r=function(e,t){if(S.has(e))throw new x(_);return t.facade=e,S.set(e,t),t},i=function(e){return S.get(e)||{}},a=function(e){return S.has(e)}}else{var w=v("state");y[w]=!0,r=function(e,t){if(p(e,w))throw new x(_);return t.facade=e,h(e,w,t),t},i=function(e){return p(e,w)?e[w]:{}},a=function(e){return p(e,w)}}e.exports={set:r,get:i,has:a,enforce:function(e){return a(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw new x("Incompatible receiver, "+e+" required");return n}}}},2107:function(e,t,n){"use strict";var r=n(7431),i=n(8026),a=r("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[a]===e)}},5541:function(e,t,n){"use strict";var r=n(3973);e.exports=Array.isArray||function(e){return"Array"===r(e)}},5005:function(e){"use strict";var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},1595:function(e,t,n){"use strict";var r=n(6848),i=n(5005),a=/#|\.prototype\./,s=function(e,t){var n=c[u(e)];return n===p||n!==h&&(i(t)?r(t):!!t)},u=s.normalize=function(e){return String(e).replace(a,".").toLowerCase()},c=s.data={},h=s.NATIVE="N",p=s.POLYFILL="P";e.exports=s},6290:function(e,t,n){"use strict";var r=n(9944),i=n(1185),a=n(6989),s=n(7431),u=n(8026),c=s("iterator"),h=Object;e.exports=function(e){if(a(e))return!1;var t=h(e);return void 0!==t[c]||"@@iterator"in t||i(u,r(t))}},6989:function(e){"use strict";e.exports=function(e){return null==e}},9061:function(e,t,n){"use strict";var r=n(5005);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},1979:function(e){"use strict";e.exports=!1},6671:function(e,t,n){"use strict";var r=n(7720),i=n(5005),a=n(296),s=n(6270),u=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&a(t.prototype,u(e))}},8184:function(e,t,n){"use strict";var r=n(3639);e.exports=function(e,t,n){for(var i,a,s=n?e:e.iterator,u=e.next;!(i=r(u,s)).done;)if(void 0!==(a=t(i.value)))return a}},3117:function(e,t,n){"use strict";var r=n(612),i=n(3639),a=n(5089),s=n(2932),u=n(2107),c=n(6724),h=n(296),p=n(3833),f=n(2722),v=n(8643),y=TypeError,_=function(e,t){this.stopped=e,this.result=t},x=_.prototype;e.exports=function(e,t,n){var b,S,w,M,A,C,T,I=n&&n.that,D=!!(n&&n.AS_ENTRIES),P=!!(n&&n.IS_RECORD),R=!!(n&&n.IS_ITERATOR),L=!!(n&&n.INTERRUPTED),O=r(t,I),k=function(e){return b&&v(b,"normal",e),new _(!0,e)},B=function(e){return D?(a(e),L?O(e[0],e[1],k):O(e[0],e[1])):L?O(e,k):O(e)};if(P)b=e.iterator;else if(R)b=e;else{if(!(S=f(e)))throw new y(s(e)+" is not iterable");if(u(S)){for(w=0,M=c(e);M>w;w++)if((A=B(e[w]))&&h(x,A))return A;return new _(!1)}b=p(e,S)}for(C=P?e.next:b.next;!(T=i(C,b)).done;){try{A=B(T.value)}catch(e){v(b,"throw",e)}if("object"==typeof A&&A&&h(x,A))return A}return new _(!1)}},8643:function(e,t,n){"use strict";var r=n(3639),i=n(5089),a=n(5717);e.exports=function(e,t,n){var s,u;i(e);try{if(!(s=a(e,"return"))){if("throw"===t)throw n;return n}s=r(s,e)}catch(e){u=!0,s=e}if("throw"===t)throw n;if(u)throw s;return i(s),n}},5625:function(e,t,n){"use strict";var r=n(3639),i=n(7958),a=n(5972),s=n(8593),u=n(7431),c=n(5947),h=n(5717),p=n(7988).IteratorPrototype,f=n(3939),v=n(8643),y=u("toStringTag"),_="IteratorHelper",x="WrapForValidIterator",b=c.set,S=function(e){var t=c.getterFor(e?x:_);return s(i(p),{next:function(){var n=t(this);if(e)return n.nextHandler();try{var r=n.done?void 0:n.nextHandler();return f(r,n.done)}catch(e){throw n.done=!0,e}},return:function(){var n=t(this),i=n.iterator;if(n.done=!0,e){var a=h(i,"return");return a?r(a,i):f(void 0,!0)}if(n.inner)try{v(n.inner.iterator,"normal")}catch(e){return v(i,"throw",e)}return i&&v(i,"normal"),f(void 0,!0)}})},w=S(!0),M=S(!1);a(M,y,"Iterator Helper"),e.exports=function(e,t){var n=function(n,r){r?(r.iterator=n.iterator,r.next=n.next):r=n,r.type=t?x:_,r.nextHandler=e,r.counter=0,r.done=!1,b(this,r)};return n.prototype=t?w:M,n}},1232:function(e,t,n){"use strict";var r=n(3639),i=n(7613),a=n(5089),s=n(9720),u=n(5625),c=n(3427),h=u(function(){var e=this.iterator,t=a(r(this.next,e));if(!(this.done=!!t.done))return c(e,this.mapper,[t.value,this.counter++],!0)});e.exports=function(e){return a(this),i(e),new h(s(this),{mapper:e})}},7988:function(e,t,n){"use strict";var r,i,a,s=n(6848),u=n(5005),c=n(9061),h=n(7958),p=n(4023),f=n(9016),v=n(7431),y=n(1979),_=v("iterator"),x=!1;[].keys&&("next"in(a=[].keys())?(i=p(p(a)))!==Object.prototype&&(r=i):x=!0),!c(r)||s(function(){var e={};return r[_].call(e)!==e})?r={}:y&&(r=h(r)),!u(r[_])&&f(r,_,function(){return this}),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:x}},8026:function(e){"use strict";e.exports={}},6724:function(e,t,n){"use strict";var r=n(6721);e.exports=function(e){return r(e.length)}},9476:function(e,t,n){"use strict";var r=n(7626),i=n(6848),a=n(5005),s=n(1185),u=n(9987),c=n(3735).CONFIGURABLE,h=n(7901),p=n(5947),f=p.enforce,v=p.get,y=String,_=Object.defineProperty,x=r("".slice),b=r("".replace),S=r([].join),w=u&&!i(function(){return 8!==_(function(){},"length",{value:8}).length}),M=String(String).split("String"),A=e.exports=function(e,t,n){"Symbol("===x(y(t),0,7)&&(t="["+b(y(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(u?_(e,"name",{value:t,configurable:!0}):e.name=t),w&&n&&s(n,"arity")&&e.length!==n.arity&&_(e,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?u&&_(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=f(e);return!s(r,"source")&&(r.source=S(M,"string"==typeof t?t:"")),e};Function.prototype.toString=A(function(){return a(this)&&v(this).source||h(this)},"toString")},2126:function(e){"use strict";var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},7958:function(e,t,n){"use strict";var r,i=n(5089),a=n(3598),s=n(5711),u=n(352),c=n(4579),h=n(2160),p=n(6765),f="prototype",v="script",y=p("IE_PROTO"),_=function(){},x=function(e){return"<"+v+">"+e+"</"+v+">"},b=function(e){e.write(x("")),e.close();var t=e.parentWindow.Object;return e=null,t},S=function(){var e,t=h("iframe");return t.style.display="none",c.appendChild(t),t.src=String("java"+v+":"),(e=t.contentWindow.document).open(),e.write(x("document.F=Object")),e.close(),e.F},w=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}w="undefined"!=typeof document?document.domain&&r?b(r):S():b(r);for(var e=s.length;e--;)delete w[f][s[e]];return w()};u[y]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(_[f]=i(e),n=new _,_[f]=null,n[y]=e):n=w(),void 0===t?n:a.f(n,t)}},3598:function(e,t,n){"use strict";var r=n(9987),i=n(1845),a=n(7631),s=n(5089),u=n(5145),c=n(25);t.f=r&&!i?Object.defineProperties:function(e,t){s(e);for(var n,r=u(t),i=c(t),h=i.length,p=0;h>p;)a.f(e,n=i[p++],r[n]);return e}},7631:function(e,t,n){"use strict";var r=n(9987),i=n(4684),a=n(1845),s=n(5089),u=n(889),c=TypeError,h=Object.defineProperty,p=Object.getOwnPropertyDescriptor,f="enumerable",v="configurable",y="writable";t.f=r?a?function(e,t,n){if(s(e),t=u(t),s(n),"function"==typeof e&&"prototype"===t&&"value"in n&&y in n&&!n[y]){var r=p(e,t);r&&r[y]&&(e[t]=n.value,n={configurable:v in n?n[v]:r[v],enumerable:f in n?n[f]:r[f],writable:!1})}return h(e,t,n)}:h:function(e,t,n){if(s(e),t=u(t),s(n),i)try{return h(e,t,n)}catch(e){}if("get"in n||"set"in n)throw new c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1791:function(e,t,n){"use strict";var r=n(9987),i=n(3639),a=n(2457),s=n(9753),u=n(5145),c=n(889),h=n(1185),p=n(4684),f=Object.getOwnPropertyDescriptor;t.f=r?f:function(e,t){if(e=u(e),t=c(t),p)try{return f(e,t)}catch(e){}if(h(e,t))return s(!i(a.f,e,t),e[t])}},2079:function(e,t,n){"use strict";var r=n(2253),i=n(5711).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},3002:function(e,t){"use strict";t.f=Object.getOwnPropertySymbols},4023:function(e,t,n){"use strict";var r=n(1185),i=n(5005),a=n(7018),s=n(6765),u=n(4294),c=s("IE_PROTO"),h=Object,p=h.prototype;e.exports=u?h.getPrototypeOf:function(e){var t=a(e);if(r(t,c))return t[c];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof h?p:null}},296:function(e,t,n){"use strict";var r=n(7626);e.exports=r({}.isPrototypeOf)},2253:function(e,t,n){"use strict";var r=n(7626),i=n(1185),a=n(5145),s=n(3097).indexOf,u=n(352),c=r([].push);e.exports=function(e,t){var n,r=a(e),h=0,p=[];for(n in r)!i(u,n)&&i(r,n)&&c(p,n);for(;t.length>h;)i(r,n=t[h++])&&(~s(p,n)||c(p,n));return p}},25:function(e,t,n){"use strict";var r=n(2253),i=n(5711);e.exports=Object.keys||function(e){return r(e,i)}},2457:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},489:function(e,t,n){"use strict";var r=n(3639),i=n(5005),a=n(9061),s=TypeError;e.exports=function(e,t){var n,u;if("string"===t&&i(n=e.toString)&&!a(u=r(n,e))||i(n=e.valueOf)&&!a(u=r(n,e))||"string"!==t&&i(n=e.toString)&&!a(u=r(n,e)))return u;throw new s("Can't convert object to primitive value")}},4549:function(e,t,n){"use strict";var r=n(7720),i=n(7626),a=n(2079),s=n(3002),u=n(5089),c=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=a.f(u(e)),n=s.f;return n?c(t,n(e)):t}},6411:function(e,t,n){"use strict";var r=n(7626),i=n(1185),a=SyntaxError,s=parseInt,u=String.fromCharCode,c=r("".charAt),h=r("".slice),p=r(/./.exec),f={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":"\n","\\r":"\r","\\t":"	"},v=/^[\da-f]{4}$/i,y=/^[\u0000-\u001F]$/;e.exports=function(e,t){for(var n=!0,r="";t<e.length;){var _=c(e,t);if("\\"===_){var x=h(e,t,t+2);if(i(f,x))r+=f[x],t+=2;else if("\\u"===x){var b=h(e,t+=2,t+4);if(!p(v,b))throw new a("Bad Unicode escape at: "+t);r+=u(s(b,16)),t+=4}else throw new a('Unknown escape sequence: "'+x+'"')}else if('"'===_){n=!1,t++;break}else{if(p(y,_))throw new a("Bad control character in string literal at: "+t);r+=_,t++}}if(n)throw new a("Unterminated string at: "+t);return{value:r,end:t}}},354:function(e){"use strict";e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},7228:function(e,t,n){"use strict";var r=n(6989),i=TypeError;e.exports=function(e){if(r(e))throw new i("Can't call method on "+e);return e}},4167:function(e,t,n){"use strict";var r=n(7051),i=n(1062),a=r.Set,s=r.add;e.exports=function(e){var t=new a;return i(e,function(e){s(t,e)}),t}},9238:function(e,t,n){"use strict";var r=n(6241),i=n(7051),a=n(4167),s=n(1830),u=n(8111),c=n(1062),h=n(8184),p=i.has,f=i.remove;e.exports=function(e){var t=r(this),n=u(e),i=a(t);return s(t)<=n.size?c(t,function(e){n.includes(e)&&f(i,e)}):h(n.getIterator(),function(e){p(t,e)&&f(i,e)}),i}},7051:function(e,t,n){"use strict";var r=n(7626),i=Set.prototype;e.exports={Set:Set,add:r(i.add),has:r(i.has),remove:r(i.delete),proto:i}},8711:function(e,t,n){"use strict";var r=n(6241),i=n(7051),a=n(1830),s=n(8111),u=n(1062),c=n(8184),h=i.Set,p=i.add,f=i.has;e.exports=function(e){var t=r(this),n=s(e),i=new h;return a(t)>n.size?c(n.getIterator(),function(e){f(t,e)&&p(i,e)}):u(t,function(e){n.includes(e)&&p(i,e)}),i}},7449:function(e,t,n){"use strict";var r=n(6241),i=n(7051).has,a=n(1830),s=n(8111),u=n(1062),c=n(8184),h=n(8643);e.exports=function(e){var t=r(this),n=s(e);if(a(t)<=n.size)return!1!==u(t,function(e){if(n.includes(e))return!1},!0);var p=n.getIterator();return!1!==c(p,function(e){if(i(t,e))return h(p,"normal",!1)})}},8300:function(e,t,n){"use strict";var r=n(6241),i=n(1830),a=n(1062),s=n(8111);e.exports=function(e){var t=r(this),n=s(e);return!(i(t)>n.size)&&!1!==a(t,function(e){if(!n.includes(e))return!1},!0)}},6808:function(e,t,n){"use strict";var r=n(6241),i=n(7051).has,a=n(1830),s=n(8111),u=n(8184),c=n(8643);e.exports=function(e){var t=r(this),n=s(e);if(a(t)<n.size)return!1;var h=n.getIterator();return!1!==u(h,function(e){if(!i(t,e))return c(h,"normal",!1)})}},1062:function(e,t,n){"use strict";var r=n(7626),i=n(8184),a=n(7051),s=a.Set,u=a.proto,c=r(u.forEach),h=r(u.keys),p=h(new s).next;e.exports=function(e,t,n){return n?i({iterator:h(e),next:p},t):c(e,t)}},1340:function(e,t,n){"use strict";var r=n(7720),i=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};e.exports=function(e){var t=r("Set");try{new t()[e](i(0));try{return new t()[e](i(-1)),!1}catch(e){return!0}}catch(e){return!1}}},1830:function(e,t,n){"use strict";var r=n(4484),i=n(7051);e.exports=r(i.proto,"size","get")||function(e){return e.size}},541:function(e,t,n){"use strict";var r=n(6241),i=n(7051),a=n(4167),s=n(8111),u=n(8184),c=i.add,h=i.has,p=i.remove;e.exports=function(e){var t=r(this),n=s(e).getIterator(),i=a(t);return u(n,function(e){h(t,e)?p(i,e):c(i,e)}),i}},3822:function(e,t,n){"use strict";var r=n(6241),i=n(7051).add,a=n(4167),s=n(8111),u=n(8184);e.exports=function(e){var t=r(this),n=s(e).getIterator(),c=a(t);return u(n,function(e){i(c,e)}),c}},6765:function(e,t,n){"use strict";var r=n(209),i=n(3831),a=r("keys");e.exports=function(e){return a[e]||(a[e]=i(e))}},6660:function(e,t,n){"use strict";var r=n(1979),i=n(5835),a=n(6908),s="__core-js_shared__",u=e.exports=i[s]||a(s,{});(u.versions||(u.versions=[])).push({version:"3.39.0",mode:r?"pure":"global",copyright:"\xa9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})},209:function(e,t,n){"use strict";var r=n(6660);e.exports=function(e,t){return r[e]||(r[e]=t||{})}},2731:function(e,t,n){"use strict";var r=n(5080),i=n(6848),a=n(5835).String;e.exports=!!Object.getOwnPropertySymbols&&!i(function(){var e=Symbol("symbol detection");return!a(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41})},2293:function(e,t,n){"use strict";var r=n(154),i=Math.max,a=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):a(n,t)}},5145:function(e,t,n){"use strict";var r=n(378),i=n(7228);e.exports=function(e){return r(i(e))}},154:function(e,t,n){"use strict";var r=n(2126);e.exports=function(e){var t=+e;return t!=t||0===t?0:r(t)}},6721:function(e,t,n){"use strict";var r=n(154),i=Math.min;e.exports=function(e){var t=r(e);return t>0?i(t,0x1fffffffffffff):0}},7018:function(e,t,n){"use strict";var r=n(7228),i=Object;e.exports=function(e){return i(r(e))}},3367:function(e,t,n){"use strict";var r=n(3639),i=n(9061),a=n(6671),s=n(5717),u=n(489),c=n(7431),h=TypeError,p=c("toPrimitive");e.exports=function(e,t){if(!i(e)||a(e))return e;var n,c=s(e,p);if(c){if(void 0===t&&(t="default"),!i(n=r(c,e,t))||a(n))return n;throw new h("Can't convert object to primitive value")}return void 0===t&&(t="number"),u(e,t)}},889:function(e,t,n){"use strict";var r=n(3367),i=n(6671);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},2149:function(e,t,n){"use strict";var r=n(7720),i=n(5005),a=n(6290),s=n(9061),u=r("Set");e.exports=function(e){var t;return s(t=e)&&"number"==typeof t.size&&i(t.has)&&i(t.keys)?e:a(e)?new u(e):e}},2401:function(e,t,n){"use strict";var r=n(7431)("toStringTag"),i={};i[r]="z",e.exports="[object z]"===String(i)},1023:function(e,t,n){"use strict";var r=n(9944),i=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},2932:function(e){"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},3831:function(e,t,n){"use strict";var r=n(7626),i=0,a=Math.random(),s=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++i+a,36)}},6270:function(e,t,n){"use strict";var r=n(2731);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},1845:function(e,t,n){"use strict";var r=n(9987),i=n(6848);e.exports=r&&i(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},7968:function(e){"use strict";var t=TypeError;e.exports=function(e,n){if(e<n)throw new t("Not enough arguments");return e}},2713:function(e,t,n){"use strict";var r=n(5835),i=n(5005),a=r.WeakMap;e.exports=i(a)&&/native code/.test(String(a))},7431:function(e,t,n){"use strict";var r=n(5835),i=n(209),a=n(1185),s=n(3831),u=n(2731),c=n(6270),h=r.Symbol,p=i("wks"),f=c?h.for||h:h&&h.withoutSetter||s;e.exports=function(e){return!a(p,e)&&(p[e]=u&&a(h,e)?h[e]:f("Symbol."+e)),p[e]}},7663:function(e,t,n){"use strict";var r=n(2794),i=n(7018),a=n(6724),s=n(5568),u=n(9754),c=n(6848)(function(){return 0x100000001!==[].push.call({length:0x100000000},1)});r({target:"Array",proto:!0,arity:1,forced:c||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}()},{push:function(e){var t=i(this),n=a(t),r=arguments.length;u(n+r);for(var c=0;c<r;c++)t[n]=arguments[c],n++;return s(t,n),n}})},4149:function(e,t,n){"use strict";var r=n(2794),i=n(5835),a=n(3010),s=n(5089),u=n(5005),c=n(4023),h=n(3039),p=n(7223),f=n(6848),v=n(1185),y=n(7431),_=n(7988).IteratorPrototype,x=n(9987),b=n(1979),S="constructor",w="Iterator",M=y("toStringTag"),A=TypeError,C=i[w],T=b||!u(C)||C.prototype!==_||!f(function(){C({})}),I=function(){if(a(this,_),c(this)===_)throw new A("Abstract class Iterator not directly constructable")},D=function(e,t){x?h(_,e,{configurable:!0,get:function(){return t},set:function(t){if(s(this),this===_)throw new A("You can't redefine this property");v(this,e)?this[e]=t:p(this,e,t)}}):_[e]=t};!v(_,M)&&D(M,w),(T||!v(_,S)||_[S]===Object)&&D(S,I),I.prototype=_,r({global:!0,constructor:!0,forced:T},{Iterator:I})},6396:function(e,t,n){"use strict";var r=n(2794),i=n(3117),a=n(7613),s=n(5089),u=n(9720);r({target:"Iterator",proto:!0,real:!0},{forEach:function(e){s(this),a(e);var t=u(this),n=0;i(t,function(t){e(t,n++)},{IS_RECORD:!0})}})},402:function(e,t,n){"use strict";var r=n(2794),i=n(1232);r({target:"Iterator",proto:!0,real:!0,forced:n(1979)},{map:i})},6170:function(e,t,n){"use strict";var r=n(2794),i=n(3117),a=n(7613),s=n(5089),u=n(9720),c=TypeError;r({target:"Iterator",proto:!0,real:!0},{reduce:function(e){s(this),a(e);var t=u(this),n=arguments.length<2,r=n?void 0:arguments[1],h=0;if(i(t,function(t){n?(n=!1,r=t):r=e(r,t,h),h++},{IS_RECORD:!0}),n)throw new c("Reduce of empty iterator with no initial value");return r}})},4992:function(e,t,n){"use strict";var r=n(2794),i=n(9238);r({target:"Set",proto:!0,real:!0,forced:!n(1340)("difference")},{difference:i})},5660:function(e,t,n){"use strict";var r=n(2794),i=n(6848),a=n(8711);r({target:"Set",proto:!0,real:!0,forced:!n(1340)("intersection")||i(function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))})},{intersection:a})},1022:function(e,t,n){"use strict";var r=n(2794),i=n(7449);r({target:"Set",proto:!0,real:!0,forced:!n(1340)("isDisjointFrom")},{isDisjointFrom:i})},3733:function(e,t,n){"use strict";var r=n(2794),i=n(8300);r({target:"Set",proto:!0,real:!0,forced:!n(1340)("isSubsetOf")},{isSubsetOf:i})},9567:function(e,t,n){"use strict";var r=n(2794),i=n(6808);r({target:"Set",proto:!0,real:!0,forced:!n(1340)("isSupersetOf")},{isSupersetOf:i})},8057:function(e,t,n){"use strict";var r=n(2794),i=n(541);r({target:"Set",proto:!0,real:!0,forced:!n(1340)("symmetricDifference")},{symmetricDifference:i})},3128:function(e,t,n){"use strict";var r=n(2794),i=n(3822);r({target:"Set",proto:!0,real:!0,forced:!n(1340)("union")},{union:i})},845:function(e,t,n){"use strict";var r=n(2794),i=n(3010),a=n(4023),s=n(5972),u=n(1185),c=n(7431),h=n(3716),p=n(1979),f=c("toStringTag"),v=TypeError,y=function(){if(i(this,h),a(this)===h)throw new v("Abstract class AsyncIterator not directly constructable")};y.prototype=h,!u(h,f)&&s(h,f,"AsyncIterator"),(p||!u(h,"constructor")||h.constructor===Object)&&s(h,"constructor",y),r({global:!0,constructor:!0,forced:p},{AsyncIterator:y})},1811:function(e,t,n){"use strict";var r=n(2794),i=n(8631).forEach;r({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(e){return i(this,e)}})},6913:function(e,t,n){"use strict";var r=n(2794),i=n(4013);r({target:"AsyncIterator",proto:!0,real:!0,forced:n(1979)},{map:i})},4958:function(e,t,n){"use strict";var r=n(2794),i=n(3639),a=n(7613),s=n(5089),u=n(9061),c=n(7720),h=n(9720),p=n(5069),f=c("Promise"),v=TypeError;r({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(e){s(this),a(e);var t=h(this),n=t.iterator,r=t.next,c=arguments.length<2,y=c?void 0:arguments[1],_=0;return new f(function(t,a){var h=function(e){p(n,a,e,a)},x=function(){try{f.resolve(s(i(r,n))).then(function(n){try{if(s(n).done)c?a(new v("Reduce of empty iterator with no initial value")):t(y);else{var r=n.value;if(c)c=!1,y=r,x();else try{var i=e(y,r,_),p=function(e){y=e,x()};u(i)?f.resolve(i).then(p,h):p(i)}catch(e){h(e)}}_++}catch(e){a(e)}},a)}catch(e){a(e)}};x()})}})},9168:function(e,t,n){"use strict";var r=n(2794),i=n(8631).toArray;r({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return i(this,void 0,[])}})},3747:function(e,t,n){"use strict";n(4149)},4838:function(e,t,n){"use strict";n(6396)},5662:function(e,t,n){"use strict";n(402)},8725:function(e,t,n){"use strict";n(6170)},2611:function(e,t,n){"use strict";var r=n(2794),i=n(9987),a=n(5835),s=n(7720),u=n(7626),c=n(3639),h=n(5005),p=n(9061),f=n(5541),v=n(1185),y=n(1023),_=n(6724),x=n(7223),b=n(6848),S=n(6411),w=n(2731),M=a.JSON,A=a.Number,C=a.SyntaxError,T=M&&M.parse,I=s("Object","keys"),D=Object.getOwnPropertyDescriptor,P=u("".charAt),R=u("".slice),L=u(/./.exec),O=u([].push),k=/^\d$/,B=/^[1-9]$/,N=/^[\d-]$/,F=/^[\t\n\r ]$/,z=function(e,t){var n=new V(e=y(e),0,""),r=n.parse(),i=r.value,a=n.skip(F,r.end);if(a<e.length)throw new C('Unexpected extra character: "'+P(e,a)+'" after the parsed data at: '+a);return h(t)?U({"":i},"",t,r):i},U=function(e,t,n,r){var i,a,s,u,h,y=e[t],x=r&&y===r.value,b=x&&"string"==typeof r.source?{source:r.source}:{};if(p(y)){var S=f(y),w=x?r.nodes:S?[]:{};if(S)for(u=0,i=w.length,s=_(y);u<s;u++)H(y,u,U(y,""+u,n,u<i?w[u]:void 0));else for(u=0,s=_(a=I(y));u<s;u++)H(y,h=a[u],U(y,h,n,v(w,h)?w[h]:void 0))}return c(n,e,t,y,b)},H=function(e,t,n){if(i){var r=D(e,t);if(r&&!r.configurable)return}void 0===n?delete e[t]:x(e,t,n)},G=function(e,t,n,r){this.value=e,this.end=t,this.source=n,this.nodes=r},V=function(e,t){this.source=e,this.index=t};V.prototype={fork:function(e){return new V(this.source,e)},parse:function(){var e=this.source,t=this.skip(F,this.index),n=this.fork(t),r=P(e,t);if(L(N,r))return n.number();switch(r){case"{":return n.object();case"[":return n.array();case'"':return n.string();case"t":return n.keyword(!0);case"f":return n.keyword(!1);case"n":return n.keyword(null)}throw new C('Unexpected character: "'+r+'" at: '+t)},node:function(e,t,n,r,i){return new G(t,r,e?null:R(this.source,n,r),i)},object:function(){for(var e=this.source,t=this.index+1,n=!1,r={},i={};t<e.length;){if("}"===P(e,t=this.until(['"',"}"],t))&&!n){t++;break}var a=this.fork(t).string(),s=a.value;t=a.end,t=this.until([":"],t)+1,t=this.skip(F,t),x(i,s,a=this.fork(t).parse()),x(r,s,a.value);var u=P(e,t=this.until([",","}"],a.end));if(","===u)n=!0,t++;else if("}"===u){t++;break}}return this.node(1,r,this.index,t,i)},array:function(){for(var e=this.source,t=this.index+1,n=!1,r=[],i=[];t<e.length;){if("]"===P(e,t=this.skip(F,t))&&!n){t++;break}var a=this.fork(t).parse();if(O(i,a),O(r,a.value),","===P(e,t=this.until([",","]"],a.end)))n=!0,t++;else if("]"===P(e,t)){t++;break}}return this.node(1,r,this.index,t,i)},string:function(){var e=this.index,t=S(this.source,this.index+1);return this.node(0,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,n=t;if("-"===P(e,n)&&n++,"0"===P(e,n))n++;else if(L(B,P(e,n)))n=this.skip(k,n+1);else throw new C("Failed to parse number at: "+n);if("."===P(e,n)&&(n=this.skip(k,n+1)),("e"===P(e,n)||"E"===P(e,n))&&(("+"===P(e,++n)||"-"===P(e,n))&&n++,n===(n=this.skip(k,n))))throw new C("Failed to parse number's exponent value at: "+n);return this.node(0,A(R(e,t,n)),t,n)},keyword:function(e){var t=""+e,n=this.index,r=n+t.length;if(R(this.source,n,r)!==t)throw new C("Failed to parse value at: "+n);return this.node(0,e,n,r)},skip:function(e,t){for(var n=this.source;t<n.length&&L(e,P(n,t));t++);return t},until:function(e,t){t=this.skip(F,t);for(var n=P(this.source,t),r=0;r<e.length;r++)if(e[r]===n)return t;throw new C('Unexpected character: "'+n+'" at: '+t)}};var W=b(function(){var e,t="9007199254740993";return T(t,function(t,n,r){e=r.source}),e!==t}),j=w&&!b(function(){return 1/T("-0 	")!=-1/0});r({target:"JSON",stat:!0,forced:W},{parse:function(e,t){return j&&!h(t)?T(e):z(e,t)}})},874:function(e,t,n){"use strict";var r=n(2794),i=n(6241),a=n(7051).add;r({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var e=i(this),t=0,n=arguments.length;t<n;t++)a(e,arguments[t]);return e}})},2256:function(e,t,n){"use strict";var r=n(2794),i=n(6241),a=n(7051).remove;r({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e,t=i(this),n=!0,r=0,s=arguments.length;r<s;r++)e=a(t,arguments[r]),n=n&&e;return!!n}})},443:function(e,t,n){"use strict";var r=n(2794),i=n(3639),a=n(2149),s=n(9238);r({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(e){return i(s,this,a(e))}})},701:function(e,t,n){"use strict";var r=n(2794),i=n(612),a=n(6241),s=n(1062);r({target:"Set",proto:!0,real:!0,forced:!0},{every:function(e){var t=a(this),n=i(e,arguments.length>1?arguments[1]:void 0);return!1!==s(t,function(e){if(!n(e,e,t))return!1},!0)}})},5242:function(e,t,n){"use strict";var r=n(2794),i=n(612),a=n(6241),s=n(7051),u=n(1062),c=s.Set,h=s.add;r({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(e){var t=a(this),n=i(e,arguments.length>1?arguments[1]:void 0),r=new c;return u(t,function(e){n(e,e,t)&&h(r,e)}),r}})},646:function(e,t,n){"use strict";var r=n(2794),i=n(612),a=n(6241),s=n(1062);r({target:"Set",proto:!0,real:!0,forced:!0},{find:function(e){var t=a(this),n=i(e,arguments.length>1?arguments[1]:void 0),r=s(t,function(e){if(n(e,e,t))return{value:e}},!0);return r&&r.value}})},1309:function(e,t,n){"use strict";var r=n(2794),i=n(3639),a=n(2149),s=n(8711);r({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(e){return i(s,this,a(e))}})},4887:function(e,t,n){"use strict";var r=n(2794),i=n(3639),a=n(2149),s=n(7449);r({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(e){return i(s,this,a(e))}})},9818:function(e,t,n){"use strict";var r=n(2794),i=n(3639),a=n(2149),s=n(8300);r({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(e){return i(s,this,a(e))}})},9964:function(e,t,n){"use strict";var r=n(2794),i=n(3639),a=n(2149),s=n(6808);r({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(e){return i(s,this,a(e))}})},3231:function(e,t,n){"use strict";var r=n(2794),i=n(7626),a=n(6241),s=n(1062),u=n(1023),c=i([].join),h=i([].push);r({target:"Set",proto:!0,real:!0,forced:!0},{join:function(e){var t=a(this),n=void 0===e?",":u(e),r=[];return s(t,function(e){h(r,e)}),c(r,n)}})},4646:function(e,t,n){"use strict";var r=n(2794),i=n(612),a=n(6241),s=n(7051),u=n(1062),c=s.Set,h=s.add;r({target:"Set",proto:!0,real:!0,forced:!0},{map:function(e){var t=a(this),n=i(e,arguments.length>1?arguments[1]:void 0),r=new c;return u(t,function(e){h(r,n(e,e,t))}),r}})},2479:function(e,t,n){"use strict";var r=n(2794),i=n(7613),a=n(6241),s=n(1062),u=TypeError;r({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(e){var t=a(this),n=arguments.length<2,r=n?void 0:arguments[1];if(i(e),s(t,function(i){n?(n=!1,r=i):r=e(r,i,i,t)}),n)throw new u("Reduce of empty set with no initial value");return r}})},7295:function(e,t,n){"use strict";var r=n(2794),i=n(612),a=n(6241),s=n(1062);r({target:"Set",proto:!0,real:!0,forced:!0},{some:function(e){var t=a(this),n=i(e,arguments.length>1?arguments[1]:void 0);return!0===s(t,function(e){if(n(e,e,t))return!0},!0)}})},1985:function(e,t,n){"use strict";var r=n(2794),i=n(3639),a=n(2149),s=n(541);r({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(e){return i(s,this,a(e))}})},3243:function(e,t,n){"use strict";var r=n(2794),i=n(3639),a=n(2149),s=n(3822);r({target:"Set",proto:!0,real:!0,forced:!0},{union:function(e){return i(s,this,a(e))}})},3262:function(e,t,n){"use strict";var r=n(9016),i=n(7626),a=n(1023),s=n(7968),u=URLSearchParams,c=u.prototype,h=i(c.append),p=i(c.delete),f=i(c.forEach),v=i([].push),y=new u("a=1&a=2&b=3");y.delete("a",1),y.delete("b",void 0),y+""!="a=2"&&r(c,"delete",function(e){var t,n=arguments.length,r=n<2?void 0:arguments[1];if(n&&void 0===r)return p(this,e);var i=[];f(this,function(e,t){v(i,{key:t,value:e})}),s(n,1);for(var u=a(e),c=a(r),y=0,_=0,x=!1,b=i.length;y<b;)t=i[y++],x||t.key===u?(x=!0,p(this,t.key)):_++;for(;_<b;)!((t=i[_++]).key===u&&t.value===c)&&h(this,t.key,t.value)},{enumerable:!0,unsafe:!0})},5446:function(e,t,n){"use strict";var r=n(9016),i=n(7626),a=n(1023),s=n(7968),u=URLSearchParams,c=u.prototype,h=i(c.getAll),p=i(c.has),f=new u("a=1");(f.has("a",2)||!f.has("a",void 0))&&r(c,"has",function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return p(this,e);var r=h(this,e);s(t,1);for(var i=a(n),u=0;u<r.length;)if(r[u++]===i)return!0;return!1},{enumerable:!0,unsafe:!0})},5549:function(e,t,n){"use strict";var r=n(9987),i=n(7626),a=n(3039),s=URLSearchParams.prototype,u=i(s.forEach);r&&!("size"in s)&&a(s,"size",{get:function(){var e=0;return u(this,function(){e++}),e},configurable:!0,enumerable:!0})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i||"object"==typeof r&&r&&(4&i&&r.__esModule||16&i&&"function"==typeof r.then))return r;var a=Object.create(null);n.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach(function(e){s[e]=function(){return r[e]}});return s.default=function(){return r},n.d(a,s),a}})(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";let e,t,i,a,s,u,c,h,p,f,v,y,_,x,b,S,w,M,A,C,T,I,D,P,R,L,O,k,B,N,F,z,U,H,G;n.r(r),n.d(r,{create:()=>ei5,resolveUrl:()=>__});var V,W,j,X,Y,J,Z,q,K,Q,$,ee,et,en,er,ei,ea,eo,es,el,eu,ec,eh,ed,ep,ef,eg,em,ev,ey,e_,ex,eb,eS,ew,eM,eA,eC,eT,eE,eI,eD,eP,eR,eL,eO,ek,eB,eN,eF,ez,eU,eH,eG,eV,eW,ej,eX,eY,eJ,eZ,eq,eK,eQ,e$,e0,e1,e2,e3,e5,e4,e6,e9,e8,e7,te,tt,tn,tr,ti,ta,to,ts,tl={};n.r(tl),n.d(tl,{ACESFilmicToneMapping:()=>ng,AddEquation:()=>tW,AddOperation:()=>nc,AdditiveAnimationBlendMode:()=>rV,AdditiveBlending:()=>tU,AgXToneMapping:()=>nv,AlphaFormat:()=>nQ,AlwaysCompare:()=>i_,AlwaysDepth:()=>nt,AlwaysStencilFunc:()=>ic,AmbientLight:()=>pc,AnimationAction:()=>p1,AnimationClip:()=>dj,AnimationLoader:()=>d$,AnimationMixer:()=>p3,AnimationObjectGroup:()=>p0,AnimationUtils:()=>dR,ArcCurve:()=>hp,ArrayCamera:()=>uk,ArrowHelper:()=>fN,AttachedBindMode:()=>n_,Audio:()=>pB,AudioAnalyser:()=>pG,AudioContext:()=>pw,AudioListener:()=>pk,AudioLoader:()=>pM,AxesHelper:()=>fF,BackSide:()=>tB,BasicDepthPacking:()=>rY,BasicShadowMap:()=>tP,BatchedMesh:()=>cY,Bone:()=>cy,BooleanKeyframeTrack:()=>dF,Box2:()=>fs,Box3:()=>am,Box3Helper:()=>fO,BoxGeometry:()=>sr,BoxHelper:()=>fL,BufferAttribute:()=>oB,BufferGeometry:()=>o$,BufferGeometryLoader:()=>pv,ByteType:()=>nH,Cache:()=>dX,Camera:()=>su,CameraHelper:()=>fD,CanvasTexture:()=>hc,CapsuleGeometry:()=>hO,CatmullRomCurve3:()=>h_,CineonToneMapping:()=>nf,CircleGeometry:()=>hk,ClampToEdgeWrapping:()=>nE,Clock:()=>pI,Color:()=>oA,ColorKeyframeTrack:()=>dz,ColorManagement:()=>i1,CompressedArrayTexture:()=>hl,CompressedCubeTexture:()=>hu,CompressedTexture:()=>hs,CompressedTextureLoader:()=>d0,ConeGeometry:()=>hN,ConstantAlphaFactor:()=>t8,ConstantColorFactor:()=>t6,Controls:()=>fU,CubeCamera:()=>sf,CubeReflectionMapping:()=>nS,CubeRefractionMapping:()=>nw,CubeTexture:()=>sg,CubeTextureLoader:()=>d2,CubeUVReflectionMapping:()=>nC,CubicBezierCurve:()=>hw,CubicBezierCurve3:()=>hM,CubicInterpolant:()=>dO,CullFaceBack:()=>tE,CullFaceFront:()=>tI,CullFaceFrontBack:()=>tD,CullFaceNone:()=>tT,Curve:()=>hh,CurvePath:()=>hP,CustomBlending:()=>tV,CustomToneMapping:()=>nm,CylinderGeometry:()=>hB,Cylindrical:()=>fi,Data3DTexture:()=>ac,DataArrayTexture:()=>al,DataTexture:()=>c_,DataTextureLoader:()=>d3,DataUtils:()=>oL,DecrementStencilOp:()=>r8,DecrementWrapStencilOp:()=>ie,DefaultLoadingManager:()=>dJ,DepthFormat:()=>n3,DepthStencilFormat:()=>n5,DepthTexture:()=>s7,DetachedBindMode:()=>nx,DirectionalLight:()=>pu,DirectionalLightHelper:()=>fT,DiscreteInterpolant:()=>dB,DodecahedronGeometry:()=>hz,DoubleSide:()=>tN,DstAlphaFactor:()=>t1,DstColorFactor:()=>t3,DynamicCopyUsage:()=>iT,DynamicDrawUsage:()=>ib,DynamicReadUsage:()=>iM,EdgesGeometry:()=>hW,EllipseCurve:()=>hd,EqualCompare:()=>ip,EqualDepth:()=>ni,EqualStencilFunc:()=>ia,EquirectangularReflectionMapping:()=>nM,EquirectangularRefractionMapping:()=>nA,Euler:()=>a$,EventDispatcher:()=>iL,ExtrudeGeometry:()=>dn,FileLoader:()=>dQ,Float16BufferAttribute:()=>oW,Float32BufferAttribute:()=>oj,FloatType:()=>nX,Fog:()=>uZ,FogExp2:()=>uJ,FramebufferTexture:()=>ho,FrontSide:()=>tk,Frustum:()=>sw,GLBufferAttribute:()=>p8,GLSL1:()=>iI,GLSL3:()=>iD,GreaterCompare:()=>im,GreaterDepth:()=>no,GreaterEqualCompare:()=>iy,GreaterEqualDepth:()=>na,GreaterEqualStencilFunc:()=>iu,GreaterStencilFunc:()=>is,GridHelper:()=>fS,Group:()=>uB,HalfFloatType:()=>nY,HemisphereLight:()=>d6,HemisphereLightHelper:()=>fb,IcosahedronGeometry:()=>di,ImageBitmapLoader:()=>pS,ImageLoader:()=>d1,ImageUtils:()=>i7,IncrementStencilOp:()=>r9,IncrementWrapStencilOp:()=>r7,InstancedBufferAttribute:()=>cw,InstancedBufferGeometry:()=>pm,InstancedInterleavedBuffer:()=>p9,InstancedMesh:()=>cP,Int16BufferAttribute:()=>oU,Int32BufferAttribute:()=>oG,Int8BufferAttribute:()=>oN,IntType:()=>nW,InterleavedBuffer:()=>uK,InterleavedBufferAttribute:()=>u$,Interpolant:()=>dL,InterpolateDiscrete:()=>rB,InterpolateLinear:()=>rN,InterpolateSmooth:()=>rF,InvertStencilOp:()=>it,KeepStencilOp:()=>r4,KeyframeTrack:()=>dN,LOD:()=>cs,LatheGeometry:()=>hL,Layers:()=>a0,LessCompare:()=>id,LessDepth:()=>nn,LessEqualCompare:()=>ig,LessEqualDepth:()=>nr,LessEqualStencilFunc:()=>io,LessStencilFunc:()=>ii,Light:()=>d4,LightProbe:()=>pp,Line:()=>c2,Line3:()=>fc,LineBasicMaterial:()=>cJ,LineCurve:()=>hA,LineCurve3:()=>hC,LineDashedMaterial:()=>dC,LineLoop:()=>c9,LineSegments:()=>c6,LinearFilter:()=>nk,LinearInterpolant:()=>dk,LinearMipMapLinearFilter:()=>nz,LinearMipMapNearestFilter:()=>nN,LinearMipmapLinearFilter:()=>nF,LinearMipmapNearestFilter:()=>nB,LinearSRGBColorSpace:()=>r1,LinearToneMapping:()=>nd,LinearTransfer:()=>r2,Loader:()=>dZ,LoaderUtils:()=>pg,LoadingManager:()=>dY,LoopOnce:()=>rL,LoopPingPong:()=>rk,LoopRepeat:()=>rO,LuminanceAlphaFormat:()=>n2,LuminanceFormat:()=>n1,MOUSE:()=>tA,Material:()=>oE,MaterialLoader:()=>pf,MathUtils:()=>iW,Matrix2:()=>fa,Matrix3:()=>iX,Matrix4:()=>aV,MaxEquation:()=>tJ,Mesh:()=>st,MeshBasicMaterial:()=>oI,MeshDepthMaterial:()=>uC,MeshDistanceMaterial:()=>uT,MeshLambertMaterial:()=>dM,MeshMatcapMaterial:()=>dA,MeshNormalMaterial:()=>dw,MeshPhongMaterial:()=>db,MeshPhysicalMaterial:()=>dx,MeshStandardMaterial:()=>d_,MeshToonMaterial:()=>dS,MinEquation:()=>tY,MirroredRepeatWrapping:()=>nI,MixOperation:()=>nu,MultiplyBlending:()=>tG,MultiplyOperation:()=>nl,NearestFilter:()=>nD,NearestMipMapLinearFilter:()=>nO,NearestMipMapNearestFilter:()=>nR,NearestMipmapLinearFilter:()=>nL,NearestMipmapNearestFilter:()=>nP,NeutralToneMapping:()=>ny,NeverCompare:()=>ih,NeverDepth:()=>ne,NeverStencilFunc:()=>ir,NoBlending:()=>tF,NoColorSpace:()=>r$,NoToneMapping:()=>nh,NormalAnimationBlendMode:()=>rG,NormalBlending:()=>tz,NotEqualCompare:()=>iv,NotEqualDepth:()=>ns,NotEqualStencilFunc:()=>il,NumberKeyframeTrack:()=>dU,Object3D:()=>oo,ObjectLoader:()=>py,ObjectSpaceNormalMap:()=>rQ,OctahedronGeometry:()=>da,OneFactor:()=>tq,OneMinusConstantAlphaFactor:()=>t7,OneMinusConstantColorFactor:()=>t9,OneMinusDstAlphaFactor:()=>t2,OneMinusDstColorFactor:()=>t5,OneMinusSrcAlphaFactor:()=>t0,OneMinusSrcColorFactor:()=>tQ,OrthographicCamera:()=>sz,PCFShadowMap:()=>tR,PCFSoftShadowMap:()=>tL,PMREMGenerator:()=>sq,Path:()=>hR,PerspectiveCamera:()=>sp,Plane:()=>sx,PlaneGeometry:()=>sC,PlaneHelper:()=>fk,PointLight:()=>ps,PointLightHelper:()=>fv,Points:()=>hr,PointsMaterial:()=>c8,PolarGridHelper:()=>fw,PolyhedronGeometry:()=>hF,PositionalAudio:()=>pH,PropertyBinding:()=>p$,PropertyMixer:()=>pV,QuadraticBezierCurve:()=>hT,QuadraticBezierCurve3:()=>hE,Quaternion:()=>ad,QuaternionKeyframeTrack:()=>dG,QuaternionLinearInterpolant:()=>dH,RED_GREEN_RGTC2_Format:()=>rP,RED_RGTC1_Format:()=>rI,REVISION:()=>tM,RGBADepthPacking:()=>rJ,RGBAFormat:()=>n0,RGBAIntegerFormat:()=>re,RGBA_ASTC_10x10_Format:()=>rw,RGBA_ASTC_10x5_Format:()=>rx,RGBA_ASTC_10x6_Format:()=>rb,RGBA_ASTC_10x8_Format:()=>rS,RGBA_ASTC_12x10_Format:()=>rM,RGBA_ASTC_12x12_Format:()=>rA,RGBA_ASTC_4x4_Format:()=>rd,RGBA_ASTC_5x4_Format:()=>rp,RGBA_ASTC_5x5_Format:()=>rf,RGBA_ASTC_6x5_Format:()=>rg,RGBA_ASTC_6x6_Format:()=>rm,RGBA_ASTC_8x5_Format:()=>rv,RGBA_ASTC_8x6_Format:()=>ry,RGBA_ASTC_8x8_Format:()=>r_,RGBA_BPTC_Format:()=>rC,RGBA_ETC2_EAC_Format:()=>rh,RGBA_PVRTC_2BPPV1_Format:()=>rl,RGBA_PVRTC_4BPPV1_Format:()=>rs,RGBA_S3TC_DXT1_Format:()=>rn,RGBA_S3TC_DXT3_Format:()=>rr,RGBA_S3TC_DXT5_Format:()=>ri,RGBDepthPacking:()=>rZ,RGBFormat:()=>n$,RGBIntegerFormat:()=>n7,RGB_BPTC_SIGNED_Format:()=>rT,RGB_BPTC_UNSIGNED_Format:()=>rE,RGB_ETC1_Format:()=>ru,RGB_ETC2_Format:()=>rc,RGB_PVRTC_2BPPV1_Format:()=>ro,RGB_PVRTC_4BPPV1_Format:()=>ra,RGB_S3TC_DXT1_Format:()=>rt,RGDepthPacking:()=>rq,RGFormat:()=>n9,RGIntegerFormat:()=>n8,RawShaderMaterial:()=>dy,Ray:()=>aG,Raycaster:()=>fe,RectAreaLight:()=>ph,RedFormat:()=>n4,RedIntegerFormat:()=>n6,ReinhardToneMapping:()=>np,RenderTarget:()=>ao,RepeatWrapping:()=>nT,ReplaceStencilOp:()=>r6,ReverseSubtractEquation:()=>tX,RingGeometry:()=>ds,SIGNED_RED_GREEN_RGTC2_Format:()=>rR,SIGNED_RED_RGTC1_Format:()=>rD,SRGBColorSpace:()=>r0,SRGBTransfer:()=>r3,Scene:()=>uq,ShaderChunk:()=>sT,ShaderLib:()=>sI,ShaderMaterial:()=>sl,ShadowMaterial:()=>dv,Shape:()=>hj,ShapeGeometry:()=>dl,ShapePath:()=>fz,ShapeUtils:()=>h7,ShortType:()=>nG,Skeleton:()=>cS,SkeletonHelper:()=>fm,SkinnedMesh:()=>cv,Source:()=>at,Sphere:()=>aO,SphereGeometry:()=>du,Spherical:()=>fr,SphericalHarmonics3:()=>pd,SplineCurve:()=>hI,SpotLight:()=>pn,SpotLightHelper:()=>fd,Sprite:()=>cr,SpriteMaterial:()=>u0,SrcAlphaFactor:()=>t$,SrcAlphaSaturateFactor:()=>t4,SrcColorFactor:()=>tK,StaticCopyUsage:()=>iC,StaticDrawUsage:()=>ix,StaticReadUsage:()=>iw,StereoCamera:()=>pE,StreamCopyUsage:()=>iE,StreamDrawUsage:()=>iS,StreamReadUsage:()=>iA,StringKeyframeTrack:()=>dV,SubtractEquation:()=>tj,SubtractiveBlending:()=>tH,TOUCH:()=>tC,TangentSpaceNormalMap:()=>rK,TetrahedronGeometry:()=>dc,Texture:()=>ai,TextureLoader:()=>d5,TextureUtils:()=>uR,TorusGeometry:()=>dh,TorusKnotGeometry:()=>dd,Triangle:()=>ox,TriangleFanDrawMode:()=>rX,TriangleStripDrawMode:()=>rj,TrianglesDrawMode:()=>rW,TubeGeometry:()=>dp,UVMapping:()=>nb,Uint16BufferAttribute:()=>oH,Uint32BufferAttribute:()=>oV,Uint8BufferAttribute:()=>oF,Uint8ClampedBufferAttribute:()=>oz,Uniform:()=>p5,UniformsGroup:()=>p6,UniformsLib:()=>sE,UniformsUtils:()=>ss,UnsignedByteType:()=>nU,UnsignedInt248Type:()=>nq,UnsignedInt5999Type:()=>nK,UnsignedIntType:()=>nj,UnsignedShort4444Type:()=>nJ,UnsignedShort5551Type:()=>nZ,UnsignedShortType:()=>nV,VSMShadowMap:()=>tO,Vector2:()=>ij,Vector3:()=>ap,Vector4:()=>aa,VectorKeyframeTrack:()=>dW,VideoTexture:()=>ha,WebGL3DRenderTarget:()=>ah,WebGLArrayRenderTarget:()=>au,WebGLCoordinateSystem:()=>iP,WebGLCubeRenderTarget:()=>sm,WebGLMultipleRenderTargets:()=>fH,WebGLRenderTarget:()=>as,WebGLRenderer:()=>uY,WebGLUtils:()=>uO,WebGPUCoordinateSystem:()=>iR,WireframeGeometry:()=>df,WrapAroundEnding:()=>rH,ZeroCurvatureEnding:()=>rz,ZeroFactor:()=>tZ,ZeroSlopeEnding:()=>rU,ZeroStencilOp:()=>r5,createCanvasElement:()=>iQ});var tu={};n.r(tu),n.d(tu,{HashMap:()=>M0,RADIAN_TO_DEGREE:()=>M9,assert:()=>MY,bind:()=>MT,clone:()=>Mh,concatArray:()=>M2,createCanvas:()=>Mm,createHashMap:()=>M1,createObject:()=>M3,curry:()=>ME,defaults:()=>Mg,disableUserSelect:()=>M5,each:()=>Mb,eqNaN:()=>MH,extend:()=>Mf,filter:()=>MM,find:()=>MA,guid:()=>Mu,hasOwn:()=>M4,indexOf:()=>Mv,inherits:()=>My,isArray:()=>MI,isArrayLike:()=>Mx,isBuiltInObject:()=>Mk,isDom:()=>MN,isFunction:()=>MD,isGradientObject:()=>MF,isImagePatternObject:()=>Mz,isNumber:()=>ML,isObject:()=>MO,isPrimitive:()=>MK,isRegExp:()=>MU,isString:()=>MP,isStringSafe:()=>MR,isTypedArray:()=>MB,keys:()=>MC,logError:()=>Mc,map:()=>MS,merge:()=>Md,mergeAll:()=>Mp,mixin:()=>M_,noop:()=>M6,normalizeCssArray:()=>MX,reduce:()=>Mw,retrieve:()=>MG,retrieve2:()=>MV,retrieve3:()=>MW,setAsPrimitive:()=>Mq,slice:()=>Mj,trim:()=>MJ});var tc={};n.r(tc),n.d(tc,{add:()=>An,applyTransform:()=>Ax,clone:()=>Ae,copy:()=>M7,create:()=>M8,dist:()=>Ag,distSquare:()=>Av,distance:()=>Af,distanceSquare:()=>Am,div:()=>Ac,dot:()=>Ah,len:()=>Aa,lenSquare:()=>As,length:()=>Ao,lengthSquare:()=>Al,lerp:()=>A_,max:()=>AS,min:()=>Ab,mul:()=>Au,negate:()=>Ay,normalize:()=>Ap,scale:()=>Ad,scaleAndAdd:()=>Ar,set:()=>At,sub:()=>Ai});var th={};n.r(th),n.d(th,{clone:()=>A3,copy:()=>AK,create:()=>AZ,identity:()=>Aq,invert:()=>A2,mul:()=>AQ,rotate:()=>A0,scale:()=>A1,translate:()=>A$});var td={};n.r(td),n.d(td,{fastLerp:()=>Tt,fastMapToColor:()=>Tn,lerp:()=>Tr,lift:()=>C7,liftColor:()=>Th,lum:()=>Tl,mapToColor:()=>Ti,modifyAlpha:()=>To,modifyHSL:()=>Ta,parse:()=>C9,random:()=>Tu,stringify:()=>Ts,toHex:()=>Te});var tp={};n.r(tp),n.d(tp,{dispose:()=>ET,disposeAll:()=>EE,getElementSSRData:()=>EP,getInstance:()=>EI,init:()=>EC,registerPainter:()=>ED,registerSSRDataGetter:()=>ER,version:()=>EL});var tf={};n.r(tf),n.d(tf,{Arc:()=>BP,BezierCurve:()=>BE,BoundingRect:()=>Cr,Circle:()=>k2,CompoundPath:()=>BR,Ellipse:()=>k4,Group:()=>ES,Image:()=>DF,IncrementalDisplayable:()=>BG,Line:()=>Bw,LinearGradient:()=>BO,OrientedBoundingRect:()=>BU,Path:()=>DR,Point:()=>A5,Polygon:()=>Bm,Polyline:()=>B_,RadialGradient:()=>Bk,Rect:()=>DX,Ring:()=>Bd,Sector:()=>Bu,Text:()=>D8,applyTransform:()=>B6,clipPointsByRect:()=>Ne,clipRectByRect:()=>Nt,createIcon:()=>Nn,extendPath:()=>BJ,extendShape:()=>BX,getShapeClass:()=>Bq,getTransform:()=>B4,groupTransition:()=>B7,initProps:()=>P$,isElementRemoved:()=>P0,lineLineIntersect:()=>Ni,linePolygonIntersect:()=>Nr,makeImage:()=>BQ,makePath:()=>BK,mergePath:()=>B0,registerShape:()=>BZ,removeElement:()=>P1,removeElementWithFadeOut:()=>P3,resizePath:()=>B1,setTooltipConfig:()=>No,subPixelOptimize:()=>B5,subPixelOptimizeLine:()=>B2,subPixelOptimizeRect:()=>B3,transformDirection:()=>B9,traverseElements:()=>Nl,updateProps:()=>PQ});var tg={};n.r(tg),n.d(tg,{createDimensions:()=>zQ,createList:()=>UK,createScale:()=>U$,createSymbol:()=>Fo,createTextStyle:()=>U1,dataStack:()=>UQ,enableHoverEmphasis:()=>Pz,getECData:()=>D7,getLayoutRect:()=>Lu,mixinAxisModelCommonMethods:()=>U0});var tm={};n.r(tm),n.d(tm,{MAX_SAFE_INTEGER:()=>EV,asc:()=>EN,getPercentWithPrecision:()=>EH,getPixelPrecision:()=>EU,getPrecision:()=>EF,getPrecisionSafe:()=>Ez,isNumeric:()=>E0,isRadianAroundZero:()=>Ej,linearMap:()=>EO,nice:()=>Eq,numericToNumber:()=>E$,parseDate:()=>EY,quantile:()=>EK,quantity:()=>EJ,quantityExponent:()=>EZ,reformIntervals:()=>EQ,remRadian:()=>EW,round:()=>EB});var tv={};n.r(tv),n.d(tv,{format:()=>RH,parse:()=>EY});var ty={};n.r(ty),n.d(ty,{Arc:()=>BP,BezierCurve:()=>BE,BoundingRect:()=>Cr,Circle:()=>k2,CompoundPath:()=>BR,Ellipse:()=>k4,Group:()=>ES,Image:()=>DF,IncrementalDisplayable:()=>BG,Line:()=>Bw,LinearGradient:()=>BO,Polygon:()=>Bm,Polyline:()=>B_,RadialGradient:()=>Bk,Rect:()=>DX,Ring:()=>Bd,Sector:()=>Bu,Text:()=>D8,clipPointsByRect:()=>Ne,clipRectByRect:()=>Nt,createIcon:()=>Nn,extendPath:()=>BJ,extendShape:()=>BX,getShapeClass:()=>Bq,getTransform:()=>B4,initProps:()=>P$,makeImage:()=>BQ,makePath:()=>BK,mergePath:()=>B0,registerShape:()=>BZ,resizePath:()=>B1,updateProps:()=>PQ});var t_={};n.r(t_),n.d(t_,{addCommas:()=>R3,capitalFirst:()=>Ln,encodeHTML:()=>Ak,formatTime:()=>Lt,formatTpl:()=>R7,getTextRect:()=>Ha,getTooltipMarker:()=>Le,normalizeCssArray:()=>R4,toCamelCase:()=>R5,truncateText:()=>IO});var tx={};n.r(tx),n.d(tx,{bind:()=>MT,clone:()=>Mh,curry:()=>ME,defaults:()=>Mg,each:()=>Mb,extend:()=>Mf,filter:()=>MM,indexOf:()=>Mv,inherits:()=>My,isArray:()=>MI,isFunction:()=>MD,isObject:()=>MO,isString:()=>MP,map:()=>MS,merge:()=>Md,reduce:()=>Mw});var tb={};n.r(tb),n.d(tb,{Axis:()=>Hv,ChartView:()=>Nv,ComponentModel:()=>Lv,ComponentView:()=>kR,List:()=>zK,Model:()=>Rb,PRIORITY:()=>FU,SeriesModel:()=>kD,color:()=>td,connect:()=>zi,dataTool:()=>zE,dependencies:()=>Fz,disConnect:()=>zo,disconnect:()=>za,dispose:()=>zs,env:()=>w1,extendChartView:()=>Hb,extendComponentModel:()=>Hy,extendComponentView:()=>H_,extendSeriesModel:()=>Hx,format:()=>t_,getCoordinateSystemDimensions:()=>zy,getInstanceByDom:()=>zl,getInstanceById:()=>zu,getMap:()=>zC,graphic:()=>ty,helper:()=>tg,init:()=>zr,innerDrawElementOnCanvas:()=>FE,matrix:()=>th,number:()=>tm,parseGeoJSON:()=>Hi,parseGeoJson:()=>Hi,registerAction:()=>zm,registerCoordinateSystem:()=>zv,registerLayout:()=>z_,registerLoading:()=>zw,registerLocale:()=>RE,registerMap:()=>zA,registerPostInit:()=>zp,registerPostUpdate:()=>zf,registerPreprocessor:()=>zh,registerProcessor:()=>zd,registerTheme:()=>zc,registerTransform:()=>zT,registerUpdateLifecycle:()=>zg,registerVisual:()=>zx,setCanvasCreator:()=>zM,setPlatformAPI:()=>w6,throttle:()=>Nb,time:()=>tv,use:()=>zP,util:()=>tx,vector:()=>tc,version:()=>FF,zrUtil:()=>tu,zrender:()=>tp});var tS=n("2676"),tw=n("8751");let tM="170",tA={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},tC={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},tT=0,tE=1,tI=2,tD=3,tP=0,tR=1,tL=2,tO=3,tk=0,tB=1,tN=2,tF=0,tz=1,tU=2,tH=3,tG=4,tV=5,tW=100,tj=101,tX=102,tY=103,tJ=104,tZ=200,tq=201,tK=202,tQ=203,t$=204,t0=205,t1=206,t2=207,t3=208,t5=209,t4=210,t6=211,t9=212,t8=213,t7=214,ne=0,nt=1,nn=2,nr=3,ni=4,na=5,no=6,ns=7,nl=0,nu=1,nc=2,nh=0,nd=1,np=2,nf=3,ng=4,nm=5,nv=6,ny=7,n_="attached",nx="detached",nb=300,nS=301,nw=302,nM=303,nA=304,nC=306,nT=1e3,nE=1001,nI=1002,nD=1003,nP=1004,nR=1004,nL=1005,nO=1005,nk=1006,nB=1007,nN=1007,nF=1008,nz=1008,nU=1009,nH=1010,nG=1011,nV=1012,nW=1013,nj=1014,nX=1015,nY=1016,nJ=1017,nZ=1018,nq=1020,nK=35902,nQ=1021,n$=1022,n0=1023,n1=1024,n2=1025,n3=1026,n5=1027,n4=1028,n6=1029,n9=1030,n8=1031,n7=1032,re=1033,rt=33776,rn=33777,rr=33778,ri=33779,ra=35840,ro=35841,rs=35842,rl=35843,ru=36196,rc=37492,rh=37496,rd=37808,rp=37809,rf=37810,rg=37811,rm=37812,rv=37813,ry=37814,r_=37815,rx=37816,rb=37817,rS=37818,rw=37819,rM=37820,rA=37821,rC=36492,rT=36494,rE=36495,rI=36283,rD=36284,rP=36285,rR=36286,rL=2200,rO=2201,rk=2202,rB=2300,rN=2301,rF=2302,rz=2400,rU=2401,rH=2402,rG=2500,rV=2501,rW=0,rj=1,rX=2,rY=3200,rJ=3201,rZ=3202,rq=3203,rK=0,rQ=1,r$="",r0="srgb",r1="srgb-linear",r2="linear",r3="srgb",r5=0,r4=7680,r6=7681,r9=7682,r8=7683,r7=34055,ie=34056,it=5386,ir=512,ii=513,ia=514,io=515,is=516,il=517,iu=518,ic=519,ih=512,id=513,ip=514,ig=515,im=516,iv=517,iy=518,i_=519,ix=35044,ib=35048,iS=35040,iw=35045,iM=35049,iA=35041,iC=35046,iT=35050,iE=35042,iI="100",iD="300 es",iP=2e3,iR=2001;class iL{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;let n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;let n=this._listeners[e];if(void 0!==n){let e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;let t=this._listeners[e.type];if(void 0!==t){e.target=this;let n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}let iO=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],ik=1234567,iB=Math.PI/180,iN=180/Math.PI;function iF(){let e=0xffffffff*Math.random()|0,t=0xffffffff*Math.random()|0,n=0xffffffff*Math.random()|0,r=0xffffffff*Math.random()|0;return(iO[255&e]+iO[e>>8&255]+iO[e>>16&255]+iO[e>>24&255]+"-"+iO[255&t]+iO[t>>8&255]+"-"+iO[t>>16&15|64]+iO[t>>24&255]+"-"+iO[63&n|128]+iO[n>>8&255]+"-"+iO[n>>16&255]+iO[n>>24&255]+iO[255&r]+iO[r>>8&255]+iO[r>>16&255]+iO[r>>24&255]).toLowerCase()}function iz(e,t,n){return Math.max(t,Math.min(n,e))}function iU(e,t){return(e%t+t)%t}function iH(e,t,n){return(1-n)*e+n*t}function iG(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/0xffffffff;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/0x7fffffff,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw Error("Invalid component type.")}}function iV(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(0xffffffff*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(0x7fffffff*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw Error("Invalid component type.")}}let iW={DEG2RAD:iB,RAD2DEG:iN,generateUUID:iF,clamp:iz,euclideanModulo:iU,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:iH,damp:function(e,t,n,r){return iH(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(iU(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(ik=e);let t=ik+=0x6d2b79f5;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/0x100000000},degToRad:function(e){return e*iB},radToDeg:function(e){return e*iN},isPowerOfTwo:function(e){return(e&e-1)==0&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){let a=Math.cos,s=Math.sin,u=a(n/2),c=s(n/2),h=a((t+r)/2),p=s((t+r)/2),f=a((t-r)/2),v=s((t-r)/2),y=a((r-t)/2),_=s((r-t)/2);switch(i){case"XYX":e.set(u*p,c*f,c*v,u*h);break;case"YZY":e.set(c*v,u*p,c*f,u*h);break;case"ZXZ":e.set(c*f,c*v,u*p,u*h);break;case"XZX":e.set(u*p,c*_,c*y,u*h);break;case"YXY":e.set(c*y,u*p,c*_,u*h);break;case"ZYZ":e.set(c*_,c*y,u*p,u*h)}},normalize:iV,denormalize:iG};class ij{constructor(e=0,t=0){ij.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:Math.acos(iz(this.dot(e)/t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class iX{constructor(e,t,n,r,i,a,s,u,c){iX.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,s,u,c)}set(e,t,n,r,i,a,s,u,c){let h=this.elements;return h[0]=e,h[1]=r,h[2]=s,h[3]=t,h[4]=i,h[5]=u,h[6]=n,h[7]=a,h[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[3],u=n[6],c=n[1],h=n[4],p=n[7],f=n[2],v=n[5],y=n[8],_=r[0],x=r[3],b=r[6],S=r[1],w=r[4],M=r[7],A=r[2],C=r[5],T=r[8];return i[0]=a*_+s*S+u*A,i[3]=a*x+s*w+u*C,i[6]=a*b+s*M+u*T,i[1]=c*_+h*S+p*A,i[4]=c*x+h*w+p*C,i[7]=c*b+h*M+p*T,i[2]=f*_+v*S+y*A,i[5]=f*x+v*w+y*C,i[8]=f*b+v*M+y*T,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8];return t*a*h-t*s*c-n*i*h+n*s*u+r*i*c-r*a*u}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8],p=h*a-s*c,f=s*u-h*i,v=c*i-a*u,y=t*p+n*f+r*v;if(0===y)return this.set(0,0,0,0,0,0,0,0,0);let _=1/y;return e[0]=p*_,e[1]=(r*c-h*n)*_,e[2]=(s*n-r*a)*_,e[3]=f*_,e[4]=(h*t-r*u)*_,e[5]=(r*i-s*t)*_,e[6]=v*_,e[7]=(n*u-c*t)*_,e[8]=(a*t-n*i)*_,this}transpose(){let e;let t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,a,s){let u=Math.cos(i),c=Math.sin(i);return this.set(n*u,n*c,-n*(u*a+c*s)+a+e,-r*c,r*u,-r*(-c*a+u*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(iY.makeScale(e,t)),this}rotate(e){return this.premultiply(iY.makeRotation(-e)),this}translate(e,t){return this.premultiply(iY.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}let iY=new iX;function iJ(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}let iZ={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function iq(e,t){return new iZ[e](t)}function iK(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function iQ(){let e=iK("canvas");return e.style.display="block",e}let i$={};function i0(e){!(e in i$)&&(i$[e]=!0)}let i1={enabled:!0,workingColorSpace:r1,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n?(this.spaces[t].transfer===r3&&(e.r=i2(e.r),e.g=i2(e.g),e.b=i2(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===r3&&(e.r=i3(e.r),e.g=i3(e.g),e.b=i3(e.b)),e):e},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===r$?r2:this.spaces[e].transfer},getLuminanceCoefficients:function(e,t=this.workingColorSpace){return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(e=this.workingColorSpace){return this.spaces[e].workingColorSpaceConfig.unpackColorSpace}};function i2(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function i3(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let i5=[.64,.33,.3,.6,.15,.06],i4=[.2126,.7152,.0722],i6=[.3127,.329],i9=new iX().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),i8=new iX().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);i1.define({[r1]:{primaries:i5,whitePoint:i6,transfer:r2,toXYZ:i9,fromXYZ:i8,luminanceCoefficients:i4,workingColorSpaceConfig:{unpackColorSpace:r0},outputColorSpaceConfig:{drawingBufferColorSpace:r0}},[r0]:{primaries:i5,whitePoint:i6,transfer:r3,toXYZ:i9,fromXYZ:i8,luminanceCoefficients:i4,outputColorSpaceConfig:{drawingBufferColorSpace:r0}}});class i7{static getDataURL(t){let n;if(/^data:/i.test(t.src)||"undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)n=t;else{void 0===e&&(e=iK("canvas")),e.width=t.width,e.height=t.height;let r=e.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),n=e}return n.width>2048||n.height>2048?n.toDataURL("image/jpeg",.6):n.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){let t=iK("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);let r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*i2(i[e]/255);return n.putImageData(r,0,0),t}if(!e.data)return e;{let t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*i2(t[e]/255)):t[e]=i2(t[e]);return{data:t,width:e.width,height:e.height}}}}let ae=0;class at{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:ae++}),this.uuid=iF(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];let n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(an(r[t].image)):e.push(an(r[t]))}else e=an(r);n.url=e}return!t&&(e.images[this.uuid]=n),n}}function an(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?i7.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:{}}let ar=0;class ai extends iL{constructor(e=ai.DEFAULT_IMAGE,t=ai.DEFAULT_MAPPING,n=nE,r=nE,i=nk,a=nF,s=n0,u=nU,c=ai.DEFAULT_ANISOTROPY,h=r$){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ar++}),this.uuid=iF(),this.name="",this.source=new at(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=c,this.format=s,this.internalFormat=null,this.type=u,this.offset=new ij(0,0),this.repeat=new ij(1,1),this.center=new ij(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new iX,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];let n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),!t&&(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==nb)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case nT:e.x=e.x-Math.floor(e.x);break;case nE:e.x=e.x<0?0:1;break;case nI:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case nT:e.y=e.y-Math.floor(e.y);break;case nE:e.y=e.y<0?0:1;break;case nI:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}ai.DEFAULT_IMAGE=null,ai.DEFAULT_MAPPING=nb,ai.DEFAULT_ANISOTROPY=1;class aa{constructor(e=0,t=0,n=0,r=1){aa.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;let a=e.elements,s=a[0],u=a[4],c=a[8],h=a[1],p=a[5],f=a[9],v=a[2],y=a[6],_=a[10];if(.01>Math.abs(u-h)&&.01>Math.abs(c-v)&&.01>Math.abs(f-y)){if(.1>Math.abs(u+h)&&.1>Math.abs(c+v)&&.1>Math.abs(f+y)&&.1>Math.abs(s+p+_-3))return this.set(1,0,0,0),this;t=Math.PI;let e=(s+1)/2,a=(p+1)/2,x=(_+1)/2,b=(u+h)/4,S=(c+v)/4,w=(f+y)/4;return e>a&&e>x?e<.01?(n=0,r=.707106781,i=.707106781):(r=b/(n=Math.sqrt(e)),i=S/n):a>x?a<.01?(n=.707106781,r=0,i=.707106781):(n=b/(r=Math.sqrt(a)),i=w/r):x<.01?(n=.707106781,r=.707106781,i=0):(n=S/(i=Math.sqrt(x)),r=w/i),this.set(n,r,i,t),this}let x=Math.sqrt((y-f)*(y-f)+(c-v)*(c-v)+(h-u)*(h-u));return .001>Math.abs(x)&&(x=1),this.x=(y-f)/x,this.y=(c-v)/x,this.z=(h-u)/x,this.w=Math.acos((s+p+_-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ao extends iL{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new aa(0,0,e,t),this.scissorTest=!1,this.viewport=new aa(0,0,e,t);let r=new ai({width:e,height:t,depth:1},(n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:nk,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n)).mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];let i=n.count;for(let e=0;e<i;e++)this.textures[e]=r.clone(),this.textures[e].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++)this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new at(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class as extends ao{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class al extends ai{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=nD,this.minFilter=nD,this.wrapR=nE,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class au extends as{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new al(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class ac extends ai{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=nD,this.minFilter=nD,this.wrapR=nE,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ah extends as{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new ac(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class ad{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,a,s){let u=n[r+0],c=n[r+1],h=n[r+2],p=n[r+3],f=i[a+0],v=i[a+1],y=i[a+2],_=i[a+3];if(0===s){e[t+0]=u,e[t+1]=c,e[t+2]=h,e[t+3]=p;return}if(1===s){e[t+0]=f,e[t+1]=v,e[t+2]=y,e[t+3]=_;return}if(p!==_||u!==f||c!==v||h!==y){let e=1-s,t=u*f+c*v+h*y+p*_,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){let i=Math.sqrt(r),a=Math.atan2(i,t*n);e=Math.sin(e*a)/i,s=Math.sin(s*a)/i}let i=s*n;if(u=u*e+f*i,c=c*e+v*i,h=h*e+y*i,p=p*e+_*i,e===1-s){let e=1/Math.sqrt(u*u+c*c+h*h+p*p);u*=e,c*=e,h*=e,p*=e}}e[t]=u,e[t+1]=c,e[t+2]=h,e[t+3]=p}static multiplyQuaternionsFlat(e,t,n,r,i,a){let s=n[r],u=n[r+1],c=n[r+2],h=n[r+3],p=i[a],f=i[a+1],v=i[a+2],y=i[a+3];return e[t]=s*y+h*p+u*v-c*f,e[t+1]=u*y+h*f+c*p-s*v,e[t+2]=c*y+h*v+s*f-u*p,e[t+3]=h*y-s*p-u*f-c*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let n=e._x,r=e._y,i=e._z,a=e._order,s=Math.cos,u=Math.sin,c=s(n/2),h=s(r/2),p=s(i/2),f=u(n/2),v=u(r/2),y=u(i/2);switch(a){case"XYZ":this._x=f*h*p+c*v*y,this._y=c*v*p-f*h*y,this._z=c*h*y+f*v*p,this._w=c*h*p-f*v*y;break;case"YXZ":this._x=f*h*p+c*v*y,this._y=c*v*p-f*h*y,this._z=c*h*y-f*v*p,this._w=c*h*p+f*v*y;break;case"ZXY":this._x=f*h*p-c*v*y,this._y=c*v*p+f*h*y,this._z=c*h*y+f*v*p,this._w=c*h*p-f*v*y;break;case"ZYX":this._x=f*h*p-c*v*y,this._y=c*v*p+f*h*y,this._z=c*h*y-f*v*p,this._w=c*h*p+f*v*y;break;case"YZX":this._x=f*h*p+c*v*y,this._y=c*v*p+f*h*y,this._z=c*h*y-f*v*p,this._w=c*h*p-f*v*y;break;case"XZY":this._x=f*h*p-c*v*y,this._y=c*v*p-f*h*y,this._z=c*h*y+f*v*p,this._w=c*h*p+f*v*y}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],s=t[5],u=t[9],c=t[2],h=t[6],p=t[10],f=n+s+p;if(f>0){let e=.5/Math.sqrt(f+1);this._w=.25/e,this._x=(h-u)*e,this._y=(i-c)*e,this._z=(a-r)*e}else if(n>s&&n>p){let e=2*Math.sqrt(1+n-s-p);this._w=(h-u)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(i+c)/e}else if(s>p){let e=2*Math.sqrt(1+s-n-p);this._w=(i-c)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(u+h)/e}else{let e=2*Math.sqrt(1+p-n-s);this._w=(a-r)/e,this._x=(i+c)/e,this._y=(u+h)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y),this._w=n):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(iz(this.dot(e),-1,1)))}rotateTowards(e,t){let n=this.angleTo(e);if(0===n)return this;let r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let n=e._x,r=e._y,i=e._z,a=e._w,s=t._x,u=t._y,c=t._z,h=t._w;return this._x=n*h+a*s+r*c-i*u,this._y=r*h+a*u+i*s-n*c,this._z=i*h+a*c+n*u-r*s,this._w=a*h-n*s-r*u-i*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);let n=this._x,r=this._y,i=this._z,a=this._w,s=a*e._w+n*e._x+r*e._y+i*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;let u=1-s*s;if(u<=Number.EPSILON){let e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this}let c=Math.sqrt(u),h=Math.atan2(c,s),p=Math.sin((1-t)*h)/c,f=Math.sin(t*h)/c;return this._w=a*p+this._w*f,this._x=n*p+this._x*f,this._y=r*p+this._y*f,this._z=i*p+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),i*Math.sin(t),i*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ap{constructor(e=0,t=0,n=0){ap.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(ag.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ag.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(e){let t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,s=e.z,u=e.w,c=2*(a*r-s*n),h=2*(s*t-i*r),p=2*(i*n-a*t);return this.x=t+u*c+a*p-s*h,this.y=n+u*h+s*c-i*p,this.z=r+u*p+i*h-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let n=e.x,r=e.y,i=e.z,a=t.x,s=t.y,u=t.z;return this.x=r*u-i*s,this.y=i*a-n*u,this.z=n*s-r*a,this}projectOnVector(e){let t=e.lengthSq();if(0===t)return this.set(0,0,0);let n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return af.copy(this).projectOnVector(e),this.sub(af)}reflect(e){return this.sub(af.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:Math.acos(iz(this.dot(e)/t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){let r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}let af=new ap,ag=new ad;class am{constructor(e=new ap(Infinity,Infinity,Infinity),t=new ap(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(ay.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(ay.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=ay.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let n=e.geometry;if(void 0!==n){let r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,ay):ay.fromBufferAttribute(r,t),ay.applyMatrix4(e.matrixWorld),this.expandByPoint(ay);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),a_.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),a_.copy(n.boundingBox)),a_.applyMatrix4(e.matrixWorld),this.union(a_)}let r=e.children;for(let e=0,n=r.length;e<n;e++)this.expandByObject(r[e],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ay),ay.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(aC),aT.subVectors(this.max,aC),ax.subVectors(e.a,aC),ab.subVectors(e.b,aC),aS.subVectors(e.c,aC),aw.subVectors(ab,ax),aM.subVectors(aS,ab),aA.subVectors(ax,aS);let t=[0,-aw.z,aw.y,0,-aM.z,aM.y,0,-aA.z,aA.y,aw.z,0,-aw.x,aM.z,0,-aM.x,aA.z,0,-aA.x,-aw.y,aw.x,0,-aM.y,aM.x,0,-aA.y,aA.x,0];return!!(aD(t,ax,ab,aS,aT)&&aD(t=[1,0,0,0,1,0,0,0,1],ax,ab,aS,aT))&&(aE.crossVectors(aw,aM),aD(t=[aE.x,aE.y,aE.z],ax,ab,aS,aT))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ay).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(ay).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(av[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),av[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),av[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),av[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),av[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),av[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),av[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),av[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(av),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}let av=[new ap,new ap,new ap,new ap,new ap,new ap,new ap,new ap],ay=new ap,a_=new am,ax=new ap,ab=new ap,aS=new ap,aw=new ap,aM=new ap,aA=new ap,aC=new ap,aT=new ap,aE=new ap,aI=new ap;function aD(e,t,n,r,i){for(let a=0,s=e.length-3;a<=s;a+=3){aI.fromArray(e,a);let s=i.x*Math.abs(aI.x)+i.y*Math.abs(aI.y)+i.z*Math.abs(aI.z),u=t.dot(aI),c=n.dot(aI),h=r.dot(aI);if(Math.max(-Math.max(u,c,h),Math.min(u,c,h))>s)return!1}return!0}let aP=new am,aR=new ap,aL=new ap;class aO{constructor(e=new ap,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let n=this.center;void 0!==t?n.copy(t):aP.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;aR.subVectors(e,this.center);let t=aR.lengthSq();if(t>this.radius*this.radius){let e=Math.sqrt(t),n=(e-this.radius)*.5;this.center.addScaledVector(aR,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(aL.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(aR.copy(e.center).add(aL)),this.expandByPoint(aR.copy(e.center).sub(aL))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}let ak=new ap,aB=new ap,aN=new ap,aF=new ap,az=new ap,aU=new ap,aH=new ap;class aG{constructor(e=new ap,t=new ap(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ak)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=ak.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ak.copy(this.origin).addScaledVector(this.direction,t),ak.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){let i,a,s,u;aB.copy(e).add(t).multiplyScalar(.5),aN.copy(t).sub(e).normalize(),aF.copy(this.origin).sub(aB);let c=.5*e.distanceTo(t),h=-this.direction.dot(aN),p=aF.dot(this.direction),f=-aF.dot(aN),v=aF.lengthSq(),y=Math.abs(1-h*h);if(y>0){if(i=h*f-p,a=h*p-f,u=c*y,i>=0){if(a>=-u){if(a<=u){let e=1/y;i*=e,a*=e,s=i*(i+h*a+2*p)+a*(h*i+a+2*f)+v}else s=-(i=Math.max(0,-(h*(a=c)+p)))*i+a*(a+2*f)+v}else s=-(i=Math.max(0,-(h*(a=-c)+p)))*i+a*(a+2*f)+v}else a<=-u?(a=(i=Math.max(0,-(-h*c+p)))>0?-c:Math.min(Math.max(-c,-f),c),s=-i*i+a*(a+2*f)+v):a<=u?(i=0,s=(a=Math.min(Math.max(-c,-f),c))*(a+2*f)+v):(a=(i=Math.max(0,-(h*c+p)))>0?c:Math.min(Math.max(-c,-f),c),s=-i*i+a*(a+2*f)+v)}else a=h>0?-c:c,s=-(i=Math.max(0,-(h*a+p)))*i+a*(a+2*f)+v;return n&&n.copy(this.origin).addScaledVector(this.direction,i),r&&r.copy(aB).addScaledVector(aN,a),s}intersectSphere(e,t){ak.subVectors(e.center,this.origin);let n=ak.dot(this.direction),r=ak.dot(ak)-n*n,i=e.radius*e.radius;if(r>i)return null;let a=Math.sqrt(i-r),s=n-a,u=n+a;return u<0?null:s<0?this.at(u,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;let n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){let n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return!!(0===t||e.normal.dot(this.direction)*t<0)||!1}intersectBox(e,t){let n,r,i,a,s,u;let c=1/this.direction.x,h=1/this.direction.y,p=1/this.direction.z,f=this.origin;return(c>=0?(n=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(n=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),h>=0?(i=(e.min.y-f.y)*h,a=(e.max.y-f.y)*h):(i=(e.max.y-f.y)*h,a=(e.min.y-f.y)*h),n>a||i>r)?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),p>=0?(s=(e.min.z-f.z)*p,u=(e.max.z-f.z)*p):(s=(e.max.z-f.z)*p,u=(e.min.z-f.z)*p),n>u||s>r)?null:((s>n||n!=n)&&(n=s),(u<r||r!=r)&&(r=u),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return null!==this.intersectBox(e,ak)}intersectTriangle(e,t,n,r,i){let a;az.subVectors(t,e),aU.subVectors(n,e),aH.crossVectors(az,aU);let s=this.direction.dot(aH);if(s>0){if(r)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}aF.subVectors(this.origin,e);let u=a*this.direction.dot(aU.crossVectors(aF,aU));if(u<0)return null;let c=a*this.direction.dot(az.cross(aF));if(c<0||u+c>s)return null;let h=-a*aF.dot(aH);return h<0?null:this.at(h/s,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class aV{constructor(e,t,n,r,i,a,s,u,c,h,p,f,v,y,_,x){aV.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,s,u,c,h,p,f,v,y,_,x)}set(e,t,n,r,i,a,s,u,c,h,p,f,v,y,_,x){let b=this.elements;return b[0]=e,b[4]=t,b[8]=n,b[12]=r,b[1]=i,b[5]=a,b[9]=s,b[13]=u,b[2]=c,b[6]=h,b[10]=p,b[14]=f,b[3]=v,b[7]=y,b[11]=_,b[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new aV().fromArray(this.elements)}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){let t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,n=e.elements,r=1/aW.setFromMatrixColumn(e,0).length(),i=1/aW.setFromMatrixColumn(e,1).length(),a=1/aW.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),s=Math.sin(n),u=Math.cos(r),c=Math.sin(r),h=Math.cos(i),p=Math.sin(i);if("XYZ"===e.order){let e=a*h,n=a*p,r=s*h,i=s*p;t[0]=u*h,t[4]=-u*p,t[8]=c,t[1]=n+r*c,t[5]=e-i*c,t[9]=-s*u,t[2]=i-e*c,t[6]=r+n*c,t[10]=a*u}else if("YXZ"===e.order){let e=u*h,n=u*p,r=c*h,i=c*p;t[0]=e+i*s,t[4]=r*s-n,t[8]=a*c,t[1]=a*p,t[5]=a*h,t[9]=-s,t[2]=n*s-r,t[6]=i+e*s,t[10]=a*u}else if("ZXY"===e.order){let e=u*h,n=u*p,r=c*h,i=c*p;t[0]=e-i*s,t[4]=-a*p,t[8]=r+n*s,t[1]=n+r*s,t[5]=a*h,t[9]=i-e*s,t[2]=-a*c,t[6]=s,t[10]=a*u}else if("ZYX"===e.order){let e=a*h,n=a*p,r=s*h,i=s*p;t[0]=u*h,t[4]=r*c-n,t[8]=e*c+i,t[1]=u*p,t[5]=i*c+e,t[9]=n*c-r,t[2]=-c,t[6]=s*u,t[10]=a*u}else if("YZX"===e.order){let e=a*u,n=a*c,r=s*u,i=s*c;t[0]=u*h,t[4]=i-e*p,t[8]=r*p+n,t[1]=p,t[5]=a*h,t[9]=-s*h,t[2]=-c*h,t[6]=n*p+r,t[10]=e-i*p}else if("XZY"===e.order){let e=a*u,n=a*c,r=s*u,i=s*c;t[0]=u*h,t[4]=-p,t[8]=c*h,t[1]=e*p+i,t[5]=a*h,t[9]=n*p-r,t[2]=r*p-n,t[6]=s*h,t[10]=i*p+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(aX,e,aY)}lookAt(e,t,n){let r=this.elements;return aq.subVectors(e,t),0===aq.lengthSq()&&(aq.z=1),aq.normalize(),aJ.crossVectors(n,aq),0===aJ.lengthSq()&&(1===Math.abs(n.z)?aq.x+=1e-4:aq.z+=1e-4,aq.normalize(),aJ.crossVectors(n,aq)),aJ.normalize(),aZ.crossVectors(aq,aJ),r[0]=aJ.x,r[4]=aZ.x,r[8]=aq.x,r[1]=aJ.y,r[5]=aZ.y,r[9]=aq.y,r[2]=aJ.z,r[6]=aZ.z,r[10]=aq.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[4],u=n[8],c=n[12],h=n[1],p=n[5],f=n[9],v=n[13],y=n[2],_=n[6],x=n[10],b=n[14],S=n[3],w=n[7],M=n[11],A=n[15],C=r[0],T=r[4],I=r[8],D=r[12],P=r[1],R=r[5],L=r[9],O=r[13],k=r[2],B=r[6],N=r[10],F=r[14],z=r[3],U=r[7],H=r[11],G=r[15];return i[0]=a*C+s*P+u*k+c*z,i[4]=a*T+s*R+u*B+c*U,i[8]=a*I+s*L+u*N+c*H,i[12]=a*D+s*O+u*F+c*G,i[1]=h*C+p*P+f*k+v*z,i[5]=h*T+p*R+f*B+v*U,i[9]=h*I+p*L+f*N+v*H,i[13]=h*D+p*O+f*F+v*G,i[2]=y*C+_*P+x*k+b*z,i[6]=y*T+_*R+x*B+b*U,i[10]=y*I+_*L+x*N+b*H,i[14]=y*D+_*O+x*F+b*G,i[3]=S*C+w*P+M*k+A*z,i[7]=S*T+w*R+M*B+A*U,i[11]=S*I+w*L+M*N+A*H,i[15]=S*D+w*O+M*F+A*G,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],s=e[5],u=e[9],c=e[13],h=e[2],p=e[6],f=e[10],v=e[14],y=e[3],_=e[7],x=e[11];return y*(+i*u*p-r*c*p-i*s*f+n*c*f+r*s*v-n*u*v)+_*(+t*u*v-t*c*f+i*a*f-r*a*v+r*c*h-i*u*h)+x*(+t*c*p-t*s*v-i*a*p+n*a*v+i*s*h-n*c*h)+e[15]*(-r*s*h-t*u*p+t*s*f+r*a*p-n*a*f+n*u*h)}transpose(){let e;let t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(e,t,n){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8],p=e[9],f=e[10],v=e[11],y=e[12],_=e[13],x=e[14],b=e[15],S=p*x*c-_*f*c+_*u*v-s*x*v-p*u*b+s*f*b,w=y*f*c-h*x*c-y*u*v+a*x*v+h*u*b-a*f*b,M=h*_*c-y*p*c+y*s*v-a*_*v-h*s*b+a*p*b,A=y*p*u-h*_*u-y*s*f+a*_*f+h*s*x-a*p*x,C=t*S+n*w+r*M+i*A;if(0===C)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let T=1/C;return e[0]=S*T,e[1]=(_*f*i-p*x*i-_*r*v+n*x*v+p*r*b-n*f*b)*T,e[2]=(s*x*i-_*u*i+_*r*c-n*x*c-s*r*b+n*u*b)*T,e[3]=(p*u*i-s*f*i-p*r*c+n*f*c+s*r*v-n*u*v)*T,e[4]=w*T,e[5]=(h*x*i-y*f*i+y*r*v-t*x*v-h*r*b+t*f*b)*T,e[6]=(y*u*i-a*x*i-y*r*c+t*x*c+a*r*b-t*u*b)*T,e[7]=(a*f*i-h*u*i+h*r*c-t*f*c-a*r*v+t*u*v)*T,e[8]=M*T,e[9]=(y*p*i-h*_*i-y*n*v+t*_*v+h*n*b-t*p*b)*T,e[10]=(a*_*i-y*s*i+y*n*c-t*_*c-a*n*b+t*s*b)*T,e[11]=(h*s*i-a*p*i-h*n*c+t*p*c+a*n*v-t*s*v)*T,e[12]=A*T,e[13]=(h*_*r-y*p*r+y*n*f-t*_*f-h*n*x+t*p*x)*T,e[14]=(y*s*r-a*_*r-y*n*u+t*_*u+a*n*x-t*s*x)*T,e[15]=(a*p*r-h*s*r+h*n*u-t*p*u-a*n*f+t*s*f)*T,this}scale(e){let t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6];return Math.sqrt(Math.max(t,n,e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,s=e.y,u=e.z,c=i*a,h=i*s;return this.set(c*a+n,c*s-r*u,c*u+r*s,0,c*s+r*u,h*s+n,h*u-r*a,0,c*u-r*s,h*u+r*a,i*u*u+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){let r=this.elements,i=t._x,a=t._y,s=t._z,u=t._w,c=i+i,h=a+a,p=s+s,f=i*c,v=i*h,y=i*p,_=a*h,x=a*p,b=s*p,S=u*c,w=u*h,M=u*p,A=n.x,C=n.y,T=n.z;return r[0]=(1-(_+b))*A,r[1]=(v+M)*A,r[2]=(y-w)*A,r[3]=0,r[4]=(v-M)*C,r[5]=(1-(f+b))*C,r[6]=(x+S)*C,r[7]=0,r[8]=(y+w)*T,r[9]=(x-S)*T,r[10]=(1-(f+_))*T,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){let r=this.elements,i=aW.set(r[0],r[1],r[2]).length(),a=aW.set(r[4],r[5],r[6]).length(),s=aW.set(r[8],r[9],r[10]).length();0>this.determinant()&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],aj.copy(this);let u=1/i,c=1/a,h=1/s;return aj.elements[0]*=u,aj.elements[1]*=u,aj.elements[2]*=u,aj.elements[4]*=c,aj.elements[5]*=c,aj.elements[6]*=c,aj.elements[8]*=h,aj.elements[9]*=h,aj.elements[10]*=h,t.setFromRotationMatrix(aj),n.x=i,n.y=a,n.z=s,this}makePerspective(e,t,n,r,i,a,s=iP){let u,c;let h=this.elements;if(s===iP)u=-(a+i)/(a-i),c=-2*a*i/(a-i);else if(s===iR)u=-a/(a-i),c=-a*i/(a-i);else throw Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return h[0]=2*i/(t-e),h[4]=0,h[8]=(t+e)/(t-e),h[12]=0,h[1]=0,h[5]=2*i/(n-r),h[9]=(n+r)/(n-r),h[13]=0,h[2]=0,h[6]=0,h[10]=u,h[14]=c,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,n,r,i,a,s=iP){let u,c;let h=this.elements,p=1/(t-e),f=1/(n-r),v=1/(a-i);if(s===iP)u=(a+i)*v,c=-2*v;else if(s===iR)u=i*v,c=-1*v;else throw Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return h[0]=2*p,h[4]=0,h[8]=0,h[12]=-((t+e)*p),h[1]=0,h[5]=2*f,h[9]=0,h[13]=-((n+r)*f),h[2]=0,h[6]=0,h[10]=c,h[14]=-u,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){let t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}let aW=new ap,aj=new aV,aX=new ap(0,0,0),aY=new ap(1,1,1),aJ=new ap,aZ=new ap,aq=new ap,aK=new aV,aQ=new ad;class a${constructor(e=0,t=0,n=0,r=a$.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){let r=e.elements,i=r[0],a=r[4],s=r[8],u=r[1],c=r[5],h=r[9],p=r[2],f=r[6],v=r[10];switch(t){case"XYZ":this._y=Math.asin(iz(s,-1,1)),.9999999>Math.abs(s)?(this._x=Math.atan2(-h,v),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-iz(h,-1,1)),.9999999>Math.abs(h)?(this._y=Math.atan2(s,v),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-p,i),this._z=0);break;case"ZXY":this._x=Math.asin(iz(f,-1,1)),.9999999>Math.abs(f)?(this._y=Math.atan2(-p,v),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(u,i));break;case"ZYX":this._y=Math.asin(-iz(p,-1,1)),.9999999>Math.abs(p)?(this._x=Math.atan2(f,v),this._z=Math.atan2(u,i)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(iz(u,-1,1)),.9999999>Math.abs(u)?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-p,i)):(this._x=0,this._y=Math.atan2(s,v));break;case"XZY":this._z=Math.asin(-iz(a,-1,1)),.9999999>Math.abs(a)?(this._x=Math.atan2(f,c),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-h,v),this._y=0)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return aK.makeRotationFromQuaternion(e),this.setFromRotationMatrix(aK,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return aQ.setFromEuler(this),this.setFromQuaternion(aQ,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}a$.DEFAULT_ORDER="XYZ";class a0{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}isEnabled(e){return(this.mask&(1<<e|0))!=0}}let a1=0,a2=new ap,a3=new ad,a5=new aV,a4=new ap,a6=new ap,a9=new ap,a8=new ad,a7=new ap(1,0,0),oe=new ap(0,1,0),ot=new ap(0,0,1),on={type:"added"},or={type:"removed"},oi={type:"childadded",child:null},oa={type:"childremoved",child:null};class oo extends iL{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:a1++}),this.uuid=iF(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=oo.DEFAULT_UP.clone();let e=new ap,t=new a$,n=new ad,r=new ap(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new aV},normalMatrix:{value:new iX}}),this.matrix=new aV,this.matrixWorld=new aV,this.matrixAutoUpdate=oo.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=oo.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new a0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return a3.setFromAxisAngle(e,t),this.quaternion.multiply(a3),this}rotateOnWorldAxis(e,t){return a3.setFromAxisAngle(e,t),this.quaternion.premultiply(a3),this}rotateX(e){return this.rotateOnAxis(a7,e)}rotateY(e){return this.rotateOnAxis(oe,e)}rotateZ(e){return this.rotateOnAxis(ot,e)}translateOnAxis(e,t){return a2.copy(e).applyQuaternion(this.quaternion),this.position.add(a2.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(a7,e)}translateY(e){return this.translateOnAxis(oe,e)}translateZ(e){return this.translateOnAxis(ot,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(a5.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?a4.copy(e):a4.set(e,t,n);let r=this.parent;this.updateWorldMatrix(!0,!1),a6.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?a5.lookAt(a6,a4,this.up):a5.lookAt(a4,a6,this.up),this.quaternion.setFromRotationMatrix(a5),r&&(a5.extractRotation(r.matrixWorld),a3.setFromRotationMatrix(a5),this.quaternion.premultiply(a3.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?this:(e&&e.isObject3D&&(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(on),oi.child=e,this.dispatchEvent(oi),oi.child=null),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}let t=this.children.indexOf(e);return -1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(or),oa.child=e,this.dispatchEvent(oa),oa.child=null),this}removeFromParent(){let e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),a5.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),a5.multiply(e.parent.matrixWorld)),e.applyMatrix4(a5),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(on),oi.child=e,this.dispatchEvent(oi),oi.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){let r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);let r=this.children;for(let i=0,a=r.length;i<a;i++)r[i].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(a6,e,a9),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(a6,a8,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){let t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){let n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){let e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){let t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);let t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){let n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){let r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material){if(Array.isArray(this.material)){let t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material)}if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){let n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){let t=a(e.geometries),r=a(e.materials),i=a(e.textures),s=a(e.images),u=a(e.shapes),c=a(e.skeletons),h=a(e.animations),p=a(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),u.length>0&&(n.shapes=u),c.length>0&&(n.skeletons=c),h.length>0&&(n.animations=h),p.length>0&&(n.nodes=p)}return n.object=r,n;function a(e){let t=[];for(let n in e){let r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){let n=e.children[t];this.add(n.clone())}return this}}oo.DEFAULT_UP=new ap(0,1,0),oo.DEFAULT_MATRIX_AUTO_UPDATE=!0,oo.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;let os=new ap,ol=new ap,ou=new ap,oc=new ap,oh=new ap,od=new ap,op=new ap,of=new ap,og=new ap,om=new ap,ov=new aa,oy=new aa,o_=new aa;class ox{constructor(e=new ap,t=new ap,n=new ap){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),os.subVectors(e,t),r.cross(os);let i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){os.subVectors(r,t),ol.subVectors(n,t),ou.subVectors(e,t);let a=os.dot(os),s=os.dot(ol),u=os.dot(ou),c=ol.dot(ol),h=ol.dot(ou),p=a*c-s*s;if(0===p)return i.set(0,0,0),null;let f=1/p,v=(c*u-s*h)*f,y=(a*h-s*u)*f;return i.set(1-v-y,y,v)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,oc)&&oc.x>=0&&oc.y>=0&&oc.x+oc.y<=1}static getInterpolation(e,t,n,r,i,a,s,u){return null===this.getBarycoord(e,t,n,r,oc)?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(i,oc.x),u.addScaledVector(a,oc.y),u.addScaledVector(s,oc.z),u)}static getInterpolatedAttribute(e,t,n,r,i,a){return ov.setScalar(0),oy.setScalar(0),o_.setScalar(0),ov.fromBufferAttribute(e,t),oy.fromBufferAttribute(e,n),o_.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(ov,i.x),a.addScaledVector(oy,i.y),a.addScaledVector(o_,i.z),a}static isFrontFacing(e,t,n,r){return os.subVectors(n,t),ol.subVectors(e,t),0>os.cross(ol).dot(r)}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return os.subVectors(this.c,this.b),ol.subVectors(this.a,this.b),.5*os.cross(ol).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ox.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ox.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,i){return ox.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return ox.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ox.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let n,r;let i=this.a,a=this.b,s=this.c;oh.subVectors(a,i),od.subVectors(s,i),of.subVectors(e,i);let u=oh.dot(of),c=od.dot(of);if(u<=0&&c<=0)return t.copy(i);og.subVectors(e,a);let h=oh.dot(og),p=od.dot(og);if(h>=0&&p<=h)return t.copy(a);let f=u*p-h*c;if(f<=0&&u>=0&&h<=0)return n=u/(u-h),t.copy(i).addScaledVector(oh,n);om.subVectors(e,s);let v=oh.dot(om),y=od.dot(om);if(y>=0&&v<=y)return t.copy(s);let _=v*c-u*y;if(_<=0&&c>=0&&y<=0)return r=c/(c-y),t.copy(i).addScaledVector(od,r);let x=h*y-v*p;if(x<=0&&p-h>=0&&v-y>=0)return op.subVectors(s,a),r=(p-h)/(p-h+(v-y)),t.copy(a).addScaledVector(op,r);let b=1/(x+_+f);return n=_*b,r=f*b,t.copy(i).addScaledVector(oh,n).addScaledVector(od,r)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let ob={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32},oS={h:0,s:0,l:0},ow={h:0,s:0,l:0};function oM(e,t,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*6*(2/3-n):e}class oA{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){return void 0===t&&void 0===n?e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e):this.setRGB(e,t,n),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=r0){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,i1.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=i1.workingColorSpace){return this.r=e,this.g=t,this.b=n,i1.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=i1.workingColorSpace){if(e=iU(e,1),t=iz(t,0,1),n=iz(n,0,1),0===t)this.r=this.g=this.b=n;else{let r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=oM(i,r,e+1/3),this.g=oM(i,r,e),this.b=oM(i,r,e-1/3)}return i1.toWorkingColorSpace(this,r),this}setStyle(e,t=r0){let n;function r(e){void 0!==e&&parseFloat(e)}if(n=/^(\w+)\(([^\)]*)\)/.exec(e)){let e;let i=n[1],a=n[2];switch(i){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(e[4]),this.setRGB(Math.min(255,parseInt(e[1],10))/255,Math.min(255,parseInt(e[2],10))/255,Math.min(255,parseInt(e[3],10))/255,t);if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(e[4]),this.setRGB(Math.min(100,parseInt(e[1],10))/100,Math.min(100,parseInt(e[2],10))/100,Math.min(100,parseInt(e[3],10))/100,t);break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(e[4]),this.setHSL(parseFloat(e[1])/360,parseFloat(e[2])/100,parseFloat(e[3])/100,t)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){let e=n[1],r=e.length;if(3===r)return this.setRGB(parseInt(e.charAt(0),16)/15,parseInt(e.charAt(1),16)/15,parseInt(e.charAt(2),16)/15,t);if(6===r)return this.setHex(parseInt(e,16),t)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=r0){let n=ob[e.toLowerCase()];return void 0!==n&&this.setHex(n,t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=i2(e.r),this.g=i2(e.g),this.b=i2(e.b),this}copyLinearToSRGB(e){return this.r=i3(e.r),this.g=i3(e.g),this.b=i3(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=r0){return i1.fromWorkingColorSpace(oC.copy(this),e),65536*Math.round(iz(255*oC.r,0,255))+256*Math.round(iz(255*oC.g,0,255))+Math.round(iz(255*oC.b,0,255))}getHexString(e=r0){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=i1.workingColorSpace){let n,r;i1.fromWorkingColorSpace(oC.copy(this),t);let i=oC.r,a=oC.g,s=oC.b,u=Math.max(i,a,s),c=Math.min(i,a,s),h=(c+u)/2;if(c===u)n=0,r=0;else{let e=u-c;switch(r=h<=.5?e/(u+c):e/(2-u-c),u){case i:n=(a-s)/e+(a<s?6:0);break;case a:n=(s-i)/e+2;break;case s:n=(i-a)/e+4}n/=6}return e.h=n,e.s=r,e.l=h,e}getRGB(e,t=i1.workingColorSpace){return i1.fromWorkingColorSpace(oC.copy(this),t),e.r=oC.r,e.g=oC.g,e.b=oC.b,e}getStyle(e=r0){i1.fromWorkingColorSpace(oC.copy(this),e);let t=oC.r,n=oC.g,r=oC.b;return e!==r0?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(oS),this.setHSL(oS.h+e,oS.s+t,oS.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(oS),e.getHSL(ow);let n=iH(oS.h,ow.h,t),r=iH(oS.s,ow.s,t),i=iH(oS.l,ow.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let oC=new oA;oA.NAMES=ob;let oT=0;class oE extends iL{static get type(){return"Material"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:oT++}),this.uuid=iF(),this.name="",this.blending=tz,this.side=tk,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=t$,this.blendDst=t0,this.blendEquation=tW,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new oA(0,0,0),this.blendAlpha=0,this.depthFunc=nr,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ic,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=r4,this.stencilZFail=r4,this.stencilZPass=r4,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(let t in e){let n=e[t];if(void 0===n)continue;let r=this[t];if(void 0!==r)r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){let t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});let n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){let t=[];for(let n in e){let r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==tz&&(n.blending=this.blending),this.side!==tk&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==t$&&(n.blendSrc=this.blendSrc),this.blendDst!==t0&&(n.blendDst=this.blendDst),this.blendEquation!==tW&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==nr&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ic&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==r4&&(n.stencilFail=this.stencilFail),this.stencilZFail!==r4&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==r4&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){let t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,n=null;if(null!==t){let e=t.length;n=Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){}}class oI extends oE{static get type(){return"MeshBasicMaterial"}constructor(e){super(),this.isMeshBasicMaterial=!0,this.color=new oA(0xffffff),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new a$,this.combine=nl,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}let oD=function(){let e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let e=0;e<256;++e){let t=e-127;t<-27?(r[e]=0,r[256|e]=32768,i[e]=24,i[256|e]=24):t<-14?(r[e]=1024>>-t-14,r[256|e]=1024>>-t-14|32768,i[e]=-t-1,i[256|e]=-t-1):t<=15?(r[e]=t+15<<10,r[256|e]=t+15<<10|32768,i[e]=13,i[256|e]=13):t<128?(r[e]=31744,r[256|e]=64512,i[e]=24,i[256|e]=24):(r[e]=31744,r[256|e]=64512,i[e]=13,i[256|e]=13)}let a=new Uint32Array(2048),s=new Uint32Array(64),u=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;(8388608&t)==0;)t<<=1,n-=8388608;t&=-8388609,n+=0x38800000,a[e]=t|n}for(let e=1024;e<2048;++e)a[e]=0x38000000+(e-1024<<13);for(let e=1;e<31;++e)s[e]=e<<23;s[31]=0x47800000,s[32]=0x80000000;for(let e=33;e<63;++e)s[e]=0x80000000+(e-32<<23);s[63]=0xc7800000;for(let e=1;e<64;++e)32!==e&&(u[e]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:s,offsetTable:u}}();function oP(e){e=iz(e,-65504,65504),oD.floatView[0]=e;let t=oD.uint32View[0],n=t>>23&511;return oD.baseTable[n]+((8388607&t)>>oD.shiftTable[n])}function oR(e){let t=e>>10;return oD.uint32View[0]=oD.mantissaTable[oD.offsetTable[t]+(1023&e)]+oD.exponentTable[t],oD.floatView[0]}let oL={toHalfFloat:oP,fromHalfFloat:oR},oO=new ap,ok=new ij;class oB{constructor(e,t,n=!1){if(Array.isArray(e))throw TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=ix,this.updateRanges=[],this.gpuType=nX,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)ok.fromBufferAttribute(this,t),ok.applyMatrix3(e),this.setXY(t,ok.x,ok.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)oO.fromBufferAttribute(this,t),oO.applyMatrix3(e),this.setXYZ(t,oO.x,oO.y,oO.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)oO.fromBufferAttribute(this,t),oO.applyMatrix4(e),this.setXYZ(t,oO.x,oO.y,oO.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)oO.fromBufferAttribute(this,t),oO.applyNormalMatrix(e),this.setXYZ(t,oO.x,oO.y,oO.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)oO.fromBufferAttribute(this,t),oO.transformDirection(e),this.setXYZ(t,oO.x,oO.y,oO.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=iG(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=iV(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=iG(t,this.array)),t}setX(e,t){return this.normalized&&(t=iV(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=iG(t,this.array)),t}setY(e,t){return this.normalized&&(t=iV(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=iG(t,this.array)),t}setZ(e,t){return this.normalized&&(t=iV(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=iG(t,this.array)),t}setW(e,t){return this.normalized&&(t=iV(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=iV(t,this.array),n=iV(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=iV(t,this.array),n=iV(n,this.array),r=iV(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=iV(t,this.array),n=iV(n,this.array),r=iV(r,this.array),i=iV(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==ix&&(e.usage=this.usage),e}}class oN extends oB{constructor(e,t,n){super(new Int8Array(e),t,n)}}class oF extends oB{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class oz extends oB{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class oU extends oB{constructor(e,t,n){super(new Int16Array(e),t,n)}}class oH extends oB{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class oG extends oB{constructor(e,t,n){super(new Int32Array(e),t,n)}}class oV extends oB{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class oW extends oB{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=oR(this.array[e*this.itemSize]);return this.normalized&&(t=iG(t,this.array)),t}setX(e,t){return this.normalized&&(t=iV(t,this.array)),this.array[e*this.itemSize]=oP(t),this}getY(e){let t=oR(this.array[e*this.itemSize+1]);return this.normalized&&(t=iG(t,this.array)),t}setY(e,t){return this.normalized&&(t=iV(t,this.array)),this.array[e*this.itemSize+1]=oP(t),this}getZ(e){let t=oR(this.array[e*this.itemSize+2]);return this.normalized&&(t=iG(t,this.array)),t}setZ(e,t){return this.normalized&&(t=iV(t,this.array)),this.array[e*this.itemSize+2]=oP(t),this}getW(e){let t=oR(this.array[e*this.itemSize+3]);return this.normalized&&(t=iG(t,this.array)),t}setW(e,t){return this.normalized&&(t=iV(t,this.array)),this.array[e*this.itemSize+3]=oP(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=iV(t,this.array),n=iV(n,this.array)),this.array[e+0]=oP(t),this.array[e+1]=oP(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=iV(t,this.array),n=iV(n,this.array),r=iV(r,this.array)),this.array[e+0]=oP(t),this.array[e+1]=oP(n),this.array[e+2]=oP(r),this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=iV(t,this.array),n=iV(n,this.array),r=iV(r,this.array),i=iV(i,this.array)),this.array[e+0]=oP(t),this.array[e+1]=oP(n),this.array[e+2]=oP(r),this.array[e+3]=oP(i),this}}class oj extends oB{constructor(e,t,n){super(new Float32Array(e),t,n)}}let oX=0,oY=new aV,oJ=new oo,oZ=new ap,oq=new am,oK=new am,oQ=new ap;class o$ extends iL{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:oX++}),this.uuid=iF(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(iJ(e)?oV:oH)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);let n=this.attributes.normal;if(void 0!==n){let t=new iX().getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}let r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return oY.makeRotationFromQuaternion(e),this.applyMatrix4(oY),this}rotateX(e){return oY.makeRotationX(e),this.applyMatrix4(oY),this}rotateY(e){return oY.makeRotationY(e),this.applyMatrix4(oY),this}rotateZ(e){return oY.makeRotationZ(e),this.applyMatrix4(oY),this}translate(e,t,n){return oY.makeTranslation(e,t,n),this.applyMatrix4(oY),this}scale(e,t,n){return oY.makeScale(e,t,n),this.applyMatrix4(oY),this}lookAt(e){return oJ.lookAt(e),oJ.updateMatrix(),this.applyMatrix4(oJ.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(oZ).negate(),this.translate(oZ.x,oZ.y,oZ.z),this}setFromPoints(e){let t=this.getAttribute("position");if(void 0===t){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n];t.push(r.x,r.y,r.z||0)}this.setAttribute("position",new oj(t,3))}else{for(let n=0,r=t.count;n<r;n++){let r=e[n];t.setXYZ(n,r.x,r.y,r.z||0)}e.length,t.count,t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new am);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){this.boundingBox.set(new ap(-1/0,-1/0,-1/0),new ap(Infinity,Infinity,Infinity));return}if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){let n=t[e];oq.setFromBufferAttribute(n),this.morphTargetsRelative?(oQ.addVectors(this.boundingBox.min,oq.min),this.boundingBox.expandByPoint(oQ),oQ.addVectors(this.boundingBox.max,oq.max),this.boundingBox.expandByPoint(oQ)):(this.boundingBox.expandByPoint(oq.min),this.boundingBox.expandByPoint(oq.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new aO);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){this.boundingSphere.set(new ap,1/0);return}if(e){let n=this.boundingSphere.center;if(oq.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){let n=t[e];oK.setFromBufferAttribute(n),this.morphTargetsRelative?(oQ.addVectors(oq.min,oK.min),oq.expandByPoint(oQ),oQ.addVectors(oq.max,oK.max),oq.expandByPoint(oQ)):(oq.expandByPoint(oK.min),oq.expandByPoint(oK.max))}oq.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)oQ.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(oQ));if(t)for(let i=0,a=t.length;i<a;i++){let a=t[i],s=this.morphTargetsRelative;for(let t=0,i=a.count;t<i;t++)oQ.fromBufferAttribute(a,t),s&&(oZ.fromBufferAttribute(e,t),oQ.add(oZ)),r=Math.max(r,n.distanceToSquared(oQ))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)}}computeTangents(){let e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return;let n=t.position,r=t.normal,i=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new oB(new Float32Array(4*n.count),4));let a=this.getAttribute("tangent"),s=[],u=[];for(let e=0;e<n.count;e++)s[e]=new ap,u[e]=new ap;let c=new ap,h=new ap,p=new ap,f=new ij,v=new ij,y=new ij,_=new ap,x=new ap,b=this.groups;0===b.length&&(b=[{start:0,count:e.count}]);for(let t=0,r=b.length;t<r;++t){let r=b[t],a=r.start,S=r.count;for(let t=a,r=a+S;t<r;t+=3)!function(e,t,r){c.fromBufferAttribute(n,e),h.fromBufferAttribute(n,t),p.fromBufferAttribute(n,r),f.fromBufferAttribute(i,e),v.fromBufferAttribute(i,t),y.fromBufferAttribute(i,r),h.sub(c),p.sub(c),v.sub(f),y.sub(f);let a=1/(v.x*y.y-y.x*v.y);isFinite(a)&&(_.copy(h).multiplyScalar(y.y).addScaledVector(p,-v.y).multiplyScalar(a),x.copy(p).multiplyScalar(v.x).addScaledVector(h,-y.x).multiplyScalar(a),s[e].add(_),s[t].add(_),s[r].add(_),u[e].add(x),u[t].add(x),u[r].add(x))}(e.getX(t+0),e.getX(t+1),e.getX(t+2))}let S=new ap,w=new ap,M=new ap,A=new ap;function C(e){M.fromBufferAttribute(r,e),A.copy(M);let t=s[e];S.copy(t),S.sub(M.multiplyScalar(M.dot(t))).normalize(),w.crossVectors(A,t);let n=w.dot(u[e]);a.setXYZW(e,S.x,S.y,S.z,n<0?-1:1)}for(let t=0,n=b.length;t<n;++t){let n=b[t],r=n.start,i=n.count;for(let t=r,n=r+i;t<n;t+=3)C(e.getX(t+0)),C(e.getX(t+1)),C(e.getX(t+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new oB(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);let r=new ap,i=new ap,a=new ap,s=new ap,u=new ap,c=new ap,h=new ap,p=new ap;if(e)for(let f=0,v=e.count;f<v;f+=3){let v=e.getX(f+0),y=e.getX(f+1),_=e.getX(f+2);r.fromBufferAttribute(t,v),i.fromBufferAttribute(t,y),a.fromBufferAttribute(t,_),h.subVectors(a,i),p.subVectors(r,i),h.cross(p),s.fromBufferAttribute(n,v),u.fromBufferAttribute(n,y),c.fromBufferAttribute(n,_),s.add(h),u.add(h),c.add(h),n.setXYZ(v,s.x,s.y,s.z),n.setXYZ(y,u.x,u.y,u.z),n.setXYZ(_,c.x,c.y,c.z)}else for(let e=0,s=t.count;e<s;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),h.subVectors(a,i),p.subVectors(r,i),h.cross(p),n.setXYZ(e+0,h.x,h.y,h.z),n.setXYZ(e+1,h.x,h.y,h.z),n.setXYZ(e+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)oQ.fromBufferAttribute(e,t),oQ.normalize(),e.setXYZ(t,oQ.x,oQ.y,oQ.z)}toNonIndexed(){function e(e,t){let n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),s=0,u=0;for(let i=0,c=t.length;i<c;i++){s=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)a[u++]=n[s++]}return new oB(a,r,i)}if(null===this.index)return this;let t=new o$,n=this.index.array,r=this.attributes;for(let i in r){let a=e(r[i],n);t.setAttribute(i,a)}let i=this.morphAttributes;for(let r in i){let a=[],s=i[r];for(let t=0,r=s.length;t<r;t++){let r=e(s[t],n);a.push(r)}t.morphAttributes[r]=a}t.morphTargetsRelative=this.morphTargetsRelative;let a=this.groups;for(let e=0,n=a.length;e<n;e++){let n=a[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){let t=this.parameters;for(let n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};let t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let n=this.attributes;for(let t in n){let r=n[t];e.data.attributes[t]=r.toJSON(e.data)}let r={},i=!1;for(let t in this.morphAttributes){let n=this.morphAttributes[t],a=[];for(let t=0,r=n.length;t<r;t++){let r=n[t];a.push(r.toJSON(e.data))}a.length>0&&(r[t]=a,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));let s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let n=e.index;null!==n&&this.setIndex(n.clone(t));let r=e.attributes;for(let e in r){let n=r[e];this.setAttribute(e,n.clone(t))}let i=e.morphAttributes;for(let e in i){let n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;let a=e.groups;for(let e=0,t=a.length;e<t;e++){let t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}let s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());let u=e.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}let o0=new aV,o1=new aG,o2=new aO,o3=new ap,o5=new ap,o4=new ap,o6=new ap,o9=new ap,o8=new ap,o7=new ap,se=new ap;class st extends oo{constructor(e=new o$,t=new oI){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){let n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);let s=this.morphTargetInfluences;if(i&&s){o8.set(0,0,0);for(let n=0,r=i.length;n<r;n++){let r=s[n],u=i[n];0!==r&&(o9.fromBufferAttribute(u,e),a?o8.addScaledVector(o9,r):o8.addScaledVector(o9.sub(t),r))}t.add(o8)}return t}raycast(e,t){let n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),o2.copy(n.boundingSphere),o2.applyMatrix4(i),o1.copy(e.ray).recast(e.near),!1===o2.containsPoint(o1.origin)&&(null===o1.intersectSphere(o2,o3)||o1.origin.distanceToSquared(o3)>(e.far-e.near)**2))return;if(o0.copy(i).invert(),o1.copy(e.ray).applyMatrix4(o0),null!==n.boundingBox&&!1===o1.intersectsBox(n.boundingBox))return;this._computeIntersections(e,t,o1)}}_computeIntersections(e,t,n){let r;let i=this.geometry,a=this.material,s=i.index,u=i.attributes.position,c=i.attributes.uv,h=i.attributes.uv1,p=i.attributes.normal,f=i.groups,v=i.drawRange;if(null!==s){if(Array.isArray(a))for(let i=0,u=f.length;i<u;i++){let u=f[i],y=a[u.materialIndex],_=Math.max(u.start,v.start),x=Math.min(s.count,Math.min(u.start+u.count,v.start+v.count));for(let i=_;i<x;i+=3){let a=s.getX(i),f=s.getX(i+1);(r=sn(this,y,e,n,c,h,p,a,f,s.getX(i+2)))&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=u.materialIndex,t.push(r))}}else{let i=Math.max(0,v.start),u=Math.min(s.count,v.start+v.count);for(let f=i;f<u;f+=3){let i=s.getX(f),u=s.getX(f+1);(r=sn(this,a,e,n,c,h,p,i,u,s.getX(f+2)))&&(r.faceIndex=Math.floor(f/3),t.push(r))}}}else if(void 0!==u){if(Array.isArray(a))for(let i=0,s=f.length;i<s;i++){let s=f[i],y=a[s.materialIndex],_=Math.max(s.start,v.start),x=Math.min(u.count,Math.min(s.start+s.count,v.start+v.count));for(let i=_;i<x;i+=3)(r=sn(this,y,e,n,c,h,p,i,i+1,i+2))&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=s.materialIndex,t.push(r))}else{let i=Math.max(0,v.start),s=Math.min(u.count,v.start+v.count);for(let u=i;u<s;u+=3)(r=sn(this,a,e,n,c,h,p,u,u+1,u+2))&&(r.faceIndex=Math.floor(u/3),t.push(r))}}}}function sn(e,t,n,r,i,a,s,u,c,h){e.getVertexPosition(u,o5),e.getVertexPosition(c,o4),e.getVertexPosition(h,o6);let p=function(e,t,n,r,i,a,s,u){let c;if(null===(c=t.side===tB?r.intersectTriangle(s,a,i,!0,u):r.intersectTriangle(i,a,s,t.side===tk,u)))return null;se.copy(u),se.applyMatrix4(e.matrixWorld);let h=n.ray.origin.distanceTo(se);return h<n.near||h>n.far?null:{distance:h,point:se.clone(),object:e}}(e,t,n,r,o5,o4,o6,o7);if(p){let e=new ap;ox.getBarycoord(o7,o5,o4,o6,e),i&&(p.uv=ox.getInterpolatedAttribute(i,u,c,h,e,new ij)),a&&(p.uv1=ox.getInterpolatedAttribute(a,u,c,h,e,new ij)),s&&(p.normal=ox.getInterpolatedAttribute(s,u,c,h,e,new ap),p.normal.dot(r.direction)>0&&p.normal.multiplyScalar(-1));let t={a:u,b:c,c:h,normal:new ap,materialIndex:0};ox.getNormal(o5,o4,o6,t.normal),p.face=t,p.barycoord=e}return p}class sr extends o${constructor(e=1,t=1,n=1,r=1,i=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};let s=this;r=Math.floor(r),i=Math.floor(i);let u=[],c=[],h=[],p=[],f=0,v=0;function y(e,t,n,r,i,a,y,_,x,b,S){let w=a/x,M=y/b,A=a/2,C=y/2,T=_/2,I=x+1,D=b+1,P=0,R=0,L=new ap;for(let a=0;a<D;a++){let s=a*M-C;for(let u=0;u<I;u++){let f=u*w-A;L[e]=f*r,L[t]=s*i,L[n]=T,c.push(L.x,L.y,L.z),L[e]=0,L[t]=0,L[n]=_>0?1:-1,h.push(L.x,L.y,L.z),p.push(u/x),p.push(1-a/b),P+=1}}for(let e=0;e<b;e++)for(let t=0;t<x;t++){let n=f+t+I*e,r=f+t+I*(e+1),i=f+(t+1)+I*(e+1),a=f+(t+1)+I*e;u.push(n,r,a),u.push(r,i,a),R+=6}s.addGroup(v,R,S),v+=R,f+=P}y("z","y","x",-1,-1,n,t,e,a=Math.floor(a),i,0),y("z","y","x",1,-1,n,t,-e,a,i,1),y("x","z","y",1,1,e,n,t,r,a,2),y("x","z","y",1,-1,e,n,-t,r,a,3),y("x","y","z",1,-1,e,t,n,r,i,4),y("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(u),this.setAttribute("position",new oj(c,3)),this.setAttribute("normal",new oj(h,3)),this.setAttribute("uv",new oj(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sr(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function si(e){let t={};for(let n in e)for(let r in t[n]={},e[n]){let i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?t[n][r]=null:t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function sa(e){let t={};for(let n=0;n<e.length;n++){let r=si(e[n]);for(let e in r)t[e]=r[e]}return t}function so(e){let t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:i1.workingColorSpace}let ss={clone:si,merge:sa};class sl extends oE{static get type(){return"ShaderMaterial"}constructor(e){super(),this.isShaderMaterial=!0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=si(e.uniforms),this.uniformsGroups=function(e){let t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);for(let n in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){let r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let n={};for(let e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class su extends oo{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new aV,this.projectionMatrix=new aV,this.projectionMatrixInverse=new aV,this.coordinateSystem=iP}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let sc=new ap,sh=new ij,sd=new ij;class sp extends su{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=2*iN*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(.5*iB*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*iN*Math.atan(Math.tan(.5*iB*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){sc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(sc.x,sc.y).multiplyScalar(-e/sc.z),sc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(sc.x,sc.y).multiplyScalar(-e/sc.z)}getViewSize(e,t){return this.getViewBounds(e,sh,sd),t.subVectors(sd,sh)}setViewOffset(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(.5*iB*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){let e=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/e,t-=a.offsetY*n/s,r*=a.width/e,n*=a.height/s}let s=this.filmOffset;0!==s&&(i+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class sf extends oo{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new sp(-90,1,e,t);r.layers=this.layers,this.add(r);let i=new sp(-90,1,e,t);i.layers=this.layers,this.add(i);let a=new sp(-90,1,e,t);a.layers=this.layers,this.add(a);let s=new sp(-90,1,e,t);s.layers=this.layers,this.add(s);let u=new sp(-90,1,e,t);u.layers=this.layers,this.add(u);let c=new sp(-90,1,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[n,r,i,a,s,u]=t;for(let e of t)this.remove(e);if(e===iP)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===iR)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let e of t)this.add(e),e.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();let{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[i,a,s,u,c,h]=this.children,p=e.getRenderTarget(),f=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;let _=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,i),e.setRenderTarget(n,1,r),e.render(t,a),e.setRenderTarget(n,2,r),e.render(t,s),e.setRenderTarget(n,3,r),e.render(t,u),e.setRenderTarget(n,4,r),e.render(t,c),n.texture.generateMipmaps=_,e.setRenderTarget(n,5,r),e.render(t,h),e.setRenderTarget(p,f,v),e.xr.enabled=y,n.texture.needsPMREMUpdate=!0}}class sg extends ai{constructor(e,t,n,r,i,a,s,u,c,h){super(e=void 0!==e?e:[],t=void 0!==t?t:nS,n,r,i,a,s,u,c,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class sm extends as{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let n={width:e,height:e,depth:1};this.texture=new sg([n,n,n,n,n,n],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:nk}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new sr(5,5,5),i=new sl({name:"CubemapFromEquirect",uniforms:si(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:tB,blending:tF});i.uniforms.tEquirect.value=t;let a=new st(r,i),s=t.minFilter;return t.minFilter===nF&&(t.minFilter=nk),new sf(1,10,this).update(e,a),t.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,r){let i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}let sv=new ap,sy=new ap,s_=new iX;class sx{constructor(e=new ap(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){let r=sv.subVectors(n,t).cross(sy.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let n=e.delta(sv),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;let i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){let t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let n=t||s_.getNormalMatrix(e),r=this.coplanarPoint(sv).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}let sb=new aO,sS=new ap;class sw{constructor(e=new sx,t=new sx,n=new sx,r=new sx,i=new sx,a=new sx){this.planes=[e,t,n,r,i,a]}set(e,t,n,r,i,a){let s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(a),this}copy(e){let t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=iP){let n=this.planes,r=e.elements,i=r[0],a=r[1],s=r[2],u=r[3],c=r[4],h=r[5],p=r[6],f=r[7],v=r[8],y=r[9],_=r[10],x=r[11],b=r[12],S=r[13],w=r[14],M=r[15];if(n[0].setComponents(u-i,f-c,x-v,M-b).normalize(),n[1].setComponents(u+i,f+c,x+v,M+b).normalize(),n[2].setComponents(u+a,f+h,x+y,M+S).normalize(),n[3].setComponents(u-a,f-h,x-y,M-S).normalize(),n[4].setComponents(u-s,f-p,x-_,M-w).normalize(),t===iP)n[5].setComponents(u+s,f+p,x+_,M+w).normalize();else if(t===iR)n[5].setComponents(s,p,_,w).normalize();else throw Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),sb.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),sb.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(sb)}intersectsSprite(e){return sb.center.set(0,0,0),sb.radius=.7071067811865476,sb.applyMatrix4(e.matrixWorld),this.intersectsSphere(sb)}intersectsSphere(e){let t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let n=0;n<6;n++){let r=t[n];if(sS.x=r.normal.x>0?e.max.x:e.min.x,sS.y=r.normal.y>0?e.max.y:e.min.y,sS.z=r.normal.z>0?e.max.z:e.min.z,0>r.distanceToPoint(sS))return!1}return!0}containsPoint(e){let t=this.planes;for(let n=0;n<6;n++)if(0>t[n].distanceToPoint(e))return!1;return!0}clone(){return new this.constructor().copy(this)}}function sM(){let e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){if(!0!==t)null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function sA(e){let t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);let r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){let e=t.get(n);(!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version});return}let i=t.get(n);if(void 0===i)t.set(n,function(t,n){let r;let i=t.array,a=t.usage,s=i.byteLength,u=e.createBuffer();if(e.bindBuffer(n,u),e.bufferData(n,i,a),t.onUploadCallback(),i instanceof Float32Array)r=e.FLOAT;else if(i instanceof Uint16Array)r=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(i instanceof Int16Array)r=e.SHORT;else if(i instanceof Uint32Array)r=e.UNSIGNED_INT;else if(i instanceof Int32Array)r=e.INT;else if(i instanceof Int8Array)r=e.BYTE;else if(i instanceof Uint8Array)r=e.UNSIGNED_BYTE;else if(i instanceof Uint8ClampedArray)r=e.UNSIGNED_BYTE;else throw Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);return{buffer:u,type:r,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version,size:s}}(n,r));else if(i.version<n.version){if(i.size!==n.array.byteLength)throw Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,r){let i=n.array,a=n.updateRanges;if(e.bindBuffer(r,t),0===a.length)e.bufferSubData(r,0,i);else{a.sort((e,t)=>e.start-t.start);let t=0;for(let e=1;e<a.length;e++){let n=a[t],r=a[e];r.start<=n.start+n.count+1?n.count=Math.max(n.count,r.start+r.count-n.start):a[++t]=r}a.length=t+1;for(let t=0,n=a.length;t<n;t++){let n=a[t];e.bufferSubData(r,n.start*i.BYTES_PER_ELEMENT,i,n.start,n.count)}n.clearUpdateRanges()}n.onUploadCallback()}(i.buffer,n,r),i.version=n.version}}}}class sC extends o${constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};let i=e/2,a=t/2,s=Math.floor(n),u=Math.floor(r),c=s+1,h=u+1,p=e/s,f=t/u,v=[],y=[],_=[],x=[];for(let e=0;e<h;e++){let t=e*f-a;for(let n=0;n<c;n++){let r=n*p-i;y.push(r,-t,0),_.push(0,0,1),x.push(n/s),x.push(1-e/u)}}for(let e=0;e<u;e++)for(let t=0;t<s;t++){let n=t+c*e,r=t+c*(e+1),i=t+1+c*(e+1),a=t+1+c*e;v.push(n,r,a),v.push(r,i,a)}this.setIndex(v),this.setAttribute("position",new oj(y,3)),this.setAttribute("normal",new oj(_,3)),this.setAttribute("uv",new oj(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sC(e.width,e.height,e.widthSegments,e.heightSegments)}}let sT={alphahash_fragment:"#ifdef USE_ALPHAHASH\n	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n	const float ALPHA_HASH_SCALE = 0.05;\n	float hash2D( vec2 value ) {\n		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n	}\n	float hash3D( vec3 value ) {\n		return hash2D( vec2( hash2D( value.xy ), value.z ) );\n	}\n	float getAlphaHashThreshold( vec3 position ) {\n		float maxDeriv = max(\n			length( dFdx( position.xyz ) ),\n			length( dFdy( position.xyz ) )\n		);\n		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n		vec2 pixScales = vec2(\n			exp2( floor( log2( pixScale ) ) ),\n			exp2( ceil( log2( pixScale ) ) )\n		);\n		vec2 alpha = vec2(\n			hash3D( floor( pixScales.x * position.xyz ) ),\n			hash3D( floor( pixScales.y * position.xyz ) )\n		);\n		float lerpFactor = fract( log2( pixScale ) );\n		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n		float a = min( lerpFactor, 1.0 - lerpFactor );\n		vec3 cases = vec3(\n			x * x / ( 2.0 * a * ( 1.0 - a ) ),\n			( x - 0.5 * a ) / ( 1.0 - a ),\n			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n		);\n		float threshold = ( x < ( 1.0 - a ) )\n			? ( ( x < a ) ? cases.x : cases.y )\n			: cases.z;\n		return clamp( threshold , 1.0e-6, 1.0 );\n	}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n	#ifdef ALPHA_TO_COVERAGE\n	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n	if ( diffuseColor.a == 0.0 ) discard;\n	#else\n	if ( diffuseColor.a < alphaTest ) discard;\n	#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n	uniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_CLEARCOAT ) \n		clearcoatSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_SHEEN ) \n		sheenSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD )\n		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n	#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n	#if ! defined( GL_ANGLE_multi_draw )\n	#define gl_DrawID _gl_DrawID\n	uniform int _gl_DrawID;\n	#endif\n	uniform highp sampler2D batchingTexture;\n	uniform highp usampler2D batchingIdTexture;\n	mat4 getBatchingMatrix( const in float i ) {\n		int size = textureSize( batchingTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n	float getIndirectIndex( const in int i ) {\n		int size = textureSize( batchingIdTexture, 0 ).x;\n		int x = i % size;\n		int y = i / size;\n		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n	}\n#endif\n#ifdef USE_BATCHING_COLOR\n	uniform sampler2D batchingColorTexture;\n	vec3 getBatchingColor( const in float i ) {\n		int size = textureSize( batchingColorTexture, 0 ).x;\n		int j = int( i );\n		int x = j % size;\n		int y = j / size;\n		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n	}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n	vPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n	vec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( specularColor, 1.0, dotVH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n	const mat3 XYZ_TO_REC709 = mat3(\n		 3.2404542, -0.9692660,  0.0556434,\n		-1.5371385,  1.8760108, -0.2040259,\n		-0.4985314,  0.0415560,  1.0572252\n	);\n	vec3 Fresnel0ToIor( vec3 fresnel0 ) {\n		vec3 sqrtF0 = sqrt( fresnel0 );\n		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n	}\n	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n	}\n	float IorToFresnel0( float transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n	}\n	vec3 evalSensitivity( float OPD, vec3 shift ) {\n		float phase = 2.0 * PI * OPD * 1.0e-9;\n		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n		xyz /= 1.0685e-7;\n		vec3 rgb = XYZ_TO_REC709 * xyz;\n		return rgb;\n	}\n	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n		vec3 I;\n		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n		float cosTheta2Sq = 1.0 - sinTheta2Sq;\n		if ( cosTheta2Sq < 0.0 ) {\n			return vec3( 1.0 );\n		}\n		float cosTheta2 = sqrt( cosTheta2Sq );\n		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n		float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n		float T121 = 1.0 - R12;\n		float phi12 = 0.0;\n		if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n		float phi21 = PI - phi12;\n		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n		vec3 phi23 = vec3( 0.0 );\n		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n		vec3 phi = vec3( phi21 ) + phi23;\n		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n		vec3 r123 = sqrt( R123 );\n		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n		vec3 C0 = R12 + Rs;\n		I = C0;\n		vec3 Cm = Rs - T121;\n		for ( int m = 1; m <= 2; ++ m ) {\n			Cm *= r123;\n			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n			I += Cm * Sm;\n		}\n		return max( I, vec3( 0.0 ) );\n	}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vBumpMapUv );\n		vec2 dSTdy = dFdy( vBumpMapUv );\n		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 ) * faceDirection;\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#ifdef ALPHA_TO_COVERAGE\n		float distanceToPlane, distanceGradient;\n		float clipOpacity = 1.0;\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n			distanceGradient = fwidth( distanceToPlane ) / 2.0;\n			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			if ( clipOpacity == 0.0 ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			float unionClipOpacity = 1.0;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n				distanceGradient = fwidth( distanceToPlane ) / 2.0;\n				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			}\n			#pragma unroll_loop_end\n			clipOpacity *= 1.0 - unionClipOpacity;\n		#endif\n		diffuseColor.a *= clipOpacity;\n		if ( diffuseColor.a == 0.0 ) discard;\n	#else\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			bool clipped = true;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n			}\n			#pragma unroll_loop_end\n			if ( clipped ) discard;\n		#endif\n	#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n	vClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n	diffuseColor *= vColor;\n#elif defined( USE_COLOR )\n	diffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR )\n	varying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	varying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n	vColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	vColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n	vColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n	vColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n	vColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n	float precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n	float precisionSafeLength( vec3 v ) {\n		float maxComponent = max3( abs( v ) );\n		return length( v / maxComponent ) * maxComponent;\n	}\n#endif\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n	varying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n	mat3 tmp;\n	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n	return tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n	return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	return vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n	#define cubeUV_minMipLevel 4.0\n	#define cubeUV_minTileSize 16.0\n	float getFace( vec3 direction ) {\n		vec3 absDirection = abs( direction );\n		float face = - 1.0;\n		if ( absDirection.x > absDirection.z ) {\n			if ( absDirection.x > absDirection.y )\n				face = direction.x > 0.0 ? 0.0 : 3.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		} else {\n			if ( absDirection.z > absDirection.y )\n				face = direction.z > 0.0 ? 2.0 : 5.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		}\n		return face;\n	}\n	vec2 getUV( vec3 direction, float face ) {\n		vec2 uv;\n		if ( face == 0.0 ) {\n			uv = vec2( direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 1.0 ) {\n			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n		} else if ( face == 2.0 ) {\n			uv = vec2( - direction.x, direction.y ) / abs( direction.z );\n		} else if ( face == 3.0 ) {\n			uv = vec2( - direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 4.0 ) {\n			uv = vec2( - direction.x, direction.z ) / abs( direction.y );\n		} else {\n			uv = vec2( direction.x, direction.y ) / abs( direction.z );\n		}\n		return 0.5 * ( uv + 1.0 );\n	}\n	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n		float face = getFace( direction );\n		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n		mipInt = max( mipInt, cubeUV_minMipLevel );\n		float faceSize = exp2( mipInt );\n		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n		if ( face > 2.0 ) {\n			uv.y += faceSize;\n			face -= 3.0;\n		}\n		uv.x += face * faceSize;\n		uv.x += filterInt * 3.0 * cubeUV_minTileSize;\n		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n		uv.x *= CUBEUV_TEXEL_WIDTH;\n		uv.y *= CUBEUV_TEXEL_HEIGHT;\n		#ifdef texture2DGradEXT\n			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n		#else\n			return texture2D( envMap, uv ).rgb;\n		#endif\n	}\n	#define cubeUV_r0 1.0\n	#define cubeUV_m0 - 2.0\n	#define cubeUV_r1 0.8\n	#define cubeUV_m1 - 1.0\n	#define cubeUV_r4 0.4\n	#define cubeUV_m4 2.0\n	#define cubeUV_r5 0.305\n	#define cubeUV_m5 3.0\n	#define cubeUV_r6 0.21\n	#define cubeUV_m6 4.0\n	float roughnessToMip( float roughness ) {\n		float mip = 0.0;\n		if ( roughness >= cubeUV_r1 ) {\n			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n		} else if ( roughness >= cubeUV_r4 ) {\n			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n		} else if ( roughness >= cubeUV_r5 ) {\n			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n		} else if ( roughness >= cubeUV_r6 ) {\n			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n		} else {\n			mip = - 2.0 * log2( 1.16 * roughness );		}\n		return mip;\n	}\n	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n		float mipF = fract( mip );\n		float mipInt = floor( mip );\n		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n		if ( mipF == 0.0 ) {\n			return vec4( color0, 1.0 );\n		} else {\n			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n			return vec4( mix( color0, color1, mipF ), 1.0 );\n		}\n	}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n	vec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n	mat3 bm = mat3( batchingMatrix );\n	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n	transformedNormal = bm * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = bm * transformedTangent;\n	#endif\n#endif\n#ifdef USE_INSTANCING\n	mat3 im = mat3( instanceMatrix );\n	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n	transformedNormal = im * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = im * transformedTangent;\n	#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n	#ifdef FLIP_SIDED\n		transformedTangent = - transformedTangent;\n	#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n		emissiveColor = sRGBTransferEOTF( emissiveColor );\n	#endif\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n	return value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vec3 cameraToFrag;\n		if ( isOrthographic ) {\n			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToFrag = normalize( vWorldPosition - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToFrag, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float envMapIntensity;\n	uniform float flipEnvMap;\n	uniform mat3 envMapRotation;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float reflectivity;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		varying vec3 vWorldPosition;\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n	vec3 getIBLIrradiance( const in vec3 normal ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n			return PI * envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 reflectVec = reflect( - viewDir, normal );\n			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n			return envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	#ifdef USE_ANISOTROPY\n		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n			#ifdef ENVMAP_TYPE_CUBE_UV\n				vec3 bentNormal = cross( bitangent, viewDir );\n				bentNormal = normalize( cross( bentNormal, bitangent ) );\n				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n				return getIBLRadiance( viewDir, bentNormal, roughness );\n			#else\n				return vec3( 0.0 );\n			#endif\n		}\n	#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex;\n		if ( isOrthographic ) {\n			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n	vFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n	varying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float vFogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n	uniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n	float dotNL = dot( normal, lightDirection );\n	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n	#ifdef USE_GRADIENTMAP\n		return vec3( texture2D( gradientMap, coord ).r );\n	#else\n		vec2 fw = fwidth( coord ) * 0.5;\n		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n	#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n	vec3 diffuseColor;\n	float specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Lambert\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n	uniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n	float x = normal.x, y = normal.y, z = normal.z;\n	vec3 result = shCoefficients[ 0 ] * 0.886227;\n	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n	return result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n	return irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	return irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n	if ( cutoffDistance > 0.0 ) {\n		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n	}\n	return distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n	return smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n		light.color = directionalLight.color;\n		light.direction = directionalLight.direction;\n		light.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = pointLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		light.color = pointLight.color;\n		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n		light.visible = ( light.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = spotLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float angleCos = dot( light.direction, spotLight.direction );\n		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n		if ( spotAttenuation > 0.0 ) {\n			float lightDistance = length( lVector );\n			light.color = spotLight.color * spotAttenuation;\n			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n			light.visible = ( light.color != vec3( 0.0 ) );\n		} else {\n			light.color = vec3( 0.0 );\n			light.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n		float dotNL = dot( normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		return irradiance;\n	}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n	vec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Toon\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n	vec3 diffuseColor;\n	vec3 specularColor;\n	float specularShininess;\n	float specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n	material.ior = ior;\n	#ifdef USE_SPECULAR\n		float specularIntensityFactor = specularIntensity;\n		vec3 specularColorFactor = specularColor;\n		#ifdef USE_SPECULAR_COLORMAP\n			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n		#endif\n		#ifdef USE_SPECULAR_INTENSITYMAP\n			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n		#endif\n		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n	#else\n		float specularIntensityFactor = 1.0;\n		vec3 specularColorFactor = vec3( 1.0 );\n		material.specularF90 = 1.0;\n	#endif\n	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n	material.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n	material.clearcoat = clearcoat;\n	material.clearcoatRoughness = clearcoatRoughness;\n	material.clearcoatF0 = vec3( 0.04 );\n	material.clearcoatF90 = 1.0;\n	#ifdef USE_CLEARCOATMAP\n		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n	#endif\n	#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n	#endif\n	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n	material.clearcoatRoughness += geometryRoughness;\n	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n	material.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	material.iridescence = iridescence;\n	material.iridescenceIOR = iridescenceIOR;\n	#ifdef USE_IRIDESCENCEMAP\n		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n	#endif\n	#ifdef USE_IRIDESCENCE_THICKNESSMAP\n		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n	#else\n		material.iridescenceThickness = iridescenceThicknessMaximum;\n	#endif\n#endif\n#ifdef USE_SHEEN\n	material.sheenColor = sheenColor;\n	#ifdef USE_SHEEN_COLORMAP\n		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n	#endif\n	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	#ifdef USE_ANISOTROPYMAP\n		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n	#else\n		vec2 anisotropyV = anisotropyVector;\n	#endif\n	material.anisotropy = length( anisotropyV );\n	if( material.anisotropy == 0.0 ) {\n		anisotropyV = vec2( 1.0, 0.0 );\n	} else {\n		anisotropyV /= material.anisotropy;\n		material.anisotropy = saturate( material.anisotropy );\n	}\n	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n	vec3 diffuseColor;\n	float roughness;\n	vec3 specularColor;\n	float specularF90;\n	float dispersion;\n	#ifdef USE_CLEARCOAT\n		float clearcoat;\n		float clearcoatRoughness;\n		vec3 clearcoatF0;\n		float clearcoatF90;\n	#endif\n	#ifdef USE_IRIDESCENCE\n		float iridescence;\n		float iridescenceIOR;\n		float iridescenceThickness;\n		vec3 iridescenceFresnel;\n		vec3 iridescenceF0;\n	#endif\n	#ifdef USE_SHEEN\n		vec3 sheenColor;\n		float sheenRoughness;\n	#endif\n	#ifdef IOR\n		float ior;\n	#endif\n	#ifdef USE_TRANSMISSION\n		float transmission;\n		float transmissionAlpha;\n		float thickness;\n		float attenuationDistance;\n		vec3 attenuationColor;\n	#endif\n	#ifdef USE_ANISOTROPY\n		float anisotropy;\n		float alphaT;\n		vec3 anisotropyT;\n		vec3 anisotropyB;\n	#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n		float v = 0.5 / ( gv + gl );\n		return saturate(v);\n	}\n	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n		float a2 = alphaT * alphaB;\n		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n		highp float v2 = dot( v, v );\n		float w2 = a2 / v2;\n		return RECIPROCAL_PI * a2 * pow2 ( w2 );\n	}\n#endif\n#ifdef USE_CLEARCOAT\n	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n		vec3 f0 = material.clearcoatF0;\n		float f90 = material.clearcoatF90;\n		float roughness = material.clearcoatRoughness;\n		float alpha = pow2( roughness );\n		vec3 halfDir = normalize( lightDir + viewDir );\n		float dotNL = saturate( dot( normal, lightDir ) );\n		float dotNV = saturate( dot( normal, viewDir ) );\n		float dotNH = saturate( dot( normal, halfDir ) );\n		float dotVH = saturate( dot( viewDir, halfDir ) );\n		vec3 F = F_Schlick( f0, f90, dotVH );\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n		return F * ( V * D );\n	}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n	vec3 f0 = material.specularColor;\n	float f90 = material.specularF90;\n	float roughness = material.roughness;\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( f0, f90, dotVH );\n	#ifdef USE_IRIDESCENCE\n		F = mix( F, material.iridescenceFresnel, material.iridescence );\n	#endif\n	#ifdef USE_ANISOTROPY\n		float dotTL = dot( material.anisotropyT, lightDir );\n		float dotTV = dot( material.anisotropyT, viewDir );\n		float dotTH = dot( material.anisotropyT, halfDir );\n		float dotBL = dot( material.anisotropyB, lightDir );\n		float dotBV = dot( material.anisotropyB, viewDir );\n		float dotBH = dot( material.anisotropyB, halfDir );\n		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n	#else\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n	#endif\n	return F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n	float alpha = pow2( roughness );\n	float invAlpha = 1.0 / alpha;\n	float cos2h = dotNH * dotNH;\n	float sin2h = max( 1.0 - cos2h, 0.0078125 );\n	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float D = D_Charlie( sheenRoughness, dotNH );\n	float V = V_Neubelt( dotNV, dotNL );\n	return sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float r2 = roughness * roughness;\n	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n	return saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n	return fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	return specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	#ifdef USE_IRIDESCENCE\n		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n	#else\n		vec3 Fr = specularColor;\n	#endif\n	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n	float Ess = fab.x + fab.y;\n	float Ems = 1.0 - Ess;\n	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n	singleScatter += FssEss;\n	multiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometryNormal;\n		vec3 viewDir = geometryViewDir;\n		vec3 position = geometryPosition;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.roughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifdef USE_CLEARCOAT\n		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n		vec3 ccIrradiance = dotNLcc * directLight.color;\n		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n	#endif\n	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n	#ifdef USE_CLEARCOAT\n		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n	#endif\n	vec3 singleScattering = vec3( 0.0 );\n	vec3 multiScattering = vec3( 0.0 );\n	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n	#ifdef USE_IRIDESCENCE\n		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n	#else\n		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n	#endif\n	vec3 totalScattering = singleScattering + multiScattering;\n	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n	reflectedLight.indirectSpecular += radiance * singleScattering;\n	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n	geometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n	float dotNVi = saturate( dot( normal, geometryViewDir ) );\n	if ( material.iridescenceThickness == 0.0 ) {\n		material.iridescence = 0.0;\n	} else {\n		material.iridescence = saturate( material.iridescence );\n	}\n	if ( material.iridescence > 0.0 ) {\n		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n	}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointLightInfo( pointLight, geometryPosition, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n		pointLightShadow = pointLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	vec4 spotColor;\n	vec3 spotLightCoord;\n	bool inSpotLightMap;\n	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotLightInfo( spotLight, geometryPosition, directLight );\n		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n		#else\n		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#endif\n		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n		#endif\n		#undef SPOT_LIGHT_MAP_INDEX\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		spotLightShadow = spotLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalLightInfo( directionalLight, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n		directionalLightShadow = directionalLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 iblIrradiance = vec3( 0.0 );\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#if defined( USE_LIGHT_PROBES )\n		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n	#endif\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n		iblIrradiance += getIBLIrradiance( geometryNormal );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	#ifdef USE_ANISOTROPY\n		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n	#else\n		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n	#endif\n	#ifdef USE_CLEARCOAT\n		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n	#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n	uniform float logDepthBufFC;\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n	vFragDepth = 1.0 + gl_Position.w;\n	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n	vec4 sampledDiffuseColor = texture2D( map, vMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n	#endif\n	diffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n	uniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	#if defined( USE_POINTS_UV )\n		vec2 uv = vUv;\n	#else\n		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n	#endif\n#endif\n#ifdef USE_MAP\n	diffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n	varying vec2 vUv;\n#else\n	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n		uniform mat3 uvTransform;\n	#endif\n#endif\n#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n	metalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n	float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n	}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n	vColor *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		#if defined( USE_COLOR_ALPHA )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n		#elif defined( USE_COLOR )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n		#endif\n	}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n	objectNormal *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n	#ifndef USE_INSTANCING_MORPH\n		uniform float morphTargetBaseInfluence;\n		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	#endif\n	uniform sampler2DArray morphTargetsTexture;\n	uniform ivec2 morphTargetsTextureSize;\n	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n		int y = texelIndex / morphTargetsTextureSize.x;\n		int x = texelIndex - y * morphTargetsTextureSize.x;\n		ivec3 morphUV = ivec3( x, y, morphTargetIndex );\n		return texelFetch( morphTargetsTexture, morphUV, 0 );\n	}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n	transformed *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal *= faceDirection;\n	#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n	#ifdef USE_TANGENT\n		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn = getTangentFrame( - vViewPosition, normal,\n		#if defined( USE_NORMALMAP )\n			vNormalMapUv\n		#elif defined( USE_CLEARCOAT_NORMALMAP )\n			vClearcoatNormalMapUv\n		#else\n			vUv\n		#endif\n		);\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn[0] *= faceDirection;\n		tbn[1] *= faceDirection;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	#ifdef USE_TANGENT\n		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn2[0] *= faceDirection;\n		tbn2[1] *= faceDirection;\n	#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	#ifdef FLIP_SIDED\n		normal = - normal;\n	#endif\n	#ifdef DOUBLE_SIDED\n		normal = normal * faceDirection;\n	#endif\n	normal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	mapN.xy *= normalScale;\n	normal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n	uniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( uv.st );\n		vec2 st1 = dFdy( uv.st );\n		vec3 N = surf_norm;\n		vec3 q1perp = cross( q1, N );\n		vec3 q0perp = cross( N, q0 );\n		vec3 T = q1perp * st0.x + q0perp * st1.x;\n		vec3 B = q1perp * st0.y + q0perp * st1.y;\n		float det = max( dot( T, T ), dot( B, B ) );\n		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n		return mat3( T * scale, B * scale, N );\n	}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n	vec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n	clearcoatMapN.xy *= clearcoatNormalScale;\n	clearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n	uniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform sampler2D clearcoatNormalMap;\n	uniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n	uniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n	if( v <= 0.0 )\n		return vec4( 0., 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec4( 1., 1., 1., 1. );\n	float vuf;\n	float af = modf( v * PackFactors.a, vuf );\n	float bf = modf( vuf * ShiftRight8, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n	if( v <= 0.0 )\n		return vec3( 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec3( 1., 1., 1. );\n	float vuf;\n	float bf = modf( v * PackFactors.b, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n	if( v <= 0.0 )\n		return vec2( 0., 0. );\n	if( v >= 1.0 )\n		return vec2( 1., 1. );\n	float vuf;\n	float gf = modf( v * 256., vuf );\n	return vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n	return dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n	mvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n	mvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n	gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n	roughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n		return unpackRGBATo2Half( texture2D( shadow, uv ) );\n	}\n	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n		float occlusion = 1.0;\n		vec2 distribution = texture2DDistribution( shadow, uv );\n		float hard_shadow = step( compare , distribution.x );\n		if (hard_shadow != 1.0 ) {\n			float distance = compare - distribution.x ;\n			float variance = max( 0.00000, distribution.y * distribution.y );\n			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n		}\n		return occlusion;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			float dx2 = dx0 / 2.0;\n			float dy2 = dy0 / 2.0;\n			float dx3 = dx1 / 2.0;\n			float dy3 = dy1 / 2.0;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 17.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx = texelSize.x;\n			float dy = texelSize.y;\n			vec2 uv = shadowCoord.xy;\n			vec2 f = fract( uv * shadowMapSize + 0.5 );\n			uv -= f * texelSize;\n			shadow = (\n				texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n						  f.x ),\n					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n						  f.x ),\n					 f.y )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_VSM )\n			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		float shadow = 1.0;\n		vec3 lightToPosition = shadowCoord.xyz;\n		\n		float lightToPositionLength = length( lightToPosition );\n		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;\n			vec3 bd3D = normalize( lightToPosition );\n			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n				shadow = (\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n				) * ( 1.0 / 9.0 );\n			#else\n				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n			#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n	vec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n		shadowWorldPosition = worldPosition;\n		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n		#endif\n		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		directionalLight = directionalLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n		spotLight = spotLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		pointLight = pointLightShadows[ i ];\n		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#endif\n	return shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	uniform highp sampler2D boneTexture;\n	mat4 getBoneMatrix( const in float i ) {\n		int size = textureSize( boneTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n	#ifdef USE_TANGENT\n		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n	return saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n	return a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n	const mat3 ACESInputMat = mat3(\n		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),\n		vec3( 0.04823, 0.01566, 0.83777 )\n	);\n	const mat3 ACESOutputMat = mat3(\n		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),\n		vec3( -0.07367, -0.00605,  1.07602 )\n	);\n	color *= toneMappingExposure / 0.6;\n	color = ACESInputMat * color;\n	color = RRTAndODTFit( color );\n	color = ACESOutputMat * color;\n	return saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n	vec3( 1.6605, - 0.1246, - 0.0182 ),\n	vec3( - 0.5876, 1.1329, - 0.1006 ),\n	vec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n	vec3( 0.6274, 0.0691, 0.0164 ),\n	vec3( 0.3293, 0.9195, 0.0880 ),\n	vec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n	vec3 x2 = x * x;\n	vec3 x4 = x2 * x2;\n	return + 15.5 * x4 * x2\n		- 40.14 * x4 * x\n		+ 31.96 * x4\n		- 6.868 * x2 * x\n		+ 0.4298 * x2\n		+ 0.1191 * x\n		- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n	const mat3 AgXInsetMatrix = mat3(\n		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n	);\n	const mat3 AgXOutsetMatrix = mat3(\n		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n	);\n	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;\n	color *= toneMappingExposure;\n	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n	color = AgXInsetMatrix * color;\n	color = max( color, 1e-10 );	color = log2( color );\n	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n	color = clamp( color, 0.0, 1.0 );\n	color = agxDefaultContrastApprox( color );\n	color = AgXOutsetMatrix * color;\n	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n	color = clamp( color, 0.0, 1.0 );\n	return color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n	const float StartCompression = 0.8 - 0.04;\n	const float Desaturation = 0.15;\n	color *= toneMappingExposure;\n	float x = min( color.r, min( color.g, color.b ) );\n	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n	color -= offset;\n	float peak = max( color.r, max( color.g, color.b ) );\n	if ( peak < StartCompression ) return color;\n	float d = 1. - StartCompression;\n	float newPeak = 1. - d * d / ( peak + d - StartCompression );\n	color *= newPeak / peak;\n	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n	return mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n	material.transmission = transmission;\n	material.transmissionAlpha = 1.0;\n	material.thickness = thickness;\n	material.attenuationDistance = attenuationDistance;\n	material.attenuationColor = attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n	#endif\n	vec3 pos = vWorldPosition;\n	vec3 v = normalize( cameraPosition - pos );\n	vec3 n = inverseTransformDirection( normal, viewMatrix );\n	vec4 transmitted = getIBLVolumeRefraction(\n		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n		material.attenuationColor, material.attenuationDistance );\n	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n	uniform float transmission;\n	uniform float thickness;\n	uniform float attenuationDistance;\n	uniform vec3 attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		uniform sampler2D transmissionMap;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		uniform sampler2D thicknessMap;\n	#endif\n	uniform vec2 transmissionSamplerSize;\n	uniform sampler2D transmissionSamplerMap;\n	uniform mat4 modelMatrix;\n	uniform mat4 projectionMatrix;\n	varying vec3 vWorldPosition;\n	float w0( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n	}\n	float w1( float a ) {\n		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n	}\n	float w2( float a ){\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n	}\n	float w3( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * a * a );\n	}\n	float g0( float a ) {\n		return w0( a ) + w1( a );\n	}\n	float g1( float a ) {\n		return w2( a ) + w3( a );\n	}\n	float h0( float a ) {\n		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n	}\n	float h1( float a ) {\n		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n	}\n	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n		uv = uv * texelSize.zw + 0.5;\n		vec2 iuv = floor( uv );\n		vec2 fuv = fract( uv );\n		float g0x = g0( fuv.x );\n		float g1x = g1( fuv.x );\n		float h0x = h0( fuv.x );\n		float h1x = h1( fuv.x );\n		float h0y = h0( fuv.y );\n		float h1y = h1( fuv.y );\n		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n	}\n	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n		vec2 fLodSizeInv = 1.0 / fLodSize;\n		vec2 cLodSizeInv = 1.0 / cLodSize;\n		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n		return mix( fSample, cSample, fract( lod ) );\n	}\n	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n		vec3 modelScale;\n		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n		return normalize( refractionVector ) * thickness * modelScale;\n	}\n	float applyIorToRoughness( const in float roughness, const in float ior ) {\n		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n	}\n	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n	}\n	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n		if ( isinf( attenuationDistance ) ) {\n			return vec3( 1.0 );\n		} else {\n			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;\n		}\n	}\n	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n		const in vec3 attenuationColor, const in float attenuationDistance ) {\n		vec4 transmittedLight;\n		vec3 transmittance;\n		#ifdef USE_DISPERSION\n			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n			for ( int i = 0; i < 3; i ++ ) {\n				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n				vec3 refractedRayExit = position + transmissionRay;\n		\n				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n				vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n				refractionCoords += 1.0;\n				refractionCoords /= 2.0;\n		\n				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n				transmittedLight[ i ] = transmissionSample[ i ];\n				transmittedLight.a += transmissionSample.a;\n				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n			}\n			transmittedLight.a /= 3.0;\n		\n		#else\n		\n			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n			vec3 refractedRayExit = position + transmissionRay;\n			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n			vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n			refractionCoords += 1.0;\n			refractionCoords /= 2.0;\n			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n		\n		#endif\n		vec3 attenuatedColor = transmittance * transmittedLight.rgb;\n		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n	}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	uniform mat3 mapTransform;\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform mat3 alphaMapTransform;\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	uniform mat3 lightMapTransform;\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	uniform mat3 aoMapTransform;\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	uniform mat3 bumpMapTransform;\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	uniform mat3 normalMapTransform;\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	uniform mat3 displacementMapTransform;\n	varying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	uniform mat3 emissiveMapTransform;\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	uniform mat3 metalnessMapTransform;\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	uniform mat3 roughnessMapTransform;\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	uniform mat3 anisotropyMapTransform;\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	uniform mat3 clearcoatMapTransform;\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform mat3 clearcoatNormalMapTransform;\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform mat3 clearcoatRoughnessMapTransform;\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	uniform mat3 sheenColorMapTransform;\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	uniform mat3 sheenRoughnessMapTransform;\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	uniform mat3 iridescenceMapTransform;\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform mat3 iridescenceThicknessMapTransform;\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	uniform mat3 specularMapTransform;\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	uniform mat3 specularColorMapTransform;\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	uniform mat3 specularIntensityMapTransform;\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	vUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n	vec4 worldPosition = vec4( transformed, 1.0 );\n	#ifdef USE_BATCHING\n		worldPosition = batchingMatrix * worldPosition;\n	#endif\n	#ifdef USE_INSTANCING\n		worldPosition = instanceMatrix * worldPosition;\n	#endif\n	worldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	gl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n	vec4 texColor = texture2D( t2D, vUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n	uniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n	uniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n	#elif defined( ENVMAP_TYPE_CUBE_UV )\n		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n	#else\n		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n	gl_FragColor = texColor;\n	gl_FragColor.a *= opacity;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <logdepthbuf_fragment>\n	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( fragCoordZ );\n	#elif DEPTH_PACKING == 3202\n		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n	#elif DEPTH_PACKING == 3203\n		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n	#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV = equirectUv( direction );\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	vLineDistance = scale * lineDistance;\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinbase_vertex>\n		#include <skinnormal_vertex>\n		#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_lambert_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n	vViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	vec3 viewDir = normalize( vViewPosition );\n	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n	vec3 y = cross( viewDir, x );\n	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n	#ifdef USE_MATCAP\n		vec4 matcapColor = texture2D( matcap, uv );\n	#else\n		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n	#endif\n	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n	#ifdef OPAQUE\n		gl_FragColor.a = 1.0;\n	#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n	varying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n	vWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n	#define IOR\n	#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n	uniform float ior;\n#endif\n#ifdef USE_SPECULAR\n	uniform float specularIntensity;\n	uniform vec3 specularColor;\n	#ifdef USE_SPECULAR_COLORMAP\n		uniform sampler2D specularColorMap;\n	#endif\n	#ifdef USE_SPECULAR_INTENSITYMAP\n		uniform sampler2D specularIntensityMap;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT\n	uniform float clearcoat;\n	uniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n	uniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	uniform float iridescence;\n	uniform float iridescenceIOR;\n	uniform float iridescenceThicknessMinimum;\n	uniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n	uniform vec3 sheenColor;\n	uniform float sheenRoughness;\n	#ifdef USE_SHEEN_COLORMAP\n		uniform sampler2D sheenColorMap;\n	#endif\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		uniform sampler2D sheenRoughnessMap;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	uniform vec2 anisotropyVector;\n	#ifdef USE_ANISOTROPYMAP\n		uniform sampler2D anisotropyMap;\n	#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <clearcoat_normal_fragment_begin>\n	#include <clearcoat_normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n	#include <transmission_fragment>\n	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n	#ifdef USE_SHEEN\n		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n	#endif\n	#ifdef USE_CLEARCOAT\n		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n	#endif\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_toon_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n	varying vec2 vUv;\n	uniform mat3 uvTransform;\n#endif\nvoid main() {\n	#ifdef USE_POINTS_UV\n		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	#endif\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	gl_PointSize = size;\n	#ifdef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	vec4 mvPosition = modelViewMatrix[ 3 ];\n	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n	#ifndef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) scale *= - mvPosition.z;\n	#endif\n	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}"},sE={common:{diffuse:{value:new oA(0xffffff)},opacity:{value:1},map:{value:null},mapTransform:{value:new iX},alphaMap:{value:null},alphaMapTransform:{value:new iX},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new iX}},envmap:{envMap:{value:null},envMapRotation:{value:new iX},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new iX}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new iX}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new iX},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new iX},normalScale:{value:new ij(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new iX},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new iX}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new iX}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new iX}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new oA(0xffffff)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new oA(0xffffff)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new iX},alphaTest:{value:0},uvTransform:{value:new iX}},sprite:{diffuse:{value:new oA(0xffffff)},opacity:{value:1},center:{value:new ij(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new iX},alphaMap:{value:null},alphaMapTransform:{value:new iX},alphaTest:{value:0}}},sI={basic:{uniforms:sa([sE.common,sE.specularmap,sE.envmap,sE.aomap,sE.lightmap,sE.fog]),vertexShader:sT.meshbasic_vert,fragmentShader:sT.meshbasic_frag},lambert:{uniforms:sa([sE.common,sE.specularmap,sE.envmap,sE.aomap,sE.lightmap,sE.emissivemap,sE.bumpmap,sE.normalmap,sE.displacementmap,sE.fog,sE.lights,{emissive:{value:new oA(0)}}]),vertexShader:sT.meshlambert_vert,fragmentShader:sT.meshlambert_frag},phong:{uniforms:sa([sE.common,sE.specularmap,sE.envmap,sE.aomap,sE.lightmap,sE.emissivemap,sE.bumpmap,sE.normalmap,sE.displacementmap,sE.fog,sE.lights,{emissive:{value:new oA(0)},specular:{value:new oA(1118481)},shininess:{value:30}}]),vertexShader:sT.meshphong_vert,fragmentShader:sT.meshphong_frag},standard:{uniforms:sa([sE.common,sE.envmap,sE.aomap,sE.lightmap,sE.emissivemap,sE.bumpmap,sE.normalmap,sE.displacementmap,sE.roughnessmap,sE.metalnessmap,sE.fog,sE.lights,{emissive:{value:new oA(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:sT.meshphysical_vert,fragmentShader:sT.meshphysical_frag},toon:{uniforms:sa([sE.common,sE.aomap,sE.lightmap,sE.emissivemap,sE.bumpmap,sE.normalmap,sE.displacementmap,sE.gradientmap,sE.fog,sE.lights,{emissive:{value:new oA(0)}}]),vertexShader:sT.meshtoon_vert,fragmentShader:sT.meshtoon_frag},matcap:{uniforms:sa([sE.common,sE.bumpmap,sE.normalmap,sE.displacementmap,sE.fog,{matcap:{value:null}}]),vertexShader:sT.meshmatcap_vert,fragmentShader:sT.meshmatcap_frag},points:{uniforms:sa([sE.points,sE.fog]),vertexShader:sT.points_vert,fragmentShader:sT.points_frag},dashed:{uniforms:sa([sE.common,sE.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:sT.linedashed_vert,fragmentShader:sT.linedashed_frag},depth:{uniforms:sa([sE.common,sE.displacementmap]),vertexShader:sT.depth_vert,fragmentShader:sT.depth_frag},normal:{uniforms:sa([sE.common,sE.bumpmap,sE.normalmap,sE.displacementmap,{opacity:{value:1}}]),vertexShader:sT.meshnormal_vert,fragmentShader:sT.meshnormal_frag},sprite:{uniforms:sa([sE.sprite,sE.fog]),vertexShader:sT.sprite_vert,fragmentShader:sT.sprite_frag},background:{uniforms:{uvTransform:{value:new iX},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:sT.background_vert,fragmentShader:sT.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new iX}},vertexShader:sT.backgroundCube_vert,fragmentShader:sT.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:sT.cube_vert,fragmentShader:sT.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:sT.equirect_vert,fragmentShader:sT.equirect_frag},distanceRGBA:{uniforms:sa([sE.common,sE.displacementmap,{referencePosition:{value:new ap},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:sT.distanceRGBA_vert,fragmentShader:sT.distanceRGBA_frag},shadow:{uniforms:sa([sE.lights,sE.fog,{color:{value:new oA(0)},opacity:{value:1}}]),vertexShader:sT.shadow_vert,fragmentShader:sT.shadow_frag}};sI.physical={uniforms:sa([sI.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new iX},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new iX},clearcoatNormalScale:{value:new ij(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new iX},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new iX},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new iX},sheen:{value:0},sheenColor:{value:new oA(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new iX},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new iX},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new iX},transmissionSamplerSize:{value:new ij},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new iX},attenuationDistance:{value:0},attenuationColor:{value:new oA(0)},specularColor:{value:new oA(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new iX},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new iX},anisotropyVector:{value:new ij},anisotropyMap:{value:null},anisotropyMapTransform:{value:new iX}}]),vertexShader:sT.meshphysical_vert,fragmentShader:sT.meshphysical_frag};let sD={r:0,b:0,g:0},sP=new a$,sR=new aV;function sL(e,t,n,r,i,a,s){let u,c;let h=new oA(0),p=!0===a?0:1,f=null,v=0,y=null;function _(e){let r=!0===e.isScene?e.background:null;return r&&r.isTexture&&(r=(e.backgroundBlurriness>0?n:t).get(r)),r}function x(t,n){t.getRGB(sD,so(e)),r.buffers.color.setClear(sD.r,sD.g,sD.b,n,s)}return{getClearColor:function(){return h},setClearColor:function(e,t=1){h.set(e),x(h,p=t)},getClearAlpha:function(){return p},setClearAlpha:function(e){x(h,p=e)},render:function(t){let n=!1,i=_(t);null===i?x(h,p):i&&i.isColor&&(x(i,1),n=!0);let a=e.xr.getEnvironmentBlendMode();"additive"===a?r.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===a&&r.buffers.color.setClear(0,0,0,0,s),(e.autoClear||n)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){let r=_(n);r&&(r.isCubeTexture||r.mapping===nC)?(void 0===c&&((c=new st(new sr(1,1,1),new sl({name:"BackgroundCubeMaterial",uniforms:si(sI.backgroundCube.uniforms),vertexShader:sI.backgroundCube.vertexShader,fragmentShader:sI.backgroundCube.fragmentShader,side:tB,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),sP.copy(n.backgroundRotation),sP.x*=-1,sP.y*=-1,sP.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&(sP.y*=-1,sP.z*=-1),c.material.uniforms.envMap.value=r,c.material.uniforms.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(sR.makeRotationFromEuler(sP)),c.material.toneMapped=i1.getTransfer(r.colorSpace)!==r3,(f!==r||v!==r.version||y!==e.toneMapping)&&(c.material.needsUpdate=!0,f=r,v=r.version,y=e.toneMapping),c.layers.enableAll(),t.unshift(c,c.geometry,c.material,0,0,null)):r&&r.isTexture&&(void 0===u&&((u=new st(new sC(2,2),new sl({name:"BackgroundMaterial",uniforms:si(sI.background.uniforms),vertexShader:sI.background.vertexShader,fragmentShader:sI.background.fragmentShader,side:tk,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=r,u.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,u.material.toneMapped=i1.getTransfer(r.colorSpace)!==r3,!0===r.matrixAutoUpdate&&r.updateMatrix(),u.material.uniforms.uvTransform.value.copy(r.matrix),(f!==r||v!==r.version||y!==e.toneMapping)&&(u.material.needsUpdate=!0,f=r,v=r.version,y=e.toneMapping),u.layers.enableAll(),t.unshift(u,u.geometry,u.material,0,0,null))}}}function sO(e,t){let n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r={},i=h(null),a=i,s=!1;function u(t){return e.bindVertexArray(t)}function c(t){return e.deleteVertexArray(t)}function h(e){let t=[],r=[],i=[];for(let e=0;e<n;e++)t[e]=0,r[e]=0,i[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:r,attributeDivisors:i,object:e,attributes:{},index:null}}function p(){let e=a.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function f(e){v(e,0)}function v(t,n){let r=a.newAttributes,i=a.enabledAttributes,s=a.attributeDivisors;r[t]=1,0===i[t]&&(e.enableVertexAttribArray(t),i[t]=1),s[t]!==n&&(e.vertexAttribDivisor(t,n),s[t]=n)}function y(){let t=a.newAttributes,n=a.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function _(t,n,r,i,a,s,u){!0===u?e.vertexAttribIPointer(t,n,r,a,s):e.vertexAttribPointer(t,n,r,i,a,s)}function x(){b(),s=!0,a!==i&&u((a=i).object)}function b(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:function(n,i,c,x,b){let S=!1,w=function(t,n,i){let a=!0===i.wireframe,s=r[t.id];void 0===s&&(s={},r[t.id]=s);let u=s[n.id];void 0===u&&(u={},s[n.id]=u);let c=u[a];return void 0===c&&(c=h(e.createVertexArray()),u[a]=c),c}(x,c,i);a!==w&&u((a=w).object),(S=function(e,t,n,r){let i=a.attributes,s=t.attributes,u=0,c=n.getAttributes();for(let t in c)if(c[t].location>=0){let n=i[t],r=s[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n||n.attribute!==r||r&&n.data!==r.data)return!0;u++}return a.attributesNum!==u||a.index!==r||!1}(n,x,c,b))&&function(e,t,n,r){let i={},s=t.attributes,u=0,c=n.getAttributes();for(let t in c)if(c[t].location>=0){let n=s[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));let r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[t]=r,u++}a.attributes=i,a.attributesNum=u,a.index=r}(n,x,c,b),null!==b&&t.update(b,e.ELEMENT_ARRAY_BUFFER),(S||s)&&(s=!1,function(n,r,i,a){p();let s=a.attributes,u=i.getAttributes(),c=r.defaultAttributeValues;for(let r in u){let i=u[r];if(i.location>=0){let u=s[r];if(void 0===u&&("instanceMatrix"===r&&n.instanceMatrix&&(u=n.instanceMatrix),"instanceColor"===r&&n.instanceColor&&(u=n.instanceColor)),void 0!==u){let r=u.normalized,s=u.itemSize,c=t.get(u);if(void 0===c)continue;let h=c.buffer,p=c.type,y=c.bytesPerElement,x=p===e.INT||p===e.UNSIGNED_INT||u.gpuType===nW;if(u.isInterleavedBufferAttribute){let t=u.data,c=t.stride,b=u.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<i.locationSize;e++)v(i.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<i.locationSize;e++)f(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,h);for(let e=0;e<i.locationSize;e++)_(i.location+e,s/i.locationSize,p,r,c*y,(b+s/i.locationSize*e)*y,x)}else{if(u.isInstancedBufferAttribute){for(let e=0;e<i.locationSize;e++)v(i.location+e,u.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=u.meshPerAttribute*u.count)}else for(let e=0;e<i.locationSize;e++)f(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,h);for(let e=0;e<i.locationSize;e++)_(i.location+e,s/i.locationSize,p,r,s*y,s/i.locationSize*e*y,x)}}else if(void 0!==c){let t=c[r];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(i.location,t);break;case 3:e.vertexAttrib3fv(i.location,t);break;case 4:e.vertexAttrib4fv(i.location,t);break;default:e.vertexAttrib1fv(i.location,t)}}}}y()}(n,i,c,x),null!==b&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(b).buffer))},reset:x,resetDefaultState:b,dispose:function(){for(let e in x(),r){let t=r[e];for(let e in t){let n=t[e];for(let e in n)c(n[e].object),delete n[e];delete t[e]}delete r[e]}},releaseStatesOfGeometry:function(e){if(void 0===r[e.id])return;let t=r[e.id];for(let e in t){let n=t[e];for(let e in n)c(n[e].object),delete n[e];delete t[e]}delete r[e.id]},releaseStatesOfProgram:function(e){for(let t in r){let n=r[t];if(void 0===n[e.id])continue;let i=n[e.id];for(let e in i)c(i[e].object),delete i[e];delete n[e.id]}},initAttributes:p,enableAttribute:f,disableUnusedAttributes:y}}function sk(e,t,n){let r;function i(t,i,a){0!==a&&(e.drawArraysInstanced(r,t,i,a),n.update(i,r,a))}this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r,1)},this.renderInstances=i,this.renderMultiDraw=function(e,i,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,e,0,i,0,a);let s=0;for(let e=0;e<a;e++)s+=i[e];n.update(s,r,1)},this.renderMultiDrawInstances=function(e,a,s,u){if(0===s)return;let c=t.get("WEBGL_multi_draw");if(null===c)for(let t=0;t<e.length;t++)i(e[t],a[t],u[t]);else{c.multiDrawArraysInstancedWEBGL(r,e,0,a,0,u,0,s);let t=0;for(let e=0;e<s;e++)t+=a[e]*u[e];n.update(t,r,1)}}}function sB(e,t,n,r){let i;function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let s=void 0!==n.precision?n.precision:"highp",u=a(s);u!==s&&(s=u);let c=!0===n.logarithmicDepthBuffer,h=!0===n.reverseDepthBuffer&&t.has("EXT_clip_control"),p=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),f=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=e.getParameter(e.MAX_TEXTURE_SIZE),y=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),_=e.getParameter(e.MAX_VERTEX_ATTRIBS),x=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),b=e.getParameter(e.MAX_VARYING_VECTORS),S=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){let n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:a,textureFormatReadable:function(t){return(t===n0||r.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT))&&!0},textureTypeReadable:function(n){let i=n===nY&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return n===nU||r.convert(n)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)||n===nX||!!i||!1},precision:s,logarithmicDepthBuffer:c,reverseDepthBuffer:h,maxTextures:p,maxVertexTextures:f,maxTextureSize:v,maxCubemapSize:y,maxAttributes:_,maxVertexUniforms:x,maxVaryings:b,maxFragmentUniforms:S,vertexTextures:f>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function sN(e){let t=this,n=null,r=0,i=!1,a=!1,s=new sx,u=new iX,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){let n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){a=!0,h(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=h(e,t,0)},this.setState=function(s,u,p){let f=s.clippingPlanes,v=s.clipIntersection,y=s.clipShadows,_=e.get(s);if(i&&null!==f&&0!==f.length&&(!a||y)){let e=a?0:r,t=4*e,i=_.clippingState||null;c.value=i,i=h(f,u,t,p);for(let e=0;e!==t;++e)i[e]=n[e];_.clippingState=i,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=e}else a?h(null):function(){c.value!==n&&(c.value=n,c.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}()};function h(e,n,r,i){let a=null!==e?e.length:0,h=null;if(0!==a){if(h=c.value,!0!==i||null===h){let t=r+4*a,i=n.matrixWorldInverse;u.getNormalMatrix(i),(null===h||h.length<t)&&(h=new Float32Array(t));for(let t=0,n=r;t!==a;++t,n+=4)s.copy(e[t]).applyMatrix4(i,u),s.normal.toArray(h,n),h[n+3]=s.constant}c.value=h,c.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,h}}function sF(e){let t=new WeakMap;function n(e,t){return t===nM?e.mapping=nS:t===nA&&(e.mapping=nw),e}function r(e){let n=e.target;n.removeEventListener("dispose",r);let i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){let a=i.mapping;if(a===nM||a===nA){if(t.has(i))return n(t.get(i).texture,i.mapping);{let a=i.image;if(!a||!(a.height>0))return null;{let s=new sm(a.height);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}}}}return i},dispose:function(){t=new WeakMap}}}class sz extends su{constructor(e=-1,t=1,n=1,r=-1,i=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,s=r+t,u=r-t;if(null!==this.view&&this.view.enabled){let e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,a=i+e*this.view.width,s-=t*this.view.offsetY,u=s-t*this.view.height}this.projectionMatrix.makeOrthographic(i,a,s,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}let sU=[.125,.215,.35,.446,.526,.582],sH=new sz,sG=new oA,sV=null,sW=0,sj=0,sX=!1,sY=(1+Math.sqrt(5))/2,sJ=1/sY,sZ=[new ap(-sY,sJ,0),new ap(sY,sJ,0),new ap(-sJ,0,sY),new ap(sJ,0,sY),new ap(0,sY,-sJ),new ap(0,sY,sJ),new ap(-1,1,-1),new ap(1,1,-1),new ap(-1,1,1),new ap(1,1,1)];class sq{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){sV=this._renderer.getRenderTarget(),sW=this._renderer.getActiveCubeFace(),sj=this._renderer.getActiveMipmapLevel(),sX=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=s0(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=s$(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(sV,sW,sj),this._renderer.xr.enabled=sX,e.scissorTest=!1,sQ(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===nS||e.mapping===nw?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),sV=this._renderer.getRenderTarget(),sW=this._renderer.getActiveCubeFace(),sj=this._renderer.getActiveMipmapLevel(),sX=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:nk,minFilter:nk,generateMipmaps:!1,type:nY,format:n0,colorSpace:r1,depthBuffer:!1},r=sK(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=sK(e,t,n);let{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){let t=[],n=[],r=[],i=e,a=e-4+1+sU.length;for(let s=0;s<a;s++){let a=Math.pow(2,i);n.push(a);let u=1/a;s>e-4?u=sU[s-e+4-1]:0===s&&(u=0),r.push(u);let c=1/(a-2),h=-c,p=1+c,f=[h,h,p,h,p,p,h,h,p,p,h,p],v=new Float32Array(108),y=new Float32Array(72),_=new Float32Array(36);for(let e=0;e<6;e++){let t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,18*e),y.set(f,12*e);let i=[e,e,e,e,e,e];_.set(i,6*e)}let x=new o$;x.setAttribute("position",new oB(v,3)),x.setAttribute("uv",new oB(y,2)),x.setAttribute("faceIndex",new oB(_,1)),t.push(x),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){let r=new Float32Array(20);return new sl({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:new ap(0,1,0)}},vertexShader:s1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:tF,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){let t=new st(this._lodPlanes[0],e);this._renderer.compile(t,sH)}_sceneToCubeUV(e,t,n,r){let i=new sp(90,1,t,n),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],u=this._renderer,c=u.autoClear,h=u.toneMapping;u.getClearColor(sG),u.toneMapping=nh,u.autoClear=!1;let p=new oI({name:"PMREM.Background",side:tB,depthWrite:!1,depthTest:!1}),f=new st(new sr,p),v=!1,y=e.background;y?y.isColor&&(p.color.copy(y),e.background=null,v=!0):(p.color.copy(sG),v=!0);for(let t=0;t<6;t++){let n=t%3;0===n?(i.up.set(0,a[t],0),i.lookAt(s[t],0,0)):1===n?(i.up.set(0,0,a[t]),i.lookAt(0,s[t],0)):(i.up.set(0,a[t],0),i.lookAt(0,0,s[t]));let c=this._cubeSize;sQ(r,n*c,t>2?c:0,c,c),u.setRenderTarget(r),v&&u.render(f,i),u.render(e,i)}f.geometry.dispose(),f.material.dispose(),u.toneMapping=h,u.autoClear=c,e.background=y}_textureToCubeUV(e,t){let n=this._renderer,r=e.mapping===nS||e.mapping===nw;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=s0()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=s$());let i=r?this._cubemapMaterial:this._equirectMaterial,a=new st(this._lodPlanes[0],i);i.uniforms.envMap.value=e;let s=this._cubeSize;sQ(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(a,sH)}_applyPMREM(e){let t=this._renderer,n=t.autoClear;t.autoClear=!1;let r=this._lodPlanes.length;for(let t=1;t<r;t++){let n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),i=sZ[(r-t-1)%sZ.length];this._blur(e,t-1,t,n,i)}t.autoClear=n}_blur(e,t,n,r,i){let a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,a,s){let u=this._renderer,c=this._blurMaterial;"latitudinal"!==a;let h=new st(this._lodPlanes[r],c),p=c.uniforms,f=this._sizeLods[n]-1,v=isFinite(i)?Math.PI/(2*f):2*Math.PI/39,y=i/v,_=isFinite(i)?1+Math.floor(3*y):20;let x=[],b=0;for(let e=0;e<20;++e){let t=e/y,n=Math.exp(-t*t/2);x.push(n),0===e?b+=n:e<_&&(b+=2*n)}for(let e=0;e<x.length;e++)x[e]=x[e]/b;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=x,p.latitudinal.value="latitudinal"===a,s&&(p.poleAxis.value=s);let{_lodMax:S}=this;p.dTheta.value=v,p.mipInt.value=S-n;let w=this._sizeLods[r],M=4*(this._cubeSize-w);sQ(t,3*w*(r>S-4?r-S+4:0),M,3*w,2*w),u.setRenderTarget(t),u.render(h,sH)}}function sK(e,t,n){let r=new as(e,t,n);return r.texture.mapping=nC,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function sQ(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function s$(){return new sl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:s1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:tF,depthTest:!1,depthWrite:!1})}function s0(){return new sl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:s1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:tF,depthTest:!1,depthWrite:!1})}function s1(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function s2(e){let t=new WeakMap,n=null;function r(e){let n=e.target;n.removeEventListener("dispose",r);let i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){let a=i.mapping,s=a===nM||a===nA,u=a===nS||a===nw;if(s||u){let a=t.get(i),c=void 0!==a?a.texture.pmremVersion:0;if(i.isRenderTargetTexture&&i.pmremVersion!==c)return null===n&&(n=new sq(e)),(a=s?n.fromEquirectangular(i,a):n.fromCubemap(i,a)).texture.pmremVersion=i.pmremVersion,t.set(i,a),a.texture;if(void 0!==a)return a.texture;{let c=i.image;return s&&c&&c.height>0||u&&c&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(c)?(null===n&&(n=new sq(e)),(a=s?n.fromEquirectangular(i):n.fromCubemap(i)).texture.pmremVersion=i.pmremVersion,t.set(i,a),i.addEventListener("dispose",r),a.texture):null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function s3(e){let t={};function n(n){let r;if(void 0!==t[n])return t[n];switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){let t=n(e);return null===t&&i0("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function s5(e,t,n,r){let i={},a=new WeakMap;function s(e){let u=e.target;for(let e in null!==u.index&&t.remove(u.index),u.attributes)t.remove(u.attributes[e]);for(let e in u.morphAttributes){let n=u.morphAttributes[e];for(let e=0,r=n.length;e<r;e++)t.remove(n[e])}u.removeEventListener("dispose",s),delete i[u.id];let c=a.get(u);c&&(t.remove(c),a.delete(u)),r.releaseStatesOfGeometry(u),!0===u.isInstancedBufferGeometry&&delete u._maxInstanceCount,n.memory.geometries--}function u(e){let n=[],r=e.index,i=e.attributes.position,s=0;if(null!==r){let e=r.array;s=r.version;for(let t=0,r=e.length;t<r;t+=3){let r=e[t+0],i=e[t+1],a=e[t+2];n.push(r,i,i,a,a,r)}}else{if(void 0===i)return;let e=i.array;s=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){let e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}let u=new(iJ(n)?oV:oH)(n,1);u.version=s;let c=a.get(e);c&&t.remove(c),a.set(e,u)}return{get:function(e,t){return!0===i[t.id]?t:(t.addEventListener("dispose",s),i[t.id]=!0,n.memory.geometries++,t)},update:function(n){let r=n.attributes;for(let n in r)t.update(r[n],e.ARRAY_BUFFER);let i=n.morphAttributes;for(let n in i){let r=i[n];for(let n=0,i=r.length;n<i;n++)t.update(r[n],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){let t=a.get(e);if(t){let n=e.index;null!==n&&t.version<n.version&&u(e)}else u(e);return a.get(e)}}}function s4(e,t,n){let r,i,a;function s(t,s,u){0!==u&&(e.drawElementsInstanced(r,s,i,t*a,u),n.update(s,r,u))}this.setMode=function(e){r=e},this.setIndex=function(e){i=e.type,a=e.bytesPerElement},this.render=function(t,s){e.drawElements(r,s,i,t*a),n.update(s,r,1)},this.renderInstances=s,this.renderMultiDraw=function(e,a,s){if(0===s)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,a,0,i,e,0,s);let u=0;for(let e=0;e<s;e++)u+=a[e];n.update(u,r,1)},this.renderMultiDrawInstances=function(e,u,c,h){if(0===c)return;let p=t.get("WEBGL_multi_draw");if(null===p)for(let t=0;t<e.length;t++)s(e[t]/a,u[t],h[t]);else{p.multiDrawElementsInstancedWEBGL(r,u,0,i,e,0,h,0,c);let t=0;for(let e=0;e<c;e++)t+=u[e]*h[e];n.update(t,r,1)}}}function s6(e){let t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=n/3*i;break;case e.LINES:t.lines+=n/2*i;break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n}}}}function s9(e,t,n){let r=new WeakMap,i=new aa;return{update:function(a,s,u){let c=a.morphTargetInfluences,h=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,p=void 0!==h?h.length:0,f=r.get(s);if(void 0===f||f.count!==p){void 0!==f&&f.texture.dispose();let e=void 0!==s.morphAttributes.position,n=void 0!==s.morphAttributes.normal,a=void 0!==s.morphAttributes.color,u=s.morphAttributes.position||[],c=s.morphAttributes.normal||[],h=s.morphAttributes.color||[],v=0;!0===e&&(v=1),!0===n&&(v=2),!0===a&&(v=3);let y=s.attributes.position.count*v,_=1;y>t.maxTextureSize&&(_=Math.ceil(y/t.maxTextureSize),y=t.maxTextureSize);let x=new Float32Array(y*_*4*p),b=new al(x,y,_,p);b.type=nX,b.needsUpdate=!0;let S=4*v;for(let t=0;t<p;t++){let r=u[t],s=c[t],p=h[t],f=y*_*4*t;for(let t=0;t<r.count;t++){let u=t*S;!0===e&&(i.fromBufferAttribute(r,t),x[f+u+0]=i.x,x[f+u+1]=i.y,x[f+u+2]=i.z,x[f+u+3]=0),!0===n&&(i.fromBufferAttribute(s,t),x[f+u+4]=i.x,x[f+u+5]=i.y,x[f+u+6]=i.z,x[f+u+7]=0),!0===a&&(i.fromBufferAttribute(p,t),x[f+u+8]=i.x,x[f+u+9]=i.y,x[f+u+10]=i.z,x[f+u+11]=4===p.itemSize?i.w:1)}}f={count:p,texture:b,size:new ij(y,_)},r.set(s,f);s.addEventListener("dispose",function e(){b.dispose(),r.delete(s),s.removeEventListener("dispose",e)})}if(!0===a.isInstancedMesh&&null!==a.morphTexture)u.getUniforms().setValue(e,"morphTexture",a.morphTexture,n);else{let t=0;for(let e=0;e<c.length;e++)t+=c[e];let n=s.morphTargetsRelative?1:1-t;u.getUniforms().setValue(e,"morphTargetBaseInfluence",n),u.getUniforms().setValue(e,"morphTargetInfluences",c)}u.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}}}function s8(e,t,n,r){let i=new WeakMap;function a(e){let t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(s){let u=r.render.frame,c=s.geometry,h=t.get(s,c);if(i.get(h)!==u&&(t.update(h),i.set(h,u)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",a)&&s.addEventListener("dispose",a),i.get(s)!==u&&(n.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&n.update(s.instanceColor,e.ARRAY_BUFFER),i.set(s,u))),s.isSkinnedMesh){let e=s.skeleton;i.get(e)!==u&&(e.update(),i.set(e,u))}return h},dispose:function(){i=new WeakMap}}}class s7 extends ai{constructor(e,t,n,r,i,a,s,u,c,h=n3){if(h!==n3&&h!==n5)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&h===n3&&(n=nj),void 0===n&&h===n5&&(n=nq),super(null,r,i,a,s,u,h,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:nD,this.minFilter=void 0!==u?u:nD,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}let le=new ai,lt=new s7(1,1),ln=new al,lr=new ac,li=new sg,la=[],lo=[],ls=new Float32Array(16),ll=new Float32Array(9),lu=new Float32Array(4);function lc(e,t,n){let r=e[0];if(r<=0||r>0)return e;let i=t*n,a=la[i];if(void 0===a&&(a=new Float32Array(i),la[i]=a),0!==t){r.toArray(a,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(a,i)}return a}function lh(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function ld(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function lp(e,t){let n=lo[t];void 0===n&&(n=new Int32Array(t),lo[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function lf(e,t){let n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function lg(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(lh(n,t))return;e.uniform2fv(this.addr,t),ld(n,t)}}function lm(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(lh(n,t))return;e.uniform3fv(this.addr,t),ld(n,t)}}function lv(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(lh(n,t))return;e.uniform4fv(this.addr,t),ld(n,t)}}function ly(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(lh(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),ld(n,t)}else{if(lh(n,r))return;lu.set(r),e.uniformMatrix2fv(this.addr,!1,lu),ld(n,r)}}function l_(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(lh(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),ld(n,t)}else{if(lh(n,r))return;ll.set(r),e.uniformMatrix3fv(this.addr,!1,ll),ld(n,r)}}function lx(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(lh(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),ld(n,t)}else{if(lh(n,r))return;ls.set(r),e.uniformMatrix4fv(this.addr,!1,ls),ld(n,r)}}function lb(e,t){let n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function lS(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(lh(n,t))return;e.uniform2iv(this.addr,t),ld(n,t)}}function lw(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(lh(n,t))return;e.uniform3iv(this.addr,t),ld(n,t)}}function lM(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(lh(n,t))return;e.uniform4iv(this.addr,t),ld(n,t)}}function lA(e,t){let n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function lC(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(lh(n,t))return;e.uniform2uiv(this.addr,t),ld(n,t)}}function lT(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(lh(n,t))return;e.uniform3uiv(this.addr,t),ld(n,t)}}function lE(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(lh(n,t))return;e.uniform4uiv(this.addr,t),ld(n,t)}}function lI(e,t,n){let r;let i=this.cache,a=n.allocateTextureUnit();i[0]!==a&&(e.uniform1i(this.addr,a),i[0]=a),this.type===e.SAMPLER_2D_SHADOW?(lt.compareFunction=ig,r=lt):r=le,n.setTexture2D(t||r,a)}function lD(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||lr,i)}function lP(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||li,i)}function lR(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||ln,i)}function lL(e,t){e.uniform1fv(this.addr,t)}function lO(e,t){let n=lc(t,this.size,2);e.uniform2fv(this.addr,n)}function lk(e,t){let n=lc(t,this.size,3);e.uniform3fv(this.addr,n)}function lB(e,t){let n=lc(t,this.size,4);e.uniform4fv(this.addr,n)}function lN(e,t){let n=lc(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function lF(e,t){let n=lc(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function lz(e,t){let n=lc(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function lU(e,t){e.uniform1iv(this.addr,t)}function lH(e,t){e.uniform2iv(this.addr,t)}function lG(e,t){e.uniform3iv(this.addr,t)}function lV(e,t){e.uniform4iv(this.addr,t)}function lW(e,t){e.uniform1uiv(this.addr,t)}function lj(e,t){e.uniform2uiv(this.addr,t)}function lX(e,t){e.uniform3uiv(this.addr,t)}function lY(e,t){e.uniform4uiv(this.addr,t)}function lJ(e,t,n){let r=this.cache,i=t.length,a=lp(n,i);!lh(r,a)&&(e.uniform1iv(this.addr,a),ld(r,a));for(let e=0;e!==i;++e)n.setTexture2D(t[e]||le,a[e])}function lZ(e,t,n){let r=this.cache,i=t.length,a=lp(n,i);!lh(r,a)&&(e.uniform1iv(this.addr,a),ld(r,a));for(let e=0;e!==i;++e)n.setTexture3D(t[e]||lr,a[e])}function lq(e,t,n){let r=this.cache,i=t.length,a=lp(n,i);!lh(r,a)&&(e.uniform1iv(this.addr,a),ld(r,a));for(let e=0;e!==i;++e)n.setTextureCube(t[e]||li,a[e])}function lK(e,t,n){let r=this.cache,i=t.length,a=lp(n,i);!lh(r,a)&&(e.uniform1iv(this.addr,a),ld(r,a));for(let e=0;e!==i;++e)n.setTexture2DArray(t[e]||ln,a[e])}class lQ{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return lf;case 35664:return lg;case 35665:return lm;case 35666:return lv;case 35674:return ly;case 35675:return l_;case 35676:return lx;case 5124:case 35670:return lb;case 35667:case 35671:return lS;case 35668:case 35672:return lw;case 35669:case 35673:return lM;case 5125:return lA;case 36294:return lC;case 36295:return lT;case 36296:return lE;case 35678:case 36198:case 36298:case 36306:case 35682:return lI;case 35679:case 36299:case 36307:return lD;case 35680:case 36300:case 36308:case 36293:return lP;case 36289:case 36303:case 36311:case 36292:return lR}}(t.type)}}class l${constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return lL;case 35664:return lO;case 35665:return lk;case 35666:return lB;case 35674:return lN;case 35675:return lF;case 35676:return lz;case 5124:case 35670:return lU;case 35667:case 35671:return lH;case 35668:case 35672:return lG;case 35669:case 35673:return lV;case 5125:return lW;case 36294:return lj;case 36295:return lX;case 36296:return lY;case 35678:case 36198:case 36298:case 36306:case 35682:return lJ;case 35679:case 36299:case 36307:return lZ;case 35680:case 36300:case 36308:case 36293:return lq;case 36289:case 36303:case 36311:case 36292:return lK}}(t.type)}}class l0{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){let r=this.seq;for(let i=0,a=r.length;i!==a;++i){let a=r[i];a.setValue(e,t[a.id],n)}}}let l1=/(\w+)(\])?(\[|\.)?/g;function l2(e,t){e.seq.push(t),e.map[t.id]=t}class l3{constructor(e,t){this.seq=[],this.map={};let n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){let n=e.getActiveUniform(t,r),i=e.getUniformLocation(t,n.name);!function(e,t,n){let r=e.name,i=r.length;for(l1.lastIndex=0;;){let a=l1.exec(r),s=l1.lastIndex,u=a[1],c="]"===a[2],h=a[3];if(c&&(u|=0),void 0===h||"["===h&&s+2===i){l2(n,void 0===h?new lQ(u,e,t):new l$(u,e,t));break}{let e=n.map[u];void 0===e&&l2(n,e=new l0(u)),n=e}}}(n,i,this)}}setValue(e,t,n,r){let i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){let r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,a=t.length;i!==a;++i){let a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}}static seqWithValue(e,t){let n=[];for(let r=0,i=e.length;r!==i;++r){let i=e[r];i.id in t&&n.push(i)}return n}}function l5(e,t,n){let r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let l4=0,l6=new iX;function l9(e,t,n){let r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";let a=/ERROR: 0:(\d+)/.exec(i);if(!a)return i;{let r=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){let n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let e=i;e<a;e++){let i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}}let l8=new ap;function l7(e){return""!==e}function ue(e,t){let n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function ut(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}let un=/^[ \t]*#include +<([\w\d./]+)>/gm;function ur(e){return e.replace(un,ua)}let ui=new Map;function ua(e,t){let n=sT[t];if(void 0===n){let e=ui.get(t);if(void 0!==e)n=sT[e];else throw Error("Can not resolve #include <"+t+">")}return ur(n)}let uo=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function us(e){return e.replace(uo,ul)}function ul(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function uu(e){let t=`precision ${e.precision} float;
	precision ${e.precision} int;
	precision ${e.precision} sampler2D;
	precision ${e.precision} samplerCube;
	precision ${e.precision} sampler3D;
	precision ${e.precision} sampler2DArray;
	precision ${e.precision} sampler2DShadow;
	precision ${e.precision} samplerCubeShadow;
	precision ${e.precision} sampler2DArrayShadow;
	precision ${e.precision} isampler2D;
	precision ${e.precision} isampler3D;
	precision ${e.precision} isamplerCube;
	precision ${e.precision} isampler2DArray;
	precision ${e.precision} usampler2D;
	precision ${e.precision} usampler3D;
	precision ${e.precision} usamplerCube;
	precision ${e.precision} usampler2DArray;
	`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function uc(e,t,n,r){var i,a,s;let u,c,h,p,f,v;let y=e.getContext(),_=n.defines,x=n.vertexShader,b=n.fragmentShader;let S=(f="SHADOWMAP_TYPE_BASIC",(i=n).shadowMapType===tR?f="SHADOWMAP_TYPE_PCF":i.shadowMapType===tL?f="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===tO&&(f="SHADOWMAP_TYPE_VSM"),f),w=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case nS:case nw:t="ENVMAP_TYPE_CUBE";break;case nC:t="ENVMAP_TYPE_CUBE_UV"}return t}(n);let M=(v="ENVMAP_MODE_REFLECTION",(a=n).envMap&&a.envMapMode===nw&&(v="ENVMAP_MODE_REFRACTION"),v),A=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case nl:t="ENVMAP_BLENDING_MULTIPLY";break;case nu:t="ENVMAP_BLENDING_MIX";break;case nc:t="ENVMAP_BLENDING_ADD"}return t}(n),C=function(e){let t=e.envMapCubeUVHeight;if(null===t)return null;let n=Math.log2(t)-2;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:1/t,maxMip:n}}(n);let T=[(s=n).extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",s.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(l7).join("\n"),I=function(e){let t=[];for(let n in e){let r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(_),D=y.createProgram(),P=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((u=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,I].filter(l7).join("\n")).length>0&&(u+="\n"),(c=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,I].filter(l7).join("\n")).length>0&&(c+="\n")):(u=[uu(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,I,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+M:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+S:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(l7).join("\n"),c=[uu(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,I,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+w:"",n.envMap?"#define "+M:"",n.envMap?"#define "+A:"",C?"#define CUBEUV_TEXEL_WIDTH "+C.texelWidth:"",C?"#define CUBEUV_TEXEL_HEIGHT "+C.texelHeight:"",C?"#define CUBEUV_MAX_MIP "+C.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+S:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==nh?"#define TONE_MAPPING":"",n.toneMapping!==nh?sT.tonemapping_pars_fragment:"",n.toneMapping!==nh?function(e,t){let n;switch(t){case nd:n="Linear";break;case np:n="Reinhard";break;case nf:n="Cineon";break;case ng:n="ACESFilmic";break;case nv:n="AgX";break;case ny:n="Neutral";break;case nm:n="Custom";break;default:n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",sT.colorspace_pars_fragment,function(e,t){let n=function(e){i1._getMatrix(l6,i1.workingColorSpace,e);let t=`mat3( ${l6.elements.map(e=>e.toFixed(4))} )`;switch(i1.getTransfer(e)){case r2:return[t,"LinearTransferOETF"];case r3:return[t,"sRGBTransferOETF"];default:return[t,"LinearTransferOETF"]}}(t);return`vec4 ${e}( vec4 value ) {
	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );
}`}("linearToOutputTexel",n.outputColorSpace),function(){i1.getLuminanceCoefficients(l8);let e=l8.x.toFixed(4),t=l8.y.toFixed(4),n=l8.z.toFixed(4);return`float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( ${e}, ${t}, ${n} );
	return dot( weights, rgb );
}`}(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(l7).join("\n")),x=ut(x=ue(x=ur(x),n),n),b=ut(b=ue(b=ur(b),n),n),x=us(x),b=us(b),!0!==n.isRawShaderMaterial&&(P="#version 300 es\n",u=[T,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+u,c=["#define varying in",n.glslVersion===iD?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===iD?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+c);let R=P+u+x,L=P+c+b,O=l5(y,y.VERTEX_SHADER,R),k=l5(y,y.FRAGMENT_SHADER,L);function B(t){if(e.debug.checkShaderErrors){let n=y.getProgramInfoLog(D).trim(),r=y.getShaderInfoLog(O).trim(),i=y.getShaderInfoLog(k).trim(),a=!0,s=!0;!1===y.getProgramParameter(D,y.LINK_STATUS)?(a=!1,"function"==typeof e.debug.onShaderError?e.debug.onShaderError(y,D,O,k):(l9(y,O,"vertex"),l9(y,k,"fragment"))):""!==n||(""===r||""===i)&&(s=!1),s&&(t.diagnostics={runnable:a,programLog:n,vertexShader:{log:r,prefix:u},fragmentShader:{log:i,prefix:c}})}y.deleteShader(O),y.deleteShader(k),h=new l3(y,D),p=function(e,t){let n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){let r=e.getActiveAttrib(t,i),a=r.name,s=1;r.type===e.FLOAT_MAT2&&(s=2),r.type===e.FLOAT_MAT3&&(s=3),r.type===e.FLOAT_MAT4&&(s=4),n[a]={type:r.type,location:e.getAttribLocation(t,a),locationSize:s}}return n}(y,D)}y.attachShader(D,O),y.attachShader(D,k),void 0!==n.index0AttributeName?y.bindAttribLocation(D,0,n.index0AttributeName):!0===n.morphTargets&&y.bindAttribLocation(D,0,"position"),y.linkProgram(D),this.getUniforms=function(){return void 0===h&&B(this),h},this.getAttributes=function(){return void 0===p&&B(this),p};let N=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===N&&(N=y.getProgramParameter(D,37297)),N},this.destroy=function(){r.releaseStatesOfProgram(this),y.deleteProgram(D),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=l4++,this.cacheKey=t,this.usedTimes=1,this.program=D,this.vertexShader=O,this.fragmentShader=k,this}let uh=0;class ud{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}remove(e){for(let t of this.materialCache.get(e))t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){let t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new up(e),t.set(e,n)),n}}class up{constructor(e){this.id=uh++,this.code=e,this.usedTimes=0}}function uf(e,t,n,r,i,a,s){let u=new a0,c=new ud,h=new Set,p=[],f=i.logarithmicDepthBuffer,v=i.vertexTextures,y=i.precision,_={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(e){return(h.add(e),0===e)?"uv":`uv${e}`}return{getParameters:function(a,u,p,b,S){let w,M,A,C;let T=b.fog,I=S.geometry,D=a.isMeshStandardMaterial?b.environment:null,P=(a.isMeshStandardMaterial?n:t).get(a.envMap||D),R=P&&P.mapping===nC?P.image.height:null,L=_[a.type];null!==a.precision&&(y=i.getMaxPrecision(a.precision),a.precision);let O=I.morphAttributes.position||I.morphAttributes.normal||I.morphAttributes.color,k=void 0!==O?O.length:0,B=0;if(void 0!==I.morphAttributes.position&&(B=1),void 0!==I.morphAttributes.normal&&(B=2),void 0!==I.morphAttributes.color&&(B=3),L){let e=sI[L];w=e.vertexShader,M=e.fragmentShader}else w=a.vertexShader,M=a.fragmentShader,c.update(a),A=c.getVertexShaderID(a),C=c.getFragmentShaderID(a);let N=e.getRenderTarget(),F=e.state.buffers.depth.getReversed(),z=!0===S.isInstancedMesh,U=!0===S.isBatchedMesh,H=!!a.map,G=!!a.matcap,V=!!P,W=!!a.aoMap,j=!!a.lightMap,X=!!a.bumpMap,Y=!!a.normalMap,J=!!a.displacementMap,Z=!!a.emissiveMap,q=!!a.metalnessMap,K=!!a.roughnessMap,Q=a.anisotropy>0,$=a.clearcoat>0,ee=a.dispersion>0,et=a.iridescence>0,en=a.sheen>0,er=a.transmission>0,ei=Q&&!!a.anisotropyMap,ea=$&&!!a.clearcoatMap,eo=$&&!!a.clearcoatNormalMap,es=$&&!!a.clearcoatRoughnessMap,el=et&&!!a.iridescenceMap,eu=et&&!!a.iridescenceThicknessMap,ec=en&&!!a.sheenColorMap,eh=en&&!!a.sheenRoughnessMap,ed=!!a.specularMap,ep=!!a.specularColorMap,ef=!!a.specularIntensityMap,eg=er&&!!a.transmissionMap,em=er&&!!a.thicknessMap,ev=!!a.gradientMap,ey=!!a.alphaMap,e_=a.alphaTest>0,ex=!!a.alphaHash,eb=!!a.extensions,eS=nh;a.toneMapped&&(null===N||!0===N.isXRRenderTarget)&&(eS=e.toneMapping);let ew={shaderID:L,shaderType:a.type,shaderName:a.name,vertexShader:w,fragmentShader:M,defines:a.defines,customVertexShaderID:A,customFragmentShaderID:C,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:y,batching:U,batchingColor:U&&null!==S._colorsTexture,instancing:z,instancingColor:z&&null!==S.instanceColor,instancingMorph:z&&null!==S.morphTexture,supportsVertexTextures:v,outputColorSpace:null===N?e.outputColorSpace:!0===N.isXRRenderTarget?N.texture.colorSpace:r1,alphaToCoverage:!!a.alphaToCoverage,map:H,matcap:G,envMap:V,envMapMode:V&&P.mapping,envMapCubeUVHeight:R,aoMap:W,lightMap:j,bumpMap:X,normalMap:Y,displacementMap:v&&J,emissiveMap:Z,normalMapObjectSpace:Y&&a.normalMapType===rQ,normalMapTangentSpace:Y&&a.normalMapType===rK,metalnessMap:q,roughnessMap:K,anisotropy:Q,anisotropyMap:ei,clearcoat:$,clearcoatMap:ea,clearcoatNormalMap:eo,clearcoatRoughnessMap:es,dispersion:ee,iridescence:et,iridescenceMap:el,iridescenceThicknessMap:eu,sheen:en,sheenColorMap:ec,sheenRoughnessMap:eh,specularMap:ed,specularColorMap:ep,specularIntensityMap:ef,transmission:er,transmissionMap:eg,thicknessMap:em,gradientMap:ev,opaque:!1===a.transparent&&a.blending===tz&&!1===a.alphaToCoverage,alphaMap:ey,alphaTest:e_,alphaHash:ex,combine:a.combine,mapUv:H&&x(a.map.channel),aoMapUv:W&&x(a.aoMap.channel),lightMapUv:j&&x(a.lightMap.channel),bumpMapUv:X&&x(a.bumpMap.channel),normalMapUv:Y&&x(a.normalMap.channel),displacementMapUv:J&&x(a.displacementMap.channel),emissiveMapUv:Z&&x(a.emissiveMap.channel),metalnessMapUv:q&&x(a.metalnessMap.channel),roughnessMapUv:K&&x(a.roughnessMap.channel),anisotropyMapUv:ei&&x(a.anisotropyMap.channel),clearcoatMapUv:ea&&x(a.clearcoatMap.channel),clearcoatNormalMapUv:eo&&x(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:es&&x(a.clearcoatRoughnessMap.channel),iridescenceMapUv:el&&x(a.iridescenceMap.channel),iridescenceThicknessMapUv:eu&&x(a.iridescenceThicknessMap.channel),sheenColorMapUv:ec&&x(a.sheenColorMap.channel),sheenRoughnessMapUv:eh&&x(a.sheenRoughnessMap.channel),specularMapUv:ed&&x(a.specularMap.channel),specularColorMapUv:ep&&x(a.specularColorMap.channel),specularIntensityMapUv:ef&&x(a.specularIntensityMap.channel),transmissionMapUv:eg&&x(a.transmissionMap.channel),thicknessMapUv:em&&x(a.thicknessMap.channel),alphaMapUv:ey&&x(a.alphaMap.channel),vertexTangents:!!I.attributes.tangent&&(Y||Q),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!I.attributes.color&&4===I.attributes.color.itemSize,pointsUvs:!0===S.isPoints&&!!I.attributes.uv&&(H||ey),fog:!!T,useFog:!0===a.fog,fogExp2:!!T&&T.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:f,reverseDepthBuffer:F,skinning:!0===S.isSkinnedMesh,morphTargets:void 0!==I.morphAttributes.position,morphNormals:void 0!==I.morphAttributes.normal,morphColors:void 0!==I.morphAttributes.color,morphTargetsCount:k,morphTextureStride:B,numDirLights:u.directional.length,numPointLights:u.point.length,numSpotLights:u.spot.length,numSpotLightMaps:u.spotLightMap.length,numRectAreaLights:u.rectArea.length,numHemiLights:u.hemi.length,numDirLightShadows:u.directionalShadowMap.length,numPointLightShadows:u.pointShadowMap.length,numSpotLightShadows:u.spotShadowMap.length,numSpotLightShadowsWithMaps:u.numSpotLightShadowsWithMaps,numLightProbes:u.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&p.length>0,shadowMapType:e.shadowMap.type,toneMapping:eS,decodeVideoTexture:H&&!0===a.map.isVideoTexture&&i1.getTransfer(a.map.colorSpace)===r3,decodeVideoTextureEmissive:Z&&!0===a.emissiveMap.isVideoTexture&&i1.getTransfer(a.emissiveMap.colorSpace)===r3,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===tN,flipSided:a.side===tB,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionClipCullDistance:eb&&!0===a.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(eb&&!0===a.extensions.multiDraw||U)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()};return ew.vertexUv1s=h.has(1),ew.vertexUv2s=h.has(2),ew.vertexUv3s=h.has(3),h.clear(),ew},getProgramCacheKey:function(t){let n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(let e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){u.disableAll(),t.supportsVertexTextures&&u.enable(0),t.instancing&&u.enable(1),t.instancingColor&&u.enable(2),t.instancingMorph&&u.enable(3),t.matcap&&u.enable(4),t.envMap&&u.enable(5),t.normalMapObjectSpace&&u.enable(6),t.normalMapTangentSpace&&u.enable(7),t.clearcoat&&u.enable(8),t.iridescence&&u.enable(9),t.alphaTest&&u.enable(10),t.vertexColors&&u.enable(11),t.vertexAlphas&&u.enable(12),t.vertexUv1s&&u.enable(13),t.vertexUv2s&&u.enable(14),t.vertexUv3s&&u.enable(15),t.vertexTangents&&u.enable(16),t.anisotropy&&u.enable(17),t.alphaHash&&u.enable(18),t.batching&&u.enable(19),t.dispersion&&u.enable(20),t.batchingColor&&u.enable(21),e.push(u.mask),u.disableAll(),t.fog&&u.enable(0),t.useFog&&u.enable(1),t.flatShading&&u.enable(2),t.logarithmicDepthBuffer&&u.enable(3),t.reverseDepthBuffer&&u.enable(4),t.skinning&&u.enable(5),t.morphTargets&&u.enable(6),t.morphNormals&&u.enable(7),t.morphColors&&u.enable(8),t.premultipliedAlpha&&u.enable(9),t.shadowMapEnabled&&u.enable(10),t.doubleSided&&u.enable(11),t.flipSided&&u.enable(12),t.useDepthPacking&&u.enable(13),t.dithering&&u.enable(14),t.transmission&&u.enable(15),t.sheen&&u.enable(16),t.opaque&&u.enable(17),t.pointsUvs&&u.enable(18),t.decodeVideoTexture&&u.enable(19),t.decodeVideoTextureEmissive&&u.enable(20),t.alphaToCoverage&&u.enable(21),e.push(u.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){let t;let n=_[e.type];if(n){let e=sI[n];t=ss.clone(e.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){let r;for(let e=0,t=p.length;e<t;e++){let t=p[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new uc(e,n,t,a),p.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){let t=p.indexOf(e);p[t]=p[p.length-1],p.pop(),e.destroy()}},releaseShaderCache:function(e){c.remove(e)},programs:p,dispose:function(){c.dispose()}}}function ug(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function um(e,t){if(e.groupOrder!==t.groupOrder)return e.groupOrder-t.groupOrder;if(e.renderOrder!==t.renderOrder)return e.renderOrder-t.renderOrder;if(e.material.id!==t.material.id)return e.material.id-t.material.id;else if(e.z!==t.z)return e.z-t.z;else return e.id-t.id}function uv(e,t){if(e.groupOrder!==t.groupOrder)return e.groupOrder-t.groupOrder;if(e.renderOrder!==t.renderOrder)return e.renderOrder-t.renderOrder;if(e.z!==t.z)return t.z-e.z;else return e.id-t.id}function uy(){let e=[],t=0,n=[],r=[],i=[];function a(n,r,i,a,s,u){let c=e[t];return void 0===c?(c={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:s,group:u},e[t]=c):(c.id=n.id,c.object=n,c.geometry=r,c.material=i,c.groupOrder=a,c.renderOrder=n.renderOrder,c.z=s,c.group=u),t++,c}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,s,u,c,h){let p=a(e,t,s,u,c,h);s.transmission>0?r.push(p):!0===s.transparent?i.push(p):n.push(p)},unshift:function(e,t,s,u,c,h){let p=a(e,t,s,u,c,h);s.transmission>0?r.unshift(p):!0===s.transparent?i.unshift(p):n.unshift(p)},finish:function(){for(let n=t,r=e.length;n<r;n++){let t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||um),r.length>1&&r.sort(t||uv),i.length>1&&i.sort(t||uv)}}}function u_(){let e=new WeakMap;return{get:function(t,n){let r;let i=e.get(t);return void 0===i?(r=new uy,e.set(t,[r])):n>=i.length?(r=new uy,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function ux(){let e={};return{get:function(t){let n;if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":n={direction:new ap,color:new oA};break;case"SpotLight":n={position:new ap,direction:new ap,color:new oA,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ap,color:new oA,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ap,skyColor:new oA,groundColor:new oA};break;case"RectAreaLight":n={color:new oA,position:new ap,halfWidth:new ap,halfHeight:new ap}}return e[t.id]=n,n}}}let ub=0;function uS(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function uw(e){let t=new ux,n=function(){let e={};return{get:function(t){let n;if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ij};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ij,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let e=0;e<9;e++)r.probe.push(new ap);let i=new ap,a=new aV,s=new aV;return{setup:function(i){let a=0,s=0,u=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let c=0,h=0,p=0,f=0,v=0,y=0,_=0,x=0,b=0,S=0,w=0;i.sort(uS);for(let e=0,M=i.length;e<M;e++){let M=i[e],A=M.color,C=M.intensity,T=M.distance,I=M.shadow&&M.shadow.map?M.shadow.map.texture:null;if(M.isAmbientLight)a+=A.r*C,s+=A.g*C,u+=A.b*C;else if(M.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(M.sh.coefficients[e],C);w++}else if(M.isDirectionalLight){let e=t.get(M);if(e.color.copy(M.color).multiplyScalar(M.intensity),M.castShadow){let e=M.shadow,t=n.get(M);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,r.directionalShadow[c]=t,r.directionalShadowMap[c]=I,r.directionalShadowMatrix[c]=M.shadow.matrix,y++}r.directional[c]=e,c++}else if(M.isSpotLight){let e=t.get(M);e.position.setFromMatrixPosition(M.matrixWorld),e.color.copy(A).multiplyScalar(C),e.distance=T,e.coneCos=Math.cos(M.angle),e.penumbraCos=Math.cos(M.angle*(1-M.penumbra)),e.decay=M.decay,r.spot[p]=e;let i=M.shadow;if(M.map&&(r.spotLightMap[b]=M.map,b++,i.updateMatrices(M),M.castShadow&&S++),r.spotLightMatrix[p]=i.matrix,M.castShadow){let e=n.get(M);e.shadowIntensity=i.intensity,e.shadowBias=i.bias,e.shadowNormalBias=i.normalBias,e.shadowRadius=i.radius,e.shadowMapSize=i.mapSize,r.spotShadow[p]=e,r.spotShadowMap[p]=I,x++}p++}else if(M.isRectAreaLight){let e=t.get(M);e.color.copy(A).multiplyScalar(C),e.halfWidth.set(.5*M.width,0,0),e.halfHeight.set(0,.5*M.height,0),r.rectArea[f]=e,f++}else if(M.isPointLight){let e=t.get(M);if(e.color.copy(M.color).multiplyScalar(M.intensity),e.distance=M.distance,e.decay=M.decay,M.castShadow){let e=M.shadow,t=n.get(M);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,r.pointShadow[h]=t,r.pointShadowMap[h]=I,r.pointShadowMatrix[h]=M.shadow.matrix,_++}r.point[h]=e,h++}else if(M.isHemisphereLight){let e=t.get(M);e.skyColor.copy(M.color).multiplyScalar(C),e.groundColor.copy(M.groundColor).multiplyScalar(C),r.hemi[v]=e,v++}}f>0&&(!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=sE.LTC_FLOAT_1,r.rectAreaLTC2=sE.LTC_FLOAT_2):(r.rectAreaLTC1=sE.LTC_HALF_1,r.rectAreaLTC2=sE.LTC_HALF_2)),r.ambient[0]=a,r.ambient[1]=s,r.ambient[2]=u;let M=r.hash;(M.directionalLength!==c||M.pointLength!==h||M.spotLength!==p||M.rectAreaLength!==f||M.hemiLength!==v||M.numDirectionalShadows!==y||M.numPointShadows!==_||M.numSpotShadows!==x||M.numSpotMaps!==b||M.numLightProbes!==w)&&(r.directional.length=c,r.spot.length=p,r.rectArea.length=f,r.point.length=h,r.hemi.length=v,r.directionalShadow.length=y,r.directionalShadowMap.length=y,r.pointShadow.length=_,r.pointShadowMap.length=_,r.spotShadow.length=x,r.spotShadowMap.length=x,r.directionalShadowMatrix.length=y,r.pointShadowMatrix.length=_,r.spotLightMatrix.length=x+b-S,r.spotLightMap.length=b,r.numSpotLightShadowsWithMaps=S,r.numLightProbes=w,M.directionalLength=c,M.pointLength=h,M.spotLength=p,M.rectAreaLength=f,M.hemiLength=v,M.numDirectionalShadows=y,M.numPointShadows=_,M.numSpotShadows=x,M.numSpotMaps=b,M.numLightProbes=w,r.version=ub++)},setupView:function(e,t){let n=0,u=0,c=0,h=0,p=0,f=t.matrixWorldInverse;for(let t=0,v=e.length;t<v;t++){let v=e[t];if(v.isDirectionalLight){let e=r.directional[n];e.direction.setFromMatrixPosition(v.matrixWorld),i.setFromMatrixPosition(v.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(f),n++}else if(v.isSpotLight){let e=r.spot[c];e.position.setFromMatrixPosition(v.matrixWorld),e.position.applyMatrix4(f),e.direction.setFromMatrixPosition(v.matrixWorld),i.setFromMatrixPosition(v.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(f),c++}else if(v.isRectAreaLight){let e=r.rectArea[h];e.position.setFromMatrixPosition(v.matrixWorld),e.position.applyMatrix4(f),s.identity(),a.copy(v.matrixWorld),a.premultiply(f),s.extractRotation(a),e.halfWidth.set(.5*v.width,0,0),e.halfHeight.set(0,.5*v.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),h++}else if(v.isPointLight){let e=r.point[u];e.position.setFromMatrixPosition(v.matrixWorld),e.position.applyMatrix4(f),u++}else if(v.isHemisphereLight){let e=r.hemi[p];e.direction.setFromMatrixPosition(v.matrixWorld),e.direction.transformDirection(f),p++}}},state:r}}function uM(e){let t=new uw(e),n=[],r=[],i={lightsArray:n,shadowsArray:r,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){i.camera=e,n.length=0,r.length=0},state:i,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function uA(e){let t=new WeakMap;return{get:function(n,r=0){let i;let a=t.get(n);return void 0===a?(i=new uM(e),t.set(n,[i])):r>=a.length?(i=new uM(e),a.push(i)):i=a[r],i},dispose:function(){t=new WeakMap}}}class uC extends oE{static get type(){return"MeshDepthMaterial"}constructor(e){super(),this.isMeshDepthMaterial=!0,this.depthPacking=rY,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class uT extends oE{static get type(){return"MeshDistanceMaterial"}constructor(e){super(),this.isMeshDistanceMaterial=!0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function uE(e,t,n){let r=new sw,i=new ij,a=new ij,s=new aa,u=new uC({depthPacking:rJ}),c=new uT,h={},p=n.maxTextureSize,f={[tk]:tB,[tB]:tk,[tN]:tN},v=new sl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ij},radius:{value:4}},vertexShader:"void main() {\n	gl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n	const float samples = float( VSM_SAMPLES );\n	float mean = 0.0;\n	float squared_mean = 0.0;\n	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n	for ( float i = 0.0; i < samples; i ++ ) {\n		float uvOffset = uvStart + i * uvStride;\n		#ifdef HORIZONTAL_PASS\n			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n			mean += distribution.x;\n			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n		#else\n			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n			mean += depth;\n			squared_mean += depth * depth;\n		#endif\n	}\n	mean = mean / samples;\n	squared_mean = squared_mean / samples;\n	float std_dev = sqrt( squared_mean - mean * mean );\n	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),y=v.clone();y.defines.HORIZONTAL_PASS=1;let _=new o$;_.setAttribute("position",new oB(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let x=new st(_,v),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=tR;let S=this.type;this.render=function(n,u,c){if(!1===b.enabled||!1===b.autoUpdate&&!1===b.needsUpdate||0===n.length)return;let h=e.getRenderTarget(),f=e.getActiveCubeFace(),_=e.getActiveMipmapLevel(),M=e.state;M.setBlending(tF),M.buffers.color.setClear(1,1,1,1),M.buffers.depth.setTest(!0),M.setScissorTest(!1);let A=S!==tO&&this.type===tO,C=S===tO&&this.type!==tO;for(let h=0,f=n.length;h<f;h++){let f=n[h],_=f.shadow;if(void 0===_||!1===_.autoUpdate&&!1===_.needsUpdate)continue;i.copy(_.mapSize);let b=_.getFrameExtents();if(i.multiply(b),a.copy(_.mapSize),(i.x>p||i.y>p)&&(i.x>p&&(a.x=Math.floor(p/b.x),i.x=a.x*b.x,_.mapSize.x=a.x),i.y>p&&(a.y=Math.floor(p/b.y),i.y=a.y*b.y,_.mapSize.y=a.y)),null===_.map||!0===A||!0===C){let e=this.type!==tO?{minFilter:nD,magFilter:nD}:{};null!==_.map&&_.map.dispose(),_.map=new as(i.x,i.y,e),_.map.texture.name=f.name+".shadowMap",_.camera.updateProjectionMatrix()}e.setRenderTarget(_.map),e.clear();let S=_.getViewportCount();for(let n=0;n<S;n++){let i=_.getViewport(n);s.set(a.x*i.x,a.y*i.y,a.x*i.z,a.y*i.w),M.viewport(s),_.updateMatrices(f,n),r=_.getFrustum(),function n(i,a,s,u,c){if(!1===i.visible)return;if(i.layers.test(a.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&c===tO)&&(!i.frustumCulled||r.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,i.matrixWorld);let n=t.update(i),r=i.material;if(Array.isArray(r)){let t=n.groups;for(let h=0,p=t.length;h<p;h++){let p=t[h],f=r[p.materialIndex];if(f&&f.visible){let t=w(i,f,u,c);i.onBeforeShadow(e,i,a,s,n,t,p),e.renderBufferDirect(s,null,n,t,i,p),i.onAfterShadow(e,i,a,s,n,t,p)}}}else if(r.visible){let t=w(i,r,u,c);i.onBeforeShadow(e,i,a,s,n,t,null),e.renderBufferDirect(s,null,n,t,i,null),i.onAfterShadow(e,i,a,s,n,t,null)}}let h=i.children;for(let e=0,t=h.length;e<t;e++)n(h[e],a,s,u,c)}(u,c,_.camera,f,this.type)}!0!==_.isPointLightShadow&&this.type===tO&&function(n,r){let a=t.update(x);v.defines.VSM_SAMPLES!==n.blurSamples&&(v.defines.VSM_SAMPLES=n.blurSamples,y.defines.VSM_SAMPLES=n.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new as(i.x,i.y)),v.uniforms.shadow_pass.value=n.map.texture,v.uniforms.resolution.value=n.mapSize,v.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,v,x,null),y.uniforms.shadow_pass.value=n.mapPass.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,y,x,null)}(_,c),_.needsUpdate=!1}S=this.type,b.needsUpdate=!1,e.setRenderTarget(h,f,_)};function w(t,n,r,i){let a=null,s=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)a=s;else if(a=!0===r.isPointLight?c:u,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){let e=a.uuid,t=n.uuid,r=h[e];void 0===r&&(r={},h[e]=r);let i=r[t];void 0===i&&(i=a.clone(),r[t]=i,n.addEventListener("dispose",M)),a=i}return a.visible=n.visible,a.wireframe=n.wireframe,i===tO?a.side=null!==n.shadowSide?n.shadowSide:n.side:a.side=null!==n.shadowSide?n.shadowSide:f[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===r.isPointLight&&!0===a.isMeshDistanceMaterial&&(e.properties.get(a).light=r),a}function M(e){for(let t in e.target.removeEventListener("dispose",M),h){let n=h[t],r=e.target.uuid;r in n&&(n[r].dispose(),delete n[r])}}}let uI={[ne]:nt,[nn]:no,[ni]:ns,[nr]:na,[nt]:ne,[no]:nn,[ns]:ni,[na]:nr};function uD(e,t){let n=new function(){let t=!1,n=new aa,r=null,i=new aa(0,0,0,0);return{setMask:function(n){r!==n&&!t&&(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,s,u){!0===u&&(t*=s,r*=s,a*=s),n.set(t,r,a,s),!1===i.equals(n)&&(e.clearColor(t,r,a,s),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},r=new function(){let n=!1,r=!1,i=null,a=null,s=null;return{setReversed:function(e){if(r!==e){let e=t.get("EXT_clip_control");r?e.clipControlEXT(e.LOWER_LEFT_EXT,e.ZERO_TO_ONE_EXT):e.clipControlEXT(e.LOWER_LEFT_EXT,e.NEGATIVE_ONE_TO_ONE_EXT);let n=s;s=null,this.setClear(n)}r=e},getReversed:function(){return r},setTest:function(t){t?X(e.DEPTH_TEST):Y(e.DEPTH_TEST)},setMask:function(t){i!==t&&!n&&(e.depthMask(t),i=t)},setFunc:function(t){if(r&&(t=uI[t]),a!==t){switch(t){case ne:e.depthFunc(e.NEVER);break;case nt:e.depthFunc(e.ALWAYS);break;case nn:e.depthFunc(e.LESS);break;case nr:e.depthFunc(e.LEQUAL);break;case ni:e.depthFunc(e.EQUAL);break;case na:e.depthFunc(e.GEQUAL);break;case no:e.depthFunc(e.GREATER);break;case ns:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}a=t}},setLocked:function(e){n=e},setClear:function(t){s!==t&&(r&&(t=1-t),e.clearDepth(t),s=t)},reset:function(){n=!1,i=null,a=null,s=null,r=!1}}},i=new function(){let t=!1,n=null,r=null,i=null,a=null,s=null,u=null,c=null,h=null;return{setTest:function(n){!t&&(n?X(e.STENCIL_TEST):Y(e.STENCIL_TEST))},setMask:function(r){n!==r&&!t&&(e.stencilMask(r),n=r)},setFunc:function(t,n,s){(r!==t||i!==n||a!==s)&&(e.stencilFunc(t,n,s),r=t,i=n,a=s)},setOp:function(t,n,r){(s!==t||u!==n||c!==r)&&(e.stencilOp(t,n,r),s=t,u=n,c=r)},setLocked:function(e){t=e},setClear:function(t){h!==t&&(e.clearStencil(t),h=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,s=null,u=null,c=null,h=null}}},a=new WeakMap,s=new WeakMap,u={},c={},h=new WeakMap,p=[],f=null,v=!1,y=null,_=null,x=null,b=null,S=null,w=null,M=null,A=new oA(0,0,0),C=0,T=!1,I=null,D=null,P=null,R=null,L=null,O=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),k=!1,B=0,N=e.getParameter(e.VERSION);-1!==N.indexOf("WebGL")?k=(B=parseFloat(/^WebGL (\d)/.exec(N)[1]))>=1:-1!==N.indexOf("OpenGL ES")&&(k=(B=parseFloat(/^OpenGL ES (\d)/.exec(N)[1]))>=2);let F=null,z={},U=e.getParameter(e.SCISSOR_BOX),H=e.getParameter(e.VIEWPORT),G=new aa().fromArray(U),V=new aa().fromArray(H);function W(t,n,r,i){let a=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let s=0;s<r;s++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,i,0,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage2D(n+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a);return s}let j={};function X(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function Y(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}j[e.TEXTURE_2D]=W(e.TEXTURE_2D,e.TEXTURE_2D,1),j[e.TEXTURE_CUBE_MAP]=W(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),j[e.TEXTURE_2D_ARRAY]=W(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),j[e.TEXTURE_3D]=W(e.TEXTURE_3D,e.TEXTURE_3D,1,1),n.setClear(0,0,0,1),r.setClear(1),i.setClear(0),X(e.DEPTH_TEST),r.setFunc(nr),K(!1),Q(tE),X(e.CULL_FACE),q(tF);let J={[tW]:e.FUNC_ADD,[tj]:e.FUNC_SUBTRACT,[tX]:e.FUNC_REVERSE_SUBTRACT};J[tY]=e.MIN,J[tJ]=e.MAX;let Z={[tZ]:e.ZERO,[tq]:e.ONE,[tK]:e.SRC_COLOR,[t$]:e.SRC_ALPHA,[t4]:e.SRC_ALPHA_SATURATE,[t3]:e.DST_COLOR,[t1]:e.DST_ALPHA,[tQ]:e.ONE_MINUS_SRC_COLOR,[t0]:e.ONE_MINUS_SRC_ALPHA,[t5]:e.ONE_MINUS_DST_COLOR,[t2]:e.ONE_MINUS_DST_ALPHA,[t6]:e.CONSTANT_COLOR,[t9]:e.ONE_MINUS_CONSTANT_COLOR,[t8]:e.CONSTANT_ALPHA,[t7]:e.ONE_MINUS_CONSTANT_ALPHA};function q(t,n,r,i,a,s,u,c,h,p){if(t===tF){!0===v&&(Y(e.BLEND),v=!1);return}if(!1===v&&(X(e.BLEND),v=!0),t!==tV){if(t!==y||p!==T){if((_!==tW||S!==tW)&&(e.blendEquation(e.FUNC_ADD),_=tW,S=tW),p)switch(t){case tz:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case tU:e.blendFunc(e.ONE,e.ONE);break;case tH:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case tG:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)}else switch(t){case tz:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case tU:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case tH:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case tG:e.blendFunc(e.ZERO,e.SRC_COLOR)}x=null,b=null,w=null,M=null,A.set(0,0,0),C=0,y=t,T=p}return}a=a||n,s=s||r,u=u||i,(n!==_||a!==S)&&(e.blendEquationSeparate(J[n],J[a]),_=n,S=a),(r!==x||i!==b||s!==w||u!==M)&&(e.blendFuncSeparate(Z[r],Z[i],Z[s],Z[u]),x=r,b=i,w=s,M=u),(!1===c.equals(A)||h!==C)&&(e.blendColor(c.r,c.g,c.b,h),A.copy(c),C=h),y=t,T=!1}function K(t){I!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),I=t)}function Q(t){t!==tT?(X(e.CULL_FACE),t!==D&&(t===tE?e.cullFace(e.BACK):t===tI?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):Y(e.CULL_FACE),D=t}function $(t,n,r){t?(X(e.POLYGON_OFFSET_FILL),(R!==n||L!==r)&&(e.polygonOffset(n,r),R=n,L=r)):Y(e.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:r,stencil:i},enable:X,disable:Y,bindFramebuffer:function(t,n){return c[t]!==n&&(e.bindFramebuffer(t,n),c[t]=n,t===e.DRAW_FRAMEBUFFER&&(c[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(c[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let r=p,i=!1;if(t){void 0===(r=h.get(n))&&(r=[],h.set(n,r));let a=t.textures;if(r.length!==a.length||r[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=a.length;t<n;t++)r[t]=e.COLOR_ATTACHMENT0+t;r.length=a.length,i=!0}}else r[0]!==e.BACK&&(r[0]=e.BACK,i=!0);i&&e.drawBuffers(r)},useProgram:function(t){return f!==t&&(e.useProgram(t),f=t,!0)},setBlending:q,setMaterial:function(t,a){t.side===tN?Y(e.CULL_FACE):X(e.CULL_FACE);let s=t.side===tB;a&&(s=!s),K(s),t.blending===tz&&!1===t.transparent?q(tF):q(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),n.setMask(t.colorWrite);let u=t.stencilWrite;i.setTest(u),u&&(i.setMask(t.stencilWriteMask),i.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),i.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),$(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?X(e.SAMPLE_ALPHA_TO_COVERAGE):Y(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:K,setCullFace:Q,setLineWidth:function(t){t!==P&&(k&&e.lineWidth(t),P=t)},setPolygonOffset:$,setScissorTest:function(t){t?X(e.SCISSOR_TEST):Y(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+O-1),F!==t&&(e.activeTexture(t),F=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===F?e.TEXTURE0+O-1:F);let i=z[r];void 0===i&&(i={type:void 0,texture:void 0},z[r]=i),(i.type!==t||i.texture!==n)&&(F!==r&&(e.activeTexture(r),F=r),e.bindTexture(t,n||j[t]),i.type=t,i.texture=n)},unbindTexture:function(){let t=z[F];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){}},updateUBOMapping:function(t,n){let r=s.get(n);void 0===r&&(r=new WeakMap,s.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){let r=s.get(n).get(t);a.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),a.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){}},scissor:function(t){!1===G.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),G.copy(t))},viewport:function(t){!1===V.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),V.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),r.setReversed(!1),e.clearDepth(1),e.stencilMask(0xffffffff),e.stencilFunc(e.ALWAYS,0,0xffffffff),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},F=null,z={},c={},h=new WeakMap,p=[],f=null,v=!1,y=null,_=null,x=null,b=null,S=null,w=null,M=null,A=new oA(0,0,0),C=0,T=!1,I=null,D=null,P=null,R=null,L=null,G.set(0,0,e.canvas.width,e.canvas.height),V.set(0,0,e.canvas.width,e.canvas.height),n.reset(),r.reset(),i.reset()}}}function uP(e,t,n,r){let i=function(e){switch(e){case nU:case nH:return{byteLength:1,components:1};case nV:case nG:case nY:return{byteLength:2,components:1};case nJ:case nZ:return{byteLength:2,components:4};case nj:case nW:case nX:return{byteLength:4,components:1};case nK:return{byteLength:4,components:3}}throw Error(`Unknown texture type ${e}.`)}(r);switch(n){case nQ:case n1:return e*t;case n2:return e*t*2;case n4:case n6:return e*t/i.components*i.byteLength;case n9:case n8:return e*t*2/i.components*i.byteLength;case n$:return e*t*3/i.components*i.byteLength;case n0:case re:return e*t*4/i.components*i.byteLength;case rt:case rn:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case rr:case ri:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case ro:case rl:return Math.max(e,16)*Math.max(t,8)/4;case ra:case rs:return Math.max(e,8)*Math.max(t,8)/2;case ru:case rc:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case rh:case rd:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case rp:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case rf:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case rg:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case rm:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case rv:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case ry:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case r_:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case rx:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case rb:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case rS:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case rw:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case rM:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case rA:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case rC:case rT:case rE:return Math.ceil(e/4)*Math.ceil(t/4)*16;case rI:case rD:return Math.ceil(e/4)*Math.ceil(t/4)*8;case rP:case rR:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw Error(`Unable to determine texture byte length for ${n} format.`)}let uR={contain:function(e,t){let n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2):(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0),e},cover:function(e,t){let n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0):(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2),e},fill:function(e){return e.repeat.x=1,e.repeat.y=1,e.offset.x=0,e.offset.y=0,e},getByteLength:uP};function uL(e,t,n,r,i,a,s){let u;let c=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,h="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),p=new ij,f=new WeakMap,v=new WeakMap,y=!1;try{y="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function _(e,t){return y?new OffscreenCanvas(e,t):iK("canvas")}function x(e,t,n){let r=1,i=X(e);if((i.width>n||i.height>n)&&(r=n/Math.max(i.width,i.height)),r<1&&("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&e instanceof VideoFrame)){let n=Math.floor(r*i.width),a=Math.floor(r*i.height);void 0===u&&(u=_(n,a));let s=t?_(n,a):u;return s.width=n,s.height=a,s.getContext("2d").drawImage(e,0,0,n,a),s}return e}function b(e){return e.generateMipmaps}function S(t){e.generateMipmap(t)}function w(n,r,i,a,s=!1){if(null!==n&&void 0!==e[n])return e[n];let u=r;if(r===e.RED&&(i===e.FLOAT&&(u=e.R32F),i===e.HALF_FLOAT&&(u=e.R16F),i===e.UNSIGNED_BYTE&&(u=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(u=e.R8UI),i===e.UNSIGNED_SHORT&&(u=e.R16UI),i===e.UNSIGNED_INT&&(u=e.R32UI),i===e.BYTE&&(u=e.R8I),i===e.SHORT&&(u=e.R16I),i===e.INT&&(u=e.R32I)),r===e.RG&&(i===e.FLOAT&&(u=e.RG32F),i===e.HALF_FLOAT&&(u=e.RG16F),i===e.UNSIGNED_BYTE&&(u=e.RG8)),r===e.RG_INTEGER&&(i===e.UNSIGNED_BYTE&&(u=e.RG8UI),i===e.UNSIGNED_SHORT&&(u=e.RG16UI),i===e.UNSIGNED_INT&&(u=e.RG32UI),i===e.BYTE&&(u=e.RG8I),i===e.SHORT&&(u=e.RG16I),i===e.INT&&(u=e.RG32I)),r===e.RGB_INTEGER&&(i===e.UNSIGNED_BYTE&&(u=e.RGB8UI),i===e.UNSIGNED_SHORT&&(u=e.RGB16UI),i===e.UNSIGNED_INT&&(u=e.RGB32UI),i===e.BYTE&&(u=e.RGB8I),i===e.SHORT&&(u=e.RGB16I),i===e.INT&&(u=e.RGB32I)),r===e.RGBA_INTEGER&&(i===e.UNSIGNED_BYTE&&(u=e.RGBA8UI),i===e.UNSIGNED_SHORT&&(u=e.RGBA16UI),i===e.UNSIGNED_INT&&(u=e.RGBA32UI),i===e.BYTE&&(u=e.RGBA8I),i===e.SHORT&&(u=e.RGBA16I),i===e.INT&&(u=e.RGBA32I)),r===e.RGB&&i===e.UNSIGNED_INT_5_9_9_9_REV&&(u=e.RGB9_E5),r===e.RGBA){let t=s?r2:i1.getTransfer(a);i===e.FLOAT&&(u=e.RGBA32F),i===e.HALF_FLOAT&&(u=e.RGBA16F),i===e.UNSIGNED_BYTE&&(u=t===r3?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(u=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(u=e.RGB5_A1)}return(u===e.R16F||u===e.R32F||u===e.RG16F||u===e.RG32F||u===e.RGBA16F||u===e.RGBA32F)&&t.get("EXT_color_buffer_float"),u}function M(t,n){let r;return t?null===n||n===nj||n===nq?r=e.DEPTH24_STENCIL8:n===nX?r=e.DEPTH32F_STENCIL8:n===nV&&(r=e.DEPTH24_STENCIL8):null===n||n===nj||n===nq?r=e.DEPTH_COMPONENT24:n===nX?r=e.DEPTH_COMPONENT32F:n===nV&&(r=e.DEPTH_COMPONENT16),r}function A(e,t){if(!0===b(e)||e.isFramebufferTexture&&e.minFilter!==nD&&e.minFilter!==nk)return Math.log2(Math.max(t.width,t.height))+1;if(void 0!==e.mipmaps&&e.mipmaps.length>0)return e.mipmaps.length;if(e.isCompressedTexture&&Array.isArray(e.image))return t.mipmaps.length;else return 1}function C(e){let t=e.target;t.removeEventListener("dispose",C),function(e){let t=r.get(e);if(void 0===t.__webglInit)return;let n=e.source,i=v.get(n);if(i){let r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&I(e),0===Object.keys(i).length&&v.delete(n)}r.remove(e)}(t),t.isVideoTexture&&f.delete(t)}function T(t){let n=t.target;n.removeEventListener("dispose",T),function(t){let n=r.get(t);if(t.depthTexture&&(t.depthTexture.dispose(),r.remove(t.depthTexture)),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++){if(Array.isArray(n.__webglFramebuffer[t]))for(let r=0;r<n.__webglFramebuffer[t].length;r++)e.deleteFramebuffer(n.__webglFramebuffer[t][r]);else e.deleteFramebuffer(n.__webglFramebuffer[t]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}let i=t.textures;for(let t=0,n=i.length;t<n;t++){let n=r.get(i[t]);n.__webglTexture&&(e.deleteTexture(n.__webglTexture),s.memory.textures--),r.remove(i[t])}r.remove(t)}(n)}function I(t){let n=r.get(t);e.deleteTexture(n.__webglTexture);let i=t.source,a=v.get(i);delete a[n.__cacheKey],s.memory.textures--}let D=0;function P(t,i){let a=r.get(t);if(t.isVideoTexture&&function(e){let t=s.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){let e=t.image;if(null===e);else if(!1===e.complete);else{N(a,t,i);return}}n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+i)}let R={[nT]:e.REPEAT,[nE]:e.CLAMP_TO_EDGE,[nI]:e.MIRRORED_REPEAT},L={[nD]:e.NEAREST,[nP]:e.NEAREST_MIPMAP_NEAREST,[nL]:e.NEAREST_MIPMAP_LINEAR,[nk]:e.LINEAR,[nB]:e.LINEAR_MIPMAP_NEAREST,[nF]:e.LINEAR_MIPMAP_LINEAR},O={[ih]:e.NEVER,[i_]:e.ALWAYS,[id]:e.LESS,[ig]:e.LEQUAL,[ip]:e.EQUAL,[iy]:e.GEQUAL,[im]:e.GREATER,[iv]:e.NOTEQUAL};function k(n,a){if(a.type===nX&&!1===t.has("OES_texture_float_linear")&&(a.magFilter===nk||a.magFilter===nB||a.magFilter===nL||a.magFilter===nF||a.minFilter===nk||a.minFilter===nB||a.minFilter===nL||a.minFilter),e.texParameteri(n,e.TEXTURE_WRAP_S,R[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,R[a.wrapT]),(n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY)&&e.texParameteri(n,e.TEXTURE_WRAP_R,R[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,L[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,L[a.minFilter]),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,O[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(a.magFilter!==nD&&(a.minFilter===nL||a.minFilter===nF)&&(a.type!==nX||!1!==t.has("OES_texture_float_linear"))){if(a.anisotropy>1||r.get(a).__currentAnisotropy){let s=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy}}}}function B(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",C));let i=n.source,a=v.get(i);void 0===a&&(a={},v.set(i,a));let u=function(e){let t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(u!==t.__cacheKey){void 0===a[u]&&(a[u]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,r=!0),a[u].usedTimes++;let i=a[t.__cacheKey];void 0!==i&&(a[t.__cacheKey].usedTimes--,0===i.usedTimes&&I(n)),t.__cacheKey=u,t.__webglTexture=a[u].texture}return r}function N(t,s,u){let c=e.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(c=e.TEXTURE_2D_ARRAY),s.isData3DTexture&&(c=e.TEXTURE_3D);let h=B(t,s),p=s.source;n.bindTexture(c,t.__webglTexture,e.TEXTURE0+u);let f=r.get(p);if(p.version!==f.__version||!0===h){let t;n.activeTexture(e.TEXTURE0+u);let r=i1.getPrimaries(i1.workingColorSpace),v=s.colorSpace===r$?null:i1.getPrimaries(s.colorSpace),y=s.colorSpace===r$||r===v?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,y);let _=x(s.image,!1,i.maxTextureSize);_=j(s,_);let C=a.convert(s.format,s.colorSpace),T=a.convert(s.type),I=w(s.internalFormat,C,T,s.colorSpace,s.isVideoTexture);k(c,s);let D=s.mipmaps,P=!0!==s.isVideoTexture,R=void 0===f.__version||!0===h,L=p.dataReady,O=A(s,_);if(s.isDepthTexture)I=M(s.format===n5,s.type),R&&(P?n.texStorage2D(e.TEXTURE_2D,1,I,_.width,_.height):n.texImage2D(e.TEXTURE_2D,0,I,_.width,_.height,0,C,T,null));else if(s.isDataTexture){if(D.length>0){P&&R&&n.texStorage2D(e.TEXTURE_2D,O,I,D[0].width,D[0].height);for(let r=0,i=D.length;r<i;r++)t=D[r],P?L&&n.texSubImage2D(e.TEXTURE_2D,r,0,0,t.width,t.height,C,T,t.data):n.texImage2D(e.TEXTURE_2D,r,I,t.width,t.height,0,C,T,t.data);s.generateMipmaps=!1}else P?(R&&n.texStorage2D(e.TEXTURE_2D,O,I,_.width,_.height),L&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,_.width,_.height,C,T,_.data)):n.texImage2D(e.TEXTURE_2D,0,I,_.width,_.height,0,C,T,_.data)}else if(s.isCompressedTexture){if(s.isCompressedArrayTexture){P&&R&&n.texStorage3D(e.TEXTURE_2D_ARRAY,O,I,D[0].width,D[0].height,_.depth);for(let r=0,i=D.length;r<i;r++)if(t=D[r],s.format!==n0){if(null!==C){if(P){if(L){if(s.layerUpdates.size>0){let i=uP(t.width,t.height,s.format,s.type);for(let a of s.layerUpdates){let s=t.data.subarray(a*i/t.data.BYTES_PER_ELEMENT,(a+1)*i/t.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,r,0,0,a,t.width,t.height,1,C,s)}s.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,r,0,0,0,t.width,t.height,_.depth,C,t.data)}}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,r,I,t.width,t.height,_.depth,0,t.data,0,0)}}else P?L&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,r,0,0,0,t.width,t.height,_.depth,C,T,t.data):n.texImage3D(e.TEXTURE_2D_ARRAY,r,I,t.width,t.height,_.depth,0,C,T,t.data)}else{P&&R&&n.texStorage2D(e.TEXTURE_2D,O,I,D[0].width,D[0].height);for(let r=0,i=D.length;r<i;r++)t=D[r],s.format!==n0?null!==C&&(P?L&&n.compressedTexSubImage2D(e.TEXTURE_2D,r,0,0,t.width,t.height,C,t.data):n.compressedTexImage2D(e.TEXTURE_2D,r,I,t.width,t.height,0,t.data)):P?L&&n.texSubImage2D(e.TEXTURE_2D,r,0,0,t.width,t.height,C,T,t.data):n.texImage2D(e.TEXTURE_2D,r,I,t.width,t.height,0,C,T,t.data)}}else if(s.isDataArrayTexture){if(P){if(R&&n.texStorage3D(e.TEXTURE_2D_ARRAY,O,I,_.width,_.height,_.depth),L){if(s.layerUpdates.size>0){let t=uP(_.width,_.height,s.format,s.type);for(let r of s.layerUpdates){let i=_.data.subarray(r*t/_.data.BYTES_PER_ELEMENT,(r+1)*t/_.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,r,_.width,_.height,1,C,T,i)}s.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,_.width,_.height,_.depth,C,T,_.data)}}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,I,_.width,_.height,_.depth,0,C,T,_.data)}else if(s.isData3DTexture)P?(R&&n.texStorage3D(e.TEXTURE_3D,O,I,_.width,_.height,_.depth),L&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,_.width,_.height,_.depth,C,T,_.data)):n.texImage3D(e.TEXTURE_3D,0,I,_.width,_.height,_.depth,0,C,T,_.data);else if(s.isFramebufferTexture){if(R){if(P)n.texStorage2D(e.TEXTURE_2D,O,I,_.width,_.height);else{let t=_.width,r=_.height;for(let i=0;i<O;i++)n.texImage2D(e.TEXTURE_2D,i,I,t,r,0,C,T,null),t>>=1,r>>=1}}}else if(D.length>0){if(P&&R){let t=X(D[0]);n.texStorage2D(e.TEXTURE_2D,O,I,t.width,t.height)}for(let r=0,i=D.length;r<i;r++)t=D[r],P?L&&n.texSubImage2D(e.TEXTURE_2D,r,0,0,C,T,t):n.texImage2D(e.TEXTURE_2D,r,I,C,T,t);s.generateMipmaps=!1}else if(P){if(R){let t=X(_);n.texStorage2D(e.TEXTURE_2D,O,I,t.width,t.height)}L&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,C,T,_)}else n.texImage2D(e.TEXTURE_2D,0,I,C,T,_);b(s)&&S(c),f.__version=p.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}function F(t,i,s,u,h,p){let f=a.convert(s.format,s.colorSpace),v=a.convert(s.type),y=w(s.internalFormat,f,v,s.colorSpace),_=r.get(i),x=r.get(s);if(x.__renderTarget=i,!_.__hasExternalTextures){let t=Math.max(1,i.width>>p),r=Math.max(1,i.height>>p);h===e.TEXTURE_3D||h===e.TEXTURE_2D_ARRAY?n.texImage3D(h,p,y,t,r,i.depth,0,f,v,null):n.texImage2D(h,p,y,t,r,0,f,v,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),W(i)?c.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,u,h,x.__webglTexture,0,V(i)):(h===e.TEXTURE_2D||h>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&h<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,u,h,x.__webglTexture,p),n.bindFramebuffer(e.FRAMEBUFFER,null)}function z(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){let i=n.depthTexture,a=i&&i.isDepthTexture?i.type:null,s=M(n.stencilBuffer,a),u=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,h=V(n);W(n)?c.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,h,s,n.width,n.height):r?e.renderbufferStorageMultisample(e.RENDERBUFFER,h,s,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,s,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,u,e.RENDERBUFFER,t)}else{let t=n.textures;for(let i=0;i<t.length;i++){let s=t[i],u=a.convert(s.format,s.colorSpace),h=a.convert(s.type),p=w(s.internalFormat,u,h,s.colorSpace),f=V(n);r&&!1===W(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,f,p,n.width,n.height):W(n)?c.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,f,p,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,p,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function U(t){let i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(i.__boundDepthTexture!==t.depthTexture){let e=t.depthTexture;if(i.__depthDisposeCallback&&i.__depthDisposeCallback(),e){let t=()=>{delete i.__boundDepthTexture,delete i.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),i.__depthDisposeCallback=t}i.__boundDepthTexture=e}if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!(i.depthTexture&&i.depthTexture.isDepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let a=r.get(i.depthTexture);a.__renderTarget=i,(!a.__webglTexture||i.depthTexture.image.width!==i.width||i.depthTexture.image.height!==i.height)&&(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),P(i.depthTexture,0);let s=a.__webglTexture,u=V(i);if(i.depthTexture.format===n3)W(i)?c.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0,u):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0);else if(i.depthTexture.format===n5)W(i)?c.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0,u):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0);else throw Error("Unknown depthTexture format")}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)if(n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),void 0===i.__webglDepthbuffer[r])i.__webglDepthbuffer[r]=e.createRenderbuffer(),z(i.__webglDepthbuffer[r],t,!1);else{let n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,a=i.__webglDepthbuffer[r];e.bindRenderbuffer(e.RENDERBUFFER,a),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,a)}}else if(n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),void 0===i.__webglDepthbuffer)i.__webglDepthbuffer=e.createRenderbuffer(),z(i.__webglDepthbuffer,t,!1);else{let n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,r=i.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,r)}n.bindFramebuffer(e.FRAMEBUFFER,null)}let H=[],G=[];function V(e){return Math.min(i.maxSamples,e.samples)}function W(e){let n=r.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function j(e,t){let n=e.colorSpace,r=e.format,i=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture?t:(n!==r1&&n!==r$&&i1.getTransfer(n),t)}function X(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?(p.width=e.naturalWidth||e.width,p.height=e.naturalHeight||e.height):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?(p.width=e.displayWidth,p.height=e.displayHeight):(p.width=e.width,p.height=e.height),p}this.allocateTextureUnit=function(){let e=D;return i.maxTextures,D+=1,e},this.resetTextureUnits=function(){D=0},this.setTexture2D=P,this.setTexture2DArray=function(t,i){let a=r.get(t);if(t.version>0&&a.__version!==t.version){N(a,t,i);return}n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){let a=r.get(t);if(t.version>0&&a.__version!==t.version){N(a,t,i);return}n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,s){let u=r.get(t);if(t.version>0&&u.__version!==t.version){(function(t,s,u){if(6!==s.image.length)return;let c=B(t,s),h=s.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+u);let p=r.get(h);if(h.version!==p.__version||!0===c){let t;n.activeTexture(e.TEXTURE0+u);let r=i1.getPrimaries(i1.workingColorSpace),f=s.colorSpace===r$?null:i1.getPrimaries(s.colorSpace),v=s.colorSpace===r$||r===f?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,v);let y=s.isCompressedTexture||s.image[0].isCompressedTexture,_=s.image[0]&&s.image[0].isDataTexture,M=[];for(let e=0;e<6;e++)y||_?M[e]=_?s.image[e].image:s.image[e]:M[e]=x(s.image[e],!0,i.maxCubemapSize),M[e]=j(s,M[e]);let C=M[0],T=a.convert(s.format,s.colorSpace),I=a.convert(s.type),D=w(s.internalFormat,T,I,s.colorSpace),P=!0!==s.isVideoTexture,R=void 0===p.__version||!0===c,L=h.dataReady,O=A(s,C);if(k(e.TEXTURE_CUBE_MAP,s),y){P&&R&&n.texStorage2D(e.TEXTURE_CUBE_MAP,O,D,C.width,C.height);for(let r=0;r<6;r++){t=M[r].mipmaps;for(let i=0;i<t.length;i++){let a=t[i];s.format!==n0?null!==T&&(P?L&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i,0,0,a.width,a.height,T,a.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i,D,a.width,a.height,0,a.data)):P?L&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i,0,0,a.width,a.height,T,I,a.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i,D,a.width,a.height,0,T,I,a.data)}}}else{if(t=s.mipmaps,P&&R){t.length>0&&O++;let r=X(M[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,O,D,r.width,r.height)}for(let r=0;r<6;r++)if(_){P?L&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,0,0,M[r].width,M[r].height,T,I,M[r].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,D,M[r].width,M[r].height,0,T,I,M[r].data);for(let i=0;i<t.length;i++){let a=t[i].image[r].image;P?L&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,0,0,a.width,a.height,T,I,a.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,D,a.width,a.height,0,T,I,a.data)}}else{P?L&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,0,0,T,I,M[r]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,D,T,I,M[r]);for(let i=0;i<t.length;i++){let a=t[i];P?L&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,0,0,T,I,a.image[r]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,D,T,I,a.image[r])}}}b(s)&&S(e.TEXTURE_CUBE_MAP),p.__version=h.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version})(u,t,s);return}n.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture,e.TEXTURE0+s)},this.rebindTextures=function(t,n,i){let a=r.get(t);void 0!==n&&F(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&U(t)},this.setupRenderTarget=function(t){let i=t.texture,u=r.get(t),c=r.get(i);t.addEventListener("dispose",T);let h=t.textures,p=!0===t.isWebGLCubeRenderTarget,f=h.length>1;if(!f&&(void 0===c.__webglTexture&&(c.__webglTexture=e.createTexture()),c.__version=i.version,s.memory.textures++),p){u.__webglFramebuffer=[];for(let t=0;t<6;t++)if(i.mipmaps&&i.mipmaps.length>0){u.__webglFramebuffer[t]=[];for(let n=0;n<i.mipmaps.length;n++)u.__webglFramebuffer[t][n]=e.createFramebuffer()}else u.__webglFramebuffer[t]=e.createFramebuffer()}else{if(i.mipmaps&&i.mipmaps.length>0){u.__webglFramebuffer=[];for(let t=0;t<i.mipmaps.length;t++)u.__webglFramebuffer[t]=e.createFramebuffer()}else u.__webglFramebuffer=e.createFramebuffer();if(f)for(let t=0,n=h.length;t<n;t++){let n=r.get(h[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),s.memory.textures++)}if(t.samples>0&&!1===W(t)){u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer);for(let n=0;n<h.length;n++){let r=h[n];u.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,u.__webglColorRenderbuffer[n]);let i=a.convert(r.format,r.colorSpace),s=a.convert(r.type),c=w(r.internalFormat,i,s,r.colorSpace,!0===t.isXRRenderTarget),p=V(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,p,c,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,u.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),z(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(p){n.bindTexture(e.TEXTURE_CUBE_MAP,c.__webglTexture),k(e.TEXTURE_CUBE_MAP,i);for(let n=0;n<6;n++)if(i.mipmaps&&i.mipmaps.length>0)for(let r=0;r<i.mipmaps.length;r++)F(u.__webglFramebuffer[n][r],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else F(u.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);b(i)&&S(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(f){for(let i=0,a=h.length;i<a;i++){let a=h[i],s=r.get(a);n.bindTexture(e.TEXTURE_2D,s.__webglTexture),k(e.TEXTURE_2D,a),F(u.__webglFramebuffer,t,a,e.COLOR_ATTACHMENT0+i,e.TEXTURE_2D,0),b(a)&&S(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(r,c.__webglTexture),k(r,i),i.mipmaps&&i.mipmaps.length>0)for(let n=0;n<i.mipmaps.length;n++)F(u.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,r,n);else F(u.__webglFramebuffer,t,i,e.COLOR_ATTACHMENT0,r,0);b(i)&&S(r),n.unbindTexture()}t.depthBuffer&&U(t)},this.updateRenderTargetMipmap=function(t){let i=t.textures;for(let s=0,u=i.length;s<u;s++){let u=i[s];if(b(u)){var a;let i=(a=t).isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:a.isWebGL3DRenderTarget?e.TEXTURE_3D:a.isWebGLArrayRenderTarget||a.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D,s=r.get(u).__webglTexture;n.bindTexture(i,s),S(i),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0){if(!1===W(t)){let i=t.textures,a=t.width,s=t.height,u=e.COLOR_BUFFER_BIT,c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,p=r.get(t),f=i.length>1;if(f)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,p.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,p.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,p.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,p.__webglFramebuffer);for(let n=0;n<i.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(u|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(u|=e.STENCIL_BUFFER_BIT)),f){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,p.__webglColorRenderbuffer[n]);let t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,s,0,0,a,s,u,e.NEAREST),!0===h&&(H.length=0,G.length=0,H.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(H.push(c),G.push(c),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,G)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,H))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),f)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,p.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,p.__webglColorRenderbuffer[t]);let a=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,p.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,p.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&h){let n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}}},this.setupDepthRenderbuffer=U,this.setupFrameBufferTexture=F,this.useMultisampledRTT=W}function uO(e,t){return{convert:function(n,r=r$){let i;let a=i1.getTransfer(r);if(n===nU)return e.UNSIGNED_BYTE;if(n===nJ)return e.UNSIGNED_SHORT_4_4_4_4;if(n===nZ)return e.UNSIGNED_SHORT_5_5_5_1;if(n===nK)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===nH)return e.BYTE;if(n===nG)return e.SHORT;if(n===nV)return e.UNSIGNED_SHORT;if(n===nW)return e.INT;if(n===nj)return e.UNSIGNED_INT;if(n===nX)return e.FLOAT;if(n===nY)return e.HALF_FLOAT;if(n===nQ)return e.ALPHA;if(n===n$)return e.RGB;if(n===n0)return e.RGBA;if(n===n1)return e.LUMINANCE;if(n===n2)return e.LUMINANCE_ALPHA;if(n===n3)return e.DEPTH_COMPONENT;if(n===n5)return e.DEPTH_STENCIL;if(n===n4)return e.RED;if(n===n6)return e.RED_INTEGER;if(n===n9)return e.RG;if(n===n8)return e.RG_INTEGER;if(n===re)return e.RGBA_INTEGER;if(n===rt||n===rn||n===rr||n===ri){if(a===r3){if(null===(i=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===rt)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===rn)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===rr)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===ri)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(i=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===rt)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===rn)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===rr)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===ri)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}}if(n===ra||n===ro||n===rs||n===rl){if(null===(i=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===ra)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===ro)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===rs)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===rl)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===ru||n===rc||n===rh){if(null===(i=t.get("WEBGL_compressed_texture_etc")))return null;if(n===ru||n===rc)return a===r3?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(n===rh)return a===r3?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(n===rd||n===rp||n===rf||n===rg||n===rm||n===rv||n===ry||n===r_||n===rx||n===rb||n===rS||n===rw||n===rM||n===rA){if(null===(i=t.get("WEBGL_compressed_texture_astc")))return null;if(n===rd)return a===r3?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===rp)return a===r3?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===rf)return a===r3?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===rg)return a===r3?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===rm)return a===r3?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===rv)return a===r3?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===ry)return a===r3?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===r_)return a===r3?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===rx)return a===r3?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===rb)return a===r3?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===rS)return a===r3?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===rw)return a===r3?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===rM)return a===r3?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===rA)return a===r3?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===rC||n===rT||n===rE){if(null===(i=t.get("EXT_texture_compression_bptc")))return null;if(n===rC)return a===r3?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===rT)return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===rE)return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===rI||n===rD||n===rP||n===rR){if(null===(i=t.get("EXT_texture_compression_rgtc")))return null;if(n===rC)return i.COMPRESSED_RED_RGTC1_EXT;if(n===rD)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===rP)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===rR)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===nq?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}class uk extends sp{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class uB extends oo{constructor(){super(),this.isGroup=!0,this.type="Group"}}let uN={type:"move"};class uF{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new uB,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new uB,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ap,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ap),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new uB,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ap,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ap),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,a=null,s=this._targetRay,u=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){for(let r of(a=!0,e.hand.values())){let e=t.getJointPose(r,n),i=this._getHandJoint(c,r);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}let r=c.joints["index-finger-tip"],i=c.joints["thumb-tip"],s=r.position.distanceTo(i.position);c.inputState.pinching&&s>.025?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&s<=.015&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==u&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(u.matrix.fromArray(i.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,i.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(i.linearVelocity)):u.hasLinearVelocity=!1,i.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(i.angularVelocity)):u.hasAngularVelocity=!1);null!==s&&(null===(r=t.getPose(e.targetRaySpace,n))&&null!==i&&(r=i),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(uN)))}return null!==s&&(s.visible=null!==r),null!==u&&(u.visible=null!==i),null!==c&&(c.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){let n=new uB;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}let uz=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,uU=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class uH{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(null===this.texture){let r=new ai;e.properties.get(r).__webglTexture=t.texture,(t.depthNear!=n.depthNear||t.depthFar!=n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){let t=e.cameras[0].viewport,n=new sl({vertexShader:uz,fragmentShader:uU,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new st(new sC(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class uG extends iL{constructor(e,t){super();let n=this,r=null,i=1,a=null,s="local-floor",u=1,c=null,h=null,p=null,f=null,v=null,y=null,_=new uH,x=t.getContextAttributes(),b=null,S=null,w=[],M=[],A=new ij,C=null,T=new sp;T.viewport=new aa;let I=new sp;I.viewport=new aa;let D=[T,I],P=new uk,R=null,L=null;function O(e){let t=M.indexOf(e.inputSource);if(-1===t)return;let n=w[t];void 0!==n&&(n.update(e.inputSource,e.frame,c||a),n.dispatchEvent({type:e.type,data:e.inputSource}))}function k(){r.removeEventListener("select",O),r.removeEventListener("selectstart",O),r.removeEventListener("selectend",O),r.removeEventListener("squeeze",O),r.removeEventListener("squeezestart",O),r.removeEventListener("squeezeend",O),r.removeEventListener("end",k),r.removeEventListener("inputsourceschange",B);for(let e=0;e<w.length;e++){let t=M[e];null!==t&&(M[e]=null,w[e].disconnect(t))}R=null,L=null,_.reset(),e.setRenderTarget(b),v=null,f=null,p=null,r=null,S=null,H.stop(),n.isPresenting=!1,e.setPixelRatio(C),e.setSize(A.width,A.height,!1),n.dispatchEvent({type:"sessionend"})}function B(e){for(let t=0;t<e.removed.length;t++){let n=e.removed[t],r=M.indexOf(n);r>=0&&(M[r]=null,w[r].disconnect(n))}for(let t=0;t<e.added.length;t++){let n=e.added[t],r=M.indexOf(n);if(-1===r){for(let e=0;e<w.length;e++){if(e>=M.length){M.push(n),r=e;break}if(null===M[e]){M[e]=n,r=e;break}}if(-1===r)break}let i=w[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=w[e];return void 0===t&&(t=new uF,w[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=w[e];return void 0===t&&(t=new uF,w[e]=t),t.getGripSpace()},this.getHand=function(e){let t=w[e];return void 0===t&&(t=new uF,w[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,n.isPresenting},this.setReferenceSpaceType=function(e){s=e,n.isPresenting},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(e){c=e},this.getBaseLayer=function(){return null!==f?f:v},this.getBinding=function(){return p},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(h){if(null!==(r=h)){if(b=e.getRenderTarget(),r.addEventListener("select",O),r.addEventListener("selectstart",O),r.addEventListener("selectend",O),r.addEventListener("squeeze",O),r.addEventListener("squeezestart",O),r.addEventListener("squeezeend",O),r.addEventListener("end",k),r.addEventListener("inputsourceschange",B),!0!==x.xrCompatible&&await t.makeXRCompatible(),C=e.getPixelRatio(),e.getSize(A),void 0===r.renderState.layers){let n={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:i};v=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),S=new as(v.framebufferWidth,v.framebufferHeight,{format:n0,type:nU,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let n=null,a=null,s=null;x.depth&&(s=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=x.stencil?n5:n3,a=x.stencil?nq:nj);let u={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:i};f=(p=new XRWebGLBinding(r,t)).createProjectionLayer(u),r.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),S=new as(f.textureWidth,f.textureHeight,{format:n0,type:nU,depthTexture:new s7(f.textureWidth,f.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:!1===f.ignoreDepthValues})}S.isXRRenderTarget=!0,this.setFoveation(u),c=null,a=await r.requestReferenceSpace(s),H.setContext(r),H.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return _.getDepthTexture()};let N=new ap,F=new ap;function z(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;let t=e.near,n=e.far;null!==_.texture&&(_.depthNear>0&&(t=_.depthNear),_.depthFar>0&&(n=_.depthFar)),P.near=I.near=T.near=t,P.far=I.far=T.far=n,(R!==P.near||L!==P.far)&&(r.updateRenderState({depthNear:P.near,depthFar:P.far}),R=P.near,L=P.far),T.layers.mask=2|e.layers.mask,I.layers.mask=4|e.layers.mask,P.layers.mask=T.layers.mask|I.layers.mask;let i=e.parent,a=P.cameras;z(P,i);for(let e=0;e<a.length;e++)z(a[e],i);2===a.length?!function(e,t,n){N.setFromMatrixPosition(t.matrixWorld),F.setFromMatrixPosition(n.matrixWorld);let r=N.distanceTo(F),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,s=i[14]/(i[10]-1),u=i[14]/(i[10]+1),c=(i[9]+1)/i[5],h=(i[9]-1)/i[5],p=(i[8]-1)/i[0],f=(a[8]+1)/a[0],v=r/(-p+f),y=-(v*p);if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(y),e.translateZ(v),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===i[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{let t=s+v,n=u+v;e.projectionMatrix.makePerspective(s*p-y,s*f+(r-y),c*u/n*t,h*u/n*t,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(P,T,I):P.projectionMatrix.copy(T.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld)),e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*iN*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,P,i)};this.getCamera=function(){return P},this.getFoveation=function(){if(null!==f||null!==v)return u},this.setFoveation=function(e){u=e,null!==f&&(f.fixedFoveation=e),null!==v&&void 0!==v.fixedFoveation&&(v.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==_.texture},this.getDepthSensingMesh=function(){return _.getMesh(P)};let U=null,H=new sM;H.setAnimationLoop(function(t,i){if(h=i.getViewerPose(c||a),y=i,null!==h){let t=h.views;null!==v&&(e.setRenderTargetFramebuffer(S,v.framebuffer),e.setRenderTarget(S));let n=!1;t.length!==P.cameras.length&&(P.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){let i=t[r],a=null;if(null!==v)a=v.getViewport(i);else{let t=p.getViewSubImage(f,i);a=t.viewport,0===r&&(e.setRenderTargetTextures(S,t.colorTexture,f.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(S))}let s=D[r];void 0===s&&((s=new sp).layers.enable(r),s.viewport=new aa,D[r]=s),s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(i.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(a.x,a.y,a.width,a.height),0===r&&(P.matrix.copy(s.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),!0===n&&P.cameras.push(s)}let i=r.enabledFeatures;if(i&&i.includes("depth-sensing")){let n=p.getDepthInformation(t[0]);n&&n.isValid&&n.texture&&_.init(e,n,r.renderState)}}for(let e=0;e<w.length;e++){let t=M[e],n=w[e];null!==t&&void 0!==n&&n.update(t,i,c||a)}U&&U(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),y=null}),this.setAnimationLoop=function(e){U=e},this.dispose=function(){}}}let uV=new a$,uW=new aV;function uj(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(e,r){e.opacity.value=r.opacity,r.color&&e.diffuse.value.copy(r.color),r.emissive&&e.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(e.map.value=r.map,n(r.map,e.mapTransform)),r.alphaMap&&(e.alphaMap.value=r.alphaMap,n(r.alphaMap,e.alphaMapTransform)),r.bumpMap&&(e.bumpMap.value=r.bumpMap,n(r.bumpMap,e.bumpMapTransform),e.bumpScale.value=r.bumpScale,r.side===tB&&(e.bumpScale.value*=-1)),r.normalMap&&(e.normalMap.value=r.normalMap,n(r.normalMap,e.normalMapTransform),e.normalScale.value.copy(r.normalScale),r.side===tB&&e.normalScale.value.negate()),r.displacementMap&&(e.displacementMap.value=r.displacementMap,n(r.displacementMap,e.displacementMapTransform),e.displacementScale.value=r.displacementScale,e.displacementBias.value=r.displacementBias),r.emissiveMap&&(e.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,e.emissiveMapTransform)),r.specularMap&&(e.specularMap.value=r.specularMap,n(r.specularMap,e.specularMapTransform)),r.alphaTest>0&&(e.alphaTest.value=r.alphaTest);let i=t.get(r),a=i.envMap,s=i.envMapRotation;a&&(e.envMap.value=a,uV.copy(s),uV.x*=-1,uV.y*=-1,uV.z*=-1,a.isCubeTexture&&!1===a.isRenderTargetTexture&&(uV.y*=-1,uV.z*=-1),e.envMapRotation.value.setFromMatrix4(uW.makeRotationFromEuler(uV)),e.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,e.reflectivity.value=r.reflectivity,e.ior.value=r.ior,e.refractionRatio.value=r.refractionRatio),r.lightMap&&(e.lightMap.value=r.lightMap,e.lightMapIntensity.value=r.lightMapIntensity,n(r.lightMap,e.lightMapTransform)),r.aoMap&&(e.aoMap.value=r.aoMap,e.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,so(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,a,s,u){i.isMeshBasicMaterial?r(e,i):i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform)),e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform)),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform))),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===tB&&e.clearcoatNormalScale.value.negate())),t.dispersion>0&&(e.dispersion.value=t.dispersion),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform))),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform)),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,u)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){let r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,a,s):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function uX(e,t,n,r){let i={},a={},s=[],u=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function c(e){let t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture,t}function h(t){let n=t.target;n.removeEventListener("dispose",h);let r=s.indexOf(n.__bindingPointIndex);s.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){let n=t.program;r.uniformBlockBinding(e,n)},update:function(n,p){let f=i[n.id];void 0===f&&(function(e){let t=e.uniforms,n=0;for(let e=0,r=t.length;e<r;e++){let r=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0,t=r.length;e<t;e++){let t=r[e],i=Array.isArray(t.value)?t.value:[t.value];for(let e=0,r=i.length;e<r;e++){let r=c(i[e]),a=n%16,s=a%r.boundary,u=a+s;n+=s,0!==u&&16-u<r.storage&&(n+=16-u),t.__data=new Float32Array(r.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,n+=r.storage}}}let r=n%16;r>0&&(n+=16-r),e.__size=n,e.__cache={},this}(n),f=function(t){let n=function(){for(let e=0;e<u;e++)if(-1===s.indexOf(e))return s.push(e),e;return 0}();t.__bindingPointIndex=n;let r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=f,n.addEventListener("dispose",h));let v=p.program;r.updateUBOMapping(n,v);let y=t.render.frame;a[n.id]!==y&&(function(t){let n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=r.length;t<n;t++){let n=Array.isArray(r[t])?r[t]:[r[t]];for(let r=0,i=n.length;r<i;r++){let i=n[r];if(!0===function(e,t,n,r){let i=e.value,a=t+"_"+n;if(void 0===r[a])return"number"==typeof i||"boolean"==typeof i?r[a]=i:r[a]=i.clone(),!0;{let e=r[a];if("number"==typeof i||"boolean"==typeof i){if(e!==i)return r[a]=i,!0}else if(!1===e.equals(i))return e.copy(i),!0}return!1}(i,t,r,a)){let t=i.__offset,n=Array.isArray(i.value)?i.value:[i.value],r=0;for(let a=0;a<n.length;a++){let s=n[a],u=c(s);"number"==typeof s||"boolean"==typeof s?(i.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,t+r,i.__data)):s.isMatrix3?(i.__data[0]=s.elements[0],i.__data[1]=s.elements[1],i.__data[2]=s.elements[2],i.__data[3]=0,i.__data[4]=s.elements[3],i.__data[5]=s.elements[4],i.__data[6]=s.elements[5],i.__data[7]=0,i.__data[8]=s.elements[6],i.__data[9]=s.elements[7],i.__data[10]=s.elements[8],i.__data[11]=0):(s.toArray(i.__data,r),r+=u.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,i.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=y)},dispose:function(){for(let t in i)e.deleteBuffer(i[t]);s=[],i={},a={}}}}class uY{constructor(e={}){let t,n,r,i,a,s,u,c,h,p,f,v,y,_,x,b,S,w,M,A,C,T,I,D,P;let{canvas:R=iQ(),context:L=null,depth:O=!0,stencil:k=!1,alpha:B=!1,antialias:N=!1,premultipliedAlpha:F=!0,preserveDrawingBuffer:z=!1,powerPreference:U="default",failIfMajorPerformanceCaveat:H=!1,reverseDepthBuffer:G=!1}=e;if(this.isWebGLRenderer=!0,null!==L){if("undefined"!=typeof WebGLRenderingContext&&L instanceof WebGLRenderingContext)throw Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");t=L.getContextAttributes().alpha}else t=B;let V=new Uint32Array(4),W=new Int32Array(4),j=null,X=null,Y=[],J=[];this.domElement=R,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=r0,this.toneMapping=nh,this.toneMappingExposure=1;let Z=this,q=!1,K=0,Q=0,$=null,ee=-1,et=null,en=new aa,er=new aa,ei=null,ea=new oA(0),eo=0,es=R.width,el=R.height,eu=1,ec=null,eh=null,ed=new aa(0,0,es,el),ep=new aa(0,0,es,el),ef=!1,eg=new sw,em=!1,ev=!1,ey=new aV,e_=new aV,ex=new ap,eb=new aa,eS={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},ew=!1;function eM(){return null===$?eu:1}let eA=L;function eC(e,t){return R.getContext(e,t)}try{if("setAttribute"in R&&R.setAttribute("data-engine",`three.js r${tM}`),R.addEventListener("webglcontextlost",eI,!1),R.addEventListener("webglcontextrestored",eD,!1),R.addEventListener("webglcontextcreationerror",eP,!1),null===eA){let e="webgl2";if(eA=eC(e,{alpha:!0,depth:O,stencil:k,antialias:N,premultipliedAlpha:F,preserveDrawingBuffer:z,powerPreference:U,failIfMajorPerformanceCaveat:H}),null===eA){if(eC(e))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}}}catch(e){throw e}function eT(){(n=new s3(eA)).init(),I=new uO(eA,n),r=new sB(eA,n,e,I),i=new uD(eA,n),r.reverseDepthBuffer&&G&&i.buffers.depth.setReversed(!0),a=new s6(eA),s=new ug,u=new uL(eA,n,i,s,r,I,a),c=new sF(Z),h=new s2(Z),p=new sA(eA),D=new sO(eA,p),f=new s5(eA,p,a,D),v=new s8(eA,f,p,a),A=new s9(eA,r,u),S=new sN(s),y=new uf(Z,c,h,n,r,D,S),_=new uj(Z,s),x=new u_,b=new uA(n),M=new sL(Z,c,h,i,v,t,F),w=new uE(Z,v,r),P=new uX(eA,a,r,i),C=new sk(eA,n,a),T=new s4(eA,n,a),a.programs=y.programs,Z.capabilities=r,Z.extensions=n,Z.properties=s,Z.renderLists=x,Z.shadowMap=w,Z.state=i,Z.info=a}eT();let eE=new uG(Z,eA);function eI(e){e.preventDefault(),q=!0}function eD(){q=!1;let e=a.autoReset,t=w.enabled,n=w.autoUpdate,r=w.needsUpdate,i=w.type;eT(),a.autoReset=e,w.enabled=t,w.autoUpdate=n,w.needsUpdate=r,w.type=i}function eP(e){}function eR(e){let t=e.target;t.removeEventListener("dispose",eR),function(e){(function(e){let t=s.get(e).programs;void 0!==t&&(t.forEach(function(e){y.releaseProgram(e)}),e.isShaderMaterial&&y.releaseShaderCache(e))})(e),s.remove(e)}(t)}this.xr=eE,this.getContext=function(){return eA},this.getContextAttributes=function(){return eA.getContextAttributes()},this.forceContextLoss=function(){let e=n.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){let e=n.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return eu},this.setPixelRatio=function(e){void 0!==e&&(eu=e,this.setSize(es,el,!1))},this.getSize=function(e){return e.set(es,el)},this.setSize=function(e,t,n=!0){if(!eE.isPresenting)es=e,el=t,R.width=Math.floor(e*eu),R.height=Math.floor(t*eu),!0===n&&(R.style.width=e+"px",R.style.height=t+"px"),this.setViewport(0,0,e,t)},this.getDrawingBufferSize=function(e){return e.set(es*eu,el*eu).floor()},this.setDrawingBufferSize=function(e,t,n){es=e,el=t,eu=n,R.width=Math.floor(e*n),R.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(en)},this.getViewport=function(e){return e.copy(ed)},this.setViewport=function(e,t,n,r){e.isVector4?ed.set(e.x,e.y,e.z,e.w):ed.set(e,t,n,r),i.viewport(en.copy(ed).multiplyScalar(eu).round())},this.getScissor=function(e){return e.copy(ep)},this.setScissor=function(e,t,n,r){e.isVector4?ep.set(e.x,e.y,e.z,e.w):ep.set(e,t,n,r),i.scissor(er.copy(ep).multiplyScalar(eu).round())},this.getScissorTest=function(){return ef},this.setScissorTest=function(e){i.setScissorTest(ef=e)},this.setOpaqueSort=function(e){ec=e},this.setTransparentSort=function(e){eh=e},this.getClearColor=function(e){return e.copy(M.getClearColor())},this.setClearColor=function(){M.setClearColor.apply(M,arguments)},this.getClearAlpha=function(){return M.getClearAlpha()},this.setClearAlpha=function(){M.setClearAlpha.apply(M,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;if(e){let e=!1;if(null!==$){let t=$.texture.format;e=t===re||t===n8||t===n6}if(e){let e=$.texture.type,t=e===nU||e===nj||e===nV||e===nq||e===nJ||e===nZ,n=M.getClearColor(),r=M.getClearAlpha(),i=n.r,a=n.g,s=n.b;t?(V[0]=i,V[1]=a,V[2]=s,V[3]=r,eA.clearBufferuiv(eA.COLOR,0,V)):(W[0]=i,W[1]=a,W[2]=s,W[3]=r,eA.clearBufferiv(eA.COLOR,0,W))}else r|=eA.COLOR_BUFFER_BIT}t&&(r|=eA.DEPTH_BUFFER_BIT),n&&(r|=eA.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(0xffffffff)),eA.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){R.removeEventListener("webglcontextlost",eI,!1),R.removeEventListener("webglcontextrestored",eD,!1),R.removeEventListener("webglcontextcreationerror",eP,!1),x.dispose(),b.dispose(),s.dispose(),c.dispose(),h.dispose(),v.dispose(),D.dispose(),P.dispose(),y.dispose(),eE.dispose(),eE.removeEventListener("sessionstart",ek),eE.removeEventListener("sessionend",eB),eN.stop()};function eL(e,t,n){!0===e.transparent&&e.side===tN&&!1===e.forceSinglePass?(e.side=tB,e.needsUpdate=!0,eV(e,t,n),e.side=tk,e.needsUpdate=!0,eV(e,t,n),e.side=tN):eV(e,t,n)}this.renderBufferDirect=function(e,t,a,v,y,x){let b;null===t&&(t=eS);let w=y.isMesh&&0>y.matrixWorld.determinant(),M=function(e,t,n,a,p){!0!==t.isScene&&(t=eS),u.resetTextureUnits();let f=t.fog,v=a.isMeshStandardMaterial?t.environment:null,y=null===$?Z.outputColorSpace:!0===$.isXRRenderTarget?$.texture.colorSpace:r1,x=(a.isMeshStandardMaterial?h:c).get(a.envMap||v),b=!0===a.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,w=!!n.attributes.tangent&&(!!a.normalMap||a.anisotropy>0),M=!!n.morphAttributes.position,C=!!n.morphAttributes.normal,T=!!n.morphAttributes.color,I=nh;a.toneMapped&&(null===$||!0===$.isXRRenderTarget)&&(I=Z.toneMapping);let D=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,R=void 0!==D?D.length:0,L=s.get(a),O=X.state.lights;if(!0===em&&(!0===ev||e!==et)){let t=e===et&&a.id===ee;S.setState(a,e,t)}let k=!1;a.version===L.__version?L.needsLights&&L.lightsStateVersion!==O.state.version?k=!0:L.outputColorSpace!==y?k=!0:p.isBatchedMesh&&!1===L.batching?k=!0:p.isBatchedMesh||!0!==L.batching?p.isBatchedMesh&&!0===L.batchingColor&&null===p.colorTexture?k=!0:p.isBatchedMesh&&!1===L.batchingColor&&null!==p.colorTexture?k=!0:p.isInstancedMesh&&!1===L.instancing?k=!0:p.isInstancedMesh||!0!==L.instancing?p.isSkinnedMesh&&!1===L.skinning?k=!0:p.isSkinnedMesh||!0!==L.skinning?p.isInstancedMesh&&!0===L.instancingColor&&null===p.instanceColor?k=!0:p.isInstancedMesh&&!1===L.instancingColor&&null!==p.instanceColor?k=!0:p.isInstancedMesh&&!0===L.instancingMorph&&null===p.morphTexture?k=!0:p.isInstancedMesh&&!1===L.instancingMorph&&null!==p.morphTexture?k=!0:L.envMap!==x?k=!0:!0===a.fog&&L.fog!==f?k=!0:void 0!==L.numClippingPlanes&&(L.numClippingPlanes!==S.numPlanes||L.numIntersection!==S.numIntersection)?k=!0:L.vertexAlphas!==b?k=!0:L.vertexTangents!==w?k=!0:L.morphTargets!==M?k=!0:L.morphNormals!==C?k=!0:L.morphColors!==T?k=!0:L.toneMapping!==I?k=!0:L.morphTargetsCount!==R&&(k=!0):k=!0:k=!0:k=!0:(k=!0,L.__version=a.version);let B=L.currentProgram;!0===k&&(B=eV(a,t,p));let N=!1,F=!1,z=!1,U=B.getUniforms(),H=L.uniforms;if(i.useProgram(B.program)&&(N=!0,F=!0,z=!0),a.id!==ee&&(ee=a.id,F=!0),N||et!==e){i.buffers.depth.getReversed()?(ey.copy(e.projectionMatrix),!function(e){let t=e.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}(ey),!function(e){let t=e.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}(ey),U.setValue(eA,"projectionMatrix",ey)):U.setValue(eA,"projectionMatrix",e.projectionMatrix),U.setValue(eA,"viewMatrix",e.matrixWorldInverse);let t=U.map.cameraPosition;void 0!==t&&t.setValue(eA,ex.setFromMatrixPosition(e.matrixWorld)),r.logarithmicDepthBuffer&&U.setValue(eA,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(a.isMeshPhongMaterial||a.isMeshToonMaterial||a.isMeshLambertMaterial||a.isMeshBasicMaterial||a.isMeshStandardMaterial||a.isShaderMaterial)&&U.setValue(eA,"isOrthographic",!0===e.isOrthographicCamera),et!==e&&(et=e,F=!0,z=!0)}if(p.isSkinnedMesh){U.setOptional(eA,p,"bindMatrix"),U.setOptional(eA,p,"bindMatrixInverse");let e=p.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),U.setValue(eA,"boneTexture",e.boneTexture,u))}p.isBatchedMesh&&(U.setOptional(eA,p,"batchingTexture"),U.setValue(eA,"batchingTexture",p._matricesTexture,u),U.setOptional(eA,p,"batchingIdTexture"),U.setValue(eA,"batchingIdTexture",p._indirectTexture,u),U.setOptional(eA,p,"batchingColorTexture"),null!==p._colorsTexture&&U.setValue(eA,"batchingColorTexture",p._colorsTexture,u));let G=n.morphAttributes;if((void 0!==G.position||void 0!==G.normal||void 0!==G.color)&&A.update(p,n,B),(F||L.receiveShadow!==p.receiveShadow)&&(L.receiveShadow=p.receiveShadow,U.setValue(eA,"receiveShadow",p.receiveShadow)),a.isMeshGouraudMaterial&&null!==a.envMap&&(H.envMap.value=x,H.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1),a.isMeshStandardMaterial&&null===a.envMap&&null!==t.environment&&(H.envMapIntensity.value=t.environmentIntensity),F&&(U.setValue(eA,"toneMappingExposure",Z.toneMappingExposure),L.needsLights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(H,z),f&&!0===a.fog&&_.refreshFogUniforms(H,f),_.refreshMaterialUniforms(H,a,eu,el,X.state.transmissionRenderTarget[e.id]),l3.upload(eA,eW(L),H,u)),a.isShaderMaterial&&!0===a.uniformsNeedUpdate&&(l3.upload(eA,eW(L),H,u),a.uniformsNeedUpdate=!1),a.isSpriteMaterial&&U.setValue(eA,"center",p.center),U.setValue(eA,"modelViewMatrix",p.modelViewMatrix),U.setValue(eA,"normalMatrix",p.normalMatrix),U.setValue(eA,"modelMatrix",p.matrixWorld),a.isShaderMaterial||a.isRawShaderMaterial){let e=a.uniformsGroups;for(let t=0,n=e.length;t<n;t++){let n=e[t];P.update(n,B),P.bind(n,B)}}return B}(e,t,a,v,y);i.setMaterial(v,w);let I=a.index,R=1;if(!0===v.wireframe){if(void 0===(I=f.getWireframeAttribute(a)))return;R=2}let L=a.drawRange,O=a.attributes.position,k=L.start*R,B=(L.start+L.count)*R;null!==x&&(k=Math.max(k,x.start*R),B=Math.min(B,(x.start+x.count)*R)),null!==I?(k=Math.max(k,0),B=Math.min(B,I.count)):null!=O&&(k=Math.max(k,0),B=Math.min(B,O.count));let N=B-k;if(N<0||N===1/0)return;D.setup(y,v,M,a,I);let F=C;if(null!==I&&(b=p.get(I),(F=T).setIndex(b)),y.isMesh)!0===v.wireframe?(i.setLineWidth(v.wireframeLinewidth*eM()),F.setMode(eA.LINES)):F.setMode(eA.TRIANGLES);else if(y.isLine){let e=v.linewidth;void 0===e&&(e=1),i.setLineWidth(e*eM()),y.isLineSegments?F.setMode(eA.LINES):y.isLineLoop?F.setMode(eA.LINE_LOOP):F.setMode(eA.LINE_STRIP)}else y.isPoints?F.setMode(eA.POINTS):y.isSprite&&F.setMode(eA.TRIANGLES);if(y.isBatchedMesh){if(null!==y._multiDrawInstances)F.renderMultiDrawInstances(y._multiDrawStarts,y._multiDrawCounts,y._multiDrawCount,y._multiDrawInstances);else if(n.get("WEBGL_multi_draw"))F.renderMultiDraw(y._multiDrawStarts,y._multiDrawCounts,y._multiDrawCount);else{let e=y._multiDrawStarts,t=y._multiDrawCounts,n=y._multiDrawCount,r=I?p.get(I).bytesPerElement:1,i=s.get(v).currentProgram.getUniforms();for(let a=0;a<n;a++)i.setValue(eA,"_gl_DrawID",a),F.render(e[a]/r,t[a])}}else if(y.isInstancedMesh)F.renderInstances(k,N,y.count);else if(a.isInstancedBufferGeometry){let e=void 0!==a._maxInstanceCount?a._maxInstanceCount:1/0,t=Math.min(a.instanceCount,e);F.renderInstances(k,N,t)}else F.render(k,N)},this.compile=function(e,t,n=null){null===n&&(n=e),(X=b.get(n)).init(t),J.push(X),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(X.pushLight(e),e.castShadow&&X.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(X.pushLight(e),e.castShadow&&X.pushShadow(e))}),X.setupLights();let r=new Set;return e.traverse(function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;let t=e.material;if(t){if(Array.isArray(t))for(let i=0;i<t.length;i++){let a=t[i];eL(a,n,e),r.add(a)}else eL(t,n,e),r.add(t)}}),J.pop(),X=null,r},this.compileAsync=function(e,t,r=null){let i=this.compile(e,t,r);return new Promise(t=>{function r(){if(i.forEach(function(e){s.get(e).currentProgram.isReady()&&i.delete(e)}),0===i.size){t(e);return}setTimeout(r,10)}null!==n.get("KHR_parallel_shader_compile")?r():setTimeout(r,10)})};let eO=null;function ek(){eN.stop()}function eB(){eN.start()}let eN=new sM;function eF(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers)){if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)X.pushLight(e),e.castShadow&&X.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||eg.intersectsSprite(e)){r&&eb.setFromMatrixPosition(e.matrixWorld).applyMatrix4(e_);let t=v.update(e),i=e.material;i.visible&&j.push(e,t,i,n,eb.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||eg.intersectsObject(e))){let t=v.update(e),i=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),eb.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),eb.copy(t.boundingSphere.center)),eb.applyMatrix4(e.matrixWorld).applyMatrix4(e_)),Array.isArray(i)){let r=t.groups;for(let a=0,s=r.length;a<s;a++){let s=r[a],u=i[s.materialIndex];u&&u.visible&&j.push(e,t,u,n,eb.z,s)}}else i.visible&&j.push(e,t,i,n,eb.z,null)}}let i=e.children;for(let e=0,a=i.length;e<a;e++)eF(i[e],t,n,r)}function ez(e,t,n,r){let a=e.opaque,s=e.transmissive,u=e.transparent;X.setupLightsView(n),!0===em&&S.setGlobalState(Z.clippingPlanes,n),r&&i.viewport(en.copy(r)),a.length>0&&eH(a,t,n),s.length>0&&eH(s,t,n),u.length>0&&eH(u,t,n),i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),i.setPolygonOffset(!1)}function eU(e,t,r,i){if(null!==(!0===r.isScene?r.overrideMaterial:null))return;void 0===X.state.transmissionRenderTarget[i.id]&&(X.state.transmissionRenderTarget[i.id]=new as(1,1,{generateMipmaps:!0,type:n.has("EXT_color_buffer_half_float")||n.has("EXT_color_buffer_float")?nY:nU,minFilter:nF,samples:4,stencilBuffer:k,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:i1.workingColorSpace}));let a=X.state.transmissionRenderTarget[i.id],s=i.viewport||en;a.setSize(s.z,s.w);let c=Z.getRenderTarget();Z.setRenderTarget(a),Z.getClearColor(ea),(eo=Z.getClearAlpha())<1&&Z.setClearColor(0xffffff,.5),Z.clear(),ew&&M.render(r);let h=Z.toneMapping;Z.toneMapping=nh;let p=i.viewport;if(void 0!==i.viewport&&(i.viewport=void 0),X.setupLightsView(i),!0===em&&S.setGlobalState(Z.clippingPlanes,i),eH(e,r,i),u.updateMultisampleRenderTarget(a),u.updateRenderTargetMipmap(a),!1===n.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let n=0,a=t.length;n<a;n++){let a=t[n],s=a.object,u=a.geometry,c=a.material,h=a.group;if(c.side===tN&&s.layers.test(i.layers)){let t=c.side;c.side=tB,c.needsUpdate=!0,eG(s,r,i,u,c,h),c.side=t,c.needsUpdate=!0,e=!0}}!0===e&&(u.updateMultisampleRenderTarget(a),u.updateRenderTargetMipmap(a))}Z.setRenderTarget(c),Z.setClearColor(ea,eo),void 0!==p&&(i.viewport=p),Z.toneMapping=h}function eH(e,t,n){let r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,a=e.length;i<a;i++){let a=e[i],s=a.object,u=a.geometry,c=null===r?a.material:r,h=a.group;s.layers.test(n.layers)&&eG(s,t,n,u,c,h)}}function eG(e,t,n,r,i,a){e.onBeforeRender(Z,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(Z,t,n,r,e,a),!0===i.transparent&&i.side===tN&&!1===i.forceSinglePass?(i.side=tB,i.needsUpdate=!0,Z.renderBufferDirect(n,t,r,i,e,a),i.side=tk,i.needsUpdate=!0,Z.renderBufferDirect(n,t,r,i,e,a),i.side=tN):Z.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(Z,t,n,r,i,a)}function eV(e,t,n){!0!==t.isScene&&(t=eS);let r=s.get(e),i=X.state.lights,a=X.state.shadowsArray,u=i.state.version,p=y.getParameters(e,i.state,a,t,n),f=y.getProgramCacheKey(p),v=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?h:c).get(e.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===v&&(e.addEventListener("dispose",eR),v=new Map,r.programs=v);let _=v.get(f);if(void 0!==_){if(r.currentProgram===_&&r.lightsStateVersion===u)return ej(e,p),_}else p.uniforms=y.getUniforms(e),e.onBeforeCompile(p,Z),_=y.acquireProgram(p,f),v.set(f,_),r.uniforms=p.uniforms;let x=r.uniforms;return(!e.isShaderMaterial&&!e.isRawShaderMaterial||!0===e.clipping)&&(x.clippingPlanes=S.uniform),ej(e,p),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=u,r.needsLights&&(x.ambientLightColor.value=i.state.ambient,x.lightProbe.value=i.state.probe,x.directionalLights.value=i.state.directional,x.directionalLightShadows.value=i.state.directionalShadow,x.spotLights.value=i.state.spot,x.spotLightShadows.value=i.state.spotShadow,x.rectAreaLights.value=i.state.rectArea,x.ltc_1.value=i.state.rectAreaLTC1,x.ltc_2.value=i.state.rectAreaLTC2,x.pointLights.value=i.state.point,x.pointLightShadows.value=i.state.pointShadow,x.hemisphereLights.value=i.state.hemi,x.directionalShadowMap.value=i.state.directionalShadowMap,x.directionalShadowMatrix.value=i.state.directionalShadowMatrix,x.spotShadowMap.value=i.state.spotShadowMap,x.spotLightMatrix.value=i.state.spotLightMatrix,x.spotLightMap.value=i.state.spotLightMap,x.pointShadowMap.value=i.state.pointShadowMap,x.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=_,r.uniformsList=null,_}function eW(e){if(null===e.uniformsList){let t=e.currentProgram.getUniforms();e.uniformsList=l3.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function ej(e,t){let n=s.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}eN.setAnimationLoop(function(e){eO&&eO(e)}),"undefined"!=typeof self&&eN.setContext(self),this.setAnimationLoop=function(e){eO=e,eE.setAnimationLoop(e),null===e?eN.stop():eN.start()},eE.addEventListener("sessionstart",ek),eE.addEventListener("sessionend",eB),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera||!0===q)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===eE.enabled&&!0===eE.isPresenting&&(!0===eE.cameraAutoUpdate&&eE.updateCamera(t),t=eE.getCamera()),!0===e.isScene&&e.onBeforeRender(Z,e,t,$),(X=b.get(e,J.length)).init(t),J.push(X),e_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),eg.setFromProjectionMatrix(e_),ev=this.localClippingEnabled,em=S.init(this.clippingPlanes,ev),(j=x.get(e,Y.length)).init(),Y.push(j),!0===eE.enabled&&!0===eE.isPresenting){let e=Z.xr.getDepthSensingMesh();null!==e&&eF(e,t,-1/0,Z.sortObjects)}eF(e,t,0,Z.sortObjects),j.finish(),!0===Z.sortObjects&&j.sort(ec,eh),(ew=!1===eE.enabled||!1===eE.isPresenting||!1===eE.hasDepthSensing())&&M.addToRenderList(j,e),this.info.render.frame++,!0===em&&S.beginShadows();let n=X.state.shadowsArray;w.render(n,e,t),!0===em&&S.endShadows(),!0===this.info.autoReset&&this.info.reset();let r=j.opaque,i=j.transmissive;if(X.setupLights(),t.isArrayCamera){let n=t.cameras;if(i.length>0)for(let t=0,a=n.length;t<a;t++)eU(r,i,e,n[t]);ew&&M.render(e);for(let t=0,r=n.length;t<r;t++){let r=n[t];ez(j,e,r,r.viewport)}}else i.length>0&&eU(r,i,e,t),ew&&M.render(e),ez(j,e,t);null!==$&&(u.updateMultisampleRenderTarget($),u.updateRenderTargetMipmap($)),!0===e.isScene&&e.onAfterRender(Z,e,t),D.resetDefaultState(),ee=-1,et=null,J.pop(),J.length>0?(X=J[J.length-1],!0===em&&S.setGlobalState(Z.clippingPlanes,X.state.camera)):X=null,Y.pop(),j=Y.length>0?Y[Y.length-1]:null};this.getActiveCubeFace=function(){return K},this.getActiveMipmapLevel=function(){return Q},this.getRenderTarget=function(){return $},this.setRenderTargetTextures=function(e,t,r){s.get(e.texture).__webglTexture=t,s.get(e.depthTexture).__webglTexture=r;let i=s.get(e);i.__hasExternalTextures=!0,i.__autoAllocateDepthBuffer=void 0===r,!i.__autoAllocateDepthBuffer&&!0===n.has("WEBGL_multisampled_render_to_texture")&&(i.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){let n=s.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){$=e,K=t,Q=n;let r=!0,a=null,c=!1,h=!1;if(e){let p=s.get(e);if(void 0!==p.__useDefaultFramebuffer)i.bindFramebuffer(eA.FRAMEBUFFER,null),r=!1;else if(void 0===p.__webglFramebuffer)u.setupRenderTarget(e);else if(p.__hasExternalTextures)u.rebindTextures(e,s.get(e.texture).__webglTexture,s.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){let t=e.depthTexture;if(p.__boundDepthTexture!==t){if(null!==t&&s.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");u.setupDepthRenderbuffer(e)}}let f=e.texture;(f.isData3DTexture||f.isDataArrayTexture||f.isCompressedArrayTexture)&&(h=!0);let v=s.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(a=Array.isArray(v[t])?v[t][n]:v[t],c=!0):a=e.samples>0&&!1===u.useMultisampledRTT(e)?s.get(e).__webglMultisampledFramebuffer:Array.isArray(v)?v[n]:v,en.copy(e.viewport),er.copy(e.scissor),ei=e.scissorTest}else en.copy(ed).multiplyScalar(eu).floor(),er.copy(ep).multiplyScalar(eu).floor(),ei=ef;if(i.bindFramebuffer(eA.FRAMEBUFFER,a)&&r&&i.drawBuffers(e,a),i.viewport(en),i.scissor(er),i.setScissorTest(ei),c){let r=s.get(e.texture);eA.framebufferTexture2D(eA.FRAMEBUFFER,eA.COLOR_ATTACHMENT0,eA.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(h){let r=s.get(e.texture);eA.framebufferTextureLayer(eA.FRAMEBUFFER,eA.COLOR_ATTACHMENT0,r.__webglTexture,n||0,t||0)}ee=-1},this.readRenderTargetPixels=function(e,t,n,a,u,c,h){if(!(e&&e.isWebGLRenderTarget))return;let p=s.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==h&&(p=p[h]),p){i.bindFramebuffer(eA.FRAMEBUFFER,p);try{let i=e.texture,s=i.format,h=i.type;if(!r.textureFormatReadable(s)||!r.textureTypeReadable(h))return;t>=0&&t<=e.width-a&&n>=0&&n<=e.height-u&&eA.readPixels(t,n,a,u,I.convert(s),I.convert(h),c)}finally{let e=null!==$?s.get($).__webglFramebuffer:null;i.bindFramebuffer(eA.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,a,u,c,h){if(!(e&&e.isWebGLRenderTarget))throw Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let p=s.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==h&&(p=p[h]),p){let h=e.texture,_=h.format,x=h.type;if(!r.textureFormatReadable(_))throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!r.textureTypeReadable(x))throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(t>=0&&t<=e.width-a&&n>=0&&n<=e.height-u){var f,v,y;i.bindFramebuffer(eA.FRAMEBUFFER,p);let e=eA.createBuffer();eA.bindBuffer(eA.PIXEL_PACK_BUFFER,e),eA.bufferData(eA.PIXEL_PACK_BUFFER,c.byteLength,eA.STREAM_READ),eA.readPixels(t,n,a,u,I.convert(_),I.convert(x),0);let r=null!==$?s.get($).__webglFramebuffer:null;i.bindFramebuffer(eA.FRAMEBUFFER,r);let h=eA.fenceSync(eA.SYNC_GPU_COMMANDS_COMPLETE,0);return eA.flush(),await (f=eA,v=h,y=4,new Promise(function(e,t){setTimeout(function n(){switch(f.clientWaitSync(v,f.SYNC_FLUSH_COMMANDS_BIT,0)){case f.WAIT_FAILED:t();break;case f.TIMEOUT_EXPIRED:setTimeout(n,4);break;default:e()}},y)})),eA.bindBuffer(eA.PIXEL_PACK_BUFFER,e),eA.getBufferSubData(eA.PIXEL_PACK_BUFFER,0,c),eA.deleteBuffer(e),eA.deleteSync(h),c}throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e,t=null,n=0){!0!==e.isTexture&&(i0("WebGLRenderer: copyFramebufferToTexture function signature has changed."),t=arguments[0]||null,e=arguments[1]);let r=Math.pow(2,-n),a=Math.floor(e.image.width*r),s=Math.floor(e.image.height*r),c=null!==t?t.x:0,h=null!==t?t.y:0;u.setTexture2D(e,0),eA.copyTexSubImage2D(eA.TEXTURE_2D,n,0,0,c,h,a,s),i.unbindTexture()},this.copyTextureToTexture=function(e,t,n=null,r=null,a=0){let c,h,p,f,v,y,_,x,b,S;!0!==e.isTexture&&(i0("WebGLRenderer: copyTextureToTexture function signature has changed."),r=arguments[0]||null,e=arguments[1],t=arguments[2],a=arguments[3]||0,n=null);let w=e.isCompressedTexture?e.mipmaps[a]:e.image;null!==n?(c=n.max.x-n.min.x,h=n.max.y-n.min.y,p=n.isBox3?n.max.z-n.min.z:1,f=n.min.x,v=n.min.y,y=n.isBox3?n.min.z:0):(c=w.width,h=w.height,p=w.depth||1,f=0,v=0,y=0),null!==r?(_=r.x,x=r.y,b=r.z):(_=0,x=0,b=0);let M=I.convert(t.format),A=I.convert(t.type);t.isData3DTexture?(u.setTexture3D(t,0),S=eA.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(u.setTexture2DArray(t,0),S=eA.TEXTURE_2D_ARRAY):(u.setTexture2D(t,0),S=eA.TEXTURE_2D),eA.pixelStorei(eA.UNPACK_FLIP_Y_WEBGL,t.flipY),eA.pixelStorei(eA.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),eA.pixelStorei(eA.UNPACK_ALIGNMENT,t.unpackAlignment);let C=eA.getParameter(eA.UNPACK_ROW_LENGTH),T=eA.getParameter(eA.UNPACK_IMAGE_HEIGHT),D=eA.getParameter(eA.UNPACK_SKIP_PIXELS),P=eA.getParameter(eA.UNPACK_SKIP_ROWS),R=eA.getParameter(eA.UNPACK_SKIP_IMAGES);eA.pixelStorei(eA.UNPACK_ROW_LENGTH,w.width),eA.pixelStorei(eA.UNPACK_IMAGE_HEIGHT,w.height),eA.pixelStorei(eA.UNPACK_SKIP_PIXELS,f),eA.pixelStorei(eA.UNPACK_SKIP_ROWS,v),eA.pixelStorei(eA.UNPACK_SKIP_IMAGES,y);let L=e.isDataArrayTexture||e.isData3DTexture,O=t.isDataArrayTexture||t.isData3DTexture;if(e.isRenderTargetTexture||e.isDepthTexture){let n=s.get(e),r=s.get(t),u=s.get(n.__renderTarget),w=s.get(r.__renderTarget);i.bindFramebuffer(eA.READ_FRAMEBUFFER,u.__webglFramebuffer),i.bindFramebuffer(eA.DRAW_FRAMEBUFFER,w.__webglFramebuffer);for(let n=0;n<p;n++)L&&eA.framebufferTextureLayer(eA.READ_FRAMEBUFFER,eA.COLOR_ATTACHMENT0,s.get(e).__webglTexture,a,y+n),e.isDepthTexture?(O&&eA.framebufferTextureLayer(eA.DRAW_FRAMEBUFFER,eA.COLOR_ATTACHMENT0,s.get(t).__webglTexture,a,b+n),eA.blitFramebuffer(f,v,c,h,_,x,c,h,eA.DEPTH_BUFFER_BIT,eA.NEAREST)):O?eA.copyTexSubImage3D(S,a,_,x,b+n,f,v,c,h):eA.copyTexSubImage2D(S,a,_,x,b+n,f,v,c,h);i.bindFramebuffer(eA.READ_FRAMEBUFFER,null),i.bindFramebuffer(eA.DRAW_FRAMEBUFFER,null)}else O?e.isDataTexture||e.isData3DTexture?eA.texSubImage3D(S,a,_,x,b,c,h,p,M,A,w.data):t.isCompressedArrayTexture?eA.compressedTexSubImage3D(S,a,_,x,b,c,h,p,M,w.data):eA.texSubImage3D(S,a,_,x,b,c,h,p,M,A,w):e.isDataTexture?eA.texSubImage2D(eA.TEXTURE_2D,a,_,x,c,h,M,A,w.data):e.isCompressedTexture?eA.compressedTexSubImage2D(eA.TEXTURE_2D,a,_,x,w.width,w.height,M,w.data):eA.texSubImage2D(eA.TEXTURE_2D,a,_,x,c,h,M,A,w);eA.pixelStorei(eA.UNPACK_ROW_LENGTH,C),eA.pixelStorei(eA.UNPACK_IMAGE_HEIGHT,T),eA.pixelStorei(eA.UNPACK_SKIP_PIXELS,D),eA.pixelStorei(eA.UNPACK_SKIP_ROWS,P),eA.pixelStorei(eA.UNPACK_SKIP_IMAGES,R),0===a&&t.generateMipmaps&&eA.generateMipmap(S),i.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n=null,r=null,i=0){return!0!==e.isTexture&&(i0("WebGLRenderer: copyTextureToTexture3D function signature has changed."),n=arguments[0]||null,r=arguments[1]||null,e=arguments[2],t=arguments[3],i=arguments[4]||0),i0('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(e,t,n,r,i)},this.initRenderTarget=function(e){void 0===s.get(e).__webglFramebuffer&&u.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?u.setTextureCube(e,0):e.isData3DTexture?u.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?u.setTexture2DArray(e,0):u.setTexture2D(e,0),i.unbindTexture()},this.resetState=function(){K=0,Q=0,$=null,i.reset(),D.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return iP}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorspace=i1._getDrawingBufferColorSpace(e),t.unpackColorSpace=i1._getUnpackColorSpace()}}class uJ{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new oA(e),this.density=t}clone(){return new uJ(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class uZ{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new oA(e),this.near=t,this.far=n}clone(){return new uZ(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class uq extends oo{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new a$,this.environmentIntensity=1,this.environmentRotation=new a$,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class uK{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=ix,this.updateRanges=[],this.version=0,this.uuid=iF()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=iF()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=iF()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}let uQ=new ap;class u${constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)uQ.fromBufferAttribute(this,t),uQ.applyMatrix4(e),this.setXYZ(t,uQ.x,uQ.y,uQ.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)uQ.fromBufferAttribute(this,t),uQ.applyNormalMatrix(e),this.setXYZ(t,uQ.x,uQ.y,uQ.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)uQ.fromBufferAttribute(this,t),uQ.transformDirection(e),this.setXYZ(t,uQ.x,uQ.y,uQ.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=iG(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=iV(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=iV(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=iV(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=iV(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=iV(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=iG(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=iG(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=iG(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=iG(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=iV(t,this.array),n=iV(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=iV(t,this.array),n=iV(n,this.array),r=iV(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=iV(t,this.array),n=iV(n,this.array),r=iV(r,this.array),i=iV(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new u$(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);{let e=[];for(let t=0;t<this.count;t++){let n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new oB(new this.array.constructor(e),this.itemSize,this.normalized)}}toJSON(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};{let e=[];for(let t=0;t<this.count;t++){let n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}}}class u0 extends oE{static get type(){return"SpriteMaterial"}constructor(e){super(),this.isSpriteMaterial=!0,this.color=new oA(0xffffff),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let u1=new ap,u2=new ap,u3=new ap,u5=new ij,u4=new ij,u6=new aV,u9=new ap,u8=new ap,u7=new ap,ce=new ij,ct=new ij,cn=new ij;class cr extends oo{constructor(e=new u0){if(super(),this.isSprite=!0,this.type="Sprite",void 0===t){t=new o$;let e=new uK(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);t.setIndex([0,1,2,0,2,3]),t.setAttribute("position",new u$(e,3,0,!1)),t.setAttribute("uv",new u$(e,2,3,!1))}this.geometry=t,this.material=e,this.center=new ij(.5,.5)}raycast(e,t){let n,r;e.camera,u2.setFromMatrixScale(this.matrixWorld),u6.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),u3.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&u2.multiplyScalar(-u3.z);let i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));let a=this.center;ci(u9.set(-.5,-.5,0),u3,a,u2,n,r),ci(u8.set(.5,-.5,0),u3,a,u2,n,r),ci(u7.set(.5,.5,0),u3,a,u2,n,r),ce.set(0,0),ct.set(1,0),cn.set(1,1);let s=e.ray.intersectTriangle(u9,u8,u7,!1,u1);if(null===s&&(ci(u8.set(-.5,.5,0),u3,a,u2,n,r),ct.set(0,1),null===(s=e.ray.intersectTriangle(u9,u7,u8,!1,u1))))return;let u=e.ray.origin.distanceTo(u1);!(u<e.near)&&!(u>e.far)&&t.push({distance:u,point:u1.clone(),uv:ox.getInterpolation(u1,u9,u8,u7,ce,ct,cn,new ij),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function ci(e,t,n,r,i,a){u5.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(u4.x=a*u5.x-i*u5.y,u4.y=i*u5.x+a*u5.y):u4.copy(u5),e.copy(t),e.x+=u4.x,e.y+=u4.y,e.applyMatrix4(u6)}let ca=new ap,co=new ap;class cs extends oo{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);let t=e.levels;for(let e=0,n=t.length;e<n;e++){let n=t[e];this.addLevel(n.object.clone(),n.distance,n.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){let r;t=Math.abs(t);let i=this.levels;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){let t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){let e=t.splice(n,1);return this.remove(e[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){let t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){ca.setFromMatrixPosition(this.matrixWorld);let n=e.ray.origin.distanceTo(ca);this.getObjectForDistance(n).raycast(e,t)}}update(e){let t=this.levels;if(t.length>1){let n,r;ca.setFromMatrixPosition(e.matrixWorld),co.setFromMatrixPosition(this.matrixWorld);let i=ca.distanceTo(co)/e.zoom;for(n=1,t[0].object.visible=!0,r=t.length;n<r;n++){let e=t[n].distance;if(t[n].object.visible&&(e-=e*t[n].hysteresis),i>=e)t[n-1].object.visible=!1,t[n].object.visible=!0;else break}for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}}toJSON(e){let t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];let n=this.levels;for(let e=0,r=n.length;e<r;e++){let r=n[e];t.object.levels.push({object:r.object.uuid,distance:r.distance,hysteresis:r.hysteresis})}return t}}let cl=new ap,cu=new aa,cc=new aa,ch=new ap,cd=new aV,cp=new ap,cf=new aO,cg=new aV,cm=new aG;class cv extends st{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=n_,this.bindMatrix=new aV,this.bindMatrixInverse=new aV,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;null===this.boundingBox&&(this.boundingBox=new am),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let e=0;e<t.count;e++)this.getVertexPosition(e,cp),this.boundingBox.expandByPoint(cp)}computeBoundingSphere(){let e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new aO),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let e=0;e<t.count;e++)this.getVertexPosition(e,cp),this.boundingSphere.expandByPoint(cp)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let n=this.material,r=this.matrixWorld;if(void 0!==n){if(null===this.boundingSphere&&this.computeBoundingSphere(),cf.copy(this.boundingSphere),cf.applyMatrix4(r),!1!==e.ray.intersectsSphere(cf)){if(cg.copy(r).invert(),cm.copy(e.ray).applyMatrix4(cg),null!==this.boundingBox&&!1===cm.intersectsBox(this.boundingBox))return;this._computeIntersections(e,t,cm)}}}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new aa,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);let r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===n_?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===nx&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}applyBoneTransform(e,t){let n=this.skeleton,r=this.geometry;cu.fromBufferAttribute(r.attributes.skinIndex,e),cc.fromBufferAttribute(r.attributes.skinWeight,e),cl.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){let r=cc.getComponent(e);if(0!==r){let i=cu.getComponent(e);cd.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(ch.copy(cl).applyMatrix4(cd),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}class cy extends oo{constructor(){super(),this.isBone=!0,this.type="Bone"}}class c_ extends ai{constructor(e=null,t=1,n=1,r,i,a,s,u,c=nD,h=nD,p,f){super(null,a,s,u,c,h,r,i,p,f),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}let cx=new aV,cb=new aV;class cS{constructor(e=[],t=[]){this.uuid=iF(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new aV)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let t=new aV;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){let e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){let i=e[r]?e[r].matrixWorld:cb;cx.multiplyMatrices(i,t[r]),cx.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new cS(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length),t=new Float32Array((e=Math.max(e=4*Math.ceil(e/4),4))*e*4);t.set(this.boneMatrices);let n=new c_(t,e,e,n0,nX);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){let n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){let r=t[e.bones[n]];void 0===r&&(r=new cy),this.bones.push(r),this.boneInverses.push(new aV().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){let i=t[r];e.bones.push(i.uuid);let a=n[r];e.boneInverses.push(a.toArray())}return e}}class cw extends oB{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}let cM=new aV,cA=new aV,cC=[],cT=new am,cE=new aV,cI=new st,cD=new aO;class cP extends st{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new cw(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let e=0;e<n;e++)this.setMatrixAt(e,cE)}computeBoundingBox(){let e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new am),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,cM),cT.copy(e.boundingBox).applyMatrix4(cM),this.boundingBox.union(cT)}computeBoundingSphere(){let e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new aO),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,cM),cD.copy(e.boundingSphere).applyMatrix4(cM),this.boundingSphere.union(cD)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){let n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,i=e*(n.length+1)+1;for(let e=0;e<n.length;e++)n[e]=r[i+e]}raycast(e,t){let n=this.matrixWorld,r=this.count;if(cI.geometry=this.geometry,cI.material=this.material,void 0!==cI.material){if(null===this.boundingSphere&&this.computeBoundingSphere(),cD.copy(this.boundingSphere),cD.applyMatrix4(n),!1!==e.ray.intersectsSphere(cD))for(let i=0;i<r;i++){this.getMatrixAt(i,cM),cA.multiplyMatrices(n,cM),cI.matrixWorld=cA,cI.raycast(e,cC);for(let e=0,n=cC.length;e<n;e++){let n=cC[e];n.instanceId=i,n.object=this,t.push(n)}cC.length=0}}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new cw(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){let n=t.morphTargetInfluences,r=n.length+1;null===this.morphTexture&&(this.morphTexture=new c_(new Float32Array(r*this.count),r,this.count,n4,nX));let i=this.morphTexture.source.data.data,a=0;for(let e=0;e<n.length;e++)a+=n[e];let s=this.geometry.morphTargetsRelative?1:1-a,u=r*e;i[u]=s,i.set(n,u+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function cR(e,t){return e-t}function cL(e,t){return e.z-t.z}function cO(e,t){return t.z-e.z}let ck=new aV,cB=new oA(1,1,1),cN=new sw,cF=new am,cz=new aO,cU=new ap,cH=new ap,cG=new ap,cV=new class e{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){let i=this.pool,a=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1,index:-1});let s=i[this.index];a.push(s),this.index++,s.start=e,s.count=t,s.z=n,s.index=r}reset(){this.list.length=0,this.index=0}},cW=new st,cj=[];function cX(e,t){if(e.constructor!==t.constructor){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++)t[r]=e[r]}else{let n=Math.min(e.length,t.length);t.set(new e.constructor(e.buffer,0,n))}}class cY extends st{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,n=2*t,r){super(new o$,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(4*this._maxInstanceCount),t=new c_(new Float32Array((e=Math.max(e=4*Math.ceil(e/4),4))*e*4),e,e,n0,nX);this._matricesTexture=t}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount),t=new c_(new Uint32Array((e=Math.ceil(e))*e),e,e,n6,nj);this._indirectTexture=t}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount),t=new c_(new Float32Array((e=Math.ceil(e))*e*4).fill(1),e,e,n0,nX);t.colorSpace=i1.workingColorSpace,this._colorsTexture=t}_initializeGeometry(e){let t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(!1===this._geometryInitialized){for(let r in e.attributes){let{array:i,itemSize:a,normalized:s}=e.getAttribute(r),u=new oB(new i.constructor(n*a),a,s);t.setAttribute(r,u)}if(null!==e.getIndex()){let e=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new oB(e,1))}this._geometryInitialized=!0}}_validateGeometry(e){let t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw Error('BatchedMesh: All geometries must consistently have "index".');for(let n in t.attributes){if(!e.hasAttribute(n))throw Error(`BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);let r=e.getAttribute(n),i=t.getAttribute(n);if(r.itemSize!==i.itemSize||r.normalized!==i.normalized)throw Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new am);let e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(!1===t[n].active)continue;let r=t[n].geometryIndex;this.getMatrixAt(n,ck),this.getBoundingBoxAt(r,cF).applyMatrix4(ck),e.union(cF)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new aO);let e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(!1===t[n].active)continue;let r=t[n].geometryIndex;this.getMatrixAt(n,ck),this.getBoundingSphereAt(r,cz).applyMatrix4(ck),e.union(cz)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw Error("BatchedMesh: Maximum item count reached.");let t={visible:!0,active:!0,geometryIndex:e},n=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(cR),n=this._availableInstanceIds.shift(),this._instanceInfo[n]=t):(n=this._instanceInfo.length,this._instanceInfo.push(t));let r=this._matricesTexture;ck.identity().toArray(r.image.data,16*n),r.needsUpdate=!0;let i=this._colorsTexture;return i&&(cB.toArray(i.image.data,4*n),i.needsUpdate=!0),this._visibilityChanged=!0,n}addGeometry(e,t=-1,n=-1){let r;this._initializeGeometry(e),this._validateGeometry(e);let i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=-1===t?e.getAttribute("position").count:t;let s=e.getIndex();if(null!==s&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=-1===n?s.count:n),-1!==i.indexStart&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(cR),a[r=this._availableGeometryIds.shift()]=i):(r=this._geometryCount,this._geometryCount++,a.push(i)),this.setGeometryAt(r,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,r}setGeometryAt(e,t){if(e>=this._geometryCount)throw Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);let n=this.geometry,r=null!==n.getIndex(),i=n.getIndex(),a=t.getIndex(),s=this._geometryInfo[e];if(r&&a.count>s.reservedIndexCount||t.attributes.position.count>s.reservedVertexCount)throw Error("BatchedMesh: Reserved space not large enough for provided geometry.");let u=s.vertexStart,c=s.reservedVertexCount;for(let e in s.vertexCount=t.getAttribute("position").count,n.attributes){let r=t.getAttribute(e),i=n.getAttribute(e);!function(e,t,n=0){let r=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){let i=e.count;for(let a=0;a<i;a++)for(let i=0;i<r;i++)t.setComponent(a+n,i,e.getComponent(a,i))}else t.array.set(e.array,n*r);t.needsUpdate=!0}(r,i,u);let a=r.itemSize;for(let e=r.count;e<c;e++){let t=u+e;for(let e=0;e<a;e++)i.setComponent(t,e,0)}i.needsUpdate=!0,i.addUpdateRange(u*a,c*a)}if(r){let e=s.indexStart,n=s.reservedIndexCount;s.indexCount=t.getIndex().count;for(let t=0;t<a.count;t++)i.setX(e+t,u+a.getX(t));for(let t=a.count;t<n;t++)i.setX(e+t,u);i.needsUpdate=!0,i.addUpdateRange(e,s.reservedIndexCount)}return s.start=r?s.indexStart:s.vertexStart,s.count=r?s.indexCount:s.vertexCount,s.boundingBox=null,null!==t.boundingBox&&(s.boundingBox=t.boundingBox.clone()),s.boundingSphere=null,null!==t.boundingSphere&&(s.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){let t=this._geometryInfo;if(e>=t.length||!1===t[e].active)return this;let n=this._instanceInfo;for(let t=0,r=n.length;t<r;t++)n[t].geometryIndex===e&&this.deleteInstance(t);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){let t=this._instanceInfo;return e>=t.length||!1===t[e].active?this:(t[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this)}optimize(){let e=0,t=0,n=this._geometryInfo,r=n.map((e,t)=>t).sort((e,t)=>n[e].vertexStart-n[t].vertexStart),i=this.geometry;for(let a=0,s=n.length;a<s;a++){let s=n[r[a]];if(!1!==s.active){if(null!==i.index){if(s.indexStart!==t){let{indexStart:n,vertexStart:r,reservedIndexCount:a}=s,u=i.index,c=u.array,h=e-r;for(let e=n;e<n+a;e++)c[e]=c[e]+h;u.array.copyWithin(t,n,n+a),u.addUpdateRange(t,a),s.indexStart=t}t+=s.reservedIndexCount}if(s.vertexStart!==e){let{vertexStart:t,reservedVertexCount:n}=s,r=i.attributes;for(let i in r){let a=r[i],{array:s,itemSize:u}=a;s.copyWithin(e*u,t*u,(t+n)*u),a.addUpdateRange(e*u,n*u)}s.vertexStart=e}e+=s.reservedVertexCount,s.start=i.index?s.indexStart:s.vertexStart,this._nextIndexStart=i.index?s.indexStart+s.reservedIndexCount:0,this._nextVertexStart=s.vertexStart+s.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;let n=this.geometry,r=this._geometryInfo[e];if(null===r.boundingBox){let e=new am,t=n.index,i=n.attributes.position;for(let n=r.start,a=r.start+r.count;n<a;n++){let r=n;t&&(r=t.getX(r)),e.expandByPoint(cU.fromBufferAttribute(i,r))}r.boundingBox=e}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;let n=this.geometry,r=this._geometryInfo[e];if(null===r.boundingSphere){let t=new aO;this.getBoundingBoxAt(e,cF),cF.getCenter(t.center);let i=n.index,a=n.attributes.position,s=0;for(let e=r.start,n=r.start+r.count;e<n;e++){let n=e;i&&(n=i.getX(n)),cU.fromBufferAttribute(a,n),s=Math.max(s,t.center.distanceToSquared(cU))}t.radius=Math.sqrt(s),r.boundingSphere=t}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){let n=this._instanceInfo,r=this._matricesTexture,i=this._matricesTexture.image.data;return e>=n.length||!1===n[e].active?this:(t.toArray(i,16*e),r.needsUpdate=!0,this)}getMatrixAt(e,t){let n=this._instanceInfo,r=this._matricesTexture.image.data;return e>=n.length||!1===n[e].active?null:t.fromArray(r,16*e)}setColorAt(e,t){null===this._colorsTexture&&this._initColorsTexture();let n=this._colorsTexture,r=this._colorsTexture.image.data,i=this._instanceInfo;return e>=i.length||!1===i[e].active?this:(t.toArray(r,4*e),n.needsUpdate=!0,this)}getColorAt(e,t){let n=this._colorsTexture.image.data,r=this._instanceInfo;return e>=r.length||!1===r[e].active?null:t.fromArray(n,4*e)}setVisibleAt(e,t){let n=this._instanceInfo;return e>=n.length||!1===n[e].active||n[e].visible===t?this:(n[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){let t=this._instanceInfo;return!(e>=t.length)&&!1!==t[e].active&&t[e].visible}setGeometryIdAt(e,t){let n=this._instanceInfo,r=this._geometryInfo;return e>=n.length||!1===n[e].active||t>=r.length||!1===r[t].active?null:(n[e].geometryIndex=t,this)}getGeometryIdAt(e){let t=this._instanceInfo;return e>=t.length||!1===t[e].active?-1:t[e].geometryIndex}getGeometryRangeAt(e,t={}){if(e<0||e>=this._geometryCount)return null;let n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){let t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(cR);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);let r=new Int32Array(e),i=new Int32Array(e);cX(this._multiDrawCounts,r),cX(this._multiDrawStarts,i),this._multiDrawCounts=r,this._multiDrawStarts=i,this._maxInstanceCount=e;let a=this._indirectTexture,s=this._matricesTexture,u=this._colorsTexture;a.dispose(),this._initIndirectTexture(),cX(a.image.data,this._indirectTexture.image.data),s.dispose(),this._initMatricesTexture(),cX(s.image.data,this._matricesTexture.image.data),u&&(u.dispose(),this._initColorsTexture(),cX(u.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){let n=[...this._geometryInfo].filter(e=>e.active);if(Math.max(...n.map(e=>e.vertexStart+e.reservedVertexCount))>e)throw Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(e=>e.indexStart+e.reservedIndexCount))>t)throw Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);let r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new o$,this._initializeGeometry(r));let i=this.geometry;for(let e in r.index&&cX(r.index.array,i.index.array),r.attributes)cX(r.attributes[e].array,i.attributes[e].array)}raycast(e,t){let n=this._instanceInfo,r=this._geometryInfo,i=this.matrixWorld,a=this.geometry;cW.material=this.material,cW.geometry.index=a.index,cW.geometry.attributes=a.attributes,null===cW.geometry.boundingBox&&(cW.geometry.boundingBox=new am),null===cW.geometry.boundingSphere&&(cW.geometry.boundingSphere=new aO);for(let a=0,s=n.length;a<s;a++){if(!n[a].visible||!n[a].active)continue;let s=n[a].geometryIndex,u=r[s];cW.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,cW.matrixWorld).premultiply(i),this.getBoundingBoxAt(s,cW.geometry.boundingBox),this.getBoundingSphereAt(s,cW.geometry.boundingSphere),cW.raycast(e,cj);for(let e=0,n=cj.length;e<n;e++){let n=cj[e];n.object=this,n.batchId=a,t.push(n)}cj.length=0}cW.material=null,cW.geometry.index=null,cW.geometry.attributes={},cW.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(e=>({...e,boundingBox:null!==e.boundingBox?e.boundingBox.clone():null,boundingSphere:null!==e.boundingSphere?e.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(e=>({...e})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,r,i){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;let a=r.getIndex(),s=null===a?1:a.array.BYTES_PER_ELEMENT,u=this._instanceInfo,c=this._multiDrawStarts,h=this._multiDrawCounts,p=this._geometryInfo,f=this.perObjectFrustumCulled,v=this._indirectTexture,y=v.image.data;f&&(ck.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),cN.setFromProjectionMatrix(ck,e.coordinateSystem));let _=0;if(this.sortObjects){ck.copy(this.matrixWorld).invert(),cU.setFromMatrixPosition(n.matrixWorld).applyMatrix4(ck),cH.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(ck);for(let e=0,t=u.length;e<t;e++)if(u[e].visible&&u[e].active){let t=u[e].geometryIndex;this.getMatrixAt(e,ck),this.getBoundingSphereAt(t,cz).applyMatrix4(ck);let n=!1;if(f&&(n=!cN.intersectsSphere(cz)),!n){let n=p[t],r=cG.subVectors(cz.center,cU).dot(cH);cV.push(n.start,n.count,r,e)}}let e=cV.list,t=this.customSort;null===t?e.sort(i.transparent?cO:cL):t.call(this,e,n);for(let t=0,n=e.length;t<n;t++){let n=e[t];c[_]=n.start*s,h[_]=n.count,y[_]=n.index,_++}cV.reset()}else for(let e=0,t=u.length;e<t;e++)if(u[e].visible&&u[e].active){let t=u[e].geometryIndex,n=!1;if(f&&(this.getMatrixAt(e,ck),this.getBoundingSphereAt(t,cz).applyMatrix4(ck),n=!cN.intersectsSphere(cz)),!n){let n=p[t];c[_]=n.start*s,h[_]=n.count,y[_]=e,_++}}v.needsUpdate=!0,this._multiDrawCount=_,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,i,a){this.onBeforeRender(e,null,r,i,a)}}class cJ extends oE{static get type(){return"LineBasicMaterial"}constructor(e){super(),this.isLineBasicMaterial=!0,this.color=new oA(0xffffff),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}let cZ=new ap,cq=new ap,cK=new aV,cQ=new aG,c$=new aO,c0=new ap,c1=new ap;class c2 extends oo{constructor(e=new o$,t=new cJ){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)cZ.fromBufferAttribute(t,e-1),cq.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=cZ.distanceTo(cq);e.setAttribute("lineDistance",new oj(n,1))}return this}raycast(e,t){let n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),c$.copy(n.boundingSphere),c$.applyMatrix4(r),c$.radius+=i,!1===e.ray.intersectsSphere(c$))return;cK.copy(r).invert(),cQ.copy(e.ray).applyMatrix4(cK);let s=i/((this.scale.x+this.scale.y+this.scale.z)/3),u=s*s,c=this.isLineSegments?2:1,h=n.index,p=n.attributes.position;if(null!==h){let n=Math.max(0,a.start),r=Math.min(h.count,a.start+a.count);for(let i=n,a=r-1;i<a;i+=c){let n=h.getX(i),r=c3(this,e,cQ,u,n,h.getX(i+1));r&&t.push(r)}if(this.isLineLoop){let i=h.getX(r-1),a=c3(this,e,cQ,u,i,h.getX(n));a&&t.push(a)}}else{let n=Math.max(0,a.start),r=Math.min(p.count,a.start+a.count);for(let i=n,a=r-1;i<a;i+=c){let n=c3(this,e,cQ,u,i,i+1);n&&t.push(n)}if(this.isLineLoop){let i=c3(this,e,cQ,u,r-1,n);i&&t.push(i)}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function c3(e,t,n,r,i,a){let s=e.geometry.attributes.position;if(cZ.fromBufferAttribute(s,i),cq.fromBufferAttribute(s,a),n.distanceSqToSegment(cZ,cq,c0,c1)>r)return;c0.applyMatrix4(e.matrixWorld);let u=t.ray.origin.distanceTo(c0);if(!(u<t.near)&&!(u>t.far))return{distance:u,point:c1.clone().applyMatrix4(e.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:e}}let c5=new ap,c4=new ap;class c6 extends c2{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)c5.fromBufferAttribute(t,e),c4.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+c5.distanceTo(c4);e.setAttribute("lineDistance",new oj(n,1))}return this}}class c9 extends c2{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class c8 extends oE{static get type(){return"PointsMaterial"}constructor(e){super(),this.isPointsMaterial=!0,this.color=new oA(0xffffff),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let c7=new aV,he=new aG,ht=new aO,hn=new ap;class hr extends oo{constructor(e=new o$,t=new c8){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ht.copy(n.boundingSphere),ht.applyMatrix4(r),ht.radius+=i,!1===e.ray.intersectsSphere(ht))return;c7.copy(r).invert(),he.copy(e.ray).applyMatrix4(c7);let s=i/((this.scale.x+this.scale.y+this.scale.z)/3),u=s*s,c=n.index,h=n.attributes.position;if(null!==c){let n=Math.max(0,a.start),i=Math.min(c.count,a.start+a.count);for(let a=n;a<i;a++){let n=c.getX(a);hn.fromBufferAttribute(h,n),hi(hn,n,u,r,e,t,this)}}else{let n=Math.max(0,a.start),i=Math.min(h.count,a.start+a.count);for(let a=n;a<i;a++)hn.fromBufferAttribute(h,a),hi(hn,a,u,r,e,t,this)}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function hi(e,t,n,r,i,a,s){let u=he.distanceSqToPoint(e);if(u<n){let n=new ap;he.closestPointToPoint(e,n),n.applyMatrix4(r);let c=i.ray.origin.distanceTo(n);if(c<i.near||c>i.far)return;a.push({distance:c,distanceToRay:Math.sqrt(u),point:n,index:t,face:null,faceIndex:null,barycoord:null,object:s})}}class ha extends ai{constructor(e,t,n,r,i,a,s,u,c){super(e,t,n,r,i,a,s,u,c),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:nk,this.magFilter=void 0!==i?i:nk,this.generateMipmaps=!1;let h=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function t(){h.needsUpdate=!0,e.requestVideoFrameCallback(t)})}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class ho extends ai{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=nD,this.minFilter=nD,this.generateMipmaps=!1,this.needsUpdate=!0}}class hs extends ai{constructor(e,t,n,r,i,a,s,u,c,h,p,f){super(null,a,s,u,c,h,r,i,p,f),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class hl extends hs{constructor(e,t,n,r,i,a){super(e,t,n,i,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=nE,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class hu extends hs{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,nS),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class hc extends ai{constructor(e,t,n,r,i,a,s,u,c){super(e,t,n,r,i,a,s,u,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class hh{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return null}getPointAt(e,t){let n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],n,r=this.getPoint(0),i=0;t.push(0);for(let a=1;a<=e;a++)i+=(n=this.getPoint(a/e)).distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let n;let r=this.getLengths(),i=0,a=r.length;n=t?t:e*r[a-1];let s=0,u=a-1,c;for(;s<=u;)if((c=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else if(c>0)u=i-1;else{u=i;break}if(r[i=u]===n)return i/(a-1);let h=r[i],p=r[i+1];return(i+(n-h)/(p-h))/(a-1)}getTangent(e,t){let n=e-1e-4,r=e+1e-4;n<0&&(n=0),r>1&&(r=1);let i=this.getPoint(n),a=this.getPoint(r),s=t||(i.isVector2?new ij:new ap);return s.copy(a).sub(i).normalize(),s}getTangentAt(e,t){let n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){let n=new ap,r=[],i=[],a=[],s=new ap,u=new aV;for(let t=0;t<=e;t++){let n=t/e;r[t]=this.getTangentAt(n,new ap)}i[0]=new ap,a[0]=new ap;let c=Number.MAX_VALUE,h=Math.abs(r[0].x),p=Math.abs(r[0].y),f=Math.abs(r[0].z);h<=c&&(c=h,n.set(1,0,0)),p<=c&&(c=p,n.set(0,1,0)),f<=c&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),a[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),a[t]=a[t-1].clone(),s.crossVectors(r[t-1],r[t]),s.length()>Number.EPSILON){s.normalize();let e=Math.acos(iz(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(u.makeRotationAxis(s,e))}a[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(iz(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(s.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(u.makeRotationAxis(r[n],t*n)),a[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class hd extends hh{constructor(e=0,t=0,n=1,r=1,i=0,a=2*Math.PI,s=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=s,this.aRotation=u}getPoint(e,t=new ij){let n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,i=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=i?0:n),!0===this.aClockwise&&!i&&(r===n?r=-n:r-=n);let a=this.aStartAngle+e*r,s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){let e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=u-this.aY;s=n*e-r*t+this.aX,u=n*t+r*e+this.aY}return t.set(s,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class hp extends hd{constructor(e,t,n,r,i,a){super(e,t,n,n,r,i,a),this.isArcCurve=!0,this.type="ArcCurve"}}function hf(){let e=0,t=0,n=0,r=0;function i(i,a,s,u){e=i,t=s,n=-3*i+3*a-2*s-u,r=2*i-2*a+s+u}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,s,u){let c=(t-e)/a-(n-e)/(a+s)+(n-t)/s,h=(n-t)/s-(r-t)/(s+u)+(r-n)/u;i(t,n,c*=s,h*=s)},calc:function(i){let a=i*i;return e+t*i+n*a+a*i*r}}}let hg=new ap,hm=new hf,hv=new hf,hy=new hf;class h_ extends hh{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new ap){let n,r;let i=this.points,a=i.length,s=(a-(this.closed?0:1))*e,u=Math.floor(s),c=s-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/a)+1)*a:0===c&&u===a-1&&(u=a-2,c=1),this.closed||u>0?n=i[(u-1)%a]:(hg.subVectors(i[0],i[1]).add(i[0]),n=hg);let h=i[u%a],p=i[(u+1)%a];if(this.closed||u+2<a?r=i[(u+2)%a]:(hg.subVectors(i[a-1],i[a-2]).add(i[a-1]),r=hg),"centripetal"===this.curveType||"chordal"===this.curveType){let e="chordal"===this.curveType?.5:.25,t=Math.pow(n.distanceToSquared(h),e),i=Math.pow(h.distanceToSquared(p),e),a=Math.pow(p.distanceToSquared(r),e);i<1e-4&&(i=1),t<1e-4&&(t=i),a<1e-4&&(a=i),hm.initNonuniformCatmullRom(n.x,h.x,p.x,r.x,t,i,a),hv.initNonuniformCatmullRom(n.y,h.y,p.y,r.y,t,i,a),hy.initNonuniformCatmullRom(n.z,h.z,p.z,r.z,t,i,a)}else"catmullrom"===this.curveType&&(hm.initCatmullRom(n.x,h.x,p.x,r.x,this.tension),hv.initCatmullRom(n.y,h.y,p.y,r.y,this.tension),hy.initCatmullRom(n.z,h.z,p.z,r.z,this.tension));return t.set(hm.calc(c),hv.calc(c),hy.calc(c)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(new ap().fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function hx(e,t,n,r,i){let a=(r-t)*.5,s=(i-n)*.5,u=e*e;return e*u*(2*n-2*r+a+s)+(-3*n+3*r-2*a-s)*u+a*e+n}function hb(e,t,n,r){var i,a;return function(e,t){let n=1-e;return n*n*t}(e,t)+2*(1-(i=e))*i*n+(a=e)*a*r}function hS(e,t,n,r,i){var a,s;return function(e,t){let n=1-e;return n*n*n*t}(e,t)+function(e,t){let n=1-e;return 3*n*n*e*t}(e,n)+3*(1-(a=e))*a*a*r+(s=e)*s*s*i}class hw extends hh{constructor(e=new ij,t=new ij,n=new ij,r=new ij){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new ij){let n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(hS(e,n.x,r.x,i.x,a.x),hS(e,n.y,r.y,i.y,a.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class hM extends hh{constructor(e=new ap,t=new ap,n=new ap,r=new ap){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new ap){let n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(hS(e,n.x,r.x,i.x,a.x),hS(e,n.y,r.y,i.y,a.y),hS(e,n.z,r.z,i.z,a.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class hA extends hh{constructor(e=new ij,t=new ij){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ij){return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ij){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hC extends hh{constructor(e=new ap,t=new ap){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ap){return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ap){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hT extends hh{constructor(e=new ij,t=new ij,n=new ij){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ij){let n=this.v0,r=this.v1,i=this.v2;return t.set(hb(e,n.x,r.x,i.x),hb(e,n.y,r.y,i.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hE extends hh{constructor(e=new ap,t=new ap,n=new ap){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ap){let n=this.v0,r=this.v1,i=this.v2;return t.set(hb(e,n.x,r.x,i.x),hb(e,n.y,r.y,i.y),hb(e,n.z,r.z,i.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hI extends hh{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ij){let n=this.points,r=(n.length-1)*e,i=Math.floor(r),a=r-i,s=n[0===i?i:i-1],u=n[i],c=n[i>n.length-2?n.length-1:i+1],h=n[i>n.length-3?n.length-1:i+2];return t.set(hx(a,s.x,u.x,c.x,h.x),hx(a,s.y,u.y,c.y,h.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(new ij().fromArray(n))}return this}}var hD=Object.freeze({__proto__:null,ArcCurve:hp,CatmullRomCurve3:h_,CubicBezierCurve:hw,CubicBezierCurve3:hM,EllipseCurve:hd,LineCurve:hA,LineCurve3:hC,QuadraticBezierCurve:hT,QuadraticBezierCurve3:hE,SplineCurve:hI});class hP extends hh{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){let n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new hD[n](t,e))}return this}getPoint(e,t){let n=e*this.getLength(),r=this.getCurveLengths(),i=0;for(;i<r.length;){if(r[i]>=n){let e=r[i]-n,a=this.curves[i],s=a.getLength(),u=0===s?0:1-e/s;return a.getPointAt(u,t)}i++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t;let n=[];for(let r=0,i=this.curves;r<i.length;r++){let a=i[r],s=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,u=a.getPoints(s);for(let e=0;e<u.length;e++){let r=u[e];!(t&&t.equals(r))&&(n.push(r),t=r)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){let n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let n=e.curves[t];this.curves.push(new hD[n.type]().fromJSON(n))}return this}}class hR extends hP{constructor(e){super(),this.type="Path",this.currentPoint=new ij,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let n=new hA(this.currentPoint.clone(),new ij(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){let i=new hT(this.currentPoint.clone(),new ij(e,t),new ij(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,a){let s=new hw(this.currentPoint.clone(),new ij(e,t),new ij(n,r),new ij(i,a));return this.curves.push(s),this.currentPoint.set(i,a),this}splineThru(e){let t=new hI([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,a){let s=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+s,t+u,n,r,i,a),this}absarc(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}ellipse(e,t,n,r,i,a,s,u){let c=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+c,t+h,n,r,i,a,s,u),this}absellipse(e,t,n,r,i,a,s,u){let c=new hd(e,t,n,r,i,a,s,u);if(this.curves.length>0){let e=c.getPoint(0);!e.equals(this.currentPoint)&&this.lineTo(e.x,e.y)}this.curves.push(c);let h=c.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class hL extends o${constructor(e=[new ij(0,-.5),new ij(.5,0),new ij(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=iz(r,0,2*Math.PI);let i=[],a=[],s=[],u=[],c=[],h=1/t,p=new ap,f=new ij,v=new ap,y=new ap,_=new ap,x=0,b=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:x=e[t+1].x-e[t].x,b=e[t+1].y-e[t].y,v.x=1*b,v.y=-x,v.z=0*b,_.copy(v),v.normalize(),u.push(v.x,v.y,v.z);break;case e.length-1:u.push(_.x,_.y,_.z);break;default:x=e[t+1].x-e[t].x,b=e[t+1].y-e[t].y,v.x=1*b,v.y=-x,v.z=0*b,y.copy(v),v.x+=_.x,v.y+=_.y,v.z+=_.z,v.normalize(),u.push(v.x,v.y,v.z),_.copy(y)}for(let i=0;i<=t;i++){let v=n+i*h*r,y=Math.sin(v),_=Math.cos(v);for(let n=0;n<=e.length-1;n++){p.x=e[n].x*y,p.y=e[n].y,p.z=e[n].x*_,a.push(p.x,p.y,p.z),f.x=i/t,f.y=n/(e.length-1),s.push(f.x,f.y);let r=u[3*n+0]*y,h=u[3*n+1],v=u[3*n+0]*_;c.push(r,h,v)}}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){let r=t+n*e.length,a=r+e.length,s=r+e.length+1,u=r+1;i.push(r,a,u),i.push(s,u,a)}this.setIndex(i),this.setAttribute("position",new oj(a,3)),this.setAttribute("uv",new oj(s,2)),this.setAttribute("normal",new oj(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hL(e.points,e.segments,e.phiStart,e.phiLength)}}class hO extends hL{constructor(e=1,t=1,n=4,r=8){let i=new hR;i.absarc(0,-t/2,e,1.5*Math.PI,0),i.absarc(0,t/2,e,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new hO(e.radius,e.length,e.capSegments,e.radialSegments)}}class hk extends o${constructor(e=1,t=32,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);let i=[],a=[],s=[],u=[],c=new ap,h=new ij;a.push(0,0,0),s.push(0,0,1),u.push(.5,.5);for(let i=0,p=3;i<=t;i++,p+=3){let f=n+i/t*r;c.x=e*Math.cos(f),c.y=e*Math.sin(f),a.push(c.x,c.y,c.z),s.push(0,0,1),h.x=(a[p]/e+1)/2,h.y=(a[p+1]/e+1)/2,u.push(h.x,h.y)}for(let e=1;e<=t;e++)i.push(e,e+1,0);this.setIndex(i),this.setAttribute("position",new oj(a,3)),this.setAttribute("normal",new oj(s,3)),this.setAttribute("uv",new oj(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hk(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class hB extends o${constructor(e=1,t=1,n=1,r=32,i=1,a=!1,s=0,u=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:u};let c=this;r=Math.floor(r),i=Math.floor(i);let h=[],p=[],f=[],v=[],y=0,_=[],x=n/2,b=0;(function(){let a=new ap,S=new ap,w=0,M=(t-e)/n;for(let c=0;c<=i;c++){let h=[],b=c/i,w=b*(t-e)+e;for(let e=0;e<=r;e++){let t=e/r,i=t*u+s,c=Math.sin(i),_=Math.cos(i);S.x=w*c,S.y=-b*n+x,S.z=w*_,p.push(S.x,S.y,S.z),a.set(c,M,_).normalize(),f.push(a.x,a.y,a.z),v.push(t,1-b),h.push(y++)}_.push(h)}for(let n=0;n<r;n++)for(let r=0;r<i;r++){let a=_[r][n],s=_[r+1][n],u=_[r+1][n+1],c=_[r][n+1];(e>0||0!==r)&&(h.push(a,s,c),w+=3),(t>0||r!==i-1)&&(h.push(s,u,c),w+=3)}c.addGroup(b,w,0),b+=w})(),!1===a&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(h),this.setAttribute("position",new oj(p,3)),this.setAttribute("normal",new oj(f,3)),this.setAttribute("uv",new oj(v,2));function S(n){let i=y,a=new ij,_=new ap,S=0,w=!0===n?e:t,M=!0===n?1:-1;for(let e=1;e<=r;e++)p.push(0,x*M,0),f.push(0,M,0),v.push(.5,.5),y++;let A=y;for(let e=0;e<=r;e++){let t=e/r*u+s,n=Math.cos(t),i=Math.sin(t);_.x=w*i,_.y=x*M,_.z=w*n,p.push(_.x,_.y,_.z),f.push(0,M,0),a.x=.5*n+.5,a.y=.5*i*M+.5,v.push(a.x,a.y),y++}for(let e=0;e<r;e++){let t=i+e,r=A+e;!0===n?h.push(r,r+1,t):h.push(r+1,r,t),S+=3}c.addGroup(b,S,!0===n?1:2),b+=S}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hB(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class hN extends hB{constructor(e=1,t=1,n=32,r=1,i=!1,a=0,s=2*Math.PI){super(0,e,t,n,r,i,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:s}}static fromJSON(e){return new hN(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class hF extends o${constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};let i=[],a=[];(function(e){let n=new ap,r=new ap,i=new ap;for(let a=0;a<t.length;a+=3)u(t[a+0],n),u(t[a+1],r),u(t[a+2],i),function(e,t,n,r){let i=r+1,a=[];for(let r=0;r<=i;r++){a[r]=[];let s=e.clone().lerp(n,r/i),u=t.clone().lerp(n,r/i),c=i-r;for(let e=0;e<=c;e++)0===e&&r===i?a[r][e]=s:a[r][e]=s.clone().lerp(u,e/c)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){let n=Math.floor(t/2);t%2==0?(s(a[e][n+1]),s(a[e+1][n]),s(a[e][n])):(s(a[e][n+1]),s(a[e+1][n+1]),s(a[e+1][n]))}}(n,r,i,e)})(r),function(e){let t=new ap;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){let e=new ap;for(let t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];let n=h(e)/2/Math.PI+.5,r=function(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}(e)/Math.PI+.5;a.push(n,1-r)}(function(){let e=new ap,t=new ap,n=new ap,r=new ap,s=new ij,u=new ij,p=new ij;for(let f=0,v=0;f<i.length;f+=9,v+=6){e.set(i[f+0],i[f+1],i[f+2]),t.set(i[f+3],i[f+4],i[f+5]),n.set(i[f+6],i[f+7],i[f+8]),s.set(a[v+0],a[v+1]),u.set(a[v+2],a[v+3]),p.set(a[v+4],a[v+5]),r.copy(e).add(t).add(n).divideScalar(3);let y=h(r);c(s,v+0,e,y),c(u,v+2,t,y),c(p,v+4,n,y)}})(),function(){for(let e=0;e<a.length;e+=6){let t=a[e+0],n=a[e+2],r=a[e+4],i=Math.max(t,n,r),s=Math.min(t,n,r);i>.9&&s<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new oj(i,3)),this.setAttribute("normal",new oj(i.slice(),3)),this.setAttribute("uv",new oj(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals();function s(e){i.push(e.x,e.y,e.z)}function u(t,n){let r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}function h(e){return Math.atan2(e.z,-e.x)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hF(e.vertices,e.indices,e.radius,e.details)}}class hz extends hF{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hz(e.radius,e.detail)}}let hU=new ap,hH=new ap,hG=new ap,hV=new ox;class hW extends o${constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){let n=Math.cos(iB*t),r=e.getIndex(),i=e.getAttribute("position"),a=r?r.count:i.count,s=[0,0,0],u=["a","b","c"],c=[,,,],h={},p=[];for(let e=0;e<a;e+=3){r?(s[0]=r.getX(e),s[1]=r.getX(e+1),s[2]=r.getX(e+2)):(s[0]=e,s[1]=e+1,s[2]=e+2);let{a:t,b:a,c:f}=hV;if(t.fromBufferAttribute(i,s[0]),a.fromBufferAttribute(i,s[1]),f.fromBufferAttribute(i,s[2]),hV.getNormal(hG),c[0]=`${Math.round(1e4*t.x)},${Math.round(1e4*t.y)},${Math.round(1e4*t.z)}`,c[1]=`${Math.round(1e4*a.x)},${Math.round(1e4*a.y)},${Math.round(1e4*a.z)}`,c[2]=`${Math.round(1e4*f.x)},${Math.round(1e4*f.y)},${Math.round(1e4*f.z)}`,c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let e=0;e<3;e++){let t=(e+1)%3,r=c[e],i=c[t],a=hV[u[e]],f=hV[u[t]],v=`${r}_${i}`,y=`${i}_${r}`;y in h&&h[y]?(hG.dot(h[y].normal)<=n&&(p.push(a.x,a.y,a.z),p.push(f.x,f.y,f.z)),h[y]=null):!(v in h)&&(h[v]={index0:s[e],index1:s[t],normal:hG.clone()})}}for(let e in h)if(h[e]){let{index0:t,index1:n}=h[e];hU.fromBufferAttribute(i,t),hH.fromBufferAttribute(i,n),p.push(hU.x,hU.y,hU.z),p.push(hH.x,hH.y,hH.z)}this.setAttribute("position",new oj(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class hj extends hR{constructor(e){super(e),this.uuid=iF(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){let n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let n=e.holes[t];this.holes.push(new hR().fromJSON(n))}return this}}let hX={triangulate:function(e,t,n=2){let r,i,a,s,u,c,h;let p=t&&t.length,f=p?t[0]*n:e.length,v=hY(e,0,f,n,!0),y=[];if(!v||v.next===v.prev)return y;if(p&&(v=function(e,t,n,r){let i,a,s,u,c;let h=[];for(i=0,a=t.length;i<a;i++)s=t[i]*r,u=i<a-1?t[i+1]*r:e.length,(c=hY(e,s,u,r,!1))===c.next&&(c.steiner=!0),h.push(function(e){let t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}(c));for(h.sort(hq),i=0;i<h.length;i++)n=function(e,t){let n=function(e,t){let n=t,r=-1/0,i,a=e.x,s=e.y;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){let e=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=a&&e>r&&(r=e,i=n.x<n.next.x?n:n.next,e===a))return i}n=n.next}while(n!==t);if(!i)return null;let u=i,c=i.x,h=i.y,p=1/0,f;n=i;do a>=n.x&&n.x>=c&&a!==n.x&&hQ(s<h?a:r,s,c,h,s<h?r:a,s,n.x,n.y)&&(f=Math.abs(s-n.y)/(a-n.x),h5(n,e)&&(f<p||f===p&&(n.x>i.x||n.x===i.x&&function(e,t){return 0>h$(e.prev,e,t.prev)&&0>h$(t.next,e,e.next)}(i,n)))&&(i=n,p=f)),n=n.next;while(n!==u);return i}(e,t);if(!n)return t;let r=h4(n,e);return hJ(r,r.next),hJ(n,n.next)}(h[i],n);return n}(e,t,v,n)),e.length>80*n){r=a=e[0],i=s=e[1];for(let t=n;t<f;t+=n)u=e[t],c=e[t+1],u<r&&(r=u),c<i&&(i=c),u>a&&(a=u),c>s&&(s=c);h=0!==(h=Math.max(a-r,s-i))?32767/h:0}return hZ(v,y,n,r,i,h,0),y}};function hY(e,t,n,r,i){let a,s;if(i===function(e,t,n,r){let i=0;for(let a=t,s=n-r;a<n;a+=r)i+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)s=h6(a,e[a],e[a+1],s);else for(a=n-r;a>=t;a-=r)s=h6(a,e[a],e[a+1],s);return s&&h0(s,s.next)&&(h9(s),s=s.next),s}function hJ(e,t){if(!e)return e;!t&&(t=e);let n=e,r;do if(r=!1,!n.steiner&&(h0(n,n.next)||0===h$(n.prev,n,n.next))){if(h9(n),(n=t=n.prev)===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t}function hZ(e,t,n,r,i,a,s){if(!e)return;!s&&a&&function(e,t,n,r){let i=e;do 0===i.z&&(i.z=hK(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,a,s,u,c,h=1;do{for(n=e,e=null,a=null,s=0;n;){for(s++,r=n,u=0,t=0;t<h&&(u++,r=r.nextZ);t++);for(c=h;u>0||c>0&&r;)0!==u&&(0===c||!r||n.z<=r.z)?(i=n,n=n.nextZ,u--):(i=r,r=r.nextZ,c--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,h*=2}while(s>1);}(i)}(e,r,i,a);let u=e,c,h;for(;e.prev!==e.next;){if(c=e.prev,h=e.next,a?function(e,t,n,r){let i=e.prev,a=e.next;if(h$(i,e,a)>=0)return!1;let s=i.x,u=e.x,c=a.x,h=i.y,p=e.y,f=a.y,v=s<u?s<c?s:c:u<c?u:c,y=h<p?h<f?h:f:p<f?p:f,_=s>u?s>c?s:c:u>c?u:c,x=h>p?h>f?h:f:p>f?p:f,b=hK(v,y,t,n,r),S=hK(_,x,t,n,r),w=e.prevZ,M=e.nextZ;for(;w&&w.z>=b&&M&&M.z<=S;){if(w.x>=v&&w.x<=_&&w.y>=y&&w.y<=x&&w!==i&&w!==a&&hQ(s,h,u,p,c,f,w.x,w.y)&&h$(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,M.x>=v&&M.x<=_&&M.y>=y&&M.y<=x&&M!==i&&M!==a&&hQ(s,h,u,p,c,f,M.x,M.y)&&h$(M.prev,M,M.next)>=0)return!1;M=M.nextZ}for(;w&&w.z>=b;){if(w.x>=v&&w.x<=_&&w.y>=y&&w.y<=x&&w!==i&&w!==a&&hQ(s,h,u,p,c,f,w.x,w.y)&&h$(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;M&&M.z<=S;){if(M.x>=v&&M.x<=_&&M.y>=y&&M.y<=x&&M!==i&&M!==a&&hQ(s,h,u,p,c,f,M.x,M.y)&&h$(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}(e,r,i,a):function(e){let t=e.prev,n=e.next;if(h$(t,e,n)>=0)return!1;let r=t.x,i=e.x,a=n.x,s=t.y,u=e.y,c=n.y,h=r<i?r<a?r:a:i<a?i:a,p=s<u?s<c?s:c:u<c?u:c,f=r>i?r>a?r:a:i>a?i:a,v=s>u?s>c?s:c:u>c?u:c,y=n.next;for(;y!==t;){if(y.x>=h&&y.x<=f&&y.y>=p&&y.y<=v&&hQ(r,s,i,u,a,c,y.x,y.y)&&h$(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}(e)){t.push(c.i/n|0),t.push(e.i/n|0),t.push(h.i/n|0),h9(e),e=h.next,u=h.next;continue}if((e=h)===u){s?1===s?hZ(e=function(e,t,n){let r=e;do{let i=r.prev,a=r.next.next;!h0(i,a)&&h1(i,r,r.next,a)&&h5(i,a)&&h5(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),h9(r),h9(r.next),r=e=a),r=r.next}while(r!==e);return hJ(r)}(hJ(e),t,n),t,n,r,i,a,2):2===s&&function(e,t,n,r,i,a){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&function(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&h1(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(h5(e,t)&&h5(t,e)&&function(e,t){let n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}(e,t)&&(h$(e.prev,e,t.prev)||h$(e,t.prev,t))||h0(e,t)&&h$(e.prev,e,e.next)>0&&h$(t.prev,t,t.next)>0)}(s,e)){let u=h4(s,e);s=hJ(s,s.next),u=hJ(u,u.next),hZ(s,t,n,r,i,a,0),hZ(u,t,n,r,i,a,0);return}e=e.next}s=s.next}while(s!==e)}(e,t,n,r,i,a):hZ(hJ(e),t,n,r,i,a,1);break}}}function hq(e,t){return e.x-t.x}function hK(e,t,n,r,i){return e=((e=((e=((e=((e=(e-n)*i|0)|e<<8)&0xff00ff)|e<<4)&0xf0f0f0f)|e<<2)&0x33333333)|e<<1)&0x55555555,e|(t=((t=((t=((t=((t=(t-r)*i|0)|t<<8)&0xff00ff)|t<<4)&0xf0f0f0f)|t<<2)&0x33333333)|t<<1)&0x55555555)<<1}function hQ(e,t,n,r,i,a,s,u){return(i-s)*(t-u)>=(e-s)*(a-u)&&(e-s)*(r-u)>=(n-s)*(t-u)&&(n-s)*(a-u)>=(i-s)*(r-u)}function h$(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function h0(e,t){return e.x===t.x&&e.y===t.y}function h1(e,t,n,r){let i=h3(h$(e,t,n)),a=h3(h$(e,t,r)),s=h3(h$(n,r,e)),u=h3(h$(n,r,t));return!!(i!==a&&s!==u||0===i&&h2(e,n,t)||0===a&&h2(e,r,t)||0===s&&h2(n,e,r)||0===u&&h2(n,t,r))||!1}function h2(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function h3(e){return e>0?1:e<0?-1:0}function h5(e,t){return 0>h$(e.prev,e,e.next)?h$(e,t,e.next)>=0&&h$(e,e.prev,t)>=0:0>h$(e,t,e.prev)||0>h$(e,e.next,t)}function h4(e,t){let n=new h8(e.i,e.x,e.y),r=new h8(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function h6(e,t,n,r){let i=new h8(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function h9(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function h8(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class h7{static area(e){let t=e.length,n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return .5*n}static isClockWise(e){return 0>h7.area(e)}static triangulateShape(e,t){let n=[],r=[],i=[];de(e),dt(n,e);let a=e.length;t.forEach(de);for(let e=0;e<t.length;e++)r.push(a),a+=t[e].length,dt(n,t[e]);let s=hX.triangulate(n,r);for(let e=0;e<s.length;e+=3)i.push(s.slice(e,e+3));return i}}function de(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function dt(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class dn extends o${constructor(e=new hj([new ij(.5,.5),new ij(-.5,.5),new ij(-.5,-.5),new ij(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let n=this,r=[],i=[];for(let a=0,s=e.length;a<s;a++)(function(e){let a,s,u,c;let h=[],p=void 0!==t.curveSegments?t.curveSegments:12,f=void 0!==t.steps?t.steps:1,v=void 0!==t.depth?t.depth:1,y=void 0===t.bevelEnabled||t.bevelEnabled,_=void 0!==t.bevelThickness?t.bevelThickness:.2,x=void 0!==t.bevelSize?t.bevelSize:_-.1,b=void 0!==t.bevelOffset?t.bevelOffset:0,S=void 0!==t.bevelSegments?t.bevelSegments:3,w=t.extrudePath,M=void 0!==t.UVGenerator?t.UVGenerator:dr,A,C=!1;w&&(A=w.getSpacedPoints(f),C=!0,y=!1,a=w.computeFrenetFrames(f,!1),s=new ap,u=new ap,c=new ap),!y&&(S=0,_=0,x=0,b=0);let T=e.extractPoints(p),I=T.shape,D=T.holes;if(!h7.isClockWise(I)){I=I.reverse();for(let e=0,t=D.length;e<t;e++){let t=D[e];h7.isClockWise(t)&&(D[e]=t.reverse())}}let P=h7.triangulateShape(I,D),R=I;for(let e=0,t=D.length;e<t;e++){let t=D[e];I=I.concat(t)}function L(e,t,n){return e.clone().addScaledVector(t,n)}let O=I.length,k=P.length;function B(e,t,n){let r,i,a;let s=e.x-t.x,u=e.y-t.y,c=n.x-e.x,h=n.y-e.y,p=s*s+u*u;if(Math.abs(s*h-u*c)>Number.EPSILON){let f=Math.sqrt(p),v=Math.sqrt(c*c+h*h),y=t.x-u/f,_=t.y+s/f,x=n.x-h/v,b=((x-y)*h-(n.y+c/v-_)*c)/(s*h-u*c);r=y+s*b-e.x;let S=r*r+(i=_+u*b-e.y)*i;if(S<=2)return new ij(r,i);a=Math.sqrt(S/2)}else{let e=!1;s>Number.EPSILON?c>Number.EPSILON&&(e=!0):s<-Number.EPSILON?c<-Number.EPSILON&&(e=!0):Math.sign(u)===Math.sign(h)&&(e=!0),e?(r=-u,i=s,a=Math.sqrt(p)):(r=s,i=u,a=Math.sqrt(p/2))}return new ij(r/a,i/a)}let N=[];for(let e=0,t=R.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),N[e]=B(R[e],R[n],R[r]);let F=[],z,U=N.concat();for(let e=0,t=D.length;e<t;e++){let t=D[e];z=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),z[e]=B(t[e],t[r],t[i]);F.push(z),U=U.concat(z)}for(let e=0;e<S;e++){let t=e/S,n=_*Math.cos(t*Math.PI/2),r=x*Math.sin(t*Math.PI/2)+b;for(let e=0,t=R.length;e<t;e++){let t=L(R[e],N[e],r);V(t.x,t.y,-n)}for(let e=0,t=D.length;e<t;e++){let t=D[e];z=F[e];for(let e=0,i=t.length;e<i;e++){let i=L(t[e],z[e],r);V(i.x,i.y,-n)}}}let H=x+b;for(let e=0;e<O;e++){let t=y?L(I[e],U[e],H):I[e];C?(u.copy(a.normals[0]).multiplyScalar(t.x),s.copy(a.binormals[0]).multiplyScalar(t.y),c.copy(A[0]).add(u).add(s),V(c.x,c.y,c.z)):V(t.x,t.y,0)}for(let e=1;e<=f;e++)for(let t=0;t<O;t++){let n=y?L(I[t],U[t],H):I[t];C?(u.copy(a.normals[e]).multiplyScalar(n.x),s.copy(a.binormals[e]).multiplyScalar(n.y),c.copy(A[e]).add(u).add(s),V(c.x,c.y,c.z)):V(n.x,n.y,v/f*e)}for(let e=S-1;e>=0;e--){let t=e/S,n=_*Math.cos(t*Math.PI/2),r=x*Math.sin(t*Math.PI/2)+b;for(let e=0,t=R.length;e<t;e++){let t=L(R[e],N[e],r);V(t.x,t.y,v+n)}for(let e=0,t=D.length;e<t;e++){let t=D[e];z=F[e];for(let e=0,i=t.length;e<i;e++){let i=L(t[e],z[e],r);C?V(i.x,i.y+A[f-1].y,A[f-1].x+n):V(i.x,i.y,v+n)}}}(function(){let e=r.length/3;if(y){let e=0,t=0*O;for(let e=0;e<k;e++){let n=P[e];W(n[2]+t,n[1]+t,n[0]+t)}t=O*(e=f+2*S);for(let e=0;e<k;e++){let n=P[e];W(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<k;e++){let t=P[e];W(t[2],t[1],t[0])}for(let e=0;e<k;e++){let t=P[e];W(t[0]+O*f,t[1]+O*f,t[2]+O*f)}}n.addGroup(e,r.length/3-e,0)})(),function(){let e=r.length/3,t=0;G(R,0),t+=R.length;for(let e=0,n=D.length;e<n;e++){let n=D[e];G(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}();function G(e,t){let i=e.length;for(;--i>=0;){let a=i,s=i-1;s<0&&(s=e.length-1);for(let e=0,i=f+2*S;e<i;e++){let i=O*e,u=O*(e+1);(function(e,t,i,a){j(e),j(t),j(a),j(t),j(i),j(a);let s=r.length/3,u=M.generateSideWallUV(n,r,s-6,s-3,s-2,s-1);X(u[0]),X(u[1]),X(u[3]),X(u[1]),X(u[2]),X(u[3])})(t+a+i,t+s+i,t+s+u,t+a+u)}}}function V(e,t,n){h.push(e),h.push(t),h.push(n)}function W(e,t,i){j(e),j(t),j(i);let a=r.length/3,s=M.generateTopUV(n,r,a-3,a-2,a-1);X(s[0]),X(s[1]),X(s[2])}function j(e){r.push(h[3*e+0]),r.push(h[3*e+1]),r.push(h[3*e+2])}function X(e){i.push(e.x),i.push(e.y)}})(e[a]);this.setAttribute("position",new oj(r,3)),this.setAttribute("uv",new oj(i,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes;return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){let r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(t,this.parameters.options,e)}static fromJSON(e,t){let n=[];for(let r=0,i=e.shapes.length;r<i;r++){let i=t[e.shapes[r]];n.push(i)}let r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=new hD[r.type]().fromJSON(r)),new dn(n,e.options)}}let dr={generateTopUV:function(e,t,n,r,i){let a=t[3*n],s=t[3*n+1],u=t[3*r],c=t[3*r+1],h=t[3*i],p=t[3*i+1];return[new ij(a,s),new ij(u,c),new ij(h,p)]},generateSideWallUV:function(e,t,n,r,i,a){let s=t[3*n],u=t[3*n+1],c=t[3*n+2],h=t[3*r],p=t[3*r+1],f=t[3*r+2],v=t[3*i],y=t[3*i+1],_=t[3*i+2],x=t[3*a],b=t[3*a+1],S=t[3*a+2];return Math.abs(u-p)<Math.abs(s-h)?[new ij(s,1-c),new ij(h,1-f),new ij(v,1-_),new ij(x,1-S)]:[new ij(u,1-c),new ij(p,1-f),new ij(y,1-_),new ij(b,1-S)]}};class di extends hF{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new di(e.radius,e.detail)}}class da extends hF{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new da(e.radius,e.detail)}}class ds extends o${constructor(e=.5,t=1,n=32,r=1,i=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},n=Math.max(3,n);let s=[],u=[],c=[],h=[],p=e,f=(t-e)/(r=Math.max(1,r)),v=new ap,y=new ij;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){let r=i+e/n*a;v.x=p*Math.cos(r),v.y=p*Math.sin(r),u.push(v.x,v.y,v.z),c.push(0,0,1),y.x=(v.x/t+1)/2,y.y=(v.y/t+1)/2,h.push(y.x,y.y)}p+=f}for(let e=0;e<r;e++){let t=e*(n+1);for(let e=0;e<n;e++){let r=e+t,i=r+n+1,a=r+n+2,u=r+1;s.push(r,i,u),s.push(i,a,u)}}this.setIndex(s),this.setAttribute("position",new oj(u,3)),this.setAttribute("normal",new oj(c,3)),this.setAttribute("uv",new oj(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ds(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class dl extends o${constructor(e=new hj([new ij(0,.5),new ij(-.5,-.5),new ij(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let n=[],r=[],i=[],a=[],s=0,u=0;if(!1===Array.isArray(e))c(e);else for(let t=0;t<e.length;t++)c(e[t]),this.addGroup(s,u,t),s+=u,u=0;function c(e){let s=r.length/3,c=e.extractPoints(t),h=c.shape,p=c.holes;!1===h7.isClockWise(h)&&(h=h.reverse());for(let e=0,t=p.length;e<t;e++){let t=p[e];!0===h7.isClockWise(t)&&(p[e]=t.reverse())}let f=h7.triangulateShape(h,p);for(let e=0,t=p.length;e<t;e++){let t=p[e];h=h.concat(t)}for(let e=0,t=h.length;e<t;e++){let t=h[e];r.push(t.x,t.y,0),i.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=f.length;e<t;e++){let t=f[e],r=t[0]+s,i=t[1]+s,a=t[2]+s;n.push(r,i,a),u+=3}}this.setIndex(n),this.setAttribute("position",new oj(r,3)),this.setAttribute("normal",new oj(i,3)),this.setAttribute("uv",new oj(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){let r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){let n=[];for(let r=0,i=e.shapes.length;r<i;r++){let i=t[e.shapes[r]];n.push(i)}return new dl(n,e.curveSegments)}}class du extends o${constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));let u=Math.min(a+s,Math.PI),c=0,h=[],p=new ap,f=new ap,v=[],y=[],_=[],x=[];for(let v=0;v<=n;v++){let b=[],S=v/n,w=0;0===v&&0===a?w=.5/t:v===n&&u===Math.PI&&(w=-.5/t);for(let n=0;n<=t;n++){let u=n/t;p.x=-e*Math.cos(r+u*i)*Math.sin(a+S*s),p.y=e*Math.cos(a+S*s),p.z=e*Math.sin(r+u*i)*Math.sin(a+S*s),y.push(p.x,p.y,p.z),f.copy(p).normalize(),_.push(f.x,f.y,f.z),x.push(u+w,1-S),b.push(c++)}h.push(b)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){let t=h[e][r+1],i=h[e][r],s=h[e+1][r],c=h[e+1][r+1];(0!==e||a>0)&&v.push(t,i,c),(e!==n-1||u<Math.PI)&&v.push(i,s,c)}this.setIndex(v),this.setAttribute("position",new oj(y,3)),this.setAttribute("normal",new oj(_,3)),this.setAttribute("uv",new oj(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new du(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class dc extends hF{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new dc(e.radius,e.detail)}}class dh extends o${constructor(e=1,t=.4,n=12,r=48,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);let a=[],s=[],u=[],c=[],h=new ap,p=new ap,f=new ap;for(let a=0;a<=n;a++)for(let v=0;v<=r;v++){let y=v/r*i,_=a/n*Math.PI*2;p.x=(e+t*Math.cos(_))*Math.cos(y),p.y=(e+t*Math.cos(_))*Math.sin(y),p.z=t*Math.sin(_),s.push(p.x,p.y,p.z),h.x=e*Math.cos(y),h.y=e*Math.sin(y),f.subVectors(p,h).normalize(),u.push(f.x,f.y,f.z),c.push(v/r),c.push(a/n)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){let n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,s=(r+1)*(e-1)+t,u=(r+1)*e+t;a.push(n,i,u),a.push(i,s,u)}this.setIndex(a),this.setAttribute("position",new oj(s,3)),this.setAttribute("normal",new oj(u,3)),this.setAttribute("uv",new oj(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dh(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class dd extends o${constructor(e=1,t=.4,n=64,r=8,i=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},n=Math.floor(n),r=Math.floor(r);let s=[],u=[],c=[],h=[],p=new ap,f=new ap,v=new ap,y=new ap,_=new ap,x=new ap,b=new ap;for(let s=0;s<=n;++s){let w=s/n*i*Math.PI*2;S(w,i,a,e,v),S(w+.01,i,a,e,y),x.subVectors(y,v),b.addVectors(y,v),_.crossVectors(x,b),b.crossVectors(_,x),_.normalize(),b.normalize();for(let e=0;e<=r;++e){let i=e/r*Math.PI*2,a=-t*Math.cos(i),y=t*Math.sin(i);p.x=v.x+(a*b.x+y*_.x),p.y=v.y+(a*b.y+y*_.y),p.z=v.z+(a*b.z+y*_.z),u.push(p.x,p.y,p.z),f.subVectors(p,v).normalize(),c.push(f.x,f.y,f.z),h.push(s/n),h.push(e/r)}}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){let n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,u=(r+1)*(e-1)+t;s.push(n,i,u),s.push(i,a,u)}function S(e,t,n,r,i){let a=Math.cos(e),s=Math.sin(e),u=n/t*e,c=Math.cos(u);i.x=r*(2+c)*.5*a,i.y=r*(2+c)*s*.5,i.z=r*Math.sin(u)*.5}this.setIndex(s),this.setAttribute("position",new oj(u,3)),this.setAttribute("normal",new oj(c,3)),this.setAttribute("uv",new oj(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dd(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class dp extends o${constructor(e=new hE(new ap(-1,-1,0),new ap(-1,1,0),new ap(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};let a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;let s=new ap,u=new ap,c=new ij,h=new ap,p=[],f=[],v=[],y=[];(function(){for(let e=0;e<t;e++)_(e);_(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)c.x=e/t,c.y=n/r,v.push(c.x,c.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){let n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,s=(r+1)*(e-1)+t;y.push(n,i,s),y.push(i,a,s)}}()})(),this.setIndex(y),this.setAttribute("position",new oj(p,3)),this.setAttribute("normal",new oj(f,3)),this.setAttribute("uv",new oj(v,2));function _(i){h=e.getPointAt(i/t,h);let c=a.normals[i],v=a.binormals[i];for(let e=0;e<=r;e++){let t=e/r*Math.PI*2,i=Math.sin(t),a=-Math.cos(t);u.x=a*c.x+i*v.x,u.y=a*c.y+i*v.y,u.z=a*c.z+i*v.z,u.normalize(),f.push(u.x,u.y,u.z),s.x=h.x+n*u.x,s.y=h.y+n*u.y,s.z=h.z+n*u.z,p.push(s.x,s.y,s.z)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new dp(new hD[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class df extends o${constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){let t=[],n=new Set,r=new ap,i=new ap;if(null!==e.index){let a=e.attributes.position,s=e.index,u=e.groups;0===u.length&&(u=[{start:0,count:s.count,materialIndex:0}]);for(let e=0,c=u.length;e<c;++e){let c=u[e],h=c.start,p=c.count;for(let e=h,u=h+p;e<u;e+=3)for(let u=0;u<3;u++){let c=s.getX(e+u),h=s.getX(e+(u+1)%3);r.fromBufferAttribute(a,c),i.fromBufferAttribute(a,h),!0===dg(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{let a=e.attributes.position;for(let e=0,s=a.count/3;e<s;e++)for(let s=0;s<3;s++){let u=3*e+s,c=3*e+(s+1)%3;r.fromBufferAttribute(a,u),i.fromBufferAttribute(a,c),!0===dg(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new oj(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function dg(e,t,n){let r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var dm=Object.freeze({__proto__:null,BoxGeometry:sr,CapsuleGeometry:hO,CircleGeometry:hk,ConeGeometry:hN,CylinderGeometry:hB,DodecahedronGeometry:hz,EdgesGeometry:hW,ExtrudeGeometry:dn,IcosahedronGeometry:di,LatheGeometry:hL,OctahedronGeometry:da,PlaneGeometry:sC,PolyhedronGeometry:hF,RingGeometry:ds,ShapeGeometry:dl,SphereGeometry:du,TetrahedronGeometry:dc,TorusGeometry:dh,TorusKnotGeometry:dd,TubeGeometry:dp,WireframeGeometry:df});class dv extends oE{static get type(){return"ShadowMaterial"}constructor(e){super(),this.isShadowMaterial=!0,this.color=new oA(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class dy extends sl{static get type(){return"RawShaderMaterial"}constructor(e){super(e),this.isRawShaderMaterial=!0}}class d_ extends oE{static get type(){return"MeshStandardMaterial"}constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.color=new oA(0xffffff),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oA(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rK,this.normalScale=new ij(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new a$,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dx extends d_{static get type(){return"MeshPhysicalMaterial"}constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ij(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return iz(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new oA(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new oA(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new oA(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class db extends oE{static get type(){return"MeshPhongMaterial"}constructor(e){super(),this.isMeshPhongMaterial=!0,this.color=new oA(0xffffff),this.specular=new oA(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oA(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rK,this.normalScale=new ij(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new a$,this.combine=nl,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dS extends oE{static get type(){return"MeshToonMaterial"}constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.color=new oA(0xffffff),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oA(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rK,this.normalScale=new ij(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class dw extends oE{static get type(){return"MeshNormalMaterial"}constructor(e){super(),this.isMeshNormalMaterial=!0,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rK,this.normalScale=new ij(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class dM extends oE{static get type(){return"MeshLambertMaterial"}constructor(e){super(),this.isMeshLambertMaterial=!0,this.color=new oA(0xffffff),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oA(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rK,this.normalScale=new ij(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new a$,this.combine=nl,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dA extends oE{static get type(){return"MeshMatcapMaterial"}constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.color=new oA(0xffffff),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rK,this.normalScale=new ij(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dC extends cJ{static get type(){return"LineDashedMaterial"}constructor(e){super(),this.isLineDashedMaterial=!0,this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function dT(e,t,n){return e&&(n||e.constructor!==t)?"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function dE(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function dI(e){let t=e.length,n=Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort(function(t,n){return e[t]-e[n]}),n}function dD(e,t,n){let r=e.length,i=new e.constructor(r);for(let a=0,s=0;s!==r;++a){let r=n[a]*t;for(let n=0;n!==t;++n)i[s++]=e[r+n]}return i}function dP(e,t,n,r){let i=1,a=e[0];for(;void 0!==a&&void 0===a[r];)a=e[i++];if(void 0===a)return;let s=a[r];if(void 0!==s){if(Array.isArray(s))do void 0!==(s=a[r])&&(t.push(a.time),n.push.apply(n,s)),a=e[i++];while(void 0!==a);else if(void 0!==s.toArray)do void 0!==(s=a[r])&&(t.push(a.time),s.toArray(n,n.length)),a=e[i++];while(void 0!==a);else do void 0!==(s=a[r])&&(t.push(a.time),n.push(s)),a=e[i++];while(void 0!==a)}}let dR={convertArray:dT,isTypedArray:dE,getKeyframeOrder:dI,sortedArray:dD,flattenJSON:dP,subclip:function(e,t,n,r,i=30){let a=e.clone();a.name=t;let s=[];for(let e=0;e<a.tracks.length;++e){let t=a.tracks[e],u=t.getValueSize(),c=[],h=[];for(let e=0;e<t.times.length;++e){let a=t.times[e]*i;if(!(a<n)&&!(a>=r)){c.push(t.times[e]);for(let n=0;n<u;++n)h.push(t.values[e*u+n])}}0!==c.length&&(t.times=dT(c,t.times.constructor),t.values=dT(h,t.values.constructor),s.push(t))}a.tracks=s;let u=1/0;for(let e=0;e<a.tracks.length;++e)u>a.tracks[e].times[0]&&(u=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*u);return a.resetDuration(),a},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);let i=n.tracks.length,a=t/r;for(let t=0;t<i;++t){let r;let i=n.tracks[t],s=i.ValueTypeName;if("bool"===s||"string"===s)continue;let u=e.tracks.find(function(e){return e.name===i.name&&e.ValueTypeName===s});if(void 0===u)continue;let c=0,h=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);let p=0,f=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=f/3);let v=i.times.length-1;if(a<=i.times[0]){let e=c,t=h-c;r=i.values.slice(e,t)}else if(a>=i.times[v]){let e=v*h+c,t=e+h-c;r=i.values.slice(e,t)}else{let e=i.createInterpolant(),t=c,n=h-c;e.evaluate(a),r=e.resultBuffer.slice(t,n)}"quaternion"===s&&new ad().fromArray(r).normalize().conjugate().toArray(r);let y=u.times.length;for(let e=0;e<y;++e){let t=e*f+p;if("quaternion"===s)ad.multiplyQuaternionsFlat(u.values,t,r,0,u.values,t);else{let e=f-2*p;for(let n=0;n<e;++n)u.values[t+n]-=r[n]}}}return e.blendMode=rV,e}};class dL{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];n:{r:{let a;i:{a:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<i)break a;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,e<(r=t[++n]))break r}a=t.length;break i}if(!(e>=i)){let s=t[1];e<s&&(n=2,i=s);for(let a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(r=i,e>=(i=t[--n-1]))break r}a=n,n=0;break i}break n}for(;n<a;){let r=n+a>>>1;e<t[r]?a=r:n=r+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw Error("call to abstract method")}intervalChanged_(){}}class dO extends dL{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:rz,endingEnd:rz}}intervalChanged_(e,t,n){let r=this.parameterPositions,i=e-2,a=e+1,s=r[i],u=r[a];if(void 0===s)switch(this.getSettings_().endingStart){case rU:i=e,s=2*t-n;break;case rH:i=r.length-2,s=t+r[i]-r[i+1];break;default:i=e,s=n}if(void 0===u)switch(this.getSettings_().endingEnd){case rU:a=e,u=2*n-t;break;case rH:a=1,u=n+r[1]-r[0];break;default:a=e-1,u=t}let c=(n-t)*.5,h=this.valueSize;this._weightPrev=c/(t-s),this._weightNext=c/(u-n),this._offsetPrev=i*h,this._offsetNext=a*h}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,u=e*s,c=u-s,h=this._offsetPrev,p=this._offsetNext,f=this._weightPrev,v=this._weightNext,y=(n-t)/(r-t),_=y*y,x=_*y,b=-f*x+2*f*_-f*y,S=(1+f)*x+(-1.5-2*f)*_+(-.5+f)*y+1,w=(-1-v)*x+(1.5+v)*_+.5*y,M=v*x-v*_;for(let e=0;e!==s;++e)i[e]=b*a[h+e]+S*a[c+e]+w*a[u+e]+M*a[p+e];return i}}class dk extends dL{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,u=e*s,c=u-s,h=(n-t)/(r-t),p=1-h;for(let e=0;e!==s;++e)i[e]=a[c+e]*p+a[u+e]*h;return i}}class dB extends dL{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class dN{constructor(e,t,n,r){if(void 0===e)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=dT(t,this.TimeBufferType),this.values=dT(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t;let n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:dT(e.times,Array),values:dT(e.values,Array)};let n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new dB(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new dk(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new dO(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case rB:t=this.InterpolantFactoryMethodDiscrete;break;case rN:t=this.InterpolantFactoryMethodLinear;break;case rF:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){let t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(t)}return this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return rB;case this.InterpolantFactoryMethodLinear:return rN;case this.InterpolantFactoryMethodSmooth:return rF}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){let n=this.times,r=n.length,i=0,a=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);let e=this.getValueSize();this.times=n.slice(i,a),this.values=this.values.slice(i*e,a*e)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(e=!1);let n=this.times,r=this.values,i=n.length;0===i&&(e=!1);let a=null;for(let t=0;t!==i;t++){let r=n[t];if("number"==typeof r&&isNaN(r)||null!==a&&a>r){e=!1;break}a=r}if(void 0!==r&&dE(r)){for(let t=0,n=r.length;t!==n;++t)if(isNaN(r[t])){e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===rF,i=e.length-1,a=1;for(let s=1;s<i;++s){let i=!1,u=e[s];if(u!==e[s+1]&&(1!==s||u!==e[0])){if(r)i=!0;else{let e=s*n,r=e-n,a=e+n;for(let s=0;s!==n;++s){let n=t[e+s];if(n!==t[r+s]||n!==t[a+s]){i=!0;break}}}}if(i){if(s!==a){e[a]=e[s];let r=s*n,i=a*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++a}}if(i>0){e[a]=e[i];for(let e=i*n,r=a*n,s=0;s!==n;++s)t[r+s]=t[e+s];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),n=new this.constructor(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}dN.prototype.TimeBufferType=Float32Array,dN.prototype.ValueBufferType=Float32Array,dN.prototype.DefaultInterpolation=rN;class dF extends dN{constructor(e,t,n){super(e,t,n)}}dF.prototype.ValueTypeName="bool",dF.prototype.ValueBufferType=Array,dF.prototype.DefaultInterpolation=rB,dF.prototype.InterpolantFactoryMethodLinear=void 0,dF.prototype.InterpolantFactoryMethodSmooth=void 0;class dz extends dN{}dz.prototype.ValueTypeName="color";class dU extends dN{}dU.prototype.ValueTypeName="number";class dH extends dL{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,u=(n-t)/(r-t),c=e*s;for(let e=c+s;c!==e;c+=4)ad.slerpFlat(i,0,a,c-s,a,c,u);return i}}class dG extends dN{InterpolantFactoryMethodLinear(e){return new dH(this.times,this.values,this.getValueSize(),e)}}dG.prototype.ValueTypeName="quaternion",dG.prototype.InterpolantFactoryMethodSmooth=void 0;class dV extends dN{constructor(e,t,n){super(e,t,n)}}dV.prototype.ValueTypeName="string",dV.prototype.ValueBufferType=Array,dV.prototype.DefaultInterpolation=rB,dV.prototype.InterpolantFactoryMethodLinear=void 0,dV.prototype.InterpolantFactoryMethodSmooth=void 0;class dW extends dN{}dW.prototype.ValueTypeName="vector";class dj{constructor(e="",t=-1,n=[],r=rG){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=iF(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push((function(e){if(void 0===e.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return dU;case"vector":case"vector2":case"vector3":case"vector4":return dW;case"color":return dz;case"quaternion":return dG;case"bool":case"boolean":return dF;case"string":return dV}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){let t=[],n=[];dP(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)})(n[e]).scale(r));let i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){let t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(dN.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){let i=t.length,a=[];for(let e=0;e<i;e++){let s=[],u=[];s.push((e+i-1)%i,e,(e+1)%i),u.push(0,1,0);let c=dI(s);s=dD(s,1,c),u=dD(u,1,c),!r&&0===s[0]&&(s.push(i),u.push(u[0])),a.push(new dU(".morphTargetInfluences["+t[e].name+"]",s,u).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;!Array.isArray(e)&&(n=e.geometry&&e.geometry.animations||e.animations);for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){let r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){let n=e[t],a=n.name.match(i);if(a&&a.length>1){let e=a[1],t=r[e];!t&&(r[e]=t=[]),t.push(n)}}let a=[];for(let e in r)a.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return a}static parseAnimation(e,t){if(!e)return null;let n=function(e,t,n,r,i){if(0!==n.length){let a=[],s=[];dP(n,a,s,r),0!==a.length&&i.push(new e(t,a,s))}},r=[],i=e.name||"default",a=e.fps||30,s=e.blendMode,u=e.length||-1,c=e.hierarchy||[];for(let e=0;e<c.length;e++){let i=c[e].keys;if(i&&0!==i.length){if(i[0].morphTargets){let e;let t={};for(e=0;e<i.length;e++)if(i[e].morphTargets)for(let n=0;n<i[e].morphTargets.length;n++)t[i[e].morphTargets[n]]=-1;for(let n in t){let t=[],a=[];for(let r=0;r!==i[e].morphTargets.length;++r){let r=i[e];t.push(r.time),a.push(r.morphTarget===n?1:0)}r.push(new dU(".morphTargetInfluence["+n+"]",t,a))}u=t.length*a}else{let a=".bones["+t[e].name+"]";n(dW,a+".position",i,"pos",r),n(dG,a+".quaternion",i,"rot",r),n(dW,a+".scale",i,"scl",r)}}}return 0===r.length?null:new this(i,u,r,s)}resetDuration(){let e=this.tracks,t=0;for(let n=0,r=e.length;n!==r;++n){let e=this.tracks[n];t=Math.max(t,e.times[e.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}let dX={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class dY{constructor(e,t,n){let r,i=this,a=!1,s=0,u=0;let c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){u++,!1===a&&void 0!==i.onStart&&i.onStart(e,s,u),a=!0},this.itemEnd=function(e){s++,void 0!==i.onProgress&&i.onProgress(e,s,u),s===u&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){let t=c.indexOf(e);return -1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=c.length;t<n;t+=2){let n=c[t],r=c[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}let dJ=new dY;class dZ{constructor(e){this.manager=void 0!==e?e:dJ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let n=this;return new Promise(function(r,i){n.load(e,r,t,i)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}dZ.DEFAULT_MATERIAL_NAME="__DEFAULT";let dq={};class dK extends Error{constructor(e,t){super(e),this.response=t}}class dQ extends dZ{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=dX.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout(()=>{t&&t(i),this.manager.itemEnd(e)},0),i;if(void 0!==dq[e]){dq[e].push({onLoad:t,onProgress:n,onError:r});return}dq[e]=[],dq[e].push({onLoad:t,onProgress:n,onError:r});let a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,u=this.responseType;fetch(a).then(t=>{if(200===t.status||0===t.status){if(t.status,"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;let n=dq[e],r=t.body.getReader(),i=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),a=i?parseInt(i):0,s=0!==a,u=0;return new Response(new ReadableStream({start(e){(function t(){r.read().then(({done:r,value:i})=>{if(r)e.close();else{let r=new ProgressEvent("progress",{lengthComputable:s,loaded:u+=i.byteLength,total:a});for(let e=0,t=n.length;e<t;e++){let t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}},t=>{e.error(t)})})()}}))}throw new dK(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)}).then(e=>{switch(u){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>new DOMParser().parseFromString(e,s));case"json":return e.json();default:if(void 0===s)return e.text();{let t=/charset="?([^;"\s]*)"?/i.exec(s),n=new TextDecoder(t&&t[1]?t[1].toLowerCase():void 0);return e.arrayBuffer().then(e=>n.decode(e))}}}).then(t=>{dX.add(e,t);let n=dq[e];delete dq[e];for(let e=0,r=n.length;e<r;e++){let r=n[e];r.onLoad&&r.onLoad(t)}}).catch(t=>{let n=dq[e];if(void 0===n)throw this.manager.itemError(e),t;delete dq[e];for(let e=0,r=n.length;e<r;e++){let r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class d$ extends dZ{constructor(e){super(e)}load(e,t,n,r){let i=this,a=new dQ(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r&&r(t),i.manager.itemError(e)}},n,r)}parse(e){let t=[];for(let n=0;n<e.length;n++){let r=dj.parse(e[n]);t.push(r)}return t}}class d0 extends dZ{constructor(e){super(e)}load(e,t,n,r){let i=this,a=[],s=new hs,u=new dQ(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(i.withCredentials);let c=0;if(Array.isArray(e))for(let h=0,p=e.length;h<p;++h)!function(h){u.load(e[h],function(e){let n=i.parse(e,!0);a[h]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(c+=1)&&(1===n.mipmapCount&&(s.minFilter=nk),s.image=a,s.format=n.format,s.needsUpdate=!0,t&&t(s))},n,r)}(h);else u.load(e,function(e){let n=i.parse(e,!0);if(n.isCubemap){let e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)a[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),a[t].format=n.format,a[t].width=n.width,a[t].height=n.height}s.image=a}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=nk),s.format=n.format,s.needsUpdate=!0,t&&t(s)},n,r);return s}}class d1 extends dZ{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=this,a=dX.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;let s=iK("img");function u(){h(),dX.add(e,this),t&&t(this),i.manager.itemEnd(e)}function c(t){h(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function h(){s.removeEventListener("load",u,!1),s.removeEventListener("error",c,!1)}return s.addEventListener("load",u,!1),s.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(e),s.src=e,s}}class d2 extends dZ{constructor(e){super(e)}load(e,t,n,r){let i=new sg;i.colorSpace=r0;let a=new d1(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;for(let n=0;n<e.length;++n)!function(n){a.load(e[n],function(e){i.images[n]=e,6==++s&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}(n);return i}}class d3 extends dZ{constructor(e){super(e)}load(e,t,n,r){let i=this,a=new c_,s=new dQ(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(i.withCredentials),s.load(e,function(e){let n;try{n=i.parse(e)}catch(e){if(void 0===r)return;r(e)}void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:nE,a.wrapT=void 0!==n.wrapT?n.wrapT:nE,a.magFilter=void 0!==n.magFilter?n.magFilter:nk,a.minFilter=void 0!==n.minFilter?n.minFilter:nk,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(a.colorSpace=n.colorSpace),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=nF),1===n.mipmapCount&&(a.minFilter=nk),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n)},n,r),a}}class d5 extends dZ{constructor(e){super(e)}load(e,t,n,r){let i=new ai,a=new d1(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i}}class d4 extends oo{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new oA(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}class d6 extends d4{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(oo.DEFAULT_UP),this.updateMatrix(),this.groundColor=new oA(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}let d9=new aV,d8=new ap,d7=new ap;class pe{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ij(512,512),this.map=null,this.mapPass=null,this.matrix=new aV,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new sw,this._frameExtents=new ij(1,1),this._viewportCount=1,this._viewports=[new aa(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,n=this.matrix;d8.setFromMatrixPosition(e.matrixWorld),t.position.copy(d8),d7.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(d7),t.updateMatrixWorld(),d9.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(d9),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(d9)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class pt extends pe{constructor(){super(new sp(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,n=2*iN*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;(n!==t.fov||r!==t.aspect||i!==t.far)&&(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class pn extends d4{constructor(e,t,n=0,r=Math.PI/3,i=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(oo.DEFAULT_UP),this.updateMatrix(),this.target=new oo,this.distance=n,this.angle=r,this.penumbra=i,this.decay=a,this.map=null,this.shadow=new pt}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}let pr=new aV,pi=new ap,pa=new ap;class po extends pe{constructor(){super(new sp(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ij(4,2),this._viewportCount=6,this._viewports=[new aa(2,1,1,1),new aa(0,1,1,1),new aa(3,1,1,1),new aa(1,1,1,1),new aa(3,0,1,1),new aa(1,0,1,1)],this._cubeDirections=[new ap(1,0,0),new ap(-1,0,0),new ap(0,0,1),new ap(0,0,-1),new ap(0,1,0),new ap(0,-1,0)],this._cubeUps=[new ap(0,1,0),new ap(0,1,0),new ap(0,1,0),new ap(0,1,0),new ap(0,0,1),new ap(0,0,-1)]}updateMatrices(e,t=0){let n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),pi.setFromMatrixPosition(e.matrixWorld),n.position.copy(pi),pa.copy(n.position),pa.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(pa),n.updateMatrixWorld(),r.makeTranslation(-pi.x,-pi.y,-pi.z),pr.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(pr)}}class ps extends d4{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new po}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class pl extends pe{constructor(){super(new sz(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class pu extends d4{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(oo.DEFAULT_UP),this.updateMatrix(),this.target=new oo,this.shadow=new pl}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class pc extends d4{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ph extends d4{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){let t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class pd{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ap)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){let n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){let n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){let n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){let n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){let n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class pp extends d4{constructor(e=new pd,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){let t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class pf extends dZ{constructor(e){super(e),this.textures={}}load(e,t,n,r){let i=this,a=new dQ(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r&&r(t),i.manager.itemError(e)}},n,r)}parse(e){let t=this.textures;function n(e){return t[e],t[e]}let r=this.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=new oA().setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(r.dispersion=e.dispersion),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(r.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(r.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(r.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(r.depthFunc=e.depthFunc),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(r.blendSrc=e.blendSrc),void 0!==e.blendDst&&(r.blendDst=e.blendDst),void 0!==e.blendEquation&&(r.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(r.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(r.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(r.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(r.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),void 0!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(let t in e.uniforms){let i=e.uniforms[t];switch(r.uniforms[t]={},i.type){case"t":r.uniforms[t].value=n(i.value);break;case"c":r.uniforms[t].value=new oA().setHex(i.value);break;case"v2":r.uniforms[t].value=new ij().fromArray(i.value);break;case"v3":r.uniforms[t].value=new ap().fromArray(i.value);break;case"v4":r.uniforms[t].value=new aa().fromArray(i.value);break;case"m3":r.uniforms[t].value=new iX().fromArray(i.value);break;case"m4":r.uniforms[t].value=new aV().fromArray(i.value);break;default:r.uniforms[t].value=i.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(let t in e.extensions)r.extensions[t]=e.extensions[t];if(void 0!==e.lights&&(r.lights=e.lights),void 0!==e.clipping&&(r.clipping=e.clipping),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=new ij().fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapRotation&&r.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=new ij().fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(r.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return pf.createMaterialFromType(e)}static createMaterialFromType(e){return new({ShadowMaterial:dv,SpriteMaterial:u0,RawShaderMaterial:dy,ShaderMaterial:sl,PointsMaterial:c8,MeshPhysicalMaterial:dx,MeshStandardMaterial:d_,MeshPhongMaterial:db,MeshToonMaterial:dS,MeshNormalMaterial:dw,MeshLambertMaterial:dM,MeshDepthMaterial:uC,MeshDistanceMaterial:uT,MeshBasicMaterial:oI,MeshMatcapMaterial:dA,LineDashedMaterial:dC,LineBasicMaterial:cJ,Material:oE})[e]}}class pg{static decodeText(e){if("undefined"!=typeof TextDecoder)return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){let t=e.lastIndexOf("/");return -1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e))?e:t+e}}class pm extends o${constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class pv extends dZ{constructor(e){super(e)}load(e,t,n,r){let i=this,a=new dQ(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r&&r(t),i.manager.itemError(e)}},n,r)}parse(e){let t={},n={};function r(e,r){if(void 0!==t[r])return t[r];let i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];let r=new Uint32Array(e.arrayBuffers[t]).buffer;return n[t]=r,r}(e,i.buffer),s=new uK(iq(i.type,a),i.stride);return s.uuid=i.uuid,t[r]=s,s}let i=e.isInstancedBufferGeometry?new pm:new o$,a=e.data.index;if(void 0!==a){let e=iq(a.type,a.array);i.setIndex(new oB(e,1))}let s=e.data.attributes;for(let t in s){let n;let a=s[t];if(a.isInterleavedBufferAttribute)n=new u$(r(e.data,a.data),a.itemSize,a.offset,a.normalized);else{let e=iq(a.type,a.array);n=new(a.isInstancedBufferAttribute?cw:oB)(e,a.itemSize,a.normalized)}void 0!==a.name&&(n.name=a.name),void 0!==a.usage&&n.setUsage(a.usage),i.setAttribute(t,n)}let u=e.data.morphAttributes;if(u)for(let t in u){let n=u[t],a=[];for(let t=0,i=n.length;t<i;t++){let i;let s=n[t];i=s.isInterleavedBufferAttribute?new u$(r(e.data,s.data),s.itemSize,s.offset,s.normalized):new oB(iq(s.type,s.array),s.itemSize,s.normalized),void 0!==s.name&&(i.name=s.name),a.push(i)}i.morphAttributes[t]=a}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);let c=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==c)for(let e=0,t=c.length;e!==t;++e){let t=c[e];i.addGroup(t.start,t.count,t.materialIndex)}let h=e.data.boundingSphere;if(void 0!==h){let e=new ap;void 0!==h.center&&e.fromArray(h.center),i.boundingSphere=new aO(e,h.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class py extends dZ{constructor(e){super(e)}load(e,t,n,r){let i=this,a=""===this.path?pg.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;let s=new dQ(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(n){let a=null;try{a=JSON.parse(n)}catch(e){void 0!==r&&r(e);return}let s=a.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase()){void 0!==r&&r(Error("THREE.ObjectLoader: Can't load "+e));return}i.parse(a,t)},n,r)}async loadAsync(e,t){let n=""===this.path?pg.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;let r=new dQ(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);let i=JSON.parse(await r.loadAsync(e,t)),a=i.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(i)}parse(e,t){let n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){void 0!==t&&t(c)}),s=this.parseTextures(e.textures,a),u=this.parseMaterials(e.materials,s),c=this.parseObject(e.object,i,u,s,n),h=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,h),this.bindLightTargets(c),void 0!==t){let e=!1;for(let t in a)if(a[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(c)}return c}async parseAsync(e){let t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,i),s=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,r,s,a,t),c=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,c),this.bindLightTargets(u),u}parseShapes(e){let t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){let r=new hj().fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){let n={},r={};if(t.traverse(function(e){e.isBone&&(r[e.uuid]=e)}),void 0!==e)for(let t=0,i=e.length;t<i;t++){let i=new cS().fromJSON(e[t],r);n[i.uuid]=i}return n}parseGeometries(e,t){let n={};if(void 0!==e){let r=new pv;for(let i=0,a=e.length;i<a;i++){let a;let s=e[i];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;default:s.type in dm&&(a=dm[s.type].fromJSON(s,t))}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n}parseMaterials(e,t){let n={},r={};if(void 0!==e){let i=new pf;i.setTextures(t);for(let t=0,a=e.length;t<a;t++){let a=e[t];void 0===n[a.uuid]&&(n[a.uuid]=i.parse(a)),r[a.uuid]=n[a.uuid]}}return r}parseAnimations(e){let t={};if(void 0!==e)for(let n=0;n<e.length;n++){let r=e[n],i=dj.parse(r);t[i.uuid]=i}return t}parseImages(e,t){let n;let r=this,i={};function a(e){if("string"==typeof e){var t;return t=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:r.resourcePath+e,r.manager.itemStart(t),n.load(t,function(){r.manager.itemEnd(t)},void 0,function(){r.manager.itemError(t),r.manager.itemEnd(t)})}return e.data?{data:iq(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){(n=new d1(new dY(t))).setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){let n=e[t],r=n.url;if(Array.isArray(r)){let e=[];for(let t=0,n=r.length;t<n;t++){let n=a(r[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new c_(n.data,n.width,n.height)))}i[n.uuid]=new at(e)}else{let e=a(n.url);i[n.uuid]=new at(e)}}}return i}async parseImagesAsync(e){let t;let n=this,r={};async function i(e){if("string"==typeof e){let r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e;return await t.loadAsync(r)}return e.data?{data:iq(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){(t=new d1(this.manager)).setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){let n=e[t],a=n.url;if(Array.isArray(a)){let e=[];for(let t=0,n=a.length;t<n;t++){let n=a[t],r=await i(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new c_(r.data,r.width,r.height)))}r[n.uuid]=new at(e)}else{let e=await i(n.url);r[n.uuid]=new at(e)}}}return r}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:t[e]}let r={};if(void 0!==e)for(let i=0,a=e.length;i<a;i++){let a;let s=e[i];s.image,t[s.image];let u=t[s.image],c=u.data;Array.isArray(c)?(a=new sg,6===c.length&&(a.needsUpdate=!0)):(a=c&&c.data?new c_:new ai,c&&(a.needsUpdate=!0)),a.source=u,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,p_)),void 0!==s.channel&&(a.channel=s.channel),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],px),a.wrapT=n(s.wrap[1],px)),void 0!==s.format&&(a.format=s.format),void 0!==s.internalFormat&&(a.internalFormat=s.internalFormat),void 0!==s.type&&(a.type=s.type),void 0!==s.colorSpace&&(a.colorSpace=s.colorSpace),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,pb)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,pb)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.generateMipmaps&&(a.generateMipmaps=s.generateMipmaps),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),void 0!==s.compareFunction&&(a.compareFunction=s.compareFunction),void 0!==s.userData&&(a.userData=s.userData),r[s.uuid]=a}return r}parseObject(e,t,n,r,i){let a,s,u;function c(e){return t[e],t[e]}function h(e){if(void 0!==e){if(Array.isArray(e)){let t=[];for(let r=0,i=e.length;r<i;r++){let i=e[r];n[i],t.push(n[i])}return t}return n[e],n[e]}}function p(e){return r[e],r[e]}switch(e.type){case"Scene":a=new uq,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new oA(e.background):a.background=p(e.background)),void 0!==e.environment&&(a.environment=p(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new uZ(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new uJ(e.fog.color,e.fog.density)),""!==e.fog.name&&(a.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&a.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(a.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new sp(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new sz(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new pc(e.color,e.intensity);break;case"DirectionalLight":(a=new pu(e.color,e.intensity)).target=e.target||"";break;case"PointLight":a=new ps(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new ph(e.color,e.intensity,e.width,e.height);break;case"SpotLight":(a=new pn(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay)).target=e.target||"";break;case"HemisphereLight":a=new d6(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new pp().fromJSON(e);break;case"SkinnedMesh":s=c(e.geometry),a=new cv(s,u=h(e.material)),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":s=c(e.geometry),a=new st(s,u=h(e.material));break;case"InstancedMesh":s=c(e.geometry),u=h(e.material);let f=e.count,v=e.instanceMatrix,y=e.instanceColor;(a=new cP(s,u,f)).instanceMatrix=new cw(new Float32Array(v.array),16),void 0!==y&&(a.instanceColor=new cw(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":s=c(e.geometry),u=h(e.material),(a=new cY(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,u)).geometry=s,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(e=>{let t=new am;t.min.fromArray(e.boxMin),t.max.fromArray(e.boxMax);let n=new aO;return n.radius=e.sphereRadius,n.center.fromArray(e.sphereCenter),{boxInitialized:e.boxInitialized,box:t,sphereInitialized:e.sphereInitialized,sphere:n}}),a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=p(e.matricesTexture.uuid),void 0!==e.colorsTexture&&(a._colorsTexture=p(e.colorsTexture.uuid));break;case"LOD":a=new cs;break;case"Line":a=new c2(c(e.geometry),h(e.material));break;case"LineLoop":a=new c9(c(e.geometry),h(e.material));break;case"LineSegments":a=new c6(c(e.geometry),h(e.material));break;case"PointCloud":case"Points":a=new hr(c(e.geometry),h(e.material));break;case"Sprite":a=new cr(h(e.material));break;case"Group":a=new uB;break;case"Bone":a=new cy;break;default:a=new oo}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.intensity&&(a.shadow.intensity=e.shadow.intensity),void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){let s=e.children;for(let e=0;e<s.length;e++)a.add(this.parseObject(s[e],t,n,r,i))}if(void 0!==e.animations){let t=e.animations;for(let e=0;e<t.length;e++){let n=t[e];a.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);let t=e.levels;for(let e=0;e<t.length;e++){let n=t[e],r=a.getObjectByProperty("uuid",n.object);void 0!==r&&a.addLevel(r,n.distance,n.hysteresis)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){let n=t[e.skeleton];void 0===n||e.bind(n,e.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){let n=t.target,r=e.getObjectByProperty("uuid",n);void 0!==r?t.target=r:t.target=new oo}})}}let p_={UVMapping:nb,CubeReflectionMapping:nS,CubeRefractionMapping:nw,EquirectangularReflectionMapping:nM,EquirectangularRefractionMapping:nA,CubeUVReflectionMapping:nC},px={RepeatWrapping:nT,ClampToEdgeWrapping:nE,MirroredRepeatWrapping:nI},pb={NearestFilter:nD,NearestMipmapNearestFilter:nP,NearestMipmapLinearFilter:nL,LinearFilter:nk,LinearMipmapNearestFilter:nB,LinearMipmapLinearFilter:nF};class pS extends dZ{constructor(e){super(e),this.isImageBitmapLoader=!0,this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=this,a=dX.get(e);if(void 0!==a){if(i.manager.itemStart(e),a.then){a.then(n=>{t&&t(n),i.manager.itemEnd(e)}).catch(e=>{r&&r(e)});return}return setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a}let s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader;let u=fetch(e,s).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))}).then(function(n){return dX.add(e,n),t&&t(n),i.manager.itemEnd(e),n}).catch(function(t){r&&r(t),dX.remove(e),i.manager.itemError(e),i.manager.itemEnd(e)});dX.add(e,u),i.manager.itemStart(e)}}class pw{static getContext(){return void 0===i&&(i=new(window.AudioContext||window.webkitAudioContext)),i}static setContext(e){i=e}}class pM extends dZ{constructor(e){super(e)}load(e,t,n,r){let i=this,a=new dQ(this.manager);function s(t){r&&r(t),i.manager.itemError(e)}a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(e){try{let n=e.slice(0);pw.getContext().decodeAudioData(n,function(e){t(e)}).catch(s)}catch(e){s(e)}},n,r)}}let pA=new aV,pC=new aV,pT=new aV;class pE{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new sp,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new sp,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){let t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){let n,r;t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,pT.copy(e.projectionMatrix);let i=t.eyeSep/2,a=i*t.near/t.focus,s=t.near*Math.tan(iB*t.fov*.5)/t.zoom;pC.elements[12]=-i,pA.elements[12]=i,n=-s*t.aspect+a,r=s*t.aspect+a,pT.elements[0]=2*t.near/(r-n),pT.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(pT),n=-s*t.aspect-a,r=s*t.aspect-a,pT.elements[0]=2*t.near/(r-n),pT.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(pT)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(pC),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(pA)}}class pI{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=pD(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=pD();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function pD(){return performance.now()}let pP=new ap,pR=new ad,pL=new ap,pO=new ap;class pk extends oo{constructor(){super(),this.type="AudioListener",this.context=pw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new pI}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);let t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(pP,pR,pL),pO.set(0,0,-1).applyQuaternion(pR),t.positionX){let e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(pP.x,e),t.positionY.linearRampToValueAtTime(pP.y,e),t.positionZ.linearRampToValueAtTime(pP.z,e),t.forwardX.linearRampToValueAtTime(pO.x,e),t.forwardY.linearRampToValueAtTime(pO.y,e),t.forwardZ.linearRampToValueAtTime(pO.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(pP.x,pP.y,pP.z),t.setOrientation(pO.x,pO.y,pO.z,n.x,n.y,n.z)}}class pB extends oo{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying||!1===this.hasPlaybackControl)return;this._startedAt=this.context.currentTime+e;let t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return!e&&(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1!==this.hasPlaybackControl&&this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}let pN=new ap,pF=new ad,pz=new ap,pU=new ap;class pH extends pB{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(pN,pF,pz),pU.set(0,0,1).applyQuaternion(pF);let t=this.panner;if(t.positionX){let e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(pN.x,e),t.positionY.linearRampToValueAtTime(pN.y,e),t.positionZ.linearRampToValueAtTime(pN.z,e),t.orientationX.linearRampToValueAtTime(pU.x,e),t.orientationY.linearRampToValueAtTime(pU.y,e),t.orientationZ.linearRampToValueAtTime(pU.z,e)}else t.setPosition(pN.x,pN.y,pN.z),t.setOrientation(pU.x,pU.y,pU.z)}}class pG{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0,t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class pV{constructor(e,t,n){let r,i,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(let e=0;e!==r;++e)n[i+e]=n[e];a=t}else{a+=t;let e=t/a;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=a}accumulateAdditive(e){let t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){let e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){s.setValue(n,r);break}}saveOriginalState(){let e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n;e!==r;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}_slerp(e,t,n,r){ad.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){let a=this._workIndex*i;ad.multiplyQuaternionsFlat(e,a,e,t,e,n),ad.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,n,r,i){let a=1-r;for(let s=0;s!==i;++s){let i=t+s;e[i]=e[i]*a+e[n+s]*r}}_lerpAdditive(e,t,n,r,i){for(let a=0;a!==i;++a){let i=t+a;e[i]=e[i]+e[n+a]*r}}}let pW="\\[\\]\\.:\\/",pj=RegExp("["+pW+"]","g"),pX="[^"+pW+"]",pY="[^"+pW.replace("\\.","")+"]",pJ=/((?:WC+[\/:])*)/.source.replace("WC",pX),pZ=/(WCOD+)?/.source.replace("WCOD",pY),pq=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pX),pK=RegExp("^"+pJ+pZ+pq+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pX)+"$"),pQ=["material","materials","bones","map"];class p${constructor(e,t,n){this.path=t,this.parsedPath=n||p$.parseTrackName(t),this.node=p$.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new p$.Composite(e,t,n):new p$(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(pj,"")}static parseTrackName(e){let t=pK.exec(e);if(null===t)throw Error("PropertyBinding: Cannot parse trackName: "+e);let n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){let e=n.nodeName.substring(r+1);-1!==pQ.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){let n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){let n=function(e){for(let r=0;r<e.length;r++){let i=e[r];if(i.name===t||i.uuid===t)return i;let a=n(i.children);if(a)return a}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(!e&&(e=p$.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return;if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material||!e.material.materials)return;e=e.material.materials;break;case"bones":if(!e.skeleton)return;e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material||!e.material.map)return;e=e.material.map;break;default:if(void 0===e[n])return;e=e[n]}if(void 0!==r){if(void 0===e[r])return;e=e[r]}}let a=e[r];if(void 0===a){t.nodeName;return}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry||!e.geometry.morphAttributes)return;void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}p$.Composite=class e{constructor(e,t,n){let r=n||p$.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){let n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},p$.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},p$.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},p$.prototype.GetterByBindingType=[p$.prototype._getValue_direct,p$.prototype._getValue_array,p$.prototype._getValue_arrayElement,p$.prototype._getValue_toArray],p$.prototype.SetterByBindingTypeAndVersioning=[[p$.prototype._setValue_direct,p$.prototype._setValue_direct_setNeedsUpdate,p$.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[p$.prototype._setValue_array,p$.prototype._setValue_array_setNeedsUpdate,p$.prototype._setValue_array_setMatrixWorldNeedsUpdate],[p$.prototype._setValue_arrayElement,p$.prototype._setValue_arrayElement_setNeedsUpdate,p$.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[p$.prototype._setValue_fromArray,p$.prototype._setValue_fromArray_setNeedsUpdate,p$.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class p0{constructor(){this.isAnimationObjectGroup=!0,this.uuid=iF(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;let e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};let t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){let e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,s,u=e.length,c=this.nCachedObjects_;for(let h=0,p=arguments.length;h!==p;++h){let p=arguments[h],f=p.uuid,v=t[f];if(void 0===v){v=u++,t[f]=v,e.push(p);for(let e=0;e!==a;++e)i[e].push(new p$(p,n[e],r[e]))}else if(v<c){s=e[v];let u=--c,h=e[u];t[h.uuid]=v,e[v]=h,t[f]=u,e[u]=p;for(let e=0;e!==a;++e){let t=i[e],a=t[u],s=t[v];t[v]=a,void 0===s&&(s=new p$(p,n[e],r[e])),t[u]=s}}else e[v]}this.nCachedObjects_=c}remove(){let e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){let s=arguments[a],u=s.uuid,c=t[u];if(void 0!==c&&c>=i){let a=i++,h=e[a];t[h.uuid]=c,e[c]=h,t[u]=a,e[a]=s;for(let e=0;e!==r;++e){let t=n[e],r=t[a],i=t[c];t[c]=r,t[a]=i}}}this.nCachedObjects_=i}uncache(){let e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=e.length;for(let s=0,u=arguments.length;s!==u;++s){let u=arguments[s],c=u.uuid,h=t[c];if(void 0!==h){if(delete t[c],h<i){let s=--i,u=e[s],c=--a,p=e[c];t[u.uuid]=h,e[h]=u,t[p.uuid]=s,e[s]=p,e.pop();for(let e=0;e!==r;++e){let t=n[e],r=t[s],i=t[c];t[h]=r,t[s]=i,t.pop()}}else{let i=--a,s=e[i];i>0&&(t[s.uuid]=h),e[h]=s,e.pop();for(let e=0;e!==r;++e){let t=n[e];t[h]=t[i],t.pop()}}}}this.nCachedObjects_=i}subscribe_(e,t){let n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];let a=this._paths,s=this._parsedPaths,u=this._objects,c=u.length,h=this.nCachedObjects_,p=Array(c);r=i.length,n[e]=r,a.push(e),s.push(t),i.push(p);for(let n=h,r=u.length;n!==r;++n){let r=u[n];p[n]=new p$(r,e,t)}return p}unsubscribe_(e){let t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){let r=this._paths,i=this._parsedPaths,a=this._bindings,s=a.length-1,u=a[s];t[e[s]]=n,a[n]=u,a.pop(),i[n]=i[s],i.pop(),r[n]=r[s],r.pop()}}}class p1{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;let i=t.tracks,a=i.length,s=Array(a),u={endingStart:rz,endingEnd:rz};for(let e=0;e!==a;++e){let t=i[e].createInterpolant(null);s[e]=t,t.settings=u}this._interpolantSettings=u,this._interpolants=s,this._propertyBindings=Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=rO,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){let n=this._clip.duration,r=e._clip.duration;e.warp(1,r/n,t),this.warp(n/r,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){let e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){let r=this._mixer,i=r.time,a=this.timeScale,s=this._timeScaleInterpolant;null===s&&(s=r._lendControlInterpolant(),this._timeScaleInterpolant=s);let u=s.parameterPositions,c=s.sampleValues;return u[0]=i,u[1]=i+n,c[0]=e/a,c[1]=t/a,this}stopWarping(){let e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}let i=this._startTime;if(null!==i){let r=(e-i)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);let a=this._updateTime(t),s=this._updateWeight(e);if(s>0){let e=this._interpolants,t=this._propertyBindings;if(this.blendMode===rV)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulateAdditive(s);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulate(r,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let n=this._weightInterpolant;if(null!==n){let r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,a=n===rk;if(0===e)return -1===i?r:a&&(1&i)==1?t-r:r;if(n===rL){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));o:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break o}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){let n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);let s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){let t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(a&&(1&i)==1)return t-r}return r}_setEndings(e,t,n){let r=this._interpolantSettings;n?(r.endingStart=rU,r.endingEnd=rU):(e?r.endingStart=this.zeroSlopeAtStart?rU:rz:r.endingStart=rH,t?r.endingEnd=this.zeroSlopeAtEnd?rU:rz:r.endingEnd=rH)}_scheduleFading(e,t,n){let r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);let s=a.parameterPositions,u=a.sampleValues;return s[0]=i,u[0]=t,s[1]=i+e,u[1]=n,this}}let p2=new Float32Array(1);class p3 extends iL{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,s=e._interpolants,u=n.uuid,c=this._bindingsByRootAndName,h=c[u];void 0===h&&(h={},c[u]=h);for(let e=0;e!==i;++e){let i=r[e],c=i.name,p=h[c];if(void 0!==p)++p.referenceCount,a[e]=p;else{if(void 0!==(p=a[e])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,u,c));continue}let r=t&&t._propertyBindings[e].binding.parsedPath;p=new pV(p$.create(n,c,r),i.ValueTypeName,i.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,u,c),a[e]=p}s[e].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){let t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}let t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){let n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){let n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){let r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{let t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){let t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;let i=e._clip.uuid,a=this._actionsByClip,s=a[i],u=s.knownActions,c=u[u.length-1],h=e._byClipCacheIndex;c._byClipCacheIndex=h,u[h]=c,u.pop(),e._byClipCacheIndex=null;let p=s.actionByRoot,f=(e._localRoot||this._root).uuid;delete p[f],0===u.length&&delete a[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){let n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){let t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){let t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){let r=this._bindingsByRootAndName,i=this._bindings,a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){let t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,s=a[r],u=t[t.length-1],c=e._cacheIndex;u._cacheIndex=c,t[c]=u,t.pop(),delete s[i],0===Object.keys(s).length&&delete a[r]}_lendBinding(e){let t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){let t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new dk(new Float32Array(2),new Float32Array(2),1,p2)).__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){let t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){let r=t||this._root,i=r.uuid,a="string"==typeof e?dj.findByName(r,e):e,s=null!==a?a.uuid:e,u=this._actionsByClip[s],c=null;if(void 0===n&&(n=null!==a?a.blendMode:rG),void 0!==u){let e=u.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;c=u.knownActions[0],null===a&&(a=c._clip)}if(null===a)return null;let h=new p1(this,a,t,n);return this._bindAction(h,c),this._addInactiveAction(h,s,i),h}existingAction(e,t){let n=t||this._root,r=n.uuid,i="string"==typeof e?dj.findByName(n,e):e,a=i?i.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[r]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;let t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1;for(let s=0;s!==n;++s)t[s]._update(r,e,i,a);let s=this._bindings,u=this._nActiveBindings;for(let e=0;e!==u;++e)s[e].apply(a);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){let e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){let r=e[n];this._deactivateAction(r);let i=r._cacheIndex,a=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,a._cacheIndex=i,t[i]=a,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){let t=e.uuid,n=this._actionsByClip;for(let e in n){let r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}let r=this._bindingsByRootAndName[t];if(void 0!==r)for(let e in r){let t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){let n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class p5{constructor(e){this.value=e}clone(){return new p5(void 0===this.value.clone?this.value:this.value.clone())}}let p4=0;class p6 extends iL{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:p4++}),this.name="",this.usage=ix,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){let t=this.uniforms.indexOf(e);return -1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;let t=e.uniforms;this.uniforms.length=0;for(let e=0,n=t.length;e<n;e++){let n=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0;e<n.length;e++)this.uniforms.push(n[e].clone())}return this}clone(){return new this.constructor().copy(this)}}class p9 extends uK{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){let t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){let t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class p8{constructor(e,t,n,r,i){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}let p7=new aV;class fe{constructor(e,t,n=0,r=1/0){this.ray=new aG(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new a0,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera&&(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t)}setFromXRController(e){return p7.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(p7),this}intersectObject(e,t=!0,n=[]){return fn(e,this,n,t),n.sort(ft),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)fn(e[r],this,n,t);return n.sort(ft),n}}function ft(e,t){return e.distance-t.distance}function fn(e,t,n,r){let i=!0;if(e.layers.test(t.layers)&&!1===e.raycast(t,n)&&(i=!1),!0===i&&!0===r){let r=e.children;for(let e=0,i=r.length;e<i;e++)fn(r[e],t,n,!0)}}class fr{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(iz(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class fi{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class fa{constructor(e,t,n,r){fa.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==e&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){let i=this.elements;return i[0]=e,i[2]=t,i[1]=n,i[3]=r,this}}let fo=new ij;class fs{constructor(e=new ij(Infinity,Infinity),t=new ij(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=fo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=Infinity,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,fo).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}let fl=new ap,fu=new ap;class fc{constructor(e=new ap,t=new ap){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){fl.subVectors(e,this.start),fu.subVectors(this.end,this.start);let n=fu.dot(fu),r=fu.dot(fl)/n;return t&&(r=iz(r,0,1)),r}closestPointToPoint(e,t,n){let r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}let fh=new ap;class fd extends oo{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let n=new o$,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1;e<32;e++,t++){let n=e/32*Math.PI*2,i=t/32*Math.PI*2;r.push(Math.cos(n),Math.sin(n),1,Math.cos(i),Math.sin(i),1)}n.setAttribute("position",new oj(r,3));let i=new cJ({fog:!1,toneMapped:!1});this.cone=new c6(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),fh.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(fh),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}let fp=new ap,ff=new aV,fg=new aV;class fm extends c6{constructor(e){let t=function e(t){let n=[];!0===t.isBone&&n.push(t);for(let r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),n=new o$,r=[],i=[],a=new oA(0,0,1),s=new oA(0,1,0);for(let e=0;e<t.length;e++){let n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(s.r,s.g,s.b))}n.setAttribute("position",new oj(r,3)),n.setAttribute("color",new oj(i,3)),super(n,new cJ({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){let t=this.bones,n=this.geometry,r=n.getAttribute("position");fg.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){let i=t[e];i.parent&&i.parent.isBone&&(ff.multiplyMatrices(fg,i.matrixWorld),fp.setFromMatrixPosition(ff),r.setXYZ(n,fp.x,fp.y,fp.z),ff.multiplyMatrices(fg,i.parent.matrixWorld),fp.setFromMatrixPosition(ff),r.setXYZ(n+1,fp.x,fp.y,fp.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}class fv extends st{constructor(e,t,n){let r=new du(t,4,2);super(r,new oI({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}let fy=new ap,f_=new oA,fx=new oA;class fb extends oo{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";let r=new da(t);r.rotateY(.5*Math.PI),this.material=new oI({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);let i=new Float32Array(3*r.getAttribute("position").count);r.setAttribute("color",new oB(i,3)),this.add(new st(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){let e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{let t=e.geometry.getAttribute("color");f_.copy(this.light.color),fx.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){let r=e<n/2?f_:fx;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(fy.setFromMatrixPosition(this.light.matrixWorld).negate())}}class fS extends c6{constructor(e=10,t=10,n=4473924,r=8947848){n=new oA(n),r=new oA(r);let i=t/2,a=e/t,s=e/2,u=[],c=[];for(let e=0,h=0,p=-s;e<=t;e++,p+=a){u.push(-s,0,p,s,0,p),u.push(p,0,-s,p,0,s);let t=e===i?n:r;t.toArray(c,h),h+=3,t.toArray(c,h),h+=3,t.toArray(c,h),h+=3,t.toArray(c,h),h+=3}let h=new o$;h.setAttribute("position",new oj(u,3)),h.setAttribute("color",new oj(c,3)),super(h,new cJ({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class fw extends c6{constructor(e=10,t=16,n=8,r=64,i=4473924,a=8947848){i=new oA(i),a=new oA(a);let s=[],u=[];if(t>1)for(let n=0;n<t;n++){let r=n/t*(2*Math.PI),c=Math.sin(r)*e,h=Math.cos(r)*e;s.push(0,0,0),s.push(c,0,h);let p=1&n?i:a;u.push(p.r,p.g,p.b),u.push(p.r,p.g,p.b)}for(let t=0;t<n;t++){let c=1&t?i:a,h=e-e/n*t;for(let e=0;e<r;e++){let t=e/r*(2*Math.PI),n=Math.sin(t)*h,i=Math.cos(t)*h;s.push(n,0,i),u.push(c.r,c.g,c.b),n=Math.sin(t=(e+1)/r*(2*Math.PI))*h,i=Math.cos(t)*h,s.push(n,0,i),u.push(c.r,c.g,c.b)}}let c=new o$;c.setAttribute("position",new oj(s,3)),c.setAttribute("color",new oj(u,3)),super(c,new cJ({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}let fM=new ap,fA=new ap,fC=new ap;class fT extends oo{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new o$;r.setAttribute("position",new oj([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let i=new cJ({fog:!1,toneMapped:!1});this.lightPlane=new c2(r,i),this.add(this.lightPlane),(r=new o$).setAttribute("position",new oj([0,0,0,0,0,1],3)),this.targetLine=new c2(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),fM.setFromMatrixPosition(this.light.matrixWorld),fA.setFromMatrixPosition(this.light.target.matrixWorld),fC.subVectors(fA,fM),this.lightPlane.lookAt(fA),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(fA),this.targetLine.scale.z=fC.length()}}let fE=new ap,fI=new su;class fD extends c6{constructor(e){let t=new o$,n=new cJ({color:0xffffff,vertexColors:!0,toneMapped:!1}),r=[],i=[],a={};function s(e,t){u(e),u(t)}function u(e){r.push(0,0,0),i.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(r.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),t.setAttribute("position",new oj(r,3)),t.setAttribute("color",new oj(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();let c=new oA(0xffaa00),h=new oA(0xff0000),p=new oA(43775),f=new oA(0xffffff),v=new oA(3355443);this.setColors(c,h,p,f,v)}setColors(e,t,n,r,i){let a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,i.r,i.g,i.b),a.setXYZ(41,i.r,i.g,i.b),a.setXYZ(42,i.r,i.g,i.b),a.setXYZ(43,i.r,i.g,i.b),a.setXYZ(44,i.r,i.g,i.b),a.setXYZ(45,i.r,i.g,i.b),a.setXYZ(46,i.r,i.g,i.b),a.setXYZ(47,i.r,i.g,i.b),a.setXYZ(48,i.r,i.g,i.b),a.setXYZ(49,i.r,i.g,i.b),a.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap;fI.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),fP("c",t,e,fI,0,0,-1),fP("t",t,e,fI,0,0,1),fP("n1",t,e,fI,-1,-1,-1),fP("n2",t,e,fI,1,-1,-1),fP("n3",t,e,fI,-1,1,-1),fP("n4",t,e,fI,1,1,-1),fP("f1",t,e,fI,-1,-1,1),fP("f2",t,e,fI,1,-1,1),fP("f3",t,e,fI,-1,1,1),fP("f4",t,e,fI,1,1,1),fP("u1",t,e,fI,.7,1.1,-1),fP("u2",t,e,fI,-.7,1.1,-1),fP("u3",t,e,fI,0,2,-1),fP("cf1",t,e,fI,-1,0,1),fP("cf2",t,e,fI,1,0,1),fP("cf3",t,e,fI,0,-1,1),fP("cf4",t,e,fI,0,1,1),fP("cn1",t,e,fI,-1,0,-1),fP("cn2",t,e,fI,1,0,-1),fP("cn3",t,e,fI,0,-1,-1),fP("cn4",t,e,fI,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function fP(e,t,n,r,i,a,s){fE.set(i,a,s).unproject(r);let u=t[e];if(void 0!==u){let e=n.getAttribute("position");for(let t=0,n=u.length;t<n;t++)e.setXYZ(u[t],fE.x,fE.y,fE.z)}}let fR=new am;class fL extends c6{constructor(e,t=0xffff00){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new o$;i.setIndex(new oB(n,1)),i.setAttribute("position",new oB(r,3)),super(i,new cJ({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==this.object&&fR.setFromObject(this.object),fR.isEmpty())return;let t=fR.min,n=fR.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class fO extends c6{constructor(e,t=0xffff00){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new o$;r.setIndex(new oB(n,1)),r.setAttribute("position",new oj([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new cJ({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;!t.isEmpty()&&(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class fk extends c2{constructor(e,t=1,n=0xffff00){let r=new o$;r.setAttribute("position",new oj([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere(),super(r,new cJ({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;let i=new o$;i.setAttribute("position",new oj([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new st(i,new oI({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}let fB=new ap;class fN extends oo{constructor(e=new ap(0,0,1),t=new ap(0,0,0),n=1,r=0xffff00,i=.2*n,u=.2*i){super(),this.type="ArrowHelper",void 0===a&&((a=new o$).setAttribute("position",new oj([0,0,0,0,1,0],3)),(s=new hB(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new c2(a,new cJ({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new st(s,new oI({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,u)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{fB.set(e.z,0,-e.x).normalize();let t=Math.acos(e.y);this.quaternion.setFromAxisAngle(fB,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class fF extends c6{constructor(e=1){let t=new o$;t.setAttribute("position",new oj([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],3)),t.setAttribute("color",new oj([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(t,new cJ({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){let r=new oA,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class fz{constructor(){this.type="ShapePath",this.color=new oA,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new hR,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){let t,n,r,i,a;let s=h7.isClockWise,u=this.subPaths;if(0===u.length)return[];let c=[];if(1===u.length)return n=u[0],(r=new hj).curves=n.curves,c.push(r),c;let h=!s(u[0].getPoints());h=e?!h:h;let p=[],f=[],v=[],y=0;f[0]=void 0,v[y]=[];for(let r=0,a=u.length;r<a;r++)t=s(i=(n=u[r]).getPoints()),(t=e?!t:t)?(!h&&f[y]&&y++,f[y]={s:new hj,p:i},f[y].s.curves=n.curves,h&&y++,v[y]=[]):v[y].push({h:n,p:i[0]});if(!f[0])return function(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n],i=new hj;i.curves=r.curves,t.push(i)}return t}(u);if(f.length>1){let e=!1,t=0;for(let e=0,t=f.length;e<t;e++)p[e]=[];for(let n=0,r=f.length;n<r;n++){let r=v[n];for(let i=0;i<r.length;i++){let a=r[i],s=!0;for(let r=0;r<f.length;r++)(function(e,t){let n=t.length,r=!1;for(let i=n-1,a=0;a<n;i=a++){let n=t[i],s=t[a],u=s.x-n.x,c=s.y-n.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(n=t[a],u=-u,s=t[i],c=-c),e.y<n.y||e.y>s.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{let t=c*(e.x-n.x)-u*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(s.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=s.x)return!0}}return r})(a.p,f[r].p)&&(n!==r&&t++,s?(s=!1,p[r].push(a)):e=!0);s&&p[n].push(a)}}t>0&&!1===e&&(v=p)}for(let e=0,t=f.length;e<t;e++){r=f[e].s,c.push(r),a=v[e];for(let e=0,t=a.length;e<t;e++)r.holes.push(a[e].h)}return c}}class fU extends iL{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class fH extends as{constructor(e=1,t=1,n=1,r={}){super(e,t,{...r,count:n}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:tM}})),"undefined"!=typeof window&&(window.__THREE__||(window.__THREE__=tM));var fG=n("5271"),fV=n.t(fG,2),fW=n("611");let fj="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?fG.useEffect:fG.useLayoutEffect;function fX(e){let t="function"==typeof e?function(e){let t;let n=new Set,r=(e,r)=>{let i="function"==typeof e?e(t):e;if(i!==t){let e=t;t=r?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a=(e,r=i,a=Object.is)=>{let s=r(t);function u(){let n=r(t);if(!a(s,n)){let t=s;e(s=n,t)}}return n.add(u),()=>n.delete(u)},s={setState:r,getState:i,subscribe:(e,t,r)=>t||r?a(e,t,r):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,s),s}(e):e,n=(e=t.getState,n=Object.is)=>{let r;let[,i]=(0,fG.useReducer)(e=>e+1,0),a=t.getState(),s=(0,fG.useRef)(a),u=(0,fG.useRef)(e),c=(0,fG.useRef)(n),h=(0,fG.useRef)(!1),p=(0,fG.useRef)();void 0===p.current&&(p.current=e(a));let f=!1;(s.current!==a||u.current!==e||c.current!==n||h.current)&&(r=e(a),f=!n(p.current,r)),fj(()=>{f&&(p.current=r),s.current=a,u.current=e,c.current=n,h.current=!1});let v=(0,fG.useRef)(a);fj(()=>{let e=()=>{try{let e=t.getState(),n=u.current(e);!c.current(p.current,n)&&(s.current=e,p.current=n,i())}catch(e){h.current=!0,i()}},n=t.subscribe(e);return t.getState()!==v.current&&e(),n},[]);let y=f?r:p.current;return(0,fG.useDebugValue)(y),y};return Object.assign(n,t),n[Symbol.iterator]=function(){let e=[n,t];return{next(){let t=e.length<=0;return{value:e.shift(),done:t}}}},n}let fY=e=>"object"==typeof e&&"function"==typeof e.then,fJ=[];function fZ(e,t,n=(e,t)=>e===t){if(e===t)return!0;if(!e||!t)return!1;let r=e.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function fq(e,t=null,n=!1,r={}){for(let i of(null===t&&(t=[e]),fJ))if(fZ(t,i.keys,i.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(i,"error"))throw i.error;if(Object.prototype.hasOwnProperty.call(i,"response"))return r.lifespan&&r.lifespan>0&&(i.timeout&&clearTimeout(i.timeout),i.timeout=setTimeout(i.remove,r.lifespan)),i.response;if(!n)throw i.promise}let i={keys:t,equal:r.equal,remove:()=>{let e=fJ.indexOf(i);-1!==e&&fJ.splice(e,1)},promise:(fY(e)?e:e(...t)).then(e=>{i.response=e,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(e=>i.error=e)};if(fJ.push(i),!n)throw i.promise}let fK=(e,t,n)=>fq(e,t,!1,n),fQ=(e,t,n)=>void fq(e,t,!0,n),f$=e=>{if(void 0===e||0===e.length)fJ.splice(0,fJ.length);else{let t=fJ.find(t=>fZ(e,t.keys,t.equal));t&&t.remove()}};var f0=n("6191"),f1=n.n(f0),f2=n("5297");let f3={},f5=e=>void Object.assign(f3,e),f4=e=>"colorSpace"in e||"outputColorSpace"in e,f6=()=>{var e;return null!=(e=f3.ColorManagement)?e:null},f9=e=>e&&e.isOrthographicCamera,f8=e=>e&&e.hasOwnProperty("current"),f7="undefined"!=typeof window&&(null!=(en=window.document)&&en.createElement||(null==(er=window.navigator)?void 0:er.product)==="ReactNative")?fG.useLayoutEffect:fG.useEffect;function ge(e){let t=fG.useRef(e);return f7(()=>void(t.current=e),[e]),t}function gt({set:e}){return f7(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}class gn extends fG.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}gn.getDerivedStateFromError=()=>({error:!0});let gr="__default",gi=new Map,ga=e=>e&&!!e.memoized&&!!e.changes;function go(e){var t;let n="undefined"!=typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}let gs=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()};function gl(e){let t=e.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}let gu={obj:e=>e===Object(e)&&!gu.arr(e)&&"function"!=typeof e,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,boo:e=>"boolean"==typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){let a;if(typeof e!=typeof t||!!e!=!!t)return!1;if(gu.str(e)||gu.num(e)||gu.boo(e))return e===t;let s=gu.obj(e);if(s&&"reference"===r)return e===t;let u=gu.arr(e);if(u&&"reference"===n)return e===t;if((u||s)&&e===t)return!0;for(a in e)if(!(a in t))return!1;if(s&&"shallow"===n&&"shallow"===r){for(a in i?t:e)if(!gu.equ(e[a],t[a],{strict:i,objects:"reference"}))return!1}else for(a in i?t:e)if(e[a]!==t[a])return!1;if(gu.und(a)){if(u&&0===e.length&&0===t.length||s&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function gc(e){let t={nodes:{},materials:{}};return e&&e.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)}),t}function gh(e,t){return e.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},e}function gd(e,t){let n=e;if(!t.includes("-"))return{target:n,key:t};{let r=t.split("-"),i=r.pop();return{target:n=r.reduce((e,t)=>e[t],e),key:i}}}let gp=/-\d+$/;function gf(e,t,n){if(gu.str(n)){if(gp.test(n)){let{target:t,key:r}=gd(e,n.replace(gp,""));!Array.isArray(t[r])&&(t[r]=[])}let{target:r,key:i}=gd(e,n);t.__r3f.previousAttach=r[i],r[i]=t}else t.__r3f.previousAttach=n(e,t)}function gg(e,t,n){var r,i;if(gu.str(n)){let{target:r,key:i}=gd(e,n),a=t.__r3f.previousAttach;void 0===a?delete r[i]:r[i]=a}else null==(r=t.__r3f)||null==r.previousAttach||r.previousAttach(e,t);null==(i=t.__r3f)||delete i.previousAttach}function gm(e,{children:t,key:n,ref:r,...i},{children:a,key:s,ref:u,...c}={},h=!1){let p=e.__r3f,f=Object.entries(i),v=[];if(h){let e=Object.keys(c);for(let t=0;t<e.length;t++)!i.hasOwnProperty(e[t])&&f.unshift([e[t],gr+"remove"])}f.forEach(([t,n])=>{var r;if(null!=(r=e.__r3f)&&r.primitive&&"object"===t||gu.equ(n,c[t]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(t))return v.push([t,n,!0,[]]);let a=[];for(let e in t.includes("-")&&(a=t.split("-")),v.push([t,n,!1,a]),i){let n=i[e];e.startsWith(`${t}-`)&&v.push([e,n,!1,e.split("-")])}});let y={...i};return null!=p&&p.memoizedProps&&null!=p&&p.memoizedProps.args&&(y.args=p.memoizedProps.args),null!=p&&p.memoizedProps&&null!=p&&p.memoizedProps.attach&&(y.attach=p.memoizedProps.attach),{memoized:y,changes:v}}let gv="undefined"!=typeof process&&!1;function gy(e,t){var n;let r=e.__r3f,i=null==r?void 0:r.root,a=null==i?void 0:null==i.getState?void 0:i.getState(),{memoized:s,changes:u}=ga(t)?t:gm(e,t),c=null==r?void 0:r.eventCount;e.__r3f&&(e.__r3f.memoizedProps=s);for(let t=0;t<u.length;t++){let[n,i,s,c]=u[t];if(f4(e)){let e="srgb",t="srgb-linear";"encoding"===n?(n="colorSpace",i=3001===i?e:t):"outputEncoding"===n&&(n="outputColorSpace",i=3001===i?e:t)}let h=e,p=h[n];if(c.length&&!((p=c.reduce((e,t)=>e[t],e))&&p.set)){let[t,...r]=c.reverse();h=r.reverse().reduce((e,t)=>e[t],e),n=t}if(i===gr+"remove"){if(h.constructor){let e=gi.get(h.constructor);!e&&(e=new h.constructor,gi.set(h.constructor,e)),i=e[n]}else i=0}if(s&&r)i?r.handlers[n]=i:delete r.handlers[n],r.eventCount=Object.keys(r.handlers).length;else if(p&&p.set&&(p.copy||p instanceof a0)){if(Array.isArray(i))p.fromArray?p.fromArray(i):p.set(...i);else if(p.copy&&i&&i.constructor&&(gv?p.constructor.name===i.constructor.name:p.constructor===i.constructor))p.copy(i);else if(void 0!==i){let e=p instanceof oA;!e&&p.setScalar?p.setScalar(i):p instanceof a0&&i instanceof a0?p.mask=i.mask:p.set(i),!f6()&&a&&!a.linear&&e&&p.convertSRGBToLinear()}}else if(h[n]=i,h[n]instanceof ai&&h[n].format===n0&&h[n].type===nU&&a){let e=h[n];f4(e)&&f4(a.gl)?e.colorSpace=a.gl.outputColorSpace:e.encoding=a.gl.outputEncoding}g_(e)}if(r&&r.parent&&e.raycast&&c!==r.eventCount){let t=gl(e).getState().internal,n=t.interaction.indexOf(e);n>-1&&t.interaction.splice(n,1),r.eventCount&&t.interaction.push(e)}return!(1===u.length&&"onUpdate"===u[0][0])&&u.length&&null!=(n=e.__r3f)&&n.parent&&gx(e),e}function g_(e){var t,n;let r=null==(t=e.__r3f)?void 0:null==(n=t.root)?void 0:null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function gx(e){null==e.onUpdate||e.onUpdate(e)}function gb(e,t){!e.manual&&(f9(e)?(e.left=-(t.width/2),e.right=t.width/2,e.top=t.height/2,e.bottom=-(t.height/2)):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function gS(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function gw(e,t,n,r){let i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}let gM=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],gA=e=>!!(null!=e&&e.render),gC=fG.createContext(null),gT=(e,t)=>{let n=fX((n,r)=>{let i,a=new ap,s=new ap,u=new ap;function c(e=r().camera,t=s,n=r().size){let{width:i,height:h,top:p,left:f}=n,v=i/h;t instanceof ap?u.copy(t):u.set(...t);let y=e.getWorldPosition(a).distanceTo(u);if(f9(e))return{width:i/e.zoom,height:h/e.zoom,top:p,left:f,factor:1,distance:y,aspect:v};{let t=2*Math.tan(e.fov*Math.PI/180/2)*y,n=i/h*t;return{width:n,height:t,top:p,left:f,factor:i/n,distance:y,aspect:v}}}let h=e=>n(t=>({performance:{...t.performance,current:e}})),p=new ij;return{set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(t=1)=>e(r(),t),advance:(e,n)=>t(e,n,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new pI,pointer:p,mouse:p,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{let e=r();i&&clearTimeout(i),e.performance.current!==e.performance.min&&h(e.performance.min),i=setTimeout(()=>h(r().performance.max),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:c},setEvents:e=>n(t=>({...t,events:{...t.events,...e}})),setSize:(e,t,i,a,u)=>{let h=r().camera,p={width:e,height:t,top:a||0,left:u||0,updateStyle:i};n(e=>({size:p,viewport:{...e.viewport,...c(h,s,p)}}))},setDpr:e=>n(t=>{let n=go(e);return{viewport:{...t.viewport,dpr:n,initialDpr:t.viewport.initialDpr||n}}}),setFrameloop:(e="always")=>{let t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n(()=>({frameloop:e}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:fG.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,n)=>{let i=r().internal;return i.priority=i.priority+(t>0?1:0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort((e,t)=>e.priority-t.priority),()=>{let n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter(t=>t.ref!==e))}}}}}),r=n.getState(),i=r.size,a=r.viewport.dpr,s=r.camera;return n.subscribe(()=>{let{camera:e,size:t,viewport:r,gl:u,set:c}=n.getState();if(t.width!==i.width||t.height!==i.height||r.dpr!==a){var h;i=t,a=r.dpr,gb(e,t),u.setPixelRatio(r.dpr);let n=null!=(h=t.updateStyle)?h:"undefined"!=typeof HTMLCanvasElement&&u.domElement instanceof HTMLCanvasElement;u.setSize(t.width,t.height,n)}e!==s&&(s=e,c(t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}})))}),n.subscribe(t=>e(t)),n},gE=new Set,gI=new Set,gD=new Set;function gP(e,t){if(e.size)for(let{callback:n}of e.values())n(t)}function gR(e,t){switch(e){case"before":return gP(gE,t);case"after":return gP(gI,t);case"tail":return gP(gD,t)}}function gL(e,t,n){let r=t.clock.getDelta();for("never"===t.frameloop&&"number"==typeof e&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),c=t.internal.subscribers,u=0;u<c.length;u++)(h=c[u]).ref.current(h.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function gO(){let e=fG.useContext(gC);if(!e)throw Error("R3F: Hooks can only be used within the Canvas component!");return e}function gk(e=e=>e,t){return gO()(e,t)}function gB(e,t=0){let n=gO(),r=n.getState().internal.subscribe,i=ge(e);return f7(()=>r(i,t,n),[t,r,n]),null}let gN=new WeakMap;function gF(e,t){return function(n,...r){let i=gN.get(n);return!i&&(i=new n,gN.set(n,i)),e&&e(i),Promise.all(r.map(e=>new Promise((n,r)=>i.load(e,e=>{e.scene&&Object.assign(e,gc(e.scene)),n(e)},t,t=>r(Error(`Could not load ${e}: ${null==t?void 0:t.message}`))))))}}function gz(e,t,n,r){let i=Array.isArray(t)?t:[t],a=fK(gF(n,r),[e,...i],{equal:gu.equ});return Array.isArray(t)?a:a[0]}gz.preload=function(e,t,n){let r=Array.isArray(t)?t:[t];return fQ(gF(n),[e,...r])},gz.clear=function(e,t){return f$([e,...Array.isArray(t)?t:[t]])};let gU=new Map,{invalidate:gH,advance:gG}=function(e){let t,n,r,i=!1,a=!1;function s(u){for(let h of(n=requestAnimationFrame(s),i=!0,t=0,gR("before",u),a=!0,e.values())){var c;(r=h.store.getState()).internal.active&&("always"===r.frameloop||r.internal.frames>0)&&!(null!=(c=r.gl.xr)&&c.isPresenting)&&(t+=gL(u,r))}if(a=!1,gR("after",u),0===t)return gR("tail",u),i=!1,cancelAnimationFrame(n)}return{loop:s,invalidate:function t(n,r=1){var u;if(!n)return e.forEach(e=>t(e.store.getState(),r));(null==(u=n.gl.xr)||!u.isPresenting)&&n.internal.active&&"never"!==n.frameloop&&(r>1?n.internal.frames=Math.min(60,n.internal.frames+r):a?n.internal.frames=2:n.internal.frames=1,!i&&(i=!0,requestAnimationFrame(s)))},advance:function(t,n=!0,r,i){if(n&&gR("before",t),r)gL(t,r,i);else for(let n of e.values())gL(t,n.store.getState());n&&gR("after",t)}}}(gU),{reconciler:gV,applyProps:gW}=function(e,t){function n(e,{args:t=[],attach:n,...r},i){let a,s=`${e[0].toUpperCase()}${e.slice(1)}`;if("primitive"===e){if(void 0===r.object)throw Error("R3F: Primitives without 'object' are invalid!");a=gh(r.object,{type:e,root:i,attach:n,primitive:!0})}else{let r=f3[s];if(!r)throw Error(`R3F: ${s} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(t))throw Error("R3F: The args prop must be an array!");a=gh(new r(...t),{type:e,root:i,attach:n,memoizedProps:{args:t}})}return void 0===a.__r3f.attach&&(a instanceof o$?a.__r3f.attach="geometry":a instanceof oE&&(a.__r3f.attach="material")),"inject"!==s&&gy(a,r),a}function r(e,t){let n=!1;if(t){var r,i;null!=(r=t.__r3f)&&r.attach?gf(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),n=!0),!n&&(null==(i=e.__r3f)||i.objects.push(t)),!t.__r3f&&gh(t,{}),t.__r3f.parent=e,gx(t),g_(t)}}function i(e,t,n){let r=!1;if(t){var i,a;if(null!=(i=t.__r3f)&&i.attach)gf(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"}),e.dispatchEvent({type:"childadded",child:t});let i=e.children.filter(e=>e!==t),a=i.indexOf(n);e.children=[...i.slice(0,a),t,...i.slice(a)],r=!0}!r&&(null==(a=e.__r3f)||a.objects.push(t)),!t.__r3f&&gh(t,{}),t.__r3f.parent=e,gx(t),g_(t)}}function a(e,t,n=!1){e&&[...e].forEach(e=>s(t,e,n))}function s(e,t,n){if(t){var r,i,s,u,c;t.__r3f&&(t.__r3f.parent=null),null!=(r=e.__r3f)&&r.objects&&(e.__r3f.objects=e.__r3f.objects.filter(e=>e!==t)),null!=(i=t.__r3f)&&i.attach?gg(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.remove(t),null!=(u=t.__r3f)&&u.root&&function(e,t){let{internal:n}=e.getState();n.interaction=n.interaction.filter(e=>e!==t),n.initialHits=n.initialHits.filter(e=>e!==t),n.hovered.forEach((e,r)=>{(e.eventObject===t||e.object===t)&&n.hovered.delete(r)}),n.capturedMap.forEach((e,r)=>{gw(n.capturedMap,t,e,r)})}(gl(t),t));let h=null==(s=t.__r3f)?void 0:s.primitive,p=!h&&(void 0===n?null!==t.dispose:n);if(!h&&(a(null==(c=t.__r3f)?void 0:c.objects,t,p),a(t.children,t,p)),delete t.__r3f,p&&t.dispose&&"Scene"!==t.type){let e=()=>{try{t.dispose()}catch(e){}};"undefined"==typeof IS_REACT_ACT_ENVIRONMENT?(0,f2.unstable_scheduleCallback)(f2.unstable_IdlePriority,e):e()}g_(e)}}let u=()=>{};return{reconciler:f1()({createInstance:n,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{if(!t)return;let n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,r(n,t))},removeChildFromContainer:(e,t)=>{t&&s(e.getState().scene,t)},insertInContainerBefore:(e,t,n)=>{if(!t||!n)return;let r=e.getState().scene;r.__r3f&&i(r,t,n)},getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;return!!(null!=(t=null==e?void 0:e.__r3f)?t:{}).handlers},prepareUpdate(e,t,n,r){var i;if((null!=(i=null==e?void 0:e.__r3f)?i:{}).primitive&&r.object&&r.object!==e)return[!0];{let{args:t=[],children:i,...a}=r,{args:s=[],children:u,...c}=n;if(!Array.isArray(t))throw Error("R3F: the args prop must be an array!");if(t.some((e,t)=>e!==s[t]))return[!0];let h=gm(e,a,c,!0);return h.changes.length?[!1,h]:null}},commitUpdate(e,[t,i],a,u,c,h){t?!function(e,t,i,a){var u;let c=null==(u=e.__r3f)?void 0:u.parent;if(!c)return;let h=n(t,i,e.__r3f.root);if(e.children){for(let t of e.children)t.__r3f&&r(h,t);e.children=e.children.filter(e=>!e.__r3f)}e.__r3f.objects.forEach(e=>r(h,e)),e.__r3f.objects=[],!e.__r3f.autoRemovedBeforeAppend&&s(c,e),h.parent&&(h.__r3f.autoRemovedBeforeAppend=!0),r(c,h),h.raycast&&h.__r3f.eventCount&&gl(h).getState().internal.interaction.push(h),[a,a.alternate].forEach(e=>{null!==e&&(e.stateNode=h,e.ref&&("function"==typeof e.ref?e.ref(h):e.ref.current=h))})}(e,a,c,h):gy(e,i)},commitMount(e,t,n,r){var i;let a=null!=(i=e.__r3f)?i:{};e.raycast&&a.handlers&&a.eventCount&&gl(e).getState().internal.interaction.push(e)},getPublicInstance:e=>e,prepareForCommit:()=>null,preparePortalMount:e=>gh(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(e){var t;let{attach:n,parent:r}=null!=(t=e.__r3f)?t:{};n&&r&&gg(r,e,n),e.isObject3D&&(e.visible=!1),g_(e)},unhideInstance(e,t){var n;let{attach:r,parent:i}=null!=(n=e.__r3f)?n:{};r&&i&&gf(i,e,r),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),g_(e)},createTextInstance:u,hideTextInstance:u,unhideTextInstance:u,getCurrentEventPriority:()=>t?t():fW.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!=typeof performance&&gu.fun(performance.now)?performance.now:gu.fun(Date.now)?Date.now:()=>0,scheduleTimeout:gu.fun(setTimeout)?setTimeout:void 0,cancelTimeout:gu.fun(clearTimeout)?clearTimeout:void 0}),applyProps:gy}}(0,function(){var e;let t="undefined"!=typeof self&&self||"undefined"!=typeof window&&window;if(!t)return fW.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return fW.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return fW.ContinuousEventPriority;default:return fW.DefaultEventPriority}}),gj={objects:"shallow",strict:!1},gX=(e,t)=>{let n="function"==typeof e?e(t):e;return gA(n)?n:new uY({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function gY(e){let t,n;let r=gU.get(e),i=null==r?void 0:r.fiber,a=null==r?void 0:r.store;let s="function"==typeof reportError?reportError:console.error,u=a||gT(gH,gG),c=i||gV.createContainer(u,fW.ConcurrentRoot,null,!1,null,"",s,null);!r&&gU.set(e,{fiber:c,store:u});let h=!1;return{configure(r={}){var i,a;let{gl:s,size:c,scene:p,events:f,onCreated:v,shadows:y=!1,linear:_=!1,flat:x=!1,legacy:b=!1,orthographic:S=!1,frameloop:w="always",dpr:M=[1,2],performance:A,raycaster:C,camera:T,onPointerMissed:I}=r,D=u.getState(),P=D.gl;!D.gl&&D.set({gl:P=gX(s,e)});let R=D.raycaster;!R&&D.set({raycaster:R=new fe});let{params:L,...O}=C||{};if(!gu.equ(O,R,gj)&&gW(R,{...O}),!gu.equ(L,R.params,gj)&&gW(R,{params:{...R.params,...L}}),!D.camera||D.camera===n&&!gu.equ(n,T,gj)){n=T;let e=T instanceof su,t=e?T:S?new sz(0,0,0,0,.1,1e3):new sp(75,0,.1,1e3);!e&&(t.position.z=5,T&&(gW(t,T),("aspect"in T||"left"in T||"right"in T||"bottom"in T||"top"in T)&&(t.manual=!0,t.updateProjectionMatrix())),!D.camera&&!(null!=T&&T.rotation)&&t.lookAt(0,0,0)),D.set({camera:t}),R.camera=t}if(!D.scene){let e;p instanceof uq?e=p:(e=new uq,p&&gW(e,p)),D.set({scene:gh(e)})}if(!D.xr){let e=(e,t)=>{let n=u.getState();"never"!==n.frameloop&&gG(e,!0,n,t)},t=()=>{let t=u.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),!t.gl.xr.isPresenting&&gH(t)},n={connect(){let e=u.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){let e=u.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"==typeof(null==(i=P.xr)?void 0:i.addEventListener)&&n.connect(),D.set({xr:n})}if(P.shadowMap){let e=P.shadowMap.enabled,t=P.shadowMap.type;P.shadowMap.enabled=!!y,gu.boo(y)?P.shadowMap.type=tL:gu.str(y)?P.shadowMap.type=null!=(a=({basic:tP,percentage:tR,soft:tL,variance:tO})[y])?a:tL:gu.obj(y)&&Object.assign(P.shadowMap,y),(e!==P.shadowMap.enabled||t!==P.shadowMap.type)&&(P.shadowMap.needsUpdate=!0)}let k=f6();k&&("enabled"in k?k.enabled=!b:"legacyMode"in k&&(k.legacyMode=b)),!h&&gW(P,{outputEncoding:_?3e3:3001,toneMapping:x?nh:ng}),D.legacy!==b&&D.set(()=>({legacy:b})),D.linear!==_&&D.set(()=>({linear:_})),D.flat!==x&&D.set(()=>({flat:x})),s&&!gu.fun(s)&&!gA(s)&&!gu.equ(s,P,gj)&&gW(P,s),f&&!D.events.handlers&&D.set({events:f(u)});let B=function(e,t){let n="undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement;if(t){let{width:e,height:r,top:i,left:a,updateStyle:s=n}=t;return{width:e,height:r,top:i,left:a,updateStyle:s}}if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){let{width:t,height:r,top:i,left:a}=e.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:a,updateStyle:n}}if("undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)return{width:e.width,height:e.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}(e,c);return!gu.equ(B,D.size,gj)&&D.setSize(B.width,B.height,B.updateStyle,B.top,B.left),M&&D.viewport.dpr!==go(M)&&D.setDpr(M),D.frameloop!==w&&D.setFrameloop(w),!D.onPointerMissed&&D.set({onPointerMissed:I}),A&&!gu.equ(A,D.performance,gj)&&D.set(e=>({performance:{...e.performance,...A}})),t=v,h=!0,this},render(n){return!h&&this.configure(),gV.updateContainer((0,tS.jsx)(gJ,{store:u,children:n,onCreated:t,rootElement:e}),c,null,()=>void 0),u},unmount(){gZ(e)}}}function gJ({store:e,children:t,onCreated:n,rootElement:r}){return f7(()=>{let t=e.getState();t.set(e=>({internal:{...e.internal,active:!0}})),n&&n(t),!e.getState().events.connected&&(null==t.events.connect||t.events.connect(r))},[]),(0,tS.jsx)(gC.Provider,{value:e,children:t})}function gZ(e,t){let n=gU.get(e),r=null==n?void 0:n.fiber;if(r){let i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),gV.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var n,r,a,s;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(a=i.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(s=i.gl)&&s.xr&&i.xr.disconnect(),!function(e){for(let t in e.dispose&&"Scene"!==e.type&&e.dispose(),e)null==t.dispose||t.dispose(),delete e[t]}(i),gU.delete(e),t&&t(e)}catch(e){}},500)})}}function gq({state:e={},children:t,container:n}){let{events:r,size:i,...a}=e,s=gO(),[u]=fG.useState(()=>new fe),[c]=fG.useState(()=>new ij),h=fG.useCallback((e,t)=>{let h,p={...e};Object.keys(e).forEach(n=>{(gM.includes(n)||e[n]!==t[n]&&t[n])&&delete p[n]});if(t&&i){let n=t.camera;h=e.viewport.getCurrentViewport(n,new ap,i),n!==e.camera&&gb(n,i)}return{...p,scene:n,raycaster:u,pointer:c,mouse:c,previousRoot:s,events:{...e.events,...null==t?void 0:t.events,...r},size:{...e.size,...i},viewport:{...e.viewport,...h},...a}},[e]),[p]=fG.useState(()=>{let e=s.getState();return fX((t,h)=>({...e,scene:n,raycaster:u,pointer:c,mouse:c,previousRoot:s,events:{...e.events,...r},size:{...e.size,...i},...a,set:t,get:h,setEvents:e=>t(t=>({...t,events:{...t.events,...e}}))}))});return fG.useEffect(()=>{let e=s.subscribe(e=>p.setState(t=>h(e,t)));return()=>{e()}},[h]),fG.useEffect(()=>{p.setState(e=>h(s.getState(),e))},[h]),fG.useEffect(()=>()=>{p.destroy()},[]),(0,tS.jsx)(tS.Fragment,{children:gV.createPortal((0,tS.jsx)(gC.Provider,{value:p,children:t}),p,null)})}gV.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:fG.version}),fG.unstable_act;let gK={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function gQ(e){let{handlePointer:t}=function(e){function t(e){return e.filter(e=>["Move","Over","Enter","Out","Leave"].some(t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}function n(t){let{internal:n}=e.getState();for(let e of n.hovered.values())if(!t.length||!t.find(t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId)){let r=e.eventObject.__r3f,i=null==r?void 0:r.handlers;if(n.hovered.delete(gS(e)),null!=r&&r.eventCount){let n={...e,intersections:t};null==i.onPointerOut||i.onPointerOut(n),null==i.onPointerLeave||i.onPointerLeave(n)}}}function r(e,t){for(let n=0;n<t.length;n++){let r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{let{internal:r}=e.getState();"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame(()=>{r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))})}}return function(a){let{onPointerMissed:s,internal:u}=e.getState();u.lastEvent.current=a;let c="onPointerMove"===i,h="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,p=function(t,n){let r=e.getState(),i=new Set,a=[],s=n?n(r.internal.interaction):r.internal.interaction;for(let e=0;e<s.length;e++){let t=gs(s[e]);t&&(t.raycaster.camera=void 0)}!r.previousRoot&&(null==r.events.compute||r.events.compute(t,r));let u=s.flatMap(function(e){let n=gs(e);if(!n||!n.events.enabled||null===n.raycaster.camera)return[];if(void 0===n.raycaster.camera){var r;null==n.events.compute||n.events.compute(t,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)}return n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]}).sort((e,t)=>{let n=gs(e.object),r=gs(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance}).filter(e=>{let t=gS(e);return!i.has(t)&&(i.add(t),!0)});for(let e of(r.events.filter&&(u=r.events.filter(u,r)),u)){let t=e.object;for(;t;){var c;null!=(c=t.__r3f)&&c.eventCount&&a.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())!i.has(gS(e.intersection))&&a.push(e.intersection);return a}(a,c?t:void 0),f=h?function(t){let{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(a):0;"onPointerDown"===i&&(u.initialClick=[a.offsetX,a.offsetY],u.initialHits=p.map(e=>e.eventObject)),h&&!p.length&&f<=2&&(r(a,u.interaction),s&&s(a)),c&&n(p);!function(t,r,i,a){let s=e.getState();if(t.length){let e={stopped:!1};for(let u of t){let{raycaster:c,pointer:h,camera:p,internal:f}=gs(u.object)||s,v=new ap(h.x,h.y,0).unproject(p),y=e=>{var t,n;return null!=(t=null==(n=f.capturedMap.get(e))?void 0:n.has(u.eventObject))&&t},_=e=>{let t={intersection:u,target:r.target};f.capturedMap.has(e)?f.capturedMap.get(e).set(u.eventObject,t):f.capturedMap.set(e,new Map([[u.eventObject,t]])),r.target.setPointerCapture(e)},x=e=>{let t=f.capturedMap.get(e);t&&gw(f.capturedMap,u.eventObject,t,e)},b={};for(let e in r){let t=r[e];"function"!=typeof t&&(b[e]=t)}let S={...u,...b,pointer:h,intersections:t,stopped:e.stopped,delta:i,unprojectedPoint:v,ray:c.ray,camera:p,stopPropagation(){let i="pointerId"in r&&f.capturedMap.get(r.pointerId);(!i||i.has(u.eventObject))&&(S.stopped=e.stopped=!0,f.hovered.size&&Array.from(f.hovered.values()).find(e=>e.eventObject===u.eventObject)&&n([...t.slice(0,t.indexOf(u)),u]))},target:{hasPointerCapture:y,setPointerCapture:_,releasePointerCapture:x},currentTarget:{hasPointerCapture:y,setPointerCapture:_,releasePointerCapture:x},nativeEvent:r};if(a(S),!0===e.stopped)break}};}(p,a,f,function(e){let t=e.eventObject,n=t.__r3f,s=null==n?void 0:n.handlers;if(null!=n&&n.eventCount){if(c){if(s.onPointerOver||s.onPointerEnter||s.onPointerOut||s.onPointerLeave){let t=gS(e),n=u.hovered.get(t);n?n.stopped&&e.stopPropagation():(u.hovered.set(t,e),null==s.onPointerOver||s.onPointerOver(e),null==s.onPointerEnter||s.onPointerEnter(e))}null==s.onPointerMove||s.onPointerMove(e)}else{let n=s[i];n?(!h||u.initialHits.includes(t))&&(r(a,u.interaction.filter(e=>!u.initialHits.includes(e))),n(e)):h&&u.initialHits.includes(t)&&r(a,u.interaction.filter(e=>!u.initialHits.includes(e)))}}})}}}}(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-(2*(e.offsetY/t.size.height))+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(gK).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var t;let{events:n,internal:r}=e.getState();null!=(t=r.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var n;let{set:r,events:i}=e.getState();null==i.disconnect||i.disconnect(),r(e=>({events:{...e.events,connected:t}})),Object.entries(null!=(n=i.handlers)?n:[]).forEach(([e,n])=>{let[r,i]=gK[e];t.addEventListener(r,n,{passive:i})})},disconnect:()=>{let{set:t,events:n}=e.getState();if(n.connected){var r;Object.entries(null!=(r=n.handlers)?r:[]).forEach(([e,t])=>{if(n&&n.connected instanceof HTMLElement){let[r]=gK[e];n.connected.removeEventListener(r,t)}}),t(e=>({events:{...e.events,connected:void 0}}))}}}}var g$=n("1110"),g0=n.n(g$),g1=Object.defineProperty,g2=Object.defineProperties,g3=Object.getOwnPropertyDescriptors,g5=Object.getOwnPropertySymbols,g4=Object.prototype.hasOwnProperty,g6=Object.prototype.propertyIsEnumerable,g9=(e,t,n)=>t in e?g1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g8=(e,t)=>{for(var n in t||(t={}))g4.call(t,n)&&g9(e,n,t[n]);if(g5)for(var n of g5(t))g6.call(t,n)&&g9(e,n,t[n]);return e},g7=(e,t)=>g2(e,g3(t));let me="undefined"!=typeof window&&((null==(ei=window.document)?void 0:ei.createElement)||(null==(ea=window.navigator)?void 0:ea.product)==="ReactNative")?fG.useLayoutEffect:fG.useEffect;function mt(e,t,n){if(!e)return;if(!0===n(e))return e;let r=t?e.return:e.child;for(;r;){let e=mt(r,t,n);if(e)return e;r=t?null:r.sibling}}function mn(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}let mr=console.error;console.error=function(){let e=[...arguments].join("");if((null==e?void 0:e.startsWith("Warning:"))&&e.includes("useContext")){console.error=mr;return}return mr.apply(this,arguments)};let mi=mn(fG.createContext(null));class ma extends fG.Component{render(){return fG.createElement(mi.Provider,{value:this._reactInternals},this.props.children)}}function mo(){let e=fG.useContext(mi);if(null===e)throw Error("its-fine: useFiber must be called within a <FiberProvider />!");let t=fG.useId();return fG.useMemo(()=>{for(let n of[e,null==e?void 0:e.alternate]){if(!n)continue;let e=mt(n,!1,e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}});if(e)return e}},[e,t])}let ms=["x","y","top","bottom","left","right","width","height"],ml=(e,t)=>ms.every(n=>e[n]===t[n]),mu=fG.forwardRef(function({children:e,fallback:t,resize:n,style:r,gl:i,events:a=gQ,eventSource:s,eventPrefix:u,shadows:c,linear:h,flat:p,legacy:f,orthographic:v,frameloop:y,dpr:_,performance:x,raycaster:b,camera:S,scene:w,onPointerMissed:M,onCreated:A,...C},T){fG.useMemo(()=>f5(tl),[]);let I=function(){let e=function(){let e=mo(),[t]=fG.useState(()=>new Map);t.clear();let n=e;for(;n;){if(n.type&&"object"==typeof n.type){let e=void 0===n.type._context&&n.type.Provider===n.type?n.type:n.type._context;e&&e!==mi&&!t.has(e)&&t.set(e,fG.useContext(mn(e)))}n=n.return}return t}();return fG.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>r=>fG.createElement(t,null,fG.createElement(n.Provider,g7(g8({},r),{value:e.get(n)}))),e=>fG.createElement(ma,g8({},e))),[e])}(),[D,P]=function({debounce:e,scroll:t,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){let i=n||"undefined"!=typeof window&&window.ResizeObserver,[a,s]=(0,fG.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!i)return a.width=1280,a.height=800,[()=>{},a,()=>{}];let u=(0,fG.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=e?"number"==typeof e?e:e.scroll:null,h=e?"number"==typeof e?e:e.resize:null,p=(0,fG.useRef)(!1);(0,fG.useEffect)(()=>(p.current=!0,()=>void(p.current=!1)));let[f,v,y]=(0,fG.useMemo)(()=>{let e=()=>{if(!u.current.element)return;let{left:e,top:t,width:n,height:i,bottom:a,right:c,x:h,y:f}=u.current.element.getBoundingClientRect(),v={left:e,top:t,width:n,height:i,bottom:a,right:c,x:h,y:f};u.current.element instanceof HTMLElement&&r&&(v.height=u.current.element.offsetHeight,v.width=u.current.element.offsetWidth),Object.freeze(v),p.current&&!ml(u.current.lastBounds,v)&&s(u.current.lastBounds=v)};return[e,h?g0()(e,h):e,c?g0()(e,c):e]},[s,r,c,h]);function _(){u.current.scrollContainers&&(u.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",y,!0)),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null),u.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",u.current.orientationHandler))}function x(){var e;u.current.element&&(u.current.resizeObserver=new i(v),null==(e=u.current.resizeObserver)||e.observe(u.current.element),t&&u.current.scrollContainers&&u.current.scrollContainers.forEach(e=>e.addEventListener("scroll",y,{capture:!0,passive:!0})),u.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",u.current.orientationHandler))}return function(e,t){(0,fG.useEffect)(()=>{if(t)return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",e,!0)},[e,t])}(y,!!t),function(e){(0,fG.useEffect)(()=>(window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)),[e])}(v),(0,fG.useEffect)(()=>{_(),x()},[t,y,v]),(0,fG.useEffect)(()=>_,[]),[e=>{e&&e!==u.current.element&&(_(),u.current.element=e,u.current.scrollContainers=function e(t){let n=[];if(!t||t===document.body)return n;let{overflow:r,overflowX:i,overflowY:a}=window.getComputedStyle(t);return[r,i,a].some(e=>"auto"===e||"scroll"===e)&&n.push(t),[...n,...e(t.parentElement)]}(e),x())},a,f]}({scroll:!0,debounce:{scroll:50,resize:0},...n}),R=fG.useRef(null),L=fG.useRef(null);fG.useImperativeHandle(T,()=>R.current);let O=ge(M),[k,B]=fG.useState(!1),[N,F]=fG.useState(!1);if(k)throw k;if(N)throw N;let z=fG.useRef(null);f7(()=>{let t=R.current;P.width>0&&P.height>0&&t&&(!z.current&&(z.current=gY(t)),z.current.configure({gl:i,events:a,shadows:c,linear:h,flat:p,legacy:f,orthographic:v,frameloop:y,dpr:_,performance:x,raycaster:b,camera:S,scene:w,size:P,onPointerMissed:(...e)=>null==O.current?void 0:O.current(...e),onCreated:e=>{null==e.events.connect||e.events.connect(s?f8(s)?s.current:s:L.current),u&&e.setEvents({compute:(e,t)=>{let n=e[u+"X"],r=e[u+"Y"];t.pointer.set(n/t.size.width*2-1,-(2*(r/t.size.height))+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==A||A(e)}}),z.current.render((0,tS.jsx)(I,{children:(0,tS.jsx)(gn,{set:F,children:(0,tS.jsx)(fG.Suspense,{fallback:(0,tS.jsx)(gt,{set:B}),children:e})})})))}),fG.useEffect(()=>{let e=R.current;if(e)return()=>gZ(e)},[]);let U=s?"none":"auto";return(0,tS.jsx)("div",{ref:L,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:U,...r},...C,children:(0,tS.jsx)("div",{ref:D,style:{width:"100%",height:"100%"},children:(0,tS.jsx)("canvas",{ref:R,style:{display:"block"},children:t})})})}),mc=fG.forwardRef(function(e,t){return(0,tS.jsx)(ma,{children:(0,tS.jsx)(mu,{...e,ref:t})})}),mh=e=>{let t=mg(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{let n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),md(n,t)||mf(e)},getConflictingClassGroupIds:(e,t)=>{let i=n[e]||[];return t&&r[e]?[...i,...r[e]]:i}}},md=(e,t)=>{if(0===e.length)return t.classGroupId;let n=e[0],r=t.nextPart.get(n),i=r?md(e.slice(1),r):void 0;if(i)return i;if(0===t.validators.length)return;let a=e.join("-");return t.validators.find(({validator:e})=>e(a))?.classGroupId},mp=/^\[(.+)\]$/,mf=e=>{if(mp.test(e)){let t=mp.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},mg=e=>{let{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return m_(Object.entries(e.classGroups),n).forEach(([e,n])=>{mm(n,r,e,t)}),r},mm=(e,t,n,r)=>{e.forEach(e=>{if("string"==typeof e){(""===e?t:mv(t,e)).classGroupId=n;return}if("function"==typeof e){if(my(e)){mm(e(r),t,n,r);return}t.validators.push({validator:e,classGroupId:n});return}Object.entries(e).forEach(([e,i])=>{mm(i,mv(t,e),n,r)})})},mv=(e,t)=>{let n=e;return t.split("-").forEach(e=>{!n.nextPart.has(e)&&n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},my=e=>e.isThemeGetter,m_=(e,t)=>t?e.map(([e,n])=>[e,n.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,n])=>[t+e,n])):e)]):e,mx=e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,n=new Map,r=new Map,i=(i,a)=>{n.set(i,a),++t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(i(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):i(e,t)}}},mb=e=>{let{separator:t,experimentalParseClassName:n}=e,r=1===t.length,i=t[0],a=t.length,s=e=>{let n;let s=[],u=0,c=0;for(let h=0;h<e.length;h++){let p=e[h];if(0===u){if(p===i&&(r||e.slice(h,h+a)===t)){s.push(e.slice(c,h)),c=h+a;continue}if("/"===p){n=h;continue}}"["===p?u++:"]"===p&&u--}let h=0===s.length?e:e.substring(c),p=h.startsWith("!"),f=p?h.substring(1):h;return{modifiers:s,hasImportantModifier:p,baseClassName:f,maybePostfixModifierPosition:n&&n>c?n-c:void 0}};return n?e=>n({className:e,parseClassName:s}):s},mS=e=>{if(e.length<=1)return e;let t=[],n=[];return e.forEach(e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)}),t.push(...n.sort()),t},mw=e=>({cache:mx(e.cacheSize),parseClassName:mb(e),...mh(e)}),mM=/\s+/,mA=(e,t)=>{let{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,a=[],s=e.trim().split(mM),u="";for(let e=s.length-1;e>=0;e-=1){let t=s[e],{modifiers:c,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:f}=n(t),v=!!f,y=r(v?p.substring(0,f):p);if(!y){if(!v||!(y=r(p))){u=t+(u.length>0?" "+u:u);continue}v=!1}let _=mS(c).join(":"),x=h?_+"!":_,b=x+y;if(a.includes(b))continue;a.push(b);let S=i(y,v);for(let e=0;e<S.length;++e){let t=S[e];a.push(x+t)}u=t+(u.length>0?" "+u:u)}return u};function mC(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=mT(e))&&(r&&(r+=" "),r+=t);return r}let mT=e=>{let t;if("string"==typeof e)return e;let n="";for(let r=0;r<e.length;r++)e[r]&&(t=mT(e[r]))&&(n&&(n+=" "),n+=t);return n},mE=e=>{let t=t=>t[e]||[];return t.isThemeGetter=!0,t},mI=/^\[(?:([a-z-]+):)?(.+)\]$/i,mD=/^\d+\/\d+$/,mP=new Set(["px","full","screen"]),mR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,mL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,mO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,mk=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,mB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,mN=e=>mz(e)||mP.has(e)||mD.test(e),mF=e=>mQ(e,"length",m$),mz=e=>!!e&&!Number.isNaN(Number(e)),mU=e=>mQ(e,"number",mz),mH=e=>!!e&&Number.isInteger(Number(e)),mG=e=>e.endsWith("%")&&mz(e.slice(0,-1)),mV=e=>mI.test(e),mW=e=>mR.test(e),mj=new Set(["length","size","percentage"]),mX=e=>mQ(e,mj,m0),mY=e=>mQ(e,"position",m0),mJ=new Set(["image","url"]),mZ=e=>mQ(e,mJ,m2),mq=e=>mQ(e,"",m1),mK=()=>!0,mQ=(e,t,n)=>{let r=mI.exec(e);if(r)return r[1]?"string"==typeof t?r[1]===t:t.has(r[1]):n(r[2]);return!1},m$=e=>mL.test(e)&&!mO.test(e),m0=()=>!1,m1=e=>mk.test(e),m2=e=>mB.test(e);Symbol.toStringTag;let m3=function(e,...t){let n,r,i;let a=function(u){return r=(n=mw(t.reduce((e,t)=>t(e),e()))).cache.get,i=n.cache.set,a=s,s(u)};function s(e){let t=r(e);if(t)return t;let a=mA(e,n);return i(e,a),a}return function(){return a(mC.apply(null,arguments))}}(()=>{let e=mE("colors"),t=mE("spacing"),n=mE("blur"),r=mE("brightness"),i=mE("borderColor"),a=mE("borderRadius"),s=mE("borderSpacing"),u=mE("borderWidth"),c=mE("contrast"),h=mE("grayscale"),p=mE("hueRotate"),f=mE("invert"),v=mE("gap"),y=mE("gradientColorStops"),_=mE("gradientColorStopPositions"),x=mE("inset"),b=mE("margin"),S=mE("opacity"),w=mE("padding"),M=mE("saturate"),A=mE("scale"),C=mE("sepia"),T=mE("skew"),I=mE("space"),D=mE("translate"),P=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",mV,t],O=()=>[mV,t],k=()=>["",mN,mF],B=()=>["auto",mz,mV],N=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],F=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",mV],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>[mz,mV];return{cacheSize:500,separator:":",theme:{colors:[mK],spacing:[mN,mF],blur:["none","",mW,mV],brightness:V(),borderColor:[e],borderRadius:["none","","full",mW,mV],borderSpacing:O(),borderWidth:k(),contrast:V(),grayscale:H(),hueRotate:V(),invert:H(),gap:O(),gradientColorStops:[e],gradientColorStopPositions:[mG,mF],inset:L(),margin:L(),opacity:V(),padding:O(),saturate:V(),scale:V(),sepia:H(),skew:V(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",mV]}],container:["container"],columns:[{columns:[mW]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...N(),mV]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",mH,mV]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",mV]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",mH,mV]}],"grid-cols":[{"grid-cols":[mK]}],"col-start-end":[{col:["auto",{span:["full",mH,mV]},mV]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[mK]}],"row-start-end":[{row:["auto",{span:[mH,mV]},mV]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",mV]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",mV]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",mV,t]}],"min-w":[{"min-w":[mV,t,"min","max","fit"]}],"max-w":[{"max-w":[mV,t,"none","full","min","max","fit","prose",{screen:[mW]},mW]}],h:[{h:[mV,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[mV,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[mV,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[mV,t,"auto","min","max","fit"]}],"font-size":[{text:["base",mW,mF]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",mU]}],"font-family":[{font:[mK]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",mV]}],"line-clamp":[{"line-clamp":["none",mz,mU]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",mN,mV]}],"list-image":[{"list-image":["none",mV]}],"list-style-type":[{list:["none","disc","decimal",mV]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",mN,mF]}],"underline-offset":[{"underline-offset":["auto",mN,mV]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",mV]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",mV]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...N(),mY]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",mX]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},mZ]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[...F(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:F()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...F()]}],"outline-offset":[{"outline-offset":[mN,mV]}],"outline-w":[{outline:[mN,mF]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[mN,mF]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",mW,mq]}],"shadow-color":[{shadow:[mK]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",mW,mV]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[f]}],saturate:[{saturate:[M]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[M]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",mV]}],duration:[{duration:V()}],ease:[{ease:["linear","in","out","in-out",mV]}],delay:[{delay:V()}],animate:[{animate:["none","spin","ping","pulse","bounce",mV]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[mH,mV]}],"translate-x":[{"translate-x":[D]}],"translate-y":[{"translate-y":[D]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",mV]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",mV]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",mV]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[mN,mF,mU]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}),m5=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return m3(function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=function e(t){var n,r,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t)){var a=t.length;for(n=0;n<a;n++)t[n]&&(r=e(t[n]))&&(i&&(i+=" "),i+=r)}else for(r in t)t[r]&&(i&&(i+=" "),i+=r)}return i}(e))&&(r&&(r+=" "),r+=t);return r}(t))},m4={props:{canvas:{shadows:!0,orthographic:!0,dpr:[1,2],camera:{position:[25,50,50],fov:20,zoom:50}},shadow:{frames:60,color:"#cbd5e1",colorBlend:2,toneMapped:!0,alphaTest:.75,opacity:.9,scale:16},light:{intensity:3.5,amount:8,radius:4,ambient:.5,position:[-25,50,25],bias:.001,size:16},grid:{args:[10.5,10.5],cellSize:.5,cellThickness:.5,cellColor:"#a3a3a3",sectionSize:3,sectionThickness:1,sectionColor:"#a3a3a3",fadeStrength:1,followCamera:!1,infiniteGrid:!0},camera:{makeDefault:!0,dollyToCursor:!1,maxPolarAngle:Math.PI/2.2,minZoom:25,maxZoom:150,minDistance:5,maxDistance:15},background:{attach:"background",args:["#f5f5f5"]},fog:{attach:"fog",args:["#f5f5f5",60,100]}},config:{cameraController:{focusedOffset:[2.5,1.5,2.5],focusedPosition:[-50,25,50],focusedZoom:75,unfocusedPosition:[25,50,50],unfocusedZoom:70},floatingUI:{width:300,height:350,focusedScale:.8,focusedPosition:[2.7,3,2],focusedRotation:[0,-52,0]}}};function m6(){return(m6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}let m9=e=>e&&e.isCubeTexture;class m8 extends st{constructor(e,t){var n,r;let i=m9(e),a=null!=(r=i?null==(n=e.image[0])?void 0:n.width:e.image.width)?r:1024,s=Math.floor(Math.log2(a/4)),u=Math.pow(2,s),c=3*Math.max(u,112),h=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,p=[i?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/c}`,`#define CUBEUV_TEXEL_HEIGHT ${1/(4*u)}`,`#define CUBEUV_MAX_MIP ${s}.0`].join("\n")+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(tM.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,f={map:{value:e},height:{value:(null==t?void 0:t.height)||15},radius:{value:(null==t?void 0:t.radius)||100}},v=new di(1,16);super(v,new sl({uniforms:f,fragmentShader:p,vertexShader:h,side:tN}))}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class m7 extends d3{constructor(e){super(e),this.type=nY}parse(e){let t,n,r;let i=function(e,t){switch(e){case 1:throw Error("THREE.RGBELoader: Read Error: "+(t||""));case 2:throw Error("THREE.RGBELoader: Write Error: "+(t||""));case 3:throw Error("THREE.RGBELoader: Bad File Format: "+(t||""));default:throw Error("THREE.RGBELoader: Memory Error: "+(t||""))}},a=function(e,t,n){t=t||1024;let r=e.pos,i=-1,a=0,s="",u=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));for(;0>(i=u.indexOf("\n"))&&a<t&&r<e.byteLength;)s+=u,a+=u.length,r+=128,u+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return!!(-1<i)&&(!1!==n&&(e.pos+=a+i+1),s+u.slice(0,i))},s=new Uint8Array(e);s.pos=0;let u=function(e){let t,n;let r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,u=/^\s*FORMAT=(\S+)\s*$/,c=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,h={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};for((e.pos>=e.byteLength||!(t=a(e)))&&i(1,"no header found"),!(n=t.match(/^#\?(\S+)/))&&i(3,"bad initial token"),h.valid|=1,h.programtype=n[1],h.string+=t+"\n";!1!==(t=a(e));){;if(h.string+=t+"\n","#"===t.charAt(0)){h.comments+=t+"\n";continue}if((n=t.match(r))&&(h.gamma=parseFloat(n[1])),(n=t.match(s))&&(h.exposure=parseFloat(n[1])),(n=t.match(u))&&(h.valid|=2,h.format=n[1]),(n=t.match(c))&&(h.valid|=4,h.height=parseInt(n[1],10),h.width=parseInt(n[2],10)),2&h.valid&&4&h.valid)break}return!(2&h.valid)&&i(3,"missing format specifier"),!(4&h.valid)&&i(3,"missing image size specifier"),h}(s),c=u.width,h=u.height,p=function(e,t,n){if(t<8||t>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);t!==(e[2]<<8|e[3])&&i(3,"wrong scanline width");let r=new Uint8Array(4*t*n);!r.length&&i(4,"unable to allocate buffer space");let a=0,s=0,u=4*t,c=new Uint8Array(4),h=new Uint8Array(u),p=n;for(;p>0&&s<e.byteLength;){s+4>e.byteLength&&i(1),c[0]=e[s++],c[1]=e[s++],c[2]=e[s++],c[3]=e[s++],(2!=c[0]||2!=c[1]||(c[2]<<8|c[3])!=t)&&i(3,"bad rgbe scanline format");let n=0,f;for(;n<u&&s<e.byteLength;){let t=(f=e[s++])>128;if(t&&(f-=128),(0===f||n+f>u)&&i(3,"bad scanline data"),t){let t=e[s++];for(let e=0;e<f;e++)h[n++]=t}else h.set(e.subarray(s,s+f),n),n+=f,s+=f}for(let e=0;e<t;e++){let n=0;r[a]=h[e+n],n+=t,r[a+1]=h[e+n],n+=t,r[a+2]=h[e+n],n+=t,r[a+3]=h[e+n],a+=4}p--}return r}(s.subarray(s.pos),c,h);switch(this.type){case nX:let f=new Float32Array(4*(r=p.length/4));for(let e=0;e<r;e++)!function(e,t,n,r){let i=Math.pow(2,e[t+3]-128)/255;n[r+0]=e[t+0]*i,n[r+1]=e[t+1]*i,n[r+2]=e[t+2]*i,n[r+3]=1}(p,4*e,f,4*e);t=f,n=nX;break;case nY:let v=new Uint16Array(4*(r=p.length/4));for(let e=0;e<r;e++)!function(e,t,n,r){let i=Math.pow(2,e[t+3]-128)/255;n[r+0]=oL.toHalfFloat(Math.min(e[t+0]*i,65504)),n[r+1]=oL.toHalfFloat(Math.min(e[t+1]*i,65504)),n[r+2]=oL.toHalfFloat(Math.min(e[t+2]*i,65504)),n[r+3]=oL.toHalfFloat(1)}(p,4*e,v,4*e);t=v,n=nY;break;default:throw Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:c,height:h,data:t,header:u.string,gamma:u.gamma,exposure:u.exposure,type:n}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,function(e,n){switch(e.type){case nX:case nY:"colorSpace"in e?e.colorSpace="srgb-linear":e.encoding=3e3,e.minFilter=nk,e.magFilter=nk,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)},n,r)}}var ve=function(e,t,n,r,i){var a=new Worker(null[t]||(null[t]=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))));return a.onerror=function(e){return i(e.error,null)},a.onmessage=function(e){return i(null,e.data)},a.postMessage(n,r),a},vt=Uint8Array,vn=Uint16Array,vr=Uint32Array,vi=new vt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),va=new vt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),vo=new vt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vs=function(e,t){for(var n=new vn(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new vr(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return[n,i]},vl=vs(vi,2),vu=vl[0],vc=vl[1];vu[28]=258,vc[258]=28;for(var vh=vs(va,0),vd=vh[0],vp=vh[1],vf=new vn(32768),vg=0;vg<32768;++vg){var vm=(43690&vg)>>>1|(21845&vg)<<1;vm=(61680&(vm=(52428&vm)>>>2|(13107&vm)<<2))>>>4|(3855&vm)<<4,vf[vg]=((65280&vm)>>>8|(255&vm)<<8)>>>1}for(var vv=function(e,t,n){for(var r,i=e.length,a=0,s=new vn(t);a<i;++a)++s[e[a]-1];var u=new vn(t);for(a=0;a<t;++a)u[a]=u[a-1]+s[a-1]<<1;if(n){r=new vn(1<<t);var c=15-t;for(a=0;a<i;++a)if(e[a]){for(var h=a<<4|e[a],p=t-e[a],f=u[e[a]-1]++<<p,v=f|(1<<p)-1;f<=v;++f)r[vf[f]>>>c]=h}}else for(a=0,r=new vn(i);a<i;++a)e[a]&&(r[a]=vf[u[e[a]-1]++]>>>15-e[a]);return r},vy=new vt(288),vg=0;vg<144;++vg)vy[vg]=8;for(var vg=144;vg<256;++vg)vy[vg]=9;for(var vg=256;vg<280;++vg)vy[vg]=7;for(var vg=280;vg<288;++vg)vy[vg]=8;for(var v_=new vt(32),vg=0;vg<32;++vg)v_[vg]=5;var vx=vv(vy,9,1),vb=vv(v_,5,1),vS=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},vw=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},vM=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},vA=function(e){return(e/8|0)+(7&e&&1)},vC=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof vn?vn:e instanceof vr?vr:vt)(n-t);return r.set(e.subarray(t,n)),r},vT=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new vt(0);var i=!t||n,a=!n||n.i;!n&&(n={}),!t&&(t=new vt(3*r));var s=function(e){var n=t.length;if(e>n){var r=new vt(Math.max(2*n,e));r.set(t),t=r}},u=n.f||0,c=n.p||0,h=n.b||0,p=n.l,f=n.d,v=n.m,y=n.n,_=8*r;do{if(!p){n.f=u=vw(e,c,1);var x=vw(e,c+1,3);if(c+=3,x){if(1==x)p=vx,f=vb,v=9,y=5;else if(2==x){var b=vw(e,c,31)+257,S=vw(e,c+10,15)+4,w=b+vw(e,c+5,31)+1;c+=14;for(var M=new vt(w),A=new vt(19),C=0;C<S;++C)A[vo[C]]=vw(e,c+3*C,7);c+=3*S;for(var T=vS(A),I=(1<<T)-1,D=vv(A,T,1),C=0;C<w;){var P=D[vw(e,c,I)];c+=15&P;var R=P>>>4;if(R<16)M[C++]=R;else{var L=0,O=0;for(16==R?(O=3+vw(e,c,3),c+=2,L=M[C-1]):17==R?(O=3+vw(e,c,7),c+=3):18==R&&(O=11+vw(e,c,127),c+=7);O--;)M[C++]=L}}var k=M.subarray(0,b),B=M.subarray(b);v=vS(k),y=vS(B),p=vv(k,v,1),f=vv(B,y,1)}else throw"invalid block type"}else{var R=vA(c)+4,N=e[R-4]|e[R-3]<<8,F=R+N;if(F>r){if(a)throw"unexpected EOF";break}i&&s(h+N),t.set(e.subarray(R,F),h),n.b=h+=N,n.p=c=8*F;continue}if(c>_){if(a)throw"unexpected EOF";break}}i&&s(h+131072);for(var z=(1<<v)-1,U=(1<<y)-1,H=c;;H=c){var L=p[vM(e,c)&z],G=L>>>4;if((c+=15&L)>_){if(a)throw"unexpected EOF";break}if(!L)throw"invalid length/literal";if(G<256)t[h++]=G;else if(256==G){H=c,p=null;break}else{var V=G-254;if(G>264){var C=G-257,W=vi[C];V=vw(e,c,(1<<W)-1)+vu[C],c+=W}var j=f[vM(e,c)&U],X=j>>>4;if(!j)throw"invalid distance";c+=15&j;var B=vd[X];if(X>3){var W=va[X];B+=vM(e,c)&(1<<W)-1,c+=W}if(c>_){if(a)throw"unexpected EOF";break}i&&s(h+131072);for(var Y=h+V;h<Y;h+=4)t[h]=t[h-B],t[h+1]=t[h+1-B],t[h+2]=t[h+2-B],t[h+3]=t[h+3-B];h=Y}}n.l=p,n.p=H,n.b=h,p&&(u=1,n.m=v,n.d=f,n.n=y)}while(!u);return h==t.length?t:vC(t,0,h)},vE=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},vI=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},vD=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,a=n.slice();if(!i)return[vN,0];if(1==i){var s=new vt(n[0].s+1);return s[n[0].s]=1,[s,1]}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var u=n[0],c=n[1],h=0,p=1,f=2;for(n[0]={s:-1,f:u.f+c.f,l:u,r:c};p!=i-1;)u=n[n[h].f<n[f].f?h++:f++],c=n[h!=p&&n[h].f<n[f].f?h++:f++],n[p++]={s:-1,f:u.f+c.f,l:u,r:c};for(var v=a[0].s,r=1;r<i;++r)a[r].s>v&&(v=a[r].s);var y=new vn(v+1),_=vP(n[p-1],y,0);if(_>t){var r=0,x=0,b=_-t,S=1<<b;for(a.sort(function(e,t){return y[t.s]-y[e.s]||e.f-t.f});r<i;++r){var w=a[r].s;if(y[w]>t)x+=S-(1<<_-y[w]),y[w]=t;else break}for(x>>>=b;x>0;){var M=a[r].s;y[M]<t?x-=1<<t-y[M]++-1:++r}for(;r>=0&&x;--r){var A=a[r].s;y[A]==t&&(--y[A],++x)}_=t}return[new vt(y),_]},vP=function(e,t,n){return -1==e.s?Math.max(vP(e.l,t,n+1),vP(e.r,t,n+1)):t[e.s]=n},vR=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new vn(++t),r=0,i=e[0],a=1,s=function(e){n[r++]=e},u=1;u<=t;++u)if(e[u]==i&&u!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=e[u]}return[n.subarray(0,r),t]},vL=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},vO=function(e,t,n){var r=n.length,i=vA(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var a=0;a<r;++a)e[i+a+4]=n[a];return(i+4+r)*8},vk=function(e,t,n,r,i,a,s,u,c,h,p){vE(t,p++,n),++i[256];for(var f,v,y,_,x=vD(i,15),b=x[0],S=x[1],w=vD(a,15),M=w[0],A=w[1],C=vR(b),T=C[0],I=C[1],D=vR(M),P=D[0],R=D[1],L=new vn(19),O=0;O<T.length;++O)L[31&T[O]]++;for(var O=0;O<P.length;++O)L[31&P[O]]++;for(var k=vD(L,7),B=k[0],N=k[1],F=19;F>4&&!B[vo[F-1]];--F);var z=h+5<<3,U=vL(i,vy)+vL(a,v_)+s,H=vL(i,b)+vL(a,M)+s+14+3*F+vL(L,B)+(2*L[16]+3*L[17]+7*L[18]);if(z<=U&&z<=H)return vO(t,p,e.subarray(c,c+h));if(vE(t,p,1+(H<U)),p+=2,H<U){f=vv(b,S,0),v=b,y=vv(M,A,0),_=M;var G=vv(B,N,0);vE(t,p,I-257),vE(t,p+5,R-1),vE(t,p+10,F-4),p+=14;for(var O=0;O<F;++O)vE(t,p+3*O,B[vo[O]]);p+=3*F;for(var V=[T,P],W=0;W<2;++W){for(var j=V[W],O=0;O<j.length;++O){var X=31&j[O];vE(t,p,G[X]),p+=B[X],X>15&&(vE(t,p,j[O]>>>5&127),p+=j[O]>>>12)}}}else f=null,v=vy,y=null,_=v_;for(var O=0;O<u;++O)if(r[O]>255){var X=r[O]>>>18&31;vI(t,p,f[X+257]),p+=v[X+257],X>7&&(vE(t,p,r[O]>>>23&31),p+=vi[X]);var Y=31&r[O];vI(t,p,y[Y]),p+=_[Y],Y>3&&(vI(t,p,r[O]>>>5&8191),p+=va[Y])}else vI(t,p,f[r[O]]),p+=v[r[O]];return vI(t,p,f[256]),p+v[256]},vB=new vr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),vN=new vt(0),vF=function(e,t,n,r,i,a){var s=e.length,u=new vt(r+s+5*(1+Math.ceil(s/7e3))+i),c=u.subarray(r,u.length-i),h=0;if(!t||s<8)for(var p=0;p<=s;p+=65535){var f=p+65535;f<s?h=vO(c,h,e.subarray(p,f)):(c[p]=a,h=vO(c,h,e.subarray(p,s)))}else{for(var v=vB[t-1],y=v>>>13,_=8191&v,x=(1<<n)-1,b=new vn(32768),S=new vn(x+1),w=Math.ceil(n/3),M=2*w,A=function(t){return(e[t]^e[t+1]<<w^e[t+2]<<M)&x},C=new vr(25e3),T=new vn(288),I=new vn(32),D=0,P=0,p=0,R=0,L=0,O=0;p<s;++p){var k=A(p),B=32767&p,N=S[k];if(b[B]=N,S[k]=B,L<=p){var F=s-p;if((D>7e3||R>24576)&&F>423){h=vk(e,c,0,C,T,I,P,R,O,p-O,h),R=D=P=0,O=p;for(var z=0;z<286;++z)T[z]=0;for(var z=0;z<30;++z)I[z]=0}var U=2,H=0,G=_,V=B-N&32767;if(F>2&&k==A(p-V)){for(var W=Math.min(y,F)-1,j=Math.min(32767,p),X=Math.min(258,F);V<=j&&--G&&B!=N;){if(e[p+U]==e[p+U-V]){for(var Y=0;Y<X&&e[p+Y]==e[p+Y-V];++Y);if(Y>U){if(U=Y,H=V,Y>W)break;for(var J=Math.min(V,Y-2),Z=0,z=0;z<J;++z){var q=p-V+z+32768&32767,K=b[q],Q=q-K+32768&32767;Q>Z&&(Z=Q,N=q)}}}N=b[B=N],V+=B-N+32768&32767}}if(H){C[R++]=0x10000000|vc[U]<<18|vp[H];var $=31&vc[U],ee=31&vp[H];P+=vi[$]+va[ee],++T[257+$],++I[ee],L=p+U,++D}else C[R++]=e[p],++T[e[p]]}}h=vk(e,c,a,C,T,I,P,R,O,p-O,h),!a&&7&h&&(h=vO(c,h+1,vN))}return vC(u,0,r+vA(h)+i)},vz=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=null[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}},vU=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,a=n.length,s=0;s!=a;){for(var u=Math.min(s+2655,a);s<u;++s)i+=r+=n[s];r=(65535&r)+15*(r>>16),i=(65535&i)+15*(i>>16)}e=r,t=i},d:function(){return e%=65521,t%=65521,(255&e)<<24|e>>>8<<16|(255&t)<<8|t>>>8}}},vH=function(e,t,n,r,i){return vF(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!i)},vG=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},vV=function(e,t,n){for(var r=e(),i=e.toString(),a=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/ /g,"").split(","),s=0;s<r.length;++s){var u=r[s],c=a[s];if("function"==typeof u){t+=";"+c+"=";var h=u.toString();if(u.prototype){if(-1!=h.indexOf("[native code]")){var p=h.indexOf(" ",8)+1;t+=h.slice(p,h.indexOf("(",p))}else for(var f in t+=h,u.prototype)t+=";"+c+".prototype."+f+"="+u.prototype[f].toString()}else t+=h}else n[c]=u}return[t,n]},vW=function(e){var t=[];for(var n in e)(e[n]instanceof vt||e[n]instanceof vn||e[n]instanceof vr)&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t},vj=function(e,t,n,r){if(!null[n]){for(var i,a="",s={},u=e.length-1,c=0;c<u;++c)a=(i=vV(e[c],a,s))[0],s=i[1];null[n]=vV(e[u],a,s)}var h=vG({},null[n][1]);return ve(null[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,h,vW(h),r)},vX=function(){return[vt,vn,vr,vi,va,vo,vu,vd,vx,vb,vf,vv,vS,vw,vM,vA,vC,vT,yr,vQ,v$]},vY=function(){return[vt,vn,vr,vi,va,vo,vc,vp,null,vy,null,v_,vf,vB,vN,vv,vE,vI,vD,vP,vR,vL,vO,vk,vA,vC,vF,vH,yt,vQ]},vJ=function(){return[v4,v8,v5,vz,null]},vZ=function(){return[v6,v9]},vq=function(){return[v7,v5,vU]},vK=function(){return[ye]},vQ=function(e){return postMessage(e,[e.buffer])},v$=function(e){return e&&e.size&&new vt(e.size)},v0=function(e,t,n,r,i,a){var s=vj(n,r,i,function(e,t){s.terminate(),a(e,t)});return s.postMessage([e,t],t.consume?[e.buffer]:[]),function(){s.terminate()}},v1=function(e,t){return e[t]|e[t+1]<<8},v2=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},v3=function(e,t){return v2(e,t)+0x100000000*v2(e,t+4)},v5=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},v4=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&v5(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},v6=function(e){if(31!=e[0]||139!=e[1]||8!=e[2])throw"invalid gzip data";var t=e[3],n=10;4&t&&(n+=e[10]|(e[11]<<8)+2);for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(2&t)},v9=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},v8=function(e){return 10+(e.filename&&e.filename.length+1||0)},v7=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},ye=function(e){if((15&e[0])!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function yt(e,t){return vH(e,t||{},0,0)}function yn(e,t,n){if(!n&&(n=t,t={}),"function"!=typeof n)throw"no callback";return v0(e,t,[vX],function(e){return vQ(function(e,t){return vT(e,t)}(e.data[0],v$(e.data[1])))},1,n)}function yr(e,t){return vT(e,t)}function yi(e,t){!t&&(t={});var n=vz(),r=e.length;n.p(e);var i=vH(e,t,v8(t),8),a=i.length;return v4(i,t),v5(i,a-8,n.d()),v5(i,a-4,r),i}function ya(e,t){return vT(e.subarray(v6(e),-8),t||new vt(v9(e)))}function yo(e,t){!t&&(t={});var n=vU();n.p(e);var r=vH(e,t,2,4);return v7(r,t),v5(r,r.length-4,n.d()),r}function ys(e,t){return vT((ye(e),e.subarray(2,-4)),t)}var yl=function(e,t,n,r){for(var i in e){var a=e[i],s=t+i;a instanceof vt?n[s]=[a,r]:Array.isArray(a)?n[s]=[a[0],vG(r,a[1])]:yl(a,s+"/",n,r)}},yu="undefined"!=typeof TextEncoder&&new TextEncoder,yc="undefined"!=typeof TextDecoder&&new TextDecoder,yh=0;try{yc.decode(vN,{stream:!0})}catch(e){}var yd=function(e){for(var t="",n=0;;){var r=e[n++],i=(r>127)+(r>223)+(r>239);if(n+i>e.length)return[t,vC(e,n-1)];i?3==i?t+=String.fromCharCode(55296|(r=((15&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536)>>10,56320|1023&r):1&i?t+=String.fromCharCode((31&r)<<6|63&e[n++]):t+=String.fromCharCode((15&r)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(r)}};function yp(e,t){if(t){for(var n=new vt(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(yu)return yu.encode(e);for(var i=e.length,a=new vt(e.length+(e.length>>1)),s=0,u=function(e){a[s++]=e},r=0;r<i;++r){if(s+5>a.length){var c=new vt(s+8+(i-r<<1));c.set(a),a=c}var h=e.charCodeAt(r);h<128||t?u(h):(h<2048?u(192|h>>6):(h>55295&&h<57344?(u(240|(h=65536+(1047552&h)|1023&e.charCodeAt(++r))>>18),u(128|h>>12&63)):u(224|h>>12),u(128|h>>6&63)),u(128|63&h))}return vC(a,0,s)}var yf=function(e,t){return t+30+v1(e,t+26)+v1(e,t+28)},yg=function(e,t,n){var r=v1(e,t+28),i=function(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}if(yc)return yc.decode(e);var i=yd(e),a=i[0];if(i[1].length)throw"invalid utf-8 data";return a}(e.subarray(t+46,t+46+r),!(2048&v1(e,t+8))),a=t+46+r,s=v2(e,t+20),u=n&&0xffffffff==s?ym(e,a):[s,v2(e,t+24),v2(e,t+42)],c=u[0],h=u[1],p=u[2];return[v1(e,t+10),c,h,i,a+v1(e,t+30)+v1(e,t+32),p]},ym=function(e,t){for(;1!=v1(e,t);t+=4+v1(e,t+2));return[v3(e,t+12),v3(e,t+4),v3(e,t+20)]},yv=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;if(r>65535)throw"extra field too long";t+=r+4}return t},yy=function(e,t,n,r,i,a,s,u){var c=r.length,h=n.extra,p=u&&u.length,f=yv(h);v5(e,t,null!=s?0x2014b50:0x4034b50),t+=4,null!=s&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(null==a&&8),e[t++]=i&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var v=new Date(null==n.mtime?Date.now():n.mtime),y=v.getFullYear()-1980;if(y<0||y>119)throw"date not in range 1980-2099";if(v5(e,t,y<<25|v.getMonth()+1<<21|v.getDate()<<16|v.getHours()<<11|v.getMinutes()<<5|v.getSeconds()>>>1),t+=4,null!=a&&(v5(e,t,n.crc),v5(e,t+4,a),v5(e,t+8,n.size)),v5(e,t+12,c),v5(e,t+14,f),t+=16,null!=s&&(v5(e,t,p),v5(e,t+6,n.attrs),v5(e,t+10,s),t+=14),e.set(r,t),t+=c,f)for(var _ in h){var x=h[_],b=x.length;v5(e,t,+_),v5(e,t+2,b),e.set(x,t+4),t+=4+b}return p&&(e.set(u,t),t+=p),t},y_=function(e,t,n,r,i){v5(e,t,0x6054b50),v5(e,t+8,n),v5(e,t+10,n),v5(e,t+12,r),v5(e,t+16,i)};let yx="colorSpace"in new ai;class yb extends d3{constructor(e){super(e),this.type=nY}parse(e){let t=8192,n=65537,r=16384,i=16383,a=32768,s=65535,u=6,c={l:0,c:0,lc:0};function h(e,t,n,r,i){for(;n<e;)t=t<<8|H(r,i),n+=8;n-=e,c.l=t>>n&(1<<e)-1,c.c=t,c.lc=n}let p=Array(59);function f(e){return 63&e}function v(e){return e>>6}let y={c:0,lc:0};function _(e,t,n,r){e=e<<8|H(n,r),t+=8,y.c=e,y.lc=t}let x={c:0,lc:0};function b(e,t,n,r,i,a,s,u,c,h){if(e==t){r<8&&(_(n,r,i,s),n=y.c,r=y.lc);var p=n>>(r-=8),p=new Uint8Array([p])[0];if(c.value+p>h)return!1;for(var f=u[c.value-1];p-- >0;)u[c.value++]=f}else{if(!(c.value<h))return!1;u[c.value++]=e}x.c=n,x.lc=r}function S(e){return 65535&e}function w(e){var t=65535&e;return t>32767?t-65536:t}let M={a:0,b:0};function A(e,t){var n=w(e),r=w(t),i=n+(1&r)+(r>>1),a=i-r;M.a=i,M.b=a}function C(e,t){var n=65535&t,r=(65535&e)-(n>>1)&s;M.a=n+r-a&s,M.b=r}function T(e,t,a,s,f,v){var S=a.value,w=U(t,a),M=U(t,a);a.value+=4;var A=U(t,a);if(a.value+=4,w<0||w>=n||M<0||M>=n)throw"Something wrong with HUF_ENCSIZE";var C=Array(n),T=Array(r);!function(e){for(var t=0;t<r;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(T);var I=s-(a.value-S);if(!function(e,t,r,i,a,s,f){for(var v=0,y=0;a<=s;a++){if(r.value-r.value>i)return!1;h(6,v,y,e,r);var _=c.l;if(v=c.c,y=c.lc,f[a]=_,63==_){if(r.value-r.value>i)throw"Something wrong with hufUnpackEncTable";h(8,v,y,e,r);var x=c.l+u;if(v=c.c,y=c.lc,a+x>s+1)throw"Something wrong with hufUnpackEncTable";for(;x--;)f[a++]=0;a--}else if(_>=59){var x=_-59+2;if(a+x>s+1)throw"Something wrong with hufUnpackEncTable";for(;x--;)f[a++]=0;a--}}!function(e){for(var t=0;t<=58;++t)p[t]=0;for(var t=0;t<n;++t)p[e[t]]+=1;for(var r=0,t=58;t>0;--t){var i=r+p[t]>>1;p[t]=r,r=i}for(var t=0;t<n;++t){var a=e[t];a>0&&(e[t]=a|p[a]++<<6)}}(f)}(e,0,a,I,w,M,C),A>8*(s-(a.value-S)))throw"Something wrong with hufUncompress";!function(e,t,n,r){for(;t<=n;t++){var i=e[t]>>6,a=63&e[t];if(i>>a)throw"Invalid table entry";if(a>14){var s=r[i>>a-14];if(s.len)throw"Invalid table entry";if(s.lit++,s.p){var u=s.p;s.p=Array(s.lit);for(var c=0;c<s.lit-1;++c)s.p[c]=u[c]}else s.p=[,];s.p[s.lit-1]=t}else if(a){for(var h=0,c=1<<14-a;c>0;c--){var s=r[(i<<14-a)+h];if(s.len||s.p)throw"Invalid table entry";s.len=a,s.lit=t,h++}}};}(C,w,M,T),!function(e,t,n,r,a,s,u,c,h,p){for(var f=0,v=0,S=Math.trunc(a.value+(s+7)/8);a.value<S;)for(_(f,v,n,a),f=y.c,v=y.lc;v>=14;){var w=t[f>>v-14&i];if(w.len)v-=w.len,b(w.lit,u,f,v,n,r,a,h,p,c),f=x.c,v=x.lc;else{if(!w.p)throw"hufDecode issues";for(M=0;M<w.lit;M++){for(var M,A=63&e[w.p[M]];v<A&&a.value<S;)_(f,v,n,a),f=y.c,v=y.lc;if(v>=A){if(e[w.p[M]]>>6==(f>>v-A&(1<<A)-1)){v-=A,b(w.p[M],u,f,v,n,r,a,h,p,c),f=x.c,v=x.lc;break}}}if(M==w.lit)throw"hufDecode issues"}}var C=8-s&7;for(f>>=C,v-=C;v>0;){var w=t[f<<14-v&i];if(w.len)v-=w.len,b(w.lit,u,f,v,n,r,a,h,p,c),f=x.c,v=x.lc;else throw"hufDecode issues"};}(C,T,e,t,a,A,M,v,f,{value:0})}function I(e){for(var t=1;t<e.length;t++){var n=e[t-1]+e[t]-128;e[t]=n}}function D(e,t){for(var n=0,r=Math.floor((e.length+1)/2),i=0,a=e.length-1;!(i>a);){;if(t[i++]=e[n++],i>a)break;t[i++]=e[r++]}}function P(e){for(var t=e.byteLength,n=[],r=0,i=new DataView(e);t>0;){var a=i.getInt8(r++);if(a<0){var s=-a;t-=s+1;for(var u=0;u<s;u++)n.push(i.getUint8(r++))}else{var s=a;t-=2;for(var c=i.getUint8(r++),u=0;u<s+1;u++)n.push(c)}}return n}function R(e){return new DataView(e.array.buffer,e.offset.value,e.size)}function L(e){var t=new Uint8Array(P(e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size))),n=new Uint8Array(t.length);return I(t),D(t,n),new DataView(n.buffer)}function O(e){var t=ys(e.array.slice(e.offset.value,e.offset.value+e.size)),n=new Uint8Array(t.length);return I(t),D(t,n),new DataView(n.buffer)}function k(e){for(var n=e.viewer,r={value:e.offset.value},i=new Uint16Array(e.width*e.scanlineBlockSize*(e.channels*e.type)),a=new Uint8Array(t),s=0,u=Array(e.channels),c=0;c<e.channels;c++)u[c]={},u[c].start=s,u[c].end=u[c].start,u[c].nx=e.width,u[c].ny=e.lines,u[c].size=e.type,s+=u[c].nx*u[c].ny*u[c].size;var h=Y(n,r),p=Y(n,r);if(p>=t)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(h<=p)for(var c=0;c<p-h+1;c++)a[c+h]=G(n,r);var f=new Uint16Array(65536),v=function(e,t){for(var n=0,r=0;r<65536;++r)(0==r||e[r>>3]&1<<(7&r))&&(t[n++]=r);for(var i=n-1;n<65536;)t[n++]=0;return i}(a,f),y=U(n,r);T(e.array,n,r,y,i,s);for(var c=0;c<e.channels;++c){for(var _=u[c],x=0;x<u[c].size;++x)!function(e,t,n,r,i,a,s){for(var u=s<16384,c=n>i?i:n,h=1;h<=c;)h<<=1;for(h>>=1,p=h,h>>=1;h>=1;){for(var p,f,v,y,_,x=0,b=0+a*(i-p),S=a*h,w=a*p,T=r*h,I=r*p;x<=b;x+=w){for(var D=x,P=x+r*(n-p);D<=P;D+=I){var R=D+T,L=D+S,O=L+T;u?(A(e[D+t],e[L+t]),f=M.a,y=M.b,A(e[R+t],e[O+t]),v=M.a,_=M.b,A(f,v),e[D+t]=M.a,e[R+t]=M.b,A(y,_)):(C(e[D+t],e[L+t]),f=M.a,y=M.b,C(e[R+t],e[O+t]),v=M.a,_=M.b,C(f,v),e[D+t]=M.a,e[R+t]=M.b,C(y,_)),e[L+t]=M.a,e[O+t]=M.b}if(n&h){var L=D+S;u?A(e[D+t],e[L+t]):C(e[D+t],e[L+t]),f=M.a,e[L+t]=M.b,e[D+t]=f}}if(i&h){for(var D=x,P=x+r*(n-p);D<=P;D+=I){var R=D+T;u?A(e[D+t],e[R+t]):C(e[D+t],e[R+t]),f=M.a,e[R+t]=M.b,e[D+t]=f}}p=h,h>>=1};}(i,_.start+x,_.nx,_.size,_.ny,_.nx*_.size,v)}!function(e,t,n){for(var r=0;r<n;++r)t[r]=e[t[r]]}(f,i,s);for(var b=0,S=new Uint8Array(i.buffer.byteLength),w=0;w<e.lines;w++)for(var I=0;I<e.channels;I++){var _=u[I],D=_.nx*_.size,P=new Uint8Array(i.buffer,2*_.end,2*D);S.set(P,b),b+=2*D,_.end+=D}return new DataView(S.buffer)}function B(e){var t=ys(e.array.slice(e.offset.value,e.offset.value+e.size));let n=e.lines*e.channels*e.width,r=1==e.type?new Uint16Array(n):new Uint32Array(n),i=0,a=0,s=[,,,,];for(let n=0;n<e.lines;n++)for(let n=0;n<e.channels;n++){let n=0;switch(e.type){case 1:s[0]=i,s[1]=s[0]+e.width,i=s[1]+e.width;for(let i=0;i<e.width;++i)n+=t[s[0]++]<<8|t[s[1]++],r[a]=n,a++;break;case 2:s[0]=i,s[1]=s[0]+e.width,s[2]=s[1]+e.width,i=s[2]+e.width;for(let i=0;i<e.width;++i)n+=t[s[0]++]<<24|t[s[1]++]<<16|t[s[2]++]<<8,r[a]=n,a++}}return new DataView(r.buffer)}function N(e){var t=e.viewer,n={value:e.offset.value},r=new Uint8Array(e.width*e.lines*(e.channels*e.type*2)),i={version:V(t,n),unknownUncompressedSize:V(t,n),unknownCompressedSize:V(t,n),acCompressedSize:V(t,n),dcCompressedSize:V(t,n),rleCompressedSize:V(t,n),rleUncompressedSize:V(t,n),rleRawSize:V(t,n),totalAcUncompressedCount:V(t,n),totalDcUncompressedCount:V(t,n),acCompression:V(t,n)};if(i.version<2)throw"EXRLoader.parse: "+Q.compression+" version "+i.version+" is unsupported";for(var a=[],s=Y(t,n)-2;s>0;){var u=F(t.buffer,n),c=G(t,n),h=c>>2&3,p=new Int8Array([(c>>4)-1])[0],f=G(t,n);a.push({name:u,index:p,type:f,compression:h}),s-=u.length+3}for(var v=Q.channels,y=Array(e.channels),_=0;_<e.channels;++_){var x=y[_]={},b=v[_];x.name=b.name,x.compression=0,x.decoded=!1,x.type=b.pixelType,x.pLinear=b.pLinear,x.width=e.width,x.height=e.lines}for(var S={idx:[,,,]},w=0;w<e.channels;++w){for(var x=y[w],_=0;_<a.length;++_){var M=a[_];x.name==M.name&&(x.compression=M.compression,M.index>=0&&(S.idx[M.index]=w),x.offset=w)}}if(i.acCompressedSize>0)switch(i.acCompression){case 0:var A=new Uint16Array(i.totalAcUncompressedCount);T(e.array,t,n,i.acCompressedSize,A,i.totalAcUncompressedCount);break;case 1:var C=e.array.slice(n.value,n.value+i.totalAcUncompressedCount),I=ys(C),A=new Uint16Array(I.buffer);n.value+=i.totalAcUncompressedCount}if(i.dcCompressedSize>0){var D=new Uint16Array(O({array:e.array,offset:n,size:i.dcCompressedSize}).buffer);n.value+=i.dcCompressedSize}if(i.rleRawSize>0){var C=e.array.slice(n.value,n.value+i.rleCompressedSize),I=ys(C),R=P(I.buffer);n.value+=i.rleCompressedSize}for(var L=0,k=Array(y.length),_=0;_<k.length;++_)k[_]=[];for(var B=0;B<e.lines;++B)for(var N=0;N<y.length;++N)k[N].push(L),L+=y[N].width*e.type*2;!function(e,t,n,r,i,a){var s=new DataView(a.buffer),u=n[e.idx[0]].width,c=n[e.idx[0]].height,h=Math.floor(u/8),p=Math.ceil(u/8),f=Math.ceil(c/8),v=u-(p-1)*8,y=c-(f-1)*8,_={value:0},x=[,,,],b=[,,,],S=[,,,],w=[,,,],M=[,,,];for(let n=0;n<3;++n)M[n]=t[e.idx[n]],x[n]=n<1?0:x[n-1]+p*f,b[n]=new Float32Array(64),S[n]=new Uint16Array(64),w[n]=new Uint16Array(64*p);for(let t=0;t<f;++t){var A=8;t==f-1&&(A=y);var C=8;for(let e=0;e<p;++e){e==p-1&&(C=v);for(let e=0;e<3;++e)S[e].fill(0),S[e][0]=i[x[e]++],function(e,t,n){for(var r,i=1;i<64;)65280==(r=t[e.value])?i=64:r>>8==255?i+=255&r:(n[i]=r,i++),e.value++}(_,r,S[e]),function(e,t){t[0]=X(e[0]),t[1]=X(e[1]),t[2]=X(e[5]),t[3]=X(e[6]),t[4]=X(e[14]),t[5]=X(e[15]),t[6]=X(e[27]),t[7]=X(e[28]),t[8]=X(e[2]),t[9]=X(e[4]),t[10]=X(e[7]),t[11]=X(e[13]),t[12]=X(e[16]),t[13]=X(e[26]),t[14]=X(e[29]),t[15]=X(e[42]),t[16]=X(e[3]),t[17]=X(e[8]),t[18]=X(e[12]),t[19]=X(e[17]),t[20]=X(e[25]),t[21]=X(e[30]),t[22]=X(e[41]),t[23]=X(e[43]),t[24]=X(e[9]),t[25]=X(e[11]),t[26]=X(e[18]),t[27]=X(e[24]),t[28]=X(e[31]),t[29]=X(e[40]),t[30]=X(e[44]),t[31]=X(e[53]),t[32]=X(e[10]),t[33]=X(e[19]),t[34]=X(e[23]),t[35]=X(e[32]),t[36]=X(e[39]),t[37]=X(e[45]),t[38]=X(e[52]),t[39]=X(e[54]),t[40]=X(e[20]),t[41]=X(e[22]),t[42]=X(e[33]),t[43]=X(e[38]),t[44]=X(e[46]),t[45]=X(e[51]),t[46]=X(e[55]),t[47]=X(e[60]),t[48]=X(e[21]),t[49]=X(e[34]),t[50]=X(e[37]),t[51]=X(e[47]),t[52]=X(e[50]),t[53]=X(e[56]),t[54]=X(e[59]),t[55]=X(e[61]),t[56]=X(e[35]),t[57]=X(e[36]),t[58]=X(e[48]),t[59]=X(e[49]),t[60]=X(e[57]),t[61]=X(e[58]),t[62]=X(e[62]),t[63]=X(e[63])}(S[e],b[e]),function(e){let t=.35355362513961314,n=.5*Math.cos(3.14159/16),r=.5*Math.cos(3.14159/8),i=.5*Math.cos(3*3.14159/16),a=.2777854612564676,s=.5*Math.cos(3*3.14159/8),u=.09754573032714427;for(var c=[,,,,],h=[,,,,],p=[,,,,],f=[,,,,],v=0;v<8;++v){var y=8*v;c[0]=r*e[y+2],c[1]=s*e[y+2],c[2]=r*e[y+6],c[3]=s*e[y+6],h[0]=n*e[y+1]+i*e[y+3]+a*e[y+5]+u*e[y+7],h[1]=i*e[y+1]-u*e[y+3]-n*e[y+5]-a*e[y+7],h[2]=a*e[y+1]-n*e[y+3]+u*e[y+5]+i*e[y+7],h[3]=u*e[y+1]-a*e[y+3]+i*e[y+5]-n*e[y+7],p[0]=t*(e[y+0]+e[y+4]),p[3]=t*(e[y+0]-e[y+4]),p[1]=c[0]+c[3],p[2]=c[1]-c[2],f[0]=p[0]+p[1],f[1]=p[3]+p[2],f[2]=p[3]-p[2],f[3]=p[0]-p[1],e[y+0]=f[0]+h[0],e[y+1]=f[1]+h[1],e[y+2]=f[2]+h[2],e[y+3]=f[3]+h[3],e[y+4]=f[3]-h[3],e[y+5]=f[2]-h[2],e[y+6]=f[1]-h[1],e[y+7]=f[0]-h[0]}for(var _=0;_<8;++_)c[0]=r*e[16+_],c[1]=s*e[16+_],c[2]=r*e[48+_],c[3]=s*e[48+_],h[0]=n*e[8+_]+i*e[24+_]+a*e[40+_]+u*e[56+_],h[1]=i*e[8+_]-u*e[24+_]-n*e[40+_]-a*e[56+_],h[2]=a*e[8+_]-n*e[24+_]+u*e[40+_]+i*e[56+_],h[3]=u*e[8+_]-a*e[24+_]+i*e[40+_]-n*e[56+_],p[0]=t*(e[_]+e[32+_]),p[3]=t*(e[_]-e[32+_]),p[1]=c[0]+c[3],p[2]=c[1]-c[2],f[0]=p[0]+p[1],f[1]=p[3]+p[2],f[2]=p[3]-p[2],f[3]=p[0]-p[1],e[0+_]=f[0]+h[0],e[8+_]=f[1]+h[1],e[16+_]=f[2]+h[2],e[24+_]=f[3]+h[3],e[32+_]=f[3]-h[3],e[40+_]=f[2]-h[2],e[48+_]=f[1]-h[1],e[56+_]=f[0]-h[0]}(b[e]);(function(e){for(var t=0;t<64;++t){var n=e[0][t],r=e[1][t],i=e[2][t];e[0][t]=n+1.5747*i,e[1][t]=n-.1873*r-.4682*i,e[2][t]=n+1.8556*r}})(b);for(let t=0;t<3;++t)(function(e,t,n){for(var r=0;r<64;++r)t[n+r]=oL.toHalfFloat(function(e){return e<=1?Math.sign(e)*Math.pow(Math.abs(e),2.2):Math.sign(e)*Math.pow(9.025013291561939,Math.abs(e)-1)}(e[r]))})(b[t],w[t],64*e)}let a=0;for(let r=0;r<3;++r){let i=n[e.idx[r]].type;for(let e=8*t;e<8*t+A;++e){a=M[r][e];for(let t=0;t<h;++t){let n=64*t+(7&e)*8;s.setUint16(a+0*i,w[r][n+0],!0),s.setUint16(a+2*i,w[r][n+1],!0),s.setUint16(a+4*i,w[r][n+2],!0),s.setUint16(a+6*i,w[r][n+3],!0),s.setUint16(a+8*i,w[r][n+4],!0),s.setUint16(a+10*i,w[r][n+5],!0),s.setUint16(a+12*i,w[r][n+6],!0),s.setUint16(a+14*i,w[r][n+7],!0),a+=16*i}}if(h!=p)for(let e=8*t;e<8*t+A;++e){let t=M[r][e]+8*h*2*i,n=64*h+(7&e)*8;for(let e=0;e<C;++e)s.setUint16(t+2*e*i,w[r][n+e],!0)}}}for(var T=new Uint16Array(u),s=new DataView(a.buffer),I=0;I<3;++I){n[e.idx[I]].decoded=!0;var D=n[e.idx[I]].type;if(2==n[I].type)for(var P=0;P<c;++P){let e=M[I][P];for(var R=0;R<u;++R)T[R]=s.getUint16(e+2*R*D,!0);for(var R=0;R<u;++R)s.setFloat32(e+2*R*D,X(T[R]),!0)}}}(S,k,y,A,D,r);for(var _=0;_<y.length;++_){var x=y[_];if(!x.decoded){if(2===x.compression){for(var z=0,U=0,B=0;B<e.lines;++B){for(var H=k[_][z],W=0;W<x.width;++W){for(var j=0;j<2*x.type;++j)r[H++]=R[U+j*x.width*x.height];U++}z++}}else throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(r.buffer)}function F(e,t){for(var n=new Uint8Array(e),r=0;0!=n[t.value+r];)r+=1;var i=new TextDecoder().decode(n.slice(t.value,t.value+r));return t.value=t.value+r+1,i}function z(e,t){var n=e.getInt32(t.value,!0);return t.value=t.value+4,n}function U(e,t){var n=e.getUint32(t.value,!0);return t.value=t.value+4,n}function H(e,t){var n=e[t.value];return t.value=t.value+1,n}function G(e,t){var n=e.getUint8(t.value);return t.value=t.value+1,n}let V=function(e,t){let n;return"getBigInt64"in DataView.prototype?n=Number(e.getBigInt64(t.value,!0)):n=e.getUint32(t.value+4,!0)+Number(e.getUint32(t.value,!0)<<32),t.value+=8,n};function W(e,t){var n=e.getFloat32(t.value,!0);return t.value+=4,n}function j(e,t){return oL.toHalfFloat(W(e,t))}function X(e){var t=(31744&e)>>10,n=1023&e;return(e>>15?-1:1)*(t?31===t?n?NaN:1/0:Math.pow(2,t-15)*(1+n/1024):n/1024*6103515625e-14)}function Y(e,t){var n=e.getUint16(t.value,!0);return t.value+=2,n}function J(e,t){return X(Y(e,t))}let Z=new DataView(e),q=new Uint8Array(e),K={value:0},Q=function(e,t,n){let r={};if(0x1312f76!=e.getUint32(0,!0))throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";r.version=e.getUint8(4);let i=e.getUint8(5);r.spec={singleTile:!!(2&i),longName:!!(4&i),deepFormat:!!(8&i),multiPart:!!(16&i)},n.value=8;for(var a=!0;a;){var s=F(t,n);if(0==s)a=!1;else{var u=F(t,n),c=U(e,n),h=function(e,t,n,r,i){var a,s,u,c,h,p,f,v,y,_,x,b,S,w,M,A,C,T,I,D,P,R,L,O;if("string"===r||"stringvector"===r||"iccProfile"===r){;return a=t,s=n,u=i,c=new TextDecoder().decode(new Uint8Array(a).slice(s.value,s.value+u)),s.value=s.value+u,c}if("chlist"===r)return function(e,t,n,r){for(var i=n.value,a=[];n.value<i+r-1;){var s=F(t,n),u=z(e,n),c=G(e,n);n.value+=3;var h=z(e,n),p=z(e,n);a.push({name:s,pixelType:u,pLinear:c,xSampling:h,ySampling:p})}return n.value+=1,a}(e,t,n,i);if("chromaticities"===r){;return f=W(h=e,p=n),v=W(h,p),y=W(h,p),_=W(h,p),x=W(h,p),b=W(h,p),{redX:f,redY:v,greenX:y,greenY:_,blueX:x,blueY:b,whiteX:W(h,p),whiteY:W(h,p)}}else if("compression"===r)return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][G(e,n)];else if("box2i"===r){;return M=U(S=e,w=n),A=U(S,w),{xMin:M,yMin:A,xMax:U(S,w),yMax:U(S,w)}}else if("lineOrder"===r)return["INCREASING_Y"][G(e,n)];else if("float"===r)return W(e,n);else if("v2f"===r){;return[W(C=e,T=n),W(C,T)]}else if("v3f"===r){;return[W(I=e,D=n),W(I,D),W(I,D)]}else if("int"===r)return z(e,n);else if("rational"===r){;return[z(P=e,R=n),U(P,R)]}else if("timecode"===r){;return[U(L=e,O=n),U(L,O)]}else{if("preview"===r)return n.value+=i,"skipped";n.value+=i;return}}(e,t,n,u,c);void 0===h||(r[s]=h)}}if((-5&i)!=0)throw"THREE.EXRLoader: provided file is currently unsupported.";return r}(Z,e,K),$=function(e,t,n,r,i){let a={size:0,viewer:t,array:n,offset:r,width:e.dataWindow.xMax-e.dataWindow.xMin+1,height:e.dataWindow.yMax-e.dataWindow.yMin+1,channels:e.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:e.channels[0].pixelType,uncompress:null,getter:null,format:null,[yx?"colorSpace":"encoding"]:null};switch(e.compression){case"NO_COMPRESSION":a.lines=1,a.uncompress=R;break;case"RLE_COMPRESSION":a.lines=1,a.uncompress=L;break;case"ZIPS_COMPRESSION":a.lines=1,a.uncompress=O;break;case"ZIP_COMPRESSION":a.lines=16,a.uncompress=O;break;case"PIZ_COMPRESSION":a.lines=32,a.uncompress=k;break;case"PXR24_COMPRESSION":a.lines=16,a.uncompress=B;break;case"DWAA_COMPRESSION":a.lines=32,a.uncompress=N;break;case"DWAB_COMPRESSION":a.lines=256,a.uncompress=N;break;default:throw"EXRLoader.parse: "+e.compression+" is unsupported"}if(a.scanlineBlockSize=a.lines,1==a.type)switch(i){case nX:a.getter=J,a.inputSize=2;break;case nY:a.getter=Y,a.inputSize=2}else if(2==a.type)switch(i){case nX:a.getter=W,a.inputSize=4;break;case nY:a.getter=j,a.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+a.type+" for "+e.compression+".";a.blockCount=(e.dataWindow.yMax+1)/a.scanlineBlockSize;for(var s=0;s<a.blockCount;s++)V(t,r);a.outputChannels=3==a.channels?4:a.channels;let u=a.width*a.height*a.outputChannels;switch(i){case nX:a.byteArray=new Float32Array(u),a.channels<a.outputChannels&&a.byteArray.fill(1,0,u);break;case nY:a.byteArray=new Uint16Array(u),a.channels<a.outputChannels&&a.byteArray.fill(15360,0,u)}return a.bytesPerLine=a.width*a.inputSize*a.channels,4==a.outputChannels?a.format=n0:a.format=n4,yx?a.colorSpace="srgb-linear":a.encoding=3e3,a}(Q,Z,q,K,this.type),ee={value:0},et={R:0,G:1,B:2,A:3,Y:0};for(let e=0;e<$.height/$.scanlineBlockSize;e++){let t=U(Z,K);$.size=U(Z,K),$.lines=t+$.scanlineBlockSize>$.height?$.height-t:$.scanlineBlockSize;let n=$.size<$.lines*$.bytesPerLine?$.uncompress($):R($);K.value+=$.size;for(let t=0;t<$.scanlineBlockSize;t++){let r=t+e*$.scanlineBlockSize;if(r>=$.height)break;for(let e=0;e<$.channels;e++){let i=et[Q.channels[e].name];for(let a=0;a<$.width;a++){ee.value=(t*($.channels*$.width)+e*$.width+a)*$.inputSize;let s=($.height-1-r)*($.width*$.outputChannels)+a*$.outputChannels+i;$.byteArray[s]=$.getter(n,ee)}}}}return{header:Q,width:$.width,height:$.height,data:$.byteArray,format:$.format,[yx?"colorSpace":"encoding"]:$[yx?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,function(e,n){yx?e.colorSpace=n.colorSpace:e.encoding=n.encoding,e.minFilter=nk,e.magFilter=nk,e.generateMipmaps=!1,e.flipY=!1,t&&t(e,n)},n,r)}}let yS=(e,t,n)=>{let r;switch(e){case nU:r=new Uint8ClampedArray(t*n*4);break;case nY:r=new Uint16Array(t*n*4);break;case nj:r=new Uint32Array(t*n*4);break;case nH:r=new Int8Array(t*n*4);break;case nG:r=new Int16Array(t*n*4);break;case nW:r=new Int32Array(t*n*4);break;case nX:r=new Float32Array(t*n*4);break;default:throw Error("Unsupported data type")}return r},yw=(e,t,n,r)=>{if(void 0!==p)return p;let i=new as(1,1,r);t.setRenderTarget(i);let a=new st(new sC,new oI({color:0xffffff}));t.render(a,n),t.setRenderTarget(null);let s=yS(e,i.width,i.height);return t.readRenderTargetPixels(i,0,0,i.width,i.height,s),i.dispose(),a.geometry.dispose(),a.material.dispose(),p=0!==s[0]};class yM{constructor(e){var t,n,r,i,a,s,u,c,h,p,f,v,y,_,x,b;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;let S={format:n0,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:(null===(t=e.renderTargetOptions)||void 0===t?void 0:t.anisotropy)!==void 0?null===(n=e.renderTargetOptions)||void 0===n?void 0:n.anisotropy:1,generateMipmaps:(null===(r=e.renderTargetOptions)||void 0===r?void 0:r.generateMipmaps)!==void 0&&(null===(i=e.renderTargetOptions)||void 0===i?void 0:i.generateMipmaps),magFilter:(null===(a=e.renderTargetOptions)||void 0===a?void 0:a.magFilter)!==void 0?null===(s=e.renderTargetOptions)||void 0===s?void 0:s.magFilter:nk,minFilter:(null===(u=e.renderTargetOptions)||void 0===u?void 0:u.minFilter)!==void 0?null===(c=e.renderTargetOptions)||void 0===c?void 0:c.minFilter:nk,samples:(null===(h=e.renderTargetOptions)||void 0===h?void 0:h.samples)!==void 0?null===(p=e.renderTargetOptions)||void 0===p?void 0:p.samples:void 0,wrapS:(null===(f=e.renderTargetOptions)||void 0===f?void 0:f.wrapS)!==void 0?null===(v=e.renderTargetOptions)||void 0===v?void 0:v.wrapS:nE,wrapT:(null===(y=e.renderTargetOptions)||void 0===y?void 0:y.wrapT)!==void 0?null===(_=e.renderTargetOptions)||void 0===_?void 0:_.wrapT:nE};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=yM.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new uq,this._camera=new sz,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!yw(this._type,this._renderer,this._camera,S)){let e;if(this._type===nY)e=this._renderer.extensions.has("EXT_color_buffer_float")?nX:void 0;void 0!==e?this._type=e:this._supportsReadPixels=!1}this._quad=new st(new sC,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new as(this.width,this.height,S),this._renderTarget.texture.mapping=(null===(x=e.renderTargetOptions)||void 0===x?void 0:x.mapping)!==void 0?null===(b=e.renderTargetOptions)||void 0===b?void 0:b.mapping:nb}static instantiateRenderer(){let e=new uY;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw Error("Can't read pixels in this browser");let e=yS(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){let t=new c_(this.toArray(),this.width,this.height,n0,this._type,(null==e?void 0:e.mapping)||nb,(null==e?void 0:e.wrapS)||nE,(null==e?void 0:e.wrapT)||nE,(null==e?void 0:e.magFilter)||nk,(null==e?void 0:e.minFilter)||nk,(null==e?void 0:e.anisotropy)||1,r1);return t.generateMipmaps=(null==e?void 0:e.generateMipmaps)!==void 0&&(null==e?void 0:e.generateMipmaps),t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof sl&&Object.values(this.material.uniforms).forEach(e=>{e.value instanceof ai&&e.value.dispose()}),Object.values(this.material).forEach(e=>{e instanceof ai&&e.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}let yA=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,yC=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class yT extends sl{constructor({gamma:e,offsetHdr:t,offsetSdr:n,gainMapMin:r,gainMapMax:i,maxDisplayBoost:a,hdrCapacityMin:s,hdrCapacityMax:u,sdr:c,gainMap:h}){super({name:"GainMapDecoderMaterial",vertexShader:yA,fragmentShader:yC,uniforms:{sdr:{value:c},gainMap:{value:h},gamma:{value:new ap(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new ap().fromArray(t)},offsetSdr:{value:new ap().fromArray(n)},gainMapMin:{value:new ap().fromArray(r)},gainMapMax:{value:new ap().fromArray(i)},weightFactor:{value:(Math.log2(a)-s)/(u-s)}},blending:tF,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=s,this._hdrCapacityMax=u,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){let e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){let t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){let e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class yE extends Error{}class yI extends Error{}let yD=(e,t,n)=>{var r;let i;let a=null===(r=e.attributes.getNamedItem(t))||void 0===r?void 0:r.nodeValue;if(a)i=a;else{let r=e.getElementsByTagName(t)[0];if(r){let e=r.getElementsByTagName("rdf:li");if(3===e.length)i=Array.from(e).map(e=>e.innerHTML);else throw Error(`Gainmap metadata contains an array of items for ${t} but its length is not 3`)}else{if(n)return n;throw Error(`Can't find ${t} in gainmap metadata`)}}return i},yP=e=>{var t,n;let r;"undefined"!=typeof TextDecoder?r=new TextDecoder().decode(e):r=e.toString();let i=r.indexOf("<x:xmpmeta"),a=new DOMParser;for(;-1!==i;){let e=r.indexOf("x:xmpmeta>",i);r.slice(i,e+10);let s=r.slice(i,e+10);try{let e=a.parseFromString(s,"text/xml").getElementsByTagName("rdf:Description")[0],r=yD(e,"hdrgm:GainMapMin","0"),i=yD(e,"hdrgm:GainMapMax"),u=yD(e,"hdrgm:Gamma","1"),c=yD(e,"hdrgm:OffsetSDR","0.015625"),h=yD(e,"hdrgm:OffsetHDR","0.015625"),p=null===(t=e.attributes.getNamedItem("hdrgm:HDRCapacityMin"))||void 0===t?void 0:t.nodeValue;!p&&(p="0");let f=null===(n=e.attributes.getNamedItem("hdrgm:HDRCapacityMax"))||void 0===n?void 0:n.nodeValue;if(!f)throw Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(r)?r.map(e=>parseFloat(e)):[parseFloat(r),parseFloat(r),parseFloat(r)],gainMapMax:Array.isArray(i)?i.map(e=>parseFloat(e)):[parseFloat(i),parseFloat(i),parseFloat(i)],gamma:Array.isArray(u)?u.map(e=>parseFloat(e)):[parseFloat(u),parseFloat(u),parseFloat(u)],offsetSdr:Array.isArray(c)?c.map(e=>parseFloat(e)):[parseFloat(c),parseFloat(c),parseFloat(c)],offsetHdr:Array.isArray(h)?h.map(e=>parseFloat(e)):[parseFloat(h),parseFloat(h),parseFloat(h)],hdrCapacityMin:parseFloat(p),hdrCapacityMax:parseFloat(f)}}catch(e){}i=r.indexOf("<x:xmpmeta",e)}};class yR{constructor(e){this.options={debug:!!e&&void 0!==e.debug&&e.debug,extractFII:!e||void 0===e.extractFII||e.extractFII,extractNonFII:!e||void 0===e.extractNonFII||e.extractNonFII}}extract(e){return new Promise((t,n)=>{let r;let i=this.options.debug,a=new DataView(e.buffer);if(65496!==a.getUint16(0)){n(Error("Not a valid jpeg"));return}let s=a.byteLength,u=2,c=0;for(;u<s;){if(++c>250){n(Error(`Found no marker after ${c} loops 😵`));return}if(255!==a.getUint8(u)){n(Error(`Not a valid marker at offset 0x${u.toString(16)}, found: 0x${a.getUint8(u).toString(16)}`));return}if(r=a.getUint8(u+1),226===r){let e=u+4;if(0x4d504600===a.getUint32(e)){let r;let i=e+4;if(18761===a.getUint16(i))r=!1;else if(19789===a.getUint16(i))r=!0;else{n(Error("No valid endianness marker found in TIFF header"));return}if(42!==a.getUint16(i+2,!r)){n(Error("Not valid TIFF data! (no 0x002A marker)"));return}let s=a.getUint32(i+4,!r);if(s<8){n(Error("Not valid TIFF data! (First offset less than 8)"));return}let u=i+s,c=a.getUint16(u,!r),h=u+2,p=0;for(let e=h;e<h+12*c;e+=12)45057===a.getUint16(e,!r)&&(p=a.getUint32(e+8,!r));let f=u+2+12*c+4,v=[];for(let e=f;e<f+16*p;e+=16){let t={MPType:a.getUint32(e,!r),size:a.getUint32(e+4,!r),dataOffset:a.getUint32(e+8,!r),dependantImages:a.getUint32(e+12,!r),start:-1,end:-1,isFII:!1};t.dataOffset?(t.start=i+t.dataOffset,t.isFII=!1):(t.start=0,t.isFII=!0),t.end=t.start+t.size,v.push(t)}if(this.options.extractNonFII&&v.length){let e=new Blob([a]),n=[];for(let t of v){if(t.isFII&&!this.options.extractFII)continue;let r=e.slice(t.start,t.end+1,"image/jpeg");n.push(r)}t(n)}}}u+=2+a.getUint16(u+2)}})}}let yL=async e=>{let t=yP(e);if(!t)throw new yI("Gain map XMP metadata not found");let n=new yR({extractFII:!0,extractNonFII:!0}),r=await n.extract(e);if(2!==r.length)throw new yE("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:t}},yO=e=>new Promise((t,n)=>{let r=document.createElement("img");r.onload=()=>{t(r)},r.onerror=e=>{n(e)},r.src=URL.createObjectURL(e)});class yk extends dZ{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new dY}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){return this._renderer,new yM({width:16,height:16,type:nY,colorSpace:r1,material:new yT({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new ai,sdr:new ai}),renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,n,r){let i,a;let s=r?new Blob([r],{type:"image/jpeg"}):void 0,u=new Blob([n],{type:"image/jpeg"}),c=!1;if("undefined"==typeof createImageBitmap){let e=await Promise.all([s?yO(s):Promise.resolve(void 0),yO(u)]);a=e[0],i=e[1],c=!0}else{let e=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(u,{imageOrientation:"flipY"})]);a=e[0],i=e[1]}let h=new ai(a||new ImageData(2,2),nb,nE,nE,nk,nz,n0,nU,1,r1);h.flipY=c,h.needsUpdate=!0;let p=new ai(i,nb,nE,nE,nk,nz,n0,nU,1,r0);p.flipY=c,p.needsUpdate=!0,e.width=i.width,e.height=i.height,e.material.gainMap=h,e.material.sdr=p,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class yB extends yk{load([e,t,n],r,i,a){let s,u,c;let h=this.prepareQuadRenderer(),p=async()=>{if(s&&u&&c){try{await this.render(h,c,s,u)}catch(r){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),"function"==typeof a&&a(r),h.disposeOnDemandRenderer();return}"function"==typeof r&&r(h),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),h.disposeOnDemandRenderer()}},f=!0,v=0,y=0,_=!0,x=0,b=0,S=!0,w=0,M=0,A=()=>{"function"==typeof i&&i(new ProgressEvent("progress",{lengthComputable:f&&_&&S,loaded:y+b+M,total:v+x+w}))};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);let C=new dQ(this._internalLoadingManager);C.setResponseType("arraybuffer"),C.setRequestHeader(this.requestHeader),C.setPath(this.path),C.setWithCredentials(this.withCredentials),C.load(e,async e=>{if("string"==typeof e)throw Error("Invalid sdr buffer");s=e,await p()},e=>{f=e.lengthComputable,y=e.loaded,v=e.total,A()},t=>{this.manager.itemError(e),"function"==typeof a&&a(t)});let T=new dQ(this._internalLoadingManager);T.setResponseType("arraybuffer"),T.setRequestHeader(this.requestHeader),T.setPath(this.path),T.setWithCredentials(this.withCredentials),T.load(t,async e=>{if("string"==typeof e)throw Error("Invalid gainmap buffer");u=e,await p()},e=>{_=e.lengthComputable,b=e.loaded,x=e.total,A()},e=>{this.manager.itemError(t),"function"==typeof a&&a(e)});let I=new dQ(this._internalLoadingManager);return I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(this.withCredentials),I.load(n,async e=>{if("string"!=typeof e)throw Error("Invalid metadata string");c=JSON.parse(e),await p()},e=>{S=e.lengthComputable,M=e.loaded,w=e.total,A()},e=>{this.manager.itemError(n),"function"==typeof a&&a(e)}),h}}class yN extends yk{load(e,t,n,r){let i=this.prepareQuadRenderer(),a=new dQ(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async n=>{let a,s,u;if("string"==typeof n)throw Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");let c=new Uint8Array(n);try{let e=await yL(c);a=e.sdr,s=e.gainMap,u=e.metadata}catch(e){if(e instanceof yI||e instanceof yE)u={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},a=c;else throw e}try{await this.render(i,u,a,s)}catch(t){this.manager.itemError(e),"function"==typeof r&&r(t),i.disposeOnDemandRenderer();return}"function"==typeof t&&t(i),this.manager.itemEnd(e),i.disposeOnDemandRenderer()},n,t=>{this.manager.itemError(e),"function"==typeof r&&r(t)}),i}}let yF={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},yz="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",yU=e=>Array.isArray(e),yH=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function yG({files:e=yH,path:t="",preset:n,encoding:r,extensions:i}={}){let a=null,s=!1;n&&(yj(n),e=yF[n],t=yz),s=yU(e);let{extension:u,isCubemap:c}=yX(e);if(!(a=yY(u)))throw Error("useEnvironment: Unrecognized file extension: "+e);let h=gk(e=>e.gl);(0,fG.useLayoutEffect)(()=>{("webp"===u||"jpg"===u||"jpeg"===u)&&h.domElement.addEventListener("webglcontextlost",function(){gz.clear(a,s?[e]:e)},{once:!0})},[e,h.domElement]);let p=gz(a,s?[e]:e,e=>{("webp"===u||"jpg"===u||"jpeg"===u)&&e.setRenderer(h),null==e.setPath||e.setPath(t),i&&i(e)}),f=s?p[0]:p;if("jpg"===u||"jpeg"===u||"webp"===u){var v;f=null==(v=f.renderTarget)?void 0:v.texture}return f.mapping=c?nS:nM,"colorSpace"in f?f.colorSpace=(null!=r?r:c)?"srgb":"srgb-linear":f.encoding=(null!=r?r:c)?3001:3e3,f}let yV={files:yH,path:"",preset:void 0,extensions:void 0};yG.preload=e=>{let t={...yV,...e},{files:n,path:r=""}=t,{preset:i,extensions:a}=t;i&&(yj(i),n=yF[i],r=yz);let{extension:s}=yX(n);if("webp"===s||"jpg"===s||"jpeg"===s)throw Error("useEnvironment: Preloading gainmaps is not supported");let u=yY(s);if(!u)throw Error("useEnvironment: Unrecognized file extension: "+n);gz.preload(u,yU(n)?[n]:n,e=>{null==e.setPath||e.setPath(r),a&&a(e)})};let yW={files:yH,preset:void 0};function yj(e){if(!(e in yF))throw Error("Preset must be one of: "+Object.keys(yF).join(", "))}function yX(e){var t;let n=yU(e)&&6===e.length,r=yU(e)&&3===e.length&&e.some(e=>e.endsWith("json")),i=yU(e)?e[0]:e;return{extension:n?"cube":r?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":null==(t=i.split(".").pop())||null==(t=t.split("?"))||null==(t=t.shift())?void 0:t.toLowerCase(),isCubemap:n,isGainmap:r}}function yY(e){return"cube"===e?d2:"hdr"===e?m7:"exr"===e?yb:"jpg"===e||"jpeg"===e?yN:"webp"===e?yB:null}yG.clear=e=>{let t={...yW,...e},{files:n}=t,{preset:r}=t;r&&(yj(r),n=yF[r]);let{extension:i}=yX(n),a=yY(i);if(!a)throw Error("useEnvironment: Unrecognized file extension: "+n);gz.clear(a,yU(n)?[n]:n)};let yJ=e=>e.current&&e.current.isScene,yZ=e=>yJ(e)?e.current:e;function yq(e,t,n,r,i={}){var a,s,u,c,h;i={backgroundBlurriness:null!==(a=i.blur)&&void 0!==a?a:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};let p=yZ(t||n),f=p.background,v=p.environment,y={backgroundBlurriness:p.backgroundBlurriness,backgroundIntensity:p.backgroundIntensity,backgroundRotation:null!==(s=null==(u=p.backgroundRotation)||null==u.clone?void 0:u.clone())&&void 0!==s?s:[0,0,0],environmentIntensity:p.environmentIntensity,environmentRotation:null!==(c=null==(h=p.environmentRotation)||null==h.clone?void 0:h.clone())&&void 0!==c?c:[0,0,0]};return"only"!==e&&(p.environment=r),e&&(p.background=r),gW(p,i),()=>{"only"!==e&&(p.environment=v),e&&(p.background=f),gW(p,y)}}function yK({scene:e,background:t=!1,map:n,...r}){let i=gk(e=>e.scene);return fG.useLayoutEffect(()=>{if(n)return yq(t,e,i,n,r)}),null}function yQ({background:e=!1,scene:t,blur:n,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:a,environmentIntensity:s,environmentRotation:u,...c}){let h=yG(c),p=gk(e=>e.scene);return fG.useLayoutEffect(()=>yq(e,t,p,h,{blur:n,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:a,environmentIntensity:s,environmentRotation:u})),null}function y$({children:e,near:t=1,far:n=1e3,resolution:r=256,frames:i=1,map:a,background:s=!1,blur:u,backgroundBlurriness:c,backgroundIntensity:h,backgroundRotation:p,environmentIntensity:f,environmentRotation:v,scene:y,files:_,path:x,preset:b,extensions:S}){var w,M,A;let C=gk(e=>e.gl),T=gk(e=>e.scene),I=fG.useRef(null),[D]=fG.useState(()=>new uq),P=fG.useMemo(()=>{let e=new sm(r);return e.texture.type=nY,e},[r]);fG.useLayoutEffect(()=>(1===i&&I.current.update(C,D),yq(s,y,T,P.texture,{blur:u,backgroundBlurriness:c,backgroundIntensity:h,backgroundRotation:p,environmentIntensity:f,environmentRotation:v})),[e,D,P.texture,y,T,s,i,C]);let R=1;return gB(()=>{(i===1/0||R<i)&&(I.current.update(C,D),R++)}),fG.createElement(fG.Fragment,null,(w=fG.createElement(fG.Fragment,null,e,fG.createElement("cubeCamera",{ref:I,args:[t,n,P]}),_||b?fG.createElement(yQ,{background:!0,files:_,preset:b,path:x,extensions:S}):a?fG.createElement(yK,{background:!0,map:a,extensions:S}):null),M=D,(0,tS.jsx)(gq,{children:w,container:M,state:void 0},M.uuid)))}function y0(e){var t,n,r,i;let a=yG(e),s=e.map||a;fG.useMemo(()=>f5({GroundProjectedEnvImpl:m8}),[]);let u=fG.useMemo(()=>[s],[s]),c=null==(t=e.ground)?void 0:t.height,h=null==(n=e.ground)?void 0:n.radius,p=null!==(r=null==(i=e.ground)?void 0:i.scale)&&void 0!==r?r:1e3;return fG.createElement(fG.Fragment,null,fG.createElement(yK,m6({},e,{map:s})),fG.createElement("groundProjectedEnvImpl",{args:u,scale:p,height:c,radius:h}))}function y1(e){return e.ground?fG.createElement(y0,e):e.map?fG.createElement(yK,e):e.children?fG.createElement(y$,e):fG.createElement(yQ,e)}function y2(e,t,n,r){let i=class extends sl{constructor(i={}){let a=Object.entries(e);super({uniforms:a.reduce((e,[t,n])=>{let r=ss.clone({[t]:{value:n}});return{...e,...r}},{}),vertexShader:t,fragmentShader:n}),this.key="",a.forEach(([e])=>Object.defineProperty(this,e,{get:()=>this.uniforms[e].value,set:t=>this.uniforms[e].value=t})),Object.assign(this,i),r&&r(this)}};return i.key=iW.generateUUID(),i}let y3=parseInt(tM.replace(/\D+/g,"")),y5=y2({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new oA,sectionColor:new oA,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new ap,worldPlanePosition:new ap},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${y3>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),y4=fG.forwardRef(({args:e,cellColor:t="#000000",sectionColor:n="#2080ff",cellSize:r=.5,sectionSize:i=1,followCamera:a=!1,infiniteGrid:s=!1,fadeDistance:u=100,fadeStrength:c=1,fadeFrom:h=1,cellThickness:p=.5,sectionThickness:f=1,side:v=tB,...y},_)=>{f5({GridMaterial:y5});let x=fG.useRef(null);fG.useImperativeHandle(_,()=>x.current,[]);let b=new sx,S=new ap(0,1,0),w=new ap(0,0,0);return gB(e=>{b.setFromNormalAndCoplanarPoint(S,w).applyMatrix4(x.current.matrixWorld);let t=x.current.material,n=t.uniforms.worldCamProjPosition,r=t.uniforms.worldPlanePosition;b.projectPoint(e.camera.position,n.value),r.value.set(0,0,0).applyMatrix4(x.current.matrixWorld)}),fG.createElement("mesh",m6({ref:x,frustumCulled:!1},y),fG.createElement("gridMaterial",m6({transparent:!0,"extensions-derivatives":!0,side:v},{cellSize:r,sectionSize:i,cellColor:t,sectionColor:n,cellThickness:p,sectionThickness:f},{fadeDistance:u,fadeStrength:c,fadeFrom:h,infiniteGrid:s,followCamera:a})),fG.createElement("planeGeometry",{args:e}))}),y6={LEFT:1,RIGHT:2,MIDDLE:4},y9=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),y8={NONE:0,IN:1,OUT:-1};function y7(e){return e.isPerspectiveCamera}function _e(e){return e.isOrthographicCamera}let _t=2*Math.PI,_n=Math.PI/2,_r=Math.PI/180;function _i(e,t,n){return Math.max(t,Math.min(n,e))}function _a(e,t=1e-5){return Math.abs(e)<t}function _o(e,t,n=1e-5){return _a(e-t,n)}function _s(e,t){return Math.round(e/t)*t}function _l(e){return isFinite(e)?e:e<0?-Number.MAX_VALUE:Number.MAX_VALUE}function _u(e){return Math.abs(e)<Number.MAX_VALUE?e:1/0*e}function _c(e,t,n,r,i=1/0,a){let s=2/(r=Math.max(1e-4,r)),u=s*a,c=1/(1+u+.48*u*u+.235*u*u*u),h=e-t,p=t,f=i*r;t=e-(h=_i(h,-f,f));let v=(n.value+s*h)*a;n.value=(n.value-s*v)*c;let y=t+(h+v)*c;return p-e>0==y>p&&(y=p,n.value=(y-p)/a),y}function _h(e,t,n,r,i=1/0,a,s){let u=2/(r=Math.max(1e-4,r)),c=u*a,h=1/(1+c+.48*c*c+.235*c*c*c),p=t.x,f=t.y,v=t.z,y=e.x-p,_=e.y-f,x=e.z-v,b=p,S=f,w=v,M=i*r,A=y*y+_*_+x*x;if(A>M*M){let e=Math.sqrt(A);y=y/e*M,_=_/e*M,x=x/e*M}p=e.x-y,f=e.y-_,v=e.z-x;let C=(n.x+u*y)*a,T=(n.y+u*_)*a,I=(n.z+u*x)*a;n.x=(n.x-u*C)*h,n.y=(n.y-u*T)*h,n.z=(n.z-u*I)*h,s.x=p+(y+C)*h,s.y=f+(_+T)*h,s.z=v+(x+I)*h;let D=b-e.x,P=S-e.y,R=w-e.z,L=s.x-b,O=s.y-S;return D*L+P*O+R*(s.z-w)>0&&(s.x=b,s.y=S,s.z=w,n.x=(s.x-b)/a,n.y=(s.y-S)/a,n.z=(s.z-w)/a),s}function _d(e,t){t.set(0,0),e.forEach(e=>{t.x+=e.clientX,t.y+=e.clientY}),t.x/=e.length,t.y/=e.length}function _p(e,t){return!!_e(e)||!1}class _f{constructor(){this._listeners={}}addEventListener(e,t){let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){let n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){let n=this._listeners[e];if(void 0!==n){let e=n.indexOf(t);-1!==e&&n.splice(e,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){let t=this._listeners[e.type];if(void 0!==t){e.target=this;let n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e)}}}let _g=1/8,_m=/Mac/.test(null===(eo=null==globalThis?void 0:globalThis.navigator)||void 0===eo?void 0:eo.platform);class _v extends _f{static install(e){v=Object.freeze(new(f=e.THREE).Vector3(0,0,0)),y=Object.freeze(new f.Vector3(0,1,0)),_=Object.freeze(new f.Vector3(0,0,1)),x=new f.Vector2,b=new f.Vector3,S=new f.Vector3,w=new f.Vector3,M=new f.Vector3,A=new f.Vector3,C=new f.Vector3,T=new f.Vector3,I=new f.Vector3,D=new f.Vector3,P=new f.Spherical,R=new f.Spherical,L=new f.Box3,O=new f.Box3,k=new f.Sphere,B=new f.Quaternion,N=new f.Quaternion,F=new f.Matrix4,z=new f.Raycaster}static get ACTION(){return y9}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=y9.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=y8.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new f.Vector3,this._focalOffsetVelocity=new f.Vector3,this._zoomVelocity={value:0},this._truckInternal=(e,t,n)=>{let r,i;if(y7(this._camera)){let n=b.copy(this._camera.position).sub(this._target),a=this._camera.getEffectiveFOV()*_r,s=n.length()*Math.tan(.5*a);r=this.truckSpeed*e*s/this._elementRect.height,i=this.truckSpeed*t*s/this._elementRect.height}else{if(!_e(this._camera))return;let n=this._camera;r=e*(n.right-n.left)/n.zoom/this._elementRect.width,i=t*(n.top-n.bottom)/n.zoom/this._elementRect.height}this.verticalDragToForward?(n?this.setFocalOffset(this._focalOffsetEnd.x+r,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(r,0,!0),this.forward(-i,!0)):n?this.setFocalOffset(this._focalOffsetEnd.x+r,this._focalOffsetEnd.y+i,this._focalOffsetEnd.z,!0):this.truck(r,i,!0)},this._rotateInternal=(e,t)=>{let n=_t*this.azimuthRotateSpeed*e/this._elementRect.height,r=_t*this.polarRotateSpeed*t/this._elementRect.height;this.rotate(n,r,!0)},this._dollyInternal=(e,t,n)=>{let r=Math.pow(.95,-e*this.dollySpeed),i=this._sphericalEnd.radius,a=this._sphericalEnd.radius*r,s=_i(a,this.minDistance,this.maxDistance);this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(a,!0):(this.infinityDolly&&!this.dollyToCursor&&this.dollyInFixed(s-a,!0),this._dollyToNoClamp(s,!0)),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?a:s)-i,this._dollyControlCoord.set(t,n)),this._lastDollyDirection=Math.sign(-e)},this._zoomInternal=(e,t,n)=>{let r=Math.pow(.95,e*this.dollySpeed),i=this._zoom,a=this._zoom*r;this.zoomTo(a,!0),this.dollyToCursor&&(this._changedZoom+=a-i,this._dollyControlCoord.set(t,n))},this._camera=e,this._yAxisUpSpace=new f.Quaternion().setFromUnitVectors(this._camera.up,y),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=y9.NONE,this._target=new f.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new f.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new f.Spherical().setFromVector3(b.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new f.Vector3,new f.Vector3,new f.Vector3,new f.Vector3],this._updateNearPlaneCorners(),this._boundary=new f.Box3(new f.Vector3(-1/0,-1/0,-1/0),new f.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new f.Vector2,this.mouseButtons={left:y9.ROTATE,middle:y9.DOLLY,right:y9.TRUCK,wheel:y7(this._camera)?y9.DOLLY:_e(this._camera)?y9.ZOOM:y9.NONE},this.touches={one:y9.TOUCH_ROTATE,two:y7(this._camera)?y9.TOUCH_DOLLY_TRUCK:_e(this._camera)?y9.TOUCH_ZOOM_TRUCK:y9.NONE,three:y9.TOUCH_TRUCK};let n=new f.Vector2,r=new f.Vector2,i=new f.Vector2,a=e=>{if(!this._enabled||!this._domElement)return;if(0!==this._interactiveArea.left||0!==this._interactiveArea.top||1!==this._interactiveArea.width||1!==this._interactiveArea.height){let t=this._domElement.getBoundingClientRect(),n=e.clientX/t.width,r=e.clientY/t.height;if(n<this._interactiveArea.left||n>this._interactiveArea.right||r<this._interactiveArea.top||r>this._interactiveArea.bottom)return}let t="mouse"!==e.pointerType?null:(e.buttons&y6.LEFT)===y6.LEFT?y6.LEFT:(e.buttons&y6.MIDDLE)===y6.MIDDLE?y6.MIDDLE:(e.buttons&y6.RIGHT)===y6.RIGHT?y6.RIGHT:null;if(null!==t){let e=this._findPointerByMouseButton(t);e&&this._disposePointer(e)}if((e.buttons&y6.LEFT)===y6.LEFT&&this._lockedPointer)return;let n={pointerId:e.pointerId,clientX:e.clientX,clientY:e.clientY,deltaX:0,deltaY:0,mouseButton:t};this._activePointers.push(n),this._domElement.ownerDocument.removeEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.addEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),this._isDragging=!0,v(e)},s=e=>{e.cancelable&&e.preventDefault();let t=e.pointerId,n=this._lockedPointer||this._findPointerById(t);if(n){if(n.clientX=e.clientX,n.clientY=e.clientY,n.deltaX=e.movementX,n.deltaY=e.movementY,this._state=0,"touch"===e.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(e.buttons&y6.LEFT)===y6.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(e.buttons&y6.MIDDLE)===y6.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(e.buttons&y6.RIGHT)===y6.RIGHT&&(this._state=this._state|this.mouseButtons.right);_()}},u=e=>{let t=this._findPointerById(e.pointerId);if(!t||t!==this._lockedPointer){if(t&&this._disposePointer(t),"touch"===e.pointerType)switch(this._activePointers.length){case 0:this._state=y9.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=y9.NONE;S()}},c=-1,h=e=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===y9.NONE)return;if(0!==this._interactiveArea.left||0!==this._interactiveArea.top||1!==this._interactiveArea.width||1!==this._interactiveArea.height){let t=this._domElement.getBoundingClientRect(),n=e.clientX/t.width,r=e.clientY/t.height;if(n<this._interactiveArea.left||n>this._interactiveArea.right||r<this._interactiveArea.top||r>this._interactiveArea.bottom)return}if(e.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===y9.ROTATE||this.mouseButtons.wheel===y9.TRUCK){let e=performance.now();c-e<1e3&&this._getClientRect(this._elementRect),c=e}let t=_m?-1:-3,n=1===e.deltaMode?e.deltaY/t:e.deltaY/(10*t),r=this.dollyToCursor?(e.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,i=this.dollyToCursor?-((e.clientY-this._elementRect.y)/this._elementRect.height*2)+1:0;switch(this.mouseButtons.wheel){case y9.ROTATE:this._rotateInternal(e.deltaX,e.deltaY),this._isUserControllingRotate=!0;break;case y9.TRUCK:this._truckInternal(e.deltaX,e.deltaY,!1),this._isUserControllingTruck=!0;break;case y9.OFFSET:this._truckInternal(e.deltaX,e.deltaY,!0),this._isUserControllingOffset=!0;break;case y9.DOLLY:this._dollyInternal(-n,r,i),this._isUserControllingDolly=!0;break;case y9.ZOOM:this._zoomInternal(-n,r,i),this._isUserControllingZoom=!0}this.dispatchEvent({type:"control"})},p=e=>{if(this._domElement&&this._enabled){if(this.mouseButtons.right===_v.ACTION.NONE){let t=e instanceof PointerEvent?e.pointerId:0,n=this._findPointerById(t);n&&this._disposePointer(n),this._domElement.ownerDocument.removeEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u);return}e.preventDefault()}},v=e=>{if(!!this._enabled){if(_d(this._activePointers,x),this._getClientRect(this._elementRect),n.copy(x),r.copy(x),this._activePointers.length>=2){let e=x.x-this._activePointers[1].clientX,t=x.y-this._activePointers[1].clientY,n=Math.sqrt(e*e+t*t);i.set(0,n);let a=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,s=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(a,s)}if(this._state=0,e){if("pointerType"in e&&"touch"===e.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else!this._lockedPointer&&(e.buttons&y6.LEFT)===y6.LEFT&&(this._state=this._state|this.mouseButtons.left),(e.buttons&y6.MIDDLE)===y6.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(e.buttons&y6.RIGHT)===y6.RIGHT&&(this._state=this._state|this.mouseButtons.right)}else this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);((this._state&y9.ROTATE)===y9.ROTATE||(this._state&y9.TOUCH_ROTATE)===y9.TOUCH_ROTATE||(this._state&y9.TOUCH_DOLLY_ROTATE)===y9.TOUCH_DOLLY_ROTATE||(this._state&y9.TOUCH_ZOOM_ROTATE)===y9.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&y9.TRUCK)===y9.TRUCK||(this._state&y9.TOUCH_TRUCK)===y9.TOUCH_TRUCK||(this._state&y9.TOUCH_DOLLY_TRUCK)===y9.TOUCH_DOLLY_TRUCK||(this._state&y9.TOUCH_ZOOM_TRUCK)===y9.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&y9.DOLLY)===y9.DOLLY||(this._state&y9.TOUCH_DOLLY)===y9.TOUCH_DOLLY||(this._state&y9.TOUCH_DOLLY_TRUCK)===y9.TOUCH_DOLLY_TRUCK||(this._state&y9.TOUCH_DOLLY_OFFSET)===y9.TOUCH_DOLLY_OFFSET||(this._state&y9.TOUCH_DOLLY_ROTATE)===y9.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&y9.ZOOM)===y9.ZOOM||(this._state&y9.TOUCH_ZOOM)===y9.TOUCH_ZOOM||(this._state&y9.TOUCH_ZOOM_TRUCK)===y9.TOUCH_ZOOM_TRUCK||(this._state&y9.TOUCH_ZOOM_OFFSET)===y9.TOUCH_ZOOM_OFFSET||(this._state&y9.TOUCH_ZOOM_ROTATE)===y9.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&y9.OFFSET)===y9.OFFSET||(this._state&y9.TOUCH_OFFSET)===y9.TOUCH_OFFSET||(this._state&y9.TOUCH_DOLLY_OFFSET)===y9.TOUCH_DOLLY_OFFSET||(this._state&y9.TOUCH_ZOOM_OFFSET)===y9.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})}},_=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,_d(this._activePointers,x);let e=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,t=e?-e.deltaX:r.x-x.x,a=e?-e.deltaY:r.y-x.y;if(r.copy(x),((this._state&y9.ROTATE)===y9.ROTATE||(this._state&y9.TOUCH_ROTATE)===y9.TOUCH_ROTATE||(this._state&y9.TOUCH_DOLLY_ROTATE)===y9.TOUCH_DOLLY_ROTATE||(this._state&y9.TOUCH_ZOOM_ROTATE)===y9.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(t,a),this._isUserControllingRotate=!0),(this._state&y9.DOLLY)===y9.DOLLY||(this._state&y9.ZOOM)===y9.ZOOM){let e=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,t=this.dollyToCursor?-((n.y-this._elementRect.y)/this._elementRect.height*2)+1:0,r=this.dollyDragInverted?-1:1;(this._state&y9.DOLLY)===y9.DOLLY?(this._dollyInternal(r*a*_g,e,t),this._isUserControllingDolly=!0):(this._zoomInternal(r*a*_g,e,t),this._isUserControllingZoom=!0)}if((this._state&y9.TOUCH_DOLLY)===y9.TOUCH_DOLLY||(this._state&y9.TOUCH_ZOOM)===y9.TOUCH_ZOOM||(this._state&y9.TOUCH_DOLLY_TRUCK)===y9.TOUCH_DOLLY_TRUCK||(this._state&y9.TOUCH_ZOOM_TRUCK)===y9.TOUCH_ZOOM_TRUCK||(this._state&y9.TOUCH_DOLLY_OFFSET)===y9.TOUCH_DOLLY_OFFSET||(this._state&y9.TOUCH_ZOOM_OFFSET)===y9.TOUCH_ZOOM_OFFSET||(this._state&y9.TOUCH_DOLLY_ROTATE)===y9.TOUCH_DOLLY_ROTATE||(this._state&y9.TOUCH_ZOOM_ROTATE)===y9.TOUCH_ZOOM_ROTATE){let e=x.x-this._activePointers[1].clientX,t=x.y-this._activePointers[1].clientY,n=Math.sqrt(e*e+t*t),a=i.y-n;i.set(0,n);let s=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,u=this.dollyToCursor?-((r.y-this._elementRect.y)/this._elementRect.height*2)+1:0;(this._state&y9.TOUCH_DOLLY)===y9.TOUCH_DOLLY||(this._state&y9.TOUCH_DOLLY_ROTATE)===y9.TOUCH_DOLLY_ROTATE||(this._state&y9.TOUCH_DOLLY_TRUCK)===y9.TOUCH_DOLLY_TRUCK||(this._state&y9.TOUCH_DOLLY_OFFSET)===y9.TOUCH_DOLLY_OFFSET?(this._dollyInternal(a*_g,s,u),this._isUserControllingDolly=!0):(this._zoomInternal(a*_g,s,u),this._isUserControllingZoom=!0)}((this._state&y9.TRUCK)===y9.TRUCK||(this._state&y9.TOUCH_TRUCK)===y9.TOUCH_TRUCK||(this._state&y9.TOUCH_DOLLY_TRUCK)===y9.TOUCH_DOLLY_TRUCK||(this._state&y9.TOUCH_ZOOM_TRUCK)===y9.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(t,a,!1),this._isUserControllingTruck=!0),((this._state&y9.OFFSET)===y9.OFFSET||(this._state&y9.TOUCH_OFFSET)===y9.TOUCH_OFFSET||(this._state&y9.TOUCH_DOLLY_OFFSET)===y9.TOUCH_DOLLY_OFFSET||(this._state&y9.TOUCH_ZOOM_OFFSET)===y9.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(t,a,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},S=()=>{_d(this._activePointers,x),r.copy(x),this._dragNeedsUpdate=!1,(0===this._activePointers.length||1===this._activePointers.length&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),0===this._activePointers.length&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{this._enabled&&this._domElement&&(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",w),this._domElement.ownerDocument.addEventListener("pointerlockerror",M),this._domElement.ownerDocument.addEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),v())},this.unlockPointer=()=>{var e,t,n;null!==this._lockedPointer&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),null===(e=this._domElement)||void 0===e||e.ownerDocument.exitPointerLock(),null===(t=this._domElement)||void 0===t||t.ownerDocument.removeEventListener("pointerlockchange",w),null===(n=this._domElement)||void 0===n||n.ownerDocument.removeEventListener("pointerlockerror",M),this.cancel()};let w=()=>{!(this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement)&&this.unlockPointer()},M=()=>{this.unlockPointer()};this._addAllEventListeners=e=>{this._domElement=e,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",a),this._domElement.addEventListener("pointercancel",u),this._domElement.addEventListener("wheel",h,{passive:!1}),this._domElement.addEventListener("contextmenu",p)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",a),this._domElement.removeEventListener("pointercancel",u),this._domElement.removeEventListener("wheel",h,{passive:!1}),this._domElement.removeEventListener("contextmenu",p),this._domElement.ownerDocument.removeEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("pointerlockchange",w),this._domElement.ownerDocument.removeEventListener("pointerlockerror",M))},this.cancel=()=>{this._state!==y9.NONE&&(this._state=y9.NONE,this._activePointers.length=0,S())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){(this._spherical.radius!==e||this._sphericalEnd.radius!==e)&&(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){(this._spherical.theta!==e||this._sphericalEnd.theta!==e)&&(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){(this._spherical.phi!==e||this._sphericalEnd.phi!==e)&&(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=_i(e.width,0,1),this._interactiveArea.height=_i(e.height,0,1),this._interactiveArea.x=_i(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=_i(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,n=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,n)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,n=!1){this._isUserControllingRotate=!1;let r=_i(e,this.minAzimuthAngle,this.maxAzimuthAngle),i=_i(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=i,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,!n&&(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);let a=!n||_o(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&_o(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(a)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=y8.NONE,this._changedDolly=0,this._dollyToNoClamp(_i(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){let n=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){let t=this._collisionTest(),r=_o(t,this._spherical.radius);if(!(n>e)&&r)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,t)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,!t&&(this._spherical.radius=this._sphericalEnd.radius);let r=!t||_o(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(r)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(M).multiplyScalar(e)),!t&&this._target.copy(this._targetEnd);let n=!t||_o(this._target.x,this._targetEnd.x,this.restThreshold)&&_o(this._target.y,this._targetEnd.y,this.restThreshold)&&_o(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(n)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=_i(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,!t&&(this._zoom=this._zoomEnd);let n=!t||_o(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(n)}pan(e,t,n=!1){return this.truck(e,t,n)}truck(e,t,n=!1){this._camera.updateMatrix(),A.setFromMatrixColumn(this._camera.matrix,0),C.setFromMatrixColumn(this._camera.matrix,1),A.multiplyScalar(e),C.multiplyScalar(-t);let r=b.copy(A).add(C),i=S.copy(this._targetEnd).add(r);return this.moveTo(i.x,i.y,i.z,n)}forward(e,t=!1){b.setFromMatrixColumn(this._camera.matrix,0),b.crossVectors(this._camera.up,b),b.multiplyScalar(e);let n=S.copy(this._targetEnd).add(b);return this.moveTo(n.x,n.y,n.z,t)}elevate(e,t=!1){return b.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+b.x,this._targetEnd.y+b.y,this._targetEnd.z+b.z,t)}moveTo(e,t,n,r=!1){this._isUserControllingTruck=!1;let i=b.set(e,t,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,i,this.boundaryFriction),this._needsUpdate=!0,!r&&this._target.copy(this._targetEnd);let a=!r||_o(this._target.x,this._targetEnd.x,this.restThreshold)&&_o(this._target.y,this._targetEnd.y,this.restThreshold)&&_o(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(a)}lookInDirectionOf(e,t,n,r=!1){let i=b.set(e,t,n).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(i.x,i.y,i.z,r)}fitToBox(e,t,{cover:n=!1,paddingLeft:r=0,paddingRight:i=0,paddingBottom:a=0,paddingTop:s=0}={}){let u=[],c=e.isBox3?L.copy(e):L.setFromObject(e);c.isEmpty()&&Promise.resolve();let h=_s(this._sphericalEnd.theta,_n),p=_s(this._sphericalEnd.phi,_n);u.push(this.rotateTo(h,p,t));let f=b.setFromSpherical(this._sphericalEnd).normalize(),v=B.setFromUnitVectors(f,_),x=_o(Math.abs(f.y),1);x&&v.multiply(N.setFromAxisAngle(y,h)),v.multiply(this._yAxisUpSpaceInverse);let w=O.makeEmpty();S.copy(c.min).applyQuaternion(v),w.expandByPoint(S),S.copy(c.min).setX(c.max.x).applyQuaternion(v),w.expandByPoint(S),S.copy(c.min).setY(c.max.y).applyQuaternion(v),w.expandByPoint(S),S.copy(c.max).setZ(c.min.z).applyQuaternion(v),w.expandByPoint(S),S.copy(c.min).setZ(c.max.z).applyQuaternion(v),w.expandByPoint(S),S.copy(c.max).setY(c.min.y).applyQuaternion(v),w.expandByPoint(S),S.copy(c.max).setX(c.min.x).applyQuaternion(v),w.expandByPoint(S),S.copy(c.max).applyQuaternion(v),w.expandByPoint(S),w.min.x-=r,w.min.y-=a,w.max.x+=i,w.max.y+=s,v.setFromUnitVectors(_,f),x&&v.premultiply(N.invert()),v.premultiply(this._yAxisUpSpace);let M=w.getSize(b),A=w.getCenter(S).applyQuaternion(v);if(y7(this._camera)){let e=this.getDistanceToFitBox(M.x,M.y,M.z,n);u.push(this.moveTo(A.x,A.y,A.z,t)),u.push(this.dollyTo(e,t)),u.push(this.setFocalOffset(0,0,0,t))}else if(_e(this._camera)){let e=this._camera,r=e.right-e.left,i=e.top-e.bottom,a=n?Math.max(r/M.x,i/M.y):Math.min(r/M.x,i/M.y);u.push(this.moveTo(A.x,A.y,A.z,t)),u.push(this.zoomTo(a,t)),u.push(this.setFocalOffset(0,0,0,t))}return Promise.all(u)}fitToSphere(e,t){let n=[],r="isObject3D"in e?_v.createBoundingSphere(e,k):k.copy(e);if(n.push(this.moveTo(r.center.x,r.center.y,r.center.z,t)),y7(this._camera)){let e=this.getDistanceToFitSphere(r.radius);n.push(this.dollyTo(e,t))}else if(_e(this._camera)){let e=this._camera.right-this._camera.left,i=this._camera.top-this._camera.bottom,a=2*r.radius,s=Math.min(e/a,i/a);n.push(this.zoomTo(s,t))}return n.push(this.setFocalOffset(0,0,0,t)),Promise.all(n)}setLookAt(e,t,n,r,i,a,s=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=y8.NONE,this._changedDolly=0;let u=S.set(r,i,a),c=b.set(e,t,n);this._targetEnd.copy(u),this._sphericalEnd.setFromVector3(c.sub(u).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,!s&&(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));let h=!s||_o(this._target.x,this._targetEnd.x,this.restThreshold)&&_o(this._target.y,this._targetEnd.y,this.restThreshold)&&_o(this._target.z,this._targetEnd.z,this.restThreshold)&&_o(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&_o(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&_o(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(h)}lerpLookAt(e,t,n,r,i,a,s,u,c,h,p,f,v,y=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=y8.NONE,this._changedDolly=0;let _=b.set(r,i,a),x=S.set(e,t,n);P.setFromVector3(x.sub(_).applyQuaternion(this._yAxisUpSpace));let M=w.set(h,p,f),A=S.set(s,u,c);R.setFromVector3(A.sub(M).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(_.lerp(M,v));let C=R.theta-P.theta,T=R.phi-P.phi,I=R.radius-P.radius;this._sphericalEnd.set(P.radius+I*v,P.phi+T*v,P.theta+C*v),this.normalizeRotations(),this._needsUpdate=!0,!y&&(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));let D=!y||_o(this._target.x,this._targetEnd.x,this.restThreshold)&&_o(this._target.y,this._targetEnd.y,this.restThreshold)&&_o(this._target.z,this._targetEnd.z,this.restThreshold)&&_o(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&_o(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&_o(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(D)}setPosition(e,t,n,r=!1){return this.setLookAt(e,t,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,n,r=!1){let i=this.getPosition(b),a=this.setLookAt(i.x,i.y,i.z,e,t,n,r);return this._sphericalEnd.phi=_i(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),a}setFocalOffset(e,t,n,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,n),this._needsUpdate=!0,!r&&this._focalOffset.copy(this._focalOffsetEnd);let i=!r||_o(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&_o(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&_o(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}setOrbitPoint(e,t,n){this._camera.updateMatrixWorld(),A.setFromMatrixColumn(this._camera.matrixWorldInverse,0),C.setFromMatrixColumn(this._camera.matrixWorldInverse,1),T.setFromMatrixColumn(this._camera.matrixWorldInverse,2);let r=b.set(e,t,n),i=r.distanceTo(this._camera.position),a=r.sub(this._camera.position);A.multiplyScalar(a.x),C.multiplyScalar(a.y),T.multiplyScalar(a.z),b.copy(A).add(C).add(T),b.z=b.z+i,this.dollyTo(i,!1),this.setFocalOffset(-b.x,b.y,-b.z,!1),this.moveTo(e,t,n,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,n,r){if(null===e){this._viewport=null;return}this._viewport=this._viewport||new f.Vector4,"number"==typeof e?this._viewport.set(e,t,n,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,n,r=!1){if(_p(this._camera,"getDistanceToFitBox"))return this._spherical.radius;let i=e/t,a=this._camera.getEffectiveFOV()*_r,s=this._camera.aspect;return .5*((r?i>s:i<s)?t:e/s)/Math.tan(.5*a)+.5*n}getDistanceToFitSphere(e){if(_p(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;let t=this._camera.getEffectiveFOV()*_r,n=2*Math.atan(Math.tan(.5*t)*this._camera.aspect);return e/Math.sin(.5*(1<this._camera.aspect?t:n))}getTarget(e,t=!0){return(e&&e.isVector3?e:new f.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new f.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e||new f.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new f.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%_t,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=_t),this._spherical.theta+=_t*Math.round((this._sphericalEnd.theta-this._spherical.theta)/_t)}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(e=!1){if(!_o(this._camera.up.x,this._cameraUp0.x)||!_o(this._camera.up.y,this._cameraUp0.y)||!_o(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);let e=this.getPosition(b);this.updateCameraUp(),this.setPosition(e.x,e.y,e.z)}return Promise.all([this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)])}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,y),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){let e=b.subVectors(this._target,this._camera.position).normalize(),t=S.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();let n=this.getPosition(b);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}update(e){let t=this._sphericalEnd.theta-this._spherical.theta,n=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,i=I.subVectors(this._targetEnd,this._target),a=D.subVectors(this._focalOffsetEnd,this._focalOffset),s=this._zoomEnd-this._zoom;if(_a(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{let t=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=_c(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,t,1/0,e),this._needsUpdate=!0}if(_a(n))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{let t=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=_c(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,t,1/0,e),this._needsUpdate=!0}if(_a(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{let t=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=_c(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,t,this.maxSpeed,e),this._needsUpdate=!0}if(_a(i.x)&&_a(i.y)&&_a(i.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{let t=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;_h(this._target,this._targetEnd,this._targetVelocity,t,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(_a(a.x)&&_a(a.y)&&_a(a.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{let t=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;_h(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,t,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(_a(s))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{let t=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=_c(this._zoom,this._zoomEnd,this._zoomVelocity,t,1/0,e)}if(this.dollyToCursor){if(y7(this._camera)&&0!==this._changedDolly){let e=this._spherical.radius-this._lastDistance,t=this._camera,n=this._getCameraDirection(M),r=b.copy(n).cross(t.up).normalize();0===r.lengthSq()&&(r.x=1);let i=S.crossVectors(r,n),a=this._sphericalEnd.radius*Math.tan(t.getEffectiveFOV()*_r*.5),s=(this._sphericalEnd.radius-e-this._sphericalEnd.radius)/this._sphericalEnd.radius,u=w.copy(this._targetEnd).add(r.multiplyScalar(this._dollyControlCoord.x*a*t.aspect)).add(i.multiplyScalar(this._dollyControlCoord.y*a)),c=b.copy(this._targetEnd).lerp(u,s),h=this._lastDollyDirection===y8.IN&&this._spherical.radius<=this.minDistance,p=this._lastDollyDirection===y8.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(h||p)){this._sphericalEnd.radius-=e,this._spherical.radius-=e;let t=S.copy(n).multiplyScalar(-e);c.add(t)}this._boundary.clampPoint(c,c);let f=S.subVectors(c,this._targetEnd);this._targetEnd.copy(c),this._target.add(f),this._changedDolly-=e,_a(this._changedDolly)&&(this._changedDolly=0)}else if(_e(this._camera)&&0!==this._changedZoom){let e=this._zoom-this._lastZoom,t=this._camera,n=b.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(t.near+t.far)/(t.near-t.far)).unproject(t),r=S.set(0,0,-1).applyQuaternion(t.quaternion),i=w.copy(n).add(r.multiplyScalar(-n.dot(t.up))),a=-(this._zoom-e-this._zoom)/this._zoom,s=this._getCameraDirection(M),u=this._targetEnd.dot(s),c=b.copy(this._targetEnd).lerp(i,a),h=c.dot(s),p=s.multiplyScalar(h-u);c.sub(p),this._boundary.clampPoint(c,c);let f=S.subVectors(c,this._targetEnd);this._targetEnd.copy(c),this._target.add(f),this._changedZoom-=e,_a(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;let u=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,u),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!_a(this._focalOffset.x)||!_a(this._focalOffset.y)||!_a(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),A.setFromMatrixColumn(this._camera.matrix,0),C.setFromMatrixColumn(this._camera.matrix,1),T.setFromMatrixColumn(this._camera.matrix,2),A.multiplyScalar(this._focalOffset.x),C.multiplyScalar(-this._focalOffset.y),T.multiplyScalar(this._focalOffset.z),b.copy(A).add(C).add(T),this._camera.position.add(b)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),b.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);let c=this._needsUpdate;return c&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):c?(this.dispatchEvent({type:"update"}),_a(t,this.restThreshold)&&_a(n,this.restThreshold)&&_a(r,this.restThreshold)&&_a(i.x,this.restThreshold)&&_a(i.y,this.restThreshold)&&_a(i.z,this.restThreshold)&&_a(a.x,this.restThreshold)&&_a(a.y,this.restThreshold)&&_a(a.z,this.restThreshold)&&_a(s,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!c&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=c,this._needsUpdate=!1,c}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:_l(this.maxDistance),minZoom:this.minZoom,maxZoom:_l(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:_l(this.maxPolarAngle),minAzimuthAngle:_l(this.minAzimuthAngle),maxAzimuthAngle:_l(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:b.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){let n=JSON.parse(e);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=_u(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=_u(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=_u(n.maxPolarAngle),this.minAzimuthAngle=_u(n.minAzimuthAngle),this.maxAzimuthAngle=_u(n.maxAzimuthAngle),this.smoothTime=n.smoothTime,this.draggingSmoothTime=n.draggingSmoothTime,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],t),P.setFromVector3(b.fromArray(n.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(P.theta,P.phi,t),this.dollyTo(P.radius,t),this.zoomTo(n.zoom,t),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(!this._domElement)e.setAttribute("data-camera-controls-version","2.9.0"),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,n){let r=t.lengthSq();if(0===r)return e;let i=S.copy(t).add(e),a=this._boundary.clampPoint(i,w).sub(i),s=a.lengthSq();if(0===s)return e.add(t);if(s===r)return e;if(0===n)return e.add(t).add(a);else{let r=1+n*s/t.dot(a);return e.add(S.copy(t).multiplyScalar(r)).add(a.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(y7(this._camera)){let e=this._camera,t=e.near,n=Math.tan(.5*(e.getEffectiveFOV()*_r))*t,r=n*e.aspect;this._nearPlaneCorners[0].set(-r,-n,0),this._nearPlaneCorners[1].set(r,-n,0),this._nearPlaneCorners[2].set(r,n,0),this._nearPlaneCorners[3].set(-r,n,0)}else if(_e(this._camera)){let e=this._camera,t=1/e.zoom,n=e.left*t,r=e.right*t,i=e.top*t,a=e.bottom*t;this._nearPlaneCorners[0].set(n,i,0),this._nearPlaneCorners[1].set(r,i,0),this._nearPlaneCorners[2].set(r,a,0),this._nearPlaneCorners[3].set(n,a,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||_p(this._camera,"_collisionTest"))return e;let t=this._getTargetDirection(M);F.lookAt(v,t,this._camera.up);for(let n=0;n<4;n++){let r=S.copy(this._nearPlaneCorners[n]);r.applyMatrix4(F);let i=w.addVectors(this._target,r);z.set(i,t),z.far=this._spherical.radius+1;let a=z.intersectObjects(this.colliderMeshes);0!==a.length&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;let t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(e=>{let t=()=>{this.removeEventListener("rest",t),e()};this.addEventListener("rest",t)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return 0}set dampingFactor(e){}get draggingDampingFactor(){return 0}set draggingDampingFactor(e){}static createBoundingSphere(e,t=new f.Sphere){let n=t.center;L.makeEmpty(),e.traverseVisible(e=>{e.isMesh&&L.expandByObject(e)}),L.getCenter(n);let r=0;return e.traverseVisible(e=>{if(!e.isMesh)return;let t=e.geometry.clone();t.applyMatrix4(e.matrixWorld);let i=t.attributes.position;for(let e=0,t=i.count;e<t;e++)b.fromBufferAttribute(i,e),r=Math.max(r,n.distanceToSquared(b))}),t.radius=Math.sqrt(r),t}}let _y=(0,fG.forwardRef)((e,t)=>{(0,fG.useMemo)(()=>{let e={Box3:am,MathUtils:{clamp:iW.clamp},Matrix4:aV,Quaternion:ad,Raycaster:fe,Sphere:aO,Spherical:fr,Vector2:ij,Vector3:ap,Vector4:aa};_v.install({THREE:e}),f5({CameraControlsImpl:_v})},[]);let{camera:n,domElement:r,makeDefault:i,onStart:a,onEnd:s,onChange:u,regress:c,...h}=e,p=gk(e=>e.camera),f=gk(e=>e.gl),v=gk(e=>e.invalidate),y=gk(e=>e.events),_=gk(e=>e.setEvents),x=gk(e=>e.set),b=gk(e=>e.get),S=gk(e=>e.performance),w=n||p,M=r||y.connected||f.domElement,A=(0,fG.useMemo)(()=>new _v(w),[w]);return gB((e,t)=>{A.enabled&&A.update(t)},-1),(0,fG.useEffect)(()=>(A.connect(M),()=>void A.disconnect()),[M,A]),(0,fG.useEffect)(()=>{let e=e=>{v(),c&&S.regress(),u&&u(e)},t=e=>{a&&a(e)},n=e=>{s&&s(e)};return A.addEventListener("update",e),A.addEventListener("controlstart",t),A.addEventListener("controlend",n),A.addEventListener("control",e),A.addEventListener("transitionstart",e),A.addEventListener("wake",e),()=>{A.removeEventListener("update",e),A.removeEventListener("controlstart",t),A.removeEventListener("controlend",n),A.removeEventListener("control",e),A.removeEventListener("transitionstart",e),A.removeEventListener("wake",e)}},[A,a,s,v,_,c,u]),(0,fG.useEffect)(()=>{if(i){let e=b().controls;return x({controls:A}),()=>x({controls:e})}},[i,A]),fG.createElement("primitive",m6({ref:t,object:A},h))}),__=e=>{if(e.startsWith("http://")||e.startsWith("https://"))return e;let t=e.startsWith("/")?e:`/${e}`;return`${"/".replace(/\/+$/,"")}${t}`},_x=()=>(0,tS.jsxs)(tS.Fragment,{children:[(0,tS.jsx)("color",{...m4.props.background}),(0,tS.jsx)("fog",{...m4.props.fog}),(0,tS.jsx)(y1,{path:__("/assets/hdri/"),files:"venice_sunset_1k.hdr"}),(0,tS.jsx)(y4,{...m4.props.grid,position:[0,-.01,0]}),(0,tS.jsx)(_y,{...m4.props.camera})]});n("6913"),n("5662");let _b=new WeakMap;class _S extends dZ{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){let i=new dQ(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,e=>{let n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(r)},n,r)}decodeDracoFile(e,t,n,r){let i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){let n;for(let e in t.attributeTypes){let n=t.attributeTypes[e];void 0!==n.BYTES_PER_ELEMENT&&(t.attributeTypes[e]=n.name)}let r=JSON.stringify(t);if(_b.has(e)){let t=_b.get(e);if(t.key===r)return t.promise;if(0===e.byteLength)throw Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i=this.workerNextTaskID++,a=e.byteLength,s=this._getWorker(i,a).then(r=>(n=r,new Promise((r,a)=>{n._callbacks[i]={resolve:r,reject:a},n.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return s.catch(()=>!0).then(()=>{n&&i&&this._releaseTask(n,i)}),_b.set(e,{key:r,promise:s}),s}_createGeometry(e){let t=new o$;e.index&&t.setIndex(new oB(e.index.array,1));for(let n=0;n<e.attributes.length;n++){let r=e.attributes[n],i=r.name,a=r.array,s=r.itemSize;t.setAttribute(i,new oB(a,s))}return t}_loadLibrary(e,t){let n=new dQ(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((t,r)=>{n.load(e,t,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{let n=t[0];!e&&(this.decoderConfig.wasmBinary=t[1]);let r=_w.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){let n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n)}},this.workerPool.push(e)}else this.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});let n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function _w(){let e,t;onmessage=function(n){let r=n.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise(function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":let i=r.buffer,a=r.taskConfig;t.then(e=>{let t=e.draco,n=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(i),i.byteLength);try{let e=function(e,t,n,r){let i,a;let s=r.attributeIDs,u=r.attributeTypes,c=t.GetEncodedGeometryType(n);if(c===e.TRIANGULAR_MESH)i=new e.Mesh,a=t.DecodeBufferToMesh(n,i);else if(c===e.POINT_CLOUD)i=new e.PointCloud,a=t.DecodeBufferToPointCloud(n,i);else throw Error("THREE.DRACOLoader: Unexpected geometry type.");if(!a.ok()||0===i.ptr)throw Error("THREE.DRACOLoader: Decoding failed: "+a.error_msg());let h={index:null,attributes:[]};for(let n in s){let a,c;let p=self[u[n]];if(r.useUniqueIDs)c=s[n],a=t.GetAttributeByUniqueId(i,c);else{if(-1===(c=t.GetAttributeId(i,e[s[n]])))continue;a=t.GetAttribute(i,c)}h.attributes.push(function(e,t,n,r,i,a){let s=a.num_components(),u=n.num_points()*s,c=u*i.BYTES_PER_ELEMENT,h=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),p=e._malloc(c);t.GetAttributeDataArrayForAllPoints(n,a,h,c,p);let f=new i(e.HEAPF32.buffer,p,u).slice();return e._free(p),{name:r,array:f,itemSize:s}}(e,t,i,n,p,a))}return c===e.TRIANGULAR_MESH&&(h.index=function(e,t,n){let r=3*n.num_faces(),i=4*r,a=e._malloc(i);t.GetTrianglesUInt32Array(n,i,a);let s=new Uint32Array(e.HEAPF32.buffer,a,r).slice();return e._free(a),{array:s,itemSize:1}}(e,t,i)),e.destroy(i),h}(t,n,s,a),i=e.attributes.map(e=>e.array.buffer);e.index&&i.push(e.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:e},i)}catch(e){self.postMessage({type:"error",id:r.id,error:e.message})}finally{t.destroy(s),t.destroy(n)}})}}}let _M=()=>{let e;if(U)return U;let t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!=typeof WebAssembly)return{supported:!1};let r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(t)&&(r="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");let i=WebAssembly.instantiate(function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;++n){let r=e.charCodeAt(n);t[n]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let r=0;for(let i=0;i<e.length;++i)t[r++]=t[i]<60?n[t[i]]:(t[i]-60)*64+t[++i];return t.buffer.slice(0,r)}(r),{}).then(t=>{(e=t.instance).exports.__wasm_call_ctors()});function a(t,n,r,i,a,s){let u=e.exports.sbrk,c=r+3&-4,h=u(c*i),p=u(a.length),f=new Uint8Array(e.exports.memory.buffer);f.set(a,p);let v=t(h,r,i,p,a.length);if(0===v&&s&&s(h,c,i),n.set(f.subarray(h,h+r*i)),u(h-u(0)),0!==v)throw Error(`Malformed buffer data: ${v}`)}let s={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return U={ready:i,supported:!0,decodeVertexBuffer(t,n,r,i,u){a(e.exports.meshopt_decodeVertexBuffer,t,n,r,i,e.exports[s[u]])},decodeIndexBuffer(t,n,r,i){a(e.exports.meshopt_decodeIndexBuffer,t,n,r,i)},decodeIndexSequence(t,n,r,i){a(e.exports.meshopt_decodeIndexSequence,t,n,r,i)},decodeGltfBuffer(t,n,r,i,c,h){a(e.exports[u[c]],t,n,r,i,e.exports[s[h]])}}};function _A(e,t){if(t===rW)return e;if(t!==rX&&t!==rj)return e;{let n=e.getIndex();if(null===n){let t=[],r=e.getAttribute("position");if(void 0===r)return e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}let r=n.count-2,i=[];if(n){if(t===rX)for(let e=1;e<=r;e++)i.push(n.getX(0)),i.push(n.getX(e)),i.push(n.getX(e+1));else for(let e=0;e<r;e++)e%2==0?(i.push(n.getX(e)),i.push(n.getX(e+1)),i.push(n.getX(e+2))):(i.push(n.getX(e+2)),i.push(n.getX(e+1)),i.push(n.getX(e)))}i.length;let a=e.clone();return a.setIndex(i),a.clearGroups(),a}}let _C=parseInt(tM.replace(/\D+/g,""));function _T(e){if("undefined"!=typeof TextDecoder)return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}let _E="srgb",_I="srgb-linear";class _D extends dZ{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new _B(e)}),this.register(function(e){return new _N(e)}),this.register(function(e){return new _X(e)}),this.register(function(e){return new _Y(e)}),this.register(function(e){return new _J(e)}),this.register(function(e){return new _z(e)}),this.register(function(e){return new _U(e)}),this.register(function(e){return new _H(e)}),this.register(function(e){return new _G(e)}),this.register(function(e){return new _k(e)}),this.register(function(e){return new _V(e)}),this.register(function(e){return new _F(e)}),this.register(function(e){return new _j(e)}),this.register(function(e){return new _W(e)}),this.register(function(e){return new _L(e)}),this.register(function(e){return new _Z(e)}),this.register(function(e){return new _q(e)})}load(e,t,n,r){let i;let a=this;if(""!==this.resourcePath)i=this.resourcePath;else if(""!==this.path){let t=pg.extractUrlBase(e);i=pg.resolveURL(t,this.path)}else i=pg.extractUrlBase(e);this.manager.itemStart(e);let s=function(t){r&&r(t),a.manager.itemError(e),a.manager.itemEnd(e)},u=new dQ(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(n){try{a.parse(n,i,function(n){t(n),a.manager.itemEnd(e)},s)}catch(e){s(e)}},n,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return -1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return -1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;let a={},s={};if("string"==typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer){if(_T(new Uint8Array(e.slice(0,4)))===_K){try{a[_R.KHR_BINARY_GLTF]=new _$(e)}catch(e){r&&r(e);return}i=JSON.parse(a[_R.KHR_BINARY_GLTF].content)}else i=JSON.parse(_T(new Uint8Array(e)))}else i=e;if(void 0===i.asset||i.asset.version[0]<2){r&&r(Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let u=new xc(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){let t=this.pluginCallbacks[e](u);t.name,s[t.name]=t,a[t.name]=!0}if(i.extensionsUsed)for(let e=0;e<i.extensionsUsed.length;++e){let t=i.extensionsUsed[e],n=i.extensionsRequired||[];switch(t){case _R.KHR_MATERIALS_UNLIT:a[t]=new _O;break;case _R.KHR_DRACO_MESH_COMPRESSION:a[t]=new _0(i,this.dracoLoader);break;case _R.KHR_TEXTURE_TRANSFORM:a[t]=new _1;break;case _R.KHR_MESH_QUANTIZATION:a[t]=new _2;break;default:n.indexOf(t)>=0&&s[t]}}u.setExtensions(a),u.setPlugins(s),u.parse(n,r)}parseAsync(e,t){let n=this;return new Promise(function(r,i){n.parse(e,t,r,i)})}}function _P(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}let _R={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class _L{constructor(e){this.parser=e,this.name=_R.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){let r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){let t;let n=this.parser,r="light:"+e,i=n.cache.get(r);if(i)return i;let a=n.json,s=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],u=new oA(0xffffff);void 0!==s.color&&u.setRGB(s.color[0],s.color[1],s.color[2],_I);let c=void 0!==s.range?s.range:0;switch(s.type){case"directional":(t=new pu(u)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new ps(u)).distance=c;break;case"spot":(t=new pn(u)).distance=c,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,t.angle=s.spot.outerConeAngle,t.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return t.position.set(0,0,0),t.decay=2,xo(t,s),void 0!==s.intensity&&(t.intensity=s.intensity),t.name=n.createUniqueName(s.name||"light_"+e),i=Promise.resolve(t),n.cache.add(r,i),i}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){let t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then(function(e){return n._getNodeRef(t.cache,i,e)})}}class _O{constructor(){this.name=_R.KHR_MATERIALS_UNLIT}getMaterialType(){return oI}extendParams(e,t,n){let r=[];e.color=new oA(1,1,1),e.opacity=1;let i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){let t=i.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],_I),e.opacity=t[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,_E))}return Promise.all(r)}}class _k{constructor(e){this.parser=e,this.name=_R.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class _B{constructor(e){this.parser=e,this.name=_R.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dx:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){let e=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ij(e,e)}return Promise.all(i)}}class _N{constructor(e){this.parser=e,this.name=_R.KHR_MATERIALS_DISPERSION}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dx:null}extendMaterialParams(e,t){let n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let r=n.extensions[this.name];return t.dispersion=void 0!==r.dispersion?r.dispersion:0,Promise.resolve()}}class _F{constructor(e){this.parser=e,this.name=_R.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dx:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],a=r.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(i)}}class _z{constructor(e){this.parser=e,this.name=_R.KHR_MATERIALS_SHEEN}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dx:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[];t.sheenColor=new oA(0,0,0),t.sheenRoughness=0,t.sheen=1;let a=r.extensions[this.name];if(void 0!==a.sheenColorFactor){let e=a.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],_I)}return void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,_E)),void 0!==a.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(i)}}class _U{constructor(e){this.parser=e,this.name=_R.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dx:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}class _H{constructor(e){this.parser=e,this.name=_R.KHR_MATERIALS_VOLUME}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dx:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;let s=a.attenuationColor||[1,1,1];return t.attenuationColor=new oA().setRGB(s[0],s[1],s[2],_I),Promise.all(i)}}class _G{constructor(e){this.parser=e,this.name=_R.KHR_MATERIALS_IOR}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dx:null}extendMaterialParams(e,t){let n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class _V{constructor(e){this.parser=e,this.name=_R.KHR_MATERIALS_SPECULAR}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dx:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));let s=a.specularColorFactor||[1,1,1];return t.specularColor=new oA().setRGB(s[0],s[1],s[2],_I),void 0!==a.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,_E)),Promise.all(i)}}class _W{constructor(e){this.parser=e,this.name=_R.EXT_MATERIALS_BUMP}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dx:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],a=r.extensions[this.name];return t.bumpScale=void 0!==a.bumpFactor?a.bumpFactor:1,void 0!==a.bumpTexture&&i.push(n.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(i)}}class _j{constructor(e){this.parser=e,this.name=_R.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dx:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],a=r.extensions[this.name];return void 0!==a.anisotropyStrength&&(t.anisotropy=a.anisotropyStrength),void 0!==a.anisotropyRotation&&(t.anisotropyRotation=a.anisotropyRotation),void 0!==a.anisotropyTexture&&i.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(i)}}class _X{constructor(e){this.parser=e,this.name=_R.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;let i=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(!(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures")}return t.loadTextureImage(e,i.source,a)}}class _Y{constructor(e){this.parser=e,this.name=_R.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;let a=i.extensions[t],s=r.images[a.source],u=n.textureLoader;if(s.uri){let e=n.options.manager.getHandler(s.uri);null!==e&&(u=e)}return this.detectSupport().then(function(i){if(i)return n.loadTextureImage(e,a.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return!this.isSupported&&(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class _J{constructor(e){this.parser=e,this.name=_R.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){let t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;let a=i.extensions[t],s=r.images[a.source],u=n.textureLoader;if(s.uri){let e=n.options.manager.getHandler(s.uri);null!==e&&(u=e)}return this.detectSupport().then(function(i){if(i)return n.loadTextureImage(e,a.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return!this.isSupported&&(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class _Z{constructor(e){this.name=_R.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,n=t.bufferViews[e];if(!n.extensions||!n.extensions[this.name])return null;{let e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(!(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files")}return r.then(function(t){let n=e.byteOffset||0,r=e.byteLength||0,a=e.count,s=e.byteStride,u=new Uint8Array(t,n,r);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(a,s,u,e.mode,e.filter).then(function(e){return e.buffer}):i.ready.then(function(){let t=new ArrayBuffer(a*s);return i.decodeGltfBuffer(new Uint8Array(t),a,s,u,e.mode,e.filter),t})})}}}class _q{constructor(e){this.name=_R.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;for(let e of t.meshes[n.mesh].primitives)if(e.mode!==_6.TRIANGLES&&e.mode!==_6.TRIANGLE_STRIP&&e.mode!==_6.TRIANGLE_FAN&&void 0!==e.mode)return null;let r=n.extensions[this.name].attributes,i=[],a={};for(let e in r)i.push(this.parser.getDependency("accessor",r[e]).then(t=>(a[e]=t,a[e])));return i.length<1?null:(i.push(this.parser.createNodeMesh(e)),Promise.all(i).then(e=>{let t=e.pop(),n=t.isGroup?t.children:[t],r=e[0].count,i=[];for(let e of n){let t=new aV,n=new ap,s=new ad,u=new ap(1,1,1),c=new cP(e.geometry,e.material,r);for(let e=0;e<r;e++)a.TRANSLATION&&n.fromBufferAttribute(a.TRANSLATION,e),a.ROTATION&&s.fromBufferAttribute(a.ROTATION,e),a.SCALE&&u.fromBufferAttribute(a.SCALE,e),c.setMatrixAt(e,t.compose(n,s,u));for(let t in a)if("_COLOR_0"===t){let e=a[t];c.instanceColor=new cw(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,a[t]);oo.prototype.copy.call(c,e),this.parser.assignFinalMaterial(c),i.push(c)}return t.isGroup?(t.clear(),t.add(...i),t):i[0]}))}}let _K="glTF",_Q={JSON:0x4e4f534a,BIN:5130562};class _${constructor(e){this.name=_R.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,12);if(this.header={magic:_T(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==_K)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw Error("THREE.GLTFLoader: Legacy binary file detected.");let n=this.header.length-12,r=new DataView(e,12),i=0;for(;i<n;){let t=r.getUint32(i,!0);i+=4;let n=r.getUint32(i,!0);if(i+=4,n===_Q.JSON){let n=new Uint8Array(e,12+i,t);this.content=_T(n)}else if(n===_Q.BIN){let n=12+i;this.body=e.slice(n,n+t)}i+=t}if(null===this.content)throw Error("THREE.GLTFLoader: JSON content not found.")}}class _0{constructor(e,t){if(!t)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=_R.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,s={},u={},c={};for(let e in a)s[xt[e]||e.toLowerCase()]=a[e];for(let t in e.attributes){let r=xt[t]||t.toLowerCase();if(void 0!==a[t]){let i=n.accessors[e.attributes[t]],a=_9[i.componentType];c[r]=a.name,u[r]=!0===i.normalized}}return t.getDependency("bufferView",i).then(function(e){return new Promise(function(t,n){r.decodeDracoFile(e,function(e){for(let t in e.attributes){let n=e.attributes[t],r=u[t];void 0!==r&&(n.normalized=r)}t(e)},s,c,_I,n)})})}}class _1{constructor(){this.name=_R.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale?e:(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e)}}class _2{constructor(){this.name=_R.KHR_MESH_QUANTIZATION}}class _3 extends dL{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let e=0;e!==r;e++)t[e]=n[i+e];return t}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,u=2*s,c=3*s,h=r-t,p=(n-t)/h,f=p*p,v=f*p,y=e*c,_=y-c,x=-2*v+3*f,b=v-f,S=1-x,w=b-f+p;for(let e=0;e!==s;e++){let t=a[_+e+s],n=a[_+e+u]*h,r=a[y+e+s],c=a[y+e]*h;i[e]=S*t+w*n+x*r+b*c}return i}}let _5=new ad;class _4 extends _3{interpolate_(e,t,n,r){let i=super.interpolate_(e,t,n,r);return _5.fromArray(i).normalize().toArray(i),i}}let _6={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},_9={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},_8={9728:nD,9729:nk,9984:nP,9985:nB,9986:nL,9987:nF},_7={33071:nE,33648:nI,10497:nT},xe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},xt={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",..._C>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},xn={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},xr={CUBICSPLINE:void 0,LINEAR:rN,STEP:rB},xi={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function xa(e,t,n){for(let r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function xo(e,t){void 0!==t.extras&&"object"==typeof t.extras&&Object.assign(e.userData,t.extras)}function xs(e){let t="",n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function xl(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}let xu=new aV;class xc{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new _P,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,i=-1;"undefined"!=typeof navigator&&void 0!==navigator.userAgent&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i=(r=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||r&&i<98?this.textureLoader=new d5(this.options.manager):this.textureLoader=new pS(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new dQ(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(t){let a={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};return xa(i,a,r),xo(a,r),Promise.all(n._invokeAll(function(e){return e.afterRoot&&e.afterRoot(a)})).then(function(){for(let e of a.scenes)e.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,r=t.length;n<r;n++){let r=t[n].joints;for(let t=0,n=r.length;t<n;t++)e[r[t]].isBone=!0}for(let t=0,r=e.length;t<r;t++){let r=e[t];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(n[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;let r=n.clone(),i=(e,t)=>{let n=this.associations.get(e);for(let[r,a]of(null!=n&&this.associations.set(t,n),e.children.entries()))i(a,t.children[r])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){let r=e(t[n]);if(r)return r}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let n=[];for(let r=0;r<t.length;r++){let i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){let n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":r=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(!(r=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)})))throw Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){let n=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(t,r){return n.getDependency(e,r)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[_R.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(e,i){n.load(pg.resolveURL(t.uri,r.path),e,void 0,function(){i(Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){let n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)})}loadAccessor(e){let t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){let e=xe[r.type],t=_9[r.componentType],n=!0===r.normalized;return Promise.resolve(new oB(new t(r.count*e),e,n))}let i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then(function(e){let i,a;let s=e[0],u=xe[r.type],c=_9[r.componentType],h=c.BYTES_PER_ELEMENT,p=h*u,f=r.byteOffset||0,v=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,y=!0===r.normalized;if(v&&v!==p){let e=Math.floor(f/v),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count,p=t.cache.get(n);!p&&(p=new uK(i=new c(s,e*v,r.count*v/h),v/h),t.cache.add(n,p)),a=new u$(p,u,f%v/h,y)}else a=new oB(i=null===s?new c(r.count*u):new c(s,f,r.count*u),u,y);if(void 0!==r.sparse){let t=xe.SCALAR,n=_9[r.sparse.indices.componentType],i=r.sparse.indices.byteOffset||0,h=r.sparse.values.byteOffset||0,p=new n(e[1],i,r.sparse.count*t),f=new c(e[2],h,r.sparse.count*u);null!==s&&(a=new oB(a.array.slice(),a.itemSize,a.normalized));for(let e=0,t=p.length;e<t;e++){let t=p[e];if(a.setX(t,f[e*u]),u>=2&&a.setY(t,f[e*u+1]),u>=3&&a.setZ(t,f[e*u+2]),u>=4&&a.setW(t,f[e*u+3]),u>=5)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a})}loadTexture(e){let t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r],a=this.textureLoader;if(i.uri){let e=n.manager.getHandler(i.uri);null!==e&&(a=e)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,t,n){let r=this,i=this.json,a=i.textures[e],s=i.images[t],u=(s.uri||s.bufferView)+":"+a.sampler;if(this.textureCache[u])return this.textureCache[u];let c=this.loadImageSource(t,n).then(function(t){t.flipY=!1,t.name=a.name||s.name||"",""===t.name&&"string"==typeof s.uri&&!1===s.uri.startsWith("data:image/")&&(t.name=s.uri);let n=(i.samplers||{})[a.sampler]||{};return t.magFilter=_8[n.magFilter]||nk,t.minFilter=_8[n.minFilter]||nF,t.wrapS=_7[n.wrapS]||nT,t.wrapT=_7[n.wrapT]||nT,r.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[u]=c,c}loadImageSource(e,t){let n=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());let i=n.images[e],a=self.URL||self.webkitURL,s=i.uri||"",u=!1;if(void 0!==i.bufferView)s=this.getDependency("bufferView",i.bufferView).then(function(e){u=!0;let t=new Blob([e],{type:i.mimeType});return s=a.createObjectURL(t)});else if(void 0===i.uri)throw Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let c=Promise.resolve(s).then(function(e){return new Promise(function(n,i){let a=n;!0===t.isImageBitmapLoader&&(a=function(e){let t=new ai(e);t.needsUpdate=!0,n(t)}),t.load(pg.resolveURL(e,r.path),a,void 0,i)})}).then(function(e){var t;return!0===u&&a.revokeObjectURL(s),xo(e,i),e.userData.mimeType=i.mimeType||((t=i.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e}).catch(function(e){throw e});return this.sourceCache[e]=c,c}assignTexture(e,t,n,r){let i=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((a=a.clone()).channel=n.texCoord),i.extensions[_R.KHR_TEXTURE_TRANSFORM]){let e=void 0!==n.extensions?n.extensions[_R.KHR_TEXTURE_TRANSFORM]:void 0;if(e){let t=i.associations.get(a);a=i.extensions[_R.KHR_TEXTURE_TRANSFORM].extendTexture(a,e),i.associations.set(a,t)}}return void 0!==r&&("number"==typeof r&&(r=3001===r?_E:_I),"colorSpace"in a?a.colorSpace=r:a.encoding=r===_E?3001:3e3),e[t]=a,a})}assignFinalMaterial(e){let t=e.geometry,n=e.material,r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){let e="PointsMaterial:"+n.uuid,t=this.cache.get(e);!t&&(t=new c8,oE.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){let e="LineBasicMaterial:"+n.uuid,t=this.cache.get(e);!t&&(t=new cJ,oE.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(r||i||a){let e="ClonedMaterial:"+n.uuid+":";r&&(e+="derivative-tangents:"),i&&(e+="vertex-colors:"),a&&(e+="flat-shading:");let t=this.cache.get(e);!t&&(t=n.clone(),i&&(t.vertexColors=!0),a&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return d_}loadMaterial(e){let t;let n=this,r=this.json,i=this.extensions,a=r.materials[e],s={},u=a.extensions||{},c=[];if(u[_R.KHR_MATERIALS_UNLIT]){let e=i[_R.KHR_MATERIALS_UNLIT];t=e.getMaterialType(),c.push(e.extendParams(s,a,n))}else{let r=a.pbrMetallicRoughness||{};if(s.color=new oA(1,1,1),s.opacity=1,Array.isArray(r.baseColorFactor)){let e=r.baseColorFactor;s.color.setRGB(e[0],e[1],e[2],_I),s.opacity=e[3]}void 0!==r.baseColorTexture&&c.push(n.assignTexture(s,"map",r.baseColorTexture,_E)),s.metalness=void 0!==r.metallicFactor?r.metallicFactor:1,s.roughness=void 0!==r.roughnessFactor?r.roughnessFactor:1,void 0!==r.metallicRoughnessTexture&&(c.push(n.assignTexture(s,"metalnessMap",r.metallicRoughnessTexture)),c.push(n.assignTexture(s,"roughnessMap",r.metallicRoughnessTexture))),t=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s)})))}!0===a.doubleSided&&(s.side=tN);let h=a.alphaMode||xi.OPAQUE;if(h===xi.BLEND?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,h===xi.MASK&&(s.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==oI&&(c.push(n.assignTexture(s,"normalMap",a.normalTexture)),s.normalScale=new ij(1,1),void 0!==a.normalTexture.scale)){let e=a.normalTexture.scale;s.normalScale.set(e,e)}if(void 0!==a.occlusionTexture&&t!==oI&&(c.push(n.assignTexture(s,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(s.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==oI){let e=a.emissiveFactor;s.emissive=new oA().setRGB(e[0],e[1],e[2],_I)}return void 0!==a.emissiveTexture&&t!==oI&&c.push(n.assignTexture(s,"emissiveMap",a.emissiveTexture,_E)),Promise.all(c).then(function(){let r=new t(s);return a.name&&(r.name=a.name),xo(r,a),n.associations.set(r,{materials:e}),a.extensions&&xa(i,r,a),r})}createUniqueName(e){let t=p$.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,n=this.extensions,r=this.primitiveCache,i=[];for(let a=0,s=e.length;a<s;a++){let s=e[a],u=function(e){let t;let n=e.extensions&&e.extensions[_R.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+xs(n.attributes):e.indices+":"+xs(e.attributes)+":"+e.mode,void 0!==e.targets)for(let n=0,r=e.targets.length;n<r;n++)t+=":"+xs(e.targets[n]);return t}(s),c=r[u];if(c)i.push(c.promise);else{let e;e=s.extensions&&s.extensions[_R.KHR_DRACO_MESH_COMPRESSION]?function(e){return n[_R.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return xh(n,e,t)})}(s):xh(new o$,s,t),r[u]={primitive:s,promise:e},i.push(e)}}return Promise.all(i)}loadMesh(e){let t=this,n=this.json,r=this.extensions,i=n.meshes[e],a=i.primitives,s=[];for(let e=0,t=a.length;e<t;e++){var u;let t=void 0===a[e].material?(void 0===(u=this.cache).DefaultMaterial&&(u.DefaultMaterial=new d_({color:0xffffff,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:tk})),u.DefaultMaterial):this.getDependency("material",a[e].material);s.push(t)}return s.push(t.loadGeometries(a)),Promise.all(s).then(function(n){let s=n.slice(0,n.length-1),u=n[n.length-1],c=[];for(let n=0,h=u.length;n<h;n++){let h;let p=u[n],f=a[n],v=s[n];if(f.mode===_6.TRIANGLES||f.mode===_6.TRIANGLE_STRIP||f.mode===_6.TRIANGLE_FAN||void 0===f.mode)!0===(h=!0===i.isSkinnedMesh?new cv(p,v):new st(p,v)).isSkinnedMesh&&h.normalizeSkinWeights(),f.mode===_6.TRIANGLE_STRIP?h.geometry=_A(h.geometry,rj):f.mode===_6.TRIANGLE_FAN&&(h.geometry=_A(h.geometry,rX));else if(f.mode===_6.LINES)h=new c6(p,v);else if(f.mode===_6.LINE_STRIP)h=new c2(p,v);else if(f.mode===_6.LINE_LOOP)h=new c9(p,v);else if(f.mode===_6.POINTS)h=new hr(p,v);else throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);Object.keys(h.geometry.morphAttributes).length>0&&!function(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){let n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}}}(h,i),h.name=t.createUniqueName(i.name||"mesh_"+e),xo(h,i),f.extensions&&xa(r,h,f),t.assignFinalMaterial(h),c.push(h)}for(let n=0,r=c.length;n<r;n++)t.associations.set(c[n],{meshes:e,primitives:n});if(1===c.length)return i.extensions&&xa(r,c[0],i),c[0];let h=new uB;i.extensions&&xa(r,h,i),t.associations.set(h,{meshes:e});for(let e=0,t=c.length;e<t;e++)h.add(c[e]);return h})}loadCamera(e){let t;let n=this.json.cameras[e],r=n[n.type];if(!!r)return"perspective"===n.type?t=new sp(iW.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new sz(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),xo(t,n),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],n=[];for(let e=0,r=t.joints.length;e<r;e++)n.push(this._loadNodeShallow(t.joints[e]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(e){let t=e.pop(),n=[],r=[];for(let i=0,a=e.length;i<a;i++){let a=e[i];if(a){n.push(a);let e=new aV;null!==t&&e.fromArray(t.array,16*i),r.push(e)}}return new cS(n,r)})}loadAnimation(e){let t=this.json,n=this,r=t.animations[e],i=r.name?r.name:"animation_"+e,a=[],s=[],u=[],c=[],h=[];for(let e=0,t=r.channels.length;e<t;e++){let t=r.channels[e],n=r.samplers[t.sampler],i=t.target,p=i.node,f=void 0!==r.parameters?r.parameters[n.input]:n.input,v=void 0!==r.parameters?r.parameters[n.output]:n.output;void 0!==i.node&&(a.push(this.getDependency("node",p)),s.push(this.getDependency("accessor",f)),u.push(this.getDependency("accessor",v)),c.push(n),h.push(i))}return Promise.all([Promise.all(a),Promise.all(s),Promise.all(u),Promise.all(c),Promise.all(h)]).then(function(e){let t=e[0],r=e[1],a=e[2],s=e[3],u=e[4],c=[];for(let e=0,i=t.length;e<i;e++){let i=t[e],h=r[e],p=a[e],f=s[e],v=u[e];if(void 0===i)continue;i.updateMatrix&&i.updateMatrix();let y=n._createAnimationTracks(i,h,p,f,v);if(y)for(let e=0;e<y.length;e++)c.push(y[e])}return new dj(i,void 0,c)})}createNodeMesh(e){let t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(e){let t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]}),t})}loadNode(e){let t=this.json,n=t.nodes[e],r=this._loadNodeShallow(e),i=[],a=n.children||[];for(let e=0,t=a.length;e<t;e++)i.push(this.getDependency("node",a[e]));let s=void 0===n.skin?Promise.resolve(null):this.getDependency("skin",n.skin);return Promise.all([r,Promise.all(i),s]).then(function(e){let t=e[0],n=e[1],r=e[2];null!==r&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(r,xu)});for(let e=0,r=n.length;e<r;e++)t.add(n[e]);return t})}_loadNodeShallow(e){let t=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];let i=t.nodes[e],a=i.name?r.createUniqueName(i.name):"",s=[],u=r._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return u&&s.push(u),void 0!==i.camera&&s.push(r.getDependency("camera",i.camera).then(function(e){return r._getNodeRef(r.cameraCache,i.camera,e)})),r._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){s.push(e)}),this.nodeCache[e]=Promise.all(s).then(function(t){let s;if((s=!0===i.isBone?new cy:t.length>1?new uB:1===t.length?t[0]:new oo)!==t[0])for(let e=0,n=t.length;e<n;e++)s.add(t[e]);if(i.name&&(s.userData.name=i.name,s.name=a),xo(s,i),i.extensions&&xa(n,s,i),void 0!==i.matrix){let e=new aV;e.fromArray(i.matrix),s.applyMatrix4(e)}else void 0!==i.translation&&s.position.fromArray(i.translation),void 0!==i.rotation&&s.quaternion.fromArray(i.rotation),void 0!==i.scale&&s.scale.fromArray(i.scale);return!r.associations.has(s)&&r.associations.set(s,{}),r.associations.get(s).nodes=e,s}),this.nodeCache[e]}loadScene(e){let t=this.extensions,n=this.json.scenes[e],r=this,i=new uB;n.name&&(i.name=r.createUniqueName(n.name)),xo(i,n),n.extensions&&xa(t,i,n);let a=n.nodes||[],s=[];for(let e=0,t=a.length;e<t;e++)s.push(r.getDependency("node",a[e]));return Promise.all(s).then(function(e){for(let t=0,n=e.length;t<n;t++)i.add(e[t]);return r.associations=(e=>{let t=new Map;for(let[e,n]of r.associations)(e instanceof oE||e instanceof ai)&&t.set(e,n);return e.traverse(e=>{let n=r.associations.get(e);null!=n&&t.set(e,n)}),t})(i),i})}_createAnimationTracks(e,t,n,r,i){let a;let s=[],u=e.name?e.name:e.uuid,c=[];switch(xn[i.path]===xn.weights?e.traverse(function(e){e.morphTargetInfluences&&c.push(e.name?e.name:e.uuid)}):c.push(u),xn[i.path]){case xn.weights:a=dU;break;case xn.rotation:a=dG;break;case xn.position:case xn.scale:a=dW;break;default:if(1===n.itemSize)a=dU;else a=dW}let h=void 0!==r.interpolation?xr[r.interpolation]:rN,p=this._getArrayFromAccessor(n);for(let e=0,n=c.length;e<n;e++){let n=new a(c[e]+"."+xn[i.path],t.array,p,h);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(n),s.push(n)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let e=xl(t.constructor),n=new Float32Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=t[r]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof dG?_4:_3)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function xh(e,t,n){let r=t.attributes,i=[];for(let t in r){let a=xt[t]||t.toLowerCase();!(a in e.attributes)&&i.push(function(t,r){return n.getDependency("accessor",t).then(function(t){e.setAttribute(r,t)})}(r[t],a))}if(void 0!==t.indices&&!e.index){let r=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});i.push(r)}return xo(e,t),!function(e,t,n){let r=t.attributes,i=new am;if(void 0===r.POSITION)return;{let e=n.json.accessors[r.POSITION],t=e.min,a=e.max;if(void 0===t||void 0===a)return;if(i.set(new ap(t[0],t[1],t[2]),new ap(a[0],a[1],a[2])),e.normalized){let t=xl(_9[e.componentType]);i.min.multiplyScalar(t),i.max.multiplyScalar(t)}}let a=t.targets;if(void 0!==a){let e=new ap,t=new ap;for(let r=0,i=a.length;r<i;r++){let i=a[r];if(void 0!==i.POSITION){let r=n.json.accessors[i.POSITION],a=r.min,s=r.max;if(void 0!==a&&void 0!==s){if(t.setX(Math.max(Math.abs(a[0]),Math.abs(s[0]))),t.setY(Math.max(Math.abs(a[1]),Math.abs(s[1]))),t.setZ(Math.max(Math.abs(a[2]),Math.abs(s[2]))),r.normalized){let e=xl(_9[r.componentType]);t.multiplyScalar(e)}e.max(t)}}}i.expandByVector(e)}e.boundingBox=i;let s=new aO;i.getCenter(s.center),s.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=s}(e,t,n),Promise.all(i).then(function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1,a=!1;for(let e=0,n=t.length;e<n;e++){let n=t[e];if(void 0!==n.POSITION&&(r=!0),void 0!==n.NORMAL&&(i=!0),void 0!==n.COLOR_0&&(a=!0),r&&i&&a)break}if(!r&&!i&&!a)return Promise.resolve(e);let s=[],u=[],c=[];for(let h=0,p=t.length;h<p;h++){let p=t[h];if(r){let t=void 0!==p.POSITION?n.getDependency("accessor",p.POSITION):e.attributes.position;s.push(t)}if(i){let t=void 0!==p.NORMAL?n.getDependency("accessor",p.NORMAL):e.attributes.normal;u.push(t)}if(a){let t=void 0!==p.COLOR_0?n.getDependency("accessor",p.COLOR_0):e.attributes.color;c.push(t)}}return Promise.all([Promise.all(s),Promise.all(u),Promise.all(c)]).then(function(t){let n=t[0],s=t[1],u=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=s),a&&(e.morphAttributes.color=u),e.morphTargetsRelative=!0,e})}(e,t.targets,n):e})}let xd=null,xp="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function xf(e=!0,t=!0,n){return r=>{n&&n(r),e&&(!xd&&(xd=new _S),xd.setDecoderPath("string"==typeof e?e:xp),r.setDRACOLoader(xd)),t&&r.setMeshoptDecoder("function"==typeof _M?_M():_M)}}let xg=(e,t,n,r)=>gz(_D,e,xf(t,n,r));function xm(e,t,n={}){let r,i,a,s,u;let c=new ap,h=new ad,p=new ap,f=new aV,v=new aV,y=new aV;n.preserveMatrix=void 0===n.preserveMatrix||n.preserveMatrix,n.preservePosition=void 0===n.preservePosition||n.preservePosition,n.preserveHipPosition=void 0!==n.preserveHipPosition&&n.preserveHipPosition,n.useTargetMatrix=void 0!==n.useTargetMatrix&&n.useTargetMatrix,n.hip=void 0!==n.hip?n.hip:"hip",n.names=n.names||{};let _=t.isObject3D?t.skeleton.bones:xy(t),x=e.isObject3D?e.skeleton.bones:xy(e);if(e.isObject3D?e.skeleton.pose():(n.useTargetMatrix=!0,n.preserveMatrix=!1),n.preservePosition){u=[];for(let e=0;e<x.length;e++)u.push(x[e].position.clone())}if(n.preserveMatrix){e.updateMatrixWorld(),e.matrixWorld.identity();for(let t=0;t<e.children.length;++t)e.children[t].updateMatrixWorld(!0)}if(n.offsets){r=[];for(let e=0;e<x.length;++e)i=x[e],a=n.names[i.name]||i.name,n.offsets[a]&&(i.matrix.multiply(n.offsets[a]),i.matrix.decompose(i.position,i.quaternion,i.scale),i.updateMatrixWorld()),r.push(i.matrixWorld.clone())}for(let t=0;t<x.length;++t){if(i=x[t],s=xv(a=n.names[i.name]||i.name,_),y.copy(i.matrixWorld),s){if(s.updateMatrixWorld(),n.useTargetMatrix?v.copy(s.matrixWorld):(v.copy(e.matrixWorld).invert(),v.multiply(s.matrixWorld)),p.setFromMatrixScale(v),v.scale(p.set(1/p.x,1/p.y,1/p.z)),y.makeRotationFromQuaternion(h.setFromRotationMatrix(v)),e.isObject3D){let t=x.indexOf(i),n=r?r[t]:f.copy(e.skeleton.boneInverses[t]).invert();y.multiply(n)}y.copyPosition(v)}i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(y)):i.matrix.copy(y),n.preserveHipPosition&&a===n.hip&&i.matrix.setPosition(c.set(0,i.position.y,0)),i.matrix.decompose(i.position,i.quaternion,i.scale),i.updateMatrixWorld()}if(n.preservePosition)for(let e=0;e<x.length;++e)i=x[e],(a=n.names[i.name]||i.name)!==n.hip&&i.position.copy(u[e]);n.preserveMatrix&&e.updateMatrixWorld(!0)}xg.preload=(e,t,n,r)=>gz.preload(_D,e,xf(t,n,r)),xg.clear=e=>gz.clear(_D,e),xg.setDecoderPath=e=>{xp=e};function xv(e,t){for(let n=0,r=xy(t);n<r.length;n++)if(e===r[n].name)return r[n]}function xy(e){return Array.isArray(e)?e:e.bones}let x_={clone:function(e){let t=new Map,n=new Map,r=e.clone();return function e(t,n,r){r(t,n);for(let i=0;i<t.children.length;i++)e(t.children[i],n.children[i],r)}(e,r,function(e,r){t.set(r,e),n.set(e,r)}),r.traverse(function(e){if(!e.isSkinnedMesh)return;let r=t.get(e),i=r.skeleton.bones;e.skeleton=r.skeleton.clone(),e.bindMatrix.copy(r.bindMatrix),e.skeleton.bones=i.map(function(e){return n.get(e)}),e.bind(e.skeleton,e.bindMatrix)}),r}},xx=fG.forwardRef(({isChild:e=!1,object:t,children:n,deep:r,castShadow:i,receiveShadow:a,inject:s,keys:u,...c},h)=>{let p={keys:u,deep:r,inject:s,castShadow:i,receiveShadow:a};if(Array.isArray(t=fG.useMemo(()=>{if(!1===e&&!Array.isArray(t)){let e=!1;if(t.traverse(t=>{t.isSkinnedMesh&&(e=!0)}),e)return x_.clone(t)}return t},[t,e])))return fG.createElement("group",m6({},c,{ref:h}),t.map(e=>fG.createElement(xx,m6({key:e.uuid,object:e},p))),n);let{children:f,...v}=function(e,{keys:t=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData","bindMode","bindMatrix","bindMatrixInverse","skeleton"],deep:n,inject:r,castShadow:i,receiveShadow:a}){let s={};for(let n of t)s[n]=e[n];return n&&(s.geometry&&"materialsOnly"!==n&&(s.geometry=s.geometry.clone()),s.material&&"geometriesOnly"!==n&&(s.material=s.material.clone())),r&&(s="function"==typeof r?{...s,children:r(e)}:fG.isValidElement(r)?{...s,children:r}:{...s,...r}),e instanceof st&&(i&&(s.castShadow=!0),a&&(s.receiveShadow=!0)),s}(t,p),y=t.type[0].toLowerCase()+t.type.slice(1);return fG.createElement(y,m6({},v,c,{ref:h}),t.children.map(e=>"Bone"===e.type?fG.createElement("primitive",m6({key:e.uuid,object:e},p)):fG.createElement(xx,m6({key:e.uuid,object:e},p,{isChild:!0}))),n,f)}),xb=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],xS=1234567;function xw(){let e=0xffffffff*Math.random()|0,t=0xffffffff*Math.random()|0,n=0xffffffff*Math.random()|0,r=0xffffffff*Math.random()|0;return(xb[255&e]+xb[e>>8&255]+xb[e>>16&255]+xb[e>>24&255]+"-"+xb[255&t]+xb[t>>8&255]+"-"+xb[t>>16&15|64]+xb[t>>24&255]+"-"+xb[63&n|128]+xb[n>>8&255]+"-"+xb[n>>16&255]+xb[n>>24&255]+xb[255&r]+xb[r>>8&255]+xb[r>>16&255]+xb[r>>24&255]).toLowerCase()}let xM=e=>{let t;let n=new Set,r=(e,r)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e))},s=t=e(r,i,a);return a},xA=e=>e?xM(e):xM,xC=e=>e,xT=e=>{let t=xA(e),n=e=>(function(e,t=xC){let n=fG.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return fG.useDebugValue(n),n})(t,e);return Object.assign(n,t),n},xE=e=>e?xT(e):xT,xI=new Map,xD=e=>{let t=xI.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([e,t])=>[e,t.getState()])):{}},xP=(e,t,n)=>{if(void 0===e)return{type:"untracked",connection:t.connect(n)};let r=xI.get(n.name);if(r)return{type:"tracked",store:e,...r};let i={connection:t.connect(n),stores:{}};return xI.set(n.name,i),{type:"tracked",store:e,...i}},xR=(e,t={})=>(n,r,i)=>{let a;let{enabled:s,anonymousActionType:u,store:c,...h}=t;try{a=(null==s||s)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(e){}if(!a)return e(n,r,i);let{connection:p,...f}=xP(c,a,h),v=!0;i.setState=(e,t,a)=>{let s=n(e,t);if(!v)return s;let f=void 0===a?{type:u||"anonymous"}:"string"==typeof a?{type:a}:a;return void 0===c?(null==p||p.send(f,r()),s):(null==p||p.send({...f,type:`${c}/${f.type}`},{...xD(h.name),[c]:i.getState()}),s)};let y=(...e)=>{let t=v;v=!1,n(...e),v=t},_=e(i.setState,r,i);if("untracked"===f.type?null==p||p.init(_):(f.stores[f.store]=i,null==p||p.init(Object.fromEntries(Object.entries(f.stores).map(([e,t])=>[e,e===f.store?_:t.getState()])))),i.dispatchFromDevtools&&"function"==typeof i.dispatch){let e=!1,t=i.dispatch;i.dispatch=(...n)=>{"__setState"===n[0].type&&!e&&(e=!0),t(...n)}}return p.subscribe(e=>{var t;switch(e.type){case"ACTION":if("string"!=typeof e.payload)return;return xL(e.payload,e=>{if("__setState"===e.type){if(void 0===c){y(e.state);return}Object.keys(e.state).length;let t=e.state[c];if(null==t)return;JSON.stringify(i.getState())!==JSON.stringify(t)&&y(t);return}if(!!i.dispatchFromDevtools)"function"==typeof i.dispatch&&i.dispatch(e)});case"DISPATCH":switch(e.payload.type){case"RESET":if(y(_),void 0===c)return null==p?void 0:p.init(i.getState());return null==p?void 0:p.init(xD(h.name));case"COMMIT":if(void 0===c){null==p||p.init(i.getState());break}return null==p?void 0:p.init(xD(h.name));case"ROLLBACK":return xL(e.state,e=>{if(void 0===c){y(e),null==p||p.init(i.getState());return}y(e[c]),null==p||p.init(xD(h.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return xL(e.state,e=>{if(void 0===c){y(e);return}JSON.stringify(i.getState())!==JSON.stringify(e[c])&&y(e[c])});case"IMPORT_STATE":{let{nextLiftedState:n}=e.payload,r=null==(t=n.computedStates.slice(-1)[0])?void 0:t.state;if(!r)return;void 0===c?y(r):y(r[c]),null==p||p.send(null,n);break}case"PAUSE_RECORDING":return v=!v}return}}),_},xL=(e,t)=>{let n;try{n=JSON.parse(e)}catch(e){}void 0!==n&&t(n)},xO=xE()(xR(e=>({focused:null,setFocused:t=>e({focused:t})}))),xk=(0,tS.jsx)("meshStandardMaterial",{color:"#404040",roughness:.7,metalness:.2,transparent:!0,opacity:.25,depthWrite:!1}),xB=e=>{let{data:t}=e,{scene:n}=xg(__(t.model)),{focused:r,setFocused:i}=xO(),a=(0,fG.useMemo)(()=>xw(),[]),s=(0,fG.useMemo)(()=>a===(null==r?void 0:r.objectName),[r,a]),u=(0,fG.useCallback)(()=>{i(s?null:{objectName:a})},[s,a,i]);return(0,tS.jsx)(xx,{name:a,userData:t.metadata,object:n,position:t.position,castShadow:!0,receiveShadow:!0,onPointerDown:u,inject:r&&!s&&xk})},xN=y2({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }"),xF=fG.createContext(null),xz=y2({color:new oA,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${y3>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),xU=fG.forwardRef(({children:e,temporal:t,frames:n=40,limit:r=1/0,blend:i=20,scale:a=10,opacity:s=1,alphaTest:u=.75,color:c="black",colorBlend:h=2,resolution:p=1024,toneMapped:f=!0,...v},y)=>{f5({SoftShadowMaterial:xz});let _=gk(e=>e.gl),x=gk(e=>e.scene),b=gk(e=>e.camera),S=gk(e=>e.invalidate),w=fG.useRef(null),M=fG.useRef(null),[A]=fG.useState(()=>new xG(_,x,p));fG.useLayoutEffect(()=>{A.configure(w.current)},[]);let C=fG.useMemo(()=>({lights:new Map,temporal:!!t,frames:Math.max(2,n),blend:Math.max(2,n===1/0?i:n),count:0,getMesh:()=>w.current,reset:()=>{A.clear();let e=w.current.material;e.opacity=0,e.alphaTest=0,C.count=0},update:(e=1)=>{let t=w.current.material;C.temporal?(t.opacity=Math.min(s,t.opacity+s/C.blend),t.alphaTest=Math.min(u,t.alphaTest+u/C.blend)):(t.opacity=s,t.alphaTest=u),M.current.visible=!0,A.prepare();for(let t=0;t<e;t++)C.lights.forEach(e=>e.update()),A.update(b,C.blend);M.current.visible=!1,A.finish()}}),[A,b,x,t,n,i,s,u]);return fG.useLayoutEffect(()=>{C.reset(),!C.temporal&&C.frames!==1/0&&C.update(C.blend)}),fG.useImperativeHandle(y,()=>C,[C]),gB(()=>{(C.temporal||C.frames===1/0)&&C.count<C.frames&&C.count<r&&(S(),C.update(),C.count++)}),fG.createElement("group",v,fG.createElement("group",{traverse:()=>null,ref:M},fG.createElement(xF.Provider,{value:C},e)),fG.createElement("mesh",{receiveShadow:!0,ref:w,scale:a,rotation:[-Math.PI/2,0,0]},fG.createElement("planeGeometry",null),fG.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:f,color:c,blend:h,map:A.progressiveLightMap2.texture})))}),xH=fG.forwardRef(({castShadow:e=!0,bias:t=.001,mapSize:n=512,size:r=5,near:i=.5,far:a=500,frames:s=1,position:u=[0,0,0],radius:c=1,amount:h=8,intensity:p=y3>=155?Math.PI:1,ambient:f=.5,...v},y)=>{let _=fG.useRef(null),x=new ap(...u).length(),b=fG.useContext(xF),S=fG.useCallback(()=>{let e;if(_.current)for(let t=0;t<_.current.children.length;t++)if(e=_.current.children[t],Math.random()>f)e.position.set(u[0]+iW.randFloatSpread(c),u[1]+iW.randFloatSpread(c),u[2]+iW.randFloatSpread(c));else{let t=Math.acos(2*Math.random()-1)-Math.PI/2,n=2*Math.PI*Math.random();e.position.set(Math.cos(t)*Math.cos(n)*x,Math.abs(Math.cos(t)*Math.sin(n)*x),Math.sin(t)*x)}},[c,f,x,...u]),w=fG.useMemo(()=>({update:S}),[S]);return fG.useImperativeHandle(y,()=>w,[w]),fG.useLayoutEffect(()=>{var e;let t=_.current;return b&&(null==(e=b.lights)||e.set(t.uuid,w)),()=>{var e;null==b||null==(e=b.lights)||e.delete(t.uuid)}},[b,w]),fG.createElement("group",m6({ref:_},v),Array.from({length:h},(s,u)=>fG.createElement("directionalLight",{key:u,castShadow:e,"shadow-bias":t,"shadow-mapSize":[n,n],intensity:p/h},fG.createElement("orthographicCamera",{attach:"shadow-camera",args:[-r,r,r,-r,i,a]}))))});class xG{constructor(e,t,n=1024){this.renderer=e,this.res=n,this.scene=t,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new oA,this.clearAlpha=0;let r={type:nY,magFilter:nD,minFilter:nD};this.progressiveLightMap1=new as(this.res,this.res,r),this.progressiveLightMap2=new as(this.res,this.res,r),this.discardMat=new xN,this.targetMat=new dM({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=e=>{e.vertexShader="varying vec2 vUv;\n"+e.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";let t=e.fragmentShader.indexOf("void main() {");e.fragmentShader="varying vec2 vUv;\n"+e.fragmentShader.slice(0,t)+"uniform sampler2D previousShadowMap;\n	uniform float averagingWindow;\n"+e.fragmentShader.slice(t-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,e.uniforms.previousShadowMap=this.previousShadowMap,e.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(e=>{if(!e.geometry){if(e.isLight)this.lights.push({object:e,intensity:e.intensity})}else this.meshes.push({object:e,material:e.material})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,t=100){if(!this.object)return;this.averagingWindow.value=t,this.object.material=this.targetMat;let n=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,r=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,i=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(n),this.previousShadowMap.value=r.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=i}}let xV=()=>(0,tS.jsx)(xU,{...m4.props.shadow,children:(0,tS.jsx)(xH,{...m4.props.light})}),xW=e=>{let{data:t}=e,n=(0,fG.useMemo)(()=>null==t?void 0:t.models.map((e,t)=>(0,tS.jsx)(xB,{data:e},t)),[t]);return(0,tS.jsxs)("group",{children:[n,(0,tS.jsx)(xV,{})]})};n("9168"),n("845");let xj=new ap,xX=new ap,xY=new ap,xJ=new ij;function xZ(e,t,n){let r=xj.setFromMatrixPosition(e.matrixWorld);r.project(t);let i=n.width/2,a=n.height/2;return[r.x*i+i,-(r.y*a)+a]}let xq=e=>1e-10>Math.abs(e)?0:e;function xK(e,t,n=""){let r="matrix3d(";for(let n=0;16!==n;n++)r+=xq(t[n]*e.elements[n])+(15!==n?",":")");return n+r}let xQ=(H=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>xK(e,H));let x$=(G=e=>[1/e,1/e,1/e,1,-1/e,-1/e,-1/e,-1,1/e,1/e,1/e,1,1,1,1,1],(e,t)=>xK(e,G(t),"translate(-50%,-50%)")),x0=fG.forwardRef(({children:e,eps:t=.001,style:n,className:r,prepend:i,center:a,fullscreen:s,portal:u,distanceFactor:c,sprite:h=!1,transform:p=!1,occlude:f,onOcclude:v,castShadow:y,receiveShadow:_,material:x,geometry:b,zIndexRange:S=[0x1000037,0],calculatePosition:w=xZ,as:M="div",wrapperClass:A,pointerEvents:C="auto",...T},I)=>{let{gl:D,camera:P,scene:R,size:L,raycaster:O,events:k,viewport:B}=gk(),[N]=fG.useState(()=>document.createElement(M)),F=fG.useRef(),z=fG.useRef(null),U=fG.useRef(0),H=fG.useRef([0,0]),G=fG.useRef(null),V=fG.useRef(null),W=(null==u?void 0:u.current)||k.connected||D.domElement.parentNode,j=fG.useRef(null),X=fG.useRef(!1),Y=fG.useMemo(()=>f&&"blending"!==f||Array.isArray(f)&&f.length&&function(e){return e&&"object"==typeof e&&"current"in e}(f[0]),[f]);fG.useLayoutEffect(()=>{let e=D.domElement;f&&"blending"===f?(e.style.zIndex=`${Math.floor(S[0]/2)}`,e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)},[f]),fG.useLayoutEffect(()=>{if(z.current){let e=F.current=tw.createRoot(N);if(R.updateMatrixWorld(),p)N.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{let e=w(z.current,P,L);N.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${e[0]}px,${e[1]}px,0);transform-origin:0 0;`}return W&&(i?W.prepend(N):W.appendChild(N)),()=>{W&&W.removeChild(N),e.unmount()}}},[W,p]),fG.useLayoutEffect(()=>{A&&(N.className=A)},[A]);let J=fG.useMemo(()=>p?{position:"absolute",top:0,left:0,width:L.width,height:L.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:a?"translate3d(-50%,-50%,0)":"none",...s&&{top:-L.height/2,left:-L.width/2,width:L.width,height:L.height},...n},[n,a,s,L,p]),Z=fG.useMemo(()=>({position:"absolute",pointerEvents:C}),[C]);fG.useLayoutEffect(()=>{var t,i;X.current=!1,p?null==(t=F.current)||t.render(fG.createElement("div",{ref:G,style:J},fG.createElement("div",{ref:V,style:Z},fG.createElement("div",{ref:I,className:r,style:n,children:e})))):null==(i=F.current)||i.render(fG.createElement("div",{ref:I,style:J,className:r,children:e}))});let q=fG.useRef(!0);gB(e=>{if(z.current){P.updateMatrixWorld(),z.current.updateWorldMatrix(!0,!1);let e=p?H.current:w(z.current,P,L);if(p||Math.abs(U.current-P.zoom)>t||Math.abs(H.current[0]-e[0])>t||Math.abs(H.current[1]-e[1])>t){let t=function(e,t){let n=xj.setFromMatrixPosition(e.matrixWorld),r=xX.setFromMatrixPosition(t.matrixWorld),i=n.sub(r),a=t.getWorldDirection(xY);return i.angleTo(a)>Math.PI/2}(z.current,P),n=!1;Y&&(Array.isArray(f)?n=f.map(e=>e.current):"blending"!==f&&(n=[R]));let r=q.current;if(n){let e=function(e,t,n,r){let i=xj.setFromMatrixPosition(e.matrixWorld),a=i.clone();a.project(t),xJ.set(a.x,a.y),n.setFromCamera(xJ,t);let s=n.intersectObjects(r,!0);if(s.length){let e=s[0].distance;return i.distanceTo(n.ray.origin)<e}return!0}(z.current,P,O,n);q.current=e&&!t}else q.current=!t;r!==q.current&&(v?v(!q.current):N.style.display=q.current?"block":"none");let i=Math.floor(S[0]/2),a=f?Y?[S[0],i]:[i-1,0]:S;if(N.style.zIndex=`${function(e,t,n){if(t instanceof sp||t instanceof sz){let r=xj.setFromMatrixPosition(e.matrixWorld),i=xX.setFromMatrixPosition(t.matrixWorld),a=r.distanceTo(i),s=(n[1]-n[0])/(t.far-t.near),u=n[1]-s*t.far;return Math.round(s*a+u)}}(z.current,P,a)}`,p){let[e,t]=[L.width/2,L.height/2],n=P.projectionMatrix.elements[5]*t,{isOrthographicCamera:r,top:i,left:a,bottom:s,right:u}=P,p=xQ(P.matrixWorldInverse),f=r?`scale(${n})translate(${xq(-(u+a)/2)}px,${xq((i+s)/2)}px)`:`translateZ(${n}px)`,v=z.current.matrixWorld;h&&((v=P.matrixWorldInverse.clone().transpose().copyPosition(v).scale(z.current.scale)).elements[3]=v.elements[7]=v.elements[11]=0,v.elements[15]=1),N.style.width=L.width+"px",N.style.height=L.height+"px",N.style.perspective=r?"":`${n}px`,G.current&&V.current&&(G.current.style.transform=`${f}${p}translate(${e}px,${t}px)`,V.current.style.transform=x$(v,1/((c||10)/400)))}else{let t=void 0===c?1:function(e,t){if(t instanceof sz)return t.zoom;if(!(t instanceof sp))return 1;{let n=xj.setFromMatrixPosition(e.matrixWorld),r=xX.setFromMatrixPosition(t.matrixWorld),i=t.fov*Math.PI/180;return 1/(2*Math.tan(i/2)*n.distanceTo(r))}}(z.current,P)*c;N.style.transform=`translate3d(${e[0]}px,${e[1]}px,0) scale(${t})`}H.current=e,U.current=P.zoom}}if(!Y&&j.current&&!X.current){if(p){if(G.current){let e=G.current.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){let{isOrthographicCamera:t}=P;if(t||b)T.scale&&(Array.isArray(T.scale)?T.scale instanceof ap?j.current.scale.copy(T.scale.clone().divideScalar(1)):j.current.scale.set(1/T.scale[0],1/T.scale[1],1/T.scale[2]):j.current.scale.setScalar(1/T.scale));else{let t=(c||10)/400,n=e.clientWidth*t,r=e.clientHeight*t;j.current.scale.set(n,r,1)}X.current=!0}}}else{let t=N.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){let e=1/B.factor,n=t.clientWidth*e,r=t.clientHeight*e;j.current.scale.set(n,r,1),X.current=!0}j.current.lookAt(e.camera.position)}}});let K=fG.useMemo(()=>({vertexShader:p?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[p]);return fG.createElement("group",m6({},T,{ref:z}),f&&!Y&&fG.createElement("mesh",{castShadow:y,receiveShadow:_,ref:j},b||fG.createElement("planeGeometry",null),x||fG.createElement("shaderMaterial",{side:tN,vertexShader:K.vertexShader,fragmentShader:K.fragmentShader})))}),x1=xE()(xR(e=>({fullscreenId:null,isFullscreen:!1,setFullscreen:(t,n)=>{e(e=>e.fullscreenId!==t&&e.isFullscreen?e:{fullscreenId:t,isFullscreen:n})}})));var x2=Symbol.for("preact-signals");function x3(){if(x6>1)x6--;else{for(var e,t=!1;void 0!==x4;){var n=x4;for(x4=void 0,x9++;void 0!==n;){var r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&bn(n))try{n.c()}catch(n){!t&&(e=n,t=!0)}n=r}}if(x9=0,x6--,t)throw e}}var x5=void 0,x4=void 0,x6=0,x9=0,x8=0;function x7(e){if(void 0!==x5){var t=e.n;if(void 0===t||t.t!==x5)return t={i:0,S:e,p:x5.s,n:void 0,t:x5,e:void 0,x:void 0,r:t},void 0!==x5.s&&(x5.s.n=t),x5.s=t,e.n=t,32&x5.f&&e.S(t),t;if(-1===t.i)return t.i=0,void 0!==t.n&&(t.n.p=t.p,void 0!==t.p&&(t.p.n=t.n),t.p=x5.s,t.n=void 0,x5.s.n=t,x5.s=t),t}}function be(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}function bt(e){return new be(e)}function bn(e){for(var t=e.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function br(e){for(var t=e.s;void 0!==t;t=t.n){var n=t.S.n;if(void 0!==n&&(t.r=n),t.S.n=t,t.i=-1,void 0===t.n){e.s=t;break}}}function bi(e){for(var t=e.s,n=void 0;void 0!==t;){var r=t.p;-1===t.i?(t.S.U(t),void 0!==r&&(r.n=t.n),void 0!==t.n&&(t.n.p=r)):n=t,t.S.n=t.r,void 0!==t.r&&(t.r=void 0),t=r}e.s=n}function ba(e){be.call(this,void 0),this.x=e,this.s=void 0,this.g=x8-1,this.f=4}be.prototype.brand=x2,be.prototype.h=function(){return!0},be.prototype.S=function(e){this.t!==e&&void 0===e.e&&(e.x=this.t,void 0!==this.t&&(this.t.e=e),this.t=e)},be.prototype.U=function(e){if(void 0!==this.t){var t=e.e,n=e.x;void 0!==t&&(t.x=n,e.e=void 0),void 0!==n&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n)}},be.prototype.subscribe=function(e){var t=this;return function(e){var t=new bu(e);try{t.c()}catch(e){throw t.d(),e}return t.d.bind(t)}(function(){var n=t.value,r=x5;x5=void 0;try{e(n)}finally{x5=r}})},be.prototype.valueOf=function(){return this.value},be.prototype.toString=function(){return this.value+""},be.prototype.toJSON=function(){return this.value},be.prototype.peek=function(){var e=x5;x5=void 0;try{return this.value}finally{x5=e}},Object.defineProperty(be.prototype,"value",{get:function(){var e=x7(this);return void 0!==e&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){if(x9>100)throw Error("Cycle detected");this.v=e,this.i++,x8++,x6++;try{for(var t=this.t;void 0!==t;t=t.x)t.t.N()}finally{x3()}}}}),(ba.prototype=new be).h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f))return!0;if(this.f&=-5,this.g===x8)return!0;if(this.g=x8,this.f|=1,this.i>0&&!bn(this))return this.f&=-2,!0;var e=x5;try{br(this),x5=this;var t=this.x();(16&this.f||this.v!==t||0===this.i)&&(this.v=t,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return x5=e,bi(this),this.f&=-2,!0},ba.prototype.S=function(e){if(void 0===this.t){this.f|=36;for(var t=this.s;void 0!==t;t=t.n)t.S.S(t)}be.prototype.S.call(this,e)},ba.prototype.U=function(e){if(void 0!==this.t&&(be.prototype.U.call(this,e),void 0===this.t)){this.f&=-33;for(var t=this.s;void 0!==t;t=t.n)t.S.U(t)}},ba.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;void 0!==e;e=e.x)e.t.N()}},Object.defineProperty(ba.prototype,"value",{get:function(){if(1&this.f)throw Error("Cycle detected");var e=x7(this);if(this.h(),void 0!==e&&(e.i=this.i),16&this.f)throw this.v;return this.v}});function bo(e){var t=e.u;if(e.u=void 0,"function"==typeof t){x6++;var n=x5;x5=void 0;try{t()}catch(t){throw e.f&=-2,e.f|=8,bs(e),t}finally{x5=n,x3()}}}function bs(e){for(var t=e.s;void 0!==t;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,bo(e)}function bl(e){if(x5!==this)throw Error("Out-of-order effect");bi(this),x5=e,this.f&=-2,8&this.f&&bs(this),x3()}function bu(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}bu.prototype.c=function(){var e=this.S();try{if(8&this.f||void 0===this.x)return;var t=this.x();"function"==typeof t&&(this.u=t)}finally{e()}},bu.prototype.S=function(){if(1&this.f)throw Error("Cycle detected");this.f|=1,this.f&=-9,bo(this),br(this),x6++;var e=x5;return x5=this,bl.bind(this,e)},bu.prototype.N=function(){!(2&this.f)&&(this.f|=2,this.o=x4,x4=this)},bu.prototype.d=function(){this.f|=8,!(1&this.f)&&bs(this)};function bc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function bh(e,t){if(e){if("string"==typeof e)return bc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bc(e,t)}}function bd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],s=!0,u=!1;try{for(i=i.call(e);!(s=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(e){u=!0,r=e}finally{try{!s&&null!=i.return&&i.return()}finally{if(u)throw r}}return a}}(e,t)||bh(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bp(e){return function(e){if(Array.isArray(e))return bc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bh(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bf(e,t,n){return _isNativeReflectConstruct()?bf=Reflect.construct:bf=function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(i,n.prototype),i},bf.apply(null,arguments)}function bg(e){var t=bd(e[0],2),n=t[0],r=t[1],i=bd(e[1],2),a=i[0],s=i[1],u=bd(e[2],2);return determinant3(n,r,1,a,s,1,u[0],u[1],1)}function bm(e){return 0===bg(e)}var bv=new ij,by=new ij;function b_(e,t){if(e.x===t.x)return void 0!==e.z&&e.y===t.y?e.z-t.z:e.y-t.y;return e.x-t.x}function bx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function bS(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function bw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var bM=function e(t,n,r){var i=this;bS(this,e),bx(this,"dot2",function(e,t){return i.x*e+i.y*t}),bx(this,"dot3",function(e,t,n){return i.x*e+i.y*t+i.z*n}),this.x=t,this.y=n,this.z=r},bA=[new bM(1,1,0),new bM(-1,1,0),new bM(1,-1,0),new bM(-1,-1,0),new bM(1,0,1),new bM(-1,0,1),new bM(1,0,-1),new bM(-1,0,-1),new bM(0,1,1),new bM(0,-1,1),new bM(0,1,-1),new bM(0,-1,-1)],bC=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],bT=Array(512),bE=Array(512);!function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(var t,n=0;n<256;n++)t=1&n?bC[n]^255&e:bC[n]^e>>8&255,bT[n]=bT[n+256]=t,bE[n]=bE[n+256]=bA[t%12]}(0);function bI(e){var t=function(e){if("number"==typeof e)e=Math.abs(e);else if("string"==typeof e){var t=e;e=0;for(var n=0;n<t.length;n++)e=(e+(n+1)*(t.charCodeAt(n)%96))%0x7fffffff}return 0===e&&(e=311),e}(e);return function(){var e=48271*t%0x7fffffff;return t=e,e/0x7fffffff}}var bD=new function e(t){var n=this;bS(this,e),bx(this,"seed",0),bx(this,"init",function(e){n.seed=e,n.value=bI(e)}),bx(this,"value",bI(this.seed)),this.init(t)}(Math.random()),bP=null,bR=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)};function bL(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.25,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:bR,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:.001,c="velocity_"+t;if(void 0===e.__damp&&(e.__damp={}),void 0===e.__damp[c]&&(e.__damp[c]=0),Math.abs(e[t]-n)<=u)return e[t]=n,!1;var h=2/(r=Math.max(1e-4,r)),p=s(h*i),f=e[t]-n,v=n,y=a*r;f=Math.min(Math.max(f,-y),y),n=e[t]-f;var _=(e.__damp[c]+h*f)*i;e.__damp[c]=(e.__damp[c]-h*_)*p;var x=n+(f+_)*p;return v-e[t]>0==x>v&&(x=v,e.__damp[c]=(x-v)/i),e[t]=x,!0}var bO=new ap,bk=new ad,bB=new ad,bN=new aV,bF=new ap;function bz(e,t,n,r,i,a,s,u){var c,h,p,f,v;return bL(e,t,e[t]+(c=e[t],(v=(f=(h=n-c)-Math.floor(h/(p=2*Math.PI))*p,Math.max(0,Math.min(p,f))))>Math.PI&&(v-=2*Math.PI),v),r,i,a,s,u)}var bU=new ij,bH=new ap;function bG(e,t,n,r,i,a,s){return"number"==typeof t?bH.setScalar(t):Array.isArray(t)?bH.set(t[0],t[1],t[2]):bH.copy(t),eu=bL(e,"x",bH.x,n,r,i,a,s),ec=bL(e,"y",bH.y,n,r,i,a,s),eh=bL(e,"z",bH.z,n,r,i,a,s),eu||ec||eh}var bV=new aa,bW=new a$,bj=new oA,bX=new ad,bY=new aa,bJ=new aa,bZ=new aa;function bq(e,t,n,r,i,a,s){Array.isArray(t)?bX.set(t[0],t[1],t[2],t[3]):bX.copy(t);var u=e.dot(bX)>0?1:-1;return bX.x*=u,bX.y*=u,bX.z*=u,bX.w*=u,eS=bL(e,"x",bX.x,n,r,i,a,s),ew=bL(e,"y",bX.y,n,r,i,a,s),eM=bL(e,"z",bX.z,n,r,i,a,s),eA=bL(e,"w",bX.w,n,r,i,a,s),bY.set(e.x,e.y,e.z,e.w).normalize(),bJ.set(e.__damp.velocity_x,e.__damp.velocity_y,e.__damp.velocity_z,e.__damp.velocity_w),bZ.copy(bY).multiplyScalar(bJ.dot(bY)/bY.dot(bY)),e.__damp.velocity_x-=bZ.x,e.__damp.velocity_y-=bZ.y,e.__damp.velocity_z-=bZ.z,e.__damp.velocity_w-=bZ.w,e.set(bY.x,bY.y,bY.z,bY.w),eS||ew||eM||eA}var bK=new fr,bQ=new aV,b$=new ap,b0=new ad,b1=new ap,b2=Object.freeze({__proto__:null,rsqw:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/(2*Math.PI);return n/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},exp:bR,linear:function(e){return e},sine:{in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},quint:{in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},circ:{in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},quart:{in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},expo:{in:function(e){return 0===e?0:Math.pow(2,10*e-10)},out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},inOut:function(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}},damp:bL,dampLookAt:function(e,t,n,r,i,a,s){"number"==typeof t?bO.setScalar(t):Array.isArray(t)?bO.set(t[0],t[1],t[2]):bO.copy(t);var u,c,h=e.parent;if(e.updateWorldMatrix(!0,!1),bF.setFromMatrixPosition(e.matrixWorld),(u=e)&&u.isCamera||(c=e)&&c.isLight)bN.lookAt(bF,bO,e.up);else bN.lookAt(bO,bF,e.up);bq(e.quaternion,bB.setFromRotationMatrix(bN),n,r,i,a,s),h&&(bN.extractRotation(h.matrixWorld),bk.setFromRotationMatrix(bN),bq(e.quaternion,bB.copy(e.quaternion).premultiply(bk.invert()),n,r,i,a,s))},dampAngle:bz,damp2:function(e,t,n,r,i,a,s){return"number"==typeof t?bU.setScalar(t):Array.isArray(t)?bU.set(t[0],t[1]):bU.copy(t),es=bL(e,"x",bU.x,n,r,i,a,s),el=bL(e,"y",bU.y,n,r,i,a,s),es||el},damp3:bG,damp4:function(e,t,n,r,i,a,s){return"number"==typeof t?bV.setScalar(t):Array.isArray(t)?bV.set(t[0],t[1],t[2],t[3]):bV.copy(t),ed=bL(e,"x",bV.x,n,r,i,a,s),ep=bL(e,"y",bV.y,n,r,i,a,s),ef=bL(e,"z",bV.z,n,r,i,a,s),eg=bL(e,"w",bV.w,n,r,i,a,s),ed||ep||ef||eg},dampE:function(e,t,n,r,i,a,s){return Array.isArray(t)?bW.set(t[0],t[1],t[2],t[3]):bW.copy(t),em=bz(e,"x",bW.x,n,r,i,a,s),ev=bz(e,"y",bW.y,n,r,i,a,s),ey=bz(e,"z",bW.z,n,r,i,a,s),em||ev||ey},dampC:function(e,t,n,r,i,a,s){return t instanceof oA?bj.copy(t):Array.isArray(t)?bj.setRGB(t[0],t[1],t[2]):bj.set(t),e_=bL(e,"r",bj.r,n,r,i,a,s),ex=bL(e,"g",bj.g,n,r,i,a,s),eb=bL(e,"b",bj.b,n,r,i,a,s),e_||ex||eb},dampQ:bq,dampS:function(e,t,n,r,i,a,s){return Array.isArray(t)?bK.set(t[0],t[1],t[2]):bK.copy(t),eC=bL(e,"radius",bK.radius,n,r,i,a,s),eT=bz(e,"phi",bK.phi,n,r,i,a,s),eE=bz(e,"theta",bK.theta,n,r,i,a,s),eC||eT||eE},dampM:function(e,t,n,r,i,a,s){return void 0===e.__damp&&(e.__damp={position:new ap,rotation:new ad,scale:new ap},e.decompose(e.__damp.position,e.__damp.rotation,e.__damp.scale)),Array.isArray(t)?bQ.set.apply(bQ,bp(t)):bQ.copy(t),bQ.decompose(b$,b0,b1),eI=bG(e.__damp.position,b$,n,r,i,a,s),eD=bq(e.__damp.rotation,b0,n,r,i,a,s),eP=bG(e.__damp.scale,b1,n,r,i,a,s),e.compose(e.__damp.position,e.__damp.rotation,e.__damp.scale),eI||eD||eP}});function b3(e,t){return(b3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b5(e){return(b5=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b4(e){var t=Math.sqrt(e.x*e.x+e.z*e.z+e.y*e.y);return{r:t,phi:Math.acos(e.y/t),theta:Math.atan2(e.z,e.x)}}let b6=e=>e.map(e=>e/180*Math.PI),b9=(0,fG.forwardRef)((e,t)=>{let{children:n,scale:r=0,position:i=[0,0,0],rotation:a=[0,0,0],onCustom:s,customSmooth:u=.2}=e,c=(0,fG.useRef)(null),h=(0,fG.useMemo)(()=>new be({scale:null,position:null,rotation:null,alpha:0,delta:0}),[]);return(0,fG.useImperativeHandle)(t,()=>({setScale:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)h.value.scale=e;else{var n;h.value.scale=null,null===(n=c.current)||void 0===n||n.scale.setScalar(e)}},setPosition:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)h.value.position=e;else{var n;h.value.position=null,null===(n=c.current)||void 0===n||n.position.fromArray(e)}},setRotation:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)h.value.rotation=b6(e);else{var n;h.value.rotation=null,null===(n=c.current)||void 0===n||n.rotation.fromArray([...b6(e),"XYZ"])}},setCustom:e=>{h.value.delta=e},stop:()=>{h.value.scale=null,h.value.position=null}})),gB((e,t)=>{c.current&&(h.value.scale&&b2.damp3(c.current.scale,h.value.scale,.2,t),h.value.position&&b2.damp3(c.current.position,h.value.position,.15,t),h.value.rotation&&b2.dampE(c.current.rotation,h.value.rotation,.4,t),s&&(b2.damp(h.value,"alpha",h.value.delta,u,t),s(h.value.alpha)))}),(0,tS.jsx)("group",{ref:c,scale:r,position:i,rotation:[...b6(a),"XYZ"],children:n})});b9.displayName="TransformableGroup";function b8(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent))}function b7(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function Se(e){let t=null;return()=>(null==t&&(t=e()),t)}let St=Se(function(){return b7(/^Mac/i)}),Sn=Se(function(){return b7(/^iPhone/i)}),Sr=Se(function(){return b7(/^iPad/i)||St()&&navigator.maxTouchPoints>1}),Si=Se(function(){return Sn()||Sr()});Se(function(){return St()||Si()}),Se(function(){return b8(/AppleWebKit/i)&&!Sa()});let Sa=Se(function(){return b8(/Chrome/i)}),So=Se(function(){return b8(/Android/i)});Se(function(){return b8(/Firefox/i)});let Ss=e=>{var t;return null!==(t=null==e?void 0:e.ownerDocument)&&void 0!==t?t:document},Sl=e=>e&&"window"in e&&e.window===e?e:Ss(e).defaultView||window,Su=null,Sc=new Set,Sh=new Map,Sd=!1,Sp=!1,Sf={Tab:!0,Escape:!0};function Sg(e,t){for(let n of Sc)n(e,t)}function Sm(e){var t;if(Sd=!0,!((t=e).metaKey||!St()&&t.altKey||t.ctrlKey||"Control"===t.key||"Shift"===t.key||"Meta"===t.key))Su="keyboard",Sg("keyboard",e)}function Sv(e){Su="pointer",("mousedown"===e.type||"pointerdown"===e.type)&&(Sd=!0,Sg("pointer",e))}function Sy(e){var t;if(0===(t=e).mozInputSource&&t.isTrusted||(So()&&t.pointerType?"click"===t.type&&1===t.buttons:0===t.detail&&!t.pointerType))Sd=!0,Su="virtual"}function S_(e){e.target!==window&&e.target!==document&&(!Sd&&!Sp&&(Su="virtual",Sg("virtual",e)),Sd=!1,Sp=!1)}function Sx(){Sd=!1,Sp=!0}function Sb(e){if("undefined"==typeof window||Sh.get(Sl(e)))return;let t=Sl(e),n=Ss(e),r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){Sd=!0,r.apply(this,arguments)},n.addEventListener("keydown",Sm,!0),n.addEventListener("keyup",Sm,!0),n.addEventListener("click",Sy,!0),t.addEventListener("focus",S_,!0),t.addEventListener("blur",Sx,!1),"undefined"!=typeof PointerEvent?(n.addEventListener("pointerdown",Sv,!0),n.addEventListener("pointermove",Sv,!0),n.addEventListener("pointerup",Sv,!0)):(n.addEventListener("mousedown",Sv,!0),n.addEventListener("mousemove",Sv,!0),n.addEventListener("mouseup",Sv,!0)),t.addEventListener("beforeunload",()=>{SS(e)},{once:!0}),Sh.set(t,{focus:r})}let SS=(e,t)=>{let n=Sl(e),r=Ss(e);t&&r.removeEventListener("DOMContentLoaded",t),Sh.has(n)&&(n.HTMLElement.prototype.focus=Sh.get(n).focus,r.removeEventListener("keydown",Sm,!0),r.removeEventListener("keyup",Sm,!0),r.removeEventListener("click",Sy,!0),n.removeEventListener("focus",S_,!0),n.removeEventListener("blur",Sx,!1),"undefined"!=typeof PointerEvent?(r.removeEventListener("pointerdown",Sv,!0),r.removeEventListener("pointermove",Sv,!0),r.removeEventListener("pointerup",Sv,!0)):(r.removeEventListener("mousedown",Sv,!0),r.removeEventListener("mousemove",Sv,!0),r.removeEventListener("mouseup",Sv,!0)),Sh.delete(n))};function Sw(){return"pointer"!==Su}"undefined"!=typeof document&&!function(e){let t;let n=Ss(void 0);"loading"!==n.readyState?Sb(e):(t=()=>{Sb(e)},n.addEventListener("DOMContentLoaded",t)),()=>SS(e,t)}();let SM=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function SA(e,t,n){Sb(),(0,fG.useEffect)(()=>{let t=(t,r)=>{(function(e,t,n){var r;let i="undefined"!=typeof window?Sl(null==n?void 0:n.target).HTMLInputElement:HTMLInputElement,a="undefined"!=typeof window?Sl(null==n?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,s="undefined"!=typeof window?Sl(null==n?void 0:n.target).HTMLElement:HTMLElement,u="undefined"!=typeof window?Sl(null==n?void 0:n.target).KeyboardEvent:KeyboardEvent;return!((e=e||(null==n?void 0:n.target)instanceof i&&!SM.has(null==n?void 0:null===(r=n.target)||void 0===r?void 0:r.type)||(null==n?void 0:n.target)instanceof a||(null==n?void 0:n.target)instanceof s&&(null==n?void 0:n.target.isContentEditable))&&"keyboard"===t&&n instanceof u&&!Sf[n.key])})(!!(null==n?void 0:n.isTextInput),t,r)&&e(Sw())};return Sc.add(t),()=>{Sc.delete(t)}},t)}let SC="undefined"!=typeof document?fG.useLayoutEffect:()=>{};class ST{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=e}}function SE(e){let t=(0,fG.useRef)({isFocused:!1,observer:null});SC(()=>{let e=t.current;return()=>{e.observer&&(e.observer.disconnect(),e.observer=null)}},[]);let n=function(e){let t=(0,fG.useRef)(null);return SC(()=>{t.current=e},[e]),(0,fG.useCallback)((...e)=>{let n=t.current;return null==n?void 0:n(...e)},[])}(t=>{null==e||e(t)});return(0,fG.useCallback)(e=>{if(e.target instanceof HTMLButtonElement||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement){t.current.isFocused=!0;let r=e.target;r.addEventListener("focusout",e=>{t.current.isFocused=!1,r.disabled&&n(new ST("blur",e)),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)},{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&r.disabled){var e;null===(e=t.current.observer)||void 0===e||e.disconnect();let n=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:n})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:n}))}}),t.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}},[n])}function SI(e={}){let{autoFocus:t=!1,isTextInput:n,within:r}=e,i=(0,fG.useRef)({isFocused:!1,isFocusVisible:t||Sw()}),[a,s]=(0,fG.useState)(!1),[u,c]=(0,fG.useState)(()=>i.current.isFocused&&i.current.isFocusVisible),h=(0,fG.useCallback)(()=>c(i.current.isFocused&&i.current.isFocusVisible),[]),p=(0,fG.useCallback)(e=>{i.current.isFocused=e,s(e),h()},[h]);SA(e=>{i.current.isFocusVisible=e,h()},[],{isTextInput:n});let{focusProps:f}=function(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:i}=e,a=(0,fG.useCallback)(e=>{if(e.target===e.currentTarget)return r&&r(e),i&&i(!1),!0},[r,i]),s=SE(a),u=(0,fG.useCallback)(e=>{let t=Ss(e.target);e.target===e.currentTarget&&t.activeElement===e.target&&(n&&n(e),i&&i(!0),s(e))},[i,n,s]);return{focusProps:{onFocus:!t&&(n||i||r)?u:void 0,onBlur:!t&&(r||i)?a:void 0}}}({isDisabled:r,onFocusChange:p}),{focusWithinProps:v}=function(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=e,a=(0,fG.useRef)({isFocusWithin:!1}),s=(0,fG.useCallback)(e=>{a.current.isFocusWithin&&!e.currentTarget.contains(e.relatedTarget)&&(a.current.isFocusWithin=!1,n&&n(e),i&&i(!1))},[n,i,a]),u=SE(s),c=(0,fG.useCallback)(e=>{!a.current.isFocusWithin&&document.activeElement===e.target&&(r&&r(e),i&&i(!0),a.current.isFocusWithin=!0,u(e))},[r,i,u]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:c,onBlur:s}}}({isDisabled:!r,onFocusWithinChange:p});return{isFocused:a,isFocusVisible:u,focusProps:r?v:f}}let SD=!1,SP=0;function SR(){SD=!0,setTimeout(()=>{SD=!1},50)}function SL(e){"touch"===e.pointerType&&SR()}function SO(){if("undefined"!=typeof document)return"undefined"!=typeof PointerEvent?document.addEventListener("pointerup",SL):document.addEventListener("touchend",SR),SP++,()=>{!(--SP>0)&&("undefined"!=typeof PointerEvent?document.removeEventListener("pointerup",SL):document.removeEventListener("touchend",SR))}}function Sk(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:i}=e,[a,s]=(0,fG.useState)(!1),u=(0,fG.useRef)({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;(0,fG.useEffect)(SO,[]);let{hoverProps:c,triggerHoverEnd:h}=(0,fG.useMemo)(()=>{let e=(e,r)=>{if(u.pointerType=r,i||"touch"===r||u.isHovered||!e.currentTarget.contains(e.target))return;u.isHovered=!0;let a=e.currentTarget;u.target=a,t&&t({type:"hoverstart",target:a,pointerType:r}),n&&n(!0),s(!0)},a=(e,t)=>{if(u.pointerType="",u.target=null,"touch"===t||!u.isHovered)return;u.isHovered=!1;let i=e.currentTarget;r&&r({type:"hoverend",target:i,pointerType:t}),n&&n(!1),s(!1)},c={};return"undefined"!=typeof PointerEvent?(c.onPointerEnter=t=>{(!SD||"mouse"!==t.pointerType)&&e(t,t.pointerType)},c.onPointerLeave=e=>{!i&&e.currentTarget.contains(e.target)&&a(e,e.pointerType)}):(c.onTouchStart=()=>{u.ignoreEmulatedMouseEvents=!0},c.onMouseEnter=t=>{!u.ignoreEmulatedMouseEvents&&!SD&&e(t,"mouse"),u.ignoreEmulatedMouseEvents=!1},c.onMouseLeave=e=>{!i&&e.currentTarget.contains(e.target)&&a(e,"mouse")}),{hoverProps:c,triggerHoverEnd:a}},[t,n,r,i,u]);return(0,fG.useEffect)(()=>{i&&h({currentTarget:u.target},u.pointerType)},[i]),{hoverProps:c,isHovered:a}}var SB=Object.defineProperty,SN=(e,t,n)=>t in e?SB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,SF=(e,t,n)=>(SN(e,"symbol"!=typeof t?t+"":t,n),n);let Sz=new class e{constructor(){SF(this,"current",this.detect()),SF(this,"handoffState","pending"),SF(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}};function SU(){let e=[],t={addEventListener:(e,n,r,i)=>(e.addEventListener(n,r,i),t.add(()=>e.removeEventListener(n,r,i))),requestAnimationFrame(...e){let n=requestAnimationFrame(...e);return t.add(()=>cancelAnimationFrame(n))},nextFrame:(...e)=>t.requestAnimationFrame(()=>t.requestAnimationFrame(...e)),setTimeout(...e){let n=setTimeout(...e);return t.add(()=>clearTimeout(n))},microTask(...e){var n;let r={current:!0};return n=()=>{r.current&&e[0]()},"function"==typeof queueMicrotask?queueMicrotask(n):Promise.resolve().then(n).catch(e=>setTimeout(()=>{throw e})),t.add(()=>{r.current=!1})},style(e,t,n){let r=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add(()=>{Object.assign(e.style,{[t]:r})})},group(e){let t=SU();return e(t),this.add(()=>t.dispose())},add:t=>(e.includes(t)||e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let t of e.splice(n,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}function SH(){let[e]=(0,fG.useState)(SU);return(0,fG.useEffect)(()=>()=>e.dispose(),[e]),e}let SG=(e,t)=>{Sz.isServer?(0,fG.useEffect)(e,t):(0,fG.useLayoutEffect)(e,t)};function SV(e){let t=(0,fG.useRef)(e);return SG(()=>{t.current=e},[e]),t}let SW=function(e){let t=SV(e);return fG.useCallback((...e)=>t.current(...e),[t])};function Sj({disabled:e=!1}={}){let t=(0,fG.useRef)(null),[n,r]=(0,fG.useState)(!1),i=SH(),a=SW(()=>{t.current=null,r(!1),i.dispose()}),s=SW(e=>{if(i.dispose(),null===t.current){t.current=e.currentTarget,r(!0);{var n;let s=(n=e.currentTarget,Sz.isServer?null:n instanceof Node?n.ownerDocument:null!=n&&n.hasOwnProperty("current")&&n.current instanceof Node?n.current.ownerDocument:document);i.addEventListener(s,"pointerup",a,!1),i.addEventListener(s,"pointermove",e=>{if(t.current){var n,i,a;let s,u;r((i=(s=(n=e).width/2,u=n.height/2,{top:n.clientY-u,right:n.clientX+s,bottom:n.clientY+u,left:n.clientX-s}),a=t.current.getBoundingClientRect(),!(!i||!a||i.right<a.left||i.left>a.right||i.bottom<a.top||i.top>a.bottom)))}},!1),i.addEventListener(s,"pointercancel",a,!1)}}});return{pressed:n,pressProps:e?{}:{onPointerDown:s,onPointerUp:a,onClick:a}}}let SX=(0,fG.createContext)(void 0);function SY(){return(0,fG.useContext)(SX)}function SJ({value:e,children:t}){return fG.createElement(SX.Provider,{value:e},t)}function SZ(...e){return Array.from(new Set(e.flatMap(e=>"string"==typeof e?e.split(" "):[]))).filter(Boolean).join(" ")}function Sq(e,t,...n){if(e in t){let r=t[e];return"function"==typeof r?r(...n):r}let r=Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(e=>`"${e}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Sq),r}var SK=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(SK||{}),SQ=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(SQ||{});function S$(){let e=function(){let e=(0,fG.useRef)([]),t=(0,fG.useCallback)(t=>{for(let n of e.current)null!=n&&("function"==typeof n?n(t):n.current=t)},[]);return(...n)=>{if(!n.every(e=>null==e))return e.current=n,t}}();return(0,fG.useCallback)(t=>(function({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:a=!0,name:s,mergeRefs:u}){u=null!=u?u:S1;let c=S2(t,e);if(a)return S0(c,n,r,s,u);let h=null!=i?i:0;if(2&h){let{static:e=!1,...t}=c;if(e)return S0(t,n,r,s,u)}if(1&h){let{unmount:e=!0,...t}=c;return Sq(e?0:1,{0:()=>null,1:()=>S0({...t,hidden:!0,style:{display:"none"}},n,r,s,u)})}return S0(c,n,r,s,u)})({mergeRefs:e,...t}),[e])}function S0(e,t={},n,r,i){let{as:a=n,children:s,refName:u="ref",...c}=S6(e,["unmount","static"]),h=void 0!==e.ref?{[u]:e.ref}:{},p="function"==typeof s?s(t):s;"className"in c&&c.className&&"function"==typeof c.className&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let f={};if(t){let e=!1,n=[];for(let[r,i]of Object.entries(t))"boolean"==typeof i&&(e=!0),!0===i&&n.push(r.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`));if(e)for(let e of(f["data-headlessui-state"]=n.join(" "),n))f[`data-${e}`]=""}if(a===fG.Fragment&&(Object.keys(S4(c)).length>0||Object.keys(S4(f)).length>0)){if(!(0,fG.isValidElement)(p)||Array.isArray(p)&&p.length>1){if(Object.keys(S4(c)).length>0)throw Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(S4(c)).concat(Object.keys(S4(f))).map(e=>`  - ${e}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(e=>`  - ${e}`).join(`
`)].join(`
`))}else{let e=p.props,t=null==e?void 0:e.className,n="function"==typeof t?(...e)=>SZ(t(...e),c.className):SZ(t,c.className),r=S2(p.props,S4(S6(c,["ref"])));for(let e in f)e in r&&delete f[e];return(0,fG.cloneElement)(p,Object.assign({},r,f,h,{ref:i(function(e){return fG.version.split(".")[0]>="19"?e.props.ref:e.ref}(p),h.ref)},n?{className:n}:{}))}}return(0,fG.createElement)(a,Object.assign({},S6(c,["ref"]),a!==fG.Fragment&&h,a!==fG.Fragment&&f),p)}function S1(...e){return e.every(e=>null==e)?void 0:t=>{for(let n of e)null!=n&&("function"==typeof n?n(t):n.current=t)}}function S2(...e){var t;if(0===e.length)return{};if(1===e.length)return e[0];let n={},r={};for(let t of e)for(let e in t)e.startsWith("on")&&"function"==typeof t[e]?(null!=r[e]||(r[e]=[]),r[e].push(t[e])):n[e]=t[e];if(n.disabled||n["aria-disabled"])for(let e in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(e)&&(r[e]=[e=>{var t;return null==(t=null==e?void 0:e.preventDefault)?void 0:t.call(e)}]);for(let e in r)Object.assign(n,{[e](t,...n){for(let i of r[e]){if((t instanceof Event||(null==t?void 0:t.nativeEvent)instanceof Event)&&t.defaultPrevented)return;i(t,...n)}}});return n}function S3(...e){var t;if(0===e.length)return{};if(1===e.length)return e[0];let n={},r={};for(let t of e)for(let e in t)e.startsWith("on")&&"function"==typeof t[e]?(null!=r[e]||(r[e]=[]),r[e].push(t[e])):n[e]=t[e];for(let e in r)Object.assign(n,{[e](...t){for(let n of r[e])null==n||n(...t)}});return n}function S5(e){var t;return Object.assign((0,fG.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function S4(e){let t=Object.assign({},e);for(let e in t)void 0===t[e]&&delete t[e];return t}function S6(e,t=[]){let n=Object.assign({},e);for(let e of t)e in n&&delete n[e];return n}let S9=S5(function(e,t){var n;let r=SY(),{disabled:i=r||!1,autoFocus:a=!1,...s}=e,{isFocusVisible:u,focusProps:c}=SI({autoFocus:a}),{isHovered:h,hoverProps:p}=Sk({isDisabled:i}),{pressed:f,pressProps:v}=Sj({disabled:i}),y=S3({ref:t,type:null!=(n=s.type)?n:"button",disabled:i||void 0,autoFocus:a},c,p,v),_=(0,fG.useMemo)(()=>({disabled:i,hover:h,focus:u,active:f,autofocus:a}),[i,h,u,f,a]);return S$()({ourProps:y,theirProps:s,slot:_,defaultTag:"button",name:"Button"})}),S8=e=>{let{children:t,className:n,...r}=e;return(0,tS.jsx)(S9,{className:m5(`
        inline-flex items-center gap-2 rounded-md border border-slate-300
        bg-slate-50 px-3 py-1.5 text-xs/6 text-slate-700 shadow-inner
        shadow-white/10

        hover:bg-slate-100

        ${n}
      `),...r,children:t})},S7=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),we=(...e)=>e.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim();var wt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let wn=(0,fG.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...u},c)=>(0,fG.createElement)("svg",{ref:c,...wt,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:we("lucide",i),...u},[...s.map(([e,t])=>(0,fG.createElement)(e,t)),...Array.isArray(a)?a:[a]])),wr=(e,t)=>{let n=(0,fG.forwardRef)(({className:n,...r},i)=>(0,fG.createElement)(wn,{ref:i,iconNode:t,className:we(`lucide-${S7(e)}`,n),...r}));return n.displayName=`${e}`,n},wi=wr("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),wa=wr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),wo=e=>{let{width:t,height:n,onMaximize:r,onClose:i,title:a,children:s,extraButtons:u}=e;return(0,tS.jsxs)("div",{className:m5(`
        pointer-events-auto select-none rounded-lg border border-slate-300
        bg-slate-100
      `),style:{width:t,height:n},children:[(0,tS.jsxs)("div",{className:"flex h-[60px] gap-0.5 px-2 pb-1 pt-2",children:[(0,tS.jsx)("b",{className:"flex-1 text-xl",children:a}),(0,tS.jsxs)("div",{className:"flex gap-1",children:[u,r&&(0,tS.jsx)(S8,{className:"size-10 justify-center p-1",onPointerDown:()=>r(),children:(0,tS.jsx)(wi,{className:"size-3"})}),i&&(0,tS.jsx)(S8,{className:"size-10 justify-center p-1",onPointerDown:()=>i(),children:(0,tS.jsx)(wa,{className:"size-3"})})]})]}),(0,tS.jsx)("div",{className:"mx-4 overflow-auto rounded-lg bg-neutral-50 scrollbar",style:{height:`calc(${n} - 60px - 1rem)`},children:s})]})},ws=[0,0,0],wl=[0,0,0],wu=e=>{let{scale:t=.5,renderTitle:n,renderContent:r,extraButtons:i}=e,{scene:a,controls:s}=gk(),u=(0,fG.useRef)(null),c=(0,fG.useRef)(null),{fullscreenId:h,isFullscreen:p,setFullscreen:f}=x1(),{focused:v,setFocused:y}=xO(),_=(0,fG.useMemo)(()=>xw(),[]),x=(0,fG.useMemo)(()=>p&&h===_,[h,_,p]),b=(0,fG.useMemo)(()=>v?a.getObjectByName(v.objectName):null,[v,a]),S=(0,fG.useMemo)(()=>x?{wrapper:{width:"100%",height:"100%"},content:{width:"100%",height:"100%"}}:{wrapper:{width:`${m4.config.floatingUI.width}px`,height:`${m4.config.floatingUI.height}px`},content:{width:`${m4.config.floatingUI.width/t}px`,height:`${m4.config.floatingUI.height/t}px`}},[x,t]),w=(0,fG.useMemo)(()=>{var e;return e=-1,new be(-1)},[]),M=(0,fG.useCallback)(e=>e.map((e,t)=>e+m4.config.floatingUI.focusedPosition[t]),[]),A=(0,fG.useCallback)(()=>{y(null),clearTimeout(w.value);s.enabled=!0,s.setTarget(...ws,!1)},[s,w,y]),C=(0,fG.useCallback)(()=>{var e,t,n,r,i,a;if(p&&!x)return;let c=!p;f(_,c),clearTimeout(w.value);if(s.enabled=!0,c)null===(e=u.current)||void 0===e||e.setScale(1),null===(t=u.current)||void 0===t||t.setPosition(ws),null===(n=u.current)||void 0===n||n.setRotation(wl),s.setTarget(...ws,!1),w.value=window.setTimeout(()=>s.enabled=!1,500);else{let e=b.position.toArray();null===(r=u.current)||void 0===r||r.setPosition(M(e)),null===(i=u.current)||void 0===i||i.setScale(m4.config.floatingUI.focusedScale),null===(a=u.current)||void 0===a||a.setRotation(m4.config.floatingUI.focusedRotation),s.setTarget(...e.map((e,t)=>e+m4.config.cameraController.focusedOffset[t]),!1)}},[M,s,_,x,p,b,f,w]),T=(0,fG.useCallback)(e=>{var t;c.current&&(c.current.style.opacity=e.toString()),(null===(t=c.current)||void 0===t?void 0:t.parentElement)&&(c.current.parentElement.style.pointerEvents="none")},[]);return(0,fG.useEffect)(()=>{var e,t,n,r,i,a,s,c;f(_,!1),b?(null===(e=u.current)||void 0===e||e.setPosition(M(b.position.toArray()),!0),null===(t=u.current)||void 0===t||t.setScale(m4.config.floatingUI.focusedScale,!0),null===(n=u.current)||void 0===n||n.setRotation(m4.config.floatingUI.focusedRotation,!0),null===(r=u.current)||void 0===r||r.setCustom(1)):(null===(i=u.current)||void 0===i||i.setPosition(ws,!0),null===(a=u.current)||void 0===a||a.setScale(.001,!0),null===(s=u.current)||void 0===s||s.setRotation(wl,!0),null===(c=u.current)||void 0===c||c.setCustom(0))},[_,f,b,a,M]),(0,tS.jsx)(b9,{ref:u,position:ws,scale:.001,rotation:wl,onCustom:T,children:(0,tS.jsx)(x0,{ref:c,transform:!x,fullscreen:x,zIndexRange:[35,0],children:(0,tS.jsx)("div",{onPointerDown:e=>e.stopPropagation(),style:{width:S.wrapper.width,height:S.wrapper.height,transform:x?"none":`scale(${t})`},children:(0,tS.jsx)(wo,{width:S.content.width,height:S.content.height,onClose:A,onMaximize:C,title:n(null==b?void 0:b.userData),extraButtons:i(null==b?void 0:b.userData),children:r(null==b?void 0:b.userData)})})})})};n("3262"),n("5446"),n("5549");let wc="http://172.30.1.1:59095/api",wh=async e=>{try{let t=await fetch(`${wc}/farm-info?tankId=${e}`);return await t.json()}catch(e){return null}},wd=async(e,t)=>{try{let n=new URL(`${wc}/mortality`),r={tankCd:e,cycle:String(t)};n.search=new URLSearchParams(r).toString();let i=await fetch(n.toString());return await i.json()}catch(e){return[]}},wp=async(e,t)=>{try{let n=new URL(`${wc}/findDate`),r={tankCd:e,cycle:String(t)};n.search=new URLSearchParams(r).toString();let i=await fetch(n.toString());return await i.json()}catch(e){return[]}};n("967");var wf=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(wf||{});let wg=S5(function(e,t){var n;let{features:r=1,...i}=e,a={ref:t,"aria-hidden":(2&r)==2||(null!=(n=i["aria-hidden"])?n:void 0),hidden:(4&r)==4||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(4&r)==4&&(2&r)!=2&&{display:"none"}}};return S$()({ourProps:a,theirProps:i,slot:{},defaultTag:"span",name:"Hidden"})}),wm=(0,fG.createContext)(null);function wv(e){let[t,n]=(0,fG.useState)(null);return fG.createElement(wm.Provider,{value:{target:t}},e.children,fG.createElement(wg,{features:wf.Hidden,ref:n}))}function wy({children:e}){let t=E(wm);if(!t)return o.createElement(o.Fragment,null,e);let{target:n}=t;return n?g(o.createElement(o.Fragment,null,e),n):null}function w_({setForm:e,formId:t}){return m(()=>{if(t){let n=document.getElementById(t);n&&e(n)}},[e,t]),t?null:o.createElement(l,{features:d.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:t=>{if(!t)return;let n=t.closest("form");n&&e(n)}})}let wb=(0,fG.createContext)(void 0);function wS(){return(0,fG.useContext)(wb)}function ww({id:e,children:t}){return fG.createElement(wb.Provider,{value:e},t)}let wM=Symbol();function wA(...e){let t=(0,fG.useRef)(e);(0,fG.useEffect)(()=>{t.current=e},[e]);let n=SW(e=>{for(let n of t.current)null!=n&&("function"==typeof n?n(e):n.current=e)});return e.every(e=>null==e||(null==e?void 0:e[wM]))?void 0:n}let wC=(0,fG.createContext)(null);wC.displayName="DescriptionContext";Object.assign(S5(function(e,t){let n=(0,fG.useId)(),r=SY(),{id:i=`headlessui-description-${n}`,...a}=e,s=function e(){let t=(0,fG.useContext)(wC);if(null===t){let t=Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,e),t}return t}(),u=wA(t);SG(()=>s.register(i),[i,s.register]);let c=r||!1,h=(0,fG.useMemo)(()=>({...s.slot,disabled:c}),[s.slot,c]),p={ref:u,...s.props,id:i};return S$()({ourProps:p,theirProps:a,slot:h,defaultTag:"p",name:s.name||"Description"})}),{});let wT=(0,fG.createContext)(null);wT.displayName="LabelContext";function wE(e){var t,n,r;let i=null!=(n=null==(t=(0,fG.useContext)(wT))?void 0:t.value)?n:void 0;return(null!=(r=null==e?void 0:e.length)?r:0)>0?[i,...e].filter(Boolean).join(" "):i}Object.assign(S5(function(e,t){var n;let r=(0,fG.useId)(),i=function e(){let t=(0,fG.useContext)(wT);if(null===t){let t=Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,e),t}return t}(),a=wS(),s=SY(),{id:u=`headlessui-label-${r}`,htmlFor:c=null!=a?a:null==(n=i.props)?void 0:n.htmlFor,passive:h=!1,...p}=e,f=wA(t);SG(()=>i.register(u),[u,i.register]);let v=SW(e=>{let t=e.currentTarget;if(t instanceof HTMLLabelElement&&e.preventDefault(),i.props&&"onClick"in i.props&&"function"==typeof i.props.onClick&&i.props.onClick(e),t instanceof HTMLLabelElement){let e=document.getElementById(t.htmlFor);if(e){let t=e.getAttribute("disabled");if("true"===t||""===t)return;let n=e.getAttribute("aria-disabled");if("true"===n||""===n)return;(e instanceof HTMLInputElement&&("radio"===e.type||"checkbox"===e.type)||"radio"===e.role||"checkbox"===e.role||"switch"===e.role)&&e.click(),e.focus({preventScroll:!0})}}}),y=s||!1,_=(0,fG.useMemo)(()=>({...i.slot,disabled:y}),[i.slot,y]),x={ref:f,...i.props,id:u,htmlFor:c,onClick:v};return h&&("onClick"in x&&(delete x.htmlFor,delete x.onClick),"onClick"in p&&delete p.onClick),S$()({ourProps:x,theirProps:p,slot:_,defaultTag:c?"label":"div",name:i.name||"Label"})}),{});let wI=S5(function(e,t){let n=`headlessui-control-${(0,fG.useId)()}`,[r,i]=function({inherit:e=!1}={}){let t=wE(),[n,r]=(0,fG.useState)([]),i=e?[t,...n].filter(Boolean):n;return[i.length>0?i.join(" "):void 0,(0,fG.useMemo)(()=>function(e){let t=SW(e=>(r(t=>[...t,e]),()=>r(t=>{let n=t.slice(),r=n.indexOf(e);return -1!==r&&n.splice(r,1),n}))),n=(0,fG.useMemo)(()=>({register:t,slot:e.slot,name:e.name,props:e.props,value:e.value}),[t,e.slot,e.name,e.props,e.value]);return fG.createElement(wT.Provider,{value:n},e.children)},[r])]}(),[a,s]=function(){let[e,t]=(0,fG.useState)([]);return[e.length>0?e.join(" "):void 0,(0,fG.useMemo)(()=>function(e){let n=SW(e=>(t(t=>[...t,e]),()=>t(t=>{let n=t.slice(),r=n.indexOf(e);return -1!==r&&n.splice(r,1),n}))),r=(0,fG.useMemo)(()=>({register:n,slot:e.slot,name:e.name,props:e.props,value:e.value}),[n,e.slot,e.name,e.props,e.value]);return fG.createElement(wC.Provider,{value:r},e.children)},[t])]}(),u=SY(),{disabled:c=u||!1,...h}=e,p=(0,fG.useMemo)(()=>({disabled:c}),[c]),f=S$();return fG.createElement(SJ,{value:c},fG.createElement(i,{value:r},fG.createElement(s,{value:a},fG.createElement(ww,{id:n},f({ourProps:{ref:t,disabled:c||void 0,"aria-disabled":c||void 0},theirProps:{...h,children:fG.createElement(wv,null,"function"==typeof h.children?h.children(p):h.children)},slot:p,defaultTag:"div",name:"Field"})))))}),wD=S5(function(e,t){var n,r;let i=(0,fG.useId)(),a=wS(),s=SY(),{id:u=a||`headlessui-select-${i}`,disabled:c=s||!1,invalid:h=!1,autoFocus:p=!1,...f}=e,v=wE(),y=null!=(r=null==(n=(0,fG.useContext)(wC))?void 0:n.value)?r:void 0,{isFocusVisible:_,focusProps:x}=SI({autoFocus:p}),{isHovered:b,hoverProps:S}=Sk({isDisabled:c}),{pressed:w,pressProps:M}=Sj({disabled:c}),A=S3({ref:t,id:u,"aria-labelledby":v,"aria-describedby":y,"aria-invalid":h?"":void 0,disabled:c||void 0,autoFocus:p},x,S,M),C=(0,fG.useMemo)(()=>({disabled:c,invalid:h,hover:b,focus:_,active:w,autofocus:p}),[c,h,b,_,w,p]);return S$()({ourProps:A,theirProps:f,slot:C,defaultTag:"select",name:"Select"})}),wP=wr("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),wR=e=>{let{options:t,value:n,onChange:r}=e,[i,a]=(0,fG.useState)(n);(0,fG.useEffect)(()=>{a(n)},[n]);let s=(0,fG.useCallback)(e=>{a(e.target.value),r(e.target.value)},[r]);return(0,tS.jsx)("div",{className:"min-w-28",children:(0,tS.jsx)(wI,{children:(0,tS.jsxs)("div",{className:"relative",children:[(0,tS.jsx)(wD,{className:m5(`
              block w-full appearance-none rounded-lg border-none bg-neutral-200
              px-3 py-1.5 text-sm/6 text-neutral-700

              *:text-black

              data-[focus]:outline-2 data-[focus]:-outline-offset-2
              data-[focus]:outline-black/25

              focus:outline-none
            `),onChange:s,value:i,children:t.map(e=>(0,tS.jsx)("option",{value:e.value,children:e.name},e.value))}),(0,tS.jsx)(wP,{className:m5(`
              group pointer-events-none absolute right-2.5 top-2.5 size-4
              fill-black/60
            `),"aria-hidden":"true"})]})})})};function wL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n("1811"),n("4838"),n("3747"),n("7663");var wO=function(e){return e.TMP="TMP",e.SA="SA",e.DO="DO",e.PH="PH",e.ORP="ORP",e.mortality="mortality",e}({});class wk{}wL(wk,"colors",Object.freeze({TMP:"#2A4B8C",SA:"#91CC75",DO:"#73C0DE",PH:"#FAC858",ORP:"#EE6666",mortality:"#FF6666"})),wL(wk,"durationColors",Object.freeze(["#FF0000","#FF6666","#FFE5E5"])),wL(wk,"units",Object.freeze({TMP:"℃",SA:"PPT",DO:"mg/L",PH:"pH",ORP:"mv",mortality:"마리"}));class wB{static formatTooltip(e){let t="<b>"+e[0].axisValue+"</b> <br>";return e.forEach(e=>{if(null!==e.data){let n=wk.units[e.seriesName]||"";if("boxplot"===e.seriesType&&null!=e.data[1])t+=`${e.marker} ${e.seriesName}: <br>
                            ● 최저 온도: ${e.data[1]} ${n}<br>
                            ● Q1: ${e.data[2]} ${n}<br>
                            ● 중앙값: ${e.data[3]} ${n}<br>
                            ● Q3: ${e.data[4]} ${n}<br>
                            ● 최고 온도: ${e.data[5]} ${n}<br>`;else if("line"===e.seriesType){let r="mortality"===e.seriesName?"폐사량":e.seriesName,i="mortality"===e.seriesName?e.data:e.data.toFixed(2);t+=`${e.marker} ${r}: ${i} ${n}<br>`}else if("bar"===e.seriesType&&0!==e.data.value){let n=Math.floor(e.data.value/60),r=e.data.value%60;t+=`${e.marker} <b>기준온도(25℃) 이상 유지시간</b>: <br/> ● ${e.data.period}<br> ● ${n}시간 ${r<10?"0"+r:r}분<br>`}}}),t}static createYAxis(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return{type:"value",name:e,position:t,offset:n,alignTicks:!0,axisLine:{show:!0,lineStyle:{color:i}},axisLabel:{formatter:t=>`${"mortality"!==e?t.toFixed(2):Math.floor(t)}${wk.units[e]||""}`},min:"mortality"===e?"dataMin":e=>e.min-1,gridIndex:r}}static createYAxisForDuration(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{type:"value",name:"duration",position:e,offset:t,alignTicks:!0,axisLine:{show:!0,lineStyle:{color:wk.colors.TMP}},axisLabel:{formatter:e=>{let t=Math.floor(e/60),n=e%60;return`${t}:${n<10?"0"+n:n}`}},min:e=>e.min-1,gridIndex:n}}static createSeries(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s={name:t,type:e,yAxisIndex:r,data:n,smooth:a,itemStyle:i,lineStyle:{}};return"boxplot"===e?s.itemStyle={color:"transparent",borderColor:i.color}:s.lineStyle={opacity:.5},s}}let wN=(e,t)=>{let n={farmCd:e.farmCd,salValues:[],doValues:[],phValues:[],mortalityValues:[],durationValues:[],orpValues:[],values:[],date:[]},r="65AF1"===e.farmCd;return t.forEach(e=>{if(n.salValues.push(e.saData),n.doValues.push(e.doData),n.phValues.push(e.phData),n.mortalityValues.push(e.fishDeathCnt),e.duration){let t=e.duration.periodStarts.map((t,n)=>`${t} ~ ${e.duration.periodEnds[n]}`);n.durationValues.push({...e.duration,periods:t})}r&&n.orpValues.push(e.orpData),n.values.push([e.tmp.tmpMinValue,e.tmp.tmpQ1Value,e.tmp.tmpQ2Value,e.tmp.tmpQ3Value,e.tmp.tmpPeakValue]),n.date.push(`${e.collectDate} ${null==e.daysPassedPd?"":"("+e.daysPassedPd+")"}`)}),n},wF=e=>{let t=["TMP","DO","SA","PH","mortality"],n=[wB.createYAxis(wO.TMP,"left",0,0,wk.colors.TMP),wB.createYAxisForDuration("left",0,1),wB.createYAxis(wO.DO,"right",55,0,wk.colors.DO),wB.createYAxis(wO.SA,"right",130,0,wk.colors.SA),wB.createYAxis(wO.PH,"right",0,0,wk.colors.PH),wB.createYAxis(wO.mortality,"left",70,0,wk.colors.mortality)],r=[wB.createSeries("boxplot",wO.TMP,e.values,0,{color:wk.colors.TMP}),wB.createSeries("line",wO.DO,e.doValues,2,{color:wk.colors.DO}),wB.createSeries("line",wO.SA,e.salValues,3,{color:wk.colors.SA}),wB.createSeries("line",wO.PH,e.phValues,4,{color:wk.colors.PH}),wB.createSeries("line",wO.mortality,e.mortalityValues,5,{color:wk.colors.mortality}),...function(e){return Array.from({length:Math.max(...e.map(e=>e.durations.length))},(t,n)=>{var r;return{type:"bar",name:"duration"+n,data:(r=n,e.map(e=>({duration:void 0!==e.durations[r]?e.durations[r]:0,period:void 0!==e.periods[r]?e.periods[r]:""}))).map(e=>({value:e.duration,period:e.period})),xAxisIndex:1,yAxisIndex:1,itemStyle:{color:wk.durationColors[n]},stack:"stacked"}})}(e.durationValues)];return e.orpValues.length&&(t.push("ORP"),n.push({type:"value",name:"ORP",position:"left",offset:140,alignTicks:!0,axisLine:{show:!0,lineStyle:{color:wk.colors.mortality}},axisLabel:{formatter:e=>`${e.toFixed(2)}mv`},min:e=>e.min-1}),r.push({name:"ORP",type:"line",yAxisIndex:6,data:e.orpValues,smooth:!1,lineStyle:{opacity:.5},itemStyle:{color:wk.colors.mortality}})),{tooltip:{trigger:"axis",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},formatter:function(e){return wB.formatTooltip(e)}},legend:{bottom:10,left:"center",data:t},grid:[{left:"10%",right:"8%",height:"50%",containLabel:!0},{left:"10%",right:"8%",top:"63%",height:"16%",containLabel:!0}],xAxis:[{type:"category",data:e.date,gridIndex:0,boundaryGap:!0,axisLine:{onZero:!1},splitLine:{show:!1},axisPointer:{z:100}},{type:"category",gridIndex:1,data:e.date,boundaryGap:!0,axisLabel:{show:!1}}],yAxis:n,graphic:{type:"text",left:"10%",top:"82%",style:{text:"* 아래 그래프는 하루 동안 수온이 2시간 이상 25도를 유지한 데이터를 나타내는 그래프입니다.",textAlign:"center",fill:"#333",font:"bold 12px Arial"}},dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:80,end:100}],series:r}};var wz=function(e,t){return(wz=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function wU(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}wz(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var wH=function(){return(wH=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},wG=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function wV(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function wW(e){return this instanceof wW?(this.v=e,this):new wW(e)}var wj=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},wX=function(e){return(wX=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(e)},wY=function(e,t){return(wY=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function wJ(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}wY(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var wZ=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function wq(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function wK(e){return this instanceof wK?(this.v=e,this):new wK(e)}var wQ=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},w$=function(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1},w0=new function(){this.browser=new w$,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow="undefined"!=typeof window};"object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?(w0.wxa=!0,w0.touchEventsSupported=!0):"undefined"==typeof document&&"undefined"!=typeof self?w0.worker=!0:"undefined"==typeof navigator||0===navigator.userAgent.indexOf("Node.js")?(w0.node=!0,w0.svgSupported=!0):function(e,t){var n=t.browser,r=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),a=e.match(/Edge?\/([\d.]+)/),s=/micromessenger/i.test(e);r&&(n.firefox=!0,n.version=r[1]),i&&(n.ie=!0,n.version=i[1]),a&&(n.edge=!0,n.version=a[1],n.newEdge=+a[1].split(".")[0]>18),s&&(n.weChat=!0),t.svgSupported="undefined"!=typeof SVGRect,t.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,t.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),t.domSupported="undefined"!=typeof document;var u=document.documentElement.style;t.transform3dSupported=(n.ie&&"transition"in u||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in u)&&!("OTransition"in u),t.transformSupported=t.transform3dSupported||n.ie&&+n.version>=9}(navigator.userAgent,w0);let w1=w0;var w2="sans-serif",w3="12px "+w2,w5=function(e){var t={};if("undefined"==typeof JSON)return t;for(var n=0;n<e.length;n++){var r=String.fromCharCode(n+32),i=(e.charCodeAt(n)-20)/100;t[r]=i}return t}("007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N"),w4={createCanvas:function(){return"undefined"!=typeof document&&document.createElement("canvas")},measureText:function(){var e,t;return function(n,r){if(!e){var i=w4.createCanvas();e=i&&i.getContext("2d")}if(e)return t!==r&&(t=e.font=r||w3),e.measureText(n);n=n||"",r=r||w3;var a=/((?:\d+)?\.?\d*)px/.exec(r),s=a&&+a[1]||12,u=0;if(r.indexOf("mono")>=0)u=s*n.length;else for(var c=0;c<n.length;c++){var h=w5[n[c]];u+=null==h?s:h*s}return{width:u}}}(),loadImage:function(e,t,n){var r=new Image;return r.onload=t,r.onerror=n,r.src=e,r}};function w6(e){for(var t in w4)e[t]&&(w4[t]=e[t])}var w9=Mw(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),w8=Mw(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),w7=Object.prototype.toString,Me=Array.prototype,Mt=Me.forEach,Mn=Me.filter,Mr=Me.slice,Mi=Me.map,Ma=(function(){}).constructor,Mo=Ma?Ma.prototype:null,Ms="__proto__",Ml=2311;function Mu(){return Ml++}function Mc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}function Mh(e){if(null==e||"object"!=typeof e)return e;var t=e,n=w7.call(e);if("[object Array]"===n){if(!function(e){return e[MZ]}(e)){t=[];for(var r=0,i=e.length;r<i;r++)t[r]=Mh(e[r])}}else if(w8[n]){if(!function(e){return e[MZ]}(e)){var a=e.constructor;if(a.from)t=a.from(e);else{t=new a(e.length);for(var r=0,i=e.length;r<i;r++)t[r]=e[r]}}}else if(!w9[n]&&!function(e){return e[MZ]}(e)&&!MN(e))for(var s in t={},e)e.hasOwnProperty(s)&&s!==Ms&&(t[s]=Mh(e[s]));return t}function Md(e,t,n){if(!MO(t)||!MO(e))return n?Mh(t):e;for(var r in t)if(t.hasOwnProperty(r)&&r!==Ms){var i=e[r],a=t[r];!(MO(a)&&MO(i))||MI(a)||MI(i)||MN(a)||MN(i)||Mk(a)||Mk(i)||function(e){return e[MZ]}(a)||function(e){return e[MZ]}(i)?(n||!(r in e))&&(e[r]=Mh(t[r])):Md(i,a,n)}return e}function Mp(e,t){for(var n=e[0],r=1,i=e.length;r<i;r++)n=Md(n,e[r],t);return n}function Mf(e,t){if(Object.assign)Object.assign(e,t);else for(var n in t)t.hasOwnProperty(n)&&n!==Ms&&(e[n]=t[n]);return e}function Mg(e,t,n){for(var r=MC(t),i=0;i<r.length;i++){var a=r[i];(n?null!=t[a]:null==e[a])&&(e[a]=t[a])}return e}var Mm=w4.createCanvas;function Mv(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n}return -1}function My(e,t){var n=e.prototype;function r(){}for(var i in r.prototype=t.prototype,e.prototype=new r,n)n.hasOwnProperty(i)&&(e.prototype[i]=n[i]);e.prototype.constructor=e,e.superClass=t}function M_(e,t,n){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames){for(var r=Object.getOwnPropertyNames(t),i=0;i<r.length;i++){var a=r[i];"constructor"!==a&&(n?null!=t[a]:null==e[a])&&(e[a]=t[a])}}else Mg(e,t,n)}function Mx(e){return!!e&&"string"!=typeof e&&"number"==typeof e.length}function Mb(e,t,n){if(!!(e&&t))if(e.forEach&&e.forEach===Mt)e.forEach(t,n);else if(e.length===+e.length)for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e);else for(var a in e)e.hasOwnProperty(a)&&t.call(n,e[a],a,e)}function MS(e,t,n){if(!e)return[];if(!t)return Mj(e);if(e.map&&e.map===Mi)return e.map(t,n);for(var r=[],i=0,a=e.length;i<a;i++)r.push(t.call(n,e[i],i,e));return r}function Mw(e,t,n,r){if(!!(e&&t)){for(var i=0,a=e.length;i<a;i++)n=t.call(r,n,e[i],i,e);return n}}function MM(e,t,n){if(!e)return[];if(!t)return Mj(e);if(e.filter&&e.filter===Mn)return e.filter(t,n);for(var r=[],i=0,a=e.length;i<a;i++)t.call(n,e[i],i,e)&&r.push(e[i]);return r}function MA(e,t,n){if(!!(e&&t)){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e))return e[r]}}function MC(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}var MT=Mo&&MD(Mo.bind)?Mo.call.bind(Mo.bind):function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return function(){return e.apply(t,n.concat(Mr.call(arguments)))}};function ME(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){return e.apply(this,t.concat(Mr.call(arguments)))}}function MI(e){return Array.isArray?Array.isArray(e):"[object Array]"===w7.call(e)}function MD(e){return"function"==typeof e}function MP(e){return"string"==typeof e}function MR(e){return"[object String]"===w7.call(e)}function ML(e){return"number"==typeof e}function MO(e){var t=typeof e;return"function"===t||!!e&&"object"===t}function Mk(e){return!!w9[w7.call(e)]}function MB(e){return!!w8[w7.call(e)]}function MN(e){return"object"==typeof e&&"number"==typeof e.nodeType&&"object"==typeof e.ownerDocument}function MF(e){return null!=e.colorStops}function Mz(e){return null!=e.image}function MU(e){return"[object RegExp]"===w7.call(e)}function MH(e){return e!=e}function MG(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e.length;n<r;n++)if(null!=e[n])return e[n]}function MV(e,t){return null!=e?e:t}function MW(e,t,n){return null!=e?e:null!=t?t:n}function Mj(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Mr.apply(e,t)}function MX(e){if("number"==typeof e)return[e,e,e,e];var t=e.length;return 2===t?[e[0],e[1],e[0],e[1]]:3===t?[e[0],e[1],e[2],e[1]]:e}function MY(e,t){if(!e)throw Error(t)}function MJ(e){return null==e?null:"function"==typeof e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var MZ="__ec_primitive__";function Mq(e){e[MZ]=!0}function MK(e){return e[MZ]}var MQ=function(){function e(){this.data={}}return e.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},e.prototype.has=function(e){return this.data.hasOwnProperty(e)},e.prototype.get=function(e){return this.data[e]},e.prototype.set=function(e,t){return this.data[e]=t,this},e.prototype.keys=function(){return MC(this.data)},e.prototype.forEach=function(e){var t=this.data;for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},e}(),M$="function"==typeof Map,M0=function(){function e(t){var n=MI(t);this.data=M$?new Map:new MQ;var r=this;function i(e,t){n?r.set(e,t):r.set(t,e)}t instanceof e?t.each(i):t&&Mb(t,i)}return e.prototype.hasKey=function(e){return this.data.has(e)},e.prototype.get=function(e){return this.data.get(e)},e.prototype.set=function(e,t){return this.data.set(e,t),t},e.prototype.each=function(e,t){this.data.forEach(function(n,r){e.call(t,n,r)})},e.prototype.keys=function(){var e=this.data.keys();return M$?Array.from(e):e},e.prototype.removeKey=function(e){this.data.delete(e)},e}();function M1(e){return new M0(e)}function M2(e,t){for(var n=new e.constructor(e.length+t.length),r=0;r<e.length;r++)n[r]=e[r];for(var i=e.length,r=0;r<t.length;r++)n[r+i]=t[r];return n}function M3(e,t){var n;if(Object.create)n=Object.create(e);else{var r=function(){};r.prototype=e,n=new r}return t&&Mf(n,t),n}function M5(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function M4(e,t){return e.hasOwnProperty(t)}function M6(){}var M9=180/Math.PI;function M8(e,t){return null==e&&(e=0),null==t&&(t=0),[e,t]}function M7(e,t){return e[0]=t[0],e[1]=t[1],e}function Ae(e){return[e[0],e[1]]}function At(e,t,n){return e[0]=t,e[1]=n,e}function An(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Ar(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function Ai(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function Aa(e){return Math.sqrt(As(e))}var Ao=Aa;function As(e){return e[0]*e[0]+e[1]*e[1]}var Al=As;function Au(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function Ac(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function Ah(e,t){return e[0]*t[0]+e[1]*t[1]}function Ad(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function Ap(e,t){var n=Aa(t);return 0===n?(e[0]=0,e[1]=0):(e[0]=t[0]/n,e[1]=t[1]/n),e}function Af(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var Ag=Af;function Am(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Av=Am;function Ay(e,t){return e[0]=-t[0],e[1]=-t[1],e}function A_(e,t,n,r){return e[0]=t[0]+r*(n[0]-t[0]),e[1]=t[1]+r*(n[1]-t[1]),e}function Ax(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}function Ab(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function AS(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}var Aw=function(e,t){this.target=e,this.topTarget=t&&t.topTarget},AM=function(){function e(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new Aw(t,e),"dragstart",e.event))},e.prototype._drag=function(e){var t=this._draggingTarget;if(t){var n=e.offsetX,r=e.offsetY,i=n-this._x,a=r-this._y;this._x=n,this._y=r,t.drift(i,a,e),this.handler.dispatchToElement(new Aw(t,e),"drag",e.event);var s=this.handler.findHover(n,r,t).target,u=this._dropTarget;this._dropTarget=s,t!==s&&(u&&s!==u&&this.handler.dispatchToElement(new Aw(u,e),"dragleave",e.event),s&&s!==u&&this.handler.dispatchToElement(new Aw(s,e),"dragenter",e.event))}},e.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new Aw(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new Aw(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},e}(),AA=function(){function e(e){e&&(this._$eventProcessor=e)}return e.prototype.on=function(e,t,n,r){!this._$handlers&&(this._$handlers={});var i=this._$handlers;if("function"==typeof t&&(r=n,n=t,t=null),!n||!e)return this;var a=this._$eventProcessor;null!=t&&a&&a.normalizeQuery&&(t=a.normalizeQuery(t)),!i[e]&&(i[e]=[]);for(var s=0;s<i[e].length;s++)if(i[e][s].h===n)return this;var u={h:n,query:t,ctx:r||this,callAtLast:n.zrEventfulCallAtLast},c=i[e].length-1,h=i[e][c];return h&&h.callAtLast?i[e].splice(c,0,u):i[e].push(u),this},e.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},e.prototype.off=function(e,t){var n=this._$handlers;if(!n)return this;if(!e)return this._$handlers={},this;if(t){if(n[e]){for(var r=[],i=0,a=n[e].length;i<a;i++)n[e][i].h!==t&&r.push(n[e][i]);n[e]=r}n[e]&&0===n[e].length&&delete n[e]}else delete n[e];return this},e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!this._$handlers)return this;var r=this._$handlers[e],i=this._$eventProcessor;if(r){for(var a=t.length,s=r.length,u=0;u<s;u++){var c=r[u];if(!i||!i.filter||null==c.query||!!i.filter(e,c.query))switch(a){case 0:c.h.call(c.ctx);break;case 1:c.h.call(c.ctx,t[0]);break;case 2:c.h.call(c.ctx,t[0],t[1]);break;default:c.h.apply(c.ctx,t)}}}return i&&i.afterTrigger&&i.afterTrigger(e),this},e.prototype.triggerWithContext=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!this._$handlers)return this;var r=this._$handlers[e],i=this._$eventProcessor;if(r){for(var a=t.length,s=t[a-1],u=r.length,c=0;c<u;c++){var h=r[c];if(!i||!i.filter||null==h.query||!!i.filter(e,h.query))switch(a){case 0:h.h.call(s);break;case 1:h.h.call(s,t[0]);break;case 2:h.h.call(s,t[0],t[1]);break;default:h.h.apply(s,t.slice(1,a-1))}}}return i&&i.afterTrigger&&i.afterTrigger(e),this},e}(),AC=Math.log(2);function AT(e,t,n,r,i,a){var s=r+"-"+i,u=e.length;if(a.hasOwnProperty(s))return a[s];if(1===t){var c=Math.round(Math.log((1<<u)-1&~i)/AC);return e[n][c]}for(var h=r|1<<n,p=n+1;r&1<<p;)p++;for(var f=0,v=0,y=0;v<u;v++){var _=1<<v;!(_&i)&&(f+=(y%2?-1:1)*e[n][v]*AT(e,t-1,p,h,i|_,a),y++)}return a[s]=f,f}function AE(e,t){var n=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],r={},i=AT(n,8,0,0,0,r);if(0!==i){for(var a=[],s=0;s<8;s++)for(var u=0;u<8;u++)null==a[u]&&(a[u]=0),a[u]+=((s+u)%2?-1:1)*AT(n,7,0===s?1:0,1<<s,1<<u,r)/i*t[s];return function(e,t,n){var r=t*a[6]+n*a[7]+1;e[0]=(t*a[0]+n*a[1]+a[2])/r,e[1]=(t*a[3]+n*a[4]+a[5])/r}}}var AI="___zrEVENTSAVED",AD=[];function AP(e,t,n,r,i){if(t.getBoundingClientRect&&w1.domSupported&&!AR(t)){var a=t[AI]||(t[AI]={}),s=function(e,t,n){for(var r=n?"invTrans":"trans",i=t[r],a=t.srcCoords,s=[],u=[],c=!0,h=0;h<4;h++){var p=e[h].getBoundingClientRect(),f=2*h,v=p.left,y=p.top;s.push(v,y),c=c&&a&&v===a[f]&&y===a[f+1],u.push(e[h].offsetLeft,e[h].offsetTop)}return c&&i?i:(t.srcCoords=s,t[r]=n?AE(u,s):AE(s,u))}(function(e,t){var n=t.markers;if(n)return n;n=t.markers=[];for(var r=["left","right"],i=["top","bottom"],a=0;a<4;a++){var s=document.createElement("div"),u=s.style,c=a%2,h=(a>>1)%2;u.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[c]+":0",i[h]+":0",r[1-c]+":auto",i[1-h]+":auto",""].join("!important;"),e.appendChild(s),n.push(s)}return n}(t,a),a,i);if(s)return s(e,n,r),!0}return!1}function AR(e){return"CANVAS"===e.nodeName.toUpperCase()}var AL=/([&<>"'])/g,AO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ak(e){return null==e?"":(e+"").replace(AL,function(e,t){return AO[t]})}var AB=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,AN=[],AF=w1.browser.firefox&&39>+w1.browser.version.split(".")[0];function Az(e,t,n,r){return n=n||{},r?AU(e,t,n):AF&&null!=t.layerX&&t.layerX!==t.offsetX?(n.zrX=t.layerX,n.zrY=t.layerY):null!=t.offsetX?(n.zrX=t.offsetX,n.zrY=t.offsetY):AU(e,t,n),n}function AU(e,t,n){if(w1.domSupported&&e.getBoundingClientRect){var r=t.clientX,i=t.clientY;if(AR(e)){var a=e.getBoundingClientRect();n.zrX=r-a.left,n.zrY=i-a.top;return}if(AP(AN,e,r,i)){n.zrX=AN[0],n.zrY=AN[1];return}}n.zrX=n.zrY=0}function AH(e){return e||window.event}function AG(e,t,n){if(null!=(t=AH(t)).zrX)return t;var r=t.type;if(r&&r.indexOf("touch")>=0){var i="touchend"!==r?t.targetTouches[0]:t.changedTouches[0];i&&Az(e,i,t,n)}else{Az(e,t,t,n);var a=function(e){var t=e.wheelDelta;if(t)return t;var n=e.deltaX,r=e.deltaY;if(null==n||null==r)return t;var i=0!==r?Math.abs(r):Math.abs(n);return 3*i*(r>0?-1:r<0?1:n>0?-1:1)}(t);t.zrDelta=a?a/120:-(t.detail||0)/3}var s=t.button;return null==t.which&&void 0!==s&&AB.test(t.type)&&(t.which=1&s?1:2&s?3:4&s?2:0),t}function AV(e,t,n,r){e.addEventListener(t,n,r)}var AW=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function Aj(e){return 2===e.which||3===e.which}var AX=function(){function e(){this._track=[]}return e.prototype.recognize=function(e,t,n){return this._doTrack(e,t,n),this._recognize(e)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(e,t,n){var r=e.touches;if(!!r){for(var i={points:[],touches:[],target:t,event:e},a=0,s=r.length;a<s;a++){var u=r[a],c=Az(n,u,{});i.points.push([c.zrX,c.zrY]),i.touches.push(u)}this._track.push(i)}},e.prototype._recognize=function(e){for(var t in AJ)if(AJ.hasOwnProperty(t)){var n=AJ[t](this._track,e);if(n)return n}},e}();function AY(e){var t=e[1][0]-e[0][0],n=e[1][1]-e[0][1];return Math.sqrt(t*t+n*n)}var AJ={pinch:function(e,t){var n=e.length;if(!!n){var r=(e[n-1]||{}).points,i=(e[n-2]||{}).points||r;if(i&&i.length>1&&r&&r.length>1){var a,s=AY(r)/AY(i);isFinite(s)||(s=1),t.pinchScale=s;var u=[((a=r)[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2];return t.pinchX=u[0],t.pinchY=u[1],{type:"pinch",target:e[0].target,event:t}}}}};function AZ(){return[1,0,0,1,0,0]}function Aq(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function AK(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function AQ(e,t,n){var r=t[0]*n[0]+t[2]*n[1],i=t[1]*n[0]+t[3]*n[1],a=t[0]*n[2]+t[2]*n[3],s=t[1]*n[2]+t[3]*n[3],u=t[0]*n[4]+t[2]*n[5]+t[4],c=t[1]*n[4]+t[3]*n[5]+t[5];return e[0]=r,e[1]=i,e[2]=a,e[3]=s,e[4]=u,e[5]=c,e}function A$(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e}function A0(e,t,n,r){void 0===r&&(r=[0,0]);var i=t[0],a=t[2],s=t[4],u=t[1],c=t[3],h=t[5],p=Math.sin(n),f=Math.cos(n);return e[0]=i*f+u*p,e[1]=-i*p+u*f,e[2]=a*f+c*p,e[3]=-a*p+f*c,e[4]=f*(s-r[0])+p*(h-r[1])+r[0],e[5]=f*(h-r[1])-p*(s-r[0])+r[1],e}function A1(e,t,n){var r=n[0],i=n[1];return e[0]=t[0]*r,e[1]=t[1]*i,e[2]=t[2]*r,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*i,e}function A2(e,t){var n=t[0],r=t[2],i=t[4],a=t[1],s=t[3],u=t[5],c=n*s-a*r;return c?(c=1/c,e[0]=s*c,e[1]=-a*c,e[2]=-r*c,e[3]=n*c,e[4]=(r*u-s*i)*c,e[5]=(a*i-n*u)*c,e):null}function A3(e){var t=AZ();return AK(t,e),t}let A5=function(){function e(e,t){this.x=e||0,this.y=t||0}return e.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(e,t){return this.x=e,this.y=t,this},e.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},e.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},e.prototype.scale=function(e){this.x*=e,this.y*=e},e.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},e.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},e.prototype.dot=function(e){return this.x*e.x+this.y*e.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},e.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},e.prototype.distanceSquare=function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(e){if(!!e){var t=this.x,n=this.y;return this.x=e[0]*t+e[2]*n+e[4],this.y=e[1]*t+e[3]*n+e[5],this}},e.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},e.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},e.set=function(e,t,n){e.x=t,e.y=n},e.copy=function(e,t){e.x=t.x,e.y=t.y},e.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},e.lenSquare=function(e){return e.x*e.x+e.y*e.y},e.dot=function(e,t){return e.x*t.x+e.y*t.y},e.add=function(e,t,n){e.x=t.x+n.x,e.y=t.y+n.y},e.sub=function(e,t,n){e.x=t.x-n.x,e.y=t.y-n.y},e.scale=function(e,t,n){e.x=t.x*n,e.y=t.y*n},e.scaleAndAdd=function(e,t,n,r){e.x=t.x+n.x*r,e.y=t.y+n.y*r},e.lerp=function(e,t,n,r){var i=1-r;e.x=i*t.x+r*n.x,e.y=i*t.y+r*n.y},e}();var A4=Math.min,A6=Math.max,A9=new A5,A8=new A5,A7=new A5,Ce=new A5,Ct=new A5,Cn=new A5;let Cr=function(){function e(e,t,n,r){n<0&&(e+=n,n=-n),r<0&&(t+=r,r=-r),this.x=e,this.y=t,this.width=n,this.height=r}return e.prototype.union=function(e){var t=A4(e.x,this.x),n=A4(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=A6(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=A6(e.y+e.height,this.y+this.height)-n:this.height=e.height,this.x=t,this.y=n},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(e){var t=e.width/this.width,n=e.height/this.height,r=AZ();return A$(r,r,[-this.x,-this.y]),A1(r,r,[t,n]),A$(r,r,[e.x,e.y]),r},e.prototype.intersect=function(t,n){if(!t)return!1;!(t instanceof e)&&(t=e.create(t));var r=this.x,i=this.x+this.width,a=this.y,s=this.y+this.height,u=t.x,c=t.x+t.width,h=t.y,p=t.y+t.height,f=!(i<u||c<r||s<h||p<a);if(n){var v=1/0,y=0,_=Math.abs(i-u),x=Math.abs(c-r),b=Math.abs(s-h),S=Math.abs(p-a),w=Math.min(_,x),M=Math.min(b,S);i<u||c<r?w>y&&(y=w,_<x?A5.set(Cn,-_,0):A5.set(Cn,x,0)):w<v&&(v=w,_<x?A5.set(Ct,_,0):A5.set(Ct,-x,0)),s<h||p<a?M>y&&(y=M,b<S?A5.set(Cn,0,-b):A5.set(Cn,0,S)):w<v&&(v=w,b<S?A5.set(Ct,0,b):A5.set(Ct,0,-S))}return n&&A5.copy(n,f?Ct:Cn),f},e.prototype.contain=function(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return 0===this.width||0===this.height},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},e.applyTransform=function(t,n,r){if(!r){t!==n&&e.copy(t,n);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var i=r[0],a=r[3],s=r[4],u=r[5];t.x=n.x*i+s,t.y=n.y*a+u,t.width=n.width*i,t.height=n.height*a,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}A9.x=A7.x=n.x,A9.y=Ce.y=n.y,A8.x=Ce.x=n.x+n.width,A8.y=A7.y=n.y+n.height,A9.transform(r),Ce.transform(r),A8.transform(r),A7.transform(r),t.x=A4(A9.x,A8.x,A7.x,Ce.x),t.y=A4(A9.y,A8.y,A7.y,Ce.y);var c=A6(A9.x,A8.x,A7.x,Ce.x),h=A6(A9.y,A8.y,A7.y,Ce.y);t.width=c-t.x,t.height=h-t.y},e}();var Ci="silent";function Ca(){AW(this.event)}var Co=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handler=null,t}return wJ(t,e),t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(AA),Cs=function(e,t){this.x=e,this.y=t},Cl=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Cu=new Cr(0,0,0,0),Cc=function(e){function t(t,n,r,i,a){var s=e.call(this)||this;return s._hovered=new Cs(0,0),s.storage=t,s.painter=n,s.painterRoot=i,s._pointerSize=a,r=r||new Co,s.proxy=null,s.setHandlerProxy(r),s._draggingMgr=new AM(s),s}return wJ(t,e),t.prototype.setHandlerProxy=function(e){this.proxy&&this.proxy.dispose(),e&&(Mb(Cl,function(t){e.on&&e.on(t,this[t],this)},this),e.handler=this),this.proxy=e},t.prototype.mousemove=function(e){var t=e.zrX,n=e.zrY,r=Cd(this,t,n),i=this._hovered,a=i.target;a&&!a.__zr&&(a=(i=this.findHover(i.x,i.y)).target);var s=this._hovered=r?new Cs(t,n):this.findHover(t,n),u=s.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),a&&u!==a&&this.dispatchToElement(i,"mouseout",e),this.dispatchToElement(s,"mousemove",e),u&&u!==a&&this.dispatchToElement(s,"mouseover",e)},t.prototype.mouseout=function(e){var t=e.zrEventControl;"only_globalout"!==t&&this.dispatchToElement(this._hovered,"mouseout",e),"no_globalout"!==t&&this.trigger("globalout",{type:"globalout",event:e})},t.prototype.resize=function(){this._hovered=new Cs(0,0)},t.prototype.dispatch=function(e,t){var n=this[e];n&&n.call(this,t)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(e){var t=this.proxy;t.setCursor&&t.setCursor(e)},t.prototype.dispatchToElement=function(e,t,n){var r,i,a,s=(e=e||{}).target;if(!s||!s.silent){var u="on"+t;for(var c=(r=t,i=e,{type:r,event:a=n,target:i.target,topTarget:i.topTarget,cancelBubble:!1,offsetX:a.zrX,offsetY:a.zrY,gestureEvent:a.gestureEvent,pinchX:a.pinchX,pinchY:a.pinchY,pinchScale:a.pinchScale,wheelDelta:a.zrDelta,zrByTouch:a.zrByTouch,which:a.which,stop:Ca});s&&(s[u]&&(c.cancelBubble=!!s[u].call(s,c)),s.trigger(t,c),s=s.__hostTarget?s.__hostTarget:s.parent,!c.cancelBubble););!c.cancelBubble&&(this.trigger(t,c),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(e){"function"==typeof e[u]&&e[u].call(e,c),e.trigger&&e.trigger(t,c)}))}},t.prototype.findHover=function(e,t,n){var r=this.storage.getDisplayList(),i=new Cs(e,t);if(Ch(r,i,e,t,n),this._pointerSize&&!i.target){for(var a=[],s=this._pointerSize,u=s/2,c=new Cr(e-u,t-u,s,s),h=r.length-1;h>=0;h--){var p=r[h];p!==n&&!p.ignore&&!p.ignoreCoarsePointer&&(!p.parent||!p.parent.ignoreCoarsePointer)&&(Cu.copy(p.getBoundingRect()),p.transform&&Cu.applyTransform(p.transform),Cu.intersect(c)&&a.push(p))}if(a.length){for(var f=Math.PI/12,v=2*Math.PI,y=0;y<u;y+=4)for(var _=0;_<v;_+=f)if(Ch(a,i,e+y*Math.cos(_),t+y*Math.sin(_),n),i.target)return i}}return i},t.prototype.processGesture=function(e,t){!this._gestureMgr&&(this._gestureMgr=new AX);var n=this._gestureMgr;"start"===t&&n.clear();var r=n.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if("end"===t&&n.clear(),r){var i=r.type;e.gestureEvent=i;var a=new Cs;a.target=r.target,this.dispatchToElement(a,i,r.event)}},t}(AA);Mb(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){Cc.prototype[e]=function(t){var n,r,i=t.zrX,a=t.zrY,s=Cd(this,i,a);if(("mouseup"!==e||!s)&&(r=(n=this.findHover(i,a)).target),"mousedown"===e)this._downEl=r,this._downPoint=[t.zrX,t.zrY],this._upEl=r;else if("mouseup"===e)this._upEl=r;else if("click"===e){if(this._downEl!==this._upEl||!this._downPoint||Ag(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(n,e,t)}});function Ch(e,t,n,r,i){for(var a=e.length-1;a>=0;a--){var s=e[a],u=void 0;if(s!==i&&!s.ignore&&(u=function(e,t,n){if(e[e.rectHover?"rectContain":"contain"](t,n)){for(var r=e,i=void 0,a=!1;r;){if(r.ignoreClip&&(a=!0),!a){var s=r.getClipPath();if(s&&!s.contain(t,n))return!1}r.silent&&(i=!0);var u=r.__hostTarget;r=u||r.parent}return!i||Ci}return!1}(s,n,r))&&(t.topTarget||(t.topTarget=s),u!==Ci)){t.target=s;break}}}function Cd(e,t,n){var r=e.painter;return t<0||t>r.getWidth()||n<0||n>r.getHeight()}function Cp(e,t,n,r){var i=t+1;if(i===n)return 1;if(0>r(e[i++],e[t])){for(;i<n&&0>r(e[i],e[i-1]);)i++;(function(e,t,n){for(n--;t<n;){var r=e[t];e[t++]=e[n],e[n--]=r}})(e,t,i)}else for(;i<n&&r(e[i],e[i-1])>=0;)i++;return i-t}function Cf(e,t,n,r,i){for(r===t&&r++;r<n;r++){for(var a,s=e[r],u=t,c=r;u<c;)0>i(s,e[a=u+c>>>1])?c=a:u=a+1;var h=r-u;switch(h){case 3:e[u+3]=e[u+2];case 2:e[u+2]=e[u+1];case 1:e[u+1]=e[u];break;default:for(;h>0;)e[u+h]=e[u+h-1],h--}e[u]=s}}function Cg(e,t,n,r,i,a){var s=0,u=0,c=1;if(a(e,t[n+i])>0){for(u=r-i;c<u&&a(e,t[n+i+c])>0;)s=c,(c=(c<<1)+1)<=0&&(c=u);c>u&&(c=u),s+=i,c+=i}else{for(u=i+1;c<u&&0>=a(e,t[n+i-c]);)s=c,(c=(c<<1)+1)<=0&&(c=u);c>u&&(c=u);var h=s;s=i-c,c=i-h}for(s++;s<c;){var p=s+(c-s>>>1);a(e,t[n+p])>0?s=p+1:c=p}return c}function Cm(e,t,n,r,i,a){var s=0,u=0,c=1;if(0>a(e,t[n+i])){for(u=i+1;c<u&&0>a(e,t[n+i-c]);)s=c,(c=(c<<1)+1)<=0&&(c=u);c>u&&(c=u);var h=s;s=i-c,c=i-h}else{for(u=r-i;c<u&&a(e,t[n+i+c])>=0;)s=c,(c=(c<<1)+1)<=0&&(c=u);c>u&&(c=u),s+=i,c+=i}for(s++;s<c;){var p=s+(c-s>>>1);0>a(e,t[n+p])?c=p:s=p+1}return c}function Cv(e,t,n,r){!n&&(n=0),!r&&(r=e.length);var i=r-n;if(!(i<2)){var a=0;if(i<32){a=Cp(e,n,r,t),Cf(e,n,r,n+a,t);return}var s=function(e,t){var n,r,i=7,a=0,s=[];n=[],r=[];function u(u){var c=n[u],h=r[u],p=n[u+1],f=r[u+1];r[u]=h+f,u===a-3&&(n[u+1]=n[u+2],r[u+1]=r[u+2]),a--;var v=Cm(e[p],e,c,h,0,t);if(c+=v,0!=(h-=v)&&0!==(f=Cg(e[c+h-1],e,p,f,f-1,t)))h<=f?function(n,r,a,u){var c,h,p,f=0;for(f=0;f<r;f++)s[f]=e[n+f];var v=0,y=a,_=n;if(e[_++]=e[y++],0==--u){for(f=0;f<r;f++)e[_+f]=s[v+f];return}if(1===r){for(f=0;f<u;f++)e[_+f]=e[y+f];e[_+u]=s[v];return}for(var x=i;;){c=0,h=0,p=!1;do if(0>t(e[y],s[v])){if(e[_++]=e[y++],h++,c=0,0==--u){p=!0;break}}else if(e[_++]=s[v++],c++,h=0,1==--r){p=!0;break}while((c|h)<x);if(p)break;do{if(0!==(c=Cm(e[y],s,v,r,0,t))){for(f=0;f<c;f++)e[_+f]=s[v+f];if(_+=c,v+=c,(r-=c)<=1){p=!0;break}}if(e[_++]=e[y++],0==--u){p=!0;break}if(0!==(h=Cg(s[v],e,y,u,0,t))){for(f=0;f<h;f++)e[_+f]=e[y+f];if(_+=h,y+=h,0==(u-=h)){p=!0;break}}if(e[_++]=s[v++],1==--r){p=!0;break}x--}while(c>=7||h>=7);if(p)break;x<0&&(x=0),x+=2}if((i=x)<1&&(i=1),1===r){for(f=0;f<u;f++)e[_+f]=e[y+f];e[_+u]=s[v]}else if(0===r)throw Error();else for(f=0;f<r;f++)e[_+f]=s[v+f]}(c,h,p,f):function(n,r,a,u){var c=0;for(c=0;c<u;c++)s[c]=e[a+c];var h=n+r-1,p=u-1,f=a+u-1,v=0,y=0;if(e[f--]=e[h--],0==--r){for(c=0,v=f-(u-1);c<u;c++)e[v+c]=s[c];return}if(1===u){for(f-=r,h-=r,y=f+1,v=h+1,c=r-1;c>=0;c--)e[y+c]=e[v+c];e[f]=s[p];return}for(var _=i;;){var x=0,b=0,S=!1;do if(0>t(s[p],e[h])){if(e[f--]=e[h--],x++,b=0,0==--r){S=!0;break}}else if(e[f--]=s[p--],b++,x=0,1==--u){S=!0;break}while((x|b)<_);if(S)break;do{if(0!=(x=r-Cm(s[p],e,n,r,r-1,t))){for(f-=x,h-=x,r-=x,y=f+1,v=h+1,c=x-1;c>=0;c--)e[y+c]=e[v+c];if(0===r){S=!0;break}}if(e[f--]=s[p--],1==--u){S=!0;break}if(0!=(b=u-Cg(e[h],s,0,u,u-1,t))){for(f-=b,p-=b,u-=b,y=f+1,v=p+1,c=0;c<b;c++)e[y+c]=s[v+c];if(u<=1){S=!0;break}}if(e[f--]=e[h--],0==--r){S=!0;break}_--}while(x>=7||b>=7);if(S)break;_<0&&(_=0),_+=2}if((i=_)<1&&(i=1),1===u){for(f-=r,h-=r,y=f+1,v=h+1,c=r-1;c>=0;c--)e[y+c]=e[v+c];e[f]=s[p]}else if(0===u)throw Error();else for(c=0,v=f-(u-1);c<u;c++)e[v+c]=s[c]}(c,h,p,f)}return{mergeRuns:function(){for(;a>1;){var e=a-2;if(e>=1&&r[e-1]<=r[e]+r[e+1]||e>=2&&r[e-2]<=r[e]+r[e-1])r[e-1]<r[e+1]&&e--;else if(r[e]>r[e+1])break;u(e)}},forceMergeRuns:function(){for(;a>1;){var e=a-2;e>0&&r[e-1]<r[e+1]&&e--,u(e)}},pushRun:function(e,t){n[a]=e,r[a]=t,a+=1}}}(e,t),u=function(e){for(var t=0;e>=32;)t|=1&e,e>>=1;return e+t}(i);do{if((a=Cp(e,n,r,t))<u){var c=i;c>u&&(c=u),Cf(e,n,n+c,n+a,t),a=c}s.pushRun(n,a),s.mergeRuns(),i-=a,n+=a}while(0!==i);s.forceMergeRuns()}}var Cy=!1;function C_(){if(!Cy)Cy=!0}function Cx(e,t){if(e.zlevel===t.zlevel)return e.z===t.z?e.z2-t.z2:e.z-t.z;return e.zlevel-t.zlevel}var Cb=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=Cx}return e.prototype.traverse=function(e,t){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(e,t)},e.prototype.getDisplayList=function(e,t){t=t||!1;var n=this._displayList;return(e||!n.length)&&this.updateDisplayList(t),n},e.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,n=this._displayList,r=0,i=t.length;r<i;r++)this._updateAndAddDisplayable(t[r],null,e);n.length=this._displayListLen,Cv(n,Cx)},e.prototype._updateAndAddDisplayable=function(e,t,n){if(!e.ignore||!!n){e.beforeUpdate(),e.update(),e.afterUpdate();var r=e.getClipPath();if(e.ignoreClip)t=null;else if(r){t=t?t.slice():[];for(var i=r,a=e;i;)i.parent=a,i.updateTransform(),t.push(i),a=i,i=i.getClipPath()}if(e.childrenRef){for(var s=e.childrenRef(),u=0;u<s.length;u++){var c=s[u];e.__dirty&&(c.__dirty|=1),this._updateAndAddDisplayable(c,t,n)}e.__dirty=0}else t&&t.length?e.__clipPaths=t:e.__clipPaths&&e.__clipPaths.length>0&&(e.__clipPaths=[]),isNaN(e.z)&&(C_(),e.z=0),isNaN(e.z2)&&(C_(),e.z2=0),isNaN(e.zlevel)&&(C_(),e.zlevel=0),this._displayList[this._displayListLen++]=e;var h=e.getDecalElement&&e.getDecalElement();h&&this._updateAndAddDisplayable(h,t,n);var p=e.getTextGuideLine();p&&this._updateAndAddDisplayable(p,t,n);var f=e.getTextContent();f&&this._updateAndAddDisplayable(f,t,n)}},e.prototype.addRoot=function(e){if(!e.__zr||e.__zr.storage!==this)this._roots.push(e)},e.prototype.delRoot=function(e){if(e instanceof Array){for(var t=0,n=e.length;t<n;t++)this.delRoot(e[t]);return}var r=Mv(this._roots,e);r>=0&&this._roots.splice(r,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}();eR=w1.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};var CS={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return 0===e?0:Math.pow(1024,e-1)},exponentialOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(e-=1))*Math.sin(2*Math.PI*(e-t)/.4)))},elasticOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin(2*Math.PI*(e-t)/.4)+1)},elasticInOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1)?-.5*(n*Math.pow(2,10*(e-=1))*Math.sin(2*Math.PI*(e-t)/.4)):n*Math.pow(2,-10*(e-=1))*Math.sin(2*Math.PI*(e-t)/.4)*.5+1},backIn:function(e){return e*e*(2.70158*e-1.70158)},backOut:function(e){return--e*e*(2.70158*e+1.70158)+1},backInOut:function(e){return(e*=2)<1?e*e*(3.5949095*e-2.5949095)*.5:.5*((e-=2)*e*(3.5949095*e+2.5949095)+2)},bounceIn:function(e){return 1-CS.bounceOut(1-e)},bounceOut:function(e){if(e<1/2.75)return 7.5625*e*e;if(e<2/2.75)return 7.5625*(e-=1.5/2.75)*e+.75;if(e<2.5/2.75)return 7.5625*(e-=2.25/2.75)*e+.9375;else return 7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?.5*CS.bounceIn(2*e):.5*CS.bounceOut(2*e-1)+.5}},Cw=Math.pow,CM=Math.sqrt,CA=CM(3),CC=1/3,CT=M8(),CE=M8(),CI=M8();function CD(e){return e>-1e-8&&e<1e-8}function CP(e){return e>1e-8||e<-1e-8}function CR(e,t,n,r,i){var a=1-i;return a*a*(a*e+3*i*t)+i*i*(i*r+3*a*n)}function CL(e,t,n,r,i){var a=1-i;return 3*(((t-e)*a+2*(n-t)*i)*a+(r-n)*i*i)}function CO(e,t,n,r,i,a){var s=r+3*(t-n)-e,u=3*(n-2*t+e),c=3*(t-e),h=e-i,p=u*u-3*s*c,f=u*c-9*s*h,v=c*c-3*u*h,y=0;if(CD(p)&&CD(f)){if(CD(u))a[0]=0;else{var _=-c/u;_>=0&&_<=1&&(a[y++]=_)}}else{var x=f*f-4*p*v;if(CD(x)){var b=f/p,_=-u/s+b,S=-b/2;_>=0&&_<=1&&(a[y++]=_),S>=0&&S<=1&&(a[y++]=S)}else if(x>0){var w=CM(x),M=p*u+1.5*s*(-f+w),A=p*u+1.5*s*(-f-w);M=M<0?-Cw(-M,CC):Cw(M,CC);var _=(-u-(M+(A=A<0?-Cw(-A,CC):Cw(A,CC))))/(3*s);_>=0&&_<=1&&(a[y++]=_)}else{var C=Math.acos((2*p*u-3*s*f)/(2*CM(p*p*p)))/3,T=CM(p),I=Math.cos(C),_=(-u-2*T*I)/(3*s),S=(-u+T*(I+CA*Math.sin(C)))/(3*s),D=(-u+T*(I-CA*Math.sin(C)))/(3*s);_>=0&&_<=1&&(a[y++]=_),S>=0&&S<=1&&(a[y++]=S),D>=0&&D<=1&&(a[y++]=D)}}return y}function Ck(e,t,n,r,i){var a=6*n-12*t+6*e,s=9*t+3*r-3*e-9*n,u=3*t-3*e,c=0;if(CD(s)){if(CP(a)){var h=-u/a;h>=0&&h<=1&&(i[c++]=h)}}else{var p=a*a-4*s*u;if(CD(p))i[0]=-a/(2*s);else if(p>0){var f=CM(p),h=(-a+f)/(2*s),v=(-a-f)/(2*s);h>=0&&h<=1&&(i[c++]=h),v>=0&&v<=1&&(i[c++]=v)}}return c}function CB(e,t,n,r,i,a){var s=(t-e)*i+e,u=(n-t)*i+t,c=(r-n)*i+n,h=(u-s)*i+s,p=(c-u)*i+u,f=(p-h)*i+h;a[0]=e,a[1]=s,a[2]=h,a[3]=f,a[4]=f,a[5]=p,a[6]=c,a[7]=r}function CN(e,t,n,r,i,a,s,u,c,h,p){var f,v,y,_,x,b=.005,S=1/0;CT[0]=c,CT[1]=h;for(var w=0;w<1;w+=.05)CE[0]=CR(e,n,i,s,w),CE[1]=CR(t,r,a,u,w),(_=Av(CT,CE))<S&&(f=w,S=_);S=1/0;for(var M=0;M<32&&!(b<1e-4);M++){;v=f-b,y=f+b,CE[0]=CR(e,n,i,s,v),CE[1]=CR(t,r,a,u,v),_=Av(CE,CT),v>=0&&_<S?(f=v,S=_):(CI[0]=CR(e,n,i,s,y),CI[1]=CR(t,r,a,u,y),x=Av(CI,CT),y<=1&&x<S?(f=y,S=x):b*=.5)}return p&&(p[0]=CR(e,n,i,s,f),p[1]=CR(t,r,a,u,f)),CM(S)}function CF(e,t,n,r){var i=1-r;return i*(i*e+2*r*t)+r*r*n}function Cz(e,t,n,r){return 2*((1-r)*(t-e)+r*(n-t))}function CU(e,t,n){var r=e+n-2*t;return 0===r?.5:(e-t)/r}function CH(e,t,n,r,i){var a=(t-e)*r+e,s=(n-t)*r+t,u=(s-a)*r+a;i[0]=e,i[1]=a,i[2]=u,i[3]=u,i[4]=s,i[5]=n}function CG(e,t,n,r,i,a,s,u,c){var h,p=.005,f=1/0;CT[0]=s,CT[1]=u;for(var v=0;v<1;v+=.05){CE[0]=CF(e,n,i,v),CE[1]=CF(t,r,a,v);var y=Av(CT,CE);y<f&&(h=v,f=y)}f=1/0;for(var _=0;_<32&&!(p<1e-4);_++){;var x=h-p,b=h+p;CE[0]=CF(e,n,i,x),CE[1]=CF(t,r,a,x);var y=Av(CE,CT);if(x>=0&&y<f)h=x,f=y;else{CI[0]=CF(e,n,i,b),CI[1]=CF(t,r,a,b);var S=Av(CI,CT);b<=1&&S<f?(h=b,f=S):p*=.5}}return c&&(c[0]=CF(e,n,i,h),c[1]=CF(t,r,a,h)),CM(f)}var CV=/cubic-bezier\(([0-9,\.e ]+)\)/;function CW(e){var t=e&&CV.exec(e);if(t){var n=t[1].split(","),r=+MJ(n[0]),i=+MJ(n[1]),a=+MJ(n[2]),s=+MJ(n[3]);if(isNaN(r+i+a+s))return;var u=[];return function(e){return e<=0?0:e>=1?1:CO(0,r,a,1,e,u)&&CR(0,i,s,1,u[0])}}}var Cj=function(){function e(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||M6,this.ondestroy=e.ondestroy||M6,this.onrestart=e.onrestart||M6,e.easing&&this.setEasing(e.easing)}return e.prototype.step=function(e,t){if(!this._inited&&(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=t;return}var n=this._life,r=e-this._startTime-this._pausedTime,i=r/n;i<0&&(i=0),i=Math.min(i,1);var a=this.easingFunc,s=a?a(i):i;if(this.onframe(s),1===i){if(!this.loop)return!0;this._startTime=e-r%n,this._pausedTime=0,this.onrestart()}return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(e){this.easing=e,this.easingFunc=MD(e)?e:CS[e]||CW(e)},e}(),CX=function(e){this.value=e},CY=function(){function e(){this._len=0}return e.prototype.insert=function(e){var t=new CX(e);return this.insertEntry(t),t},e.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},e.prototype.remove=function(e){var t=e.prev,n=e.next;t?t.next=n:this.head=n,n?n.prev=t:this.tail=t,e.next=e.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),CJ=function(){function e(e){this._list=new CY,this._maxSize=10,this._map={},this._maxSize=e}return e.prototype.put=function(e,t){var n=this._list,r=this._map,i=null;if(null==r[e]){var a=n.len(),s=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var u=n.head;n.remove(u),delete r[u.key],i=u.value,this._lastRemovedEntry=u}s?s.value=t:s=new CX(t),s.key=e,n.insertEntry(s),r[e]=s}return i},e.prototype.get=function(e){var t=this._map[e],n=this._list;if(null!=t)return t!==n.tail&&(n.remove(t),n.insertEntry(t)),t.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}(),CZ={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Cq(e){return(e=Math.round(e))<0?0:e>255?255:e}function CK(e){return e<0?0:e>1?1:e}function CQ(e){return e.length&&"%"===e.charAt(e.length-1)?Cq(parseFloat(e)/100*255):Cq(parseInt(e,10))}function C$(e){return e.length&&"%"===e.charAt(e.length-1)?CK(parseFloat(e)/100):CK(parseFloat(e))}function C0(e,t,n){return(n<0?n+=1:n>1&&(n-=1),6*n<1)?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function C1(e,t,n){return e+(t-e)*n}function C2(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function C3(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var C5=new CJ(20),C4=null;function C6(e,t){C4&&C3(C4,t),C4=C5.put(e,C4||t.slice())}function C9(e,t){if(!!e){t=t||[];var n=C5.get(e);if(n)return C3(t,n);var r=(e+="").replace(/ /g,"").toLowerCase();if(r in CZ)return C3(t,CZ[r]),C6(e,t),t;var i=r.length;if("#"===r.charAt(0)){if(4===i||5===i){var a=parseInt(r.slice(1,4),16);if(!(a>=0&&a<=4095)){C2(t,0,0,0,1);return}return C2(t,(3840&a)>>4|(3840&a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4,5===i?parseInt(r.slice(4),16)/15:1),C6(e,t),t}if(7===i||9===i){var a=parseInt(r.slice(1,7),16);if(!(a>=0&&a<=0xffffff)){C2(t,0,0,0,1);return}return C2(t,(0xff0000&a)>>16,(65280&a)>>8,255&a,9===i?parseInt(r.slice(7),16)/255:1),C6(e,t),t}return}var s=r.indexOf("("),u=r.indexOf(")");if(-1!==s&&u+1===i){var c=r.substr(0,s),h=r.substr(s+1,u-(s+1)).split(","),p=1;switch(c){case"rgba":if(4!==h.length)return 3===h.length?C2(t,+h[0],+h[1],+h[2],1):C2(t,0,0,0,1);p=C$(h.pop());case"rgb":if(h.length>=3)return C2(t,CQ(h[0]),CQ(h[1]),CQ(h[2]),3===h.length?p:C$(h[3])),C6(e,t),t;C2(t,0,0,0,1);return;case"hsla":if(4!==h.length){C2(t,0,0,0,1);return}return h[3]=C$(h[3]),C8(h,t),C6(e,t),t;case"hsl":if(3!==h.length){C2(t,0,0,0,1);return}return C8(h,t),C6(e,t),t;default:return}}C2(t,0,0,0,1)}}function C8(e,t){var n=(parseFloat(e[0])%360+360)%360/360,r=C$(e[1]),i=C$(e[2]),a=i<=.5?i*(r+1):i+r-i*r,s=2*i-a;return C2(t=t||[],Cq(255*C0(s,a,n+1/3)),Cq(255*C0(s,a,n)),Cq(255*C0(s,a,n-1/3)),1),4===e.length&&(t[3]=e[3]),t}function C7(e,t){var n=C9(e);if(n){for(var r=0;r<3;r++)t<0?n[r]=n[r]*(1-t)|0:n[r]=(255-n[r])*t+n[r]|0,n[r]>255?n[r]=255:n[r]<0&&(n[r]=0);return Ts(n,4===n.length?"rgba":"rgb")}}function Te(e){var t=C9(e);if(t)return(0x1000000+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)}function Tt(e,t,n){if(!!(t&&t.length)&&!!(e>=0&&e<=1)){n=n||[];var r,i,a,s,u,c,h,p,f=e*(t.length-1),v=Math.floor(f),y=Math.ceil(f),_=t[v],x=t[y],b=f-v;return n[0]=Cq((r=_[0],i=x[0],r+(i-r)*b)),n[1]=Cq((a=_[1],s=x[1],a+(s-a)*b)),n[2]=Cq((u=_[2],c=x[2],u+(c-u)*b)),n[3]=CK((h=_[3],p=x[3],h+(p-h)*b)),n}}var Tn=Tt;function Tr(e,t,n){if(!!(t&&t.length)&&!!(e>=0&&e<=1)){var r,i,a,s,u,c,h,p,f=e*(t.length-1),v=Math.floor(f),y=Math.ceil(f),_=C9(t[v]),x=C9(t[y]),b=f-v;var S=Ts([Cq((r=_[0],i=x[0],r+(i-r)*b)),Cq((a=_[1],s=x[1],a+(s-a)*b)),Cq((u=_[2],c=x[2],u+(c-u)*b)),CK((h=_[3],p=x[3],h+(p-h)*b))],"rgba");return n?{color:S,leftIndex:v,rightIndex:y,value:f}:S}}var Ti=Tr;function Ta(e,t,n,r){var i,a=C9(e);if(e){;return a=function(e){if(!!e){var t,n,r=e[0]/255,i=e[1]/255,a=e[2]/255,s=Math.min(r,i,a),u=Math.max(r,i,a),c=u-s,h=(u+s)/2;if(0===c)t=0,n=0;else{n=h<.5?c/(u+s):c/(2-u-s);var p=((u-r)/6+c/2)/c,f=((u-i)/6+c/2)/c,v=((u-a)/6+c/2)/c;r===u?t=v-f:i===u?t=1/3+p-v:a===u&&(t=2/3+f-p),t<0&&(t+=1),t>1&&(t-=1)}var y=[360*t,n,h];return null!=e[3]&&y.push(e[3]),y}}(a),null!=t&&(a[0]=(i=Math.round(i=t))<0?0:i>360?360:i),null!=n&&(a[1]=C$(n)),null!=r&&(a[2]=C$(r)),Ts(C8(a),"rgba")}}function To(e,t){var n=C9(e);if(n&&null!=t)return n[3]=CK(t),Ts(n,"rgba")}function Ts(e,t){if(!!e&&!!e.length){var n=e[0]+","+e[1]+","+e[2];return("rgba"===t||"hsva"===t||"hsla"===t)&&(n+=","+e[3]),t+"("+n+")"}}function Tl(e,t){var n=C9(e);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*t:0}function Tu(){return Ts([Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())],"rgb")}var Tc=new CJ(100);function Th(e){if(MP(e)){var t=Tc.get(e);return!t&&(t=C7(e,-.1),Tc.put(e,t)),t}if(MF(e)){var n=Mf({},e);return n.colorStops=MS(e.colorStops,function(e){return{offset:e.offset,color:C7(e.color,-.1)}}),n}return e}var Td=Math.round;function Tp(e){var t;if(e&&"transparent"!==e){if("string"==typeof e&&e.indexOf("rgba")>-1){var n=C9(e);n&&(e="rgb("+n[0]+","+n[1]+","+n[2]+")",t=n[3])}}else e="none";return{color:e,opacity:null==t?1:t}}function Tf(e){return e<1e-4&&e>-1e-4}function Tg(e){return Td(1e3*e)/1e3}function Tm(e){return Td(1e4*e)/1e4}var Tv={left:"start",right:"end",center:"middle",middle:"middle"};function Ty(e){return e&&!!e.image}function T_(e){var t;return Ty(e)||(t=e)&&!!t.svgElement}function Tx(e){return"linear"===e.type}function Tb(e){return"radial"===e.type}function TS(e){return e&&("linear"===e.type||"radial"===e.type)}function Tw(e){return"url(#"+e+")"}function TM(e){var t=e.getGlobalScale();return Math.max(Math.ceil(Math.log(Math.max(t[0],t[1]))/Math.log(10)),1)}function TA(e){var t=e.x||0,n=e.y||0,r=(e.rotation||0)*M9,i=MV(e.scaleX,1),a=MV(e.scaleY,1),s=e.skewX||0,u=e.skewY||0,c=[];return(t||n)&&c.push("translate("+t+"px,"+n+"px)"),r&&c.push("rotate("+r+")"),(1!==i||1!==a)&&c.push("scale("+i+","+a+")"),(s||u)&&c.push("skew("+Td(s*M9)+"deg, "+Td(u*M9)+"deg)"),c.join(" ")}var TC=w1.hasGlobalWindow&&MD(window.btoa)?function(e){return window.btoa(unescape(encodeURIComponent(e)))}:"undefined"!=typeof Buffer?function(e){return Buffer.from(e).toString("base64")}:function(e){return null},TT=Array.prototype.slice;function TE(e,t,n){return(t-e)*n+e}function TI(e,t,n,r){for(var i,a,s=t.length,u=0;u<s;u++){;e[u]=(i=t[u],a=n[u],(a-i)*r+i)}return e}function TD(e,t,n,r){for(var i=t.length,a=0;a<i;a++)e[a]=t[a]+n[a]*r;return e}function TP(e,t,n,r){for(var i=t.length,a=i&&t[0].length,s=0;s<i;s++){!e[s]&&(e[s]=[]);for(var u=0;u<a;u++)e[s][u]=t[s][u]+n[s][u]*r}return e}function TR(e){if(Mx(e)){var t=e.length;if(Mx(e[0])){for(var n=[],r=0;r<t;r++)n.push(TT.call(e[r]));return n}return TT.call(e)}return e}function TL(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=null==e[3]?1:e[3],"rgba("+e.join(",")+")"}function TO(e){return 4===e||5===e}function Tk(e){return 1===e||2===e}var TB=[0,0,0,0],TN=function(){function e(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(e,t,n){this._needsSort=!0;var r,i=this.keyframes,a=i.length,s=!1,u=6,c=t;if(Mx(t)){var h,p=Mx((h=t)&&h[0])?2:1;u=p,(1===p&&!ML(t[0])||2===p&&!ML(t[0][0]))&&(s=!0)}else{;if(ML(t)&&!((r=t)!=r))u=0;else if(MP(t)){if(isNaN(+t)){var f=C9(t);f&&(c=f,u=3)}else u=0}else if(MF(t)){var v=Mf({},c);v.colorStops=MS(t.colorStops,function(e){return{offset:e.offset,color:C9(e.color)}}),Tx(t)?u=4:Tb(t)&&(u=5),c=v}}0===a?this.valType=u:(u!==this.valType||6===u)&&(s=!0),this.discrete=this.discrete||s;var y={time:e,value:c,rawValue:t,percent:0};return n&&(y.easing=n,y.easingFunc=MD(n)?n:CS[n]||CW(n)),i.push(y),y},e.prototype.prepare=function(e,t){var n=this.keyframes;this._needsSort&&n.sort(function(e,t){return e.time-t.time});for(var r=this.valType,i=n.length,a=n[i-1],s=this.discrete,u=Tk(r),c=TO(r),h=0;h<i;h++){var p=n[h],f=p.value,v=a.value;p.percent=p.time/e,!s&&(u&&h!==i-1?!function(e,t,n){if(!!e.push&&!!t.push){var r=e.length,i=t.length;if(r!==i){if(r>i)e.length=i;else for(var a=r;a<i;a++)e.push(1===n?t[a]:TT.call(t[a]))}for(var s=e[0]&&e[0].length,a=0;a<e.length;a++)if(1===n)isNaN(e[a])&&(e[a]=t[a]);else for(var u=0;u<s;u++)isNaN(e[a][u])&&(e[a][u]=t[a][u])}}(f,v,r):c&&!function(e,t){for(var n=e.length,r=t.length,i=n>r?t:e,a=Math.min(n,r),s=i[a-1]||{color:[0,0,0,0],offset:0},u=a;u<Math.max(n,r);u++)i.push({offset:s.offset,color:s.color.slice()})}(f.colorStops,v.colorStops))}if(!s&&5!==r&&t&&this.needsAnimate()&&t.needsAnimate()&&r===t.valType&&!t._finished){this._additiveTrack=t;for(var y=n[0].value,h=0;h<i;h++)0===r?n[h].additiveValue=n[h].value-y:3===r?n[h].additiveValue=TD([],n[h].value,y,-1):Tk(r)&&(n[h].additiveValue=1===r?TD([],n[h].value,y,-1):TP([],n[h].value,y,-1))}},e.prototype.step=function(e,t){if(this._finished)return;this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n,r,i,a=null!=this._additiveTrack,s=a?"additiveValue":"value",u=this.valType,c=this.keyframes,h=c.length,p=this.propName,f=3===u,v=this._lastFr,y=Math.min;if(1===h)r=i=c[0];else{if(t<0)n=0;else if(t<this._lastFrP){;for(n=y(v+1,h-1);n>=0&&!(c[n].percent<=t);n--);n=y(n,h-2)}else{for(n=v;n<h&&!(c[n].percent>t);n++);n=y(n-1,h-2)}i=c[n+1],r=c[n]}if(!!(r&&i)){this._lastFr=n,this._lastFrP=t;var _=i.percent-r.percent,x=0===_?1:y((t-r.percent)/_,1);i.easingFunc&&(x=i.easingFunc(x));var b=a?this._additiveValue:f?TB:e[p];if((Tk(u)||f)&&!b&&(b=this._additiveValue=[]),this.discrete)e[p]=x<1?r.rawValue:i.rawValue;else if(Tk(u))1===u?TI(b,r[s],i[s],x):function(e,t,n,r){for(var i=t.length,a=i&&t[0].length,s=0;s<i;s++){!e[s]&&(e[s]=[]);for(var u,c,h=0;h<a;h++){;e[s][h]=(u=t[s][h],c=n[s][h],(c-u)*r+u)}}return e}(b,r[s],i[s],x);else if(TO(u)){var S,w,M,A,C,T,I,D,P,R,L,O=r[s],k=i[s],B=4===u;if(e[p]={type:B?"linear":"radial",x:(w=O.x,M=k.x,(M-w)*x+w),y:(A=O.y,C=k.y,(C-A)*x+A),colorStops:MS(O.colorStops,function(e,t){var n,r,i=k.colorStops[t];return{offset:(n=e.offset,r=i.offset,(r-n)*x+n),color:TL(TI([],e.color,i.color,x))}}),global:k.global},B){;e[p].x2=(T=O.x2,I=k.x2,(I-T)*x+T),e[p].y2=(D=O.y2,P=k.y2,(P-D)*x+D)}else{;e[p].r=(R=O.r,L=k.r,(L-R)*x+R)}}else if(f)TI(b,r[s],i[s],x),!a&&(e[p]=TL(b));else{var N,F,z=(N=r[s],F=i[s],(F-N)*x+N);a?this._additiveValue=z:e[p]=z}a&&this._addToTarget(e)}},e.prototype._addToTarget=function(e){var t=this.valType,n=this.propName,r=this._additiveValue;0===t?e[n]=e[n]+r:3===t?(C9(e[n],TB),TD(TB,TB,r,1),e[n]=TL(TB)):1===t?TD(e[n],e[n],r,1):2===t&&TP(e[n],e[n],r,1)},e}(),TF=function(){function e(e,t,n,r){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&r){Mc("Can' use additive animation on looped animation.");return}this._additiveAnimators=r,this._allowDiscrete=n}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(e){this._target=e},e.prototype.when=function(e,t,n){return this.whenWithKeys(e,t,MC(t),n)},e.prototype.whenWithKeys=function(e,t,n,r){for(var i=this._tracks,a=0;a<n.length;a++){var s=n[a],u=i[s];if(!u){u=i[s]=new TN(s);var c=void 0,h=this._getAdditiveTrack(s);if(h){var p=h.keyframes,f=p[p.length-1];c=f&&f.value,3===h.valType&&c&&(c=TL(c))}else c=this._target[s];if(null==c)continue;e>0&&u.addKeyframe(0,TR(c),r),this._trackKeys.push(s)}u.addKeyframe(e,TR(t[s]),r)}return this._maxTime=Math.max(this._maxTime,e),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e){for(var t=e.length,n=0;n<t;n++)e[n].call(this)}},e.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var n=0;n<t.length;n++)t[n].call(this)},e.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,n=0;n<t.length;n++)e[t[n]].setFinished()},e.prototype._getAdditiveTrack=function(e){var t,n=this._additiveAnimators;if(n)for(var r=0;r<n.length;r++){var i=n[r].getTrack(e);i&&(t=i)}return t},e.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,n=[],r=this._maxTime||0,i=0;i<this._trackKeys.length;i++){var a=this._trackKeys[i],s=this._tracks[a],u=this._getAdditiveTrack(a),c=s.keyframes,h=c.length;if(s.prepare(r,u),s.needsAnimate()){if(!this._allowDiscrete&&s.discrete){var p=c[h-1];p&&(t._target[s.propName]=p.rawValue),s.setFinished()}else n.push(s)}}if(n.length||this._force){var f=new Cj({life:r,loop:this._loop,delay:this._delay||0,onframe:function(e){t._started=2;var r=t._additiveAnimators;if(r){for(var i=!1,a=0;a<r.length;a++)if(r[a]._clip){i=!0;break}!i&&(t._additiveAnimators=null)}for(var a=0;a<n.length;a++)n[a].step(t._target,e);var s=t._onframeCbs;if(s)for(var a=0;a<s.length;a++)s[a](t._target,e)},ondestroy:function(){t._doneCallback()}});this._clip=f,this.animation&&this.animation.addClip(f),e&&f.setEasing(e)}else this._doneCallback();return this}},e.prototype.stop=function(e){if(!!this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},e.prototype.delay=function(e){return this._delay=e,this},e.prototype.during=function(e){return e&&(!this._onframeCbs&&(this._onframeCbs=[]),this._onframeCbs.push(e)),this},e.prototype.done=function(e){return e&&(!this._doneCbs&&(this._doneCbs=[]),this._doneCbs.push(e)),this},e.prototype.aborted=function(e){return e&&(!this._abortedCbs&&(this._abortedCbs=[]),this._abortedCbs.push(e)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(e){return this._tracks[e]},e.prototype.getTracks=function(){var e=this;return MS(this._trackKeys,function(t){return e._tracks[t]})},e.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var n=this._tracks,r=this._trackKeys,i=0;i<e.length;i++){var a=n[e[i]];a&&!a.isFinished()&&(t?a.step(this._target,1):1===this._started&&a.step(this._target,0),a.setFinished())}for(var s=!0,i=0;i<r.length;i++)if(!n[r[i]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},e.prototype.saveTo=function(e,t,n){if(!!e){t=t||this._trackKeys;for(var r=0;r<t.length;r++){var i=t[r],a=this._tracks[i];if(!(!a||a.isFinished())){var s=a.keyframes,u=s[n?0:s.length-1];u&&(e[i]=TR(u.rawValue))}}}},e.prototype.__changeFinalValue=function(e,t){t=t||MC(e);for(var n=0;n<t.length;n++){var r=t[n],i=this._tracks[r];if(!!i){var a=i.keyframes;if(a.length>1){var s=a.pop();i.addKeyframe(s.time,e[r]),i.prepare(this._maxTime,i.getAdditiveTrack())}}}},e}();function Tz(){return new Date().getTime()}var TU=function(e){function t(t){var n=e.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,t=t||{},n.stage=t.stage||{},n}return wJ(t,e),t.prototype.addClip=function(e){e.animation&&this.removeClip(e),this._head?(this._tail.next=e,e.prev=this._tail,e.next=null,this._tail=e):this._head=this._tail=e,e.animation=this},t.prototype.addAnimator=function(e){e.animation=this;var t=e.getClip();t&&this.addClip(t)},t.prototype.removeClip=function(e){if(!!e.animation){var t=e.prev,n=e.next;t?t.next=n:this._head=n,n?n.prev=t:this._tail=t,e.next=e.prev=e.animation=null}},t.prototype.removeAnimator=function(e){var t=e.getClip();t&&this.removeClip(t),e.animation=null},t.prototype.update=function(e){for(var t=Tz()-this._pausedTime,n=t-this._time,r=this._head;r;){var i=r.next;r.step(t,n)&&(r.ondestroy(),this.removeClip(r)),r=i}this._time=t,!e&&(this.trigger("frame",n),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var e=this;this._running=!0;eR(function t(){e._running&&(eR(t),e._paused||e.update())})},t.prototype.start=function(){if(!this._running)this._time=Tz(),this._pausedTime=0,this._startLoop()},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){!this._paused&&(this._pauseStart=Tz(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=Tz()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var e=this._head;e;){var t=e.next;e.prev=e.next=e.animation=null,e=t}this._head=this._tail=null},t.prototype.isFinished=function(){return null==this._head},t.prototype.animate=function(e,t){t=t||{},this.start();var n=new TF(e,t.loop);return this.addAnimator(n),n},t}(AA),TH=w1.domSupported,TG=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=MS(e,function(e){var n=e.replace("mouse","pointer");return t.hasOwnProperty(n)?n:e});return{mouse:e,touch:["touchstart","touchend","touchmove"],pointer:n}}(),TV={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},TW=!1;function Tj(e){var t=e.pointerType;return"pen"===t||"touch"===t}function TX(e){e&&(e.zrByTouch=!0)}function TY(e,t){for(var n=t,r=!1;n&&9!==n.nodeType&&!(r=n.domBelongToZr||n!==t&&n===e.painterRoot);)n=n.parentNode;return r}var TJ=function(e,t){this.stopPropagation=M6,this.stopImmediatePropagation=M6,this.preventDefault=M6,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY},TZ={mousedown:function(e){e=AG(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=AG(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=AG(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){!TY(this,(e=AG(this.dom,e)).toElement||e.relatedTarget)&&(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){TW=!0,e=AG(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){if(!TW)e=AG(this.dom,e),this.trigger("mousewheel",e)},touchstart:function(e){TX(e=AG(this.dom,e)),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),TZ.mousemove.call(this,e),TZ.mousedown.call(this,e)},touchmove:function(e){TX(e=AG(this.dom,e)),this.handler.processGesture(e,"change"),TZ.mousemove.call(this,e)},touchend:function(e){TX(e=AG(this.dom,e)),this.handler.processGesture(e,"end"),TZ.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<300&&TZ.click.call(this,e)},pointerdown:function(e){TZ.mousedown.call(this,e)},pointermove:function(e){!Tj(e)&&TZ.mousemove.call(this,e)},pointerup:function(e){TZ.mouseup.call(this,e)},pointerout:function(e){!Tj(e)&&TZ.mouseout.call(this,e)}};Mb(["click","dblclick","contextmenu"],function(e){TZ[e]=function(t){t=AG(this.dom,t),this.trigger(e,t)}});var Tq={pointermove:function(e){!Tj(e)&&Tq.mousemove.call(this,e)},pointerup:function(e){Tq.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function TK(e,t,n,r){e.mounted[t]=n,e.listenerOpts[t]=r,AV(e.domTarget,t,n,r)}function TQ(e){var t=e.mounted;for(var n in t)t.hasOwnProperty(n)&&!function(e,t,n,r){e.removeEventListener(t,n,r)}(e.domTarget,n,t[n],e.listenerOpts[n]);e.mounted={}}var T$=function(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t},T0=function(e){function t(t,n){var r,i,a,s=e.call(this)||this;return s.__pointerCapturing=!1,s.dom=t,s.painterRoot=n,s._localHandlerScope=new T$(t,TZ),TH&&(s._globalHandlerScope=new T$(document,Tq)),r=s,a=(i=s._localHandlerScope).domHandlers,w1.pointerEventsSupported?Mb(TG.pointer,function(e){TK(i,e,function(t){a[e].call(r,t)})}):(w1.touchEventsSupported&&Mb(TG.touch,function(e){TK(i,e,function(t){var n;a[e].call(r,t),(n=i).touching=!0,null!=n.touchTimer&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)})}),Mb(TG.mouse,function(e){TK(i,e,function(t){t=AH(t),!i.touching&&a[e].call(r,t)})})),s}return wJ(t,e),t.prototype.dispose=function(){TQ(this._localHandlerScope),TH&&TQ(this._globalHandlerScope)},t.prototype.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},t.prototype.__togglePointerCapture=function(e){if(this.__mayPointerCapture=null,TH&&+this.__pointerCapturing^+e){this.__pointerCapturing=e;var t=this._globalHandlerScope;e?function(e,t){w1.pointerEventsSupported?Mb(TV.pointer,n):!w1.touchEventsSupported&&Mb(TV.mouse,n);function n(n){TK(t,n,function(r){if(!TY(e,(r=AH(r)).target)){var i,a;i=e,a=r,r=AG(i.dom,new TJ(i,a),!0),t.domHandlers[n].call(e,r)}},{capture:!0})}}(this,t):TQ(t)}},t}(AA),T1=1;w1.hasGlobalWindow&&(T1=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var T2=T1,T3="#333",T5="#ccc",T4=Aq;function T6(e){return e>5e-5||e<-5e-5}var T9=[],T8=[],T7=AZ(),Ee=Math.abs,Et=function(){var e;function t(){}return t.prototype.getLocalTransform=function(e){return t.getLocalTransform(this,e)},t.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},t.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},t.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},t.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},t.prototype.needLocalTransform=function(){return T6(this.rotation)||T6(this.x)||T6(this.y)||T6(this.scaleX-1)||T6(this.scaleY-1)||T6(this.skewX)||T6(this.skewY)},t.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),n=this.transform;if(!(t||e)){n&&(T4(n),this.invTransform=null);return}n=n||AZ(),t?this.getLocalTransform(n):T4(n),e&&(t?AQ(n,e,n):AK(n,e)),this.transform=n,this._resolveGlobalScaleRatio(n)},t.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(null!=t&&1!==t){this.getGlobalScale(T9);var n=T9[0]<0?-1:1,r=T9[1]<0?-1:1,i=((T9[0]-n)*t+n)/T9[0]||0,a=((T9[1]-r)*t+r)/T9[1]||0;e[0]*=i,e[1]*=i,e[2]*=a,e[3]*=a}this.invTransform=this.invTransform||AZ(),A2(this.invTransform,e)},t.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},t.prototype.setLocalTransform=function(e){if(!!e){var t=e[0]*e[0]+e[1]*e[1],n=e[2]*e[2]+e[3]*e[3],r=Math.atan2(e[1],e[0]),i=Math.PI/2+r-Math.atan2(e[3],e[2]);n=Math.sqrt(n)*Math.cos(i),t=Math.sqrt(t),this.skewX=i,this.skewY=0,this.rotation=-r,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=n,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(!!this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(e.invTransform=e.invTransform||AZ(),AQ(T8,e.invTransform,t),t=T8);var n=this.originX,r=this.originY;(n||r)&&(T7[4]=n,T7[5]=r,AQ(T8,t,T7),T8[4]-=n,T8[5]-=r,t=T8),this.setLocalTransform(t)}},t.prototype.getGlobalScale=function(e){var t=this.transform;return(e=e||[],t)?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},t.prototype.transformCoordToLocal=function(e,t){var n=[e,t],r=this.invTransform;return r&&Ax(n,n,r),n},t.prototype.transformCoordToGlobal=function(e,t){var n=[e,t],r=this.transform;return r&&Ax(n,n,r),n},t.prototype.getLineScale=function(){var e=this.transform;return e&&Ee(e[0]-1)>1e-10&&Ee(e[3]-1)>1e-10?Math.sqrt(Ee(e[0]*e[3]-e[2]*e[1])):1},t.prototype.copyTransform=function(e){Er(this,e)},t.getLocalTransform=function(e,t){t=t||[];var n=e.originX||0,r=e.originY||0,i=e.scaleX,a=e.scaleY,s=e.anchorX,u=e.anchorY,c=e.rotation||0,h=e.x,p=e.y,f=e.skewX?Math.tan(e.skewX):0,v=e.skewY?Math.tan(-e.skewY):0;if(n||r||s||u){var y=n+s,_=r+u;t[4]=-y*i-f*_*a,t[5]=-_*a-v*y*i}else t[4]=t[5]=0;return t[0]=i,t[3]=a,t[1]=v*i,t[2]=f*a,c&&A0(t,t,c),t[4]+=n+h,t[5]+=r+p,t},t.initDefaultProps=void((e=t.prototype).scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0),t}(),En=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function Er(e,t){for(var n=0;n<En.length;n++){var r=En[n];e[r]=t[r]}}var Ei={};function Ea(e,t){var n=Ei[t=t||w3];!n&&(n=Ei[t]=new CJ(500));var r=n.get(e);return null==r&&(r=w4.measureText(e,t).width,n.put(e,r)),r}function Eo(e,t,n,r){var i=Ea(e,t),a=Ec(t);return new Cr(El(0,i,n),Eu(0,a,r),i,a)}function Es(e,t,n,r){var i=((e||"")+"").split("\n");if(1===i.length)return Eo(i[0],t,n,r);for(var a=new Cr(0,0,0,0),s=0;s<i.length;s++){var u=Eo(i[s],t,n,r);0===s?a.copy(u):a.union(u)}return a}function El(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function Eu(e,t,n){return"middle"===n?e-=t/2:"bottom"===n&&(e-=t),e}function Ec(e){return Ea("国",e)}function Eh(e,t){if("string"==typeof e)return e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e);return e}function Ed(e,t,n){var r=t.position||"inside",i=null!=t.distance?t.distance:5,a=n.height,s=n.width,u=a/2,c=n.x,h=n.y,p="left",f="top";if(r instanceof Array)c+=Eh(r[0],n.width),h+=Eh(r[1],n.height),p=null,f=null;else switch(r){case"left":c-=i,h+=u,p="right",f="middle";break;case"right":c+=i+s,h+=u,f="middle";break;case"top":c+=s/2,h-=i,p="center",f="bottom";break;case"bottom":c+=s/2,h+=a+i,p="center";break;case"inside":c+=s/2,h+=u,p="center",f="middle";break;case"insideLeft":c+=i,h+=u,f="middle";break;case"insideRight":c+=s-i,h+=u,p="right",f="middle";break;case"insideTop":c+=s/2,h+=i,p="center";break;case"insideBottom":c+=s/2,h+=a-i,p="center",f="bottom";break;case"insideTopLeft":c+=i,h+=i;break;case"insideTopRight":c+=s-i,h+=i,p="right";break;case"insideBottomLeft":c+=i,h+=a-i,f="bottom";break;case"insideBottomRight":c+=s-i,h+=a-i,p="right",f="bottom"}return(e=e||{}).x=c,e.y=h,e.align=p,e.verticalAlign=f,e}var Ep="__zr_normal__",Ef=En.concat(["ignore"]),Eg=Mw(En,function(e,t){return e[t]=!0,e},{ignore:!1}),Em={},Ev=new Cr(0,0,0,0),Ey=function(){function e(e){this.id=Mu(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return e.prototype._init=function(e){this.attr(e)},e.prototype.drift=function(e,t,n){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0}var r=this.transform;!r&&(r=this.transform=[1,0,0,1,0,0]),r[4]+=e,r[5]+=t,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){!this.textConfig&&(this.textConfig={});var n=this.textConfig,r=n.local,i=t.innerTransformable,a=void 0,s=void 0,u=!1;i.parent=r?this:null;var c=!1;if(i.copyTransform(t),null!=n.position){n.layoutRect?Ev.copy(n.layoutRect):Ev.copy(this.getBoundingRect()),!r&&Ev.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Em,n,Ev):Ed(Em,n,Ev),i.x=Em.x,i.y=Em.y,a=Em.align,s=Em.verticalAlign;var h=n.origin;if(h&&null!=n.rotation){var p=void 0,f=void 0;"center"===h?(p=.5*Ev.width,f=.5*Ev.height):(p=Eh(h[0],Ev.width),f=Eh(h[1],Ev.height)),c=!0,i.originX=-i.x+p+(r?0:Ev.x),i.originY=-i.y+f+(r?0:Ev.y)}}null!=n.rotation&&(i.rotation=n.rotation);var v=n.offset;v&&(i.x+=v[0],i.y+=v[1],!c&&(i.originX=-v[0],i.originY=-v[1]));var y=null==n.inside?"string"==typeof n.position&&n.position.indexOf("inside")>=0:n.inside,_=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),x=void 0,b=void 0,S=void 0;y&&this.canBeInsideText()?(x=n.insideFill,b=n.insideStroke,(null==x||"auto"===x)&&(x=this.getInsideTextFill()),(null==b||"auto"===b)&&(b=this.getInsideTextStroke(x),S=!0)):(x=n.outsideFill,b=n.outsideStroke,(null==x||"auto"===x)&&(x=this.getOutsideFill()),(null==b||"auto"===b)&&(b=this.getOutsideStroke(x),S=!0)),((x=x||"#000")!==_.fill||b!==_.stroke||S!==_.autoStroke||a!==_.align||s!==_.verticalAlign)&&(u=!0,_.fill=x,_.stroke=b,_.autoStroke=S,_.align=a,_.verticalAlign=s,t.setDefaultTextStyle(_)),t.__dirty|=1,u&&t.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(e){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?T5:T3},e.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),n="string"==typeof t&&C9(t);!n&&(n=[255,255,255,1]);for(var r=n[3],i=this.__zr.isDarkMode(),a=0;a<3;a++)n[a]=n[a]*r+(i?0:255)*(1-r);return n[3]=1,Ts(n,"rgba")},e.prototype.traverse=function(e,t){},e.prototype.attrKV=function(e,t){"textConfig"===e?this.setTextConfig(t):"textContent"===e?this.setTextContent(t):"clipPath"===e?this.setClipPath(t):"extra"===e?(this.extra=this.extra||{},Mf(this.extra,t)):this[e]=t},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(e,t){if("string"==typeof e)this.attrKV(e,t);else if(MO(e)){for(var n=MC(e),r=0;r<n.length;r++){var i=n[r];this.attrKV(i,e[i])}}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,n=0;n<this.animators.length;n++){var r=this.animators[n],i=r.__fromStateTransition;if(!r.getLoop()&&(!i||i===Ep)){var a=r.targetName,s=a?t[a]:t;r.saveTo(s)}}},e.prototype._innerSaveToNormal=function(e){var t=this._normalState;!t&&(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,Ef)},e.prototype._savePrimaryToNormal=function(e,t,n){for(var r=0;r<n.length;r++){var i=n[r];null!=e[i]&&!(i in t)&&(t[i]=this[i])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(e){return this.states[e]},e.prototype.ensureState=function(e){var t=this.states;return!t[e]&&(t[e]={}),t[e]},e.prototype.clearStates=function(e){this.useState(Ep,!1,e)},e.prototype.useState=function(e,t,n,r){var i,a=e===Ep;if(!this.hasState()&&a)return;var s=this.currentStates,u=this.stateTransition;if(!(Mv(s,e)>=0)||!t&&1!==s.length){if(this.stateProxy&&!a&&(i=this.stateProxy(e)),!i&&(i=this.states&&this.states[e]),!i&&!a){Mc("State "+e+" not exists.");return}!a&&this.saveCurrentToNormalState(i);var c=!!(i&&i.hoverLayer||r);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,i,this._normalState,t,!n&&!this.__inHover&&u&&u.duration>0,u);var h=this._textContent,p=this._textGuide;return h&&h.useState(e,t,n,c),p&&p.useState(e,t,n,c),a?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2),i}},e.prototype.useStates=function(e,t,n){if(e.length){var r=[],i=this.currentStates,a=e.length,s=a===i.length;if(s){for(var u=0;u<a;u++)if(e[u]!==i[u]){s=!1;break}}if(!s){for(var u=0;u<a;u++){var c=e[u],h=void 0;this.stateProxy&&(h=this.stateProxy(c,e)),!h&&(h=this.states[c]),h&&r.push(h)}var p=r[a-1],f=!!(p&&p.hoverLayer||n);f&&this._toggleHoverLayerFlag(!0);var v=this._mergeStates(r),y=this.stateTransition;this.saveCurrentToNormalState(v),this._applyStateObj(e.join(","),v,this._normalState,!1,!t&&!this.__inHover&&y&&y.duration>0,y);var _=this._textContent,x=this._textGuide;_&&_.useStates(e,t,f),x&&x.useStates(e,t,f),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!f&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2)}}else this.clearStates()},e.prototype.isSilent=function(){for(var e=this.silent,t=this.parent;!e&&t;){if(t.silent){e=!0;break}t=t.parent}return e},e.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},e.prototype.removeState=function(e){var t=Mv(this.currentStates,e);if(t>=0){var n=this.currentStates.slice();n.splice(t,1),this.useStates(n)}},e.prototype.replaceState=function(e,t,n){var r=this.currentStates.slice(),i=Mv(r,e),a=Mv(r,t)>=0;i>=0?a?r.splice(i,1):r[i]=t:n&&!a&&r.push(t),this.useStates(r)},e.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},e.prototype._mergeStates=function(e){for(var t,n={},r=0;r<e.length;r++){var i=e[r];Mf(n,i),i.textConfig&&Mf(t=t||{},i.textConfig)}return t&&(n.textConfig=t),n},e.prototype._applyStateObj=function(e,t,n,r,i,a){var s=!(t&&r);t&&t.textConfig?(this.textConfig=Mf({},r?this.textConfig:n.textConfig),Mf(this.textConfig,t.textConfig)):s&&n.textConfig&&(this.textConfig=n.textConfig);for(var u={},c=!1,h=0;h<Ef.length;h++){var p=Ef[h],f=i&&Eg[p];t&&null!=t[p]?f?(c=!0,u[p]=t[p]):this[p]=t[p]:s&&null!=n[p]&&(f?(c=!0,u[p]=n[p]):this[p]=n[p])}if(!i)for(var h=0;h<this.animators.length;h++){var v=this.animators[h],y=v.targetName;!v.getLoop()&&v.__changeFinalValue(y?(t||n)[y]:t||n)}c&&this._transitionState(e,u,a)},e.prototype._attachComponent=function(e){if((!e.__zr||!!e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},e.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},e.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(e){var t=this._textContent;if(t!==e){t&&t!==e&&this.removeTextContent();e.innerTransformable=new Et,this._attachComponent(e),this._textContent=e,this.markRedraw()}},e.prototype.setTextConfig=function(e){!this.textConfig&&(this.textConfig={}),Mf(this.textConfig,e),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=1;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,n=this._textGuide;t&&(t.__inHover=e),n&&(n.__inHover=e)},e.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.addAnimator(t[n]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},e.prototype.removeSelfFromZr=function(e){if(!!this.__zr){this.__zr=null;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.removeAnimator(t[n]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},e.prototype.animate=function(e,t,n){var r=e?this[e]:this,i=new TF(r,t,n);return e&&(i.targetName=e),this.addAnimator(i,e),i},e.prototype.addAnimator=function(e,t){var n=this.__zr,r=this;e.during(function(){r.updateDuringAnimation(t)}).done(function(){var t=r.animators,n=Mv(t,e);n>=0&&t.splice(n,1)}),this.animators.push(e),n&&n.animation.addAnimator(e),n&&n.wakeUp()},e.prototype.updateDuringAnimation=function(e){this.markRedraw()},e.prototype.stopAnimation=function(e,t){for(var n=this.animators,r=n.length,i=[],a=0;a<r;a++){var s=n[a];e&&e!==s.scope?i.push(s):s.stop(t)}return this.animators=i,this},e.prototype.animateTo=function(e,t,n){E_(this,e,t,n)},e.prototype.animateFrom=function(e,t,n){E_(this,e,t,n,!0)},e.prototype._transitionState=function(e,t,n,r){for(var i=E_(this,t,n,r),a=0;a<i.length;a++)i[a].__fromStateTransition=e},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;function n(e,n,r,i){Object.defineProperty(t,e,{get:function(){return!this[n]&&a(this,this[n]=[]),this[n]},set:function(e){this[r]=e[0],this[i]=e[1],this[n]=e,a(this,e)}});function a(e,t){Object.defineProperty(t,0,{get:function(){return e[r]},set:function(t){e[r]=t}}),Object.defineProperty(t,1,{get:function(){return e[i]},set:function(t){e[i]=t}})}}t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=1,Object.defineProperty&&(n("position","_legacyPos","x","y"),n("scale","_legacyScale","scaleX","scaleY"),n("origin","_legacyOrigin","originX","originY"))}(),e}();function E_(e,t,n,r,i){var a=[];(function e(t,n,r,i,a,s,u,c){for(var h=MC(i),p=a.duration,f=a.delay,v=a.additive,y=a.setToFinal,_=!MO(s),x=t.animators,b=[],S=0;S<h.length;S++){var w=h[S],M=i[w];if(null!=M&&null!=r[w]&&(_||s[w])){if(!MO(M)||Mx(M)||MF(M))b.push(w);else{if(n){!c&&(r[w]=M,t.updateDuringAnimation(n));continue}e(t,w,r[w],M,a,s&&s[w],u,c)}}else!c&&(r[w]=M,t.updateDuringAnimation(n),b.push(w))}var A=b.length;if(!v&&A)for(var C=0;C<x.length;C++){var T=x[C];if(T.targetName===n&&T.stopTracks(b)){var I=Mv(x,T);x.splice(I,1)}}if(!a.force&&(A=(b=MM(b,function(e){var t,n;return t=i[e],!(t===(n=r[e])||Mx(t)&&Mx(n)&&function(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}(t,n))})).length),A>0||a.force&&!u.length){var D=void 0,P=void 0,R=void 0;if(c){P={},y&&(D={});for(var C=0;C<A;C++){var w=b[C];P[w]=r[w],y?D[w]=i[w]:r[w]=i[w]}}else if(y){R={};for(var C=0;C<A;C++){var w=b[C];R[w]=TR(r[w]),!function(e,t,n){if(Mx(t[n])){if(!Mx(e[n])&&(e[n]=[]),MB(t[n])){var r=t[n].length;e[n].length!==r&&(e[n]=new t[n].constructor(r),Ex(e[n],t[n],r))}else{var i=t[n],a=e[n],s=i.length;if(Mx(i[0])){for(var u=i[0].length,c=0;c<s;c++)a[c]?Ex(a[c],i[c],u):a[c]=Array.prototype.slice.call(i[c])}else Ex(a,i,s);a.length=i.length}}else e[n]=t[n]}(r,i,w)}}var T=new TF(r,!1,!1,v?MM(x,function(e){return e.targetName===n}):null);T.targetName=n,a.scope&&(T.scope=a.scope),y&&D&&T.whenWithKeys(0,D,b),R&&T.whenWithKeys(0,R,b),T.whenWithKeys(null==p?500:p,c?P:i,b).delay(f||0),t.addAnimator(T,n),u.push(T)}})(e,"",e,t,n=n||{},r,a,i);var s=a.length,u=!1,c=n.done,h=n.aborted,p=function(){u=!0,--s<=0&&(u?c&&c():h&&h())},f=function(){--s<=0&&(u?c&&c():h&&h())};!s&&c&&c(),a.length>0&&n.during&&a[0].during(function(e,t){n.during(t)});for(var v=0;v<a.length;v++){var y=a[v];p&&y.done(p),f&&y.aborted(f),n.force&&y.duration(n.duration),y.start(n.easing)}return a}function Ex(e,t,n){for(var r=0;r<n;r++)e[r]=t[r]}M_(Ey,AA),M_(Ey,Et);var Eb=function(e){function t(t){var n=e.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(t),n}return wJ(t,e),t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(e){return this._children[e]},t.prototype.childOfName=function(e){for(var t=this._children,n=0;n<t.length;n++)if(t[n].name===e)return t[n]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},t.prototype.addBefore=function(e,t){if(e&&e!==this&&e.parent!==this&&t&&t.parent===this){var n=this._children,r=n.indexOf(t);r>=0&&(n.splice(r,0,e),this._doAdd(e))}return this},t.prototype.replace=function(e,t){var n=Mv(this._children,e);return n>=0&&this.replaceAt(t,n),this},t.prototype.replaceAt=function(e,t){var n=this._children,r=n[t];if(e&&e!==this&&e.parent!==this&&e!==r){n[t]=e,r.parent=null;var i=this.__zr;i&&r.removeSelfFromZr(i),this._doAdd(e)}return this},t.prototype._doAdd=function(e){e.parent&&e.parent.remove(e),e.parent=this;var t=this.__zr;t&&t!==e.__zr&&e.addSelfToZr(t),t&&t.refresh()},t.prototype.remove=function(e){var t=this.__zr,n=this._children,r=Mv(n,e);return r<0?this:(n.splice(r,1),e.parent=null,t&&e.removeSelfFromZr(t),t&&t.refresh(),this)},t.prototype.removeAll=function(){for(var e=this._children,t=this.__zr,n=0;n<e.length;n++){var r=e[n];t&&r.removeSelfFromZr(t),r.parent=null}return e.length=0,this},t.prototype.eachChild=function(e,t){for(var n=this._children,r=0;r<n.length;r++){var i=n[r];e.call(t,i,r)}return this},t.prototype.traverse=function(e,t){for(var n=0;n<this._children.length;n++){var r=this._children[n],i=e.call(t,r);r.isGroup&&!i&&r.traverse(e,t)}return this},t.prototype.addSelfToZr=function(t){e.prototype.addSelfToZr.call(this,t);for(var n=0;n<this._children.length;n++)this._children[n].addSelfToZr(t)},t.prototype.removeSelfFromZr=function(t){e.prototype.removeSelfFromZr.call(this,t);for(var n=0;n<this._children.length;n++)this._children[n].removeSelfFromZr(t)},t.prototype.getBoundingRect=function(e){for(var t=new Cr(0,0,0,0),n=e||this._children,r=[],i=null,a=0;a<n.length;a++){var s=n[a];if(!s.ignore&&!s.invisible){var u=s.getBoundingRect(),c=s.getLocalTransform(r);c?(Cr.applyTransform(t,u,c),(i=i||t.clone()).union(t)):(i=i||u.clone()).union(u)}}return i||t},t}(Ey);Eb.prototype.type="group";let ES=Eb;var Ew={},EM={},EA=function(){function e(e,t,n){var r,i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=t,this.id=e;var a=new Cb,s=n.renderer||"canvas";!Ew[s]&&(s=MC(Ew)[0]);n.useDirtyRect=null!=n.useDirtyRect&&n.useDirtyRect;var u=new Ew[s](t,a,n,e),c=n.ssr||u.ssrOnly;this.storage=a,this.painter=u;var h=w1.node||w1.worker||c?null:new T0(u.getViewportRoot(),u.root),p=n.useCoarsePointer,f=null==p||"auto"===p?w1.touchEventsSupported:!!p;f&&(r=MV(n.pointerSize,44)),this.handler=new Cc(a,u,h,u.root,r),this.animation=new TU({stage:{update:c?null:function(){return i._flush(!0)}}}),!c&&this.animation.start()}return e.prototype.add=function(e){if(!this._disposed&&!!e)this.storage.addRoot(e),e.addSelfToZr(this),this.refresh()},e.prototype.remove=function(e){if(!this._disposed&&!!e)this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh()},e.prototype.configLayer=function(e,t){if(!this._disposed)this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh()},e.prototype.setBackgroundColor=function(e){if(!this._disposed)this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=function(e){if(!e)return!1;if("string"==typeof e)return .4>Tl(e,1);if(e.colorStops){for(var t=e.colorStops,n=0,r=t.length,i=0;i<r;i++)n+=Tl(t[i].color,1);return(n/=r)<.4}return!1}(e)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(e){this._darkMode=e},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(e){if(!this._disposed)!e&&this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){if(!this._disposed)this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){if(!this._disposed)this._flush(!1)},e.prototype._flush=function(e){var t,n=Tz();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var r=Tz();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:r-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},e.prototype.wakeUp=function(){if(!this._disposed)this.animation.start(),this._stillFrameAccum=0},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){if(!this._disposed)this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover()},e.prototype.resize=function(e){if(!this._disposed)e=e||{},this.painter.resize(e.width,e.height),this.handler.resize()},e.prototype.clearAnimation=function(){if(!this._disposed)this.animation.clear()},e.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},e.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},e.prototype.setCursorStyle=function(e){if(!this._disposed)this.handler.setCursorStyle(e)},e.prototype.findHover=function(e,t){if(!this._disposed)return this.handler.findHover(e,t)},e.prototype.on=function(e,t,n){return!this._disposed&&this.handler.on(e,t,n),this},e.prototype.off=function(e,t){if(!this._disposed)this.handler.off(e,t)},e.prototype.trigger=function(e,t){if(!this._disposed)this.handler.trigger(e,t)},e.prototype.clear=function(){if(!this._disposed){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof ES&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},e.prototype.dispose=function(){var e;if(!this._disposed)this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,e=this.id,delete EM[e]},e}();function EC(e,t){var n=new EA(Mu(),e,t);return EM[n.id]=n,n}function ET(e){e.dispose()}function EE(){for(var e in EM)EM.hasOwnProperty(e)&&EM[e].dispose();EM={}}function EI(e){return EM[e]}function ED(e,t){Ew[e]=t}function EP(e){if("function"==typeof eL)return eL(e)}function ER(e){eL=e}var EL="5.6.0";function EO(e,t,n,r){var i=t[0],a=t[1],s=n[0],u=n[1],c=a-i,h=u-s;if(0===c)return 0===h?s:(s+u)/2;if(r){if(c>0){if(e<=i)return s;if(e>=a)return u}else{if(e>=i)return s;if(e<=a)return u}}else{if(e===i)return s;if(e===a)return u}return(e-i)/c*h+s}function Ek(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%"}if(MP(e))return e.replace(/^\s+|\s+$/g,"").match(/%$/)?parseFloat(e)/100*t:parseFloat(e);return null==e?NaN:+e}function EB(e,t,n){return null==t&&(t=10),t=Math.min(Math.max(0,t),20),e=(+e).toFixed(t),n?e:+e}function EN(e){return e.sort(function(e,t){return e-t}),e}function EF(e){if(isNaN(e=+e))return 0;if(e>1e-14){for(var t=1,n=0;n<15;n++,t*=10)if(Math.round(e*t)/t===e)return n}return Ez(e)}function Ez(e){var t=e.toString().toLowerCase(),n=t.indexOf("e"),r=n>0?+t.slice(n+1):0,i=n>0?n:t.length,a=t.indexOf(".");return Math.max(0,(a<0?0:i-1-a)-r)}function EU(e,t){var n=Math.log,r=Math.LN10,i=Math.min(Math.max(-Math.floor(n(e[1]-e[0])/r)+Math.round(n(Math.abs(t[1]-t[0]))/r),0),20);return isFinite(i)?i:20}function EH(e,t,n){return e[t]&&EG(e,n)[t]||0}function EG(e,t){var n=Mw(e,function(e,t){return e+(isNaN(t)?0:t)},0);if(0===n)return[];for(var r=Math.pow(10,t),i=MS(e,function(e){return(isNaN(e)?0:e)/n*r*100}),a=100*r,s=MS(i,function(e){return Math.floor(e)}),u=Mw(s,function(e,t){return e+t},0),c=MS(i,function(e,t){return e-s[t]});u<a;){for(var h=Number.NEGATIVE_INFINITY,p=null,f=0,v=c.length;f<v;++f)c[f]>h&&(h=c[f],p=f);++s[p],c[p]=0,++u}return MS(s,function(e){return e/r})}var EV=0x1fffffffffffff;function EW(e){var t=2*Math.PI;return(e%t+t)%t}function Ej(e){return e>-1e-4&&e<1e-4}var EX=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function EY(e){if(e instanceof Date)return e;if(MP(e)){var t=EX.exec(e);if(!t)return new Date(NaN);if(!t[8])return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0);var n=+t[4]||0;return"Z"!==t[8].toUpperCase()&&(n-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,n,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}if(null==e)return new Date(NaN);return new Date(Math.round(e))}function EJ(e){return Math.pow(10,EZ(e))}function EZ(e){if(0===e)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function Eq(e,t){var n,r=EZ(e),i=Math.pow(10,r),a=e/i;return e=(n=t?a<1.5?1:a<2.5?2:a<4?3:a<7?5:10:a<1?1:a<2?2:a<3?3:a<5?5:10)*i,r>=-20?+e.toFixed(r<0?-r:0):e}function EK(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],a=n-r;return a?i+a*(e[r]-i):i}function EQ(e){e.sort(function(e,t){return function e(t,n,r){return t.interval[r]<n.interval[r]||t.interval[r]===n.interval[r]&&(t.close[r]-n.close[r]==(r?-1:1)||!r&&e(t,n,1))}(e,t,0)?-1:1});for(var t=-1/0,n=1,r=0;r<e.length;){for(var i=e[r].interval,a=e[r].close,s=0;s<2;s++)i[s]<=t&&(i[s]=t,a[s]=s?1:1-n),t=i[s],n=a[s];i[0]===i[1]&&a[0]*a[1]!=1?e.splice(r,1):r++}return e}function E$(e){var t=parseFloat(e);return t==e&&(0!==t||!MP(e)||0>=e.indexOf("x"))?t:NaN}function E0(e){return!isNaN(E$(e))}function E1(){return Math.round(9*Math.random())}function E2(e,t){return null==e?t:null==t?e:e*t/function e(t,n){return 0===n?t:e(n,t%n)}(e,t)}function E3(e,t,n){return(t-e)*n+e}var E5="series\0",E4="\0_ec_\0";function E6(e){return e instanceof Array?e:null==e?[]:[e]}function E9(e,t,n){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var r=0,i=n.length;r<i;r++){var a=n[r];!e.emphasis[t].hasOwnProperty(a)&&e[t].hasOwnProperty(a)&&(e.emphasis[t][a]=e[t][a])}}}var E8=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function E7(e){return!MO(e)||MI(e)||e instanceof Date?e:e.value}function Ie(e,t,n){var r="normalMerge"===n,i="replaceMerge"===n,a="replaceAll"===n;e=e||[],t=(t||[]).slice();var s=M1();Mb(t,function(e,n){if(!MO(e)){t[n]=null;return}});var u=function(e,t,n){var r=[];if("replaceAll"===n)return r;for(var i=0;i<e.length;i++){var a=e[i];a&&null!=a.id&&t.set(a.id,i),r.push({existing:"replaceMerge"===n||Ia(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return r}(e,s,n);return(r||i)&&function(e,t,n,r){Mb(r,function(i,a){if(!!i&&null!=i.id){var s=In(i.id),u=n.get(s);if(null!=u){var c=e[u];MY(!c.newOption,'Duplicated option on id "'+s+'".'),c.newOption=i,c.existing=t[u],r[a]=null}}})}(u,e,s,t),r&&function(e,t){Mb(t,function(n,r){if(!!n&&null!=n.name)for(var i=0;i<e.length;i++){var a=e[i].existing;if(!e[i].newOption&&a&&(null==a.id||null==n.id)&&!Ia(n)&&!Ia(a)&&It("name",a,n)){e[i].newOption=n,t[r]=null;return}}})}(u,t),r||i?function(e,t,n){Mb(t,function(t){if(!!t){for(var r,i=0;(r=e[i])&&(r.newOption||Ia(r.existing)||r.existing&&null!=t.id&&!It("id",t,r.existing));)i++;r?(r.newOption=t,r.brandNew=n):e.push({newOption:t,brandNew:n,existing:null,keyInfo:null}),i++}})}(u,t,i):a&&function(e,t){Mb(t,function(t){e.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}(u,t),function(e){var t=M1();Mb(e,function(e){var n=e.existing;n&&t.set(n.id,e)}),Mb(e,function(e){var n=e.newOption;MY(!n||null==n.id||!t.get(n.id)||t.get(n.id)===e,"id duplicates: "+(n&&n.id)),n&&null!=n.id&&t.set(n.id,e),e.keyInfo||(e.keyInfo={})}),Mb(e,function(e,n){var r=e.existing,i=e.newOption,a=e.keyInfo;if(!!MO(i)){if(a.name=null!=i.name?In(i.name):r?r.name:E5+n,r)a.id=In(r.id);else if(null!=i.id)a.id=In(i.id);else{var s=0;do a.id="\0"+a.name+"\0"+s++;while(t.get(a.id))}t.set(a.id,e)}})}(u),u}function It(e,t,n){var r=Ir(t[e],null),i=Ir(n[e],null);return null!=r&&null!=i&&r===i}function In(e){return Ir(e,"")}function Ir(e,t){return null==e?t:MP(e)?e:ML(e)||MR(e)?e+"":t}function Ii(e){var t=e.name;return!!(t&&t.indexOf(E5))}function Ia(e){return e&&null!=e.id&&0===In(e.id).indexOf(E4)}function Io(e,t){if(null!=t.dataIndexInside)return t.dataIndexInside;if(null!=t.dataIndex)return MI(t.dataIndex)?MS(t.dataIndex,function(t){return e.indexOfRawIndex(t)}):e.indexOfRawIndex(t.dataIndex);if(null!=t.name)return MI(t.name)?MS(t.name,function(t){return e.indexOfName(t)}):e.indexOfName(t.name)}function Is(){var e="__ec_inner_"+Il++;return function(t){return t[e]||(t[e]={})}}var Il=E1();function Iu(e,t,n){var r=Ic(t,n),i=r.mainTypeSpecified,a=r.queryOptionMap,s=r.others,u=n?n.defaultMainType:null;return!i&&u&&a.set(u,{}),a.each(function(t,r){var i=Ip(e,r,t,{useDefault:u===r,enableAll:!n||null==n.enableAll||n.enableAll,enableNone:!n||null==n.enableNone||n.enableNone});s[r+"Models"]=i.models,s[r+"Model"]=i.models[0]}),s}function Ic(e,t){if(MP(e)){var n,r={};r[e+"Index"]=0,n=r}else n=e;var i=M1(),a={},s=!1;return Mb(n,function(e,n){if("dataIndex"===n||"dataIndexInside"===n){a[n]=e;return}var r=n.match(/^(\w+)(Index|Id|Name)$/)||[],u=r[1],c=(r[2]||"").toLowerCase();if(!(!u||!c||t&&t.includeMainTypes&&0>Mv(t.includeMainTypes,u)))s=s||!!u,(i.get(u)||i.set(u,{}))[c]=e}),{mainTypeSpecified:s,queryOptionMap:i,others:a}}var Ih={useDefault:!0,enableAll:!1,enableNone:!1},Id={useDefault:!1,enableAll:!0,enableNone:!0};function Ip(e,t,n,r){r=r||Ih;var i=n.index,a=n.id,s=n.name,u={models:null,specified:null!=i||null!=a||null!=s};if(!u.specified){var c=void 0;return u.models=r.useDefault&&(c=e.getComponent(t))?[c]:[],u}return"none"===i||!1===i?(MY(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),u.models=[],u):("all"===i&&(MY(r.enableAll,'`"all"` is not a valid value on index option.'),i=a=s=null),u.models=e.queryComponents({mainType:t,index:i,id:a,name:s}),u)}function If(e,t,n){e.setAttribute?e.setAttribute(t,n):e[t]=n}function Ig(e,t){var n=M1(),r=[];return Mb(e,function(e){var i=t(e);(n.get(i)||(r.push(i),n.set(i,[]))).push(e)}),{keys:r,buckets:n}}function Im(e,t,n,r,i){var a=null==t||"auto"===t;if(null==r)return r;if(ML(r)){var s,u=(r-(s=n||0))*i+s;return EB(u,a?Math.max(EF(n||0),EF(r)):t)}if(MP(r))return i<1?n:r;for(var c=[],h=Math.max(n?n.length:0,r.length),p=0;p<h;++p){var f=e.getDimensionInfo(p);if(f&&"ordinal"===f.type)c[p]=(i<1&&n?n:r)[p];else{var v,y=n&&n[p]?n[p]:0,_=r[p];var u=(_-(v=y))*i+v;c[p]=EB(u,a?Math.max(EF(y),EF(_)):t)}}return c}var Iv="___EC__COMPONENT__CONTAINER___",Iy="___EC__EXTENDED_CLASS___";function I_(e){var t={main:"",sub:""};if(e){var n=e.split(".");t.main=n[0]||"",t.sub=n[1]||""}return t}function Ix(e,t){e.$constructor=e,e.extend=function(e){var t,n=this;return function(e){return MD(e)&&/^class\s/.test(Function.prototype.toString.call(e))}(n)?t=function(e){function t(){return e.apply(this,arguments)||this}return wJ(t,e),t}(n):My(t=function(){(e.$constructor||n).apply(this,arguments)},this),Mf(t.prototype,e),t[Iy]=!0,t.extend=this.extend,t.superCall=Iw,t.superApply=IM,t.superClass=n,t}}function Ib(e,t){e.extend=t.extend}var IS=Math.round(10*Math.random());function Iw(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return this.superClass.prototype[t].apply(e,n)}function IM(e,t,n){return this.superClass.prototype[t].apply(e,n)}function IA(e){var t={};e.registerClass=function(e){var n=e.type||e.prototype.type;if(n){r=n,MY(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(r),'componentType "'+r+'" illegal'),e.prototype.type=n;var r,i=I_(n);i.sub?i.sub!==Iv&&(function(e){var n=t[e.main];return(!n||!n[Iv])&&((n=t[e.main]={})[Iv]=!0),n}(i)[i.sub]=e):t[i.main]=e}return e},e.getClass=function(e,n,r){var i=t[e];if(i&&i[Iv]&&(i=n?i[n]:null),r&&!i)throw Error(n?"Component "+e+"."+(n||"")+" is used but not imported.":e+".type should be specified.");return i},e.getClassesByMainType=function(e){var n=I_(e),r=[],i=t[n.main];return i&&i[Iv]?Mb(i,function(e,t){t!==Iv&&r.push(e)}):r.push(i),r},e.hasClass=function(e){return!!t[I_(e).main]},e.getAllClassMainTypes=function(){var e=[];return Mb(t,function(t,n){e.push(n)}),e},e.hasSubTypes=function(e){var n=t[I_(e).main];return n&&n[Iv]}}function IC(e,t){for(var n=0;n<e.length;n++)!e[n][1]&&(e[n][1]=e[n][0]);return t=t||!1,function(n,r,i){for(var a={},s=0;s<e.length;s++){var u=e[s][1];if(!(r&&Mv(r,u)>=0||i&&0>Mv(i,u))){var c=n.getShallow(u,t);null!=c&&(a[e[s][0]]=c)}}return a}}var IT=IC([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),IE=function(){function e(){}return e.prototype.getAreaStyle=function(e,t){return IT(this,e,t)},e}(),II=new CJ(50);function ID(e,t,n,r,i){if(!e)return t;if("string"!=typeof e)return e;if(t&&t.__zrImageSrc===e||!n)return t;var a=II.get(e),s={hostEl:n,cb:r,cbPayload:i};return a?IR(t=a.image)||a.pending.push(s):((t=w4.loadImage(e,IP,IP)).__zrImageSrc=e,II.put(e,t.__cachedImgObj={image:t,pending:[s]})),t}function IP(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var n=e.pending[t],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}e.pending.length=0}function IR(e){return e&&e.width&&e.height}var IL=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function IO(e,t,n,r,i){if(!t)return"";var a=(e+"").split("\n");i=Ik(t,n,r,i);for(var s=0,u=a.length;s<u;s++)a[s]=IB(a[s],i);return a.join("\n")}function Ik(e,t,n,r){var i=Mf({},r=r||{});i.font=t,n=MV(n,"..."),i.maxIterations=MV(r.maxIterations,2);var a=i.minChar=MV(r.minChar,0);i.cnCharWidth=Ea("国",t);var s=i.ascCharWidth=Ea("a",t);i.placeholder=MV(r.placeholder,"");for(var u=e=Math.max(0,e-1),c=0;c<a&&u>=s;c++)u-=s;var h=Ea(n,t);return h>u&&(n="",h=0),u=e-h,i.ellipsis=n,i.ellipsisWidth=h,i.contentWidth=u,i.containerWidth=e,i}function IB(e,t){var n=t.containerWidth,r=t.font,i=t.contentWidth;if(!n)return"";var a=Ea(e,r);if(a<=n)return e;for(var s=0;;s++){if(a<=i||s>=t.maxIterations){e+=t.ellipsis;break}var u=0===s?function(e,t,n,r){for(var i=0,a=0,s=e.length;a<s&&i<t;a++){var u=e.charCodeAt(a);i+=0<=u&&u<=127?n:r}return a}(e,i,t.ascCharWidth,t.cnCharWidth):a>0?Math.floor(e.length*i/a):0;a=Ea(e=e.substr(0,u),r)}return""===e&&(e=t.placeholder),e}var IN=function(){},IF=function(e){this.tokens=[],e&&(this.tokens=e)},Iz=function(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]};function IU(e,t,n,r,i){var a,s,u=""===t,c=i&&n.rich[i]||{},h=e.lines,p=c.font||n.font,f=!1;if(r){var v=c.padding,y=v?v[1]+v[3]:0;if(null!=c.width&&"auto"!==c.width){var _=Eh(c.width,r.width)+y;h.length>0&&_+r.accumWidth>r.width&&(a=t.split("\n"),f=!0),r.accumWidth=_}else{var x=IG(t,p,r.width,r.breakAll,r.accumWidth);r.accumWidth=x.accumWidth+y,s=x.linesWidths,a=x.lines}}else a=t.split("\n");for(var b=0;b<a.length;b++){var S=a[b],w=new IN;if(w.styleName=i,w.text=S,w.isLineHolder=!S&&!u,"number"==typeof c.width?w.width=c.width:w.width=s?s[b]:Ea(S,p),b||f)h.push(new IF([w]));else{var M=(h[h.length-1]||(h[0]=new IF)).tokens,A=M.length;1===A&&M[0].isLineHolder?M[0]=w:(S||!A||u)&&M.push(w)}}}var IH=Mw(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function IG(e,t,n,r,i){for(var a=[],s=[],u="",c="",h=0,p=0,f=0;f<e.length;f++){var v=e.charAt(f);if("\n"===v){c&&(u+=c,p+=h),a.push(u),s.push(p),u="",c="",h=0,p=0;continue}var y=Ea(v,t),_=!r&&!function(e){var t;if((t=e.charCodeAt(0))>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303)return!!IH[e]||!1;return!0}(v);if(a.length?p+y>n:i+p+y>n){p?(u||c)&&(_?(!u&&(u=c,c="",p=h=0),a.push(u),s.push(p-h),c+=v,h+=y,u="",p=h):(c&&(u+=c,c="",h=0),a.push(u),s.push(p),u=v,p=y)):_?(a.push(c),s.push(h),c=v,h=y):(a.push(v),s.push(y));continue}p+=y,_?(c+=v,h+=y):(c&&(u+=c,c="",h=0),u+=v)}return!a.length&&!u&&(u=e,c="",h=0),c&&(u+=c),u&&(a.push(u),s.push(p)),1===a.length&&(p+=i),{accumWidth:p,lines:a,linesWidths:s}}var IV="__zr_style_"+Math.round(10*Math.random()),IW={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},Ij={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};IW[IV]=!0;var IX=["z","z2","invisible"],IY=["invisible"],IJ=function(e){var t;function n(t){return e.call(this,t)||this}return wJ(n,e),n.prototype._init=function(t){for(var n=MC(t),r=0;r<n.length;r++){var i=n[r];"style"===i?this.useStyle(t[i]):e.prototype.attrKV.call(this,i,t[i])}!this.style&&this.useStyle({})},n.prototype.beforeBrush=function(){},n.prototype.afterBrush=function(){},n.prototype.innerBeforeBrush=function(){},n.prototype.innerAfterBrush=function(){},n.prototype.shouldBePainted=function(e,t,n,r){var i=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&function(e,t,n){return IZ.copy(e.getBoundingRect()),e.transform&&IZ.applyTransform(e.transform),Iq.width=t,Iq.height=n,!IZ.intersect(Iq)}(this,e,t)||i&&!i[0]&&!i[3])return!1;if(n&&this.__clipPaths){for(var a=0;a<this.__clipPaths.length;++a)if(this.__clipPaths[a].isZeroArea())return!1}if(r&&this.parent){for(var s=this.parent;s;){if(s.ignore)return!1;s=s.parent}}return!0},n.prototype.contain=function(e,t){return this.rectContain(e,t)},n.prototype.traverse=function(e,t){e.call(t,this)},n.prototype.rectContain=function(e,t){var n=this.transformCoordToLocal(e,t);return this.getBoundingRect().contain(n[0],n[1])},n.prototype.getPaintRect=function(){var e=this._paintRect;if(!this._paintRect||this.__dirty){var t=this.transform,n=this.getBoundingRect(),r=this.style,i=r.shadowBlur||0,a=r.shadowOffsetX||0,s=r.shadowOffsetY||0;e=this._paintRect||(this._paintRect=new Cr(0,0,0,0)),t?Cr.applyTransform(e,n,t):e.copy(n),(i||a||s)&&(e.width+=2*i+Math.abs(a),e.height+=2*i+Math.abs(s),e.x=Math.min(e.x,e.x+a-i),e.y=Math.min(e.y,e.y+s-i));var u=this.dirtyRectTolerance;!e.isZero()&&(e.x=Math.floor(e.x-u),e.y=Math.floor(e.y-u),e.width=Math.ceil(e.width+1+2*u),e.height=Math.ceil(e.height+1+2*u))}return e},n.prototype.setPrevPaintRect=function(e){e?(this._prevPaintRect=this._prevPaintRect||new Cr(0,0,0,0),this._prevPaintRect.copy(e)):this._prevPaintRect=null},n.prototype.getPrevPaintRect=function(){return this._prevPaintRect},n.prototype.animateStyle=function(e){return this.animate("style",e)},n.prototype.updateDuringAnimation=function(e){"style"===e?this.dirtyStyle():this.markRedraw()},n.prototype.attrKV=function(t,n){"style"!==t?e.prototype.attrKV.call(this,t,n):this.style?this.setStyle(n):this.useStyle(n)},n.prototype.setStyle=function(e,t){return"string"==typeof e?this.style[e]=t:Mf(this.style,e),this.dirtyStyle(),this},n.prototype.dirtyStyle=function(e){!e&&this.markRedraw(),this.__dirty|=2,this._rect&&(this._rect=null)},n.prototype.dirty=function(){this.dirtyStyle()},n.prototype.styleChanged=function(){return!!(2&this.__dirty)},n.prototype.styleUpdated=function(){this.__dirty&=-3},n.prototype.createStyle=function(e){return M3(IW,e)},n.prototype.useStyle=function(e){!e[IV]&&(e=this.createStyle(e)),this.__inHover?this.__hoverStyle=e:this.style=e,this.dirtyStyle()},n.prototype.isStyleObject=function(e){return e[IV]},n.prototype._innerSaveToNormal=function(t){e.prototype._innerSaveToNormal.call(this,t);var n=this._normalState;t.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,n,IX)},n.prototype._applyStateObj=function(t,n,r,i,a,s){e.prototype._applyStateObj.call(this,t,n,r,i,a,s);var u,c=!(n&&i);if(n&&n.style?a?i?u=n.style:(u=this._mergeStyle(this.createStyle(),r.style),this._mergeStyle(u,n.style)):(u=this._mergeStyle(this.createStyle(),i?this.style:r.style),this._mergeStyle(u,n.style)):c&&(u=r.style),u){if(a){var h=this.style;if(this.style=this.createStyle(c?{}:h),c){for(var p=MC(h),f=0;f<p.length;f++){var v=p[f];v in u&&(u[v]=u[v],this.style[v]=h[v])}}for(var y=MC(u),f=0;f<y.length;f++){var v=y[f];this.style[v]=this.style[v]}this._transitionState(t,{style:u},s,this.getAnimationStyleProps())}else this.useStyle(u)}for(var _=this.__inHover?IY:IX,f=0;f<_.length;f++){var v=_[f];n&&null!=n[v]?this[v]=n[v]:c&&null!=r[v]&&(this[v]=r[v])}},n.prototype._mergeStates=function(t){for(var n,r=e.prototype._mergeStates.call(this,t),i=0;i<t.length;i++){var a=t[i];a.style&&(n=n||{},this._mergeStyle(n,a.style))}return n&&(r.style=n),r},n.prototype._mergeStyle=function(e,t){return Mf(e,t),e},n.prototype.getAnimationStyleProps=function(){return Ij},n.initDefaultProps=void((t=n.prototype).type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=3),n}(Ey),IZ=new Cr(0,0,0,0),Iq=new Cr(0,0,0,0),IK=Math.min,IQ=Math.max,I$=Math.sin,I0=Math.cos,I1=2*Math.PI,I2=M8(),I3=M8(),I5=M8();function I4(e,t,n){if(0!==e.length){for(var r=e[0],i=r[0],a=r[0],s=r[1],u=r[1],c=1;c<e.length;c++)i=IK(i,(r=e[c])[0]),a=IQ(a,r[0]),s=IK(s,r[1]),u=IQ(u,r[1]);t[0]=i,t[1]=s,n[0]=a,n[1]=u}}function I6(e,t,n,r,i,a){i[0]=IK(e,n),i[1]=IK(t,r),a[0]=IQ(e,n),a[1]=IQ(t,r)}var I9=[],I8=[],I7={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},De=[],Dt=[],Dn=[],Dr=[],Di=[],Da=[],Do=Math.min,Ds=Math.max,Dl=Math.cos,Du=Math.sin,Dc=Math.abs,Dh=Math.PI,Dd=2*Dh,Dp="undefined"!=typeof Float32Array,Df=[];function Dg(e){return Math.round(e/Dh*1e8)/1e8%2*Dh}function Dm(e,t){var n=Dg(e[0]);n<0&&(n+=Dd);var r=n-e[0],i=e[1];i+=r,!t&&i-n>=Dd?i=n+Dd:t&&n-i>=Dd?i=n-Dd:!t&&n>i?i=n+(Dd-Dg(n-i)):t&&n<i&&(i=n-(Dd-Dg(i-n))),e[0]=n,e[1]=i}var Dv=function(){var e;function t(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return t.prototype.increaseVersion=function(){this._version++},t.prototype.getVersion=function(){return this._version},t.prototype.setScale=function(e,t,n){(n=n||0)>0&&(this._ux=Dc(n/T2/e)||0,this._uy=Dc(n/T2/t)||0)},t.prototype.setDPR=function(e){this.dpr=e},t.prototype.setContext=function(e){this._ctx=e},t.prototype.getContext=function(){return this._ctx},t.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},t.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},t.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(I7.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},t.prototype.lineTo=function(e,t){var n=Dc(e-this._xi),r=Dc(t-this._yi),i=n>this._ux||r>this._uy;if(this.addData(I7.L,e,t),this._ctx&&i&&this._ctx.lineTo(e,t),i)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var a=n*n+r*r;a>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=a)}return this},t.prototype.bezierCurveTo=function(e,t,n,r,i,a){return this._drawPendingPt(),this.addData(I7.C,e,t,n,r,i,a),this._ctx&&this._ctx.bezierCurveTo(e,t,n,r,i,a),this._xi=i,this._yi=a,this},t.prototype.quadraticCurveTo=function(e,t,n,r){return this._drawPendingPt(),this.addData(I7.Q,e,t,n,r),this._ctx&&this._ctx.quadraticCurveTo(e,t,n,r),this._xi=n,this._yi=r,this},t.prototype.arc=function(e,t,n,r,i,a){this._drawPendingPt(),Df[0]=r,Df[1]=i,Dm(Df,a),r=Df[0];var s=(i=Df[1])-r;return this.addData(I7.A,e,t,n,n,r,s,0,a?0:1),this._ctx&&this._ctx.arc(e,t,n,r,i,a),this._xi=Dl(i)*n+e,this._yi=Du(i)*n+t,this},t.prototype.arcTo=function(e,t,n,r,i){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,n,r,i),this},t.prototype.rect=function(e,t,n,r){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,n,r),this.addData(I7.R,e,t,n,r),this},t.prototype.closePath=function(){this._drawPendingPt(),this.addData(I7.Z);var e=this._ctx,t=this._x0,n=this._y0;return e&&e.closePath(),this._xi=t,this._yi=n,this},t.prototype.fill=function(e){e&&e.fill(),this.toStatic()},t.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},t.prototype.len=function(){return this._len},t.prototype.setData=function(e){var t=e.length;!(this.data&&this.data.length===t)&&Dp&&(this.data=new Float32Array(t));for(var n=0;n<t;n++)this.data[n]=e[n];this._len=t},t.prototype.appendPath=function(e){!(e instanceof Array)&&(e=[e]);for(var t=e.length,n=0,r=this._len,i=0;i<t;i++)n+=e[i].len();Dp&&this.data instanceof Float32Array&&(this.data=new Float32Array(r+n));for(var i=0;i<t;i++){for(var a=e[i].data,s=0;s<a.length;s++)this.data[r++]=a[s]}this._len=r},t.prototype.addData=function(e,t,n,r,i,a,s,u,c){if(!!this._saveData){var h=this.data;this._len+arguments.length>h.length&&(this._expandData(),h=this.data);for(var p=0;p<arguments.length;p++)h[this._len++]=arguments[p]}},t.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},t.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},t.prototype.toStatic=function(){if(!!this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,Dp&&this._len>11&&(this.data=new Float32Array(e)))}},t.prototype.getBoundingRect=function(){Dn[0]=Dn[1]=Di[0]=Di[1]=Number.MAX_VALUE,Dr[0]=Dr[1]=Da[0]=Da[1]=-Number.MAX_VALUE;var e,t=this.data,n=0,r=0,i=0,a=0;for(e=0;e<this._len;){var s=t[e++],u=1===e;switch(u&&(n=t[e],r=t[e+1],i=n,a=r),s){case I7.M:n=i=t[e++],r=a=t[e++],Di[0]=i,Di[1]=a,Da[0]=i,Da[1]=a;break;case I7.L:I6(n,r,t[e],t[e+1],Di,Da),n=t[e++],r=t[e++];break;case I7.C:!function(e,t,n,r,i,a,s,u,c,h){var p=Ck(e,n,i,s,I9);c[0]=1/0,c[1]=1/0,h[0]=-1/0,h[1]=-1/0;for(var f=0;f<p;f++){var v=CR(e,n,i,s,I9[f]);c[0]=IK(v,c[0]),h[0]=IQ(v,h[0])}p=Ck(t,r,a,u,I8);for(var f=0;f<p;f++){var y=CR(t,r,a,u,I8[f]);c[1]=IK(y,c[1]),h[1]=IQ(y,h[1])}c[0]=IK(e,c[0]),h[0]=IQ(e,h[0]),c[0]=IK(s,c[0]),h[0]=IQ(s,h[0]),c[1]=IK(t,c[1]),h[1]=IQ(t,h[1]),c[1]=IK(u,c[1]),h[1]=IQ(u,h[1])}(n,r,t[e++],t[e++],t[e++],t[e++],t[e],t[e+1],Di,Da),n=t[e++],r=t[e++];break;case I7.Q:!function(e,t,n,r,i,a,s,u){var c=IQ(IK(CU(e,n,i),1),0),h=IQ(IK(CU(t,r,a),1),0),p=CF(e,n,i,c),f=CF(t,r,a,h);s[0]=IK(e,i,p),s[1]=IK(t,a,f),u[0]=IQ(e,i,p),u[1]=IQ(t,a,f)}(n,r,t[e++],t[e++],t[e],t[e+1],Di,Da),n=t[e++],r=t[e++];break;case I7.A:var c=t[e++],h=t[e++],p=t[e++],f=t[e++],v=t[e++],y=t[e++]+v;e+=1;var _=!t[e++];u&&(i=Dl(v)*p+c,a=Du(v)*f+h),!function(e,t,n,r,i,a,s,u,c){var h=Ab,p=AS,f=Math.abs(i-a);if(f%I1<1e-4&&f>1e-4){u[0]=e-n,u[1]=t-r,c[0]=e+n,c[1]=t+r;return}if(I2[0]=I0(i)*n+e,I2[1]=I$(i)*r+t,I3[0]=I0(a)*n+e,I3[1]=I$(a)*r+t,h(u,I2,I3),p(c,I2,I3),(i%=I1)<0&&(i+=I1),(a%=I1)<0&&(a+=I1),i>a&&!s?a+=I1:i<a&&s&&(i+=I1),s){var v=a;a=i,i=v}for(var y=0;y<a;y+=Math.PI/2)y>i&&(I5[0]=I0(y)*n+e,I5[1]=I$(y)*r+t,h(u,I5,u),p(c,I5,c))}(c,h,p,f,v,y,_,Di,Da),n=Dl(y)*p+c,r=Du(y)*f+h;break;case I7.R:i=n=t[e++],I6(i,a=r=t[e++],i+t[e++],a+t[e++],Di,Da);break;case I7.Z:n=i,r=a}Ab(Dn,Dn,Di),AS(Dr,Dr,Da)}return 0===e&&(Dn[0]=Dn[1]=Dr[0]=Dr[1]=0),new Cr(Dn[0],Dn[1],Dr[0]-Dn[0],Dr[1]-Dn[1])},t.prototype._calculateLength=function(){var e=this.data,t=this._len,n=this._ux,r=this._uy,i=0,a=0,s=0,u=0;!this._pathSegLen&&(this._pathSegLen=[]);for(var c=this._pathSegLen,h=0,p=0,f=0;f<t;){var v=e[f++],y=1===f;y&&(i=e[f],a=e[f+1],s=i,u=a);var _=-1;switch(v){case I7.M:i=s=e[f++],a=u=e[f++];break;case I7.L:var x=e[f++],b=e[f++],S=x-i,w=b-a;(Dc(S)>n||Dc(w)>r||f===t-1)&&(_=Math.sqrt(S*S+w*w),i=x,a=b);break;case I7.C:var M=e[f++],A=e[f++],x=e[f++],b=e[f++],C=e[f++],T=e[f++];_=function(e,t,n,r,i,a,s,u,c){for(var h=e,p=t,f=0,v=.1,y=1;y<=c;y++){var _=y*v,x=CR(e,n,i,s,_),b=CR(t,r,a,u,_),S=x-h,w=b-p;f+=Math.sqrt(S*S+w*w),h=x,p=b}return f}(i,a,M,A,x,b,C,T,10),i=C,a=T;break;case I7.Q:var M=e[f++],A=e[f++],x=e[f++],b=e[f++];_=function(e,t,n,r,i,a,s){for(var u=e,c=t,h=0,p=.1,f=1;f<=s;f++){var v=f*p,y=CF(e,n,i,v),_=CF(t,r,a,v),x=y-u,b=_-c;h+=Math.sqrt(x*x+b*b),u=y,c=_}return h}(i,a,M,A,x,b,10),i=x,a=b;break;case I7.A:var I=e[f++],D=e[f++],P=e[f++],R=e[f++],L=e[f++],O=e[f++],k=O+L;f+=1,y&&(s=Dl(L)*P+I,u=Du(L)*R+D),_=Ds(P,R)*Do(Dd,Math.abs(O)),i=Dl(k)*P+I,a=Du(k)*R+D;break;case I7.R:s=i=e[f++],u=a=e[f++],_=2*e[f++]+2*e[f++];break;case I7.Z:var S=s-i,w=u-a;_=Math.sqrt(S*S+w*w),i=s,a=u}_>=0&&(c[p++]=_,h+=_)}return this._pathLen=h,h},t.prototype.rebuildPath=function(e,t){var n,r,i,a,s,u,c,h,p,f,v=this.data,y=this._ux,_=this._uy,x=this._len,b=t<1,S=0,w=0,M=0;if(!b||(!this._pathSegLen&&this._calculateLength(),c=this._pathSegLen,!!(h=t*this._pathLen)))s:for(var A=0;A<x;){var C=v[A++],T=1===A;switch(T&&(i=v[A],a=v[A+1],n=i,r=a),C!==I7.L&&M>0&&(e.lineTo(p,f),M=0),C){case I7.M:n=i=v[A++],r=a=v[A++],e.moveTo(i,a);break;case I7.L:s=v[A++],u=v[A++];var I=Dc(s-i),D=Dc(u-a);if(I>y||D>_){if(b){var P=c[w++];if(S+P>h){var R=(h-S)/P;e.lineTo(i*(1-R)+s*R,a*(1-R)+u*R);break s}S+=P}e.lineTo(s,u),i=s,a=u,M=0}else{var L=I*I+D*D;L>M&&(p=s,f=u,M=L)}break;case I7.C:var O=v[A++],k=v[A++],B=v[A++],N=v[A++],F=v[A++],z=v[A++];if(b){var P=c[w++];if(S+P>h){var R=(h-S)/P;CB(i,O,B,F,R,De),CB(a,k,N,z,R,Dt),e.bezierCurveTo(De[1],Dt[1],De[2],Dt[2],De[3],Dt[3]);break s}S+=P}e.bezierCurveTo(O,k,B,N,F,z),i=F,a=z;break;case I7.Q:var O=v[A++],k=v[A++],B=v[A++],N=v[A++];if(b){var P=c[w++];if(S+P>h){var R=(h-S)/P;CH(i,O,B,R,De),CH(a,k,N,R,Dt),e.quadraticCurveTo(De[1],Dt[1],De[2],Dt[2]);break s}S+=P}e.quadraticCurveTo(O,k,B,N),i=B,a=N;break;case I7.A:var U=v[A++],H=v[A++],G=v[A++],V=v[A++],W=v[A++],j=v[A++],X=v[A++],Y=!v[A++],J=G>V?G:V,Z=Dc(G-V)>.001,q=W+j,K=!1;if(b){var P=c[w++];S+P>h&&(q=W+j*(h-S)/P,K=!0),S+=P}if(Z&&e.ellipse?e.ellipse(U,H,G,V,X,W,q,Y):e.arc(U,H,J,W,q,Y),K)break s;T&&(n=Dl(W)*G+U,r=Du(W)*V+H),i=Dl(q)*G+U,a=Du(q)*V+H;break;case I7.R:n=i=v[A],r=a=v[A+1],s=v[A++],u=v[A++];var Q=v[A++],$=v[A++];if(b){var P=c[w++];if(S+P>h){var ee=h-S;e.moveTo(s,u),e.lineTo(s+Do(ee,Q),u),(ee-=Q)>0&&e.lineTo(s+Q,u+Do(ee,$)),(ee-=$)>0&&e.lineTo(s+Ds(Q-ee,0),u+$),(ee-=Q)>0&&e.lineTo(s,u+Ds($-ee,0));break s}S+=P}e.rect(s,u,Q,$);break;case I7.Z:if(b){var P=c[w++];if(S+P>h){var R=(h-S)/P;e.lineTo(i*(1-R)+n*R,a*(1-R)+r*R);break s}S+=P}e.closePath(),i=n,a=r}}},t.prototype.clone=function(){var e=new t,n=this.data;return e.data=n.slice?n.slice():Array.prototype.slice.call(n),e._len=this._len,e},t.CMD=I7,t.initDefaultProps=void((e=t.prototype)._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0),t}();function Dy(e,t,n,r,i,a,s){if(0===i)return!1;var u=0,c=e;if(s>t+i&&s>r+i||s<t-i&&s<r-i||a>e+i&&a>n+i||a<e-i&&a<n-i)return!1;if(e===n)return Math.abs(a-e)<=i/2;u=(t-r)/(e-n),c=(e*r-n*t)/(e-n);var h=u*a-s+c;return h*h/(u*u+1)<=i/2*i/2}function D_(e,t,n,r,i,a,s,u,c){return 0!==s&&(!(c>t+s)||!(c>r+s)||!(c>a+s))&&(!(c<t-s)||!(c<r-s)||!(c<a-s))&&(!(u>e+s)||!(u>n+s)||!(u>i+s))&&(!(u<e-s)||!(u<n-s)||!(u<i-s))&&CG(e,t,n,r,i,a,u,c,null)<=s/2}var Dx=2*Math.PI;function Db(e){return(e%=Dx)<0&&(e+=Dx),e}var DS=2*Math.PI;function Dw(e,t,n,r,i,a){if(a>t&&a>r||a<t&&a<r||r===t)return 0;var s=(a-t)/(r-t),u=r<t?1:-1;(1===s||0===s)&&(u=r<t?.5:-.5);var c=s*(n-e)+e;return c===i?1/0:c>i?u:0}var DM=Dv.CMD,DA=2*Math.PI,DC=[-1,-1,-1],DT=[-1,-1];function DE(e,t,n,r,i){for(var a,s,u=e.data,c=e.len(),h=0,p=0,f=0,v=0,y=0,_=0;_<c;){var x,b,S,w,M,A,C,T,I,D,P,R=u[_++],L=1===_;switch(R===DM.M&&_>1&&!n&&(h+=Dw(p,f,v,y,r,i)),L&&(p=u[_],f=u[_+1],v=p,y=f),R){case DM.M:v=u[_++],y=u[_++],p=v,f=y;break;case DM.L:if(n){if(Dy(p,f,u[_],u[_+1],t,r,i))return!0}else h+=Dw(p,f,u[_],u[_+1],r,i)||0;p=u[_++],f=u[_++];break;case DM.C:if(n){;if(x=p,b=f,S=u[_++],w=u[_++],M=u[_++],A=u[_++],C=u[_],T=u[_+1],I=t,D=r,P=i,0!==I&&(!(P>b+I)||!(P>w+I)||!(P>A+I)||!(P>T+I))&&(!(P<b-I)||!(P<w-I)||!(P<A-I)||!(P<T-I))&&(!(D>x+I)||!(D>S+I)||!(D>M+I)||!(D>C+I))&&(!(D<x-I)||!(D<S-I)||!(D<M-I)||!(D<C-I))&&CN(x,b,S,w,M,A,C,T,D,P,null)<=I/2)return!0}else h+=function(e,t,n,r,i,a,s,u,c,h){if(h>t&&h>r&&h>a&&h>u||h<t&&h<r&&h<a&&h<u)return 0;var p=CO(t,r,a,u,h,DC);if(0===p)return 0;for(var f=0,v=-1,y=void 0,_=void 0,x=0;x<p;x++){var b=DC[x],S=0===b||1===b?.5:1;if(!(CR(e,n,i,s,b)<c))v<0&&(v=Ck(t,r,a,u,DT),DT[1]<DT[0]&&v>1&&!function(){var e=DT[0];DT[0]=DT[1],DT[1]=e}(),y=CR(t,r,a,u,DT[0]),v>1&&(_=CR(t,r,a,u,DT[1]))),2===v?b<DT[0]?f+=y<t?S:-S:b<DT[1]?f+=_<y?S:-S:f+=u<_?S:-S:b<DT[0]?f+=y<t?S:-S:f+=u<y?S:-S}return f}(p,f,u[_++],u[_++],u[_++],u[_++],u[_],u[_+1],r,i)||0;p=u[_++],f=u[_++];break;case DM.Q:if(n){if(D_(p,f,u[_++],u[_++],u[_],u[_+1],t,r,i))return!0}else h+=function(e,t,n,r,i,a,s,u){if(u>t&&u>r&&u>a||u<t&&u<r&&u<a)return 0;var c=function(e,t,n,r,i){var a=e-2*t+n,s=2*(t-e),u=e-r,c=0;if(CD(a)){if(CP(s)){var h=-u/s;h>=0&&h<=1&&(i[c++]=h)}}else{var p=s*s-4*a*u;if(CD(p)){var h=-s/(2*a);h>=0&&h<=1&&(i[c++]=h)}else if(p>0){var f=CM(p),h=(-s+f)/(2*a),v=(-s-f)/(2*a);h>=0&&h<=1&&(i[c++]=h),v>=0&&v<=1&&(i[c++]=v)}}return c}(t,r,a,u,DC);if(0===c)return 0;var h=CU(t,r,a);if(h>=0&&h<=1){for(var p=0,f=CF(t,r,a,h),v=0;v<c;v++){var y=0===DC[v]||1===DC[v]?.5:1,_=CF(e,n,i,DC[v]);if(!(_<s))DC[v]<h?p+=f<t?y:-y:p+=a<f?y:-y}return p}var y=0===DC[0]||1===DC[0]?.5:1,_=CF(e,n,i,DC[0]);return _<s?0:a<t?y:-y}(p,f,u[_++],u[_++],u[_],u[_+1],r,i)||0;p=u[_++],f=u[_++];break;case DM.A:var O=u[_++],k=u[_++],B=u[_++],N=u[_++],F=u[_++],z=u[_++];_+=1;var U=!!(1-u[_++]);a=Math.cos(F)*B+O,s=Math.sin(F)*N+k,L?(v=a,y=s):h+=Dw(p,f,a,s,r,i);var H=(r-O)*N/B+O;if(n){if(function(e,t,n,r,i,a,s,u,c){if(0===s)return!1;var h=Math.sqrt((u-=e)*u+(c-=t)*c);if(h-s>n||h+s<n)return!1;if(Math.abs(r-i)%DS<1e-4)return!0;if(a){var p=r;r=Db(i),i=Db(p)}else r=Db(r),i=Db(i);r>i&&(i+=DS);var f=Math.atan2(c,u);return f<0&&(f+=DS),f>=r&&f<=i||f+DS>=r&&f+DS<=i}(O,k,N,F,F+z,U,t,H,i))return!0}else h+=function(e,t,n,r,i,a,s,u){if((u-=t)>n||u<-n)return 0;var c=Math.sqrt(n*n-u*u);DC[0]=-c,DC[1]=c;var h=Math.abs(r-i);if(h<1e-4)return 0;if(h>=DA-1e-4){r=0,i=DA;var p=a?1:-1;return s>=DC[0]+e&&s<=DC[1]+e?p:0}if(r>i){var f=r;r=i,i=f}r<0&&(r+=DA,i+=DA);for(var v=0,y=0;y<2;y++){var _=DC[y];if(_+e>s){var x=Math.atan2(u,_),p=a?1:-1;x<0&&(x=DA+x),(x>=r&&x<=i||x+DA>=r&&x+DA<=i)&&(x>Math.PI/2&&x<1.5*Math.PI&&(p=-p),v+=p)}}return v}(O,k,N,F,F+z,U,H,i);p=Math.cos(F+z)*B+O,f=Math.sin(F+z)*N+k;break;case DM.R:v=p=u[_++],y=f=u[_++];var G=u[_++],V=u[_++];if(a=v+G,s=y+V,n){if(Dy(v,y,a,y,t,r,i)||Dy(a,y,a,s,t,r,i)||Dy(a,s,v,s,t,r,i)||Dy(v,s,v,y,t,r,i))return!0}else h+=Dw(a,y,a,s,r,i),h+=Dw(v,s,v,y,r,i);break;case DM.Z:if(n){if(Dy(p,f,v,y,t,r,i))return!0}else h+=Dw(p,f,v,y,r,i);p=v,f=y}}if(!n&&!(1e-4>Math.abs(f-y)))h+=Dw(p,f,v,y,r,i)||0;return 0!==h}var DI=Mg({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},IW),DD={style:Mg({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},Ij.style)},DP=En.concat(["invisible","culling","z","z2","zlevel","parent"]);let DR=function(e){var t;function n(t){return e.call(this,t)||this}return wJ(n,e),n.prototype.update=function(){var t=this;e.prototype.update.call(this);var r=this.style;if(r.decal){var i=this._decalEl=this._decalEl||new n;i.buildPath===n.prototype.buildPath&&(i.buildPath=function(e){t.buildPath(e,t.shape)}),i.silent=!0;var a=i.style;for(var s in r)a[s]!==r[s]&&(a[s]=r[s]);a.fill=r.fill?r.decal:null,a.decal=null,a.shadowColor=null,r.strokeFirst&&(a.stroke=null);for(var u=0;u<DP.length;++u)i[DP[u]]=this[DP[u]];i.__dirty|=1}else this._decalEl&&(this._decalEl=null)},n.prototype.getDecalElement=function(){return this._decalEl},n.prototype._init=function(t){var n=MC(t);this.shape=this.getDefaultShape();var r=this.getDefaultStyle();r&&this.useStyle(r);for(var i=0;i<n.length;i++){var a=n[i],s=t[a];"style"===a?this.style?Mf(this.style,s):this.useStyle(s):"shape"===a?Mf(this.shape,s):e.prototype.attrKV.call(this,a,s)}!this.style&&this.useStyle({})},n.prototype.getDefaultStyle=function(){return null},n.prototype.getDefaultShape=function(){return{}},n.prototype.canBeInsideText=function(){return this.hasFill()},n.prototype.getInsideTextFill=function(){var e=this.style.fill;if("none"!==e){if(MP(e)){var t=Tl(e,0);return t>.5?T3:t>.2?"#eee":T5}if(e)return T5}return T3},n.prototype.getInsideTextStroke=function(e){var t=this.style.fill;if(MP(t)){var n=this.__zr;if(!!(n&&n.isDarkMode())==.4>Tl(e,0))return t}},n.prototype.buildPath=function(e,t,n){},n.prototype.pathUpdated=function(){this.__dirty&=-5},n.prototype.getUpdatedPathProxy=function(e){return this.path||this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,e),this.path},n.prototype.createPathProxy=function(){this.path=new Dv(!1)},n.prototype.hasStroke=function(){var e=this.style,t=e.stroke;return!(null==t||"none"===t||!(e.lineWidth>0))},n.prototype.hasFill=function(){var e=this.style.fill;return null!=e&&"none"!==e},n.prototype.getBoundingRect=function(){var e=this._rect,t=this.style,n=!e;if(n){var r=!1;!this.path&&(r=!0,this.createPathProxy());var i=this.path;(r||4&this.__dirty)&&(i.beginPath(),this.buildPath(i,this.shape,!1),this.pathUpdated()),e=i.getBoundingRect()}if(this._rect=e,this.hasStroke()&&this.path&&this.path.len()>0){var a=this._rectStroke||(this._rectStroke=e.clone());if(this.__dirty||n){a.copy(e);var s=t.strokeNoScale?this.getLineScale():1,u=t.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,null==c?4:c)}s>1e-10&&(a.width+=u/s,a.height+=u/s,a.x-=u/s/2,a.y-=u/s/2)}return a}return e},n.prototype.contain=function(e,t){var n=this.transformCoordToLocal(e,t),r=this.getBoundingRect(),i=this.style;if(e=n[0],t=n[1],r.contain(e,t)){var a=this.path;if(this.hasStroke()){var s=i.lineWidth,u=i.strokeNoScale?this.getLineScale():1;if(u>1e-10){if(!this.hasFill()&&(s=Math.max(s,this.strokeContainThreshold)),DE(a,s/u,!0,e,t))return!0}}if(this.hasFill())return DE(a,0,!1,e,t)}return!1},n.prototype.dirtyShape=function(){this.__dirty|=4,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},n.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},n.prototype.animateShape=function(e){return this.animate("shape",e)},n.prototype.updateDuringAnimation=function(e){"style"===e?this.dirtyStyle():"shape"===e?this.dirtyShape():this.markRedraw()},n.prototype.attrKV=function(t,n){"shape"===t?this.setShape(n):e.prototype.attrKV.call(this,t,n)},n.prototype.setShape=function(e,t){var n=this.shape;return!n&&(n=this.shape={}),"string"==typeof e?n[e]=t:Mf(n,e),this.dirtyShape(),this},n.prototype.shapeChanged=function(){return!!(4&this.__dirty)},n.prototype.createStyle=function(e){return M3(DI,e)},n.prototype._innerSaveToNormal=function(t){e.prototype._innerSaveToNormal.call(this,t);var n=this._normalState;t.shape&&!n.shape&&(n.shape=Mf({},this.shape))},n.prototype._applyStateObj=function(t,n,r,i,a,s){e.prototype._applyStateObj.call(this,t,n,r,i,a,s);var u,c=!(n&&i);if(n&&n.shape?a?i?u=n.shape:(u=Mf({},r.shape),Mf(u,n.shape)):(u=Mf({},i?this.shape:r.shape),Mf(u,n.shape)):c&&(u=r.shape),u){if(a){this.shape=Mf({},this.shape);for(var h={},p=MC(u),f=0;f<p.length;f++){var v=p[f];"object"==typeof u[v]?this.shape[v]=u[v]:h[v]=u[v]}this._transitionState(t,{shape:h},s)}else this.shape=u,this.dirtyShape()}},n.prototype._mergeStates=function(t){for(var n,r=e.prototype._mergeStates.call(this,t),i=0;i<t.length;i++){var a=t[i];a.shape&&(n=n||{},this._mergeStyle(n,a.shape))}return n&&(r.shape=n),r},n.prototype.getAnimationStyleProps=function(){return DD},n.prototype.isZeroArea=function(){return!1},n.extend=function(e){var t=function(t){function n(n){var r=t.call(this,n)||this;return e.init&&e.init.call(r,n),r}return wJ(n,t),n.prototype.getDefaultStyle=function(){return Mh(e.style)},n.prototype.getDefaultShape=function(){return Mh(e.shape)},n}(n);for(var r in e)"function"==typeof e[r]&&(t.prototype[r]=e[r]);return t},n.initDefaultProps=void((t=n.prototype).type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=7),n}(IJ);var DL=Mg({strokeFirst:!0,font:w3,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DI),DO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.prototype.hasStroke=function(){var e=this.style,t=e.stroke;return null!=t&&"none"!==t&&e.lineWidth>0},t.prototype.hasFill=function(){var e=this.style.fill;return null!=e&&"none"!==e},t.prototype.createStyle=function(e){return M3(DL,e)},t.prototype.setBoundingRect=function(e){this._rect=e},t.prototype.getBoundingRect=function(){var e=this.style;if(!this._rect){var t=e.text;null!=t?t+="":t="";var n=Es(t,e.font,e.textAlign,e.textBaseline);if(n.x+=e.x||0,n.y+=e.y||0,this.hasStroke()){var r=e.lineWidth;n.x-=r/2,n.y-=r/2,n.width+=r,n.height+=r}this._rect=n}return this._rect},t.initDefaultProps=void(t.prototype.dirtyRectTolerance=10),t}(IJ);DO.prototype.type="tspan";var Dk=Mg({x:0,y:0},IW),DB={style:Mg({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},Ij.style)},DN=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.prototype.createStyle=function(e){return M3(Dk,e)},t.prototype._getSize=function(e){var t,n=this.style,r=n[e];if(null!=r)return r;var i=(t=n.image)&&"string"!=typeof t&&t.width&&t.height?n.image:this.__image;if(!i)return 0;var a="width"===e?"height":"width",s=n[a];return null==s?i[e]:i[e]/i[a]*s},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return DB},t.prototype.getBoundingRect=function(){var e=this.style;return!this._rect&&(this._rect=new Cr(e.x||0,e.y||0,this.getWidth(),this.getHeight())),this._rect},t}(IJ);DN.prototype.type="image";let DF=DN;var Dz=Math.round;function DU(e,t,n){if(!!t){var r=t.x1,i=t.x2,a=t.y1,s=t.y2;e.x1=r,e.x2=i,e.y1=a,e.y2=s;var u=n&&n.lineWidth;return u?(Dz(2*r)===Dz(2*i)&&(e.x1=e.x2=DG(r,u,!0)),Dz(2*a)===Dz(2*s)&&(e.y1=e.y2=DG(a,u,!0)),e):e}}function DH(e,t,n){if(!!t){var r=t.x,i=t.y,a=t.width,s=t.height;e.x=r,e.y=i,e.width=a,e.height=s;var u=n&&n.lineWidth;return u?(e.x=DG(r,u,!0),e.y=DG(i,u,!0),e.width=Math.max(DG(r+a,u,!1)-e.x,0===a?0:1),e.height=Math.max(DG(i+s,u,!1)-e.y,0===s?0:1),e):e}}function DG(e,t,n){if(!t)return e;var r=Dz(2*e);return(r+Dz(t))%2==0?r/2:(r+(n?1:-1))/2}var DV=function(){this.x=0,this.y=0,this.width=0,this.height=0},DW={},Dj=function(e){function t(t){return e.call(this,t)||this}return wJ(t,e),t.prototype.getDefaultShape=function(){return new DV},t.prototype.buildPath=function(e,t){if(this.subPixelOptimize){var n,r,i,a,s,u,c,h,p,f,v,y,_,x,b,S,w=DH(DW,t,this.style);_=w.x,x=w.y,b=w.width,S=w.height,w.r=t.r,t=w}else _=t.x,x=t.y,b=t.width,S=t.height;if(t.r){;n=e,h=(r=t).x,p=r.y,f=r.width,v=r.height,y=r.r,f<0&&(h+=f,f=-f),v<0&&(p+=v,v=-v),"number"==typeof y?i=a=s=u=y:y instanceof Array?1===y.length?i=a=s=u=y[0]:2===y.length?(i=s=y[0],a=u=y[1]):3===y.length?(i=y[0],a=u=y[1],s=y[2]):(i=y[0],a=y[1],s=y[2],u=y[3]):i=a=s=u=0,i+a>f&&(c=i+a,i*=f/c,a*=f/c),s+u>f&&(c=s+u,s*=f/c,u*=f/c),a+s>v&&(c=a+s,a*=v/c,s*=v/c),i+u>v&&(c=i+u,i*=v/c,u*=v/c),n.moveTo(h+i,p),n.lineTo(h+f-a,p),0!==a&&n.arc(h+f-a,p+a,a,-Math.PI/2,0),n.lineTo(h+f,p+v-s),0!==s&&n.arc(h+f-s,p+v-s,s,0,Math.PI/2),n.lineTo(h+u,p+v),0!==u&&n.arc(h+u,p+v-u,u,Math.PI/2,Math.PI),n.lineTo(h,p+i),0!==i&&n.arc(h+i,p+i,i,Math.PI,1.5*Math.PI)}else e.rect(_,x,b,S)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(DR);Dj.prototype.type="rect";let DX=Dj;var DY={fill:"#000"},DJ={style:Mg({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},Ij.style)},DZ=function(e){function t(t){var n=e.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=DY,n.attr(t),n}return wJ(t,e),t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var n=this._children[t];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(t){var n=this.innerTransformable;return n?n.getLocalTransform(t):e.prototype.getLocalTransform.call(this,t)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,function(e){D2(e),Mb(e.rich,D2)}(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(t){e.prototype.addSelfToZr.call(this,t);for(var n=0;n<this._children.length;n++)this._children[n].__zr=t},t.prototype.removeSelfFromZr=function(t){e.prototype.removeSelfFromZr.call(this,t);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var e=new Cr(0,0,0,0),t=this._children,n=[],r=null,i=0;i<t.length;i++){var a=t[i],s=a.getBoundingRect(),u=a.getLocalTransform(n);u?(e.copy(s),e.applyTransform(u),(r=r||e.clone()).union(e)):(r=r||s.clone()).union(s)}this._rect=r||e}return this._rect},t.prototype.setDefaultTextStyle=function(e){this._defaultStyle=e||DY},t.prototype.setTextContent=function(e){},t.prototype._mergeStyle=function(e,t){if(!t)return e;var n=t.rich,r=e.rich||n&&{};return Mf(e,t),n&&r?(this._mergeRich(r,n),e.rich=r):r&&(e.rich=r),e},t.prototype._mergeRich=function(e,t){for(var n=MC(t),r=0;r<n.length;r++){var i=n[r];e[i]=e[i]||{},Mf(e[i],t[i])}},t.prototype.getAnimationStyleProps=function(){return DJ},t.prototype._getOrCreateChild=function(e){var t=this._children[this._childCursor];return(!t||!(t instanceof e))&&(t=new e),this._children[this._childCursor++]=t,t.__zr=this.__zr,t.parent=this,t},t.prototype._updatePlainTexts=function(){var e=this.style,t=e.font||w3,n=e.padding,r=function(e,t){null!=e&&(e+="");var n,r=t.overflow,i=t.padding,a=t.font,s=Ec(a),u=MV(t.lineHeight,s),c=!!t.backgroundColor,h="truncate"===t.lineOverflow,p=t.width,f=(n=null!=p&&("break"===r||"breakAll"===r)?e?IG(e,t.font,p,"breakAll"===r,0).lines:[]:e?e.split("\n"):[]).length*u,v=MV(t.height,f);if(f>v&&h){var y=Math.floor(v/u);n=n.slice(0,y)}if(e&&"truncate"===r&&null!=p){for(var _=Ik(p,a,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),x=0;x<n.length;x++)n[x]=IB(n[x],_)}for(var b=v,S=0,x=0;x<n.length;x++)S=Math.max(Ea(n[x],a),S);null==p&&(p=S);var w=S;return i&&(b+=i[0]+i[2],w+=i[1]+i[3],p+=i[1]+i[3]),c&&(w=p),{lines:n,height:v,outerWidth:w,outerHeight:b,lineHeight:u,calculatedLineHeight:s,contentWidth:S,contentHeight:f,width:p}}(D6(e),e),i=D9(e),a=!!e.backgroundColor,s=r.outerHeight,u=r.outerWidth,c=r.contentWidth,h=r.lines,p=r.lineHeight,f=this._defaultStyle,v=e.x||0,y=e.y||0,_=e.align||f.align||"left",x=e.verticalAlign||f.verticalAlign||"top",b=v,S=Eu(y,r.contentHeight,x);if(i||n){var w=El(v,u,_),M=Eu(y,s,x);i&&this._renderBackground(e,e,w,M,u,s)}S+=p/2,n&&(b=D4(v,_,n),"top"===x?S+=n[0]:"bottom"===x&&(S-=n[2]));for(var A=0,C=!1,T=D5("fill"in e?e.fill:(C=!0,f.fill)),I=D3("stroke"in e?e.stroke:a||f.autoStroke&&!C?null:(A=2,f.stroke)),D=e.textShadowBlur>0,P=null!=e.width&&("truncate"===e.overflow||"break"===e.overflow||"breakAll"===e.overflow),R=r.calculatedLineHeight,L=0;L<h.length;L++){var O=this._getOrCreateChild(DO),k=O.createStyle();O.useStyle(k),k.text=h[L],k.x=b,k.y=S,_&&(k.textAlign=_),k.textBaseline="middle",k.opacity=e.opacity,k.strokeFirst=!0,D&&(k.shadowBlur=e.textShadowBlur||0,k.shadowColor=e.textShadowColor||"transparent",k.shadowOffsetX=e.textShadowOffsetX||0,k.shadowOffsetY=e.textShadowOffsetY||0),k.stroke=I,k.fill=T,I&&(k.lineWidth=e.lineWidth||A,k.lineDash=e.lineDash,k.lineDashOffset=e.lineDashOffset||0),k.font=t,D0(k,e),S+=p,P&&O.setBoundingRect(new Cr(El(k.x,e.width,k.textAlign),Eu(k.y,R,k.textBaseline),c,R))}},t.prototype._updateRichTexts=function(){var e=this.style,t=function(e,t){var n,r=new Iz;if(null!=e&&(e+=""),!e)return r;for(var i=t.width,a=t.height,s=t.overflow,u=("break"===s||"breakAll"===s)&&null!=i?{width:i,accumWidth:0,breakAll:"breakAll"===s}:null,c=IL.lastIndex=0;null!=(n=IL.exec(e));){var h=n.index;h>c&&IU(r,e.substring(c,h),t,u),IU(r,n[2],t,u,n[1]),c=IL.lastIndex}c<e.length&&IU(r,e.substring(c,e.length),t,u);var p=[],f=0,v=0,y=t.padding,_="truncate"===s,x="truncate"===t.lineOverflow;function b(e,t,n){e.width=t,e.lineHeight=n,f+=n,v=Math.max(v,t)}l:for(var S=0;S<r.lines.length;S++){for(var w=r.lines[S],M=0,A=0,C=0;C<w.tokens.length;C++){var T=w.tokens[C],I=T.styleName&&t.rich[T.styleName]||{},D=T.textPadding=I.padding,P=D?D[1]+D[3]:0,R=T.font=I.font||t.font;T.contentHeight=Ec(R);var L=MV(I.height,T.contentHeight);if(T.innerHeight=L,D&&(L+=D[0]+D[2]),T.height=L,T.lineHeight=MW(I.lineHeight,t.lineHeight,L),T.align=I&&I.align||t.align,T.verticalAlign=I&&I.verticalAlign||"middle",x&&null!=a&&f+T.lineHeight>a){C>0?(w.tokens=w.tokens.slice(0,C),b(w,A,M),r.lines=r.lines.slice(0,S+1)):r.lines=r.lines.slice(0,S);break l}var O=I.width,k=null==O||"auto"===O;if("string"==typeof O&&"%"===O.charAt(O.length-1))T.percentWidth=O,p.push(T),T.contentWidth=Ea(T.text,R);else{if(k){var B=I.backgroundColor,N=B&&B.image;N&&IR(N=function(e){if("string"!=typeof e)return e;var t=II.get(e);return t&&t.image}(N))&&(T.width=Math.max(T.width,N.width*L/N.height))}var F=_&&null!=i?i-A:null;null!=F&&F<T.width?!k||F<P?(T.text="",T.width=T.contentWidth=0):(T.text=IO(T.text,F-P,R,t.ellipsis,{minChar:t.truncateMinChar}),T.width=T.contentWidth=Ea(T.text,R)):T.contentWidth=Ea(T.text,R)}T.width+=P,A+=T.width,I&&(M=Math.max(M,T.lineHeight))}b(w,A,M)}r.outerWidth=r.width=MV(i,v),r.outerHeight=r.height=MV(a,f),r.contentHeight=f,r.contentWidth=v,y&&(r.outerWidth+=y[1]+y[3],r.outerHeight+=y[0]+y[2]);for(var S=0;S<p.length;S++){var T=p[S],z=T.percentWidth;T.width=parseInt(z,10)/100*r.width}return r}(D6(e),e),n=t.width,r=t.outerWidth,i=t.outerHeight,a=e.padding,s=e.x||0,u=e.y||0,c=this._defaultStyle,h=e.align||c.align,p=e.verticalAlign||c.verticalAlign,f=El(s,r,h),v=Eu(u,i,p),y=f,_=v;a&&(y+=a[3],_+=a[0]);var x=y+n;D9(e)&&this._renderBackground(e,e,f,v,r,i);for(var b=!!e.backgroundColor,S=0;S<t.lines.length;S++){for(var w=t.lines[S],M=w.tokens,A=M.length,C=w.lineHeight,T=w.width,I=0,D=y,P=x,R=A-1,L=void 0;I<A&&(!(L=M[I]).align||"left"===L.align);)this._placeToken(L,e,C,_,D,"left",b),T-=L.width,D+=L.width,I++;for(;R>=0&&"right"===(L=M[R]).align;)this._placeToken(L,e,C,_,P,"right",b),T-=L.width,P-=L.width,R--;for(D+=(n-(D-y)-(x-P)-T)/2;I<=R;)L=M[I],this._placeToken(L,e,C,_,D+L.width/2,"center",b),D+=L.width,I++;_+=C}},t.prototype._placeToken=function(e,t,n,r,i,a,s){var u=t.rich[e.styleName]||{};u.text=e.text;var c=e.verticalAlign,h=r+n/2;"top"===c?h=r+e.height/2:"bottom"===c&&(h=r+n-e.height/2),!e.isLineHolder&&D9(u)&&this._renderBackground(u,t,"right"===a?i-e.width:"center"===a?i-e.width/2:i,h-e.height/2,e.width,e.height);var p=!!u.backgroundColor,f=e.textPadding;f&&(i=D4(i,a,f),h-=e.height/2-f[0]-e.innerHeight/2);var v=this._getOrCreateChild(DO),y=v.createStyle();v.useStyle(y);var _=this._defaultStyle,x=!1,b=0,S=D5("fill"in u?u.fill:"fill"in t?t.fill:(x=!0,_.fill)),w=D3("stroke"in u?u.stroke:"stroke"in t?t.stroke:p||s||_.autoStroke&&!x?null:(b=2,_.stroke)),M=u.textShadowBlur>0||t.textShadowBlur>0;y.text=e.text,y.x=i,y.y=h,M&&(y.shadowBlur=u.textShadowBlur||t.textShadowBlur||0,y.shadowColor=u.textShadowColor||t.textShadowColor||"transparent",y.shadowOffsetX=u.textShadowOffsetX||t.textShadowOffsetX||0,y.shadowOffsetY=u.textShadowOffsetY||t.textShadowOffsetY||0),y.textAlign=a,y.textBaseline="middle",y.font=e.font||w3,y.opacity=MW(u.opacity,t.opacity,1),D0(y,u),w&&(y.lineWidth=MW(u.lineWidth,t.lineWidth,b),y.lineDash=MV(u.lineDash,t.lineDash),y.lineDashOffset=t.lineDashOffset||0,y.stroke=w),S&&(y.fill=S);var A=e.contentWidth,C=e.contentHeight;v.setBoundingRect(new Cr(El(y.x,A,y.textAlign),Eu(y.y,C,y.textBaseline),A,C))},t.prototype._renderBackground=function(e,t,n,r,i,a){var s,u,c=e.backgroundColor,h=e.borderWidth,p=e.borderColor,f=c&&c.image,v=c&&!f,y=e.borderRadius,_=this;if(v||e.lineHeight||h&&p){(s=this._getOrCreateChild(DX)).useStyle(s.createStyle()),s.style.fill=null;var x=s.shape;x.x=n,x.y=r,x.width=i,x.height=a,x.r=y,s.dirtyShape()}if(v){var b=s.style;b.fill=c||null,b.fillOpacity=MV(e.fillOpacity,1)}else if(f){(u=this._getOrCreateChild(DF)).onload=function(){_.dirtyStyle()};var S=u.style;S.image=c.image,S.x=n,S.y=r,S.width=i,S.height=a}if(h&&p){var b=s.style;b.lineWidth=h,b.stroke=p,b.strokeOpacity=MV(e.strokeOpacity,1),b.lineDash=e.borderDash,b.lineDashOffset=e.borderDashOffset||0,s.strokeContainThreshold=0,s.hasFill()&&s.hasStroke()&&(b.strokeFirst=!0,b.lineWidth*=2)}var w=(s||u).style;w.shadowBlur=e.shadowBlur||0,w.shadowColor=e.shadowColor||"transparent",w.shadowOffsetX=e.shadowOffsetX||0,w.shadowOffsetY=e.shadowOffsetY||0,w.opacity=MW(e.opacity,t.opacity,1)},t.makeFont=function(e){var t="";return D1(e)&&(t=[e.fontStyle,e.fontWeight,D$(e.fontSize),e.fontFamily||"sans-serif"].join(" ")),t&&MJ(t)||e.textFont||e.font},t}(IJ),Dq={left:!0,right:1,center:1},DK={top:1,bottom:1,middle:1},DQ=["fontStyle","fontWeight","fontSize","fontFamily"];function D$(e){return"string"==typeof e&&(-1!==e.indexOf("px")||-1!==e.indexOf("rem")||-1!==e.indexOf("em"))?e:isNaN(+e)?"12px":e+"px"}function D0(e,t){for(var n=0;n<DQ.length;n++){var r=DQ[n],i=t[r];null!=i&&(e[r]=i)}}function D1(e){return null!=e.fontSize||e.fontFamily||e.fontWeight}function D2(e){if(e){e.font=DZ.makeFont(e);var t=e.align;"middle"===t&&(t="center"),e.align=null==t||Dq[t]?t:"left";var n=e.verticalAlign;"center"===n&&(n="middle"),e.verticalAlign=null==n||DK[n]?n:"top",e.padding&&(e.padding=MX(e.padding))}}function D3(e,t){return null==e||t<=0||"transparent"===e||"none"===e?null:e.image||e.colorStops?"#000":e}function D5(e){return null==e||"none"===e?null:e.image||e.colorStops?"#000":e}function D4(e,t,n){return"right"===t?e-n[1]:"center"===t?e+n[3]/2-n[1]/2:e+n[3]}function D6(e){var t=e.text;return null!=t&&(t+=""),t}function D9(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}let D8=DZ;var D7=Is(),Pe=function(e,t,n,r){if(r){var i=D7(r);i.dataIndex=n,i.dataType=t,i.seriesIndex=e,i.ssrType="chart","group"===r.type&&r.traverse(function(r){var i=D7(r);i.seriesIndex=e,i.dataIndex=n,i.dataType=t,i.ssrType="chart"})}},Pt=1,Pn={},Pr=Is(),Pi=Is(),Pa=["emphasis","blur","select"],Po=["normal","emphasis","blur","select"],Ps="highlight",Pl="downplay",Pu="select",Pc="unselect",Ph="toggleSelect";function Pd(e){return null!=e&&"none"!==e}function Pp(e,t,n){e.onHoverStateChange&&(e.hoverState||0)!==n&&e.onHoverStateChange(t),e.hoverState=n}function Pf(e){Pp(e,"emphasis",2)}function Pg(e){2===e.hoverState&&Pp(e,"normal",0)}function Pm(e){Pp(e,"blur",1)}function Pv(e){1===e.hoverState&&Pp(e,"normal",0)}function Py(e){e.selected=!0}function P_(e){e.selected=!1}function Px(e,t,n){t(e,n)}function Pb(e,t,n){t(e,n),e.isGroup&&e.traverse(function(e){t(e,n)})}function PS(e,t){switch(t){case"emphasis":e.hoverState=2;break;case"normal":e.hoverState=0;break;case"blur":e.hoverState=1;break;case"select":e.selected=!0}}function Pw(e,t){var n,r,i,a,s,u,c,h=this.states[e];if(this.style){if("emphasis"===e)return function(e,t,n,r){var i=n&&Mv(n,"select")>=0,a=!1;if(e instanceof DR){var s=Pr(e),u=i&&s.selectFill||s.normalFill,c=i&&s.selectStroke||s.normalStroke;if(Pd(u)||Pd(c)){var h=(r=r||{}).style||{};"inherit"===h.fill?(a=!0,r=Mf({},r),(h=Mf({},h)).fill=u):!Pd(h.fill)&&Pd(u)?(a=!0,r=Mf({},r),(h=Mf({},h)).fill=Th(u)):!Pd(h.stroke)&&Pd(c)&&(!a&&(r=Mf({},r),h=Mf({},h)),h.stroke=Th(c)),r.style=h}}if(r&&null==r.z2){!a&&(r=Mf({},r));var p=e.z2EmphasisLift;r.z2=e.z2+(null!=p?p:10)}return r}(this,0,t,h);if("blur"===e){;return n=this,r=e,i=h,a=Mv(n.currentStates,r)>=0,s=n.style.opacity,u=a?null:function(e,t,n,r){for(var i=e.style,a={},s=0;s<t.length;s++){var u=t[s],c=i[u];a[u]=null==c?r&&r[u]:c}for(var s=0;s<e.animators.length;s++){var h=e.animators[s];h.__fromStateTransition&&0>h.__fromStateTransition.indexOf(n)&&"style"===h.targetName&&h.saveTo(a,t)}return a}(n,["opacity"],r,{opacity:1}),null==(c=(i=i||{}).style||{}).opacity&&(i=Mf({},i),c=Mf({opacity:a?s:.1*u.opacity},c),i.style=c),i}else if("select"===e)return function(e,t,n){if(n&&null==n.z2){n=Mf({},n);var r=e.z2SelectLift;n.z2=e.z2+(null!=r?r:9)}return n}(this,0,h)}return h}function PM(e){e.stateProxy=Pw;var t=e.getTextContent(),n=e.getTextGuideLine();t&&(t.stateProxy=Pw),n&&(n.stateProxy=Pw)}function PA(e,t){PL(e,t)||e.__highByOuter||Pb(e,Pf)}function PC(e,t){PL(e,t)||e.__highByOuter||Pb(e,Pg)}function PT(e,t){e.__highByOuter|=1<<(t||0),Pb(e,Pf)}function PE(e,t){(e.__highByOuter&=~(1<<(t||0)))||Pb(e,Pg)}function PI(e){Pb(e,Pm)}function PD(e){Pb(e,Pv)}function PP(e){Pb(e,Py)}function PR(e){Pb(e,P_)}function PL(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function PO(e){var t=e.getModel(),n=[],r=[];t.eachComponent(function(t,i){var a=Pi(i),s="series"===t,u=s?e.getViewOfSeriesModel(i):e.getViewOfComponentModel(i);s||r.push(u),a.isBlured&&(u.group.traverse(function(e){Pv(e)}),s&&n.push(i)),a.isBlured=!1}),Mb(r,function(e){e&&e.toggleBlurSeries&&e.toggleBlurSeries(n,!1,t)})}function Pk(e,t,n,r){var i=r.getModel();function a(e,t){for(var n=0;n<t.length;n++){var r=e.getItemGraphicEl(t[n]);r&&Pb(r,Pv)}}if(n=n||"coordinateSystem",null!=e&&!!t&&"none"!==t){var s=i.getSeriesByIndex(e),u=s.coordinateSystem;u&&u.master&&(u=u.master);var c=[];i.eachSeries(function(e){var i=s===e,h=e.coordinateSystem;h&&h.master&&(h=h.master);var p=h&&u?h===u:i;if(!("series"===n&&!i||"coordinateSystem"===n&&!p||"series"===t&&i)){if(r.getViewOfSeriesModel(e).group.traverse(function(e){if(!e.__highByOuter||!i||"self"!==t)Pm(e)}),Mx(t))a(e.getData(),t);else if(MO(t)){for(var f=MC(t),v=0;v<f.length;v++)a(e.getData(f[v]),t[f[v]])}c.push(e),Pi(e).isBlured=!0}}),i.eachComponent(function(e,t){if("series"!==e){var n=r.getViewOfComponentModel(t);n&&n.toggleBlurSeries&&n.toggleBlurSeries(c,!0,i)}})}}function PB(e,t,n){if(null==e||null==t)return;var r=n.getModel().getComponent(e,t);if(!r)return;Pi(r).isBlured=!0;var i=n.getViewOfComponentModel(r);if(!!i&&!!i.focusBlurEnabled)i.group.traverse(function(e){Pm(e)})}function PN(e,t,n,r){var i,a={focusSelf:!1,dispatchers:null};if(null==e||"series"===e||null==t||null==n)return a;var s=r.getModel().getComponent(e,t);if(!s)return a;var u=r.getViewOfComponentModel(s);if(!u||!u.findHighDownDispatchers)return a;for(var c=u.findHighDownDispatchers(n),h=0;h<c.length;h++)if("self"===D7(c[h]).focus){i=!0;break}return{focusSelf:i,dispatchers:c}}function PF(e){Mb(e.getAllData(),function(t){var n=t.data,r=t.type;n.eachItemGraphicEl(function(t,n){e.isSelected(n,r)?Pb(t,Py):Pb(t,P_)})})}function Pz(e,t,n){Pj(e,!0),Pb(e,PM),PH(e,t,n)}function PU(e,t,n,r){r?Pj(e,!1):Pz(e,t,n)}function PH(e,t,n){var r=D7(e);null!=t?(r.focus=t,r.blurScope=n):r.focus&&(r.focus=null)}var PG=["emphasis","blur","select"],PV={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function PW(e,t,n,r){n=n||"itemStyle";for(var i=0;i<PG.length;i++){var a=PG[i],s=t.getModel([a,n]);e.ensureState(a).style=r?r(s):s[PV[n]]()}}function Pj(e,t){var n=!1===t;e.highDownSilentOnTouch&&(e.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!n||e.__highDownDispatcher)&&(e.__highByOuter=e.__highByOuter||0,e.__highDownDispatcher=!n)}function PX(e){return!!(e&&e.__highDownDispatcher)}function PY(e){var t=e.type;return t===Pu||t===Pc||t===Ph}function PJ(e){var t=e.type;return t===Ps||t===Pl}var PZ=Is();function Pq(e,t,n,r,i){if(t&&t.ecModel){var a,s=t.ecModel.getUpdatePayload();a=s&&s.animation}var u=t&&t.isAnimationEnabled(),c="update"===e;if(!u)return null;var h=void 0,p=void 0,f=void 0;return r?(h=MV(r.duration,200),p=MV(r.easing,"cubicOut"),f=0):(h=t.getShallow(c?"animationDurationUpdate":"animationDuration"),p=t.getShallow(c?"animationEasingUpdate":"animationEasing"),f=t.getShallow(c?"animationDelayUpdate":"animationDelay")),a&&(null!=a.duration&&(h=a.duration),null!=a.easing&&(p=a.easing),null!=a.delay&&(f=a.delay)),MD(f)&&(f=f(n,i)),MD(h)&&(h=h(n)),{duration:h||0,delay:f,easing:p}}function PK(e,t,n,r,i,a,s){var u,c=!1;MD(i)?(s=a,a=i,i=null):MO(i)&&(a=i.cb,s=i.during,c=i.isFrom,u=i.removeOpt,i=i.dataIndex);var h="leave"===e;!h&&t.stopAnimation("leave");var p=Pq(e,r,i,h?u||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(t,i):null);if(p&&p.duration>0){var f={duration:p.duration,delay:p.delay||0,easing:p.easing,done:a,force:!!a||!!s,setToFinal:!h,scope:e,during:s};c?t.animateFrom(n,f):t.animateTo(n,f)}else t.stopAnimation(),c||t.attr(n),s&&s(1),a&&a()}function PQ(e,t,n,r,i,a){PK("update",e,t,n,r,i,a)}function P$(e,t,n,r,i,a){PK("enter",e,t,n,r,i,a)}function P0(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++)if("leave"===e.animators[t].scope)return!0;return!1}function P1(e,t,n,r,i,a){if(!P0(e))PK("leave",e,t,n,r,i,a)}function P2(e,t,n,r){e.removeTextContent(),e.removeTextGuideLine(),P1(e,{style:{opacity:0}},t,n,r)}function P3(e,t,n){function r(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(e){!e.isGroup&&P2(e,t,n,r)}):P2(e,t,n,r)}function P5(e){PZ(e).oldStyle=e.style}var P4={};function P6(e,t){for(var n=0;n<Pa.length;n++){var r=Pa[n],i=t[r],a=e.ensureState(r);a.style=a.style||{},a.style.text=i}var s=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(s,!0)}function P9(e,t,n){var r,i=e.labelFetcher,a=e.labelDataIndex,s=e.labelDimIndex,u=t.normal;i&&(r=i.getFormattedLabel(a,"normal",null,s,u&&u.get("formatter"),null!=n?{interpolatedValue:n}:null)),null==r&&(r=MD(e.defaultText)?e.defaultText(a,e,n):e.defaultText);for(var c={normal:r},h=0;h<Pa.length;h++){var p=Pa[h],f=t[p];c[p]=MV(i?i.getFormattedLabel(a,p,null,s,f&&f.get("formatter")):null,r)}return c}function P8(e,t,n,r){n=n||P4;for(var i=e instanceof D8,a=!1,s=0;s<Po.length;s++){var u=t[Po[s]];if(u&&u.getShallow("show")){a=!0;break}}var c=i?e:e.getTextContent();if(a){!i&&(!c&&(c=new D8,e.setTextContent(c)),e.stateProxy&&(c.stateProxy=e.stateProxy));var h=P9(n,t),p=t.normal,f=!!p.getShallow("show"),v=Re(p,r&&r.normal,n,!1,!i);v.text=h.normal,!i&&e.setTextConfig(Rt(p,n,!1));for(var s=0;s<Pa.length;s++){var y=Pa[s],u=t[y];if(u){var _=c.ensureState(y),x=!!MV(u.getShallow("show"),f);x!==f&&(_.ignore=!x),_.style=Re(u,r&&r[y],n,!0,!i),_.style.text=h[y],!i&&(e.ensureState(y).textConfig=Rt(u,n,!0))}}c.silent=!!p.getShallow("silent"),null!=c.style.x&&(v.x=c.style.x),null!=c.style.y&&(v.y=c.style.y),c.ignore=!f,c.useStyle(v),c.dirty(),n.enableTextSetter&&(Rs(c).setLabelText=function(e){var r=P9(n,t,e);P6(c,r)})}else c&&(c.ignore=!0);e.dirty()}function P7(e,t){t=t||"label";for(var n={normal:e.getModel(t)},r=0;r<Pa.length;r++){var i=Pa[r];n[i]=e.getModel([i,t])}return n}function Re(e,t,n,r,i){var a={};return function(e,t,n,r,i){n=n||P4;var a,s=t.ecModel,u=s&&s.option.textStyle,c=function(e){for(var t;e&&e!==e.ecModel;){var n=(e.option||P4).rich;if(n){t=t||{};for(var r=MC(n),i=0;i<r.length;i++)t[r[i]]=1}e=e.parentModel}return t}(t);if(c){for(var h in a={},c)if(c.hasOwnProperty(h)){var p=t.getModel(["rich",h]);Ra(a[h]={},p,u,n,r,i,!1,!0)}}a&&(e.rich=a);var f=t.get("overflow");f&&(e.overflow=f);var v=t.get("minMargin");null!=v&&(e.margin=v),Ra(e,t,u,n,r,i,!0,!1)}(a,e,n,r,i),t&&Mf(a,t),a}function Rt(e,t,n){t=t||{};var r,i={},a=e.getShallow("rotate"),s=MV(e.getShallow("distance"),n?null:5),u=e.getShallow("offset");return"outside"===(r=e.getShallow("position")||(n?null:"inside"))&&(r=t.defaultOutsidePosition||"top"),null!=r&&(i.position=r),null!=u&&(i.offset=u),null!=a&&(a*=Math.PI/180,i.rotation=a),null!=s&&(i.distance=s),i.outsideFill="inherit"===e.get("color")?t.inheritColor||null:"auto",i}var Rn=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],Rr=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],Ri=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function Ra(e,t,n,r,i,a,s,u){n=!i&&n||P4;var c=r&&r.inheritColor,h=t.getShallow("color"),p=t.getShallow("textBorderColor"),f=MV(t.getShallow("opacity"),n.opacity);("inherit"===h||"auto"===h)&&(h=c?c:null),("inherit"===p||"auto"===p)&&(p=c?c:null),!a&&(h=h||n.color,p=p||n.textBorderColor),null!=h&&(e.fill=h),null!=p&&(e.stroke=p);var v=MV(t.getShallow("textBorderWidth"),n.textBorderWidth);null!=v&&(e.lineWidth=v);var y=MV(t.getShallow("textBorderType"),n.textBorderType);null!=y&&(e.lineDash=y);var _=MV(t.getShallow("textBorderDashOffset"),n.textBorderDashOffset);null!=_&&(e.lineDashOffset=_),!i&&null==f&&!u&&(f=r&&r.defaultOpacity),null!=f&&(e.opacity=f),!i&&!a&&null==e.fill&&r.inheritColor&&(e.fill=r.inheritColor);for(var x=0;x<Rn.length;x++){var b=Rn[x],S=MV(t.getShallow(b),n[b]);null!=S&&(e[b]=S)}for(var x=0;x<Rr.length;x++){var b=Rr[x],S=t.getShallow(b);null!=S&&(e[b]=S)}if(null==e.verticalAlign){var w=t.getShallow("baseline");null!=w&&(e.verticalAlign=w)}if(!s||!r.disableBox){for(var x=0;x<Ri.length;x++){var b=Ri[x],S=t.getShallow(b);null!=S&&(e[b]=S)}var M=t.getShallow("borderType");null!=M&&(e.borderDash=M),("auto"===e.backgroundColor||"inherit"===e.backgroundColor)&&c&&(e.backgroundColor=c),("auto"===e.borderColor||"inherit"===e.borderColor)&&c&&(e.borderColor=c)}}function Ro(e,t){var n=t&&t.getModel("textStyle");return MJ([e.fontStyle||n&&n.getShallow("fontStyle")||"",e.fontWeight||n&&n.getShallow("fontWeight")||"",(e.fontSize||n&&n.getShallow("fontSize")||12)+"px",e.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}var Rs=Is();function Rl(e,t,n,r){if(!!e){var i=Rs(e);i.prevValue=i.value,i.value=n;var a=t.normal;i.valueAnimation=a.get("valueAnimation"),i.valueAnimation&&(i.precision=a.get("precision"),i.defaultInterpolatedText=r,i.statesModels=t)}}function Ru(e,t,n,r,i){var a=Rs(e);if(!!a.valueAnimation&&a.prevValue!==a.value){var s=a.defaultInterpolatedText,u=MV(a.interpolatedValue,a.prevValue),c=a.value;e.percent=0,(null==a.prevValue?P$:PQ)(e,{percent:1},r,t,null,function(r){var h=Im(n,a.precision,u,c,r);a.interpolatedValue=1===r?null:h,P6(e,P9({labelDataIndex:t,labelFetcher:i,defaultText:s?s(h):h+""},a.statesModels,h))})}}var Rc=["textStyle","color"],Rh=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],Rd=new D8,Rp=function(){function e(){}return e.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(Rc):null)},e.prototype.getFont=function(){return Ro({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<Rh.length;n++)t[Rh[n]]=this.getShallow(Rh[n]);return Rd.useStyle(t),Rd.update(),Rd.getBoundingRect()},e}(),Rf=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Rg=IC(Rf),Rm=function(){function e(){}return e.prototype.getLineStyle=function(e){return Rg(this,e)},e}(),Rv=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Ry=IC(Rv),R_=function(){function e(){}return e.prototype.getItemStyle=function(e,t){return Ry(this,e,t)},e}(),Rx=function(){function e(e,t,n){this.parentModel=t,this.ecModel=n,this.option=e}return e.prototype.init=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i]},e.prototype.mergeOption=function(e,t){Md(this.option,e,!0)},e.prototype.get=function(e,t){return null==e?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},e.prototype.getShallow=function(e,t){var n=this.option,r=null==n?n:n[e];if(null==r&&!t){var i=this.parentModel;i&&(r=i.getShallow(e))}return r},e.prototype.getModel=function(t,n){var r=null!=t,i=r?this.parsePath(t):null,a=r?this._doGet(i):this.option;return new e(a,n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),this.ecModel)},e.prototype.isEmpty=function(){return null==this.option},e.prototype.restoreData=function(){},e.prototype.clone=function(){return new this.constructor(Mh(this.option))},e.prototype.parsePath=function(e){return"string"==typeof e?e.split("."):e},e.prototype.resolveParentPath=function(e){return e},e.prototype.isAnimationEnabled=function(){if(!w1.node&&this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(e,t){var n=this.option;if(!e)return n;for(var r=0;r<e.length;r++){if(!!e[r]){if(null==(n=n&&"object"==typeof n?n[e[r]]:null))break}}return null==n&&t&&(n=t._doGet(this.resolveParentPath(e),t.parentModel)),n},e}();Ix(Rx),!function(e){var t=["__\0is_clz",IS++].join("_");e.prototype[t]=!0;e.isInstance=function(e){return!!(e&&e[t])}}(Rx),M_(Rx,Rm),M_(Rx,R_),M_(Rx,IE),M_(Rx,Rp);let Rb=Rx;var RS=Math.round(10*Math.random());function Rw(e){return[e||"",RS++].join("_")}function RM(e,t){return Md(Md({},e,!0),t,!0)}var RA={},RC={},RT=w1.domSupported&&(document.documentElement.lang||navigator.language||navigator.browserLanguage||"EN").toUpperCase().indexOf("ZH")>-1?"ZH":"EN";function RE(e,t){RC[e=e.toUpperCase()]=new Rb(t),RA[e]=t}function RI(e){return RC[e]}RE("EN",{time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}}),RE("ZH",{time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图",custom:"自定义图表",chart:"图表"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}});var RD=6e4,RP=36e5,RR=864e5,RL=31536e6,RO={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Rk="{yyyy}-{MM}-{dd}",RB={year:"{yyyy}",month:"{yyyy}-{MM}",day:Rk,hour:Rk+" "+RO.hour,minute:Rk+" "+RO.minute,second:Rk+" "+RO.second,millisecond:RO.none},RN=["year","month","day","hour","minute","second","millisecond"],RF=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Rz(e,t){return e+="","0000".substr(0,t-e.length)+e}function RU(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function RH(e,t,n,r){var i=EY(e),a=i[RW(n)](),s=i[Rj(n)]()+1,u=Math.floor((s-1)/3)+1,c=i[RX(n)](),h=i["get"+(n?"UTC":"")+"Day"](),p=i[RY(n)](),f=(p-1)%12+1,v=i[RJ(n)](),y=i[RZ(n)](),_=i[Rq(n)](),x=p>=12?"pm":"am",b=x.toUpperCase(),S=(r instanceof Rb?r:RC[r||RT]||RC.EN).getModel("time"),w=S.get("month"),M=S.get("monthAbbr"),A=S.get("dayOfWeek"),C=S.get("dayOfWeekAbbr");return(t||"").replace(/{a}/g,x+"").replace(/{A}/g,b+"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,Rz(a%100+"",2)).replace(/{Q}/g,u+"").replace(/{MMMM}/g,w[s-1]).replace(/{MMM}/g,M[s-1]).replace(/{MM}/g,Rz(s,2)).replace(/{M}/g,s+"").replace(/{dd}/g,Rz(c,2)).replace(/{d}/g,c+"").replace(/{eeee}/g,A[h]).replace(/{ee}/g,C[h]).replace(/{e}/g,h+"").replace(/{HH}/g,Rz(p,2)).replace(/{H}/g,p+"").replace(/{hh}/g,Rz(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,Rz(v,2)).replace(/{m}/g,v+"").replace(/{ss}/g,Rz(y,2)).replace(/{s}/g,y+"").replace(/{SSS}/g,Rz(_,3)).replace(/{S}/g,_+"")}function RG(e,t){var n=EY(e),r=n[Rj(t)]()+1,i=n[RX(t)](),a=n[RY(t)](),s=n[RJ(t)](),u=n[RZ(t)](),c=0===n[Rq(t)](),h=c&&0===u,p=h&&0===s,f=p&&0===a,v=f&&1===i;if(v&&1===r)return"year";if(v)return"month";if(f)return"day";else if(p)return"hour";else if(h)return"minute";else if(c)return"second";else return"millisecond"}function RV(e,t,n){var r=ML(e)?EY(e):e;switch(t=t||RG(e,n)){case"year":return r[RW(n)]();case"half-year":return r[Rj(n)]()>=6?1:0;case"quarter":return Math.floor((r[Rj(n)]()+1)/4);case"month":return r[Rj(n)]();case"day":return r[RX(n)]();case"half-day":return r[RY(n)]()/24;case"hour":return r[RY(n)]();case"minute":return r[RJ(n)]();case"second":return r[RZ(n)]();case"millisecond":return r[Rq(n)]()}}function RW(e){return e?"getUTCFullYear":"getFullYear"}function Rj(e){return e?"getUTCMonth":"getMonth"}function RX(e){return e?"getUTCDate":"getDate"}function RY(e){return e?"getUTCHours":"getHours"}function RJ(e){return e?"getUTCMinutes":"getMinutes"}function RZ(e){return e?"getUTCSeconds":"getSeconds"}function Rq(e){return e?"getUTCMilliseconds":"getMilliseconds"}function RK(e){return e?"setUTCMonth":"setMonth"}function RQ(e){return e?"setUTCDate":"setDate"}function R$(e){return e?"setUTCHours":"setHours"}function R0(e){return e?"setUTCMinutes":"setMinutes"}function R1(e){return e?"setUTCSeconds":"setSeconds"}function R2(e){return e?"setUTCMilliseconds":"setMilliseconds"}function R3(e){if(!E0(e))return MP(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function R5(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var R4=MX;function R6(e,t,n){function r(e){return e&&MJ(e)?e:"-"}function i(e){return!!(null!=e&&!isNaN(e)&&isFinite(e))}var a="time"===t,s=e instanceof Date;if(a||s){var u=a?EY(e):e;if(!isNaN(+u))return RH(u,"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}",n);if(s)return"-"}if("ordinal"===t)return MR(e)?r(e):ML(e)&&i(e)?e+"":"-";var c=E$(e);return i(c)?R3(c):MR(e)?r(e):"boolean"==typeof e?e+"":"-"}var R9=["a","b","c","d","e","f","g"],R8=function(e,t){return"{"+e+(null==t?"":t)+"}"};function R7(e,t,n){!MI(t)&&(t=[t]);var r=t.length;if(!r)return"";for(var i=t[0].$vars||[],a=0;a<i.length;a++){var s=R9[a];e=e.replace(R8(s),R8(s,0))}for(var u=0;u<r;u++)for(var c=0;c<i.length;c++){var h=t[u][i[c]];e=e.replace(R8(R9[c],u),n?Ak(h):h)}return e}function Le(e,t){var n=MP(e)?{color:e,extraCssText:t}:e||{},r=n.color,i=n.type;t=n.extraCssText;var a=n.renderMode||"html";return r?"html"===a?"subItem"===i?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Ak(r)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Ak(r)+";"+(t||"")+'"></span>':{renderMode:a,content:"{"+(n.markerId||"markerX")+"|}  ",style:"subItem"===i?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}:""}function Lt(e,t,n){("week"===e||"month"===e||"quarter"===e||"half-year"===e||"year"===e)&&(e="MM-dd\nyyyy");var r=EY(t),i=n?"getUTC":"get",a=r[i+"FullYear"](),s=r[i+"Month"]()+1,u=r[i+"Date"](),c=r[i+"Hours"](),h=r[i+"Minutes"](),p=r[i+"Seconds"](),f=r[i+"Milliseconds"]();return e=e.replace("MM",Rz(s,2)).replace("M",s).replace("yyyy",a).replace("yy",Rz(a%100+"",2)).replace("dd",Rz(u,2)).replace("d",u).replace("hh",Rz(c,2)).replace("h",c).replace("mm",Rz(h,2)).replace("m",h).replace("ss",Rz(p,2)).replace("s",p).replace("SSS",Rz(f,3))}function Ln(e){return e?e.charAt(0).toUpperCase()+e.substr(1):e}function Lr(e,t){return t=t||"transparent",MP(e)?e:MO(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function Li(e,t){if("_blank"===t||"blank"===t){var n=window.open();n.opener=null,n.location.href=e}else window.open(e,t)}var La=Mb,Lo=["left","right","top","bottom","width","height"],Ls=[["width","left","right"],["height","top","bottom"]];function Ll(e,t,n,r,i){var a=0,s=0;null==r&&(r=1/0),null==i&&(i=1/0);var u=0;t.eachChild(function(c,h){var p,f,v=c.getBoundingRect(),y=t.childAt(h+1),_=y&&y.getBoundingRect();if("horizontal"===e){var x=v.width+(_?-_.x+v.x:0);(p=a+x)>r||c.newline?(a=0,p=x,s+=u+n,u=v.height):u=Math.max(u,v.height)}else{var b=v.height+(_?-_.y+v.y:0);(f=s+b)>i||c.newline?(a+=u+n,s=0,f=b,u=v.width):u=Math.max(u,v.width)}if(!c.newline)c.x=a,c.y=s,c.markRedraw(),"horizontal"===e?a=p+n:s=f+n})}ME(Ll,"vertical"),ME(Ll,"horizontal");function Lu(e,t,n){n=R4(n||0);var r=t.width,i=t.height,a=Ek(e.left,r),s=Ek(e.top,i),u=Ek(e.right,r),c=Ek(e.bottom,i),h=Ek(e.width,r),p=Ek(e.height,i),f=n[2]+n[0],v=n[1]+n[3],y=e.aspect;switch(isNaN(h)&&(h=r-u-v-a),isNaN(p)&&(p=i-c-f-s),null!=y&&(isNaN(h)&&isNaN(p)&&(y>r/i?h=.8*r:p=.8*i),isNaN(h)&&(h=y*p),isNaN(p)&&(p=h/y)),isNaN(a)&&(a=r-u-h-v),isNaN(s)&&(s=i-c-p-f),e.left||e.right){case"center":a=r/2-h/2-n[3];break;case"right":a=r-h-v}switch(e.top||e.bottom){case"middle":case"center":s=i/2-p/2-n[0];break;case"bottom":s=i-p-f}a=a||0,s=s||0,isNaN(h)&&(h=r-v-a-(u||0)),isNaN(p)&&(p=i-f-s-(c||0));var _=new Cr(a+n[3],s+n[0],h,p);return _.margin=n,_}function Lc(e,t,n,r,i,a){var s,u=!i||!i.hv||i.hv[0],c=!i||!i.hv||i.hv[1],h=i&&i.boundingMode||"all";if((a=a||e).x=e.x,a.y=e.y,!u&&!c)return!1;if("raw"===h)s="group"===e.type?new Cr(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(s=e.getBoundingRect(),e.needLocalTransform()){var p=e.getLocalTransform();(s=s.clone()).applyTransform(p)}var f=Lu(Mg({width:s.width,height:s.height},t),n,r),v=u?f.x-s.x:0,y=c?f.y-s.y:0;return"raw"===h?(a.x=v,a.y=y):(a.x+=v,a.y+=y),a===e&&e.markRedraw(),!0}function Lh(e){var t=e.layoutMode||e.constructor.layoutMode;return MO(t)?t:t?{type:t}:null}function Ld(e,t,n){var r=n&&n.ignoreSize;MI(r)||(r=[r,r]);var i=s(Ls[0],0),a=s(Ls[1],1);function s(n,i){var a={},s=0,h={},p=0;if(La(n,function(t){h[t]=e[t]}),La(n,function(e){u(t,e)&&(a[e]=h[e]=t[e]),c(a,e)&&s++,c(h,e)&&p++}),r[i])return c(t,n[1])?h[n[2]]=null:c(t,n[2])&&(h[n[1]]=null),h;if(2===p||!s)return h;if(s>=2)return a;for(var f=0;f<n.length;f++){var v=n[f];if(!u(a,v)&&u(e,v)){a[v]=e[v];break}}return a}function u(e,t){return e.hasOwnProperty(t)}function c(e,t){return null!=e[t]&&"auto"!==e[t]}function h(e,t,n){La(e,function(e){t[e]=n[e]})}h(Ls[0],e,i),h(Ls[1],e,a)}function Lp(e){return Lf({},e)}function Lf(e,t){return t&&e&&La(Lo,function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}var Lg=Is(),Lm=function(e){var t;function n(t,n,r){var i=e.call(this,t,n,r)||this;return i.uid=Rw("ec_cpt_model"),i}return wJ(n,e),n.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n)},n.prototype.mergeDefaultAndTheme=function(e,t){var n=Lh(this),r=n?Lp(e):{};Md(e,t.getTheme().get(this.mainType)),Md(e,this.getDefaultOption()),n&&Ld(e,r,n)},n.prototype.mergeOption=function(e,t){Md(this.option,e,!0);var n=Lh(this);n&&Ld(this.option,e,n)},n.prototype.optionUpdated=function(e,t){},n.prototype.getDefaultOption=function(){var e,t=this.constructor;if(!((e=t)&&e[Iy]))return t.defaultOption;var n=Lg(this);if(!n.defaultOption){for(var r=[],i=t;i;){var a=i.prototype.defaultOption;a&&r.push(a),i=i.superClass}for(var s={},u=r.length-1;u>=0;u--)s=Md(s,r[u],!0);n.defaultOption=s}return n.defaultOption},n.prototype.getReferringComponents=function(e,t){return Ip(this.ecModel,e,{index:this.get(e+"Index",!0),id:this.get(e+"Id",!0)},t)},n.prototype.getBoxLayoutParams=function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}},n.prototype.getZLevelKey=function(){return""},n.prototype.setZLevel=function(e){this.option.zlevel=e},n.protoInitialize=void((t=n.prototype).type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0),n}(Rb);Ib(Lm,Rb),IA(Lm),!function(e){var t={};e.registerSubTypeDefaulter=function(e,n){t[I_(e).main]=n},e.determineSubType=function(n,r){var i=r.type;if(!i){var a=I_(n).main;e.hasSubTypes(n)&&t[a]&&(i=t[a](r))}return i}}(Lm),!function(e,t){e.topologicalTravel=function(e,r,i,a){if(!!e.length){var s=function(e){var r={},i=[];return Mb(e,function(a){var s=n(r,a),u=function(e,t){var n=[];return Mb(e,function(e){Mv(t,e)>=0&&n.push(e)}),n}(s.originalDeps=t(a),e);s.entryCount=u.length,0===s.entryCount&&i.push(a),Mb(u,function(e){0>Mv(s.predecessor,e)&&s.predecessor.push(e);var t=n(r,e);0>Mv(t.successor,e)&&t.successor.push(a)})}),{graph:r,noEntryList:i}}(r),u=s.graph,c=s.noEntryList,h={};for(Mb(e,function(e){h[e]=!0});c.length;){var p=c.pop(),f=u[p],v=!!h[p];v&&(i.call(a,p,f.originalDeps.slice()),delete h[p]),Mb(f.successor,v?_:y)}Mb(h,function(){throw Error("")})}function y(e){u[e].entryCount--,0===u[e].entryCount&&c.push(e)}function _(e){h[e]=!0,y(e)}};function n(e,t){return!e[t]&&(e[t]={predecessor:[],successor:[]}),e[t]}}(Lm,function(e){var t=[];return Mb(Lm.getClassesByMainType(e),function(e){t=t.concat(e.dependencies||e.prototype.dependencies||[])}),t=MS(t,function(e){return I_(e).main}),"dataset"!==e&&0>=Mv(t,"dataset")&&t.unshift("dataset"),t});let Lv=Lm;var Ly="";"undefined"!=typeof navigator&&(Ly=navigator.platform||"");var L_="rgba(0, 0, 0, 0.2)";let Lx={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:L_,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:L_,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:L_,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:L_,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:L_,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:L_,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:Ly.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var Lb=M1(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),LS="original",Lw="arrayRows",LM="objectRows",LA="keyedColumns",LC="typedArray",LT="unknown",LE="column",LI={Must:1,Might:2,Not:3},LD=Is();function LP(e,t,n){var r,i,a={},s=LL(t);if(!s||!e)return a;var u=[],c=[],h=LD(t.ecModel).datasetMap,p=s.uid+"_"+n.seriesLayoutBy;Mb(e=e.slice(),function(t,n){var s=MO(t)?t:e[n]={name:t};"ordinal"===s.type&&null==r&&(r=n,i=y(s)),a[s.name]=[]});var f=h.get(p)||h.set(p,{categoryWayDim:i,valueWayDim:0});function v(e,t,n){for(var r=0;r<n;r++)e.push(t+r)}function y(e){var t=e.dimsDef;return t?t.length:1}return Mb(e,function(e,t){var n=e.name,i=y(e);if(null==r){var s=f.valueWayDim;v(a[n],s,i),v(c,s,i),f.valueWayDim+=i}else if(r===t)v(a[n],0,i),v(u,0,i);else{var s=f.categoryWayDim;v(a[n],s,i),v(c,s,i),f.categoryWayDim+=i}}),u.length&&(a.itemName=u),c.length&&(a.seriesName=c),a}function LR(e,t,n){var r,i={};if(!LL(e))return i;var a=t.sourceFormat,s=t.dimensionsDefine;(a===LM||a===LA)&&Mb(s,function(e,t){(MO(e)?e.name:e)==="name"&&(r=t)});var u=function(){for(var e={},i={},u=[],c=0,h=Math.min(5,n);c<h;c++){var p=Lk(t.data,a,t.seriesLayoutBy,s,t.startIndex,c);u.push(p);var f=p===LI.Not;if(f&&null==e.v&&c!==r&&(e.v=c),(null==e.n||e.n===e.v||!f&&u[e.n]===LI.Not)&&(e.n=c),v(e)&&u[e.n]!==LI.Not)return e;!f&&(p===LI.Might&&null==i.v&&c!==r&&(i.v=c),(null==i.n||i.n===i.v)&&(i.n=c))}function v(e){return null!=e.v&&null!=e.n}return v(e)?e:v(i)?i:null}();if(u){i.value=[u.v];var c=null!=r?r:u.n;i.itemName=[c],i.seriesName=[c]}return i}function LL(e){if(!e.get("data",!0))return Ip(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},Ih).models[0]}function LO(e,t){return Lk(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function Lk(e,t,n,r,i,a){var s,u,c;if(MB(e))return LI.Not;if(r){var h=r[a];MO(h)?(u=h.name,c=h.type):MP(h)&&(u=h)}if(null!=c)return"ordinal"===c?LI.Must:LI.Not;if(t===Lw){if("row"===n){for(var p=e[a],f=0;f<(p||[]).length&&f<5;f++)if(null!=(s=x(p[i+f])))return s}else for(var f=0;f<e.length&&f<5;f++){var v=e[i+f];if(v&&null!=(s=x(v[a])))return s}}else if(t===LM){if(!u)return LI.Not;for(var f=0;f<e.length&&f<5;f++){var y=e[f];if(y&&null!=(s=x(y[u])))return s}}else if(t===LA){if(!u)return LI.Not;var p=e[u];if(!p||MB(p))return LI.Not;for(var f=0;f<p.length&&f<5;f++)if(null!=(s=x(p[f])))return s}else if(t===LS)for(var f=0;f<e.length&&f<5;f++){var y=e[f],_=E7(y);if(!MI(_))return LI.Not;if(null!=(s=x(_[a])))return s}function x(e){var t=MP(e);return null!=e&&Number.isFinite(Number(e))&&""!==e?t?LI.Might:LI.Not:t&&"-"!==e?LI.Must:void 0}return LI.Not}var LB=M1(),LN=Is(),LF=Is(),Lz=function(){function e(){}return e.prototype.getColorFromPalette=function(e,t,n){return LH(this,LN,E6(this.get("color",!0)),this.get("colorLayer",!0),e,t,n)},e.prototype.clearColorPalette=function(){(function(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}})(this,LN)},e}();function LU(e,t,n,r){var i=E6(e.get(["aria","decal","decals"]));return LH(e,LF,i,null,t,n,r)}function LH(e,t,n,r,i,a,s){var u=t(a=a||e),c=u.paletteIdx||0,h=u.paletteNameMap=u.paletteNameMap||{};if(h.hasOwnProperty(i))return h[i];var p=null!=s&&r?function(e,t){for(var n=e.length,r=0;r<n;r++)if(e[r].length>t)return e[r];return e[n-1]}(r,s):n;if(!!(p=p||n)&&!!p.length){var f=p[c];return i&&(h[i]=f),u.paletteIdx=(c+1)%p.length,f}}var LG="\0_ec_inner",LV=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.prototype.init=function(e,t,n,r,i,a){r=r||{},this.option=null,this._theme=new Rb(r),this._locale=new Rb(i),this._optionManager=a},t.prototype.setOption=function(e,t,n){var r=LX(t);this._optionManager.setOption(e,n,r),this._resetOption(null,r)},t.prototype.resetOption=function(e,t){return this._resetOption(e,LX(t))},t.prototype._resetOption=function(e,t){var n=!1,r=this._optionManager;if(!e||"recreate"===e){var i=r.mountOption("recreate"===e);this.option&&"recreate"!==e?(this.restoreData(),this._mergeOption(i,t)):eB(this,i),n=!0}if(("timeline"===e||"media"===e)&&this.restoreData(),!e||"recreate"===e||"timeline"===e){var a=r.getTimelineOption(this);a&&(n=!0,this._mergeOption(a,t))}if(!e||"recreate"===e||"media"===e){var s=r.getMediaOption(this);s.length&&Mb(s,function(e){n=!0,this._mergeOption(e,t)},this)}return n},t.prototype.mergeOption=function(e){this._mergeOption(e,null)},t.prototype._mergeOption=function(e,t){var n,r=this.option,i=this._componentsMap,a=this._componentsCount,s=[],u=M1(),c=t&&t.replaceMergeMainTypeMap;n=this,LD(n).datasetMap=M1(),Mb(e,function(e,t){if(null!=e)Lv.hasClass(t)?t&&(s.push(t),u.set(t,!0)):r[t]=null==r[t]?Mh(e):Md(r[t],e,!0)}),c&&c.each(function(e,t){Lv.hasClass(t)&&!u.get(t)&&(s.push(t),u.set(t,!0))}),Lv.topologicalTravel(s,Lv.getAllClassMainTypes(),function(t){var n,s,u,h,p=function(e,t,n){var r=LB.get(t);if(!r)return n;var i=r(e);return i?n.concat(i):n}(this,t,E6(e[t])),f=i.get(t),v=f?c&&c.get(t)?"replaceMerge":"normalMerge":"replaceAll",y=Ie(f,p,v);n=y,s=t,u=Lv,Mb(n,function(e){var t=e.newOption;MO(t)&&(e.keyInfo.mainType=s,e.keyInfo.subType=function(e,t,n,r){return t.type?t.type:n?n.subType:r.determineSubType(e,t)}(s,t,e.existing,u))}),r[t]=null,i.set(t,null),a.set(t,0);var _=[],x=[],b=0;Mb(y,function(e,n){var r=e.existing,i=e.newOption;if(i){var a="series"===t,s=Lv.getClass(t,e.keyInfo.subType,!a);if(!s)return;if("tooltip"===t){if(h)return;h=!0}if(r&&r.constructor===s)r.name=e.keyInfo.name,r.mergeOption(i,this),r.optionUpdated(i,!1);else{var u=Mf({componentIndex:n},e.keyInfo);Mf(r=new s(i,this,this,u),u),e.brandNew&&(r.__requireNewView=!0),r.init(i,this,this),r.optionUpdated(null,!0)}}else r&&(r.mergeOption({},this),r.optionUpdated({},!1));r?(_.push(r.option),x.push(r),b++):(_.push(void 0),x.push(void 0))},this),r[t]=_,i.set(t,x),a.set(t,b),"series"===t&&eO(this)},this);!this._seriesIndices&&eO(this)},t.prototype.getOption=function(){var e=Mh(this.option);return Mb(e,function(t,n){if(Lv.hasClass(n)){for(var r=E6(t),i=r.length,a=!1,s=i-1;s>=0;s--)r[s]&&!Ia(r[s])?a=!0:(r[s]=null,!a&&i--);r.length=i,e[n]=r}}),delete e[LG],e},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(e){this._payload=e},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(e,t){var n=this._componentsMap.get(e);if(n){var r=n[t||0];if(r)return r;if(null==t){for(var i=0;i<n.length;i++)if(n[i])return n[i]}}},t.prototype.queryComponents=function(e){var t,n=e.mainType;if(!n)return[];var r=e.index,i=e.id,a=e.name,s=this._componentsMap.get(n);return s&&s.length?(null!=r?(t=[],Mb(E6(r),function(e){s[e]&&t.push(s[e])})):t=null!=i?LW("id",i,s):null!=a?LW("name",a,s):MM(s,function(e){return!!e}),Lj(t,e)):[]},t.prototype.findComponents=function(e){var t=e.query,n=e.mainType,r=function(e){var t=n+"Index",r=n+"Id",i=n+"Name";return e&&(null!=e[t]||null!=e[r]||null!=e[i])?{mainType:n,index:e[t],id:e[r],name:e[i]}:null}(t);return function(t){return e.filter?MM(t,e.filter):t}(Lj(r?this.queryComponents(r):MM(this._componentsMap.get(n),function(e){return!!e}),e))},t.prototype.eachComponent=function(e,t,n){var r=this._componentsMap;if(MD(e))r.each(function(n,r){for(var i=0;n&&i<n.length;i++){var a=n[i];a&&e.call(t,r,a,a.componentIndex)}});else{for(var i=MP(e)?r.get(e):MO(e)?this.findComponents(e):null,a=0;i&&a<i.length;a++){var s=i[a];s&&t.call(n,s,s.componentIndex)}}},t.prototype.getSeriesByName=function(e){var t=Ir(e,null);return MM(this._componentsMap.get("series"),function(e){return!!e&&null!=t&&e.name===t})},t.prototype.getSeriesByIndex=function(e){return this._componentsMap.get("series")[e]},t.prototype.getSeriesByType=function(e){return MM(this._componentsMap.get("series"),function(t){return!!t&&t.subType===e})},t.prototype.getSeries=function(){return MM(this._componentsMap.get("series"),function(e){return!!e})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(e,t){ek(this),Mb(this._seriesIndices,function(n){var r=this._componentsMap.get("series")[n];e.call(t,r,n)},this)},t.prototype.eachRawSeries=function(e,t){Mb(this._componentsMap.get("series"),function(n){n&&e.call(t,n,n.componentIndex)})},t.prototype.eachSeriesByType=function(e,t,n){ek(this),Mb(this._seriesIndices,function(r){var i=this._componentsMap.get("series")[r];i.subType===e&&t.call(n,i,r)},this)},t.prototype.eachRawSeriesByType=function(e,t,n){return Mb(this.getSeriesByType(e),t,n)},t.prototype.isSeriesFiltered=function(e){return ek(this),null==this._seriesIndicesMap.get(e.componentIndex)},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(e,t){ek(this);var n=[];Mb(this._seriesIndices,function(r){var i=this._componentsMap.get("series")[r];e.call(t,i,r)&&n.push(r)},this),this._seriesIndices=n,this._seriesIndicesMap=M1(n)},t.prototype.restoreData=function(e){eO(this);var t=this._componentsMap,n=[];t.each(function(e,t){Lv.hasClass(t)&&n.push(t)}),Lv.topologicalTravel(n,Lv.getAllClassMainTypes(),function(n){Mb(t.get(n),function(t){t&&("series"!==n||!function(e,t){if(t){var n=t.seriesIndex,r=t.seriesId,i=t.seriesName;return null!=n&&e.componentIndex!==n||null!=r&&e.id!==r||null!=i&&e.name!==i}}(t,e))&&t.restoreData()})})},t.internalField=void(eO=function(e){var t=e._seriesIndices=[];Mb(e._componentsMap.get("series"),function(e){e&&t.push(e.componentIndex)}),e._seriesIndicesMap=M1(t)},ek=function(e){},eB=function(e,t){e.option={},e.option[LG]=1,e._componentsMap=M1({series:[]}),e._componentsCount=M1();var n=t.aria;MO(n)&&null==n.enabled&&(n.enabled=!0),function(e,t){var n=e.color&&!e.colorLayer;Mb(t,function(t,r){if("colorLayer"!==r||!n)!Lv.hasClass(r)&&("object"==typeof t?e[r]=e[r]?Md(e[r],t,!1):Mh(t):null==e[r]&&(e[r]=t))})}(t,e._theme.option),Md(t,Lx,!1),e._mergeOption(t,null)}),t}(Rb);function LW(e,t,n){if(MI(t)){var r=M1();return Mb(t,function(e){null!=e&&null!=Ir(e,null)&&r.set(e,!0)}),MM(n,function(t){return t&&r.get(t[e])})}var i=Ir(t,null);return MM(n,function(t){return t&&null!=i&&t[e]===i})}function Lj(e,t){return t.hasOwnProperty("subType")?MM(e,function(e){return e&&e.subType===t.subType}):e}function LX(e){var t=M1();return e&&Mb(E6(e.replaceMerge),function(e){t.set(e,!0)}),{replaceMergeMainTypeMap:t}}M_(LV,Lz);var LY=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"];let LJ=function(e){Mb(LY,function(t){this[t]=MT(e[t],e)},this)};var LZ={},Lq=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(e,t){var n=[];Mb(LZ,function(r,i){var a=r.create(e,t);n=n.concat(a||[])}),this._coordinateSystems=n},e.prototype.update=function(e,t){Mb(this._coordinateSystems,function(n){n.update&&n.update(e,t)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(e,t){LZ[e]=t},e.get=function(e){return LZ[e]},e}(),LK=/^(min|max)?(.+)$/,LQ=function(){function e(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return e.prototype.setOption=function(e,t,n){e&&(Mb(E6(e.series),function(e){e&&e.data&&MB(e.data)&&Mq(e.data)}),Mb(E6(e.dataset),function(e){e&&e.source&&MB(e.source)&&Mq(e.source)})),e=Mh(e);var r=this._optionBackup,i=function(e,t,n){var r,i,a=[],s=e.baseOption,u=e.timeline,c=e.options,h=e.media,p=!!e.media,f=!!(c||u||s&&s.timeline);function v(e){Mb(t,function(t){t(e,n)})}return s?!(i=s).timeline&&(i.timeline=u):((f||p)&&(e.options=e.media=null),i=e),p&&MI(h)&&Mb(h,function(e){e&&e.option&&(e.query?a.push(e):!r&&(r=e))}),v(i),Mb(c,function(e){return v(e)}),Mb(a,function(e){return v(e.option)}),{baseOption:i,timelineOptions:c||[],mediaDefault:r,mediaList:a}}(e,t,!r);this._newBaseOption=i.baseOption,r?(i.timelineOptions.length&&(r.timelineOptions=i.timelineOptions),i.mediaList.length&&(r.mediaList=i.mediaList),i.mediaDefault&&(r.mediaDefault=i.mediaDefault)):this._optionBackup=i},e.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],Mh(e?t.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(e){var t,n=this._timelineOptions;if(n.length){var r=e.getComponent("timeline");r&&(t=Mh(n[r.getCurrentIndex()]))}return t},e.prototype.getMediaOption=function(e){var t=this._api.getWidth(),n=this._api.getHeight(),r=this._mediaList,i=this._mediaDefault,a=[],s=[];if(!r.length&&!i)return s;for(var u=0,c=r.length;u<c;u++)(function(e,t,n){var r={width:t,height:n,aspectratio:t/n},i=!0;return Mb(e,function(e,t){var n=t.match(LK);if(!!n&&!!n[1]&&!!n[2]){var a=n[1];!function(e,t,n){return"min"===n?e>=t:"max"===n?e<=t:e===t}(r[n[2].toLowerCase()],e,a)&&(i=!1)}}),i})(r[u].query,t,n)&&a.push(u);return!a.length&&i&&(a=[-1]),a.length&&!function(e,t){return e.join(",")===t.join(",")}(a,this._currentMediaIndices)&&(s=MS(a,function(e){return Mh(-1===e?i.option:r[e].option)})),this._currentMediaIndices=a,s},e}(),L$=Mb,L0=MO,L1=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function L2(e){var t=e&&e.itemStyle;if(!!t)for(var n=0,r=L1.length;n<r;n++){var i=L1[n],a=t.normal,s=t.emphasis;a&&a[i]&&(e[i]=e[i]||{},e[i].normal?Md(e[i].normal,a[i]):e[i].normal=a[i],a[i]=null),s&&s[i]&&(e[i]=e[i]||{},e[i].emphasis?Md(e[i].emphasis,s[i]):e[i].emphasis=s[i],s[i]=null)}}function L3(e,t,n){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var r=e[t].normal,i=e[t].emphasis;r&&(n?(e[t].normal=e[t].emphasis=null,Mg(e[t],r)):e[t]=r),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function L5(e){L3(e,"itemStyle"),L3(e,"lineStyle"),L3(e,"areaStyle"),L3(e,"label"),L3(e,"labelLine"),L3(e,"upperLabel"),L3(e,"edgeLabel")}function L4(e,t){var n=L0(e)&&e[t],r=L0(n)&&n.textStyle;if(r)for(var i=0,a=E8.length;i<a;i++){var s=E8[i];r.hasOwnProperty(s)&&(n[s]=r[s])}}function L6(e){e&&(L5(e),L4(e,"label"),e.emphasis&&L4(e.emphasis,"label"))}function L9(e){return MI(e)?e:e?[e]:[]}function L8(e){return(MI(e)?e[0]:e)||{}}function L7(e){e&&Mb(Oe,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var Oe=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Ot=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],On=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Or(e){var t=e&&e.itemStyle;if(t)for(var n=0;n<On.length;n++){var r=On[n][1],i=On[n][0];null!=t[r]&&(t[i]=t[r])}}function Oi(e){if(!!e)"edge"===e.alignTo&&null!=e.margin&&null==e.edgeDistance&&(e.edgeDistance=e.margin)}function Oa(e){if(!!e)e.downplay&&!e.blur&&(e.blur=e.downplay)}function Oo(e,t){var n,r,i;n=e,r=t,L$(L9(n.series),function(e){L0(e)&&function(e){if(!!L0(e)){L2(e),L5(e),L4(e,"label"),L4(e,"upperLabel"),L4(e,"edgeLabel"),e.emphasis&&(L4(e.emphasis,"label"),L4(e.emphasis,"upperLabel"),L4(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(L2(t),L6(t));var n=e.markLine;n&&(L2(n),L6(n));var r=e.markArea;r&&L6(r);var i=e.data;if("graph"===e.type){i=i||e.nodes;var a=e.links||e.edges;if(a&&!MB(a))for(var s=0;s<a.length;s++)L6(a[s]);Mb(e.categories,function(e){L5(e)})}if(i&&!MB(i))for(var s=0;s<i.length;s++)L6(i[s]);if((t=e.markPoint)&&t.data){for(var u=t.data,s=0;s<u.length;s++)L6(u[s])}if((n=e.markLine)&&n.data){for(var c=n.data,s=0;s<c.length;s++)MI(c[s])?(L6(c[s][0]),L6(c[s][1])):L6(c[s])}"gauge"===e.type?(L4(e,"axisLabel"),L4(e,"title"),L4(e,"detail")):"treemap"===e.type?(L3(e.breadcrumb,"itemStyle"),Mb(e.levels,function(e){L5(e)})):"tree"===e.type&&L5(e.leaves)}}(e)}),i=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"],r&&i.push("valueAxis","categoryAxis","logAxis","timeAxis"),L$(i,function(e){L$(L9(n[e]),function(e){e&&(L4(e,"axisLabel"),L4(e.axisPointer,"label"))})}),L$(L9(n.parallel),function(e){var t=e&&e.parallelAxisDefault;L4(t,"axisLabel"),L4(t&&t.axisPointer,"label")}),L$(L9(n.calendar),function(e){L3(e,"itemStyle"),L4(e,"dayLabel"),L4(e,"monthLabel"),L4(e,"yearLabel")}),L$(L9(n.radar),function(e){L4(e,"name"),e.name&&null==e.axisName&&(e.axisName=e.name,delete e.name),null!=e.nameGap&&null==e.axisNameGap&&(e.axisNameGap=e.nameGap,delete e.nameGap)}),L$(L9(n.geo),function(e){L0(e)&&(L6(e),L$(L9(e.regions),function(e){L6(e)}))}),L$(L9(n.timeline),function(e){L6(e),L3(e,"label"),L3(e,"itemStyle"),L3(e,"controlStyle",!0);var t=e.data;MI(t)&&Mb(t,function(e){MO(e)&&(L3(e,"label"),L3(e,"itemStyle"))})}),L$(L9(n.toolbox),function(e){L3(e,"iconStyle"),L$(e.feature,function(e){L3(e,"iconStyle")})}),L4(L8(n.axisPointer),"label"),L4(L8(n.tooltip).axisPointer,"label"),e.series=E6(e.series),Mb(e.series,function(e){if(!!MO(e)){var t=e.type;if("line"===t)null!=e.clipOverflow&&(e.clip=e.clipOverflow);else if("pie"===t||"gauge"===t){null!=e.clockWise&&(e.clockwise=e.clockWise),Oi(e.label);var n=e.data;if(n&&!MB(n))for(var r=0;r<n.length;r++)Oi(n[r]);null!=e.hoverOffset&&(e.emphasis=e.emphasis||{},e.emphasis.scaleSize=null)}else if("gauge"===t){var i=function(e,t){for(var n=t.split(","),r=e,i=0;i<n.length&&null!=(r=r&&r[n[i]]);i++);return r}(e,"pointer.color");null!=i&&function(e,t,n,r){for(var i,a=t.split(","),s=e,u=0;u<a.length-1;u++)null==s[i=a[u]]&&(s[i]={}),s=s[i];null==s[a[u]]&&(s[a[u]]=n)}(e,"itemStyle.color",i)}else if("bar"===t){Or(e),Or(e.backgroundStyle),Or(e.emphasis);var n=e.data;if(n&&!MB(n))for(var r=0;r<n.length;r++)"object"==typeof n[r]&&(Or(n[r]),Or(n[r]&&n[r].emphasis))}else if("sunburst"===t){var a=e.highlightPolicy;a&&(e.emphasis=e.emphasis||{},!e.emphasis.focus&&(e.emphasis.focus=a)),Oa(e),!function e(t,n){if(t)for(var r=0;r<t.length;r++)n(t[r]),t[r]&&e(t[r].children,n)}(e.data,Oa)}else"graph"===t||"sankey"===t?!function(e){if(!!e)null!=e.focusNodeAdjacency&&(e.emphasis=e.emphasis||{},null==e.emphasis.focus&&(e.emphasis.focus="adjacency"))}(e):"map"===t&&(e.mapType&&!e.map&&(e.map=e.mapType),e.mapLocation&&Mg(e,e.mapLocation));null!=e.hoverAnimation&&(e.emphasis=e.emphasis||{},e.emphasis&&null==e.emphasis.scale&&(e.emphasis.scale=e.hoverAnimation)),L7(e)}}),e.dataRange&&(e.visualMap=e.dataRange),Mb(Ot,function(t){var n=e[t];n&&(!MI(n)&&(n=[n]),Mb(n,function(e){L7(e)}))})}function Os(e){Mb(e,function(t,n){var r=[],i=[NaN,NaN],a=[t.stackResultDimension,t.stackedOverDimension],s=t.data,u=t.isStackedByIndex,c=t.seriesModel.get("stackStrategy")||"samesign";s.modify(a,function(a,h,p){var f,v,y=s.get(t.stackedDimension,p);if(isNaN(y))return i;u?v=s.getRawIndex(p):f=s.get(t.stackedByDimension,p);for(var _=NaN,x=n-1;x>=0;x--){var b=e[x];if(!u&&(v=b.data.rawIndexOf(b.stackedByDimension,f)),v>=0){var S=b.data.getByRawIndex(b.stackResultDimension,v);if("all"===c||"positive"===c&&S>0||"negative"===c&&S<0||"samesign"===c&&y>=0&&S>0||"samesign"===c&&y<=0&&S<0){y=function(e,t){var n=Math.max(EF(e),EF(t)),r=e+t;return n>20?r:EB(r,n)}(y,S),_=S;break}}}return r[0]=y,r[1]=_,r})})}var Ol=function(e){this.data=e.data||(e.sourceFormat===LA?{}:[]),this.sourceFormat=e.sourceFormat||LT,this.seriesLayoutBy=e.seriesLayoutBy||LE,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var n=0;n<t.length;n++){var r=t[n];null==r.type&&LO(this,n)===LI.Must&&(r.type="ordinal")}};function Ou(e){return e instanceof Ol}function Oc(e,t,n){n=n||Od(e);var r=t.seriesLayoutBy,i=function(e,t,n,r,i){if(!e)return{dimensionsDefine:Op(i),startIndex:s,dimensionsDetectedCount:a};if(t===Lw){var a,s;"auto"===r||null==r?Of(function(e){null!=e&&"-"!==e&&(MP(e)?null==s&&(s=1):s=0)},n,e,10):s=ML(r)?r:r?1:0,!i&&1===s&&(i=[],Of(function(e,t){i[t]=null!=e?e+"":""},n,e,1/0)),a=i?i.length:"row"===n?e.length:e[0]?e[0].length:null}else if(t===LM)!i&&(i=function(e){for(var t,n=0;n<e.length&&!(t=e[n++]););if(t)return MC(t)}(e));else if(t===LA)!i&&(i=[],Mb(e,function(e,t){i.push(t)}));else if(t===LS){var u=E7(e[0]);a=MI(u)&&u.length||1}return{startIndex:s,dimensionsDefine:Op(i),dimensionsDetectedCount:a}}(e,n,r,t.sourceHeader,t.dimensions);return new Ol({data:e,sourceFormat:n,seriesLayoutBy:r,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Mh(t)})}function Oh(e){return new Ol({data:e,sourceFormat:MB(e)?LC:LS})}function Od(e){var t=LT;if(MB(e))t=LC;else if(MI(e)){0===e.length&&(t=Lw);for(var n=0,r=e.length;n<r;n++){var i=e[n];if(null!=i){if(MI(i)||MB(i)){t=Lw;break}else if(MO(i)){t=LM;break}}}}else if(MO(e)){for(var a in e)if(M4(e,a)&&Mx(e[a])){t=LA;break}}return t}function Op(e){if(!!e){var t=M1();return MS(e,function(e,n){var r={name:(e=MO(e)?e:{name:e}).name,displayName:e.displayName,type:e.type};if(null==r.name)return r;r.name+="",null==r.displayName&&(r.displayName=r.name);var i=t.get(r.name);return i?r.name+="-"+i.count++:t.set(r.name,{count:1}),r})}}function Of(e,t,n,r){if("row"===t)for(var i=0;i<n.length&&i<r;i++)e(n[i]?n[i][0]:null,i);else{for(var a=n[0]||[],i=0;i<a.length&&i<r;i++)e(a[i],i)}}function Og(e){var t=e.sourceFormat;return t===LM||t===LA}var Om=function(){var e;function t(e,t){var n=Ou(e)?e:Oh(e);this._source=n;var r=this._data=n.data;n.sourceFormat===LC&&(this._offset=0,this._dimSize=t,this._data=r),eH(this,r,n)}return t.prototype.getSource=function(){return this._source},t.prototype.count=function(){return 0},t.prototype.getItem=function(e,t){},t.prototype.appendData=function(e){},t.prototype.clean=function(){},t.protoInitialize=void((e=t.prototype).pure=!1,e.persistent=!0),t.internalField=function(){eH=function(e,i,a){var s=a.sourceFormat,u=a.seriesLayoutBy,c=a.startIndex,h=a.dimensionsDefine,p=eU[OC(s,u)];if(Mf(e,p),s===LC)e.getItem=t,e.count=r,e.fillStorage=n;else{var f=O_(s,u);e.getItem=MT(f,null,i,c,h);var v=OS(s,u);e.count=MT(v,null,i,c,h)}};var e,t=function(e,t){e-=this._offset,t=t||[];for(var n=this._data,r=this._dimSize,i=r*e,a=0;a<r;a++)t[a]=n[i+a];return t},n=function(e,t,n,r){for(var i=this._data,a=this._dimSize,s=0;s<a;s++){for(var u=r[s],c=null==u[0]?1/0:u[0],h=null==u[1]?-1/0:u[1],p=t-e,f=n[s],v=0;v<p;v++){var y=i[v*a+s];f[e+v]=y,y<c&&(c=y),y>h&&(h=y)}u[0]=c,u[1]=h}},r=function(){return this._data?this._data.length/this._dimSize:0};function i(e){for(var t=0;t<e.length;t++)this._data.push(e[t])}(e={})[Lw+"_"+LE]={pure:!0,appendData:i},e[Lw+"_row"]={pure:!0,appendData:function(){throw Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[LM]={pure:!0,appendData:i},e[LA]={pure:!0,appendData:function(e){var t=this._data;Mb(e,function(e,n){for(var r=t[n]||(t[n]=[]),i=0;i<(e||[]).length;i++)r.push(e[i])})}},e[LS]={appendData:i},e[LC]={persistent:!1,pure:!0,appendData:function(e){this._data=e},clean:function(){this._offset+=this.count(),this._data=null}},eU=e}(),t}(),Ov=function(e,t,n,r){return e[r]},Oy=((eN={})[Lw+"_"+LE]=function(e,t,n,r){return e[r+t]},eN[Lw+"_row"]=function(e,t,n,r,i){r+=t;for(var a=i||[],s=0;s<e.length;s++){var u=e[s];a[s]=u?u[r]:null}return a},eN[LM]=Ov,eN[LA]=function(e,t,n,r,i){for(var a=i||[],s=0;s<n.length;s++){var u=n[s].name,c=e[u];a[s]=c?c[r]:null}return a},eN[LS]=Ov,eN);function O_(e,t){var n=Oy[OC(e,t)];return n}var Ox=function(e,t,n){return e.length},Ob=((eF={})[Lw+"_"+LE]=function(e,t,n){return Math.max(0,e.length-t)},eF[Lw+"_row"]=function(e,t,n){var r=e[0];return r?Math.max(0,r.length-t):0},eF[LM]=Ox,eF[LA]=function(e,t,n){var r=n[0].name,i=e[r];return i?i.length:0},eF[LS]=Ox,eF);function OS(e,t){var n=Ob[OC(e,t)];return n}var Ow=function(e,t,n){return e[t]},OM=((ez={})[Lw]=Ow,ez[LM]=function(e,t,n){return e[n]},ez[LA]=Ow,ez[LS]=function(e,t,n){var r=E7(e);return r instanceof Array?r[t]:r},ez[LC]=Ow,ez);function OA(e){var t=OM[e];return t}function OC(e,t){return e===Lw?e+"_"+t:e}function OT(e,t,n){if(!e)return;var r=e.getRawDataItem(t);if(null!=r){var i=e.getStore(),a=i.getSource().sourceFormat;if(null!=n){var s=e.getDimensionIndex(n),u=i.getDimensionProperty(s);return OA(a)(r,s,u)}var c=r;return a===LS&&(c=E7(r)),c}}var OE=/\{@(.+?)\}/g,OI=function(){function e(){}return e.prototype.getDataParams=function(e,t){var n=this.getData(t),r=this.getRawValue(e,t),i=n.getRawIndex(e),a=n.getName(e),s=n.getRawDataItem(e),u=n.getItemVisual(e,"style"),c=u&&u[n.getItemVisual(e,"drawType")||"fill"],h=u&&u.stroke,p=this.mainType,f="series"===p,v=n.userOutput&&n.userOutput.get();return{componentType:p,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:f?this.subType:null,seriesIndex:this.seriesIndex,seriesId:f?this.id:null,seriesName:f?this.name:null,name:a,dataIndex:i,data:s,dataType:t,value:r,color:c,borderColor:h,dimensionNames:v?v.fullDimensions:null,encode:v?v.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(e,t,n,r,i,a){t=t||"normal";var s=this.getData(n),u=this.getDataParams(e,n);return(a&&(u.value=a.interpolatedValue),null!=r&&MI(u.value)&&(u.value=u.value[r]),!i&&(i=s.getItemModel(e).get("normal"===t?["label","formatter"]:[t,"label","formatter"])),MD(i))?(u.status=t,u.dimensionIndex=r,i(u)):MP(i)?R7(i,u).replace(OE,function(t,n){var r=n.length,i=n;"["===i.charAt(0)&&"]"===i.charAt(r-1)&&(i=+i.slice(1,r-1));var u=OT(s,e,i);if(a&&MI(a.interpolatedValue)){var c=s.getDimensionIndex(i);c>=0&&(u=a.interpolatedValue[c])}return null!=u?u+"":""}):void 0},e.prototype.getRawValue=function(e,t){return OT(this.getData(t),e)},e.prototype.formatTooltip=function(e,t,n){},e}();function OD(e){var t,n;return MO(e)?e.type&&(n=e):t=e,{text:t,frag:n}}function OP(e){return new OR(e)}var OR=function(){function e(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return e.prototype.perform=function(e){var t,n,r=this._upstream,i=e&&e.skip;if(this._dirty&&r){var a=this.context;a.data=a.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!i&&(t=this._plan(this.context));var s=function(e){return e>=1||(e=1),e}(this._modBy),u=this._modDataCount||0,c=function(e){return e>=1||(e=1),e}(e&&e.modBy),h=e&&e.modDataCount||0;function p(e){return e>=1||(e=1),e}(s!==c||u!==h)&&(t="reset"),(this._dirty||"reset"===t)&&(this._dirty=!1,n=this._doReset(i)),this._modBy=c,this._modDataCount=h;var f=e&&e.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var v=this._dueIndex,y=Math.min(null!=f?this._dueIndex+f:1/0,this._dueEnd);if(!i&&(n||v<y)){var _=this._progress;if(MI(_))for(var x=0;x<_.length;x++)this._doProgress(_[x],v,y,c,h);else this._doProgress(_,v,y,c,h)}this._dueIndex=y;var b=null!=this._settedOutputEnd?this._settedOutputEnd:y;this._outputDueEnd=b}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(e,t,n,r,i){OL.reset(t,n,r,i),this._callingProgress=e,this._callingProgress({start:t,end:n,count:n-t,next:OL.next},this.context)},e.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!e&&this._reset&&((t=this._reset(this.context))&&t.progress&&(n=t.forceFirstProgress,t=t.progress),MI(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var t,n,r=this._downstream;return r&&r.dirty(),n},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},e.prototype.dispose=function(){if(!this._disposed)this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},e}(),OL=function(){var e,t,n,r,i,a={reset:function(c,h,p,f){t=c,e=h,n=p,i=Math.ceil((r=f)/n),a.next=n>1&&r>0?u:s}};return a;function s(){return t<e?t++:null}function u(){var a=t%i*n+Math.ceil(t/i),s=t>=e?null:a<r?a:t;return t++,s}}(),OO={},Ok="undefined"!=typeof console&&console.warn&&console.log;function OB(e,t,n){if(Ok){if(n){if(OO[t])return;OO[t]=!0}console[e]("[ECharts] "+t)}}function ON(e){}function OF(e){throw Error(e)}function Oz(e,t){var n=t&&t.type;return"ordinal"===n?e:("time"===n&&!ML(e)&&null!=e&&"-"!==e&&(e=+EY(e)),null==e||""===e?NaN:Number(e))}var OU=M1({number:function(e){return parseFloat(e)},time:function(e){return+EY(e)},trim:function(e){return MP(e)?MJ(e):e}});function OH(e){return OU.get(e)}var OG={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},OV=function(){function e(e,t){!ML(t)&&OF(""),this._opFn=OG[e],this._rvalFloat=E$(t)}return e.prototype.evaluate=function(e){return ML(e)?this._opFn(e,this._rvalFloat):this._opFn(E$(e),this._rvalFloat)},e}(),OW=function(){function e(e,t){var n="desc"===e;this._resultLT=n?1:-1,null==t&&(t=n?"min":"max"),this._incomparable="min"===t?-1/0:1/0}return e.prototype.evaluate=function(e,t){var n=ML(e)?e:E$(e),r=ML(t)?t:E$(t),i=isNaN(n),a=isNaN(r);if(i&&(n=this._incomparable),a&&(r=this._incomparable),i&&a){var s=MP(e),u=MP(t);s&&(n=u?e:0),u&&(r=s?t:0)}return n<r?this._resultLT:n>r?-this._resultLT:0},e}(),Oj=function(){function e(e,t){this._rval=t,this._isEQ=e,this._rvalTypeof=typeof t,this._rvalFloat=E$(t)}return e.prototype.evaluate=function(e){var t=e===this._rval;if(!t){var n=typeof e;n!==this._rvalTypeof&&("number"===n||"number"===this._rvalTypeof)&&(t=E$(e)===this._rvalFloat)}return this._isEQ?t:!t},e}(),OX=function(){function e(){}return e.prototype.getRawData=function(){throw Error("not supported")},e.prototype.getRawDataItem=function(e){throw Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(e){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(e,t){},e.prototype.retrieveValueFromItem=function(e,t){},e.prototype.convertValue=function(e,t){return Oz(e,t)},e}();function OY(e){return!OQ(e.sourceFormat)&&OF(""),e.data}function OJ(e){var t=e.sourceFormat,n=e.data;if(!OQ(t)&&OF(""),t===Lw){for(var r=[],i=0,a=n.length;i<a;i++)r.push(n[i].slice());return r}if(t===LM){for(var r=[],i=0,a=n.length;i<a;i++)r.push(Mf({},n[i]));return r}}function OZ(e,t,n){return null==n?void 0:!ML(n)&&(isNaN(n)||M4(t,n))?M4(t,n)?t[n]:void 0:e[n]}function Oq(e){return Mh(e)}var OK=M1();function OQ(e){return e===Lw||e===LM}var O$="undefined",O0=typeof Uint32Array===O$?Array:Uint32Array,O1=typeof Uint16Array===O$?Array:Uint16Array,O2=typeof Int32Array===O$?Array:Int32Array,O3=typeof Float64Array===O$?Array:Float64Array,O5={float:O3,int:O2,ordinal:Array,number:Array,time:O3};function O4(e){return e>65535?O0:O1}function O6(){return[1/0,-1/0]}function O9(e,t,n,r,i){var a=O5[n||"float"];if(i){var s=e[t],u=s&&s.length;if(u!==r){for(var c=new a(r),h=0;h<u;h++)c[h]=s[h];e[t]=c}}else e[t]=new a(r)}var O8=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=M1()}return e.prototype.initData=function(e,t,n){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var r=e.getSource(),i=this.defaultDimValueGetter=eG[r.sourceFormat];this._dimValueGetter=n||i,this._rawExtent=[],Og(r),this._dimensions=MS(t,function(e){return{type:e.type,property:e.property}}),this._initDataFromProvider(0,e.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(e,t){var n=this._calcDimNameToIdx,r=this._dimensions,i=n.get(e);if(null!=i){if(r[i].type===t)return i}else i=r.length;return r[i]={type:t},n.set(e,i),this._chunks[i]=new O5[t||"float"](this._rawCount),this._rawExtent[i]=O6(),i},e.prototype.collectOrdinalMeta=function(e,t){var n=this._chunks[e],r=this._dimensions[e],i=this._rawExtent,a=r.ordinalOffset||0,s=n.length;0===a&&(i[e]=O6());for(var u=i[e],c=a;c<s;c++){var h=n[c]=t.parseAndCollect(n[c]);!isNaN(h)&&(u[0]=Math.min(h,u[0]),u[1]=Math.max(h,u[1]))}r.ordinalMeta=t,r.ordinalOffset=s,r.type="ordinal"},e.prototype.getOrdinalMeta=function(e){return this._dimensions[e].ordinalMeta},e.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},e.prototype.appendData=function(e){var t=this._provider,n=this.count();t.appendData(e);var r=t.count();return!t.persistent&&(r+=n),n<r&&this._initDataFromProvider(n,r,!0),[n,r]},e.prototype.appendValues=function(e,t){for(var n=this._chunks,r=this._dimensions,i=r.length,a=this._rawExtent,s=this.count(),u=s+Math.max(e.length,t||0),c=0;c<i;c++){var h=r[c];O9(n,c,h.type,u,!0)}for(var p=[],f=s;f<u;f++){for(var v=f-s,y=0;y<i;y++){var h=r[y],_=eG.arrayRows.call(this,e[v]||p,h.property,v,y);n[y][f]=_;var x=a[y];_<x[0]&&(x[0]=_),_>x[1]&&(x[1]=_)}}return this._rawCount=this._count=u,{start:s,end:u}},e.prototype._initDataFromProvider=function(e,t,n){for(var r=this._provider,i=this._chunks,a=this._dimensions,s=a.length,u=this._rawExtent,c=MS(a,function(e){return e.property}),h=0;h<s;h++){var p=a[h];!u[h]&&(u[h]=O6()),O9(i,h,p.type,t,n)}if(r.fillStorage)r.fillStorage(e,t,i,u);else{for(var f=[],v=e;v<t;v++){f=r.getItem(v,f);for(var y=0;y<s;y++){var _=i[y],x=this._dimValueGetter(f,c[y],v,y);_[v]=x;var b=u[y];x<b[0]&&(b[0]=x),x>b[1]&&(b[1]=x)}}}!r.persistent&&r.clean&&r.clean(),this._rawCount=this._count=t,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var n=this._chunks[e];return n?n[this.getRawIndex(t)]:NaN},e.prototype.getValues=function(e,t){var n=[],r=[];if(null==t){t=e,e=[];for(var i=0;i<this._dimensions.length;i++)r.push(i)}else r=e;for(var i=0,a=r.length;i<a;i++)n.push(this.get(r[i],t));return n},e.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var n=this._chunks[e];return n?n[t]:NaN},e.prototype.getSum=function(e){var t=this._chunks[e],n=0;if(t)for(var r=0,i=this.count();r<i;r++){var a=this.get(e,r);!isNaN(a)&&(n+=a)}return n},e.prototype.getMedian=function(e){var t=[];this.each([e],function(e){!isNaN(e)&&t.push(e)});var n=t.sort(function(e,t){return e-t}),r=this.count();return 0===r?0:r%2==1?n[(r-1)/2]:(n[r/2]+n[r/2-1])/2},e.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return -1;if(!this._indices)return e;var t=this._indices,n=t[e];if(null!=n&&n<this._count&&n===e)return e;for(var r=0,i=this._count-1;r<=i;){var a=(r+i)/2|0;if(t[a]<e)r=a+1;else{if(!(t[a]>e))return a;i=a-1}}return -1},e.prototype.indicesOfNearest=function(e,t,n){var r=this._chunks[e],i=[];if(!r)return i;null==n&&(n=1/0);for(var a=1/0,s=-1,u=0,c=0,h=this.count();c<h;c++){var p=t-r[this.getRawIndex(c)],f=Math.abs(p);f<=n&&((f<a||f===a&&p>=0&&s<0)&&(a=f,s=p,u=0),p===s&&(i[u++]=c))}return i.length=u,i},e.prototype.getIndices=function(){var e,t=this._indices;if(t){var n=t.constructor,r=this._count;if(n===Array){e=new n(r);for(var i=0;i<r;i++)e[i]=t[i]}else e=new n(t.buffer,0,r)}else{var n=O4(this._rawCount);e=new n(this.count());for(var i=0;i<e.length;i++)e[i]=i}return e},e.prototype.filter=function(e,t){if(!this._count)return this;for(var n=this.clone(),r=n.count(),i=new(O4(n._rawCount))(r),a=[],s=e.length,u=0,c=e[0],h=n._chunks,p=0;p<r;p++){var f=void 0,v=n.getRawIndex(p);if(0===s)f=t(p);else if(1===s)f=t(h[c][v],p);else{for(var y=0;y<s;y++)a[y]=h[e[y]][v];a[y]=p,f=t.apply(null,a)}f&&(i[u++]=v)}return u<r&&(n._indices=i),n._count=u,n._extent=[],n._updateGetRawIdx(),n},e.prototype.selectRange=function(e){var t=this.clone(),n=t._count;if(!n)return this;var r=MC(e),i=r.length;if(!i)return this;var a=t.count(),s=new(O4(t._rawCount))(a),u=0,c=r[0],h=e[c][0],p=e[c][1],f=t._chunks,v=!1;if(!t._indices){var y=0;if(1===i){for(var _=f[r[0]],x=0;x<n;x++){var b=_[x];(b>=h&&b<=p||isNaN(b))&&(s[u++]=y),y++}v=!0}else if(2===i){for(var _=f[r[0]],S=f[r[1]],w=e[r[1]][0],M=e[r[1]][1],x=0;x<n;x++){var b=_[x],A=S[x];(b>=h&&b<=p||isNaN(b))&&(A>=w&&A<=M||isNaN(A))&&(s[u++]=y),y++}v=!0}}if(!v){if(1===i)for(var x=0;x<a;x++){var C=t.getRawIndex(x),b=f[r[0]][C];(b>=h&&b<=p||isNaN(b))&&(s[u++]=C)}else for(var x=0;x<a;x++){for(var T=!0,C=t.getRawIndex(x),I=0;I<i;I++){var D=r[I],b=f[D][C];(b<e[D][0]||b>e[D][1])&&(T=!1)}T&&(s[u++]=t.getRawIndex(x))}}return u<a&&(t._indices=s),t._count=u,t._extent=[],t._updateGetRawIdx(),t},e.prototype.map=function(e,t){var n=this.clone(e);return this._updateDims(n,e,t),n},e.prototype.modify=function(e,t){this._updateDims(this,e,t)},e.prototype._updateDims=function(e,t,n){for(var r=e._chunks,i=[],a=t.length,s=e.count(),u=[],c=e._rawExtent,h=0;h<t.length;h++)c[t[h]]=O6();for(var p=0;p<s;p++){for(var f=e.getRawIndex(p),v=0;v<a;v++)u[v]=r[t[v]][f];u[a]=p;var y=n&&n.apply(null,u);if(null!=y){"object"!=typeof y&&(i[0]=y,y=i);for(var h=0;h<y.length;h++){var _=t[h],x=y[h],b=c[_],S=r[_];S&&(S[f]=x),x<b[0]&&(b[0]=x),x>b[1]&&(b[1]=x)}}}},e.prototype.lttbDownSample=function(e,t){var n,r,i,a=this.clone([e],!0),s=a._chunks[e],u=this.count(),c=0,h=Math.floor(1/t),p=this.getRawIndex(0),f=new(O4(this._rawCount))(Math.min((Math.ceil(u/h)+2)*2,u));f[c++]=p;for(var v=1;v<u-1;v+=h){for(var y=Math.min(v+h,u-1),_=Math.min(v+2*h,u),x=(_+y)/2,b=0,S=y;S<_;S++){var w=this.getRawIndex(S),M=s[w];if(!isNaN(M))b+=M}b/=_-y;var A=v,C=Math.min(v+h,u),T=v-1,I=s[p];n=-1,i=A;for(var D=-1,P=0,S=A;S<C;S++){var w=this.getRawIndex(S),M=s[w];if(isNaN(M)){P++,D<0&&(D=w);continue}(r=Math.abs((T-x)*(M-I)-(T-S)*(b-I)))>n&&(n=r,i=w)}P>0&&P<C-A&&(f[c++]=Math.min(D,i),i=Math.max(D,i)),f[c++]=i,p=i}return f[c++]=this.getRawIndex(u-1),a._count=c,a._indices=f,a.getRawIndex=this._getRawIdx,a},e.prototype.downSample=function(e,t,n,r){for(var i=this.clone([e],!0),a=i._chunks,s=[],u=Math.floor(1/t),c=a[e],h=this.count(),p=i._rawExtent[e]=O6(),f=new(O4(this._rawCount))(Math.ceil(h/u)),v=0,y=0;y<h;y+=u){u>h-y&&(u=h-y,s.length=u);for(var _=0;_<u;_++){var x=this.getRawIndex(y+_);s[_]=c[x]}var b=n(s),S=this.getRawIndex(Math.min(y+r(s,b)||0,h-1));c[S]=b,b<p[0]&&(p[0]=b),b>p[1]&&(p[1]=b),f[v++]=S}return i._count=v,i._indices=f,i._updateGetRawIdx(),i},e.prototype.each=function(e,t){if(!!this._count)for(var n=e.length,r=this._chunks,i=0,a=this.count();i<a;i++){var s=this.getRawIndex(i);switch(n){case 0:t(i);break;case 1:t(r[e[0]][s],i);break;case 2:t(r[e[0]][s],r[e[1]][s],i);break;default:for(var u=0,c=[];u<n;u++)c[u]=r[e[u]][s];c[u]=i,t.apply(null,c)}}},e.prototype.getDataExtent=function(e){var t,n=this._chunks[e],r=O6();if(!n)return r;var i=this.count();if(!this._indices)return this._rawExtent[e].slice();if(t=this._extent[e])return t.slice();for(var a=(t=r)[0],s=t[1],u=0;u<i;u++){var c=n[this.getRawIndex(u)];c<a&&(a=c),c>s&&(s=c)}return t=[a,s],this._extent[e]=t,t},e.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var n=[],r=this._chunks,i=0;i<r.length;i++)n.push(r[i][t]);return n},e.prototype.clone=function(t,n){var r=new e,i=this._chunks,a=t&&Mw(t,function(e,t){return e[t]=!0,e},{});if(a)for(var s=0;s<i.length;s++)r._chunks[s]=a[s]?function(e){var t=e.constructor;return t===Array?e.slice():new t(e)}(i[s]):i[s];else r._chunks=i;return this._copyCommonProps(r),!n&&(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},e.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Mh(this._extent),e._rawExtent=Mh(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var n=this._indices.length;t=new e(n);for(var r=0;r<n;r++)t[r]=this._indices[r]}else t=new e(this._indices);return t}return null},e.prototype._getRawIdxIdentity=function(e){return e},e.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function e(e,t,n,r){return Oz(e[r],this._dimensions[r])}eG={arrayRows:e,objectRows:function(e,t,n,r){return Oz(e[t],this._dimensions[r])},keyedColumns:e,original:function(e,t,n,r){var i=e&&(null==e.value?e:e.value);return Oz(i instanceof Array?i[r]:i,this._dimensions[r])},typedArray:function(e,t,n,r){return e[r]}}}(),e}(),O7=function(){function e(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var e,t,n=this._sourceHost,r=this._getUpstreamSourceManagers(),i=!!r.length;if(kt(n)){var a=void 0,s=void 0,u=void 0;if(i){var c=r[0];c.prepareSource(),a=(u=c.getSource()).data,s=u.sourceFormat,t=[c._getVersionSign()]}else s=MB(a=n.get("data",!0))?LC:LS,t=[];var h=this._getSourceMetaRawOption()||{},p=u&&u.metaRawOption||{},f=MV(h.seriesLayoutBy,p.seriesLayoutBy)||null,v=MV(h.sourceHeader,p.sourceHeader),y=MV(h.dimensions,p.dimensions);e=f!==p.seriesLayoutBy||!!v!=!!p.sourceHeader||y?[Oc(a,{seriesLayoutBy:f,sourceHeader:v,dimensions:y},s)]:[]}else if(i){var _=this._applyTransform(r);e=_.sourceList,t=_.upstreamSignList}else e=[Oc(n.get("source",!0),this._getSourceMetaRawOption(),null)],t=[];this._setLocalSource(e,t)},e.prototype._applyTransform=function(e){var t,n,r=this._sourceHost,i=r.get("transform",!0),a=r.get("fromTransformResult",!0);null!=a&&1!==e.length&&kn("");var s=[],u=[];if(Mb(e,function(e){e.prepareSource();var t=e.getSource(a||0);null!=a&&!t&&kn(""),s.push(t),u.push(e._getVersionSign())}),i)n=function(e,t,n){var r=E6(e),i=r.length;!i&&OF("");for(var a=0;a<i;a++)t=function(e,t,n,r){!t.length&&OF(""),!MO(e)&&OF("");var i=e.type,a=OK.get(i);!a&&OF("");var s=MS(t,function(e){return function(e,t){var n=new OX,r=e.data,i=n.sourceFormat=e.sourceFormat,a=e.startIndex;e.seriesLayoutBy!==LE&&OF("");var s=[],u={},c=e.dimensionsDefine;if(c)Mb(c,function(e,t){var n=e.name,r={index:t,name:n,displayName:e.displayName};s.push(r),null!=n&&(M4(u,n)&&OF(""),u[n]=r)});else for(var h=0;h<e.dimensionsDetectedCount;h++)s.push({index:h});var p=O_(i,LE);t.__isBuiltIn&&(n.getRawDataItem=function(e){return p(r,a,s,e)},n.getRawData=MT(OY,null,e)),n.cloneRawData=MT(OJ,null,e);var f=OS(i,LE);n.count=MT(f,null,r,a,s);var v=OA(i);n.retrieveValue=function(e,t){return y(p(r,a,s,e),t)};var y=n.retrieveValueFromItem=function(e,t){if(null!=e){var n=s[t];if(n)return v(e,t,n.name)}};return n.getDimensionInfo=MT(OZ,null,s,u),n.cloneAllDimensionInfo=MT(Oq,null,s),n}(e,a)}),u=E6(a.transform({upstream:s[0],upstreamList:s,config:Mh(e.config)}));return MS(u,function(e,n){!MO(e)&&OF(""),!e.data&&OF(""),!OQ(Od(e.data))&&OF("");var r,i=t[0];if(i&&0===n&&!e.dimensions){var a=i.startIndex;a&&(e.data=i.data.slice(0,a).concat(e.data)),r={seriesLayoutBy:LE,sourceHeader:a,dimensions:i.metaRawOption.dimensions}}else r={seriesLayoutBy:LE,sourceHeader:0,dimensions:e.dimensions};return Oc(e.data,r,null)})}(r[a],t,n,1===i?null:a),a!==i-1&&(t.length=Math.max(t.length,1));return t}(i,s,{datasetIndex:r.componentIndex});else if(null!=a){;n=[new Ol({data:(t=s[0]).data,sourceFormat:t.sourceFormat,seriesLayoutBy:t.seriesLayoutBy,dimensionsDefine:Mh(t.dimensionsDefine),startIndex:t.startIndex,dimensionsDetectedCount:t.dimensionsDetectedCount})]}return{sourceList:n,upstreamSignList:u}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var n=e[t];if(n._isDirty()||this._upstreamSignList[t]!==n._getVersionSign())return!0}},e.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(e)}return t},e.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},e.prototype._innerGetDataStore=function(e,t,n){var r=this._storeList,i=r[0];!i&&(i=r[0]={});var a=i[n];if(!a){var s=this._getUpstreamSourceManagers()[0];kt(this._sourceHost)&&s?a=s._innerGetDataStore(e,t,n):(a=new O8).initData(new Om(t,e.length),e),i[n]=a}return a},e.prototype._getUpstreamSourceManagers=function(){var e,t=this._sourceHost;if(kt(t)){var n=LL(t);return n?[n.getSourceManager()]:[]}return MS((e=t).get("transform",!0)||e.get("fromTransformResult",!0)?Ip(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},Ih).models:[],function(e){return e.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var e,t,n,r=this._sourceHost;return kt(r)?(e=r.get("seriesLayoutBy",!0),t=r.get("sourceHeader",!0),n=r.get("dimensions",!0)):!this._getUpstreamSourceManagers().length&&(e=r.get("seriesLayoutBy",!0),t=r.get("sourceHeader",!0),n=r.get("dimensions",!0)),{seriesLayoutBy:e,sourceHeader:t,dimensions:n}},e}();function ke(e){e.option.transform&&Mq(e.option.transform)}function kt(e){return"series"===e.mainType}function kn(e){throw Error(e)}var kr="line-height:1";function ki(e,t){var n=e.color||"#6e7079",r=e.fontSize||12,i=e.fontWeight||"400",a=e.color||"#464646",s=e.fontSize||14,u=e.fontWeight||"900";return"html"===t?{nameStyle:"font-size:"+Ak(r+"")+"px;color:"+Ak(n)+";font-weight:"+Ak(i+""),valueStyle:"font-size:"+Ak(s+"")+"px;color:"+Ak(a)+";font-weight:"+Ak(u+"")}:{nameStyle:{fontSize:r,fill:n,fontWeight:i},valueStyle:{fontSize:s,fill:a,fontWeight:u}}}var ka=[0,10,20,30],ko=["","\n","\n\n","\n\n\n"];function ks(e,t){return t.type=e,t}function kl(e){return"section"===e.type}function ku(e){return kl(e)?kc:kh}function kc(e,t,n,r){var i=t.noHeader,a=function(e){return{html:ka[e],richText:ko[e]}}(function e(t){if(kl(t)){var n=0,r=t.blocks.length,i=r>1||r>0&&!t.noHeader;return Mb(t.blocks,function(t){var r=e(t);r>=n&&(n=r+ +(i&&(!r||kl(t)&&!t.noHeader)))}),n}return 0}(t)),s=[],u=t.blocks||[];MY(!u||MI(u)),u=u||[];var c=e.orderMode;if(t.sortBlocks&&c){u=u.slice();var h={valueAsc:"asc",valueDesc:"desc"};if(M4(h,c)){var p=new OW(h[c],null);u.sort(function(e,t){return p.evaluate(e.sortParam,t.sortParam)})}else"seriesDesc"===c&&u.reverse()}Mb(u,function(n,i){var u=t.valueFormatter,c=(kl(n)?kc:kh)(u?Mf(Mf({},e),{valueFormatter:u}):e,n,i>0?a.html:0,r);null!=c&&s.push(c)});var f="richText"===e.renderMode?s.join(a.richText):kp(s.join(""),i?n:a.html);if(i)return f;var v=R6(t.header,"ordinal",e.useUTC),y=ki(r,e.renderMode).nameStyle;return"richText"===e.renderMode?kf(e,v,y)+a.richText+f:kp('<div style="'+y+";"+kr+';">'+Ak(v)+"</div>"+f,n)}function kh(e,t,n,r){var i=e.renderMode,a=t.noName,s=t.noValue,u=!t.markerType,c=t.name,h=e.useUTC,p=t.valueFormatter||e.valueFormatter||function(e){return MS(e=MI(e)?e:[e],function(e,t){return R6(e,MI(y)?y[t]:y,h)})};if(!a||!s){var f=u?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),v=a?"":R6(c,"ordinal",h),y=t.valueType,_=s?[]:p(t.value,t.dataIndex),x=!u||!a,b=!u&&a,S=ki(r,i),w=S.nameStyle,M=S.valueStyle;return"richText"===i?(u?"":f)+(a?"":kf(e,v,w))+(s?"":function(e,t,n,r,i){var a=[i];return n&&a.push({padding:[0,0,0,r?10:20],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(MI(t)?t.join("  "):t,a)}(e,_,x,b,M)):kp((u?"":f)+(a?"":function(e,t,n){return'<span style="'+n+";"+(t?"margin-left:2px":"")+'">'+Ak(e)+"</span>"}(v,!u,w))+(s?"":function(e,t,n,r){return'<span style="'+(t?"float:right;margin-left:"+(n?"10px":"20px"):"")+";"+r+'">'+MS(e=MI(e)?e:[e],function(e){return Ak(e)}).join("&nbsp;&nbsp;")+"</span>"}(_,x,b,M)),n)}}function kd(e,t,n,r,i,a){if(!!e)return(kl(e)?kc:kh)({useUTC:i,renderMode:n,orderMode:r,markupStyleCreator:t,valueFormatter:e.valueFormatter},e,0,a)}function kp(e,t){return'<div style="margin: '+t+"px 0 0;"+kr+';">'+e+'<div style="clear:both"></div></div>'}function kf(e,t,n){return e.markupStyleCreator.wrapRichTextStyle(t,n)}function kg(e,t){return Lr(e.getData().getItemVisual(t,"style")[e.visualDrawType])}function km(e,t){var n=e.get("padding");return null!=n?n:"richText"===t?[8,10]:10}var kv=function(){function e(){this.richTextStyles={},this._nextStyleNameId=E1()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(e,t,n){var r="richText"===n?this._generateStyleName():null,i=Le({color:t,type:e,renderMode:n,markerId:r});return MP(i)?i:(this.richTextStyles[r]=i.style,i.content)},e.prototype.wrapRichTextStyle=function(e,t){var n={};MI(t)?Mb(t,function(e){return Mf(n,e)}):Mf(n,t);var r=this._generateStyleName();return this.richTextStyles[r]=n,"{"+r+"|"+e+"}"},e}();function ky(e){var t,n,r,i,a=e.series,s=e.dataIndex,u=e.multipleSeries,c=a.getData(),h=c.mapDimensionsAll("defaultedTooltip"),p=h.length,f=a.getRawValue(s),v=MI(f),y=kg(a,s);if(p>1||v&&!p){var _=function(e,t,n,r,i){var a=t.getData(),s=Mw(e,function(e,t,n){var r=a.getDimensionInfo(n);return e=e||r&&!1!==r.tooltip&&null!=r.displayName},!1),u=[],c=[],h=[];function p(e,t){var n=a.getDimensionInfo(t);if(!!n&&!1!==n.otherDims.tooltip)s?h.push(ks("nameValue",{markerType:"subItem",markerColor:i,name:n.displayName,value:e,valueType:n.type})):(u.push(e),c.push(n.type))}return r.length?Mb(r,function(e){p(OT(a,n,e),e)}):Mb(e,p),{inlineValues:u,inlineValueTypes:c,blocks:h}}(f,a,s,h,y);t=_.inlineValues,n=_.inlineValueTypes,r=_.blocks,i=_.inlineValues[0]}else if(p){var x=c.getDimensionInfo(h[0]);i=t=OT(c,s,h[0]),n=x.type}else i=t=v?f[0]:f;var b=Ii(a),S=b&&a.name||"",w=c.getName(s),M=u?S:w;return ks("section",{header:S,noHeader:u||!b,sortParam:i,blocks:[ks("nameValue",{markerType:"item",markerColor:y,name:M,noName:!MJ(M),value:t,valueType:n,dataIndex:s})].concat(r||[])})}var k_=Is();function kx(e,t){return e.getName(t)||e.getId(t)}var kb="__universalTransitionEnabled",kS=function(e){var t;function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return wJ(n,e),n.prototype.init=function(e,t,n){this.seriesIndex=this.componentIndex,this.dataTask=OP({count:kM,reset:kA}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,n),(k_(this).sourceManager=new O7(this)).prepareSource();var r=this.getInitialData(e,n);kT(r,this),this.dataTask.context.data=r;k_(this).dataBeforeProcessed=r,kw(this),this._initSelectedMapFromData(r)},n.prototype.mergeDefaultAndTheme=function(e,t){var n=Lh(this),r=n?Lp(e):{},i=this.subType;Lv.hasClass(i)&&(i+="Series"),Md(e,t.getTheme().get(this.subType)),Md(e,this.getDefaultOption()),E9(e,"label",["show"]),this.fillDataTextStyle(e.data),n&&Ld(e,r,n)},n.prototype.mergeOption=function(e,t){e=Md(this.option,e,!0),this.fillDataTextStyle(e.data);var n=Lh(this);n&&Ld(this.option,e,n);var r=k_(this).sourceManager;r.dirty(),r.prepareSource();var i=this.getInitialData(e,t);kT(i,this),this.dataTask.dirty(),this.dataTask.context.data=i,k_(this).dataBeforeProcessed=i,kw(this),this._initSelectedMapFromData(i)},n.prototype.fillDataTextStyle=function(e){if(e&&!MB(e)){for(var t=["show"],n=0;n<e.length;n++)e[n]&&e[n].label&&E9(e[n],"label",t)}},n.prototype.getInitialData=function(e,t){},n.prototype.appendData=function(e){this.getRawData().appendData(e.data)},n.prototype.getData=function(e){var t=kI(this);if(!t)return k_(this).data;var n=t.context.data;return null!=e&&n.getLinkedData?n.getLinkedData(e):n},n.prototype.getAllData=function(){var e=this.getData();return e&&e.getLinkedDataAll?e.getLinkedDataAll():[{data:e}]},n.prototype.setData=function(e){var t=kI(this);if(t){var n=t.context;n.outputData=e,t!==this.dataTask&&(n.data=e)}k_(this).data=e},n.prototype.getEncode=function(){var e=this.get("encode",!0);if(e)return M1(e)},n.prototype.getSourceManager=function(){return k_(this).sourceManager},n.prototype.getSource=function(){return this.getSourceManager().getSource()},n.prototype.getRawData=function(){return k_(this).dataBeforeProcessed},n.prototype.getColorBy=function(){return this.get("colorBy")||"series"},n.prototype.isColorBySeries=function(){return"series"===this.getColorBy()},n.prototype.getBaseAxis=function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},n.prototype.formatTooltip=function(e,t,n){return ky({series:this,dataIndex:e,multipleSeries:t})},n.prototype.isAnimationEnabled=function(){var e=this.ecModel;if(w1.node&&!(e&&e.ssr))return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),!!t},n.prototype.restoreData=function(){this.dataTask.dirty()},n.prototype.getColorFromPalette=function(e,t,n){var r=this.ecModel,i=Lz.prototype.getColorFromPalette.call(this,e,t,n);return!i&&(i=r.getColorFromPalette(e,t,n)),i},n.prototype.coordDimToDataDim=function(e){return this.getRawData().mapDimensionsAll(e)},n.prototype.getProgressive=function(){return this.get("progressive")},n.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},n.prototype.select=function(e,t){this._innerSelect(this.getData(t),e)},n.prototype.unselect=function(e,t){var n=this.option.selectedMap;if(!!n){var r=this.option.selectedMode,i=this.getData(t);if("series"===r||"all"===n){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var a=0;a<e.length;a++){var s=kx(i,e[a]);n[s]=!1,this._selectedDataIndicesMap[s]=-1}}},n.prototype.toggleSelect=function(e,t){for(var n=[],r=0;r<e.length;r++)n[0]=e[r],this.isSelected(e[r],t)?this.unselect(n,t):this.select(n,t)},n.prototype.getSelectedDataIndices=function(){if("all"===this.option.selectedMap)return[].slice.call(this.getData().getIndices());for(var e=this._selectedDataIndicesMap,t=MC(e),n=[],r=0;r<t.length;r++){var i=e[t[r]];i>=0&&n.push(i)}return n},n.prototype.isSelected=function(e,t){var n=this.option.selectedMap;if(!n)return!1;var r=this.getData(t);return("all"===n||n[kx(r,e)])&&!r.getItemModel(e).get(["select","disabled"])},n.prototype.isUniversalTransitionEnabled=function(){if(this[kb])return!0;var e=this.option.universalTransition;return!!e&&(!0===e||e&&e.enabled)},n.prototype._innerSelect=function(e,t){var n,r,i=this.option,a=i.selectedMode,s=t.length;if(!!a&&!!s){if("series"===a)i.selectedMap="all";else if("multiple"===a){!MO(i.selectedMap)&&(i.selectedMap={});for(var u=i.selectedMap,c=0;c<s;c++){var h=t[c],p=kx(e,h);u[p]=!0,this._selectedDataIndicesMap[p]=e.getRawIndex(h)}}else if("single"===a||!0===a){var f=t[s-1],p=kx(e,f);i.selectedMap=((n={})[p]=!0,n),this._selectedDataIndicesMap=((r={})[p]=e.getRawIndex(f),r)}}},n.prototype._initSelectedMapFromData=function(e){if(!this.option.selectedMap){var t=[];e.hasItemOption&&e.each(function(n){var r=e.getRawDataItem(n);r&&r.selected&&t.push(n)}),t.length>0&&this._innerSelect(e,t)}},n.registerClass=function(e){return Lv.registerClass(e)},n.protoInitialize=void((t=n.prototype).type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"),n}(Lv);function kw(e){var t=e.name;!Ii(e)&&(e.name=function(e){var t=e.getRawData(),n=t.mapDimensionsAll("seriesName"),r=[];return Mb(n,function(e){var n=t.getDimensionInfo(e);n.displayName&&r.push(n.displayName)}),r.join(" ")}(e)||t)}M_(kS,OI),M_(kS,Lz),Ib(kS,Lv);function kM(e){return e.model.getRawData().count()}function kA(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),kC}function kC(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function kT(e,t){Mb(M2(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(n){e.wrapMethod(n,ME(kE,t))})}function kE(e,t){var n=kI(e);return n&&n.setOutputEnd((t||this).count()),t}function kI(e){var t=(e.ecModel||{}).scheduler,n=t&&t.getPipeline(e.uid);if(n){var r=n.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(e.uid))}return r}}let kD=kS;var kP=function(){function e(){this.group=new ES,this.uid=Rw("viewComponent")}return e.prototype.init=function(e,t){},e.prototype.render=function(e,t,n,r){},e.prototype.dispose=function(e,t){},e.prototype.updateView=function(e,t,n,r){},e.prototype.updateLayout=function(e,t,n,r){},e.prototype.updateVisual=function(e,t,n,r){},e.prototype.toggleBlurSeries=function(e,t,n){},e.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},e}();Ix(kP),IA(kP);let kR=kP;function kL(){var e=Is();return function(t){var n=e(t),r=t.pipelineContext,i=!!n.large,a=!!n.progressiveRender,s=n.large=!!(r&&r.large),u=n.progressiveRender=!!(r&&r.progressiveRender);return!!(i!==s||a!==u)&&"reset"}}var kO=Dv.CMD,kk=[[],[],[]],kB=Math.sqrt,kN=Math.atan2;function kF(e,t){if(!!t){var n,r,i,a,s,u,c=e.data,h=e.len(),p=kO.M,f=kO.C,v=kO.L,y=kO.R,_=kO.A,x=kO.Q;for(i=0,a=0;i<h;){switch(n=c[i++],a=i,r=0,n){case p:case v:r=1;break;case f:r=3;break;case x:r=2;break;case _:var b=t[4],S=t[5],w=kB(t[0]*t[0]+t[1]*t[1]),M=kB(t[2]*t[2]+t[3]*t[3]),A=kN(-t[1]/M,t[0]/w);c[i]*=w,c[i++]+=b,c[i]*=M,c[i++]+=S,c[i++]*=w,c[i++]*=M,c[i++]+=A,c[i++]+=A,i+=2,a=i;break;case y:u[0]=c[i++],u[1]=c[i++],Ax(u,u,t),c[a++]=u[0],c[a++]=u[1],u[0]+=c[i++],u[1]+=c[i++],Ax(u,u,t),c[a++]=u[0],c[a++]=u[1]}for(s=0;s<r;s++){var C=kk[s];C[0]=c[i++],C[1]=c[i++],Ax(C,C,t),c[a++]=C[0],c[a++]=C[1]}}e.increaseVersion()}}var kz=Math.sqrt,kU=Math.sin,kH=Math.cos,kG=Math.PI;function kV(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function kW(e,t){return(e[0]*t[0]+e[1]*t[1])/(kV(e)*kV(t))}function kj(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(kW(e,t))}function kX(e,t,n,r,i,a,s,u,c,h,p){var f=kG/180*c,v=kH(f)*(e-n)/2+kU(f)*(t-r)/2,y=-1*kU(f)*(e-n)/2+kH(f)*(t-r)/2,_=v*v/(s*s)+y*y/(u*u);_>1&&(s*=kz(_),u*=kz(_));var x=(i===a?-1:1)*kz((s*s*(u*u)-s*s*(y*y)-u*u*(v*v))/(s*s*(y*y)+u*u*(v*v)))||0,b=x*s*y/u,S=-(x*u)*v/s,w=(e+n)/2+kH(f)*b-kU(f)*S,M=(t+r)/2+kU(f)*b+kH(f)*S,A=kj([1,0],[(v-b)/s,(y-S)/u]),C=[(v-b)/s,(y-S)/u],T=[(-1*v-b)/s,(-1*y-S)/u],I=kj(C,T);if(-1>=kW(C,T)&&(I=kG),kW(C,T)>=1&&(I=0),I<0){var D=Math.round(I/kG*1e6)/1e6;I=2*kG+D%2*kG}p.addData(h,w,M,s,u,A,I,f,a)}var kY=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,kJ=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g,kZ=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.prototype.applyTransform=function(e){},t}(DR);function kq(e){return null!=e.setData}function kK(e,t){var n=function(e){var t,n=new Dv;if(!e)return n;var r=0,i=0,a=0,s=0,u=Dv.CMD,c=e.match(kY);if(!c)return n;for(var h=0;h<c.length;h++){for(var p=c[h],f=p.charAt(0),v=void 0,y=p.match(kJ)||[],_=y.length,x=0;x<_;x++)y[x]=parseFloat(y[x]);for(var b=0;b<_;){var S=void 0,w=void 0,M=void 0,A=void 0,C=void 0,T=void 0,I=void 0,D=r,P=i,R=void 0,L=void 0;switch(f){case"l":r+=y[b++],i+=y[b++],v=u.L,n.addData(v,r,i);break;case"L":r=y[b++],i=y[b++],v=u.L,n.addData(v,r,i);break;case"m":r+=y[b++],i+=y[b++],v=u.M,n.addData(v,r,i),a=r,s=i,f="l";break;case"M":r=y[b++],i=y[b++],v=u.M,n.addData(v,r,i),a=r,s=i,f="L";break;case"h":r+=y[b++],v=u.L,n.addData(v,r,i);break;case"H":r=y[b++],v=u.L,n.addData(v,r,i);break;case"v":i+=y[b++],v=u.L,n.addData(v,r,i);break;case"V":i=y[b++],v=u.L,n.addData(v,r,i);break;case"C":v=u.C,n.addData(v,y[b++],y[b++],y[b++],y[b++],y[b++],y[b++]),r=y[b-2],i=y[b-1];break;case"c":v=u.C,n.addData(v,y[b++]+r,y[b++]+i,y[b++]+r,y[b++]+i,y[b++]+r,y[b++]+i),r+=y[b-2],i+=y[b-1];break;case"S":S=r,w=i,R=n.len(),L=n.data,t===u.C&&(S+=r-L[R-4],w+=i-L[R-3]),v=u.C,D=y[b++],P=y[b++],r=y[b++],i=y[b++],n.addData(v,S,w,D,P,r,i);break;case"s":S=r,w=i,R=n.len(),L=n.data,t===u.C&&(S+=r-L[R-4],w+=i-L[R-3]),v=u.C,D=r+y[b++],P=i+y[b++],r+=y[b++],i+=y[b++],n.addData(v,S,w,D,P,r,i);break;case"Q":D=y[b++],P=y[b++],r=y[b++],i=y[b++],v=u.Q,n.addData(v,D,P,r,i);break;case"q":D=y[b++]+r,P=y[b++]+i,r+=y[b++],i+=y[b++],v=u.Q,n.addData(v,D,P,r,i);break;case"T":S=r,w=i,R=n.len(),L=n.data,t===u.Q&&(S+=r-L[R-4],w+=i-L[R-3]),r=y[b++],i=y[b++],v=u.Q,n.addData(v,S,w,r,i);break;case"t":S=r,w=i,R=n.len(),L=n.data,t===u.Q&&(S+=r-L[R-4],w+=i-L[R-3]),r+=y[b++],i+=y[b++],v=u.Q,n.addData(v,S,w,r,i);break;case"A":M=y[b++],A=y[b++],C=y[b++],T=y[b++],I=y[b++],D=r,P=i,r=y[b++],i=y[b++],kX(D,P,r,i,T,I,M,A,C,v=u.A,n);break;case"a":M=y[b++],A=y[b++],C=y[b++],T=y[b++],I=y[b++],D=r,P=i,r+=y[b++],i+=y[b++],kX(D,P,r,i,T,I,M,A,C,v=u.A,n)}}("z"===f||"Z"===f)&&(v=u.Z,n.addData(v),r=a,i=s),t=v}return n.toStatic(),n}(e),r=Mf({},t);return r.buildPath=function(e){if(kq(e)){e.setData(n.data);var t=e.getContext();t&&e.rebuildPath(t,1)}else{var t=e;n.rebuildPath(t,1)}},r.applyTransform=function(e){kF(n,e),this.dirtyShape()},r}function kQ(e,t){return new kZ(kK(e,t))}function k$(e,t){t=t||{};var n=new DR;return e.shape&&n.setShape(e.shape),n.setStyle(e.style),t.bakeTransform?kF(n.path,e.getComputedTransform()):t.toLocal?n.setLocalTransform(e.getComputedTransform()):n.copyTransform(e),n.buildPath=e.buildPath,n.applyTransform=n.applyTransform,n.z=e.z,n.z2=e.z2,n.zlevel=e.zlevel,n}var k0=function(){this.cx=0,this.cy=0,this.r=0},k1=function(e){function t(t){return e.call(this,t)||this}return wJ(t,e),t.prototype.getDefaultShape=function(){return new k0},t.prototype.buildPath=function(e,t){e.moveTo(t.cx+t.r,t.cy),e.arc(t.cx,t.cy,t.r,0,2*Math.PI)},t}(DR);k1.prototype.type="circle";let k2=k1;var k3=function(){this.cx=0,this.cy=0,this.rx=0,this.ry=0},k5=function(e){function t(t){return e.call(this,t)||this}return wJ(t,e),t.prototype.getDefaultShape=function(){return new k3},t.prototype.buildPath=function(e,t){var n=t.cx,r=t.cy,i=t.rx,a=t.ry,s=.5522848*i,u=.5522848*a;e.moveTo(n-i,r),e.bezierCurveTo(n-i,r-u,n-s,r-a,n,r-a),e.bezierCurveTo(n+s,r-a,n+i,r-u,n+i,r),e.bezierCurveTo(n+i,r+u,n+s,r+a,n,r+a),e.bezierCurveTo(n-s,r+a,n-i,r+u,n-i,r),e.closePath()},t}(DR);k5.prototype.type="ellipse";let k4=k5;var k6=Math.PI,k9=2*k6,k8=Math.sin,k7=Math.cos,Be=Math.acos,Bt=Math.atan2,Bn=Math.abs,Br=Math.sqrt,Bi=Math.max,Ba=Math.min;function Bo(e,t,n,r,i,a,s){var u=e-n,c=t-r,h=(s?a:-a)/Br(u*u+c*c),p=h*c,f=-h*u,v=e+p,y=t+f,_=n+p,x=r+f,b=(v+_)/2,S=(y+x)/2,w=_-v,M=x-y,A=w*w+M*M,C=i-a,T=v*x-_*y,I=(M<0?-1:1)*Br(Bi(0,C*C*A-T*T)),D=(T*M-w*I)/A,P=(-T*w-M*I)/A,R=(T*M+w*I)/A,L=(-T*w+M*I)/A,O=D-b,k=P-S,B=R-b,N=L-S;return O*O+k*k>B*B+N*N&&(D=R,P=L),{cx:D,cy:P,x0:-p,y0:-f,x1:D*(i/C-1),y1:P*(i/C-1)}}var Bs=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0},Bl=function(e){function t(t){return e.call(this,t)||this}return wJ(t,e),t.prototype.getDefaultShape=function(){return new Bs},t.prototype.buildPath=function(e,t){!function(e,t){var n,r=Bi(t.r,0),i=Bi(t.r0||0,0),a=r>0,s=i>0;if(!a&&!s)return;if(!a&&(r=i,i=0),i>r){var u=r;r=i,i=u}var c=t.startAngle,h=t.endAngle;if(!(isNaN(c)||isNaN(h))){var p=t.cx,f=t.cy,v=!!t.clockwise,y=Bn(h-c),_=y>k9&&y%k9;if(_>1e-4&&(y=_),r>1e-4){if(y>k9-1e-4)e.moveTo(p+r*k7(c),f+r*k8(c)),e.arc(p,f,r,c,h,!v),i>1e-4&&(e.moveTo(p+i*k7(h),f+i*k8(h)),e.arc(p,f,i,h,c,v));else{var x=void 0,b=void 0,S=void 0,w=void 0,M=void 0,A=void 0,C=void 0,T=void 0,I=void 0,D=void 0,P=void 0,R=void 0,L=void 0,O=void 0,k=void 0,B=void 0,N=r*k7(c),F=r*k8(c),z=i*k7(h),U=i*k8(h),H=y>1e-4;if(H){var G=t.cornerRadius;G&&(x=(n=function(e){var t;if(MI(e)){var n=e.length;if(!n)return e;t=1===n?[e[0],e[0],0,0]:2===n?[e[0],e[0],e[1],e[1]]:3===n?e.concat(e[2]):e}else t=[e,e,e,e];return t}(G))[0],b=n[1],S=n[2],w=n[3]);var V=Bn(r-i)/2;if(M=Ba(V,S),A=Ba(V,w),C=Ba(V,x),T=Ba(V,b),P=I=Bi(M,A),R=D=Bi(C,T),(I>1e-4||D>1e-4)&&(L=r*k7(h),O=r*k8(h),k=i*k7(c),B=i*k8(c),y<k6)){var W=function(e,t,n,r,i,a,s,u){var c=n-e,h=r-t,p=s-i,f=u-a,v=f*c-p*h;if(!(v*v<1e-4))return v=(p*(t-a)-f*(e-i))/v,[e+v*c,t+v*h]}(N,F,k,B,L,O,z,U);if(W){var j=N-W[0],X=F-W[1],Y=L-W[0],J=O-W[1],Z=1/k8(Be((j*Y+X*J)/(Br(j*j+X*X)*Br(Y*Y+J*J)))/2),q=Br(W[0]*W[0]+W[1]*W[1]);P=Ba(I,(r-q)/(Z+1)),R=Ba(D,(i-q)/(Z-1))}}}if(H){if(P>1e-4){var K=Ba(S,P),Q=Ba(w,P),$=Bo(k,B,N,F,r,K,v),ee=Bo(L,O,z,U,r,Q,v);e.moveTo(p+$.cx+$.x0,f+$.cy+$.y0),P<I&&K===Q?e.arc(p+$.cx,f+$.cy,P,Bt($.y0,$.x0),Bt(ee.y0,ee.x0),!v):(K>0&&e.arc(p+$.cx,f+$.cy,K,Bt($.y0,$.x0),Bt($.y1,$.x1),!v),e.arc(p,f,r,Bt($.cy+$.y1,$.cx+$.x1),Bt(ee.cy+ee.y1,ee.cx+ee.x1),!v),Q>0&&e.arc(p+ee.cx,f+ee.cy,Q,Bt(ee.y1,ee.x1),Bt(ee.y0,ee.x0),!v))}else e.moveTo(p+N,f+F),e.arc(p,f,r,c,h,!v)}else e.moveTo(p+N,f+F);if(i>1e-4&&H){if(R>1e-4){var K=Ba(x,R),Q=Ba(b,R),$=Bo(z,U,L,O,i,-Q,v),ee=Bo(N,F,k,B,i,-K,v);e.lineTo(p+$.cx+$.x0,f+$.cy+$.y0),R<D&&K===Q?e.arc(p+$.cx,f+$.cy,R,Bt($.y0,$.x0),Bt(ee.y0,ee.x0),!v):(Q>0&&e.arc(p+$.cx,f+$.cy,Q,Bt($.y0,$.x0),Bt($.y1,$.x1),!v),e.arc(p,f,i,Bt($.cy+$.y1,$.cx+$.x1),Bt(ee.cy+ee.y1,ee.cx+ee.x1),v),K>0&&e.arc(p+ee.cx,f+ee.cy,K,Bt(ee.y1,ee.x1),Bt(ee.y0,ee.x0),!v))}else e.lineTo(p+z,f+U),e.arc(p,f,i,h,c,v)}else e.lineTo(p+z,f+U)}}else e.moveTo(p,f);e.closePath()}}(e,t)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(DR);Bl.prototype.type="sector";let Bu=Bl;var Bc=function(){this.cx=0,this.cy=0,this.r=0,this.r0=0},Bh=function(e){function t(t){return e.call(this,t)||this}return wJ(t,e),t.prototype.getDefaultShape=function(){return new Bc},t.prototype.buildPath=function(e,t){var n=t.cx,r=t.cy,i=2*Math.PI;e.moveTo(n+t.r,r),e.arc(n,r,t.r,0,i,!1),e.moveTo(n+t.r0,r),e.arc(n,r,t.r0,0,i,!0)},t}(DR);Bh.prototype.type="ring";let Bd=Bh;function Bp(e,t,n){var r=t.smooth,i=t.points;if(i&&i.length>=2){if(r){var a=function(e,t,n,r){var i,a,s,u,c=[],h=[],p=[],f=[];if(r){s=[1/0,1/0],u=[-1/0,-1/0];for(var v=0,y=e.length;v<y;v++)Ab(s,s,e[v]),AS(u,u,e[v]);Ab(s,s,r[0]),AS(u,u,r[1])}for(var v=0,y=e.length;v<y;v++){var _=e[v];if(n)i=e[v?v-1:y-1],a=e[(v+1)%y];else{if(0===v||v===y-1){c.push(Ae(e[v]));continue}i=e[v-1],a=e[v+1]}Ai(h,a,i),Ad(h,h,t);var x=Af(_,i),b=Af(_,a),S=x+b;0!==S&&(x/=S,b/=S),Ad(p,h,-x),Ad(f,h,b);var w=An([],_,p),M=An([],_,f);r&&(AS(w,w,s),Ab(w,w,u),AS(M,M,s),Ab(M,M,u)),c.push(w),c.push(M)}return n&&c.push(c.shift()),c}(i,r,n,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var s=i.length,u=0;u<(n?s:s-1);u++){var c=a[2*u],h=a[2*u+1],p=i[(u+1)%s];e.bezierCurveTo(c[0],c[1],h[0],h[1],p[0],p[1])}}else{e.moveTo(i[0][0],i[0][1]);for(var u=1,f=i.length;u<f;u++)e.lineTo(i[u][0],i[u][1])}n&&e.closePath()}}var Bf=function(){this.points=null,this.smooth=0,this.smoothConstraint=null},Bg=function(e){function t(t){return e.call(this,t)||this}return wJ(t,e),t.prototype.getDefaultShape=function(){return new Bf},t.prototype.buildPath=function(e,t){Bp(e,t,!0)},t}(DR);Bg.prototype.type="polygon";let Bm=Bg;var Bv=function(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null},By=function(e){function t(t){return e.call(this,t)||this}return wJ(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Bv},t.prototype.buildPath=function(e,t){Bp(e,t,!1)},t}(DR);By.prototype.type="polyline";let B_=By;var Bx={},Bb=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1},BS=function(e){function t(t){return e.call(this,t)||this}return wJ(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Bb},t.prototype.buildPath=function(e,t){if(this.subPixelOptimize){var n,r,i,a,s=DU(Bx,t,this.style);n=s.x1,r=s.y1,i=s.x2,a=s.y2}else n=t.x1,r=t.y1,i=t.x2,a=t.y2;var u=t.percent;if(0!==u)e.moveTo(n,r),u<1&&(i=n*(1-u)+i*u,a=r*(1-u)+a*u),e.lineTo(i,a)},t.prototype.pointAt=function(e){var t=this.shape;return[t.x1*(1-e)+t.x2*e,t.y1*(1-e)+t.y2*e]},t}(DR);BS.prototype.type="line";let Bw=BS;var BM=[],BA=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1};function BC(e,t,n){var r=e.cpx2,i=e.cpy2;return null!=r||null!=i?[(n?CL:CR)(e.x1,e.cpx1,e.cpx2,e.x2,t),(n?CL:CR)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(n?Cz:CF)(e.x1,e.cpx1,e.x2,t),(n?Cz:CF)(e.y1,e.cpy1,e.y2,t)]}var BT=function(e){function t(t){return e.call(this,t)||this}return wJ(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new BA},t.prototype.buildPath=function(e,t){var n=t.x1,r=t.y1,i=t.x2,a=t.y2,s=t.cpx1,u=t.cpy1,c=t.cpx2,h=t.cpy2,p=t.percent;if(0!==p)e.moveTo(n,r),null==c||null==h?(p<1&&(CH(n,s,i,p,BM),s=BM[1],i=BM[2],CH(r,u,a,p,BM),u=BM[1],a=BM[2]),e.quadraticCurveTo(s,u,i,a)):(p<1&&(CB(n,s,c,i,p,BM),s=BM[1],c=BM[2],i=BM[3],CB(r,u,h,a,p,BM),u=BM[1],h=BM[2],a=BM[3]),e.bezierCurveTo(s,u,c,h,i,a))},t.prototype.pointAt=function(e){return BC(this.shape,e,!1)},t.prototype.tangentAt=function(e){var t=BC(this.shape,e,!0);return Ap(t,t)},t}(DR);BT.prototype.type="bezier-curve";let BE=BT;var BI=function(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},BD=function(e){function t(t){return e.call(this,t)||this}return wJ(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new BI},t.prototype.buildPath=function(e,t){var n=t.cx,r=t.cy,i=Math.max(t.r,0),a=t.startAngle,s=t.endAngle,u=t.clockwise,c=Math.cos(a),h=Math.sin(a);e.moveTo(c*i+n,h*i+r),e.arc(n,r,i,a,s,!u)},t}(DR);BD.prototype.type="arc";let BP=BD,BR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="compound",t}return wJ(t,e),t.prototype._updatePathDirty=function(){for(var e=this.shape.paths,t=this.shapeChanged(),n=0;n<e.length;n++)t=t||e[n].shapeChanged();t&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var e=this.shape.paths||[],t=this.getGlobalScale(),n=0;n<e.length;n++)!e[n].path&&e[n].createPathProxy(),e[n].path.setScale(t[0],t[1],e[n].segmentIgnoreThreshold)},t.prototype.buildPath=function(e,t){for(var n=t.paths||[],r=0;r<n.length;r++)n[r].buildPath(e,n[r].shape,!0)},t.prototype.afterBrush=function(){for(var e=this.shape.paths||[],t=0;t<e.length;t++)e[t].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),DR.prototype.getBoundingRect.call(this)},t}(DR);var BL=function(){function e(e){this.colorStops=e||[]}return e.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},e}();let BO=function(e){function t(t,n,r,i,a,s){var u=e.call(this,a)||this;return u.x=null==t?0:t,u.y=null==n?0:n,u.x2=null==r?1:r,u.y2=null==i?0:i,u.type="linear",u.global=s||!1,u}return wJ(t,e),t}(BL),Bk=function(e){function t(t,n,r,i,a){var s=e.call(this,i)||this;return s.x=null==t?.5:t,s.y=null==n?.5:n,s.r=null==r?.5:r,s.type="radial",s.global=a||!1,s}return wJ(t,e),t}(BL);var BB=[0,0],BN=[0,0],BF=new A5,Bz=new A5;let BU=function(){function e(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new A5;for(var n=0;n<2;n++)this._axes[n]=new A5;e&&this.fromBoundingRect(e,t)}return e.prototype.fromBoundingRect=function(e,t){var n=this._corners,r=this._axes,i=e.x,a=e.y,s=i+e.width,u=a+e.height;if(n[0].set(i,a),n[1].set(s,a),n[2].set(s,u),n[3].set(i,u),t)for(var c=0;c<4;c++)n[c].transform(t);A5.sub(r[0],n[1],n[0]),A5.sub(r[1],n[3],n[0]),r[0].normalize(),r[1].normalize();for(var c=0;c<2;c++)this._origin[c]=r[c].dot(n[0])},e.prototype.intersect=function(e,t){var n=!0,r=!t;return(BF.set(1/0,1/0),Bz.set(0,0),!this._intersectCheckOneSide(this,e,BF,Bz,r,1)&&(n=!1,r)||!this._intersectCheckOneSide(e,this,BF,Bz,r,-1)&&(n=!1,r))?n:(!r&&A5.copy(t,n?BF:Bz),n)},e.prototype._intersectCheckOneSide=function(e,t,n,r,i,a){for(var s=!0,u=0;u<2;u++){var c=this._axes[u];if(this._getProjMinMaxOnAxis(u,e._corners,BB),this._getProjMinMaxOnAxis(u,t._corners,BN),BB[1]<BN[0]||BB[0]>BN[1]){if(s=!1,i)return s;var h=Math.abs(BN[0]-BB[1]),p=Math.abs(BB[0]-BN[1]);Math.min(h,p)>r.len()&&(h<p?A5.scale(r,c,-h*a):A5.scale(r,c,p*a))}else if(n){var h=Math.abs(BN[0]-BB[1]),p=Math.abs(BB[0]-BN[1]);Math.min(h,p)<n.len()&&(h<p?A5.scale(n,c,h*a):A5.scale(n,c,-p*a))}}return s},e.prototype._getProjMinMaxOnAxis=function(e,t,n){for(var r=this._axes[e],i=this._origin,a=t[0].dot(r)+i[e],s=a,u=a,c=1;c<t.length;c++){var h=t[c].dot(r)+i[e];s=Math.min(h,s),u=Math.max(h,u)}n[0]=s,n[1]=u},e}();var BH=[];let BG=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return wJ(t,e),t.prototype.traverse=function(e,t){e.call(t,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(e,t){t?this._temporaryDisplayables.push(e):this._displayables.push(e),this.markRedraw()},t.prototype.addDisplayables=function(e,t){t=t||!1;for(var n=0;n<e.length;n++)this.addDisplayable(e[n],t)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(e){for(var t=this._cursor;t<this._displayables.length;t++)e&&e(this._displayables[t]);for(var t=0;t<this._temporaryDisplayables.length;t++)e&&e(this._temporaryDisplayables[t])},t.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++){var t=this._displayables[e];t.parent=this,t.update(),t.parent=null}for(var e=0;e<this._temporaryDisplayables.length;e++){var t=this._temporaryDisplayables[e];t.parent=this,t.update(),t.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new Cr(1/0,1/0,-1/0,-1/0),t=0;t<this._displayables.length;t++){var n=this._displayables[t],r=n.getBoundingRect().clone();n.needLocalTransform()&&r.applyTransform(n.getLocalTransform(BH)),e.union(r)}this._rect=e}return this._rect},t.prototype.contain=function(e,t){var n=this.transformCoordToLocal(e,t);if(this.getBoundingRect().contain(n[0],n[1])){for(var r=0;r<this._displayables.length;r++)if(this._displayables[r].contain(e,t))return!0}return!1},t}(IJ);var BV=Math.max,BW=Math.min,Bj={};function BX(e){return DR.extend(e)}var BY=function(e,t){var n=kK(e,t);return function(e){function t(t){var r=e.call(this,t)||this;return r.applyTransform=n.applyTransform,r.buildPath=n.buildPath,r}return wJ(t,e),t}(kZ)};function BJ(e,t){return BY(e,t)}function BZ(e,t){Bj[e]=t}function Bq(e){if(Bj.hasOwnProperty(e))return Bj[e]}function BK(e,t,n,r){var i=new kZ(kK(e,t));return n&&("center"===r&&(n=B$(n,i.getBoundingRect())),B1(i,n)),i}function BQ(e,t,n){var r=new DF({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(e){if("center"===n){var i={width:e.width,height:e.height};r.setStyle(B$(t,i))}}});return r}function B$(e,t){var n,r=t.width/t.height,i=e.height*r;return n=i<=e.width?e.height:(i=e.width)/r,{x:e.x+e.width/2-i/2,y:e.y+e.height/2-n/2,width:i,height:n}}var B0=function(e,t){for(var n=[],r=e.length,i=0;i<r;i++){var a=e[i];n.push(a.getUpdatedPathProxy(!0))}var s=new DR(t);return s.createPathProxy(),s.buildPath=function(e){if(kq(e)){e.appendPath(n);var t=e.getContext();t&&e.rebuildPath(t,1)}},s};function B1(e,t){if(!!e.applyTransform){var n=e.getBoundingRect().calculateTransform(t);e.applyTransform(n)}}function B2(e,t){return DU(e,e,{lineWidth:t}),e}function B3(e){return DH(e.shape,e.shape,e.style),e}var B5=DG;function B4(e,t){for(var n=Aq([]);e&&e!==t;)AQ(n,e.getLocalTransform(),n),e=e.parent;return n}function B6(e,t,n){return t&&!Mx(t)&&(t=Et.getLocalTransform(t)),n&&(t=A2([],t)),Ax([],e,t)}function B9(e,t,n){var r=0===t[4]||0===t[5]||0===t[0]?1:Math.abs(2*t[4]/t[0]),i=0===t[4]||0===t[5]||0===t[2]?1:Math.abs(2*t[4]/t[2]),a=["left"===e?-r:"right"===e?r:0,"top"===e?-i:"bottom"===e?i:0];return Math.abs((a=B6(a,t,n))[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function B8(e){return!e.isGroup}function B7(e,t,n){if(!!e&&!!t){var r,i=(r={},e.traverse(function(e){if(!e.isGroup&&e.anid)r[e.anid]=e}),r);t.traverse(function(e){if(!e.isGroup&&e.anid){var t=i[e.anid];if(t){var r=a(e);e.attr(a(t)),PQ(e,r,n,D7(e).dataIndex)}}})}function a(e){var t={x:e.x,y:e.y,rotation:e.rotation};if(null!=e.shape)t.shape=Mf({},e.shape);return t}}function Ne(e,t){return MS(e,function(e){var n=e[0];n=BW(n=BV(n,t.x),t.x+t.width);var r=e[1];return[n,r=BW(r=BV(r,t.y),t.y+t.height)]})}function Nt(e,t){var n=BV(e.x,t.x),r=BW(e.x+e.width,t.x+t.width),i=BV(e.y,t.y),a=BW(e.y+e.height,t.y+t.height);if(r>=n&&a>=i)return{x:n,y:i,width:r-n,height:a-i}}function Nn(e,t,n){var r=Mf({rectHover:!0},t),i=r.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},e)return 0===e.indexOf("image://")?(i.image=e.slice(8),Mg(i,n),new DF(r)):BK(e.replace("path://",""),r,n,"center")}function Nr(e,t,n,r,i){for(var a=0,s=i[i.length-1];a<i.length;a++){var u=i[a];if(Ni(e,t,n,r,u[0],u[1],s[0],s[1]))return!0;s=u}}function Ni(e,t,n,r,i,a,s,u){var c=n-e,h=r-t,p=s-i,f=u-a,v=function(e,t,n,r){return e*r-n*t}(p,f,c,h);if(function(e){return e<=1e-6&&e>=-1e-6}(v))return!1;var y=e-i,_=t-a,x=function(e,t,n,r){return e*r-n*t}(y,_,c,h)/v;if(x<0||x>1)return!1;var b=function(e,t,n,r){return e*r-n*t}(y,_,p,f)/v;return!(b<0)&&!(b>1)&&!0}function Na(e,t,n,r){return e*r-n*t}function No(e){var t=e.itemTooltipOption,n=e.componentModel,r=e.itemName,i=MP(t)?{formatter:t}:t,a=n.mainType,s=n.componentIndex,u={componentType:a,name:r,$vars:["name"]};u[a+"Index"]=s;var c=e.formatterParamsExtra;c&&Mb(MC(c),function(e){!M4(u,e)&&(u[e]=c[e],u.$vars.push(e))});var h=D7(e.el);h.componentMainType=a,h.componentIndex=s,h.tooltipConfig={name:r,option:Mg({content:r,encodeHTMLContent:!0,formatterParams:u},i)}}function Ns(e,t){var n;e.isGroup&&(n=t(e)),!n&&e.traverse(t)}function Nl(e,t){if(e){if(MI(e))for(var n=0;n<e.length;n++)Ns(e[n],t);else Ns(e,t)}}V=k2,Bj.circle=V,W=k4,Bj.ellipse=W,j=Bu,Bj.sector=j,X=Bd,Bj.ring=X,Y=Bm,Bj.polygon=Y,J=B_,Bj.polyline=J,Z=DX,Bj.rect=Z,q=Bw,Bj.line=q,K=BE,Bj.bezierCurve=K,Q=BP,Bj.arc=Q;var Nu=Is(),Nc=kL(),Nh=function(){function e(){this.group=new ES,this.uid=Rw("viewChart"),this.renderTask=OP({plan:Nf,reset:Ng}),this.renderTask.context={view:this}}return e.prototype.init=function(e,t){},e.prototype.render=function(e,t,n,r){},e.prototype.highlight=function(e,t,n,r){var i=e.getData(r&&r.dataType);if(!!i)Np(i,r,"emphasis")},e.prototype.downplay=function(e,t,n,r){var i=e.getData(r&&r.dataType);if(!!i)Np(i,r,"normal")},e.prototype.remove=function(e,t){this.group.removeAll()},e.prototype.dispose=function(e,t){},e.prototype.updateView=function(e,t,n,r){this.render(e,t,n,r)},e.prototype.updateLayout=function(e,t,n,r){this.render(e,t,n,r)},e.prototype.updateVisual=function(e,t,n,r){this.render(e,t,n,r)},e.prototype.eachRendered=function(e){Nl(this.group,e)},e.markUpdateMethod=function(e,t){Nu(e).updateMethod=t},e.protoInitialize=void(e.prototype.type="chart"),e}();function Nd(e,t,n){e&&PX(e)&&("emphasis"===t?PT:PE)(e,n)}function Np(e,t,n){var r,i,a=Io(e,t);var s=t&&null!=t.highlightKey?(null==(i=Pn[r=t.highlightKey])&&Pt<=32&&(i=Pn[r]=Pt++),i):null;null!=a?Mb(E6(a),function(t){Nd(e.getItemGraphicEl(t),n,s)}):e.eachItemGraphicEl(function(e){Nd(e,n,s)})}function Nf(e){return Nc(e.model)}function Ng(e){var t=e.model,n=e.ecModel,r=e.api,i=e.payload,a=t.pipelineContext.progressiveRender,s=e.view,u=i&&Nu(i).updateMethod,c=a?"incrementalPrepareRender":u&&s[u]?u:"render";return"render"!==c&&s[c](t,n,r,i),Nm[c]}Ix(Nh,["dispose"]),IA(Nh);var Nm={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};let Nv=Nh;var Ny="\0__throttleOriginMethod",N_="\0__throttleRate",Nx="\0__throttleType";function Nb(e,t,n){var r,i,a,s,u,c=0,h=0,p=null;function f(){h=new Date().getTime(),p=null,e.apply(a,s||[])}t=t||0;var v=function(){for(var e=[],v=0;v<arguments.length;v++)e[v]=arguments[v];r=new Date().getTime(),a=this,s=e;var y=u||t,_=u||n;u=null,i=r-(_?c:h)-y,clearTimeout(p),_?p=setTimeout(f,y):i>=0?f():p=setTimeout(f,-i),c=r};return v.clear=function(){p&&(clearTimeout(p),p=null)},v.debounceNextCall=function(e){u=e},v}function NS(e,t,n,r){var i=e[t];if(!!i){var a=i[Ny]||i,s=i[Nx];if(i[N_]!==n||s!==r){if(null==n||!r)return e[t]=a;(i=e[t]=Nb(a,n,"debounce"===r))[Ny]=a,i[Nx]=r,i[N_]=n}return i}}function Nw(e,t){var n=e[t];n&&n[Ny]&&(n.clear&&n.clear(),e[t]=n[Ny])}var NM=Is(),NA={itemStyle:IC(Rv,!0),lineStyle:IC(Rf,!0)},NC={lineStyle:"stroke",itemStyle:"fill"};function NT(e,t){var n=e.visualStyleMapper||NA[t];return n?n:NA.itemStyle}function NE(e,t){var n=e.visualDrawType||NC[t];return n?n:"fill"}var NI=new Rb,ND=Math.PI,NP=function(){function e(e,t,n,r){this._stageTaskMap=M1(),this.ecInstance=e,this.api=t,n=this._dataProcessorHandlers=n.slice(),r=this._visualHandlers=r.slice(),this._allHandlers=n.concat(r)}return e.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(e){var t=e.overallTask;t&&t.dirty()})},e.prototype.getPerformArgs=function(e,t){if(!!e.__pipeline){var n=this._pipelineMap.get(e.__pipeline.id),r=n.context,i=!t&&n.progressiveEnabled&&(!r||r.progressiveRender)&&e.__idxInPipeline>n.blockIndex?n.step:null,a=r&&r.modDataCount,s=null!=a?Math.ceil(a/i):null;return{step:i,modBy:s,modDataCount:a}}},e.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},e.prototype.updateStreamModes=function(e,t){var n=this._pipelineMap.get(e.uid),r=e.getData().count(),i=n.progressiveEnabled&&t.incrementalPrepareRender&&r>=n.threshold,a=e.get("large")&&r>=e.get("largeThreshold"),s="mod"===e.get("progressiveChunkMode")?r:null;e.pipelineContext=n.context={progressiveRender:i,modDataCount:s,large:a}},e.prototype.restorePipelines=function(e){var t=this,n=t._pipelineMap=M1();e.eachSeries(function(e){var r=e.getProgressive(),i=e.uid;n.set(i,{id:i,head:null,tail:null,threshold:e.getProgressiveThreshold(),progressiveEnabled:r&&!(e.preventIncremental&&e.preventIncremental()),blockIndex:-1,step:Math.round(r||700),count:0}),t._pipe(e,e.dataTask)})},e.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),n=this.api;Mb(this._allHandlers,function(r){var i=e.get(r.uid)||e.set(r.uid,{});MY(!(r.reset&&r.overallReset),""),r.reset&&this._createSeriesStageTask(r,i,t,n),r.overallReset&&this._createOverallStageTask(r,i,t,n)},this)},e.prototype.prepareView=function(e,t,n,r){var i=e.renderTask,a=i.context;a.model=t,a.ecModel=n,a.api=r,i.__block=!e.incrementalPrepareRender,this._pipe(t,i)},e.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},e.prototype.performVisualTasks=function(e,t,n){this._performStageTasks(this._visualHandlers,e,t,n)},e.prototype._performStageTasks=function(e,t,n,r){r=r||{};var i=!1,a=this;function s(e,t){return e.setDirty&&(!e.dirtyMap||e.dirtyMap.get(t.__pipeline.id))}Mb(e,function(e,u){if(!r.visualType||r.visualType===e.visualType){var c=a._stageTaskMap.get(e.uid),h=c.seriesTaskMap,p=c.overallTask;if(p){var f,v=p.agentStubMap;v.each(function(e){s(r,e)&&(e.dirty(),f=!0)}),f&&p.dirty(),a.updatePayload(p,n);var y=a.getPerformArgs(p,r.block);v.each(function(e){e.perform(y)}),p.perform(y)&&(i=!0)}else h&&h.each(function(u,c){s(r,u)&&u.dirty();var h=a.getPerformArgs(u,r.block);h.skip=!e.performRawSeries&&t.isSeriesFiltered(u.context.model),a.updatePayload(u,n),u.perform(h)&&(i=!0)})}}),this.unfinished=i||this.unfinished},e.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(e){t=e.dataTask.perform()||t}),this.unfinished=t||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},e.prototype.updatePayload=function(e,t){"remain"!==t&&(e.context.payload=t)},e.prototype._createSeriesStageTask=function(e,t,n,r){var i=this,a=t.seriesTaskMap,s=t.seriesTaskMap=M1(),u=e.seriesType,c=e.getTargetSeries;function h(t){var u=t.uid,c=s.set(u,a&&a.get(u)||OP({plan:NB,reset:NN,count:NU}));c.context={model:t,ecModel:n,api:r,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:i},i._pipe(t,c)}e.createOnAllSeries?n.eachRawSeries(h):u?n.eachRawSeriesByType(u,h):c&&c(n,r).each(h)},e.prototype._createOverallStageTask=function(e,t,n,r){var i=this,a=t.overallTask=t.overallTask||OP({reset:NR});a.context={ecModel:n,api:r,overallReset:e.overallReset,scheduler:i};var s=a.agentStubMap,u=a.agentStubMap=M1(),c=e.seriesType,h=e.getTargetSeries,p=!0,f=!1;function v(e){var t=e.uid,n=u.set(t,s&&s.get(t)||(f=!0,OP({reset:NL,onDirty:Nk})));n.context={model:e,overallProgress:p},n.agent=a,n.__block=p,i._pipe(e,n)}MY(!e.createOnAllSeries,""),c?n.eachRawSeriesByType(c,v):h?h(n,r).each(v):(p=!1,Mb(n.getSeries(),v)),f&&a.dirty()},e.prototype._pipe=function(e,t){var n=e.uid,r=this._pipelineMap.get(n);r.head||(r.head=t),r.tail&&r.tail.pipe(t),r.tail=t,t.__idxInPipeline=r.count++,t.__pipeline=r},e.wrapStageHandler=function(e,t){return MD(e)&&(e={overallReset:e,seriesType:function(e){eV=null;try{e(NH,NG)}catch(e){}return eV}(e)}),e.uid=Rw("stageHandler"),t&&(e.visualType=t),e},e}();function NR(e){e.overallReset(e.ecModel,e.api,e.payload)}function NL(e){return e.overallProgress&&NO}function NO(){this.agent.dirty(),this.getDownstream().dirty()}function Nk(){this.agent&&this.agent.dirty()}function NB(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function NN(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=E6(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?MS(t,function(e,t){return Nz(t)}):NF}var NF=Nz(0);function Nz(e){return function(t,n){var r=n.data,i=n.resetDefines[e];if(i&&i.dataEach)for(var a=t.start;a<t.end;a++)i.dataEach(r,a);else i&&i.progress&&i.progress(t,r)}}function NU(e){return e.data.count()}var NH={},NG={};function NV(e,t){for(var n in t.prototype)e[n]=M6}NV(NH,LV),NV(NG,LJ),NH.eachSeriesByType=NH.eachRawSeriesByType=function(e){eV=e},NH.eachComponent=function(e){"series"===e.mainType&&e.subType&&(eV=e.subType)};var NW=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],Nj="#B9B8CE",NX="#100C2A",NY=function(){return{axisLine:{lineStyle:{color:Nj}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},NJ=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],NZ={darkMode:!0,color:NJ,backgroundColor:NX,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Nj}},textStyle:{color:Nj},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Nj}},dataZoom:{borderColor:"#71708A",textStyle:{color:Nj},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Nj}},timeline:{lineStyle:{color:Nj},label:{color:Nj},controlStyle:{color:Nj,borderColor:Nj}},calendar:{itemStyle:{color:NX},dayLabel:{color:Nj},monthLabel:{color:Nj},yearLabel:{color:Nj}},timeAxis:NY(),logAxis:NY(),valueAxis:NY(),categoryAxis:NY(),line:{symbol:"circle"},graph:{color:NJ},gauge:{title:{color:Nj},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Nj},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};NZ.categoryAxis.splitLine.show=!1;var Nq=function(){function e(){}return e.prototype.normalizeQuery=function(e){var t={},n={},r={};if(MP(e)){var i=I_(e);t.mainType=i.main||null,t.subType=i.sub||null}else{var a=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};Mb(e,function(e,i){for(var u=!1,c=0;c<a.length;c++){var h=a[c],p=i.lastIndexOf(h);if(p>0&&p===i.length-h.length){var f=i.slice(0,p);"data"!==f&&(t.mainType=f,t[h.toLowerCase()]=e,u=!0)}}s.hasOwnProperty(i)&&(n[i]=e,u=!0),!u&&(r[i]=e)})}return{cptQuery:t,dataQuery:n,otherQuery:r}},e.prototype.filter=function(e,t){var n=this.eventInfo;if(!n)return!0;var r=n.targetEl,i=n.packedEvent,a=n.model,s=n.view;if(!a||!s)return!0;var u=t.cptQuery,c=t.dataQuery;return h(u,a,"mainType")&&h(u,a,"subType")&&h(u,a,"index","componentIndex")&&h(u,a,"name")&&h(u,a,"id")&&h(c,i,"name")&&h(c,i,"dataIndex")&&h(c,i,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,t.otherQuery,r,i));function h(e,t,n,r){return null==e[n]||t[r||n]===e[n]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),NK=["symbol","symbolSize","symbolRotate","symbolOffset"],NQ=NK.concat(["symbolKeepAspect"]);function N$(e,t,n){switch(n){case"color":return e.getItemVisual(t,"style")[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,n)}}function N0(e,t){switch(t){case"color":return e.getVisual("style")[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function N1(e,t,n,r){switch(n){case"color":e.ensureUniqueItemVisual(t,"style")[e.getVisual("drawType")]=r,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,n,r)}}function N2(e,t){Mb([[e+"ToggleSelect","toggleSelect"],[e+"Select","select"],[e+"UnSelect","unselect"]],function(n){t(n[0],function(t,r,i){var a,s,u;t=Mf({},t);i.dispatchAction(Mf(t,{type:n[1],seriesIndex:(a=r,s=t,u=[],a.eachComponent({mainType:"series",subType:e,query:s},function(e){u.push(e.seriesIndex)}),u)}))})})}function N3(e,t,n,r,i){var a=e+t;!n.isSilent(a)&&r.eachComponent({mainType:"series",subType:"pie"},function(e){for(var t=e.seriesIndex,r=e.option.selectedMap,s=i.selected,u=0;u<s.length;u++)if(s[u].seriesIndex===t){var c=e.getData(),h=Io(c,i.fromActionPayload);n.trigger(a,{type:a,seriesId:e.id,name:MI(h)?c.getName(h[0]):c.getName(h),selected:MP(r)?r:Mf({},r)})}})}function N5(e,t,n){for(var r;e&&(!t(e)||(r=e,!n));){;e=e.__hostTarget||e.parent}return r}var N4=Math.round(9*Math.random()),N6="function"==typeof Object.defineProperty,N9=function(){function e(){this._id="__ec_inner_"+N4++}return e.prototype.get=function(e){return this._guard(e)[this._id]},e.prototype.set=function(e,t){var n=this._guard(e);return N6?Object.defineProperty(n,this._id,{value:t,enumerable:!1,configurable:!0}):n[this._id]=t,this},e.prototype.delete=function(e){return!!this.has(e)&&(delete this._guard(e)[this._id],!0)},e.prototype.has=function(e){return!!this._guard(e)[this._id]},e.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},e}(),N8=DR.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,r=t.cy,i=t.width/2,a=t.height/2;e.moveTo(n,r-a),e.lineTo(n+i,r+a),e.lineTo(n-i,r+a),e.closePath()}}),N7=DR.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,r=t.cy,i=t.width/2,a=t.height/2;e.moveTo(n,r-a),e.lineTo(n+i,r),e.lineTo(n,r+a),e.lineTo(n-i,r),e.closePath()}}),Fe=DR.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.x,r=t.y,i=t.width/5*3,a=Math.max(i,t.height),s=i/2,u=s*s/(a-s),c=r-a+s+u,h=Math.asin(u/s),p=Math.cos(h)*s,f=Math.sin(h),v=Math.cos(h),y=.6*s,_=.7*s;e.moveTo(n-p,c+u),e.arc(n,c,s,Math.PI-h,2*Math.PI+h),e.bezierCurveTo(n+p-f*y,c+u+v*y,n,r-_,n,r),e.bezierCurveTo(n,r-_,n-p+f*y,c+u+v*y,n-p,c+u),e.closePath()}}),Ft=DR.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.height,r=t.width,i=t.x,a=t.y,s=r/3*2;e.moveTo(i,a),e.lineTo(i+s,a+n),e.lineTo(i,a+n/4*3),e.lineTo(i-s,a+n),e.lineTo(i,a),e.closePath()}}),Fn={line:function(e,t,n,r,i){i.x1=e,i.y1=t+r/2,i.x2=e+n,i.y2=t+r/2},rect:function(e,t,n,r,i){i.x=e,i.y=t,i.width=n,i.height=r},roundRect:function(e,t,n,r,i){i.x=e,i.y=t,i.width=n,i.height=r,i.r=Math.min(n,r)/4},square:function(e,t,n,r,i){var a=Math.min(n,r);i.x=e,i.y=t,i.width=a,i.height=a},circle:function(e,t,n,r,i){i.cx=e+n/2,i.cy=t+r/2,i.r=Math.min(n,r)/2},diamond:function(e,t,n,r,i){i.cx=e+n/2,i.cy=t+r/2,i.width=n,i.height=r},pin:function(e,t,n,r,i){i.x=e+n/2,i.y=t+r/2,i.width=n,i.height=r},arrow:function(e,t,n,r,i){i.x=e+n/2,i.y=t+r/2,i.width=n,i.height=r},triangle:function(e,t,n,r,i){i.cx=e+n/2,i.cy=t+r/2,i.width=n,i.height=r}},Fr={};Mb({line:Bw,rect:DX,roundRect:DX,square:DX,circle:k2,diamond:N7,pin:Fe,arrow:Ft,triangle:N8},function(e,t){Fr[t]=new e});var Fi=DR.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,n){var r=Ed(e,t,n),i=this.shape;return i&&"pin"===i.symbolType&&"inside"===t.position&&(r.y=n.y+.4*n.height),r},buildPath:function(e,t,n){var r=t.symbolType;if("none"!==r){var i=Fr[r];!i&&(i=Fr[r="rect"]),Fn[r](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,n)}}});function Fa(e,t){if("image"!==this.type){var n=this.style;this.__isEmptyBrush?(n.stroke=e,n.fill=t||"#fff",n.lineWidth=2):"line"===this.shape.symbolType?n.stroke=e:n.fill=e,this.markRedraw()}}function Fo(e,t,n,r,i,a,s){var u,c=0===e.indexOf("empty");return c&&(e=e.substr(5,1).toLowerCase()+e.substr(6)),(u=0===e.indexOf("image://")?BQ(e.slice(8),new Cr(t,n,r,i),s?"center":"cover"):0===e.indexOf("path://")?BK(e.slice(7),{},new Cr(t,n,r,i),s?"center":"cover"):new Fi({shape:{symbolType:e,x:t,y:n,width:r,height:i}})).__isEmptyBrush=c,u.setColor=Fa,a&&u.setColor(a),u}function Fs(e){return!MI(e)&&(e=[+e,+e]),[e[0]||0,e[1]||0]}function Fl(e,t){if(null!=e)return!MI(e)&&(e=[e,e]),[Ek(e[0],t[0])||0,Ek(MV(e[1],e[0]),t[1])||0]}function Fu(e){return isFinite(e)}function Fc(e,t,n){for(var r,i,a,s,u,c,h,p,f,v,y,_,x,b,S,w,M="radial"===t.type?(r=e,i=t,s=(a=n).width,c=Math.min(s,u=a.height),h=null==i.x?.5:i.x,p=null==i.y?.5:i.y,f=null==i.r?.5:i.r,!i.global&&(h=h*s+a.x,p=p*u+a.y,f*=c),h=Fu(h)?h:.5,p=Fu(p)?p:.5,f=f>=0&&Fu(f)?f:.5,r.createRadialGradient(h,p,0,h,p,f)):(v=e,y=t,_=n,x=null==y.x?0:y.x,b=null==y.x2?1:y.x2,S=null==y.y?0:y.y,w=null==y.y2?0:y.y2,!y.global&&(x=x*_.width+_.x,b=b*_.width+_.x,S=S*_.height+_.y,w=w*_.height+_.y),x=Fu(x)?x:0,b=Fu(b)?b:1,S=Fu(S)?S:0,w=Fu(w)?w:0,v.createLinearGradient(x,S,b,w)),A=t.colorStops,C=0;C<A.length;C++)M.addColorStop(A[C].offset,A[C].color);return M}function Fh(e){return parseInt(e,10)}function Fd(e,t,n){var r=["width","height"][t],i=["clientWidth","clientHeight"][t],a=["paddingLeft","paddingTop"][t],s=["paddingRight","paddingBottom"][t];if(null!=n[r]&&"auto"!==n[r])return parseFloat(n[r]);var u=document.defaultView.getComputedStyle(e);return(e[i]||Fh(u[r])||Fh(e.style[r]))-(Fh(u[a])||0)-(Fh(u[s])||0)|0}function Fp(e){var t,n,r=e.style;var i=r.lineDash&&r.lineWidth>0&&(t=r.lineDash,n=r.lineWidth,t&&"solid"!==t&&n>0?"dashed"===t?[4*n,2*n]:"dotted"===t?[n]:ML(t)?[t]:MI(t)?t:null:null),a=r.lineDashOffset;if(i){var s=r.strokeNoScale&&e.getLineScale?e.getLineScale():1;s&&1!==s&&(i=MS(i,function(e){return e/s}),a/=s)}return[i,a]}var Ff=new Dv(!0);function Fg(e){var t=e.stroke;return!(null==t||"none"===t||!(e.lineWidth>0))}function Fm(e){return"string"==typeof e&&"none"!==e}function Fv(e){var t=e.fill;return null!=t&&"none"!==t}function Fy(e,t){if(null!=t.fillOpacity&&1!==t.fillOpacity){var n=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=n}else e.fill()}function F_(e,t){if(null!=t.strokeOpacity&&1!==t.strokeOpacity){var n=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=n}else e.stroke()}function Fx(e,t,n){var r=ID(t.image,t.__image,n);if(IR(r)){var i=e.createPattern(r,t.repeat||"repeat");if("function"==typeof DOMMatrix&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(t.x||0,t.y||0),a.rotateSelf(0,0,(t.rotation||0)*M9),a.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(a)}return i}}var Fb=["shadowBlur","shadowOffsetX","shadowOffsetY"],FS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function Fw(e,t,n,r,i){var a=!1;if(!r&&t===(n=n||{}))return!1;if(r||t.opacity!==n.opacity){FC(e,i),a=!0;var s=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(s)?IW.opacity:s}(r||t.blend!==n.blend)&&(!a&&(FC(e,i),a=!0),e.globalCompositeOperation=t.blend||IW.blend);for(var u=0;u<Fb.length;u++){var c=Fb[u];(r||t[c]!==n[c])&&(!a&&(FC(e,i),a=!0),e[c]=e.dpr*(t[c]||0))}return(r||t.shadowColor!==n.shadowColor)&&(!a&&(FC(e,i),a=!0),e.shadowColor=t.shadowColor||IW.shadowColor),a}function FM(e,t,n,r,i){var a=FT(t,i.inHover),s=r?null:n&&FT(n,i.inHover)||{};if(a===s)return!1;var u=Fw(e,a,s,r,i);if((r||a.fill!==s.fill)&&(!u&&(FC(e,i),u=!0),Fm(a.fill)&&(e.fillStyle=a.fill)),(r||a.stroke!==s.stroke)&&(!u&&(FC(e,i),u=!0),Fm(a.stroke)&&(e.strokeStyle=a.stroke)),(r||a.opacity!==s.opacity)&&(!u&&(FC(e,i),u=!0),e.globalAlpha=null==a.opacity?1:a.opacity),t.hasStroke()){var c=a.lineWidth/(a.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==c&&(!u&&(FC(e,i),u=!0),e.lineWidth=c)}for(var h=0;h<FS.length;h++){var p=FS[h],f=p[0];(r||a[f]!==s[f])&&(!u&&(FC(e,i),u=!0),e[f]=a[f]||p[1])}return u}function FA(e,t){var n=t.transform,r=e.dpr||1;n?e.setTransform(r*n[0],r*n[1],r*n[2],r*n[3],r*n[4],r*n[5]):e.setTransform(r,0,0,r,0,0)}function FC(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function FT(e,t){return t&&e.__hoverStyle||e.style}function FE(e,t){FI(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function FI(e,t,n,r){var i,a,s,u,c,h,p,f,v,y,_=t.transform;if(!t.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1)){t.__dirty&=-2,t.__isRendered=!1;return}var x=t.__clipPaths,b=n.prevElClipPaths,S=!1,w=!1;if((!b||function(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!0;return!1}(x,b))&&(b&&b.length&&(FC(e,n),e.restore(),w=S=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),x&&x.length&&(FC(e,n),e.save(),!function(e,t,n){for(var r=!1,i=0;i<e.length;i++){var a=e[i];r=r||a.isZeroArea(),FA(t,a),t.beginPath(),a.buildPath(t,a.shape),t.clip()}n.allClipped=r}(x,e,n),S=!0),n.prevElClipPaths=x),n.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var M=n.prevEl;!M&&(w=S=!0);var A=t instanceof DR&&t.autoBatch&&(a=Fv(i=t.style),s=Fg(i),!(i.lineDash||!(+a^+s)||a&&"string"!=typeof i.fill||s&&"string"!=typeof i.stroke||i.strokePercent<1||i.strokeOpacity<1||i.fillOpacity<1));if(!S&&(u=_,c=M.transform,u&&c?u[0]===c[0]&&u[1]===c[1]&&u[2]===c[2]&&u[3]===c[3]&&u[4]===c[4]&&u[5]===c[5]:u||c?0:1))!A&&FC(e,n);else FC(e,n),FA(e,t);var C=FT(t,n.inHover);if(t instanceof DR)1!==n.lastDrawType&&(w=!0,n.lastDrawType=1),FM(e,t,M,w,n),(!A||!n.batchFill&&!n.batchStroke)&&e.beginPath(),!function(e,t,n,r){var i,a,s,u=Fg(n),c=Fv(n),h=n.strokePercent,p=h<1,f=!t.path;(!t.silent||p)&&f&&t.createPathProxy();var v=t.path||Ff,y=t.__dirty;if(!r){var _=n.fill,x=n.stroke,b=c&&!!_.colorStops,S=u&&!!x.colorStops,w=c&&!!_.image,M=u&&!!x.image,A=void 0,C=void 0,T=void 0,I=void 0,D=void 0;(b||S)&&(D=t.getBoundingRect()),b&&(A=y?Fc(e,_,D):t.__canvasFillGradient,t.__canvasFillGradient=A),S&&(C=y?Fc(e,x,D):t.__canvasStrokeGradient,t.__canvasStrokeGradient=C),w&&(T=y||!t.__canvasFillPattern?Fx(e,_,t):t.__canvasFillPattern,t.__canvasFillPattern=T),M&&(I=y||!t.__canvasStrokePattern?Fx(e,x,t):t.__canvasStrokePattern,t.__canvasStrokePattern=T),b?e.fillStyle=A:w&&(T?e.fillStyle=T:c=!1),S?e.strokeStyle=C:M&&(I?e.strokeStyle=I:u=!1)}var P=t.getGlobalScale();v.setScale(P[0],P[1],t.segmentIgnoreThreshold),e.setLineDash&&n.lineDash&&(a=(i=Fp(t))[0],s=i[1]);var R=!0;(f||4&y)&&(v.setDPR(e.dpr),p?v.setContext(null):(v.setContext(e),R=!1),v.reset(),t.buildPath(v,t.shape,r),v.toStatic(),t.pathUpdated()),R&&v.rebuildPath(e,p?h:1),a&&(e.setLineDash(a),e.lineDashOffset=s),!r&&(n.strokeFirst?(u&&F_(e,n),c&&Fy(e,n)):(c&&Fy(e,n),u&&F_(e,n))),a&&e.setLineDash([])}(e,t,C,A),A&&(n.batchFill=C.fill||"",n.batchStroke=C.stroke||"");else if(t instanceof DO)3!==n.lastDrawType&&(w=!0,n.lastDrawType=3),FM(e,t,M,w,n),!function(e,t,n){var r,i=n.text;if(null!=i&&(i+=""),i){e.font=n.font||w3,e.textAlign=n.textAlign,e.textBaseline=n.textBaseline;var a=void 0,s=void 0;e.setLineDash&&n.lineDash&&(a=(r=Fp(t))[0],s=r[1]),a&&(e.setLineDash(a),e.lineDashOffset=s),n.strokeFirst?(Fg(n)&&e.strokeText(i,n.x,n.y),Fv(n)&&e.fillText(i,n.x,n.y)):(Fv(n)&&e.fillText(i,n.x,n.y),Fg(n)&&e.strokeText(i,n.x,n.y)),a&&e.setLineDash([])}}(e,t,C);else if(t instanceof DF){;2!==n.lastDrawType&&(w=!0,n.lastDrawType=2),h=e,p=t,f=M,v=w,Fw(h,FT(p,(y=n).inHover),f&&FT(f,y.inHover),v,y),!function(e,t,n){var r=t.__image=ID(n.image,t.__image,t,t.onload);if(!!r&&!!IR(r)){var i=n.x||0,a=n.y||0,s=t.getWidth(),u=t.getHeight(),c=r.width/r.height;if(null==s&&null!=u?s=u*c:null==u&&null!=s?u=s/c:null==s&&null==u&&(s=r.width,u=r.height),n.sWidth&&n.sHeight){var h=n.sx||0,p=n.sy||0;e.drawImage(r,h,p,n.sWidth,n.sHeight,i,a,s,u)}else if(n.sx&&n.sy){var h=n.sx,p=n.sy,f=s-h,v=u-p;e.drawImage(r,h,p,f,v,i,a,s,u)}else e.drawImage(r,i,a,s,u)}}(e,t,C)}else t.getTemporalDisplayables&&(4!==n.lastDrawType&&(w=!0,n.lastDrawType=4),function(e,t,n){var r,i,a=t.getDisplayables(),s=t.getTemporalDisplayables();e.save();var u={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover};for(r=t.getCursor(),i=a.length;r<i;r++){var c=a[r];c.beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),FI(e,c,u,r===i-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),u.prevEl=c}for(var h=0,p=s.length;h<p;h++){var c=s[h];c.beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),FI(e,c,u,h===p-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),u.prevEl=c}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}(e,t,n));A&&r&&FC(e,n),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),n.prevEl=t,t.__dirty=0,t.__isRendered=!0}var FD=new N9,FP=new CJ(100),FR=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function FL(e,t){if("none"===e)return null;var n=t.getDevicePixelRatio(),r=t.getZr(),i="svg"===r.painter.type;e.dirty&&FD.delete(e);var a=FD.get(e);if(a)return a;var s=Mg(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===s.backgroundColor&&(s.backgroundColor=null);var u={repeat:"repeat"};return function(e){for(var t,a,u=[n],c=!0,h=0;h<FR.length;++h){var p=s[FR[h]];if(null!=p&&!MI(p)&&!MP(p)&&!ML(p)&&"boolean"!=typeof p){c=!1;break}u.push(p)}if(c){t=u.join(",")+(i?"-svg":"");var f=FP.get(t);f&&(i?e.svgElement=f:e.image=f)}var v=function e(t){if(!t||0===t.length)return[[0,0]];if(ML(t)){var n=Math.ceil(t);return[[n,n]]}for(var r=!0,i=0;i<t.length;++i)if(!ML(t[i])){r=!1;break}if(r)return e([t]);for(var a=[],i=0;i<t.length;++i)if(ML(t[i])){var n=Math.ceil(t[i]);a.push([n,n])}else{var n=MS(t[i],function(e){return Math.ceil(e)});n.length%2==1?a.push(n.concat(n)):a.push(n)}return a}(s.dashArrayX),y=function(e){if(!e||"object"==typeof e&&0===e.length)return[0,0];if(ML(e)){var t=Math.ceil(e);return[t,t]}var n=MS(e,function(e){return Math.ceil(e)});return e.length%2?n.concat(n):n}(s.dashArrayY),_=function e(t){if(!t||0===t.length)return[["rect"]];if(MP(t))return[[t]];for(var n=!0,r=0;r<t.length;++r)if(!MP(t[r])){n=!1;break}if(n)return e([t]);for(var i=[],r=0;r<t.length;++r)MP(t[r])?i.push([t[r]]):i.push(t[r]);return i}(s.symbol),x=function(e){return MS(e,function(e){return FO(e)})}(v),b=FO(y),S=!i&&w4.createCanvas(),w=i&&{tag:"g",attrs:{},key:"dcl",children:[]},M=function(){for(var e=1,t=0,n=x.length;t<n;++t)e=E2(e,x[t]);for(var r=1,t=0,n=_.length;t<n;++t)r=E2(r,_[t].length);e*=r;var i=b*x.length*_.length;return{width:Math.max(1,Math.min(e,s.maxTileWidth)),height:Math.max(1,Math.min(i,s.maxTileHeight))}}();S&&(S.width=M.width*n,S.height=M.height*n,a=S.getContext("2d")),function(){a&&(a.clearRect(0,0,S.width,S.height),s.backgroundColor&&(a.fillStyle=s.backgroundColor,a.fillRect(0,0,S.width,S.height)));for(var e=0,t=0;t<y.length;++t)e+=y[t];if(!(e<=0))for(var u=-b,c=0,h=0,p=0;u<M.height;){if(c%2==0){for(var f=h/2%_.length,x=0,A=0,C=0;x<2*M.width;){for(var T=0,t=0;t<v[p].length;++t)T+=v[p][t];if(T<=0)break;if(A%2==0){var I=(1-s.symbolSize)*.5,D=x+v[p][A]*I,P=u+y[c]*I,R=v[p][A]*s.symbolSize,L=y[c]*s.symbolSize,O=C/2%_[f].length;(function(e,t,u,c,h){var p=i?1:n,f=Fo(h,e*p,t*p,u*p,c*p,s.color,s.symbolKeepAspect);if(i){var v=r.painter.renderOneToVNode(f);v&&w.children.push(v)}else FE(a,f)})(D,P,R,L,_[f][O])}x+=v[p][A],++C,++A===v[p].length&&(A=0)}++p===v.length&&(p=0)}u+=y[c],++h,++c===y.length&&(c=0)}}(),c&&FP.put(t,S||w),e.image=S,e.svgElement=w,e.svgWidth=M.width,e.svgHeight=M.height}(u),u.rotation=s.rotation,u.scaleX=u.scaleY=i?1:1/n,FD.set(e,u),e.dirty=!1,u}function FO(e){for(var t=0,n=0;n<e.length;++n)t+=e[n];return e.length%2==1?2*t:t}var Fk=new AA,FB={};function FN(e){return FB[e]}var FF="5.5.1",Fz={zrender:"5.6.0"},FU={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:4600,COMPONENT:4e3,BRUSH:5e3,CHART_ITEM:4500,ARIA:6e3,DECAL:7e3}},FH="__flagInMainProcess",FG="__pendingUpdate",FV="__needsUpdateStatus",FW=/^[a-zA-Z0-9_]+$/,Fj="__connectUpdateStatus";function FX(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this.isDisposed()){F0(this.id);return}return FJ(this,e,t)}}function FY(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return FJ(this,e,t)}}function FJ(e,t,n){return n[0]=n[0]&&n[0].toLowerCase(),AA.prototype[t].apply(e,n)}var FZ=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t}(AA),Fq=FZ.prototype;Fq.on=FY("on"),Fq.off=FY("off");var FK=function(e){function t(t,n,r){var i=e.call(this,new Nq)||this;i._chartsViews=[],i._chartsMap={},i._componentsViews=[],i._componentsMap={},i._pendingActions=[],r=r||{},MP(n)&&(n=F6[n]),i._dom=t;if(r.ssr)eL=function(e){var t=D7(e),n=t.dataIndex;if(null!=n){var r=M1();return r.set("series_index",t.seriesIndex),r.set("data_index",n),t.ssrType&&r.set("ssr_type",t.ssrType),r}};var a=i._zr=EC(t,{renderer:r.renderer||"canvas",devicePixelRatio:r.devicePixelRatio,width:r.width,height:r.height,ssr:r.ssr,useDirtyRect:MV(r.useDirtyRect,!1),useCoarsePointer:MV(r.useCoarsePointer,"auto"),pointerSize:r.pointerSize});i._ssr=r.ssr,i._throttledZrFlush=Nb(MT(a.flush,a),17),(n=Mh(n))&&Oo(n,!0),i._theme=n,i._locale=function(e){if(!MP(e))return Md(Mh(e),Mh(RA.EN),!1);var t=RA[e.toUpperCase()]||{};return"ZH"===e||"EN"===e?Mh(t):Md(Mh(t),Mh(RA.EN),!1)}(r.locale||RT),i._coordSysMgr=new Lq;var s=i._api=e5(i);function u(e,t){return e.__prio-t.__prio}return Cv(F4,u),Cv(F3,u),i._scheduler=new NP(i,s,F3,F4),i._messageCenter=new FZ,i._initEvents(),i.resize=MT(i.resize,i),a.animation.on("frame",i._onframe,i),e$(a,i),e0(a,i),Mq(i),i}return wJ(t,e),t.prototype._onframe=function(){if(!this._disposed){e9(this);var e=this._scheduler;if(this[FG]){var t=this[FG].silent;this[FH]=!0;try{eW(this),eY.update.call(this,null,this[FG].updateParams)}catch(e){throw this[FH]=!1,this[FG]=null,e}this._zr.flush(),this[FH]=!1,this[FG]=null,eK.call(this,t),eQ.call(this,t)}else if(e.unfinished){var n=1,r=this._model,i=this._api;e.unfinished=!1;do{var a=+new Date;e.performSeriesTasks(r),e.performDataProcessorTasks(r),eZ(this,r),e.performVisualTasks(r),e3(this,this._model,i,"remain",{}),n-=+new Date-a}while(n>0&&e.unfinished);!e.unfinished&&this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(e,t,n){if(!this[FH]){if(this._disposed){F0(this.id);return}if(MO(t)&&(n=t.lazyUpdate,r=t.silent,i=t.replaceMerge,a=t.transition,t=t.notMerge),this[FH]=!0,!this._model||t){var r,i,a,s=new LQ(this._api),u=this._theme,c=this._model=new LV;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,s)}this._model.setOption(e,{replaceMerge:i},F5);var h={seriesTransition:a,optionChanged:!0};if(n)this[FG]={silent:r,updateParams:h},this[FH]=!1,this.getZr().wakeUp();else{try{eW(this),eY.update.call(this,null,h)}catch(e){throw this[FG]=null,this[FH]=!1,e}!this._ssr&&this._zr.flush(),this[FG]=null,this[FH]=!1,eK.call(this,r),eQ.call(this,r)}}},t.prototype.setTheme=function(){ON("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||w1.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(e){return this.renderToCanvas(e)},t.prototype.renderToCanvas=function(e){e=e||{};var t=this._zr.painter;return t.getRenderedCanvas({backgroundColor:e.backgroundColor||this._model.get("backgroundColor"),pixelRatio:e.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(e){e=e||{};var t=this._zr.painter;return t.renderToString({useViewBox:e.useViewBox})},t.prototype.getSvgDataURL=function(){if(!!w1.svgSupported){var e=this._zr;return Mb(e.storage.getDisplayList(),function(e){e.stopAnimation(null,!0)}),e.painter.toDataURL()}},t.prototype.getDataURL=function(e){if(this._disposed){F0(this.id);return}var t=(e=e||{}).excludeComponents,n=this._model,r=[],i=this;Mb(t,function(e){n.eachComponent({mainType:e},function(e){var t=i._componentsMap[e.__viewId];!t.group.ignore&&(r.push(t),t.group.ignore=!0)})});var a="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.renderToCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return Mb(r,function(e){e.group.ignore=!1}),a},t.prototype.getConnectedDataURL=function(e){if(this._disposed){F0(this.id);return}var t="svg"===e.type,n=this.group,r=Math.min,i=Math.max,a=1/0;if(!F7[n])return this.getDataURL(e);var s=a,u=a,c=-a,h=-a,p=[],f=e&&e.pixelRatio||this.getDevicePixelRatio();Mb(F8,function(a,f){if(a.group===n){var v=t?a.getZr().painter.getSvgDom().innerHTML:a.renderToCanvas(Mh(e)),y=a.getDom().getBoundingClientRect();s=r(y.left,s),u=r(y.top,u),c=i(y.right,c),h=i(y.bottom,h),p.push({dom:v,left:y.left,top:y.top})}}),s*=f,u*=f,c*=f,h*=f;var v=c-s,y=h-u,_=w4.createCanvas(),x=EC(_,{renderer:t?"svg":"canvas"});if(x.resize({width:v,height:y}),!t)return e.connectedBackgroundColor&&x.add(new DX({shape:{x:0,y:0,width:v,height:y},style:{fill:e.connectedBackgroundColor}})),Mb(p,function(e){var t=new DF({style:{x:e.left*f-s,y:e.top*f-u,image:e.dom}});x.add(t)}),x.refreshImmediately(),_.toDataURL("image/"+(e&&e.type||"png"));var b="";return Mb(p,function(e){var t=e.left-s,n=e.top-u;b+='<g transform="translate('+t+","+n+')">'+e.dom+"</g>"}),x.painter.getSvgRoot().innerHTML=b,e.connectedBackgroundColor&&x.painter.setBackgroundColor(e.connectedBackgroundColor),x.refreshImmediately(),x.painter.toDataURL()},t.prototype.convertToPixel=function(e,t){return eJ(this,"convertToPixel",e,t)},t.prototype.convertFromPixel=function(e,t){return eJ(this,"convertFromPixel",e,t)},t.prototype.containPixel=function(e,t){var n;if(this._disposed){F0(this.id);return}return Mb(Iu(this._model,e),function(e,r){r.indexOf("Models")>=0&&Mb(e,function(e){var i=e.coordinateSystem;if(i&&i.containPoint)n=n||!!i.containPoint(t);else if("seriesModels"===r){var a=this._chartsMap[e.__viewId];a&&a.containPoint&&(n=n||a.containPoint(t,e))}},this)},this),!!n},t.prototype.getVisual=function(e,t){var n=Iu(this._model,e,{defaultMainType:"series"}),r=n.seriesModel,i=r.getData(),a=n.hasOwnProperty("dataIndexInside")?n.dataIndexInside:n.hasOwnProperty("dataIndex")?i.indexOfRawIndex(n.dataIndex):null;return null!=a?N$(i,a,t):N0(i,t)},t.prototype.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},t.prototype.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]},t.prototype._initEvents=function(){var e=this;Mb(F$,function(t){var n=function(n){var r,i=e.getModel(),a=n.target;if("globalout"===t?r={}:a&&N5(a,function(e){var t=D7(e);if(t&&null!=t.dataIndex){var n=t.dataModel||i.getSeriesByIndex(t.seriesIndex);return r=n&&n.getDataParams(t.dataIndex,t.dataType,a)||{},!0}if(t.eventData)return r=Mf({},t.eventData),!0},!0),r){var s=r.componentType,u=r.componentIndex;("markLine"===s||"markPoint"===s||"markArea"===s)&&(s="series",u=r.seriesIndex);var c=s&&null!=u&&i.getComponent(s,u),h=c&&e["series"===c.mainType?"_chartsMap":"_componentsMap"][c.__viewId];r.event=n,r.type=t,e._$eventProcessor.eventInfo={targetEl:a,packedEvent:r,model:c,view:h},e.trigger(t,r)}};n.zrEventfulCallAtLast=!0,e._zr.on(t,n,e)}),Mb(F2,function(t,n){e._messageCenter.on(n,function(e){this.trigger(n,e)},e)}),Mb(["selectchanged"],function(t){e._messageCenter.on(t,function(e){this.trigger(t,e)},e)}),!function(e,t,n){e.on("selectchanged",function(e){var r=n.getModel();e.isFromClick?(N3("map","selectchanged",t,r,e),N3("pie","selectchanged",t,r,e)):"select"===e.fromAction?(N3("map","selected",t,r,e),N3("pie","selected",t,r,e)):"unselect"===e.fromAction&&(N3("map","unselected",t,r,e),N3("pie","unselected",t,r,e))})}(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){F0(this.id);return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){F0(this.id);return}this._disposed=!0,this.getDom()&&If(this.getDom(),zn,"");var e=this._api,t=this._model;Mb(this._componentsViews,function(n){n.dispose(t,e)}),Mb(this._chartsViews,function(n){n.dispose(t,e)}),this._zr.dispose(),this._dom=this._model=this._chartsMap=this._componentsMap=this._chartsViews=this._componentsViews=this._scheduler=this._api=this._zr=this._throttledZrFlush=this._theme=this._coordSysMgr=this._messageCenter=null,delete F8[this.id]},t.prototype.resize=function(e){if(this[FH])return;if(this._disposed){F0(this.id);return}this._zr.resize(e);var t=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!t){var n=t.resetOption("media"),r=e&&e.silent;this[FG]&&(null==r&&(r=this[FG].silent),n=!0,this[FG]=null),this[FH]=!0;try{n&&eW(this),eY.update.call(this,{type:"resize",animation:Mf({duration:0},e&&e.animation)})}catch(e){throw this[FH]=!1,e}this[FH]=!1,eK.call(this,r),eQ.call(this,r)}},t.prototype.showLoading=function(e,t){if(this._disposed){F0(this.id);return}if(MO(e)&&(t=e,e=""),e=e||"default",this.hideLoading(),!!F9[e]){var n=F9[e](this._api,t),r=this._zr;this._loadingFX=n,r.add(n)}},t.prototype.hideLoading=function(){if(this._disposed){F0(this.id);return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(e){var t=Mf({},e);return t.type=F2[e.type],t},t.prototype.dispatchAction=function(e,t){if(this._disposed){F0(this.id);return}if(!MO(t)&&(t={silent:!!t}),!!F1[e.type]&&!!this._model){if(this[FH]){this._pendingActions.push(e);return}var n=t.silent;eq.call(this,e,n);var r=t.flush;r?this._zr.flush():!1!==r&&w1.browser.weChat&&this._throttledZrFlush(),eK.call(this,n),eQ.call(this,n)}},t.prototype.updateLabelLayout=function(){Fk.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(e){if(this._disposed){F0(this.id);return}var t=e.seriesIndex,n=this.getModel().getSeriesByIndex(t);n.appendData(e),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){function e(e){e.clearColorPalette(),e.eachSeries(function(e){e.clearColorPalette()})}eW=function(e){var t=e._scheduler;t.restorePipelines(e._model),t.prepareStageTasks(),ej(e,!0),ej(e,!1),t.plan()},ej=function(e,t){for(var n=e._model,r=e._scheduler,i=t?e._componentsViews:e._chartsViews,a=t?e._componentsMap:e._chartsMap,s=e._zr,u=e._api,c=0;c<i.length;c++)i[c].__alive=!1;function h(e){var c=e.__requireNewView;e.__requireNewView=!1;var h="_ec_"+e.id+"_"+e.type,p=!c&&a[h];if(!p){var f=I_(e.type),v=t?kR.getClass(f.main,f.sub):Nv.getClass(f.sub);(p=new v).init(n,u),a[h]=p,i.push(p),s.add(p.group)}e.__viewId=p.__id=h,p.__alive=!0,p.__model=e,p.group.__ecComponentInfo={mainType:e.mainType,index:e.componentIndex},t||r.prepareView(p,e,n,u)}t?n.eachComponent(function(e,t){"series"!==e&&h(t)}):n.eachSeries(h);for(var c=0;c<i.length;){var p=i[c];p.__alive?c++:(t||p.renderTask.dispose(),s.remove(p.group),p.dispose(n,u),i.splice(c,1),a[p.__id]===p&&delete a[p.__id],p.__id=p.group.__ecComponentInfo=null)}},eX=function(e,t,n,r,i){var a,s=e._model;if(s.setUpdatePayload(n),!r){Mb([].concat(e._componentsViews).concat(e._chartsViews),p);return}var u={};u[r+"Id"]=n[r+"Id"],u[r+"Index"]=n[r+"Index"],u[r+"Name"]=n[r+"Name"];var c={mainType:r,query:u};i&&(c.subType=i);var h=n.excludeSeriesId;function p(r){r&&r.__alive&&r[t]&&r[t](r.__model,s,e._api,n)}null!=h&&(a=M1(),Mb(E6(h),function(e){var t=Ir(e,null);null!=t&&a.set(t,!0)})),s&&s.eachComponent(c,function(t){if(!a||null==a.get(t.id))if(PJ(n)){if(t instanceof kD)n.type===Ps&&!n.notBlur&&!t.get(["emphasis","disabled"])&&!function(e,t,n){var r=e.seriesIndex,i=e.getData(t.dataType);if(!!i){var a=Io(i,t);a=(MI(a)?a[0]:a)||0;var s=i.getItemGraphicEl(a);if(!s){for(var u=i.count(),c=0;!s&&c<u;)s=i.getItemGraphicEl(c++)}if(s){var h=D7(s);Pk(r,h.focus,h.blurScope,n)}else{var p=e.get(["emphasis","focus"]),f=e.get(["emphasis","blurScope"]);null!=p&&Pk(r,p,f,n)}}}(t,n,e._api);else{var r=PN(t.mainType,t.componentIndex,n.name,e._api),i=r.focusSelf,s=r.dispatchers;n.type===Ps&&i&&!n.notBlur&&PB(t.mainType,t.componentIndex,e._api),s&&Mb(s,function(e){n.type===Ps?PT(e):PE(e)})}}else PY(n)&&t instanceof kD&&(!function(e,t,n){if(!!PY(t)){var r=t.dataType,i=Io(e.getData(r),t);!MI(i)&&(i=[i]),e[t.type===Ph?"toggleSelect":t.type===Pu?"select":"unselect"](i,r)}}(t,n,e._api),PF(t),e6(e))},e),s&&s.eachComponent(c,function(t){if(!a||null==a.get(t.id))p(e["series"===r?"_chartsMap":"_componentsMap"][t.__viewId])},e)},eY={prepareAndUpdate:function(e){eW(this),eY.update.call(this,e,{optionChanged:null!=e.newOption})},update:function(t,n){var r=this._model,i=this._api,a=this._zr,s=this._coordSysMgr,u=this._scheduler;if(!!r){r.setUpdatePayload(t),u.restoreData(r,t),u.performSeriesTasks(r),s.create(r,i),u.performDataProcessorTasks(r,t),eZ(this,r),s.update(r,i),e(r),u.performVisualTasks(r,t),e1(this,r,i,t,n);var c=r.get("backgroundColor")||"transparent",h=r.get("darkMode");a.setBackgroundColor(c),null!=h&&"auto"!==h&&a.setDarkMode(h),Fk.trigger("afterupdate",r,i)}},updateTransform:function(t){var n=this,r=this._model,i=this._api;if(!!r){r.setUpdatePayload(t);var a=[];r.eachComponent(function(e,s){if("series"!==e){var u=n.getViewOfComponentModel(s);if(u&&u.__alive){if(u.updateTransform){var c=u.updateTransform(s,r,i,t);c&&c.update&&a.push(u)}else a.push(u)}}});var s=M1();r.eachSeries(function(e){var a=n._chartsMap[e.__viewId];if(a.updateTransform){var u=a.updateTransform(e,r,i,t);u&&u.update&&s.set(e.uid,1)}else s.set(e.uid,1)}),e(r),this._scheduler.performVisualTasks(r,t,{setDirty:!0,dirtyMap:s}),e3(this,r,i,t,{},s),Fk.trigger("afterupdate",r,i)}},updateView:function(t){var n=this._model;if(!!n)n.setUpdatePayload(t),Nv.markUpdateMethod(t,"updateView"),e(n),this._scheduler.performVisualTasks(n,t,{setDirty:!0}),e1(this,n,this._api,t,{}),Fk.trigger("afterupdate",n,this._api)},updateVisual:function(t){var n=this,r=this._model;if(!!r)r.setUpdatePayload(t),r.eachSeries(function(e){e.getData().clearAllVisual()}),Nv.markUpdateMethod(t,"updateVisual"),e(r),this._scheduler.performVisualTasks(r,t,{visualType:"visual",setDirty:!0}),r.eachComponent(function(e,i){if("series"!==e){var a=n.getViewOfComponentModel(i);a&&a.__alive&&a.updateVisual(i,r,n._api,t)}}),r.eachSeries(function(e){n._chartsMap[e.__viewId].updateVisual(e,r,n._api,t)}),Fk.trigger("afterupdate",r,this._api)},updateLayout:function(e){eY.update.call(this,e)}},eJ=function(e,t,n,r){if(e._disposed){F0(e.id);return}for(var i,a=e._model,s=e._coordSysMgr.getCoordinateSystems(),u=Iu(a,n),c=0;c<s.length;c++){var h=s[c];if(h[t]&&null!=(i=h[t](a,u,r)))return i}},eZ=function(e,t){var n=e._chartsMap,r=e._scheduler;t.eachSeries(function(e){r.updateStreamModes(e,n[e.__viewId])})},eq=function(e,t){var n,r=this,i=this.getModel(),a=e.type,s=e.escapeConnect,u=F1[a],c=u.actionInfo,h=(c.update||"update").split(":"),p=h.pop(),f=null!=h[0]&&I_(h[0]);this[FH]=!0;var v=[e],y=!1;e.batch&&(y=!0,v=MS(e.batch,function(t){return(t=Mg(Mf({},t),e)).batch=null,t}));var _=[],x=PY(e),b=PJ(e);if(b&&PO(this._api),Mb(v,function(t){if((n=(n=u.action(t,r._model,r._api))||Mf({},t)).type=c.event||n.type,_.push(n),b){var i=Ic(e),a=i.queryOptionMap;eX(r,p,t,i.mainTypeSpecified?a.keys()[0]:"series"),e6(r)}else x?(eX(r,p,t,"series"),e6(r)):f&&eX(r,p,t,f.main,f.sub)}),"none"!==p&&!b&&!x&&!f)try{this[FG]?(eW(this),eY.update.call(this,e),this[FG]=null):eY[p].call(this,e)}catch(e){throw this[FH]=!1,e}if(n=y?{type:c.event||a,escapeConnect:s,batch:_}:_[0],this[FH]=!1,!t){var S=this._messageCenter;if(S.trigger(n.type,n),x){var w,M={type:"selectchanged",escapeConnect:s,selected:(w=[],i.eachSeries(function(e){Mb(e.getAllData(),function(t){t.data;var n=t.type,r=e.getSelectedDataIndices();if(r.length>0){var i={dataIndex:r,seriesIndex:e.seriesIndex};null!=n&&(i.dataType=n),w.push(i)}})}),w),isFromClick:e.isFromClick||!1,fromAction:e.type,fromActionPayload:e};S.trigger(M.type,M)}}},eK=function(e){for(var t=this._pendingActions;t.length;){var n=t.shift();eq.call(this,n,e)}},eQ=function(e){e||this.trigger("updated")},e$=function(e,t){e.on("rendered",function(n){t.trigger("rendered",n),e.animation.isFinished()&&!t[FG]&&!t._scheduler.unfinished&&!t._pendingActions.length&&t.trigger("finished")})},e0=function(e,t){e.on("mouseover",function(e){var n,r,i,a,s,u,c,h=N5(e.target,PX);if(h){;n=h,r=e,i=t._api,u=(s=PN((a=D7(n)).componentMainType,a.componentIndex,a.componentHighDownName,i)).dispatchers,c=s.focusSelf,u?(c&&PB(a.componentMainType,a.componentIndex,i),Mb(u,function(e){return PA(e,r)})):(Pk(a.seriesIndex,a.focus,a.blurScope,i),"self"===a.focus&&PB(a.componentMainType,a.componentIndex,i),PA(n,r)),e6(t)}}).on("mouseout",function(e){var n,r,i,a,s,u=N5(e.target,PX);if(u){;n=u,r=e,PO(i=t._api),(s=PN((a=D7(n)).componentMainType,a.componentIndex,a.componentHighDownName,i).dispatchers)?Mb(s,function(e){return PC(e,r)}):PC(n,r),e6(t)}}).on("click",function(e){var n=N5(e.target,function(e){return null!=D7(e).dataIndex},!0);if(n){var r=n.selected?"unselect":"select",i=D7(n);t._api.dispatchAction({type:r,dataType:i.dataType,dataIndexInside:i.dataIndex,seriesIndex:i.seriesIndex,isFromClick:!0})}})};function t(e){for(var t=[],n=e.currentStates,r=0;r<n.length;r++){var i=n[r];!("emphasis"===i||"blur"===i||"select"===i)&&t.push(i)}e.selected&&e.states.select&&t.push("select"),2===e.hoverState&&e.states.emphasis?t.push("emphasis"):1===e.hoverState&&e.states.blur&&t.push("blur"),e.useStates(t)}e1=function(e,t,n,r,i){!function(e){var t=[],n=[],r=!1;if(e.eachComponent(function(e,i){var a=i.get("zlevel")||0,s=i.get("z")||0,u=i.getZLevelKey();r=r||!!u,("series"===e?n:t).push({zlevel:a,z:s,idx:i.componentIndex,type:e,key:u})}),r){var i,a,s=t.concat(n);Cv(s,function(e,t){return e.zlevel===t.zlevel?e.z-t.z:e.zlevel-t.zlevel}),Mb(s,function(t){var n=e.getComponent(t.type,t.idx),r=t.zlevel,s=t.key;null!=i&&(r=Math.max(i,r)),s?(r===i&&s!==a&&r++,a=s):a&&(r===i&&r++,a=""),i=r,n.setZLevel(r)})}}(t),e2(e,t,n,r,i),Mb(e._chartsViews,function(e){e.__alive=!1}),e3(e,t,n,r,i),Mb(e._chartsViews,function(e){!e.__alive&&e.remove(t,n)})},e2=function(e,t,a,s,u,c){Mb(c||e._componentsViews,function(e){var u=e.__model;r(u,e),e.render(u,t,a,s),n(u,e),i(u,e)})},e3=function(e,t,a,s,u,c){var h=e._scheduler;u=Mf(u||{},{updatedSeries:t.getSeries()}),Fk.trigger("series:beforeupdate",t,a,u);var p=!1;t.eachSeries(function(t){var n=e._chartsMap[t.__viewId];n.__alive=!0;var i=n.renderTask;h.updatePayload(i,s),r(t,n),c&&c.get(t.uid)&&i.dirty(),i.perform(h.getPerformArgs(i))&&(p=!0),n.group.silent=!!t.get("silent"),function(e,t){var n=e.get("blendMode")||null;t.eachRendered(function(e){!e.isGroup&&(e.style.blend=n)})}(t,n),PF(t)}),h.unfinished=p||h.unfinished,Fk.trigger("series:layoutlabels",t,a,u),Fk.trigger("series:transition",t,a,u),t.eachSeries(function(t){var r=e._chartsMap[t.__viewId];n(t,r),i(t,r)}),function(e,t){var n=e._zr.storage,r=0;n.traverse(function(e){!e.isGroup&&r++}),r>t.get("hoverLayerThreshold")&&!w1.node&&!w1.worker&&t.eachSeries(function(t){if(!t.preventUsingHoverLayer){var n=e._chartsMap[t.__viewId];n.__alive&&n.eachRendered(function(e){e.states.emphasis&&(e.states.emphasis.hoverLayer=!0)})}})}(e,t),Fk.trigger("series:afterupdate",t,a,u)},e6=function(e){e[FV]=!0,e.getZr().wakeUp()},e9=function(e){if(!!e[FV])e.getZr().storage.traverse(function(e){if(!P0(e))t(e)}),e[FV]=!1};function n(e,t){if(!e.preventAutoZ){var n=e.get("z")||0,r=e.get("zlevel")||0;t.eachRendered(function(e){return function e(t,n,r,i){var a=t.getTextContent(),s=t.getTextGuideLine();if(t.isGroup){for(var u=t.childrenRef(),c=0;c<u.length;c++)i=Math.max(e(u[c],n,r,i),i)}else t.z=n,t.zlevel=r,i=Math.max(t.z2,i);if(a&&(a.z=n,a.zlevel=r,isFinite(i)&&(a.z2=i+2)),s){var h=t.textGuideLineConfig;s.z=n,s.zlevel=r,isFinite(i)&&(s.z2=i+(h&&h.showAbove?1:-1))}return i}(e,n,r,-1/0),!0})}}function r(e,t){t.eachRendered(function(e){if(!P0(e)){var t=e.getTextContent(),n=e.getTextGuideLine();e.stateTransition&&(e.stateTransition=null),t&&t.stateTransition&&(t.stateTransition=null),n&&n.stateTransition&&(n.stateTransition=null),e.hasState()?(e.prevStates=e.currentStates,e.clearStates()):e.prevStates&&(e.prevStates=null)}})}function i(e,n){var r=e.getModel("stateAnimation"),i=e.isAnimationEnabled(),a=r.get("duration"),s=a>0?{duration:a,delay:r.get("delay"),easing:r.get("easing")}:null;n.eachRendered(function(e){if(e.states&&e.states.emphasis){if(!P0(e)){if(e instanceof DR){var n,r,a;(r=Pr(n=e)).normalFill=n.style.fill,r.normalStroke=n.style.stroke,a=n.states.select||{},r.selectFill=a.style&&a.style.fill||null,r.selectStroke=a.style&&a.style.stroke||null}if(e.__dirty){var u=e.prevStates;u&&e.useStates(u)}if(i){e.stateTransition=s;var c=e.getTextContent(),h=e.getTextGuideLine();c&&(c.stateTransition=s),h&&(h.stateTransition=s)}e.__dirty&&t(e)}}})}e5=function(e){return new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return wJ(n,t),n.prototype.getCoordinateSystems=function(){return e._coordSysMgr.getCoordinateSystems()},n.prototype.getComponentByElement=function(t){for(;t;){var n=t.__ecComponentInfo;if(null!=n)return e._model.getComponent(n.mainType,n.index);t=t.parent}},n.prototype.enterEmphasis=function(t,n){PT(t,n),e6(e)},n.prototype.leaveEmphasis=function(t,n){PE(t,n),e6(e)},n.prototype.enterBlur=function(t){Pb(t,Pm),e6(e)},n.prototype.leaveBlur=function(t){Pb(t,Pv),e6(e)},n.prototype.enterSelect=function(t){Pb(t,Py),e6(e)},n.prototype.leaveSelect=function(t){Pb(t,P_),e6(e)},n.prototype.getModel=function(){return e.getModel()},n.prototype.getViewOfComponentModel=function(t){return e.getViewOfComponentModel(t)},n.prototype.getViewOfSeriesModel=function(t){return e.getViewOfSeriesModel(t)},n}(LJ))(e)},e4=function(e){function t(e,t){for(var n=0;n<e.length;n++)e[n][Fj]=t}Mb(F2,function(n,r){e._messageCenter.on(r,function(n){if(F7[e.group]&&0!==e[Fj]){if(!n||!n.escapeConnect){var r=e.makeActionFromEvent(n),i=[];Mb(F8,function(t){t!==e&&t.group===e.group&&i.push(t)}),t(i,0),Mb(i,function(e){1!==e[Fj]&&e.dispatchAction(r)}),t(i,2)}}})})}}(),t}(AA),FQ=FK.prototype;FQ.on=FX("on"),FQ.off=FX("off"),FQ.one=function(e,t,n){var r=this;ON("ECharts#one is deprecated.");this.on.call(this,e,function n(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];t&&t.apply&&t.apply(this,i),r.off(e,n)},n)};var F$=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function F0(e){}var F1={},F2={},F3=[],F5=[],F4=[],F6={},F9={},F8={},F7={},ze=+new Date-0,zt=+new Date-0,zn="_echarts_instance_";function zr(e,t,n){var r=!(n&&n.ssr);if(r){var i=zl(e);if(i)return i}var a=new FK(e,t,n);return a.id="ec_"+ze++,F8[a.id]=a,r&&If(e,zn,a.id),e4(a),Fk.trigger("afterinit",a),a}function zi(e){if(MI(e)){var t=e;e=null,Mb(t,function(t){null!=t.group&&(e=t.group)}),e=e||"g_"+zt++,Mb(t,function(t){t.group=e})}return F7[e]=!0,e}function za(e){F7[e]=!1}var zo=za;function zs(e){MP(e)?e=F8[e]:!(e instanceof FK)&&(e=zl(e)),e instanceof FK&&!e.isDisposed()&&e.dispose()}function zl(e){var t,n;return F8[t=e,n=zn,t.getAttribute?t.getAttribute(n):t[n]]}function zu(e){return F8[e]}function zc(e,t){F6[e]=t}function zh(e){0>Mv(F5,e)&&F5.push(e)}function zd(e,t){zS(F3,e,t,2e3)}function zp(e){zg("afterinit",e)}function zf(e){zg("afterupdate",e)}function zg(e,t){Fk.on(e,t)}function zm(e,t,n){MD(t)&&(n=t,t="");var r=MO(e)?e.type:[e,e={event:t}][0];if(e.event=(e.event||r).toLowerCase(),!F2[t=e.event])MY(FW.test(r)&&FW.test(t)),!F1[r]&&(F1[r]={action:n,actionInfo:e}),F2[t]=r}function zv(e,t){Lq.register(e,t)}function zy(e){var t=Lq.get(e);if(t)return t.getDimensionsInfo?t.getDimensionsInfo():t.dimensions.slice()}function z_(e,t){zS(F4,e,t,1e3,"layout")}function zx(e,t){zS(F4,e,t,3e3,"visual")}var zb=[];function zS(e,t,n,r,i){(MD(t)||MO(t))&&(n=t,t=r);if(!(Mv(zb,n)>=0)){zb.push(n);var a=NP.wrapStageHandler(n,i);a.__prio=t,a.__raw=n,e.push(a)}}function zw(e,t){F9[e]=t}function zM(e){w6({createCanvas:e})}function zA(e,t,n){var r=FB.registerMap;r&&r(e,t,n)}function zC(e){var t=FB.getMap;return t&&t(e)}var zT=function(e){var t=(e=Mh(e)).type;!t&&OF("");var n=t.split(":");2!==n.length&&OF("");var r=!1;"echarts"===n[0]&&(t=n[1],r=!0),e.__isBuiltIn=r,OK.set(t,e)};zx(2e3,{createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var n=e.getData(),r=e.visualStyleAccessPath||"itemStyle",i=e.getModel(r),a=NT(e,r)(i),s=i.getShallow("decal");s&&(n.setVisual("decal",s),s.dirty=!0);var u=NE(e,r),c=a[u],h=MD(c)?c:null,p="auto"===a.fill||"auto"===a.stroke;if(!a[u]||h||p){var f=e.getColorFromPalette(e.name,null,t.getSeriesCount());!a[u]&&(a[u]=f,n.setVisual("colorFromPalette",!0)),a.fill="auto"===a.fill||MD(a.fill)?f:a.fill,a.stroke="auto"===a.stroke||MD(a.stroke)?f:a.stroke}if(n.setVisual("style",a),n.setVisual("drawType",u),!t.isSeriesFiltered(e)&&h)return n.setVisual("colorFromPalette",!1),{dataEach:function(t,n){var r=e.getDataParams(n),i=Mf({},a);i[u]=h(r),t.setItemVisual(n,"style",i)}}}}),zx(4500,{createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var n=e.getData(),r=e.visualStyleAccessPath||"itemStyle",i=NT(e,r),a=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(e,t){var n=e.getRawDataItem(t);if(n&&n[r]){NI.option=n[r];var s=i(NI);Mf(e.ensureUniqueItemVisual(t,"style"),s),NI.option.decal&&(e.setItemVisual(t,"decal",NI.option.decal),NI.option.decal.dirty=!0),a in s&&e.setItemVisual(t,"colorFromPalette",!1)}}:null}}}}),zx(4500,{performRawSeries:!0,overallReset:function(e){var t=M1();e.eachSeries(function(e){var n=e.getColorBy();if(!e.isColorBySeries()){var r=e.type+"-"+n,i=t.get(r);!i&&(i={},t.set(r,i)),NM(e).scope=i}}),e.eachSeries(function(t){if(!(t.isColorBySeries()||e.isSeriesFiltered(t))){var n=t.getRawData(),r={},i=t.getData(),a=NM(t).scope,s=t.visualStyleAccessPath||"itemStyle",u=NE(t,s);i.each(function(e){r[i.getRawIndex(e)]=e}),n.each(function(e){var s=r[e];if(i.getItemVisual(s,"colorFromPalette")){var c=i.ensureUniqueItemVisual(s,"style"),h=n.getName(e)||e+"",p=n.count();c[u]=t.getColorFromPalette(h,a,p)}})}})}}),zx(2e3,{createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var n=e.getData();if(e.legendIcon&&n.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var r={},i={},a=!1,s=0;s<NK.length;s++){var u=NK[s],c=e.get(u);MD(c)?(a=!0,i[u]=c):r[u]=c}if(r.symbol=r.symbol||e.defaultSymbol,n.setVisual(Mf({legendIcon:e.legendIcon||r.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},r)),!t.isSeriesFiltered(e)){var h=MC(i);return{dataEach:a?function(t,n){for(var r=e.getRawValue(n),a=e.getDataParams(n),s=0;s<h.length;s++){var u=h[s];t.setItemVisual(n,u,i[u](r,a))}}:null}}}}),zx(4500,{createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(!e.hasSymbolVisual||t.isSeriesFiltered(e))){var n=e.getData();return{dataEach:n.hasItemOption?function(e,t){for(var n=e.getItemModel(t),r=0;r<NQ.length;r++){var i=NQ[r],a=n.getShallow(i,!0);null!=a&&e.setItemVisual(t,i,a)}}:null}}}}),zx(7e3,function(e,t){e.eachRawSeries(function(n){if(!e.isSeriesFiltered(n)){var r=n.getData();r.hasItemVisual()&&r.each(function(e){var n=r.getItemVisual(e,"decal");n&&(r.ensureUniqueItemVisual(e,"style").decal=FL(n,t))});var i=r.getVisual("decal");i&&(r.getVisual("style").decal=FL(i,t))}})}),zh(Oo),zd(900,function(e){var t=M1();e.eachSeries(function(e){var n=e.get("stack");if(n){var r=t.get(n)||t.set(n,[]),i=e.getData(),a={stackResultDimension:i.getCalculationInfo("stackResultDimension"),stackedOverDimension:i.getCalculationInfo("stackedOverDimension"),stackedDimension:i.getCalculationInfo("stackedDimension"),stackedByDimension:i.getCalculationInfo("stackedByDimension"),isStackedByIndex:i.getCalculationInfo("isStackedByIndex"),data:i,seriesModel:e};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;r.length&&i.setCalculationInfo("stackedOnSeries",r[r.length-1].seriesModel),r.push(a)}}),t.each(Os)}),$=function(e,t){Mg(t=t||{},{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var n,r=new ES,i=new DX({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(i);var a=new D8({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),s=new DX({style:{fill:"none"},textContent:a,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});return r.add(s),t.showSpinner&&((n=new BP({shape:{startAngle:-ND/2,endAngle:-ND/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001})).animateShape(!0).when(1e3,{endAngle:3*ND/2}).start("circularInOut"),n.animateShape(!0).when(1e3,{startAngle:3*ND/2}).delay(300).start("circularInOut"),r.add(n)),r.resize=function(){var r=a.getBoundingRect().width,u=t.showSpinner?t.spinnerRadius:0,c=(e.getWidth()-2*u-(t.showSpinner&&r?10:0)-r)/2-(t.showSpinner&&r?0:5+r/2)+(t.showSpinner?0:r/2)+(r?0:u),h=e.getHeight()/2;t.showSpinner&&n.setShape({cx:c,cy:h}),s.setShape({x:c-u,y:h-u,width:2*u,height:2*u}),i.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r},F9.default=$,zm({type:Ps,event:Ps,update:Ps},M6),zm({type:Pl,event:Pl,update:Pl},M6),zm({type:Pu,event:Pu,update:Pu},M6),zm({type:Pc,event:Pc,update:Pc},M6),zm({type:Ph,event:Ph,update:Ph},M6),ee={color:NW,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],NW]},F6.light=ee,et=NZ,F6.dark=et;var zE={},zI=[],zD={registerPreprocessor:zh,registerProcessor:zd,registerPostInit:zp,registerPostUpdate:zf,registerUpdateLifecycle:zg,registerAction:zm,registerCoordinateSystem:zv,registerLayout:z_,registerVisual:zx,registerTransform:zT,registerLoading:zw,registerMap:zA,registerImpl:function(e,t){FB[e]=t},PRIORITY:FU,ComponentModel:Lv,ComponentView:kR,SeriesModel:kD,ChartView:Nv,registerComponentModel:function(e){Lv.registerClass(e)},registerComponentView:function(e){kR.registerClass(e)},registerSeriesModel:function(e){kD.registerClass(e)},registerChartView:function(e){Nv.registerClass(e)},registerSubTypeDefaulter:function(e,t){Lv.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){var n,r;n=e,r=t,Ew[n]=r}};function zP(e){if(MI(e)){Mb(e,function(e){zP(e)});return}if(!(Mv(zI,e)>=0))zI.push(e),MD(e)&&(e={install:e}),e.install(zD)}function zR(e){return null==e?0:e.length||1}function zL(e){return e}var zO=function(){function e(e,t,n,r,i,a){this._old=e,this._new=t,this._oldKeyGetter=n||zL,this._newKeyGetter=r||zL,this.context=i,this._diffModeMultiple="multiple"===a}return e.prototype.add=function(e){return this._add=e,this},e.prototype.update=function(e){return this._update=e,this},e.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},e.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},e.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},e.prototype.remove=function(e){return this._remove=e,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var e=this._old,t=this._new,n={},r=Array(e.length),i=Array(t.length);this._initIndexMap(e,null,r,"_oldKeyGetter"),this._initIndexMap(t,n,i,"_newKeyGetter");for(var a=0;a<e.length;a++){var s=r[a],u=n[s],c=zR(u);if(c>1){var h=u.shift();1===u.length&&(n[s]=u[0]),this._update&&this._update(h,a)}else 1===c?(n[s]=null,this._update&&this._update(u,a)):this._remove&&this._remove(a)}this._performRestAdd(i,n)},e.prototype._executeMultiple=function(){var e=this._old,t=this._new,n={},r={},i=[],a=[];this._initIndexMap(e,n,i,"_oldKeyGetter"),this._initIndexMap(t,r,a,"_newKeyGetter");for(var s=0;s<i.length;s++){var u=i[s],c=n[u],h=r[u],p=zR(c),f=zR(h);if(p>1&&1===f)this._updateManyToOne&&this._updateManyToOne(h,c),r[u]=null;else if(1===p&&f>1)this._updateOneToMany&&this._updateOneToMany(h,c),r[u]=null;else if(1===p&&1===f)this._update&&this._update(h,c),r[u]=null;else if(p>1&&f>1)this._updateManyToMany&&this._updateManyToMany(h,c),r[u]=null;else if(p>1)for(var v=0;v<p;v++)this._remove&&this._remove(c[v]);else this._remove&&this._remove(c)}this._performRestAdd(a,r)},e.prototype._performRestAdd=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[r],a=zR(i);if(a>1)for(var s=0;s<a;s++)this._add&&this._add(i[s]);else 1===a&&this._add&&this._add(i);t[r]=null}},e.prototype._initIndexMap=function(e,t,n,r){for(var i=this._diffModeMultiple,a=0;a<e.length;a++){var s="_ec_"+this[r](e[a],a);if(!i&&(n[a]=s),!!t){var u=t[s],c=zR(u);0===c?(t[s]=a,i&&n.push(s)):1===c?t[s]=[u,a]:u.push(a)}}},e}(),zk=function(){function e(e,t){this._encode=e,this._schema=t}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return!this._cachedDimNames&&(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function zB(e,t){return!e.hasOwnProperty(t)&&(e[t]=[]),e[t]}function zN(e){return"category"===e?"ordinal":"time"===e?"time":"float"}let zF=function(e){this.otherDims={},null!=e&&Mf(this,e)};var zz=Is(),zU={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},zH=function(){function e(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(e){if(this._dimOmitted=e,!!e)!this._dimNameMap&&(this._dimNameMap=zW(this.source))},e.prototype.getSourceDimensionIndex=function(e){return MV(this._dimNameMap.get(e),-1)},e.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},e.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=Og(this.source),n=!function(e){return e>30}(e),r="",i=[],a=0,s=0;a<e;a++){var u=void 0,c=void 0,h=void 0,p=this.dimensions[s];if(p&&p.storeDimIndex===a)u=t?p.name:null,c=p.type,h=p.ordinalMeta,s++;else{var f=this.getSourceDimension(a);f&&(u=t?f.name:null,c=f.type)}i.push({property:u,type:c,ordinalMeta:h}),t&&null!=u&&(!p||!p.isCalculationCoord)&&(r+=n?u.replace(/\`/g,"`1").replace(/\$/g,"`2"):u),r+="$",r+=zU[c]||"f",h&&(r+=h.uid),r+="$"}var v=this.source;return{dimensions:i,hash:[v.seriesLayoutBy,v.startIndex,r].join("$$")}},e.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,n=0;t<this._fullDimCount;t++){var r=void 0,i=this.dimensions[n];if(i&&i.storeDimIndex===t)!i.isCalculationCoord&&(r=i.name),n++;else{var a=this.getSourceDimension(t);a&&(r=a.name)}e.push(r)}return e},e.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function zG(e){return e instanceof zH}function zV(e){for(var t=M1(),n=0;n<(e||[]).length;n++){var r=e[n],i=MO(r)?r.name:r;null!=i&&null==t.get(i)&&t.set(i,n)}return t}function zW(e){var t=zz(e);return t.dimNameMap||(t.dimNameMap=zV(e.dimensionsDefine))}function zj(e){return e>30}var zX=MO,zY=MS,zJ="undefined"==typeof Int32Array?Array:Int32Array,zZ=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],zq=["_approximateExtent"];let zK=function(){function e(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var n,r=!1;zG(e)?(n=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(r=!0,n=e),n=n||["x","y"];for(var i={},a=[],s={},u=!1,c={},h=0;h<n.length;h++){var p=n[h],f=MP(p)?new zF({name:p}):p instanceof zF?p:new zF(p),v=f.name;f.type=f.type||"float",!f.coordDim&&(f.coordDim=v,f.coordDimIndex=0);var y=f.otherDims=f.otherDims||{};a.push(v),i[v]=f,null!=c[v]&&(u=!0),f.createInvertedIndices&&(s[v]=[]),0===y.itemName&&(this._nameDimIdx=h),0===y.itemId&&(this._idDimIdx=h);r&&(f.storeDimIndex=h)}if(this.dimensions=a,this._dimInfos=i,this._initGetDimensionInfo(u),this.hostModel=t,this._invertedIndicesMap=s,this._dimOmitted){var _=this._dimIdxToName=M1();Mb(a,function(e){_.set(i[e].storeDimIndex,e)})}}return e.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(null==t)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var n=this._dimIdxToName.get(t);if(null!=n)return n;var r=this._schema.getSourceDimension(t);if(r)return r.name},e.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(null!=t)return t;if(null==e)return -1;var n=this._getDimInfo(e);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},e.prototype._recognizeDimIndex=function(e){if(ML(e)||null!=e&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||0>this._schema.getSourceDimensionIndex(e)))return+e},e.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},e.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},e.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(e){return t.hasOwnProperty(e)?t[e]:void 0}:function(e){return t[e]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(e,t){var n=this._dimSummary;if(null==t)return n.encodeFirstDimNotExtra[e];var r=n.encode[e];return r?r[t]:null},e.prototype.mapDimensionsAll=function(e){return(this._dimSummary.encode[e]||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(e,t,n){var r,i,a,s,u,c,h,p,f,v,y,_,x,b=this;if(e instanceof O8&&(x=e),!x){var S=this.dimensions,w=Ou(e)||Mx(e)?new Om(e,S.length):e;x=new O8;var M=zY(S,function(e){return{type:b._dimInfos[e].type,property:e}});x.initData(w,M,n)}this._store=x,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,x.count()),this._dimSummary=(r=this,i=this._schema,s=(a={}).encode={},u=M1(),c=[],h=[],p={},Mb(r.dimensions,function(e){var t=r.getDimensionInfo(e),n=t.coordDim;if(n){var i=t.coordDimIndex;zB(s,n)[i]=e,!t.isExtraCoord&&(u.set(n,1),function(e){return!("ordinal"===e||"time"===e)}(t.type)&&(c[0]=e),zB(p,n)[i]=r.getDimensionIndex(t.name)),t.defaultTooltip&&h.push(e)}Lb.each(function(e,n){var r=zB(s,n),i=t.otherDims[n];null!=i&&!1!==i&&(r[i]=t.name)})}),f=[],v={},u.each(function(e,t){var n=s[t];v[t]=n[0],f=f.concat(n)}),a.dataDimsOnCoord=f,a.dataDimIndicesOnCoord=MS(f,function(e){return r.getDimensionInfo(e).storeDimIndex}),a.encodeFirstDimNotExtra=v,(y=s.label)&&y.length&&(c=y.slice()),(_=s.tooltip)&&_.length?h=_.slice():!h.length&&(h=c.slice()),s.defaultedLabel=c,s.defaultedTooltip=h,a.userOutput=new zk(p,i),a),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},e.prototype.appendValues=function(e,t){var n=this._store.appendValues(e,t.length),r=n.start,i=n.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var s=r;s<i;s++){var u=s-r;this._nameList[s]=t[u],a&&ti(this,s)}},e.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,n=0;n<t.length;n++){var r=this._dimInfos[t[n]];r.ordinalMeta&&e.collectOrdinalMeta(r.storeDimIndex,r.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return null==this._idDimIdx&&e.getSource().sourceFormat!==LC&&!e.fillStorage},e.prototype._doInit=function(e,t){if(!(e>=t)){var n=this._store.getProvider();this._updateOrdinalMeta();var r=this._nameList,i=this._idList;if(n.getSource().sourceFormat===LS&&!n.pure){for(var a=[],s=e;s<t;s++){var u,c=n.getItem(s,a);if(!this.hasItemOption&&MO(u=c)&&!(u instanceof Array))this.hasItemOption=!0;if(c){var h=c.name;null==r[s]&&null!=h&&(r[s]=Ir(h,null));var p=c.id;null==i[s]&&null!=p&&(i[s]=Ir(p,null))}}}if(this._shouldMakeIdFromName())for(var s=e;s<t;s++)ti(this,s);e8(this)}},e.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},e.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},e.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},e.prototype.setCalculationInfo=function(e,t){zX(e)?Mf(this._calculationInfo,e):this._calculationInfo[e]=t},e.prototype.getName=function(e){var t=this.getRawIndex(e),n=this._nameList[t];return null==n&&null!=this._nameDimIdx&&(n=te(this,this._nameDimIdx,t)),null==n&&(n=""),n},e.prototype._getCategory=function(e,t){var n=this._store.get(e,t),r=this._store.getOrdinalMeta(e);return r?r.categories[n]:n},e.prototype.getId=function(e){return e7(this,this.getRawIndex(e))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(e,t){var n=this._store,r=this._dimInfos[e];if(r)return n.get(r.storeDimIndex,t)},e.prototype.getByRawIndex=function(e,t){var n=this._store,r=this._dimInfos[e];if(r)return n.getByRawIndex(r.storeDimIndex,t)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},e.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},e.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},e.prototype.getValues=function(e,t){var n=this,r=this._store;return MI(e)?r.getValues(zY(e,function(e){return n._getStoreDimIndex(e)}),t):r.getValues(e)},e.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,n=0,r=t.length;n<r;n++)if(isNaN(this._store.get(t[n],e)))return!1;return!0},e.prototype.indexOfName=function(e){for(var t=0,n=this._store.count();t<n;t++)if(this.getName(t)===e)return t;return -1},e.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},e.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},e.prototype.rawIndexOf=function(e,t){var n=e&&this._invertedIndicesMap[e],r=n[t];return null==r||isNaN(r)?-1:r},e.prototype.indicesOfNearest=function(e,t,n){return this._store.indicesOfNearest(this._getStoreDimIndex(e),t,n)},e.prototype.each=function(e,t,n){MD(e)&&(n=t,t=e,e=[]);var r=n||this,i=zY(tt(e),this._getStoreDimIndex,this);this._store.each(i,r?MT(t,r):t)},e.prototype.filterSelf=function(e,t,n){MD(e)&&(n=t,t=e,e=[]);var r=n||this,i=zY(tt(e),this._getStoreDimIndex,this);return this._store=this._store.filter(i,r?MT(t,r):t),this},e.prototype.selectRange=function(e){var t=this,n={},r=MC(e),i=[];return Mb(r,function(r){var a=t._getStoreDimIndex(r);n[a]=e[r],i.push(a)}),this._store=this._store.selectRange(n),this},e.prototype.mapArray=function(e,t,n){MD(e)&&(n=t,t=e,e=[]),n=n||this;var r=[];return this.each(e,function(){r.push(t&&t.apply(this,arguments))},n),r},e.prototype.map=function(e,t,n,r){var i=n||r||this,a=zY(tt(e),this._getStoreDimIndex,this),s=tr(this);return s._store=this._store.map(a,i?MT(t,i):t),s},e.prototype.modify=function(e,t,n,r){var i=n||r||this,a=zY(tt(e),this._getStoreDimIndex,this);this._store.modify(a,i?MT(t,i):t)},e.prototype.downSample=function(e,t,n,r){var i=tr(this);return i._store=this._store.downSample(this._getStoreDimIndex(e),t,n,r),i},e.prototype.lttbDownSample=function(e,t){var n=tr(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),n},e.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},e.prototype.getItemModel=function(e){var t=this.hostModel;return new Rb(this.getRawDataItem(e),t,t&&t.ecModel)},e.prototype.diff=function(e){var t=this;return new zO(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(t){return e7(e,t)},function(e){return e7(t,e)})},e.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},e.prototype.setVisual=function(e,t){this._visual=this._visual||{},zX(e)?Mf(this._visual,e):this._visual[e]=t},e.prototype.getItemVisual=function(e,t){var n=this._itemVisuals[e],r=n&&n[t];return null==r?this.getVisual(t):r},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(e,t){var n=this._itemVisuals,r=n[e];!r&&(r=n[e]={});var i=r[t];return null==i&&(MI(i=this.getVisual(t))?i=i.slice():zX(i)&&(i=Mf({},i)),r[t]=i),i},e.prototype.setItemVisual=function(e,t,n){var r=this._itemVisuals[e]||{};this._itemVisuals[e]=r,zX(t)?Mf(r,t):r[t]=n},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(e,t){zX(e)?Mf(this._layout,e):this._layout[e]=t},e.prototype.getLayout=function(e){return this._layout[e]},e.prototype.getItemLayout=function(e){return this._itemLayouts[e]},e.prototype.setItemLayout=function(e,t,n){this._itemLayouts[e]=n?Mf(this._itemLayouts[e]||{},t):t},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(e,t){Pe(this.hostModel&&this.hostModel.seriesIndex,this.dataType,e,t),this._graphicEls[e]=t},e.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},e.prototype.eachItemGraphicEl=function(e,t){Mb(this._graphicEls,function(n,r){n&&e&&e.call(t,n,r)})},e.prototype.cloneShallow=function(t){return!t&&(t=new e(this._schema?this._schema:zY(this.dimensions,this._getDimInfo,this),this.hostModel)),tn(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(e,t){var n=this[e];if(!!MD(n))this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var e=n.apply(this,arguments);return t.apply(this,[e].concat(Mj(arguments)))}},e.internalField=void(e8=function(e){var t=e._invertedIndicesMap;Mb(t,function(n,r){var i=e._dimInfos[r],a=i.ordinalMeta,s=e._store;if(a){n=t[r]=new zJ(a.categories.length);for(var u=0;u<n.length;u++)n[u]=-1;for(var u=0;u<s.count();u++)n[s.get(i.storeDimIndex,u)]=u}})},te=function(e,t,n){return Ir(e._getCategory(t,n),null)},e7=function(e,t){var n=e._idList[t];return null==n&&null!=e._idDimIdx&&(n=te(e,e._idDimIdx,t)),null==n&&(n="e\0\0"+t),n},tt=function(e){return!MI(e)&&(e=null!=e?[e]:[]),e},tr=function(t){var n=new e(t._schema?t._schema:zY(t.dimensions,t._getDimInfo,t),t.hostModel);return tn(n,t),n},tn=function(e,t){Mb(zZ.concat(t.__wrappedMethods||[]),function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e.__wrappedMethods=t.__wrappedMethods,Mb(zq,function(n){e[n]=Mh(t[n])}),e._calculationInfo=Mf({},t._calculationInfo)},ti=function(e,t){var n=e._nameList,r=e._idList,i=e._nameDimIdx,a=e._idDimIdx,s=n[t],u=r[t];if(null==s&&null!=i&&(n[t]=s=te(e,i,t)),null==u&&null!=a&&(r[t]=u=te(e,a,t)),null==u&&null!=s){var c=e._nameRepeatCount,h=c[s]=(c[s]||0)+1;u=s,h>1&&(u+="__ec__"+h),r[t]=u}}),e}();function zQ(e,t){return z$(e,t).dimensions}function z$(e,t){!Ou(e)&&(e=Oh(e));var n=(t=t||{}).coordDimensions||[],r=t.dimensionsDefine||e.dimensionsDefine||[],i=M1(),a=[],s=function(e,t,n,r){var i=Math.max(e.dimensionsDetectedCount||1,t.length,n.length,r||0);return Mb(t,function(e){var t;MO(e)&&(t=e.dimsDef)&&(i=Math.max(i,t.length))}),i}(e,n,r,t.dimensionsCount),u=t.canOmitUnusedDimensions&&s>30,c=r===e.dimensionsDefine,h=c?zW(e):zV(r),p=t.encodeDefine;!p&&t.encodeDefaulter&&(p=t.encodeDefaulter(e,s));for(var f=M1(p),v=new O2(s),y=0;y<v.length;y++)v[y]=-1;function _(e){var t=v[e];if(t<0){var n=r[e],i=MO(n)?n:{name:n},s=new zF,u=i.name;null!=u&&null!=h.get(u)&&(s.name=s.displayName=u),null!=i.type&&(s.type=i.type),null!=i.displayName&&(s.displayName=i.displayName);var c=a.length;return v[e]=c,s.storeDimIndex=e,a.push(s),s}return a[t]}if(!u)for(var y=0;y<s;y++)_(y);f.each(function(e,t){var n=E6(e).slice();if(1===n.length&&!MP(n[0])&&n[0]<0){f.set(t,!1);return}var r=f.set(t,[]);Mb(n,function(e,n){var i=MP(e)?h.get(e):e;null!=i&&i<s&&(r[n]=i,b(_(i),t,n))})});var x=0;function b(e,t,n){null!=Lb.get(t)?e.otherDims[t]=n:(e.coordDim=t,e.coordDimIndex=n,i.set(t,!0))}Mb(n,function(e){if(MP(e))t=e,i={};else{t=(i=e).name;var t,n,r,i,a=i.ordinalMeta;i.ordinalMeta=null,(i=Mf({},i)).ordinalMeta=a,n=i.dimsDef,r=i.otherDims,i.name=i.coordDim=i.coordDimIndex=i.dimsDef=i.otherDims=null}var u=f.get(t);if(!1!==u){if(!(u=E6(u)).length)for(var h=0;h<(n&&n.length||1);h++){for(;x<s&&null!=_(x).coordDim;)x++;x<s&&u.push(x++)}Mb(u,function(e,a){var s=_(e);if(c&&null!=i.type&&(s.type=i.type),b(Mg(s,i),t,a),null==s.name&&n){var u=n[a];MO(u)||(u={name:u}),s.name=s.displayName=u.name,s.defaultTooltip=u.defaultTooltip}r&&Mg(s.otherDims,r)})}});var S=t.generateCoord,w=t.generateCoordCount,M=null!=w;w=S?w||1:0;var A=S||"value";function C(e){null==e.name&&(e.name=e.coordDim)}if(u)Mb(a,function(e){C(e)}),a.sort(function(e,t){return e.storeDimIndex-t.storeDimIndex});else for(var T=0;T<s;T++){var I=_(T);null==I.coordDim&&(I.coordDim=function(e,t,n){if(n||t.hasKey(e)){for(var r=0;t.hasKey(e+r);)r++;e+=r}return t.set(e,!0),e}(A,i,M),I.coordDimIndex=0,(!S||w<=0)&&(I.isExtraCoord=!0),w--),C(I),null==I.type&&(LO(e,T)===LI.Must||I.isExtraCoord&&(null!=I.otherDims.itemName||null!=I.otherDims.seriesName))&&(I.type="ordinal")}return function(e){for(var t=M1(),n=0;n<e.length;n++){var r=e[n],i=r.name,a=t.get(i)||0;a>0&&(r.name=i+(a-1)),a++,t.set(i,a)}}(a),new zH({source:e,dimensions:a,fullDimensionCount:s,dimensionOmitted:u})}var z0=function(e){this.coordSysDims=[],this.axisMap=M1(),this.categoryAxisMap=M1(),this.coordSysName=e},z1={cartesian2d:function(e,t,n,r){var i=e.getReferringComponents("xAxis",Ih).models[0],a=e.getReferringComponents("yAxis",Ih).models[0];t.coordSysDims=["x","y"],n.set("x",i),n.set("y",a),z2(i)&&(r.set("x",i),t.firstCategoryDimIndex=0),z2(a)&&(r.set("y",a),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,n,r){var i=e.getReferringComponents("singleAxis",Ih).models[0];t.coordSysDims=["single"],n.set("single",i),z2(i)&&(r.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,n,r){var i=e.getReferringComponents("polar",Ih).models[0],a=i.findAxisModel("radiusAxis"),s=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],n.set("radius",a),n.set("angle",s),z2(a)&&(r.set("radius",a),t.firstCategoryDimIndex=0),z2(s)&&(r.set("angle",s),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},geo:function(e,t,n,r){t.coordSysDims=["lng","lat"]},parallel:function(e,t,n,r){var i=e.ecModel,a=i.getComponent("parallel",e.get("parallelIndex")),s=t.coordSysDims=a.dimensions.slice();Mb(a.parallelAxisIndex,function(e,a){var u=i.getComponent("parallelAxis",e),c=s[a];n.set(c,u),z2(u)&&(r.set(c,u),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=a))})}};function z2(e){return"category"===e.get("type")}function z3(e,t,n){var r,i,a,s,u,c,h,p=(n=n||{}).byIndex,f=n.stackedCoordDimension;(function(e){return!zG(e.schema)})(t)?r=t:(r=(i=t.schema).dimensions,a=t.store);var v=!!(e&&e.get("stack"));if(Mb(r,function(e,t){MP(e)&&(r[t]=e={name:e}),v&&!e.isExtraCoord&&(!p&&!s&&e.ordinalMeta&&(s=e),!u&&"ordinal"!==e.type&&"time"!==e.type&&(!f||f===e.coordDim)&&(u=e))}),u&&!p&&!s&&(p=!0),u){c="__\0ecstackresult_"+e.id,h="__\0ecstackedover_"+e.id,s&&(s.createInvertedIndices=!0);var y=u.coordDim,_=u.type,x=0;Mb(r,function(e){e.coordDim===y&&x++});var b={name:c,coordDim:y,coordDimIndex:x,type:_,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:r.length},S={name:h,coordDim:h,coordDimIndex:x+1,type:_,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:r.length+1};i?(a&&(b.storeDimIndex=a.ensureCalculationDimension(h,_),S.storeDimIndex=a.ensureCalculationDimension(c,_)),i.appendCalculationDimension(b),i.appendCalculationDimension(S)):(r.push(b),r.push(S))}return{stackedDimension:u&&u.name,stackedByDimension:s&&s.name,isStackedByIndex:p,stackedOverDimension:h,stackResultDimension:c}}function z5(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function z4(e,t){return z5(e,t)?e.getCalculationInfo("stackResultDimension"):t}let z6=function(e,t,n){n=n||{};var r,i,a,s,u,c,h,p,f,v,y,_=t.getSourceManager(),x=!1;e?(x=!0,y=Oh(e)):x=(y=_.getSource()).sourceFormat===LS;var b=function(e){var t=e.get("coordinateSystem"),n=new z0(t),r=z1[t];if(r)return r(e,n,n.axisMap,n.categoryAxisMap),n}(t);var S=(r=t,i=b,s=r.get("coordinateSystem"),u=Lq.get(s),i&&i.coordSysDims&&(a=MS(i.coordSysDims,function(e){var t={name:e},n=i.axisMap.get(e);if(n){var r=n.get("type");t.type=zN(r)}return t})),!a&&(a=u&&(u.getDimensionsInfo?u.getDimensionsInfo():u.dimensions.slice())||["x","y"]),a),w=n.useEncodeDefaulter,M=MD(w)?w:w?ME(LP,S,t):null,A=z$(y,{coordDimensions:S,generateCoord:n.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:M,canOmitUnusedDimensions:!x});var C=(c=A.dimensions,h=n.createInvertedIndices,(p=b)&&Mb(c,function(e,t){var n=e.coordDim,r=p.categoryAxisMap.get(n);r&&(null==f&&(f=t),e.ordinalMeta=r.getOrdinalMeta(),h&&(e.createInvertedIndices=!0)),null!=e.otherDims.itemName&&(v=!0)}),!v&&null!=f&&(c[f].otherDims.itemName=0),f),T=x?null:_.getSharedDataStore(A),I=z3(t,{schema:A,store:T}),D=new zK(A,t);D.setCalculationInfo(I);var P=null!=C&&function(e){if(e.sourceFormat===LS)return!MI(E7(function(e){for(var t=0;t<e.length&&null==e[t];)t++;return e[t]}(e.data||[])))}(y)?function(e,t,n,r){return r===C?n:this.defaultDimValueGetter(e,t,n,r)}:null;return D.hasItemOption=!1,D.initData(x?y:T,null,P),D};var z9=function(){function e(e){this._setting=e||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(e){return this._setting[e]},e.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},e.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(e,t){var n=this._extent;!isNaN(e)&&(n[0]=e),!isNaN(t)&&(n[1]=t)},e.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(e){this._isBlank=e},e}();IA(z9);var z8=0,z7=function(){function e(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++z8}return e.createByAxisModel=function(t){var n=t.option,r=n.data,i=r&&MS(r,Ue);return new e({categories:i,needCollect:!i,deduplication:!1!==n.dedplication})},e.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},e.prototype.parseAndCollect=function(e){var t,n=this._needCollect;if(!MP(e)&&!n)return e;if(n&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var r=this._getOrCreateMap();return null==(t=r.get(e))&&(n?(t=this.categories.length,this.categories[t]=e,r.set(e,t)):t=NaN),t},e.prototype._getOrCreateMap=function(){return this._map||(this._map=M1(this.categories))},e}();function Ue(e){return MO(e)&&null!=e.value?e.value:e+""}function Ut(e){return"interval"===e.type||"log"===e.type}function Un(e){var t=Math.pow(10,EZ(e)),n=e/t;return n?2===n?n=3:3===n?n=5:n*=2:n=1,EB(n*t)}function Ur(e){return EF(e)+2}function Ui(e,t,n){e[t]=Math.max(Math.min(e[t],n[1]),n[0])}function Ua(e,t){return e>=t[0]&&e<=t[1]}function Uo(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function Us(e,t){return e*(t[1]-t[0])+t[0]}var Ul=function(e){function t(t){var n=e.call(this,t)||this;n.type="ordinal";var r=n.getSetting("ordinalMeta");return!r&&(r=new z7({})),MI(r)&&(r=new z7({categories:MS(r,function(e){return MO(e)?e.value:e})})),n._ordinalMeta=r,n._extent=n.getSetting("extent")||[0,r.categories.length-1],n}return wJ(t,e),t.prototype.parse=function(e){return null==e?NaN:MP(e)?this._ordinalMeta.getOrdinal(e):Math.round(e)},t.prototype.contain=function(e){return Ua(e=this.parse(e),this._extent)&&null!=this._ordinalMeta.categories[e]},t.prototype.normalize=function(e){return Uo(e=this._getTickNumber(this.parse(e)),this._extent)},t.prototype.scale=function(e){return e=Math.round(Us(e,this._extent)),this.getRawOrdinalNumber(e)},t.prototype.getTicks=function(){for(var e=[],t=this._extent,n=t[0];n<=t[1];)e.push({value:n}),n++;return e},t.prototype.getMinorTicks=function(e){},t.prototype.setSortInfo=function(e){if(null==e){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var t=e.ordinalNumbers,n=this._ordinalNumbersByTick=[],r=this._ticksByOrdinalNumber=[],i=0,a=this._ordinalMeta.categories.length,s=Math.min(a,t.length);i<s;++i){var u=t[i];n[i]=u,r[u]=i}for(var c=0;i<a;++i){for(;null!=r[c];)c++;n.push(c),r[c]=i}},t.prototype._getTickNumber=function(e){var t=this._ticksByOrdinalNumber;return t&&e>=0&&e<t.length?t[e]:e},t.prototype.getRawOrdinalNumber=function(e){var t=this._ordinalNumbersByTick;return t&&e>=0&&e<t.length?t[e]:e},t.prototype.getLabel=function(e){if(!this.isBlank()){var t=this.getRawOrdinalNumber(e.value),n=this._ordinalMeta.categories[t];return null==n?"":n+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},t.prototype.isInExtentRange=function(e){return e=this._getTickNumber(e),this._extent[0]<=e&&this._extent[1]>=e},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(z9);z9.registerClass(Ul);var Uu=EB,Uc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return wJ(t,e),t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return Ua(e,this._extent)},t.prototype.normalize=function(e){return Uo(e,this._extent)},t.prototype.scale=function(e){return Us(e,this._extent)},t.prototype.setExtent=function(e,t){var n=this._extent;!isNaN(e)&&(n[0]=parseFloat(e)),!isNaN(t)&&(n[1]=parseFloat(t))},t.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1]),this.setExtent(t[0],t[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=EF(e)+2},t.prototype.getTicks=function(e){var t=this._interval,n=this._extent,r=this._niceExtent,i=this._intervalPrecision,a=[];if(!t)return a;n[0]<r[0]&&(e?a.push({value:Uu(r[0]-t,i)}):a.push({value:n[0]}));for(var s=r[0];s<=r[1]&&(a.push({value:s}),(s=Uu(s+t,i))!==a[a.length-1].value);){;if(a.length>1e4)return[]}var u=a.length?a[a.length-1].value:r[1];return n[1]>u&&(e?a.push({value:Uu(u+t,i)}):a.push({value:n[1]})),a},t.prototype.getMinorTicks=function(e){for(var t=this.getTicks(!0),n=[],r=this.getExtent(),i=1;i<t.length;i++){for(var a=t[i],s=t[i-1],u=0,c=[],h=(a.value-s.value)/e;u<e-1;){var p=Uu(s.value+(u+1)*h);p>r[0]&&p<r[1]&&c.push(p),u++}n.push(c)}return n},t.prototype.getLabel=function(e,t){if(null==e)return"";var n=t&&t.precision;return null==n?n=EF(e.value)||0:"auto"===n&&(n=this._intervalPrecision),R3(Uu(e.value,n,!0))},t.prototype.calcNiceTicks=function(e,t,n){e=e||5;var r,i,a,s,u,c,h,p,f=this._extent,v=f[1]-f[0];if(!!isFinite(v)){v<0&&(v=-v,f.reverse());var y=(r=f,i=e,a=t,s=n,u={},c=r[1]-r[0],h=u.interval=Eq(c/i,!0),null!=a&&h<a&&(h=u.interval=a),null!=s&&h>s&&(h=u.interval=s),p=u.intervalPrecision=function(e){return EF(e)+2}(h),function(e,t){isFinite(e[0])||(e[0]=t[0]),isFinite(e[1])||(e[1]=t[1]),Ui(e,0,t),Ui(e,1,t),e[0]>e[1]&&(e[0]=e[1])}(u.niceTickExtent=[EB(Math.ceil(r[0]/h)*h,p),EB(Math.floor(r[1]/h)*h,p)],r),u);this._intervalPrecision=y.intervalPrecision,this._interval=y.interval,this._niceExtent=y.niceTickExtent}},t.prototype.calcNiceExtent=function(e){var t=this._extent;if(t[0]===t[1]){if(0!==t[0]){var n=Math.abs(t[0]);e.fixMax||(t[1]+=n/2),t[0]-=n/2}else t[1]=1}!isFinite(t[1]-t[0])&&(t[0]=0,t[1]=1),this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval);var r=this._interval;!e.fixMin&&(t[0]=Uu(Math.floor(t[0]/r)*r)),!e.fixMax&&(t[1]=Uu(Math.ceil(t[1]/r)*r))},t.prototype.setNiceExtent=function(e,t){this._niceExtent=[e,t]},t.type="interval",t}(z9);z9.registerClass(Uc);var Uh="undefined"!=typeof Float32Array,Ud=Uh?Float32Array:Array;function Up(e){return MI(e)?Uh?new Float32Array(e):e:new Ud(e)}var Uf="__ec_stack_";function Ug(e){return e.get("stack")||Uf+e.seriesIndex}function Um(e){return e.dim+e.index}function Uv(e,t){var n=[];return t.eachSeriesByType(e,function(e){US(e)&&n.push(e)}),n}function Uy(e){var t=function(e){var t={};Mb(e,function(e){var n=e.coordinateSystem.getBaseAxis();if("time"===n.type||"value"===n.type)for(var r=e.getData(),i=n.dim+"_"+n.index,a=r.getDimensionIndex(r.mapDimension(n.dim)),s=r.getStore(),u=0,c=s.count();u<c;++u){var h=s.get(a,u);t[i]?t[i].push(h):t[i]=[h]}});var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];if(i){i.sort(function(e,t){return e-t});for(var a=null,s=1;s<i.length;++s){var u=i[s]-i[s-1];u>0&&(a=null===a?u:Math.min(a,u))}n[r]=a}}return n}(e),n=[];return Mb(e,function(e){var r,i=e.coordinateSystem.getBaseAxis(),a=i.getExtent();if("category"===i.type)r=i.getBandWidth();else if("value"===i.type||"time"===i.type){var s=t[i.dim+"_"+i.index],u=Math.abs(a[1]-a[0]),c=i.scale.getExtent(),h=Math.abs(c[1]-c[0]);r=s?u/h*s:u}else{var p=e.getData();r=Math.abs(a[1]-a[0])/p.count()}var f=Ek(e.get("barWidth"),r),v=Ek(e.get("barMaxWidth"),r),y=Ek(e.get("barMinWidth")||(Uw(e)?.5:1),r),_=e.get("barGap"),x=e.get("barCategoryGap");n.push({bandWidth:r,barWidth:f,barMaxWidth:v,barMinWidth:y,barGap:_,barCategoryGap:x,axisKey:Um(i),stackId:Ug(e)})}),U_(n)}function U_(e){var t={};Mb(e,function(e,n){var r=e.axisKey,i=e.bandWidth,a=t[r]||{bandWidth:i,remainedWidth:i,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},s=a.stacks;t[r]=a;var u=e.stackId;!s[u]&&a.autoWidthCount++,s[u]=s[u]||{width:0,maxWidth:0};var c=e.barWidth;c&&!s[u].width&&(s[u].width=c,c=Math.min(a.remainedWidth,c),a.remainedWidth-=c);var h=e.barMaxWidth;h&&(s[u].maxWidth=h);var p=e.barMinWidth;p&&(s[u].minWidth=p);var f=e.barGap;null!=f&&(a.gap=f);var v=e.barCategoryGap;null!=v&&(a.categoryGap=v)});var n={};return Mb(t,function(e,t){n[t]={};var r,i=e.stacks,a=e.bandWidth,s=e.categoryGap;null==s&&(s=Math.max(35-4*MC(i).length,15)+"%");var u=Ek(s,a),c=Ek(e.gap,1),h=e.remainedWidth,p=e.autoWidthCount,f=(h-u)/(p+(p-1)*c);f=Math.max(f,0),Mb(i,function(e){var t=e.maxWidth,n=e.minWidth;if(e.width){var r=e.width;t&&(r=Math.min(r,t)),n&&(r=Math.max(r,n)),e.width=r,h-=r+c*r,p--}else{var r=f;t&&t<r&&(r=Math.min(t,h)),n&&n>r&&(r=n),r!==f&&(e.width=r,h-=r+c*r,p--)}}),f=Math.max(f=(h-u)/(p+(p-1)*c),0);var v=0;Mb(i,function(e,t){!e.width&&(e.width=f),r=e,v+=e.width*(1+c)}),r&&(v-=r.width*c);var y=-v/2;Mb(i,function(e,r){n[t][r]=n[t][r]||{bandWidth:a,offset:y,width:e.width},y+=e.width*(1+c)})}),n}function Ux(e,t){var n=Uv(e,t),r=Uy(n);Mb(n,function(e){var t=e.getData(),n=e.coordinateSystem.getBaseAxis(),i=Ug(e),a=r[Um(n)][i],s=a.offset,u=a.width;t.setLayout({bandWidth:a.bandWidth,offset:s,size:u})})}function Ub(e){return{seriesType:e,plan:kL(),reset:function(e){if(!!US(e)){var t=e.getData(),n=e.coordinateSystem,r=n.getBaseAxis(),i=n.getOtherAxis(r),a=t.getDimensionIndex(t.mapDimension(i.dim)),s=t.getDimensionIndex(t.mapDimension(r.dim)),u=e.get("showBackground",!0),c=t.mapDimension(i.dim),h=t.getCalculationInfo("stackResultDimension"),p=z5(t,c)&&!!t.getCalculationInfo("stackedOnSeries"),f=i.isHorizontal(),v=function(e,t){var n=t.model.get("startValue");return!n&&(n=0),t.toGlobalCoord(t.dataToCoord("log"===t.type?n>0?n:1:n))}(r,i),y=Uw(e),_=e.get("barMinHeight")||0,x=h&&t.getDimensionIndex(h),b=t.getLayout("size"),S=t.getLayout("offset");return{progress:function(e,t){for(var r,i=e.count,c=y&&Up(3*i),h=y&&u&&Up(3*i),w=y&&Up(i),M=n.master.getRect(),A=f?M.width:M.height,C=t.getStore(),T=0;null!=(r=e.next());){var I=C.get(p?x:a,r),D=C.get(s,r),P=v,R=void 0;p&&(R=+I-C.get(a,r));var L=void 0,O=void 0,k=void 0,B=void 0;if(f){var N=n.dataToPoint([I,D]);if(p){var F=n.dataToPoint([R,D]);P=F[0]}L=P,O=N[1]+S,k=N[0]-P,B=b,Math.abs(k)<_&&(k=(k<0?-1:1)*_)}else{var N=n.dataToPoint([D,I]);if(p){var F=n.dataToPoint([D,R]);P=F[1]}L=N[0]+S,O=P,k=b,Math.abs(B=N[1]-P)<_&&(B=(B<=0?-1:1)*_)}y?(c[T]=L,c[T+1]=O,c[T+2]=f?k:B,h&&(h[T]=f?M.x:L,h[T+1]=f?O:M.y,h[T+2]=A),w[r]=r):t.setItemLayout(r,{x:L,y:O,width:k,height:B}),T+=3}y&&t.setLayout({largePoints:c,largeDataIndices:w,largeBackgroundPoints:h,valueAxisHorizontal:f})}}}}}}function US(e){return e.coordinateSystem&&"cartesian2d"===e.coordinateSystem.type}function Uw(e){return e.pipelineContext&&e.pipelineContext.large}var UM=function(e,t,n,r){for(;n<r;){var i=n+r>>>1;e[i][1]<t?n=i+1:r=i}return n},UA=function(e){function t(t){var n=e.call(this,t)||this;return n.type="time",n}return wJ(t,e),t.prototype.getLabel=function(e){var t=this.getSetting("useUTC");return RH(e.value,RB[function(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}(RU(this._minLevelUnit))]||RB.second,t,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(e,t,n){var r=this.getSetting("useUTC");return function(e,t,n,r,i){var a=null;if(MP(n))a=n;else if(MD(n))a=n(e.value,t,{level:e.level});else{var s=Mf({},RO);if(e.level>0)for(var u=0;u<RN.length;++u)s[RN[u]]="{primary|"+s[RN[u]]+"}";var c=n?!1===n.inherit?n:Mg(n,s):s,h=RG(e.value,i);if(c[h])a=c[h];else if(c.inherit){for(var p=RF.indexOf(h),u=p-1;u>=0;--u)if(c[h]){a=c[h];break}a=a||s.none}if(MI(a)){var f=null==e.level?0:e.level>=0?e.level:a.length+e.level;f=Math.min(f,a.length-1),a=a[f]}}return RH(new Date(e.value),a,i,r)}(e,t,n,this.getSetting("locale"),r)},t.prototype.getTicks=function(){var e=this._interval,t=this._extent,n=[];if(!e)return n;n.push({value:t[0],level:0});var r=this.getSetting("useUTC"),i=function(e,t,n,r){for(var i=0,a=[],s=[],u=0,c=0,h=0;h<RF.length&&i++<1e4;++h){var p,f=RU(RF[h]);if((p=RF[h])===RU(p)){if(!function(e,i,a){var s=[],u=!i.length;if(!function(e,t,n,r){var i=EY(t),a=EY(n),s=function(e){return RV(i,e,r)===RV(a,e,r)},u=function(){return s("year")},c=function(){return u()&&s("month")},h=function(){return c()&&s("day")},p=function(){return h()&&s("hour")},f=function(){return p()&&s("minute")},v=function(){return f()&&s("second")};switch(e){case"year":return u();case"month":return c();case"day":return h();case"hour":return p();case"minute":return f();case"second":return v();case"millisecond":return v()&&s("millisecond")}}(RU(e),r[0],r[1],n)){u&&(i=[{value:function(e,t,n){var r=new Date(e);switch(RU(t)){case"year":case"month":r[RK(n)](0);case"day":r[RQ(n)](1);case"hour":r[R$(n)](0);case"minute":r[R0(n)](0);case"second":r[R1(n)](0),r[R2(n)](0)}return r.getTime()}(new Date(r[0]),e,n)},{value:r[1]}]);for(var c=0;c<i.length-1;c++){var h,p,f,v,y=i[c].value,_=i[c+1].value;if(y!==_){var x=void 0,b=void 0,S=void 0,w=!1;switch(e){case"year":x=Math.max(1,Math.round(t/RR/365)),b=RW(n),S=n?"setUTCFullYear":"setFullYear";break;case"half-year":case"quarter":case"month":;x=(h=t/(30*RR))>6?6:h>3?3:h>2?2:1,b=Rj(n),S=RK(n);break;case"week":case"half-week":case"day":;f=0,x=(p=t/RR)>16?16:p>7.5?7:p>3.5?4:p>1.5?2:1,b=RX(n),S=RQ(n),w=!0;break;case"half-day":case"quarter-day":case"hour":;x=(v=t/RP)>12?12:v>6?6:v>3.5?4:v>2?2:1,b=RY(n),S=R$(n);break;case"minute":x=UT(t,!0),b=RJ(n),S=R0(n);break;case"second":x=UT(t,!1),b=RZ(n),S=R1(n);break;case"millisecond":x=Eq(t,!0),b=Rq(n),S=R2(n)}!function(e,t,n,i,a,s,u){for(var c=new Date(t),h=t,p=c[i]();h<n&&h<=r[1];)u.push({value:h}),p+=e,c[a](p),h=c.getTime();u.push({value:h,notAdd:!0})}(x,y,_,b,S,0,s),"year"===e&&a.length>1&&0===c&&a.unshift({value:a[0].value-x})}}for(var c=0;c<s.length;c++)a.push(s[c]);}}(RF[h],a[a.length-1]||[],s),f!==(RF[h+1]?RU(RF[h+1]):null)){if(s.length){c=u,s.sort(function(e,t){return e.value-t.value});for(var v=[],y=0;y<s.length;++y){var _=s[y].value;(0===y||s[y-1].value!==_)&&(v.push(s[y]),_>=r[0]&&_<=r[1]&&u++)}var x=(r[1]-r[0])/t;if(u>1.5*x&&c>x/1.5)break;if(a.push(v),u>x||e===RF[h])break}s=[]}}}for(var b=MM(MS(a,function(e){return MM(e,function(e){return e.value>=r[0]&&e.value<=r[1]&&!e.notAdd})}),function(e){return e.length>0}),S=[],w=b.length-1,h=0;h<b.length;++h){for(var M=b[h],A=0;A<M.length;++A)S.push({value:M[A].value,level:w-h})}S.sort(function(e,t){return e.value-t.value});for(var C=[],h=0;h<S.length;++h)(0===h||S[h].value!==S[h-1].value)&&C.push(S[h]);return C}(this._minLevelUnit,this._approxInterval,r,t);return(n=n.concat(i)).push({value:t[1],level:0}),n},t.prototype.calcNiceExtent=function(e){var t=this._extent;if(t[0]===t[1]&&(t[0]-=RR,t[1]+=RR),t[1]===-1/0&&t[0]===1/0){var n=new Date;t[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),t[0]=t[1]-RR}this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval)},t.prototype.calcNiceTicks=function(e,t,n){e=e||10;var r=this._extent,i=r[1]-r[0];this._approxInterval=i/e,null!=t&&this._approxInterval<t&&(this._approxInterval=t),null!=n&&this._approxInterval>n&&(this._approxInterval=n);var a=UC.length,s=Math.min(UM(UC,this._approxInterval,0,a),a-1);this._interval=UC[s][1],this._minLevelUnit=UC[Math.max(s-1,0)][0]},t.prototype.parse=function(e){return ML(e)?e:+EY(e)},t.prototype.contain=function(e){return Ua(this.parse(e),this._extent)},t.prototype.normalize=function(e){return Uo(this.parse(e),this._extent)},t.prototype.scale=function(e){return Us(e,this._extent)},t.type="time",t}(Uc),UC=[["second",1e3],["minute",RD],["hour",RP],["quarter-day",6*RP],["half-day",12*RP],["day",1.2*RR],["half-week",3.5*RR],["week",7*RR],["month",31*RR],["quarter",95*RR],["half-year",RL/2],["year",RL]];function UT(e,t){return(e/=t?RD:1e3)>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}z9.registerClass(UA);var UE=z9.prototype,UI=Uc.prototype,UD=Math.floor,UP=Math.ceil,UR=Math.pow,UL=Math.log,UO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new Uc,t._interval=0,t}return wJ(t,e),t.prototype.getTicks=function(e){var t=this._originalScale,n=this._extent,r=t.getExtent();return MS(UI.getTicks.call(this,e),function(e){var t=e.value,i=EB(UR(this.base,t));return i=t===n[0]&&this._fixMin?function(e,t){return EB(e,EF(t))}(i,r[0]):i,{value:i=t===n[1]&&this._fixMax?function(e,t){return EB(e,EF(t))}(i,r[1]):i}},this)},t.prototype.setExtent=function(e,t){var n=UL(this.base);e=UL(Math.max(0,e))/n,t=UL(Math.max(0,t))/n,UI.setExtent.call(this,e,t)},t.prototype.getExtent=function(){var e=this.base,t=UE.getExtent.call(this);t[0]=UR(e,t[0]),t[1]=UR(e,t[1]);var n=this._originalScale.getExtent();return this._fixMin&&(t[0]=function(e,t){return EB(e,EF(t))}(t[0],n[0])),this._fixMax&&(t[1]=function(e,t){return EB(e,EF(t))}(t[1],n[1])),t},t.prototype.unionExtent=function(e){this._originalScale.unionExtent(e);var t=this.base;e[0]=UL(e[0])/UL(t),e[1]=UL(e[1])/UL(t),UE.unionExtent.call(this,e)},t.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},t.prototype.calcNiceTicks=function(e){e=e||10;var t=this._extent,n=t[1]-t[0];if(n!==1/0&&!(n<=0)){var r=EJ(n);for(e/n*r<=.5&&(r*=10);!isNaN(r)&&1>Math.abs(r)&&Math.abs(r)>0;)r*=10;var i=[EB(UP(t[0]/r)*r),EB(UD(t[1]/r)*r)];this._interval=r,this._niceExtent=i}},t.prototype.calcNiceExtent=function(e){UI.calcNiceExtent.call(this,e),this._fixMin=e.fixMin,this._fixMax=e.fixMax},t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return Ua(e=UL(e)/UL(this.base),this._extent)},t.prototype.normalize=function(e){return Uo(e=UL(e)/UL(this.base),this._extent)},t.prototype.scale=function(e){return e=Us(e,this._extent),UR(this.base,e)},t.type="log",t}(z9),Uk=UO.prototype;function UB(e,t){return EB(e,EF(t))}Uk.getMinorTicks=UI.getMinorTicks,Uk.getLabel=UI.getLabel,z9.registerClass(UO);var UN=function(){function e(e,t,n){this._prepareParams(e,t,n)}return e.prototype._prepareParams=function(e,t,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var r=this._isOrdinal="ordinal"===e.type;this._needCrossZero="interval"===e.type&&t.getNeedCrossZero&&t.getNeedCrossZero();var i=t.get("min",!0);null==i&&(i=t.get("startValue",!0));var a=this._modelMinRaw=i;MD(a)?this._modelMinNum=UH(e,a({min:n[0],max:n[1]})):"dataMin"!==a&&(this._modelMinNum=UH(e,a));var s=this._modelMaxRaw=t.get("max",!0);if(MD(s)?this._modelMaxNum=UH(e,s({min:n[0],max:n[1]})):"dataMax"!==s&&(this._modelMaxNum=UH(e,s)),r)this._axisDataLen=t.getCategories().length;else{var u=t.get("boundaryGap"),c=MI(u)?u:[u||0,u||0];"boolean"==typeof c[0]||"boolean"==typeof c[1]?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Eh(c[0],1),Eh(c[1],1)]}},e.prototype.calculate=function(){var e,t,n=this._isOrdinal,r=this._dataMin,i=this._dataMax,a=this._axisDataLen,s=this._boundaryGapInner,u=n?null:i-r||Math.abs(r),c="dataMin"===this._modelMinRaw?r:this._modelMinNum,h="dataMax"===this._modelMaxRaw?i:this._modelMaxNum,p=null!=c,f=null!=h;null==c&&(c=n?a?0:NaN:r-s[0]*u),null==h&&(h=n?a?a-1:NaN:i+s[1]*u),null!=c&&isFinite(c)||(c=NaN),null!=h&&isFinite(h)||(h=NaN);var v=(e=c)!=e||(t=h)!=t||n&&!a;this._needCrossZero&&(c>0&&h>0&&!p&&(c=0),c<0&&h<0&&!f&&(h=0));var y=this._determinedMin,_=this._determinedMax;return null!=y&&(c=y,p=!0),null!=_&&(h=_,f=!0),{min:c,max:h,minFixed:p,maxFixed:f,isBlank:v}},e.prototype.modifyDataMinMax=function(e,t){this[Uz[e]]=t},e.prototype.setDeterminedMinMax=function(e,t){var n=UF[e];this[n]=t},e.prototype.freeze=function(){this.frozen=!0},e}(),UF={min:"_determinedMin",max:"_determinedMax"},Uz={min:"_dataMin",max:"_dataMax"};function UU(e,t,n){var r=e.rawExtentInfo;return r?r:(r=new UN(e,t,n),e.rawExtentInfo=r,r)}function UH(e,t){var n;return null==t?null:(n=t)!=n?NaN:e.parse(t)}function UG(e,t){var n=e.type,r=UU(e,t,e.getExtent()).calculate();e.setBlank(r.isBlank);var i=r.min,a=r.max,s=t.ecModel;if(s&&"time"===n){var u=Uv("bar",s),c=!1;if(Mb(u,function(e){c=c||e.getBaseAxis()===t.axis}),c){var h=function(e,t,n,r){var i=n.axis.getExtent(),a=i[1]-i[0],s=function(e,t,n){if(e&&t){var r=e[Um(t)];return r}}(r,n.axis);if(void 0===s)return{min:e,max:t};var u=1/0;Mb(s,function(e){u=Math.min(e.offset,u)});var c=-1/0;Mb(s,function(e){c=Math.max(e.offset+e.width,c)});var h=(u=Math.abs(u))+(c=Math.abs(c)),p=t-e,f=p/(1-(u+c)/a)-p;return t+=c/h*f,{min:e-=u/h*f,max:t}}(i,a,t,Uy(u));i=h.min,a=h.max}}return{extent:[i,a],fixMin:r.minFixed,fixMax:r.maxFixed}}function UV(e,t){var n=UG(e,t),r=n.extent,i=t.get("splitNumber");e instanceof UO&&(e.base=t.get("logBase"));var a=e.type,s=t.get("interval"),u="interval"===a||"time"===a;e.setExtent(r[0],r[1]),e.calcNiceExtent({splitNumber:i,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:u?t.get("minInterval"):null,maxInterval:u?t.get("maxInterval"):null}),null!=s&&e.setInterval&&e.setInterval(s)}function UW(e,t){if(t=t||e.get("type"))switch(t){case"category":return new Ul({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new UA({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(z9.getClass(t)||Uc)}}function Uj(e){var t,n,r,i=e.getLabelModel().get("formatter"),a="category"===e.type?e.scale.getExtent()[0]:null;if("time"===e.scale.type){;return t=i,function(n,r){return e.scale.getFormattedLabel(n,r,t)}}if(MP(i)){;return n=i,function(t){var r=e.scale.getLabel(t);return n.replace("{value}",null!=r?r:"")}}if(!MD(i))return function(t){return e.scale.getLabel(t)};else{;return r=i,function(t,n){return null!=a&&(n=t.value-a),r(UX(e,t),n,null!=t.level?{level:t.level}:null)}}}function UX(e,t){return"category"===e.type?e.scale.getLabel(t):t.value}function UY(e){var t=e.get("interval");return null==t?"auto":t}function UJ(e){return"category"===e.type&&0===UY(e.getLabelModel())}function UZ(e,t){var n={};return Mb(e.mapDimensionsAll(t),function(t){n[z4(e,t)]=!0}),MC(n)}var Uq=function(){function e(){}return e.prototype.getNeedCrossZero=function(){return!this.option.scale},e.prototype.getCoordSysModel=function(){},e}();function UK(e){return z6(null,e)}var UQ={isDimensionStacked:z5,enableDataStack:z3,getStackedDimension:z4};function U$(e,t){var n=t;!(t instanceof Rb)&&(n=new Rb(t));var r=UW(n);return r.setExtent(e[0],e[1]),UV(r,n),r}function U0(e){M_(e,Uq)}function U1(e,t){return Re(e,null,null,"normal"!==(t=t||{}).state)}function U2(e,t){return 1e-8>Math.abs(e-t)}function U3(e,t,n){var r=0,i=e[0];if(!i)return!1;for(var a=1;a<e.length;a++){var s=e[a];r+=Dw(i[0],i[1],s[0],s[1],t,n),i=s}var u=e[0];return(!U2(i[0],u[0])||!U2(i[1],u[1]))&&(r+=Dw(i[0],i[1],u[0],u[1],t,n)),0!==r}var U5=[];function U4(e,t){for(var n=0;n<e.length;n++)Ax(e[n],e[n],t)}function U6(e,t,n,r){for(var i=0;i<e.length;i++){var a=e[i];r&&(a=r.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(Ab(t,t,a),AS(n,n,a))}}var U9=function(){function e(e){this.name=e}return e.prototype.setCenter=function(e){this._center=e},e.prototype.getCenter=function(){var e=this._center;return!e&&(e=this._center=this.calcCenter()),e},e}(),U8=function(e,t){this.type="polygon",this.exterior=e,this.interiors=t},U7=function(e){this.type="linestring",this.points=e},He=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.type="geoJSON",i.geometries=n,i._center=r&&[r[0],r[1]],i}return wJ(t,e),t.prototype.calcCenter=function(){for(var e,t=this.geometries,n=0,r=0;r<t.length;r++){var i=t[r],a=i.exterior,s=a&&a.length;s>n&&(e=i,n=s)}if(e)return function(e){for(var t=0,n=0,r=0,i=e.length,a=e[i-1][0],s=e[i-1][1],u=0;u<i;u++){var c=e[u][0],h=e[u][1],p=a*h-c*s;t+=p,n+=(a+c)*p,r+=(s+h)*p,a=c,s=h}return t?[n/t/3,r/t/3,t]:[e[0][0]||0,e[0][1]||0]}(e.exterior);var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},t.prototype.getBoundingRect=function(e){var t=this._rect;if(t&&!e)return t;var n=[1/0,1/0],r=[-1/0,-1/0];return Mb(this.geometries,function(t){"polygon"===t.type?U6(t.exterior,n,r,e):Mb(t.points,function(t){U6(t,n,r,e)})}),!(isFinite(n[0])&&isFinite(n[1])&&isFinite(r[0])&&isFinite(r[1]))&&(n[0]=n[1]=r[0]=r[1]=0),t=new Cr(n[0],n[1],r[0]-n[0],r[1]-n[1]),!e&&(this._rect=t),t},t.prototype.contain=function(e){var t=this.getBoundingRect(),n=this.geometries;if(!t.contain(e[0],e[1]))return!1;u:for(var r=0,i=n.length;r<i;r++){var a=n[r];if("polygon"===a.type){var s=a.exterior,u=a.interiors;if(U3(s,e[0],e[1])){for(var c=0;c<(u?u.length:0);c++)if(U3(u[c],e[0],e[1]))continue u;return!0}}}return!1},t.prototype.transformTo=function(e,t,n,r){var i=this.getBoundingRect(),a=i.width/i.height;n?!r&&(r=n/a):n=a*r;for(var s=new Cr(e,t,n,r),u=i.calculateTransform(s),c=this.geometries,h=0;h<c.length;h++){var p=c[h];"polygon"===p.type?(U4(p.exterior,u),Mb(p.interiors,function(e){U4(e,u)})):Mb(p.points,function(e){U4(e,u)})}(i=this._rect).copy(s),this._center=[i.x+i.width/2,i.y+i.height/2]},t.prototype.cloneShallow=function(e){null==e&&(e=this.name);var n=new t(e,this.geometries,this._center);return n._rect=this._rect,n.transformTo=null,n},t}(U9),Ht=function(e){function t(t,n){var r=e.call(this,t)||this;return r.type="geoSVG",r._elOnlyForCalculate=n,r}return wJ(t,e),t.prototype.calcCenter=function(){for(var e=this._elOnlyForCalculate,t=e.getBoundingRect(),n=[t.x+t.width/2,t.y+t.height/2],r=Aq(U5),i=e;i&&!i.isGeoSVGGraphicRoot;)AQ(r,i.getLocalTransform(),r),i=i.parent;return A2(r,r),Ax(n,n,r),n},t}(U9);function Hn(e,t,n){for(var r=0;r<e.length;r++)e[r]=Hr(e[r],t[r],n)}function Hr(e,t,n){for(var r=[],i=t[0],a=t[1],s=0;s<e.length;s+=2){var u=e.charCodeAt(s)-64,c=e.charCodeAt(s+1)-64;c=c>>1^-(1&c),u=(u>>1^-(1&u))+i,c+=a,i=u,a=c,r.push([u/n,c/n])}return r}function Hi(e,t){return MS(MM((e=function(e){if(!e.UTF8Encoding)return e;var t=e.UTF8Scale;return null==t&&(t=1024),Mb(e.features,function(e){var n=e.geometry,r=n.encodeOffsets,i=n.coordinates;if(!!r)switch(n.type){case"LineString":n.coordinates=Hr(i,r,t);break;case"Polygon":case"MultiLineString":Hn(i,r,t);break;case"MultiPolygon":Mb(i,function(e,n){return Hn(e,r[n],t)})}}),e.UTF8Encoding=!1,e}(e)).features,function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0}),function(e){var n=e.properties,r=e.geometry,i=[];switch(r.type){case"Polygon":var a=r.coordinates;i.push(new U8(a[0],a.slice(1)));break;case"MultiPolygon":Mb(r.coordinates,function(e){e[0]&&i.push(new U8(e[0],e.slice(1)))});break;case"LineString":i.push(new U7([r.coordinates]));break;case"MultiLineString":i.push(new U7(r.coordinates))}var s=new He(n[t||"name"],i,n.cp);return s.properties=n,s})}function Ha(e,t,n,r,i,a,s,u){return new D8({style:{text:e,font:t,align:n,verticalAlign:r,padding:i,rich:a,overflow:s?"truncate":null,lineHeight:u}}).getBoundingRect()}var Ho=Is();function Hs(e,t){var n=MS(t,function(t){return e.scale.parse(t)});return"time"===e.type&&n.length>0&&(n.sort(),n.unshift(n[0]),n.push(n[n.length-1])),n}function Hl(e,t){var n,r,i=Hu(e,"labels"),a=UY(t),s=Hc(i,a);return s?s:(MD(a)?n=Hp(e,a):(r="auto"===a?function(e){var t=Ho(e).autoInterval;return null!=t?t:Ho(e).autoInterval=e.calculateCategoryInterval()}(e):a,n=Hd(e,r)),Hh(i,a,{labels:n,labelCategoryInterval:r}))}function Hu(e,t){return Ho(e)[t]||(Ho(e)[t]=[])}function Hc(e,t){for(var n=0;n<e.length;n++)if(e[n].key===t)return e[n].value}function Hh(e,t,n){return e.push({key:t,value:n}),n}function Hd(e,t,n){var r=Uj(e),i=e.scale,a=i.getExtent(),s=e.getLabelModel(),u=[],c=Math.max((t||0)+1,1),h=a[0],p=i.count();0!==h&&c>1&&p/c>2&&(h=Math.round(Math.ceil(h/c)*c));var f=UJ(e),v=s.get("showMinLabel")||f,y=s.get("showMaxLabel")||f;v&&h!==a[0]&&x(a[0]);for(var _=h;_<=a[1];_+=c)x(_);function x(e){var t={value:e};u.push(n?e:{formattedLabel:r(t),rawLabel:i.getLabel(t),tickValue:e})}return y&&_-c!==a[1]&&x(a[1]),u}function Hp(e,t,n){var r=e.scale,i=Uj(e),a=[];return Mb(r.getTicks(),function(e){var s=r.getLabel(e),u=e.value;t(e.value,s)&&a.push(n?u:{formattedLabel:i(e),rawLabel:s,tickValue:u})}),a}var Hf=[0,1],Hg=function(){function e(e,t,n){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=n||[0,0]}return e.prototype.contain=function(e){var t=this._extent,n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]);return e>=n&&e<=r},e.prototype.containData=function(e){return this.scale.contain(e)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(e){return EU(e||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(e,t){var n=this._extent;n[0]=e,n[1]=t},e.prototype.dataToCoord=function(e,t){var n=this._extent,r=this.scale;return e=r.normalize(e),this.onBand&&"ordinal"===r.type&&Hm(n=n.slice(),r.count()),EO(e,Hf,n,t)},e.prototype.coordToData=function(e,t){var n=this._extent,r=this.scale;this.onBand&&"ordinal"===r.type&&Hm(n=n.slice(),r.count());var i=EO(e,n,Hf,t);return this.scale.scale(i)},e.prototype.pointToData=function(e,t){},e.prototype.getTicksCoords=function(e){var t,n,r,i=(e=e||{}).tickModel||this.getTickModel();var a=(t=this,n=i,(r=t.getTickModel().get("customValues"))?{ticks:Hs(t,r)}:"category"===t.type?function(e,t){var n,r,i=Hu(e,"ticks"),a=UY(t),s=Hc(i,a);if(s)return s;if((!t.get("show")||e.scale.isBlank())&&(n=[]),MD(a))n=Hp(e,a,!0);else if("auto"===a){var u=Hl(e,e.getLabelModel());r=u.labelCategoryInterval,n=MS(u.labels,function(e){return e.tickValue})}else n=Hd(e,r=a,!0);return Hh(i,a,{ticks:n,tickCategoryInterval:r})}(t,n):{ticks:MS(t.scale.getTicks(),function(e){return e.value})}).ticks,s=MS(a,function(e){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(e):e),tickValue:e}},this);return function(e,t,n,r){var i,a,s=t.length;if(!!e.onBand&&!n&&!!s){var u=e.getExtent();if(1===s)t[0].coord=u[0],i=t[1]={coord:u[1]};else{var c=t[s-1].tickValue-t[0].tickValue,h=(t[s-1].coord-t[0].coord)/c;Mb(t,function(e){e.coord-=h/2}),a=1+e.scale.getExtent()[1]-t[s-1].tickValue,i={coord:t[s-1].coord+h*a},t.push(i)}var p=u[0]>u[1];f(t[0].coord,u[0])&&(r?t[0].coord=u[0]:t.shift()),r&&f(u[0],t[0].coord)&&t.unshift({coord:u[0]}),f(u[1],i.coord)&&(r?i.coord=u[1]:t.pop()),r&&f(i.coord,u[1])&&t.push({coord:u[1]})}function f(e,t){return e=EB(e),t=EB(t),p?e>t:e<t}}(this,s,i.get("alignWithLabel"),e.clamp),s},e.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var e=this.model.getModel("minorTick").get("splitNumber");return!(e>0&&e<100)&&(e=5),MS(this.scale.getMinorTicks(e),function(e){return MS(e,function(e){return{coord:this.dataToCoord(e),tickValue:e}},this)},this)},e.prototype.getViewLabels=function(){return function(e){var t=e.getLabelModel().get("customValues");if(t){var n=Uj(e);return{labels:Hs(e,t).map(function(t){var r={value:t};return{formattedLabel:n(r),rawLabel:e.scale.getLabel(r),tickValue:t}})}}return"category"===e.type?function(e){var t=e.getLabelModel(),n=Hl(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}(e):function(e){var t=e.scale.getTicks(),n=Uj(e);return{labels:MS(t,function(t,r){return{level:t.level,formattedLabel:n(t,r),rawLabel:e.scale.getLabel(t),tickValue:t.value}})}}(e)}(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),n=t[1]-t[0]+(this.onBand?1:0);return 0===n&&(n=1),Math.abs(Math.abs(e[1]-e[0]))/n},e.prototype.calculateCategoryInterval=function(){return function(e){var t=function(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}(e),n=Uj(e),r=(t.axisRotate-t.labelRotate)/180*Math.PI,i=e.scale,a=i.getExtent(),s=i.count();if(a[1]-a[0]<1)return 0;var u=1;s>40&&(u=Math.max(1,Math.floor(s/40)));for(var c=a[0],h=e.dataToCoord(c+1)-e.dataToCoord(c),p=Math.abs(h*Math.cos(r)),f=Math.abs(h*Math.sin(r)),v=0,y=0;c<=a[1];c+=u){var _=0,x=0,b=Es(n({value:c}),t.font,"center","top");_=1.3*b.width,x=1.3*b.height,v=Math.max(v,_,7),y=Math.max(y,x,7)}var S=v/p,w=y/f;isNaN(S)&&(S=1/0),isNaN(w)&&(w=1/0);var M=Math.max(0,Math.floor(Math.min(S,w))),A=Ho(e.model),C=e.getExtent(),T=A.lastAutoInterval,I=A.lastTickCount;return null!=T&&null!=I&&1>=Math.abs(T-M)&&1>=Math.abs(I-s)&&T>M&&A.axisExtent0===C[0]&&A.axisExtent1===C[1]?M=T:(A.lastTickCount=s,A.lastAutoInterval=M,A.axisExtent0=C[0],A.axisExtent1=C[1]),M}(this)},e}();function Hm(e,t){var n=e[1]-e[0],r=n/t/2;e[0]+=r,e[1]-=r}let Hv=Hg;function Hy(e){var t=Lv.extend(e);return Lv.registerClass(t),t}function H_(e){var t=kR.extend(e);return kR.registerClass(t),t}function Hx(e){var t=kD.extend(e);return kD.registerClass(t),t}function Hb(e){var t=Nv.extend(e);return Nv.registerClass(t),t}var HS=2*Math.PI,Hw=Dv.CMD,HM=["top","right","bottom","left"];function HA(e,t,n,r,i,a,s,u){var c=n-e,h=r-t,p=Math.sqrt(c*c+h*h),f=((i-e)*(c/=p)+(a-t)*(h/=p))/p;u&&(f=Math.min(Math.max(f,0),1)),f*=p;var v=s[0]=e+f*c,y=s[1]=t+f*h;return Math.sqrt((v-i)*(v-i)+(y-a)*(y-a))}function HC(e,t,n,r,i,a,s){n<0&&(e+=n,n=-n),r<0&&(t+=r,r=-r);var u=e+n,c=t+r,h=s[0]=Math.min(Math.max(i,e),u),p=s[1]=Math.min(Math.max(a,t),c);return Math.sqrt((h-i)*(h-i)+(p-a)*(p-a))}var HT=[],HE=new A5,HI=new A5,HD=new A5,HP=new A5,HR=new A5;function HL(e,t){if(!e)return;var n=e.getTextGuideLine(),r=e.getTextContent();if(!!(r&&n)){var i=e.textGuideLineConfig||{},a=[[0,0],[0,0],[0,0]],s=i.candidates||HM,u=r.getBoundingRect().clone();u.applyTransform(r.getComputedTransform());var c=1/0,h=i.anchor,p=e.getComputedTransform(),f=p&&A2([],p),v=t.get("length2")||0;h&&HD.copy(h);for(var y=0;y<s.length;y++){!function(e,t,n,r,i){var a=n.width,s=n.height;switch(e){case"top":r.set(n.x+a/2,n.y-0),i.set(0,-1);break;case"bottom":r.set(n.x+a/2,n.y+s+t),i.set(0,1);break;case"left":r.set(n.x-t,n.y+s/2),i.set(-1,0);break;case"right":r.set(n.x+a+t,n.y+s/2),i.set(1,0)}}(s[y],0,u,HE,HP),A5.scaleAndAdd(HI,HE,HP,v),HI.transform(f);var _=e.getBoundingRect(),x=h?h.distance(HI):e instanceof DR?function(e,t,n){for(var r,i,a=0,s=0,u=0,c=0,h=1/0,p=t.data,f=e.x,v=e.y,y=0;y<p.length;){var _=p[y++];1===y&&(a=p[y],s=p[y+1],u=a,c=s);var x=h;switch(_){case Hw.M:u=p[y++],c=p[y++],a=u,s=c;break;case Hw.L:x=HA(a,s,p[y],p[y+1],f,v,HT,!0),a=p[y++],s=p[y++];break;case Hw.C:x=CN(a,s,p[y++],p[y++],p[y++],p[y++],p[y],p[y+1],f,v,HT),a=p[y++],s=p[y++];break;case Hw.Q:x=CG(a,s,p[y++],p[y++],p[y],p[y+1],f,v,HT),a=p[y++],s=p[y++];break;case Hw.A:var b=p[y++],S=p[y++],w=p[y++],M=p[y++],A=p[y++],C=p[y++];y+=1;var T=!!(1-p[y++]);r=Math.cos(A)*w+b,i=Math.sin(A)*M+S,y<=1&&(u=r,c=i);var I=(f-b)*M/w+b;x=function(e,t,n,r,i,a,s,u,c){var h=Math.sqrt((s-=e)*s+(u-=t)*u),p=(s/=h)*n+e,f=(u/=h)*n+t;if(Math.abs(r-i)%HS<1e-4)return c[0]=p,c[1]=f,h-n;if(a){var v=r;r=Db(i),i=Db(v)}else r=Db(r),i=Db(i);r>i&&(i+=HS);var y=Math.atan2(u,s);if(y<0&&(y+=HS),y>=r&&y<=i||y+HS>=r&&y+HS<=i)return c[0]=p,c[1]=f,h-n;var _=n*Math.cos(r)+e,x=n*Math.sin(r)+t,b=n*Math.cos(i)+e,S=n*Math.sin(i)+t,w=(_-s)*(_-s)+(x-u)*(x-u),M=(b-s)*(b-s)+(S-u)*(S-u);return w<M?(c[0]=_,c[1]=x,Math.sqrt(w)):(c[0]=b,c[1]=S,Math.sqrt(M))}(b,S,M,A,A+C,T,I,v,HT),a=Math.cos(A+C)*w+b,s=Math.sin(A+C)*M+S;break;case Hw.R:u=a=p[y++],x=HC(u,c=s=p[y++],p[y++],p[y++],f,v,HT);break;case Hw.Z:x=HA(a,s,u,c,f,v,HT,!0),a=u,s=c}x<h&&(h=x,n.set(HT[0],HT[1]))}return h}(HI,e.path,HD):function(e,t,n){var r=HC(t.x,t.y,t.width,t.height,e.x,e.y,HT);return n.set(HT[0],HT[1]),r}(HI,_,HD);x<c&&(c=x,HI.transform(p),HD.transform(p),HD.toArray(a[0]),HI.toArray(a[1]),HE.toArray(a[2]))}HB(a,t.get("minTurnAngle")),n.setShape({points:a})}}var HO=[],Hk=new A5;function HB(e,t){if(!(t<=180&&t>0))return;t=t/180*Math.PI,HE.fromArray(e[0]),HI.fromArray(e[1]),HD.fromArray(e[2]),A5.sub(HP,HE,HI),A5.sub(HR,HD,HI);var n=HP.len(),r=HR.len();if(!(n<.001)&&!(r<.001)){if(HP.scale(1/n),HR.scale(1/r),Math.cos(t)<HP.dot(HR)){var i=HA(HI.x,HI.y,HD.x,HD.y,HE.x,HE.y,HO,!1);Hk.fromArray(HO),Hk.scaleAndAdd(HR,i/Math.tan(Math.PI-t));var a=HD.x!==HI.x?(Hk.x-HI.x)/(HD.x-HI.x):(Hk.y-HI.y)/(HD.y-HI.y);if(isNaN(a))return;a<0?A5.copy(Hk,HI):a>1&&A5.copy(Hk,HD),Hk.toArray(e[1])}}}function HN(e,t,n,r){var i="normal"===n,a=i?e:e.ensureState(n);a.ignore=t;var s=r.get("smooth");s&&!0===s&&(s=.3),a.shape=a.shape||{},s>0&&(a.shape.smooth=s);var u=r.getModel("lineStyle").getLineStyle();i?e.useStyle(u):a.style=u}function HF(e,t){var n=t.smooth,r=t.points;if(!!r)if(e.moveTo(r[0][0],r[0][1]),n>0&&r.length>=3){var i=Ag(r[0],r[1]),a=Ag(r[1],r[2]);if(!i||!a){e.lineTo(r[1][0],r[1][1]),e.lineTo(r[2][0],r[2][1]);return}var s=Math.min(i,a)*n,u=A_([],r[1],r[0],s/i),c=A_([],r[1],r[2],s/a),h=A_([],u,c,.5);e.bezierCurveTo(u[0],u[1],u[0],u[1],h[0],h[1]),e.bezierCurveTo(c[0],c[1],c[0],c[1],r[2][0],r[2][1])}else for(var p=1;p<r.length;p++)e.lineTo(r[p][0],r[p][1])}function Hz(e,t,n){var r=e.getTextGuideLine(),i=e.getTextContent();if(!i){r&&e.removeTextGuideLine();return}for(var a=t.normal,s=a.get("show"),u=i.ignore,c=0;c<Po.length;c++){var h=Po[c],p=t[h],f="normal"===h;if(p){var v=p.get("show");if((f?u:MV(i.states[h]&&i.states[h].ignore,u))||!MV(v,s)){var y=f?r:r&&r.states[h];y&&(y.ignore=!0),r&&HN(r,!0,h,p);continue}!r&&(r=new B_,e.setTextGuideLine(r),!f&&(u||!s)&&HN(r,!0,"normal",t.normal),e.stateProxy&&(r.stateProxy=e.stateProxy)),HN(r,!1,h,p)}}if(r){Mg(r.style,n),r.style.fill=null;var _=a.get("showAbove");(e.textGuideLineConfig=e.textGuideLineConfig||{}).showAbove=_||!1,r.buildPath=HF}}function HU(e,t){t=t||"labelLine";for(var n={normal:e.getModel(t)},r=0;r<Pa.length;r++){var i=Pa[r];n[i]=e.getModel([i,t])}return n}function HH(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(!r.defaultAttr.ignore){var i=r.label,a=i.getComputedTransform(),s=i.getBoundingRect(),u=!a||a[1]<1e-5&&a[2]<1e-5,c=i.style.margin||0,h=s.clone();h.applyTransform(a),h.x-=c/2,h.y-=c/2,h.width+=c,h.height+=c;var p=u?new BU(s,a):null;t.push({label:i,labelLine:r.labelLine,rect:h,localRect:s,obb:p,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:u,transform:a})}}return t}function HG(e,t,n,r,i,a){var s,u,c,h=e.length;if(!(h<2)){e.sort(function(e,n){return e.rect[t]-n.rect[t]});for(var p=0,f=!1,v=[],y=0,_=0;_<h;_++){var x=e[_],b=x.rect;(s=b[t]-p)<0&&(b[t]-=s,x.label[t]-=s,f=!0);var S=Math.max(-s,0);v.push(S),y+=S,p=b[t]+b[n]}y>0&&a&&T(-y/h,0,h);var w=e[0],M=e[h-1];return A(),u<0&&I(-u,.8),c<0&&I(c,.8),A(),C(u,c,1),C(c,u,-1),A(),u<0&&D(-u),c<0&&D(c),f}function A(){u=w.rect[t]-r,c=i-M.rect[t]-M.rect[n]}function C(e,t,n){if(e<0){var r=Math.min(t,-e);if(r>0){T(r*n,0,h);var i=r+e;i<0&&I(-i*n,1)}else I(-e*n,1)}}function T(n,r,i){0!==n&&(f=!0);for(var a=r;a<i;a++){var s=e[a],u=s.rect;u[t]+=n,s.label[t]+=n}}function I(r,i){for(var a=[],s=0,u=1;u<h;u++){var c=e[u-1].rect,p=Math.max(e[u].rect[t]-c[t]-c[n],0);a.push(p),s+=p}if(!!s){var f=Math.min(Math.abs(r)/s,i);if(r>0)for(var u=0;u<h-1;u++){var v=a[u]*f;T(v,0,u+1)}else for(var u=h-1;u>0;u--){var v=a[u-1]*f;T(-v,u,h)}}}function D(e){for(var t=e<0?-1:1,n=Math.ceil((e=Math.abs(e))/(h-1)),r=0;r<h-1;r++)if(t>0?T(n,0,r+1):T(-n,h-r-1,h),(e-=n)<=0)return}}function HV(e,t,n,r){return HG(e,"y","height",t,n,r)}function HW(e){var t=[];e.sort(function(e,t){return t.priority-e.priority});var n=new Cr(0,0,0,0);function r(e){if(!e.ignore){var t=e.ensureState("emphasis");null==t.ignore&&(t.ignore=!1)}e.ignore=!0}for(var i=0;i<e.length;i++){var a=e[i],s=a.axisAligned,u=a.localRect,c=a.transform,h=a.label,p=a.labelLine;n.copy(a.rect),n.width-=.1,n.height-=.1,n.x+=.05,n.y+=.05;for(var f=a.obb,v=!1,y=0;y<t.length;y++){var _=t[y];if(!!n.intersect(_.rect)){if(s&&_.axisAligned){v=!0;break}if(!_.obb&&(_.obb=new BU(_.localRect,_.transform)),!f&&(f=new BU(u,c)),f.intersect(_.obb)){v=!0;break}}}v?(r(h),p&&r(p)):(h.attr("ignore",a.defaultAttr.ignore),p&&p.attr("ignore",a.defaultAttr.labelGuideIgnore),t.push(a))}}var Hj=["align","verticalAlign","width","height","fontSize"],HX=new Et,HY=Is(),HJ=Is();function HZ(e,t,n){for(var r=0;r<n.length;r++){var i=n[r];null!=t[i]&&(e[i]=t[i])}}var Hq=["x","y","rotation"],HK=function(){function e(){this._labelList=[],this._chartViewList=[]}return e.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},e.prototype._addLabel=function(e,t,n,r,i){var a,s=r.style,u=r.__hostTarget.textConfig||{},c=r.getComputedTransform(),h=r.getBoundingRect().plain();Cr.applyTransform(h,h,c),c?HX.setLocalTransform(c):(HX.x=HX.y=HX.rotation=HX.originX=HX.originY=0,HX.scaleX=HX.scaleY=1),HX.rotation=Db(HX.rotation);var p=r.__hostTarget;if(p){a=p.getBoundingRect().plain();var f=p.getComputedTransform();Cr.applyTransform(a,a,f)}var v=a&&p.getTextGuideLine();this._labelList.push({label:r,labelLine:v,seriesModel:n,dataIndex:e,dataType:t,layoutOption:i,computedLayoutOption:null,rect:h,hostRect:a,priority:a?a.width*a.height:0,defaultAttr:{ignore:r.ignore,labelGuideIgnore:v&&v.ignore,x:HX.x,y:HX.y,scaleX:HX.scaleX,scaleY:HX.scaleY,rotation:HX.rotation,style:{x:s.x,y:s.y,align:s.align,verticalAlign:s.verticalAlign,width:s.width,height:s.height,fontSize:s.fontSize},cursor:r.cursor,attachedPos:u.position,attachedRot:u.rotation}})},e.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var n=e.__model,r=n.get("labelLayout");if(!!(MD(r)||MC(r).length))e.group.traverse(function(e){if(e.ignore)return!0;var i=e.getTextContent(),a=D7(e);i&&!i.disableLabelLayout&&t._addLabel(a.dataIndex,a.dataType,n,i,r)})},e.prototype.updateLayoutConfig=function(e){for(var t=e.getWidth(),n=e.getHeight(),r=0;r<this._labelList.length;r++){var i=this._labelList[r],a=i.label,s=a.__hostTarget,u=i.defaultAttr,c=void 0;c=(c=MD(i.layoutOption)?i.layoutOption(function(e,t){var n=e.label,r=t&&t.getTextGuideLine();return{dataIndex:e.dataIndex,dataType:e.dataType,seriesIndex:e.seriesModel.seriesIndex,text:e.label.style.text,rect:e.hostRect,labelRect:e.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:function(e){if(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].slice());return t}}(r&&r.shape.points)}}(i,s)):i.layoutOption)||{},i.computedLayoutOption=c;var h=Math.PI/180;s&&s.setTextConfig({local:!1,position:null!=c.x||null!=c.y?null:u.attachedPos,rotation:null!=c.rotate?c.rotate*h:u.attachedRot,offset:[c.dx||0,c.dy||0]});var p=!1;if(null!=c.x?(a.x=Ek(c.x,t),a.setStyle("x",0),p=!0):(a.x=u.x,a.setStyle("x",u.style.x)),null!=c.y?(a.y=Ek(c.y,n),a.setStyle("y",0),p=!0):(a.y=u.y,a.setStyle("y",u.style.y)),c.labelLinePoints){var f=s.getTextGuideLine();f&&(f.setShape({points:c.labelLinePoints}),p=!1)}HY(a).needsUpdateLabelLine=p,a.rotation=null!=c.rotate?c.rotate*h:u.rotation,a.scaleX=u.scaleX,a.scaleY=u.scaleY;for(var v=0;v<Hj.length;v++){var y=Hj[v];a.setStyle(y,null!=c[y]?c[y]:u.style[y])}if(c.draggable){if(a.draggable=!0,a.cursor="move",s){var _=i.seriesModel;null!=i.dataIndex&&(_=i.seriesModel.getData(i.dataType).getItemModel(i.dataIndex)),a.on("drag",function(e,t){return function(){HL(e,t)}}(s,_.getModel("labelLine")))}}else a.off("drag"),a.cursor=u.cursor}},e.prototype.layout=function(e){var t,n,r=e.getWidth(),i=e.getHeight(),a=HH(this._labelList),s=MM(a,function(e){return"shiftX"===e.layoutOption.moveOverlap}),u=MM(a,function(e){return"shiftY"===e.layoutOption.moveOverlap});t=0,HG(s,"x","width",0,r,void 0),HV(u,0,i),HW(MM(a,function(e){return e.layoutOption.hideOverlap}))},e.prototype.processLabelsOverall=function(){var e=this;Mb(this._chartViewList,function(t){var n=t.__model,r=t.ignoreLabelLineUpdate,i=n.isAnimationEnabled();t.group.traverse(function(t){if(t.ignore&&!t.forceLabelAnimation)return!0;var a=!r,s=t.getTextContent();!a&&s&&(a=HY(s).needsUpdateLabelLine),a&&e._updateLabelLine(t,n),i&&e._animateLabels(t,n)})})},e.prototype._updateLabelLine=function(e,t){var n=e.getTextContent(),r=D7(e),i=r.dataIndex;if(n&&null!=i){var a=t.getData(r.dataType),s=a.getItemModel(i),u={},c=a.getItemVisual(i,"style");if(c){var h=a.getVisual("drawType");u.stroke=c[h]}var p=s.getModel("labelLine");Hz(e,HU(s),u),HL(e,p)}},e.prototype._animateLabels=function(e,t){var n=e.getTextContent(),r=e.getTextGuideLine();if(n&&(e.forceLabelAnimation||!n.ignore&&!n.invisible&&!e.disableLabelAnimation&&!P0(e))){var i=HY(n),a=i.oldLayout,s=D7(e),u=s.dataIndex,c={x:n.x,y:n.y,rotation:n.rotation},h=t.getData(s.dataType);if(a){n.attr(a);var p=e.prevStates;p&&(Mv(p,"select")>=0&&n.attr(i.oldLayoutSelect),Mv(p,"emphasis")>=0&&n.attr(i.oldLayoutEmphasis)),PQ(n,c,t,u)}else if(n.attr(c),!Rs(n).valueAnimation){var f=MV(n.style.opacity,1);n.style.opacity=0,P$(n,{style:{opacity:f}},t,u)}if(i.oldLayout=c,n.states.select){var v=i.oldLayoutSelect={};HZ(v,c,Hq),HZ(v,n.states.select,Hq)}if(n.states.emphasis){var y=i.oldLayoutEmphasis={};HZ(y,c,Hq),HZ(y,n.states.emphasis,Hq)}Ru(n,u,h,t,t)}if(r&&!r.ignore&&!r.invisible){var i=HJ(r),a=i.oldLayout,_={points:r.shape.points};a?(r.attr({shape:a}),PQ(r,{shape:_},t)):(r.setShape(_),r.style.strokePercent=0,P$(r,{style:{strokePercent:1}},t)),i.oldLayout=_}},e}(),HQ=Is();function H$(e){e.registerUpdateLifecycle("series:beforeupdate",function(e,t,n){var r=HQ(t).labelManager;!r&&(r=HQ(t).labelManager=new HK),r.clearLabels()}),e.registerUpdateLifecycle("series:layoutlabels",function(e,t,n){var r=HQ(t).labelManager;n.updatedSeries.forEach(function(e){r.addLabelsOfSeries(t.getViewOfSeriesModel(e))}),r.updateLayoutConfig(t),r.layout(t),r.processLabelsOverall()})}function H0(e,t,n){var r=w4.createCanvas(),i=t.getWidth(),a=t.getHeight(),s=r.style;return s&&(s.position="absolute",s.left="0",s.top="0",s.width=i+"px",s.height=a+"px",r.setAttribute("data-zr-dom-id",e)),r.width=i*n,r.height=a*n,r}zP(H$);var H1=function(e){function t(t,n,r){var i,a=e.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null,r=r||T2,"string"==typeof t?i=H0(t,n,r):MO(t)&&(t=(i=t).id),a.id=t,a.dom=i;var s=i.style;return s&&(M5(i),i.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=n,a.dpr=r,a}return wJ(t,e),t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var e=this.dpr;this.domBack=H0("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),1!==e&&this.ctxBack.scale(e,e)},t.prototype.createRepaintRects=function(e,t,n,r){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var i,a=[],s=this.maxRepaintRectCount,u=!1,c=new Cr(0,0,0,0);function h(e){if(!(!e.isFinite()||e.isZero()))if(0===a.length){var t=new Cr(0,0,0,0);t.copy(e),a.push(t)}else{for(var n=!1,r=1/0,i=0,h=0;h<a.length;++h){var p=a[h];if(p.intersect(e)){var f=new Cr(0,0,0,0);f.copy(p),f.union(e),a[h]=f,n=!0;break}if(u){c.copy(e),c.union(p);var v=e.width*e.height,y=p.width*p.height,_=c.width*c.height-v-y;_<r&&(r=_,i=h)}}if(u&&(a[i].union(e),n=!0),!n){var t=new Cr(0,0,0,0);t.copy(e),a.push(t)}!u&&(u=a.length>=s)}}for(var p=this.__startIndex;p<this.__endIndex;++p){var f=e[p];if(f){var v=f.shouldBePainted(n,r,!0,!0),y=f.__isRendered&&(1&f.__dirty||!v)?f.getPrevPaintRect():null;y&&h(y);var _=v&&(1&f.__dirty||!f.__isRendered)?f.getPaintRect():null;_&&h(_)}}for(var p=this.__prevStartIndex;p<this.__prevEndIndex;++p){var f=t[p],v=f&&f.shouldBePainted(n,r,!0,!0);if(f&&(!v||!f.__zr)&&f.__isRendered){var y=f.getPrevPaintRect();y&&h(y)}}do{i=!1;for(var p=0;p<a.length;){if(a[p].isZero()){a.splice(p,1);continue}for(var x=p+1;x<a.length;)a[p].intersect(a[x])?(i=!0,a[p].union(a[x]),a.splice(x,1)):x++;p++}}while(i);return this._paintRects=a,a},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(e,t){var n=this.dpr,r=this.dom,i=r.style,a=this.domBack;i&&(i.width=e+"px",i.height=t+"px"),r.width=e*n,r.height=t*n,a&&(a.width=e*n,a.height=t*n,1!==n&&this.ctxBack.scale(n,n))},t.prototype.clear=function(e,t,n){var r=this.dom,i=this.ctx,a=r.width,s=r.height;t=t||this.clearColor;var u=this.motionBlur&&!e,c=this.lastFrameAlpha,h=this.dpr,p=this;u&&(!this.domBack&&this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(r,0,0,a/h,s/h));var f=this.domBack;function v(e,n,r,a){if(i.clearRect(e,n,r,a),t&&"transparent"!==t){var s=void 0;MF(t)?(s=(t.global||t.__width===r&&t.__height===a)&&t.__canvasGradient||Fc(i,t,{x:0,y:0,width:r,height:a}),t.__canvasGradient=s,t.__width=r,t.__height=a):Mz(t)&&(t.scaleX=t.scaleX||h,t.scaleY=t.scaleY||h,s=Fx(i,t,{dirty:function(){p.setUnpainted(),p.painter.refresh()}})),i.save(),i.fillStyle=s||t,i.fillRect(e,n,r,a),i.restore()}u&&(i.save(),i.globalAlpha=c,i.drawImage(f,e,n,r,a),i.restore())}!n||u?v(0,0,a,s):n.length&&Mb(n,function(e){v(e.x*h,e.y*h,e.width*h,e.height*h)})},t}(AA),H2=function(){function e(e,t,n,r){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var i=!e.nodeName||"CANVAS"===e.nodeName.toUpperCase();this._opts=n=Mf({},n||{}),this.dpr=n.devicePixelRatio||T2,this._singleCanvas=i,this.root=e,e.style&&(M5(e),e.innerHTML=""),this.storage=t;var a=this._zlevelList;this._prevDisplayList=[];var s=this._layers;if(i){var u=e.width,c=e.height;null!=n.width&&(u=n.width),null!=n.height&&(c=n.height),this.dpr=n.devicePixelRatio||1,e.width=u*this.dpr,e.height=c*this.dpr,this._width=u,this._height=c;var h=new H1(e,this,this.dpr);h.__builtin__=!0,h.initContext(),s[314159]=h,h.zlevel=314159,a.push(314159),this._domRoot=e}else{this._width=Fd(e,0,n),this._height=Fd(e,1,n);var p,f,v,y=this._domRoot=(p=this._width,f=this._height,(v=document.createElement("div")).style.cssText=["position:relative","width:"+p+"px","height:"+f+"px","padding:0","margin:0","border-width:0"].join(";")+";",v);e.appendChild(y)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},e.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),n=this._prevDisplayList,r=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,n,e,this._redrawId);for(var i=0;i<r.length;i++){var a=r[i],s=this._layers[a];if(!s.__builtin__&&s.refresh){var u=0===i?this._backgroundColor:null;s.refresh(u)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(e){var t,n=e.length,r=this._hoverlayer;if(r&&r.clear(),!!n){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},a=0;a<n;a++){var s=e[a];s.__inHover&&(!r&&(r=this._hoverlayer=this.getLayer(1e5)),!t&&(t=r.ctx).save(),FI(t,s,i,a===n-1))}t&&t.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(1e5)},e.prototype.paintOne=function(e,t){FE(e,t)},e.prototype._paintList=function(e,t,n,r){if(this._redrawId===r){n=n||!1,this._updateLayerStatus(e);var i=this._doPaintList(e,t,n),a=i.finished,s=i.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(e),a)this.eachLayer(function(e){e.afterBrush&&e.afterBrush()});else{var u=this;eR(function(){u._paintList(e,t,n,r)})}}},e.prototype._compositeManually=function(){var e=this.getLayer(314159).ctx,t=this._domRoot.width,n=this._domRoot.height;e.clearRect(0,0,t,n),this.eachBuiltinLayer(function(r){r.virtual&&e.drawImage(r.dom,0,0,t,n)})},e.prototype._doPaintList=function(e,t,n){for(var r=this,i=[],a=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var u=this._zlevelList[s],c=this._layers[u];c.__builtin__&&c!==this._hoverlayer&&(c.__dirty||n)&&i.push(c)}for(var h=!0,p=!1,f=this,v=0;v<i.length;v++)!function(s){var u,c=i[s],v=c.ctx,y=a&&c.createRepaintRects(e,t,f._width,f._height),_=n?c.__startIndex:c.__drawIndex,x=!n&&c.incremental&&Date.now,b=x&&Date.now(),S=c.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(c.__startIndex===c.__endIndex)c.clear(!1,S,y);else if(_===c.__startIndex){var w=e[_];(!w.incremental||!w.notClear||n)&&c.clear(!1,S,y)}-1===_&&(_=c.__startIndex);var M=function(t){var n={inHover:!1,allClipped:!1,prevEl:null,viewWidth:r._width,viewHeight:r._height};for(u=_;u<c.__endIndex;u++){var i=e[u];if(i.__inHover&&(p=!0),r._doPaintEl(i,c,a,t,n,u===c.__endIndex-1),x&&Date.now()-b>15)break}n.prevElClipPaths&&v.restore()};if(y){if(0===y.length)u=c.__endIndex;else{for(var A=f.dpr,C=0;C<y.length;++C){var T=y[C];v.save(),v.beginPath(),v.rect(T.x*A,T.y*A,T.width*A,T.height*A),v.clip(),M(T),v.restore()}}}else v.save(),M(),v.restore();c.__drawIndex=u,c.__drawIndex<c.__endIndex&&(h=!1)}(v);return w1.wxa&&Mb(this._layers,function(e){e&&e.ctx&&e.ctx.draw&&e.ctx.draw()}),{finished:h,needsRefreshHover:p}},e.prototype._doPaintEl=function(e,t,n,r,i,a){var s=t.ctx;if(n){var u=e.getPaintRect();(!r||u&&u.intersect(r))&&(FI(s,e,i,a),e.setPrevPaintRect(u))}else FI(s,e,i,a)},e.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=314159);var n=this._layers[e];return!n&&((n=new H1("zr_"+e,this,this.dpr)).zlevel=e,n.__builtin__=!0,this._layerConfig[e]?Md(n,this._layerConfig[e],!0):this._layerConfig[e-.01]&&Md(n,this._layerConfig[e-.01],!0),t&&(n.virtual=t),this.insertLayer(e,n),n.initContext()),n},e.prototype.insertLayer=function(e,t){var n,r=this._layers,i=this._zlevelList,a=i.length,s=this._domRoot,u=null,c=-1;if(r[e])return;if(!!((n=t)&&(n.__builtin__||"function"==typeof n.resize&&"function"==typeof n.refresh))){if(a>0&&e>i[0]){for(c=0;c<a-1&&(!(i[c]<e)||!(i[c+1]>e));c++);u=r[i[c]]}if(i.splice(c+1,0,e),r[e]=t,!t.virtual){if(u){var h=u.dom;h.nextSibling?s.insertBefore(t.dom,h.nextSibling):s.appendChild(t.dom)}else s.firstChild?s.insertBefore(t.dom,s.firstChild):s.appendChild(t.dom)}t.painter||(t.painter=this)}},e.prototype.eachLayer=function(e,t){for(var n=this._zlevelList,r=0;r<n.length;r++){var i=n[r];e.call(t,this._layers[i],i)}},e.prototype.eachBuiltinLayer=function(e,t){for(var n=this._zlevelList,r=0;r<n.length;r++){var i=n[r],a=this._layers[i];a.__builtin__&&e.call(t,a,i)}},e.prototype.eachOtherLayer=function(e,t){for(var n=this._zlevelList,r=0;r<n.length;r++){var i=n[r],a=this._layers[i];!a.__builtin__&&e.call(t,a,i)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(e){function t(e){s&&(s.__endIndex!==e&&(s.__dirty=!0),s.__endIndex=e)}if(this.eachBuiltinLayer(function(e,t){e.__dirty=e.__used=!1}),this._singleCanvas)for(var n,r,i=1;i<e.length;i++){var a=e[i];if(a.zlevel!==e[i-1].zlevel||a.incremental){this._needsManuallyCompositing=!0;break}}var s=null,u=0;for(r=0;r<e.length;r++){var a=e[r],c=a.zlevel,h=void 0;n!==c&&(n=c,u=0),a.incremental?((h=this.getLayer(c+.001,this._needsManuallyCompositing)).incremental=!0,u=1):h=this.getLayer(c+(u>0?.01:0),this._needsManuallyCompositing),!h.__builtin__&&Mc("ZLevel "+c+" has been used by unkown layer "+h.id),h!==s&&(h.__used=!0,h.__startIndex!==r&&(h.__dirty=!0),h.__startIndex=r,h.incremental?h.__drawIndex=-1:h.__drawIndex=r,t(r),s=h),1&a.__dirty&&!a.__inHover&&(h.__dirty=!0,h.incremental&&h.__drawIndex<0&&(h.__drawIndex=r))}t(r),this.eachBuiltinLayer(function(e,t){!e.__used&&e.getElementCount()>0&&(e.__dirty=!0,e.__startIndex=e.__endIndex=e.__drawIndex=0),e.__dirty&&e.__drawIndex<0&&(e.__drawIndex=e.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(e){e.clear()},e.prototype.setBackgroundColor=function(e){this._backgroundColor=e,Mb(this._layers,function(e){e.setUnpainted()})},e.prototype.configLayer=function(e,t){if(t){var n=this._layerConfig;n[e]?Md(n[e],t,!0):n[e]=t;for(var r=0;r<this._zlevelList.length;r++){var i=this._zlevelList[r];(i===e||i===e+.01)&&Md(this._layers[i],n[e],!0)}}},e.prototype.delLayer=function(e){var t=this._layers,n=this._zlevelList,r=t[e];if(!!r)r.dom.parentNode.removeChild(r.dom),delete t[e],n.splice(Mv(n,e),1)},e.prototype.resize=function(e,t){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var r=this._opts,i=this.root;if(null!=e&&(r.width=e),null!=t&&(r.height=t),e=Fd(i,0,r),t=Fd(i,1,r),n.style.display="",this._width!==e||t!==this._height){for(var a in n.style.width=e+"px",n.style.height=t+"px",this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(null==e||null==t)return;this._width=e,this._height=t,this.getLayer(314159).resize(e,t)}return this},e.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var t=new H1("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var n=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var r=t.dom.width,i=t.dom.height;this.eachLayer(function(e){e.__builtin__?n.drawImage(e.dom,0,0,r,i):e.renderToCanvas&&(n.save(),e.renderToCanvas(n),n.restore())})}else{for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),u=0,c=s.length;u<c;u++)FI(n,s[u],a,u===c-1)}return t.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}(),H3=Math.sin,H5=Math.cos,H4=Math.PI,H6=2*Math.PI,H9=180/H4,H8=function(){function e(){}return e.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},e.prototype.moveTo=function(e,t){this._add("M",e,t)},e.prototype.lineTo=function(e,t){this._add("L",e,t)},e.prototype.bezierCurveTo=function(e,t,n,r,i,a){this._add("C",e,t,n,r,i,a)},e.prototype.quadraticCurveTo=function(e,t,n,r){this._add("Q",e,t,n,r)},e.prototype.arc=function(e,t,n,r,i,a){this.ellipse(e,t,n,n,0,r,i,a)},e.prototype.ellipse=function(e,t,n,r,i,a,s,u){var c=s-a,h=!u,p=Math.abs(c),f=Tf(p-H6)||(h?c>=H6:-c>=H6),v=c>0?c%H6:c%H6+H6,y=!1;y=!!f||!Tf(p)&&v>=H4==!!h;var _=e+n*H5(a),x=t+r*H3(a);this._start&&this._add("M",_,x);var b=Math.round(i*H9);if(f){var S=1/this._p,w=(h?1:-1)*(H6-S);this._add("A",n,r,b,1,+h,e+n*H5(a+w),t+r*H3(a+w)),S>.01&&this._add("A",n,r,b,0,+h,_,x)}else{var M=e+n*H5(s),A=t+r*H3(s);this._add("A",n,r,b,+y,+h,M,A)}},e.prototype.rect=function(e,t,n,r){this._add("M",e,t),this._add("l",n,0),this._add("l",0,r),this._add("l",-n,0),this._add("Z")},e.prototype.closePath=function(){this._d.length>0&&this._add("Z")},e.prototype._add=function(e,t,n,r,i,a,s,u,c){for(var h=[],p=this._p,f=1;f<arguments.length;f++){var v=arguments[f];if(isNaN(v)){this._invalid=!0;return}h.push(Math.round(v*p)/p)}this._d.push(e+h.join(" ")),this._start="Z"===e},e.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},e.prototype.getStr=function(){return this._str},e}(),H7="none",Ge=Math.round,Gt=["lineCap","miterLimit","lineJoin"],Gn=MS(Gt,function(e){return"stroke-"+e.toLowerCase()}),Gr="http://www.w3.org/2000/svg",Gi="http://www.w3.org/1999/xlink",Ga="ecmeta_";function Go(e){return document.createElementNS(Gr,e)}function Gs(e,t,n,r,i){return{tag:e,attrs:n||{},children:r,text:i,key:t}}function Gl(e,t){var n=(t=t||{}).newline?"\n":"";return function e(t){var r=t.children,i=t.tag,a=t.attrs,s=t.text;return function(e,t){var n=[];if(t)for(var r in t){var i=t[r],a=r;if(!1!==i){!0!==i&&null!=i&&(a+='="'+i+'"');n.push(a)}}return"<"+e+" "+n.join(" ")+">"}(i,a)+("style"!==i?Ak(s):s||"")+(r?""+n+MS(r,function(t){return e(t)}).join(n)+n:"")+("</"+i)+">"}(e)}function Gu(e){return{zrId:e,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function Gc(e,t,n,r){return Gs("svg","root",{width:e,height:t,xmlns:Gr,"xmlns:xlink":Gi,version:"1.1",baseProfile:"full",viewBox:!!r&&"0 0 "+e+" "+t},n)}var Gh=0;function Gd(){return Gh++}var Gp={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Gf="transform-origin",Gg={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Gm(e,t){var n=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[n]=e,n}function Gv(e){return MP(e)?Gp[e]?"cubic-bezier("+Gp[e]+")":CW(e)?e:"":""}function Gy(e,t,n,r){var i=e.animators,a=i.length,s=[];if(e instanceof BR){var u=function(e,t,n){var r,i,a=e.shape.paths,s={};if(Mb(a,function(e){var t=Gu(n.zrId);t.animation=!0,Gy(e,{},t,!0);var a=t.cssAnims,u=t.cssNodes,c=MC(a),h=c.length;if(!!h){var p=a[i=c[h-1]];for(var f in p){var v=p[f];s[f]=s[f]||{d:""},s[f].d+=v.d||""}for(var y in u){var _=u[y].animation;_.indexOf(i)>=0&&(r=_)}}}),!!r){t.d=!1;var u=Gm(s,n);return r.replace(i,u)}}(e,t,n);if(u)s.push(u);else if(!a)return}else if(!a)return;for(var c={},h=0;h<a;h++){var p=i[h],f=[p.getMaxTime()/1e3+"s"],v=Gv(p.getClip().easing),y=p.getDelay();v?f.push(v):f.push("linear"),y&&f.push(y/1e3+"s"),p.getLoop()&&f.push("infinite");var _=f.join(" ");c[_]=c[_]||[_,[]],c[_][1].push(p)}for(var x in c){var u=function(i){var a,s,u=i[1],c=u.length,h={},p={},f={},v="animation-timing-function";function y(e,t,n){for(var r=e.getTracks(),i=e.getMaxTime(),a=0;a<r.length;a++){var s=r[a];if(s.needsAnimate()){var u=s.keyframes,c=s.propName;if(n&&(c=n(c)),c)for(var h=0;h<u.length;h++){var p=u[h],f=Math.round(p.time/i*100)+"%",y=Gv(p.easing),_=p.rawValue;(MP(_)||ML(_))&&(t[f]=t[f]||{},t[f][c]=p.rawValue,y&&(t[f][v]=y))}}}}for(var _=0;_<c;_++){var x=u[_],b=x.targetName;b?"shape"===b&&y(x,p):r||y(x,h)}for(var S in h){var w={};Er(w,e),Mf(w,h[S]);var M=TA(w),A=h[S][v];f[S]=M?{transform:M}:{},!function(e,t){var n=t.originX,r=t.originY;(n||r)&&(e[Gf]=n+"px "+r+"px")}(f[S],w),A&&(f[S][v]=A)}var C=!0;for(var S in p){f[S]=f[S]||{};var T=!a,A=p[S][v];T&&(a=new Dv);var I=a.len();a.reset(),f[S].d=function(e,t,n){var r=Mf({},e.shape);Mf(r,t),e.buildPath(n,r);var i=new H8;return i.reset(TM(e)),n.rebuildPath(i,1),i.generateStr(),i.getStr()}(e,p[S],a);var D=a.len();if(!T&&I!==D){C=!1;break}A&&(f[S][v]=A)}if(!C)for(var S in f)delete f[S].d;if(!r)for(var _=0;_<c;_++){var x=u[_],b=x.targetName;"style"===b&&y(x,f,function(e){return Gg[e]})}for(var P=MC(f),R=!0,_=1;_<P.length;_++){var L=P[_-1],O=P[_];if(f[L][Gf]!==f[O][Gf]){R=!1;break}s=f[L][Gf]}if(R&&s){for(var S in f)f[S][Gf]&&delete f[S][Gf];t[Gf]=s}if(MM(P,function(e){return MC(f[e]).length>0}).length)return Gm(f,n)+" "+i[0]+" both"}(c[x]);u&&s.push(u)}if(s.length){var b=n.zrId+"-cls-"+Gh++;n.cssNodes["."+b]={animation:s.join(",")},t.class=b}}function G_(e,t,n,r){var i=JSON.stringify(e),a=n.cssStyleCache[i];!a&&(a=n.zrId+"-cls-"+Gh++,n.cssStyleCache[i]=a,n.cssNodes["."+a+(r?":hover":"")]=e),t.class=t.class?t.class+" "+a:a}var Gx=Math.round;function Gb(e){return e&&MP(e.src)}function GS(e){return e&&MD(e.toDataURL)}function Gw(e,t,n,r){!function(e,t,n,r){var i,a,s=null==t.opacity?1:t.opacity;if(n instanceof DF){e("opacity",s);return}if(null!=(i=t.fill)&&i!==H7){var u=Tp(t.fill);e("fill",u.color);var c=null!=t.fillOpacity?t.fillOpacity*u.opacity*s:u.opacity*s;(r||c<1)&&e("fill-opacity",c)}else e("fill",H7);if(null!=(a=t.stroke)&&a!==H7){var h=Tp(t.stroke);e("stroke",h.color);var p=t.strokeNoScale?n.getLineScale():1,f=p?(t.lineWidth||0)/p:0,v=null!=t.strokeOpacity?t.strokeOpacity*h.opacity*s:h.opacity*s,y=t.strokeFirst;if((r||1!==f)&&e("stroke-width",f),(r||y)&&e("paint-order",y?"stroke":"fill"),(r||v<1)&&e("stroke-opacity",v),t.lineDash){var _=Fp(n),x=_[0],b=_[1];x&&(b=Ge(b||0),e("stroke-dasharray",x.join(",")),(b||r)&&e("stroke-dashoffset",b))}else r&&e("stroke-dasharray",H7);for(var S=0;S<Gt.length;S++){var w=Gt[S];if(r||t[w]!==DI[w]){var M=t[w]||DI[w];M&&e(Gn[S],M)}}}else r&&e("stroke",H7)}(function(i,a){var s="fill"===i||"stroke"===i;s&&TS(a)?GR(t,e,i,r):s&&T_(a)?GL(n,e,i,r):s&&"none"===a?e[i]="transparent":e[i]=a},t,n,!1),function(e,t,n){var r=e.style;if((i=r)&&(i.shadowBlur||i.shadowOffsetX||i.shadowOffsetY)){var i,a,s,u,c=(s=(a=e).style,u=a.getGlobalScale(),[s.shadowColor,(s.shadowBlur||0).toFixed(2),(s.shadowOffsetX||0).toFixed(2),(s.shadowOffsetY||0).toFixed(2),u[0],u[1]].join(",")),h=n.shadowCache,p=h[c];if(!p){var f=e.getGlobalScale(),v=f[0],y=f[1];if(!v||!y)return;var _=r.shadowOffsetX||0,x=r.shadowOffsetY||0,b=r.shadowBlur,S=Tp(r.shadowColor),w=S.opacity,M=S.color;p=n.zrId+"-s"+n.shadowIdx++,n.defs[p]=Gs("filter",p,{id:p,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Gs("feDropShadow","",{dx:_/v,dy:x/y,stdDeviation:b/2/v+" "+b/2/y,"flood-color":M,"flood-opacity":w})]),h[c]=p}t.filter=Tw(p)}}(n,e,r)}function GM(e,t){var n=EP(t);n&&(n.each(function(t,n){null!=t&&(e[(Ga+n).toLowerCase()]=t+"")}),t.isSilent()&&(e[Ga+"silent"]="true"))}function GA(e){return Tf(e[0]-1)&&Tf(e[1])&&Tf(e[2])&&Tf(e[3]-1)}function GC(e,t,n){var r;if(t&&!(Tf((r=t)[4])&&Tf(r[5])&&GA(t))){var i,a=n?10:1e4;e.transform=GA(t)?"translate("+Gx(t[4]*a)/a+" "+Gx(t[5]*a)/a+")":"matrix("+Tg((i=t)[0])+","+Tg(i[1])+","+Tg(i[2])+","+Tg(i[3])+","+Tm(i[4])+","+Tm(i[5])+")"}}function GT(e,t,n){for(var r=e.points,i=[],a=0;a<r.length;a++)i.push(Gx(r[a][0]*n)/n),i.push(Gx(r[a][1]*n)/n);t.points=i.join(" ")}function GE(e){return!e.smooth}var GI={circle:[function(e){var t=MS(e,function(e){return"string"==typeof e?[e,e]:e});return function(e,n,r){for(var i=0;i<t.length;i++){var a=t[i],s=e[a[0]];null!=s&&(n[a[1]]=Gx(s*r)/r)}}}(["cx","cy","r"])],polyline:[GT,GE],polygon:[GT,GE]};function GD(e,t){var n=e.style,r=e.shape,i=GI[e.type],a={},s=t.animation,u="path",c=e.style.strokePercent,h=t.compress&&TM(e)||4;if(!i||t.willUpdate||i[1]&&!i[1](r)||s&&function(e){for(var t=e.animators,n=0;n<t.length;n++)if("shape"===t[n].targetName)return!0;return!1}(e)||c<1){var p=!e.path||e.shapeChanged();!e.path&&e.createPathProxy();var f=e.path;p&&(f.beginPath(),e.buildPath(f,e.shape),e.pathUpdated());var v=f.getVersion(),y=e.__svgPathBuilder;(e.__svgPathVersion!==v||!y||c!==e.__svgPathStrokePercent)&&(!y&&(y=e.__svgPathBuilder=new H8),y.reset(h),f.rebuildPath(y,c),y.generateStr(),e.__svgPathVersion=v,e.__svgPathStrokePercent=c),a.d=y.getStr()}else{u=e.type;var _=Math.pow(10,h);i[0](r,a,_)}return GC(a,e.transform),Gw(a,n,e,t),GM(a,e),t.animation&&Gy(e,a,t),t.emphasis&&function(e,t,n){if(!e.ignore){if(e.isSilent()){var r={"pointer-events":"none"};G_(r,t,n,!0)}else{var i=e.states.emphasis&&e.states.emphasis.style?e.states.emphasis.style:{},a=i.fill;if(!a){var s=e.style&&e.style.fill,u=e.states.select&&e.states.select.style&&e.states.select.style.fill,c=e.currentStates.indexOf("select")>=0&&u||s;c&&(a=Th(c))}var h=i.lineWidth;h&&(h/=!i.strokeNoScale&&e.transform?e.transform[0]:1);var r={cursor:"pointer"};a&&(r.fill=a),i.stroke&&(r.stroke=i.stroke),h&&(r["stroke-width"]=h),G_(r,t,n,!0)}}}(e,a,t),Gs(u,e.id+"",a)}function GP(e,t){if(e instanceof DR)return GD(e,t);if(e instanceof DF)return function(e,t){var n,r=e.style,i=r.image;if(i&&!MP(i)){;if((n=i)&&MP(n.src))i=i.src;else GS(i)&&(i=i.toDataURL())}if(!!i){var a=r.x||0,s=r.y||0,u={href:i,width:r.width,height:r.height};return a&&(u.x=a),s&&(u.y=s),GC(u,e.transform),Gw(u,r,e,t),GM(u,e),t.animation&&Gy(e,u,t),Gs("image",e.id+"",u)}}(e,t);if(e instanceof DO)return function(e,t){var n,r,i,a=e.style,s=a.text;if(null!=s&&(s+=""),!(!s||isNaN(a.x)||isNaN(a.y))){var u=a.font||w3,c=a.x||0;var h=(n=a.y||0,r=Ec(u),"top"===(i=a.textBaseline)?n+=r/2:"bottom"===i&&(n-=r/2),n),p={"dominant-baseline":"central","text-anchor":Tv[a.textAlign]||a.textAlign};if(D1(a)){var f="",v=a.fontStyle,y=D$(a.fontSize);if(!parseFloat(y))return;var _=a.fontFamily||w2,x=a.fontWeight;f+="font-size:"+y+";font-family:"+_+";",v&&"normal"!==v&&(f+="font-style:"+v+";"),x&&"normal"!==x&&(f+="font-weight:"+x+";"),p.style=f}else p.style="font: "+u;return s.match(/\s/)&&(p["xml:space"]="preserve"),c&&(p.x=c),h&&(p.y=h),GC(p,e.transform),Gw(p,a,e,t),GM(p,e),t.animation&&Gy(e,p,t),Gs("text",e.id+"",p,void 0,s)}}(e,t)}function GR(e,t,n,r){var i,a=e[n],s={gradientUnits:a.global?"userSpaceOnUse":"objectBoundingBox"};if(Tx(a))i="linearGradient",s.x1=a.x,s.y1=a.y,s.x2=a.x2,s.y2=a.y2;else{if(!Tb(a))return;i="radialGradient",s.cx=MV(a.x,.5),s.cy=MV(a.y,.5),s.r=MV(a.r,.5)}for(var u=a.colorStops,c=[],h=0,p=u.length;h<p;++h){var f=100*Tm(u[h].offset)+"%",v=Tp(u[h].color),y=v.color,_=v.opacity,x={offset:f};x["stop-color"]=y,_<1&&(x["stop-opacity"]=_),c.push(Gs("stop",h+"",x))}var b=Gl(Gs(i,"",s,c)),S=r.gradientCache,w=S[b];!w&&(w=r.zrId+"-g"+r.gradientIdx++,S[b]=w,s.id=w,r.defs[w]=Gs(i,w,s,c)),t[n]=Tw(w)}function GL(e,t,n,r){var i,a,s,u=e.style[n],c=e.getBoundingRect(),h={},p=u.repeat,f="no-repeat"===p,v="repeat-x"===p,y="repeat-y"===p;if(Ty(u)){var _,x=u.imageWidth,b=u.imageHeight,S=void 0,w=u.image;if(MP(w))S=w;else{;if((_=w)&&MP(_.src))S=w.src;else GS(w)&&(S=w.toDataURL())}if("undefined"==typeof Image){var M="Image width/height must been given explictly in svg-ssr renderer.";MY(x,M),MY(b,M)}else if(null==x||null==b){var A=function(e,t){if(e){var n=e.elm,r=x||t.width,i=b||t.height;"pattern"===e.tag&&(v?(i=1,r/=c.width):y&&(r=1,i/=c.height)),e.attrs.width=r,e.attrs.height=i,n&&(n.setAttribute("width",r),n.setAttribute("height",i))}},C=ID(S,null,e,function(e){f||A(I,e),A(i,e)});C&&C.width&&C.height&&(x=x||C.width,b=b||C.height)}i=Gs("image","img",{href:S,width:x,height:b}),h.width=x,h.height=b}else u.svgElement&&(i=Mh(u.svgElement),h.width=u.svgWidth,h.height=u.svgHeight);if(!!i){f?a=s=1:v?(s=1,a=h.width/c.width):y?(a=1,s=h.height/c.height):h.patternUnits="userSpaceOnUse",null!=a&&!isNaN(a)&&(h.width=a),null!=s&&!isNaN(s)&&(h.height=s);var T=TA(u);T&&(h.patternTransform=T);var I=Gs("pattern","",h,[i]),D=Gl(I),P=r.patternCache,R=P[D];!R&&(R=r.zrId+"-p"+r.patternIdx++,P[D]=R,h.id=R,I=r.defs[R]=Gs("pattern",R,h,[i])),t[n]=Tw(R)}}function GO(e){return document.createTextNode(e)}function Gk(e,t,n){e.insertBefore(t,n)}function GB(e,t){e.removeChild(t)}function GN(e,t){e.appendChild(t)}function GF(e){return e.parentNode}function Gz(e){return e.nextSibling}function GU(e,t){e.textContent=t}var GH=Gs("","");function GG(e){return void 0===e}function GV(e){return void 0!==e}function GW(e,t){var n=e.key===t.key;return e.tag===t.tag&&n}function Gj(e){var t,n=e.children,r=e.tag;if(GV(r)){var i=e.elm=Go(r);if(GJ(GH,e),MI(n))for(t=0;t<n.length;++t){var a=n[t];null!=a&&GN(i,Gj(a))}else GV(e.text)&&!MO(e.text)&&GN(i,GO(e.text))}else e.elm=GO(e.text);return e.elm}function GX(e,t,n,r,i){for(;r<=i;++r){var a=n[r];null!=a&&Gk(e,Gj(a),t)}}function GY(e,t,n,r){for(;n<=r;++n){var i=t[n];null!=i&&(GV(i.tag)?GB(GF(i.elm),i.elm):GB(e,i.elm))}}function GJ(e,t){var n,r=t.elm,i=e&&e.attrs||{},a=t.attrs||{};if(i!==a){for(n in a){var s=a[n];i[n]!==s&&(!0===s?r.setAttribute(n,""):!1===s?r.removeAttribute(n):"style"===n?r.style.cssText=s:120!==n.charCodeAt(0)?r.setAttribute(n,s):"xmlns:xlink"===n||"xmlns"===n?r.setAttributeNS("http://www.w3.org/2000/xmlns/",n,s):58===n.charCodeAt(3)?r.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,s):58===n.charCodeAt(5)?r.setAttributeNS(Gi,n,s):r.setAttribute(n,s))}for(n in i)!(n in a)&&r.removeAttribute(n)}}function GZ(e,t){var n=t.elm=e.elm,r=e.children,i=t.children;if(e!==t)GJ(e,t),GG(t.text)?GV(r)&&GV(i)?r!==i&&!function(e,t,n){for(var r,i,a,s=0,u=0,c=t.length-1,h=t[0],p=t[c],f=n.length-1,v=n[0],y=n[f];s<=c&&u<=f;)null==h?h=t[++s]:null==p?p=t[--c]:null==v?v=n[++u]:null==y?y=n[--f]:GW(h,v)?(GZ(h,v),h=t[++s],v=n[++u]):GW(p,y)?(GZ(p,y),p=t[--c],y=n[--f]):GW(h,y)?(GZ(h,y),Gk(e,h.elm,Gz(p.elm)),h=t[++s],y=n[--f]):(GW(p,v)?(GZ(p,v),Gk(e,p.elm,h.elm),p=t[--c]):(GG(r)&&(r=function(e,t,n){for(var r={},i=t;i<=n;++i){var a=e[i].key;void 0!==a&&(r[a]=i)}return r}(t,s,c)),GG(i=r[v.key])?Gk(e,Gj(v),h.elm):(a=t[i]).tag!==v.tag?Gk(e,Gj(v),h.elm):(GZ(a,v),t[i]=void 0,Gk(e,a.elm,h.elm))),v=n[++u]);(s<=c||u<=f)&&(s>c?GX(e,null==n[f+1]?null:n[f+1].elm,n,u,f):GY(e,t,s,c))}(n,r,i):GV(i)?(GV(e.text)&&GU(n,""),GX(n,null,i,0,i.length-1)):GV(r)?GY(n,r,0,r.length-1):GV(e.text)&&GU(n,""):e.text!==t.text&&(GV(r)&&GY(n,r,0,r.length-1),GU(n,t.text))}var Gq=0,GK=function(){function e(e,t,n){if(this.type="svg",this.refreshHover=GQ("refreshHover"),this.configLayer=GQ("configLayer"),this.storage=t,this._opts=n=Mf({},n),this.root=e,this._id="zr"+Gq++,this._oldVNode=Gc(n.width,n.height),e&&!n.ssr){var r=this._viewport=document.createElement("div");r.style.cssText="position:relative;overflow:hidden";var i=this._svgDom=this._oldVNode.elm=Go("svg");GJ(null,this._oldVNode),r.appendChild(i),e.appendChild(r)}this.resize(n.width,n.height)}return e.prototype.getType=function(){return this.type},e.prototype.getViewportRoot=function(){return this._viewport},e.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},e.prototype.getSvgDom=function(){return this._svgDom},e.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",!function(e,t){if(GW(e,t))GZ(e,t);else{var n=e.elm,r=GF(n);Gj(t),null!==r&&(Gk(r,t.elm,Gz(n)),GY(r,[e],0,0))};}(this._oldVNode,e),this._oldVNode=e}},e.prototype.renderOneToVNode=function(e){return GP(e,Gu(this._id))},e.prototype.renderToVNode=function(e){e=e||{};var t=this.storage.getDisplayList(!0),n=this._width,r=this._height,i=Gu(this._id);i.animation=e.animation,i.willUpdate=e.willUpdate,i.compress=e.compress,i.emphasis=e.emphasis;var a=[],s=this._bgVNode=function(e,t,n,r){var i;if(n&&"none"!==n){if(i=Gs("rect","bg",{width:e,height:t,x:"0",y:"0"}),TS(n))GR({fill:n},i.attrs,"fill",r);else if(T_(n))GL({style:{fill:n},dirty:M6,getBoundingRect:function(){return{width:e,height:t}}},i.attrs,"fill",r);else{var a=Tp(n),s=a.color,u=a.opacity;i.attrs.fill=s,u<1&&(i.attrs["fill-opacity"]=u)}}return i}(n,r,this._backgroundColor,i);s&&a.push(s);var u=e.compress?null:this._mainVNode=Gs("g","main",{},[]);this._paintList(t,i,u?u.children:a),u&&a.push(u);var c=MS(MC(i.defs),function(e){return i.defs[e]});if(c.length&&a.push(Gs("defs","defs",{},c)),e.animation){var h,p,f,v,y,_,x,b,S=(h=i.cssNodes,p=i.cssAnims,y=" {"+(v=(f=f={newline:!0}).newline?"\n":""),_=v+"}",x=MS(MC(h),function(e){return e+y+MS(MC(h[e]),function(t){return t+":"+h[e][t]+";"}).join(v)+_}).join(v),b=MS(MC(p),function(e){return"@keyframes "+e+y+MS(MC(p[e]),function(t){return t+y+MS(MC(p[e][t]),function(n){var r=p[e][t][n];return"d"===n&&(r='path("'+r+'")'),n+":"+r+";"}).join(v)+_}).join(v)+_}).join(v),x||b?["<![CDATA[",x,b,"]]>"].join(v):"");if(S){var w=Gs("style","stl",{},[],S);a.push(w)}}return Gc(n,r,a,e.useViewBox)},e.prototype.renderToString=function(e){return e=e||{},Gl(this.renderToVNode({animation:MV(e.cssAnimation,!0),emphasis:MV(e.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:MV(e.useViewBox,!0)}),{newline:!0})},e.prototype.setBackgroundColor=function(e){this._backgroundColor=e},e.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},e.prototype._paintList=function(e,t,n){for(var r,i,a=e.length,s=[],u=0,c=0,h=0;h<a;h++){var p=e[h];if(!p.invisible){var f=p.__clipPaths,v=f&&f.length||0,y=i&&i.length||0,_=void 0;for(_=Math.max(v-1,y-1);_>=0&&(!f||!i||f[_]!==i[_]);_--);for(var x=y-1;x>_;x--)r=s[--u-1];for(var b=_+1;b<v;b++){var S={};!function(e,t,n){var r=n.clipPathCache,i=n.defs,a=r[e.id];if(!a){var s={id:a=n.zrId+"-c"+n.clipPathIdx++};r[e.id]=a,i[a]=Gs("clipPath",a,s,[GD(e,n)])}t["clip-path"]=Tw(a)}(f[b],S,t);var w=Gs("g","clip-g-"+c++,S,[]);(r?r.children:n).push(w),s[u++]=w,r=w}i=f;var M=GP(p,t);M&&(r?r.children:n).push(M)}}},e.prototype.resize=function(e,t){var n=this._opts,r=this.root,i=this._viewport;if(null!=e&&(n.width=e),null!=t&&(n.height=t),r&&i&&(i.style.display="none",e=Fd(r,0,n),t=Fd(r,1,n),i.style.display=""),this._width!==e||this._height!==t){if(this._width=e,this._height=t,i){var a=i.style;a.width=e+"px",a.height=t+"px"}if(T_(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",e),s.setAttribute("height",t));var u=this._bgVNode&&this._bgVNode.elm;u&&(u.setAttribute("width",e),u.setAttribute("height",t))}}},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},e.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},e.prototype.toDataURL=function(e){var t=this.renderToString(),n="data:image/svg+xml;";return e?(t=TC(t))&&n+"base64,"+t:n+"charset=UTF-8,"+encodeURIComponent(t)},e}();function GQ(e){return function(){}}var G$=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return wJ(t,e),t.prototype.getInitialData=function(e){return z6(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(e){var t=new ES,n=Fo("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);t.add(n),n.setStyle(e.lineStyle);var r=this.getData().getVisual("symbol"),i=this.getData().getVisual("symbolRotate"),a="none"===r?"circle":r,s=.8*e.itemHeight,u=Fo(a,(e.itemWidth-s)/2,(e.itemHeight-s)/2,s,s,e.itemStyle.fill);t.add(u),u.setStyle(e.itemStyle);var c="inherit"===e.iconRotate?i:e.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([e.itemWidth/2,e.itemHeight/2]),a.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),t},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(kD);function G0(e,t){var n=e.mapDimensionsAll("defaultedLabel"),r=n.length;if(1===r){var i=OT(e,t,n[0]);return null!=i?i+"":null}if(r){for(var a=[],s=0;s<n.length;s++)a.push(OT(e,t,n[s]));return a.join(" ")}}function G1(e,t){var n=e.mapDimensionsAll("defaultedLabel");if(!MI(t))return t+"";for(var r=[],i=0;i<n.length;i++){var a=e.getDimensionIndex(n[i]);a>=0&&r.push(t[a])}return r.join(" ")}var G2=function(e){function t(t,n,r,i){var a=e.call(this)||this;return a.updateData(t,n,r,i),a}return wJ(t,e),t.prototype._createSymbol=function(e,t,n,r,i){this.removeAll();var a=Fo(e,-1,-1,2,2,null,i);a.attr({z2:100,culling:!0,scaleX:r[0]/2,scaleY:r[1]/2}),a.drift=G3,this._symbolType=e,this.add(a)},t.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){PT(this.childAt(0))},t.prototype.downplay=function(){PE(this.childAt(0))},t.prototype.setZ=function(e,t){var n=this.childAt(0);n.zlevel=e,n.z=t},t.prototype.setDraggable=function(e,t){var n=this.childAt(0);n.draggable=e,n.cursor=!t&&e?"move":n.cursor},t.prototype.updateData=function(e,n,r,i){this.silent=!1;var a=e.getItemVisual(n,"symbol")||"circle",s=e.hostModel,u=t.getSymbolSize(e,n),c=a!==this._symbolType,h=i&&i.disableAnimation;if(c){var p=e.getItemVisual(n,"symbolKeepAspect");this._createSymbol(a,e,n,u,p)}else{var f=this.childAt(0);f.silent=!1;var v={scaleX:u[0]/2,scaleY:u[1]/2};h?f.attr(v):PQ(f,v,s,n),P5(f)}if(this._updateCommon(e,n,u,r,i),c){var f=this.childAt(0);if(!h){var v={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:f.style.opacity}};f.scaleX=f.scaleY=0,f.style.opacity=0,P$(f,v,s,n)}}h&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(e,t,n,r,i){var a,s,u,c,h,p,f,v,y,_=this.childAt(0),x=e.hostModel;if(r&&(a=r.emphasisItemStyle,s=r.blurItemStyle,u=r.selectItemStyle,c=r.focus,h=r.blurScope,f=r.labelStatesModels,v=r.hoverScale,y=r.cursorStyle,p=r.emphasisDisabled),!r||e.hasItemOption){var b=r&&r.itemModel?r.itemModel:e.getItemModel(t),S=b.getModel("emphasis");a=S.getModel("itemStyle").getItemStyle(),u=b.getModel(["select","itemStyle"]).getItemStyle(),s=b.getModel(["blur","itemStyle"]).getItemStyle(),c=S.get("focus"),h=S.get("blurScope"),p=S.get("disabled"),f=P7(b),v=S.getShallow("scale"),y=b.getShallow("cursor")}var w=e.getItemVisual(t,"symbolRotate");_.attr("rotation",(w||0)*Math.PI/180||0);var M=Fl(e.getItemVisual(t,"symbolOffset"),n);M&&(_.x=M[0],_.y=M[1]),y&&_.attr("cursor",y);var A=e.getItemVisual(t,"style"),C=A.fill;if(_ instanceof DF){var T=_.style;_.useStyle(Mf({image:T.image,x:T.x,y:T.y,width:T.width,height:T.height},A))}else _.__isEmptyBrush?_.useStyle(Mf({},A)):_.useStyle(A),_.style.decal=null,_.setColor(C,i&&i.symbolInnerColor),_.style.strokeNoScale=!0;var I=e.getItemVisual(t,"liftZ"),D=this._z2;null!=I?null==D&&(this._z2=_.z2,_.z2+=I):null!=D&&(_.z2=D,this._z2=null);var P=i&&i.useNameLabel;P8(_,f,{labelFetcher:x,labelDataIndex:t,defaultText:function(t){return P?e.getName(t):G0(e,t)},inheritColor:C,defaultOpacity:A.opacity});this._sizeX=n[0]/2,this._sizeY=n[1]/2;var R=_.ensureState("emphasis");R.style=a,_.ensureState("select").style=u,_.ensureState("blur").style=s;var L=null==v||!0===v?Math.max(1.1,3/this._sizeY):isFinite(v)&&v>0?+v:1;R.scaleX=this._sizeX*L,R.scaleY=this._sizeY*L,this.setSymbolScale(1),PU(this,c,h,p)},t.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},t.prototype.fadeOut=function(e,t,n){var r=this.childAt(0),i=D7(this).dataIndex,a=n&&n.animation;if(this.silent=r.silent=!0,n&&n.fadeLabel){var s=r.getTextContent();s&&P1(s,{style:{opacity:0}},t,{dataIndex:i,removeOpt:a,cb:function(){r.removeTextContent()}})}else r.removeTextContent();P1(r,{style:{opacity:0},scaleX:0,scaleY:0},t,{dataIndex:i,cb:e,removeOpt:a})},t.getSymbolSize=function(e,t){return Fs(e.getItemVisual(t,"symbolSize"))},t}(ES);function G3(e,t){this.parent.drift(e,t)}function G5(e,t,n,r){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(r.isIgnore&&r.isIgnore(n))&&!(r.clipShape&&!r.clipShape.contain(t[0],t[1]))&&"none"!==e.getItemVisual(n,"symbol")}function G4(e){return null!=e&&!MO(e)&&(e={isIgnore:e}),e||{}}function G6(e){var t=e.hostModel,n=t.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),emphasisDisabled:n.get("disabled"),hoverScale:n.get("scale"),labelStatesModels:P7(t),cursorStyle:t.get("cursor")}}var G9=function(){function e(e){this.group=new ES,this._SymbolCtor=e||G2}return e.prototype.updateData=function(e,t){this._progressiveEls=null,t=G4(t);var n=this.group,r=e.hostModel,i=this._data,a=this._SymbolCtor,s=t.disableAnimation,u=G6(e),c={disableAnimation:s},h=t.getSymbolPoint||function(t){return e.getItemLayout(t)};!i&&n.removeAll(),e.diff(i).add(function(r){var i=h(r);if(G5(e,i,r,t)){var s=new a(e,r,u,c);s.setPosition(i),e.setItemGraphicEl(r,s),n.add(s)}}).update(function(p,f){var v=i.getItemGraphicEl(f),y=h(p);if(!G5(e,y,p,t)){n.remove(v);return}var _=e.getItemVisual(p,"symbol")||"circle",x=v&&v.getSymbolType&&v.getSymbolType();if(!v||x&&x!==_)n.remove(v),(v=new a(e,p,u,c)).setPosition(y);else{v.updateData(e,p,u,c);var b={x:y[0],y:y[1]};s?v.attr(b):PQ(v,b,r)}n.add(v),e.setItemGraphicEl(p,v)}).remove(function(e){var t=i.getItemGraphicEl(e);t&&t.fadeOut(function(){n.remove(t)},r)}).execute(),this._getSymbolPoint=h,this._data=e},e.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(t,n){var r=e._getSymbolPoint(n);t.setPosition(r),t.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=G6(e),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(e,t,n){function r(e){!e.isGroup&&(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],n=G4(n);for(var i=e.start;i<e.end;i++){var a=t.getItemLayout(i);if(G5(t,a,i,n)){var s=new this._SymbolCtor(t,i,this._seriesScope);s.traverse(r),s.setPosition(a),this.group.add(s),t.setItemGraphicEl(i,s),this._progressiveEls.push(s)}}},e.prototype.eachRendered=function(e){Nl(this._progressiveEls||this.group,e)},e.prototype.remove=function(e){var t=this.group,n=this._data;n&&e?n.eachItemGraphicEl(function(e){e.fadeOut(function(){t.remove(e)},n.hostModel)}):t.removeAll()},e}();function G8(e,t,n){var r=e.getBaseAxis(),i=e.getOtherAxis(r),a=function(e,t){var n=0,r=e.scale.getExtent();return"start"===t?n=r[0]:"end"===t?n=r[1]:ML(t)&&!isNaN(t)?n=t:r[0]>0?n=r[0]:r[1]<0&&(n=r[1]),n}(i,n),s=r.dim,u=i.dim,c=t.mapDimension(u),h=t.mapDimension(s),p="x"===u||"radius"===u?1:0,f=MS(e.dimensions,function(e){return t.mapDimension(e)}),v=!1,y=t.getCalculationInfo("stackResultDimension");return z5(t,f[0])&&(v=!0,f[0]=y),z5(t,f[1])&&(v=!0,f[1]=y),{dataDimsForPoint:f,valueStart:a,valueAxisDim:u,baseAxisDim:s,stacked:!!v,valueDim:c,baseDim:h,baseDataOffset:p,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function G7(e,t,n,r){var i=NaN;e.stacked&&(i=n.get(n.getCalculationInfo("stackedOverDimension"),r)),isNaN(i)&&(i=e.valueStart);var a=e.baseDataOffset,s=[];return s[a]=n.get(e.baseDim,r),s[1-a]=i,t.dataToPoint(s)}var Ve=Math.min,Vt=Math.max;function Vn(e,t){return isNaN(e)||isNaN(t)}function Vr(e,t,n,r,i,a,s,u,c){for(var h,p,f,v,y,_,x=n,b=0;b<r;b++){var S=t[2*x],w=t[2*x+1];if(x>=i||x<0)break;if(Vn(S,w)){if(c){x+=a;continue}break}if(x===n)e[a>0?"moveTo":"lineTo"](S,w),f=S,v=w;else{var M=S-h,A=w-p;if(M*M+A*A<.5){x+=a;continue}if(s>0){for(var C=x+a,T=t[2*C],I=t[2*C+1];T===S&&I===w&&b<r;)b++,C+=a,x+=a,T=t[2*C],I=t[2*C+1],S=t[2*x],w=t[2*x+1],M=S-h,A=w-p;var D=b+1;if(c)for(;Vn(T,I)&&D<r;)D++,C+=a,T=t[2*C],I=t[2*C+1];var P=.5,R=0,L=0,O=void 0,k=void 0;if(D>=r||Vn(T,I))y=S,_=w;else{R=T-h,L=I-p;var B=S-h,N=T-S,F=w-p,z=I-w,U=void 0,H=void 0;if("x"===u){U=Math.abs(B),H=Math.abs(N);var G=R>0?1:-1;y=S-G*U*s,_=w,O=S+G*H*s,k=w}else if("y"===u){U=Math.abs(F),H=Math.abs(z);var V=L>0?1:-1;y=S,_=w-V*U*s,O=S,k=w+V*H*s}else U=Math.sqrt(B*B+F*F),y=S-R*s*(1-(P=(H=Math.sqrt(N*N+z*z))/(H+U))),_=w-L*s*(1-P),O=S+R*s*P,k=w+L*s*P,O=Ve(O,Vt(T,S)),k=Ve(k,Vt(I,w)),O=Vt(O,Ve(T,S)),k=Vt(k,Ve(I,w)),R=O-S,L=k-w,y=S-R*U/H,_=w-L*U/H,y=Ve(y,Vt(h,S)),_=Ve(_,Vt(p,w)),y=Vt(y,Ve(h,S)),_=Vt(_,Ve(p,w)),R=S-y,L=w-_,O=S+R*H/U,k=w+L*H/U}e.bezierCurveTo(f,v,y,_,S,w),f=O,v=k}else e.lineTo(S,w)}h=S,p=w,x+=a}return b}var Vi=function(){this.smooth=0,this.smoothConstraint=!0},Va=function(e){function t(t){var n=e.call(this,t)||this;return n.type="ec-polyline",n}return wJ(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Vi},t.prototype.buildPath=function(e,t){var n=t.points,r=0,i=n.length/2;if(t.connectNulls){for(;i>0&&Vn(n[2*i-2],n[2*i-1]);i--);for(;r<i&&Vn(n[2*r],n[2*r+1]);r++);}for(;r<i;)r+=Vr(e,n,r,i,i,1,t.smooth,t.smoothMonotone,t.connectNulls)+1},t.prototype.getPointOn=function(e,t){!this.path&&(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n,r,i=this.path.data,a=Dv.CMD,s="x"===t,u=[],c=0;c<i.length;){var h=i[c++],p=void 0,f=void 0,v=void 0,y=void 0,_=void 0,x=void 0,b=void 0;switch(h){case a.M:n=i[c++],r=i[c++];break;case a.L:if(p=i[c++],f=i[c++],(b=s?(e-n)/(p-n):(e-r)/(f-r))<=1&&b>=0){var S=s?(f-r)*b+r:(p-n)*b+n;return s?[e,S]:[S,e]}n=p,r=f;break;case a.C:p=i[c++],f=i[c++],v=i[c++],y=i[c++],_=i[c++],x=i[c++];var w=s?CO(n,p,v,_,e,u):CO(r,f,y,x,e,u);if(w>0)for(var M=0;M<w;M++){var A=u[M];if(A<=1&&A>=0){var S=s?CR(r,f,y,x,A):CR(n,p,v,_,A);return s?[e,S]:[S,e]}}n=_,r=x}}},t}(DR),Vo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t}(Vi),Vs=function(e){function t(t){var n=e.call(this,t)||this;return n.type="ec-polygon",n}return wJ(t,e),t.prototype.getDefaultShape=function(){return new Vo},t.prototype.buildPath=function(e,t){var n=t.points,r=t.stackedOnPoints,i=0,a=n.length/2,s=t.smoothMonotone;if(t.connectNulls){for(;a>0&&Vn(n[2*a-2],n[2*a-1]);a--);for(;i<a&&Vn(n[2*i],n[2*i+1]);i++);}for(;i<a;){var u=Vr(e,n,i,a,a,1,t.smooth,s,t.connectNulls);Vr(e,r,i+u-1,u,a,-1,t.stackedOnSmooth,s,t.connectNulls),i+=u+1,e.closePath()}},t}(DR);function Vl(e,t,n,r,i){var a=e.getArea(),s=a.x,u=a.y,c=a.width,h=a.height,p=n.get(["lineStyle","width"])||2;s-=p/2,u-=p/2,c+=p,h+=p,c=Math.ceil(c),s!==Math.floor(s)&&(s=Math.floor(s),c++);var f=new DX({shape:{x:s,y:u,width:c,height:h}});if(t){var v=e.getBaseAxis(),y=v.isHorizontal(),_=v.inverse;y?(_&&(f.shape.x+=c),f.shape.width=0):(!_&&(f.shape.y+=h),f.shape.height=0);var x=MD(i)?function(e){i(e,f)}:null;P$(f,{shape:{width:c,height:h,x:s,y:u}},n,null,r,x)}return f}function Vu(e,t,n){var r=e.getArea(),i=EB(r.r0,1),a=EB(r.r,1),s=new Bu({shape:{cx:EB(e.cx,1),cy:EB(e.cy,1),r0:i,r:a,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});return t&&("angle"===e.getBaseAxis().dim?s.shape.endAngle=r.startAngle:s.shape.r=i,P$(s,{shape:{endAngle:r.endAngle,r:a}},n)),s}function Vc(e,t,n,r,i){if(e){if("polar"===e.type)return Vu(e,t,n);else if("cartesian2d"===e.type)return Vl(e,t,n,r,i)}else;return null}function Vh(e,t){return e.type===t}function Vd(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return;return!0}}function Vp(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,a=0;a<e.length;){var s=e[a++],u=e[a++];!isNaN(s)&&(t=Math.min(s,t),r=Math.max(s,r)),!isNaN(u)&&(n=Math.min(u,n),i=Math.max(u,i))}return[[t,n],[r,i]]}function Vf(e,t){var n=Vp(e),r=n[0],i=n[1],a=Vp(t),s=a[0],u=a[1];return Math.max(Math.abs(r[0]-s[0]),Math.abs(r[1]-s[1]),Math.abs(i[0]-u[0]),Math.abs(i[1]-u[1]))}function Vg(e){return ML(e)?e:e?.5:0}function Vm(e,t,n,r){var i=t.getBaseAxis(),a="x"===i.dim||"radius"===i.dim?0:1,s=[],u=0,c=[],h=[],p=[],f=[];if(r){for(u=0;u<e.length;u+=2)!isNaN(e[u])&&!isNaN(e[u+1])&&f.push(e[u],e[u+1]);e=f}for(u=0;u<e.length-2;u+=2)switch(p[0]=e[u+2],p[1]=e[u+3],h[0]=e[u],h[1]=e[u+1],s.push(h[0],h[1]),n){case"end":c[a]=p[a],c[1-a]=h[1-a],s.push(c[0],c[1]);break;case"middle":var v=(h[a]+p[a])/2,y=[];c[a]=y[a]=v,c[1-a]=h[1-a],y[1-a]=p[1-a],s.push(c[0],c[1]),s.push(y[0],y[1]);break;default:c[a]=h[a],c[1-a]=p[1-a],s.push(c[0],c[1])}return s.push(e[u++],e[u++]),s}function Vv(e,t){return[e[2*t],e[2*t+1]]}function Vy(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<Pa.length;t++)if(e.get([Pa[t],"endLabel","show"]))return!0;return!1}function V_(e,t,n,r){if(!Vh(t,"cartesian2d"))return Vu(t,n,r);var i=r.getModel("endLabel"),a=i.get("valueAnimation"),s=r.getData(),u={lastFrameIndex:0},c=Vy(r)?function(n,r){e._endLabelOnDuring(n,r,s,u,a,i,t)}:null,h=t.getBaseAxis().isHorizontal(),p=Vl(t,n,r,function(){var t=e._endLabel;t&&n&&null!=u.originalX&&t.attr({x:u.originalX,y:u.originalY})},c);if(!r.get("clip",!0)){var f=p.shape,v=Math.max(f.width,f.height);h?(f.y-=v,f.height+=2*v):(f.x-=v,f.width+=2*v)}return c&&c(1,p),p}var Vx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.prototype.init=function(){var e=new ES,t=new G9;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e},t.prototype.render=function(e,t,n){var r,i=this,a=e.coordinateSystem,s=this.group,u=e.getData(),c=e.getModel("lineStyle"),h=e.getModel("areaStyle"),p=u.getLayout("points")||[],f="polar"===a.type,v=this._coordSys,y=this._symbolDraw,_=this._polyline,x=this._polygon,b=this._lineGroup,S=!t.ssr&&e.get("animation"),w=!h.isEmpty(),M=h.get("origin"),A=G8(a,u,M),C=w&&function(e,t,n){if(!n.valueDim)return[];for(var r=t.count(),i=Up(2*r),a=0;a<r;a++){var s=G7(n,e,t,a);i[2*a]=s[0],i[2*a+1]=s[1]}return i}(a,u,A),T=e.get("showSymbol"),I=e.get("connectNulls"),D=T&&!f&&function(e,t,n){var r=e.get("showAllSymbol"),i="auto"===r;if(r&&!i)return;var a=n.getAxesByScale("ordinal")[0];if(!(!a||i&&function(e,t){var n=e.getExtent(),r=Math.abs(n[1]-n[0])/e.scale.count();isNaN(r)&&(r=0);for(var i=t.count(),a=Math.max(1,Math.round(i/5)),s=0;s<i;s+=a)if(1.5*G2.getSymbolSize(t,s)[e.isHorizontal()?1:0]>r)return!1;return!0}(a,t))){var s=t.mapDimension(a.dim),u={};return Mb(a.getViewLabels(),function(e){u[a.scale.getRawOrdinalNumber(e.tickValue)]=1}),function(e){return!u.hasOwnProperty(t.get(s,e))}}}(e,u,a),P=this._data;P&&P.eachItemGraphicEl(function(e,t){e.__temp&&(s.remove(e),P.setItemGraphicEl(t,null))}),!T&&y.remove(),s.add(b);var R=!f&&e.get("step");a&&a.getArea&&e.get("clip",!0)&&(null!=(r=a.getArea()).width?(r.x-=.1,r.y-=.1,r.width+=.2,r.height+=.2):r.r0&&(r.r0-=.5,r.r+=.5)),this._clipShapeForSymbol=r;var L=function(e,t,n){var r,i,a=e.getVisual("visualMeta");if(!a||!a.length||!e.count()||"cartesian2d"!==t.type)return;for(var s=a.length-1;s>=0;s--){var u=e.getDimensionInfo(a[s].dimension);if("x"===(r=u&&u.coordDim)||"y"===r){i=a[s];break}}if(!!i){var c=t.getAxis(r),h=MS(i.stops,function(e){return{coord:c.toGlobalCoord(c.dataToCoord(e.value)),color:e.color}}),p=h.length,f=i.outerColors.slice();p&&h[0].coord>h[p-1].coord&&(h.reverse(),f.reverse());var v=function(e,t){var n,r,i=[],a=e.length;function s(e,t,n){var r=e.coord,i=Tr((n-r)/(t.coord-r),[e.color,t.color]);return{coord:n,color:i}}for(var u=0;u<a;u++){var c=e[u],h=c.coord;if(h<0)n=c;else if(h>t){r?i.push(s(r,c,t)):n&&i.push(s(n,c,0),s(n,c,t));break}else n&&(i.push(s(n,c,0)),n=null),i.push(c),r=c}return i}(h,"x"===r?n.getWidth():n.getHeight()),y=v.length;if(!y&&p)return h[0].coord<0?f[1]?f[1]:h[p-1].color:f[0]?f[0]:h[0].color;var _=v[0].coord-10,x=v[y-1].coord+10,b=x-_;if(b<.001)return"transparent";Mb(v,function(e){e.offset=(e.coord-_)/b}),v.push({offset:y?v[y-1].offset:.5,color:f[1]||"transparent"}),v.unshift({offset:y?v[0].offset:.5,color:f[0]||"transparent"});var S=new BO(0,0,0,0,v,!0);return S[r]=_,S[r+"2"]=x,S}}(u,a,n)||u.getVisual("style")[u.getVisual("drawType")];if(_&&v.type===a.type&&R===this._step){w&&!x?x=this._newPolygon(p,C):x&&!w&&(b.remove(x),x=this._polygon=null),!f&&this._initOrUpdateEndLabel(e,a,Lr(L));var O=b.getClipPath();O?P$(O,{shape:V_(this,a,!1,e).shape},e):b.setClipPath(V_(this,a,!0,e)),T&&y.updateData(u,{isIgnore:D,clipShape:r,disableAnimation:!0,getSymbolPoint:function(e){return[p[2*e],p[2*e+1]]}}),(!Vd(this._stackedOnPoints,C)||!Vd(this._points,p))&&(S?this._doUpdateAnimation(u,C,a,n,R,M,I):(R&&(p=Vm(p,a,R,I),C&&(C=Vm(C,a,R,I))),_.setShape({points:p}),x&&x.setShape({points:p,stackedOnPoints:C})))}else T&&y.updateData(u,{isIgnore:D,clipShape:r,disableAnimation:!0,getSymbolPoint:function(e){return[p[2*e],p[2*e+1]]}}),S&&this._initSymbolLabelAnimation(u,a,r),R&&(p=Vm(p,a,R,I),C&&(C=Vm(C,a,R,I))),_=this._newPolyline(p),w?x=this._newPolygon(p,C):x&&(b.remove(x),x=this._polygon=null),!f&&this._initOrUpdateEndLabel(e,a,Lr(L)),b.setClipPath(V_(this,a,!0,e));var k=e.getModel("emphasis"),B=k.get("focus"),N=k.get("blurScope"),F=k.get("disabled");_.useStyle(Mg(c.getLineStyle(),{fill:"none",stroke:L,lineJoin:"bevel"})),PW(_,e,"lineStyle"),_.style.lineWidth>0&&"bolder"===e.get(["emphasis","lineStyle","width"])&&(_.getState("emphasis").style.lineWidth=+_.style.lineWidth+1),D7(_).seriesIndex=e.seriesIndex,PU(_,B,N,F);var z=Vg(e.get("smooth")),U=e.get("smoothMonotone");if(_.setShape({smooth:z,smoothMonotone:U,connectNulls:I}),x){var H=u.getCalculationInfo("stackedOnSeries"),G=0;x.useStyle(Mg(h.getAreaStyle(),{fill:L,opacity:.7,lineJoin:"bevel",decal:u.getVisual("style").decal})),H&&(G=Vg(H.get("smooth"))),x.setShape({smooth:z,stackedOnSmooth:G,smoothMonotone:U,connectNulls:I}),PW(x,e,"areaStyle"),D7(x).seriesIndex=e.seriesIndex,PU(x,B,N,F)}var V=function(e){i._changePolyState(e)};u.eachItemGraphicEl(function(e){e&&(e.onHoverStateChange=V)}),this._polyline.onHoverStateChange=V,this._data=u,this._coordSys=a,this._stackedOnPoints=C,this._points=p,this._step=R,this._valueOrigin=M,e.get("triggerLineEvent")&&(this.packEventData(e,_),x&&this.packEventData(e,x))},t.prototype.packEventData=function(e,t){D7(t).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},t.prototype.highlight=function(e,t,n,r){var i=e.getData(),a=Io(i,r);if(this._changePolyState("emphasis"),a instanceof Array||null==a||!(a>=0))Nv.prototype.highlight.call(this,e,t,n,r);else{var s=i.getLayout("points"),u=i.getItemGraphicEl(a);if(!u){var c=s[2*a],h=s[2*a+1];if(isNaN(c)||isNaN(h)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,h))return;var p=e.get("zlevel")||0,f=e.get("z")||0;(u=new G2(i,a)).x=c,u.y=h,u.setZ(p,f);var v=u.getSymbolPath().getTextContent();v&&(v.zlevel=p,v.z=f,v.z2=this._polyline.z2+1),u.__temp=!0,i.setItemGraphicEl(a,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}},t.prototype.downplay=function(e,t,n,r){var i=e.getData(),a=Io(i,r);if(this._changePolyState("normal"),null!=a&&a>=0){var s=i.getItemGraphicEl(a);s&&(s.__temp?(i.setItemGraphicEl(a,null),this.group.remove(s)):s.downplay())}else Nv.prototype.downplay.call(this,e,t,n,r)},t.prototype._changePolyState=function(e){var t=this._polygon;PS(this._polyline,e),t&&PS(t,e)},t.prototype._newPolyline=function(e){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new Va({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(t),this._polyline=t,t},t.prototype._newPolygon=function(e,t){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new Vs({shape:{points:e,stackedOnPoints:t},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},t.prototype._initSymbolLabelAnimation=function(e,t,n){var r,i,a=t.getBaseAxis(),s=a.inverse;"cartesian2d"===t.type?(r=a.isHorizontal(),i=!1):"polar"===t.type&&(r="angle"===a.dim,i=!0);var u=e.hostModel,c=u.get("animationDuration");MD(c)&&(c=c(null));var h=u.get("animationDelay")||0,p=MD(h)?h(null):h;e.eachItemGraphicEl(function(e,a){if(e){var u=[e.x,e.y],f=void 0,v=void 0,y=void 0;if(n){if(i){var _=t.pointToCoord(u);r?(f=n.startAngle,v=n.endAngle,y=-_[1]/180*Math.PI):(f=n.r0,v=n.r,y=_[0])}else r?(f=n.x,v=n.x+n.width,y=e.x):(f=n.y+n.height,v=n.y,y=e.y)}var x=v===f?0:(y-f)/(v-f);s&&(x=1-x);var b=MD(h)?h(a):c*x+p,S=e.getSymbolPath(),w=S.getTextContent();e.attr({scaleX:0,scaleY:0}),e.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:b}),w&&w.animateFrom({style:{opacity:0}},{duration:300,delay:b}),S.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(e,t,n){var r=e.getModel("endLabel");if(Vy(e)){var i,a,s,u,c=e.getData(),h=this._polyline,p=c.getLayout("points");if(!p){h.removeTextContent(),this._endLabel=null;return}var f=this._endLabel;!f&&((f=this._endLabel=new D8({z2:200})).ignoreClip=!0,h.setTextContent(this._endLabel),h.disableLabelAnimation=!0);var v=function(e){for(var t,n,r=e.length/2;r>0;r--){;if(t=e[2*r-2],n=e[2*r-1],!(isNaN(t)||isNaN(n)))break}return r-1}(p);if(v>=0){;P8(h,P7(e,"endLabel"),{inheritColor:n,labelFetcher:e,labelDataIndex:v,defaultText:function(e,t,n){return null!=n?G1(c,n):G0(c,e)},enableTextSetter:!0},(i=r,s=(a=t.getBaseAxis()).isHorizontal(),u=a.inverse,{normal:{align:i.get("align")||(s?u?"right":"left":"center"),verticalAlign:i.get("verticalAlign")||(s?"middle":u?"top":"bottom")}})),h.textConfig.position=null}}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(e,t,n,r,i,a,s){var u=this._endLabel,c=this._polyline;if(u){e<1&&null==r.originalX&&(r.originalX=u.x,r.originalY=u.y);var h=n.getLayout("points"),p=n.hostModel,f=p.get("connectNulls"),v=a.get("precision"),y=a.get("distance")||0,_=s.getBaseAxis(),x=_.isHorizontal(),b=_.inverse,S=t.shape,w=b?x?S.x:S.y+S.height:x?S.x+S.width:S.y,M=(x?y:0)*(b?-1:1),A=(x?0:-y)*(b?-1:1),C=x?"x":"y",T=function(e,t,n){for(var r,i,a=e.length/2,s="x"===n?0:1,u=0,c=-1,h=0;h<a;h++){if(!(isNaN(i=e[2*h+s])||isNaN(e[2*h+1-s]))){if(0===h){r=i;continue}if(r<=t&&i>=t||r>=t&&i<=t){c=h;break}u=h,r=i}}return{range:[u,c],t:(t-r)/(i-r)}}(h,w,C),I=T.range,D=I[1]-I[0],P=void 0;if(D>=1){if(D>1&&!f){var R=Vv(h,I[0]);u.attr({x:R[0]+M,y:R[1]+A}),i&&(P=p.getRawValue(I[0]))}else{var R=c.getPointOn(w,C);R&&u.attr({x:R[0]+M,y:R[1]+A});var L=p.getRawValue(I[0]),O=p.getRawValue(I[1]);i&&(P=Im(n,v,L,O,T.t))}r.lastFrameIndex=I[0]}else{var k=1===e||r.lastFrameIndex>0?I[0]:0,R=Vv(h,k);i&&(P=p.getRawValue(k)),u.attr({x:R[0]+M,y:R[1]+A})}if(i){var B=Rs(u);"function"==typeof B.setLabelText&&B.setLabelText(P)}}},t.prototype._doUpdateAnimation=function(e,t,n,r,i,a,s){var u=this._polyline,c=this._polygon,h=e.hostModel,p=function(e,t,n,r,i,a,s,u){for(var c,h,p=(c=e,h=[],t.diff(c).add(function(e){h.push({cmd:"+",idx:e})}).update(function(e,t){h.push({cmd:"=",idx:t,idx1:e})}).remove(function(e){h.push({cmd:"-",idx:e})}).execute(),h),f=[],v=[],y=[],_=[],x=[],b=[],S=[],w=G8(i,t,s),M=e.getLayout("points")||[],A=t.getLayout("points")||[],C=0;C<p.length;C++){var T=p[C],I=!0,D=void 0,P=void 0;switch(T.cmd){case"=":D=2*T.idx,P=2*T.idx1;var R=M[D],L=M[D+1],O=A[P],k=A[P+1];(isNaN(R)||isNaN(L))&&(R=O,L=k),f.push(R,L),v.push(O,k),y.push(n[D],n[D+1]),_.push(r[P],r[P+1]),S.push(t.getRawIndex(T.idx1));break;case"+":var B=T.idx,N=w.dataDimsForPoint,F=i.dataToPoint([t.get(N[0],B),t.get(N[1],B)]);P=2*B,f.push(F[0],F[1]),v.push(A[P],A[P+1]);var z=G7(w,i,t,B);y.push(z[0],z[1]),_.push(r[P],r[P+1]),S.push(t.getRawIndex(B));break;case"-":I=!1}I&&(x.push(T),b.push(b.length))}b.sort(function(e,t){return S[e]-S[t]});for(var U=f.length,H=Up(U),G=Up(U),V=Up(U),W=Up(U),j=[],C=0;C<b.length;C++){var X=b[C],Y=2*C,J=2*X;H[Y]=f[J],H[Y+1]=f[J+1],G[Y]=v[J],G[Y+1]=v[J+1],V[Y]=y[J],V[Y+1]=y[J+1],W[Y]=_[J],W[Y+1]=_[J+1],j[C]=x[X]}return{current:H,next:G,stackedOnCurrent:V,stackedOnNext:W,status:j}}(this._data,e,this._stackedOnPoints,t,this._coordSys,0,this._valueOrigin,0),f=p.current,v=p.stackedOnCurrent,y=p.next,_=p.stackedOnNext;if(i&&(f=Vm(p.current,n,i,s),v=Vm(p.stackedOnCurrent,n,i,s),y=Vm(p.next,n,i,s),_=Vm(p.stackedOnNext,n,i,s)),Vf(f,y)>3e3||c&&Vf(v,_)>3e3){u.stopAnimation(),u.setShape({points:y}),c&&(c.stopAnimation(),c.setShape({points:y,stackedOnPoints:_}));return}u.shape.__points=p.current,u.shape.points=f;var x={shape:{points:y}};p.current!==f&&(x.shape.__points=p.next),u.stopAnimation(),PQ(u,x,h),c&&(c.setShape({points:f,stackedOnPoints:v}),c.stopAnimation(),PQ(c,{shape:{stackedOnPoints:_}},h),u.shape.points!==c.shape.points&&(c.shape.points=u.shape.points));for(var b=[],S=p.status,w=0;w<S.length;w++)if("="===S[w].cmd){var M=e.getItemGraphicEl(S[w].idx1);M&&b.push({el:M,ptIdx:w})}u.animators&&u.animators.length&&u.animators[0].during(function(){c&&c.dirtyShape();for(var e=u.shape.__points,t=0;t<b.length;t++){var n=b[t].el,r=2*b[t].ptIdx;n.x=e[r],n.y=e[r+1],n.markRedraw()}})},t.prototype.remove=function(e){var t=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(e,r){e.__temp&&(t.remove(e),n.setItemGraphicEl(r,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(Nv);function Vb(e,t){return{seriesType:e,plan:kL(),reset:function(e){var n=e.getData(),r=e.coordinateSystem,i=e.pipelineContext,a=t||i.large;if(!!r){var s=MS(r.dimensions,function(e){return n.mapDimension(e)}).slice(0,2),u=s.length,c=n.getCalculationInfo("stackResultDimension");z5(n,s[0])&&(s[0]=c),z5(n,s[1])&&(s[1]=c);var h=n.getStore(),p=n.getDimensionIndex(s[0]),f=n.getDimensionIndex(s[1]);return u&&{progress:function(e,t){for(var n=e.end-e.start,i=a&&Up(n*u),s=[],c=[],v=e.start,y=0;v<e.end;v++){var _=void 0;if(1===u){var x=h.get(p,v);_=r.dataToPoint(x,null,c)}else s[0]=h.get(p,v),s[1]=h.get(f,v),_=r.dataToPoint(s,null,c);a?(i[y++]=_[0],i[y++]=_[1]):t.setItemLayout(v,_.slice())}a&&t.setLayout("points",i)}}}}}}var VS={average:function(e){for(var t=0,n=0,r=0;r<e.length;r++)!isNaN(e[r])&&(t+=e[r],n++);return 0===n?NaN:t/n},sum:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]||0;return t},max:function(e){for(var t=-1/0,n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return isFinite(t)?t:NaN},minmax:function(e){for(var t=-1/0,n=-1/0,r=0;r<e.length;r++){var i=e[r],a=Math.abs(i);a>t&&(t=a,n=i)}return isFinite(n)?n:NaN},nearest:function(e){return e[0]}},Vw=function(e){return Math.round(e.length/2)};function VM(e){return{seriesType:e,reset:function(e,t,n){var r=e.getData(),i=e.get("sampling"),a=e.coordinateSystem,s=r.count();if(s>10&&"cartesian2d"===a.type&&i){var u=a.getBaseAxis(),c=a.getOtherAxis(u),h=u.getExtent(),p=n.getDevicePixelRatio(),f=Math.round(s/(Math.abs(h[1]-h[0])*(p||1)));if(isFinite(f)&&f>1){"lttb"===i&&e.setData(r.lttbDownSample(r.mapDimension(c.dim),1/f));var v=void 0;MP(i)?v=VS[i]:MD(i)&&(v=i),v&&e.setData(r.downSample(r.mapDimension(c.dim),1/f,v,Vw))}}}}}var VA=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.getInitialData=function(e,t){return z6(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,t,n){var r=this.coordinateSystem;if(r&&r.clampData){var i=r.clampData(e),a=r.dataToPoint(i);if(n)Mb(r.getAxes(),function(e,n){if("category"===e.type&&null!=t){var r=e.getTicksCoords(),s=e.getTickModel().get("alignWithLabel"),u=i[n],c="x1"===t[n]||"y1"===t[n];if(c&&!s&&(u+=1),!(r.length<2)){if(2===r.length){a[n]=e.toGlobalCoord(e.getExtent()[c?1:0]);return}for(var h=void 0,p=void 0,f=1,v=0;v<r.length;v++){var y=r[v].coord,_=v===r.length-1?r[v-1].tickValue+f:r[v].tickValue;if(_===u){p=y;break}if(_<u)h=y;else if(null!=h&&_>u){p=(y+h)/2;break}1===v&&(f=_-r[0].tickValue)}null==p&&(h?h&&(p=r[r.length-1].coord):p=r[0].coord),a[n]=e.toGlobalCoord(p)}}});else{var s=this.getData(),u=s.getLayout("offset"),c=s.getLayout("size"),h=r.getBaseAxis().isHorizontal()?0:1;a[h]+=u+c/2}return a}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(kD);kD.registerClass(VA);var VC=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.getInitialData=function(){return z6(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},t.prototype.brushSelector=function(e,t,n){return n.rect(t.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=RM(VA.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(VA),VT=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},VE=function(e){function t(t){var n=e.call(this,t)||this;return n.type="sausage",n}return wJ(t,e),t.prototype.getDefaultShape=function(){return new VT},t.prototype.buildPath=function(e,t){var n=t.cx,r=t.cy,i=Math.max(t.r0||0,0),a=Math.max(t.r,0),s=(a-i)*.5,u=i+s,c=t.startAngle,h=t.endAngle,p=t.clockwise,f=2*Math.PI,v=p?h-c<f:c-h<f;!v&&(c=h-(p?f:-f));var y=Math.cos(c),_=Math.sin(c),x=Math.cos(h),b=Math.sin(h);v?(e.moveTo(y*i+n,_*i+r),e.arc(y*u+n,_*u+r,s,-Math.PI+c,c,!p)):e.moveTo(y*a+n,_*a+r),e.arc(n,r,a,c,h,!p),e.arc(x*u+n,b*u+r,s,h-2*Math.PI,h-Math.PI,!p),0!==i&&e.arc(n,r,i,h,c,p)},t}(DR);function VI(e,t,n){return t*Math.sin(e)*(n?-1:1)}function VD(e,t,n){return t*Math.cos(e)*(n?1:-1)}function VP(e,t,n){var r=e.get("borderRadius");if(null==r)return n?{cornerRadius:0}:null;!MI(r)&&(r=[r,r,r,r]);var i=Math.abs(t.r||0-t.r0||0);return{cornerRadius:MS(r,function(e){return Eh(e,i)})}}var VR=Math.max,VL=Math.min,VO=function(e){function t(){var n=e.call(this)||this;return n.type=t.type,n._isFirstFrame=!0,n}return wJ(t,e),t.prototype.render=function(e,t,n,r){this._model=e,this._removeOnRenderedListener(n),this._updateDrawMode(e);var i=e.get("coordinateSystem");("cartesian2d"===i||"polar"===i)&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,t,n):this._renderNormal(e,t,n,r))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,t){this._progressiveEls=[],this._incrementalRenderLarge(e,t)},t.prototype.eachRendered=function(e){Nl(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t!==this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},t.prototype._renderNormal=function(e,t,n,r){var i,a=this.group,s=e.getData(),u=this._data,c=e.coordinateSystem,h=c.getBaseAxis();"cartesian2d"===c.type?i=h.isHorizontal():"polar"===c.type&&(i="angle"===h.dim);var p=e.isAnimationEnabled()?e:null,f=function(e,t){var n=e.get("realtimeSort",!0),r=t.getBaseAxis();if(n&&"category"===r.type&&"cartesian2d"===t.type)return{baseAxis:r,otherAxis:t.getOtherAxis(r)}}(e,c);f&&this._enableRealtimeSort(f,s,n);var v=e.get("clip",!0)||f,y=function(e,t){var n=e.getArea&&e.getArea();if(Vh(e,"cartesian2d")){var r=e.getBaseAxis();if("category"!==r.type||!r.onBand){var i=t.getLayout("bandWidth");r.isHorizontal()?(n.x-=i,n.width+=2*i):(n.y-=i,n.height+=2*i)}}return n}(c,s);a.removeClipPath();var _=e.get("roundCap",!0),x=e.get("showBackground",!0),b=e.getModel("backgroundStyle"),S=b.get("borderRadius")||0,w=[],M=this._backgroundEls,A=r&&r.isInitSort,C=r&&"changeAxisOrder"===r.type;function T(e){var t=VG[c.type](s,e),n=function(e,t,n){return new("polar"===e.type?Bu:DX)({shape:VZ(t,n,e),silent:!0,z2:0})}(c,i,t);return n.useStyle(b.getItemStyle()),"cartesian2d"===c.type?n.setShape("r",S):n.setShape("cornerRadius",S),w[e]=n,n}s.diff(u).add(function(t){var n=s.getItemModel(t),r=VG[c.type](s,t,n);if(x&&T(t),!!s.hasValue(t)&&!!VH[c.type](r)){var u=!1;v&&(u=Vk[c.type](y,r));var b=VB[c.type](e,s,t,r,i,p,h.model,!1,_);f&&(b.forceLabelAnimation=!0),VW(b,s,t,n,r,e,i,"polar"===c.type),A?b.attr({shape:r}):f?VN(f,p,b,r,t,i,!1,!1):P$(b,{shape:r},e,t),s.setItemGraphicEl(t,b),a.add(b),b.ignore=u}}).update(function(t,n){var r=s.getItemModel(t),I=VG[c.type](s,t,r);if(x){var D=void 0;0===M.length?D=T(n):((D=M[n]).useStyle(b.getItemStyle()),"cartesian2d"===c.type?D.setShape("r",S):D.setShape("cornerRadius",S),w[t]=D);var P=VG[c.type](s,t);PQ(D,{shape:VZ(i,P,c)},p,t)}var R=u.getItemGraphicEl(n);if(!s.hasValue(t)||!VH[c.type](I)){a.remove(R);return}var L=!1;if(v&&(L=Vk[c.type](y,I))&&a.remove(R),R?P5(R):R=VB[c.type](e,s,t,I,i,p,h.model,!!R,_),f&&(R.forceLabelAnimation=!0),C){var O=R.getTextContent();if(O){var k=Rs(O);null!=k.prevValue&&(k.prevValue=k.value)}}else VW(R,s,t,r,I,e,i,"polar"===c.type);A?R.attr({shape:I}):f?VN(f,p,R,I,t,i,!0,C):PQ(R,{shape:I},e,t,null),s.setItemGraphicEl(t,R),R.ignore=L,a.add(R)}).remove(function(t){var n=u.getItemGraphicEl(t);n&&P3(n,e,t)}).execute();var I=this._backgroundGroup||(this._backgroundGroup=new ES);I.removeAll();for(var D=0;D<w.length;++D)I.add(w[D]);a.add(I),this._backgroundEls=w,this._data=s},t.prototype._renderLarge=function(e,t,n){this._clear(),VY(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),VY(t,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)&&Vc(e.coordinateSystem,!1,e),n=this.group;t?n.setClipPath(t):n.removeClipPath()},t.prototype._enableRealtimeSort=function(e,t,n){var r=this;if(!!t.count()){var i=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,n),this._isFirstFrame=!1;else{var a=function(e){var n=t.getItemGraphicEl(e),r=n&&n.shape;return r&&Math.abs(i.isHorizontal()?r.height:r.width)||0};this._onRendered=function(){r._updateSortWithinSameData(t,a,i,n)},n.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,t,n){var r=[];return e.each(e.mapDimension(t.dim),function(e,t){var i=n(t);i=null==i?NaN:i,r.push({dataIndex:t,mappedValue:i,ordinalNumber:e})}),r.sort(function(e,t){return t.mappedValue-e.mappedValue}),{ordinalNumbers:MS(r,function(e){return e.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(e,t,n){for(var r=n.scale,i=e.mapDimension(n.dim),a=Number.MAX_VALUE,s=0,u=r.getOrdinalMeta().categories.length;s<u;++s){var c=e.rawIndexOf(i,r.getRawOrdinalNumber(s)),h=c<0?Number.MIN_VALUE:t(e.indexOfRawIndex(c));if(h>a)return!0;a=h}return!1},t.prototype._isOrderDifferentInView=function(e,t){for(var n=t.scale,r=n.getExtent(),i=Math.max(0,r[0]),a=Math.min(r[1],n.getOrdinalMeta().categories.length-1);i<=a;++i)if(e.ordinalNumbers[i]!==n.getRawOrdinalNumber(i))return!0},t.prototype._updateSortWithinSameData=function(e,t,n,r){if(!!this._isOrderChangedWithinSameData(e,t,n)){var i=this._dataSort(e,n,t);this._isOrderDifferentInView(i,n)&&(this._removeOnRenderedListener(r),r.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:i}))}},t.prototype._dispatchInitSort=function(e,t,n){var r=t.baseAxis,i=this._dataSort(e,r,function(n){return e.get(e.mapDimension(t.otherAxis.dim),n)});n.dispatchAction({type:"changeAxisOrder",componentType:r.dim+"Axis",isInitSort:!0,axisId:r.index,sortInfo:i})},t.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},t.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var t=this.group,n=this._data;e&&e.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(t){P3(t,e,D7(t).dataIndex)})):t.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(Nv),Vk={cartesian2d:function(e,t){var n=t.width<0?-1:1,r=t.height<0?-1:1;n<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,a=e.y+e.height,s=VR(t.x,e.x),u=VL(t.x+t.width,i),c=VR(t.y,e.y),h=VL(t.y+t.height,a),p=u<s,f=h<c;return t.x=p&&s>i?u:s,t.y=f&&c>a?h:c,t.width=p?0:u-s,t.height=f?0:h-c,n<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height),p||f},polar:function(e,t){var n=t.r0<=t.r?1:-1;if(n<0){var r=t.r;t.r=t.r0,t.r0=r}var i=VL(t.r,e.r),a=VR(t.r0,e.r0);t.r=i,t.r0=a;var s=i-a<0;if(n<0){var r=t.r;t.r=t.r0,t.r0=r}return s}},VB={cartesian2d:function(e,t,n,r,i,a,s,u,c){var h=new DX({shape:Mf({},r),z2:1});if(h.__dataIndex=n,h.name="item",a){var p=h.shape;p[i?"height":"width"]=0}return h},polar:function(e,t,n,r,i,a,s,u,c){var h,p,f,v=!i&&c?VE:Bu,y=new v({shape:r,z2:1});y.name="item";var _=VV(i);if(y.calculateTextPosition=(h=_,f=(p=p={isRoundCap:v===VE}).isRoundCap,function(e,t,n){var r=t.position;if(!r||r instanceof Array)return Ed(e,t,n);var i=h(r),a=null!=t.distance?t.distance:5,s=this.shape,u=s.cx,c=s.cy,p=s.r,v=s.r0,y=(p+v)/2,_=s.startAngle,x=s.endAngle,b=(_+x)/2,S=f?Math.abs(p-v)/2:0,w=Math.cos,M=Math.sin,A=u+p*w(_),C=c+p*M(_),T="left",I="top";switch(i){case"startArc":A=u+(v-a)*w(b),C=c+(v-a)*M(b),T="center",I="top";break;case"insideStartArc":A=u+(v+a)*w(b),C=c+(v+a)*M(b),T="center",I="bottom";break;case"startAngle":A=u+y*w(_)+VI(_,a+S,!1),C=c+y*M(_)+VD(_,a+S,!1),T="right",I="middle";break;case"insideStartAngle":A=u+y*w(_)+VI(_,-a+S,!1),C=c+y*M(_)+VD(_,-a+S,!1),T="left",I="middle";break;case"middle":A=u+y*w(b),C=c+y*M(b),T="center",I="middle";break;case"endArc":A=u+(p+a)*w(b),C=c+(p+a)*M(b),T="center",I="bottom";break;case"insideEndArc":A=u+(p-a)*w(b),C=c+(p-a)*M(b),T="center",I="top";break;case"endAngle":A=u+y*w(x)+VI(x,a+S,!0),C=c+y*M(x)+VD(x,a+S,!0),T="left",I="middle";break;case"insideEndAngle":A=u+y*w(x)+VI(x,-a+S,!0),C=c+y*M(x)+VD(x,-a+S,!0),T="right",I="middle";break;default:return Ed(e,t,n)}return(e=e||{}).x=A,e.y=C,e.align=T,e.verticalAlign=I,e}),a){var x=y.shape,b=i?"r":"endAngle",S={};x[b]=i?r.r0:r.startAngle,S[b]=r[b],(u?PQ:P$)(y,{shape:S},a)}return y}};function VN(e,t,n,r,i,a,s,u){var c,h;a?(h={x:r.x,width:r.width},c={y:r.y,height:r.height}):(h={y:r.y,height:r.height},c={x:r.x,width:r.width}),!u&&(s?PQ:P$)(n,{shape:c},t,i,null),(s?PQ:P$)(n,{shape:h},t?e.baseAxis.model:null,i)}function VF(e,t){for(var n=0;n<t.length;n++)if(!isFinite(e[t[n]]))return!0;return!1}var Vz=["x","y","width","height"],VU=["cx","cy","r","startAngle","endAngle"],VH={cartesian2d:function(e){return!VF(e,Vz)},polar:function(e){return!VF(e,VU)}},VG={cartesian2d:function(e,t,n){var r=e.getItemLayout(t),i=n?function(e,t){var n=e.get(["itemStyle","borderColor"]);return n&&"none"!==n?Math.min(e.get(["itemStyle","borderWidth"])||0,isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height)):0}(n,r):0,a=r.width>0?1:-1,s=r.height>0?1:-1;return{x:r.x+a*i/2,y:r.y+s*i/2,width:r.width-a*i,height:r.height-s*i}},polar:function(e,t,n){var r=e.getItemLayout(t);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function VV(e){var t;return t=e?"Arc":"Angle",function(e){switch(e){case"start":case"insideStart":case"end":case"insideEnd":return e+t;default:return e}}}function VW(e,t,n,r,i,a,s,u){var c,h=t.getItemVisual(n,"style");if(u){if(!a.get("roundCap")){var p=e.shape,f=VP(r.getModel("itemStyle"),p,!0);Mf(p,f),e.setShape(p)}}else{var v=r.get(["itemStyle","borderRadius"])||0;e.setShape("r",v)}e.useStyle(h);var y=r.getShallow("cursor");y&&e.attr("cursor",y);var _=u?s?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":s?i.height>=0?"bottom":"top":i.width>=0?"right":"left",x=P7(r);P8(e,x,{labelFetcher:a,labelDataIndex:n,defaultText:G0(a.getData(),n),inheritColor:h.fill,defaultOpacity:h.opacity,defaultOutsidePosition:_});var b=e.getTextContent();if(u&&b){var S=r.get(["label","position"]);e.textConfig.inside="middle"===S||null,!function(e,t,n,r){if(ML(r)){e.setTextConfig({rotation:r});return}if(MI(t)){e.setTextConfig({rotation:0});return}var i,a=e.shape,s=a.clockwise?a.startAngle:a.endAngle,u=a.clockwise?a.endAngle:a.startAngle,c=n(t);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":i=(s+u)/2;break;case"startAngle":case"insideStartAngle":i=s;break;case"endAngle":case"insideEndAngle":i=u;break;default:e.setTextConfig({rotation:0});return}var h=1.5*Math.PI-i;"middle"===c&&h>Math.PI/2&&h<1.5*Math.PI&&(h-=Math.PI),e.setTextConfig({rotation:h})}(e,"outside"===S?_:S,VV(s),r.get(["label","rotate"]))}Rl(b,x,a.getRawValue(n),function(e){return G1(t,e)});var w=r.getModel(["emphasis"]);if(PU(e,w.get("focus"),w.get("blurScope"),w.get("disabled")),PW(e,r),null!=(c=i).startAngle&&null!=c.endAngle&&c.startAngle===c.endAngle)e.style.fill="none",e.style.stroke="none",Mb(e.states,function(e){e.style&&(e.style.fill=e.style.stroke="none")})}var Vj=function(){},VX=function(e){function t(t){var n=e.call(this,t)||this;return n.type="largeBar",n}return wJ(t,e),t.prototype.getDefaultShape=function(){return new Vj},t.prototype.buildPath=function(e,t){for(var n=t.points,r=this.baseDimIdx,i=1-this.baseDimIdx,a=[],s=[],u=this.barWidth,c=0;c<n.length;c+=3)s[r]=u,s[i]=n[c+2],a[r]=n[c+r],a[i]=n[c+i],e.rect(a[0],a[1],s[0],s[1])},t}(DR);function VY(e,t,n,r){var i=e.getData(),a=i.getLayout("valueAxisHorizontal")?1:0,s=i.getLayout("largeDataIndices"),u=i.getLayout("size"),c=e.getModel("backgroundStyle"),h=i.getLayout("largeBackgroundPoints");if(h){var p=new VX({shape:{points:h},incremental:!!r,silent:!0,z2:0});p.baseDimIdx=a,p.largeDataIndices=s,p.barWidth=u,p.useStyle(c.getItemStyle()),t.add(p),n&&n.push(p)}var f=new VX({shape:{points:i.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=a,f.largeDataIndices=s,f.barWidth=u,t.add(f),f.useStyle(i.getVisual("style")),D7(f).seriesIndex=e.seriesIndex,!e.get("silent")&&(f.on("mousedown",VJ),f.on("mousemove",VJ)),n&&n.push(f)}var VJ=Nb(function(e){var t=function(e,t,n){for(var r=e.baseDimIdx,i=1-r,a=e.shape.points,s=e.largeDataIndices,u=[],c=[],h=e.barWidth,p=0,f=a.length/3;p<f;p++){var v=3*p;if(c[r]=h,c[i]=a[v+2],u[r]=a[v+r],u[i]=a[v+i],c[i]<0&&(u[i]+=c[i],c[i]=-c[i]),t>=u[0]&&t<=u[0]+c[0]&&n>=u[1]&&n<=u[1]+c[1])return s[p]}return -1}(this,e.offsetX,e.offsetY);D7(this).dataIndex=t>=0?t:null},30,!1);function VZ(e,t,n){if(Vh(n,"cartesian2d")){var r=n.getArea();return{x:e?t.x:r.x,y:e?r.y:t.y,width:e?t.width:r.width,height:e?r.height:t.height}}var r=n.getArea();return{cx:r.cx,cy:r.cy,r0:e?r.r0:t.r0,r:e?r.r:t.r,startAngle:e?t.startAngle:0,endAngle:e?t.endAngle:2*Math.PI}}var Vq=2*Math.PI,VK=Math.PI/180;function VQ(e,t){return Lu(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function V$(e,t){var n,r,i=VQ(e,t),a=e.get("center"),s=e.get("radius");!MI(s)&&(s=[0,s]);var u=Ek(i.width,t.getWidth()),c=Ek(i.height,t.getHeight()),h=Math.min(u,c),p=Ek(s[0],h/2),f=Ek(s[1],h/2),v=e.coordinateSystem;if(v){var y=v.dataToPoint(a);n=y[0]||0,r=y[1]||0}else!MI(a)&&(a=[a,a]),n=Ek(a[0],u)+i.x,r=Ek(a[1],c)+i.y;return{cx:n,cy:r,r0:p,r:f}}function V0(e,t,n){t.eachSeriesByType(e,function(e){var t=e.getData(),r=t.mapDimension("value"),i=VQ(e,n),a=V$(e,n),s=a.cx,u=a.cy,c=a.r,h=a.r0,p=-e.get("startAngle")*VK,f=e.get("endAngle"),v=e.get("padAngle")*VK;f="auto"===f?p-Vq:-f*VK;var y=e.get("minAngle")*VK+v,_=0;t.each(r,function(e){!isNaN(e)&&_++});var x=t.getSum(r),b=Math.PI/(x||_)*2,S=e.get("clockwise"),w=e.get("roseType"),M=e.get("stillShowZeroSum"),A=t.getDataExtent(r);A[0]=0;var C=S?1:-1,T=[p,f],I=C*v/2;Dm(T,!S),p=T[0],f=T[1];var D=V1(e);D.startAngle=p,D.endAngle=f,D.clockwise=S;var P=Math.abs(f-p),R=P,L=0,O=p;if(t.setLayout({viewRect:i,r:c}),t.each(r,function(e,n){if(isNaN(e)){t.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:S,cx:s,cy:u,r0:h,r:w?NaN:c});return}(r="area"!==w?0===x&&M?b:e*b:P/_)<y?(r=y,R-=y):L+=e;var r,i=O+C*r,a=0,p=0;v>r?p=a=O+C*r/2:(a=O+I,p=i-I),t.setItemLayout(n,{angle:r,startAngle:a,endAngle:p,clockwise:S,cx:s,cy:u,r0:h,r:w?EO(e,A,[h,c]):c}),O=i}),R<Vq&&_){if(R<=.001){var k=P/_;t.each(r,function(e,n){if(!isNaN(e)){var r=t.getItemLayout(n);r.angle=k;var i=0,a=0;k<v?a=i=p+C*(n+.5)*k:(i=p+C*n*k+I,a=p+C*(n+1)*k-I),r.startAngle=i,r.endAngle=a}})}else b=R/L,O=p,t.each(r,function(e,n){if(!isNaN(e)){var r=t.getItemLayout(n),i=r.angle===y?y:e*b,a=0,s=0;i<v?s=a=O+C*i/2:(a=O+I,s=O+C*i-I),r.startAngle=a,r.endAngle=s,O+=C*i}})}})}var V1=Is();function V2(e){return{seriesType:e,reset:function(e,t){var n=t.findComponents({mainType:"legend"});if(!!n&&!!n.length){var r=e.getData();r.filterSelf(function(e){for(var t=r.getName(e),i=0;i<n.length;i++)if(!n[i].isSelected(t))return!1;return!0})}}}}var V3=Math.PI/180;function V5(e,t,n,r,i,a,s,u,c,h){if(!(e.length<2)){for(var p=e.length,f=0;f<p;f++)if("outer"===e[f].position&&"labelLine"===e[f].labelAlignTo){var v=e[f].label.x-h;e[f].linePoints[1][0]+=v,e[f].label.x=h}HV(e,c,c+s)&&!function(e){for(var a={list:[],maxY:0},s={list:[],maxY:0},u=0;u<e.length;u++){if("none"===e[u].labelAlignTo){var c=e[u],h=c.label.y>n?s:a,p=Math.abs(c.label.y-n);if(p>=h.maxY){var f=c.label.x-t-c.len2*i,v=r+c.len,_=Math.abs(f)<v?Math.sqrt(p*p/(1-f*f/v/v)):v;h.rB=_,h.maxY=p}h.list.push(c)}}y(a),y(s)}(e)}function y(e){for(var a=e.rB,s=a*a,u=0;u<e.list.length;u++){var c=e.list[u],h=Math.abs(c.label.y-n),p=r+c.len,f=t+(Math.sqrt(p*p*(1-Math.abs(h*h/s)))+c.len2)*i,v=f-c.label.x,y=c.targetTextWidth-v*i;V4(c,y,!0),c.label.x=f}}}function V4(e,t,n){if(void 0===n&&(n=!1),null==e.labelStyleWidth){var r=e.label,i=r.style,a=e.rect,s=i.backgroundColor,u=i.padding,c=u?u[1]+u[3]:0,h=i.overflow,p=a.width+(s?0:c);if(t<p||n){var f=a.height;if(h&&h.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",t-c);var v=r.getBoundingRect();r.setStyle("width",Math.ceil(v.width)),r.setStyle("backgroundColor",s)}else{var y=t-c,_=t<p?y:n?y>e.unconstrainedWidth?null:y:null;r.setStyle("width",_)}var x=r.getBoundingRect();a.width=x.width;var b=(r.style.margin||0)+2.1;a.height=x.height+b,a.y-=(a.height-f)/2}}}function V6(e){return"center"===e.position}var V9=function(e){function t(t,n,r){var i=e.call(this)||this;i.z2=2;var a=new D8;return i.setTextContent(a),i.updateData(t,n,r,!0),i}return wJ(t,e),t.prototype.updateData=function(e,t,n,r){var i=e.hostModel,a=e.getItemModel(t),s=a.getModel("emphasis"),u=e.getItemLayout(t),c=Mf(VP(a.getModel("itemStyle"),u,!0),u);if(isNaN(c.startAngle)){this.setShape(c);return}if(r){this.setShape(c);var h=i.getShallow("animationType");i.ecModel.ssr?(P$(this,{scaleX:0,scaleY:0},i,{dataIndex:t,isFrom:!0}),this.originX=c.cx,this.originY=c.cy):"scale"===h?(this.shape.r=u.r0,P$(this,{shape:{r:u.r}},i,t)):null!=n?(this.setShape({startAngle:n,endAngle:n}),P$(this,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},i,t)):(this.shape.endAngle=u.startAngle,PQ(this,{shape:{endAngle:u.endAngle}},i,t))}else P5(this),PQ(this,{shape:c},i,t);this.useStyle(e.getItemVisual(t,"style")),PW(this,a);var p=(u.startAngle+u.endAngle)/2,f=i.get("selectedOffset"),v=Math.cos(p)*f,y=Math.sin(p)*f,_=a.getShallow("cursor");_&&this.attr("cursor",_),this._updateLabel(i,e,t),this.ensureState("emphasis").shape=Mf({r:u.r+(s.get("scale")&&s.get("scaleSize")||0)},VP(s.getModel("itemStyle"),u)),Mf(this.ensureState("select"),{x:v,y:y,shape:VP(a.getModel(["select","itemStyle"]),u)}),Mf(this.ensureState("blur"),{shape:VP(a.getModel(["blur","itemStyle"]),u)});var x=this.getTextGuideLine(),b=this.getTextContent();x&&Mf(x.ensureState("select"),{x:v,y:y}),Mf(b.ensureState("select"),{x:v,y:y}),PU(this,s.get("focus"),s.get("blurScope"),s.get("disabled"))},t.prototype._updateLabel=function(e,t,n){var r=t.getItemModel(n),i=r.getModel("labelLine"),a=t.getItemVisual(n,"style"),s=a&&a.fill,u=a&&a.opacity;P8(this,P7(r),{labelFetcher:t.hostModel,labelDataIndex:n,inheritColor:s,defaultOpacity:u,defaultText:e.getFormattedLabel(n,"normal")||t.getName(n)});var c=this.getTextContent();this.setTextConfig({position:null,rotation:null}),c.attr({z2:10});var h=e.get(["label","position"]);if("outside"!==h&&"outer"!==h)this.removeTextGuideLine();else{var p=this.getTextGuideLine();!p&&(p=new B_,this.setTextGuideLine(p)),Hz(this,HU(r),{stroke:s,opacity:MW(i.get(["lineStyle","opacity"]),u,1)})}},t}(Bu),V8=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return wJ(t,e),t.prototype.render=function(e,t,n,r){var i,a=e.getData(),s=this._data,u=this.group;if(!s&&a.count()>0){for(var c=a.getItemLayout(0),h=1;isNaN(c&&c.startAngle)&&h<a.count();++h)c=a.getItemLayout(h);c&&(i=c.startAngle)}if(this._emptyCircleSector&&u.remove(this._emptyCircleSector),0===a.count()&&e.get("showEmptyCircle")){var p=V1(e),f=new Bu({shape:Mf(V$(e,n),p)});f.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,u.add(f)}a.diff(s).add(function(e){var t=new V9(a,e,i);a.setItemGraphicEl(e,t),u.add(t)}).update(function(e,t){var n=s.getItemGraphicEl(t);n.updateData(a,e,i),n.off("click"),u.add(n),a.setItemGraphicEl(e,n)}).remove(function(t){P3(s.getItemGraphicEl(t),e,t)}).execute(),!function(e){var t,n,r=e.getData(),i=[],a=!1,s=(e.get("minShowLabelAngle")||0)*V3,u=r.getLayout("viewRect"),c=r.getLayout("r"),h=u.width,p=u.x,f=u.y,v=u.height;function y(e){e.ignore=!0}r.each(function(e){var u,f,v,_,x=r.getItemGraphicEl(e),b=x.shape,S=x.getTextContent(),w=x.getTextGuideLine(),M=r.getItemModel(e),A=M.getModel("label"),C=A.get("position")||M.get(["emphasis","label","position"]),T=A.get("distanceToLabelLine"),I=A.get("alignTo"),D=Ek(A.get("edgeDistance"),h),P=A.get("bleedMargin"),R=M.getModel("labelLine"),L=R.get("length");L=Ek(L,h);var O=R.get("length2");if(O=Ek(O,h),Math.abs(b.endAngle-b.startAngle)<s){Mb(S.states,y),S.ignore=!0,w&&(Mb(w.states,y),w.ignore=!0);return}if(!!function(e){if(!e.ignore)return!0;for(var t in e.states)if(!1===e.states[t].ignore)return!0;return!1}(S)){var k=(b.startAngle+b.endAngle)/2,B=Math.cos(k),N=Math.sin(k);t=b.cx,n=b.cy;var F="inside"===C||"inner"===C;if("center"===C)u=b.cx,f=b.cy,_="center";else{var z=(F?(b.r+b.r0)/2*B:b.r*B)+t,U=(F?(b.r+b.r0)/2*N:b.r*N)+n;if(u=z+3*B,f=U+3*N,!F){var H=z+B*(L+c-b.r),G=U+N*(L+c-b.r),V=H+(B<0?-1:1)*O;u="edge"===I?B<0?p+D:p+h-D:V+(B<0?-T:T),f=G,v=[[z,U],[H,G],[V,G]]}_=F?"center":"edge"===I?B>0?"right":"left":B>0?"left":"right"}var W=Math.PI,j=0,X=A.get("rotate");if(ML(X))j=W/180*X;else if("center"===C)j=0;else if("radial"===X||!0===X)j=B<0?-k+W:-k;else if("tangential"===X&&"outside"!==C&&"outer"!==C){var Y=Math.atan2(B,N);Y<0&&(Y=2*W+Y),N>0&&(Y=W+Y),j=Y-W}if(a=!!j,S.x=u,S.y=f,S.rotation=j,S.setStyle({verticalAlign:"middle"}),F){S.setStyle({align:_});var J=S.states.select;J&&(J.x+=S.x,J.y+=S.y)}else{var Z=S.getBoundingRect().clone();Z.applyTransform(S.getComputedTransform());var q=(S.style.margin||0)+2.1;Z.y-=q/2,Z.height+=q,i.push({label:S,labelLine:w,position:C,len:L,len2:O,minTurnAngle:R.get("minTurnAngle"),maxSurfaceAngle:R.get("maxSurfaceAngle"),surfaceNormal:new A5(B,N),linePoints:v,textAlign:_,labelDistance:T,labelAlignTo:I,edgeDistance:D,bleedMargin:P,rect:Z,unconstrainedWidth:Z.width,labelStyleWidth:S.style.width})}x.setTextConfig({inside:F})}}),!a&&e.get("avoidLabelOverlap")&&!function(e,t,n,r,i,a,s,u){for(var c=[],h=[],p=Number.MAX_VALUE,f=-Number.MAX_VALUE,v=0;v<e.length;v++){var y=e[v].label;if(!V6(e[v]))y.x<t?(p=Math.min(p,y.x),c.push(e[v])):(f=Math.max(f,y.x),h.push(e[v]))}for(var v=0;v<e.length;v++){var _=e[v];if(!V6(_)&&_.linePoints){if(null!=_.labelStyleWidth)continue;var y=_.label,x=_.linePoints,b=void 0;b="edge"===_.labelAlignTo?y.x<t?x[2][0]-_.labelDistance-s-_.edgeDistance:s+i-_.edgeDistance-x[2][0]-_.labelDistance:"labelLine"===_.labelAlignTo?y.x<t?p-s-_.bleedMargin:s+i-f-_.bleedMargin:y.x<t?y.x-s-_.bleedMargin:s+i-y.x-_.bleedMargin,_.targetTextWidth=b,V4(_,b)}}V5(h,t,n,r,1,i,a,s,u,f),V5(c,t,n,r,-1,i,a,s,u,p);for(var v=0;v<e.length;v++){var _=e[v];if(!V6(_)&&_.linePoints){var y=_.label,x=_.linePoints,S="edge"===_.labelAlignTo,w=y.style.padding,M=w?w[1]+w[3]:0,A=y.style.backgroundColor?0:M,C=_.rect.width+A,T=x[1][0]-x[2][0];S?y.x<t?x[2][0]=s+_.edgeDistance+C+_.labelDistance:x[2][0]=s+i-_.edgeDistance-C-_.labelDistance:(y.x<t?x[2][0]=y.x+_.labelDistance:x[2][0]=y.x-_.labelDistance,x[1][0]=x[2][0]+T),x[1][1]=x[2][1]=y.y}}}(i,t,n,c,h,v,p,f);for(var _=0;_<i.length;_++){var x=i[_],b=x.label,S=x.labelLine,w=isNaN(b.x)||isNaN(b.y);if(b){b.setStyle({align:x.textAlign}),w&&(Mb(b.states,y),b.ignore=!0);var M=b.states.select;M&&(M.x+=b.x,M.y+=b.y)}if(S){var A=x.linePoints;w||!A?(Mb(S.states,y),S.ignore=!0):(HB(A,x.minTurnAngle),!function(e,t,n){if(!(n<=180&&n>0))return;n=n/180*Math.PI,HE.fromArray(e[0]),HI.fromArray(e[1]),HD.fromArray(e[2]),A5.sub(HP,HI,HE),A5.sub(HR,HD,HI);var r=HP.len(),i=HR.len();if(!(r<.001)&&!(i<.001)){if(HP.scale(1/r),HR.scale(1/i),HP.dot(t)<Math.cos(n)){var a=HA(HI.x,HI.y,HD.x,HD.y,HE.x,HE.y,HO,!1);Hk.fromArray(HO);var s=Math.PI/2,u=s+Math.acos(HR.dot(t))-n;if(u>=s)A5.copy(Hk,HD);else{Hk.scaleAndAdd(HR,a/Math.tan(Math.PI/2-u));var c=HD.x!==HI.x?(Hk.x-HI.x)/(HD.x-HI.x):(Hk.y-HI.y)/(HD.y-HI.y);if(isNaN(c))return;c<0?A5.copy(Hk,HI):c>1&&A5.copy(Hk,HD)}Hk.toArray(e[1])}}}(A,x.surfaceNormal,x.maxSurfaceAngle),S.setShape({points:A}),b.__hostTarget.textGuideLineConfig={anchor:new A5(A[0][0],A[0][1])})}}}(e),"expansion"!==e.get("animationTypeUpdate")&&(this._data=a)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,t){var n=t.getData().getItemLayout(0);if(n){var r=e[0]-n.cx,i=e[1]-n.cy,a=Math.sqrt(r*r+i*i);return a<=n.r&&a>=n.r0}},t.type="pie",t}(Nv);function V7(e,t,n){t=MI(t)&&{coordDimensions:t}||Mf({encodeDefine:e.getEncode()},t);var r=e.getSource(),i=new zK(z$(r,t).dimensions,e);return i.initData(r,n),i}var We=function(){function e(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return e.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},e.prototype.containName=function(e){return this._getRawData().indexOfName(e)>=0},e.prototype.indexOfName=function(e){return this._getDataWithEncodedVisual().indexOfName(e)},e.prototype.getItemVisual=function(e,t){return this._getDataWithEncodedVisual().getItemVisual(e,t)},e}(),Wt=Is(),Wn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new We(MT(this.getData,this),MT(this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return V7(this,{coordDimensions:["value"],encodeDefaulter:ME(LR,this)})},t.prototype.getDataParams=function(t){var n=this.getData(),r=Wt(n),i=r.seats;if(!i){var a=[];n.each(n.mapDimension("value"),function(e){a.push(e)}),i=r.seats=EG(a,n.hostModel.get("percentPrecision"))}var s=e.prototype.getDataParams.call(this,t);return s.percent=i[t]||0,s.$vars.push("percent"),s},t.prototype._defaultLabelLine=function(e){E9(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(kD),Wr=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return wJ(t,e),t.prototype.getInitialData=function(e,t){return z6(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},t.prototype.brushSelector=function(e,t,n){return n.point(t.getItemLayout(e))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(kD),Wi=function(){},Wa=function(e){function t(t){var n=e.call(this,t)||this;return n._off=0,n.hoverDataIdx=-1,n}return wJ(t,e),t.prototype.getDefaultShape=function(){return new Wi},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(e,t){var n,r=t.points,i=t.size,a=this.symbolProxy,s=a.shape,u=e.getContext?e.getContext():e,c=u&&i[0]<4,h=this.softClipShape;if(c){this._ctx=u;return}for(this._ctx=null,n=this._off;n<r.length;){var p=r[n++],f=r[n++];if(!(isNaN(p)||isNaN(f))&&(!h||!!h.contain(p,f)))s.x=p-i[0]/2,s.y=f-i[1]/2,s.width=i[0],s.height=i[1],a.buildPath(e,s,!0)}this.incremental&&(this._off=n,this.notClear=!0)},t.prototype.afterBrush=function(){var e,t=this.shape,n=t.points,r=t.size,i=this._ctx,a=this.softClipShape;if(!!i){for(e=this._off;e<n.length;){var s=n[e++],u=n[e++];if(!(isNaN(s)||isNaN(u))&&(!a||!!a.contain(s,u)))i.fillRect(s-r[0]/2,u-r[1]/2,r[0],r[1])}this.incremental&&(this._off=e,this.notClear=!0)}},t.prototype.findDataIndex=function(e,t){for(var n=this.shape,r=n.points,i=n.size,a=Math.max(i[0],4),s=Math.max(i[1],4),u=r.length/2-1;u>=0;u--){var c=2*u,h=r[c]-a/2,p=r[c+1]-s/2;if(e>=h&&t>=p&&e<=h+a&&t<=p+s)return u}return -1},t.prototype.contain=function(e,t){var n=this.transformCoordToLocal(e,t),r=this.getBoundingRect();return(e=n[0],t=n[1],r.contain(e,t))?(this.hoverDataIdx=this.findDataIndex(e,t))>=0:(this.hoverDataIdx=-1,!1)},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var t=this.shape,n=t.points,r=t.size,i=r[0],a=r[1],s=1/0,u=1/0,c=-1/0,h=-1/0,p=0;p<n.length;){var f=n[p++],v=n[p++];s=Math.min(f,s),c=Math.max(f,c),u=Math.min(v,u),h=Math.max(v,h)}e=this._rect=new Cr(s-i/2,u-a/2,c-s+i,h-u+a)}return e},t}(DR),Wo=function(){function e(){this.group=new ES}return e.prototype.updateData=function(e,t){this._clear();var n=this._create();n.setShape({points:e.getLayout("points")}),this._setCommon(n,e,t)},e.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(e){if(null!=e.startIndex){var n=(e.endIndex-e.startIndex)*2,r=8*e.startIndex;t=new Float32Array(t.buffer,r,n)}e.setShape("points",t),e.reset()})},e.prototype.incrementalPrepareUpdate=function(e){this._clear()},e.prototype.incrementalUpdate=function(e,t,n){var r=this._newAdded[0],i=t.getLayout("points"),a=r&&r.shape.points;if(a&&a.length<2e4){var s=a.length,u=new Float32Array(s+i.length);u.set(a),u.set(i,s),r.endIndex=e.end,r.setShape({points:u})}else{this._newAdded=[];var c=this._create();c.startIndex=e.start,c.endIndex=e.end,c.incremental=!0,c.setShape({points:i}),this._setCommon(c,t,n)}},e.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},e.prototype._create=function(){var e=new Wa({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},e.prototype._setCommon=function(e,t,n){var r=t.hostModel;n=n||{};var i=t.getVisual("symbolSize");e.setShape("size",i instanceof Array?i:[i,i]),e.softClipShape=n.clipShape||null,e.symbolProxy=Fo(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var a=e.shape.size[0]<4;e.useStyle(r.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var s=t.getVisual("style"),u=s&&s.fill;u&&e.setColor(u);var c=D7(e);c.seriesIndex=r.seriesIndex,e.on("mousemove",function(t){c.dataIndex=null;var n=e.hoverDataIdx;n>=0&&(c.dataIndex=n+(e.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),Ws=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.render=function(e,t,n){var r=e.getData();this._updateSymbolDraw(r,e).updateData(r,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,t,n){var r=e.getData();this._updateSymbolDraw(r,e).incrementalPrepareUpdate(r),this._finished=!1},t.prototype.incrementalRender=function(e,t,n){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},t.prototype.updateTransform=function(e,t,n){var r=e.getData();if(this.group.dirty(),!this._finished||r.count()>1e4)return{update:!0};var i=Vb("").reset(e,t,n);i.progress&&i.progress({start:0,end:r.count(),count:r.count()},r),this._symbolDraw.updateLayout(r)},t.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},t.prototype._getClipShape=function(e){if(!!e.get("clip",!0)){var t=e.coordinateSystem;return t&&t.getArea&&t.getArea(.1)}},t.prototype._updateSymbolDraw=function(e,t){var n=this._symbolDraw,r=t.pipelineContext.large;return(!n||r!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=r?new Wo:new G9,this._isLargeDraw=r,this.group.removeAll()),this.group.add(n.group),n},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(Nv),Wl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(Lv),Wu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Ih).models[0]},t.type="cartesian2dAxis",t}(Lv);M_(Wu,Uq);var Wc={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Wh=Md({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Wc),Wd=Md({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},Wc),Wp=Md({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},Wd),Wf=Mg({logBase:10},Wd);let Wg={category:Wh,value:Wd,time:Wp,log:Wf};var Wm={value:1,category:1,time:1,log:1};function Wv(e,t,n,r){Mb(Wm,function(i,a){var s=Md(Md({},Wg[a],!0),r,!0),u=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t+"Axis."+a,n}return wJ(n,e),n.prototype.mergeDefaultAndTheme=function(e,t){var n=Lh(this),r=n?Lp(e):{};Md(e,t.getTheme().get(a+"Axis")),Md(e,this.getDefaultOption()),e.type=Wy(e),n&&Ld(e,r,n)},n.prototype.optionUpdated=function(){"category"===this.option.type&&(this.__ordinalMeta=z7.createByAxisModel(this))},n.prototype.getCategories=function(e){var t=this.option;if("category"===t.type)return e?t.data:this.__ordinalMeta.categories},n.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},n.type=t+"Axis."+a,n.defaultOption=s,n}(n);e.registerComponentModel(u)}),e.registerSubTypeDefaulter(t+"Axis",Wy)}function Wy(e){return e.type||(e.data?"category":"value")}var W_=function(){function e(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return e.prototype.getAxis=function(e){return this._axes[e]},e.prototype.getAxes=function(){return MS(this._dimList,function(e){return this._axes[e]},this)},e.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),MM(this.getAxes(),function(t){return t.scale.type===e})},e.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},e}(),Wx=["x","y"];function Wb(e){return"interval"===e.type||"time"===e.type}var WS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=Wx,t}return wJ(t,e),t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,t=this.getAxis("y").scale;if(!Wb(e)||!Wb(t))return;var n=e.getExtent(),r=t.getExtent(),i=this.dataToPoint([n[0],r[0]]),a=this.dataToPoint([n[1],r[1]]),s=n[1]-n[0],u=r[1]-r[0];if(!!s&&!!u){var c=(a[0]-i[0])/s,h=(a[1]-i[1])/u,p=i[0]-n[0]*c,f=i[1]-r[0]*h,v=this._transform=[c,0,0,h,p,f];this._invTransform=A2([],v)}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(e){var t=this.getAxis("x"),n=this.getAxis("y");return t.contain(t.toLocalCoord(e[0]))&&n.contain(n.toLocalCoord(e[1]))},t.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},t.prototype.containZone=function(e,t){var n=this.dataToPoint(e),r=this.dataToPoint(t),i=this.getArea(),a=new Cr(n[0],n[1],r[0]-n[0],r[1]-n[1]);return i.intersect(a)},t.prototype.dataToPoint=function(e,t,n){n=n||[];var r=e[0],i=e[1];if(this._transform&&null!=r&&isFinite(r)&&null!=i&&isFinite(i))return Ax(n,e,this._transform);var a=this.getAxis("x"),s=this.getAxis("y");return n[0]=a.toGlobalCoord(a.dataToCoord(r,t)),n[1]=s.toGlobalCoord(s.dataToCoord(i,t)),n},t.prototype.clampData=function(e,t){var n=this.getAxis("x").scale,r=this.getAxis("y").scale,i=n.getExtent(),a=r.getExtent(),s=n.parse(e[0]),u=r.parse(e[1]);return(t=t||[])[0]=Math.min(Math.max(Math.min(i[0],i[1]),s),Math.max(i[0],i[1])),t[1]=Math.min(Math.max(Math.min(a[0],a[1]),u),Math.max(a[0],a[1])),t},t.prototype.pointToData=function(e,t){var n=[];if(this._invTransform)return Ax(n,e,this._invTransform);var r=this.getAxis("x"),i=this.getAxis("y");return n[0]=r.coordToData(r.toLocalCoord(e[0]),t),n[1]=i.coordToData(i.toLocalCoord(e[1]),t),n},t.prototype.getOtherAxis=function(e){return this.getAxis("x"===e.dim?"y":"x")},t.prototype.getArea=function(e){e=e||0;var t=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),r=Math.min(t[0],t[1])-e,i=Math.min(n[0],n[1])-e,a=Math.max(t[0],t[1])-r+e,s=Math.max(n[0],n[1])-i+e;return new Cr(r,i,a,s)},t}(W_),Ww=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r)||this;return s.index=0,s.type=i||"value",s.position=a||"bottom",s}return wJ(t,e),t.prototype.isHorizontal=function(){var e=this.position;return"top"===e||"bottom"===e},t.prototype.getGlobalExtent=function(e){var t=this.getExtent();return t[0]=this.toGlobalCoord(t[0]),t[1]=this.toGlobalCoord(t[1]),e&&t[0]>t[1]&&t.reverse(),t},t.prototype.pointToData=function(e,t){return this.coordToData(this.toLocalCoord(e["x"===this.dim?0:1]),t)},t.prototype.setCategorySortInfo=function(e){if("category"!==this.type)return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},t}(Hv);function WM(e,t,n){n=n||{};var r=e.coordinateSystem,i=t.axis,a={},s=i.getAxesOnZeroOf()[0],u=i.position,c=s?"onZero":u,h=i.dim,p=r.getRect(),f=[p.x,p.x+p.width,p.y,p.y+p.height],v={left:0,right:1,top:0,bottom:1,onZero:2},y=t.get("offset")||0,_="x"===h?[f[2]-y,f[3]+y]:[f[0]-y,f[1]+y];if(s){var x=s.toGlobalCoord(s.dataToCoord(0));_[v.onZero]=Math.max(Math.min(x,_[1]),_[0])}a.position=["y"===h?_[v[c]]:f[0],"x"===h?_[v[c]]:f[3]],a.rotation=Math.PI/2*("x"===h?0:1);a.labelDirection=a.tickDirection=a.nameDirection=({top:-1,bottom:1,left:-1,right:1})[u],a.labelOffset=s?_[v[u]]-_[v.onZero]:0,t.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),MG(n.labelInside,t.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var b=t.get(["axisLabel","rotate"]);return a.labelRotate="top"===c?-b:b,a.z2=1,a}function WA(e){return"cartesian2d"===e.get("coordinateSystem")}function WC(e){var t={xAxisModel:null,yAxisModel:null};return Mb(t,function(n,r){var i=r.replace(/Model$/,""),a=e.getReferringComponents(i,Ih).models[0];t[r]=a}),t}var WT=Math.log;function WE(e,t,n){var r=Uc.prototype,i=r.getTicks.call(n),a=r.getTicks.call(n,!0),s=i.length-1,u=r.getInterval.call(n),c=UG(e,t),h=c.extent,p=c.fixMin,f=c.fixMax;if("log"===e.type){var v=WT(e.base);h=[WT(h[0])/v,WT(h[1])/v]}e.setExtent(h[0],h[1]),e.calcNiceExtent({splitNumber:s,fixMin:p,fixMax:f});var y=r.getExtent.call(e);p&&(h[0]=y[0]),f&&(h[1]=y[1]);var _=r.getInterval.call(e),x=h[0],b=h[1];if(p&&f)_=(b-x)/s;else if(p)for(b=h[0]+_*s;b<h[1]&&isFinite(b)&&isFinite(h[1]);)_=Un(_),b=h[0]+_*s;else if(f)for(x=h[1]-_*s;x>h[0]&&isFinite(x)&&isFinite(h[0]);)_=Un(_),x=h[1]-_*s;else{e.getTicks().length-1>s&&(_=Un(_));var S=_*s;(x=EB((b=Math.ceil(h[1]/_)*_)-S))<0&&h[0]>=0?(x=0,b=EB(S)):b>0&&h[1]<=0&&(b=0,x=-EB(S))}var w=(i[0].value-a[0].value)/u,M=(i[s].value-a[s].value)/u;r.setExtent.call(e,x+_*w,b+_*M),r.setInterval.call(e,_),(w||M)&&r.setNiceExtent.call(e,x+_,b-_)}var WI=function(){function e(e,t,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=Wx,this._initCartesian(e,t,n),this.model=e}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(e,t){var n=this._axesMap;function r(e){var t,n=MC(e),r=n.length;if(!!r){for(var i=[],a=r-1;a>=0;a--){var s=e[+n[a]],u=s.model,c=s.scale;Ut(c)&&u.get("alignTicks")&&null==u.get("interval")?i.push(s):(UV(c,u),Ut(c)&&(t=s))}i.length&&(!t&&UV((t=i.pop()).scale,t.model),Mb(i,function(e){WE(e.scale,e.model,t.scale)}))}}this._updateScale(e,this.model),r(n.x),r(n.y);var i={};Mb(n.x,function(e){WP(n,"y",e,i)}),Mb(n.y,function(e){WP(n,"x",e,i)}),this.resize(this.model,t)},e.prototype.resize=function(e,t,n){var r=e.getBoxLayoutParams(),i=!n&&e.get("containLabel"),a=Lu(r,{width:t.getWidth(),height:t.getHeight()});this._rect=a;var s=this._axesList;function u(){Mb(s,function(e){var t=e.isHorizontal(),n=t?[0,a.width]:[0,a.height],r=e.inverse?1:0;e.setExtent(n[r],n[1-r]),function(e,t){var n=e.getExtent(),r=n[0]+n[1];e.toGlobalCoord="x"===e.dim?function(e){return e+t}:function(e){return r-e+t},e.toLocalCoord="x"===e.dim?function(e){return e-t}:function(e){return r-e+t}}(e,t?a.x:a.y)})}u(),i&&(Mb(s,function(e){if(!e.model.get(["axisLabel","inside"])){var t=function(e){var t,n,r,i=e.model,a=e.scale;if(!(!i.get(["axisLabel","show"])||a.isBlank())){var s=a.getExtent();n=a instanceof Ul?a.count():(t=a.getTicks()).length;var u=e.getLabelModel(),c=Uj(e),h=1;n>40&&(h=Math.ceil(n/40));for(var p=0;p<n;p+=h){var f=c(t?t[p]:{value:s[0]+p},p),v=function(e,t){var n=t*Math.PI/180,r=e.width,i=e.height,a=r*Math.abs(Math.cos(n))+Math.abs(i*Math.sin(n)),s=r*Math.abs(Math.sin(n))+Math.abs(i*Math.cos(n));return new Cr(e.x,e.y,a,s)}(u.getTextRect(f),u.get("rotate")||0);r?r.union(v):r=v}return r}}(e);if(t){var n=e.isHorizontal()?"height":"width",r=e.model.get(["axisLabel","margin"]);a[n]-=t[n]+r,"top"===e.position?a.y+=t.height+r:"left"===e.position&&(a.x+=t.width+r)}}}),u()),Mb(this._coordsList,function(e){e.calcAffineTransform()})},e.prototype.getAxis=function(e,t){var n=this._axesMap[e];if(null!=n)return n[t||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(e,t){if(null!=e&&null!=t){var n="x"+e+"y"+t;return this._coordsMap[n]}MO(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var r=0,i=this._coordsList;r<i.length;r++)if(i[r].getAxis("x").index===e||i[r].getAxis("y").index===t)return i[r]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(e,t,n){var r=this._findConvertTarget(t);return r.cartesian?r.cartesian.dataToPoint(n):r.axis?r.axis.toGlobalCoord(r.axis.dataToCoord(n)):null},e.prototype.convertFromPixel=function(e,t,n){var r=this._findConvertTarget(t);return r.cartesian?r.cartesian.pointToData(n):r.axis?r.axis.coordToData(r.axis.toLocalCoord(n)):null},e.prototype._findConvertTarget=function(e){var t,n,r=e.seriesModel,i=e.xAxisModel||r&&r.getReferringComponents("xAxis",Ih).models[0],a=e.yAxisModel||r&&r.getReferringComponents("yAxis",Ih).models[0],s=e.gridModel,u=this._coordsList;return r?0>Mv(u,t=r.coordinateSystem)&&(t=null):i&&a?t=this.getCartesian(i.componentIndex,a.componentIndex):i?n=this.getAxis("x",i.componentIndex):a?n=this.getAxis("y",a.componentIndex):s&&s.coordinateSystem===this&&(t=this._coordsList[0]),{cartesian:t,axis:n}},e.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},e.prototype._initCartesian=function(e,t,n){var r=this,i=this,a={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},u={x:0,y:0};if(t.eachComponent("xAxis",c("x"),this),t.eachComponent("yAxis",c("y"),this),!u.x||!u.y){this._axesMap={},this._axesList=[];return}function c(t){return function(n,r){if(!!WD(n,e)){var c=n.get("position");"x"===t?"top"!==c&&"bottom"!==c&&(c=a.bottom?"top":"bottom"):"left"!==c&&"right"!==c&&(c=a.left?"right":"left"),a[c]=!0;var h=new Ww(t,UW(n),[0,0],n.get("type"),c),p="category"===h.type;h.onBand=p&&n.get("boundaryGap"),h.inverse=n.get("inverse"),n.axis=h,h.model=n,h.grid=i,h.index=r,i._axesList.push(h),s[t][r]=h,u[t]++}}}this._axesMap=s,Mb(s.x,function(t,n){Mb(s.y,function(i,a){var s="x"+n+"y"+a,u=new WS(s);u.master=r,u.model=e,r._coordsMap[s]=u,r._coordsList.push(u),u.addAxis(t),u.addAxis(i)})})},e.prototype._updateScale=function(e,t){function n(e,t){Mb(UZ(e,t.dim),function(n){t.scale.unionExtentFromData(e,n)})}Mb(this._axesList,function(e){if(e.scale.setExtent(1/0,-1/0),"category"===e.type){var t=e.model.get("categorySortInfo");e.scale.setSortInfo(t)}}),e.eachSeries(function(e){if(WA(e)){var r=WC(e),i=r.xAxisModel,a=r.yAxisModel;if(!!WD(i,t)&&!!WD(a,t)){var s=this.getCartesian(i.componentIndex,a.componentIndex),u=e.getData(),c=s.getAxis("x"),h=s.getAxis("y");n(u,c),n(u,h)}}},this)},e.prototype.getTooltipAxes=function(e){var t=[],n=[];return Mb(this.getCartesians(),function(r){var i=null!=e&&"auto"!==e?r.getAxis(e):r.getBaseAxis(),a=r.getOtherAxis(i);0>Mv(t,i)&&t.push(i),0>Mv(n,a)&&n.push(a)}),{baseAxes:t,otherAxes:n}},e.create=function(t,n){var r=[];return t.eachComponent("grid",function(i,a){var s=new e(i,t,n);s.name="grid_"+a,s.resize(i,n,!0),i.coordinateSystem=s,r.push(s)}),t.eachSeries(function(e){if(!!WA(e)){var t=WC(e),n=t.xAxisModel,r=t.yAxisModel,i=n.getCoordSysModel(),a=i.coordinateSystem;e.coordinateSystem=a.getCartesian(n.componentIndex,r.componentIndex)}}),r},e.dimensions=Wx,e}();function WD(e,t){return e.getCoordSysModel()===t}function WP(e,t,n,r){n.getAxesOnZeroOf=function(){return i?[i]:[]};var i,a=e[t],s=n.model,u=s.get(["axisLine","onZero"]),c=s.get(["axisLine","onZeroAxisIndex"]);if(!!u){if(null!=c)WR(a[c])&&(i=a[c]);else for(var h in a)if(a.hasOwnProperty(h)&&WR(a[h])&&!r[p(a[h])]){i=a[h];break}i&&(r[p(i)]=!0)}function p(e){return e.dim+"_"+e.index}}function WR(e){var t,n,r;return e&&"category"!==e.type&&"time"!==e.type&&(n=(t=e.scale.getExtent())[0],r=t[1],!(n>0&&r>0||n<0&&r<0))}var WL=Math.PI,WO=function(){function e(e,t){this.group=new ES,this.opt=t,this.axisModel=e,Mg(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new ES({x:t.position[0],y:t.position[1],rotation:t.rotation});n.updateTransform(),this._transformGroup=n}return e.prototype.hasBuilder=function(e){return!!Wk[e]},e.prototype.add=function(e){Wk[e](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(e,t,n){var r,i,a=EW(t-e);return Ej(a)?(i=n>0?"top":"bottom",r="center"):Ej(a-WL)?(i=n>0?"bottom":"top",r="center"):(i="middle",r=a>0&&a<WL?n>0?"right":"left":n>0?"left":"right"),{rotation:a,textAlign:r,textVerticalAlign:i}},e.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},e.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},e}(),Wk={axisLine:function(e,t,n,r){var i=t.get(["axisLine","show"]);if("auto"===i&&e.handleAutoShown&&(i=e.handleAutoShown("axisLine")),!!i){var a=t.axis.getExtent(),s=r.transform,u=[a[0],0],c=[a[1],0],h=u[0]>c[0];s&&(Ax(u,u,s),Ax(c,c,s));var p=Mf({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new Bw({shape:{x1:u[0],y1:u[1],x2:c[0],y2:c[1]},style:p,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});B2(f.shape,f.style.lineWidth),f.anid="line",n.add(f);var v=t.get(["axisLine","symbol"]);if(null!=v){var y=t.get(["axisLine","symbolSize"]);MP(v)&&(v=[v,v]),(MP(y)||ML(y))&&(y=[y,y]);var _=Fl(t.get(["axisLine","symbolOffset"])||0,y),x=y[0],b=y[1];Mb([{rotate:e.rotation+Math.PI/2,offset:_[0],r:0},{rotate:e.rotation-Math.PI/2,offset:_[1],r:Math.sqrt((u[0]-c[0])*(u[0]-c[0])+(u[1]-c[1])*(u[1]-c[1]))}],function(t,r){if("none"!==v[r]&&null!=v[r]){var i=Fo(v[r],-x/2,-b/2,x,b,p.stroke,!0),a=t.r+t.offset,s=h?c:u;i.attr({rotation:t.rotate,x:s[0]+a*Math.cos(e.rotation),y:s[1]-a*Math.sin(e.rotation),silent:!0,z2:11}),n.add(i)}})}}},axisTickLabel:function(e,t,n,r){var i=function(e,t,n,r){var i=n.axis,a=n.getModel("axisTick"),s=a.get("show");if("auto"===s&&r.handleAutoShown&&(s=r.handleAutoShown("axisTick")),!(!s||i.scale.isBlank())){for(var u=a.getModel("lineStyle"),c=r.tickDirection*a.get("length"),h=Wz(i.getTicksCoords(),t.transform,c,Mg(u.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),p=0;p<h.length;p++)e.add(h[p]);return h}}(n,r,t,e),a=function(e,t,n,r){var i=n.axis;if(!(!MG(r.axisLabelShow,n.get(["axisLabel","show"]))||i.scale.isBlank())){var a=n.getModel("axisLabel"),s=a.get("margin"),u=i.getViewLabels(),c=(MG(r.labelRotate,a.get("rotate"))||0)*WL/180,h=WO.innerTextLayout(r.rotation,c,r.labelDirection),p=n.getCategories&&n.getCategories(!0),f=[],v=WO.isLabelSilent(n),y=n.get("triggerEvent");return Mb(u,function(c,_){var x="ordinal"===i.scale.type?i.scale.getRawOrdinalNumber(c.tickValue):c.tickValue,b=c.formattedLabel,S=c.rawLabel,w=a;if(p&&p[x]){var M=p[x];MO(M)&&M.textStyle&&(w=new Rb(M.textStyle,a,n.ecModel))}var A=w.getTextColor()||n.get(["axisLine","lineStyle","color"]),C=i.dataToCoord(x),T=w.getShallow("align",!0)||h.textAlign,I=MV(w.getShallow("alignMinLabel",!0),T),D=MV(w.getShallow("alignMaxLabel",!0),T),P=w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||h.textVerticalAlign,R=MV(w.getShallow("verticalAlignMinLabel",!0),P),L=MV(w.getShallow("verticalAlignMaxLabel",!0),P),O=new D8({x:C,y:r.labelOffset+r.labelDirection*s,rotation:h.rotation,silent:v,z2:10+(c.level||0),style:Re(w,{text:b,align:0===_?I:_===u.length-1?D:T,verticalAlign:0===_?R:_===u.length-1?L:P,fill:MD(A)?A("category"===i.type?S:"value"===i.type?x+"":x,_):A})});if(O.anid="label_"+x,y){var k=WO.makeAxisEventDataBase(n);k.targetType="axisLabel",k.value=S,k.tickIndex=_,"category"===i.type&&(k.dataIndex=x),D7(O).eventData=k}t.add(O),O.updateTransform(),f.push(O),e.add(O),O.decomposeTransform()}),f}}(n,r,t,e);(function(e,t,n){if(!UJ(e.axis)){var r=e.get(["axisLabel","showMinLabel"]),i=e.get(["axisLabel","showMaxLabel"]);n=n||[];var a=(t=t||[])[0],s=t[1],u=t[t.length-1],c=t[t.length-2],h=n[0],p=n[1],f=n[n.length-1],v=n[n.length-2];!1===r?(WB(a),WB(h)):WN(a,s)&&(r?(WB(s),WB(p)):(WB(a),WB(h))),!1===i?(WB(u),WB(f)):WN(c,u)&&(i?(WB(c),WB(v)):(WB(u),WB(f)))}})(t,a,i),function(e,t,n,r){var i=n.axis,a=n.getModel("minorTick");if(!a.get("show")||i.scale.isBlank())return;var s=i.getMinorTicksCoords();if(!!s.length)for(var u=a.getModel("lineStyle"),c=r*a.get("length"),h=Mg(u.getLineStyle(),Mg(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),p=0;p<s.length;p++){for(var f=Wz(s[p],t.transform,c,h,"minorticks_"+p),v=0;v<f.length;v++)e.add(f[v])}}(n,r,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])&&HW(HH(MS(a,function(e){return{label:e,priority:e.z2,defaultAttr:{ignore:e.ignore}}})))},axisName:function(e,t,n,r){var i,a,s=MG(e.axisName,t.get("name"));if(!!s){var u=t.get("nameLocation"),c=e.nameDirection,h=t.getModel("nameTextStyle"),p=t.get("nameGap")||0,f=t.axis.getExtent(),v=f[0]>f[1]?-1:1,y=["start"===u?f[0]-v*p:"end"===u?f[1]+v*p:(f[0]+f[1])/2,WF(u)?e.labelOffset+c*p:0],_=t.get("nameRotate");null!=_&&(_=_*WL/180),WF(u)?i=WO.innerTextLayout(e.rotation,null!=_?_:e.rotation,c):(i=function(e,t,n,r){var i,a,s=EW(n-e),u=r[0]>r[1],c="start"===t&&!u||"start"!==t&&u;return Ej(s-WL/2)?(a=c?"bottom":"top",i="center"):Ej(s-1.5*WL)?(a=c?"top":"bottom",i="center"):(a="middle",i=s<1.5*WL&&s>WL/2?c?"left":"right":c?"right":"left"),{rotation:s,textAlign:i,textVerticalAlign:a}}(e.rotation,u,_||0,f),null!=(a=e.axisNameAvailableWidth)&&(isFinite(a=Math.abs(a/Math.sin(i.rotation)))||(a=null)));var x=h.getFont(),b=t.get("nameTruncate",!0)||{},S=b.ellipsis,w=MG(e.nameTruncateMaxWidth,b.maxWidth,a),M=new D8({x:y[0],y:y[1],rotation:i.rotation,silent:WO.isLabelSilent(t),style:Re(h,{text:s,font:x,overflow:"truncate",width:w,ellipsis:S,fill:h.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:h.get("align")||i.textAlign,verticalAlign:h.get("verticalAlign")||i.textVerticalAlign}),z2:1});if(No({el:M,componentModel:t,itemName:s}),M.__fullText=s,M.anid="name",t.get("triggerEvent")){var A=WO.makeAxisEventDataBase(t);A.targetType="axisName",A.name=s,D7(M).eventData=A}r.add(M),M.updateTransform(),n.add(M),M.decomposeTransform()}}};function WB(e){e&&(e.ignore=!0)}function WN(e,t){var n=e&&e.getBoundingRect().clone(),r=t&&t.getBoundingRect().clone();if(!!n&&!!r){var i=Aq([]);return A0(i,i,-e.rotation),n.applyTransform(AQ([],i,e.getLocalTransform())),r.applyTransform(AQ([],i,t.getLocalTransform())),n.intersect(r)}}function WF(e){return"middle"===e||"center"===e}function Wz(e,t,n,r,i){for(var a=[],s=[],u=[],c=0;c<e.length;c++){var h=e[c].coord;s[0]=h,s[1]=0,u[0]=h,u[1]=n,t&&(Ax(s,s,t),Ax(u,u,t));var p=new Bw({shape:{x1:s[0],y1:s[1],x2:u[0],y2:u[1]},style:r,z2:2,autoBatch:!0,silent:!0});B2(p.shape,p.style.lineWidth),p.anid=i+"_"+e[c].tickValue,a.push(p)}return a}function WU(e,t){return"all"===e||MI(e)&&Mv(e,t)>=0||e===t}function WH(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[WV(e)]}function WG(e){return!!e.get(["handle","show"])}function WV(e){return e.type+"||"+e.id}var WW={},Wj=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.render=function(t,n,r,i){this.axisPointerClass&&function(e){var t=WH(e);if(!!t){var n=t.axisPointerModel,r=t.axis.scale,i=n.option,a=n.get("status"),s=n.get("value");null!=s&&(s=r.parse(s));var u=WG(n);null==a&&(i.status=u?"show":"hide");var c=r.getExtent().slice();c[0]>c[1]&&c.reverse(),(null==s||s>c[1])&&(s=c[1]),s<c[0]&&(s=c[0]),i.value=s,u&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}(t),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,r,!0)},t.prototype.updateAxisPointer=function(e,t,n,r){this._doUpdateAxisPointerClass(e,n,!1)},t.prototype.remove=function(e,t){var n=this._axisPointer;n&&n.remove(t)},t.prototype.dispose=function(t,n){this._disposeAxisPointer(n),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(e,n,r){var i,a=t.getAxisPointerClass(this.axisPointerClass);if(!!a){var s=(i=WH(e))&&i.axisPointerModel;s?(this._axisPointer||(this._axisPointer=new a)).render(e,s,n,r):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},t.registerAxisPointerClass=function(e,t){WW[e]=t},t.getAxisPointerClass=function(e){return e&&WW[e]},t.type="axis",t}(kR),WX=Is();function WY(e,t,n,r){var i=n.axis;if(i.scale.isBlank())return;var a=n.getModel("splitArea"),s=a.getModel("areaStyle"),u=s.get("color"),c=r.coordinateSystem.getRect(),h=i.getTicksCoords({tickModel:a,clamp:!0});if(!!h.length){var p=u.length,f=WX(e).splitAreaColors,v=M1(),y=0;if(f)for(var _=0;_<h.length;_++){var x=f.get(h[_].tickValue);if(null!=x){y=(x+(p-1)*_)%p;break}}var b=i.toGlobalCoord(h[0].coord),S=s.getAreaStyle();u=MI(u)?u:[u];for(var _=1;_<h.length;_++){var w=i.toGlobalCoord(h[_].coord),M=void 0,A=void 0,C=void 0,T=void 0;i.isHorizontal()?(M=b,A=c.y,C=w-M,T=c.height,b=M+C):(M=c.x,A=b,C=c.width,T=w-A,b=A+T);var I=h[_-1].tickValue;null!=I&&v.set(I,y),t.add(new DX({anid:null!=I?"area_"+I:null,shape:{x:M,y:A,width:C,height:T},style:Mg({fill:u[y]},S),autoBatch:!0,silent:!0})),y=(y+1)%p}WX(e).splitAreaColors=v}}function WJ(e){WX(e).splitAreaColors=null}var WZ=["axisLine","axisTickLabel","axisName"],Wq=["splitArea","splitLine","minorSplitLine"],WK=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="CartesianAxisPointer",n}return wJ(t,e),t.prototype.render=function(t,n,r,i){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new ES,this.group.add(this._axisGroup),!!t.get("show")){var s=t.getCoordSysModel(),u=WM(s,t),c=new WO(t,Mf({handleAutoShown:function(e){for(var n=s.coordinateSystem.getCartesians(),r=0;r<n.length;r++)if(Ut(n[r].getOtherAxis(t.axis).scale))return!0;return!1}},u));Mb(WZ,c.add,c),this._axisGroup.add(c.getGroup()),Mb(Wq,function(e){t.get([e,"show"])&&WQ[e](this,this._axisGroup,t,s)},this),!(i&&"changeAxisOrder"===i.type&&i.isInitSort)&&B7(a,this._axisGroup,t),e.prototype.render.call(this,t,n,r,i)}},t.prototype.remove=function(){WJ(this)},t.type="cartesianAxis",t}(Wj),WQ={splitLine:function(e,t,n,r){var i=n.axis;if(!i.scale.isBlank()){var a=n.getModel("splitLine"),s=a.getModel("lineStyle"),u=s.get("color");u=MI(u)?u:[u];for(var c=r.coordinateSystem.getRect(),h=i.isHorizontal(),p=0,f=i.getTicksCoords({tickModel:a}),v=[],y=[],_=s.getLineStyle(),x=0;x<f.length;x++){var b=i.toGlobalCoord(f[x].coord);h?(v[0]=b,v[1]=c.y,y[0]=b,y[1]=c.y+c.height):(v[0]=c.x,v[1]=b,y[0]=c.x+c.width,y[1]=b);var S=p++%u.length,w=new Bw({anid:null!=f[x].tickValue?"line_"+f[x].tickValue:null,autoBatch:!0,shape:{x1:v[0],y1:v[1],x2:y[0],y2:y[1]},style:Mg({stroke:u[S]},_),silent:!0});B2(w.shape,_.lineWidth),t.add(w)}}},minorSplitLine:function(e,t,n,r){var i=n.axis,a=n.getModel("minorSplitLine").getModel("lineStyle"),s=r.coordinateSystem.getRect(),u=i.isHorizontal(),c=i.getMinorTicksCoords();if(!!c.length)for(var h=[],p=[],f=a.getLineStyle(),v=0;v<c.length;v++)for(var y=0;y<c[v].length;y++){var _=i.toGlobalCoord(c[v][y].coord);u?(h[0]=_,h[1]=s.y,p[0]=_,p[1]=s.y+s.height):(h[0]=s.x,h[1]=_,p[0]=s.x+s.width,p[1]=_);var x=new Bw({anid:"minor_line_"+c[v][y].tickValue,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:p[0],y2:p[1]},style:f,silent:!0});B2(x.shape,f.lineWidth),t.add(x)}},splitArea:function(e,t,n,r){WY(e,t,n,r)}},W$=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.type="xAxis",t}(WK),W0=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=W$.type,t}return wJ(t,e),t.type="yAxis",t}(WK),W1=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="grid",t}return wJ(t,e),t.prototype.render=function(e,t){this.group.removeAll(),e.get("show")&&this.group.add(new DX({shape:e.coordinateSystem.getRect(),style:Mg({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(kR),W2={offset:0};function W3(e){e.registerComponentView(W1),e.registerComponentModel(Wl),e.registerCoordinateSystem("cartesian2d",WI),Wv(e,"x",Wu,W2),Wv(e,"y",Wu,W2),e.registerComponentView(W$),e.registerComponentView(W0),e.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}function W5(e){e.eachSeriesByType("radar",function(e){var t=e.getData(),n=[],r=e.coordinateSystem;if(!!r){var i=r.getIndicatorAxes();Mb(i,function(e,a){t.each(t.mapDimension(i[a].dim),function(e,t){n[t]=n[t]||[];var i=r.dataToPoint(e,a);n[t][a]=W4(i)?i:function(e){return[e.cx,e.cy]}(r)})}),t.each(function(e){var i=MA(n[e],function(e){return W4(e)})||function(e){return[e.cx,e.cy]}(r);n[e].push(i.slice()),t.setItemLayout(e,n[e])})}})}function W4(e){return!isNaN(e[0])&&!isNaN(e[1])}function W6(e){return[e.cx,e.cy]}function W9(e){var t=e.polar;if(t){!MI(t)&&(t=[t]);var n=[];Mb(t,function(t,r){t.indicator?(t.type&&!t.shape&&(t.shape=t.type),e.radar=e.radar||[],!MI(e.radar)&&(e.radar=[e.radar]),e.radar.push(t)):n.push(t)}),e.polar=n}Mb(e.series,function(e){e&&"radar"===e.type&&e.polarIndex&&(e.radarIndex=e.polarIndex)})}var W8=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.render=function(e,t,n){var r=e.coordinateSystem,i=this.group,a=e.getData(),s=this._data;function u(t,n,r,i,a,s){r.removeAll();for(var u=0;u<n.length-1;u++){var c=function(e,t){var n=e.getItemVisual(t,"symbol")||"circle";if("none"!==n){var r=Fs(e.getItemVisual(t,"symbolSize")),i=Fo(n,-1,-1,2,2),a=e.getItemVisual(t,"symbolRotate")||0;return i.attr({style:{strokeNoScale:!0},z2:100,scaleX:r[0]/2,scaleY:r[1]/2,rotation:a*Math.PI/180||0}),i}}(i,a);c&&(c.__dimIdx=u,t[u]?(c.setPosition(t[u]),tf[s?"initProps":"updateProps"](c,{x:n[u][0],y:n[u][1]},e,a)):c.setPosition(n[u]),r.add(c))}}function c(e){return MS(e,function(e){return[r.cx,r.cy]})}a.diff(s).add(function(t){var n=a.getItemLayout(t);if(!!n){var r=new Bm,i=new B_,s={shape:{points:n}};r.shape.points=c(n),i.shape.points=c(n),P$(r,s,e,t),P$(i,s,e,t);var h=new ES,p=new ES;h.add(i),h.add(r),h.add(p),u(i.shape.points,n,p,a,t,!0),a.setItemGraphicEl(t,h)}}).update(function(t,n){var r=s.getItemGraphicEl(n),i=r.childAt(0),c=r.childAt(1),h=r.childAt(2),p={shape:{points:a.getItemLayout(t)}};if(!!p.shape.points)u(i.shape.points,p.shape.points,h,a,t,!1),P5(c),P5(i),PQ(i,p,e),PQ(c,p,e),a.setItemGraphicEl(t,r)}).remove(function(e){i.remove(s.getItemGraphicEl(e))}).execute(),a.eachItemGraphicEl(function(e,t){var n=a.getItemModel(t),r=e.childAt(0),s=e.childAt(1),u=e.childAt(2),c=a.getItemVisual(t,"style"),h=c.fill;i.add(e),r.useStyle(Mg(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:h})),PW(r,n,"lineStyle"),PW(s,n,"areaStyle");var p=n.getModel("areaStyle"),f=p.isEmpty()&&p.parentModel.isEmpty();s.ignore=f,Mb(["emphasis","select","blur"],function(e){var t=n.getModel([e,"areaStyle"]),r=t.isEmpty()&&t.parentModel.isEmpty();s.ensureState(e).ignore=r&&f}),s.useStyle(Mg(p.getAreaStyle(),{fill:h,opacity:.7,decal:c.decal}));var v=n.getModel("emphasis"),y=v.getModel("itemStyle").getItemStyle();u.eachChild(function(e){if(e instanceof DF){var r=e.style;e.useStyle(Mf({image:r.image,x:r.x,y:r.y,width:r.width,height:r.height},c))}else e.useStyle(c),e.setColor(h),e.style.strokeNoScale=!0;e.ensureState("emphasis").style=Mh(y);var i=a.getStore().get(a.getDimensionIndex(e.__dimIdx),t);(null==i||isNaN(i))&&(i=""),P8(e,P7(n),{labelFetcher:a.hostModel,labelDataIndex:t,labelDimIndex:e.__dimIdx,defaultText:i,inheritColor:h,defaultOpacity:c.opacity})}),PU(e,v.get("focus"),v.get("blurScope"),v.get("disabled"))}),this._data=a},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}(Nv),W7=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return wJ(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new We(MT(this.getData,this),MT(this.getRawData,this))},t.prototype.getInitialData=function(e,t){return V7(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(e,t,n){var r=this.getData(),i=this.coordinateSystem.getIndicatorAxes(),a=this.getData().getName(e),s=""===a?this.name:a,u=kg(this,e);return ks("section",{header:s,sortBlocks:!0,blocks:MS(i,function(t){var n=r.get(r.mapDimension(t.dim),e);return ks("nameValue",{markerType:"subItem",markerColor:u,name:t.name,value:n,sortParam:n})})})},t.prototype.getTooltipPosition=function(e){if(null!=e){for(var t=this.getData(),n=this.coordinateSystem,r=t.getValues(MS(n.dimensions,function(e){return t.mapDimension(e)}),e),i=0,a=r.length;i<a;i++)if(!isNaN(r[i])){var s=n.getIndicatorAxes();return n.coordToPoint(s[i].dataToCoord(r[i]),i)}}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t}(kD),je=Wg.value;function jt(e,t){return Mg({show:t},e)}var jn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.optionUpdated=function(){var e=this.get("boundaryGap"),t=this.get("splitNumber"),n=this.get("scale"),r=this.get("axisLine"),i=this.get("axisTick"),a=this.get("axisLabel"),s=this.get("axisName"),u=this.get(["axisName","show"]),c=this.get(["axisName","formatter"]),h=this.get("axisNameGap"),p=this.get("triggerEvent"),f=MS(this.get("indicator")||[],function(f){null!=f.max&&f.max>0&&!f.min?f.min=0:null!=f.min&&f.min<0&&!f.max&&(f.max=0);var v=s;null!=f.color&&(v=Mg({color:f.color},s));var y=Md(Mh(f),{boundaryGap:e,splitNumber:t,scale:n,axisLine:r,axisTick:i,axisLabel:a,name:f.text,showName:u,nameLocation:"end",nameGap:h,nameTextStyle:v,triggerEvent:p},!1);if(MP(c)){var _=y.name;y.name=c.replace("{value}",null!=_?_:"")}else MD(c)&&(y.name=c(y.name,y));var x=new Rb(y,null,this.ecModel);return M_(x,Uq.prototype),x.mainType="radar",x.componentIndex=this.componentIndex,x},this);this._indicatorModels=f},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:Md({lineStyle:{color:"#bbb"}},je.axisLine),axisLabel:jt(je.axisLabel,!1),axisTick:jt(je.axisTick,!1),splitLine:jt(je.splitLine,!0),splitArea:jt(je.splitArea,!0),indicator:[]},t}(Lv),jr=["axisLine","axisTickLabel","axisName"],ji=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.render=function(e,t,n){this.group.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},t.prototype._buildAxes=function(e){var t=e.coordinateSystem;Mb(MS(t.getIndicatorAxes(),function(e){var n=e.model.get("showName")?e.name:"";return new WO(e.model,{axisName:n,position:[t.cx,t.cy],rotation:e.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(e){Mb(jr,e.add,e),this.group.add(e.getGroup())},this)},t.prototype._buildSplitLineAndArea=function(e){var t=e.coordinateSystem,n=t.getIndicatorAxes();if(!!n.length){var r=e.get("shape"),i=e.getModel("splitLine"),a=e.getModel("splitArea"),s=i.getModel("lineStyle"),u=a.getModel("areaStyle"),c=i.get("show"),h=a.get("show"),p=s.get("color"),f=u.get("color"),v=MI(p)?p:[p],y=MI(f)?f:[f],_=[],x=[];if("circle"===r){for(var b=n[0].getTicksCoords(),S=t.cx,w=t.cy,M=0;M<b.length;M++){if(c){var A=O(_,v,M);_[A].push(new k2({shape:{cx:S,cy:w,r:b[M].coord}}))}if(h&&M<b.length-1){var A=O(x,y,M);x[A].push(new Bd({shape:{cx:S,cy:w,r0:b[M].coord,r:b[M+1].coord}}))}}}else{for(var C,T=MS(n,function(e,n){var r=e.getTicksCoords();return C=null==C?r.length-1:Math.min(r.length-1,C),MS(r,function(e){return t.coordToPoint(e.coord,n)})}),I=[],M=0;M<=C;M++){for(var D=[],P=0;P<n.length;P++)D.push(T[P][M]);if(D[0]&&D.push(D[0].slice()),c){var A=O(_,v,M);_[A].push(new B_({shape:{points:D}}))}if(h&&I){var A=O(x,y,M-1);x[A].push(new Bm({shape:{points:D.concat(I)}}))}I=D.slice().reverse()}}var R=s.getLineStyle(),L=u.getAreaStyle();Mb(x,function(e,t){this.group.add(B0(e,{style:Mg({stroke:"none",fill:y[t%y.length]},L),silent:!0}))},this),Mb(_,function(e,t){this.group.add(B0(e,{style:Mg({fill:"none",stroke:v[t%v.length]},R),silent:!0}))},this)}function O(e,t,n){var r=n%t.length;return e[r]=e[r]||[],r}},t.type="radar",t}(kR),ja=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.type="value",i.angle=0,i.name="",i}return wJ(t,e),t}(Hv),jo=function(){function e(e,t,n){this.dimensions=[],this._model=e,this._indicatorAxes=MS(e.getIndicatorModels(),function(e,t){var n="indicator_"+t,r=new ja(n,new Uc);return r.name=e.get("name"),r.model=e,e.axis=r,this.dimensions.push(n),r},this),this.resize(e,n)}return e.prototype.getIndicatorAxes=function(){return this._indicatorAxes},e.prototype.dataToPoint=function(e,t){var n=this._indicatorAxes[t];return this.coordToPoint(n.dataToCoord(e),t)},e.prototype.coordToPoint=function(e,t){var n=this._indicatorAxes[t].angle;return[this.cx+e*Math.cos(n),this.cy-e*Math.sin(n)]},e.prototype.pointToData=function(e){var t,n=e[0]-this.cx,r=e[1]-this.cy,i=Math.sqrt(n*n+r*r);n/=i;for(var a=Math.atan2(-(r/=i),n),s=1/0,u=-1,c=0;c<this._indicatorAxes.length;c++){var h=this._indicatorAxes[c],p=Math.abs(a-h.angle);p<s&&(t=h,u=c,s=p)}return[u,+(t&&t.coordToData(i))]},e.prototype.resize=function(e,t){var n=e.get("center"),r=t.getWidth(),i=t.getHeight(),a=Math.min(r,i)/2;this.cx=Ek(n[0],r),this.cy=Ek(n[1],i),this.startAngle=e.get("startAngle")*Math.PI/180;var s=e.get("radius");(MP(s)||ML(s))&&(s=[0,s]),this.r0=Ek(s[0],a),this.r=Ek(s[1],a),Mb(this._indicatorAxes,function(e,t){e.setExtent(this.r0,this.r);var n=this.startAngle+t*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),e.angle=n},this)},e.prototype.update=function(e,t){var n=this._indicatorAxes,r=this._model;Mb(n,function(e){e.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(t,i){if("radar"===t.get("coordinateSystem")&&e.getComponent("radar",t.get("radarIndex"))===r){var a=t.getData();Mb(n,function(e){e.scale.unionExtentFromData(a,a.mapDimension(e.dim))})}},this);var i=r.get("splitNumber"),a=new Uc;a.setExtent(0,i),a.setInterval(1),Mb(n,function(e,t){WE(e.scale,e.model,a)})},e.prototype.convertToPixel=function(e,t,n){return null},e.prototype.convertFromPixel=function(e,t,n){return null},e.prototype.containPoint=function(e){return!1},e.create=function(t,n){var r=[];return t.eachComponent("radar",function(i){var a=new e(i,t,n);r.push(a),i.coordinateSystem=a}),t.eachSeriesByType("radar",function(e){"radar"===e.get("coordinateSystem")&&(e.coordinateSystem=r[e.get("radarIndex")||0])}),r},e.dimensions=[],e}();function js(e){e.registerCoordinateSystem("radar",jo),e.registerComponentModel(jn),e.registerComponentView(ji),e.registerVisual({seriesType:"radar",reset:function(e){var t=e.getData();t.each(function(e){t.setItemVisual(e,"legendIcon","roundRect")}),t.setVisual("legendIcon","roundRect")}})}var jl="\0_ec_interaction_mutex";function ju(e,t){return!!jc(e)[t]}function jc(e){return e[jl]||(e[jl]={})}zm({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},M6);var jh=function(e){function t(t){var n=e.call(this)||this;n._zr=t;var r=MT(n._mousedownHandler,n),i=MT(n._mousemoveHandler,n),a=MT(n._mouseupHandler,n),s=MT(n._mousewheelHandler,n),u=MT(n._pinchHandler,n);return n.enable=function(e,n){this.disable(),this._opt=Mg(Mh(n)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==e&&(e=!0),(!0===e||"move"===e||"pan"===e)&&(t.on("mousedown",r),t.on("mousemove",i),t.on("mouseup",a)),(!0===e||"scale"===e||"zoom"===e)&&(t.on("mousewheel",s),t.on("pinch",u))},n.disable=function(){t.off("mousedown",r),t.off("mousemove",i),t.off("mouseup",a),t.off("mousewheel",s),t.off("pinch",u)},n}return wJ(t,e),t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!Aj(e)){for(var t=e.target;t;){if(t.draggable)return;t=t.__hostTarget||t.parent}var n=e.offsetX,r=e.offsetY;this.pointerChecker&&this.pointerChecker(e,n,r)&&(this._x=n,this._y=r,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(!!this._dragging&&!!jf("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!jc(this._zr).globalPan){var t=e.offsetX,n=e.offsetY,r=this._x,i=this._y;this._x=t,this._y=n,this._opt.preventDefaultMouseMove&&AW(e.event),jp(this,"pan","moveOnMouseMove",e,{dx:t-r,dy:n-i,oldX:r,oldY:i,newX:t,newY:n,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){!Aj(e)&&(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var t=jf("zoomOnMouseWheel",e,this._opt),n=jf("moveOnMouseWheel",e,this._opt),r=e.wheelDelta,i=Math.abs(r),a=e.offsetX,s=e.offsetY;if(0!==r&&(!!t||!!n)){if(t){var u=i>3?1.4:i>1?1.2:1.1;jd(this,"zoom","zoomOnMouseWheel",e,{scale:r>0?u:1/u,originX:a,originY:s,isAvailableBehavior:null})}if(n){var c=Math.abs(r);jd(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(r>0?1:-1)*(c>3?.4:c>1?.15:.05),originX:a,originY:s,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){if(!jc(this._zr).globalPan){var t=e.pinchScale>1?1.1:1/1.1;jd(this,"zoom",null,e,{scale:t,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},t}(AA);function jd(e,t,n,r,i){e.pointerChecker&&e.pointerChecker(r,i.originX,i.originY)&&(AW(r.event),jp(e,t,n,r,i))}function jp(e,t,n,r,i){i.isAvailableBehavior=MT(jf,null,n,r),e.trigger(t,i)}function jf(e,t,n){var r=n[e];return!e||r&&(!MP(r)||t.event[r+"Key"])}function jg(e,t,n){var r=e.target;r.x+=t,r.y+=n,r.dirty()}function jm(e,t,n,r){var i=e.target,a=e.zoomLimit,s=e.zoom=e.zoom||1;if(s*=t,a){var u=a.min||0;s=Math.max(Math.min(a.max||1/0,s),u)}var c=s/e.zoom;e.zoom=s,i.x-=(n-i.x)*(c-1),i.y-=(r-i.y)*(c-1),i.scaleX*=c,i.scaleY*=c,i.dirty()}var jv={axisPointer:1,tooltip:1,brush:1};function jy(e,t,n){var r=t.getComponentByElement(e.topTarget),i=r&&r.coordinateSystem;return r&&r!==n&&!jv.hasOwnProperty(r.mainType)&&i&&i.model!==n}function j_(e){MP(e)&&(e=new DOMParser().parseFromString(e,"text/xml"));var t=e;for(9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}var jx={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},jb=MC(jx),jS={"alignment-baseline":"textBaseline","stop-color":"stopColor"},jw=MC(jS),jM=function(){function e(){this._defs={},this._root=null}return e.prototype.parse=function(e,t){t=t||{};var n,r,i=j_(e);this._defsUsePending=[];var a=new ES;this._root=a;var s=[],u=i.getAttribute("viewBox")||"",c=parseFloat(i.getAttribute("width")||t.width),h=parseFloat(i.getAttribute("height")||t.height);isNaN(c)&&(c=null),isNaN(h)&&(h=null),jD(i,a,null,!0,!1);for(var p=i.firstChild;p;)this._parseNode(p,a,s,null,!1,!1),p=p.nextSibling;if(function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r[0].style[r[1]]=e[r[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],u){var f=jO(u);f.length>=4&&(n={x:parseFloat(f[0]||0),y:parseFloat(f[1]||0),width:parseFloat(f[2]),height:parseFloat(f[3])})}if(n&&null!=c&&null!=h&&(r=jz(n,{x:0,y:0,width:c,height:h}),!t.ignoreViewBox)){var v=a;(a=new ES).add(v),v.scaleX=v.scaleY=r.scale,v.x=r.x,v.y=r.y}return!t.ignoreRootClip&&null!=c&&null!=h&&a.setClipPath(new DX({shape:{x:0,y:0,width:c,height:h}})),{root:a,width:c,height:h,viewBoxRect:n,viewBoxTransform:r,named:s}},e.prototype._parseNode=function(e,t,n,r,i,a){var s,u=e.nodeName.toLowerCase(),c=r;if("defs"===u&&(i=!0),"text"===u&&(a=!0),"defs"===u||"switch"===u)s=t;else{if(!i){var h=ta[u];if(h&&M4(ta,u)){s=h.call(this,e,t);var p=e.getAttribute("name");if(p){var f={name:p,namedFrom:null,svgNodeTagLower:u,el:s};n.push(f),"g"===u&&(c=f)}else r&&n.push({name:r.name,namedFrom:r,svgNodeTagLower:u,el:s});t.add(s)}}var v=jA[u];if(v&&M4(jA,u)){var y=v.call(this,e),_=e.getAttribute("id");_&&(this._defs[_]=y)}}if(s&&s.isGroup){for(var x=e.firstChild;x;)1===x.nodeType?this._parseNode(x,s,n,c,i,a):3===x.nodeType&&a&&this._parseText(x,s),x=x.nextSibling}},e.prototype._parseText=function(e,t){var n=new DO({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});jE(t,n),jD(e,n,this._defsUsePending,!1,!1),function(e,t){var n=t.__selfStyle;if(n){var r=n.textBaseline,i=r;r&&"auto"!==r?"baseline"===r?i="alphabetic":"before-edge"===r||"text-before-edge"===r?i="top":"after-edge"===r||"text-after-edge"===r?i="bottom":("central"===r||"mathematical"===r)&&(i="middle"):i="alphabetic",e.style.textBaseline=i}var a=t.__inheritedStyle;if(a){var s=a.textAlign,u=s;s&&("middle"===s&&(u="center"),e.style.textAlign=u)}}(n,t);var r=n.style,i=r.fontSize;i&&i<9&&(r.fontSize=9,n.scaleX*=i/9,n.scaleY*=i/9);var a=(r.fontSize||r.fontFamily)&&[r.fontStyle,r.fontWeight,(r.fontSize||12)+"px",r.fontFamily||"sans-serif"].join(" ");r.font=a;var s=n.getBoundingRect();return this._textX+=s.width,t.add(n),n},e.internalField=void(ta={g:function(e,t){var n=new ES;return jE(t,n),jD(e,n,this._defsUsePending,!1,!1),n},rect:function(e,t){var n=new DX;return jE(t,n),jD(e,n,this._defsUsePending,!1,!1),n.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),n.silent=!0,n},circle:function(e,t){var n=new k2;return jE(t,n),jD(e,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),n.silent=!0,n},line:function(e,t){var n=new Bw;return jE(t,n),jD(e,n,this._defsUsePending,!1,!1),n.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),n.silent=!0,n},ellipse:function(e,t){var n=new k4;return jE(t,n),jD(e,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),n.silent=!0,n},polygon:function(e,t){var n,r=e.getAttribute("points");r&&(n=jI(r));var i=new Bm({shape:{points:n||[]},silent:!0});return jE(t,i),jD(e,i,this._defsUsePending,!1,!1),i},polyline:function(e,t){var n,r=e.getAttribute("points");r&&(n=jI(r));var i=new B_({shape:{points:n||[]},silent:!0});return jE(t,i),jD(e,i,this._defsUsePending,!1,!1),i},image:function(e,t){var n=new DF;return jE(t,n),jD(e,n,this._defsUsePending,!1,!1),n.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),n.silent=!0,n},text:function(e,t){var n=e.getAttribute("x")||"0",r=e.getAttribute("y")||"0",i=e.getAttribute("dx")||"0",a=e.getAttribute("dy")||"0";this._textX=parseFloat(n)+parseFloat(i),this._textY=parseFloat(r)+parseFloat(a);var s=new ES;return jE(t,s),jD(e,s,this._defsUsePending,!1,!0),s},tspan:function(e,t){var n=e.getAttribute("x"),r=e.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=r&&(this._textY=parseFloat(r));var i=e.getAttribute("dx")||"0",a=e.getAttribute("dy")||"0",s=new ES;return jE(t,s),jD(e,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(i),this._textY+=parseFloat(a),s},path:function(e,t){var n,r=new kZ(kK(e.getAttribute("d")||"",void 0));return jE(t,r),jD(e,r,this._defsUsePending,!1,!1),r.silent=!0,r}}),e}(),jA={lineargradient:function(e){var t=new BO(parseInt(e.getAttribute("x1")||"0",10),parseInt(e.getAttribute("y1")||"0",10),parseInt(e.getAttribute("x2")||"10",10),parseInt(e.getAttribute("y2")||"0",10));return jC(e,t),jT(e,t),t},radialgradient:function(e){var t=new Bk(parseInt(e.getAttribute("cx")||"0",10),parseInt(e.getAttribute("cy")||"0",10),parseInt(e.getAttribute("r")||"0",10));return jC(e,t),jT(e,t),t}};function jC(e,t){"userSpaceOnUse"===e.getAttribute("gradientUnits")&&(t.global=!0)}function jT(e,t){for(var n=e.firstChild;n;){if(1===n.nodeType&&"stop"===n.nodeName.toLocaleLowerCase()){var r=n.getAttribute("offset"),i=void 0;i=r&&r.indexOf("%")>0?parseInt(r,10)/100:r?parseFloat(r):0;var a={};jF(n,a,a);var s=a.stopColor||n.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:i,color:s})}n=n.nextSibling}}function jE(e,t){e&&e.__inheritedStyle&&(!t.__inheritedStyle&&(t.__inheritedStyle={}),Mg(t.__inheritedStyle,e.__inheritedStyle))}function jI(e){for(var t=jO(e),n=[],r=0;r<t.length;r+=2){var i=parseFloat(t[r]),a=parseFloat(t[r+1]);n.push([i,a])}return n}function jD(e,t,n,r,i){var a=t.__inheritedStyle=t.__inheritedStyle||{},s={};1===e.nodeType&&(function(e,t){var n=e.getAttribute("transform");if(n){n=n.replace(/,/g," ");var r=[],i=null;n.replace(jk,function(e,t,n){return r.push(t,n),""});for(var a=r.length-1;a>0;a-=2){var s=r[a],u=r[a-1],c=jO(s);switch(i=i||AZ(),u){case"translate":A$(i,i,[parseFloat(c[0]),parseFloat(c[1]||"0")]);break;case"scale":A1(i,i,[parseFloat(c[0]),parseFloat(c[1]||c[0])]);break;case"rotate":A0(i,i,-parseFloat(c[0])*jB,[parseFloat(c[1]||"0"),parseFloat(c[2]||"0")]);break;case"skewX":AQ(i,[1,0,Math.tan(parseFloat(c[0])*jB),1,0,0],i);break;case"skewY":AQ(i,[1,Math.tan(parseFloat(c[0])*jB),0,1,0,0],i);break;case"matrix":i[0]=parseFloat(c[0]),i[1]=parseFloat(c[1]),i[2]=parseFloat(c[2]),i[3]=parseFloat(c[3]),i[4]=parseFloat(c[4]),i[5]=parseFloat(c[5])}}t.setLocalTransform(i)}}(e,t),jF(e,a,s),!r&&function(e,t,n){for(var r=0;r<jb.length;r++){var i=jb[r],a=e.getAttribute(i);null!=a&&(t[jx[i]]=a)}for(var r=0;r<jw.length;r++){var i=jw[r],a=e.getAttribute(i);null!=a&&(n[jS[i]]=a)}}(e,a,s)),t.style=t.style||{},null!=a.fill&&(t.style.fill=jR(t,"fill",a.fill,n)),null!=a.stroke&&(t.style.stroke=jR(t,"stroke",a.stroke,n)),Mb(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(e){null!=a[e]&&(t.style[e]=parseFloat(a[e]))}),Mb(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(e){null!=a[e]&&(t.style[e]=a[e])}),i&&(t.__selfStyle=s),a.lineDash&&(t.style.lineDash=MS(jO(a.lineDash),function(e){return parseFloat(e)})),("hidden"===a.visibility||"collapse"===a.visibility)&&(t.invisible=!0),"none"===a.display&&(t.ignore=!0)}var jP=/^url\(\s*#(.*?)\)/;function jR(e,t,n,r){var i=n&&n.match(jP);if(i){var a=MJ(i[1]);r.push([e,t,a]);return}return"none"===n&&(n=null),n}var jL=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function jO(e){return e.match(jL)||[]}var jk=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,jB=Math.PI/180,jN=/([^\s:;]+)\s*:\s*([^:;]+)/g;function jF(e,t,n){var r,i=e.getAttribute("style");if(!!i)for(jN.lastIndex=0;null!=(r=jN.exec(i));){var a=r[1],s=M4(jx,a)?jx[a]:null;s&&(t[s]=r[2]);var u=M4(jS,a)?jS[a]:null;u&&(n[u]=r[2])}}function jz(e,t){var n=Math.min(t.width/e.width,t.height/e.height);return{scale:n,x:-(e.x+e.width/2)*n+(t.x+t.width/2),y:-(e.y+e.height/2)*n+(t.y+t.height/2)}}for(var jU=M1(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),jH=function(){function e(e,t){this.type="geoSVG",this._usedGraphicMap=M1(),this._freedGraphics=[],this._mapName=e,this._parsedXML=j_(t)}return e.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=function(e){var t=[],n=M1();return Mb(e,function(e){if(null==e.namedFrom){var r=new Ht(e.name,e.el);t.push(r),n.set(e.name,r)}}),{regions:t,regionsMap:n}}(e.named),n=t.regions,r=t.regionsMap;this._regions=n,this._regionsMap=r}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},e.prototype._buildGraphic=function(e){try{var t,n;i=(r=e&&(t=e,n={ignoreViewBox:!0,ignoreRootClip:!0},new jM().parse(t,n))||{}).root,MY(null!=i)}catch(e){throw Error("Invalid svg format\n"+e.message)}var r,i,a=new ES;a.add(i),a.isGeoSVGGraphicRoot=!0;var s=r.width,u=r.height,c=r.viewBoxRect,h=this._boundingRect;if(!h){var p=void 0,f=void 0,v=void 0,y=void 0;if(null!=s?(p=0,v=s):c&&(p=c.x,v=c.width),null!=u?(f=0,y=u):c&&(f=c.y,y=c.height),null==p||null==f){var _=i.getBoundingRect();null==p&&(p=_.x,v=_.width),null==f&&(f=_.y,y=_.height)}h=this._boundingRect=new Cr(p,f,v,y)}if(c){var x=jz(c,h);i.scaleX=i.scaleY=x.scale,i.x=x.x,i.y=x.y}a.setClipPath(new DX({shape:h.plain()}));var b=[];return Mb(r.named,function(e){null!=jU.get(e.svgNodeTagLower)&&(b.push(e),function(e){e.silent=!1,e.isGroup&&e.traverse(function(e){e.silent=!1})}(e.el))}),{root:a,boundingRect:h,named:b}},e.prototype.useGraphic=function(e){var t=this._usedGraphicMap,n=t.get(e);return n?n:(n=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,n),n)},e.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,n=t.get(e);n&&(t.removeKey(e),this._freedGraphics.push(n))},e}(),jG=[126,25],jV="南海诸岛",jW=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],jj=0;jj<jW.length;jj++)for(var jX=0;jX<jW[jj].length;jX++)jW[jj][jX][0]/=10.5,jW[jj][jX][1]/=-14,jW[jj][jX][0]+=jG[0],jW[jj][jX][1]+=jG[1];var jY={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]},jJ=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],jZ=function(){function e(e,t,n){this.type="geoJSON",this._parsedMap=M1(),this._mapName=e,this._specialAreas=n,this._geoJSON=function(e){return MP(e)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(e):Function("return ("+e+");")():e}(t)}return e.prototype.load=function(e,t){t=t||"name";var n=this._parsedMap.get(t);if(!n){var r=this._parseToRegions(t);n=this._parsedMap.set(t,{regions:r,boundingRect:function(e){for(var t,n=0;n<e.length;n++){var r=e[n].getBoundingRect();(t=t||r.clone()).union(r)}return t}(r)})}var i=M1(),a=[];return Mb(n.regions,function(t){var n=t.name;e&&M4(e,n)&&(t=t.cloneShallow(n=e[n])),a.push(t),i.set(n,t)}),{regions:a,boundingRect:n.boundingRect||new Cr(0,0,0,0),regionsMap:i}},e.prototype._parseToRegions=function(e){var t,n=this._mapName,r=this._geoJSON;try{t=r?Hi(r,e):[]}catch(e){throw Error("Invalid geoJson format\n"+e.message)}return!function(e,t){if("china"===e){for(var n=0;n<t.length;n++)if(t[n].name===jV)return;t.push(new He(jV,MS(jW,function(e){return{type:"polygon",exterior:e}}),jG))}}(n,t),Mb(t,function(e){var t,r,i=e.name;!function(e,t){if("china"===e){var n=jY[t.name];if(n){var r=t.getCenter();r[0]+=n[0]/10.5,r[1]+=-n[1]/14,t.setCenter(r)}}}(n,e),t=n,r=e,"china"===t&&"台湾"===r.name&&r.geometries.push({type:"polygon",exterior:jJ[0]});var a=this._specialAreas&&this._specialAreas[i];a&&e.transformTo(a.left,a.top,a.width,a.height)},this),t},e.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},e}(),jq=M1();let jK={registerMap:function(e,t,n){if(t.svg){var r=new jH(e,t.svg);jq.set(e,r)}else{var i=t.geoJson||t.geoJSON;i&&!t.features?n=t.specialAreas:i=t;var r=new jZ(e,i,n);jq.set(e,r)}},getGeoResource:function(e){return jq.get(e)},getMapForUser:function(e){var t=jq.get(e);return t&&"geoJSON"===t.type&&t.getMapForUser()},load:function(e,t,n){var r=jq.get(e);if(!!r)return r.load(t,n)}};var jQ=["rect","circle","line","ellipse","polygon","polyline","path"],j$=M1(jQ),j0=M1(jQ.concat(["g"])),j1=M1(jQ.concat(["g"])),j2=Is();function j3(e){var t=e.getItemStyle(),n=e.get("areaColor");return null!=n&&(t.fill=n),t}function j5(e){var t=e.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var j4=function(){function e(e){var t=new ES;this.uid=Rw("ec_map_draw"),this._controller=new jh(e.getZr()),this._controllerHost={target:t},this.group=t,t.add(this._regionsGroup=new ES),t.add(this._svgGroup=new ES)}return e.prototype.draw=function(e,t,n,r,i){var a="geo"===e.mainType,s=e.getData&&e.getData();a&&t.eachComponent({mainType:"series",subType:"map"},function(t){!s&&t.getHostGeoModel()===e&&(s=t.getData())});var u=e.coordinateSystem,c=this._regionsGroup,h=this.group,p=u.getTransformInfo(),f=p.raw,v=p.roam;!c.childAt(0)||i?(h.x=v.x,h.y=v.y,h.scaleX=v.scaleX,h.scaleY=v.scaleY,h.dirty()):PQ(h,v,e);var y=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,_={api:n,geo:u,mapOrGeoModel:e,data:s,isVisualEncodedByVisualMap:y,isGeo:a,transformInfoRaw:f};"geoJSON"===u.resourceType?this._buildGeoJSON(_):"geoSVG"===u.resourceType&&this._buildSVG(_),this._updateController(e,t,n),this._updateMapSelectHandler(e,c,n,r)},e.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=M1(),n=M1(),r=this._regionsGroup,i=e.transformInfoRaw,a=e.mapOrGeoModel,s=e.data,u=e.geo.projection,c=u&&u.stream;function h(e,t){return t&&(e=t(e)),e&&[e[0]*i.scaleX+i.x,e[1]*i.scaleY+i.y]}function p(e){return{shape:{points:function(e){for(var t=[],n=!c&&u&&u.project,r=0;r<e.length;++r){var i=h(e[r],n);i&&t.push(i)}return t}(e)}}}r.removeAll(),Mb(e.geo.regions,function(i){var f=i.name,v=t.get(f),y=n.get(f)||{},_=y.dataIdx,x=y.regionModel;!v&&(v=t.set(f,new ES),r.add(v),_=s?s.indexOfName(f):null,x=e.isGeo?a.getRegionModel(f):s?s.getItemModel(_):null,n.set(f,{dataIdx:_,regionModel:x}));var b=[],S=[];Mb(i.geometries,function(e){if("polygon"===e.type){var t=[e.exterior].concat(e.interiors||[]);c&&(t=Xt(t,c)),Mb(t,function(e){b.push(new Bm(p(e)))})}else{var n=e.points;c&&(n=Xt(n,c,!0)),Mb(n,function(e){S.push(new B_(p(e)))})}});var w=h(i.getCenter(),u&&u.project);function M(t,n){if(!!t.length){var r=new BR({culling:!0,segmentIgnoreThreshold:1,shape:{paths:t}});v.add(r),j6(e,r,_,x),j9(e,r,f,x,a,_,w),n&&(j5(r),Mb(r.states,j5))}}M(b),M(S,!0)}),t.each(function(t,r){var i=n.get(r),s=i.dataIdx,u=i.regionModel;j8(e,t,r,u,a,s),j7(e,t,r,u,a),Xe(e,t,r,u,a)},this)},e.prototype._buildSVG=function(e){var t=e.geo.map,n=e.transformInfoRaw;this._svgGroup.x=n.x,this._svgGroup.y=n.y,this._svgGroup.scaleX=n.scaleX,this._svgGroup.scaleY=n.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var r=this._svgDispatcherMap=M1(),i=!1;Mb(this._svgGraphicRecord.named,function(t){var n=t.name,a=e.mapOrGeoModel,s=e.data,u=t.svgNodeTagLower,c=t.el,h=s?s.indexOfName(n):null,p=a.getRegionModel(n);null!=j$.get(u)&&c instanceof IJ&&j6(e,c,h,p),c instanceof IJ&&(c.culling=!0),c.z2EmphasisLift=0,!t.namedFrom&&(null!=j1.get(u)&&j9(e,c,n,p,a,h,null),j8(e,c,n,p,a,h),j7(e,c,n,p,a),null!=j0.get(u)&&("self"===Xe(e,c,n,p,a)&&(i=!0),(r.get(n)||r.set(n,[])).push(c)))},this),this._enableBlurEntireSVG(i,e)},e.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var n=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse(function(e){if(!e.isGroup){PM(e);var t=e.ensureState("blur").style||{};null==t.opacity&&null!=n&&(t.opacity=n),e.ensureState("emphasis")}})}},e.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},e.prototype.findHighDownDispatchers=function(e,t){if(null==e)return[];var n=t.coordinateSystem;if("geoJSON"===n.resourceType){var r=this._regionsGroupByName;if(r){var i=r.get(e);return i?[i]:[]}}else if("geoSVG"===n.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},e.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},e.prototype._useSVG=function(e){var t=jK.getGeoResource(e);if(t&&"geoSVG"===t.type){var n=t.useGraphic(this.uid);this._svgGroup.add(n.root),this._svgGraphicRecord=n,this._svgMapName=e}},e.prototype._freeSVG=function(){var e=this._svgMapName;if(null!=e){var t=jK.getGeoResource(e);t&&"geoSVG"===t.type&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},e.prototype._updateController=function(e,t,n){var r=e.coordinateSystem,i=this._controller,a=this._controllerHost;a.zoomLimit=e.get("scaleLimit"),a.zoom=r.getZoom(),i.enable(e.get("roam")||!1);var s=e.mainType;function u(){var t={type:"geoRoam",componentType:s};return t[s+"Id"]=e.id,t}i.off("pan").on("pan",function(e){this._mouseDownFlag=!1,jg(a,e.dx,e.dy),n.dispatchAction(Mf(u(),{dx:e.dx,dy:e.dy,animation:{duration:0}}))},this),i.off("zoom").on("zoom",function(e){this._mouseDownFlag=!1,jm(a,e.scale,e.originX,e.originY),n.dispatchAction(Mf(u(),{totalZoom:a.zoom,zoom:e.scale,originX:e.originX,originY:e.originY,animation:{duration:0}}))},this),i.setPointerChecker(function(t,i,a){return r.containPoint([i,a])&&!jy(t,n,e)})},e.prototype.resetForLabelLayout=function(){this.group.traverse(function(e){var t=e.getTextContent();t&&(t.ignore=j2(t).ignore)})},e.prototype._updateMapSelectHandler=function(e,t,n,r){var i=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",function(){i._mouseDownFlag=!0}),t.on("click",function(e){if(!!i._mouseDownFlag)i._mouseDownFlag=!1}))},e}();function j6(e,t,n,r){var i=r.getModel("itemStyle"),a=r.getModel(["emphasis","itemStyle"]),s=r.getModel(["blur","itemStyle"]),u=r.getModel(["select","itemStyle"]),c=j3(i),h=j3(a),p=j3(u),f=j3(s),v=e.data;if(v){var y=v.getItemVisual(n,"style"),_=v.getItemVisual(n,"decal");e.isVisualEncodedByVisualMap&&y.fill&&(c.fill=y.fill),_&&(c.decal=FL(_,e.api))}t.setStyle(c),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=h,t.ensureState("select").style=p,t.ensureState("blur").style=f,PM(t)}function j9(e,t,n,r,i,a,s){var u=e.data,c=e.isGeo,h=u&&isNaN(u.get(u.mapDimension("value"),a)),p=u&&u.getItemLayout(a);if(c||h||p&&p.showLabel){var f=c?n:a,v=void 0;(!u||a>=0)&&(v=i);var y=s?{normal:{align:"center",verticalAlign:"middle"}}:null;P8(t,P7(r),{labelFetcher:v,labelDataIndex:f,defaultText:n},y);var _=t.getTextContent();if(_&&(j2(_).ignore=_.ignore,t.textConfig&&s)){var x=t.getBoundingRect().clone();t.textConfig.layoutRect=x,t.textConfig.position=[(s[0]-x.x)/x.width*100+"%",(s[1]-x.y)/x.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function j8(e,t,n,r,i,a){e.data?e.data.setItemGraphicEl(a,t):D7(t).eventData={componentType:"geo",componentIndex:i.componentIndex,geoIndex:i.componentIndex,name:n,region:r&&r.option||{}}}function j7(e,t,n,r,i){!e.data&&No({el:t,componentModel:i,itemName:n,itemTooltipOption:r.get("tooltip")})}function Xe(e,t,n,r,i){t.highDownSilentOnTouch=!!i.get("selectedMode");var a,s,u,c,h=r.getModel("emphasis"),p=h.get("focus");if(PU(t,p,h.get("blurScope"),h.get("disabled")),e.isGeo){;a=t,s=i,u=n,(c=D7(a)).componentMainType=s.mainType,c.componentIndex=s.componentIndex,c.componentHighDownName=u}return p}function Xt(e,t,n){var r,i=[];function a(){r=[]}function s(){r.length&&(i.push(r),r=[])}var u=t({polygonStart:a,polygonEnd:s,lineStart:a,lineEnd:s,point:function(e,t){isFinite(e)&&isFinite(t)&&r.push([e,t])},sphere:function(){}});return n||u.polygonStart(),Mb(e,function(e){u.lineStart();for(var t=0;t<e.length;t++)u.point(e[t][0],e[t][1]);u.lineEnd()}),n||u.polygonEnd(),i}var Xn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.render=function(e,t,n,r){if(r&&"mapToggleSelect"===r.type&&r.from===this.uid)return;var i=this.group;if(i.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&r&&"geoRoam"===r.type&&this._mapDraw.resetForLabelLayout(),r&&"geoRoam"===r.type&&"series"===r.componentType&&r.seriesId===e.id){var a=this._mapDraw;a&&i.add(a.group)}else if(e.needsDrawMap){var a=this._mapDraw||new j4(n);i.add(a.group),a.draw(e,t,n,this,r),this._mapDraw=a}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,n)}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(e,t,n){var r=e.originalData,i=this.group;r.each(r.mapDimension("value"),function(t,n){if(isNaN(t))return;var a=r.getItemLayout(n);if(!!a&&!!a.point){var s=a.point,u=a.offset,c=new k2({style:{fill:e.getData().getVisual("style").fill},shape:{cx:s[0]+9*u,cy:s[1],r:3},silent:!0,z2:8+(u?0:11)});if(!u){var h=e.mainSeries.getData(),p=r.getName(n),f=h.indexOfName(p),v=r.getItemModel(n),y=v.getModel("label"),_=h.getItemGraphicEl(f);P8(c,P7(v),{labelFetcher:{getFormattedLabel:function(t,n){return e.getFormattedLabel(f,n)}},defaultText:p}),c.disableLabelAnimation=!0,!y.get("position")&&c.setTextConfig({position:"bottom"}),_.onHoverStateChange=function(e){PS(c,e)}}i.add(c)}})},t.type="map",t}(Nv),Xr=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.needsDrawMap=!1,n.seriesGroup=[],n.getTooltipPosition=function(e){if(null!=e){var t=this.getData().getName(e),n=this.coordinateSystem,r=n.getRegion(t);return r&&n.dataToPoint(r.getCenter())}},n}return wJ(t,e),t.prototype.getInitialData=function(e){for(var t=V7(this,{coordDimensions:["value"],encodeDefaulter:ME(LR,this)}),n=M1(),r=[],i=0,a=t.count();i<a;i++){var s=t.getName(i);n.set(s,!0)}return Mb(jK.load(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,function(e){var t=e.name;!n.get(t)&&r.push(t)}),t.appendValues([],r),t},t.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return null!=e?this.ecModel.getComponent("geo",e):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},t.prototype.getRegionModel=function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},t.prototype.formatTooltip=function(e,t,n){for(var r=this.getData(),i=this.getRawValue(e),a=r.getName(e),s=this.seriesGroup,u=[],c=0;c<s.length;c++){var h=s[c].originalData.indexOfName(a),p=r.mapDimension("value");!isNaN(s[c].originalData.get(p,h))&&u.push(s[c].name)}return ks("section",{header:u.join(", "),noHeader:!u.length,blocks:[ks("nameValue",{name:a,value:i})]})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.getLegendIcon=function(e){var t=e.icon||"roundRect",n=Fo(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return n.setStyle(e.itemStyle),n.style.stroke="none",t.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(kD);function Xi(e){var t={};e.eachSeriesByType("map",function(e){var n=e.getHostGeoModel(),r=n?"o"+n.id:"i"+e.getMapType();(t[r]=t[r]||[]).push(e)}),Mb(t,function(e,t){for(var n,r,i,a=(n=MS(e,function(e){return e.getData()}),r=e[0].get("mapValueCalculation"),i={},Mb(n,function(e){e.each(e.mapDimension("value"),function(t,n){var r="ec-"+e.getName(n);i[r]=i[r]||[],!isNaN(t)&&i[r].push(t)})}),n[0].map(n[0].mapDimension("value"),function(e,t){for(var a,s="ec-"+n[0].getName(t),u=0,c=1/0,h=-1/0,p=i[s].length,f=0;f<p;f++)c=Math.min(c,i[s][f]),h=Math.max(h,i[s][f]),u+=i[s][f];return a="min"===r?c:"max"===r?h:"average"===r?u/p:u,0===p?NaN:a})),s=0;s<e.length;s++)e[s].originalData=e[s].getData();for(var s=0;s<e.length;s++)e[s].seriesGroup=e,e[s].needsDrawMap=0===s&&!e[s].getHostGeoModel(),e[s].setData(a.cloneShallow()),e[s].mainSeries=e[0]})}function Xa(e){var t={};e.eachSeriesByType("map",function(n){var r=n.getMapType();if(!n.getHostGeoModel()&&!t[r]){var i={};Mb(n.seriesGroup,function(t){var n=t.coordinateSystem,r=t.originalData;t.get("showLegendSymbol")&&e.getComponent("legend")&&r.each(r.mapDimension("value"),function(e,t){var a=r.getName(t),s=n.getRegion(a);if(!(!s||isNaN(e))){var u=i[a]||0,c=n.dataToPoint(s.getCenter());i[a]=u+1,r.setItemLayout(t,{point:c,offset:u})}})});var a=n.getData();a.each(function(e){var t=a.getName(e),n=a.getItemLayout(e)||{};n.showLabel=!i[t],a.setItemLayout(e,n)}),t[r]=!0}})}var Xo=Ax,Xs=function(e){function t(t){var n=e.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new Et,n._rawTransformable=new Et,n.name=t,n}return wJ(t,e),t.prototype.setBoundingRect=function(e,t,n,r){return this._rect=new Cr(e,t,n,r),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(e,t,n,r){this._transformTo(e,t,n,r),this._viewRect=new Cr(e,t,n,r)},t.prototype._transformTo=function(e,t,n,r){var i=this.getBoundingRect(),a=this._rawTransformable;a.transform=i.calculateTransform(new Cr(e,t,n,r));var s=a.parent;a.parent=null,a.decomposeTransform(),a.parent=s,this._updateTransform()},t.prototype.setCenter=function(e,t){if(!!e)this._center=[Ek(e[0],t.getWidth()),Ek(e[1],t.getHeight())],this._updateCenterAndZoom()},t.prototype.setZoom=function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,n=this.getDefaultCenter(),r=this.getCenter(),i=this.getZoom();r=Ax([],r,e),n=Ax([],n,e),t.originX=r[0],t.originY=r[1],t.x=n[0]-r[0],t.y=n[1]-r[1],t.scaleX=t.scaleY=i,this._updateTransform()},t.prototype._updateTransform=function(){var e=this._roamTransformable,t=this._rawTransformable;t.parent=e,e.updateTransform(),t.updateTransform(),AK(this.transform||(this.transform=[]),t.transform||AZ()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],A2(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var e=this._rawTransformable,t=this._roamTransformable,n=new Et;return n.transform=t.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},t.prototype.dataToPoint=function(e,t,n){var r=t?this._rawTransform:this.transform;return n=n||[],r?Xo(n,e,r):M7(n,e)},t.prototype.pointToData=function(e){var t=this.invTransform;return t?Xo([],e,t):[e[0],e[1]]},t.prototype.convertToPixel=function(e,t,n){var r=Xl(t);return r===this?r.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,t,n){var r=Xl(t);return r===this?r.pointToData(n):null},t.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},t.dimensions=["x","y"],t}(Et);function Xl(e){var t=e.seriesModel;return t?t.coordinateSystem:null}var Xu={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},Xc=["lng","lat"],Xh=function(e){function t(t,n,r){var i,a=e.call(this,t)||this;a.dimensions=Xc,a.type="geo",a._nameCoordMap=M1(),a.map=n;var s=r.projection,u=jK.load(n,r.nameMap,r.nameProperty),c=jK.getGeoResource(n);a.resourceType=c?c.type:null;var h=a.regions=u.regions,p=Xu[c.type];a._regionsMap=u.regionsMap,a.regions=u.regions;if(a.projection=s,s)for(var f=0;f<h.length;f++){var v=h[f].getBoundingRect(s);(i=i||v.clone()).union(v)}else i=u.boundingRect;return a.setBoundingRect(i.x,i.y,i.width,i.height),a.aspectScale=s?1:MV(r.aspectScale,p.aspectScale),a._invertLongitute=!s&&p.invertLongitute,a}return wJ(t,e),t.prototype._transformTo=function(e,t,n,r){var i=this.getBoundingRect(),a=this._invertLongitute;i=i.clone(),a&&(i.y=-i.y-i.height);var s=this._rawTransformable;s.transform=i.calculateTransform(new Cr(e,t,n,r));var u=s.parent;s.parent=null,s.decomposeTransform(),s.parent=u,a&&(s.scaleY=-s.scaleY),this._updateTransform()},t.prototype.getRegion=function(e){return this._regionsMap.get(e)},t.prototype.getRegionByCoord=function(e){for(var t=this.regions,n=0;n<t.length;n++){var r=t[n];if("geoJSON"===r.type&&r.contain(e))return t[n]}},t.prototype.addGeoCoord=function(e,t){this._nameCoordMap.set(e,t)},t.prototype.getGeoCoord=function(e){var t=this._regionsMap.get(e);return this._nameCoordMap.get(e)||t&&t.getCenter()},t.prototype.dataToPoint=function(e,t,n){if(MP(e)&&(e=this.getGeoCoord(e)),e){var r=this.projection;return r&&(e=r.project(e)),e&&this.projectedToPoint(e,t,n)}},t.prototype.pointToData=function(e){var t=this.projection;return t&&(e=t.unproject(e)),e&&this.pointToProjected(e)},t.prototype.pointToProjected=function(t){return e.prototype.pointToData.call(this,t)},t.prototype.projectedToPoint=function(t,n,r){return e.prototype.dataToPoint.call(this,t,n,r)},t.prototype.convertToPixel=function(e,t,n){var r=Xd(t);return r===this?r.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,t,n){var r=Xd(t);return r===this?r.pointToData(n):null},t}(Xs);function Xd(e){var t=e.geoModel,n=e.seriesModel;return t?t.coordinateSystem:n?n.coordinateSystem||(n.getReferringComponents("geo",Ih).models[0]||{}).coordinateSystem:null}M_(Xh,Xs);function Xp(e,t){var n,r,i,a=e.get("boundingCoords");if(null!=a){var s=a[0],u=a[1];if(isFinite(s[0])&&isFinite(s[1])&&isFinite(u[0])&&isFinite(u[1])){var c=this.projection;if(c){var h=s[0],p=s[1],f=u[0],v=u[1];s=[1/0,1/0],u=[-1/0,-1/0];var y=function(e,t,n,r){for(var i=n-e,a=r-t,h=0;h<=100;h++){var p=h/100,f=c.project([e+i*p,t+a*p]);Ab(s,s,f),AS(u,u,f)}};y(h,p,f,p),y(f,p,f,v),y(f,v,h,v),y(h,v,f,p)}this.setBoundingRect(s[0],s[1],u[0]-s[0],u[1]-s[1])}}var _=this.getBoundingRect(),x=e.get("layoutCenter"),b=e.get("layoutSize"),S=t.getWidth(),w=t.getHeight(),M=_.width/_.height*this.aspectScale,A=!1;if(x&&b&&(n=[Ek(x[0],S),Ek(x[1],w)],r=Ek(b,Math.min(S,w)),!isNaN(n[0])&&!isNaN(n[1])&&!isNaN(r)&&(A=!0)),A)i={},M>1?(i.width=r,i.height=r/M):(i.height=r,i.width=r*M),i.y=n[1]-i.height/2,i.x=n[0]-i.width/2;else{var C=e.getBoxLayoutParams();C.aspect=M,i=Lu(C,{width:S,height:w})}this.setViewRect(i.x,i.y,i.width,i.height),this.setCenter(e.get("center"),t),this.setZoom(e.get("zoom"))}var Xf=new(function(){function e(){this.dimensions=Xc}return e.prototype.create=function(e,t){var n=[];function r(e){return{nameProperty:e.get("nameProperty"),aspectScale:e.get("aspectScale"),projection:e.get("projection")}}e.eachComponent("geo",function(e,i){var a=e.get("map"),s=new Xh(a+i,a,Mf({nameMap:e.get("nameMap")},r(e)));s.zoomLimit=e.get("scaleLimit"),n.push(s),e.coordinateSystem=s,s.model=e,s.resize=Xp,s.resize(e,t)}),e.eachSeries(function(e){if("geo"===e.get("coordinateSystem")){var t=e.get("geoIndex")||0;e.coordinateSystem=n[t]}});var i={};return e.eachSeriesByType("map",function(e){if(!e.getHostGeoModel()){var t=e.getMapType();i[t]=i[t]||[],i[t].push(e)}}),Mb(i,function(e,i){var a=new Xh(i,i,Mf({nameMap:Mp(MS(e,function(e){return e.get("nameMap")}))},r(e[0])));a.zoomLimit=MG.apply(null,MS(e,function(e){return e.get("scaleLimit")})),n.push(a),a.resize=Xp,a.resize(e[0],t),Mb(e,function(e){var t;e.coordinateSystem=a,t=a,Mb(e.get("geoCoord"),function(e,n){t.addGeoCoord(n,e)})})}),n},e.prototype.getFilledRegions=function(e,t,n,r){for(var i=(e||[]).slice(),a=M1(),s=0;s<i.length;s++)a.set(i[s].name,i[s]);return Mb(jK.load(t,n,r).regions,function(e){var t=e.name;a.get(t)||i.push({name:t})}),i},e}()),Xg=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.init=function(e,t,n){var r=jK.getGeoResource(e.map);if(r&&"geoJSON"===r.type){var i=e.itemStyle=e.itemStyle||{};!("color"in i)&&(i.color="#eee")}this.mergeDefaultAndTheme(e,n),E9(e,"label",["show"])},t.prototype.optionUpdated=function(){var e=this,t=this.option;t.regions=Xf.getFilledRegions(t.regions,t.map,t.nameMap,t.nameProperty);var n={};this._optionModelMap=Mw(t.regions||[],function(t,r){var i=r.name;return i&&(t.set(i,new Rb(r,e,e.ecModel)),r.selected&&(n[i]=!0)),t},M1()),!t.selectedMap&&(t.selectedMap=n)},t.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new Rb(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(e,t){var n=this.getRegionModel(e),r="normal"===t?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),i={name:e};return MD(r)?(i.status=t,r(i)):MP(r)?r.replace("{a}",null!=e?e:""):void 0},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.select=function(e){var t=this.option,n=t.selectedMode;if(!!n)"multiple"!==n&&(t.selectedMap=null),(t.selectedMap||(t.selectedMap={}))[e]=!0},t.prototype.unSelect=function(e){var t=this.option.selectedMap;t&&(t[e]=!1)},t.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},t.prototype.isSelected=function(e){var t=this.option.selectedMap;return!!(t&&t[e])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t}(Lv);function Xm(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function Xv(e,t,n,r){var i=e.getZoom(),a=e.getCenter(),s=t.zoom,u=e.projectedToPoint?e.projectedToPoint(a):e.dataToPoint(a);if(null!=t.dx&&null!=t.dy&&(u[0]-=t.dx,u[1]-=t.dy,e.setCenter(Xm(e,u),r)),null!=s){if(n){var c=n.min||0;s=Math.max(Math.min(i*s,n.max||1/0),c)/i}e.scaleX*=s,e.scaleY*=s;var h=(t.originX-e.x)*(s-1),p=(t.originY-e.y)*(s-1);e.x-=h,e.y-=p,e.updateTransform(),e.setCenter(Xm(e,u),r),e.setZoom(s*i)}return{center:e.getCenter(),zoom:e.getZoom()}}var Xy=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.focusBlurEnabled=!0,n}return wJ(t,e),t.prototype.init=function(e,t){this._api=t},t.prototype.render=function(e,t,n,r){if(this._model=e,!e.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}!this._mapDraw&&(this._mapDraw=new j4(n));var i=this._mapDraw;i.draw(e,t,n,this,r),i.group.on("click",this._handleRegionClick,this),i.group.silent=e.get("silent"),this.group.add(i.group),this.updateSelectStatus(e,t,n)},t.prototype._handleRegionClick=function(e){var t;N5(e.target,function(e){return null!=(t=D7(e).eventData)},!0),t&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:t.name})},t.prototype.updateSelectStatus=function(e,t,n){var r=this;this._mapDraw.group.traverse(function(e){var t=D7(e).eventData;if(t)return r._model.isSelected(t.name)?n.enterSelect(e):n.leaveSelect(e),!0})},t.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(kR);function X_(e,t,n){jK.registerMap(e,t,n)}function Xx(e){function t(t,n){n.update="geo:updateSelectStatus",e.registerAction(n,function(e,n){var r={},i=[];return n.eachComponent({mainType:"geo",query:e},function(n){n[t](e.name),Mb(n.coordinateSystem.regions,function(e){r[e.name]=n.isSelected(e.name)||!1});var a=[];Mb(r,function(e,t){r[t]&&a.push(t)}),i.push({geoIndex:n.componentIndex,name:a})}),{selected:r,allSelected:i,name:e.name}})}e.registerCoordinateSystem("geo",Xf),e.registerComponentModel(Xg),e.registerComponentView(Xy),e.registerImpl("registerMap",X_),e.registerImpl("getMap",function(e){return jK.getMapForUser(e)}),t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),e.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,t,n){var r=e.componentType||"series";t.eachComponent({mainType:r,query:e},function(t){var i=t.coordinateSystem;if("geo"===i.type){var a=Xv(i,e,t.get("scaleLimit"),n);t.setCenter&&t.setCenter(a.center),t.setZoom&&t.setZoom(a.zoom),"series"===r&&Mb(t.seriesGroup,function(e){e.setCenter(a.center),e.setZoom(a.zoom)})}})})}function Xb(e,t){var n=e.isExpand?e.children:[],r=e.parentNode.children,i=e.hierNode.i?r[e.hierNode.i-1]:null;if(n.length){(function(e){for(var t=e.children,n=t.length,r=0,i=0;--n>=0;){var a=t[n];a.hierNode.prelim+=r,a.hierNode.modifier+=r,i+=a.hierNode.change,r+=a.hierNode.shift+i}})(e);var a=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;i?(e.hierNode.prelim=i.hierNode.prelim+t(e,i),e.hierNode.modifier=e.hierNode.prelim-a):e.hierNode.prelim=a}else i&&(e.hierNode.prelim=i.hierNode.prelim+t(e,i));e.parentNode.hierNode.defaultAncestor=function(e,t,n,r){if(t){for(var i=e,a=e,s=a.parentNode.children[0],u=t,c=i.hierNode.modifier,h=a.hierNode.modifier,p=s.hierNode.modifier,f=u.hierNode.modifier;u=XA(u),a=XC(a),u&&a;){i=XA(i),s=XC(s),i.hierNode.ancestor=e;var v=u.hierNode.prelim+f-a.hierNode.prelim-h+r(u,a);v>0&&(function(e,t,n){var r=n/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=r,t.hierNode.shift+=n,t.hierNode.modifier+=n,t.hierNode.prelim+=n,e.hierNode.change+=r}(function(e,t,n){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:n}(u,e,n),e,v),h+=v,c+=v),f+=u.hierNode.modifier,h+=a.hierNode.modifier,c+=i.hierNode.modifier,p+=s.hierNode.modifier}u&&!XA(i)&&(i.hierNode.thread=u,i.hierNode.modifier+=f-c),a&&!XC(s)&&(s.hierNode.thread=a,s.hierNode.modifier+=h-p,n=e)}return n}(e,i,e.parentNode.hierNode.defaultAncestor||r[0],t)}function XS(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function Xw(e){return arguments.length?e:XT}function XM(e,t){return{x:t*Math.cos(e-=Math.PI/2),y:t*Math.sin(e)}}function XA(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function XC(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function XT(e,t){return e.parentNode===t.parentNode?1:2}var XE=function(){this.parentPoint=[],this.childPoints=[]},XI=function(e){function t(t){return e.call(this,t)||this}return wJ(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new XE},t.prototype.buildPath=function(e,t){var n=t.childPoints,r=n.length,i=t.parentPoint,a=n[0],s=n[r-1];if(1===r){e.moveTo(i[0],i[1]),e.lineTo(a[0],a[1]);return}var u=t.orient,c="TB"===u||"BT"===u?0:1,h=1-c,p=Ek(t.forkPosition,1),f=[];f[c]=i[c],f[h]=i[h]+(s[h]-i[h])*p,e.moveTo(i[0],i[1]),e.lineTo(f[0],f[1]),e.moveTo(a[0],a[1]),f[c]=a[c],e.lineTo(f[0],f[1]),f[c]=s[c],e.lineTo(f[0],f[1]),e.lineTo(s[0],s[1]);for(var v=1;v<r-1;v++){var y=n[v];e.moveTo(y[0],y[1]),f[c]=y[c],e.lineTo(f[0],f[1])}},t}(DR),XD=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._mainGroup=new ES,n}return wJ(t,e),t.prototype.init=function(e,t){this._controller=new jh(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,t,n){var r=e.getData(),i=e.layoutInfo,a=this._mainGroup;"radial"===e.get("layout")?(a.x=i.x+i.width/2,a.y=i.y+i.height/2):(a.x=i.x,a.y=i.y),this._updateViewCoordSys(e,n),this._updateController(e,t,n);var s=this._data;r.diff(s).add(function(t){XP(r,t)&&XR(r,t,null,a,e)}).update(function(t,n){var i=s.getItemGraphicEl(n);if(!XP(r,t)){i&&Xk(s,n,i,a,e);return}XR(r,t,i,a,e)}).remove(function(t){var n=s.getItemGraphicEl(t);n&&Xk(s,t,n,a,e)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===e.get("expandAndCollapse")&&r.eachItemGraphicEl(function(t,r){t.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:r})})}),this._data=r},t.prototype._updateViewCoordSys=function(e,t){var n=e.getData(),r=[];n.each(function(e){var t=n.getItemLayout(e);t&&!isNaN(t.x)&&!isNaN(t.y)&&r.push([+t.x,+t.y])});var i=[],a=[];I4(r,i,a);var s=this._min,u=this._max;a[0]-i[0]==0&&(i[0]=s?s[0]:i[0]-1,a[0]=u?u[0]:a[0]+1),a[1]-i[1]==0&&(i[1]=s?s[1]:i[1]-1,a[1]=u?u[1]:a[1]+1);var c=e.coordinateSystem=new Xs;c.zoomLimit=e.get("scaleLimit"),c.setBoundingRect(i[0],i[1],a[0]-i[0],a[1]-i[1]),c.setCenter(e.get("center"),t),c.setZoom(e.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=i,this._max=a},t.prototype._updateController=function(e,t,n){var r=this,i=this._controller,a=this._controllerHost,s=this.group;i.setPointerChecker(function(t,r,i){var a=s.getBoundingRect();return a.applyTransform(s.transform),a.contain(r,i)&&!jy(t,n,e)}),i.enable(e.get("roam")),a.zoomLimit=e.get("scaleLimit"),a.zoom=e.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",function(t){jg(a,t.dx,t.dy),n.dispatchAction({seriesId:e.id,type:"treeRoam",dx:t.dx,dy:t.dy})}).on("zoom",function(t){jm(a,t.scale,t.originX,t.originY),n.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),r._updateNodeAndLinkScale(e),n.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(e){var t=e.getData(),n=this._getNodeGlobalScale(e);t.eachItemGraphicEl(function(e,t){e.setSymbolScale(n)})},t.prototype._getNodeGlobalScale=function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=this._nodeScaleRatio,r=t.scaleX||1,i=t.getZoom();return((i-1)*n+1)/r},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(Nv);function XP(e,t){var n=e.getItemLayout(t);return n&&!isNaN(n.x)&&!isNaN(n.y)}function XR(e,t,n,r,i){var a=!n,s=e.tree.getNodeByDataIndex(t),u=s.getModel(),c=s.getVisual("style").fill,h=!1===s.isExpand&&0!==s.children.length?c:"#fff",p=e.tree.root,f=s.parentNode===p?s:s.parentNode||s,v=e.getItemGraphicEl(f.dataIndex),y=f.getLayout(),_=v?{x:v.__oldX,y:v.__oldY,rawX:v.__radialOldRawX,rawY:v.__radialOldRawY}:y,x=s.getLayout();a?((n=new G2(e,t,null,{symbolInnerColor:h,useNameLabel:!0})).x=_.x,n.y=_.y):n.updateData(e,t,null,{symbolInnerColor:h,useNameLabel:!0}),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=x.rawX,n.__radialRawY=x.rawY,r.add(n),e.setItemGraphicEl(t,n),n.__oldX=n.x,n.__oldY=n.y,PQ(n,{x:x.x,y:x.y},i);var b=n.getSymbolPath();if("radial"===i.get("layout")){var S=p.children[0],w=S.getLayout(),M=S.children.length,A=void 0,C=void 0;if(x.x===w.x&&!0===s.isExpand&&S.children.length){var T={x:(S.children[0].getLayout().x+S.children[M-1].getLayout().x)/2,y:(S.children[0].getLayout().y+S.children[M-1].getLayout().y)/2};(A=Math.atan2(T.y-w.y,T.x-w.x))<0&&(A=2*Math.PI+A),(C=T.x<w.x)&&(A-=Math.PI)}else(A=Math.atan2(x.y-w.y,x.x-w.x))<0&&(A=2*Math.PI+A),0===s.children.length||0!==s.children.length&&!1===s.isExpand?(C=x.x<w.x)&&(A-=Math.PI):!(C=x.x>w.x)&&(A-=Math.PI);var I=C?"left":"right",D=u.getModel("label"),P=D.get("rotate"),R=Math.PI/180*P,L=b.getTextContent();L&&(b.setTextConfig({position:D.get("position")||I,rotation:null==P?-A:R,origin:"center"}),L.setStyle("verticalAlign","middle"))}var O=u.get(["emphasis","focus"]),k="relative"===O?M2(s.getAncestorsIndices(),s.getDescendantIndices()):"ancestor"===O?s.getAncestorsIndices():"descendant"===O?s.getDescendantIndices():null;k&&(D7(n).focus=k),function(e,t,n,r,i,a,s,u){var c=t.getModel(),h=e.get("edgeShape"),p=e.get("layout"),f=e.getOrient(),v=e.get(["lineStyle","curveness"]),y=e.get("edgeForkPosition"),_=c.getModel("lineStyle").getLineStyle(),x=r.__edge;if("curve"===h)t.parentNode&&t.parentNode!==n&&(!x&&(x=r.__edge=new BE({shape:XB(p,f,v,i,i)})),PQ(x,{shape:XB(p,f,v,a,s)},e));else if("polyline"===h&&"orthogonal"===p&&t!==n&&t.children&&0!==t.children.length&&!0===t.isExpand){for(var b=t.children,S=[],w=0;w<b.length;w++){var M=b[w].getLayout();S.push([M.x,M.y])}!x&&(x=r.__edge=new XI({shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]],orient:f,forkPosition:y}})),PQ(x,{shape:{parentPoint:[s.x,s.y],childPoints:S}},e)}x&&!("polyline"===h&&!t.isExpand)&&(x.useStyle(Mg({strokeNoScale:!0,fill:null},_)),PW(x,c,"lineStyle"),PM(x),u.add(x))}(i,s,p,n,_,y,x,r),n.__edge&&(n.onHoverStateChange=function(t){if("blur"!==t){var r=s.parentNode&&e.getItemGraphicEl(s.parentNode.dataIndex);!(r&&1===r.hoverState)&&PS(n.__edge,t)}})}function XL(e,t,n,r,i){var a=XO(t.tree.root,e),s=a.source,u=a.sourceLayout,c=t.getItemGraphicEl(e.dataIndex);if(!!c){var h=t.getItemGraphicEl(s.dataIndex).__edge,p=c.__edge||(!1===s.isExpand||1===s.children.length?h:void 0),f=r.get("edgeShape"),v=r.get("layout"),y=r.get("orient"),_=r.get(["lineStyle","curveness"]);p&&("curve"===f?P1(p,{shape:XB(v,y,_,u,u),style:{opacity:0}},r,{cb:function(){n.remove(p)},removeOpt:i}):"polyline"===f&&"orthogonal"===r.get("layout")&&P1(p,{shape:{parentPoint:[u.x,u.y],childPoints:[[u.x,u.y]]},style:{opacity:0}},r,{cb:function(){n.remove(p)},removeOpt:i}))}}function XO(e,t){for(var n,r=t.parentNode===e?t:t.parentNode||t;null==(n=r.getLayout());)r=r.parentNode===e?r:r.parentNode||r;return{source:r,sourceLayout:n}}function Xk(e,t,n,r,i){var a=e.tree.getNodeByDataIndex(t),s=XO(e.tree.root,a).sourceLayout,u={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};P1(n,{x:s.x+1,y:s.y+1},i,{cb:function(){r.remove(n),e.setItemGraphicEl(t,null)},removeOpt:u}),n.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:u}),a.children.forEach(function(t){XL(t,e,r,i,u)}),XL(a,e,r,i,u)}function XB(e,t,n,r,i){if("radial"===e){h=r.rawX,f=r.rawY,p=i.rawX,v=i.rawY;var a,s,u,c,h,p,f,v,y=XM(h,f),_=XM(h,f+(v-f)*n),x=XM(p,v+(f-v)*n),b=XM(p,v);return{x1:y.x||0,y1:y.y||0,x2:b.x||0,y2:b.y||0,cpx1:_.x||0,cpy1:_.y||0,cpx2:x.x||0,cpy2:x.y||0}}return h=r.x,f=r.y,p=i.x,v=i.y,("LR"===t||"RL"===t)&&(a=h+(p-h)*n,s=f,u=p+(h-p)*n,c=v),("TB"===t||"BT"===t)&&(a=h,s=f+(v-f)*n,u=p,c=v+(f-v)*n),{x1:h,y1:f,x2:p,y2:v,cpx1:a,cpy1:s,cpx2:u,cpy2:c}}var XN=Is();function XF(e,t){if(function(e){return XN(e).mainData===e}(this)){var n=Mf({},XN(this).datas);n[this.dataType]=t,XV(t,n,e)}else XW(t,this.dataType,XN(this).mainData,e);return t}function Xz(e,t){return e.struct&&e.struct.update(),t}function XU(e,t){return Mb(XN(t).datas,function(n,r){n!==t&&XW(n.cloneShallow(),r,t,e)}),t}function XH(e){var t=XN(this).mainData;return null==e||null==t?t:XN(t).datas[e]}function XG(){var e=XN(this).mainData;return null==e?[{data:e}]:MS(MC(XN(e).datas),function(t){return{type:t,data:XN(e).datas[t]}})}function XV(e,t,n){XN(e).datas={},Mb(t,function(t,r){XW(t,r,e,n)})}function XW(e,t,n,r){XN(n).datas[t]=e,XN(e).mainData=n,e.dataType=t,r.struct&&(e[r.structAttr]=r.struct,r.struct[r.datasAttr[t]]=e),e.getLinkedData=XH,e.getLinkedDataAll=XG}let Xj=function(e){var t=e.mainData,n=e.datas;!n&&(n={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,XV(t,n,e),Mb(n,function(n){Mb(t.TRANSFERABLE_METHODS,function(t){n.wrapMethod(t,ME(XF,e))})}),t.wrapMethod("cloneShallow",ME(XU,e)),Mb(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,ME(Xz,e))}),MY(n[t.dataType]===t)};var XX=function(){function e(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(e,t,n){MD(e)&&(n=t,t=e,e=null),MP(e=e||{})&&(e={order:e});var r,i=e.order||"preorder",a=this[e.attr||"children"];"preorder"===i&&(r=t.call(n,this));for(var s=0;!r&&s<a.length;s++)a[s].eachNode(e,t,n);"postorder"===i&&t.call(n,this)},e.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var n=0;n<this.children.length;n++){var r=this.children[n];r.updateDepthAndHeight(e+1),r.height>t&&(t=r.height)}this.height=t+1},e.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,n=this.children,r=n.length;t<r;t++){var i=n[t].getNodeById(e);if(i)return i}},e.prototype.contains=function(e){if(e===this)return!0;for(var t=0,n=this.children,r=n.length;t<r;t++){var i=n[t].contains(e);if(i)return i}},e.prototype.getAncestors=function(e){for(var t=[],n=e?this:this.parentNode;n;)t.push(n),n=n.parentNode;return t.reverse(),t},e.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},e.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(t){e.push(t.dataIndex)}),e},e.prototype.getValue=function(e){var t=this.hostTree.data;return t.getStore().get(t.getDimensionIndex(e||"value"),this.dataIndex)},e.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(e)},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},e.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,t=0;t<e.length;++t)if(e[t]===this)return t}return -1},e.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},e.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},e}(),XY=function(){function e(e){this.type="tree",this._nodes=[],this.hostModel=e}return e.prototype.eachNode=function(e,t,n){this.root.eachNode(e,t,n)},e.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},e.prototype.getNodeById=function(e){return this.root.getNodeById(e)},e.prototype.update=function(){for(var e=this.data,t=this._nodes,n=0,r=t.length;n<r;n++)t[n].dataIndex=-1;for(var n=0,r=e.count();n<r;n++)t[e.getRawIndex(n)].dataIndex=n},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,n,r){var i=new e(n),a=[],s=1;(function e(t,n){var r=t.value;s=Math.max(s,MI(r)?r.length:1),a.push(t);var u=new XX(Ir(t.name,""),i);n?function(e,t){var n=t.children;if(e.parentNode!==t)n.push(e),e.parentNode=t}(u,n):i.root=u,i._nodes.push(u);var c=t.children;if(c)for(var h=0;h<c.length;h++)e(c[h],u)})(t);i.root.updateDepthAndHeight(0);var u=new zK(z$(a,{coordDimensions:["value"],dimensionsCount:s}).dimensions,n);return u.initData(a),r&&r(u),Xj({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},e}();function XJ(e,t,n){if(e&&Mv(t,e.type)>=0){var r=n.getData().tree.root,i=e.targetNode;if(MP(i)&&(i=r.getNodeById(i)),i&&r.contains(i))return{node:i};var a=e.targetNodeId;if(null!=a&&(i=r.getNodeById(a)))return{node:i}}}function XZ(e){for(var t=[];e;)(e=e.parentNode)&&t.push(e);return t.reverse()}function Xq(e,t){return Mv(XZ(e),t)>=0}function XK(e,t){for(var n=[];e;){var r=e.dataIndex;n.push({name:e.name,dataIndex:r,value:t.getRawValue(r)}),e=e.parentNode}return n.reverse(),n}var XQ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return wJ(t,e),t.prototype.getInitialData=function(e){var t={name:e.name,children:e.data},n=new Rb(e.leaves||{},this,this.ecModel),r=XY.createTree(t,this,function(e){e.wrapMethod("getItemModel",function(e,t){var i=r.getNodeByDataIndex(t);return!(i&&i.children.length&&i.isExpand)&&(e.parentModel=n),e})}),i=0;r.eachNode("preorder",function(e){e.depth>i&&(i=e.depth)});var a=e.expandAndCollapse&&e.initialTreeDepth>=0?e.initialTreeDepth:i;return r.root.eachNode("preorder",function(e){var t=e.hostTree.data.getRawDataItem(e.dataIndex);e.isExpand=t&&null!=t.collapsed?!t.collapsed:e.depth<=a}),r.data},t.prototype.getOrient=function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,t,n){for(var r=this.getData().tree,i=r.root.children[0],a=r.getNodeByDataIndex(e),s=a.getValue(),u=a.name;a&&a!==i;)u=a.parentNode.name+"."+u,a=a.parentNode;return ks("nameValue",{name:u,value:s,noValue:isNaN(s)||null==s})},t.prototype.getDataParams=function(t){var n=e.prototype.getDataParams.apply(this,arguments),r=this.getData().tree.getNodeByDataIndex(t);return n.treeAncestors=XK(r,this),n.collapsed=!r.isExpand,n},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(kD);function X$(e,t){for(var n,r=[e];n=r.pop();)if(t(n),n.isExpand){var i=n.children;if(i.length)for(var a=i.length-1;a>=0;a--)r.push(i[a])}}function X0(e,t){e.eachSeriesByType("tree",function(e){(function(e,t){var n,r,i=(n=e,r=t,Lu(n.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}));e.layoutInfo=i;var a=e.get("layout"),s=0,u=0,c=null;"radial"===a?(s=2*Math.PI,u=Math.min(i.height,i.width)/2,c=Xw(function(e,t){return(e.parentNode===t.parentNode?1:2)/e.depth})):(s=i.width,u=i.height,c=Xw());var h=e.getData().tree.root,p=h.children[0];if(p){!function(e){e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var t,n,r=[e];t=r.pop();)if(n=t.children,t.isExpand&&n.length){for(var i=n.length,a=i-1;a>=0;a--){var s=n[a];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:a,thread:null},r.push(s)}}}(h),!function(e,t,n){for(var r,i=[e],a=[];r=i.pop();)if(a.push(r),r.isExpand){var s=r.children;if(s.length)for(var u=0;u<s.length;u++)i.push(s[u])}for(;r=a.pop();)t(r,n)}(p,Xb,c),h.hierNode.modifier=-p.hierNode.prelim,X$(p,XS);var f=p,v=p,y=p;X$(p,function(e){var t=e.getLayout().x;t<f.getLayout().x&&(f=e),t>v.getLayout().x&&(v=e),e.depth>y.depth&&(y=e)});var _=f===v?1:c(f,v)/2,x=_-f.getLayout().x,b=0,S=0,w=0,M=0;if("radial"===a)b=s/(v.getLayout().x+_+x),S=u/(y.depth-1||1),X$(p,function(e){w=(e.getLayout().x+x)*b,M=(e.depth-1)*S;var t=XM(w,M);e.setLayout({x:t.x,y:t.y,rawX:w,rawY:M},!0)});else{var A=e.getOrient();"RL"===A||"LR"===A?(S=u/(v.getLayout().x+_+x),b=s/(y.depth-1||1),X$(p,function(e){M=(e.getLayout().x+x)*S,w="LR"===A?(e.depth-1)*b:s-(e.depth-1)*b,e.setLayout({x:w,y:M},!0)})):("TB"===A||"BT"===A)&&(b=s/(v.getLayout().x+_+x),S=u/(y.depth-1||1),X$(p,function(e){w=(e.getLayout().x+x)*b,M="TB"===A?(e.depth-1)*S:u-(e.depth-1)*S,e.setLayout({x:w,y:M},!0)}))}}})(e,t)})}function X1(e){e.eachSeriesByType("tree",function(e){var t=e.getData();t.tree.eachNode(function(e){var n=e.getModel().getModel("itemStyle").getItemStyle();Mf(t.ensureUniqueItemVisual(e.dataIndex,"style"),n)})})}var X2=["treemapZoomToNode","treemapRender","treemapMove"];function X3(e){var t=e.getData().tree,n={};t.eachNode(function(t){for(var r=t;r&&r.depth>1;)r=r.parentNode;var i=LU(e.ecModel,r.name||r.dataIndex+"",n);t.setVisual("decal",i)})}var X5=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.preventUsingHoverLayer=!0,n}return wJ(t,e),t.prototype.getInitialData=function(e,t){var n={name:e.name,children:e.data};(function e(t){var n=0;Mb(t.children,function(t){e(t);var r=t.value;MI(r)&&(r=r[0]),n+=r});var r=t.value;MI(r)&&(r=r[0]),(null==r||isNaN(r))&&(r=n),r<0&&(r=0),MI(t.value)?t.value[0]=r:t.value=r})(n);var r=e.levels||[],i=new Rb({itemStyle:this.designatedVisualItemStyle={}},this,t),a=MS((r=e.levels=function(e,t){var n,r,i=E6(t.get("color")),a=E6(t.get(["aria","decal","decals"]));if(!!i){Mb(e=e||[],function(e){var t=new Rb(e),i=t.get("color"),a=t.get("decal");(t.get(["itemStyle","color"])||i&&"none"!==i)&&(n=!0),(t.get(["itemStyle","decal"])||a&&"none"!==a)&&(r=!0)});var s=e[0]||(e[0]={});return!n&&(s.color=i.slice()),!r&&a&&(s.decal=a.slice()),e}}(r,t))||[],function(e){return new Rb(e,i,t)},this),s=XY.createTree(n,this,function(e){e.wrapMethod("getItemModel",function(e,t){var n=s.getNodeByDataIndex(t),r=n?a[n.depth]:null;return e.parentModel=r||i,e})});return s.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,t,n){var r=this.getData(),i=this.getRawValue(e);return ks("nameValue",{name:r.getName(e),value:i})},t.prototype.getDataParams=function(t){var n=e.prototype.getDataParams.apply(this,arguments),r=this.getData().tree.getNodeByDataIndex(t);return n.treeAncestors=XK(r,this),n.treePathInfo=n.treeAncestors,n},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},Mf(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var t=this._idIndexMap;!t&&(t=this._idIndexMap=M1(),this._idIndexMapCount=0);var n=t.get(e);return null==n&&t.set(e,n=this._idIndexMapCount++),n},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;(!e||e!==t&&!t.contains(e))&&(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){X3(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.1024,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(kD),X4=function(){function e(e){this.group=new ES,e.add(this.group)}return e.prototype.render=function(e,t,n,r){var i=e.getModel("breadcrumb"),a=this.group;if(a.removeAll(),!!i.get("show")&&!!n){var s=i.getModel("itemStyle"),u=i.getModel("emphasis"),c=s.getModel("textStyle"),h=u.getModel(["itemStyle","textStyle"]),p={pos:{left:i.get("left"),right:i.get("right"),top:i.get("top"),bottom:i.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:i.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,p,c),this._renderContent(e,p,s,u,c,h,r),Lc(a,p.pos,p.box)}},e.prototype._prepare=function(e,t,n){for(var r=e;r;r=r.parentNode){var i=Ir(r.getModel().get("name"),""),a=Math.max(n.getTextRect(i).width+16,t.emptyItemWidth);t.totalWidth+=a+8,t.renderList.push({node:r,text:i,width:a})}},e.prototype._renderContent=function(e,t,n,r,i,a,s){var u,c,h,p,f,v,y,_,x,b=0,S=t.emptyItemWidth,w=e.get(["breadcrumb","height"]);for(var M=(u=t.pos,p=(c=t.box).width,f=c.height,v=Ek(u.left,p),y=Ek(u.top,f),_=Ek(u.right,p),x=Ek(u.bottom,f),(isNaN(v)||isNaN(parseFloat(u.left)))&&(v=0),(isNaN(_)||isNaN(parseFloat(u.right)))&&(_=p),(isNaN(y)||isNaN(parseFloat(u.top)))&&(y=0),(isNaN(x)||isNaN(parseFloat(u.bottom)))&&(x=f),{width:Math.max(_-v-(h=R4(h||0))[1]-h[3],0),height:Math.max(x-y-h[0]-h[2],0)}),A=t.totalWidth,C=t.renderList,T=r.getModel("itemStyle").getItemStyle(),I=C.length-1;I>=0;I--){var D=C[I],P=D.node,R=D.width,L=D.text;A>M.width&&(A-=R-S,R=S,L=null);var O=new Bm({shape:{points:function(e,t,n,r,i,a){var s=[[i?e:e-5,t],[e+n,t],[e+n,t+r],[i?e:e-5,t+r]];return a||s.splice(2,0,[e+n+5,t+r/2]),i||s.push([e,t+r/2]),s}(b,0,R,w,I===C.length-1,0===I)},style:Mg(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new D8({style:Re(i,{text:L})}),textConfig:{position:"inside"},z2:1e5,onclick:ME(s,P)});O.disableLabelAnimation=!0,O.getTextContent().ensureState("emphasis").style=Re(a,{text:L}),O.ensureState("emphasis").style=T,PU(O,r.get("focus"),r.get("blurScope"),r.get("disabled")),this.group.add(O),function(e,t,n){D7(e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&XK(n,t)}}(O,e,P),b+=R+8}},e.prototype.remove=function(){this.group.removeAll()},e}(),X6=function(){function e(){this._storage=[],this._elExistsMap={}}return e.prototype.add=function(e,t,n,r,i){return!this._elExistsMap[e.id]&&(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:t,duration:n,delay:r,easing:i}),!0)},e.prototype.finished=function(e){return this._finishedCallback=e,this},e.prototype.start=function(){for(var e=this,t=this._storage.length,n=function(){--t<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},r=0,i=this._storage.length;r<i;r++){var a=this._storage[r];a.el.animateTo(a.target,{duration:a.duration,delay:a.delay,easing:a.easing,setToFinal:!0,done:n,aborted:n})}return this},e}(),X9="label",X8="upperLabel",X7=100,Ye=20,Yt=30,Yn=IC([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Yr=function(e){var t=Yn(e);return t.stroke=t.fill=t.lineWidth=null,t},Yi=Is(),Ya=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._state="ready",n._storage=Yo(),n}return wJ(t,e),t.prototype.render=function(e,t,n,r){if(!(0>Mv(t.findComponents({mainType:"series",subType:"treemap",query:r}),e))){this.seriesModel=e,this.api=n,this.ecModel=t;var i=XJ(r,["treemapZoomToNode","treemapRootToNode"],e),a=r&&r.type,s=e.layoutInfo,u=!this._oldTree,c=this._storage,h="treemapRootToNode"===a&&i&&c?{rootNodeGroup:c.nodeGroup[i.node.getRawIndex()],direction:r.direction}:null,p=this._giveContainerGroup(s),f=e.get("animation"),v=this._doRender(p,e,h);!f||u||a&&"treemapZoomToNode"!==a&&"treemapRootToNode"!==a?v.renderFinally():this._doAnimation(p,v,e,h),this._resetController(n),this._renderBreadcrumb(e,n,i)}},t.prototype._giveContainerGroup=function(e){var t=this._containerGroup;return!t&&(t=this._containerGroup=new ES,this._initEvents(t),this.group.add(t)),t.x=e.x,t.y=e.y,t},t.prototype._doRender=function(e,t,n){var r=t.getData().tree,i=this._oldTree,a=Yo(),s=Yo(),u=this._storage,c=[];(function e(r,i,h,p,f){function v(e){return e.getId()}function y(v,y){var _=null!=v?r[v]:null,x=null!=y?i[y]:null,b=function(e,t,n,r,i,a,s,u,c,h){if(!s)return;var p=s.getLayout(),f=e.getData(),v=s.getModel();if(f.setItemGraphicEl(s.dataIndex,null),!p||!p.isInView)return;var y=p.width,_=p.height,x=p.borderWidth,b=p.invisible,S=s.getRawIndex(),w=u&&u.getRawIndex(),M=s.viewChildren,A=p.upperHeight,C=M&&M.length,T=v.getModel("itemStyle"),I=v.getModel(["emphasis","itemStyle"]),D=v.getModel(["blur","itemStyle"]),P=v.getModel(["select","itemStyle"]),R=T.get("borderRadius")||0,L=W("nodeGroup",ES);if(!!L){if(c.add(L),L.x=p.x||0,L.y=p.y||0,L.markRedraw(),Yi(L).nodeWidth=y,Yi(L).nodeHeight=_,p.isAboveViewRoot)return L;var O=W("background",DX,h,Ye);O&&function(t,n,r){var i=D7(n);if(i.dataIndex=s.dataIndex,i.seriesIndex=e.seriesIndex,n.setShape({x:0,y:0,width:y,height:_,r:R}),b)H(n);else{n.invisible=!1;var a=s.getVisual("style"),u=a.stroke,c=Yr(T);c.fill=u;var h=Yn(I);h.fill=I.get("borderColor");var p=Yn(D);p.fill=D.get("borderColor");var f=Yn(P);if(f.fill=P.get("borderColor"),r){var v=y-2*x;G(n,u,a.opacity,{x:x,y:0,width:v,height:A})}else n.removeTextContent();n.setStyle(c),n.ensureState("emphasis").style=h,n.ensureState("blur").style=p,n.ensureState("select").style=f,PM(n)}t.add(n)}(L,O,C&&p.upperLabelHeight);var k=v.getModel("emphasis"),B=k.get("focus"),N=k.get("blurScope"),F=k.get("disabled"),z="ancestor"===B?s.getAncestorsIndices():"descendant"===B?s.getDescendantIndices():B;if(C)PX(L)&&Pj(L,!1),O&&(Pj(O,!F),f.setItemGraphicEl(s.dataIndex,O),PH(O,z,N));else{var U=W("content",DX,h,Yt);U&&function(t,n){var r=D7(n);r.dataIndex=s.dataIndex,r.seriesIndex=e.seriesIndex;var i=Math.max(y-2*x,0),a=Math.max(_-2*x,0);if(n.culling=!0,n.setShape({x:x,y:x,width:i,height:a,r:R}),b)H(n);else{n.invisible=!1;var u=s.getVisual("style"),c=u.fill,h=Yr(T);h.fill=c,h.decal=u.decal;var p=Yn(I),f=Yn(D),v=Yn(P);G(n,c,u.opacity,null),n.setStyle(h),n.ensureState("emphasis").style=p,n.ensureState("blur").style=f,n.ensureState("select").style=v,PM(n)}t.add(n)}(L,U),O.disableMorphing=!0,O&&PX(O)&&Pj(O,!1),Pj(L,!F),f.setItemGraphicEl(s.dataIndex,L),PH(L,z,N)}return L}function H(e){e.invisible||a.push(e)}function G(t,n,r,i){var a=v.getModel(i?X8:X9),u=Ir(v.get("name"),null),c=a.getShallow("show");P8(t,P7(v,i?X8:X9),{defaultText:c?u:null,inheritColor:n,defaultOpacity:r,labelFetcher:e,labelDataIndex:s.dataIndex});var h=t.getTextContent();if(!!h){var f=h.style,y=MX(f.padding||0);i&&(t.setTextConfig({layoutRect:i}),h.disableLabelLayout=!0),h.beforeUpdate=function(){var e=Math.max((i?i.width:t.shape.width)-y[1]-y[3],0),n=Math.max((i?i.height:t.shape.height)-y[0]-y[2],0);(f.width!==e||f.height!==n)&&h.setStyle({width:e,height:n})},f.truncateMinChar=2,f.lineOverflow="truncate",V(f,i,p);var _=h.getState("emphasis");V(_?_.style:null,i,p)}}function V(t,n,r){var i=t?t.text:null;if(!n&&r.isLeafRoot&&null!=i){var a=e.get("drillDownIcon",!0);t.text=a?a+" "+i:i}}function W(e,a,u,c){var h=null!=w&&n[e][w],p=i[e];return h?(n[e][w]=null,function(e,t){var n=e[S]={};t instanceof ES?(n.oldX=t.x,n.oldY=t.y):n.oldShape=Mf({},t.shape)}(p,h)):!b&&((h=new a)instanceof IJ&&(h.z2=function(e,t){return e*X7+t}(u,c)),function(e,t){var n=e[S]={},a=s.parentNode,u=t instanceof ES;if(a&&(!r||"drillDown"===r.direction)){var c=0,h=0,p=i.background[a.getRawIndex()];!r&&p&&p.oldShape&&(c=p.oldShape.width,h=p.oldShape.height),u?(n.oldX=0,n.oldY=h):n.oldShape={x:c,y:h,width:0,height:0}}n.fadein=!u}(p,h)),t[e][S]=h}}(t,s,u,n,a,c,_,x,h,f);b&&e(_&&_.viewChildren||[],x&&x.viewChildren||[],b,p,f+1)}p?(i=r,Mb(r,function(e,t){e.isRemoved()||y(t,t)})):new zO(i,r,v,v).add(y).update(y).remove(ME(y,null)).execute()})(r.root?[r.root]:[],i&&i.root?[i.root]:[],e,r===i||!i,0);var h=function(e){var t=Yo();return e&&Mb(e,function(e,n){var r=t[n];Mb(e,function(e){e&&(r.push(e),Yi(e).willDelete=!0)})}),t}(u);if(this._oldTree=r,this._storage=s,this._controllerHost){var p=this.seriesModel.layoutInfo,f=r.root.getLayout();f.width===p.width&&f.height===p.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:a,willDeleteEls:h,renderFinally:function(){Mb(h,function(e){Mb(e,function(e){e.parent&&e.parent.remove(e)})}),Mb(c,function(e){e.invisible=!0,e.dirty()})}}},t.prototype._doAnimation=function(e,t,n,r){var i=n.get("animationDurationUpdate"),a=n.get("animationEasing"),s=(MD(i)?0:i)||0,u=(MD(a)?null:a)||"cubicOut",c=new X6;Mb(t.willDeleteEls,function(e,t){Mb(e,function(e,n){if(!e.invisible){var i,a=e.parent,h=Yi(a);if(r&&"drillDown"===r.direction)i=a===r.rootNodeGroup?{shape:{x:0,y:0,width:h.nodeWidth,height:h.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var p=0,f=0;!h.willDelete&&(p=h.nodeWidth/2,f=h.nodeHeight/2),i="nodeGroup"===t?{x:p,y:f,style:{opacity:0}}:{shape:{x:p,y:f,width:0,height:0},style:{opacity:0}}}i&&c.add(e,i,s,0,u)}})}),Mb(this._storage,function(e,n){Mb(e,function(e,r){var i=t.lastsForAnimation[n][r],a={};if(!!i)e instanceof ES?null!=i.oldX&&(a.x=e.x,a.y=e.y,e.x=i.oldX,e.y=i.oldY):(i.oldShape&&(a.shape=Mf({},e.shape),e.setShape(i.oldShape)),i.fadein?(e.setStyle("opacity",0),a.style={opacity:1}):1!==e.style.opacity&&(a.style={opacity:1})),c.add(e,a,s,0,u)})},this),this._state="animating",c.finished(MT(function(){this._state="ready",t.renderFinally()},this)).start()},t.prototype._resetController=function(e){var t=this._controller,n=this._controllerHost;!n&&(this._controllerHost={target:this.group},n=this._controllerHost),!t&&((t=this._controller=new jh(e.getZr())).enable(this.seriesModel.get("roam")),n.zoomLimit=this.seriesModel.get("scaleLimit"),n.zoom=this.seriesModel.get("zoom"),t.on("pan",MT(this._onPan,this)),t.on("zoom",MT(this._onZoom,this)));var r=new Cr(0,0,e.getWidth(),e.getHeight());t.setPointerChecker(function(e,t,n){return r.contain(t,n)})},t.prototype._clearController=function(){var e=this._controller;this._controllerHost=null,e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if("animating"!==this._state&&(Math.abs(e.dx)>3||Math.abs(e.dy)>3)){var t=this.seriesModel.getData().tree.root;if(!t)return;var n=t.getLayout();if(!!n)this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+e.dx,y:n.y+e.dy,width:n.width,height:n.height}})}},t.prototype._onZoom=function(e){var t=e.originX,n=e.originY,r=e.scale;if("animating"!==this._state){var i=this.seriesModel.getData().tree.root;if(!i)return;var a=i.getLayout();if(!a)return;var s=new Cr(a.x,a.y,a.width,a.height),u=null,c=this._controllerHost;u=c.zoomLimit;var h=c.zoom=c.zoom||1;if(h*=r,u){var p=u.min||0;h=Math.max(Math.min(u.max||1/0,h),p)}var f=h/c.zoom;c.zoom=h;var v=this.seriesModel.layoutInfo;t-=v.x,n-=v.y;var y=AZ();A$(y,y,[-t,-n]),A1(y,y,[f,f]),A$(y,y,[t,n]),s.applyTransform(y),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:s.x,y:s.y,width:s.width,height:s.height}})}},t.prototype._initEvents=function(e){var t=this;e.on("click",function(e){if("ready"!==t._state)return;var n=t.seriesModel.get("nodeClick",!0);if(!n)return;var r=t.findTarget(e.offsetX,e.offsetY);if(!!r){var i=r.node;if(i.getLayout().isLeafRoot)t._rootToNode(r);else if("zoomToNode"===n)t._zoomToNode(r);else if("link"===n){var a=i.hostTree.data.getItemModel(i.dataIndex),s=a.get("link",!0),u=a.get("target",!0)||"blank";s&&Li(s,u)}}},this)},t.prototype._renderBreadcrumb=function(e,t,n){var r=this;!n&&!(n=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2))&&(n={node:e.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new X4(this.group))).render(e,t,n.node,function(t){"animating"!==r._state&&(Xq(e.getViewRoot(),t)?r._rootToNode({node:t}):r._zoomToNode({node:t}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=Yo(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,t){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(r){var i=this._storage.background[r.getRawIndex()];if(i){var a=i.transformCoordToLocal(e,t),s=i.shape;if(!(s.x<=a[0])||!(a[0]<=s.x+s.width)||!(s.y<=a[1])||!(a[1]<=s.y+s.height))return!1;n={node:r,offsetX:a[0],offsetY:a[1]}}},this),n},t.type="treemap",t}(Nv);function Yo(){return{nodeGroup:[],background:[],content:[]}}var Ys=Mb,Yl=function(){function e(t){var n=t.mappingMethod,r=t.type,i=this.option=Mh(t);this.type=r,this.mappingMethod=n,this._normalizeData=Yy[n];var a=e.visualHandlers[r];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[n],"piecewise"===n?(Yu(i),function(e){var t=e.pieceList;e.hasSpecialVisual=!1,Mb(t,function(t,n){t.originIndex=n,null!=t.visual&&(e.hasSpecialVisual=!0)})}(i)):"category"===n?i.categories?function(e){var t=e.categories,n=e.categoryMap={},r=e.visual;if(Ys(t,function(e,t){n[e]=t}),!MI(r)){var i=[];MO(r)?Ys(r,function(e,t){var r=n[t];i[null!=r?r:-1]=e}):i[-1]=r,r=Yv(e,i)}for(var a=t.length-1;a>=0;a--)null==r[a]&&(delete n[t[a]],t.pop())}(i):Yu(i,!0):(MY("linear"!==n||i.dataExtent),Yu(i))}return e.prototype.mapValueToVisual=function(e){var t=this._normalizeData(e);return this._normalizedToVisual(t,e)},e.prototype.getNormalizer=function(){return MT(this._normalizeData,this)},e.listVisualTypes=function(){return MC(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(e,t,n){MO(e)?Mb(e,t,n):t.call(n,e)},e.mapVisual=function(t,n,r){var i,a=MI(t)?[]:MO(t)?{}:(i=!0,null);return e.eachVisual(t,function(e,t){var s=n.call(r,e,t);i?a=s:a[t]=s}),a},e.retrieveVisuals=function(t){var n,r={};return t&&Ys(e.visualHandlers,function(e,i){t.hasOwnProperty(i)&&(r[i]=t[i],n=!0)}),n?r:null},e.prepareVisualTypes=function(e){if(MI(e))e=e.slice();else{if(!MO(e))return[];var t=[];Ys(e,function(e,n){t.push(n)}),e=t}return e.sort(function(e,t){return"color"===t&&"color"!==e&&0===e.indexOf("color")?1:-1}),e},e.dependsOn=function(e,t){return"color"===t?!!(e&&0===e.indexOf(t)):e===t},e.findPieceIndex=function(e,t,n){for(var r,i=1/0,a=0,s=t.length;a<s;a++){var u=t[a].value;if(null!=u){if(u===e||MP(u)&&u===e+"")return a;n&&f(u,a)}}for(var a=0,s=t.length;a<s;a++){var c=t[a],h=c.interval,p=c.close;if(h){if(h[0]===-1/0){if(function(e,t,n){return e?t<=n:t<n}(p[1],e,h[1]))return a}else if(h[1]===1/0){if(function(e,t,n){return e?t<=n:t<n}(p[0],h[0],e))return a}else if(function(e,t,n){return e?t<=n:t<n}(p[0],h[0],e)&&function(e,t,n){return e?t<=n:t<n}(p[1],e,h[1]))return a;n&&f(h[0],a),n&&f(h[1],a)}}if(n)return e===1/0?t.length-1:e===-1/0?0:r;function f(t,n){var a=Math.abs(t-e);a<i&&(i=a,r=n)}},e.visualHandlers={color:{applyVisual:Yd("color"),getColorMapper:function(){var e=this.option;return MT("category"===e.mappingMethod?function(e,t){return t||(e=this._normalizeData(e)),Yp.call(this,e)}:function(t,n,r){var i=!!r;return n||(t=this._normalizeData(t)),r=Tt(t,e.parsedVisual,r),i?r:Ts(r,"rgba")},this)},_normalizedToVisual:{linear:function(e){return Ts(Tt(e,this.option.parsedVisual),"rgba")},category:Yp,piecewise:function(e,t){var n=Ym.call(this,t);return null==n&&(n=Ts(Tt(e,this.option.parsedVisual),"rgba")),n},fixed:Yf}},colorHue:Yc(function(e,t){return Ta(e,t)}),colorSaturation:Yc(function(e,t){return Ta(e,null,t)}),colorLightness:Yc(function(e,t){return Ta(e,null,null,t)}),colorAlpha:Yc(function(e,t){return To(e,t)}),decal:{applyVisual:Yd("decal"),_normalizedToVisual:{linear:null,category:Yp,piecewise:null,fixed:null}},opacity:{applyVisual:Yd("opacity"),_normalizedToVisual:Yg([0,1])},liftZ:{applyVisual:Yd("liftZ"),_normalizedToVisual:{linear:Yf,category:Yf,piecewise:Yf,fixed:Yf}},symbol:{applyVisual:function(e,t,n){n("symbol",this.mapValueToVisual(e))},_normalizedToVisual:{linear:Yh,category:Yp,piecewise:function(e,t){var n=Ym.call(this,t);return null==n&&(n=Yh.call(this,e)),n},fixed:Yf}},symbolSize:{applyVisual:Yd("symbolSize"),_normalizedToVisual:Yg([0,1])}},e}();function Yu(e,t){var n=e.visual,r=[];MO(n)?Ys(n,function(e){r.push(e)}):null!=n&&r.push(n);!t&&1===r.length&&!({color:1,symbol:1}).hasOwnProperty(e.type)&&(r[1]=r[0]),Yv(e,r)}function Yc(e){return{applyVisual:function(t,n,r){var i=this.mapValueToVisual(t);r("color",e(n("color"),i))},_normalizedToVisual:Yg([0,1])}}function Yh(e){var t=this.option.visual;return t[Math.round(EO(e,[0,1],[0,t.length-1],!0))]||{}}function Yd(e){return function(t,n,r){r(e,this.mapValueToVisual(t))}}function Yp(e){var t=this.option.visual;return t[this.option.loop&&-1!==e?e%t.length:e]}function Yf(){return this.option.visual[0]}function Yg(e){return{linear:function(t){return EO(t,e,this.option.visual,!0)},category:Yp,piecewise:function(t,n){var r=Ym.call(this,n);return null==r&&(r=EO(t,e,this.option.visual,!0)),r},fixed:Yf}}function Ym(e){var t=this.option,n=t.pieceList;if(t.hasSpecialVisual){var r=Yl.findPieceIndex(e,n),i=n[r];if(i&&i.visual)return i.visual[this.type]}}function Yv(e,t){return e.visual=t,"color"===e.type&&(e.parsedVisual=MS(t,function(e){var t=C9(e);return t||[0,0,0,1]})),t}var Yy={linear:function(e){return EO(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,n=Yl.findPieceIndex(e,t,!0);if(null!=n)return EO(n,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return null==t?-1:t},fixed:M6};function Y_(e,t,n){return e?t<=n:t<n}var Yx=Is();let Yb={seriesType:"treemap",reset:function(e){var t=e.getData().tree.root;if(!t.isRemoved())(function e(t,n,r,i){var a,s=t.getModel(),u=t.getLayout(),c=t.hostTree.data;if(!!u&&!u.invisible&&!!u.isInView){var h=s.getModel("itemStyle"),p=function(e,t,n){var r=Mf({},t),i=n.designatedVisualItemStyle;return Mb(["color","colorAlpha","colorSaturation"],function(n){i[n]=t[n];var a=e.get(n);i[n]=null,null!=a&&(r[n]=a)}),r}(h,n,i),f=c.ensureUniqueItemVisual(t.dataIndex,"style"),v=h.get("borderColor"),y=h.get("borderColorSaturation");null!=y&&(v=function(e,t){return null!=t?Ta(t,null,null,e):null}(y,a=YS(p))),f.stroke=v;var _=t.viewChildren;if(_&&_.length){var x=function(e,t,n,r,i,a){if(!a||!a.length)return;var s=YM(t,"color")||null!=i.color&&"none"!==i.color&&(YM(t,"colorAlpha")||YM(t,"colorSaturation"));if(!!s){var u=t.get("visualMin"),c=t.get("visualMax"),h=n.dataExtent.slice();null!=u&&u<h[0]&&(h[0]=u),null!=c&&c>h[1]&&(h[1]=c);var p=t.get("colorMappingBy"),f={type:s.name,dataExtent:h,visual:s.range};"color"===f.type&&("index"===p||"id"===p)?(f.mappingMethod="category",f.loop=!0):f.mappingMethod="linear";var v=new Yl(f);return Yx(v).drColorMappingBy=p,v}}(t,s,u,h,p,_);Mb(_,function(t,n){if(t.depth>=r.length||t===r[t.depth]){var a=function(e,t,n,r,i,a){var s=Mf({},t);if(i){var u=i.type,c="color"===u&&Yx(i).drColorMappingBy,h="index"===c?r:"id"===c?a.mapIdToIndex(n.getId()):n.getValue(e.get("visualDimension"));s[u]=i.mapValueToVisual(h)}return s}(s,p,t,n,x,i);e(t,a,r,i)}})}else a=YS(p),f.fill=a}})(t,{},e.getViewRoot().getAncestors(),e)}};function YS(e){var t=Yw(e,"color");if(t){var n=Yw(e,"colorAlpha"),r=Yw(e,"colorSaturation");return r&&(t=Ta(t,null,null,r)),n&&(t=To(t,n)),t}}function Yw(e,t){var n=e[t];if(null!=n&&"none"!==n)return n}function YM(e,t){var n=e.get(t);return MI(n)&&n.length?{name:t,range:n}:null}var YA=Math.max,YC=Math.min,YT=MG,YE=Mb,YI=["itemStyle","borderWidth"],YD=["itemStyle","gapWidth"],YP=["upperLabel","show"],YR=["upperLabel","height"];let YL={seriesType:"treemap",reset:function(e,t,n,r){var i=n.getWidth(),a=n.getHeight(),s=e.option,u=Lu(e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),c=s.size||[],h=Ek(YT(u.width,c[0]),i),p=Ek(YT(u.height,c[1]),a),f=r&&r.type,v=XJ(r,["treemapZoomToNode","treemapRootToNode"],e),y="treemapRender"===f||"treemapMove"===f?r.rootRect:null,_=e.getViewRoot(),x=XZ(_);if("treemapMove"!==f){var b="treemapZoomToNode"===f?function(e,t,n,r,i){var a,s=(t||{}).node,u=[r,i];if(!s||s===n)return u;for(var c=r*i,h=c*e.option.zoomToNodeRatio;a=s.parentNode;){for(var p=0,f=a.children,v=0,y=f.length;v<y;v++)p+=f[v].getValue();var _=s.getValue();if(0===_)return u;h*=p/_;var x=a.getModel(),b=x.get(YI),S=Math.max(b,Yk(x));h+=4*b*b+(3*b+S)*Math.pow(h,.5),h>EV&&(h=EV),s=a}h<c&&(h=c);var w=Math.pow(h/c,.5);return[r*w,i*w]}(e,v,_,h,p):y?[y.width,y.height]:[h,p],S=s.sort;S&&"asc"!==S&&"desc"!==S&&(S="desc");var w={squareRatio:s.squareRatio,sort:S,leafDepth:s.leafDepth};_.hostTree.clearLayouts();var M={x:0,y:0,width:b[0],height:b[1],area:b[0]*b[1]};_.setLayout(M),function e(t,n,r,i){if(t.isRemoved())return;var a,s,u=t.getLayout();a=u.width,s=u.height;var c=t.getModel(),h=c.get(YI),p=c.get(YD)/2,f=Yk(c),v=Math.max(h,f),y=h-p,_=v-p;t.setLayout({borderWidth:h,upperHeight:v,upperLabelHeight:f},!0),a=YA(a-2*y,0);var x=a*(s=YA(s-y-_,0)),b=function(e,t,n,r,i,a){var s=e.children||[],u=r.sort;"asc"!==u&&"desc"!==u&&(u=null);var c=null!=r.leafDepth&&r.leafDepth<=a;if(i&&!c)return e.viewChildren=[];(function(e,t){t&&e.sort(function(e,n){var r="asc"===t?e.getValue()-n.getValue():n.getValue()-e.getValue();return 0===r?"asc"===t?e.dataIndex-n.dataIndex:n.dataIndex-e.dataIndex:r})})(s=MM(s,function(e){return!e.isRemoved()}),u);var h=function(e,t,n){for(var r,i=0,a=0,s=t.length;a<s;a++)i+=t[a].getValue();var u=e.get("visualDimension");return t&&t.length?"value"===u&&n?(r=[t[t.length-1].getValue(),t[0].getValue()],"asc"===n&&r.reverse()):(r=[1/0,-1/0],YE(t,function(e){var t=e.getValue(u);t<r[0]&&(r[0]=t),t>r[1]&&(r[1]=t)})):r=[NaN,NaN],{sum:i,dataExtent:r}}(t,s,u);if(0===h.sum)return e.viewChildren=[];if(h.sum=function(e,t,n,r,i){if(!r)return n;for(var a=e.get("visibleMin"),s=i.length,u=s,c=s-1;c>=0;c--){var h=i["asc"===r?s-c-1:c].getValue();h/n*t<a&&(u=c,n-=h)}return"asc"===r?i.splice(0,s-u):i.splice(u,s-u),n}(t,n,h.sum,u,s),0===h.sum)return e.viewChildren=[];for(var p=0,f=s.length;p<f;p++){var v=s[p].getValue()/h.sum*n;s[p].setLayout({area:v})}return c&&(s.length&&e.setLayout({isLeafRoot:!0},!0),s.length=0),e.viewChildren=s,e.setLayout({dataExtent:h.dataExtent},!0),s}(t,c,x,n,r,i);if(!!b.length){var S={x:y,y:_,width:a,height:s},w=YC(a,s),M=1/0,A=[];A.area=0;for(var C=0,T=b.length;C<T;){var I=b[C];A.push(I),A.area+=I.getLayout().area;var D=function(e,t,n){for(var r=0,i=1/0,a=0,s=void 0,u=e.length;a<u;a++)(s=e[a].getLayout().area)&&(s<i&&(i=s),s>r&&(r=s));var c=e.area*e.area,h=t*t*n;return c?YA(h*r/c,c/(h*i)):1/0}(A,w,n.squareRatio);D<=M?(C++,M=D):(A.area-=A.pop().getLayout().area,YO(A,w,S,p,!1),w=YC(S.width,S.height),A.length=A.area=0,M=1/0)}if(A.length&&YO(A,w,S,p,!0),!r){var P=c.get("childrenVisibleMin");null!=P&&x<P&&(r=!0)}for(var C=0,T=b.length;C<T;C++)e(b[C],n,r,i+1)}}(_,w,!1,0),M=_.getLayout(),YE(x,function(e,t){var n=(x[t+1]||_).getValue();e.setLayout(Mf({dataExtent:[n,n],borderWidth:0,upperHeight:0},M))})}var A=e.getData().tree.root;A.setLayout(function(e,t,n){if(t)return{x:t.x,y:t.y};var r={x:0,y:0};if(!n)return r;var i=n.node,a=i.getLayout();if(!a)return r;for(var s=[a.width/2,a.height/2],u=i;u;){var c=u.getLayout();s[0]+=c.x,s[1]+=c.y,u=u.parentNode}return{x:e.width/2-s[0],y:e.height/2-s[1]}}(u,y,v),!0),e.setLayoutInfo(u),function e(t,n,r,i,a){var s=t.getLayout(),u=r[a],c=u&&u===t;if((!u||!!c)&&(a!==r.length||t===i)){t.setLayout({isInView:!0,invisible:!c&&!n.intersect(s),isAboveViewRoot:c},!0);var h=new Cr(n.x-s.x,n.y-s.y,n.width,n.height);YE(t.viewChildren||[],function(t){e(t,h,r,i,a+1)})}}(A,new Cr(-u.x,-u.y,i,a),x,_,0)}};function YO(e,t,n,r,i){var a=t===n.width?0:1,s=1-a,u=["x","y"],c=["width","height"],h=n[u[a]],p=t?e.area/t:0;(i||p>n[c[s]])&&(p=n[c[s]]);for(var f=0,v=e.length;f<v;f++){var y=e[f],_={},x=p?y.getLayout().area/p:0,b=_[c[s]]=YA(p-2*r,0),S=n[u[a]]+n[c[a]]-h,w=f===v-1||S<x?S:x,M=_[c[a]]=YA(w-2*r,0);_[u[s]]=n[u[s]]+YC(r,b/2),_[u[a]]=h+YC(r,M/2),h+=w,y.setLayout(_,!0)}n[u[s]]+=p,n[c[s]]-=p}function Yk(e){return e.get(YP)?e.get(YR):0}function YB(e){var t=e.findComponents({mainType:"legend"});if(!!t&&!!t.length)e.eachSeriesByType("graph",function(e){var n=e.getCategoriesData(),r=e.getGraph().data,i=n.mapArray(n.getName);r.filterSelf(function(e){var n=r.getItemModel(e).getShallow("category");if(null!=n){ML(n)&&(n=i[n]);for(var a=0;a<t.length;a++)if(!t[a].isSelected(n))return!1}return!0})})}function YN(e){var t={};e.eachSeriesByType("graph",function(e){var n=e.getCategoriesData(),r=e.getData(),i={};n.each(function(r){var a=n.getName(r);i["ec-"+a]=r;var s=n.getItemModel(r),u=s.getModel("itemStyle").getItemStyle();!u.fill&&(u.fill=e.getColorFromPalette(a,t)),n.setItemVisual(r,"style",u);for(var c=["symbol","symbolSize","symbolKeepAspect"],h=0;h<c.length;h++){var p=s.getShallow(c[h],!0);null!=p&&n.setItemVisual(r,c[h],p)}}),n.count()&&r.each(function(e){var t=r.getItemModel(e).getShallow("category");if(null!=t){MP(t)&&(t=i["ec-"+t]);var a=n.getItemVisual(t,"style");Mf(r.ensureUniqueItemVisual(e,"style"),a);for(var s=["symbol","symbolSize","symbolKeepAspect"],u=0;u<s.length;u++)r.setItemVisual(e,s[u],n.getItemVisual(t,s[u]))}})})}function YF(e){return!(e instanceof Array)&&(e=[e,e]),e}function Yz(e){e.eachSeriesByType("graph",function(e){var t=e.getGraph(),n=e.getEdgeData(),r=YF(e.get("edgeSymbol")),i=YF(e.get("edgeSymbolSize"));n.setVisual("fromSymbol",r&&r[0]),n.setVisual("toSymbol",r&&r[1]),n.setVisual("fromSymbolSize",i&&i[0]),n.setVisual("toSymbolSize",i&&i[1]),n.setVisual("style",e.getModel("lineStyle").getLineStyle()),n.each(function(e){var r=n.getItemModel(e),i=t.getEdgeByIndex(e),a=YF(r.getShallow("symbol",!0)),s=YF(r.getShallow("symbolSize",!0)),u=r.getModel("lineStyle").getLineStyle(),c=n.ensureUniqueItemVisual(e,"style");switch(Mf(c,u),c.stroke){case"source":var h=i.node1.getVisual("style");c.stroke=h&&h.fill;break;case"target":var h=i.node2.getVisual("style");c.stroke=h&&h.fill}a[0]&&i.setVisual("fromSymbol",a[0]),a[1]&&i.setVisual("toSymbol",a[1]),s[0]&&i.setVisual("fromSymbolSize",s[0]),s[1]&&i.setVisual("toSymbolSize",s[1])})})}var YU=function(e){return e.get("autoCurveness")||null},YH=function(e,t){var n=YU(e),r=20,i=[];if(ML(n))r=n;else if(MI(n)){e.__curvenessList=n;return}t>r&&(r=t);var a=r%2?r+2:r+3;i=[];for(var s=0;s<a;s++)i.push((s%2?s+1:s)/10*(s%2?-1:1));e.__curvenessList=i},YG=function(e,t,n){var r=[e.id,e.dataIndex].join("."),i=[t.id,t.dataIndex].join(".");return[n.uid,r,i].join("--\x3e")},YV=function(e){var t=e.split("--\x3e");return[t[0],t[2],t[1]].join("--\x3e")},YW=function(e,t){var n=YG(e.node1,e.node2,t);return t.__edgeMap[n]},Yj=function(e,t){var n=t.__edgeMap;return n[e]?n[e].length:0};function YX(e,t,n,r){var i,a,s=YU(t),u=MI(s);if(!s)return null;var c=YW(e,t);if(!c)return null;for(var h=-1,p=0;p<c.length;p++)if(c[p]===n){h=p;break}var f=(i=e,a=t,Yj(YG(i.node1,i.node2,a),a)+Yj(YG(i.node2,i.node1,a),a));YH(t,f),e.lineStyle=e.lineStyle||{};var v=YG(e.node1,e.node2,t),y=t.__curvenessList,_=u?0:f%2?0:1;if(c.isForward)return y[_+h];var x=Yj(YV(v),t),b=y[h+x+_];return r?u?s&&0===s[0]?(x+_)%2?b:-b:((x%2?0:1)+_)%2?b:-b:(x+_)%2?b:-b:y[h+x+_]}function YY(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var n=e.getGraph();n.eachNode(function(e){var t=e.getModel();e.setLayout([+t.get("x"),+t.get("y")])}),YJ(n,e)}}function YJ(e,t){e.eachEdge(function(e,n){var r=MW(e.getModel().get(["lineStyle","curveness"]),-YX(e,t,n,!0),0),i=Ae(e.node1.getLayout()),a=Ae(e.node2.getLayout()),s=[i,a];+r&&s.push([(i[0]+a[0])/2-(i[1]-a[1])*r,(i[1]+a[1])/2-(a[0]-i[0])*r]),e.setLayout(s)})}function YZ(e,t){e.eachSeriesByType("graph",function(e){var t=e.get("layout"),n=e.coordinateSystem;if(n&&"view"!==n.type){var r=e.getData(),i=[];Mb(n.dimensions,function(e){i=i.concat(r.mapDimensionsAll(e))});for(var a=0;a<r.count();a++){for(var s=[],u=!1,c=0;c<i.length;c++){var h=r.get(i[c],a);!isNaN(h)&&(u=!0),s.push(h)}u?r.setItemLayout(a,n.dataToPoint(s)):r.setItemLayout(a,[NaN,NaN])}YJ(r.graph,e)}else(!t||"none"===t)&&YY(e)})}function Yq(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=e.option.nodeScaleRatio,r=t.scaleX,i=t.getZoom();return((i-1)*n+1)/r}function YK(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var YQ=Math.PI,Y$=[];function Y0(e,t,n,r){var i=e.coordinateSystem;if(i&&"view"!==i.type)return;var a=i.getBoundingRect(),s=e.getData(),u=s.graph,c=a.width/2+a.x,h=a.height/2+a.y,p=Math.min(a.width,a.height)/2,f=s.count();if(s.setLayout({cx:c,cy:h}),!!f){if(n){var v=i.pointToData(r),y=[v[0]-c,v[1]-h];Ap(y,y),Ad(y,y,p),n.setLayout([c+y[0],h+y[1]],!0),Y2(n,e.get(["circular","rotateLabel"]),c,h)}Y1[t](e,u,s,p,c,h,f),u.eachEdge(function(t,n){var r,i=MW(t.getModel().get(["lineStyle","curveness"]),YX(t,e,n),0),a=Ae(t.node1.getLayout()),s=Ae(t.node2.getLayout()),u=(a[0]+s[0])/2,p=(a[1]+s[1])/2;+i&&(i*=3,r=[c*i+u*(1-i),h*i+p*(1-i)]),t.setLayout([a,s,r])})}}var Y1={value:function(e,t,n,r,i,a,s){var u=0,c=n.getSum("value"),h=2*Math.PI/(c||s);t.eachNode(function(e){var t=e.getValue("value"),n=h*(c?t:1)/2;u+=n,e.setLayout([r*Math.cos(u)+i,r*Math.sin(u)+a]),u+=n})},symbolSize:function(e,t,n,r,i,a,s){var u=0;Y$.length=s;var c=Yq(e);t.eachNode(function(e){var t=YK(e);isNaN(t)&&(t=2),t<0&&(t=0);var n=Math.asin((t*=c)/2/r);isNaN(n)&&(n=YQ/2),Y$[e.dataIndex]=n,u+=2*n});var h=(2*YQ-u)/s/2,p=0;t.eachNode(function(e){var t=h+Y$[e.dataIndex];p+=t,e.getLayout()&&e.getLayout().fixed||e.setLayout([r*Math.cos(p)+i,r*Math.sin(p)+a]),p+=t})}};function Y2(e,t,n,r){var i=e.getGraphicEl();if(!!i){var a=e.getModel().get(["label","rotate"])||0,s=i.getSymbolPath();if(t){var u=e.getLayout(),c=Math.atan2(u[1]-r,u[0]-n);c<0&&(c=2*Math.PI+c);var h=u[0]<n;h&&(c-=Math.PI);var p=h?"left":"right";s.setTextConfig({rotation:-c,position:p,origin:"center"});var f=s.ensureState("emphasis");Mf(f.textConfig||(f.textConfig={}),{position:p})}else s.setTextConfig({rotation:a*=Math.PI/180})}}function Y3(e){e.eachSeriesByType("graph",function(e){"circular"===e.get("layout")&&Y0(e,"symbolSize")})}var Y5=Ar;function Y4(e){e.eachSeriesByType("graph",function(e){var t=e.coordinateSystem;if(!t||"view"===t.type)if("force"===e.get("layout")){var n=e.preservedPoints||{},r=e.getGraph(),i=r.data,a=r.edgeData,s=e.getModel("force"),u=s.get("initLayout");e.preservedPoints?i.each(function(e){var t=i.getId(e);i.setItemLayout(e,n[t]||[NaN,NaN])}):u&&"none"!==u?"circular"===u&&Y0(e,"value"):YY(e);var c=i.getDataExtent("value"),h=a.getDataExtent("value"),p=s.get("repulsion"),f=s.get("edgeLength"),v=MI(p)?p:[p,p],y=MI(f)?f:[f,f];y=[y[1],y[0]];var _=i.mapArray("value",function(e,t){var n=i.getItemLayout(t),r=EO(e,c,v);return isNaN(r)&&(r=(v[0]+v[1])/2),{w:r,rep:r,fixed:i.getItemModel(t).get("fixed"),p:!n||isNaN(n[0])||isNaN(n[1])?null:n}}),x=a.mapArray("value",function(t,n){var i=r.getEdgeByIndex(n),a=EO(t,h,y);isNaN(a)&&(a=(y[0]+y[1])/2);var s=i.getModel(),u=MW(i.getModel().get(["lineStyle","curveness"]),-YX(i,e,n,!0),0);return{n1:_[i.node1.dataIndex],n2:_[i.node2.dataIndex],d:a,curveness:u,ignoreForceLayout:s.get("ignoreForceLayout")}}),b=function(e,t,n){for(var r,i,a=n.rect,s=a.width,u=a.height,c=[a.x+s/2,a.y+u/2],h=null==n.gravity?.1:n.gravity,p=0;p<e.length;p++){var f=e[p];!f.p&&(f.p=M8(s*(Math.random()-.5)+c[0],u*(Math.random()-.5)+c[1])),f.pp=Ae(f.p),f.edges=null}var v=null==n.friction?.6:n.friction,y=v;return{warmUp:function(){y=.8*v},setFixed:function(t){e[t].fixed=!0},setUnfixed:function(t){e[t].fixed=!1},beforeStep:function(e){r=e},afterStep:function(e){i=e},step:function(n){r&&r(e,t);for(var a=[],s=e.length,u=0;u<t.length;u++){var p=t[u];if(!p.ignoreForceLayout){var f=p.n1,v=p.n2;Ai(a,v.p,f.p);var _=Aa(a)-p.d,x=v.w/(f.w+v.w);isNaN(x)&&(x=0),Ap(a,a),f.fixed||Y5(f.p,f.p,a,x*_*y),v.fixed||Y5(v.p,v.p,a,-(1-x)*_*y)}}for(var u=0;u<s;u++){var b=e[u];!b.fixed&&(Ai(a,c,b.p),Y5(b.p,b.p,a,h*y))}for(var u=0;u<s;u++){for(var f=e[u],S=u+1;S<s;S++){var v=e[S];Ai(a,v.p,f.p);var _=Aa(a);0===_&&(At(a,Math.random()-.5,Math.random()-.5),_=1);var w=(f.rep+v.rep)/_/_;f.fixed||Y5(f.pp,f.pp,a,w),v.fixed||Y5(v.pp,v.pp,a,-w)}}for(var M=[],u=0;u<s;u++){var b=e[u];!b.fixed&&(Ai(M,b.p,b.pp),Y5(b.p,b.p,M,y),M7(b.pp,b.p))}var A=(y*=.992)<.01;i&&i(e,t,A),n&&n(A)}}}(_,x,{rect:t.getBoundingRect(),gravity:s.get("gravity"),friction:s.get("friction")});b.beforeStep(function(e,t){for(var n=0,i=e.length;n<i;n++)e[n].fixed&&M7(e[n].p,r.getNodeByIndex(n).getLayout())}),b.afterStep(function(e,t,a){for(var s=0,u=e.length;s<u;s++)!e[s].fixed&&r.getNodeByIndex(s).setLayout(e[s].p),n[i.getId(s)]=e[s].p;for(var s=0,u=t.length;s<u;s++){var c=t[s],h=r.getEdgeByIndex(s),p=c.n1.p,f=c.n2.p,v=h.getLayout();(v=v?v.slice():[])[0]=v[0]||[],v[1]=v[1]||[],M7(v[0],p),M7(v[1],f),+c.curveness&&(v[2]=[(p[0]+f[0])/2-(p[1]-f[1])*c.curveness,(p[1]+f[1])/2-(f[0]-p[0])*c.curveness]),h.setLayout(v)}}),e.forceLayout=b,e.preservedPoints=n,b.step()}else e.forceLayout=null})}function Y6(e,t){var n=[];return e.eachSeriesByType("graph",function(e){var r=e.get("coordinateSystem");if(!r||"view"===r){var i,a,s,u=e.getData(),c=u.mapArray(function(e){var t=u.getItemModel(e);return[+t.get("x"),+t.get("y")]}),h=[],p=[];I4(c,h,p),p[0]-h[0]==0&&(p[0]+=1,h[0]-=1),p[1]-h[1]==0&&(p[1]+=1,h[1]-=1);var f=(p[0]-h[0])/(p[1]-h[1]);var v=(i=e,a=t,s=f,Lu(Mf(i.getBoxLayoutParams(),{aspect:s}),{width:a.getWidth(),height:a.getHeight()}));isNaN(f)&&(h=[v.x,v.y],p=[v.x+v.width,v.y+v.height]);var y=p[0]-h[0],_=p[1]-h[1],x=v.width,b=v.height,S=e.coordinateSystem=new Xs;S.zoomLimit=e.get("scaleLimit"),S.setBoundingRect(h[0],h[1],y,_),S.setViewRect(v.x,v.y,x,b),S.setCenter(e.get("center"),t),S.setZoom(e.get("zoom")),n.push(S)}}),n}var Y9=Bw.prototype,Y8=BE.prototype,Y7=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1};function Je(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}wJ(t,e)})(Y7);var Jt=function(e){function t(t){var n=e.call(this,t)||this;return n.type="ec-line",n}return wJ(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Y7},t.prototype.buildPath=function(e,t){Je(t)?Y9.buildPath.call(this,e,t):Y8.buildPath.call(this,e,t)},t.prototype.pointAt=function(e){return Je(this.shape)?Y9.pointAt.call(this,e):Y8.pointAt.call(this,e)},t.prototype.tangentAt=function(e){var t=this.shape,n=Je(t)?[t.x2-t.x1,t.y2-t.y1]:Y8.tangentAt.call(this,e);return Ap(n,n)},t}(DR),Jn=["fromSymbol","toSymbol"];function Jr(e){return"_"+e+"Type"}function Ji(e,t,n){var r=t.getItemVisual(n,e);if(!r||"none"===r)return r;var i=t.getItemVisual(n,e+"Size"),a=t.getItemVisual(n,e+"Rotate"),s=t.getItemVisual(n,e+"Offset"),u=t.getItemVisual(n,e+"KeepAspect"),c=Fs(i),h=Fl(s||0,c);return r+c+h+(a||"")+(u||"")}function Ja(e,t,n){var r=t.getItemVisual(n,e);if(!!r&&"none"!==r){var i=t.getItemVisual(n,e+"Size"),a=t.getItemVisual(n,e+"Rotate"),s=t.getItemVisual(n,e+"Offset"),u=t.getItemVisual(n,e+"KeepAspect"),c=Fs(i),h=Fl(s||0,c),p=Fo(r,-c[0]/2+h[0],-c[1]/2+h[1],c[0],c[1],null,u);return p.__specifiedRotation=null==a||isNaN(a)?void 0:+a*Math.PI/180||0,p.name=e,p}}function Jo(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var n=t[2];n?(e.cpx1=n[0],e.cpy1=n[1]):(e.cpx1=NaN,e.cpy1=NaN)}var Js=function(e){function t(t,n,r){var i=e.call(this)||this;return i._createLine(t,n,r),i}return wJ(t,e),t.prototype._createLine=function(e,t,n){var r,i,a=e.hostModel;var s=(r=e.getItemLayout(t),Jo((i=new Jt({name:"line",subPixelOptimize:!0})).shape,r),i);s.shape.percent=0,P$(s,{shape:{percent:1}},a,t),this.add(s),Mb(Jn,function(n){var r=Ja(n,e,t);this.add(r),this[Jr(n)]=Ji(n,e,t)},this),this._updateCommonStl(e,t,n)},t.prototype.updateData=function(e,t,n){var r=e.hostModel,i=this.childOfName("line"),a=e.getItemLayout(t),s={shape:{}};Jo(s.shape,a),PQ(i,s,r,t),Mb(Jn,function(n){var r=Ji(n,e,t),i=Jr(n);if(this[i]!==r){this.remove(this.childOfName(n));var a=Ja(n,e,t);this.add(a)}this[i]=r},this),this._updateCommonStl(e,t,n)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(e,t,n){var r=e.hostModel,i=this.childOfName("line"),a=n&&n.emphasisLineStyle,s=n&&n.blurLineStyle,u=n&&n.selectLineStyle,c=n&&n.labelStatesModels,h=n&&n.emphasisDisabled,p=n&&n.focus,f=n&&n.blurScope;if(!n||e.hasItemOption){var v=e.getItemModel(t),y=v.getModel("emphasis");a=y.getModel("lineStyle").getLineStyle(),s=v.getModel(["blur","lineStyle"]).getLineStyle(),u=v.getModel(["select","lineStyle"]).getLineStyle(),h=y.get("disabled"),p=y.get("focus"),f=y.get("blurScope"),c=P7(v)}var _=e.getItemVisual(t,"style"),x=_.stroke;i.useStyle(_),i.style.fill=null,i.style.strokeNoScale=!0,i.ensureState("emphasis").style=a,i.ensureState("blur").style=s,i.ensureState("select").style=u,Mb(Jn,function(e){var t=this.childOfName(e);if(t){t.setColor(x),t.style.opacity=_.opacity;for(var n=0;n<Pa.length;n++){var r=Pa[n],a=i.getState(r);if(a){var s=a.style||{},u=t.ensureState(r),c=u.style||(u.style={});null!=s.stroke&&(c[t.__isEmptyBrush?"stroke":"fill"]=s.stroke),null!=s.opacity&&(c.opacity=s.opacity)}}t.markRedraw()}},this);var b=r.getRawValue(t);P8(this,c,{labelDataIndex:t,labelFetcher:{getFormattedLabel:function(t,n){return r.getFormattedLabel(t,n,e.dataType)}},inheritColor:x||"#000",defaultOpacity:_.opacity,defaultText:(null==b?e.getName(t):isFinite(b)?EB(b):b)+""});var S=this.getTextContent();if(S){var w=c.normal;S.__align=S.style.align,S.__verticalAlign=S.style.verticalAlign,S.__position=w.get("position")||"middle";var M=w.get("distance");!MI(M)&&(M=[M,M]),S.__labelDistance=M}this.setTextConfig({position:null,local:!0,inside:!1}),PU(this,p,f,h)},t.prototype.highlight=function(){PT(this)},t.prototype.downplay=function(){PE(this)},t.prototype.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},t.prototype.setLinePoints=function(e){var t=this.childOfName("line");Jo(t.shape,e),t.dirty()},t.prototype.beforeUpdate=function(){var e=this.childOfName("fromSymbol"),t=this.childOfName("toSymbol"),n=this.getTextContent();if(!e&&!t&&(!n||n.ignore))return;for(var r=1,i=this.parent;i;)i.scaleX&&(r/=i.scaleX),i=i.parent;var a=this.childOfName("line");if(!!this.__dirty||!!a.__dirty){var s=a.shape.percent,u=a.pointAt(0),c=a.pointAt(s),h=Ai([],c,u);if(Ap(h,h),e&&(e.setPosition(u),T(e,0),e.scaleX=e.scaleY=r*s,e.markRedraw()),t&&(t.setPosition(c),T(t,1),t.scaleX=t.scaleY=r*s,t.markRedraw()),n&&!n.ignore){n.x=n.y=0,n.originX=n.originY=0;var p=void 0,f=void 0,v=n.__labelDistance,y=v[0]*r,_=v[1]*r,x=s/2,b=a.tangentAt(x),S=[b[1],-b[0]],w=a.pointAt(x);S[1]>0&&(S[0]=-S[0],S[1]=-S[1]);var M=b[0]<0?-1:1;if("start"!==n.__position&&"end"!==n.__position){var A=-Math.atan2(b[1],b[0]);c[0]<u[0]&&(A=Math.PI+A),n.rotation=A}var C=void 0;switch(n.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":C=-_,f="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":C=_,f="top";break;default:C=0,f="middle"}switch(n.__position){case"end":n.x=h[0]*y+c[0],n.y=h[1]*_+c[1],p=h[0]>.8?"left":h[0]<-.8?"right":"center",f=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":n.x=-h[0]*y+u[0],n.y=-h[1]*_+u[1],p=h[0]>.8?"right":h[0]<-.8?"left":"center",f=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":n.x=y*M+u[0],n.y=u[1]+C,p=b[0]<0?"right":"left",n.originX=-y*M,n.originY=-C;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":n.x=w[0],n.y=w[1]+C,p="center",n.originY=-C;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":n.x=-y*M+c[0],n.y=c[1]+C,p=b[0]>=0?"right":"left",n.originX=y*M,n.originY=-C}n.scaleX=n.scaleY=r,n.setStyle({verticalAlign:n.__verticalAlign||f,align:n.__align||p})}}function T(e,t){var n=e.__specifiedRotation;if(null==n){var r=a.tangentAt(t);e.attr("rotation",(1===t?-1:1)*Math.PI/2-Math.atan2(r[1],r[0]))}else e.attr("rotation",n)}},t}(ES),Jl=function(){function e(e){this.group=new ES,this._LineCtor=e||Js}return e.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var n=this.group,r=this._lineData;this._lineData=e,!r&&n.removeAll();var i=Ju(e);e.diff(r).add(function(n){t._doAdd(e,n,i)}).update(function(n,a){t._doUpdate(r,e,a,n,i)}).remove(function(e){n.remove(r.getItemGraphicEl(e))}).execute()},e.prototype.updateLayout=function(){var e=this._lineData;if(!!e)e.eachItemGraphicEl(function(t,n){t.updateLayout(e,n)},this)},e.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Ju(e),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(e,t){function n(e){!e.isGroup&&!function(e){return e.animators&&e.animators.length>0}(e)&&(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var r=e.start;r<e.end;r++)if(Jh(t.getItemLayout(r))){var i=new this._LineCtor(t,r,this._seriesScope);i.traverse(n),this.group.add(i),t.setItemGraphicEl(r,i),this._progressiveEls.push(i)}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(e){Nl(this._progressiveEls||this.group,e)},e.prototype._doAdd=function(e,t,n){if(!!Jh(e.getItemLayout(t))){var r=new this._LineCtor(e,t,n);e.setItemGraphicEl(t,r),this.group.add(r)}},e.prototype._doUpdate=function(e,t,n,r,i){var a=e.getItemGraphicEl(n);if(!Jh(t.getItemLayout(r))){this.group.remove(a);return}a?a.updateData(t,r,i):a=new this._LineCtor(t,r,i),t.setItemGraphicEl(r,a),this.group.add(a)},e}();function Ju(e){var t=e.hostModel,n=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:n.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:n.get("disabled"),blurScope:n.get("blurScope"),focus:n.get("focus"),labelStatesModels:P7(t)}}function Jc(e){return isNaN(e[0])||isNaN(e[1])}function Jh(e){return e&&!Jc(e[0])&&!Jc(e[1])}var Jd=[],Jp=[],Jf=[],Jg=Math.abs;function Jm(e,t,n){for(var r,i=e[0],a=e[1],s=e[2],u=1/0,c=n*n,h=.1,p=.1;p<=.9;p+=.1){Jd[0]=CF(i[0],a[0],s[0],p),Jd[1]=CF(i[1],a[1],s[1],p);var f=Jg(Av(Jd,t)-c);f<u&&(u=f,r=p)}for(var v=0;v<32;v++){var y=r+h;Jp[0]=CF(i[0],a[0],s[0],r),Jp[1]=CF(i[1],a[1],s[1],r),Jf[0]=CF(i[0],a[0],s[0],y),Jf[1]=CF(i[1],a[1],s[1],y);var f=Av(Jp,t)-c;if(.01>Jg(f))break;var _=Av(Jf,t)-c;h/=2,f<0?_>=0?r+=h:r-=h:_>=0?r-=h:r+=h}return r}function Jv(e,t){var n=[],r=[[],[],[]],i=[[],[]],a=[];t/=2,e.eachEdge(function(e,s){var u=e.getLayout(),c=e.getVisual("fromSymbol"),h=e.getVisual("toSymbol");!u.__original&&(u.__original=[Ae(u[0]),Ae(u[1])],u[2]&&u.__original.push(Ae(u[2])));var p=u.__original;if(null!=u[2]){if(M7(r[0],p[0]),M7(r[1],p[2]),M7(r[2],p[1]),c&&"none"!==c){var f=YK(e.node1),v=Jm(r,p[0],f*t);CH(r[0][0],r[1][0],r[2][0],v,n),r[0][0]=n[3],r[1][0]=n[4],CH(r[0][1],r[1][1],r[2][1],v,n),r[0][1]=n[3],r[1][1]=n[4]}if(h&&"none"!==h){var f=YK(e.node2),v=Jm(r,p[1],f*t);CH(r[0][0],r[1][0],r[2][0],v,n),r[1][0]=n[1],r[2][0]=n[2],CH(r[0][1],r[1][1],r[2][1],v,n),r[1][1]=n[1],r[2][1]=n[2]}M7(u[0],r[0]),M7(u[1],r[2]),M7(u[2],r[1])}else{if(M7(i[0],p[0]),M7(i[1],p[1]),Ai(a,i[1],i[0]),Ap(a,a),c&&"none"!==c){var f=YK(e.node1);Ar(i[0],i[0],a,f*t)}if(h&&"none"!==h){var f=YK(e.node2);Ar(i[1],i[1],a,-f*t)}M7(u[0],i[0]),M7(u[1],i[1])}})}function Jy(e){return"view"===e.type}var J_=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.init=function(e,t){var n=new G9,r=new Jl,i=this.group;this._controller=new jh(t.getZr()),this._controllerHost={target:i},i.add(n.group),i.add(r.group),this._symbolDraw=n,this._lineDraw=r,this._firstRender=!0},t.prototype.render=function(e,t,n){var r=this,i=e.coordinateSystem;this._model=e;var a=this._symbolDraw,s=this._lineDraw,u=this.group;if(Jy(i)){var c={x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY};this._firstRender?u.attr(c):PQ(u,c,e)}Jv(e.getGraph(),Yq(e));var h=e.getData();a.updateData(h);var p=e.getEdgeData();s.updateData(p),this._updateNodeAndLinkScale(),this._updateController(e,t,n),clearTimeout(this._layoutTimeout);var f=e.forceLayout,v=e.get(["force","layoutAnimation"]);f&&this._startForceLayoutIteration(f,v);var y=e.get("layout");h.graph.eachNode(function(t){var n=t.dataIndex,i=t.getGraphicEl(),a=t.getModel();if(!!i){i.off("drag").off("dragend");var s=a.get("draggable");s&&i.on("drag",function(a){switch(y){case"force":f.warmUp(),r._layouting||r._startForceLayoutIteration(f,v),f.setFixed(n),h.setItemLayout(n,[i.x,i.y]);break;case"circular":h.setItemLayout(n,[i.x,i.y]),t.setLayout({fixed:!0},!0),Y0(e,"symbolSize",t,[a.offsetX,a.offsetY]),r.updateLayout(e);break;default:h.setItemLayout(n,[i.x,i.y]),YJ(e.getGraph(),e),r.updateLayout(e)}}).on("dragend",function(){f&&f.setUnfixed(n)}),i.setDraggable(s,!!a.get("cursor")),"adjacency"===a.get(["emphasis","focus"])&&(D7(i).focus=t.getAdjacentDataIndices())}}),h.graph.eachEdge(function(e){var t=e.getGraphicEl(),n=e.getModel().get(["emphasis","focus"]);if(!!t)"adjacency"===n&&(D7(t).focus={edge:[e.dataIndex],node:[e.node1.dataIndex,e.node2.dataIndex]})});var _="circular"===e.get("layout")&&e.get(["circular","rotateLabel"]),x=h.getLayout("cx"),b=h.getLayout("cy");h.graph.eachNode(function(e){Y2(e,_,x,b)}),this._firstRender=!1},t.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(e,t){var n=this;!function r(){e.step(function(e){n.updateLayout(n._model),(n._layouting=!e)&&(t?n._layoutTimeout=setTimeout(r,16):r())})}()},t.prototype._updateController=function(e,t,n){var r=this,i=this._controller,a=this._controllerHost,s=this.group;if(i.setPointerChecker(function(t,r,i){var a=s.getBoundingRect();return a.applyTransform(s.transform),a.contain(r,i)&&!jy(t,n,e)}),!Jy(e.coordinateSystem)){i.disable();return}i.enable(e.get("roam")),a.zoomLimit=e.get("scaleLimit"),a.zoom=e.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",function(t){jg(a,t.dx,t.dy),n.dispatchAction({seriesId:e.id,type:"graphRoam",dx:t.dx,dy:t.dy})}).on("zoom",function(t){jm(a,t.scale,t.originX,t.originY),n.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),r._updateNodeAndLinkScale(),Jv(e.getGraph(),Yq(e)),r._lineDraw.updateLayout(),n.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(){var e=this._model,t=e.getData(),n=Yq(e);t.eachItemGraphicEl(function(e,t){e&&e.setSymbolScale(n)})},t.prototype.updateLayout=function(e){Jv(e.getGraph(),Yq(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}(Nv);function Jx(e){return"_EC_"+e}var Jb=function(){function e(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return e.prototype.isDirected=function(){return this._directed},e.prototype.addNode=function(e,t){e=null==e?""+t:""+e;var n=this._nodesMap;if(!n[Jx(e)]){var r=new JS(e,t);return r.hostGraph=this,this.nodes.push(r),n[Jx(e)]=r,r}},e.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},e.prototype.getNodeById=function(e){return this._nodesMap[Jx(e)]},e.prototype.addEdge=function(e,t,n){var r=this._nodesMap,i=this._edgesMap;if(ML(e)&&(e=this.nodes[e]),ML(t)&&(t=this.nodes[t]),!(e instanceof JS)&&(e=r[Jx(e)]),!(t instanceof JS)&&(t=r[Jx(t)]),!!e&&!!t){var a=e.id+"-"+t.id,s=new Jw(e,t,n);return s.hostGraph=this,this._directed&&(e.outEdges.push(s),t.inEdges.push(s)),e.edges.push(s),e!==t&&t.edges.push(s),this.edges.push(s),i[a]=s,s}},e.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},e.prototype.getEdge=function(e,t){e instanceof JS&&(e=e.id),t instanceof JS&&(t=t.id);var n=this._edgesMap;return this._directed?n[e+"-"+t]:n[e+"-"+t]||n[t+"-"+e]},e.prototype.eachNode=function(e,t){for(var n=this.nodes,r=n.length,i=0;i<r;i++)n[i].dataIndex>=0&&e.call(t,n[i],i)},e.prototype.eachEdge=function(e,t){for(var n=this.edges,r=n.length,i=0;i<r;i++)n[i].dataIndex>=0&&n[i].node1.dataIndex>=0&&n[i].node2.dataIndex>=0&&e.call(t,n[i],i)},e.prototype.breadthFirstTraverse=function(e,t,n,r){if(!(t instanceof JS)&&(t=this._nodesMap[Jx(t)]),!t)return;for(var i="out"===n?"outEdges":"in"===n?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!e.call(r,t,null))for(var s=[t];s.length;){for(var u=s.shift(),c=u[i],a=0;a<c.length;a++){var h=c[a],p=h.node1===u?h.node2:h.node1;if(!p.__visited){if(e.call(r,p,u))return;s.push(p),p.__visited=!0}}}},e.prototype.update=function(){for(var e=this.data,t=this.edgeData,n=this.nodes,r=this.edges,i=0,a=n.length;i<a;i++)n[i].dataIndex=-1;for(var i=0,a=e.count();i<a;i++)n[e.getRawIndex(i)].dataIndex=i;t.filterSelf(function(e){var n=r[t.getRawIndex(e)];return n.node1.dataIndex>=0&&n.node2.dataIndex>=0});for(var i=0,a=r.length;i<a;i++)r[i].dataIndex=-1;for(var i=0,a=t.count();i<a;i++)r[t.getRawIndex(i)].dataIndex=i},e.prototype.clone=function(){for(var t=new e(this._directed),n=this.nodes,r=this.edges,i=0;i<n.length;i++)t.addNode(n[i].id,n[i].dataIndex);for(var i=0;i<r.length;i++){var a=r[i];t.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return t},e}(),JS=function(){function e(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==e?"":e,this.dataIndex=null==t?-1:t}return e.prototype.degree=function(){return this.edges.length},e.prototype.inDegree=function(){return this.inEdges.length},e.prototype.outDegree=function(){return this.outEdges.length},e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(e)},e.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var n=this.edges[t];if(!(n.dataIndex<0))e.edge.push(n.dataIndex),e.node.push(n.node1.dataIndex,n.node2.dataIndex)}return e},e.prototype.getTrajectoryDataIndices=function(){for(var e=M1(),t=M1(),n=0;n<this.edges.length;n++){var r=this.edges[n];if(!(r.dataIndex<0)){e.set(r.dataIndex,!0);for(var i=[r.node1],a=[r.node2],s=0;s<i.length;){var u=i[s];s++,t.set(u.dataIndex,!0);for(var c=0;c<u.inEdges.length;c++)e.set(u.inEdges[c].dataIndex,!0),i.push(u.inEdges[c].node1)}for(s=0;s<a.length;){var h=a[s];s++,t.set(h.dataIndex,!0);for(var c=0;c<h.outEdges.length;c++)e.set(h.outEdges[c].dataIndex,!0),a.push(h.outEdges[c].node2)}}}return{edge:e.keys(),node:t.keys()}},e}(),Jw=function(){function e(e,t,n){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=null==n?-1:n}return e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(e)},e.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},e.prototype.getTrajectoryDataIndices=function(){var e=M1(),t=M1();e.set(this.dataIndex,!0);for(var n=[this.node1],r=[this.node2],i=0;i<n.length;){var a=n[i];i++,t.set(a.dataIndex,!0);for(var s=0;s<a.inEdges.length;s++)e.set(a.inEdges[s].dataIndex,!0),n.push(a.inEdges[s].node1)}for(i=0;i<r.length;){var u=r[i];i++,t.set(u.dataIndex,!0);for(var s=0;s<u.outEdges.length;s++)e.set(u.outEdges[s].dataIndex,!0),r.push(u.outEdges[s].node2)}return{edge:e.keys(),node:t.keys()}},e}();function JM(e,t){return{getValue:function(n){var r=this[e][t];return r.getStore().get(r.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,r){this.dataIndex>=0&&this[e][t].setItemVisual(this.dataIndex,n,r)},getVisual:function(n){return this[e][t].getItemVisual(this.dataIndex,n)},setLayout:function(n,r){this.dataIndex>=0&&this[e][t].setItemLayout(this.dataIndex,n,r)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}M_(JS,JM("hostGraph","data")),M_(Jw,JM("hostGraph","edgeData"));function JA(e,t,n,r,i){for(var a,s=new Jb(r),u=0;u<e.length;u++)s.addNode(MG(e[u].id,e[u].name,u),u);for(var c=[],h=[],p=0,u=0;u<t.length;u++){var f=t[u],v=f.source,y=f.target;s.addEdge(v,y,p)&&(h.push(f),c.push(MG(Ir(f.id,null),v+" > "+y)),p++)}var _=n.get("coordinateSystem");if("cartesian2d"===_||"polar"===_)a=z6(e,n);else{var x=Lq.get(_),b=x&&x.dimensions||[];0>Mv(b,"value")&&b.concat(["value"]),(a=new zK(z$(e,{coordDimensions:b,encodeDefine:n.getEncode()}).dimensions,n)).initData(e)}var S=new zK(["value"],n);return S.initData(h,c),i&&i(a,S),Xj({mainData:a,struct:s,structAttr:"graph",datas:{node:a,edge:S},datasAttr:{node:"data",edge:"edgeData"}}),s.update(),s}var JC=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return wJ(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments);var n=this;function r(){return n._categoriesData}this.legendVisualProvider=new We(r,r),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},t.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(t){e.prototype.mergeDefaultAndTheme.apply(this,arguments),E9(t,"edgeLabel",["show"])},t.prototype.getInitialData=function(e,t){var n=e.edges||e.links||[],r=e.data||e.nodes||[],i=this;if(r&&n){!function(e){if(!!YU(e))e.__curvenessList=[],e.__edgeMap={},YH(e)}(this);var a=JA(r,n,this,!0,function(e,t){e.wrapMethod("getItemModel",function(e){var t=i._categoriesModels[e.getShallow("category")];return t&&(t.parentModel=e.parentModel,e.parentModel=t),e});var n=Rb.prototype.getModel;function r(e,t){var r=n.call(this,e,t);return r.resolveParentPath=a,r}function a(e){if(e&&("label"===e[0]||"label"===e[1])){var t=e.slice();return"label"===e[0]?t[0]="edgeLabel":"label"===e[1]&&(t[1]="edgeLabel"),t}return e}t.wrapMethod("getItemModel",function(e){return e.resolveParentPath=a,e.getModel=r,e})});return Mb(a.edges,function(e){!function(e,t,n,r){if(!!YU(n)){var i=YG(e,t,n),a=n.__edgeMap,s=a[YV(i)];a[i]&&!s?a[i].isForward=!0:s&&a[i]&&(s.isForward=!0,a[i].isForward=!1),a[i]=a[i]||[],a[i].push(r)}}(e.node1,e.node2,this,e.dataIndex)},this),a.data}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(e,t,n){if("edge"===n){var r=this.getData(),i=this.getDataParams(e,n),a=r.graph.getEdgeByIndex(e),s=r.getName(a.node1.dataIndex),u=r.getName(a.node2.dataIndex),c=[];return null!=s&&c.push(s),null!=u&&c.push(u),ks("nameValue",{name:c.join(" > "),value:i.value,noValue:null==i.value})}return ky({series:this,dataIndex:e,multipleSeries:t})},t.prototype._updateCategoriesData=function(){var e=MS(this.option.categories||[],function(e){return null!=e.value?e:Mf({value:0},e)}),t=new zK(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray(function(e){return t.getItemModel(e)})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.isAnimationEnabled=function(){return e.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(kD),JT={type:"graphRoam",event:"graphRoam",update:"none"},JE=function(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0},JI=function(e){function t(t){var n=e.call(this,t)||this;return n.type="pointer",n}return wJ(t,e),t.prototype.getDefaultShape=function(){return new JE},t.prototype.buildPath=function(e,t){var n=Math.cos,r=Math.sin,i=t.r,a=t.width,s=t.angle,u=t.x-n(s)*a*(a>=i/3?1:2),c=t.y-r(s)*a*(a>=i/3?1:2);s=t.angle-Math.PI/2,e.moveTo(u,c),e.lineTo(t.x+n(s)*a,t.y+r(s)*a),e.lineTo(t.x+n(t.angle)*i,t.y+r(t.angle)*i),e.lineTo(t.x-n(s)*a,t.y-r(s)*a),e.lineTo(u,c)},t}(DR);function JD(e,t){var n=null==e?"":e+"";return t&&(MP(t)?n=t.replace("{value}",n):MD(t)&&(n=t(e))),n}var JP=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.render=function(e,t,n){this.group.removeAll();var r,i,a,s,u=e.get(["axisLine","lineStyle","color"]);var c=(r=e,i=n,a=r.get("center"),s=Math.min(i.getWidth(),i.getHeight()),{cx:Ek(a[0],i.getWidth()),cy:Ek(a[1],i.getHeight()),r:Ek(r.get("radius"),s/2)});this._renderMain(e,t,n,u,c),this._data=e.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(e,t,n,r,i){var a=this.group,s=e.get("clockwise"),u=-e.get("startAngle")/180*Math.PI,c=-e.get("endAngle")/180*Math.PI,h=e.getModel("axisLine"),p=h.get("roundCap")?VE:Bu,f=h.get("show"),v=h.getModel("lineStyle"),y=v.get("width"),_=[u,c];Dm(_,!s),u=_[0];for(var x=(c=_[1])-u,b=u,S=[],w=0;f&&w<r.length;w++){var M=new p({shape:{startAngle:b,endAngle:c=u+x*Math.min(Math.max(r[w][0],0),1),cx:i.cx,cy:i.cy,clockwise:s,r0:i.r-y,r:i.r},silent:!0});M.setStyle({fill:r[w][1]}),M.setStyle(v.getLineStyle(["color","width"])),S.push(M),b=c}S.reverse(),Mb(S,function(e){return a.add(e)});var A=function(e){var t;if(e<=0)return r[0][1];for(t=0;t<r.length;t++)if(r[t][0]>=e&&(0===t?0:r[t-1][0])<e)return r[t][1];return r[t-1][1]};this._renderTicks(e,t,n,A,i,u,c,s,y),this._renderTitleAndDetail(e,t,n,A,i),this._renderAnchor(e,i),this._renderPointer(e,t,n,A,i,u,c,s,y)},t.prototype._renderTicks=function(e,t,n,r,i,a,s,u,c){for(var h,p,f=this.group,v=i.cx,y=i.cy,_=i.r,x=+e.get("min"),b=+e.get("max"),S=e.getModel("splitLine"),w=e.getModel("axisTick"),M=e.getModel("axisLabel"),A=e.get("splitNumber"),C=w.get("splitNumber"),T=Ek(S.get("length"),_),I=Ek(w.get("length"),_),D=a,P=(s-a)/A,R=P/C,L=S.getModel("lineStyle").getLineStyle(),O=w.getModel("lineStyle").getLineStyle(),k=S.get("distance"),B=0;B<=A;B++){if(h=Math.cos(D),p=Math.sin(D),S.get("show")){var N=k?k+c:c,F=new Bw({shape:{x1:h*(_-N)+v,y1:p*(_-N)+y,x2:h*(_-T-N)+v,y2:p*(_-T-N)+y},style:L,silent:!0});"auto"===L.stroke&&F.setStyle({stroke:r(B/A)}),f.add(F)}if(M.get("show")){var N=M.get("distance")+k,z=JD(EB(B/A*(b-x)+x),M.get("formatter")),U=r(B/A),H=h*(_-T-N)+v,G=p*(_-T-N)+y,V=M.get("rotate"),W=0;"radial"===V?(W=-D+2*Math.PI)>Math.PI/2&&(W+=Math.PI):"tangential"===V?W=-D-Math.PI/2:ML(V)&&(W=V*Math.PI/180),0===W?f.add(new D8({style:Re(M,{text:z,x:H,y:G,verticalAlign:p<-.8?"top":p>.8?"bottom":"middle",align:h<-.4?"left":h>.4?"right":"center"},{inheritColor:U}),silent:!0})):f.add(new D8({style:Re(M,{text:z,x:H,y:G,verticalAlign:"middle",align:"center"},{inheritColor:U}),silent:!0,originX:H,originY:G,rotation:W}))}if(w.get("show")&&B!==A){var N=w.get("distance");N=N?N+c:c;for(var j=0;j<=C;j++){var X=new Bw({shape:{x1:(h=Math.cos(D))*(_-N)+v,y1:(p=Math.sin(D))*(_-N)+y,x2:h*(_-I-N)+v,y2:p*(_-I-N)+y},silent:!0,style:O});"auto"===O.stroke&&X.setStyle({stroke:r((B+j/C)/A)}),f.add(X),D+=R}D-=R}else D+=P}},t.prototype._renderPointer=function(e,t,n,r,i,a,s,u,c){var h=this.group,p=this._data,f=this._progressEls,v=[],y=e.get(["pointer","show"]),_=e.getModel("progress"),x=_.get("show"),b=e.getData(),S=b.mapDimension("value"),w=+e.get("min"),M=+e.get("max"),A=[w,M],C=[a,s];function T(t,n){var r,a=b.getItemModel(t).getModel("pointer"),s=Ek(a.get("width"),i.r),u=Ek(a.get("length"),i.r),c=e.get(["pointer","icon"]),h=a.get("offsetCenter"),p=Ek(h[0],i.r),f=Ek(h[1],i.r),v=a.get("keepAspect");return(r=c?Fo(c,p-s/2,f-u,s,u,null,v):new JI({shape:{angle:-Math.PI/2,width:s,r:u,x:p,y:f}})).rotation=-(n+Math.PI/2),r.x=i.cx,r.y=i.cy,r}function I(e,t){var n=_.get("roundCap")?VE:Bu,r=_.get("overlap"),s=r?_.get("width"):c/b.count(),h=r?i.r-s:i.r-(e+1)*s,p=r?i.r:i.r-e*s,f=new n({shape:{startAngle:a,endAngle:t,cx:i.cx,cy:i.cy,clockwise:u,r0:h,r:p}});return r&&(f.z2=M-b.get(S,e)%M),f}(x||y)&&(b.diff(p).add(function(t){var n=b.get(S,t);if(y){var r=T(t,a);P$(r,{rotation:-((isNaN(+n)?C[0]:EO(n,A,C,!0))+Math.PI/2)},e),h.add(r),b.setItemGraphicEl(t,r)}if(x){var i=I(t,a);P$(i,{shape:{endAngle:EO(n,A,C,_.get("clip"))}},e),h.add(i),Pe(e.seriesIndex,b.dataType,t,i),v[t]=i}}).update(function(t,n){var r=b.get(S,t);if(y){var i=p.getItemGraphicEl(n),s=i?i.rotation:a,u=T(t,s);u.rotation=s,PQ(u,{rotation:-((isNaN(+r)?C[0]:EO(r,A,C,!0))+Math.PI/2)},e),h.add(u),b.setItemGraphicEl(t,u)}if(x){var c=f[n],w=I(t,c?c.shape.endAngle:a);PQ(w,{shape:{endAngle:EO(r,A,C,_.get("clip"))}},e),h.add(w),Pe(e.seriesIndex,b.dataType,t,w),v[t]=w}}).execute(),b.each(function(e){var t=b.getItemModel(e),n=t.getModel("emphasis"),i=n.get("focus"),a=n.get("blurScope"),s=n.get("disabled");if(y){var u=b.getItemGraphicEl(e),c=b.getItemVisual(e,"style"),h=c.fill;if(u instanceof DF){var p=u.style;u.useStyle(Mf({image:p.image,x:p.x,y:p.y,width:p.width,height:p.height},c))}else u.useStyle(c),"pointer"!==u.type&&u.setColor(h);u.setStyle(t.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===u.style.fill&&u.setStyle("fill",r(EO(b.get(S,e),A,[0,1],!0))),u.z2EmphasisLift=0,PW(u,t),PU(u,i,a,s)}if(x){var f=v[e];f.useStyle(b.getItemVisual(e,"style")),f.setStyle(t.getModel(["progress","itemStyle"]).getItemStyle()),f.z2EmphasisLift=0,PW(f,t),PU(f,i,a,s)}}),this._progressEls=v)},t.prototype._renderAnchor=function(e,t){var n=e.getModel("anchor");if(n.get("show")){var r=n.get("size"),i=n.get("icon"),a=n.get("offsetCenter"),s=n.get("keepAspect"),u=Fo(i,t.cx-r/2+Ek(a[0],t.r),t.cy-r/2+Ek(a[1],t.r),r,r,null,s);u.z2=n.get("showAbove")?1:0,u.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(u)}},t.prototype._renderTitleAndDetail=function(e,t,n,r,i){var a=this,s=e.getData(),u=s.mapDimension("value"),c=+e.get("min"),h=+e.get("max"),p=new ES,f=[],v=[],y=e.isAnimationEnabled(),_=e.get(["pointer","showAbove"]);s.diff(this._data).add(function(e){f[e]=new D8({silent:!0}),v[e]=new D8({silent:!0})}).update(function(e,t){f[e]=a._titleEls[t],v[e]=a._detailEls[t]}).execute(),s.each(function(t){var n=s.getItemModel(t),a=s.get(u,t),x=new ES,b=r(EO(a,[c,h],[0,1],!0)),S=n.getModel("title");if(S.get("show")){var w=S.get("offsetCenter"),M=i.cx+Ek(w[0],i.r),A=i.cy+Ek(w[1],i.r),C=f[t];C.attr({z2:_?0:2,style:Re(S,{x:M,y:A,text:s.getName(t),align:"center",verticalAlign:"middle"},{inheritColor:b})}),x.add(C)}var T=n.getModel("detail");if(T.get("show")){var I=T.get("offsetCenter"),D=i.cx+Ek(I[0],i.r),P=i.cy+Ek(I[1],i.r),R=Ek(T.get("width"),i.r),L=Ek(T.get("height"),i.r),O=e.get(["progress","show"])?s.getItemVisual(t,"style").fill:b,C=v[t],k=T.get("formatter");C.attr({z2:_?0:2,style:Re(T,{x:D,y:P,text:JD(a,k),width:isNaN(R)?null:R,height:isNaN(L)?null:L,align:"center",verticalAlign:"middle"},{inheritColor:O})}),Rl(C,{normal:T},a,function(e){return JD(e,k)}),y&&Ru(C,t,s,e,{getFormattedLabel:function(e,t,n,r,i,s){return JD(s?s.interpolatedValue:a,k)}}),x.add(C)}p.add(x)}),this.group.add(p),this._titleEls=f,this._detailEls=v},t.type="gauge",t}(Nv),JR=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="itemStyle",n}return wJ(t,e),t.prototype.getInitialData=function(e,t){return V7(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(kD),JL=["itemStyle","opacity"],JO=function(e){function t(t,n){var r=e.call(this)||this,i=new B_,a=new D8;return r.setTextContent(a),r.setTextGuideLine(i),r.updateData(t,n,!0),r}return wJ(t,e),t.prototype.updateData=function(e,t,n){var r=e.hostModel,i=e.getItemModel(t),a=e.getItemLayout(t),s=i.getModel("emphasis"),u=i.get(JL);u=null==u?1:u,!n&&P5(this),this.useStyle(e.getItemVisual(t,"style")),this.style.lineJoin="round",n?(this.setShape({points:a.points}),this.style.opacity=0,P$(this,{style:{opacity:u}},r,t)):PQ(this,{style:{opacity:u},shape:{points:a.points}},r,t),PW(this,i),this._updateLabel(e,t),PU(this,s.get("focus"),s.get("blurScope"),s.get("disabled"))},t.prototype._updateLabel=function(e,t){var n=this.getTextGuideLine(),r=this.getTextContent(),i=e.hostModel,a=e.getItemModel(t),s=e.getItemLayout(t).label,u=e.getItemVisual(t,"style"),c=u.fill;P8(r,P7(a),{labelFetcher:e.hostModel,labelDataIndex:t,defaultOpacity:u.opacity,defaultText:e.getName(t)},{normal:{align:s.textAlign,verticalAlign:s.verticalAlign}}),this.setTextConfig({local:!0,inside:!!s.inside,insideStroke:c,outsideFill:c});var h=s.linePoints;n.setShape({points:h}),this.textGuideLineConfig={anchor:h?new A5(h[0][0],h[0][1]):null},PQ(r,{style:{x:s.x,y:s.y}},i,t),r.attr({rotation:s.rotation,originX:s.x,originY:s.y,z2:10}),Hz(this,HU(a),{stroke:c})},t}(Bm),Jk=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.ignoreLabelLineUpdate=!0,n}return wJ(t,e),t.prototype.render=function(e,t,n){var r=e.getData(),i=this._data,a=this.group;r.diff(i).add(function(e){var t=new JO(r,e);r.setItemGraphicEl(e,t),a.add(t)}).update(function(e,t){var n=i.getItemGraphicEl(t);n.updateData(r,e),a.add(n),r.setItemGraphicEl(e,n)}).remove(function(t){P3(i.getItemGraphicEl(t),e,t)}).execute(),this._data=r},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}(Nv),JB=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new We(MT(this.getData,this),MT(this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.getInitialData=function(e,t){return V7(this,{coordDimensions:["value"],encodeDefaulter:ME(LR,this)})},t.prototype._defaultLabelLine=function(e){E9(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.prototype.getDataParams=function(t){var n=this.getData(),r=e.prototype.getDataParams.call(this,t),i=n.mapDimension("value"),a=n.getSum(i);return r.percent=a?+(n.get(i,t)/a*100).toFixed(2):0,r.$vars.push("percent"),r},t.type="series.funnel",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(kD);function JN(e,t){e.eachSeriesByType("funnel",function(e){var n,r,i=e.getData(),a=i.mapDimension("value"),s=e.get("sort");var u=(n=e,r=t,Lu(n.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})),c=e.get("orient"),h=u.width,p=u.height,f=function(e,t){for(var n=e.mapDimension("value"),r=e.mapArray(n,function(e){return e}),i=[],a="ascending"===t,s=0,u=e.count();s<u;s++)i[s]=s;return MD(t)?i.sort(t):"none"!==t&&i.sort(function(e,t){return a?r[e]-r[t]:r[t]-r[e]}),i}(i,s),v=u.x,y=u.y,_="horizontal"===c?[Ek(e.get("minSize"),p),Ek(e.get("maxSize"),p)]:[Ek(e.get("minSize"),h),Ek(e.get("maxSize"),h)],x=i.getDataExtent(a),b=e.get("min"),S=e.get("max");null==b&&(b=Math.min(x[0],0)),null==S&&(S=x[1]);var w=e.get("funnelAlign"),M=e.get("gap"),A=(("horizontal"===c?h:p)-M*(i.count()-1))/i.count(),C=function(e,t){if("horizontal"===c){var n,r=EO(i.get(a,e)||0,[b,S],_,!0),s=void 0;switch(w){case"top":s=y;break;case"center":s=y+(p-r)/2;break;case"bottom":s=y+(p-r)}return[[t,s],[t,s+r]]}var u=EO(i.get(a,e)||0,[b,S],_,!0);switch(w){case"left":n=v;break;case"center":n=v+(h-u)/2;break;case"right":n=v+h-u}return[[n,t],[n+u,t]]};"ascending"===s&&(A=-A,M=-M,"horizontal"===c?v+=h:y+=p,f=f.reverse());for(var T=0;T<f.length;T++){var I=f[T],D=f[T+1],P=i.getItemModel(I);if("horizontal"===c){var R=P.get(["itemStyle","width"]);null==R?R=A:(R=Ek(R,h),"ascending"===s&&(R=-R));var L=C(I,v),O=C(D,v+R);v+=R+M,i.setItemLayout(I,{points:L.concat(O.slice().reverse())})}else{var k=P.get(["itemStyle","height"]);null==k?k=A:(k=Ek(k,p),"ascending"===s&&(k=-k));var L=C(I,y),O=C(D,y+k);y+=k+M,i.setItemLayout(I,{points:L.concat(O.slice().reverse())})}}!function(e){var t=e.hostModel.get("orient");e.each(function(n){var r,i,a,s,u=e.getItemModel(n),c=u.getModel("label").get("position"),h=u.getModel("labelLine"),p=e.getItemLayout(n),f=p.points,v="inner"===c||"inside"===c||"center"===c||"insideLeft"===c||"insideRight"===c;if(v)"insideLeft"===c?(i=(f[0][0]+f[3][0])/2+5,a=(f[0][1]+f[3][1])/2,r="left"):"insideRight"===c?(i=(f[1][0]+f[2][0])/2-5,a=(f[1][1]+f[2][1])/2,r="right"):(i=(f[0][0]+f[1][0]+f[2][0]+f[3][0])/4,a=(f[0][1]+f[1][1]+f[2][1]+f[3][1])/4,r="center"),s=[[i,a],[i,a]];else{var y=void 0,_=void 0,x=void 0,b=void 0,S=h.get("length");"left"===c?(y=(f[3][0]+f[0][0])/2,_=(f[3][1]+f[0][1])/2,i=(x=y-S)-5,r="right"):"right"===c?(y=(f[1][0]+f[2][0])/2,_=(f[1][1]+f[2][1])/2,i=(x=y+S)+5,r="left"):"top"===c?(y=(f[3][0]+f[0][0])/2,a=(b=(_=(f[3][1]+f[0][1])/2)-S)-5,r="center"):"bottom"===c?(y=(f[1][0]+f[2][0])/2,a=(b=(_=(f[1][1]+f[2][1])/2)+S)+5,r="center"):"rightTop"===c?(y="horizontal"===t?f[3][0]:f[1][0],_="horizontal"===t?f[3][1]:f[1][1],"horizontal"===t?(a=(b=_-S)-5,r="center"):(i=(x=y+S)+5,r="top")):"rightBottom"===c?(y=f[2][0],_=f[2][1],"horizontal"===t?(a=(b=_+S)+5,r="center"):(i=(x=y+S)+5,r="bottom")):"leftTop"===c?(y=f[0][0],_="horizontal"===t?f[0][1]:f[1][1],"horizontal"===t?(a=(b=_-S)-5,r="center"):(i=(x=y-S)-5,r="right")):"leftBottom"===c?(y="horizontal"===t?f[1][0]:f[3][0],_="horizontal"===t?f[1][1]:f[2][1],"horizontal"===t?(a=(b=_+S)+5,r="center"):(i=(x=y-S)-5,r="right")):(y=(f[1][0]+f[2][0])/2,_=(f[1][1]+f[2][1])/2,"horizontal"===t?(a=(b=_+S)+5,r="center"):(i=(x=y+S)+5,r="left")),"horizontal"===t?i=x=y:a=b=_,s=[[y,_],[x,b]]}p.label={linePoints:s,x:i,y:a,verticalAlign:"middle",textAlign:r,inside:v}})}(i)})}var JF=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._dataGroup=new ES,n._initialized=!1,n}return wJ(t,e),t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(e,t,n,r){this._progressiveEls=null;var i=this._dataGroup,a=e.getData(),s=this._data,u=e.coordinateSystem,c=u.dimensions,h=JH(e);a.diff(s).add(function(e){JG(JU(a,i,e,c,u),a,e,h)}).update(function(t,n){var r=s.getItemGraphicEl(n),i=Jz(a,t,c,u);a.setItemGraphicEl(t,r),PQ(r,{shape:{points:i}},e,t),P5(r),JG(r,a,t,h)}).remove(function(e){var t=s.getItemGraphicEl(e);i.remove(t)}).execute();if(!this._initialized){this._initialized=!0;var p=function(e,t,n){var r=e.model,i=e.getRect(),a=new DX({shape:{x:i.x,y:i.y,width:i.width,height:i.height}}),s="horizontal"===r.get("layout")?"width":"height";return a.setShape(s,0),P$(a,{shape:{width:i.width,height:i.height}},t,n),a}(u,e,function(){setTimeout(function(){i.removeClipPath()})});i.setClipPath(p)}this._data=a},t.prototype.incrementalPrepareRender=function(e,t,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(e,t,n){for(var r=t.getData(),i=t.coordinateSystem,a=i.dimensions,s=JH(t),u=this._progressiveEls=[],c=e.start;c<e.end;c++){var h=JU(r,this._dataGroup,c,a,i);h.incremental=!0,JG(h,r,c,s),u.push(h)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}(Nv);function Jz(e,t,n,r){for(var i=[],a=0;a<n.length;a++){var s=n[a],u=e.get(e.mapDimension(s),t);!function(e,t){return"category"===t?null==e:null==e||isNaN(e)}(u,r.getAxis(s).type)&&i.push(r.dataToPoint(u,s))}return i}function JU(e,t,n,r,i){var a=new B_({shape:{points:Jz(e,n,r,i)},z2:10});return t.add(a),e.setItemGraphicEl(n,a),a}function JH(e){var t,n=e.get("smooth",!0);return!0===n&&(n=.3),(t=n=E$(n))!=t&&(n=0),{smooth:n}}function JG(e,t,n,r){e.useStyle(t.getItemVisual(n,"style")),e.style.fill=null,e.setShape("smooth",r.smooth);var i=t.getItemModel(n),a=i.getModel("emphasis");PW(e,i,"lineStyle"),PU(e,a.get("focus"),a.get("blurScope"),a.get("disabled"))}var JV=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return wJ(t,e),t.prototype.getInitialData=function(e,t){return z6(null,this,{useEncodeDefaulter:MT(JW,null,this)})},t.prototype.getRawIndicesByActiveState=function(e){var t=this.coordinateSystem,n=this.getData(),r=[];return t.eachActiveState(n,function(t,i){e===t&&r.push(n.getRawIndex(i))}),r},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}(kD);function JW(e){var t=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(!!t){var n={};return Mb(t.dimensions,function(e){var t=function(e){return+e.replace("dim","")}(e);n[e]=t}),n}}var Jj=["lineStyle","opacity"];let JX={seriesType:"parallel",reset:function(e,t){var n=e.coordinateSystem,r={normal:e.get(["lineStyle","opacity"]),active:e.get("activeOpacity"),inactive:e.get("inactiveOpacity")};return{progress:function(e,t){n.eachActiveState(t,function(e,n){var i=r[e];if("normal"===e&&t.hasItemOption){var a=t.getItemModel(n).get(Jj,!0);null!=a&&(i=a)}t.ensureUniqueItemVisual(n,"style").opacity=i},e.start,e.end)}}}};function JY(e){(function(e){if(!e.parallel){var t=!1;Mb(e.series,function(e){e&&"parallel"===e.type&&(t=!0)}),t&&(e.parallel=[{}])}})(e),function(e){Mb(E6(e.parallelAxis),function(t){if(!!MO(t)){var n=t.parallelIndex||0,r=E6(e.parallel)[n];r&&r.parallelAxisDefault&&Md(t,r.parallelAxisDefault,!1)}})}(e)}var JJ=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.render=function(e,t,n){this._model=e,this._api=n,!this._handlers&&(this._handlers={},Mb(JZ,function(e,t){n.getZr().on(t,this._handlers[t]=MT(e,this))},this)),NS(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(e,t){Nw(this,"_throttledDispatchExpand"),Mb(this._handlers,function(e,n){t.getZr().off(n,e)}),this._handlers=null},t.prototype._throttledDispatchExpand=function(e){this._dispatchExpand(e)},t.prototype._dispatchExpand=function(e){e&&this._api.dispatchAction(Mf({type:"parallelAxisExpand"},e))},t.type="parallel",t}(kR),JZ={mousedown:function(e){Jq(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var t=this._mouseDownPoint;if(Jq(this,"click")&&t){var n=[e.offsetX,e.offsetY];if(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2)>5)return;var r=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);"none"!==r.behavior&&this._dispatchExpand({axisExpandWindow:r.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!this._mouseDownPoint&&!!Jq(this,"mousemove")){var t=this._model,n=t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),r=n.behavior;"jump"===r&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===r?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===r?null:{duration:0}})}}};function Jq(e,t){var n=e._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===t}var JK=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.init=function(){e.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(e){var t=this.option;e&&Md(t,e,!0),this._initDimensions()},t.prototype.contains=function(e,t){var n=e.get("parallelIndex");return null!=n&&t.getComponent("parallel",n)===this},t.prototype.setAxisExpand=function(e){Mb(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(t){e.hasOwnProperty(t)&&(this.option[t]=e[t])},this)},t.prototype._initDimensions=function(){var e=this.dimensions=[],t=this.parallelAxisIndex=[];Mb(MM(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(e){return(e.get("parallelIndex")||0)===this.componentIndex},this),function(n){e.push("dim"+n.get("dim")),t.push(n.componentIndex)})},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},t}(Lv),JQ=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r)||this;return s.type=i||"value",s.axisIndex=a,s}return wJ(t,e),t.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},t}(Hv);function J$(e,t,n,r,i,a){e=e||0;var s,u=n[1]-n[0];if(null!=i&&(i=J1(i,[0,u])),null!=a&&(a=Math.max(a,null!=i?i:0)),"all"===r){var c=Math.abs(t[1]-t[0]);c=J1(c,[0,u]),i=a=J1(c,[i,a]),r=0}t[0]=J1(t[0],n),t[1]=J1(t[1],n);var h=J0(t,r);t[r]+=e;var p=i||0,f=n.slice();return h.sign<0?f[0]+=p:f[1]-=p,t[r]=J1(t[r],f),s=J0(t,r),null!=i&&(s.sign!==h.sign||s.span<i)&&(t[1-r]=t[r]+h.sign*i),s=J0(t,r),null!=a&&s.span>a&&(t[1-r]=t[r]+s.sign*a),t}function J0(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:n>0?-1:n<0?1:t?-1:1}}function J1(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}var J2=Mb,J3=Math.min,J5=Math.max,J4=Math.floor,J6=Math.ceil,J9=EB,J8=Math.PI,J7=function(){function e(e,t,n){this.type="parallel",this._axesMap=M1(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,n)}return e.prototype._init=function(e,t,n){var r=e.dimensions,i=e.parallelAxisIndex;J2(r,function(e,n){var r=i[n],a=t.getComponent("parallelAxis",r),s=this._axesMap.set(e,new JQ(e,UW(a),[0,0],a.get("type"),r)),u="category"===s.type;s.onBand=u&&a.get("boundaryGap"),s.inverse=a.get("inverse"),a.axis=s,s.model=a,s.coordinateSystem=a.coordinateSystem=this},this)},e.prototype.update=function(e,t){this._updateAxesFromSeries(this._model,e)},e.prototype.containPoint=function(e){var t=this._makeLayoutInfo(),n=t.axisBase,r=t.layoutBase,i=t.pixelDimIndex,a=e[1-i],s=e[i];return a>=n&&a<=n+t.axisLength&&s>=r&&s<=r+t.layoutLength},e.prototype.getModel=function(){return this._model},e.prototype._updateAxesFromSeries=function(e,t){t.eachSeries(function(n){if(!!e.contains(n,t)){var r=n.getData();J2(this.dimensions,function(e){var t=this._axesMap.get(e);t.scale.unionExtentFromData(r,r.mapDimension(e)),UV(t.scale,t.model)},this)}},this)},e.prototype.resize=function(e,t){this._rect=Lu(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},e.prototype.getRect=function(){return this._rect},e.prototype._makeLayoutInfo=function(){var e,t=this._model,n=this._rect,r=["x","y"],i=["width","height"],a=t.get("layout"),s="horizontal"===a?0:1,u=n[i[s]],c=[0,u],h=this.dimensions.length,p=Ze(t.get("axisExpandWidth"),c),f=Ze(t.get("axisExpandCount")||0,[0,h]),v=t.get("axisExpandable")&&h>3&&h>f&&f>1&&p>0&&u>0,y=t.get("axisExpandWindow");y?(e=Ze(y[1]-y[0],c),y[1]=y[0]+e):(e=Ze(p*(f-1),c),(y=[p*(t.get("axisExpandCenter")||J4(h/2))-e/2])[1]=y[0]+e);var _=(u-e)/(h-f);_<3&&(_=0);var x=[J4(J9(y[0]/p,1))+1,J6(J9(y[1]/p,1))-1],b=_/p*y[0];return{layout:a,pixelDimIndex:s,layoutBase:n[r[s]],layoutLength:u,axisBase:n[r[1-s]],axisLength:n[i[1-s]],axisExpandable:v,axisExpandWidth:p,axisCollapseWidth:_,axisExpandWindow:y,axisCount:h,winInnerIndices:x,axisExpandWindow0Pos:b}},e.prototype._layoutAxes=function(){var e=this._rect,t=this._axesMap,n=this.dimensions,r=this._makeLayoutInfo(),i=r.layout;t.each(function(e){var t=[0,r.axisLength],n=e.inverse?1:0;e.setExtent(t[n],t[1-n])}),J2(n,function(t,n){var a=(r.axisExpandable?function(e,t){var n,r,i=t.layoutLength,a=t.axisExpandWidth,s=t.axisCount,u=t.axisCollapseWidth,c=t.winInnerIndices,h=u,p=!1;return e<c[0]?(n=e*u,r=u):e<=c[1]?(n=t.axisExpandWindow0Pos+e*a-t.axisExpandWindow[0],h=a,p=!0):(n=i-(s-1-e)*u,r=u),{position:n,axisNameAvailableWidth:h,axisLabelShow:p,nameTruncateMaxWidth:r}}:function(e,t){var n=t.layoutLength/(t.axisCount-1);return{position:n*e,axisNameAvailableWidth:n,axisLabelShow:!0}})(n,r),s={horizontal:{x:a.position,y:r.axisLength},vertical:{x:0,y:a.position}},u=[s[i].x+e.x,s[i].y+e.y],c={horizontal:J8/2,vertical:0}[i],h=AZ();A0(h,h,c),A$(h,h,u),this._axesLayout[t]={position:u,rotation:c,transform:h,axisNameAvailableWidth:a.axisNameAvailableWidth,axisLabelShow:a.axisLabelShow,nameTruncateMaxWidth:a.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},e.prototype.getAxis=function(e){return this._axesMap.get(e)},e.prototype.dataToPoint=function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},e.prototype.eachActiveState=function(e,t,n,r){null==n&&(n=0),null==r&&(r=e.count());var i=this._axesMap,a=this.dimensions,s=[],u=[];Mb(a,function(t){s.push(e.mapDimension(t)),u.push(i.get(t).model)});for(var c=this.hasAxisBrushed(),h=n;h<r;h++){var p=void 0;if(c){p="active";for(var f=e.getValues(s,h),v=0,y=a.length;v<y;v++)if("inactive"===u[v].getActiveState(f[v])){p="inactive";break}}else p="normal";t(p,h)}},e.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,t=this._axesMap,n=!1,r=0,i=e.length;r<i;r++)"normal"!==t.get(e[r]).model.getActiveState()&&(n=!0);return n},e.prototype.axisCoordToPoint=function(e,t){return B6([e,0],this._axesLayout[t].transform)},e.prototype.getAxisLayout=function(e){return Mh(this._axesLayout[e])},e.prototype.getSlidedAxisExpandWindow=function(e){var t,n=this._makeLayoutInfo(),r=n.pixelDimIndex,i=n.axisExpandWindow.slice(),a=i[1]-i[0],s=[0,n.axisExpandWidth*(n.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:i};var u=e[r]-n.layoutBase-n.axisExpandWindow0Pos,c="slide",h=n.axisCollapseWidth,p=this._model.get("axisExpandSlideTriggerArea"),f=null!=p[0];if(h)f&&h&&u<a*p[0]?(c="jump",t=u-a*p[2]):f&&h&&u>a*(1-p[0])?(c="jump",t=u-a*(1-p[2])):(t=u-a*p[1])>=0&&(t=u-a*(1-p[1]))<=0&&(t=0),(t*=n.axisExpandWidth/h)?J$(t,i,s,"all"):c="none";else{var v=i[1]-i[0];(i=[J5(0,s[1]*u/v-v/2)])[1]=J3(s[1],i[0]+v),i[0]=i[1]-v}return{axisExpandWindow:i,behavior:c}},e}();function Ze(e,t){return J3(J5(e,t[0]),t[1])}let Zt={create:function(e,t){var n=[];return e.eachComponent("parallel",function(r,i){var a=new J7(r,e,t);a.name="parallel_"+i,a.resize(r,t),r.coordinateSystem=a,a.model=r,n.push(a)}),e.eachSeries(function(e){if("parallel"===e.get("coordinateSystem")){var t=e.getReferringComponents("parallel",Ih).models[0];e.coordinateSystem=t.coordinateSystem}}),n}};var Zn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.activeIntervals=[],n}return wJ(t,e),t.prototype.getAreaSelectStyle=function(){return IC([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(e){var t=this.activeIntervals=Mh(e);if(t)for(var n=t.length-1;n>=0;n--)EN(t[n])},t.prototype.getActiveState=function(e){var t=this.activeIntervals;if(!t.length)return"normal";if(null==e||isNaN(+e))return"inactive";if(1===t.length){var n=t[0];if(n[0]<=e&&e<=n[1])return"active"}else for(var r=0,i=t.length;r<i;r++)if(t[r][0]<=e&&e<=t[r][1])return"active";return"inactive"},t}(Lv);M_(Zn,Uq);var Zr=Math.min,Zi=Math.max,Za=Math.pow,Zo="globalPan",Zs={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Zl={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Zu={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Zc=0,Zh=function(e){function t(t){var n=e.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=t,n.group=new ES,n._uid="brushController_"+Zc++,Mb(ZF,function(e,t){this._handlers[t]=MT(e,this)},n),n}return wJ(t,e),t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var t,n,r,i=this._zr;if(!this._enableGlobalPan){;t=i,n=Zo,r=this._uid,jc(t)[n]=r}Mb(this._handlers,function(e,t){i.on(t,e)}),this._brushType=e.brushType,this._brushOption=Md(Mh(Zu),e,!0)},t.prototype._doDisableBrush=function(){var e,t,n,r,i=this._zr;e=i,t=Zo,n=this._uid,(r=jc(e))[t]===n&&(r[t]=null),Mb(this._handlers,function(e,t){i.off(t,e)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var t=this._panels={};Mb(e,function(e){t[e.panelId]=Mh(e)})}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{};this._enableGlobalPan=e.enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=t.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=MS(e,function(e){return Md(Mh(Zu),e,!0)});var t=this._covers,n=this._covers=[],r=this,i=this._creatingCover;return new zO(t,e,function(e,t){return a(e.__brushOption,t)},a).add(s).update(s).remove(function(e){t[e]!==i&&r.group.remove(t[e])}).execute(),this;function a(e,t){return(null!=e.id?e.id:"\0-brush-index-"+t)+"-"+e.brushType}function s(a,s){var u=e[a];if(null!=s&&t[s]===i)n[a]=t[s];else{var c=n[a]=null!=s?(t[s].__brushOption=u,t[s]):Zp(r,Zd(r,u));Zm(r,c)}}},t.prototype.unmount=function(){return this.enableBrush(!1),Zx(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(AA);function Zd(e,t){var n=ZU[t.brushType].createCover(e,t);return n.__brushOption=t,Zg(n,t),e.group.add(n),n}function Zp(e,t){var n=Zv(t);return n.endCreating&&(n.endCreating(e,t),Zg(t,t.__brushOption)),t}function Zf(e,t){var n=t.__brushOption;Zv(t).updateCoverShape(e,t,n.range,n)}function Zg(e,t){var n=t.z;null==n&&(n=1e4),e.traverse(function(e){e.z=n,e.z2=n})}function Zm(e,t){Zv(t).updateCommon(e,t),Zf(e,t)}function Zv(e){return ZU[e.__brushOption.brushType]}function Zy(e,t,n){var r,i=e._panels;if(!i)return!0;var a=e._transform;return Mb(i,function(e){e.isTargetByCursor(t,n,a)&&(r=e)}),r}function Z_(e,t){var n=e._panels;if(!n)return!0;var r=t.__brushOption.panelId;return null==r||n[r]}function Zx(e){var t=e._covers,n=t.length;return Mb(t,function(t){e.group.remove(t)},e),t.length=0,!!n}function Zb(e,t){var n=MS(e._covers,function(e){var t=e.__brushOption,n=Mh(t.range);return{brushType:t.brushType,panelId:t.panelId,range:n}});e.trigger("brush",{areas:n,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function ZS(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function Zw(e,t,n,r){var i=new ES;return i.add(new DX({name:"main",style:ZT(n),silent:!0,draggable:!0,cursor:"move",drift:ME(ZD,e,t,i,["n","s","w","e"]),ondragend:ME(Zb,t,{isEnd:!0})})),Mb(r,function(n){i.add(new DX({name:n.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:ME(ZD,e,t,i,n),ondragend:ME(Zb,t,{isEnd:!0})}))}),i}function ZM(e,t,n,r){var i=r.brushStyle.lineWidth||0,a=Zi(i,6),s=n[0][0],u=n[1][0],c=s-i/2,h=u-i/2,p=n[0][1],f=n[1][1],v=p-a+i/2,y=f-a+i/2,_=p-s,x=f-u,b=_+i,S=x+i;ZC(e,t,"main",s,u,_,x),r.transformable&&(ZC(e,t,"w",c,h,a,S),ZC(e,t,"e",v,h,a,S),ZC(e,t,"n",c,h,b,a),ZC(e,t,"s",c,y,b,a),ZC(e,t,"nw",c,h,a,a),ZC(e,t,"ne",v,h,a,a),ZC(e,t,"sw",c,y,a,a),ZC(e,t,"se",v,y,a,a))}function ZA(e,t){var n=t.__brushOption,r=n.transformable,i=t.childAt(0);i.useStyle(ZT(n)),i.attr({silent:!r,cursor:r?"move":"default"}),Mb([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(n){var i=t.childOfName(n.join("")),a=1===n.length?ZI(e,n[0]):function(e,t){var n=[ZI(e,t[0]),ZI(e,t[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}(e,n);i&&i.attr({silent:!r,invisible:!r,cursor:r?Zl[a]+"-resize":null})})}function ZC(e,t,n,r,i,a,s){var u=t.childOfName(n);u&&u.setShape(function(e){var t=Zr(e[0][0],e[1][0]),n=Zr(e[0][1],e[1][1]);return{x:t,y:n,width:Zi(e[0][0],e[1][0])-t,height:Zi(e[0][1],e[1][1])-n}}(ZL(e,t,[[r,i],[r+a,i+s]])))}function ZT(e){return Mg({strokeNoScale:!0},e.brushStyle)}function ZE(e,t,n,r){var i=[Zr(e,n),Zr(t,r)],a=[Zi(e,n),Zi(t,r)];return[[i[0],a[0]],[i[1],a[1]]]}function ZI(e,t){return({left:"w",right:"e",top:"n",bottom:"s"})[B9({w:"left",e:"right",n:"top",s:"bottom"}[t],B4(e.group))]}function ZD(e,t,n,r,i,a){var s=n.__brushOption,u=e.toRectRange(s.range),c=ZR(t,i,a);Mb(r,function(e){var t=Zs[e];u[t[0]][t[1]]+=c[t[0]]}),s.range=e.fromRectRange(ZE(u[0][0],u[1][0],u[0][1],u[1][1])),Zm(t,n),Zb(t,{isEnd:!1})}function ZP(e,t,n,r){var i=t.__brushOption.range,a=ZR(e,n,r);Mb(i,function(e){e[0]+=a[0],e[1]+=a[1]}),Zm(e,t),Zb(e,{isEnd:!1})}function ZR(e,t,n){var r=e.group,i=r.transformCoordToLocal(t,n),a=r.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function ZL(e,t,n){var r=Z_(e,t);return r&&!0!==r?r.clipPath(n,e._transform):Mh(n)}function ZO(e){var t=e.event;t.preventDefault&&t.preventDefault()}function Zk(e,t,n){return e.childOfName("main").contain(t,n)}function ZB(e,t,n,r){var i,a=e._creatingCover,s=e._creatingPanel,u=e._brushOption;if(e._track.push(n.slice()),function(e){var t=e._track;if(!t.length)return!1;var n=t[t.length-1],r=t[0],i=n[0]-r[0],a=n[1]-r[1];return Za(i*i+a*a,.5)>6}(e)||a){if(s&&!a){"single"===u.brushMode&&Zx(e);var c=Mh(u);c.brushType=ZN(c.brushType,s),c.panelId=!0===s?null:s.panelId,a=e._creatingCover=Zd(e,c),e._covers.push(a)}if(a){var h=ZU[ZN(e._brushType,s)];a.__brushOption.range=h.getCreatingRange(ZL(e,a,e._track)),r&&(Zp(e,a),h.updateCommon(e,a)),Zf(e,a),i={isEnd:r}}}else r&&"single"===u.brushMode&&u.removeOnClick&&Zy(e,t,n)&&Zx(e)&&(i={isEnd:r,removeOnClick:!0});return i}function ZN(e,t){return"auto"===e?t.defaultBrushType:e}var ZF={mousedown:function(e){if(this._dragging)Zz(this,e);else if(!e.target||!e.target.draggable){ZO(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=Zy(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,n=e.offsetY,r=this.group.transformCoordToLocal(t,n);if(!function(e,t,n){if(!(!e._brushType||function(e,t,n){var r=e._zr;return t<0||t>r.getWidth()||n<0||n>r.getHeight()}(e,t.offsetX,t.offsetY))){var r=e._zr,i=e._covers,a=Zy(e,t,n);if(!e._dragging)for(var s=0;s<i.length;s++){var u=i[s].__brushOption;if(a&&(!0===a||u.panelId===a.panelId)&&ZU[u.brushType].contain(i[s],n[0],n[1]))return}a&&r.setCursorStyle("crosshair")}}(this,e,r),this._dragging){ZO(e);var i=ZB(this,e,r,!1);i&&Zb(this,i)}},mouseup:function(e){Zz(this,e)}};function Zz(e,t){if(e._dragging){ZO(t);var n=t.offsetX,r=t.offsetY,i=e.group.transformCoordToLocal(n,r),a=ZB(e,t,i,!0);e._dragging=!1,e._track=[],e._creatingCover=null,a&&Zb(e,a)}}var ZU={lineX:ZH(0),lineY:ZH(1),rect:{createCover:function(e,t){function n(e){return e}return Zw({toRectRange:n,fromRectRange:n},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=ZS(e);return ZE(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,r){ZM(e,t,n,r)},updateCommon:ZA,contain:Zk},polygon:{createCover:function(e,t){var n=new ES;return n.add(new B_({name:"main",style:ZT(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new Bm({name:"main",draggable:!0,drift:ME(ZP,e,t),ondragend:ME(Zb,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,r){t.childAt(0).setShape({points:ZL(e,t,n)})},updateCommon:ZA,contain:Zk}};function ZH(e){return{createCover:function(t,n){return Zw({toRectRange:function(t){var n=[t,[0,100]];return e&&n.reverse(),n},fromRectRange:function(t){return t[e]}},t,n,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var n=ZS(t);return[Zr(n[0][e],n[1][e]),Zi(n[0][e],n[1][e])]},updateCoverShape:function(t,n,r,i){var a,s=Z_(t,n);if(!0!==s&&s.getLinearBrushOtherExtent)a=s.getLinearBrushOtherExtent(e);else{var u=t._zr;a=[0,[u.getWidth(),u.getHeight()][1-e]]}var c=[r,a];e&&c.reverse(),ZM(t,n,c,i)},updateCommon:ZA,contain:Zk}}function ZG(e){return e=Zj(e),function(t){return Ne(t,e)}}function ZV(e,t){return e=Zj(e),function(n){var r=null!=t?t:n,i=r?e.width:e.height,a=r?e.x:e.y;return[a,a+(i||0)]}}function ZW(e,t,n){var r=Zj(e);return function(e,i){return r.contain(i[0],i[1])&&!jy(e,t,n)}}function Zj(e){return Cr.create(e)}var ZX=["axisLine","axisTickLabel","axisName"],ZY=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.init=function(t,n){e.prototype.init.apply(this,arguments),(this._brushController=new Zh(n.getZr())).on("brush",MT(this._onBrush,this))},t.prototype.render=function(e,t,n,r){if(function(e,t,n){return n&&"axisAreaSelect"===n.type&&t.findComponents({mainType:"parallelAxis",query:n})[0]===e}(e,t,r))return;this.axisModel=e,this.api=n,this.group.removeAll();var i=this._axisGroup;if(this._axisGroup=new ES,this.group.add(this._axisGroup),!!e.get("show")){var a=function(e,t){return t.getComponent("parallel",e.get("parallelIndex"))}(e,t),s=a.coordinateSystem,u=e.getAreaSelectStyle(),c=u.width,h=e.axis.dim,p=Mf({strokeContainThreshold:c},s.getAxisLayout(h)),f=new WO(e,p);Mb(ZX,f.add,f),this._axisGroup.add(f.getGroup()),this._refreshBrushController(p,u,e,a,c,n),B7(i,this._axisGroup,e)}},t.prototype._refreshBrushController=function(e,t,n,r,i,a){var s=n.axis.getExtent(),u=s[1]-s[0],c=Math.min(30,.1*Math.abs(u)),h=Cr.create({x:s[0],y:-i/2,width:u,height:i});h.x-=c,h.width+=2*c,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,x:e.position[0],y:e.position[1]}).setPanels([{panelId:"pl",clipPath:ZG(h),isTargetByCursor:ZW(h,a,r),getLinearBrushOtherExtent:ZV(h,0)}]).enableBrush({brushType:"lineX",brushStyle:t,removeOnClick:!0}).updateCovers(function(e){var t=e.axis;return MS(e.activeIntervals,function(e){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(e[0],!0),t.dataToCoord(e[1],!0)]}})}(n))},t.prototype._onBrush=function(e){var t=e.areas,n=this.axisModel,r=n.axis,i=MS(t,function(e){return[r.coordToData(e.range[0],!0),r.coordToData(e.range[1],!0)]});(!n.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:i})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis",t}(kR),ZJ={type:"axisAreaSelect",event:"axisAreaSelected"},ZZ={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function Zq(e){var t;e.registerComponentView(JJ),e.registerComponentModel(JK),e.registerCoordinateSystem("parallel",Zt),e.registerPreprocessor(JY),e.registerComponentModel(Zn),e.registerComponentView(ZY),Wv(e,"parallel",Zn,ZZ),(t=e).registerAction(ZJ,function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(t){t.axis.model.setActiveIntervals(e.intervals)})}),t.registerAction("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(t){t.setAxisExpand(e)})})}var ZK=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},ZQ=function(e){function t(t){return e.call(this,t)||this}return wJ(t,e),t.prototype.getDefaultShape=function(){return new ZK},t.prototype.buildPath=function(e,t){var n=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+n,t.y2),e.bezierCurveTo(t.cpx2+n,t.cpy2,t.cpx1+n,t.cpy1,t.x1+n,t.y1)):(e.lineTo(t.x2,t.y2+n),e.bezierCurveTo(t.cpx2,t.cpy2+n,t.cpx1,t.cpy1+n,t.x1,t.y1+n)),e.closePath()},t.prototype.highlight=function(){PT(this)},t.prototype.downplay=function(){PE(this)},t}(DR),Z$=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._focusAdjacencyDisabled=!1,n}return wJ(t,e),t.prototype.render=function(e,t,n){var r=this,i=e.getGraph(),a=this.group,s=e.layoutInfo,u=s.width,c=s.height,h=e.getData(),p=e.getData("edge"),f=e.get("orient");this._model=e,a.removeAll(),a.x=s.x,a.y=s.y,i.eachEdge(function(t){var n,r,i,s,h,v,y,_,x=new ZQ,b=D7(x);b.dataIndex=t.dataIndex,b.seriesIndex=e.seriesIndex,b.dataType="edge";var S=t.getModel(),w=S.getModel("lineStyle"),M=w.get("curveness"),A=t.node1.getLayout(),C=t.node1.getModel(),T=C.get("localX"),I=C.get("localY"),D=t.node2.getLayout(),P=t.node2.getModel(),R=P.get("localX"),L=P.get("localY"),O=t.getLayout();x.shape.extent=Math.max(1,O.dy),x.shape.orient=f,"vertical"===f?(n=(null!=T?T*u:A.x)+O.sy,r=(null!=I?I*c:A.y)+A.dy,i=(null!=R?R*u:D.x)+O.ty,s=null!=L?L*c:D.y,h=n,v=r*(1-M)+s*M,y=i,_=r*M+s*(1-M)):(n=(null!=T?T*u:A.x)+A.dx,r=(null!=I?I*c:A.y)+O.sy,i=null!=R?R*u:D.x,s=(null!=L?L*c:D.y)+O.ty,h=n*(1-M)+i*M,v=r,y=n*M+i*(1-M),_=s),x.setShape({x1:n,y1:r,x2:i,y2:s,cpx1:h,cpy1:v,cpx2:y,cpy2:_}),x.useStyle(w.getItemStyle()),Z0(x.style,f,t);var k=""+S.get("value"),B=P7(S,"edgeLabel");P8(x,B,{labelFetcher:{getFormattedLabel:function(t,n,r,i,a,s){return e.getFormattedLabel(t,n,"edge",i,MW(a,B.normal&&B.normal.get("formatter"),k),s)}},labelDataIndex:t.dataIndex,defaultText:k}),x.setTextConfig({position:"inside"});var N=S.getModel("emphasis");PW(x,S,"lineStyle",function(e){var n=e.getItemStyle();return Z0(n,f,t),n}),a.add(x),p.setItemGraphicEl(t.dataIndex,x);var F=N.get("focus");PU(x,"adjacency"===F?t.getAdjacentDataIndices():"trajectory"===F?t.getTrajectoryDataIndices():F,N.get("blurScope"),N.get("disabled"))}),i.eachNode(function(t){var n=t.getLayout(),r=t.getModel(),i=r.get("localX"),s=r.get("localY"),p=r.getModel("emphasis"),f=r.get(["itemStyle","borderRadius"])||0,v=new DX({shape:{x:null!=i?i*u:n.x,y:null!=s?s*c:n.y,width:n.dx,height:n.dy,r:f},style:r.getModel("itemStyle").getItemStyle(),z2:10});P8(v,P7(r),{labelFetcher:{getFormattedLabel:function(t,n){return e.getFormattedLabel(t,n,"node")}},labelDataIndex:t.dataIndex,defaultText:t.id}),v.disableLabelAnimation=!0,v.setStyle("fill",t.getVisual("color")),v.setStyle("decal",t.getVisual("style").decal),PW(v,r),a.add(v),h.setItemGraphicEl(t.dataIndex,v),D7(v).dataType="node";var y=p.get("focus");PU(v,"adjacency"===y?t.getAdjacentDataIndices():"trajectory"===y?t.getTrajectoryDataIndices():y,p.get("blurScope"),p.get("disabled"))}),h.eachItemGraphicEl(function(t,i){h.getItemModel(i).get("draggable")&&(t.drift=function(t,a){r._focusAdjacencyDisabled=!0,this.shape.x+=t,this.shape.y+=a,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:h.getRawIndex(i),localX:this.shape.x/u,localY:this.shape.y/c})},t.ondragend=function(){r._focusAdjacencyDisabled=!1},t.draggable=!0,t.cursor="move")}),!this._data&&e.isAnimationEnabled()&&a.setClipPath(function(e,t,n){var r=new DX({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return P$(r,{shape:{width:e.width+20}},t,n),r}(a.getBoundingRect(),e,function(){a.removeClipPath()})),this._data=e.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(Nv);function Z0(e,t,n){switch(e.fill){case"source":e.fill=n.node1.getVisual("color"),e.decal=n.node1.getVisual("style").decal;break;case"target":e.fill=n.node2.getVisual("color"),e.decal=n.node2.getVisual("style").decal;break;case"gradient":var r=n.node1.getVisual("color"),i=n.node2.getVisual("color");MP(r)&&MP(i)&&(e.fill=new BO(0,0,+("horizontal"===t),+("vertical"===t),[{color:r,offset:0},{color:i,offset:1}]))}}var Z1=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.getInitialData=function(e,t){var n=e.edges||e.links,r=e.data||e.nodes,i=e.levels;this.levelModels=[];for(var a=this.levelModels,s=0;s<i.length;s++)null!=i[s].depth&&i[s].depth>=0&&(a[i[s].depth]=new Rb(i[s],this,t));if(r&&n)return JA(r,n,this,!0,function(e,t){e.wrapMethod("getItemModel",function(e,t){var n=e.parentModel,r=n.getData().getItemLayout(t);if(r){var i=r.depth,a=n.levelModels[i];a&&(e.parentModel=a)}return e}),t.wrapMethod("getItemModel",function(e,t){var n=e.parentModel,r=n.getGraph().getEdgeByIndex(t).node1.getLayout();if(r){var i=r.depth,a=n.levelModels[i];a&&(e.parentModel=a)}return e})}).data},t.prototype.setNodePosition=function(e,t){var n=(this.option.data||this.option.nodes)[e];n.localX=t[0],n.localY=t[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,t,n){function r(e){return isNaN(e)||null==e}if("edge"===n){var i=this.getDataParams(e,n),a=i.data,s=i.value;return ks("nameValue",{name:a.source+" -- "+a.target,value:s,noValue:r(s)})}var u=this.getGraph().getNodeByIndex(e).getLayout().value,c=this.getDataParams(e,n).data.name;return ks("nameValue",{name:null!=c?c+"":null,value:u,noValue:r(u)})},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(t,n){var r=e.prototype.getDataParams.call(this,t,n);if(null==r.value&&"node"===n){var i=this.getGraph().getNodeByIndex(t).getLayout().value;r.value=i}return r},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(kD);function Z2(e,t){e.eachSeriesByType("sankey",function(e){var n=e.get("nodeWidth"),r=e.get("nodeGap"),i=function(e,t){return Lu(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t);e.layoutInfo=i;var a=i.width,s=i.height,u=e.getGraph(),c=u.nodes,h=u.edges;(function(e){Mb(e,function(e){var t=Math.max(qt(e.outEdges,qe),qt(e.inEdges,qe),e.getValue()||0);e.setLayout({value:t},!0)})})(c);var p=0!==MM(c,function(e){return 0===e.getLayout().value}).length?0:e.get("layoutIterations");(function(e,t,n,r,i,a,s,u,c){(function(e,t,n,r,i,a,s){for(var u=[],c=[],h=[],p=[],f=0,v=0;v<t.length;v++)u[v]=1;for(var v=0;v<e.length;v++)c[v]=e[v].inEdges.length,0===c[v]&&h.push(e[v]);for(var y=-1;h.length;){for(var _=0;_<h.length;_++){var x=h[_],b=x.hostGraph.data.getRawDataItem(x.dataIndex),S=null!=b.depth&&b.depth>=0;S&&b.depth>y&&(y=b.depth),x.setLayout({depth:S?b.depth:f},!0),"vertical"===a?x.setLayout({dy:n},!0):x.setLayout({dx:n},!0);for(var w=0;w<x.outEdges.length;w++){var M=x.outEdges[w];u[t.indexOf(M)]=0;var A=M.node2,C=e.indexOf(A);0==--c[C]&&0>p.indexOf(A)&&p.push(A)}}++f,h=p,p=[]}for(var v=0;v<u.length;v++)if(1===u[v])throw Error("Sankey is a DAG, the original data has cycle!");var T=y>f-1?y:f-1;s&&"left"!==s&&function(e,t,n,r){if("right"===t){for(var i=[],a=e,s=0;a.length;){for(var u=0;u<a.length;u++){var c=a[u];c.setLayout({skNodeHeight:s},!0);for(var h=0;h<c.inEdges.length;h++){var p=c.inEdges[h];0>i.indexOf(p.node1)&&i.push(p.node1)}}a=i,i=[],++s}Mb(e,function(e){!Z3(e)&&e.setLayout({depth:Math.max(0,r-e.getLayout().skNodeHeight)},!0)})}else"justify"===t&&function(e,t){Mb(e,function(e){!Z3(e)&&!e.outEdges.length&&e.setLayout({depth:t},!0)})}(e,r)}(e,s,a,T),function(e,t,n){Mb(e,function(e){var r=e.getLayout().depth*t;"vertical"===n?e.setLayout({y:r},!0):e.setLayout({x:r},!0)})}(e,"vertical"===a?(i-n)/T:(r-n)/T,a)})(e,t,n,i,a,u,c),function(e,t,n,r,i,a,s){var u=function(e,t){var n=[],r="vertical"===t?"y":"x",i=Ig(e,function(e){return e.getLayout()[r]});return i.keys.sort(function(e,t){return e-t}),Mb(i.keys,function(e){n.push(i.buckets.get(e))}),n}(e,s);(function(e,t,n,r,i,a){var s=1/0;Mb(e,function(e){var t=e.length,u=0;Mb(e,function(e){u+=e.getLayout().value});var c="vertical"===a?(r-(t-1)*i)/u:(n-(t-1)*i)/u;c<s&&(s=c)}),Mb(e,function(e){Mb(e,function(e,t){var n=e.getLayout().value*s;"vertical"===a?(e.setLayout({x:t},!0),e.setLayout({dx:n},!0)):(e.setLayout({y:t},!0),e.setLayout({dy:n},!0))})}),Mb(t,function(e){var t=+e.getValue()*s;e.setLayout({dy:t},!0)})})(u,t,n,r,i,s),Z5(u,i,n,r,s);for(var c=1;a>0;a--)(function(e,t,n){Mb(e.slice().reverse(),function(e){Mb(e,function(e){if(e.outEdges.length){var r=qt(e.outEdges,Z4,n)/qt(e.outEdges,qe);if(isNaN(r)){var i=e.outEdges.length;r=i?qt(e.outEdges,Z6,n)/i:0}if("vertical"===n){var a=e.getLayout().x+(r-Z7(e,n))*t;e.setLayout({x:a},!0)}else{var s=e.getLayout().y+(r-Z7(e,n))*t;e.setLayout({y:s},!0)}}})})})(u,c*=.99,s),Z5(u,i,n,r,s),function(e,t,n){Mb(e,function(e){Mb(e,function(e){if(e.inEdges.length){var r=qt(e.inEdges,Z9,n)/qt(e.inEdges,qe);if(isNaN(r)){var i=e.inEdges.length;r=i?qt(e.inEdges,Z8,n)/i:0}if("vertical"===n){var a=e.getLayout().x+(r-Z7(e,n))*t;e.setLayout({x:a},!0)}else{var s=e.getLayout().y+(r-Z7(e,n))*t;e.setLayout({y:s},!0)}}})})}(u,c,s),Z5(u,i,n,r,s)}(e,t,a,i,r,s,u),function(e,t){var n="vertical"===t?"x":"y";Mb(e,function(e){e.outEdges.sort(function(e,t){return e.node2.getLayout()[n]-t.node2.getLayout()[n]}),e.inEdges.sort(function(e,t){return e.node1.getLayout()[n]-t.node1.getLayout()[n]})}),Mb(e,function(e){var t=0,n=0;Mb(e.outEdges,function(e){e.setLayout({sy:t},!0),t+=e.getLayout().dy}),Mb(e.inEdges,function(e){e.setLayout({ty:n},!0),n+=e.getLayout().dy})})}(e,u)})(c,h,n,r,a,s,p,e.get("orient"),e.get("nodeAlign"))})}function Z3(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return null!=t.depth&&t.depth>=0}function Z5(e,t,n,r,i){var a="vertical"===i?"x":"y";Mb(e,function(e){e.sort(function(e,t){return e.getLayout()[a]-t.getLayout()[a]});for(var s,u,c,h=0,p=e.length,f="vertical"===i?"dx":"dy",v=0;v<p;v++)(c=h-(u=e[v]).getLayout()[a])>0&&(s=u.getLayout()[a]+c,"vertical"===i?u.setLayout({x:s},!0):u.setLayout({y:s},!0)),h=u.getLayout()[a]+u.getLayout()[f]+t;if((c=h-t-("vertical"===i?r:n))>0){s=u.getLayout()[a]-c,"vertical"===i?u.setLayout({x:s},!0):u.setLayout({y:s},!0),h=s;for(var v=p-2;v>=0;--v)(c=(u=e[v]).getLayout()[a]+u.getLayout()[f]+t-h)>0&&(s=u.getLayout()[a]-c,"vertical"===i?u.setLayout({x:s},!0):u.setLayout({y:s},!0)),h=u.getLayout()[a]}})}function Z4(e,t){return Z7(e.node2,t)*e.getValue()}function Z6(e,t){return Z7(e.node2,t)}function Z9(e,t){return Z7(e.node1,t)*e.getValue()}function Z8(e,t){return Z7(e.node1,t)}function Z7(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function qe(e){return e.getValue()}function qt(e,t,n){for(var r=0,i=e.length,a=-1;++a<i;){var s=+t(e[a],n);!isNaN(s)&&(r+=s)}return r}function qn(e){e.eachSeriesByType("sankey",function(e){var t=e.getGraph(),n=t.nodes,r=t.edges;if(n.length){var i=1/0,a=-1/0;Mb(n,function(e){var t=e.getLayout().value;t<i&&(i=t),t>a&&(a=t)}),Mb(n,function(t){var n=new Yl({type:"color",mappingMethod:"linear",dataExtent:[i,a],visual:e.get("color")}).mapValueToVisual(t.getLayout().value),r=t.getModel().get(["itemStyle","color"]);null!=r?(t.setVisual("color",r),t.setVisual("style",{fill:r})):(t.setVisual("color",n),t.setVisual("style",{fill:n}))})}r.length&&Mb(r,function(e){var t=e.getModel().get("lineStyle");e.setVisual("style",t)})})}var qr=function(){function e(){}return e.prototype.getInitialData=function(e,t){var n,r,i=t.getComponent("xAxis",this.get("xAxisIndex")),a=t.getComponent("yAxis",this.get("yAxisIndex")),s=i.get("type"),u=a.get("type");"category"===s?(e.layout="horizontal",n=i.getOrdinalMeta(),r=!0):"category"===u?(e.layout="vertical",n=a.getOrdinalMeta(),r=!0):e.layout=e.layout||"horizontal";var c=["x","y"],h="horizontal"===e.layout?0:1,p=this._baseAxisDim=c[h],f=c[1-h],v=[i,a],y=v[h].get("type"),_=v[1-h].get("type"),x=e.data;if(x&&r){var b=[];Mb(x,function(e,t){var n;MI(e)?(n=e.slice(),e.unshift(t)):MI(e.value)?((n=Mf({},e)).value=n.value.slice(),e.value.unshift(t)):n=e,b.push(n)}),e.data=b}var S=this.defaultValueDimensions,w=[{name:p,type:zN(y),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:f,type:zN(_),dimsDef:S.slice()}];return V7(this,{coordDimensions:w,dimensionsCount:S.length+1,encodeDefaulter:ME(LP,w,this)})},e.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},e}(),qi=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],n.visualDrawType="stroke",n}return wJ(t,e),t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(kD);M_(qi,qr,!0);var qa=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.render=function(e,t,n){var r=e.getData(),i=this.group,a=this._data;!this._data&&i.removeAll();var s="horizontal"===e.get("layout")?1:0;r.diff(a).add(function(e){if(r.hasValue(e)){var t=ql(r.getItemLayout(e),r,e,s,!0);r.setItemGraphicEl(e,t),i.add(t)}}).update(function(e,t){var n=a.getItemGraphicEl(t);if(!r.hasValue(e)){i.remove(n);return}var u=r.getItemLayout(e);n?(P5(n),qu(u,n,r,e)):n=ql(u,r,e,s),i.add(n),r.setItemGraphicEl(e,n)}).remove(function(e){var t=a.getItemGraphicEl(e);t&&i.remove(t)}).execute(),this._data=r},t.prototype.remove=function(e){var t=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(e){e&&t.remove(e)})},t.type="boxplot",t}(Nv),qo=function(){},qs=function(e){function t(t){var n=e.call(this,t)||this;return n.type="boxplotBoxPath",n}return wJ(t,e),t.prototype.getDefaultShape=function(){return new qo},t.prototype.buildPath=function(e,t){var n=t.points,r=0;for(e.moveTo(n[r][0],n[r][1]),r++;r<4;r++)e.lineTo(n[r][0],n[r][1]);for(e.closePath();r<n.length;r++)e.moveTo(n[r][0],n[r][1]),r++,e.lineTo(n[r][0],n[r][1])},t}(DR);function ql(e,t,n,r,i){var a=e.ends,s=new qs({shape:{points:i?function(e,t,n){return MS(e,function(e){return(e=e.slice())[t]=n.initBaseline,e})}(a,r,e):a}});return qu(e,s,t,n,i),s}function qu(e,t,n,r,i){var a=n.hostModel;(0,tf[i?"initProps":"updateProps"])(t,{shape:{points:e.ends}},a,r),t.useStyle(n.getItemVisual(r,"style")),t.style.strokeNoScale=!0,t.z2=100;var s=n.getItemModel(r),u=s.getModel("emphasis");PW(t,s),PU(t,u.get("focus"),u.get("blurScope"),u.get("disabled"))}var qc=Mb;function qh(e){qc(function(e){var t=[],n=[];return e.eachSeriesByType("boxplot",function(e){var r=e.getBaseAxis(),i=Mv(n,r);i<0&&(i=n.length,n[i]=r,t[i]={axis:r,seriesModels:[]}),t[i].seriesModels.push(e)}),t}(e),function(e){var t=e.seriesModels;if(!!t.length)(function(e){var t,n=e.axis,r=e.seriesModels,i=r.length,a=e.boxWidthList=[],s=e.boxOffsetList=[],u=[];if("category"===n.type)t=n.getBandWidth();else{var c=0;qc(r,function(e){c=Math.max(c,e.getData().count())});var h=n.getExtent();t=Math.abs(h[1]-h[0])/c}qc(r,function(e){var n=e.get("boxWidth");!MI(n)&&(n=[n,n]),u.push([Ek(n[0],t)||0,Ek(n[1],t)||0])});var p=.8*t-2,f=p/i*.3,v=(p-f*(i-1))/i,y=v/2-p/2;qc(r,function(e,t){s.push(y),y+=f+v,a.push(Math.min(Math.max(v,u[t][0]),u[t][1]))})})(e),qc(t,function(t,n){(function(e,t,n){var r=e.coordinateSystem,i=e.getData(),a=n/2,s="horizontal"===e.get("layout")?0:1,u=1-s,c=["x","y"],h=i.mapDimension(c[s]),p=i.mapDimensionsAll(c[u]);if(null!=h&&!(p.length<5))for(var f=0;f<i.count();f++){var v=i.get(h,f),y=M(v,p[2],f),_=M(v,p[0],f),x=M(v,p[1],f),b=M(v,p[3],f),S=M(v,p[4],f),w=[];A(w,x,!1),A(w,b,!0),w.push(_,x,S,b),C(w,_),C(w,S),C(w,y),i.setItemLayout(f,{initBaseline:y[u],ends:w})}function M(e,n,a){var c,h=i.get(n,a),p=[];return p[s]=e,p[u]=h,isNaN(e)||isNaN(h)?c=[NaN,NaN]:(c=r.dataToPoint(p),c[s]+=t),c}function A(e,t,n){var r=t.slice(),i=t.slice();r[s]+=a,i[s]-=a,n?e.push(r,i):e.push(i,r)}function C(e,t){var n=t.slice(),r=t.slice();n[s]-=a,r[s]+=a,e.push(n,r)}})(t,e.boxOffsetList[n],e.boxWidthList[n])})})}var qd={type:"echarts:boxplot",transform:function(e){var t=e.upstream;t.sourceFormat!==Lw&&OF("");var n=function(e,t){for(var n=[],r=[],i=(t=t||{}).boundIQR,a="none"===i||0===i,s=0;s<e.length;s++){var u=EN(e[s].slice()),c=EK(u,.25),h=EK(u,.5),p=EK(u,.75),f=u[0],v=u[u.length-1],y=(null==i?1.5:i)*(p-c),_=a?f:Math.max(f,c-y),x=a?v:Math.min(v,p+y),b=t.itemNameFormatter,S=MD(b)?b({value:s}):MP(b)?b.replace("{value}",s+""):s+"";n.push([S,_,c,h,p,x]);for(var w=0;w<u.length;w++){var M=u[w];if(M<_||M>x){var A=[S,M];r.push(A)}}}return{boxData:n,outliers:r}}(t.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}},qp=["color","borderColor"],qf=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.render=function(e,t,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},t.prototype.incrementalPrepareRender=function(e,t,n){this._clear(),this._updateDrawMode(e)},t.prototype.incrementalRender=function(e,t,n,r){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,t):this._incrementalRenderNormal(e,t)},t.prototype.eachRendered=function(e){Nl(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t!==this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},t.prototype._renderNormal=function(e){var t=e.getData(),n=this._data,r=this.group,i=t.getLayout("isSimpleBox"),a=e.get("clip",!0),s=e.coordinateSystem,u=s.getArea&&s.getArea();!this._data&&r.removeAll(),t.diff(n).add(function(n){if(t.hasValue(n)){var s=t.getItemLayout(n);if(!(a&&qy(u,s))){var c=qv(s,n,!0);P$(c,{shape:{points:s.ends}},e,n),q_(c,t,n,i),r.add(c),t.setItemGraphicEl(n,c)}}}).update(function(s,c){var h=n.getItemGraphicEl(c);if(!t.hasValue(s)){r.remove(h);return}var p=t.getItemLayout(s);if(a&&qy(u,p)){r.remove(h);return}h?(PQ(h,{shape:{points:p.ends}},e,s),P5(h)):h=qv(p,s),q_(h,t,s,i),r.add(h),t.setItemGraphicEl(s,h)}).remove(function(e){var t=n.getItemGraphicEl(e);t&&r.remove(t)}).execute(),this._data=t},t.prototype._renderLarge=function(e){this._clear(),qS(e,this.group);var t=e.get("clip",!0)?Vc(e.coordinateSystem,!1,e):null;t?this.group.setClipPath(t):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(e,t){for(var n,r=t.getData(),i=r.getLayout("isSimpleBox");null!=(n=e.next());){var a=qv(r.getItemLayout(n),n);q_(a,r,n,i),a.incremental=!0,this.group.add(a),this._progressiveEls.push(a)}},t.prototype._incrementalRenderLarge=function(e,t){qS(t,this.group,this._progressiveEls,!0)},t.prototype.remove=function(e){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(Nv),qg=function(){},qm=function(e){function t(t){var n=e.call(this,t)||this;return n.type="normalCandlestickBox",n}return wJ(t,e),t.prototype.getDefaultShape=function(){return new qg},t.prototype.buildPath=function(e,t){var n=t.points;this.__simpleBox?(e.moveTo(n[4][0],n[4][1]),e.lineTo(n[6][0],n[6][1])):(e.moveTo(n[0][0],n[0][1]),e.lineTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.closePath(),e.moveTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.moveTo(n[6][0],n[6][1]),e.lineTo(n[7][0],n[7][1]))},t}(DR);function qv(e,t,n){var r=e.ends;return new qm({shape:{points:n?function(e,t){return MS(e,function(e){return(e=e.slice())[1]=t.initBaseline,e})}(r,e):r},z2:100})}function qy(e,t){for(var n=!0,r=0;r<t.ends.length;r++)if(e.contain(t.ends[r][0],t.ends[r][1])){n=!1;break}return n}function q_(e,t,n,r){var i=t.getItemModel(n);e.useStyle(t.getItemVisual(n,"style")),e.style.strokeNoScale=!0,e.__simpleBox=r,PW(e,i)}var qx=function(){},qb=function(e){function t(t){var n=e.call(this,t)||this;return n.type="largeCandlestickBox",n}return wJ(t,e),t.prototype.getDefaultShape=function(){return new qx},t.prototype.buildPath=function(e,t){for(var n=t.points,r=0;r<n.length;)if(this.__sign===n[r++]){var i=n[r++];e.moveTo(i,n[r++]),e.lineTo(i,n[r++])}else r+=3},t}(DR);function qS(e,t,n,r){var i=e.getData(),a=i.getLayout("largePoints"),s=new qb({shape:{points:a},__sign:1,ignoreCoarsePointer:!0});t.add(s);var u=new qb({shape:{points:a},__sign:-1,ignoreCoarsePointer:!0});t.add(u);var c=new qb({shape:{points:a},__sign:0,ignoreCoarsePointer:!0});t.add(c),qw(1,s,e,i),qw(-1,u,e,i),qw(0,c,e,i),r&&(s.incremental=!0,u.incremental=!0),n&&n.push(s,u)}function qw(e,t,n,r){var i=n.get(["itemStyle",e>0?"borderColor":"borderColor0"])||n.get(["itemStyle",e>0?"color":"color0"]);0===e&&(i=n.get(["itemStyle","borderColorDoji"]));var a=n.getModel("itemStyle").getItemStyle(qp);t.useStyle(a),t.style.fill=null,t.style.stroke=i}var qM=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],n}return wJ(t,e),t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(e,t,n){var r=t.getItemLayout(e);return r&&n.rect(r.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(kD);M_(qM,qr,!0);function qA(e){if(!!e&&!!MI(e.series))Mb(e.series,function(e){MO(e)&&"k"===e.type&&(e.type="candlestick")})}var qC=["itemStyle","borderColor"],qT=["itemStyle","borderColor0"],qE=["itemStyle","borderColorDoji"],qI=["itemStyle","color"],qD=["itemStyle","color0"],qP={seriesType:"candlestick",plan:kL(),performRawSeries:!0,reset:function(e,t){if(!t.isSeriesFiltered(e))return!e.pipelineContext.large&&{progress:function(e,t){for(var n;null!=(n=e.next());){var r,i,a=t.getItemModel(n),s=t.getItemLayout(n).sign,u=a.getItemStyle();u.fill=(r=s,a.get(r>0?qI:qD)),u.stroke=(i=s,a.get(0===i?qE:i>0?qC:qT)||u.fill),Mf(t.ensureUniqueItemVisual(n,"style"),u)}}}}},qR={seriesType:"candlestick",plan:kL(),reset:function(e){var t=e.coordinateSystem,n=e.getData(),r=function(e,t){var n,r=e.getBaseAxis(),i="category"===r.type?r.getBandWidth():Math.abs((n=r.getExtent())[1]-n[0])/t.count(),a=Ek(MV(e.get("barMaxWidth"),i),i),s=Ek(MV(e.get("barMinWidth"),1),i),u=e.get("barWidth");return null!=u?Ek(u,i):Math.max(Math.min(i/2,a),s)}(e,n),i=["x","y"],a=n.getDimensionIndex(n.mapDimension("x")),s=MS(n.mapDimensionsAll("y"),n.getDimensionIndex,n),u=s[0],c=s[1],h=s[2],p=s[3];if(n.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),!(a<0)&&!(s.length<4))return{progress:e.pipelineContext.large?function(n,r){for(var i,s,f=Up(4*n.count),v=0,y=[],_=[],x=r.getStore(),b=!!e.get(["itemStyle","borderColorDoji"]);null!=(s=n.next());){var S=x.get(a,s),w=x.get(u,s),M=x.get(c,s),A=x.get(h,s),C=x.get(p,s);if(isNaN(S)||isNaN(A)||isNaN(C)){f[v++]=NaN,v+=3;continue}f[v++]=qL(x,s,w,M,c,b),y[0]=S,y[1]=A,i=t.dataToPoint(y,null,_),f[v++]=i?i[0]:NaN,f[v++]=i?i[1]:NaN,y[1]=C,i=t.dataToPoint(y,null,_),f[v++]=i?i[1]:NaN}r.setLayout("largePoints",f)}:function(e,n){for(var i,s=n.getStore();null!=(i=e.next());){var f=s.get(a,i),v=s.get(u,i),y=s.get(c,i),_=s.get(h,i),x=s.get(p,i),b=Math.min(v,y),S=Math.max(v,y),w=D(b,f),M=D(S,f),A=D(_,f),C=D(x,f),T=[];P(T,M,0),P(T,w,1),T.push(R(C),R(M),R(A),R(w));var I=!!n.getItemModel(i).get(["itemStyle","borderColorDoji"]);n.setItemLayout(i,{sign:qL(s,i,v,y,c,I),initBaseline:v>y?M[1]:w[1],ends:T,brushRect:function(e,t,n){var i=D(e,n),a=D(t,n);return i[0]-=r/2,a[0]-=r/2,{x:i[0],y:i[1],width:r,height:a[1]-i[1]}}(_,x,f)})}function D(e,n){var r=[];return r[0]=n,r[1]=e,isNaN(n)||isNaN(e)?[NaN,NaN]:t.dataToPoint(r)}function P(e,t,n){var i=t.slice(),a=t.slice();i[0]=B5(i[0]+r/2,1,!1),a[0]=B5(a[0]-r/2,1,!0),n?e.push(i,a):e.push(a,i)}function R(e){return e[0]=B5(e[0],1),e}}}}};function qL(e,t,n,r,i,a){var s;return s=n>r?-1:n<r?1:a?0:t>0?e.get(i,t-1)<=r?1:-1:1}function qO(e,t){var n=t.rippleEffectColor||t.color;e.eachChild(function(e){e.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?n:null,fill:"fill"===t.brushType?n:null}})})}var qk=function(e){function t(t,n){var r=e.call(this)||this,i=new G2(t,n),a=new ES;return r.add(i),r.add(a),r.updateData(t,n),r}return wJ(t,e),t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(e){for(var t=e.symbolType,n=e.color,r=e.rippleNumber,i=this.childAt(1),a=0;a<r;a++){var s=Fo(t,-1,-1,2,2,n);s.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var u=-a/r*e.period+e.effectOffset;s.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(u).start(),s.animateStyle(!0).when(e.period,{opacity:0}).delay(u).start(),i.add(s)}qO(i,e)},t.prototype.updateEffectAnimation=function(e){for(var t=this._effectCfg,n=this.childAt(1),r=["symbolType","period","rippleScale","rippleNumber"],i=0;i<r.length;i++){var a=r[i];if(t[a]!==e[a]){this.stopEffectAnimation(),this.startEffectAnimation(e);return}}qO(n,e)},t.prototype.highlight=function(){PT(this)},t.prototype.downplay=function(){PE(this)},t.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},t.prototype.updateData=function(e,t){var n=this,r=e.hostModel;this.childAt(0).updateData(e,t);var i=this.childAt(1),a=e.getItemModel(t),s=e.getItemVisual(t,"symbol"),u=Fs(e.getItemVisual(t,"symbolSize")),c=e.getItemVisual(t,"style"),h=c&&c.fill,p=a.getModel("emphasis");i.setScale(u),i.traverse(function(e){e.setStyle("fill",h)});var f=Fl(e.getItemVisual(t,"symbolOffset"),u);f&&(i.x=f[0],i.y=f[1]);var v=e.getItemVisual(t,"symbolRotate");i.rotation=(v||0)*Math.PI/180||0;var y={};y.showEffectOn=r.get("showEffectOn"),y.rippleScale=a.get(["rippleEffect","scale"]),y.brushType=a.get(["rippleEffect","brushType"]),y.period=1e3*a.get(["rippleEffect","period"]),y.effectOffset=t/e.count(),y.z=r.getShallow("z")||0,y.zlevel=r.getShallow("zlevel")||0,y.symbolType=s,y.color=h,y.rippleEffectColor=a.get(["rippleEffect","color"]),y.rippleNumber=a.get(["rippleEffect","number"]),"render"===y.showEffectOn?(this._effectCfg?this.updateEffectAnimation(y):this.startEffectAnimation(y),this._effectCfg=y):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(e){"emphasis"===e?"render"!==y.showEffectOn&&n.startEffectAnimation(y):"normal"===e&&"render"!==y.showEffectOn&&n.stopEffectAnimation()}),this._effectCfg=y,PU(this,p.get("focus"),p.get("blurScope"),p.get("disabled"))},t.prototype.fadeOut=function(e){e&&e()},t}(ES),qB=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.init=function(){this._symbolDraw=new G9(qk)},t.prototype.render=function(e,t,n){var r=e.getData(),i=this._symbolDraw;i.updateData(r,{clipShape:this._getClipShape(e)}),this.group.add(i.group)},t.prototype._getClipShape=function(e){var t=e.coordinateSystem,n=t&&t.getArea&&t.getArea();return e.get("clip",!0)?n:null},t.prototype.updateTransform=function(e,t,n){var r=e.getData();this.group.dirty();var i=Vb("").reset(e,t,n);i.progress&&i.progress({start:0,end:r.count(),count:r.count()},r),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(e){var t=e.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=A3(t.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(Nv),qN=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return wJ(t,e),t.prototype.getInitialData=function(e,t){return z6(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(e,t,n){return n.point(t.getItemLayout(e))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t}(kD),qF=function(e){function t(t,n,r){var i=e.call(this)||this;return i.add(i.createLine(t,n,r)),i._updateEffectSymbol(t,n),i}return wJ(t,e),t.prototype.createLine=function(e,t,n){return new Js(e,t,n)},t.prototype._updateEffectSymbol=function(e,t){var n=e.getItemModel(t).getModel("effect"),r=n.get("symbolSize"),i=n.get("symbol");!MI(r)&&(r=[r,r]);var a=e.getItemVisual(t,"style"),s=n.get("color")||a&&a.stroke,u=this.childAt(1);if(this._symbolType!==i&&(this.remove(u),(u=Fo(i,-.5,-.5,1,1,s)).z2=100,u.culling=!0,this.add(u)),!!u)u.setStyle("shadowColor",s),u.setStyle(n.getItemStyle(["color"])),u.scaleX=r[0],u.scaleY=r[1],u.setColor(s),this._symbolType=i,this._symbolScale=r,this._updateEffectAnimation(e,n,t)},t.prototype._updateEffectAnimation=function(e,t,n){var r=this.childAt(1);if(!!r){var i=e.getItemLayout(n),a=1e3*t.get("period"),s=t.get("loop"),u=t.get("roundTrip"),c=t.get("constantSpeed"),h=MG(t.get("delay"),function(t){return t/e.count()*a/3});if(r.ignore=!0,this._updateAnimationPoints(r,i),c>0&&(a=this._getLineLength(r)/c*1e3),a!==this._period||s!==this._loop||u!==this._roundTrip){r.stopAnimation();var p=void 0;p=MD(h)?h(n):h,r.__t>0&&(p=-a*r.__t),this._animateSymbol(r,a,p,s,u)}this._period=a,this._loop=s,this._roundTrip=u}},t.prototype._animateSymbol=function(e,t,n,r,i){if(t>0){e.__t=0;var a=this,s=e.animate("",r).when(i?2*t:t,{__t:i?2:1}).delay(n).during(function(){a._updateSymbolPosition(e)});!r&&s.done(function(){a.remove(e)}),s.start()}},t.prototype._getLineLength=function(e){return Ag(e.__p1,e.__cp1)+Ag(e.__cp1,e.__p2)},t.prototype._updateAnimationPoints=function(e,t){e.__p1=t[0],e.__p2=t[1],e.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},t.prototype.updateData=function(e,t,n){this.childAt(0).updateData(e,t,n),this._updateEffectSymbol(e,t)},t.prototype._updateSymbolPosition=function(e){var t=e.__p1,n=e.__p2,r=e.__cp1,i=e.__t<1?e.__t:2-e.__t,a=[e.x,e.y],s=a.slice();a[0]=CF(t[0],r[0],n[0],i),a[1]=CF(t[1],r[1],n[1],i);var u=e.__t<1?Cz(t[0],r[0],n[0],i):Cz(n[0],r[0],t[0],1-i),c=e.__t<1?Cz(t[1],r[1],n[1],i):Cz(n[1],r[1],t[1],1-i);e.rotation=-Math.atan2(c,u)-Math.PI/2,("line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)&&(void 0!==e.__lastT&&e.__lastT<e.__t?(e.scaleY=1.05*Ag(s,a),1===i&&(a[0]=s[0]+(a[0]-s[0])/2,a[1]=s[1]+(a[1]-s[1])/2)):1===e.__lastT?e.scaleY=2*Ag(t,a):e.scaleY=this._symbolScale[1]),e.__lastT=e.__t,e.ignore=!1,e.x=a[0],e.y=a[1]},t.prototype.updateLayout=function(e,t){this.childAt(0).updateLayout(e,t);var n=e.getItemModel(t).getModel("effect");this._updateEffectAnimation(e,n,t)},t}(ES),qz=function(e){function t(t,n,r){var i=e.call(this)||this;return i._createPolyline(t,n,r),i}return wJ(t,e),t.prototype._createPolyline=function(e,t,n){var r=new B_({shape:{points:e.getItemLayout(t)}});this.add(r),this._updateCommonStl(e,t,n)},t.prototype.updateData=function(e,t,n){var r=e.hostModel;PQ(this.childAt(0),{shape:{points:e.getItemLayout(t)}},r,t),this._updateCommonStl(e,t,n)},t.prototype._updateCommonStl=function(e,t,n){var r=this.childAt(0),i=e.getItemModel(t),a=n&&n.emphasisLineStyle,s=n&&n.focus,u=n&&n.blurScope,c=n&&n.emphasisDisabled;if(!n||e.hasItemOption){var h=i.getModel("emphasis");a=h.getModel("lineStyle").getLineStyle(),c=h.get("disabled"),s=h.get("focus"),u=h.get("blurScope")}r.useStyle(e.getItemVisual(t,"style")),r.style.fill=null,r.style.strokeNoScale=!0,r.ensureState("emphasis").style=a,PU(this,s,u,c)},t.prototype.updateLayout=function(e,t){this.childAt(0).setShape("points",e.getItemLayout(t))},t}(ES),qU=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lastFrame=0,t._lastFramePercent=0,t}return wJ(t,e),t.prototype.createLine=function(e,t,n){return new qz(e,t,n)},t.prototype._updateAnimationPoints=function(e,t){this._points=t;for(var n=[0],r=0,i=1;i<t.length;i++)r+=Ag(t[i-1],t[i]),n.push(r);if(0===r){this._length=0;return}for(var i=0;i<n.length;i++)n[i]/=r;this._offsets=n,this._length=r},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(e){var t,n,r=e.__t<1?e.__t:2-e.__t,i=this._points,a=this._offsets,s=i.length;if(!!a){var u=this._lastFrame;if(r<this._lastFramePercent){;for(n=Math.min(u+1,s-1);n>=0&&!(a[n]<=r);n--);n=Math.min(n,s-2)}else{for(n=u;n<s&&!(a[n]>r);n++);n=Math.min(n-1,s-2)}var c=(r-a[n])/(a[n+1]-a[n]),h=i[n],p=i[n+1];e.x=h[0]*(1-c)+c*p[0],e.y=h[1]*(1-c)+c*p[1];var f=e.__t<1?p[0]-h[0]:h[0]-p[0],v=e.__t<1?p[1]-h[1]:h[1]-p[1];e.rotation=-Math.atan2(v,f)-Math.PI/2,this._lastFrame=n,this._lastFramePercent=r,e.ignore=!1}},t}(qF),qH=function(){this.polyline=!1,this.curveness=0,this.segs=[]},qG=function(e){function t(t){var n=e.call(this,t)||this;return n._off=0,n.hoverDataIdx=-1,n}return wJ(t,e),t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new qH},t.prototype.buildPath=function(e,t){var n,r=t.segs,i=t.curveness;if(t.polyline)for(n=this._off;n<r.length;){var a=r[n++];if(a>0){e.moveTo(r[n++],r[n++]);for(var s=1;s<a;s++)e.lineTo(r[n++],r[n++])}}else for(n=this._off;n<r.length;){var u=r[n++],c=r[n++],h=r[n++],p=r[n++];if(e.moveTo(u,c),i>0){var f=(u+h)/2-(c-p)*i,v=(c+p)/2-(h-u)*i;e.quadraticCurveTo(f,v,h,p)}else e.lineTo(h,p)}this.incremental&&(this._off=n,this.notClear=!0)},t.prototype.findDataIndex=function(e,t){var n=this.shape,r=n.segs,i=n.curveness,a=this.style.lineWidth;if(n.polyline){for(var s=0,u=0;u<r.length;){var c=r[u++];if(c>0){for(var h=r[u++],p=r[u++],f=1;f<c;f++){var v=r[u++],y=r[u++];if(Dy(h,p,v,y,a,e,t))return s}}s++}}else{for(var s=0,u=0;u<r.length;){var h=r[u++],p=r[u++],v=r[u++],y=r[u++];if(i>0){var _=(h+v)/2-(p-y)*i,x=(p+y)/2-(v-h)*i;if(D_(h,p,_,x,v,y,a,e,t))return s}else if(Dy(h,p,v,y,a,e,t))return s;s++}}return -1},t.prototype.contain=function(e,t){var n=this.transformCoordToLocal(e,t),r=this.getBoundingRect();return(e=n[0],t=n[1],r.contain(e,t))?(this.hoverDataIdx=this.findDataIndex(e,t))>=0:(this.hoverDataIdx=-1,!1)},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var t=this.shape.segs,n=1/0,r=1/0,i=-1/0,a=-1/0,s=0;s<t.length;){var u=t[s++],c=t[s++];n=Math.min(u,n),i=Math.max(u,i),r=Math.min(c,r),a=Math.max(c,a)}e=this._rect=new Cr(n,r,i,a)}return e},t}(DR),qV=function(){function e(){this.group=new ES}return e.prototype.updateData=function(e){this._clear();var t=this._create();t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e)},e.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clear()},e.prototype.incrementalUpdate=function(e,t){var n=this._newAdded[0],r=t.getLayout("linesPoints"),i=n&&n.shape.segs;if(i&&i.length<2e4){var a=i.length,s=new Float32Array(a+r.length);s.set(i),s.set(r,a),n.setShape({segs:s})}else{this._newAdded=[];var u=this._create();u.incremental=!0,u.setShape({segs:r}),this._setCommon(u,t),u.__startIndex=e.start}},e.prototype.remove=function(){this._clear()},e.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},e.prototype._create=function(){var e=new qG({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(e),this.group.add(e),e},e.prototype._setCommon=function(e,t,n){var r=t.hostModel;e.setShape({polyline:r.get("polyline"),curveness:r.get(["lineStyle","curveness"])}),e.useStyle(r.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var i=t.getVisual("style");i&&i.stroke&&e.setStyle("stroke",i.stroke),e.setStyle("fill",null);var a=D7(e);a.seriesIndex=r.seriesIndex,e.on("mousemove",function(t){a.dataIndex=null;var n=e.hoverDataIdx;n>0&&(a.dataIndex=n+e.__startIndex)})},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),qW={seriesType:"lines",plan:kL(),reset:function(e){var t=e.coordinateSystem;if(!!t){var n=e.get("polyline"),r=e.pipelineContext.large;return{progress:function(i,a){var s=[];if(r){var u=void 0,c=i.end-i.start;if(n){for(var h=0,p=i.start;p<i.end;p++)h+=e.getLineCoordsCount(p);u=new Float32Array(c+2*h)}else u=new Float32Array(4*c);for(var f=0,v=[],p=i.start;p<i.end;p++){var y=e.getLineCoords(p,s);n&&(u[f++]=y);for(var _=0;_<y;_++)v=t.dataToPoint(s[_],!1,v),u[f++]=v[0],u[f++]=v[1]}a.setLayout("linesPoints",u)}else for(var p=i.start;p<i.end;p++){var x=a.getItemModel(p),y=e.getLineCoords(p,s),b=[];if(n)for(var S=0;S<y;S++)b.push(t.dataToPoint(s[S]));else{b[0]=t.dataToPoint(s[0]),b[1]=t.dataToPoint(s[1]);var w=x.get(["lineStyle","curveness"]);+w&&(b[2]=[(b[0][0]+b[1][0])/2-(b[0][1]-b[1][1])*w,(b[0][1]+b[1][1])/2-(b[1][0]-b[0][0])*w])}a.setItemLayout(p,b)}}}}}},qj=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.render=function(e,t,n){var r=e.getData(),i=this._updateLineDraw(r,e),a=e.get("zlevel"),s=e.get(["effect","trailLength"]),u=n.getZr(),c="svg"===u.painter.getType();!c&&u.painter.getLayer(a).clear(!0),null!=this._lastZlevel&&!c&&u.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&s>0&&(c||u.configLayer(a,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(s/10+.9,1),0)})),i.updateData(r);var h=e.get("clip",!0)&&Vc(e.coordinateSystem,!1,e);h?this.group.setClipPath(h):this.group.removeClipPath(),this._lastZlevel=a,this._finished=!0},t.prototype.incrementalPrepareRender=function(e,t,n){var r=e.getData();this._updateLineDraw(r,e).incrementalPrepareUpdate(r),this._clearLayer(n),this._finished=!1},t.prototype.incrementalRender=function(e,t,n){this._lineDraw.incrementalUpdate(e,t.getData()),this._finished=e.end===t.getData().count()},t.prototype.eachRendered=function(e){this._lineDraw&&this._lineDraw.eachRendered(e)},t.prototype.updateTransform=function(e,t,n){var r=e.getData(),i=e.pipelineContext;if(!this._finished||i.large||i.progressiveRender)return{update:!0};var a=qW.reset(e,t,n);a.progress&&a.progress({start:0,end:r.count(),count:r.count()},r),this._lineDraw.updateLayout(),this._clearLayer(n)},t.prototype._updateLineDraw=function(e,t){var n=this._lineDraw,r=this._showEffect(t),i=!!t.get("polyline"),a=t.pipelineContext.large;return(!n||r!==this._hasEffet||i!==this._isPolyline||a!==this._isLargeDraw)&&(n&&n.remove(),n=this._lineDraw=a?new qV:new Jl(i?r?qU:qz:r?qF:Js),this._hasEffet=r,this._isPolyline=i,this._isLargeDraw=a),this.group.add(n.group),n},t.prototype._showEffect=function(e){return!!e.get(["effect","show"])},t.prototype._clearLayer=function(e){var t=e.getZr();"svg"!==t.painter.getType()&&null!=this._lastZlevel&&t.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(e,t){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(t)},t.prototype.dispose=function(e,t){this.remove(e,t)},t.type="lines",t}(Nv),qX="undefined"==typeof Uint32Array?Array:Uint32Array,qY="undefined"==typeof Float64Array?Array:Float64Array;function qJ(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=MS(t,function(e){var t={coords:[e[0].coord,e[1].coord]};return e[0].name&&(t.fromName=e[0].name),e[1].name&&(t.toName=e[1].name),Mp([t,e[0],e[1]])}))}var qZ=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return wJ(t,e),t.prototype.init=function(t){t.data=t.data||[],qJ(t);var n=this._processFlatCoordsArray(t.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(t.data=new Float32Array(n.count)),e.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(t){if(qJ(t),t.data){var n=this._processFlatCoordsArray(t.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(t.data=new Float32Array(n.count))}e.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(e){var t=this._processFlatCoordsArray(e.data);t.flatCoords&&(this._flatCoords?(this._flatCoords=M2(this._flatCoords,t.flatCoords),this._flatCoordsOffset=M2(this._flatCoordsOffset,t.flatCoordsOffset)):(this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset),e.data=new Float32Array(t.count)),this.getRawData().appendData(e.data)},t.prototype._getCoordsFromItemModel=function(e){var t=this.getData().getItemModel(e),n=t.option instanceof Array?t.option:t.getShallow("coords");return n},t.prototype.getLineCoordsCount=function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},t.prototype.getLineCoords=function(e,t){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*e],r=this._flatCoordsOffset[2*e+1],i=0;i<r;i++)t[i]=t[i]||[],t[i][0]=this._flatCoords[n+2*i],t[i][1]=this._flatCoords[n+2*i+1];return r}for(var a=this._getCoordsFromItemModel(e),i=0;i<a.length;i++)t[i]=t[i]||[],t[i][0]=a[i][0],t[i][1]=a[i][1];return a.length},t.prototype._processFlatCoordsArray=function(e){var t=0;if(this._flatCoords&&(t=this._flatCoords.length),ML(e[0])){for(var n=e.length,r=new qX(n),i=new qY(n),a=0,s=0,u=0,c=0;c<n;){u++;var h=e[c++];r[s++]=a+t,r[s++]=h;for(var p=0;p<h;p++){var f=e[c++],v=e[c++];i[a++]=f,i[a++]=v}}return{flatCoordsOffset:new Uint32Array(r.buffer,0,s),flatCoords:i,count:u}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},t.prototype.getInitialData=function(e,t){var n=new zK(["value"],this);return n.hasItemOption=!1,n.initData(e.data,[],function(e,t,r,i){if(e instanceof Array)return NaN;n.hasItemOption=!0;var a=e.value;if(null!=a)return a instanceof Array?a[i]:a}),n},t.prototype.formatTooltip=function(e,t,n){var r=this.getData().getItemModel(e),i=r.get("name");if(i)return i;var a=r.get("fromName"),s=r.get("toName"),u=[];return null!=a&&u.push(a),null!=s&&u.push(s),ks("nameValue",{name:u.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var e=this.option.progressive;return null==e?this.option.large?1e4:this.get("progressive"):e},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?2e4:this.get("progressiveThreshold"):e},t.prototype.getZLevelKey=function(){var e=this.getModel("effect"),t=e.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:e.get("show")&&t>0?t+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(kD);function qq(e){return!(e instanceof Array)&&(e=[e,e]),e}let qK={seriesType:"lines",reset:function(e){var t=qq(e.get("symbol")),n=qq(e.get("symbolSize")),r=e.getData();return r.setVisual("fromSymbol",t&&t[0]),r.setVisual("toSymbol",t&&t[1]),r.setVisual("fromSymbolSize",n&&n[0]),r.setVisual("toSymbolSize",n&&n[1]),{dataEach:r.hasItemOption?function(e,t){var n=e.getItemModel(t),r=qq(n.getShallow("symbol",!0)),i=qq(n.getShallow("symbolSize",!0));r[0]&&e.setItemVisual(t,"fromSymbol",r[0]),r[1]&&e.setItemVisual(t,"toSymbol",r[1]),i[0]&&e.setItemVisual(t,"fromSymbolSize",i[0]),i[1]&&e.setItemVisual(t,"toSymbolSize",i[1])}:null}}};var qQ=function(){function e(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=w4.createCanvas();this.canvas=e}return e.prototype.update=function(e,t,n,r,i,a){var s=this._getBrush(),u=this._getGradient(i,"inRange"),c=this._getGradient(i,"outOfRange"),h=this.pointSize+this.blurSize,p=this.canvas,f=p.getContext("2d"),v=e.length;p.width=t,p.height=n;for(var y=0;y<v;++y){var _=e[y],x=_[0],b=_[1],S=r(_[2]);f.globalAlpha=S,f.drawImage(s,x-h,b-h)}if(!p.width||!p.height)return p;for(var w=f.getImageData(0,0,p.width,p.height),M=w.data,A=0,C=M.length,T=this.minOpacity,I=this.maxOpacity-T;A<C;){var S=M[A+3]/256,D=4*Math.floor(255*S);if(S>0){var P=a(S)?u:c;S>0&&(S=S*I+T),M[A++]=P[D],M[A++]=P[D+1],M[A++]=P[D+2],M[A++]=P[D+3]*S*256}else A+=4}return f.putImageData(w,0,0),p},e.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=w4.createCanvas()),t=this.pointSize+this.blurSize,n=2*t;e.width=n,e.height=n;var r=e.getContext("2d");return r.clearRect(0,0,n,n),r.shadowOffsetX=n,r.shadowBlur=this.blurSize,r.shadowColor="#000",r.beginPath(),r.arc(-t,t,this.pointSize,0,2*Math.PI,!0),r.closePath(),r.fill(),e},e.prototype._getGradient=function(e,t){for(var n=this._gradientPixels,r=n[t]||(n[t]=new Uint8ClampedArray(1024)),i=[0,0,0,0],a=0,s=0;s<256;s++)e[t](s/255,!0,i),r[a++]=i[0],r[a++]=i[1],r[a++]=i[2],r[a++]=i[3];return r},e}();function q$(e){var t=e.dimensions;return"lng"===t[0]&&"lat"===t[1]}var q0=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.render=function(e,t,n){t.eachComponent("visualMap",function(t){t.eachTargetSeries(function(n){n===e&&(r=t)})});this._progressiveEls=null,this.group.removeAll();var r,i=e.coordinateSystem;"cartesian2d"===i.type||"calendar"===i.type?this._renderOnCartesianAndCalendar(e,n,0,e.getData().count()):q$(i)&&this._renderOnGeo(i,e,r,n)},t.prototype.incrementalPrepareRender=function(e,t,n){this.group.removeAll()},t.prototype.incrementalRender=function(e,t,n,r){var i=t.coordinateSystem;i&&(q$(i)?this.render(t,n,r):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(t,r,e.start,e.end,!0)))},t.prototype.eachRendered=function(e){Nl(this._progressiveEls||this.group,e)},t.prototype._renderOnCartesianAndCalendar=function(e,t,n,r,i){var a,s,u,c,h=e.coordinateSystem,p=Vh(h,"cartesian2d");if(p){var f=h.getAxis("x"),v=h.getAxis("y");a=f.getBandWidth()+.5,s=v.getBandWidth()+.5,u=f.scale.getExtent(),c=v.scale.getExtent()}for(var y=this.group,_=e.getData(),x=e.getModel(["emphasis","itemStyle"]).getItemStyle(),b=e.getModel(["blur","itemStyle"]).getItemStyle(),S=e.getModel(["select","itemStyle"]).getItemStyle(),w=e.get(["itemStyle","borderRadius"]),M=P7(e),A=e.getModel("emphasis"),C=A.get("focus"),T=A.get("blurScope"),I=A.get("disabled"),D=p?[_.mapDimension("x"),_.mapDimension("y"),_.mapDimension("value")]:[_.mapDimension("time"),_.mapDimension("value")],P=n;P<r;P++){var R=void 0,L=_.getItemVisual(P,"style");if(p){var O=_.get(D[0],P),k=_.get(D[1],P);if(isNaN(_.get(D[2],P))||isNaN(O)||isNaN(k)||O<u[0]||O>u[1]||k<c[0]||k>c[1])continue;var B=h.dataToPoint([O,k]);R=new DX({shape:{x:B[0]-a/2,y:B[1]-s/2,width:a,height:s},style:L})}else{if(isNaN(_.get(D[1],P)))continue;R=new DX({z2:1,shape:h.dataToRect([_.get(D[0],P)]).contentShape,style:L})}if(_.hasItemOption){var N=_.getItemModel(P),F=N.getModel("emphasis");x=F.getModel("itemStyle").getItemStyle(),b=N.getModel(["blur","itemStyle"]).getItemStyle(),S=N.getModel(["select","itemStyle"]).getItemStyle(),w=N.get(["itemStyle","borderRadius"]),C=F.get("focus"),T=F.get("blurScope"),I=F.get("disabled"),M=P7(N)}R.shape.r=w;var z=e.getRawValue(P),U="-";z&&null!=z[2]&&(U=z[2]+""),P8(R,M,{labelFetcher:e,labelDataIndex:P,defaultOpacity:L.opacity,defaultText:U}),R.ensureState("emphasis").style=x,R.ensureState("blur").style=b,R.ensureState("select").style=S,PU(R,C,T,I),R.incremental=i,i&&(R.states.emphasis.hoverLayer=!0),y.add(R),_.setItemGraphicEl(P,R),this._progressiveEls&&this._progressiveEls.push(R)}},t.prototype._renderOnGeo=function(e,t,n,r){var i,a,s,u,c,h,p,f,v,y=n.targetVisuals.inRange,_=n.targetVisuals.outOfRange,x=t.getData(),b=this._hmLayer||this._hmLayer||new qQ;b.blurSize=t.get("blurSize"),b.pointSize=t.get("pointSize"),b.minOpacity=t.get("minOpacity"),b.maxOpacity=t.get("maxOpacity");var S=e.getViewRect().clone(),w=e.getRoamTransform();S.applyTransform(w);var M=Math.max(S.x,0),A=Math.max(S.y,0),C=Math.min(S.width+S.x,r.getWidth()),T=Math.min(S.height+S.y,r.getHeight()),I=C-M,D=T-A,P=[x.mapDimension("lng"),x.mapDimension("lat"),x.mapDimension("value")],R=x.mapArray(P,function(t,n,r){var i=e.dataToPoint([t,n]);return i[0]-=M,i[1]-=A,i.push(r),i}),L=n.getExtent();var O="visualMap.continuous"===n.type?(i=L,a=n.option.range,s=i[1]-i[0],a=[(a[0]-i[0])/s,(a[1]-i[0])/s],function(e){return e>=a[0]&&e<=a[1]}):(u=L,c=n.getPieceList(),h=n.option.selected,p=u[1]-u[0],f=(c=MS(c,function(e){return{interval:[(e.interval[0]-u[0])/p,(e.interval[1]-u[0])/p]}})).length,v=0,function(e){var t;for(t=v;t<f;t++){var n=c[t].interval;if(n[0]<=e&&e<=n[1]){v=t;break}}if(t===f)for(t=v-1;t>=0;t--){var n=c[t].interval;if(n[0]<=e&&e<=n[1]){v=t;break}}return t>=0&&t<f&&h[t]});b.update(R,I,D,y.color.getNormalizer(),{inRange:y.color.getColorMapper(),outOfRange:_.color.getColorMapper()},O);var k=new DF({style:{width:I,height:D,x:M,y:A,image:b.canvas},silent:!0});this.group.add(k)},t.type="heatmap",t}(Nv),q1=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.getInitialData=function(e,t){return z6(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var e=Lq.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(kD),q2=["itemStyle","borderWidth"],q3=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],q5=new k2,q4=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.render=function(e,t,n){var r=this.group,i=e.getData(),a=this._data,s=e.coordinateSystem,u=s.getBaseAxis().isHorizontal(),c=s.master.getRect(),h={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:e,coordSys:s,coordSysExtent:[[c.x,c.x+c.width],[c.y,c.y+c.height]],isHorizontal:u,valueDim:q3[+u],categoryDim:q3[1-+u]};i.diff(a).add(function(e){if(!!i.hasValue(e)){var t=Kr(i,e),n=q6(i,e,t,h),a=Ko(i,h,n);i.setItemGraphicEl(e,a),r.add(a),Kh(a,h,n)}}).update(function(e,t){var n=a.getItemGraphicEl(t);if(!i.hasValue(e)){r.remove(n);return}var s=Kr(i,e),u=q6(i,e,s,h),c=Kl(i,u);n&&c!==n.__pictorialShapeStr&&(r.remove(n),i.setItemGraphicEl(e,null),n=null),n?function(e,t,n){var r=n.animationModel,i=n.dataIndex;PQ(e.__pictorialBundle,{x:n.bundlePosition[0],y:n.bundlePosition[1]},r,i),n.symbolRepeat?q7(e,t,n,!0):Ke(e,t,n,!0),Kt(e,n,!0),Kn(e,t,n,!0)}(n,h,u):n=Ko(i,h,u,!0),i.setItemGraphicEl(e,n),n.__pictorialSymbolMeta=u,r.add(n),Kh(n,h,u)}).remove(function(e){var t=a.getItemGraphicEl(e);t&&Ks(a,e,t.__pictorialSymbolMeta.animationModel,t)}).execute();var p=e.get("clip",!0)?Vc(e.coordinateSystem,!1,e):null;return p?r.setClipPath(p):r.removeClipPath(),this._data=i,this.group},t.prototype.remove=function(e,t){var n=this.group,r=this._data;e.get("animation")?r&&r.eachItemGraphicEl(function(t){Ks(r,D7(t).dataIndex,e,t)}):n.removeAll()},t.type="pictorialBar",t}(Nv);function q6(e,t,n,r){var i=e.getItemLayout(t),a=n.get("symbolRepeat"),s=n.get("symbolClip"),u=n.get("symbolPosition")||"start",c=(n.get("symbolRotate")||0)*Math.PI/180||0,h=n.get("symbolPatternSize")||2,p=n.isAnimationEnabled(),f={dataIndex:t,layout:i,itemModel:n,symbolType:e.getItemVisual(t,"symbol")||"circle",style:e.getItemVisual(t,"style"),symbolClip:s,symbolRepeat:a,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:h,rotation:c,animationModel:p?n:null,hoverScale:p&&n.get(["emphasis","scale"]),z2:n.getShallow("z",!0)||0};(function(e,t,n,r,i){var a,s=r.valueDim,u=e.get("symbolBoundingData"),c=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),h=c.toGlobalCoord(c.dataToCoord(0)),p=1-+(n[s.wh]<=0);if(MI(u)){var f=[q9(c,u[0])-h,q9(c,u[1])-h];f[1]<f[0]&&f.reverse(),a=f[p]}else a=null!=u?q9(c,u)-h:t?r.coordSysExtent[s.index][p]-h:n[s.wh];i.boundingLength=a,t&&(i.repeatCutLength=n[s.wh]),i.pxSign=a>0?1:-1})(n,a,i,r,f),function(e,t,n,r,i,a,s,u,c,h){var p,f=c.valueDim,v=c.categoryDim,y=Math.abs(n[v.wh]),_=e.getItemVisual(t,"symbolSize");(p=MI(_)?_.slice():null==_?["100%","100%"]:[_,_])[v.index]=Ek(p[v.index],y),p[f.index]=Ek(p[f.index],r?y:Math.abs(a)),h.symbolSize=p;var x=h.symbolScale=[p[0]/u,p[1]/u];x[f.index]*=(c.isHorizontal?-1:1)*s}(e,t,i,a,s,f.boundingLength,f.pxSign,h,r,f),function(e,t,n,r,i){var a=e.get(q2)||0;a&&(q5.attr({scaleX:t[0],scaleY:t[1],rotation:n}),q5.updateTransform(),a/=q5.getLineScale(),a*=t[r.valueDim.index]),i.valueLineWidth=a||0}(n,f.symbolScale,c,r,f);var v=f.symbolSize,y=Fl(n.get("symbolOffset"),v);return function(e,t,n,r,i,a,s,u,c,h,p,f){var v=p.categoryDim,y=p.valueDim,_=f.pxSign,x=Math.max(t[y.index]+u,0),b=x;if(r){var S=Math.abs(c),w=MG(e.get("symbolMargin"),"15%")+"",M=!1;w.lastIndexOf("!")===w.length-1&&(M=!0,w=w.slice(0,w.length-1));var A=Ek(w,t[y.index]),C=Math.max(x+2*A,0),T=M?0:2*A,I=E0(r),D=I?r:Kd((S+T)/C);A=(S-D*x)/2/(M?D:Math.max(D-1,1)),C=x+2*A,T=M?0:2*A,!I&&"fixed"!==r&&(D=h?Kd((Math.abs(h)+T)/C):0),b=D*C-T,f.repeatTimes=D,f.symbolMargin=A}var P=b/2*_,R=f.pathPosition=[];R[v.index]=n[v.wh]/2,R[y.index]="start"===s?P:"end"===s?c-P:c/2,a&&(R[0]+=a[0],R[1]+=a[1]);var L=f.bundlePosition=[];L[v.index]=n[v.xy],L[y.index]=n[y.xy];var O=f.barRectShape=Mf({},n);O[y.wh]=_*Math.max(Math.abs(n[y.wh]),Math.abs(R[y.index]+P)),O[v.wh]=n[v.wh];var k=f.clipShape={};k[v.xy]=-n[v.xy],k[v.wh]=p.ecSize[v.wh],k[y.xy]=0,k[y.wh]=n[y.wh]}(n,v,i,a,s,y,u,f.valueLineWidth,f.boundingLength,f.repeatCutLength,r,f),f}function q9(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function q8(e){var t=e.symbolPatternSize,n=Fo(e.symbolType,-t/2,-t/2,t,t);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function q7(e,t,n,r){var i=e.__pictorialBundle,a=n.symbolSize,s=n.valueLineWidth,u=n.pathPosition,c=t.valueDim,h=n.repeatTimes||0,p=0,f=a[t.valueDim.index]+s+2*n.symbolMargin;for(Ku(e,function(e){e.__pictorialAnimationIndex=p,e.__pictorialRepeatTimes=h,p<h?Kc(e,null,_(p),n,r):Kc(e,null,{scaleX:0,scaleY:0},n,r,function(){i.remove(e)}),p++});p<h;p++){var v=q8(n);v.__pictorialAnimationIndex=p,v.__pictorialRepeatTimes=h,i.add(v);var y=_(p);Kc(v,{x:y.x,y:y.y,scaleX:0,scaleY:0},{scaleX:y.scaleX,scaleY:y.scaleY,rotation:y.rotation},n,r)}function _(e){var t=u.slice(),r=n.pxSign,i=e;return("start"===n.symbolRepeatDirection?r>0:r<0)&&(i=h-1-e),t[c.index]=f*(i-h/2+.5)+u[c.index],{x:t[0],y:t[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function Ke(e,t,n,r){var i=e.__pictorialBundle,a=e.__pictorialMainPath;a?Kc(a,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,r):(a=e.__pictorialMainPath=q8(n),i.add(a),Kc(a,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,r))}function Kt(e,t,n){var r=Mf({},t.barRectShape),i=e.__pictorialBarRect;i?Kc(i,null,{shape:r},t,n):((i=e.__pictorialBarRect=new DX({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,e.add(i))}function Kn(e,t,n,r){if(n.symbolClip){var i=e.__pictorialClipPath,a=Mf({},n.clipShape),s=t.valueDim,u=n.animationModel,c=n.dataIndex;if(i)PQ(i,{shape:a},u,c);else{a[s.wh]=0,i=new DX({shape:a}),e.__pictorialBundle.setClipPath(i),e.__pictorialClipPath=i;var h={};h[s.wh]=n.clipShape[s.wh],tf[r?"updateProps":"initProps"](i,{shape:h},u,c)}}}function Kr(e,t){var n=e.getItemModel(t);return n.getAnimationDelayParams=Ki,n.isAnimationEnabled=Ka,n}function Ki(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function Ka(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Ko(e,t,n,r){var i=new ES,a=new ES;return i.add(a),i.__pictorialBundle=a,a.x=n.bundlePosition[0],a.y=n.bundlePosition[1],n.symbolRepeat?q7(i,t,n):Ke(i,t,n),Kt(i,n,r),Kn(i,t,n,r),i.__pictorialShapeStr=Kl(e,n),i.__pictorialSymbolMeta=n,i}function Ks(e,t,n,r){var i=r.__pictorialBarRect;i&&i.removeTextContent();var a=[];Ku(r,function(e){a.push(e)}),r.__pictorialMainPath&&a.push(r.__pictorialMainPath),r.__pictorialClipPath&&(n=null),Mb(a,function(e){P1(e,{scaleX:0,scaleY:0},n,t,function(){r.parent&&r.parent.remove(r)})}),e.setItemGraphicEl(t,null)}function Kl(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function Ku(e,t,n){Mb(e.__pictorialBundle.children(),function(r){r!==e.__pictorialBarRect&&t.call(n,r)})}function Kc(e,t,n,r,i,a){t&&e.attr(t),r.symbolClip&&!i?n&&e.attr(n):n&&tf[i?"updateProps":"initProps"](e,n,r.animationModel,r.dataIndex,a)}function Kh(e,t,n){var r=n.dataIndex,i=n.itemModel,a=i.getModel("emphasis"),s=a.getModel("itemStyle").getItemStyle(),u=i.getModel(["blur","itemStyle"]).getItemStyle(),c=i.getModel(["select","itemStyle"]).getItemStyle(),h=i.getShallow("cursor"),p=a.get("focus"),f=a.get("blurScope"),v=a.get("scale");Ku(e,function(e){if(e instanceof DF){var t=e.style;e.useStyle(Mf({image:t.image,x:t.x,y:t.y,width:t.width,height:t.height},n.style))}else e.useStyle(n.style);var r=e.ensureState("emphasis");r.style=s,v&&(r.scaleX=1.1*e.scaleX,r.scaleY=1.1*e.scaleY),e.ensureState("blur").style=u,e.ensureState("select").style=c,h&&(e.cursor=h),e.z2=n.z2});var y=t.valueDim.posDesc[+(n.boundingLength>0)],_=e.__pictorialBarRect;_.ignoreClip=!0,P8(_,P7(i),{labelFetcher:t.seriesModel,labelDataIndex:r,defaultText:G0(t.seriesModel.getData(),r),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:y}),PU(e,p,f,a.get("disabled"))}function Kd(e){var t=Math.round(e);return 1e-4>Math.abs(e-t)?t:Math.ceil(e)}var Kp=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n.defaultSymbol="roundRect",n}return wJ(t,e),t.prototype.getInitialData=function(t){return t.stack=null,e.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=RM(VA.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),t}(VA),Kf=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._layers=[],n}return wJ(t,e),t.prototype.render=function(e,t,n){var r=e.getData(),i=this,a=this.group,s=e.getLayerSeries(),u=r.getLayout("layoutInfo"),c=u.rect,h=u.boundaryGap;function p(e){return e.name}a.x=0,a.y=c.y+h[0];var f=new zO(this._layersSeries||[],s,p,p),v=[];function y(t,n,u){var c,h,p=i._layers;if("remove"===t){a.remove(p[n]);return}for(var f=[],y=[],_=s[n].indices,x=0;x<_.length;x++){var b=r.getItemLayout(_[x]),S=b.x,w=b.y0,M=b.y;f.push(S,w),y.push(S,w+M),c=r.getItemVisual(_[x],"style")}var A=r.getItemLayout(_[0]),C=e.getModel("label").get("margin"),T=e.getModel("emphasis");if("add"===t){var I=v[n]=new ES;h=new Vs({shape:{points:f,stackedOnPoints:y,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),I.add(h),a.add(I),e.isAnimationEnabled()&&h.setClipPath(function(e,t,n){var r=new DX({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return P$(r,{shape:{x:e.x-50,width:e.width+100,height:e.height+20}},t,n),r}(h.getBoundingRect(),e,function(){h.removeClipPath()}))}else{var I=p[u];h=I.childAt(0),a.add(I),v[n]=I,PQ(h,{shape:{points:f,stackedOnPoints:y}},e),P5(h)}P8(h,P7(e),{labelDataIndex:_[x-1],defaultText:r.getName(_[x-1]),inheritColor:c.fill},{normal:{verticalAlign:"middle"}}),h.setTextConfig({position:null,local:!0});var D=h.getTextContent();D&&(D.x=A.x-C,D.y=A.y0+A.y/2),h.useStyle(c),r.setItemGraphicEl(n,h),PW(h,e),PU(h,T.get("focus"),T.get("blurScope"),T.get("disabled"))}f.add(MT(y,this,"add")).update(MT(y,this,"update")).remove(MT(y,this,"remove")).execute(),this._layersSeries=s,this._layers=v},t.type="themeRiver",t}(Nv),Kg=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new We(MT(this.getData,this),MT(this.getRawData,this))},t.prototype.fixData=function(e){var t=e.length,n={},r=Ig(e,function(e){return!n.hasOwnProperty(e[0]+"")&&(n[e[0]+""]=-1),e[2]}),i=[];r.buckets.each(function(e,t){i.push({name:t,dataList:e})});for(var a=i.length,s=0;s<a;++s){for(var u=i[s].name,c=0;c<i[s].dataList.length;++c){var h=i[s].dataList[c][0]+"";n[h]=s}for(var h in n)n.hasOwnProperty(h)&&n[h]!==s&&(n[h]=s,e[t]=[h,0,u],t++)}return e},t.prototype.getInitialData=function(e,t){for(var n=this.getReferringComponents("singleAxis",Ih).models[0].get("type"),r=MM(e.data,function(e){return void 0!==e[2]}),i=this.fixData(r||[]),a=[],s=this.nameMap=M1(),u=0,c=0;c<i.length;++c)a.push(i[c][2]),!s.get(i[c][2])&&(s.set(i[c][2],u),u++);var h=new zK(z$(i,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:zN(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,this);return h.initData(i),h},t.prototype.getLayerSeries=function(){for(var e=this.getData(),t=e.count(),n=[],r=0;r<t;++r)n[r]=r;var i=e.mapDimension("single"),a=Ig(n,function(t){return e.get("name",t)}),s=[];return a.buckets.each(function(t,n){t.sort(function(t,n){return e.get(i,t)-e.get(i,n)}),s.push({name:n,indices:t})}),s},t.prototype.getAxisTooltipData=function(e,t,n){!MI(e)&&(e=e?[e]:[]);for(var r,i=this.getData(),a=this.getLayerSeries(),s=[],u=a.length,c=0;c<u;++c){for(var h=Number.MAX_VALUE,p=-1,f=a[c].indices.length,v=0;v<f;++v){var y=i.get(e[0],a[c].indices[v]),_=Math.abs(y-t);_<=h&&(r=y,h=_,p=a[c].indices[v])}s.push(p)}return{dataIndices:s,nestestValue:r}},t.prototype.formatTooltip=function(e,t,n){var r=this.getData();return ks("nameValue",{name:r.getName(e),value:r.get(r.mapDimension("value"),e)})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(kD);function Km(e,t){e.eachSeriesByType("themeRiver",function(e){var t=e.getData(),n=e.coordinateSystem,r={},i=n.getRect();r.rect=i;var a=e.get("boundaryGap"),s=n.getAxis();r.boundaryGap=a,"horizontal"===s.orient?(a[0]=Ek(a[0],i.height),a[1]=Ek(a[1],i.height),Kv(t,e,i.height-a[0]-a[1])):(a[0]=Ek(a[0],i.width),a[1]=Ek(a[1],i.width),Kv(t,e,i.width-a[0]-a[1])),t.setLayout("layoutInfo",r)})}function Kv(e,t,n){if(!!e.count())for(var r,i=t.coordinateSystem,a=t.getLayerSeries(),s=e.mapDimension("single"),u=e.mapDimension("value"),c=MS(a,function(t){return MS(t.indices,function(t){var n=i.dataToPoint(e.get(s,t));return n[1]=e.get(u,t),n})}),h=function(e){for(var t=e.length,n=e[0].length,r=[],i=[],a=0,s=0;s<n;++s){for(var u=0,c=0;c<t;++c)u+=e[c][s][1];u>a&&(a=u),r.push(u)}for(var h=0;h<n;++h)i[h]=(a-r[h])/2;a=0;for(var p=0;p<n;++p){var f=r[p]+i[p];f>a&&(a=f)}return{y0:i,max:a}}(c),p=h.y0,f=n/h.max,v=a.length,y=a[0].indices.length,_=0;_<y;++_){r=p[_]*f,e.setItemLayout(a[0].indices[_],{layerIndex:0,x:c[0][_][0],y0:r,y:c[0][_][1]*f});for(var x=1;x<v;++x)r+=c[x-1][_][1]*f,e.setItemLayout(a[x].indices[_],{layerIndex:x,x:c[x][_][0],y0:r,y:c[x][_][1]*f})}}var Ky=function(e){function t(t,n,r,i){var a=e.call(this)||this;a.z2=2,a.textConfig={inside:!0},D7(a).seriesIndex=n.seriesIndex;var s=new D8({z2:4,silent:t.getModel().get(["label","silent"])});return a.setTextContent(s),a.updateData(!0,t,n,r,i),a}return wJ(t,e),t.prototype.updateData=function(e,t,n,r,i){this.node=t,t.piece=this,n=n||this._seriesModel,r=r||this._ecModel;var a=this;D7(a).dataIndex=t.dataIndex;var s=t.getModel(),u=s.getModel("emphasis"),c=t.getLayout(),h=Mf({},c);h.label=null;var p=t.getVisual("style");p.lineJoin="bevel";var f=t.getVisual("decal");f&&(p.decal=FL(f,i));var v=VP(s.getModel("itemStyle"),h,!0);Mf(h,v),Mb(Pa,function(e){var t=a.ensureState(e),n=s.getModel([e,"itemStyle"]);t.style=n.getItemStyle();var r=VP(n,h);r&&(t.shape=r)}),e?(a.setShape(h),a.shape.r=c.r0,P$(a,{shape:{r:c.r}},n,t.dataIndex)):(PQ(a,{shape:h},n),P5(a)),a.useStyle(p),this._updateLabel(n);var y=s.getShallow("cursor");y&&a.attr("cursor",y),this._seriesModel=n||this._seriesModel,this._ecModel=r||this._ecModel;var _=u.get("focus");PU(this,"ancestor"===_?t.getAncestorsIndices():"descendant"===_?t.getDescendantIndices():_,u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(e){var t=this,n=this.node.getModel(),r=n.getModel("label"),i=this.node.getLayout(),a=i.endAngle-i.startAngle,s=(i.startAngle+i.endAngle)/2,u=Math.cos(s),c=Math.sin(s),h=this,p=h.getTextContent(),f=this.node.dataIndex,v=r.get("minAngle")/180*Math.PI,y=r.get("show")&&!(null!=v&&Math.abs(a)<v);function _(e,t){var n=e.get(t);return null==n?r.get(t):n}p.ignore=!y,Mb(Po,function(r){var v,y="normal"===r?n.getModel("label"):n.getModel([r,"label"]),x="normal"===r,b=x?p:p.ensureState(r),S=e.getFormattedLabel(f,r);x&&(S=S||t.node.name),b.style=Re(y,{},null,"normal"!==r,!0),S&&(b.style.text=S);var w=y.get("show");null!=w&&!x&&(b.ignore=!w);var M=_(y,"position"),A=x?h:h.states[r],C=A.style.fill;A.textConfig={outsideFill:"inherit"===y.get("color")?C:null,inside:"outside"!==M};var T=_(y,"distance")||0,I=_(y,"align"),D=_(y,"rotate"),P=.5*Math.PI,R=1.5*Math.PI,L=Db("tangential"===D?Math.PI/2-s:s),O=L>P&&!Ej(L-P)&&L<R;"outside"===M?(v=i.r+T,I=O?"right":"left"):I&&"center"!==I?"left"===I?(v=i.r0+T,I=O?"right":"left"):"right"===I&&(v=i.r-T,I=O?"left":"right"):(v=a===2*Math.PI&&0===i.r0?0:(i.r+i.r0)/2,I="center"),b.style.align=I,b.style.verticalAlign=_(y,"verticalAlign")||"middle",b.x=v*u+i.cx,b.y=v*c+i.cy;var k=0;"radial"===D?k=Db(-s)+(O?Math.PI:0):"tangential"===D?k=Db(Math.PI/2-s)+(O?Math.PI:0):ML(D)&&(k=D*Math.PI/180),b.rotation=Db(k)}),p.dirtyStyle()},t}(Bu),K_="sunburstRootToNode",Kx="sunburstHighlight",Kb=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.render=function(e,t,n,r){var i=this;this.seriesModel=e,this.api=n,this.ecModel=t;var a=e.getData(),s=a.tree.root,u=e.getViewRoot(),c=this.group,h=e.get("renderLabelForZeroData"),p=[];u.eachNode(function(e){p.push(e)}),function(r,i){if(0!==r.length||0!==i.length)new zO(i,r,u,u).add(p).update(p).remove(ME(p,null)).execute();function u(e){return e.getId()}function p(u,p){(function(r,i){if(!h&&r&&!r.getValue()&&(r=null),r!==s&&i!==s){if(i&&i.piece)r?(i.piece.updateData(!1,r,e,t,n),a.setItemGraphicEl(r.dataIndex,i.piece)):function(e){if(!!e)e.piece&&(c.remove(e.piece),e.piece=null)}(i);else if(r){var u=new Ky(r,e,t,n);c.add(u),a.setItemGraphicEl(r.dataIndex,u)}}})(null==u?null:r[u],null==p?null:i[p])}}(p,this._oldChildren||[]),function(r,a){a.depth>0?(i.virtualPiece?i.virtualPiece.updateData(!1,r,e,t,n):(i.virtualPiece=new Ky(r,e,t,n),c.add(i.virtualPiece)),a.piece.off("click"),i.virtualPiece.on("click",function(e){i._rootToNode(a.parentNode)})):i.virtualPiece&&(c.remove(i.virtualPiece),i.virtualPiece=null)}(s,u),this._initEvents(),this._oldChildren=p},t.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",function(t){var n=!1;e.seriesModel.getViewRoot().eachNode(function(r){if(!n&&r.piece&&r.piece===t.target){var i=r.getModel().get("nodeClick");if("rootToNode"===i)e._rootToNode(r);else if("link"===i){var a=r.getModel(),s=a.get("link");s&&Li(s,a.get("target",!0)||"_blank")}n=!0}})})},t.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:K_,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},t.prototype.containPoint=function(e,t){var n=t.getData().getItemLayout(0);if(n){var r=e[0]-n.cx,i=e[1]-n.cy,a=Math.sqrt(r*r+i*i);return a<=n.r&&a>=n.r0}},t.type="sunburst",t}(Nv),KS=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.ignoreStyleOnData=!0,n}return wJ(t,e),t.prototype.getInitialData=function(e,t){var n={name:e.name,children:e.data};(function e(t){var n=0;Mb(t.children,function(t){e(t);var r=t.value;MI(r)&&(r=r[0]),n+=r});var r=t.value;MI(r)&&(r=r[0]),(null==r||isNaN(r))&&(r=n),r<0&&(r=0),MI(t.value)?t.value[0]=r:t.value=r})(n);var r=this._levelModels=MS(e.levels||[],function(e){return new Rb(e,this,t)},this),i=XY.createTree(n,this,function(e){e.wrapMethod("getItemModel",function(e,t){var n=r[i.getNodeByDataIndex(t).depth];return n&&(e.parentModel=n),e})});return i.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(t){var n=e.prototype.getDataParams.apply(this,arguments),r=this.getData().tree.getNodeByDataIndex(t);return n.treePathInfo=XK(r,this),n},t.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;(!e||e!==t&&!t.contains(e))&&(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){X3(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(kD),Kw=Math.PI/180;function KM(e,t,n){t.eachSeriesByType(e,function(e){var t=e.get("center"),r=e.get("radius");!MI(r)&&(r=[0,r]),!MI(t)&&(t=[t,t]);var i=n.getWidth(),a=n.getHeight(),s=Math.min(i,a),u=Ek(t[0],i),c=Ek(t[1],a),h=Ek(r[0],s/2),p=Ek(r[1],s/2),f=-e.get("startAngle")*Kw,v=e.get("minAngle")*Kw,y=e.getData().tree.root,_=e.getViewRoot(),x=_.depth,b=e.get("sort");null!=b&&function e(t,n){var r=t.children||[];t.children=function(e,t){if(MD(t)){var n=MS(e,function(e,t){var n=e.getValue();return{params:{depth:e.depth,height:e.height,dataIndex:e.dataIndex,getValue:function(){return n}},index:t}});return n.sort(function(e,n){return t(e.params,n.params)}),MS(n,function(t){return e[t.index]})}var r="asc"===t;return e.sort(function(e,t){var n=(e.getValue()-t.getValue())*(r?1:-1);return 0===n?(e.dataIndex-t.dataIndex)*(r?-1:1):n})}(r,n),r.length&&Mb(t.children,function(t){e(t,n)})}(_,b);var S=0;Mb(_.children,function(e){!isNaN(e.getValue())&&S++});var w=_.getValue(),M=Math.PI/(w||S)*2,A=_.depth>0,C=(p-h)/(_.height-(A?-1:1)||1),T=e.get("clockwise"),I=e.get("stillShowZeroSum"),D=T?1:-1,P=function(t,n){if(!!t){var r=n;if(t!==y){var i=t.getValue(),a=0===w&&I?M:i*M;a<v&&(a=v),r=n+D*a;var p=t.depth-x-(A?-1:1),f=h+C*p,_=h+C*(p+1),b=e.getLevelModel(t);if(b){var S=b.get("r0",!0),R=b.get("r",!0),L=b.get("radius",!0);null!=L&&(S=L[0],R=L[1]),null!=S&&(f=Ek(S,s/2)),null!=R&&(_=Ek(R,s/2))}t.setLayout({angle:a,startAngle:n,endAngle:r,clockwise:T,cx:u,cy:c,r0:f,r:_})}if(t.children&&t.children.length){var O=0;Mb(t.children,function(e){O+=P(e,n+O)})}return r-n}};if(A){var R=h+C,L=2*Math.PI;y.setLayout({angle:L,startAngle:f,endAngle:f+L,clockwise:T,cx:u,cy:c,r0:h,r:R})}P(_,f)})}function KA(e){var t={};e.eachSeriesByType("sunburst",function(e){var n=e.getData(),r=n.tree;r.eachNode(function(i){var a=i.getModel().getModel("itemStyle").getItemStyle();!a.fill&&(a.fill=function(e,n,r){for(var i=e;i&&i.depth>1;)i=i.parentNode;var a=n.getColorFromPalette(i.name||i.dataIndex+"",t);return e.depth>1&&MP(a)&&(a=C7(a,(e.depth-1)/(r-1)*.5)),a}(i,e,r.root.height)),Mf(n.ensureUniqueItemVisual(i.dataIndex,"style"),a)})})}var KC={color:"fill",borderColor:"stroke"},KT={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},KE=Is(),KI=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(e,t){return z6(null,this)},t.prototype.getDataParams=function(t,n,r){var i=e.prototype.getDataParams.call(this,t,n);return r&&(i.info=KE(r).info),i},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(kD);function KD(e,t){return t=t||[0,0],MS(["x","y"],function(n,r){var i=this.getAxis(n),a=t[r],s=e[r]/2;return"category"===i.type?i.getBandWidth():Math.abs(i.dataToCoord(a-s)-i.dataToCoord(a+s))},this)}function KP(e,t){return t=t||[0,0],MS([0,1],function(n){var r=t[n],i=e[n]/2,a=[],s=[];return a[n]=r-i,s[n]=r+i,a[1-n]=s[1-n]=t[1-n],Math.abs(this.dataToPoint(a)[n]-this.dataToPoint(s)[n])},this)}function KR(e,t){var n=this.getAxis(),r=t instanceof Array?t[0]:t,i=(e instanceof Array?e[0]:e)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(r-i)-n.dataToCoord(r+i))}function KL(e,t){return t=t||[0,0],MS(["Radius","Angle"],function(n,r){var i=this["get"+n+"Axis"](),a=t[r],s=e[r]/2,u="category"===i.type?i.getBandWidth():Math.abs(i.dataToCoord(a-s)-i.dataToCoord(a+s));return"Angle"===n&&(u=u*Math.PI/180),u},this)}function KO(e,t,n,r){return e&&(e.legacy||!1!==e.legacy&&!n&&!r&&"tspan"!==t&&("text"===t||M4(e,"text")))}function Kk(e,t,n){var r,i,a;if("text"===t)a=e;else{a={},M4(e,"text")&&(a.text=e.text),M4(e,"rich")&&(a.rich=e.rich),M4(e,"textFill")&&(a.fill=e.textFill),M4(e,"textStroke")&&(a.stroke=e.textStroke),M4(e,"fontFamily")&&(a.fontFamily=e.fontFamily),M4(e,"fontSize")&&(a.fontSize=e.fontSize),M4(e,"fontStyle")&&(a.fontStyle=e.fontStyle),M4(e,"fontWeight")&&(a.fontWeight=e.fontWeight),i={type:"text",style:a,silent:!0},r={};var s=M4(e,"textPosition");n?r.position=s?e.textPosition:"inside":s&&(r.position=e.textPosition),M4(e,"textPosition")&&(r.position=e.textPosition),M4(e,"textOffset")&&(r.offset=e.textOffset),M4(e,"textRotation")&&(r.rotation=e.textRotation),M4(e,"textDistance")&&(r.distance=e.textDistance)}return KB(a,e),Mb(a.rich,function(e){KB(e,e)}),{textConfig:r,textContent:i}}function KB(e,t){if(!!t)t.font=t.textFont||t.font,M4(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),M4(t,"textAlign")&&(e.align=t.textAlign),M4(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),M4(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),M4(t,"textWidth")&&(e.width=t.textWidth),M4(t,"textHeight")&&(e.height=t.textHeight),M4(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),M4(t,"textPadding")&&(e.padding=t.textPadding),M4(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),M4(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),M4(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),M4(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),M4(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),M4(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),M4(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY)}function KN(e,t,n){e.textPosition=e.textPosition||n.position||"inside",null!=n.offset&&(e.textOffset=n.offset),null!=n.rotation&&(e.textRotation=n.rotation),null!=n.distance&&(e.textDistance=n.distance);var r=e.textPosition.indexOf("inside")>=0,i=e.fill||"#000";KF(e,t);var a=null==e.textFill;return r?a&&(e.textFill=n.insideFill||"#fff",!e.textStroke&&n.insideStroke&&(e.textStroke=n.insideStroke),e.textStroke||(e.textStroke=i),null==e.textStrokeWidth&&(e.textStrokeWidth=2)):(a&&(e.textFill=e.fill||n.outsideFill||"#000"),!e.textStroke&&n.outsideStroke&&(e.textStroke=n.outsideStroke)),e.text=t.text,e.rich=t.rich,Mb(t.rich,function(e){KF(e,e)}),e}function KF(e,t){if(!!t)M4(t,"fill")&&(e.textFill=t.fill),M4(t,"stroke")&&(e.textStroke=t.fill),M4(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),M4(t,"font")&&(e.font=t.font),M4(t,"fontStyle")&&(e.fontStyle=t.fontStyle),M4(t,"fontWeight")&&(e.fontWeight=t.fontWeight),M4(t,"fontSize")&&(e.fontSize=t.fontSize),M4(t,"fontFamily")&&(e.fontFamily=t.fontFamily),M4(t,"align")&&(e.textAlign=t.align),M4(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),M4(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),M4(t,"width")&&(e.textWidth=t.width),M4(t,"height")&&(e.textHeight=t.height),M4(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),M4(t,"padding")&&(e.textPadding=t.padding),M4(t,"borderColor")&&(e.textBorderColor=t.borderColor),M4(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),M4(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),M4(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),M4(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),M4(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),M4(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),M4(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),M4(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),M4(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),M4(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY)}var Kz={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},KU=MC(Kz);Mw(En,function(e,t){return e[t]=1,e},{}),En.join(", ");var KH=["","style","shape","extra"],KG=Is();function KV(e,t,n,r,i){var a=e+"Animation",s=Pq(e,r,i)||{},u=KG(t).userDuring;return s.duration>0&&(s.during=u?MT(Kq,{el:t,userDuring:u}):null,s.setToFinal=!0,s.scope=e),Mf(s,n[a]),s}function KW(e,t,n,r){var i=(r=r||{}).dataIndex,a=r.isInit,s=r.clearStyle,u=n.isAnimationEnabled(),c=KG(e),h=t.style;c.userDuring=t.during;var p={},f={};if(function(e,t,n){for(var r=0;r<KU.length;r++){var i=KU[r],a=Kz[i],s=t[i];s&&(n[a[0]]=s[0],n[a[1]]=s[1])}for(var r=0;r<En.length;r++){var u=En[r];null!=t[u]&&(n[u]=t[u])}}(e,t,f),KQ("shape",t,f),KQ("extra",t,f),!a&&u&&(function(e,t,n){for(var r=t.transition,i=KY(r)?En:E6(r||[]),a=0;a<i.length;a++){var s=i[a];if("style"!==s&&"shape"!==s&&"extra"!==s){var u=e[s];n[s]=u}}}(e,t,p),KK("shape",e,t,p),KK("extra",e,t,p),function(e,t,n,r){if(!!n){var i,a=e.style;if(a){var s=n.transition,u=t.transition;if(s&&!KY(s)){var c=E6(s);i||(i=r.style={});for(var h=0;h<c.length;h++){var p=c[h],f=a[p];i[p]=f}}else if(e.getAnimationStyleProps&&(KY(u)||KY(s)||Mv(u,"style")>=0)){var v=e.getAnimationStyleProps(),y=v?v.style:null;if(y){i||(i=r.style={});for(var _=MC(n),h=0;h<_.length;h++){var p=_[h];if(y[p]){var f=a[p];i[p]=f}}}}}}}(e,t,h,p)),f.style=h,function(e,t,n){var r=t.style;if(!e.isGroup&&r){if(n){e.useStyle({});for(var i=e.animators,a=0;a<i.length;a++){var s=i[a];"style"===s.targetName&&s.changeTarget(e.style)}}e.setStyle(r)}t&&(t.style=null,t&&e.attr(t),t.style=r)}(e,f,s),function(e,t){M4(t,"silent")&&(e.silent=t.silent),M4(t,"ignore")&&(e.ignore=t.ignore),e instanceof IJ&&M4(t,"invisible")&&(e.invisible=t.invisible),e instanceof DR&&M4(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}(e,t),u){if(a){var v={};Mb(KH,function(e){var n=e?t[e]:t;n&&n.enterFrom&&(e&&(v[e]=v[e]||{}),Mf(e?v[e]:v,n.enterFrom))});var y=KV("enter",e,t,n,i);y.duration>0&&e.animateFrom(v,y)}else(function(e,t,n,r,i){if(i){var a=KV("update",e,t,r,n);a.duration>0&&e.animateFrom(i,a)}})(e,t,i||0,n,p)}Kj(e,t),h?e.dirty():e.markRedraw()}function Kj(e,t){for(var n=KG(e).leaveToProps,r=0;r<KH.length;r++){var i=KH[r],a=i?t[i]:t;a&&a.leaveTo&&(!n&&(n=KG(e).leaveToProps={}),i&&(n[i]=n[i]||{}),Mf(i?n[i]:n,a.leaveTo))}}function KX(e,t,n,r){if(e){var i=e.parent,a=KG(e).leaveToProps;if(a){var s=KV("update",e,t,n,0);s.done=function(){i.remove(e),r&&r()},e.animateTo(a,s)}else i.remove(e),r&&r()}}function KY(e){return"all"===e}var KJ={},KZ={setTransform:function(e,t){return KJ.el[e]=t,this},getTransform:function(e){return KJ.el[e]},setShape:function(e,t){var n=KJ.el;return(n.shape||(n.shape={}))[e]=t,n.dirtyShape&&n.dirtyShape(),this},getShape:function(e){var t=KJ.el.shape;if(t)return t[e]},setStyle:function(e,t){var n=KJ.el,r=n.style;return r&&(r[e]=t,n.dirtyStyle&&n.dirtyStyle()),this},getStyle:function(e){var t=KJ.el.style;if(t)return t[e]},setExtra:function(e,t){return(KJ.el.extra||(KJ.el.extra={}))[e]=t,this},getExtra:function(e){var t=KJ.el.extra;if(t)return t[e]}};function Kq(){var e=this.el;if(!!e){var t=KG(e).userDuring,n=this.userDuring;if(t!==n){this.el=this.userDuring=null;return}KJ.el=e,n(KZ)}}function KK(e,t,n,r){var i,a=n[e];if(!!a){var s=t[e];if(s){var u=n.transition,c=a.transition;if(c){if(i||(i=r[e]={}),KY(c))Mf(i,s);else{for(var h=E6(c),p=0;p<h.length;p++){var f=h[p],v=s[f];i[f]=v}}}else if(KY(u)||Mv(u,e)>=0){i||(i=r[e]={});for(var y=MC(s),p=0;p<y.length;p++){var f=y[p],v=s[f];(function(e,t){return Mx(e)?e!==t:null!=e&&isFinite(e)})(a[f],v)&&(i[f]=v)}}}}}function KQ(e,t,n){var r=t[e];if(!!r)for(var i=n[e]={},a=MC(r),s=0;s<a.length;s++){var u=a[s];i[u]=TR(r[u])}}var K$=Is(),K0=["percent","easing","shape","style","extra"];function K1(e){e.stopAnimation("keyframe"),e.attr(K$(e))}function K2(e,t,n){if(!n.isAnimationEnabled()||!t)return;if(MI(t)){Mb(t,function(t){K2(e,t,n)});return}var r=t.keyframes,i=t.duration;if(n&&null==i){var a=Pq("enter",n,0);i=a&&a.duration}if(!!r&&!!i){var s=K$(e);Mb(KH,function(n){var a;if(n&&!e[n])return;if(r.sort(function(e,t){return e.percent-t.percent}),Mb(r,function(r){var u=e.animators,c=n?r[n]:r;if(!c)return;var h=MC(c);if(!n&&(h=MM(h,function(e){return 0>Mv(K0,e)})),!!h.length){!a&&((a=e.animate(n,t.loop,!0)).scope="keyframe");for(var p=0;p<u.length;p++)u[p]!==a&&u[p].targetName===a.targetName&&u[p].stopTracks(h);n&&(s[n]=s[n]||{});var f=n?s[n]:s;Mb(h,function(t){f[t]=((n?e[n]:e)||{})[t]}),a.whenWithKeys(i*r.percent,c,h,r.easing)}}),!!a)a.delay(t.delay||0).duration(i).start(t.easing)})}}var K3="emphasis",K5="normal",K4="blur",K6="select",K9=[K5,K3,K4,K6],K8={normal:["itemStyle"],emphasis:[K3,"itemStyle"],blur:[K4,"itemStyle"],select:[K6,"itemStyle"]},K7={normal:["label"],emphasis:[K3,"label"],blur:[K4,"label"],select:[K6,"label"]},Qe=["x","y"],Qt={normal:{},emphasis:{},blur:{},select:{}},Qn={cartesian2d:function(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(t){return e.dataToPoint(t)},size:MT(KD,e)}}},geo:function(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(t){return e.dataToPoint(t)},size:MT(KP,e)}}},single:function(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(t){return e.dataToPoint(t)},size:MT(KR,e)}}},polar:function(e){var t=e.getRadiusAxis(),n=e.getAngleAxis(),r=t.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:r[1],r0:r[0]},api:{coord:function(r){var i=t.dataToRadius(r[0]),a=n.dataToAngle(r[1]),s=e.coordToPoint([i,a]);return s.push(i,a*Math.PI/180),s},size:MT(KL,e)}}},calendar:function(e){var t=e.getRect(),n=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(t,n){return e.dataToPoint(t,n)}}}}};function Qr(e){return e instanceof DR}function Qi(e){return e instanceof IJ}var Qa=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.render=function(e,t,n,r){this._progressiveEls=null;var i=this._data,a=e.getData(),s=this.group,u=Qu(e,a,t,n);!i&&s.removeAll(),a.diff(i).add(function(t){Qc(n,null,t,u(t,r),e,s,a)}).remove(function(t){var n=i.getItemGraphicEl(t);n&&KX(n,KE(n).option,e)}).update(function(t,c){Qc(n,i.getItemGraphicEl(c),t,u(t,r),e,s,a)}).execute();var c=e.get("clip",!0)?Vc(e.coordinateSystem,!1,e):null;c?s.setClipPath(c):s.removeClipPath(),this._data=a},t.prototype.incrementalPrepareRender=function(e,t,n){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(e,t,n,r,i){var a=t.getData(),s=Qu(t,a,n,r),u=this._progressiveEls=[];function c(e){!e.isGroup&&(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}for(var h=e.start;h<e.end;h++){var p=Qc(null,null,h,s(h,i),t,this.group,a);p&&(p.traverse(c),u.push(p))}},t.prototype.eachRendered=function(e){Nl(this._progressiveEls||this.group,e)},t.prototype.filterForExposedEvent=function(e,t,n,r){var i=t.element;if(null==i||n.name===i)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===i)return!0;return!1},t.type="custom",t}(Nv);function Qo(e){var t,n=e.type;if("path"===n){var r=e.shape,i=null!=r.width&&null!=r.height?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,a=Q_(r);KE(t=BK(a,null,i,r.layout||"center")).customPathData=a}else if("image"===n)KE(t=new DF({})).customImagePath=e.style.image;else if("text"===n)t=new D8({});else if("group"===n)t=new ES;else if("compoundPath"===n)throw Error('"compoundPath" is not supported yet.');else{var s=Bq(n);!s&&OF(""),t=new s}return KE(t).customGraphicType=n,t.name=e.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function Qs(e,t,n,r,i,a,s){K1(t);var u=i&&i.normal.cfg;u&&t.setTextConfig(u),r&&null==r.transition&&(r.transition=Qe);var c=r&&r.style;if(c){"text"===t.type&&(M4(c,"textFill")&&(c.fill=c.textFill),M4(c,"textStroke")&&(c.stroke=c.textStroke));var h=void 0,p=Qr(t)?c.decal:null;e&&p&&(p.dirty=!0,h=FL(p,e)),c.__decalPattern=h}if(Qi(t)&&c){var h=c.__decalPattern;h&&(c.decal=h)}KW(t,r,a,{dataIndex:n,isInit:s,clearStyle:!0}),K2(t,r.keyframeAnimation,a)}function Ql(e,t,n,r,i){var a=t.isGroup?null:t,s=i&&i[e].cfg;if(a){var u=a.ensureState(e);if(!1===r){var c=a.getState(e);c&&(c.style=null)}else u.style=r||null;s&&(u.textConfig=s),PM(a)}}function Qu(e,t,n,r){var i,a,s=e.get("renderItem"),u=e.coordinateSystem,c={};u&&(c=u.prepareCustoms?u.prepareCustoms(u):Qn[u.type](u));for(var h=Mg({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:function(e,n){return null==n&&(n=i),t.getStore().get(t.getDimensionIndex(e||0),n)},style:function(n,r){null==r&&(r=i);var a=t.getItemVisual(r,"style"),s=a&&a.fill,u=a&&a.opacity,c=w(r,K5).getItemStyle();null!=s&&(c.fill=s),null!=u&&(c.opacity=u);var h={inheritColor:MP(s)?s:"#000"},p=M(r,K5),f=Re(p,null,h,!1,!0);f.text=p.getShallow("show")?MV(e.getFormattedLabel(r,K5),G0(t,r)):null;var v=Rt(p,h,!1);return C(n,c),c=KN(c,f,v),n&&A(c,n),c.legacy=!0,c},ordinalRawValue:function(e,n){null==n&&(n=i),e=e||0;var r=t.getDimensionInfo(e);if(!r){var a=t.getDimensionIndex(e);return a>=0?t.getStore().get(a,n):void 0}var s=t.get(r.name,n),u=r&&r.ordinalMeta;return u?u.categories[s]:s},styleEmphasis:function(n,r){null==r&&(r=i);var a=w(r,K3).getItemStyle(),s=M(r,K3),u=Re(s,null,null,!0,!0);u.text=s.getShallow("show")?MW(e.getFormattedLabel(r,K3),e.getFormattedLabel(r,K5),G0(t,r)):null;var c=Rt(s,null,!0);return C(n,a),a=KN(a,u,c),n&&A(a,n),a.legacy=!0,a},visual:function(e,n){if(null==n&&(n=i),M4(KC,e)){var r=t.getItemVisual(n,"style");return r?r[KC[e]]:null}if(M4(KT,e))return t.getItemVisual(n,e)},barLayout:function(e){if("cartesian2d"===u.type)return function(e){var t=[],n=e.axis,r="axis0";if("category"===n.type){for(var i=n.getBandWidth(),a=0;a<e.count;a++)t.push(Mg({bandWidth:i,axisKey:r,stackId:Uf+a},e));for(var s=U_(t),u=[],a=0;a<e.count;a++){var c=s[r][Uf+a];c.offsetCenter=c.offset+c.width/2,u.push(c)}return u}}(Mg({axis:u.getBaseAxis()},e))},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(e){return Ro(e,n)}},c.api||{}),p={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:c.coordSys,dataInsideLength:t.count(),encode:function(e){var t={};return Mb(e.dimensions,function(n){var r=e.getDimensionInfo(n);if(!r.isExtraCoord){var i=r.coordDim;(t[i]=t[i]||[])[r.coordDimIndex]=e.getDimensionIndex(n)}}),t}(e.getData())},f={},v={},y={},_={},x=0;x<K9.length;x++){var b=K9[x];y[b]=e.getModel(K8[b]),_[b]=e.getModel(K7[b])}function S(e){return e===i?a||(a=t.getItemModel(e)):t.getItemModel(e)}function w(e,n){return t.hasItemOption?e===i?f[n]||(f[n]=S(e).getModel(K8[n])):S(e).getModel(K8[n]):y[n]}function M(e,n){return t.hasItemOption?e===i?v[n]||(v[n]=S(e).getModel(K7[n])):S(e).getModel(K7[n]):_[n]}return function(e,n){return i=e,a=null,f={},v={},s&&s(Mg({dataIndexInside:e,dataIndex:t.getRawIndex(e),actionType:n?n.type:null},p),h)};function A(e,t){for(var n in t)M4(t,n)&&(e[n]=t[n])}function C(e,t){e&&(e.textFill&&(t.textFill=e.textFill),e.textPosition&&(t.textPosition=e.textPosition))}}function Qc(e,t,n,r,i,a,s){if(!r){a.remove(t);return}var u=Qh(e,t,n,r,i,a);return u&&s.setItemGraphicEl(n,u),u&&PU(u,r.focus,r.blurScope,r.emphasisDisabled),u}function Qh(e,t,n,r,i,a){var s,u,c=-1,h=t;t&&Qd(t,r,i)&&(c=Mv(a.childrenRef(),t),t=null);var p=!t,f=t;if(f)f.clearStates();else if(f=Qo(r),h){;s=h,(u=f).copyTransform(s),Qi(u)&&Qi(s)&&(u.setStyle(s.style),u.z=s.z,u.z2=s.z2,u.zlevel=s.zlevel,u.invisible=s.invisible,u.ignore=s.ignore,Qr(u)&&Qr(s)&&u.setShape(s.shape))}!1===r.morph?f.disableMorphing=!0:f.disableMorphing&&(f.disableMorphing=!1),Qt.normal.cfg=Qt.normal.conOpt=Qt.emphasis.cfg=Qt.emphasis.conOpt=Qt.blur.cfg=Qt.blur.conOpt=Qt.select.cfg=Qt.select.conOpt=null,Qt.isLegacy=!1,function(e,t,n,r,i,a){if(!e.isGroup){Qp(n,null,a),Qp(n,K3,a);var s=a.normal.conOpt,u=a.emphasis.conOpt,c=a.blur.conOpt,h=a.select.conOpt;if(null!=s||null!=u||null!=h||null!=c){var p=e.getTextContent();if(!1===s)p&&e.removeTextContent();else{s=a.normal.conOpt=s||{type:"text"},p?p.clearStates():(p=Qo(s),e.setTextContent(p)),Qs(null,p,t,s,null,r,i);for(var f=s&&s.style,v=0;v<K9.length;v++){var y=K9[v];if(y!==K5){var _=a[y].conOpt;Ql(y,p,_,Qg(s,_,y),null)}}f?p.dirty():p.markRedraw()}}}}(f,n,r,i,p,Qt),function(e,t,n,r,i){var a=n.clipPath;if(!1===a)e&&e.getClipPath()&&e.removeClipPath();else if(a){var s=e.getClipPath();if(s&&Qd(s,a,r)&&(s=null),!s){s=Qo(a);e.setClipPath(s)}Qs(null,s,t,a,null,r,i)}}(f,n,r,i,p),Qs(e,f,n,r,Qt,i,p),M4(r,"info")&&(KE(f).info=r.info);for(var v=0;v<K9.length;v++){var y=K9[v];if(y!==K5){var _=Qf(r,y),x=Qg(r,_,y);Ql(y,f,_,x,Qt)}}return!function(e,t,n){if(!e.isGroup){var r=n.currentZ,i=n.currentZLevel;e.z=r,e.zlevel=i;var a=t.z2;null!=a&&(e.z2=a||0);for(var s=0;s<K9.length;s++)(function(e,t,n){var r=n===K5,i=r?t:Qf(t,n),a=i?i.z2:null;null!=a&&((r?e:e.ensureState(n)).z2=a||0)})(e,t,K9[s])}}(f,r,i),"group"===r.type&&function(e,t,n,r,i){var a=r.children,s=a?a.length:0,u=r.$mergeChildren,c="byName"===u||r.diffChildrenByName,h=!1===u;if(!!s||!!c||!!h){if(c){(function(e){new zO(e.oldChildren,e.newChildren,Qm,Qm,e).add(Qv).update(Qv).remove(Qy).execute()})({api:e,oldChildren:t.children()||[],newChildren:a||[],dataIndex:n,seriesModel:i,group:t});return}h&&t.removeAll();for(var p=0;p<s;p++){var f=a[p],v=t.childAt(p);f?(null==f.ignore&&(f.ignore=!1),Qh(e,v,n,f,i,t)):v.ignore=!0}for(var y=t.childCount()-1;y>=p;y--){var _=t.childAt(y);(function(e,t,n){t&&KX(t,KE(e).option,n)})(t,_,i)}}}(e,f,n,r,i),c>=0?a.replaceAt(f,c):a.add(f),f}function Qd(e,t,n){var r=KE(e),i=t.type,a=t.shape,s=t.style;return n.isUniversalTransitionEnabled()||null!=i&&i!==r.customGraphicType||"path"===i&&function(e){return e&&(M4(e,"pathData")||M4(e,"d"))}(a)&&Q_(a)!==r.customPathData||"image"===i&&M4(s,"image")&&s.image!==r.customImagePath}function Qp(e,t,n){var r=t?Qf(e,t):e,i=t?Qg(e,r,K3):e.style,a=e.type,s=r?r.textConfig:null,u=e.textContent,c=u?t?Qf(u,t):u:null;if(i&&(n.isLegacy||KO(i,a,!!s,!!c))){n.isLegacy=!0;var h=Kk(i,a,!t);!s&&h.textConfig&&(s=h.textConfig),!c&&h.textContent&&(c=h.textContent)}if(!t&&c){var p=c;p.type||(p.type="text")}var f=t?n[t]:n.normal;f.cfg=s,f.conOpt=c}function Qf(e,t){return t?e?e[t]:null:e}function Qg(e,t,n){var r=t&&t.style;return null==r&&n===K3&&e&&(r=e.styleEmphasis),r}function Qm(e,t){var n=e&&e.name;return null!=n?n:"e\0\0"+t}function Qv(e,t){var n=this.context,r=null!=e?n.newChildren[e]:null,i=null!=t?n.oldChildren[t]:null;Qh(n.api,i,n.dataIndex,r,n.seriesModel,n.group)}function Qy(e){var t=this.context,n=t.oldChildren[e];n&&KX(n,KE(n).option,t.seriesModel)}function Q_(e){return e&&(e.pathData||e.d)}var Qx=Is(),Qb=Mh,QS=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(e,t,n,r){var i=t.get("value"),a=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=n,!!r||this._lastValue!==i||this._lastStatus!==a){this._lastValue=i,this._lastStatus=a;var s=this._group,u=this._handle;if(!a||"hide"===a){s&&s.hide(),u&&u.hide();return}s&&s.show(),u&&u.show();var c={};this.makeElOption(c,i,e,t,n);var h=c.graphicKey;h!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=h;var p=this._moveAnimation=this.determineAnimation(e,t);if(s){var f=ME(Qw,t,p);this.updatePointerEl(s,c,f),this.updateLabelEl(s,c,f,t)}else s=this._group=new ES,this.createPointerEl(s,c,e,t),this.createLabelEl(s,c,e,t),n.getZr().add(s);QC(s,t,!0),this._renderHandle(i)}},e.prototype.remove=function(e){this.clear(e)},e.prototype.dispose=function(e){this.clear(e)},e.prototype.determineAnimation=function(e,t){var n=t.get("animation"),r=e.axis,i="category"===r.type,a=t.get("snap");if(!a&&!i)return!1;if("auto"===n||null==n){var s=this.animationThreshold;if(i&&r.getBandWidth()>s)return!0;if(a){var u=WH(e).seriesDataCount,c=r.getExtent();return Math.abs(c[0]-c[1])/u>s}return!1}return!0===n},e.prototype.makeElOption=function(e,t,n,r,i){},e.prototype.createPointerEl=function(e,t,n,r){var i=t.pointer;if(i){var a=Qx(e).pointerEl=new tf[i.type](Qb(t.pointer));e.add(a)}},e.prototype.createLabelEl=function(e,t,n,r){if(t.label){var i=Qx(e).labelEl=new D8(Qb(t.label));e.add(i),QM(i,r)}},e.prototype.updatePointerEl=function(e,t,n){var r=Qx(e).pointerEl;r&&t.pointer&&(r.setStyle(t.pointer.style),n(r,{shape:t.pointer.shape}))},e.prototype.updateLabelEl=function(e,t,n,r){var i=Qx(e).labelEl;i&&(i.setStyle(t.label.style),n(i,{x:t.label.x,y:t.label.y}),QM(i,r))},e.prototype._renderHandle=function(e){if(!this._dragging&&!!this.updateHandleTransform){var t,n=this._axisPointerModel,r=this._api.getZr(),i=this._handle,a=n.getModel("handle"),s=n.get("status");if(!a.get("show")||!s||"hide"===s){i&&r.remove(i),this._handle=null;return}!this._handle&&(t=!0,i=this._handle=Nn(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(e){AW(e.event)},onmousedown:MT(this._onHandleDragMove,this,0,0),drift:MT(this._onHandleDragMove,this),ondragend:MT(this._onHandleDragEnd,this)}),r.add(i)),QC(i,n,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var u=a.get("size");!MI(u)&&(u=[u,u]),i.scaleX=u[0]/2,i.scaleY=u[1]/2,NS(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,t)}},e.prototype._moveHandleToValue=function(e,t){Qw(this._axisPointerModel,!t&&this._moveAnimation,this._handle,QA(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(e,t){var n=this._handle;if(!!n){this._dragging=!0;var r=this.updateHandleTransform(QA(n),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=r,n.stopAnimation(),n.attr(QA(r)),Qx(n).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){if(!!this._handle){var e=this._payloadInfo,t=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:t.axis.dim,axisIndex:t.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){if(this._dragging=!1,!!this._handle){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),n=this._group,r=this._handle;t&&n&&(this._lastGraphicKey=null,n&&t.remove(n),r&&t.remove(r),this._group=null,this._handle=null,this._payloadInfo=null),Nw(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(e,t,n){return{x:e[n=n||0],y:e[1-n],width:t[n],height:t[1-n]}},e}();function Qw(e,t,n,r){!function e(t,n){if(!(MO(t)&&MO(n)))return t===n;var r=!0;return Mb(n,function(n,i){r=r&&e(t[i],n)}),!!r}(Qx(n).lastProp,r)&&(Qx(n).lastProp=r,t?PQ(n,r,e):(n.stopAnimation(),n.attr(r)))}function QM(e,t){e[t.get(["label","show"])?"show":"hide"]()}function QA(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function QC(e,t,n){var r=t.get("z"),i=t.get("zlevel");e&&e.traverse(function(e){"group"!==e.type&&(null!=r&&(e.z=r),null!=i&&(e.zlevel=i),e.silent=n)})}function QT(e){var t,n=e.get("type"),r=e.getModel(n+"Style");return"line"===n?(t=r.getLineStyle()).fill=null:"shadow"===n&&((t=r.getAreaStyle()).stroke=null),t}function QE(e,t,n,r,i){var a=QI(n.get("value"),t.axis,t.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),s=n.getModel("label"),u=R4(s.get("padding")||0),c=s.getFont(),h=Es(a,c),p=i.position,f=h.width+u[1]+u[3],v=h.height+u[0]+u[2],y=i.align;"right"===y&&(p[0]-=f),"center"===y&&(p[0]-=f/2);var _=i.verticalAlign;"bottom"===_&&(p[1]-=v),"middle"===_&&(p[1]-=v/2),function(e,t,n,r){var i=r.getWidth(),a=r.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+n,a)-n,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}(p,f,v,r);var x=s.get("backgroundColor");(!x||"auto"===x)&&(x=t.get(["axisLine","lineStyle","color"])),e.label={x:p[0],y:p[1],style:Re(s,{text:a,font:c,fill:s.getTextColor(),padding:u,backgroundColor:x}),z2:10}}function QI(e,t,n,r,i){e=t.scale.parse(e);var a=t.scale.getLabel({value:e},{precision:i.precision}),s=i.formatter;if(s){var u={value:UX(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};Mb(r,function(e){var t=n.getSeriesByIndex(e.seriesIndex),r=e.dataIndexInside,i=t&&t.getDataParams(r);i&&u.seriesData.push(i)}),MP(s)?a=s.replace("{value}",a):MD(s)&&(a=s(u))}return a}function QD(e,t,n){var r=AZ();return A0(r,r,n.rotation),A$(r,r,n.position),B6([e.dataToCoord(t),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],r)}function QP(e,t,n,r,i,a){var s=WO.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=i.get(["label","margin"]),QE(t,r,i,a,{position:QD(r.axis,e,n),align:s.textAlign,verticalAlign:s.textVerticalAlign})}function QR(e,t,n){return{x1:e[n=n||0],y1:e[1-n],x2:t[n],y2:t[1-n]}}function QL(e,t,n){return{x:e[n=n||0],y:e[1-n],width:t[n],height:t[1-n]}}function QO(e,t,n,r,i,a){return{cx:e,cy:t,r0:n,r:r,startAngle:i,endAngle:a,clockwise:!0}}var Qk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.prototype.makeElOption=function(e,t,n,r,i){var a=n.axis,s=a.grid,u=r.get("type"),c=QB(s,a).getOtherAxis(a).getGlobalExtent(),h=a.toGlobalCoord(a.dataToCoord(t,!0));if(u&&"none"!==u){var p=QT(r),f=QN[u](a,h,c);f.style=p,e.graphicKey=f.type,e.pointer=f}QP(t,e,WM(s.model,n),n,r,i)},t.prototype.getHandleTransform=function(e,t,n){var r=WM(t.axis.grid.model,t,{labelInside:!1});r.labelMargin=n.get(["handle","margin"]);var i=QD(t.axis,e,r);return{x:i[0],y:i[1],rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,t,n,r){var i=n.axis,a=i.grid,s=i.getGlobalExtent(!0),u=QB(a,i).getOtherAxis(i).getGlobalExtent(),c="x"===i.dim?0:1,h=[e.x,e.y];h[c]+=t[c],h[c]=Math.min(s[1],h[c]),h[c]=Math.max(s[0],h[c]);var p=(u[1]+u[0])/2,f=[p,p];return f[c]=h[c],{x:h[0],y:h[1],rotation:e.rotation,cursorPoint:f,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][c]}},t}(QS);function QB(e,t){var n={};return n[t.dim+"AxisIndex"]=t.index,e.getCartesian(n)}var QN={line:function(e,t,n){return{type:"Line",subPixelOptimize:!0,shape:QR([t,n[0]],[t,n[1]],QF(e))}},shadow:function(e,t,n){var r=Math.max(1,e.getBandWidth()),i=n[1]-n[0];return{type:"Rect",shape:QL([t-r/2,n[0]],[r,i],QF(e))}}};function QF(e){return"x"===e.dim?0:1}var Qz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(Lv),QU=Is();function QH(e,t,n){if(!w1.node){var r=t.getZr();QU(r).records||(QU(r).records={}),function(e,t){if(!QU(e).initialized)QU(e).initialized=!0,n("click",ME(QV,"click")),n("mousemove",ME(QV,"mousemove")),n("globalout",QG);function n(n,r){e.on(n,function(n){var i=function(e){var t={showTip:[],hideTip:[]},n=function(r){var i=t[r.type];i?i.push(r):(r.dispatchAction=n,e.dispatchAction(r))};return{dispatchAction:n,pendings:t}}(t);Mb(QU(e).records,function(e){e&&r(e,n,i.dispatchAction)}),function(e,t){var n,r=e.showTip.length,i=e.hideTip.length;r?n=e.showTip[r-1]:i&&(n=e.hideTip[i-1]),n&&(n.dispatchAction=null,t.dispatchAction(n))}(i.pendings,t)})}}(r,t),(QU(r).records[e]||(QU(r).records[e]={})).handler=n}}function QG(e,t,n){e.handler("leave",null,n)}function QV(e,t,n,r){t.handler(e,n,r)}function QW(e,t){if(!w1.node){var n=t.getZr();(QU(n).records||{})[e]&&(QU(n).records[e]=null)}}var Qj=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.render=function(e,t,n){var r=t.getComponent("tooltip"),i=e.get("triggerOn")||r&&r.get("triggerOn")||"mousemove|click";QH("axisPointer",n,function(e,t,n){"none"!==i&&("leave"===e||i.indexOf(e)>=0)&&n({type:"updateAxisPointer",currTrigger:e,x:t&&t.offsetX,y:t&&t.offsetY})})},t.prototype.remove=function(e,t){QW("axisPointer",t)},t.prototype.dispose=function(e,t){QW("axisPointer",t)},t.type="axisPointer",t}(kR);function QX(e,t){var n,r=[],i=e.seriesIndex;if(null==i||!(n=t.getSeriesByIndex(i)))return{point:[]};var a=n.getData(),s=Io(a,e);if(null==s||s<0||MI(s))return{point:[]};var u=a.getItemGraphicEl(s),c=n.coordinateSystem;if(n.getTooltipPosition)r=n.getTooltipPosition(s)||[];else if(c&&c.dataToPoint){if(e.isStacked){var h=c.getBaseAxis(),p=c.getOtherAxis(h).dim,f=h.dim,v="x"===p||"radius"===p?1:0,y=a.mapDimension(f),_=[];_[v]=a.get(y,s),_[1-v]=a.get(a.getCalculationInfo("stackResultDimension"),s),r=c.dataToPoint(_)||[]}else r=c.dataToPoint(a.getValues(MS(c.dimensions,function(e){return a.mapDimension(e)}),s))||[]}else if(u){var x=u.getBoundingRect().clone();x.applyTransform(u.transform),r=[x.x+x.width/2,x.y+x.height/2]}return{point:r,el:u}}var QY=Is();function QJ(e,t,n){var r=e.currTrigger,i=[e.x,e.y],a=e.dispatchAction||MT(n.dispatchAction,n),s=t.getComponent("axisPointer").coordSysAxesInfo;if(!!s){Q$(i)&&(i=QX({seriesIndex:e.seriesIndex,dataIndex:e.dataIndex},t).point);var u=Q$(i),c=e.axesInfo,h=s.axesInfo,p="leave"===r||Q$(i),f={},v={},y={list:[],map:{}},_={showPointer:ME(Qq,v),showTooltip:ME(QK,y)};Mb(s.coordSysMap,function(e,t){var n=u||e.containPoint(i);Mb(s.coordSysAxesInfo[t],function(e,t){var r=e.axis,a=function(e,t){for(var n=0;n<(e||[]).length;n++){var r=e[n];if(t.axis.dim===r.axisDim&&t.axis.model.componentIndex===r.axisIndex)return r}}(c,e);if(!p&&n&&(!c||a)){var s=a&&a.value;null==s&&!u&&(s=r.pointToData(i)),null!=s&&QZ(e,s,_,!1,f)}})});var x={};return Mb(h,function(e,t){var n=e.linkGroup;n&&!v[t]&&Mb(n.axesInfo,function(t,r){var i=v[r];if(t!==e&&i){var a=i.value;n.mapper&&(a=e.axis.scale.parse(n.mapper(a,QQ(t),QQ(e)))),x[e.key]=a}})}),Mb(x,function(e,t){QZ(h[t],e,_,!0,f)}),function(e,t,n){var r=n.axesInfo=[];Mb(t,function(t,n){var i=t.axisPointerModel.option,a=e[n];a?(t.useHandle||(i.status="show"),i.value=a.value,i.seriesDataIndices=(a.payloadBatch||[]).slice()):t.useHandle||(i.status="hide"),"show"===i.status&&r.push({axisDim:t.axis.dim,axisIndex:t.axis.model.componentIndex,value:i.value})})}(v,h,f),function(e,t,n,r){if(Q$(t)||!e.list.length){r({type:"hideTip"});return}var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}(y,i,e,a),function(e,t,n){var r=n.getZr(),i="axisPointerLastHighlights",a=QY(r)[i]||{},s=QY(r)[i]={};Mb(e,function(e,t){var n=e.axisPointerModel.option;"show"===n.status&&e.triggerEmphasis&&Mb(n.seriesDataIndices,function(e){s[e.seriesIndex+" | "+e.dataIndex]=e})});var u=[],c=[];Mb(a,function(e,t){s[t]||c.push(e)}),Mb(s,function(e,t){a[t]||u.push(e)}),c.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:c}),u.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:u})}(h,a,n),f}}function QZ(e,t,n,r,i){var a=e.axis;if(!a.scale.isBlank()&&!!a.containData(t)){if(!e.involveSeries){n.showPointer(e,t);return}var s=function(e,t){var n=t.axis,r=n.dim,i=e,a=[],s=Number.MAX_VALUE,u=-1;return Mb(t.seriesModels,function(t,c){var h,p,f=t.getData().mapDimensionsAll(r);if(t.getAxisTooltipData){var v=t.getAxisTooltipData(f,e,n);p=v.dataIndices,h=v.nestestValue}else{if(!(p=t.getData().indicesOfNearest(f[0],e,"category"===n.type?.5:null)).length)return;h=t.getData().get(f[0],p[0])}if(null!=h&&!!isFinite(h)){var y=e-h,_=Math.abs(y);_<=s&&((_<s||y>=0&&u<0)&&(s=_,u=y,i=h,a.length=0),Mb(p,function(e){a.push({seriesIndex:t.seriesIndex,dataIndexInside:e,dataIndex:t.getData().getRawIndex(e)})}))}}),{payloadBatch:a,snapToValue:i}}(t,e),u=s.payloadBatch,c=s.snapToValue;u[0]&&null==i.seriesIndex&&Mf(i,u[0]),!r&&e.snap&&a.containData(c)&&null!=c&&(t=c),n.showPointer(e,t,u),n.showTooltip(e,s,c)}}function Qq(e,t,n,r){e[t.key]={value:n,payloadBatch:r}}function QK(e,t,n,r){var i=n.payloadBatch,a=t.axis,s=a.model,u=t.axisPointerModel;if(!!t.triggerTooltip&&!!i.length){var c=t.coordSys.model,h=WV(c),p=e.map[h];!p&&(p=e.map[h]={coordSysId:c.id,coordSysIndex:c.componentIndex,coordSysType:c.type,coordSysMainType:c.mainType,dataByAxis:[]},e.list.push(p)),p.dataByAxis.push({axisDim:a.dim,axisIndex:s.componentIndex,axisType:s.type,axisId:s.id,value:r,valueLabelOpt:{precision:u.get(["label","precision"]),formatter:u.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function QQ(e){var t=e.axis.model,n={},r=n.axisDim=e.axis.dim;return n.axisIndex=n[r+"AxisIndex"]=t.componentIndex,n.axisName=n[r+"AxisName"]=t.name,n.axisId=n[r+"AxisId"]=t.id,n}function Q$(e){return!e||null==e[0]||isNaN(e[0])||null==e[1]||isNaN(e[1])}function Q0(e){Wj.registerAxisPointerClass("CartesianAxisPointer",Qk),e.registerComponentModel(Qz),e.registerComponentView(Qj),e.registerPreprocessor(function(e){if(e){e.axisPointer&&0!==e.axisPointer.length||(e.axisPointer={});var t=e.axisPointer.link;t&&!MI(t)&&(e.axisPointer.link=[t])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(e,t){var n,r;e.getComponent("axisPointer").coordSysAxesInfo=(function(e,t,n){var r=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),a=i.get("link",!0)||[],s=[];Mb(n.getCoordinateSystems(),function(n){if(!!n.axisPointerEnabled){var u=WV(n.model),c=e.coordSysAxesInfo[u]={};e.coordSysMap[u]=n;var h=n.model.getModel("tooltip",r);if(Mb(n.getAxes(),ME(y,!1,null)),n.getTooltipAxes&&r&&h.get("show")){var p="axis"===h.get("trigger"),f="cross"===h.get(["axisPointer","type"]),v=n.getTooltipAxes(h.get(["axisPointer","axis"]));(p||f)&&Mb(v.baseAxes,ME(y,!f||"cross",p)),f&&Mb(v.otherAxes,ME(y,"cross",!1))}}function y(r,u,p){var f=p.model.getModel("axisPointer",i),v=f.get("show");if(!!v&&("auto"!==v||!!r||!!WG(f))){null==u&&(u=f.get("triggerTooltip"));var y=(f=r?function(e,t,n,r,i,a){var s=t.getModel("axisPointer"),u={};Mb(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(e){u[e]=Mh(s.get(e))}),u.snap="category"!==e.type&&!!a,"cross"===s.get("type")&&(u.type="line");var c=u.label||(u.label={});if(null==c.show&&(c.show=!1),"cross"===i){var h=s.get(["label","show"]);if(c.show=null==h||h,!a){var p=u.lineStyle=s.get("crossStyle");p&&Mg(c,p.textStyle)}}return e.model.getModel("axisPointer",new Rb(u,n,r))}(p,h,i,t,r,u):f).get("snap"),_=f.get("triggerEmphasis"),x=WV(p.model),b=u||y||"category"===p.type,S=e.axesInfo[x]={key:x,axis:p,coordSys:n,axisPointerModel:f,triggerTooltip:u,triggerEmphasis:_,involveSeries:b,snap:y,useHandle:WG(f),seriesModels:[],linkGroup:null};c[x]=S,e.seriesInvolved=e.seriesInvolved||b;var w=function(e,t){for(var n=t.model,r=t.dim,i=0;i<e.length;i++){var a=e[i]||{};if(WU(a[r+"AxisId"],n.id)||WU(a[r+"AxisIndex"],n.componentIndex)||WU(a[r+"AxisName"],n.name))return i}}(a,p);if(null!=w){var M=s[w]||(s[w]={axesInfo:{}});M.axesInfo[x]=S,M.mapper=a[w].mapper,S.linkGroup=M}}}})}(r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}},n=e,t),r.seriesInvolved&&function(e,t){t.eachSeries(function(t){var n=t.coordinateSystem,r=t.get(["tooltip","trigger"],!0),i=t.get(["tooltip","show"],!0);if(!!n&&"none"!==r&&!1!==r&&"item"!==r&&!1!==i&&!1!==t.get(["axisPointer","show"],!0))Mb(e.coordSysAxesInfo[WV(n.model)],function(e){var r=e.axis;n.getAxis(r.dim)===r&&(e.seriesModels.push(t),null==e.seriesDataCount&&(e.seriesDataCount=0),e.seriesDataCount+=t.getData().count())})})}(r,n),r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},QJ)}var Q1=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.prototype.makeElOption=function(e,t,n,r,i){var a=n.axis;"angle"===a.dim&&(this.animationThreshold=Math.PI/18);var s=a.polar,u=s.getOtherAxis(a).getExtent(),c=a.dataToCoord(t),h=r.get("type");if(h&&"none"!==h){var p=QT(r),f=Q2[h](a,s,c,u);f.style=p,e.graphicKey=f.type,e.pointer=f}var v=r.get(["label","margin"]),y=function(e,t,n,r,i){var a,s,u,c=t.axis,h=c.dataToCoord(e),p=r.getAngleAxis().getExtent()[0];p=p/180*Math.PI;var f=r.getRadiusAxis().getExtent();if("radius"===c.dim){var v=AZ();A0(v,v,p),A$(v,v,[r.cx,r.cy]),a=B6([h,-i],v);var y=t.getModel("axisLabel").get("rotate")||0,_=WO.innerTextLayout(p,y*Math.PI/180,-1);s=_.textAlign,u=_.textVerticalAlign}else{var x=f[1];a=r.coordToPoint([x+i,h]);var b=r.cx,S=r.cy;s=Math.abs(a[0]-b)/x<.3?"center":a[0]>b?"left":"right",u=Math.abs(a[1]-S)/x<.3?"middle":a[1]>S?"top":"bottom"}return{position:a,align:s,verticalAlign:u}}(t,n,r,s,v);QE(e,n,r,i,y)},t}(QS),Q2={line:function(e,t,n,r){return"angle"===e.dim?{type:"Line",shape:QR(t.coordToPoint([r[0],n]),t.coordToPoint([r[1],n]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:n}}},shadow:function(e,t,n,r){var i=Math.max(1,e.getBandWidth()),a=Math.PI/180;return"angle"===e.dim?{type:"Sector",shape:QO(t.cx,t.cy,r[0],r[1],(-n-i/2)*a,(-n+i/2)*a)}:{type:"Sector",shape:QO(t.cx,t.cy,n-i/2,n+i/2,0,2*Math.PI)}}},Q3=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.findAxisModel=function(e){var t;return this.ecModel.eachComponent(e,function(e){e.getCoordSysModel()===this&&(t=e)},this),t},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={z:0,center:["50%","50%"],radius:"80%"},t}(Lv),Q5=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Ih).models[0]},t.type="polarAxis",t}(Lv);M_(Q5,Uq);var Q4=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.type="angleAxis",t}(Q5),Q6=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.type="radiusAxis",t}(Q5),Q9=function(e){function t(t,n){return e.call(this,"radius",t,n)||this}return wJ(t,e),t.prototype.pointToData=function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},t}(Hv);Q9.prototype.dataToRadius=Hv.prototype.dataToCoord,Q9.prototype.radiusToData=Hv.prototype.coordToData;var Q8=Is(),Q7=function(e){function t(t,n){return e.call(this,"angle",t,n||[0,360])||this}return wJ(t,e),t.prototype.pointToData=function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},t.prototype.calculateCategoryInterval=function(){var e=this.getLabelModel(),t=this.scale,n=t.getExtent(),r=t.count();if(n[1]-n[0]<1)return 0;var i=n[0],a=Math.abs(this.dataToCoord(i+1)-this.dataToCoord(i)),s=Math.max(Es(null==i?"":i+"",e.getFont(),"center","top").height,7)/a;isNaN(s)&&(s=1/0);var u=Math.max(0,Math.floor(s)),c=Q8(this.model),h=c.lastAutoInterval,p=c.lastTickCount;return null!=h&&null!=p&&1>=Math.abs(h-u)&&1>=Math.abs(p-r)&&h>u?u=h:(c.lastTickCount=r,c.lastAutoInterval=u),u},t}(Hv);Q7.prototype.dataToAngle=Hv.prototype.dataToCoord,Q7.prototype.angleToData=Hv.prototype.coordToData;var $e=["radius","angle"],$t=function(){function e(e){this.dimensions=$e,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new Q9,this._angleAxis=new Q7,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return e.prototype.containPoint=function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},e.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},e.prototype.getAxis=function(e){return this["_"+e+"Axis"]},e.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},e.prototype.getAxesByScale=function(e){var t=[],n=this._angleAxis,r=this._radiusAxis;return n.scale.type===e&&t.push(n),r.scale.type===e&&t.push(r),t},e.prototype.getAngleAxis=function(){return this._angleAxis},e.prototype.getRadiusAxis=function(){return this._radiusAxis},e.prototype.getOtherAxis=function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},e.prototype.getTooltipAxes=function(e){var t=null!=e&&"auto"!==e?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},e.prototype.dataToPoint=function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},e.prototype.pointToData=function(e,t){var n=this.pointToCoord(e);return[this._radiusAxis.radiusToData(n[0],t),this._angleAxis.angleToData(n[1],t)]},e.prototype.pointToCoord=function(e){var t=e[0]-this.cx,n=e[1]-this.cy,r=this.getAngleAxis(),i=r.getExtent(),a=Math.min(i[0],i[1]),s=Math.max(i[0],i[1]);r.inverse?a=s-360:s=a+360;var u=Math.sqrt(t*t+n*n);t/=u;for(var c=Math.atan2(-(n/=u),t)/Math.PI*180,h=c<a?1:-1;c<a||c>s;)c+=360*h;return[u,c]},e.prototype.coordToPoint=function(e){var t=e[0],n=e[1]/180*Math.PI;return[Math.cos(n)*t+this.cx,-Math.sin(n)*t+this.cy]},e.prototype.getArea=function(){var e=this.getAngleAxis(),t=this.getRadiusAxis().getExtent().slice();t[0]>t[1]&&t.reverse();var n=e.getExtent(),r=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:t[0],r:t[1],startAngle:-n[0]*r,endAngle:-n[1]*r,clockwise:e.inverse,contain:function(e,t){var n=e-this.cx,r=t-this.cy,i=n*n+r*r-1e-4,a=this.r,s=this.r0;return i<=a*a&&i>=s*s}}},e.prototype.convertToPixel=function(e,t,n){return $n(t)===this?this.dataToPoint(n):null},e.prototype.convertFromPixel=function(e,t,n){return $n(t)===this?this.pointToData(n):null},e}();function $n(e){var t=e.seriesModel,n=e.polarModel;return n&&n.coordinateSystem||t&&t.coordinateSystem}function $r(e,t){var n=this,r=n.getAngleAxis(),i=n.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),i.scale.setExtent(1/0,-1/0),e.eachSeries(function(e){if(e.coordinateSystem===n){var t=e.getData();Mb(UZ(t,"radius"),function(e){i.scale.unionExtentFromData(t,e)}),Mb(UZ(t,"angle"),function(e){r.scale.unionExtentFromData(t,e)})}}),UV(r.scale,r.model),UV(i.scale,i.model),"category"===r.type&&!r.onBand){var a=r.getExtent(),s=360/r.scale.count();r.inverse?a[1]+=s:a[1]-=s,r.setExtent(a[0],a[1])}}function $i(e,t){var n;if(e.type=t.get("type"),e.scale=UW(t),e.onBand=t.get("boundaryGap")&&"category"===e.type,e.inverse=t.get("inverse"),"angleAxis"===t.mainType){e.inverse=e.inverse!==t.get("clockwise");var r=t.get("startAngle"),i=null!==(n=t.get("endAngle"))&&void 0!==n?n:r+(e.inverse?-360:360);e.setExtent(r,i)}t.axis=e,e.model=t}let $a={dimensions:$e,create:function(e,t){var n=[];return e.eachComponent("polar",function(e,r){var i,a,s,u,c,h,p,f,v,y,_=new $t(r+"");_.update=$r;var x=_.getRadiusAxis(),b=_.getAngleAxis(),S=e.findAxisModel("radiusAxis"),w=e.findAxisModel("angleAxis");$i(x,S),$i(b,w),i=_,a=e,s=t,u=a.get("center"),c=s.getWidth(),h=s.getHeight(),i.cx=Ek(u[0],c),i.cy=Ek(u[1],h),p=i.getRadiusAxis(),f=Math.min(c,h)/2,null==(v=a.get("radius"))?v=[0,"100%"]:MI(v)||(v=[0,v]),y=[Ek(v[0],f),Ek(v[1],f)],p.inverse?p.setExtent(y[1],y[0]):p.setExtent(y[0],y[1]),n.push(_),e.coordinateSystem=_,_.model=e}),e.eachSeries(function(e){if("polar"===e.get("coordinateSystem")){var t=e.getReferringComponents("polar",Ih).models[0];e.coordinateSystem=t.coordinateSystem}}),n}};var $o=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function $s(e,t,n){t[1]>t[0]&&(t=t.slice().reverse());var r=e.coordToPoint([t[0],n]),i=e.coordToPoint([t[1],n]);return{x1:r[0],y1:r[1],x2:i[0],y2:i[1]}}function $l(e){return e.getRadiusAxis().inverse?0:1}function $u(e){var t=e[0],n=e[e.length-1];t&&n&&1e-4>Math.abs(Math.abs(t.coord-n.coord)-360)&&e.pop()}var $c=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="PolarAxisPointer",n}return wJ(t,e),t.prototype.render=function(e,t){if(this.group.removeAll(),!!e.get("show")){var n=e.axis,r=n.polar,i=r.getRadiusAxis().getExtent(),a=n.getTicksCoords(),s=n.getMinorTicksCoords(),u=MS(n.getViewLabels(),function(e){e=Mh(e);var t=n.scale,r="ordinal"===t.type?t.getRawOrdinalNumber(e.tickValue):e.tickValue;return e.coord=n.dataToCoord(r),e});$u(u),$u(a),Mb($o,function(t){e.get([t,"show"])&&(!n.scale.isBlank()||"axisLine"===t)&&$h[t](this.group,e,r,a,s,i,u)},this)}},t.type="angleAxis",t}(Wj),$h={axisLine:function(e,t,n,r,i,a){var s,u=t.getModel(["axisLine","lineStyle"]),c=n.getAngleAxis(),h=Math.PI/180,p=c.getExtent(),f=$l(n),v=f?0:1,y=360===Math.abs(p[1]-p[0])?"Circle":"Arc";(s=0===a[v]?new tf[y]({shape:{cx:n.cx,cy:n.cy,r:a[f],startAngle:-p[0]*h,endAngle:-p[1]*h,clockwise:c.inverse},style:u.getLineStyle(),z2:1,silent:!0}):new Bd({shape:{cx:n.cx,cy:n.cy,r:a[f],r0:a[v]},style:u.getLineStyle(),z2:1,silent:!0})).style.fill=null,e.add(s)},axisTick:function(e,t,n,r,i,a){var s=t.getModel("axisTick"),u=(s.get("inside")?-1:1)*s.get("length"),c=a[$l(n)],h=MS(r,function(e){return new Bw({shape:$s(n,[c,c+u],e.coord)})});e.add(B0(h,{style:Mg(s.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(e,t,n,r,i,a){if(!!i.length){for(var s=t.getModel("axisTick"),u=t.getModel("minorTick"),c=(s.get("inside")?-1:1)*u.get("length"),h=a[$l(n)],p=[],f=0;f<i.length;f++)for(var v=0;v<i[f].length;v++)p.push(new Bw({shape:$s(n,[h,h+c],i[f][v].coord)}));e.add(B0(p,{style:Mg(u.getModel("lineStyle").getLineStyle(),Mg(s.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(e,t,n,r,i,a,s){var u=t.getCategories(!0),c=t.getModel("axisLabel"),h=c.get("margin"),p=t.get("triggerEvent");Mb(s,function(r,i){var s=c,f=r.tickValue,v=a[$l(n)],y=n.coordToPoint([v+h,r.coord]),_=n.cx,x=n.cy,b=Math.abs(y[0]-_)/v<.3?"center":y[0]>_?"left":"right",S=Math.abs(y[1]-x)/v<.3?"middle":y[1]>x?"top":"bottom";if(u&&u[f]){var w=u[f];MO(w)&&w.textStyle&&(s=new Rb(w.textStyle,c,c.ecModel))}var M=new D8({silent:WO.isLabelSilent(t),style:Re(s,{x:y[0],y:y[1],fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:r.formattedLabel,align:b,verticalAlign:S})});if(e.add(M),p){var A=WO.makeAxisEventDataBase(t);A.targetType="axisLabel",A.value=r.rawLabel,D7(M).eventData=A}},this)},splitLine:function(e,t,n,r,i,a){var s=t.getModel("splitLine").getModel("lineStyle"),u=s.get("color"),c=0;u=u instanceof Array?u:[u];for(var h=[],p=0;p<r.length;p++){var f=c++%u.length;h[f]=h[f]||[],h[f].push(new Bw({shape:$s(n,a,r[p].coord)}))}for(var p=0;p<h.length;p++)e.add(B0(h[p],{style:Mg({stroke:u[p%u.length]},s.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(e,t,n,r,i,a){if(!!i.length){for(var s=t.getModel("minorSplitLine").getModel("lineStyle"),u=[],c=0;c<i.length;c++)for(var h=0;h<i[c].length;h++)u.push(new Bw({shape:$s(n,a,i[c][h].coord)}));e.add(B0(u,{style:s.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(e,t,n,r,i,a){if(!!r.length){var s=t.getModel("splitArea").getModel("areaStyle"),u=s.get("color"),c=0;u=u instanceof Array?u:[u];for(var h=[],p=Math.PI/180,f=-r[0].coord*p,v=Math.min(a[0],a[1]),y=Math.max(a[0],a[1]),_=t.get("clockwise"),x=1,b=r.length;x<=b;x++){var S=x===b?r[0].coord:r[x].coord,w=c++%u.length;h[w]=h[w]||[],h[w].push(new Bu({shape:{cx:n.cx,cy:n.cy,r0:v,r:y,startAngle:f,endAngle:-S*p,clockwise:_},silent:!0})),f=-S*p}for(var x=0;x<h.length;x++)e.add(B0(h[x],{style:Mg({fill:u[x%u.length]},s.getAreaStyle()),silent:!0}))}}},$d=["axisLine","axisTickLabel","axisName"],$p=["splitLine","splitArea","minorSplitLine"],$f=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="PolarAxisPointer",n}return wJ(t,e),t.prototype.render=function(e,t){if(this.group.removeAll(),!!e.get("show")){var n=this._axisGroup,r=this._axisGroup=new ES;this.group.add(r);var i=e.axis,a=i.polar,s=a.getAngleAxis(),u=i.getTicksCoords(),c=i.getMinorTicksCoords(),h=s.getExtent()[0],p=i.getExtent(),f=function(e,t,n){return{position:[e.cx,e.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}(a,e,h),v=new WO(e,f);Mb($d,v.add,v),r.add(v.getGroup()),B7(n,r,e),Mb($p,function(t){e.get([t,"show"])&&!i.scale.isBlank()&&$g[t](this.group,e,a,h,p,u,c)},this)}},t.type="radiusAxis",t}(Wj),$g={splitLine:function(e,t,n,r,i,a){var s=t.getModel("splitLine").getModel("lineStyle"),u=s.get("color"),c=0,h=n.getAngleAxis(),p=Math.PI/180,f=h.getExtent(),v=360===Math.abs(f[1]-f[0])?"Circle":"Arc";u=u instanceof Array?u:[u];for(var y=[],_=0;_<a.length;_++){var x=c++%u.length;y[x]=y[x]||[],y[x].push(new tf[v]({shape:{cx:n.cx,cy:n.cy,r:Math.max(a[_].coord,0),startAngle:-f[0]*p,endAngle:-f[1]*p,clockwise:h.inverse}}))}for(var _=0;_<y.length;_++)e.add(B0(y[_],{style:Mg({stroke:u[_%u.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(e,t,n,r,i,a,s){if(!!s.length){for(var u=t.getModel("minorSplitLine").getModel("lineStyle"),c=[],h=0;h<s.length;h++)for(var p=0;p<s[h].length;p++)c.push(new k2({shape:{cx:n.cx,cy:n.cy,r:s[h][p].coord}}));e.add(B0(c,{style:Mg({fill:null},u.getLineStyle()),silent:!0}))}},splitArea:function(e,t,n,r,i,a){if(!!a.length){var s=t.getModel("splitArea").getModel("areaStyle"),u=s.get("color"),c=0;u=u instanceof Array?u:[u];for(var h=[],p=a[0].coord,f=1;f<a.length;f++){var v=c++%u.length;h[v]=h[v]||[],h[v].push(new Bu({shape:{cx:n.cx,cy:n.cy,r0:p,r:a[f].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),p=a[f].coord}for(var f=0;f<h.length;f++)e.add(B0(h[f],{style:Mg({fill:u[f%u.length]},s.getAreaStyle()),silent:!0}))}}};function $m(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function $v(e,t){return t.dim+e.model.componentIndex}let $y=function(e,t,n){var r={},i=function(e){var t={};Mb(e,function(e,n){var r=e.getData(),i=e.coordinateSystem,a=i.getBaseAxis(),s=$v(i,a),u=a.getExtent(),c="category"===a.type?a.getBandWidth():Math.abs(u[1]-u[0])/r.count(),h=t[s]||{bandWidth:c,remainedWidth:c,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},p=h.stacks;t[s]=h;var f=$m(e);!p[f]&&h.autoWidthCount++,p[f]=p[f]||{width:0,maxWidth:0};var v=Ek(e.get("barWidth"),c),y=Ek(e.get("barMaxWidth"),c),_=e.get("barGap"),x=e.get("barCategoryGap");v&&!p[f].width&&(v=Math.min(h.remainedWidth,v),p[f].width=v,h.remainedWidth-=v),y&&(p[f].maxWidth=y),null!=_&&(h.gap=_),null!=x&&(h.categoryGap=x)});var n={};return Mb(t,function(e,t){n[t]={};var r,i=e.stacks,a=e.bandWidth,s=Ek(e.categoryGap,a),u=Ek(e.gap,1),c=e.remainedWidth,h=e.autoWidthCount,p=(c-s)/(h+(h-1)*u);p=Math.max(p,0),Mb(i,function(e,t){var n=e.maxWidth;n&&n<p&&(n=Math.min(n,c),e.width&&(n=Math.min(n,e.width)),c-=n,e.width=n,h--)}),p=Math.max(p=(c-s)/(h+(h-1)*u),0);var f=0;Mb(i,function(e,t){!e.width&&(e.width=p),r=e,f+=e.width*(1+u)}),r&&(f-=r.width*u);var v=-f/2;Mb(i,function(e,r){n[t][r]=n[t][r]||{offset:v,width:e.width},v+=e.width*(1+u)})}),n}(MM(t.getSeriesByType(e),function(e){return!t.isSeriesFiltered(e)&&e.coordinateSystem&&"polar"===e.coordinateSystem.type}));t.eachSeriesByType(e,function(e){if("polar"===e.coordinateSystem.type){var t=e.getData(),n=e.coordinateSystem,a=n.getBaseAxis(),s=$v(n,a),u=$m(e),c=i[s][u],h=c.offset,p=c.width,f=n.getOtherAxis(a),v=e.coordinateSystem.cx,y=e.coordinateSystem.cy,_=e.get("barMinHeight")||0,x=e.get("barMinAngle")||0;r[u]=r[u]||[];for(var b=t.mapDimension(f.dim),S=t.mapDimension(a.dim),w=z5(t,b),M="radius"!==a.dim||!e.get("roundCap",!0),A=f.model.get("startValue"),C=f.dataToCoord(A||0),T=0,I=t.count();T<I;T++){var D=t.get(b,T),P=t.get(S,T),R=D>=0?"p":"n",L=C;w&&(!r[u][P]&&(r[u][P]={p:C,n:C}),L=r[u][P][R]);var O=void 0,k=void 0,B=void 0,N=void 0;if("radius"===f.dim){var F=f.dataToCoord(D)-C,z=a.dataToCoord(P);Math.abs(F)<_&&(F=(F<0?-1:1)*_),O=L,k=L+F,N=(B=z-h)-p,w&&(r[u][P][R]=k)}else{var U=f.dataToCoord(D,M)-C,H=a.dataToCoord(P);Math.abs(U)<x&&(U=(U<0?-1:1)*x),k=(O=H+h)+p,B=L,N=L+U,w&&(r[u][P][R]=N)}t.setItemLayout(T,{cx:v,cy:y,r0:O,r:k,startAngle:-B*Math.PI/180,endAngle:-N*Math.PI/180,clockwise:B>=N})}}})};var $_={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},$x={splitNumber:5},$b=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.type="polar",t}(kR);function $S(e,t){t=t||{};var n=e.coordinateSystem,r=e.axis,i={},a=r.position,s=r.orient,u=n.getRect(),c=[u.x,u.x+u.width,u.y,u.y+u.height],h={horizontal:{top:c[2],bottom:c[3]},vertical:{left:c[0],right:c[1]}};i.position=["vertical"===s?h.vertical[a]:c[0],"horizontal"===s?h.horizontal[a]:c[3]];i.rotation=Math.PI/2*({horizontal:0,vertical:1})[s];i.labelDirection=i.tickDirection=i.nameDirection=({top:-1,bottom:1,right:1,left:-1})[a],e.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),MG(t.labelInside,e.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var p=t.rotate;return null==p&&(p=e.get(["axisLabel","rotate"])),i.labelRotation="top"===a?-p:p,i.z2=1,i}var $w=["axisLine","axisTickLabel","axisName"],$M=["splitArea","splitLine"],$A=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="SingleAxisPointer",n}return wJ(t,e),t.prototype.render=function(t,n,r,i){var a=this.group;a.removeAll();var s=this._axisGroup;this._axisGroup=new ES;var u=$S(t),c=new WO(t,u);Mb($w,c.add,c),a.add(this._axisGroup),a.add(c.getGroup()),Mb($M,function(e){t.get([e,"show"])&&$C[e](this,this.group,this._axisGroup,t)},this),B7(s,this._axisGroup,t),e.prototype.render.call(this,t,n,r,i)},t.prototype.remove=function(){WJ(this)},t.type="singleAxis",t}(Wj),$C={splitLine:function(e,t,n,r){var i=r.axis;if(!i.scale.isBlank()){var a=r.getModel("splitLine"),s=a.getModel("lineStyle"),u=s.get("color");u=u instanceof Array?u:[u];for(var c=s.get("width"),h=r.coordinateSystem.getRect(),p=i.isHorizontal(),f=[],v=0,y=i.getTicksCoords({tickModel:a}),_=[],x=[],b=0;b<y.length;++b){var S=i.toGlobalCoord(y[b].coord);p?(_[0]=S,_[1]=h.y,x[0]=S,x[1]=h.y+h.height):(_[0]=h.x,_[1]=S,x[0]=h.x+h.width,x[1]=S);var w=new Bw({shape:{x1:_[0],y1:_[1],x2:x[0],y2:x[1]},silent:!0});B2(w.shape,c);var M=v++%u.length;f[M]=f[M]||[],f[M].push(w)}for(var A=s.getLineStyle(["color"]),b=0;b<f.length;++b)t.add(B0(f[b],{style:Mg({stroke:u[b%u.length]},A),silent:!0}))}},splitArea:function(e,t,n,r){WY(e,n,r,r)}},$T=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t}(Lv);M_($T,Uq.prototype);var $E=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r)||this;return s.type=i||"value",s.position=a||"bottom",s}return wJ(t,e),t.prototype.isHorizontal=function(){var e=this.position;return"top"===e||"bottom"===e},t.prototype.pointToData=function(e,t){return this.coordinateSystem.pointToData(e)[0]},t}(Hv),$I=["single"],$D=function(){function e(e,t,n){this.type="single",this.dimension="single",this.dimensions=$I,this.axisPointerEnabled=!0,this.model=e,this._init(e,t,n)}return e.prototype._init=function(e,t,n){var r=new $E(this.dimension,UW(e),[0,0],e.get("type"),e.get("position")),i="category"===r.type;r.onBand=i&&e.get("boundaryGap"),r.inverse=e.get("inverse"),r.orient=e.get("orient"),e.axis=r,r.model=e,r.coordinateSystem=this,this._axis=r},e.prototype.update=function(e,t){e.eachSeries(function(e){if(e.coordinateSystem===this){var t=e.getData();Mb(t.mapDimensionsAll(this.dimension),function(e){this._axis.scale.unionExtentFromData(t,e)},this),UV(this._axis.scale,this._axis.model)}},this)},e.prototype.resize=function(e,t){this._rect=Lu({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},e.prototype.getRect=function(){return this._rect},e.prototype._adjustAxis=function(){var e=this._rect,t=this._axis,n=t.isHorizontal(),r=n?[0,e.width]:[0,e.height],i=t.inverse?1:0;t.setExtent(r[i],r[1-i]),this._updateAxisTransform(t,n?e.x:e.y)},e.prototype._updateAxisTransform=function(e,t){var n=e.getExtent(),r=n[0]+n[1],i=e.isHorizontal();e.toGlobalCoord=i?function(e){return e+t}:function(e){return r-e+t},e.toLocalCoord=i?function(e){return e-t}:function(e){return r-e+t}},e.prototype.getAxis=function(){return this._axis},e.prototype.getBaseAxis=function(){return this._axis},e.prototype.getAxes=function(){return[this._axis]},e.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},e.prototype.containPoint=function(e){var t=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:n.contain(n.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},e.prototype.pointToData=function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e["horizontal"===t.orient?0:1]))]},e.prototype.dataToPoint=function(e){var t=this.getAxis(),n=this.getRect(),r=[],i="horizontal"===t.orient?0:1;return e instanceof Array&&(e=e[0]),r[i]=t.toGlobalCoord(t.dataToCoord(+e)),r[1-i]=0===i?n.y+n.height/2:n.x+n.width/2,r},e.prototype.convertToPixel=function(e,t,n){return $P(t)===this?this.dataToPoint(n):null},e.prototype.convertFromPixel=function(e,t,n){return $P(t)===this?this.pointToData(n):null},e}();function $P(e){var t=e.seriesModel,n=e.singleAxisModel;return n&&n.coordinateSystem||t&&t.coordinateSystem}let $R={create:function(e,t){var n=[];return e.eachComponent("singleAxis",function(r,i){var a=new $D(r,e,t);a.name="single_"+i,a.resize(r,t),r.coordinateSystem=a,n.push(a)}),e.eachSeries(function(e){if("singleAxis"===e.get("coordinateSystem")){var t=e.getReferringComponents("singleAxis",Ih).models[0];e.coordinateSystem=t&&t.coordinateSystem}}),n},dimensions:$I};var $L=["x","y"],$O=["width","height"],$k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.prototype.makeElOption=function(e,t,n,r,i){var a=n.axis,s=a.coordinateSystem,u=$F(s,1-$N(a)),c=s.dataToPoint(t)[0],h=r.get("type");if(h&&"none"!==h){var p=QT(r),f=$B[h](a,c,u);f.style=p,e.graphicKey=f.type,e.pointer=f}QP(t,e,$S(n),n,r,i)},t.prototype.getHandleTransform=function(e,t,n){var r=$S(t,{labelInside:!1});r.labelMargin=n.get(["handle","margin"]);var i=QD(t.axis,e,r);return{x:i[0],y:i[1],rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,t,n,r){var i=n.axis,a=i.coordinateSystem,s=$N(i),u=$F(a,s),c=[e.x,e.y];c[s]+=t[s],c[s]=Math.min(u[1],c[s]),c[s]=Math.max(u[0],c[s]);var h=$F(a,1-s),p=(h[1]+h[0])/2,f=[p,p];return f[s]=c[s],{x:c[0],y:c[1],rotation:e.rotation,cursorPoint:f,tooltipOption:{verticalAlign:"middle"}}},t}(QS),$B={line:function(e,t,n){return{type:"Line",subPixelOptimize:!0,shape:QR([t,n[0]],[t,n[1]],$N(e))}},shadow:function(e,t,n){var r=e.getBandWidth(),i=n[1]-n[0];return{type:"Rect",shape:QL([t-r/2,n[0]],[r,i],$N(e))}}};function $N(e){return e.isHorizontal()?0:1}function $F(e,t){var n=e.getRect();return[n[$L[t]],n[$L[t]]+n[$O[t]]]}var $z=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.type="single",t}(kR),$U=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.init=function(t,n,r){var i=Lp(t);e.prototype.init.apply(this,arguments),$H(t,i)},t.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),$H(this.option,t)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(Lv);function $H(e,t){var n,r=e.cellSize;1===(n=MI(r)?r:e.cellSize=[r,r]).length&&(n[1]=n[0]);var i=MS([0,1],function(e){var r,i;if(null!=(r=t)[Ls[i=e][0]]||null!=r[Ls[i][1]]&&null!=r[Ls[i][2]])n[e]="auto";return null!=n[e]&&"auto"!==n[e]});Ld(e,t,{type:"box",ignoreSize:i})}var $G=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.render=function(e,t,n){var r=this.group;r.removeAll();var i=e.coordinateSystem,a=i.getRangeInfo(),s=i.getOrient(),u=t.getLocaleModel();this._renderDayRect(e,a,r),this._renderLines(e,a,s,r),this._renderYearText(e,a,s,r),this._renderMonthText(e,u,s,r),this._renderWeekText(e,u,a,s,r)},t.prototype._renderDayRect=function(e,t,n){for(var r=e.coordinateSystem,i=e.getModel("itemStyle").getItemStyle(),a=r.getCellWidth(),s=r.getCellHeight(),u=t.start.time;u<=t.end.time;u=r.getNextNDay(u,1).time){var c=r.dataToRect([u],!1).tl,h=new DX({shape:{x:c[0],y:c[1],width:a,height:s},cursor:"default",style:i});n.add(h)}},t.prototype._renderLines=function(e,t,n,r){var i=this,a=e.coordinateSystem,s=e.getModel(["splitLine","lineStyle"]).getLineStyle(),u=e.get(["splitLine","show"]),c=s.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var h=t.start,p=0;h.time<=t.end.time;p++){v(h.formatedDate),0===p&&(h=a.getDateInfo(t.start.y+"-"+t.start.m));var f=h.date;f.setMonth(f.getMonth()+1),h=a.getDateInfo(f)}function v(t){i._firstDayOfMonth.push(a.getDateInfo(t)),i._firstDayPoints.push(a.dataToRect([t],!1).tl);var c=i._getLinePointsOfOneWeek(e,t,n);i._tlpoints.push(c[0]),i._blpoints.push(c[c.length-1]),u&&i._drawSplitline(c,s,r)}v(a.getNextNDay(t.end.time,1).formatedDate),u&&this._drawSplitline(i._getEdgesPoints(i._tlpoints,c,n),s,r),u&&this._drawSplitline(i._getEdgesPoints(i._blpoints,c,n),s,r)},t.prototype._getEdgesPoints=function(e,t,n){var r=[e[0].slice(),e[e.length-1].slice()],i="horizontal"===n?0:1;return r[0][i]=r[0][i]-t/2,r[1][i]=r[1][i]+t/2,r},t.prototype._drawSplitline=function(e,t,n){var r=new B_({z2:20,shape:{points:e},style:t});n.add(r)},t.prototype._getLinePointsOfOneWeek=function(e,t,n){for(var r=e.coordinateSystem,i=r.getDateInfo(t),a=[],s=0;s<7;s++){var u=r.getNextNDay(i.time,s),c=r.dataToRect([u.time],!1);a[2*u.day]=c.tl,a[2*u.day+1]=c["horizontal"===n?"bl":"tr"]}return a},t.prototype._formatterLabel=function(e,t){if(MP(e)&&e){var n,r;return n=e,Mb(t,function(e,t){n=n.replace("{"+t+"}",e)}),n}return MD(e)?e(t):t.nameMap},t.prototype._yearTextPositionControl=function(e,t,n,r,i){var a=t[0],s=t[1],u=["center","bottom"];"bottom"===r?(s+=i,u=["center","top"]):"left"===r?a-=i:"right"===r?(a+=i,u=["center","top"]):s-=i;var c=0;return("left"===r||"right"===r)&&(c=Math.PI/2),{rotation:c,x:a,y:s,style:{align:u[0],verticalAlign:u[1]}}},t.prototype._renderYearText=function(e,t,n,r){var i=e.getModel("yearLabel");if(!!i.get("show")){var a=i.get("margin"),s=i.get("position");!s&&(s="horizontal"!==n?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],c=(u[0][0]+u[1][0])/2,h=(u[0][1]+u[1][1])/2,p="horizontal"===n?0:1,f={top:[c,u[p][1]],bottom:[c,u[1-p][1]],left:[u[1-p][0],h],right:[u[p][0],h]},v=t.start.y;+t.end.y>+t.start.y&&(v=v+"-"+t.end.y);var y=i.get("formatter"),_={start:t.start.y,end:t.end.y,nameMap:v},x=new D8({z2:30,style:Re(i,{text:this._formatterLabel(y,_)})});x.attr(this._yearTextPositionControl(x,f[s],n,s,a)),r.add(x)}},t.prototype._monthTextPositionControl=function(e,t,n,r,i){var a="left",s="top",u=e[0],c=e[1];return"horizontal"===n?(c+=i,t&&(a="center"),"start"===r&&(s="bottom")):(u+=i,t&&(s="middle"),"start"===r&&(a="right")),{x:u,y:c,align:a,verticalAlign:s}},t.prototype._renderMonthText=function(e,t,n,r){var i=e.getModel("monthLabel");if(!!i.get("show")){var a=i.get("nameMap"),s=i.get("margin"),u=i.get("position"),c=i.get("align"),h=[this._tlpoints,this._blpoints];if(!a||MP(a)){if(a)t=RC[a]||t;a=t.get(["time","monthAbbr"])||[]}var p="start"===u?0:1,f="horizontal"===n?0:1;s="start"===u?-s:s;for(var v="center"===c,y=0;y<h[p].length-1;y++){var _=h[p][y].slice(),x=this._firstDayOfMonth[y];if(v){var b=this._firstDayPoints[y];_[f]=(b[f]+h[0][y+1][f])/2}var S=i.get("formatter"),w=a[+x.m-1],M={yyyy:x.y,yy:(x.y+"").slice(2),MM:x.m,M:+x.m,nameMap:w},A=new D8({z2:30,style:Mf(Re(i,{text:this._formatterLabel(S,M)}),this._monthTextPositionControl(_,v,n,u,s))});r.add(A)}}},t.prototype._weekTextPositionControl=function(e,t,n,r,i){var a="center",s="middle",u=e[0],c=e[1],h="start"===n;return"horizontal"===t?(u=u+r+(h?1:-1)*i[0]/2,a=h?"right":"left"):(c=c+r+(h?1:-1)*i[1]/2,s=h?"bottom":"top"),{x:u,y:c,align:a,verticalAlign:s}},t.prototype._renderWeekText=function(e,t,n,r,i){var a=e.getModel("dayLabel");if(!!a.get("show")){var s=e.coordinateSystem,u=a.get("position"),c=a.get("nameMap"),h=a.get("margin"),p=s.getFirstDayOfWeek();if(!c||MP(c)){if(c)t=RC[c]||t;c=t.get(["time","dayOfWeekShort"])||MS(t.get(["time","dayOfWeekAbbr"]),function(e){return e[0]})}var f=s.getNextNDay(n.end.time,7-n.lweek).time,v=[s.getCellWidth(),s.getCellHeight()];h=Ek(h,Math.min(v[1],v[0])),"start"===u&&(f=s.getNextNDay(n.start.time,-(7+n.fweek)).time,h=-h);for(var y=0;y<7;y++){var _=s.getNextNDay(f,y),x=s.dataToRect([_.time],!1).center,b=y,S=new D8({z2:30,style:Mf(Re(a,{text:c[b=Math.abs((y+p)%7)]}),this._weekTextPositionControl(x,r,u,h,v))});i.add(S)}}},t.type="calendar",t}(kR),$V=function(){function e(t,n,r){this.type="calendar",this.dimensions=e.dimensions,this.getDimensionsInfo=e.getDimensionsInfo,this._model=t}return e.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},e.prototype.getRangeInfo=function(){return this._rangeInfo},e.prototype.getModel=function(){return this._model},e.prototype.getRect=function(){return this._rect},e.prototype.getCellWidth=function(){return this._sw},e.prototype.getCellHeight=function(){return this._sh},e.prototype.getOrient=function(){return this._orient},e.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},e.prototype.getDateInfo=function(e){var t=(e=EY(e)).getFullYear(),n=e.getMonth()+1,r=n<10?"0"+n:""+n,i=e.getDate(),a=i<10?"0"+i:""+i,s=e.getDay();return{y:t+"",m:r,d:a,day:s=Math.abs((s+7-this.getFirstDayOfWeek())%7),time:e.getTime(),formatedDate:t+"-"+r+"-"+a,date:e}},e.prototype.getNextNDay=function(e,t){return 0===(t=t||0)?this.getDateInfo(e):((e=new Date(this.getDateInfo(e).time)).setDate(e.getDate()+t),this.getDateInfo(e))},e.prototype.update=function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,r=["width","height"],i=this._model.getCellSize().slice(),a=this._model.getBoxLayoutParams(),s="horizontal"===this._orient?[n,7]:[7,n];Mb([0,1],function(e){h(i,e)&&(a[r[e]]=i[e]*s[e])});var u={width:t.getWidth(),height:t.getHeight()},c=this._rect=Lu(a,u);function h(e,t){return null!=e[t]&&"auto"!==e[t]}Mb([0,1],function(e){!h(i,e)&&(i[e]=c[r[e]]/s[e])}),this._sw=i[0],this._sh=i[1]},e.prototype.dataToPoint=function(e,t){MI(e)&&(e=e[0]),null==t&&(t=!0);var n=this.getDateInfo(e),r=this._rangeInfo,i=n.formatedDate;if(t&&!(n.time>=r.start.time&&n.time<r.end.time+864e5))return[NaN,NaN];var a=n.day,s=this._getRangeInfo([r.start.time,i]).nthWeek;return"vertical"===this._orient?[this._rect.x+a*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]},e.prototype.pointToData=function(e){var t=this.pointToDate(e);return t&&t.time},e.prototype.dataToRect=function(e,t){var n=this.dataToPoint(e,t);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},e.prototype.pointToDate=function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,n=Math.floor((e[1]-this._rect.y)/this._sh)+1,r=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,t-1,r):this._getDateByWeeksAndDay(t,n-1,r)},e.prototype.convertToPixel=function(e,t,n){var r=$W(t);return r===this?r.dataToPoint(n):null},e.prototype.convertFromPixel=function(e,t,n){var r=$W(t);return r===this?r.pointToData(n):null},e.prototype.containPoint=function(e){return!1},e.prototype._initRangeOption=function(){var e,t=this._model.get("range");if(MI(t)&&1===t.length&&(t=t[0]),MI(t))e=t;else{var n=t.toString();if(/^\d{4}$/.test(n)&&(e=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var r=this.getDateInfo(n),i=r.date;i.setMonth(i.getMonth()+1);var a=this.getNextNDay(i,-1);e=[r.formatedDate,a.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(e=[n,n])}if(!e)return t;var s=this._getRangeInfo(e);return s.start.time>s.end.time&&e.reverse(),e},e.prototype._getRangeInfo=function(e){var t,n=[this.getDateInfo(e[0]),this.getDateInfo(e[1])];n[0].time>n[1].time&&(t=!0,n.reverse());var r=Math.floor(n[1].time/864e5)-Math.floor(n[0].time/864e5)+1,i=new Date(n[0].time),a=i.getDate(),s=n[1].date.getDate();i.setDate(a+r-1);var u=i.getDate();if(u!==s){for(var c=i.getTime()-n[1].time>0?1:-1;(u=i.getDate())!==s&&(i.getTime()-n[1].time)*c>0;)r-=c,i.setDate(u-c)}var h=Math.floor((r+n[0].day+6)/7),p=t?-h+1:h-1;return t&&n.reverse(),{range:[n[0].formatedDate,n[1].formatedDate],start:n[0],end:n[1],allDay:r,weeks:h,nthWeek:p,fweek:n[0].day,lweek:n[1].day}},e.prototype._getDateByWeeksAndDay=function(e,t,n){var r=this._getRangeInfo(n);if(e>r.weeks||0===e&&t<r.fweek||e===r.weeks&&t>r.lweek)return null;var i=(e-1)*7-r.fweek+t,a=new Date(r.start.time);return a.setDate(+r.start.d+i),this.getDateInfo(a)},e.create=function(t,n){var r=[];return t.eachComponent("calendar",function(i){var a=new e(i,t,n);r.push(a),i.coordinateSystem=a}),t.eachSeries(function(e){"calendar"===e.get("coordinateSystem")&&(e.coordinateSystem=r[e.get("calendarIndex")||0])}),r},e.dimensions=["time","value"],e}();function $W(e){var t=e.calendarModel,n=e.seriesModel;return t?t.coordinateSystem:n?n.coordinateSystem:null}function $j(e,t){var n;return Mb(t,function(t){null!=e[t]&&"auto"!==e[t]&&(n=!0)}),n}var $X=["transition","enterFrom","leaveTo"],$Y=$X.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function $J(e,t,n){if(n&&(!e[n]&&t[n]&&(e[n]={}),e=e[n],t=t[n]),!!e&&!!t)for(var r=n?$X:$Y,i=0;i<r.length;i++){var a=r[i];null==e[a]&&null!=t[a]&&(e[a]=t[a])}}var $Z=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.preventAutoZ=!0,n}return wJ(t,e),t.prototype.mergeOption=function(t,n){var r=this.option.elements;this.option.elements=null,e.prototype.mergeOption.call(this,t,n),this.option.elements=r},t.prototype.optionUpdated=function(e,t){var n=this.option,r=(t?n:e).elements,i=n.elements=t?[]:n.elements,a=[];this._flatten(r,a,null);var s=Ie(i,a,"normalMerge"),u=this._elOptionsToUpdate=[];Mb(s,function(e,t){var n,r,a,s,c,h,p=e.newOption;if(!!p)u.push(p),!function(e,t){var n=e.existing;if(t.id=e.keyInfo.id,!t.type&&n&&(t.type=n.type),null==t.parentId){var r=t.parentOption;r?t.parentId=r.id:n&&(t.parentId=n.parentId)}t.parentOption=null}(e,p),n=i,r=t,s=Mf({},a=p),c=n[r],"merge"===(h=a.$action||"merge")?c?(Md(c,s,!0),Ld(c,s,{ignoreSize:!0}),Lf(a,c),$J(a,c),$J(a,c,"shape"),$J(a,c,"style"),$J(a,c,"extra"),a.clipPath=c.clipPath):n[r]=s:"replace"===h?n[r]=s:"remove"===h&&c&&(n[r]=null),!function(e,t){if(!!e)e.hv=t.hv=[$j(t,["left","right"]),$j(t,["top","bottom"])],"group"===e.type&&(null==e.width&&(e.width=t.width=0),null==e.height&&(e.height=t.height=0))}(i[t],p)},this),n.elements=MM(i,function(e){return e&&delete e.$action,null!=e})},t.prototype._flatten=function(e,t,n){Mb(e,function(e){if(!!e){n&&(e.parentOption=n),t.push(e);var r=e.children;r&&r.length&&this._flatten(r,t,e),delete e.children}},this)},t.prototype.useElOptionsToUpdate=function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e},t.type="graphic",t.defaultOption={elements:[]},t}(Lv),$q={path:null,compoundPath:null,group:ES,image:DF,text:D8},$K=Is(),$Q=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.init=function(){this._elMap=M1()},t.prototype.render=function(e,t,n){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,n)},t.prototype._updateElements=function(e){var t=e.useElOptionsToUpdate();if(!!t){var n=this._elMap,r=this.group,i=e.get("z"),a=e.get("zlevel");Mb(t,function(t){var s=Ir(t.id,null),u=null!=s?n.get(s):null,c=Ir(t.parentId,null),h=null!=c?n.get(c):r,p=t.type,f=t.style;"text"===p&&f&&t.hv&&t.hv[1]&&(f.textVerticalAlign=f.textBaseline=f.verticalAlign=f.align=null);var v=t.textContent,y=t.textConfig;if(f&&KO(f,p,!!y,!!v)){var _=Kk(f,p,!0);!y&&_.textConfig&&(y=t.textConfig=_.textConfig),!v&&_.textContent&&(v=_.textContent)}var x=function(e){return e=Mf({},e),Mb(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(Lo),function(t){delete e[t]}),e}(t),b=t.$action||"merge",S="merge"===b,w="replace"===b;if(S){var M=!u,A=u;M?A=$0(s,h,t.type,n):(A&&($K(A).isNew=!1),K1(A)),A&&(KW(A,x,e,{isInit:M}),$2(A,t,i,a))}else if(w){$1(u,t,n,e);var C=$0(s,h,t.type,n);C&&(KW(C,x,e,{isInit:!0}),$2(C,t,i,a))}else"remove"===b&&(Kj(u,t),$1(u,t,n,e));var T=n.get(s);if(T&&v){if(S){var I=T.getTextContent();I?I.attr(v):T.setTextContent(new D8(v))}else w&&T.setTextContent(new D8(v))}if(T){var D=t.clipPath;if(D){var P=D.type,R=void 0,M=!1;if(S){var L=T.getClipPath();R=(M=!L||$K(L).type!==P)?$$(P):L}else w&&(M=!0,R=$$(P));T.setClipPath(R),KW(R,D,e,{isInit:M}),K2(R,D.keyframeAnimation,e)}var O=$K(T);T.setTextConfig(y),O.option=t,function(e,t,n){var r=D7(e).eventData;!e.silent&&!e.ignore&&!r&&(r=D7(e).eventData={componentType:"graphic",componentIndex:t.componentIndex,name:e.name}),r&&(r.info=n.info)}(T,e,t),No({el:T,componentModel:e,itemName:T.name,itemTooltipOption:t.tooltip}),K2(T,t.keyframeAnimation,e)}})}},t.prototype._relocate=function(e,t){for(var n=e.option.elements,r=this.group,i=this._elMap,a=t.getWidth(),s=t.getHeight(),u=["x","y"],c=0;c<n.length;c++){var h=n[c],p=Ir(h.id,null),f=null!=p?i.get(p):null;if(!!f&&!!f.isGroup){var v=f.parent,y=v===r,_=$K(f),x=$K(v);_.width=Ek(_.option.width,y?a:x.width)||0,_.height=Ek(_.option.height,y?s:x.height)||0}}for(var c=n.length-1;c>=0;c--){var h=n[c],p=Ir(h.id,null),f=null!=p?i.get(p):null;if(!!f){var v=f.parent,x=$K(v),b=v===r?{width:a,height:s}:{width:x.width,height:x.height},S={},w=Lc(f,h,b,null,{hv:h.hv,boundingMode:h.bounding},S);if(!$K(f).isNew&&w){for(var M=h.transition,A={},C=0;C<u.length;C++){var T=u[C],I=S[T];M&&(KY(M)||Mv(M,T)>=0)?A[T]=I:f[T]=I}PQ(f,A,e,0)}else f.attr(S)}}},t.prototype._clear=function(){var e=this,t=this._elMap;t.each(function(n){$1(n,$K(n).option,t,e._lastGraphicModel)}),this._elMap=M1()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t}(kR);function $$(e){var t=M4($q,e)?$q[e]:Bq(e),n=new t({});return $K(n).type=e,n}function $0(e,t,n,r){var i=$$(n);return t.add(i),r.set(e,i),$K(i).id=e,$K(i).isNew=!0,i}function $1(e,t,n,r){e&&e.parent&&("group"===e.type&&e.traverse(function(e){$1(e,t,n,r)}),KX(e,t,r),n.removeKey($K(e).id))}function $2(e,t,n,r){!e.isGroup&&Mb([["cursor",IJ.prototype.cursor],["zlevel",r||0],["z",n||0],["z2",0]],function(n){var r=n[0];M4(t,r)?e[r]=MV(t[r],n[1]):null==e[r]&&(e[r]=n[1])}),Mb(MC(t),function(n){if(0===n.indexOf("on")){var r=t[n];e[n]=MD(r)?r:null}}),M4(t,"draggable")&&(e.draggable=t.draggable),null!=t.name&&(e.name=t.name),null!=t.id&&(e.id=t.id)}var $3=["x","y","radius","angle","single"],$5=["cartesian2d","polar","singleAxis"];function $4(e){return e+"Axis"}function $6(e){var t=e.ecModel,n={infoList:[],infoMap:M1()};return e.eachTargetAxis(function(e,r){var i=t.getComponent($4(e),r);if(!i)return;var a=i.getCoordSysModel();if(!!a){var s=a.uid,u=n.infoMap.get(s);!u&&(u={model:a,axisModels:[]},n.infoList.push(u),n.infoMap.set(s,u)),u.axisModels.push(i)}}),n}var $9=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(e){!this.indexMap[e]&&(this.indexList.push(e),this.indexMap[e]=!0)},e}(),$8=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return wJ(t,e),t.prototype.init=function(e,t,n){var r=$7(e);this.settledOption=r,this.mergeDefaultAndTheme(e,n),this._doInit(r)},t.prototype.mergeOption=function(e){var t=$7(e);Md(this.option,e,!0),Md(this.settledOption,t,!0),this._doInit(t)},t.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var n=this.settledOption;Mb([["start","startValue"],["end","endValue"]],function(e,r){"value"===this._rangePropMode[r]&&(t[e[0]]=n[e[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=M1();this._fillSpecifiedTargetAxis(t)?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each(function(e){e.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return Mb($3,function(n){var r=this.getReferringComponents($4(n),Id);if(!!r.specified){t=!0;var i=new $9;Mb(r.models,function(e){i.add(e.componentIndex)}),e.set(n,i)}},this),t},t.prototype._fillAutoTargetAxisByOrient=function(e,t){var n=this.ecModel,r=!0,i="vertical"===t?"y":"x",a=n.findComponents({mainType:i+"Axis"});s(a,i);if(r){var a=n.findComponents({mainType:"singleAxis",filter:function(e){return e.get("orient",!0)===t}});s(a,"single")}function s(t,n){var i=t[0];if(!!i){var a=new $9;if(a.add(i.componentIndex),e.set(n,a),r=!1,"x"===n||"y"===n){var s=i.getReferringComponents("grid",Ih).models[0];s&&Mb(t,function(e){i.componentIndex!==e.componentIndex&&s===e.getReferringComponents("grid",Ih).models[0]&&a.add(e.componentIndex)})}}}r&&Mb($3,function(t){if(!!r){var i=n.findComponents({mainType:$4(t),filter:function(e){return"category"===e.get("type",!0)}});if(i[0]){var a=new $9;a.add(i[0].componentIndex),e.set(t,a),r=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(t){e||(e=t)},this),"y"===e?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var t=this._rangePropMode,n=this.get("rangeMode");Mb([["start","startValue"],["end","endValue"]],function(r,i){var a=null!=e[r[0]],s=null!=e[r[1]];a&&!s?t[i]="percent":!a&&s?t[i]="value":n?t[i]=n[i]:a&&(t[i]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(t,n){null==e&&(e=this.ecModel.getComponent($4(t),n))},this),e},t.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each(function(n,r){Mb(n.indexList,function(n){e.call(t,r,n)})})},t.prototype.getAxisProxy=function(e,t){var n=this.getAxisModel(e,t);if(n)return n.__dzAxisProxy},t.prototype.getAxisModel=function(e,t){var n=this._targetAxisInfoMap.get(e);if(n&&n.indexMap[t])return this.ecModel.getComponent($4(e),t)},t.prototype.setRawRange=function(e){var t=this.option,n=this.settledOption;Mb([["start","startValue"],["end","endValue"]],function(r){(null!=e[r[0]]||null!=e[r[1]])&&(t[r[0]]=n[r[0]]=e[r[0]],t[r[1]]=n[r[1]]=e[r[1]])},this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var t=this.option;Mb(["start","startValue","end","endValue"],function(n){t[n]=e[n]})},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var n=this.findRepresentativeAxisProxy();if(n)return n.getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,n=this._targetAxisInfoMap.keys(),r=0;r<n.length;r++){for(var i=n[r],a=this._targetAxisInfoMap.get(i),s=0;s<a.indexList.length;s++){var u=this.getAxisProxy(i,a.indexList[s]);if(u.hostedBy(this))return u;!t&&(t=u)}}return t},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(Lv);function $7(e){var t={};return Mb(["start","end","startValue","endValue","throttle"],function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}var eee=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.type="dataZoom.select",t}($8),eet=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.render=function(e,t,n,r){this.dataZoomModel=e,this.ecModel=t,this.api=n},t.type="dataZoom",t}(kR),een=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.type="dataZoom.select",t}(eet),eer=Mb,eei=EN,eea=function(){function e(e,t,n,r){this._dimName=e,this._axisIndex=t,this.ecModel=r,this._dataZoomModel=n}return e.prototype.hostedBy=function(e){return this._dataZoomModel===e},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(t){if(Mv($5,t.get("coordinateSystem"))>=0){var n=$4(this._dimName),r=t.getReferringComponents(n,Ih).models[0];r&&this._axisIndex===r.componentIndex&&e.push(t)}},this),e},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return Mh(this._minMaxSpan)},e.prototype.calculateDataWindow=function(e){var t,n=this._dataExtent,r=this.getAxisModel().axis.scale,i=this._dataZoomModel.getRangePropMode(),a=[0,100],s=[],u=[];eer(["start","end"],function(c,h){var p=e[c],f=e[c+"Value"];"percent"===i[h]?(null==p&&(p=a[h]),f=r.parse(EO(p,a,n))):(t=!0,p=EO(f=null==f?n[h]:r.parse(f),n,a)),u[h]=null==f||isNaN(f)?n[h]:f,s[h]=null==p||isNaN(p)?a[h]:p}),eei(u),eei(s);var c=this._minMaxSpan;function h(e,t,n,i,a){var s=a?"Span":"ValueSpan";J$(0,e,n,"all",c["min"+s],c["max"+s]);for(var u=0;u<2;u++)t[u]=EO(e[u],n,i,!0),a&&(t[u]=r.parse(t[u]))}return t?h(u,s,n,a,!1):h(s,u,a,n,!0),{valueWindow:u,percentWindow:s}},e.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(e,t,n){var r=[1/0,-1/0];eer(n,function(e){var n,i,a;n=r,i=e.getData(),a=t,i&&Mb(UZ(i,a),function(e){var t=i.getApproximateExtent(e);t[0]<n[0]&&(n[0]=t[0]),t[1]>n[1]&&(n[1]=t[1])})});var i=e.getAxisModel(),a=UU(i.axis.scale,i,r).calculate();return[a.min,a.max]}(this,this._dimName,t),this._updateMinMaxSpan();var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(e,t){if(e!==this._dataZoomModel)return;var n=this._dimName,r=this.getTargetSeriesModels(),i=e.get("filterMode"),a=this._valueWindow;if("none"!==i)eer(r,function(e){var t=e.getData(),r=t.mapDimensionsAll(n);if(!!r.length){if("weakFilter"===i){var s=t.getStore(),u=MS(r,function(e){return t.getDimensionIndex(e)},t);t.filterSelf(function(e){for(var t,n,i,c=0;c<r.length;c++){var h=s.get(u[c],e),p=!isNaN(h),f=h<a[0],v=h>a[1];if(p&&!f&&!v)return!0;p&&(i=!0),f&&(t=!0),v&&(n=!0)}return i&&t&&n})}else eer(r,function(n){if("empty"===i)e.setData(t=t.map(n,function(e){return function(e){return e>=a[0]&&e<=a[1]}(e)?e:NaN}));else{var r={};r[n]=a,t.selectRange(r)}});eer(r,function(e){t.setApproximateExtent(a,e)})}})},e.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,n=this._dataExtent;eer(["min","max"],function(r){var i=t.get(r+"Span"),a=t.get(r+"ValueSpan");null!=a&&(a=this.getAxisModel().axis.scale.parse(a)),null!=a?i=EO(n[0]+a,n,[0,100],!0):null!=i&&(a=EO(i,[0,100],n,!0)-n[0]),e[r+"Span"]=i,e[r+"ValueSpan"]=a},this)},e.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,n=this._valueWindow;if(!!t){var r=EU(n,[0,500]);r=Math.min(r,20);var i=e.axis.scale.rawExtentInfo;0!==t[0]&&i.setDeterminedMinMax("min",+n[0].toFixed(r)),100!==t[1]&&i.setDeterminedMinMax("max",+n[1].toFixed(r)),i.freeze()}},e}();let eeo={getTargetSeries:function(e){function t(t){e.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(r,i){var a=e.getComponent($4(r),i);t(r,i,a,n)})})}t(function(e,t,n,r){n.__dzAxisProxy=null});var n=[];t(function(t,r,i,a){!i.__dzAxisProxy&&(i.__dzAxisProxy=new eea(t,r,a,e),n.push(i.__dzAxisProxy))});var r=M1();return Mb(n,function(e){Mb(e.getTargetSeriesModels(),function(e){r.set(e.uid,e)})}),r},overallReset:function(e,t){e.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(t,n){e.getAxisProxy(t,n).reset(e)}),e.eachTargetAxis(function(n,r){e.getAxisProxy(n,r).filterData(e,t)})}),e.eachComponent("dataZoom",function(e){var t=e.findRepresentativeAxisProxy();if(t){var n=t.getDataPercentWindow(),r=t.getDataValueWindow();e.setCalculatedRange({start:n[0],end:n[1],startValue:r[0],endValue:r[1]})}})}};var ees=!1;function eel(e){if(!ees)ees=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,eeo),!function(e){e.registerAction("dataZoom",function(e,t){Mb(function(e,t){var n,r=M1(),i=[],a=M1();e.eachComponent({mainType:"dataZoom",query:t},function(e){!a.get(e.uid)&&u(e)});do n=!1,e.eachComponent("dataZoom",s);while(n);function s(e){!a.get(e.uid)&&function(e){var t=!1;return e.eachTargetAxis(function(e,n){var i=r.get(e);i&&i[n]&&(t=!0)}),t}(e)&&(u(e),n=!0)}function u(e){a.set(e.uid,!0),i.push(e),function(e){e.eachTargetAxis(function(e,t){(r.get(e)||r.set(e,[]))[t]=!0})}(e)}return i}(t,e),function(t){t.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}(e),e.registerSubTypeDefaulter("dataZoom",function(){return"slider"})}function eeu(e){e.registerComponentModel(eee),e.registerComponentView(een),eel(e)}var eec=function(){},eeh={};function eed(e,t){eeh[e]=t}function eep(e){return eeh[e]}var eef=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;Mb(this.option.feature,function(e,n){var r=eeh[n];r&&(r.getDefaultOption&&(r.defaultOption=r.getDefaultOption(t)),Md(e,r.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(Lv);function eeg(e,t){var n=R4(t.get("padding")),r=t.getItemStyle(["color","opacity"]);return r.fill=t.get("backgroundColor"),e=new DX({shape:{x:e.x-n[3],y:e.y-n[0],width:e.width+n[1]+n[3],height:e.height+n[0]+n[2],r:t.get("borderRadius")},style:r,silent:!0,z2:-1})}var eem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.prototype.render=function(e,t,n,r){var i,a,s,u,c,h,p,f=this.group;if(f.removeAll(),!!e.get("show")){var v=+e.get("itemSize"),y="vertical"===e.get("orient"),_=e.get("feature")||{},x=this._features||(this._features={}),b=[];Mb(_,function(e,t){b.push(t)}),new zO(this._featureNames||[],b).add(S).update(S).remove(ME(S,null)).execute(),this._featureNames=b;i=f,a=e,s=n,u=a.getBoxLayoutParams(),c=a.get("padding"),p=Lu(u,h={width:s.getWidth(),height:s.getHeight()},c),Ll(a.get("orient"),i,a.get("itemGap"),p.width,p.height),Lc(i,u,h,c),f.add(eeg(f.getBoundingRect(),e)),y||f.eachChild(function(e){var t=e.__title,r=e.ensureState("emphasis"),i=r.textConfig||(r.textConfig={}),a=e.getTextContent(),s=a&&a.ensureState("emphasis");if(s&&!MD(s)&&t){var u=s.style||(s.style={}),c=Es(t,D8.makeFont(u)),h=e.x+f.x,p=e.y+f.y+v,y=!1;p+c.height>n.getHeight()&&(i.position="top",y=!0);var _=y?-5-c.height:v+10;h+c.width/2>n.getWidth()?(i.position=["100%",_],u.align="right"):h-c.width/2<0&&(i.position=[0,_],u.align="left")}})}function S(i,a){var s,u=b[i],c=b[a],h=_[u],p=new Rb(h,e,e.ecModel);if(r&&null!=r.newTitle&&r.featureName===u&&(h.title=r.newTitle),u&&!c){if(function(e){return 0===e.indexOf("my")}(u))s={onclick:p.option.onclick,featureName:u};else{var S=eeh[u];if(!S)return;s=new S}x[u]=s}else if(!(s=x[c]))return;s.uid=Rw("toolbox-feature"),s.model=p,s.ecModel=t,s.api=n;var w=s instanceof eec;if(!u&&c){w&&s.dispose&&s.dispose(t,n);return}if(!p.get("show")||w&&s.unusable){w&&s.remove&&s.remove(t,n);return}(function(r,i,a){var s,u,c=r.getModel("iconStyle"),h=r.getModel(["emphasis","iconStyle"]),p=i instanceof eec&&i.getIcons?i.getIcons():r.get("icon"),_=r.get("title")||{};MP(p)?(s={})[a]=p:s=p,MP(_)?(u={})[a]=_:u=_;var x=r.iconPaths={};Mb(s,function(a,s){var p=Nn(a,{},{x:-v/2,y:-v/2,width:v,height:v});p.setStyle(c.getItemStyle()),p.ensureState("emphasis").style=h.getItemStyle();var _=new D8({style:{text:u[s],align:h.get("textAlign"),borderRadius:h.get("textBorderRadius"),padding:h.get("textPadding"),fill:null,font:Ro({fontStyle:h.get("textFontStyle"),fontFamily:h.get("textFontFamily"),fontSize:h.get("textFontSize"),fontWeight:h.get("textFontWeight")},t)},ignore:!0});p.setTextContent(_),No({el:p,componentModel:e,itemName:s,formatterParamsExtra:{title:u[s]}}),p.__title=u[s],p.on("mouseover",function(){var t=h.getItemStyle(),r=y?null==e.get("right")&&"right"!==e.get("left")?"right":"left":null==e.get("bottom")&&"bottom"!==e.get("top")?"bottom":"top";_.setStyle({fill:h.get("textFill")||t.fill||t.stroke||"#000",backgroundColor:h.get("textBackgroundColor")}),p.setTextConfig({position:h.get("textPosition")||r}),_.ignore=!e.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){"emphasis"!==r.get(["iconStatus",s])&&n.leaveEmphasis(this),_.hide()}),("emphasis"===r.get(["iconStatus",s])?PT:PE)(p),f.add(p),p.on("click",MT(i.onclick,i,t,n,s)),x[s]=p})})(p,s,u),p.setIconStatus=function(e,t){var n=this.option,r=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[e]=t,r[e]&&("emphasis"===t?PT:PE)(r[e])},s instanceof eec&&s.render&&s.render(p,t,n,r)}},t.prototype.updateView=function(e,t,n,r){Mb(this._features,function(e){e instanceof eec&&e.updateView&&e.updateView(e.model,t,n,r)})},t.prototype.remove=function(e,t){Mb(this._features,function(n){n instanceof eec&&n.remove&&n.remove(e,t)}),this.group.removeAll()},t.prototype.dispose=function(e,t){Mb(this._features,function(n){n instanceof eec&&n.dispose&&n.dispose(e,t)})},t.type="toolbox",t}(kR),eev=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.prototype.onclick=function(e,t){var n=this.model,r=n.get("name")||e.get("title.0.text")||"echarts",i="svg"===t.getZr().painter.getType(),a=i?"svg":n.get("type",!0)||"png",s=t.getConnectedDataURL({type:a,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),u=w1.browser;if("function"!=typeof MouseEvent||!u.newEdge&&(u.ie||u.edge)){if(window.navigator.msSaveOrOpenBlob||i){var c=s.split(","),h=c[0].indexOf("base64")>-1,p=i?decodeURIComponent(c[1]):c[1];h&&(p=window.atob(p));var f=r+"."+a;if(window.navigator.msSaveOrOpenBlob){for(var v=p.length,y=new Uint8Array(v);v--;)y[v]=p.charCodeAt(v);var _=new Blob([y]);window.navigator.msSaveOrOpenBlob(_,f)}else{var x=document.createElement("iframe");document.body.appendChild(x);var b=x.contentWindow,S=b.document;S.open("image/svg+xml","replace"),S.write(p),S.close(),b.focus(),S.execCommand("SaveAs",!0,f),document.body.removeChild(x)}}else{var w=n.get("lang"),M='<body style="margin:0;"><img src="'+s+'" style="max-width:100%;" title="'+(w&&w[0]||"")+'" /></body>',A=window.open();A.document.write(M),A.document.title=r}}else{var C=document.createElement("a");C.download=r+"."+a,C.target="_blank",C.href=s;var T=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});C.dispatchEvent(T)}},t.getDefaultOption=function(e){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},t}(eec),eey="__ec_magicType_stack__",ee_=[["line","bar"],["stack"]],eex=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.prototype.getIcons=function(){var e=this.model,t=e.get("icon"),n={};return Mb(e.get("type"),function(e){t[e]&&(n[e]=t[e])}),n},t.getDefaultOption=function(e){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},t.prototype.onclick=function(e,t,n){var r,i=this.model,a=i.get(["seriesIndex",n]);if(!!eeb[n]){var s={series:[]};Mb(ee_,function(e){Mv(e,n)>=0&&Mb(e,function(e){i.setIconStatus(e,"normal")})}),i.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:null==a?null:{seriesIndex:a}},function(e){var t=e.subType,r=e.id,a=eeb[n](t,r,e,i);a&&(Mg(a,e.option),s.series.push(a));var u=e.coordinateSystem;if(u&&"cartesian2d"===u.type&&("line"===n||"bar"===n)){var c=u.getAxesByScale("ordinal")[0];if(c){var h=c.dim+"Axis",p=e.getReferringComponents(h,Ih).models[0].componentIndex;s[h]=s[h]||[];for(var f=0;f<=p;f++)s[h][p]=s[h][p]||{};s[h][p].boundaryGap="bar"===n}}});var u=n;"stack"===n&&(r=Md({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),"emphasis"!==i.get(["iconStatus",n])&&(u="tiled")),t.dispatchAction({type:"changeMagicType",currentType:u,newOption:s,newTitle:r,featureName:"magicType"})}},t}(eec),eeb={line:function(e,t,n,r){if("bar"===e)return Md({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(e,t,n,r){if("line"===e)return Md({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(e,t,n,r){var i=n.get("stack")===eey;if("line"===e||"bar"===e)return r.setIconStatus("stack",i?"normal":"emphasis"),Md({id:t,stack:i?"":eey},r.get(["option","stack"])||{},!0)}};zm({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,t){t.mergeOption(e.newOption)});var eeS=Array(60).join("-");function eew(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var eeM=RegExp("[	]+","g"),eeA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.prototype.onclick=function(e,t){setTimeout(function(){t.dispatchAction({type:"hideTip"})});var n=t.getDom(),r=this.model;this._dom&&n.removeChild(this._dom);var i=document.createElement("div");i.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",i.style.backgroundColor=r.get("backgroundColor")||"#fff";var a=document.createElement("h4"),s=r.get("lang")||[];a.innerHTML=s[0]||r.get("title"),a.style.cssText="margin:10px 20px",a.style.color=r.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="overflow:auto";var h=r.get("optionToContent"),p=r.get("contentToOption"),f=function(e){var t,n,r,i,a,s=(t={},n=[],r=[],e.eachRawSeries(function(e){var i=e.coordinateSystem;if(i&&("cartesian2d"===i.type||"polar"===i.type)){var a=i.getBaseAxis();if("category"===a.type){var s=a.dim+"_"+a.index;!t[s]&&(t[s]={categoryAxis:a,valueAxis:i.getOtherAxis(a),series:[]},r.push({axisDim:a.dim,axisIndex:a.index})),t[s].series.push(e)}else n.push(e)}else n.push(e)}),{seriesGroupByCategoryAxis:t,other:n,meta:r});return{value:MM([(i=s.seriesGroupByCategoryAxis,a=[],Mb(i,function(e,t){var n=e.categoryAxis,r=e.valueAxis.dim,i=[" "].concat(MS(e.series,function(e){return e.name})),s=[n.model.getCategories()];Mb(e.series,function(e){var t=e.getRawData();s.push(e.getRawData().mapArray(t.mapDimension(r),function(e){return e}))});for(var u=[i.join("	")],c=0;c<s[0].length;c++){for(var h=[],p=0;p<s.length;p++)h.push(s[p][c]);u.push(h.join("	"))}a.push(u.join("\n"))}),a.join("\n\n"+eeS+"\n\n")),MS(s.other,function(e){var t=e.getRawData(),n=[e.name],r=[];return t.each(t.dimensions,function(){for(var e=arguments.length,i=arguments[e-1],a=t.getName(i),s=0;s<e-1;s++)r[s]=arguments[s];n.push((a?a+"	":"")+r.join("	"))}),n.join("\n")}).join("\n\n"+eeS+"\n\n")],function(e){return!!e.replace(/[\n\t\s]/g,"")}).join("\n\n"+eeS+"\n\n"),meta:s.meta}}(e);if(MD(h)){var v=h(t.getOption());MP(v)?u.innerHTML=v:MN(v)&&u.appendChild(v)}else{c.readOnly=r.get("readOnly");var y=c.style;y.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",y.color=r.get("textColor"),y.borderColor=r.get("textareaBorderColor"),y.backgroundColor=r.get("textareaColor"),c.value=f.value,u.appendChild(c)}var _=f.meta,x=document.createElement("div");x.style.cssText="position:absolute;bottom:5px;left:0;right:0";var b="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",S=document.createElement("div"),w=document.createElement("div");b+=";background-color:"+r.get("buttonColor")+(";color:"+r.get("buttonTextColor"));var M=this;function A(){n.removeChild(i),M._dom=null}AV(S,"click",A),AV(w,"click",function(){var e,n,r,i,a;if(null==p&&null!=h||null!=p&&null==h){A();return}try{if(MD(p))e=p(u,t.getOption());else{;n=c.value,r=_,i=n.split(RegExp("\n*"+eeS+"\n*","g")),a={series:[]},Mb(i,function(e,t){if(function(e){if(e.slice(0,e.indexOf("\n")).indexOf("	")>=0)return!0}(e)){var n=function(e){for(var t=e.split(/\n+/g),n=eew(t.shift()).split(eeM),r=[],i=MS(n,function(e){return{name:e,data:[]}}),a=0;a<t.length;a++){var s=eew(t[a]).split(eeM);r.push(s.shift());for(var u=0;u<s.length;u++)i[u]&&(i[u].data[a]=s[u])}return{series:i,categories:r}}(e),i=r[t],s=i.axisDim+"Axis";i&&(a[s]=a[s]||[],a[s][i.axisIndex]={data:n.categories},a.series=a.series.concat(n.series))}else{var n=function(e){for(var t=e.split(/\n+/g),n=eew(t.shift()),r=[],i=0;i<t.length;i++){var a=eew(t[i]);if(!!a){var s=a.split(eeM),u="",c=void 0,h=!1;isNaN(s[0])?(h=!0,u=s[0],s=s.slice(1),r[i]={name:u,value:[]},c=r[i].value):c=r[i]=[];for(var p=0;p<s.length;p++)c.push(+s[p]);1===c.length&&(h?r[i].value=c[0]:r[i]=c[0])}}return{name:n,data:r}}(e);a.series.push(n)}}),e=a}}catch(e){throw A(),Error("Data view format error "+e)}e&&t.dispatchAction({type:"changeDataView",newOption:e}),A()}),S.innerHTML=s[1],w.innerHTML=s[2],w.style.cssText=S.style.cssText=b,r.get("readOnly")||x.appendChild(w),x.appendChild(S),i.appendChild(a),i.appendChild(u),i.appendChild(x),u.style.height=n.clientHeight-80+"px",n.appendChild(i),this._dom=i},t.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,t){this.remove(e,t)},t.getDefaultOption=function(e){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},t}(eec);zm({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,t){var n=[];Mb(e.newOption.series,function(e){var r=t.getSeriesByName(e.name)[0];if(r){var i,a,s=r.get("data");n.push({name:e.name,data:(i=e.data,a=s,MS(i,function(e,t){var n=a&&a[t];if(!MO(n)||MI(n))return e;!(MO(e)&&!MI(e))&&(e={value:e});var r=null!=n.name&&null==e.name;return e=Mg(e,n),r&&delete e.name,e}))})}else n.push(Mf({type:"scatter"},e))}),t.mergeOption(Mg({series:n},e.newOption))});var eeC=Mb,eeT=Is();function eeE(e){var t=eeT(e);return!t.snapshots&&(t.snapshots=[{}]),t.snapshots}var eeI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.prototype.onclick=function(e,t){eeT(e).snapshots=null,t.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])}},t}(eec);zm({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,t){t.resetOption("recreate")});var eeD=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],eeP=function(){function e(e,t,n){var r=this;this._targetInfoList=[];var i=eeL(t,e);Mb(eeO,function(e,t){(!n||!n.include||Mv(n.include,t)>=0)&&e(i,r._targetInfoList)})}return e.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(e,t,n){if((e.coordRanges||(e.coordRanges=[])).push(t),!e.coordRange){e.coordRange=t;var r=eeN[e.brushType](0,n,t);e.__rangeOffset={offset:eez[e.brushType](r.values,e.range,[1,1]),xyMinMax:r.xyMinMax}}}),e},e.prototype.matchOutputRanges=function(e,t,n){Mb(e,function(e){var r=this.findTargetInfo(e,t);r&&!0!==r&&Mb(r.coordSyses,function(r){var i=eeN[e.brushType](1,r,e.range,!0);n(e,i.values,r,t)})},this)},e.prototype.setInputRanges=function(e,t){Mb(e,function(e){var n=this.findTargetInfo(e,t);if(e.range=e.range||[],n&&!0!==n){e.panelId=n.panelId;var r=eeN[e.brushType](0,n.coordSys,e.coordRange),i=e.__rangeOffset;e.range=i?eez[e.brushType](r.values,i.offset,function(e,t){var n=eeH(e),r=eeH(t),i=[n[0]/r[0],n[1]/r[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}(r.xyMinMax,i.xyMinMax)):r.values}},this)},e.prototype.makePanelOpts=function(e,t){return MS(this._targetInfoList,function(n){var r=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t?t(n):null,clipPath:ZG(r),isTargetByCursor:ZW(r,e,n.coordSysModel),getLinearBrushOtherExtent:ZV(r)}})},e.prototype.controlSeries=function(e,t,n){var r=this.findTargetInfo(e,n);return!0===r||r&&Mv(r.coordSyses,t.coordinateSystem)>=0},e.prototype.findTargetInfo=function(e,t){for(var n=this._targetInfoList,r=eeL(t,e),i=0;i<n.length;i++){var a=n[i],s=e.panelId;if(s){if(a.panelId===s)return a}else for(var u=0;u<eek.length;u++)if(eek[u](r,a))return a}return!0},e}();function eeR(e){return e[0]>e[1]&&e.reverse(),e}function eeL(e,t){return Iu(e,t,{includeMainTypes:eeD})}var eeO={grid:function(e,t){var n=e.xAxisModels,r=e.yAxisModels,i=e.gridModels,a=M1(),s={},u={};if(!!n||!!r||!!i)Mb(n,function(e){var t=e.axis.grid.model;a.set(t.id,t),s[t.id]=!0}),Mb(r,function(e){var t=e.axis.grid.model;a.set(t.id,t),u[t.id]=!0}),Mb(i,function(e){a.set(e.id,e),s[e.id]=!0,u[e.id]=!0}),a.each(function(e){var i=e.coordinateSystem,a=[];Mb(i.getCartesians(),function(e,t){(Mv(n,e.getAxis("x").model)>=0||Mv(r,e.getAxis("y").model)>=0)&&a.push(e)}),t.push({panelId:"grid--"+e.id,gridModel:e,coordSysModel:e,coordSys:a[0],coordSyses:a,getPanelRect:eeB.grid,xAxisDeclared:s[e.id],yAxisDeclared:u[e.id]})})},geo:function(e,t){Mb(e.geoModels,function(e){var n=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:n,coordSyses:[n],getPanelRect:eeB.geo})})}},eek=[function(e,t){var n=e.xAxisModel,r=e.yAxisModel,i=e.gridModel;return!i&&n&&(i=n.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],eeB={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(B4(e)),t}},eeN={lineX:ME(eeF,0),lineY:ME(eeF,1),rect:function(e,t,n,r){var i=e?t.pointToData([n[0][0],n[1][0]],r):t.dataToPoint([n[0][0],n[1][0]],r),a=e?t.pointToData([n[0][1],n[1][1]],r):t.dataToPoint([n[0][1],n[1][1]],r),s=[eeR([i[0],a[0]]),eeR([i[1],a[1]])];return{values:s,xyMinMax:s}},polygon:function(e,t,n,r){var i=[[1/0,-1/0],[1/0,-1/0]];return{values:MS(n,function(n){var a=e?t.pointToData(n,r):t.dataToPoint(n,r);return i[0][0]=Math.min(i[0][0],a[0]),i[1][0]=Math.min(i[1][0],a[1]),i[0][1]=Math.max(i[0][1],a[0]),i[1][1]=Math.max(i[1][1],a[1]),a}),xyMinMax:i}}};function eeF(e,t,n,r){var i=n.getAxis(["x","y"][e]),a=eeR(MS([0,1],function(e){return t?i.coordToData(i.toLocalCoord(r[e]),!0):i.toGlobalCoord(i.dataToCoord(r[e]))})),s=[];return s[e]=a,s[1-e]=[NaN,NaN],{values:a,xyMinMax:s}}var eez={lineX:ME(eeU,0),lineY:ME(eeU,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return MS(e,function(e,r){return[e[0]-n[0]*t[r][0],e[1]-n[1]*t[r][1]]})}};function eeU(e,t,n,r){return[t[0]-r[e]*n[0],t[1]-r[e]*n[1]]}function eeH(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var eeG=Mb,eeV=E4+"toolbox-dataZoom_",eeW=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.prototype.render=function(e,t,n,r){!this._brushController&&(this._brushController=new Zh(n.getZr()),this._brushController.on("brush",MT(this._onBrush,this)).mount()),function(e,t,n,r,i){var a=n._isZoomActive;r&&"takeGlobalCursor"===r.type&&(a="dataZoomSelect"===r.key&&r.dataZoomSelectActive),n._isZoomActive=a,e.setIconStatus("zoom",a?"emphasis":"normal");var s=new eeP(eeX(e),t,{include:["grid"]}).makePanelOpts(i,function(e){return e.xAxisDeclared&&!e.yAxisDeclared?"lineX":!e.xAxisDeclared&&e.yAxisDeclared?"lineY":"rect"});n._brushController.setPanels(s).enableBrush(!!a&&!!s.length&&{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()})}(e,t,this,r,n),function(e,t){e.setIconStatus("back",eeE(t).length>1?"emphasis":"normal")}(e,t)},t.prototype.onclick=function(e,t,n){eej[n].call(this)},t.prototype.remove=function(e,t){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,t){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var t,n,r,i=e.areas;if(!!e.isEnd&&!!i.length){var a={},s=this.ecModel;this._brushController.updateCovers([]),new eeP(eeX(this.model),s,{include:["grid"]}).matchOutputRanges(i,s,function(e,t,n){if("cartesian2d"===n.type){var r=e.brushType;"rect"===r?(u("x",n,t[0]),u("y",n,t[1])):u({lineX:"x",lineY:"y"}[r],n,t)}}),t=s,n=a,r=eeE(t),eeC(n,function(e,n){for(var i=r.length-1;i>=0&&!r[i][n];i--);if(i<0){var a=t.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(a){var s=a.getPercentRange();r[0][n]={dataZoomId:n,start:s[0],end:s[1]}}}}),r.push(n),this._dispatchZoomAction(a)}function u(e,t,n){var r=t.getAxis(e),i=r.model,u=function(e,t,n){var r;return n.eachComponent({mainType:"dataZoom",subType:"select"},function(n){n.getAxisModel(e,t.componentIndex)&&(r=n)}),r}(e,i,s),c=u.findRepresentativeAxisProxy(i).getMinMaxSpan();(null!=c.minValueSpan||null!=c.maxValueSpan)&&(n=J$(0,n.slice(),r.scale.getExtent(),0,c.minValueSpan,c.maxValueSpan)),u&&(a[u.id]={dataZoomId:u.id,startValue:n[0],endValue:n[1]})}},t.prototype._dispatchZoomAction=function(e){var t=[];eeG(e,function(e,n){t.push(Mh(e))}),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},t.getDefaultOption=function(e){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},t}(eec),eej={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){var e,t,n;this._dispatchZoomAction((t=(e=eeE(this.ecModel))[e.length-1],e.length>1&&e.pop(),n={},eeC(t,function(t,r){for(var i=e.length-1;i>=0;i--)if(t=e[i][r]){n[r]=t;break}}),n))}};function eeX(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return null==t.xAxisIndex&&null==t.xAxisId&&(t.xAxisIndex="all"),null==t.yAxisIndex&&null==t.yAxisId&&(t.yAxisIndex="all"),t}!function(e,t){MY(null==LB.get(e)&&t),LB.set(e,t)}("dataZoom",function(e){var t=e.getComponent("toolbox",0),n=["feature","dataZoom"];if(!!t&&null!=t.get(n)){var r=t.getModel(n),i=[],a=Iu(e,eeX(r));return eeG(a.xAxisModels,function(e){return s(e,"xAxis","xAxisIndex")}),eeG(a.yAxisModels,function(e){return s(e,"yAxis","yAxisIndex")}),i}function s(e,t,n){var a=e.componentIndex,s={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:eeV+t+a};s[n]=a,i.push(s)}});var eeY=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(Lv);function eeJ(e){var t=e.get("confine");return null!=t?!!t:"richText"===e.get("renderMode")}function eeZ(e){if(!!w1.domSupported){for(var t=document.documentElement.style,n=0,r=e.length;n<r;n++)if(e[n]in t)return e[n]}}var eeq=eeZ(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),eeK=eeZ(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function eeQ(e,t){if(!e)return t;t=R5(t,!0);var n=e.indexOf(t);return(e=-1===n?t:"-"+e.slice(0,n)+"-"+t).toLowerCase()}var ee$=eeQ(eeK,"transition"),ee0=eeQ(eeq,"transform"),ee1="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(w1.transform3dSupported?"will-change:transform;":"");function ee2(e,t,n){var r=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!w1.transformSupported)return n?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var a=w1.transform3dSupported,s="translate"+(a?"3d":"")+"("+r+","+i+(a?",0":"")+")";return n?"top:0;left:0;"+ee0+":"+s+";":[["top",0],["left",0],[eeq,s]]}function ee3(e,t,n,r,i){var a=t&&t.painter;if(n){var s,u,c,h=a&&a.getViewportRoot();if(h){;s=e,u=h,c=n,AP(AD,u,r,i,!0)&&AP(s,c,AD[0],AD[1])}}else{e[0]=r,e[1]=i;var p=a&&a.getViewportRootOffset();p&&(e[0]+=p.offsetLeft,e[1]+=p.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var ee5=function(){function e(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,w1.wxa)return null;var n=document.createElement("div");n.domBelongToZr=!0,this.el=n;var r=this._zr=e.getZr(),i=t.appendTo,a=i&&(MP(i)?document.querySelector(i):MN(i)?i:MD(i)&&i(e.getDom()));ee3(this._styleCoord,r,a,e.getWidth()/2,e.getHeight()/2),(a||e.getDom()).appendChild(n),this._api=e,this._container=a;var s=this;n.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},n.onmousemove=function(e){if(e=e||window.event,!s._enterable){var t=r.handler;AG(r.painter.getViewportRoot(),e,!0),t.dispatch("mousemove",e)}},n.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(e){if(!this._container){var t,n,r,i=this._api.getDom();var a=(n="position",(r=(t=i).currentStyle||document.defaultView&&document.defaultView.getComputedStyle(t))?n?r[n]:r:null),s=i.style;"absolute"!==s.position&&"absolute"!==a&&(s.position="relative")}var u=e.get("alwaysShowContent");u&&this._moveIfResized(),this._alwaysShowContent=u,this.el.className=e.get("className")||""},e.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n,r,i,a,s,u,c,h,p,f,v,y,_,x,b,S,w,M,A,C,T,I,D,P,R,L=this.el,O=L.style,k=this._styleCoord;if(L.innerHTML){;O.cssText=ee1+(n=e,r=!this._firstShow,i=this._longHide,a=[],s=n.get("transitionDuration"),u=n.get("backgroundColor"),c=n.get("shadowBlur"),h=n.get("shadowColor"),p=n.get("shadowOffsetX"),f=n.get("shadowOffsetY"),v=n.getModel("textStyle"),y=km(n,"html"),a.push("box-shadow:"+(p+"px "+f+"px "+c+"px ")+h),r&&s&&a.push((_=s,x=i,w="opacity"+(S=" "+_/2+"s "+(b="cubic-bezier(0.23,1,0.32,1)"))+",visibility"+S,!x&&(S=" "+_+"s "+b,w+=w1.transformSupported?","+ee0+S:",left"+S+",top"+S),ee$+":"+w)),u&&a.push("background-color:"+u),Mb(["width","color","radius"],function(e){var t="border-"+e,r=R5(t),i=n.get(r);null!=i&&a.push(t+":"+i+("color"===e?"":"px"))}),a.push((A=[],C=(M=v).get("fontSize"),(T=M.getTextColor())&&A.push("color:"+T),A.push("font:"+M.getFont()),C&&A.push("line-height:"+Math.round(3*C/2)+"px"),I=M.get("textShadowColor"),D=M.get("textShadowBlur")||0,P=M.get("textShadowOffsetX")||0,R=M.get("textShadowOffsetY")||0,I&&D&&A.push("text-shadow:"+P+"px "+R+"px "+D+"px "+I),Mb(["decoration","align"],function(e){var t=M.get(e);t&&A.push("text-"+e+":"+t)}),A.join(";"))),null!=y&&a.push("padding:"+R4(y).join("px ")+"px"),a.join(";")+";")+ee2(k[0],k[1],!0)+("border-color:"+Lr(t))+";"+(e.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none")}else O.display="none";this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(e,t,n,r,i){var a=this.el;if(null==e){a.innerHTML="";return}var s="";if(MP(i)&&"item"===n.get("trigger")&&!eeJ(n)&&(s=function(e,t,n){if(!MP(n)||"inside"===n)return"";var r,i,a=e.get("backgroundColor"),s=e.get("borderWidth");t=Lr(t);var u=r="left"===(r=n)?"right":"right"===r?"left":"top"===r?"bottom":"top",c=Math.max(1.5*Math.round(s),6),h="",p=ee0+":";Mv(["left","right"],u)>-1?(h+="top:50%",p+="translateY(-50%) rotate("+(i="left"===u?-225:-45)+"deg)"):(h+="left:50%",p+="translateX(-50%) rotate("+(i="top"===u?225:45)+"deg)");var f=i*Math.PI/180,v=c+s,y=v*Math.abs(Math.cos(f))+v*Math.abs(Math.sin(f));h+=";"+u+":-"+Math.round(((y-Math.SQRT2*s)/2+Math.SQRT2*s-(y-v)/2)*100)/100+"px";var _=t+" solid "+s+"px;";return'<div style="'+["position:absolute;width:"+c+"px;height:"+c+"px;z-index:-1;",h+";"+p+";","border-bottom:"+_,"border-right:"+_,"background-color:"+a+";"].join("")+'"></div>'}(n,r,i)),MP(e))a.innerHTML=e+s;else if(e){a.innerHTML="",!MI(e)&&(e=[e]);for(var u=0;u<e.length;u++)MN(e[u])&&e[u].parentNode!==a&&a.appendChild(e[u]);if(s&&a.childNodes.length){var c=document.createElement("div");c.innerHTML=s,a.appendChild(c)}}},e.prototype.setEnterable=function(e){this._enterable=e},e.prototype.getSize=function(){var e=this.el;return[e.offsetWidth,e.offsetHeight]},e.prototype.moveTo=function(e,t){var n=this._styleCoord;if(ee3(n,this._zr,this._container,e,t),null!=n[0]&&null!=n[1]){var r=this.el.style;Mb(ee2(n[0],n[1]),function(e){r[e[0]]=e[1]})}},e.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},e.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",w1.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},e.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(MT(this.hide,this),e)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el.parentNode;e&&e.removeChild(this.el),this.el=this._container=null},e}(),ee4=function(){function e(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),ee8(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return e.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(e,t,n,r,i){var a=this;MO(e)&&OF(""),this.el&&this._zr.remove(this.el);var s=n.getModel("textStyle");this.el=new D8({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:r,textShadowColor:s.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:km(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),Mb(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(e){a.el.style[e]=n.get(e)}),Mb(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(e){a.el.style[e]=s.get(e)||0}),this._zr.add(this.el);var u=this;this.el.on("mouseover",function(){u._enterable&&(clearTimeout(u._hideTimeout),u._show=!0),u._inContent=!0}),this.el.on("mouseout",function(){u._enterable&&u._show&&u.hideLater(u._hideDelay),u._inContent=!1})},e.prototype.setEnterable=function(e){this._enterable=e},e.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),n=ee9(e.style);return[t.width+n.left+n.right,t.height+n.top+n.bottom]},e.prototype.moveTo=function(e,t){var n=this.el;if(n){var r=this._styleCoord;ee8(r,this._zr,e,t),e=r[0],t=r[1];var i=n.style,a=ee6(i.borderWidth||0),s=ee9(i);n.x=e+a+s.left,n.y=t+a+s.top,n.markRedraw()}},e.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(MT(this.hide,this),e)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function ee6(e){return Math.max(0,e)}function ee9(e){var t=ee6(e.shadowBlur||0),n=ee6(e.shadowOffsetX||0),r=ee6(e.shadowOffsetY||0);return{left:ee6(t-n),right:ee6(t+n),top:ee6(t-r),bottom:ee6(t+r)}}function ee8(e,t,n,r){e[0]=n,e[1]=r,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var ee7=new DX({shape:{x:-1,y:-1,width:2,height:2}}),ete=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.init=function(e,t){if(!w1.node&&!!t.getDom()){var n,r=e.getComponent("tooltip");var i=this._renderMode="auto"===(n=r.get("renderMode"))?w1.domSupported?"html":"richText":n||"html";this._tooltipContent="richText"===i?new ee4(t):new ee5(t,{appendTo:r.get("appendToBody",!0)?"body":r.get("appendTo",!0)})}},t.prototype.render=function(e,t,n){if(!w1.node&&!!n.getDom()){this.group.removeAll(),this._tooltipModel=e,this._ecModel=t,this._api=n;var r=this._tooltipContent;r.update(e),r.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&e.get("transitionDuration")?NS(this,"_updatePosition",50,"fixRate"):Nw(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var e=this._tooltipModel.get("triggerOn");QH("itemTooltip",this._api,MT(function(t,n,r){"none"!==e&&(e.indexOf(t)>=0?this._tryShow(n,r):"leave"===t&&this._hide(r))},this))},t.prototype._keepShow=function(){var e=this._tooltipModel,t=this._ecModel,n=this._api,r=e.get("triggerOn");if(null!=this._lastX&&null!=this._lastY&&"none"!==r&&"click"!==r){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){n.isDisposed()||i.manuallyShowTip(e,t,n,{x:i._lastX,y:i._lastY,dataByCoordSys:i._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(e,t,n,r){if(r.from!==this.uid&&!w1.node&&!!n.getDom()){var i=etn(r,n);this._ticket="";var a=r.dataByCoordSys,s=function(e,t,n){var r,i=Ic(e).queryOptionMap,a=i.keys()[0];if(!a||"series"===a)return;var s=Ip(t,a,i.get(a),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(!!s){if(n.getViewOfComponentModel(s).group.traverse(function(t){var n=D7(t).tooltipConfig;if(n&&n.name===e.name)return r=t,!0}),r)return{componentMainType:a,componentIndex:s.componentIndex,el:r}}}(r,t,n);if(s){var u=s.el.getBoundingRect().clone();u.applyTransform(s.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:s.el,position:r.position,positionDefault:"bottom"},i)}else if(r.tooltip&&null!=r.x&&null!=r.y)ee7.x=r.x,ee7.y=r.y,ee7.update(),D7(ee7).tooltipConfig={name:null,option:r.tooltip},this._tryShow({offsetX:r.x,offsetY:r.y,target:ee7},i);else if(a)this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,dataByCoordSys:a,tooltipOption:r.tooltipOption},i);else if(null!=r.seriesIndex){if(this._manuallyAxisShowTip(e,t,n,r))return;var c=QX(r,t),h=c.point[0],p=c.point[1];null!=h&&null!=p&&this._tryShow({offsetX:h,offsetY:p,target:c.el,position:r.position,positionDefault:"bottom"},i)}else null!=r.x&&null!=r.y&&(n.dispatchAction({type:"updateAxisPointer",x:r.x,y:r.y}),this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,target:n.getZr().findHover(r.x,r.y).target},i))}},t.prototype.manuallyHideTip=function(e,t,n,r){var i=this._tooltipContent;this._tooltipModel&&i.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,r.from!==this.uid&&this._hide(etn(r,n))},t.prototype._manuallyAxisShowTip=function(e,t,n,r){var i=r.seriesIndex,a=r.dataIndex,s=t.getComponent("axisPointer").coordSysAxesInfo;if(null==i||null==a||null==s)return;var u=t.getSeriesByIndex(i);if(!!u&&"axis"===ett([u.getData().getItemModel(a),u,(u.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:i,dataIndex:a,position:r.position}),!0},t.prototype._tryShow=function(e,t){var n,r,i=e.target;if(!!this._tooltipModel){this._lastX=e.offsetX,this._lastY=e.offsetY;var a=e.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,e);else if(i){;if("legend"===D7(i).ssrType)return;this._lastDataByCoordSys=null,N5(i,function(e){return null!=D7(e).dataIndex?(n=e,!0):null!=D7(e).tooltipConfig?(r=e,!0):void 0},!0),n?this._showSeriesItemTooltip(e,n,t):r?this._showComponentItemTooltip(e,r,t):this._hide(t)}else this._lastDataByCoordSys=null,this._hide(t)}},t.prototype._showOrMove=function(e,t){var n=e.get("showDelay");t=MT(t,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(t,n):t()},t.prototype._showAxisTooltip=function(e,t){var n=this._ecModel,r=this._tooltipModel,i=[t.offsetX,t.offsetY],a=ett([t.tooltipOption],r),s=this._renderMode,u=[],c=ks("section",{blocks:[],noHeader:!0}),h=[],p=new kv;Mb(e,function(e){Mb(e.dataByAxis,function(e){var t=n.getComponent(e.axisDim+"Axis",e.axisIndex),i=e.value;if(!!t&&null!=i){var a=QI(i,t.axis,n,e.seriesDataIndices,e.valueLabelOpt),f=ks("section",{header:a,noHeader:!MJ(a),sortBlocks:!0,blocks:[]});c.blocks.push(f),Mb(e.seriesDataIndices,function(c){var v=n.getSeriesByIndex(c.seriesIndex),y=c.dataIndexInside,_=v.getDataParams(y);if(!(_.dataIndex<0)){_.axisDim=e.axisDim,_.axisIndex=e.axisIndex,_.axisType=e.axisType,_.axisId=e.axisId,_.axisValue=UX(t.axis,{value:i}),_.axisValueLabel=a,_.marker=p.makeTooltipMarker("item",Lr(_.color),s);var x=OD(v.formatTooltip(y,!0,null)),b=x.frag;if(b){var S=ett([v],r).get("valueFormatter");f.blocks.push(S?Mf({valueFormatter:S},b):b)}x.text&&h.push(x.text),u.push(_)}})}})}),c.blocks.reverse(),h.reverse();var f=t.position,v=kd(c,p,s,a.get("order"),n.get("useUTC"),a.get("textStyle"));v&&h.unshift(v);var y="richText"===s?"\n\n":"<br/>",_=h.join(y);this._showOrMove(a,function(){this._updateContentNotChangedOnAxis(e,u)?this._updatePosition(a,f,i[0],i[1],this._tooltipContent,u):this._showTooltipContent(a,_,u,Math.random()+"",i[0],i[1],f,null,p)})},t.prototype._showSeriesItemTooltip=function(e,t,n){var r=this._ecModel,i=D7(t),a=i.seriesIndex,s=r.getSeriesByIndex(a),u=i.dataModel||s,c=i.dataIndex,h=i.dataType,p=u.getData(h),f=this._renderMode,v=e.positionDefault,y=ett([p.getItemModel(c),u,s&&(s.coordinateSystem||{}).model],this._tooltipModel,v?{position:v}:null),_=y.get("trigger");if(null==_||"item"===_){var x=u.getDataParams(c,h),b=new kv;x.marker=b.makeTooltipMarker("item",Lr(x.color),f);var S=OD(u.formatTooltip(c,!1,h)),w=y.get("order"),M=y.get("valueFormatter"),A=S.frag,C=A?kd(M?Mf({valueFormatter:M},A):A,b,f,w,r.get("useUTC"),y.get("textStyle")):S.text,T="item_"+u.name+"_"+c;this._showOrMove(y,function(){this._showTooltipContent(y,C,x,T,e.offsetX,e.offsetY,e.position,e.target,b)}),n({type:"showTip",dataIndexInside:c,dataIndex:p.getRawIndex(c),seriesIndex:a,from:this.uid})}},t.prototype._showComponentItemTooltip=function(e,t,n){var r="html"===this._renderMode,i=D7(t),a=i.tooltipConfig.option||{},s=a.encodeHTMLContent;if(MP(a)){var u=a;a={content:u,formatter:u},s=!0}s&&r&&a.content&&((a=Mh(a)).content=Ak(a.content));var c=[a],h=this._ecModel.getComponent(i.componentMainType,i.componentIndex);h&&c.push(h),c.push({formatter:a.content});var p=e.positionDefault,f=ett(c,this._tooltipModel,p?{position:p}:null),v=f.get("content"),y=Math.random()+"",_=new kv;this._showOrMove(f,function(){var n=Mh(f.get("formatterParams")||{});this._showTooltipContent(f,v,n,y,e.offsetX,e.offsetY,e.position,t,_)}),n({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(e,t,n,r,i,a,s,u,c){if(this._ticket="",!!e.get("showContent")&&!!e.get("show")){var h=this._tooltipContent;h.setEnterable(e.get("enterable"));var p=e.get("formatter");s=s||e.get("position");var f=t,v=this._getNearestPoint([i,a],n,e.get("trigger"),e.get("borderColor")).color;if(p){if(MP(p)){var y=e.ecModel.get("useUTC"),_=MI(n)?n[0]:n,x=_&&_.axisType&&_.axisType.indexOf("time")>=0;f=p,x&&(f=RH(_.axisValue,f,y)),f=R7(f,n,!0)}else if(MD(p)){var b=MT(function(t,r){t===this._ticket&&(h.setContent(r,c,e,v,s),this._updatePosition(e,s,i,a,h,n,u))},this);this._ticket=r,f=p(n,r,b)}else f=p}h.setContent(f,c,e,v,s),h.show(e,v),this._updatePosition(e,s,i,a,h,n,u)}},t.prototype._getNearestPoint=function(e,t,n,r){return"axis"===n||MI(t)?{color:r||("html"===this._renderMode?"#fff":"none")}:MI(t)?void 0:{color:r||t.color||t.borderColor}},t.prototype._updatePosition=function(e,t,n,r,i,a,s){var u=this._api.getWidth(),c=this._api.getHeight();t=t||e.get("position");var h=i.getSize(),p=e.get("align"),f=e.get("verticalAlign"),v=s&&s.getBoundingRect().clone();if(s&&v.applyTransform(s.transform),MD(t)&&(t=t([n,r],a,i.el,v,{viewSize:[u,c],contentSize:h.slice()})),MI(t))n=Ek(t[0],u),r=Ek(t[1],c);else if(MO(t)){var y=t;y.width=h[0],y.height=h[1];var _=Lu(y,{width:u,height:c});n=_.x,r=_.y,p=null,f=null}else if(MP(t)&&s){var x=function(e,t,n,r){var i=n[0],a=n[1],s=Math.ceil(Math.SQRT2*r)+8,u=0,c=0,h=t.width,p=t.height;switch(e){case"inside":u=t.x+h/2-i/2,c=t.y+p/2-a/2;break;case"top":u=t.x+h/2-i/2,c=t.y-a-s;break;case"bottom":u=t.x+h/2-i/2,c=t.y+p+s;break;case"left":u=t.x-i-s,c=t.y+p/2-a/2;break;case"right":u=t.x+h+s,c=t.y+p/2-a/2}return[u,c]}(t,v,h,e.get("borderWidth"));n=x[0],r=x[1]}else{var x=function(e,t,n,r,i,a,s){var u=n.getSize(),c=u[0],h=u[1];return null!=a&&(e+c+a+2>r?e-=c+a:e+=a),null!=s&&(t+h+s>i?t-=h+s:t+=s),[e,t]}(n,r,i,u,c,p?null:20,f?null:20);n=x[0],r=x[1]}if(p&&(n-=etr(p)?h[0]/2:"right"===p?h[0]:0),f&&(r-=etr(f)?h[1]/2:"bottom"===f?h[1]:0),eeJ(e)){var x=function(e,t,n,r,i){var a=n.getSize(),s=a[0],u=a[1];return e=Math.min(e+s,r)-s,t=Math.min(t+u,i)-u,[e=Math.max(e,0),t=Math.max(t,0)]}(n,r,i,u,c);n=x[0],r=x[1]}i.moveTo(n,r)},t.prototype._updateContentNotChangedOnAxis=function(e,t){var n=this._lastDataByCoordSys,r=this._cbParamsList,i=!!n&&n.length===e.length;return i&&Mb(n,function(n,a){var s=n.dataByAxis||[],u=(e[a]||{}).dataByAxis||[];(i=i&&s.length===u.length)&&Mb(s,function(e,n){var a=u[n]||{},s=e.seriesDataIndices||[],c=a.seriesDataIndices||[];(i=i&&e.value===a.value&&e.axisType===a.axisType&&e.axisId===a.axisId&&s.length===c.length)&&Mb(s,function(e,t){var n=c[t];i=i&&e.seriesIndex===n.seriesIndex&&e.dataIndex===n.dataIndex}),r&&Mb(e.seriesDataIndices,function(e){var n=e.seriesIndex,a=t[n],s=r[n];a&&s&&s.data!==a.data&&(i=!1)})})}),this._lastDataByCoordSys=e,this._cbParamsList=t,!!i},t.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},t.prototype.dispose=function(e,t){if(!w1.node&&!!t.getDom())Nw(this,"_updatePosition"),this._tooltipContent.dispose(),QW("itemTooltip",t)},t.type="tooltip",t}(kR);function ett(e,t,n){var r,i=t.ecModel;n?(r=new Rb(n,i,i),r=new Rb(t.option,r,i)):r=t;for(var a=e.length-1;a>=0;a--){var s=e[a];s&&(s instanceof Rb&&(s=s.get("tooltip",!0)),MP(s)&&(s={formatter:s}),s&&(r=new Rb(s,r,i)))}return r}function etn(e,t){return e.dispatchAction||MT(t.dispatchAction,t)}function etr(e){return"center"===e||"middle"===e}var eti=["rect","polygon","keep","clear"];function eta(e,t){var n=E6(e?e.brush:[]);if(!!n.length){var r=[];Mb(n,function(e){var t=e.hasOwnProperty("toolbox")?e.toolbox:[];t instanceof Array&&(r=r.concat(t))});var i=e&&e.toolbox;MI(i)&&(i=i[0]),!i&&(i={feature:{}},e.toolbox=[i]);var a=i.feature||(i.feature={}),s=a.brush||(a.brush={}),u=s.type||(s.type=[]);u.push.apply(u,r),function(e){var t={};Mb(e,function(e){t[e]=1}),e.length=0,Mb(t,function(t,n){e.push(n)})}(u),t&&!u.length&&u.push.apply(u,eti)}}var eto=Mb;function ets(e){if(e){for(var t in e)if(e.hasOwnProperty(t))return!0}}function etl(e,t,n){var r={};return eto(t,function(t){var i=r[t]=function(){var e=function(){};return e.prototype.__hidden=e.prototype,new e}();eto(e[t],function(e,r){if(!!Yl.isValidType(r)){var a={type:r,visual:e};n&&n(a,t),i[r]=new Yl(a),"opacity"===r&&((a=Mh(a)).type="colorAlpha",i.__hidden.__alphaForOpacity=new Yl(a))}})}),r}function etu(e,t,n){var r;Mb(n,function(e){t.hasOwnProperty(e)&&ets(t[e])&&(r=!0)}),r&&Mb(n,function(n){t.hasOwnProperty(n)&&ets(t[n])?e[n]=Mh(t[n]):delete e[n]})}var etc={lineX:eth(0),lineY:eth(1),rect:{point:function(e,t,n){return e&&n.boundingRect.contain(e[0],e[1])},rect:function(e,t,n){return e&&n.boundingRect.intersect(e)}},polygon:{point:function(e,t,n){return e&&n.boundingRect.contain(e[0],e[1])&&U3(n.range,e[0],e[1])},rect:function(e,t,n){var r=n.range;if(!e||r.length<=1)return!1;var i=e.x,a=e.y,s=e.width,u=e.height,c=r[0];if(U3(r,i,a)||U3(r,i+s,a)||U3(r,i,a+u)||U3(r,i+s,a+u)||Cr.create(e).contain(c[0],c[1])||Nr(i,a,i+s,a,r)||Nr(i,a,i,a+u,r)||Nr(i+s,a,i+s,a+u,r)||Nr(i,a+u,i+s,a+u,r))return!0}}};function eth(e){var t=["x","y"],n=["width","height"];return{point:function(t,n,r){if(t){var i=r.range;return etd(t[e],i)}},rect:function(r,i,a){if(r){var s=a.range,u=[r[t[e]],r[t[e]]+r[n[e]]];return u[1]<u[0]&&u.reverse(),etd(u[0],s)||etd(u[1],s)||etd(s[0],u)||etd(s[1],u)}}}}function etd(e,t){return t[0]<=e&&e<=t[1]}var etp=["inBrush","outOfBrush"],etf="__ecBrushSelect",etg="__ecInBrushSelectEvent";function etm(e){e.eachComponent({mainType:"brush"},function(t){(t.brushTargetManager=new eeP(t.option,e)).setInputRanges(t.areas,e)})}function etv(e,t,n){var r,i,a=[];e.eachComponent({mainType:"brush"},function(e){n&&"takeGlobalCursor"===n.type&&e.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1})}),etm(e),e.eachComponent({mainType:"brush"},function(t,n){var s={brushId:t.id,brushIndex:n,brushName:t.name,areas:Mh(t.areas),selected:[]};a.push(s);var u=t.option,c=u.brushLink,h=[],p=[],f=[],v=!1;!n&&(r=u.throttleType,i=u.throttleDelay);var y=MS(t.areas,function(e){var t,n,r,i=etx[e.brushType],a=Mg({boundingRect:i?i(e):void 0},e);return a.selectors=(n=(t=a).brushType,r={point:function(e){return etc[n].point(e,r,t)},rect:function(e){return etc[n].rect(e,r,t)}}),a}),_=etl(t.option,etp,function(e){e.mappingMethod="fixed"});function x(e){return"all"===c||!!h[e]}function b(e){return!!e.length}MI(c)&&Mb(c,function(e){h[e]=1}),e.eachSeries(function(n,r){var i=f[r]=[];"parallel"===n.subType?function(e,t){var n=e.coordinateSystem;v=v||n.hasAxisBrushed(),x(t)&&n.eachActiveState(e.getData(),function(e,t){"active"===e&&(p[t]=1)})}(n,r):function(n,r,i){if(!(!n.brushSelector||function(e,t){var n=e.option.seriesIndex;return null!=n&&"all"!==n&&(MI(n)?0>Mv(n,t):t!==n)}(t,r))){if(Mb(y,function(r){t.brushTargetManager.controlSeries(r,n,e)&&i.push(r),v=v||b(i)}),x(r)&&b(i)){var a=n.getData();a.each(function(e){et_(n,i,a,e)&&(p[e]=1)})}}}(n,r,i)});e.eachSeries(function(e,t){var n={seriesId:e.id,seriesIndex:t,seriesName:e.name,dataIndex:[]};s.selected.push(n);var r=f[t],i=e.getData(),a=x(t)?function(e){return p[e]?(n.dataIndex.push(i.getRawIndex(e)),"inBrush"):"outOfBrush"}:function(t){return et_(e,r,i,t)?(n.dataIndex.push(i.getRawIndex(t)),"inBrush"):"outOfBrush"};(x(t)?v:b(r))&&function(e,t,n,r,i,a){var s,u={};function c(e){return N$(n,s,e)}function h(e,t){N1(n,s,e,t)}function p(e,i){s=e;var a=n.getRawDataItem(s);if(!a||!1!==a.visualMap)for(var p=r.call(void 0,e),f=t[p],v=u[p],y=0,_=v.length;y<_;y++){var x=v[y];f[x]&&f[x].applyVisual(e,c,h)}}Mb(e,function(e){var n=Yl.prepareVisualTypes(t[e]);u[e]=n}),null==a?n.each(p):n.each([a],p)}(etp,_,i,a)})}),function(e,t,n,r,i){if(!i)return;var a=e.getZr();if(!a[etg])!a[etf]&&(a[etf]=ety),NS(a,etf,n,t)(e,r)}(t,r,i,a,n)}function ety(e,t){if(!e.isDisposed()){var n=e.getZr();n[etg]=!0,e.dispatchAction({type:"brushSelect",batch:t}),n[etg]=!1}}function et_(e,t,n,r){for(var i=0,a=t.length;i<a;i++){var s=t[i];if(e.brushSelector(r,n,s.selectors,s))return!0}}var etx={rect:function(e){return etb(e.range)},polygon:function(e){for(var t,n=e.range,r=0,i=n.length;r<i;r++){t=t||[[1/0,-1/0],[1/0,-1/0]];var a=n[r];a[0]<t[0][0]&&(t[0][0]=a[0]),a[0]>t[0][1]&&(t[0][1]=a[0]),a[1]<t[1][0]&&(t[1][0]=a[1]),a[1]>t[1][1]&&(t[1][1]=a[1])}return t&&etb(t)}};function etb(e){return new Cr(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0])}var etS=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.init=function(e,t){this.ecModel=e,this.api=t,this.model,(this._brushController=new Zh(t.getZr())).on("brush",MT(this._onBrush,this)).mount()},t.prototype.render=function(e,t,n,r){this.model=e,this._updateController(e,t,n,r)},t.prototype.updateTransform=function(e,t,n,r){etm(t),this._updateController(e,t,n,r)},t.prototype.updateVisual=function(e,t,n,r){this.updateTransform(e,t,n,r)},t.prototype.updateView=function(e,t,n,r){this._updateController(e,t,n,r)},t.prototype._updateController=function(e,t,n,r){r&&r.$from===e.id||this._brushController.setPanels(e.brushTargetManager.makePanelOpts(n)).enableBrush(e.brushOption).updateCovers(e.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(e){var t=this.model.id,n=this.model.brushTargetManager.setOutputRanges(e.areas,this.ecModel);(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:t,areas:Mh(n),$from:t}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:t,areas:Mh(n),$from:t})},t.type="brush",t}(kR),etw=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.areas=[],n.brushOption={},n}return wJ(t,e),t.prototype.optionUpdated=function(e,t){var n=this.option;t||etu(n,e,["inBrush","outOfBrush"]);var r=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:"#ddd"},!r.hasOwnProperty("liftZ")&&(r.liftZ=5)},t.prototype.setAreas=function(e){if(!!e)this.areas=MS(e,function(e){return etM(this.option,e)},this)},t.prototype.setBrushOption=function(e){this.brushOption=etM(this.option,e),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},t}(Lv);function etM(e,t){return Md({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new Rb(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick,z:e.z},t,!0)}var etA=["rect","polygon","lineX","lineY","keep","clear"],etC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wJ(t,e),t.prototype.render=function(e,t,n){var r,i,a;t.eachComponent({mainType:"brush"},function(e){r=e.brushType,i=e.brushOption.brushMode||"single",a=a||!!e.areas.length}),this._brushType=r,this._brushMode=i,Mb(e.get("type",!0),function(t){e.setIconStatus(t,("keep"===t?"multiple"===i:"clear"===t?a:t===r)?"emphasis":"normal")})},t.prototype.updateView=function(e,t,n){this.render(e,t,n)},t.prototype.getIcons=function(){var e=this.model,t=e.get("icon",!0),n={};return Mb(e.get("type",!0),function(e){t[e]&&(n[e]=t[e])}),n},t.prototype.onclick=function(e,t,n){var r=this._brushType,i=this._brushMode;"clear"===n?(t.dispatchAction({type:"axisAreaSelect",intervals:[]}),t.dispatchAction({type:"brush",command:"clear",areas:[]})):t.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?r:r!==n&&n,brushMode:"keep"===n?"multiple"===i?"single":"multiple":i}})},t.getDefaultOption=function(e){return{show:!0,type:etA.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:e.getLocaleModel().get(["toolbox","brush","title"])}},t}(eec),etT=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}return wJ(t,e),t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(Lv),etE=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.render=function(e,t,n){if(this.group.removeAll(),!!e.get("show")){var r=this.group,i=e.getModel("textStyle"),a=e.getModel("subtextStyle"),s=e.get("textAlign"),u=MV(e.get("textBaseline"),e.get("textVerticalAlign")),c=new D8({style:Re(i,{text:e.get("text"),fill:i.getTextColor()},{disableBox:!0}),z2:10}),h=c.getBoundingRect(),p=e.get("subtext"),f=new D8({style:Re(a,{text:p,fill:a.getTextColor(),y:h.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),v=e.get("link"),y=e.get("sublink"),_=e.get("triggerEvent",!0);c.silent=!v&&!_,f.silent=!y&&!_,v&&c.on("click",function(){Li(v,"_"+e.get("target"))}),y&&f.on("click",function(){Li(y,"_"+e.get("subtarget"))}),D7(c).eventData=D7(f).eventData=_?{componentType:"title",componentIndex:e.componentIndex}:null,r.add(c),p&&r.add(f);var x=r.getBoundingRect(),b=e.getBoxLayoutParams();b.width=x.width,b.height=x.height;var S=Lu(b,{width:n.getWidth(),height:n.getHeight()},e.get("padding"));!s&&("middle"===(s=e.get("left")||e.get("right"))&&(s="center"),"right"===s?S.x+=S.width:"center"===s&&(S.x+=S.width/2)),!u&&("center"===(u=e.get("top")||e.get("bottom"))&&(u="middle"),"bottom"===u?S.y+=S.height:"middle"===u&&(S.y+=S.height/2),u=u||"top"),r.x=S.x,r.y=S.y,r.markRedraw();var w={align:s,verticalAlign:u};c.setStyle(w),f.setStyle(w),x=r.getBoundingRect();var M=S.margin,A=e.getItemStyle(["color","opacity"]);A.fill=e.get("backgroundColor");var C=new DX({shape:{x:x.x-M[3],y:x.y-M[0],width:x.width+M[1]+M[3],height:x.height+M[0]+M[2],r:e.get("borderRadius")},style:A,subPixelOptimize:!0,silent:!0});r.add(C)}},t.type="title",t}(kR),etI=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode="box",n}return wJ(t,e),t.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n),this._initData()},t.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(e){null==e&&(e=this.option.currentIndex);var t=this._data.count();this.option.loop?e=(e%t+t)%t:(e>=t&&(e=t-1),e<0&&(e=0)),this.option.currentIndex=e},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(e){this.option.autoPlay=!!e},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var e,t=this.option,n=t.data||[],r=t.axisType,i=this._names=[];"category"===r?(e=[],Mb(n,function(t,n){var r,a=Ir(E7(t),"");MO(t)?(r=Mh(t)).value=n:r=n,e.push(r),i.push(a)})):e=n;(this._data=new zK([{name:"value",type:{category:"ordinal",time:"time",value:"number"}[r]||"number"}],this)).initData(e,i)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(Lv),etD=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.type="timeline.slider",t.defaultOption=RM(etI.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(etI);M_(etD,OI.prototype);var etP=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.type="timeline",t}(kR),etR=function(e){function t(t,n,r,i){var a=e.call(this,t,n,r)||this;return a.type=i||"value",a}return wJ(t,e),t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},t}(Hv),etL=Math.PI,etO=Is(),etk=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.init=function(e,t){this.api=t},t.prototype.render=function(e,t,n){if(this.model=e,this.api=n,this.ecModel=t,this.group.removeAll(),e.get("show",!0)){var r=this._layout(e,n),i=this._createGroup("_mainGroup"),a=this._createGroup("_labelGroup"),s=this._axis=this._createAxis(r,e);e.formatTooltip=function(e){return ks("nameValue",{noName:!0,value:s.scale.getLabel({value:e})})},Mb(["AxisLine","AxisTick","Control","CurrentPointer"],function(t){this["_render"+t](r,i,s,e)},this),this._renderAxisLabel(r,a,s,e),this._position(r,e)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(e,t){var n,r,i,a,s=e.get(["label","position"]),u=e.get("orient"),c=function(e,t){return Lu(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},e.get("padding"))}(e,t),h={horizontal:"center",vertical:(n=null==s||"auto"===s?"horizontal"===u?c.y+c.height/2<t.getHeight()/2?"-":"+":c.x+c.width/2<t.getWidth()/2?"+":"-":MP(s)?({horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}})[u][s]:s)>=0||"+"===n?"left":"right"},p={horizontal:n>=0||"+"===n?"top":"bottom",vertical:"middle"},f="vertical"===u?c.height:c.width,v=e.getModel("controlStyle"),y=v.get("show",!0),_=y?v.get("itemSize"):0,x=y?v.get("itemGap"):0,b=_+x,S=e.get(["label","rotate"])||0;S=S*etL/180;var w=v.get("position",!0),M=y&&v.get("showPlayBtn",!0),A=y&&v.get("showPrevBtn",!0),C=y&&v.get("showNextBtn",!0),T=0,I=f;"left"===w||"bottom"===w?(M&&(r=[0,0],T+=b),A&&(i=[T,0],T+=b)):(M&&(r=[I-_,0],I-=b),A&&(i=[0,0],T+=b)),C&&(a=[I-_,0],I-=b);var D=[T,I];return e.get("inverse")&&D.reverse(),{viewRect:c,mainLength:f,orient:u,rotation:({horizontal:0,vertical:etL/2})[u],labelRotation:S,labelPosOpt:n,labelAlign:e.get(["label","align"])||h[u],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||p[u],playPosition:r,prevBtnPosition:i,nextBtnPosition:a,axisExtent:D,controlSize:_,controlGap:x}},t.prototype._position=function(e,t){var n=this._mainGroup,r=this._labelGroup,i=e.viewRect;if("vertical"===e.orient){var a=AZ(),s=i.x,u=i.y+i.height;A$(a,a,[-s,-u]),A0(a,a,-etL/2),A$(a,a,[s,u]),(i=i.clone()).applyTransform(a)}var c=b(i),h=b(n.getBoundingRect()),p=b(r.getBoundingRect()),f=[n.x,n.y],v=[r.x,r.y];v[0]=f[0]=c[0][0];var y=e.labelPosOpt;if(null==y||MP(y)){var _="+"===y?0:1;S(f,h,c,1,_),S(v,p,c,1,1-_)}else{var _=y>=0?0:1;S(f,h,c,1,_),v[1]=f[1]+y}function x(e){e.originX=c[0][0]-e.x,e.originY=c[1][0]-e.y}function b(e){return[[e.x,e.x+e.width],[e.y,e.y+e.height]]}function S(e,t,n,r,i){e[r]+=n[r][i]-t[r][i]}n.setPosition(f),r.setPosition(v),n.rotation=r.rotation=e.rotation,x(n),x(r)},t.prototype._createAxis=function(e,t){var n=t.getData(),r=t.get("axisType"),i=function(e,t){if(t=t||e.get("type"))switch(t){case"category":return new Ul({ordinalMeta:e.getCategories(),extent:[1/0,-1/0]});case"time":return new UA({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new Uc}}(t,r);i.getTicks=function(){return n.mapArray(["value"],function(e){return{value:e}})};var a=n.getDataExtent("value");i.setExtent(a[0],a[1]),i.calcNiceTicks();var s=new etR("value",i,e.axisExtent,r);return s.model=t,s},t.prototype._createGroup=function(e){var t=this[e]=new ES;return this.group.add(t),t},t.prototype._renderAxisLine=function(e,t,n,r){var i=n.getExtent();if(!!r.get(["lineStyle","show"])){var a=new Bw({shape:{x1:i[0],y1:0,x2:i[1],y2:0},style:Mf({lineCap:"round"},r.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});t.add(a);var s=this._progressLine=new Bw({shape:{x1:i[0],x2:this._currentPointer?this._currentPointer.x:i[0],y1:0,y2:0},style:Mg({lineCap:"round",lineWidth:a.style.lineWidth},r.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});t.add(s)}},t.prototype._renderAxisTick=function(e,t,n,r){var i=this,a=r.getData(),s=n.scale.getTicks();this._tickSymbols=[],Mb(s,function(e){var s=n.dataToCoord(e.value),u=a.getItemModel(e.value),c=u.getModel("itemStyle"),h=u.getModel(["emphasis","itemStyle"]),p=u.getModel(["progress","itemStyle"]),f=etB(u,c,t,{x:s,y:0,onclick:MT(i._changeTimeline,i,e.value)});f.ensureState("emphasis").style=h.getItemStyle(),f.ensureState("progress").style=p.getItemStyle(),Pz(f);var v=D7(f);u.get("tooltip")?(v.dataIndex=e.value,v.dataModel=r):v.dataIndex=v.dataModel=null,i._tickSymbols.push(f)})},t.prototype._renderAxisLabel=function(e,t,n,r){var i=this;if(!!n.getLabelModel().get("show")){var a=r.getData(),s=n.getViewLabels();this._tickLabels=[],Mb(s,function(r){var s=r.tickValue,u=a.getItemModel(s),c=u.getModel("label"),h=u.getModel(["emphasis","label"]),p=u.getModel(["progress","label"]),f=new D8({x:n.dataToCoord(r.tickValue),y:0,rotation:e.labelRotation-e.rotation,onclick:MT(i._changeTimeline,i,s),silent:!1,style:Re(c,{text:r.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});f.ensureState("emphasis").style=Re(h),f.ensureState("progress").style=Re(p),t.add(f),Pz(f),etO(f).dataIndex=s,i._tickLabels.push(f)})}},t.prototype._renderControl=function(e,t,n,r){var i=e.controlSize,a=e.rotation,s=r.getModel("controlStyle").getItemStyle(),u=r.getModel(["emphasis","controlStyle"]).getItemStyle(),c=r.getPlayState(),h=r.get("inverse",!0);function p(e,n,c,h){if(!!e){var p=Eh(MV(r.get(["controlStyle",n+"BtnSize"]),i),i),f=function(e,t,n,r){var i=r.style,a=Nn(e.get(["controlStyle",t]),r||{},new Cr(n[0],n[1],n[2],n[3]));return i&&a.setStyle(i),a}(r,n+"Icon",[0,-p/2,p,p],{x:e[0],y:e[1],originX:i/2,originY:0,rotation:h?-a:0,rectHover:!0,style:s,onclick:c});f.ensureState("emphasis").style=u,t.add(f),Pz(f)}}p(e.nextBtnPosition,"next",MT(this._changeTimeline,this,h?"-":"+")),p(e.prevBtnPosition,"prev",MT(this._changeTimeline,this,h?"+":"-")),p(e.playPosition,c?"stop":"play",MT(this._handlePlayClick,this,!c),!0)},t.prototype._renderCurrentPointer=function(e,t,n,r){var i=r.getData(),a=r.getCurrentIndex(),s=i.getItemModel(a).getModel("checkpointStyle"),u=this;this._currentPointer=etB(s,s,this._mainGroup,{},this._currentPointer,{onCreate:function(e){e.draggable=!0,e.drift=MT(u._handlePointerDrag,u),e.ondragend=MT(u._handlePointerDragend,u),etN(e,u._progressLine,a,n,r,!0)},onUpdate:function(e){etN(e,u._progressLine,a,n,r)}})},t.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},t.prototype._handlePointerDrag=function(e,t,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},t.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},t.prototype._pointerChangeTimeline=function(e,t){var n=this._toAxisCoord(e)[0],r=EN(this._axis.getExtent().slice());n>r[1]&&(n=r[1]),n<r[0]&&(n=r[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var i=this._progressLine;i&&(i.shape.x2=n,i.dirty());var a=this._findNearestTick(n),s=this.model;(t||a!==s.getCurrentIndex()&&s.get("realtime"))&&this._changeTimeline(a)},t.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var t=e.model;e._changeTimeline(t.getCurrentIndex()+(t.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(e){return B6(e,this._mainGroup.getLocalTransform(),!0)},t.prototype._findNearestTick=function(e){var t,n=this.model.getData(),r=1/0,i=this._axis;return n.each(["value"],function(n,a){var s=Math.abs(i.dataToCoord(n)-e);s<r&&(r=s,t=a)}),t},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(e){var t=this.model.getCurrentIndex();"+"===e?e=t+1:"-"===e&&(e=t-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},t.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),t=this._tickSymbols,n=this._tickLabels;if(t)for(var r=0;r<t.length;r++)t&&t[r]&&t[r].toggleState("progress",r<e);if(n)for(var r=0;r<n.length;r++)n&&n[r]&&n[r].toggleState("progress",etO(n[r]).dataIndex<=e)},t.type="timeline.slider",t}(etP);function etB(e,t,n,r,i,a){var s=t.get("color");i?(i.setColor(s),n.add(i),a&&a.onUpdate(i)):((i=Fo(e.get("symbol"),-1,-1,2,2,s)).setStyle("strokeNoScale",!0),n.add(i),a&&a.onCreate(i));var u=t.getItemStyle(["color"]);i.setStyle(u),r=Md({rectHover:!0,z2:100},r,!0);var c=Fs(e.get("symbolSize"));r.scaleX=c[0]/2,r.scaleY=c[1]/2;var h=Fl(e.get("symbolOffset"),c);h&&(r.x=(r.x||0)+h[0],r.y=(r.y||0)+h[1]);var p=e.get("symbolRotate");return r.rotation=(p||0)*Math.PI/180||0,i.attr(r),i.updateTransform(),i}function etN(e,t,n,r,i,a){if(!e.dragging){var s=i.getModel("checkpointStyle"),u=r.dataToCoord(i.getData().get("value",n));if(a||!s.get("animation",!0))e.attr({x:u,y:0}),t&&t.attr({shape:{x2:u}});else{var c={duration:s.get("animationDuration",!0),easing:s.get("animationEasing",!0)};e.stopAnimation(null,!0),e.animateTo({x:u,y:0},c),t&&t.animateTo({shape:{x2:u}},c)}}}function etF(e){var t=e&&e.timeline;!MI(t)&&(t=t?[t]:[]),Mb(t,function(e){if(!!e)(function(e){var t=e.type,n={number:"value",time:"time"};if(n[t]&&(e.axisType=n[t],delete e.type),etz(e),etU(e,"controlPosition")){var r=e.controlStyle||(e.controlStyle={});!etU(r,"position")&&(r.position=e.controlPosition),"none"===r.position&&!etU(r,"show")&&(r.show=!1,delete r.position),delete e.controlPosition}Mb(e.data||[],function(e){MO(e)&&!MI(e)&&(!etU(e,"value")&&etU(e,"name")&&(e.value=e.name),etz(e))})})(e)})}function etz(e){var t=e.itemStyle||(e.itemStyle={}),n=t.emphasis||(t.emphasis={}),r=e.label||e.label||{},i=r.normal||(r.normal={}),a={normal:1,emphasis:1};Mb(r,function(e,t){!a[t]&&!etU(i,t)&&(i[t]=e)}),n.label&&!etU(r,"emphasis")&&(r.emphasis=n.label,delete n.label)}function etU(e,t){return e.hasOwnProperty(t)}function etH(e,t){if(!e)return!1;for(var n=MI(e)?e:[e],r=0;r<n.length;r++)if(n[r]&&n[r][t])return!0;return!1}function etG(e){E9(e,"label",["show"])}var etV=Is(),etW=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.createdBySelf=!1,n}return wJ(t,e),t.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n),this._mergeOption(e,n,!1,!0)},t.prototype.isAnimationEnabled=function(){if(w1.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},t.prototype.mergeOption=function(e,t){this._mergeOption(e,t,!1,!1)},t.prototype._mergeOption=function(e,t,n,r){var i=this.mainType;!n&&t.eachSeries(function(e){var n=e.get(this.mainType,!0),a=etV(e)[i];if(!n||!n.data){etV(e)[i]=null;return}a?a._mergeOption(n,t,!0):(r&&etG(n),Mb(n.data,function(e){e instanceof Array?(etG(e[0]),etG(e[1])):etG(e)}),Mf(a=this.createMarkerModelFromSeries(n,this,t),{mainType:this.mainType,seriesIndex:e.seriesIndex,name:e.name,createdBySelf:!0}),a.__hostSeries=e),etV(e)[i]=a},this)},t.prototype.formatTooltip=function(e,t,n){var r=this.getData(),i=this.getRawValue(e),a=r.getName(e);return ks("section",{header:this.name,blocks:[ks("nameValue",{name:a,value:i,noName:!a,noValue:null==i})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(e){this._data=e},t.prototype.getDataParams=function(e,t){var n=OI.prototype.getDataParams.call(this,e,t),r=this.__hostSeries;return r&&(n.seriesId=r.id,n.seriesName=r.name,n.seriesType=r.subType),n},t.getMarkerModelFromSeries=function(e,t){return etV(e)[t]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(Lv);M_(etW,OI.prototype);var etj=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.createMarkerModelFromSeries=function(e,n,r){return new t(e,n,r)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(etW);function etX(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function etY(e,t,n,r,i,a){var s=[],u=z5(t,r)?t.getCalculationInfo("stackResultDimension"):r,c=et$(t,u,e),h=t.indicesOfNearest(u,c)[0];s[i]=t.get(n,h),s[a]=t.get(u,h);var p=t.get(r,h),f=EF(t.get(r,h));return(f=Math.min(f,20))>=0&&(s[a]=+s[a].toFixed(f)),[s,p]}var etJ={min:ME(etY,"min"),max:ME(etY,"max"),average:ME(etY,"average"),median:ME(etY,"median")};function etZ(e,t){if(!!t){var n,r=e.getData(),i=e.coordinateSystem,a=i&&i.dimensions;if(!(!isNaN(parseFloat((n=t).x))&&!isNaN(parseFloat(n.y)))&&!MI(t.coord)&&MI(a)){var s=etq(t,r,i,e);if((t=Mh(t)).type&&etJ[t.type]&&s.baseAxis&&s.valueAxis){var u=Mv(a,s.baseAxis.dim),c=Mv(a,s.valueAxis.dim),h=etJ[t.type](r,s.baseDataDim,s.valueDataDim,u,c);t.coord=h[0],t.value=h[1]}else t.coord=[null!=t.xAxis?t.xAxis:t.radiusAxis,null!=t.yAxis?t.yAxis:t.angleAxis]}if(null!=t.coord&&MI(a)){for(var p=t.coord,f=0;f<2;f++)etJ[p[f]]&&(p[f]=et$(r,r.mapDimension(a[f]),p[f]))}else t.coord=[];return t}}function etq(e,t,n,r){var i={};return null!=e.valueIndex||null!=e.valueDim?(i.valueDataDim=null!=e.valueIndex?t.getDimension(e.valueIndex):e.valueDim,i.valueAxis=n.getAxis(function(e,t){var n=e.getData().getDimensionInfo(t);return n&&n.coordDim}(r,i.valueDataDim)),i.baseAxis=n.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=r.getBaseAxis(),i.valueAxis=n.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function etK(e,t){return!e||!e.containData||!t.coord||!!etX(t)||e.containData(t.coord)}function etQ(e,t){return e?function(e,n,r,i){return Oz(i<2?e.coord&&e.coord[i]:e.value,t[i])}:function(e,n,r,i){return Oz(e.value,t[i])}}function et$(e,t,n){if("average"===n){var r=0,i=0;return e.each(t,function(e,t){!isNaN(e)&&(r+=e,i++)}),r/i}if("median"===n)return e.getMedian(t);return e.getDataExtent(t)["max"===n?1:0]}var et0=Is(),et1=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.init=function(){this.markerGroupMap=M1()},t.prototype.render=function(e,t,n){var r=this,i=this.markerGroupMap;i.each(function(e){et0(e).keep=!1}),t.eachSeries(function(e){var i=etW.getMarkerModelFromSeries(e,r.type);i&&r.renderSeries(e,i,t,n)}),i.each(function(e){et0(e).keep||r.group.remove(e.group)})},t.prototype.markKeep=function(e){et0(e).keep=!0},t.prototype.toggleBlurSeries=function(e,t){var n=this;Mb(e,function(e){var r=etW.getMarkerModelFromSeries(e,n.type);r&&r.getData().eachItemGraphicEl(function(e){if(e)t?Pb(e,Pm):Pb(e,Pv)})})},t.type="marker",t}(kR);function et2(e,t,n){var r=t.coordinateSystem;e.each(function(i){var a,s=e.getItemModel(i),u=Ek(s.get("x"),n.getWidth()),c=Ek(s.get("y"),n.getHeight());if(isNaN(u)||isNaN(c)){if(t.getMarkerPosition)a=t.getMarkerPosition(e.getValues(e.dimensions,i));else if(r){var h=e.get(r.dimensions[0],i),p=e.get(r.dimensions[1],i);a=r.dataToPoint([h,p])}}else a=[u,c];!isNaN(u)&&(a[0]=u),!isNaN(c)&&(a[1]=c),e.setItemLayout(i,a)})}var et3=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.updateTransform=function(e,t,n){t.eachSeries(function(e){var t=etW.getMarkerModelFromSeries(e,"markPoint");t&&(et2(t.getData(),e,n),this.markerGroupMap.get(e.id).updateLayout())},this)},t.prototype.renderSeries=function(e,t,n,r){var i=e.coordinateSystem,a=e.id,s=e.getData(),u=this.markerGroupMap,c=u.get(a)||u.set(a,new G9),h=function(e,t,n){var r,i=new zK(r=e?MS(e&&e.dimensions,function(e){return Mf(Mf({},t.getData().getDimensionInfo(t.getData().mapDimension(e))||{}),{name:e,ordinalMeta:null})}):[{name:"value",type:"float"}],n),a=MS(n.get("data"),ME(etZ,t));e&&(a=MM(a,ME(etK,e)));var s=etQ(!!e,r);return i.initData(a,null,s),i}(i,e,t);t.setData(h),et2(t.getData(),e,r),h.each(function(e){var n=h.getItemModel(e),r=n.getShallow("symbol"),i=n.getShallow("symbolSize"),a=n.getShallow("symbolRotate"),u=n.getShallow("symbolOffset"),c=n.getShallow("symbolKeepAspect");if(MD(r)||MD(i)||MD(a)||MD(u)){var p=t.getRawValue(e),f=t.getDataParams(e);MD(r)&&(r=r(p,f)),MD(i)&&(i=i(p,f)),MD(a)&&(a=a(p,f)),MD(u)&&(u=u(p,f))}var v=n.getModel("itemStyle").getItemStyle(),y=N0(s,"color");!v.fill&&(v.fill=y),h.setItemVisual(e,{symbol:r,symbolSize:i,symbolRotate:a,symbolOffset:u,symbolKeepAspect:c,style:v})}),c.updateData(h),this.group.add(c.group),h.eachItemGraphicEl(function(e){e.traverse(function(e){D7(e).dataModel=t})}),this.markKeep(c),c.group.silent=t.get("silent")||e.get("silent")},t.type="markPoint",t}(et1),et5=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.createMarkerModelFromSeries=function(e,n,r){return new t(e,n,r)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(etW),et4=Is(),et6=function(e,t,n,r){var i,a=e.getData();if(MI(r))i=r;else{var s=r.type;if("min"===s||"max"===s||"average"===s||"median"===s||null!=r.xAxis||null!=r.yAxis){var u=void 0,c=void 0;if(null!=r.yAxis||null!=r.xAxis)u=t.getAxis(null!=r.yAxis?"y":"x"),c=MG(r.yAxis,r.xAxis);else{var h=etq(r,a,t,e);u=h.valueAxis;var p=z4(a,h.valueDataDim);c=et$(a,p,s)}var f="x"===u.dim?0:1,v=1-f,y=Mh(r),_={coord:[]};y.type=null,y.coord=[],y.coord[v]=-1/0,_.coord[v]=1/0;var x=n.get("precision");x>=0&&ML(c)&&(c=+c.toFixed(Math.min(x,20))),y.coord[f]=_.coord[f]=c,i=[y,_,{type:s,valueIndex:r.valueIndex,value:c}]}else i=[]}var b=[etZ(e,i[0]),etZ(e,i[1]),Mf({},i[2])];return b[2].type=b[2].type||null,Md(b[2],b[0]),Md(b[2],b[1]),b};function et9(e){return!isNaN(e)&&!isFinite(e)}function et8(e,t,n,r){var i=1-e,a=r.dimensions[e];return et9(t[i])&&et9(n[i])&&t[e]===n[e]&&r.getAxis(a).containData(t[e])}function et7(e,t){if("cartesian2d"===e.type){var n=t[0].coord,r=t[1].coord;if(n&&r&&(et8(1,n,r,e)||et8(0,n,r,e)))return!0}return etK(e,t[0])&&etK(e,t[1])}function ene(e,t,n,r,i){var a,s=r.coordinateSystem,u=e.getItemModel(t),c=Ek(u.get("x"),i.getWidth()),h=Ek(u.get("y"),i.getHeight());if(isNaN(c)||isNaN(h)){if(r.getMarkerPosition)a=r.getMarkerPosition(e.getValues(e.dimensions,t));else{var p=s.dimensions,f=e.get(p[0],t),v=e.get(p[1],t);a=s.dataToPoint([f,v])}if(Vh(s,"cartesian2d")){var y=s.getAxis("x"),_=s.getAxis("y"),p=s.dimensions;et9(e.get(p[0],t))?a[0]=y.toGlobalCoord(y.getExtent()[n?0:1]):et9(e.get(p[1],t))&&(a[1]=_.toGlobalCoord(_.getExtent()[n?0:1]))}!isNaN(c)&&(a[0]=c),!isNaN(h)&&(a[1]=h)}else a=[c,h];e.setItemLayout(t,a)}var ent=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.updateTransform=function(e,t,n){t.eachSeries(function(e){var t=etW.getMarkerModelFromSeries(e,"markLine");if(t){var r=t.getData(),i=et4(t).from,a=et4(t).to;i.each(function(t){ene(i,t,!0,e,n),ene(a,t,!1,e,n)}),r.each(function(e){r.setItemLayout(e,[i.getItemLayout(e),a.getItemLayout(e)])}),this.markerGroupMap.get(e.id).updateLayout()}},this)},t.prototype.renderSeries=function(e,t,n,r){var i=e.coordinateSystem,a=e.id,s=e.getData(),u=this.markerGroupMap,c=u.get(a)||u.set(a,new Jl);this.group.add(c.group);var h=function(e,t,n){var r,i=new zK(r=e?MS(e&&e.dimensions,function(e){return Mf(Mf({},t.getData().getDimensionInfo(t.getData().mapDimension(e))||{}),{name:e,ordinalMeta:null})}):[{name:"value",type:"float"}],n),a=new zK(r,n),s=new zK([],n),u=MS(n.get("data"),ME(et6,t,e,n));e&&(u=MM(u,ME(et7,e)));var c=etQ(!!e,r);return i.initData(MS(u,function(e){return e[0]}),null,c),a.initData(MS(u,function(e){return e[1]}),null,c),s.initData(MS(u,function(e){return e[2]})),s.hasItemOption=!0,{from:i,to:a,line:s}}(i,e,t),p=h.from,f=h.to,v=h.line;et4(t).from=p,et4(t).to=f,t.setData(v);var y=t.get("symbol"),_=t.get("symbolSize"),x=t.get("symbolRotate"),b=t.get("symbolOffset");function S(t,n,i){var a=t.getItemModel(n);ene(t,n,i,e,r);var u=a.getModel("itemStyle").getItemStyle();null==u.fill&&(u.fill=N0(s,"color")),t.setItemVisual(n,{symbolKeepAspect:a.get("symbolKeepAspect"),symbolOffset:MV(a.get("symbolOffset",!0),b[i?0:1]),symbolRotate:MV(a.get("symbolRotate",!0),x[i?0:1]),symbolSize:MV(a.get("symbolSize"),_[i?0:1]),symbol:MV(a.get("symbol",!0),y[i?0:1]),style:u})}!MI(y)&&(y=[y,y]),!MI(_)&&(_=[_,_]),!MI(x)&&(x=[x,x]),!MI(b)&&(b=[b,b]),h.from.each(function(e){S(p,e,!0),S(f,e,!1)}),v.each(function(e){var t=v.getItemModel(e).getModel("lineStyle").getLineStyle();v.setItemLayout(e,[p.getItemLayout(e),f.getItemLayout(e)]),null==t.stroke&&(t.stroke=p.getItemVisual(e,"style").fill),v.setItemVisual(e,{fromSymbolKeepAspect:p.getItemVisual(e,"symbolKeepAspect"),fromSymbolOffset:p.getItemVisual(e,"symbolOffset"),fromSymbolRotate:p.getItemVisual(e,"symbolRotate"),fromSymbolSize:p.getItemVisual(e,"symbolSize"),fromSymbol:p.getItemVisual(e,"symbol"),toSymbolKeepAspect:f.getItemVisual(e,"symbolKeepAspect"),toSymbolOffset:f.getItemVisual(e,"symbolOffset"),toSymbolRotate:f.getItemVisual(e,"symbolRotate"),toSymbolSize:f.getItemVisual(e,"symbolSize"),toSymbol:f.getItemVisual(e,"symbol"),style:t})}),c.updateData(v),h.line.eachItemGraphicEl(function(e){D7(e).dataModel=t,e.traverse(function(e){D7(e).dataModel=t})}),this.markKeep(c),c.group.silent=t.get("silent")||e.get("silent")},t.type="markLine",t}(et1),enn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.createMarkerModelFromSeries=function(e,n,r){return new t(e,n,r)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(etW),enr=Is(),eni=function(e,t,n,r){var i=r[0],a=r[1];if(!!i&&!!a){var s=etZ(e,i),u=etZ(e,a),c=s.coord,h=u.coord;c[0]=MG(c[0],-1/0),c[1]=MG(c[1],-1/0),h[0]=MG(h[0],1/0),h[1]=MG(h[1],1/0);var p=Mp([{},s,u]);return p.coord=[s.coord,u.coord],p.x0=s.x,p.y0=s.y,p.x1=u.x,p.y1=u.y,p}};function ena(e){return!isNaN(e)&&!isFinite(e)}function eno(e,t,n,r){var i=1-e;return ena(t[i])&&ena(n[i])}function ens(e,t){var n,r,i,a=t.coord[0],s=t.coord[1],u={coord:a,x:t.x0,y:t.y0},c={coord:s,x:t.x1,y:t.y1};if(Vh(e,"cartesian2d")){;if(a&&s&&(eno(1,a,s,e)||eno(0,a,s,e)))return!0;return n=e,r=u,i=c,!n||!n.containZone||!r.coord||!i.coord||!!etX(r)||!!etX(i)||n.containZone(r.coord,i.coord)}return etK(e,u)||etK(e,c)}function enl(e,t,n,r,i){var a,s=r.coordinateSystem,u=e.getItemModel(t),c=Ek(u.get(n[0]),i.getWidth()),h=Ek(u.get(n[1]),i.getHeight());if(isNaN(c)||isNaN(h)){if(r.getMarkerPosition){var p=e.getValues(["x0","y0"],t),f=e.getValues(["x1","y1"],t),v=s.clampData(p),y=s.clampData(f),_=[];"x0"===n[0]?_[0]=v[0]>y[0]?f[0]:p[0]:_[0]=v[0]>y[0]?p[0]:f[0],"y0"===n[1]?_[1]=v[1]>y[1]?f[1]:p[1]:_[1]=v[1]>y[1]?p[1]:f[1],a=r.getMarkerPosition(_,n,!0)}else{var x=e.get(n[0],t),b=e.get(n[1],t),S=[x,b];s.clampData&&s.clampData(S,S),a=s.dataToPoint(S,!0)}if(Vh(s,"cartesian2d")){var w=s.getAxis("x"),M=s.getAxis("y"),x=e.get(n[0],t),b=e.get(n[1],t);ena(x)?a[0]=w.toGlobalCoord(w.getExtent()["x0"===n[0]?0:1]):ena(b)&&(a[1]=M.toGlobalCoord(M.getExtent()["y0"===n[1]?0:1]))}!isNaN(c)&&(a[0]=c),!isNaN(h)&&(a[1]=h)}else a=[c,h];return a}var enu=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],enc=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.updateTransform=function(e,t,n){t.eachSeries(function(e){var t=etW.getMarkerModelFromSeries(e,"markArea");if(t){var r=t.getData();r.each(function(t){var i=MS(enu,function(i){return enl(r,t,i,e,n)});r.setItemLayout(t,i),r.getItemGraphicEl(t).setShape("points",i)})}},this)},t.prototype.renderSeries=function(e,t,n,r){var i=e.coordinateSystem,a=e.id,s=e.getData(),u=this.markerGroupMap,c=u.get(a)||u.set(a,{group:new ES});this.group.add(c.group),this.markKeep(c);var h=function(e,t,n){if(e){var r,i,a=MS(e&&e.dimensions,function(e){var n=t.getData();return Mf(Mf({},n.getDimensionInfo(n.mapDimension(e))||{}),{name:e,ordinalMeta:null})});r=new zK(i=MS(["x0","y0","x1","y1"],function(e,t){return{name:e,type:a[t%2].type}}),n)}else r=new zK(i=[{name:"value",type:"float"}],n);var s=MS(n.get("data"),ME(eni,t,e,n));e&&(s=MM(s,ME(ens,e)));var u=e?function(e,t,n,r){return Oz(e.coord[Math.floor(r/2)][r%2],i[r])}:function(e,t,n,r){return Oz(e.value,i[r])};return r.initData(s,null,u),r.hasItemOption=!0,r}(i,e,t);t.setData(h),h.each(function(t){var n=MS(enu,function(n){return enl(h,t,n,e,r)}),a=i.getAxis("x").scale,u=i.getAxis("y").scale,c=a.getExtent(),p=u.getExtent(),f=[a.parse(h.get("x0",t)),a.parse(h.get("x1",t))],v=[u.parse(h.get("y0",t)),u.parse(h.get("y1",t))];EN(f),EN(v);var y=!(c[0]>f[1]||c[1]<f[0]||p[0]>v[1]||p[1]<v[0]);h.setItemLayout(t,{points:n,allClipped:!y});var _=h.getItemModel(t).getModel("itemStyle").getItemStyle(),x=N0(s,"color");!_.fill&&(_.fill=x,MP(_.fill)&&(_.fill=To(_.fill,.4))),!_.stroke&&(_.stroke=x),h.setItemVisual(t,"style",_)}),h.diff(enr(c).data).add(function(e){var t=h.getItemLayout(e);if(!t.allClipped){var n=new Bm({shape:{points:t.points}});h.setItemGraphicEl(e,n),c.group.add(n)}}).update(function(e,n){var r=enr(c).data.getItemGraphicEl(n),i=h.getItemLayout(e);i.allClipped?r&&c.group.remove(r):(r?PQ(r,{shape:{points:i.points}},t,e):r=new Bm({shape:{points:i.points}}),h.setItemGraphicEl(e,r),c.group.add(r))}).remove(function(e){var t=enr(c).data.getItemGraphicEl(e);c.group.remove(t)}).execute(),h.eachItemGraphicEl(function(e,n){var r=h.getItemModel(n),i=h.getItemVisual(n,"style");e.useStyle(h.getItemVisual(n,"style")),P8(e,P7(r),{labelFetcher:t,labelDataIndex:n,defaultText:h.getName(n)||"",inheritColor:MP(i.fill)?To(i.fill,1):"#000"}),PW(e,r),PU(e,null,null,r.get(["emphasis","disabled"])),D7(e).dataModel=t}),enr(c).data=h,c.group.silent=t.get("silent")||e.get("silent")},t.type="markArea",t}(et1),enh=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}return wJ(t,e),t.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),this._updateSelector(t)},t.prototype._updateSelector=function(e){var t=e.selector,n=this.ecModel;!0===t&&(t=e.selector=["all","inverse"]),MI(t)&&Mb(t,function(e,r){var i,a;MP(e)&&(e={type:e}),t[r]=Md(e,(i=n,"all"===(a=e.type)?{type:"all",title:i.getLocaleModel().get(["legend","selector","all"])}:"inverse"===a?{type:"inverse",title:i.getLocaleModel().get(["legend","selector","inverse"])}:void 0))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,n=0;n<e.length;n++){var r=e[n].get("name");if(this.isSelected(r)){this.select(r),t=!0;break}}t||this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var t=[],n=[];e.eachRawSeries(function(r){var i,a=r.name;if(n.push(a),r.legendVisualProvider){var s=r.legendVisualProvider.getAllNames();!e.isSeriesFiltered(r)&&(n=n.concat(s)),s.length?t=t.concat(s):i=!0}else i=!0;i&&Ii(r)&&t.push(r.name)}),this._availableNames=n;var r=this.get("data")||t,i=M1(),a=MS(r,function(e){return((MP(e)||ML(e))&&(e={name:e}),i.get(e.name))?null:(i.set(e.name,!0),new Rb(e,this,this.ecModel))},this);this._data=MM(a,function(e){return!!e})},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var t=this.option.selected;"single"===this.get("selectedMode")&&Mb(this._data,function(e){t[e.get("name")]=!1}),t[e]=!0},t.prototype.unSelect=function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var t=this.option.selected;!t.hasOwnProperty(e)&&(t[e]=!0),this[t[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var e=this._data,t=this.option.selected;Mb(e,function(e){t[e.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var e=this._data,t=this.option.selected;Mb(e,function(e){var n=e.get("name",!0);!t.hasOwnProperty(n)&&(t[n]=!0),t[n]=!t[n]})},t.prototype.isSelected=function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&Mv(this._availableNames,e)>=0},t.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(Lv),end=ME,enp=Mb,enf=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!1,n}return wJ(t,e),t.prototype.init=function(){this.group.add(this._contentGroup=new ES),this.group.add(this._selectorGroup=new ES),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,t,n){var r=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!e.get("show",!0)){var i=e.get("align"),a=e.get("orient");(!i||"auto"===i)&&(i="right"===e.get("left")&&"vertical"===a?"right":"left");var s=e.get("selector",!0),u=e.get("selectorPosition",!0);s&&(!u||"auto"===u)&&(u="horizontal"===a?"end":"start"),this.renderInner(i,e,t,n,s,a,u);var c=e.getBoxLayoutParams(),h={width:n.getWidth(),height:n.getHeight()},p=e.get("padding"),f=Lu(c,h,p),v=this.layoutInner(e,i,f,r,s,u),y=Lu(Mg({width:v.width,height:v.height},c),h,p);this.group.x=y.x-v.x,this.group.y=y.y-v.y,this.group.markRedraw(),this.group.add(this._backgroundEl=eeg(v,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,t,n,r,i,a,s){var u=this.getContentGroup(),c=M1(),h=t.get("selectedMode"),p=[];n.eachRawSeries(function(e){e.get("legendHoverLink")||p.push(e.id)}),enp(t.getData(),function(i,a){var s=i.get("name");if(!this.newlineDisabled&&(""===s||"\n"===s)){var f=new ES;f.newline=!0,u.add(f);return}var v=n.getSeriesByName(s)[0];if(!c.get(s))if(v){var y=v.getData(),_=y.getVisual("legendLineStyle")||{},x=y.getVisual("legendIcon"),b=y.getVisual("style"),S=this._createItem(v,s,a,i,t,e,_,b,x,h,r);S.on("click",end(eng,s,null,r,p)).on("mouseover",end(env,v.name,null,r,p)).on("mouseout",end(eny,v.name,null,r,p)),n.ssr&&S.eachChild(function(e){var t=D7(e);t.seriesIndex=v.seriesIndex,t.dataIndex=a,t.ssrType="legend"}),c.set(s,!0)}else n.eachRawSeries(function(u){if(!c.get(s)){if(u.legendVisualProvider){var f=u.legendVisualProvider;if(!f.containName(s))return;var v=f.indexOfName(s),y=f.getItemVisual(v,"style"),_=f.getItemVisual(v,"legendIcon"),x=C9(y.fill);x&&0===x[3]&&(x[3]=.2,y=Mf(Mf({},y),{fill:Ts(x,"rgba")}));var b=this._createItem(u,s,a,i,t,e,{},y,_,h,r);b.on("click",end(eng,null,s,r,p)).on("mouseover",end(env,null,s,r,p)).on("mouseout",end(eny,null,s,r,p)),n.ssr&&b.eachChild(function(e){var t=D7(e);t.seriesIndex=u.seriesIndex,t.dataIndex=a,t.ssrType="legend"}),c.set(s,!0)}}},this)},this),i&&this._createSelector(i,t,r,a,s)},t.prototype._createSelector=function(e,t,n,r,i){var a=this.getSelectorGroup();enp(e,function(e){var r=e.type,i=new D8({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===r?"legendAllSelect":"legendInverseSelect"})}});a.add(i),P8(i,{normal:t.getModel("selectorLabel"),emphasis:t.getModel(["emphasis","selectorLabel"])},{defaultText:e.title}),Pz(i)})},t.prototype._createItem=function(e,t,n,r,i,a,s,u,c,h,p){var f=e.visualDrawType,v=i.get("itemWidth"),y=i.get("itemHeight"),_=i.isSelected(t),x=r.get("symbolRotate"),b=r.get("symbolKeepAspect"),S=r.get("icon"),w=function(e,t,n,r,i,a,s){function u(e,t){"auto"===e.lineWidth&&(e.lineWidth=t.lineWidth>0?2:0),enp(e,function(n,r){"inherit"===e[r]&&(e[r]=t[r])})}var c=t.getModel("itemStyle"),h=c.getItemStyle(),p=0===e.lastIndexOf("empty",0)?"fill":"stroke",f=c.getShallow("decal");h.decal=f&&"inherit"!==f?FL(f,s):r.decal,"inherit"===h.fill&&(h.fill=r[i]),"inherit"===h.stroke&&(h.stroke=r[p]),"inherit"===h.opacity&&(h.opacity=("fill"===i?r:n).opacity),u(h,r);var v=t.getModel("lineStyle"),y=v.getLineStyle();if(u(y,n),"auto"===h.fill&&(h.fill=r.fill),"auto"===h.stroke&&(h.stroke=r.fill),"auto"===y.stroke&&(y.stroke=r.fill),!a){var _=t.get("inactiveBorderWidth"),x=h[p];h.lineWidth="auto"===_?r.lineWidth>0&&x?2:0:h.lineWidth,h.fill=t.get("inactiveColor"),h.stroke=t.get("inactiveBorderColor"),y.stroke=v.get("inactiveColor"),y.lineWidth=v.get("inactiveWidth")}return{itemStyle:h,lineStyle:y}}(c=S||c||"roundRect",r,s,u,f,_,p),M=new ES,A=r.getModel("textStyle");if(MD(e.getLegendIcon)&&(!S||"inherit"===S))M.add(e.getLegendIcon({itemWidth:v,itemHeight:y,icon:c,iconRotate:x,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:b}));else{var C="inherit"===S&&e.getData().getVisual("symbol")?"inherit"===x?e.getData().getVisual("symbolRotate"):x:0;M.add(function(e){var t=e.icon||"roundRect",n=Fo(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return n.setStyle(e.itemStyle),n.rotation=(e.iconRotate||0)*Math.PI/180,n.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n}({itemWidth:v,itemHeight:y,icon:c,iconRotate:C,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:b}))}var T=i.get("formatter"),I=t;MP(T)&&T?I=T.replace("{name}",null!=t?t:""):MD(T)&&(I=T(t));var D=_?A.getTextColor():r.get("inactiveColor");M.add(new D8({style:Re(A,{text:I,x:"left"===a?v+5:-5,y:y/2,fill:D,align:a,verticalAlign:"middle"},{inheritColor:D})}));var P=new DX({shape:M.getBoundingRect(),style:{fill:"transparent"}}),R=r.getModel("tooltip");return R.get("show")&&No({el:P,componentModel:i,itemName:t,itemTooltipOption:R.option}),M.add(P),M.eachChild(function(e){e.silent=!0}),P.silent=!h,this.getContentGroup().add(M),Pz(M),M.__legendDataIndex=n,M},t.prototype.layoutInner=function(e,t,n,r,i,a){var s=this.getContentGroup(),u=this.getSelectorGroup();Ll(e.get("orient"),s,e.get("itemGap"),n.width,n.height);var c=s.getBoundingRect(),h=[-c.x,-c.y];if(u.markRedraw(),s.markRedraw(),!i)return s.x=h[0],s.y=h[1],this.group.getBoundingRect();Ll("horizontal",u,e.get("selectorItemGap",!0));var p=u.getBoundingRect(),f=[-p.x,-p.y],v=e.get("selectorButtonGap",!0),y=e.getOrient().index,_=0===y?"width":"height",x=0===y?"height":"width",b=0===y?"y":"x";"end"===a?f[y]+=c[_]+v:h[y]+=p[_]+v,f[1-y]+=c[x]/2-p[x]/2,u.x=f[0],u.y=f[1],s.x=h[0],s.y=h[1];var S={x:0,y:0};return S[_]=c[_]+v+p[_],S[x]=Math.max(c[x],p[x]),S[b]=Math.min(0,p[b]+f[1-y]),S},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(kR);function eng(e,t,n,r){eny(e,t,n,r),n.dispatchAction({type:"legendToggleSelect",name:null!=e?e:t}),env(e,t,n,r)}function enm(e){for(var t,n=e.getZr().storage.getDisplayList(),r=0,i=n.length;r<i&&!(t=n[r].states.emphasis);)r++;return t&&t.hoverLayer}function env(e,t,n,r){!enm(n)&&n.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:r})}function eny(e,t,n,r){!enm(n)&&n.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:r})}function en_(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(e){for(var n=0;n<t.length;n++)if(!t[n].isSelected(e.name))return!1;return!0})}function enx(e,t,n){var r,i={},a="toggleSelected"===e;return n.eachComponent("legend",function(n){a&&null!=r?n[r?"select":"unSelect"](t.name):"allSelect"===e||"inverseSelect"===e?n[e]():(n[e](t.name),r=n.isSelected(t.name)),Mb(n.getData(),function(e){var t=e.get("name");if("\n"!==t&&""!==t){var r=n.isSelected(t);i.hasOwnProperty(t)?i[t]=i[t]&&r:i[t]=r}})}),"allSelect"===e||"inverseSelect"===e?{selected:i}:{name:t.name,selected:i}}function enb(e){var t;e.registerComponentModel(enh),e.registerComponentView(enf),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,en_),e.registerSubTypeDefaulter("legend",function(){return"plain"}),(t=e).registerAction("legendToggleSelect","legendselectchanged",ME(enx,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",ME(enx,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",ME(enx,"inverseSelect")),t.registerAction("legendSelect","legendselected",ME(enx,"select")),t.registerAction("legendUnSelect","legendunselected",ME(enx,"unSelect"))}var enS=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(t,n,r){var i=Lp(t);e.prototype.init.call(this,t,n,r),enw(this,t,i)},t.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),enw(this,this.option,t)},t.type="legend.scroll",t.defaultOption=RM(enh.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(enh);function enw(e,t,n){var r=e.getOrient(),i=[1,1];i[r.index]=0,Ld(t,n,{type:"box",ignoreSize:!!i})}var enM=["width","height"],enA=["x","y"],enC=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!0,n._currentIndex=0,n}return wJ(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new ES),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new ES)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(t,n,r,i,a,s,u){var c=this;e.prototype.renderInner.call(this,t,n,r,i,a,s,u);var h=this._controllerGroup,p=n.get("pageIconSize",!0),f=MI(p)?p:[p,p];y("pagePrev",0);var v=n.getModel("pageTextStyle");function y(e,t){var r=Nn(n.get("pageIcons",!0)[n.getOrient().name][t],{onclick:MT(c._pageGo,c,e+"DataIndex",n,i)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});r.name=e,h.add(r)}h.add(new D8({name:"pageText",style:{text:"xx/xx",fill:v.getTextColor(),font:v.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),y("pageNext",1)},t.prototype.layoutInner=function(e,t,n,r,i,a){var s=this.getSelectorGroup(),u=e.getOrient().index,c=enM[u],h=enA[u],p=enM[1-u],f=enA[1-u];i&&Ll("horizontal",s,e.get("selectorItemGap",!0));var v=e.get("selectorButtonGap",!0),y=s.getBoundingRect(),_=[-y.x,-y.y],x=Mh(n);i&&(x[c]=n[c]-y[c]-v);var b=this._layoutContentAndController(e,r,x,u,c,p,f,h);if(i){if("end"===a)_[u]+=b[c]+v;else{var S=y[c]+v;_[u]-=S,b[h]-=S}b[c]+=y[c]+v,_[1-u]+=b[f]+b[p]/2-y[p]/2,b[p]=Math.max(b[p],y[p]),b[f]=Math.min(b[f],y[f]+_[1-u]),s.x=_[0],s.y=_[1],s.markRedraw()}return b},t.prototype._layoutContentAndController=function(e,t,n,r,i,a,s,u){var c=this.getContentGroup(),h=this._containerGroup,p=this._controllerGroup;Ll(e.get("orient"),c,e.get("itemGap"),r?n.width:null,r?null:n.height),Ll("horizontal",p,e.get("pageButtonItemGap",!0));var f=c.getBoundingRect(),v=p.getBoundingRect(),y=this._showController=f[i]>n[i],_=[-f.x,-f.y];!t&&(_[r]=c[u]);var x=[0,0],b=[-v.x,-v.y],S=MV(e.get("pageButtonGap",!0),e.get("itemGap",!0));y&&("end"===e.get("pageButtonPosition",!0)?b[r]+=n[i]-v[i]:x[r]+=v[i]+S),b[1-r]+=f[a]/2-v[a]/2,c.setPosition(_),h.setPosition(x),p.setPosition(b);var w={x:0,y:0};if(w[i]=y?n[i]:f[i],w[a]=Math.max(f[a],v[a]),w[s]=Math.min(0,v[s]+b[1-r]),h.__rectSize=n[i],y){var M={x:0,y:0};M[i]=Math.max(n[i]-v[i]-S,0),M[a]=w[a],h.setClipPath(new DX({shape:M})),h.__rectSize=M[i]}else p.eachChild(function(e){e.attr({invisible:!0,silent:!0})});var A=this._getPageInfo(e);return null!=A.pageIndex&&PQ(c,{x:A.contentPosition[0],y:A.contentPosition[1]},y?e:null),this._updatePageInfoView(e,A),w},t.prototype._pageGo=function(e,t,n){var r=this._getPageInfo(t)[e];null!=r&&n.dispatchAction({type:"legendScroll",scrollDataIndex:r,legendId:t.id})},t.prototype._updatePageInfoView=function(e,t){var n=this._controllerGroup;Mb(["pagePrev","pageNext"],function(r){var i=null!=t[r+"DataIndex"],a=n.childOfName(r);a&&(a.setStyle("fill",i?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),a.cursor=i?"pointer":"default")});var r=n.childOfName("pageText"),i=e.get("pageFormatter"),a=t.pageIndex,s=null!=a?a+1:0,u=t.pageCount;r&&i&&r.setStyle("text",MP(i)?i.replace("{current}",null==s?"":s+"").replace("{total}",null==u?"":u+""):i({current:s,total:u}))},t.prototype._getPageInfo=function(e){var t=e.get("scrollDataIndex",!0),n=this.getContentGroup(),r=this._containerGroup.__rectSize,i=e.getOrient().index,a=enM[i],s=enA[i],u=this._findTargetItemIndex(t),c=n.children(),h=c[u],p=c.length,f=p?1:0,v={contentPosition:[n.x,n.y],pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!h)return v;var y=w(h);v.contentPosition[i]=-y.s;for(var _=u+1,x=y,b=y,S=null;_<=p;++_)(!(S=w(c[_]))&&b.e>x.s+r||S&&!M(S,x.s))&&(x=b.i>x.i?b:S)&&(null==v.pageNextDataIndex&&(v.pageNextDataIndex=x.i),++v.pageCount),b=S;for(var _=u-1,x=y,b=y,S=null;_>=-1;--_)(!(S=w(c[_]))||!M(b,S.s))&&x.i<b.i&&(b=x,null==v.pagePrevDataIndex&&(v.pagePrevDataIndex=x.i),++v.pageCount,++v.pageIndex),x=S;return v;function w(e){if(e){var t=e.getBoundingRect(),n=t[s]+e[s];return{s:n,e:n+t[a],i:e.__legendDataIndex}}}function M(e,t){return e.e>=t&&e.s<=t+r}},t.prototype._findTargetItemIndex=function(e){var t,n;if(!this._showController)return 0;return this.getContentGroup().eachChild(function(r,i){var a=r.__legendDataIndex;null==n&&null!=a&&(n=i),a===e&&(t=i)}),null!=t?t:n},t.type="legend.scroll",t}(enf);function enT(e){zP(enb),e.registerComponentModel(enS),e.registerComponentView(enC),!function(e){e.registerAction("legendScroll","legendscroll",function(e,t){var n=e.scrollDataIndex;null!=n&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(e){e.setScrollDataIndex(n)})})}(e)}var enE=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.type="dataZoom.inside",t.defaultOption=RM($8.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}($8),enI=Is();function enD(e,t){if(t){e.removeKey(t.model.uid);var n=t.controller;n&&n.dispose()}}function enP(e,t){!e.isDisposed()&&e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function enR(e,t,n,r){return e.coordinateSystem.containPoint([n,r])}var enL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return wJ(t,e),t.prototype.render=function(t,n,r){if(e.prototype.render.apply(this,arguments),t.noTarget()){this._clear();return}this.range=t.getPercentRange(),!function(e,t,n){enI(e).coordSysRecordMap.each(function(e){var r=e.dataZoomInfoMap.get(t.uid);r&&(r.getRange=n)})}(r,t,{pan:MT(enO.pan,this),zoom:MT(enO.zoom,this),scrollMove:MT(enO.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){!function(e,t){for(var n=enI(e).coordSysRecordMap,r=n.keys(),i=0;i<r.length;i++){var a=r[i],s=n.get(a),u=s.dataZoomInfoMap;if(u){var c=t.uid;u.get(c)&&(u.removeKey(c),!u.keys().length&&enD(n,s))}}}(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(eet),enO={zoom:function(e,t,n,r){var i=this.range,a=i.slice(),s=e.axisModels[0];if(!!s){var u=enB[t](null,[r.originX,r.originY],s,n,e),c=(u.signal>0?u.pixelStart+u.pixelLength-u.pixel:u.pixel-u.pixelStart)/u.pixelLength*(a[1]-a[0])+a[0],h=Math.max(1/r.scale,0);a[0]=(a[0]-c)*h+c,a[1]=(a[1]-c)*h+c;var p=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(J$(0,a,[0,100],0,p.minSpan,p.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1])return a}},pan:enk(function(e,t,n,r,i,a){var s=enB[r]([a.oldX,a.oldY],[a.newX,a.newY],t,i,n);return s.signal*(e[1]-e[0])*s.pixel/s.pixelLength}),scrollMove:enk(function(e,t,n,r,i,a){return enB[r]([0,0],[a.scrollDelta,a.scrollDelta],t,i,n).signal*(e[1]-e[0])*a.scrollDelta})};function enk(e){return function(t,n,r,i){var a=this.range,s=a.slice(),u=t.axisModels[0];if(!!u){if(J$(e(s,u,t,n,r,i),s,[0,100],"all"),this.range=s,a[0]!==s[0]||a[1]!==s[1])return s}}}var enB={grid:function(e,t,n,r,i){var a=n.axis,s={},u=i.model.coordinateSystem.getRect();return e=e||[0,0],"x"===a.dim?(s.pixel=t[0]-e[0],s.pixelLength=u.width,s.pixelStart=u.x,s.signal=a.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=u.height,s.pixelStart=u.y,s.signal=a.inverse?-1:1),s},polar:function(e,t,n,r,i){var a=n.axis,s={},u=i.model.coordinateSystem,c=u.getRadiusAxis().getExtent(),h=u.getAngleAxis().getExtent();return e=e?u.pointToCoord(e):[0,0],t=u.pointToCoord(t),"radiusAxis"===n.mainType?(s.pixel=t[0]-e[0],s.pixelLength=c[1]-c[0],s.pixelStart=c[0],s.signal=a.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=h[1]-h[0],s.pixelStart=h[0],s.signal=a.inverse?-1:1),s},singleAxis:function(e,t,n,r,i){var a=n.axis,s=i.model.coordinateSystem.getRect(),u={};return e=e||[0,0],"horizontal"===a.orient?(u.pixel=t[0]-e[0],u.pixelLength=s.width,u.pixelStart=s.x,u.signal=a.inverse?1:-1):(u.pixel=t[1]-e[1],u.pixelLength=s.height,u.pixelStart=s.y,u.signal=a.inverse?-1:1),u}};function enN(e){eel(e),e.registerComponentModel(enE),e.registerComponentView(enL),!function(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,function(e,t){var n=enI(t),r=n.coordSysRecordMap||(n.coordSysRecordMap=M1());r.each(function(e){e.dataZoomInfoMap=null}),e.eachComponent({mainType:"dataZoom",subType:"inside"},function(e){Mb($6(e).infoList,function(n){var i,a,s,u,c=n.model.uid;var h=r.get(c)||r.set(c,(i=t,u=(s={model:a=n.model,containsPoint:ME(enR,a),dispatchAction:ME(enP,i),dataZoomInfoMap:null,controller:null}).controller=new jh(i.getZr()),Mb(["pan","zoom","scrollMove"],function(e){u.on(e,function(t){var n=[];s.dataZoomInfoMap.each(function(r){if(!!t.isAvailableBehavior(r.model.option)){var i=(r.getRange||{})[e],a=i&&i(r.dzReferCoordSysInfo,s.model.mainType,s.controller,t);!r.model.get("disabled",!0)&&a&&n.push({dataZoomId:r.model.id,start:a[0],end:a[1]})}}),n.length&&s.dispatchAction(n)})}),s));(h.dataZoomInfoMap||(h.dataZoomInfoMap=M1())).set(e.uid,{dzReferCoordSysInfo:n,model:e,getRange:null})})}),r.each(function(e){var t,n,i,a,s,u=e.controller,c=e.dataZoomInfoMap;if(c){var h=c.keys()[0];null!=h&&(s=c.get(h))}if(!s){enD(r,e);return}var p=(n="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},a=!0,c.each(function(e){var r=e.model,s=!r.get("disabled",!0)&&(!r.get("zoomLock",!0)||"move");i[n+s]>i[n+t]&&(t=s),a=a&&r.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!a}});u.enable(p.controlType,p.opt),u.setPointerChecker(e.containsPoint),NS(e,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}(e)}var enF=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=RM($8.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}($8),enz="horizontal",enU="vertical",enH=["line","bar","candlestick","scatter"],enG={easing:"cubicOut",duration:100,delay:0},enV=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._displayables={},n}return wJ(t,e),t.prototype.init=function(e,t){this.api=t,this._onBrush=MT(this._onBrush,this),this._onBrushEnd=MT(this._onBrushEnd,this)},t.prototype.render=function(t,n,r,i){if(e.prototype.render.apply(this,arguments),NS(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),!1===t.get("show")){this.group.removeAll();return}if(t.noTarget()){this._clear(),this.group.removeAll();return}(!i||"dataZoom"!==i.type||i.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Nw(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var t=this._displayables.sliderGroup=new ES;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},t.prototype._resetLocation=function(){var e=this.dataZoomModel,t=this.api,n=e.get("brushSelect"),r=this._findCoordRect(),i={width:t.getWidth(),height:t.getHeight()},a=this._orient===enz?{right:i.width-r.x-r.width,top:i.height-30-7-(n?7:0),width:r.width,height:30}:{right:7,top:r.y,width:30,height:r.height},s=Lp(e.option);Mb(["right","top","width","height"],function(e){"ph"===s[e]&&(s[e]=a[e])});var u=Lu(s,i);this._location={x:u.x,y:u.y},this._size=[u.width,u.height],this._orient===enU&&this._size.reverse()},t.prototype._positionGroup=function(){var e=this.group,t=this._location,n=this._orient,r=this.dataZoomModel.getFirstTargetAxisModel(),i=r&&r.get("inverse"),a=this._displayables.sliderGroup,s=(this._dataShadowInfo||{}).otherAxisInverse;a.attr(n!==enz||i?n===enz&&i?{scaleY:s?1:-1,scaleX:-1}:n!==enU||i?{scaleY:s?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:s?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:s?1:-1,scaleX:1});var u=e.getBoundingRect([a]);e.x=t.x-u.x,e.y=t.y-u.y,e.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var e=this.dataZoomModel,t=this._size,n=this._displayables.sliderGroup,r=e.get("brushSelect");n.add(new DX({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var i=new DX({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:MT(this._onClickPanel,this)}),a=this.api.getZr();r?(i.on("mousedown",this._onBrushStart,this),i.cursor="crosshair",a.on("mousemove",this._onBrush),a.on("mouseup",this._onBrushEnd)):(a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)),n.add(i)},t.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!e)return;var t=this._size,n=this._shadowSize||[],r=e.series,i=r.getRawData(),a=r.getShadowDim&&r.getShadowDim(),s=a&&i.getDimensionInfo(a)?r.getShadowDim():e.otherDim;if(null!=s){var u=this._shadowPolygonPts,c=this._shadowPolylinePts;if(i!==this._shadowData||s!==this._shadowDim||t[0]!==n[0]||t[1]!==n[1]){var h,p=i.getDataExtent(s),f=(p[1]-p[0])*.3;p=[p[0]-f,p[1]+f];var v=[0,t[1]],y=[0,t[0]],_=[[t[0],0],[0,0]],x=[],b=y[1]/(i.count()-1),S=0,w=Math.round(i.count()/t[0]);i.each([s],function(e,t){if(w>0&&t%w){S+=b;return}var n=null==e||isNaN(e)||""===e,r=n?0:EO(e,p,v,!0);n&&!h&&t?(_.push([_[_.length-1][0],0]),x.push([x[x.length-1][0],0])):!n&&h&&(_.push([S,0]),x.push([S,0])),_.push([S,r]),x.push([S,r]),S+=b,h=n}),u=this._shadowPolygonPts=_,c=this._shadowPolylinePts=x}this._shadowData=i,this._shadowDim=s,this._shadowSize=[t[0],t[1]];for(var M=this.dataZoomModel,A=0;A<3;A++){var C=function(e){var t=M.getModel(e?"selectedDataBackground":"dataBackground"),n=new ES,r=new Bm({shape:{points:u},segmentIgnoreThreshold:1,style:t.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),i=new B_({shape:{points:c},segmentIgnoreThreshold:1,style:t.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return n.add(r),n.add(i),n}(1===A);this._displayables.sliderGroup.add(C),this._displayables.dataShadowSegs.push(C)}}},t.prototype._prepareDataShadowInfo=function(){var e,t=this.dataZoomModel,n=t.get("showDataShadow");if(!1!==n){var r=this.ecModel;return t.eachTargetAxis(function(i,a){Mb(t.getAxisProxy(i,a).getTargetSeriesModels(),function(t){if(!(e||!0!==n&&0>Mv(enH,t.get("type")))){var s,u=r.getComponent($4(i),a).axis,c=function(e){return({x:"y",y:"x",radius:"angle",angle:"radius"})[e]}(i),h=t.coordinateSystem;null!=c&&h.getOtherAxis&&(s=h.getOtherAxis(u).inverse),c=t.getData().mapDimension(c),e={thisAxis:u,series:t,thisDim:i,otherDim:c,otherAxisInverse:s}}},this)},this),e}},t.prototype._renderHandle=function(){var e=this.group,t=this._displayables,n=t.handles=[null,null],r=t.handleLabels=[null,null],i=this._displayables.sliderGroup,a=this._size,s=this.dataZoomModel,u=this.api,c=s.get("borderRadius")||0,h=s.get("brushSelect"),p=t.filler=new DX({silent:h,style:{fill:s.get("fillerColor")},textConfig:{position:"inside"}});i.add(p),i.add(new DX({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:a[0],height:a[1],r:c},style:{stroke:s.get("dataBackgroundColor")||s.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),Mb([0,1],function(t){var a=s.get("handleIcon");!Fr[a]&&0>a.indexOf("path://")&&0>a.indexOf("image://")&&(a="path://"+a);var u=Fo(a,-1,0,2,2,null,!0);u.attr({cursor:enW(this._orient),draggable:!0,drift:MT(this._onDragMove,this,t),ondragend:MT(this._onDragEnd,this),onmouseover:MT(this._showDataInfo,this,!0),onmouseout:MT(this._showDataInfo,this,!1),z2:5});var c=u.getBoundingRect(),h=s.get("handleSize");this._handleHeight=Ek(h,this._size[1]),this._handleWidth=c.width/c.height*this._handleHeight,u.setStyle(s.getModel("handleStyle").getItemStyle()),u.style.strokeNoScale=!0,u.rectHover=!0,u.ensureState("emphasis").style=s.getModel(["emphasis","handleStyle"]).getItemStyle(),Pz(u);var p=s.get("handleColor");null!=p&&(u.style.fill=p),i.add(n[t]=u);var f=s.getModel("textStyle");e.add(r[t]=new D8({silent:!0,invisible:!0,style:Re(f,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:f.getTextColor(),font:f.getFont()}),z2:10}))},this);var f=p;if(h){var v=Ek(s.get("moveHandleSize"),a[1]),y=t.moveHandle=new DX({style:s.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:a[1]-.5,height:v}}),_=.8*v,x=t.moveHandleIcon=Fo(s.get("moveHandleIcon"),-_/2,-_/2,_,_,"#fff",!0);x.silent=!0,x.y=a[1]+v/2-.5,y.ensureState("emphasis").style=s.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var b=Math.min(a[1]/2,Math.max(v,10));(f=t.moveZone=new DX({invisible:!0,shape:{y:a[1]-b,height:v+b}})).on("mouseover",function(){u.enterEmphasis(y)}).on("mouseout",function(){u.leaveEmphasis(y)}),i.add(y),i.add(x),i.add(f)}f.attr({draggable:!0,cursor:enW(this._orient),drift:MT(this._onDragMove,this,"all"),ondragstart:MT(this._showDataInfo,this,!0),ondragend:MT(this._onDragEnd,this),onmouseover:MT(this._showDataInfo,this,!0),onmouseout:MT(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[EO(e[0],[0,100],t,!0),EO(e[1],[0,100],t,!0)]},t.prototype._updateInterval=function(e,t){var n=this.dataZoomModel,r=this._handleEnds,i=this._getViewExtent(),a=n.findRepresentativeAxisProxy().getMinMaxSpan(),s=[0,100];J$(t,r,i,n.get("zoomLock")?"all":e,null!=a.minSpan?EO(a.minSpan,s,i,!0):null,null!=a.maxSpan?EO(a.maxSpan,s,i,!0):null);var u=this._range,c=this._range=EN([EO(r[0],i,s,!0),EO(r[1],i,s,!0)]);return!u||u[0]!==c[0]||u[1]!==c[1]},t.prototype._updateView=function(e){var t=this._displayables,n=this._handleEnds,r=EN(n.slice()),i=this._size;Mb([0,1],function(e){var r=t.handles[e],a=this._handleHeight;r.attr({scaleX:a/2,scaleY:a/2,x:n[e]+(e?-1:1),y:i[1]/2-a/2})},this),t.filler.setShape({x:r[0],y:0,width:r[1]-r[0],height:i[1]});var a={x:r[0],width:r[1]-r[0]};t.moveHandle&&(t.moveHandle.setShape(a),t.moveZone.setShape(a),t.moveZone.getBoundingRect(),t.moveHandleIcon&&t.moveHandleIcon.attr("x",a.x+a.width/2));for(var s=t.dataShadowSegs,u=[0,r[0],r[1],i[0]],c=0;c<s.length;c++){var h=s[c],p=h.getClipPath();!p&&(p=new DX,h.setClipPath(p)),p.setShape({x:u[c],y:0,width:u[c+1]-u[c],height:i[1]})}this._updateDataInfo(e)},t.prototype._updateDataInfo=function(e){var t=this.dataZoomModel,n=this._displayables,r=n.handleLabels,i=this._orient,a=["",""];if(t.get("showDetail")){var s=t.findRepresentativeAxisProxy();if(s){var u=s.getAxisModel().axis,c=this._range,h=e?s.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:s.getDataValueWindow();a=[this._formatLabel(h[0],u),this._formatLabel(h[1],u)]}}var p=EN(this._handleEnds.slice());function f(e){var t=B4(n.handles[e].parent,this.group),s=B9(0===e?"right":"left",t),u=this._handleWidth/2+5,c=B6([p[e]+(0===e?-u:u),this._size[1]/2],t);r[e].setStyle({x:c[0],y:c[1],verticalAlign:i===enz?"middle":s,align:i===enz?s:"center",text:a[e]})}f.call(this,0),f.call(this,1)},t.prototype._formatLabel=function(e,t){var n=this.dataZoomModel,r=n.get("labelFormatter"),i=n.get("labelPrecision");(null==i||"auto"===i)&&(i=t.getPixelPrecision());var a=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(i,20));return MD(r)?r(e,a):MP(r)?r.replace("{value}",a):a},t.prototype._showDataInfo=function(e){e=this._dragging||e;var t=this._displayables,n=t.handleLabels;n[0].attr("invisible",!e),n[1].attr("invisible",!e),t.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](t.moveHandle,1)},t.prototype._onDragMove=function(e,t,n,r){this._dragging=!0,AW(r.event);var i=B6([t,n],this._displayables.sliderGroup.getLocalTransform(),!0),a=this._updateInterval(e,i[0]),s=this.dataZoomModel.get("realtime");this._updateView(!s),a&&s&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),this.dataZoomModel.get("realtime")||this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(e){var t=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(n[0]<0)&&!(n[0]>t[0])&&!(n[1]<0)&&!(n[1]>t[1])){var r=this._handleEnds,i=(r[0]+r[1])/2,a=this._updateInterval("all",n[0]-i);this._updateView(),a&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(e){var t=e.offsetX,n=e.offsetY;this._brushStart=new A5(t,n),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(e){if(!this._brushing)return;var t=this._displayables.brushRect;if(this._brushing=!1,!t)return;t.attr("ignore",!0);var n=t.shape;if(!(+new Date-this._brushStartTime<200&&5>Math.abs(n.width))){var r=this._getViewExtent(),i=[0,100];this._range=EN([EO(n.x,r,i,!0),EO(n.x+n.width,r,i,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}},t.prototype._onBrush=function(e){this._brushing&&(AW(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},t.prototype._updateBrushRect=function(e,t){var n=this._displayables,r=this.dataZoomModel,i=n.brushRect;!i&&(i=n.brushRect=new DX({silent:!0,style:r.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(i)),i.attr("ignore",!1);var a=this._brushStart,s=this._displayables.sliderGroup,u=s.transformCoordToLocal(e,t),c=s.transformCoordToLocal(a.x,a.y),h=this._size;u[0]=Math.max(Math.min(h[0],u[0]),0),i.setShape({x:c[0],y:0,width:u[0]-c[0],height:h[1]})},t.prototype._dispatchZoomAction=function(e){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?enG:null,start:t[0],end:t[1]})},t.prototype._findCoordRect=function(){var e,t=$6(this.dataZoomModel).infoList;if(!e&&t.length){var n=t[0].model.coordinateSystem;e=n.getRect&&n.getRect()}if(!e){var r=this.api.getWidth(),i=this.api.getHeight();e={x:.2*r,y:.2*i,width:.6*r,height:.6*i}}return e},t.type="dataZoom.slider",t}(eet);function enW(e){return"vertical"===e?"ns-resize":"ew-resize"}function enj(e){e.registerComponentModel(enF),e.registerComponentView(enV),eel(e)}var enX={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};let enY={get:function(e,t,n){var r=Mh((enX[e]||{})[t]);return n&&MI(r)?r[r.length-1]:r}};var enJ=Yl.mapVisual,enZ=Yl.eachVisual,enq=Mb,enK=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return wJ(t,e),t.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n)},t.prototype.optionUpdated=function(e,t){var n=this.option;t||etu(n,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(e){var t=this.stateList;e=MT(e,this),this.controllerVisuals=etl(this.option.controller,t,e),this.targetVisuals=etl(this.option.target,t,e)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,t=[];return null==e||"all"===e?this.ecModel.eachSeries(function(e,n){t.push(n)}):t=E6(e),t},t.prototype.eachTargetSeries=function(e,t){Mb(this.getTargetSeriesIndices(),function(n){var r=this.ecModel.getSeriesByIndex(n);r&&e.call(t,r)},this)},t.prototype.isTargetSeries=function(e){var t=!1;return this.eachTargetSeries(function(n){n===e&&(t=!0)}),t},t.prototype.formatValueText=function(e,t,n){var r,i=this.option,a=i.precision,s=this.dataBound,u=i.formatter;n=n||["<",">"],MI(e)&&(e=e.slice(),r=!0);var c=t?e:r?[h(e[0]),h(e[1])]:h(e);if(MP(u))return u.replace("{value}",r?c[0]:c).replace("{value2}",r?c[1]:c);if(MD(u))return r?u(e[0],e[1]):u(e);if(!r)return c;return e[0]===s[0]?n[0]+" "+c[1]:e[1]===s[1]?n[1]+" "+c[0]:c[0]+" - "+c[1];function h(e){return e===s[0]?"min":e===s[1]?"max":(+e).toFixed(Math.min(a,20))}},t.prototype.resetExtent=function(){var e=this.option,t=EN([e.min,e.max]);this._dataExtent=t},t.prototype.getDataDimensionIndex=function(e){var t=this.option.dimension;if(null!=t)return e.getDimensionIndex(t);for(var n=e.dimensions,r=n.length-1;r>=0;r--){var i=n[r],a=e.getDimensionInfo(i);if(!a.isCalculationCoord)return a.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var e=this.ecModel,t=this.option,n={inRange:t.inRange,outOfRange:t.outOfRange},r=t.target||(t.target={}),i=t.controller||(t.controller={});Md(r,n),Md(i,n);var a=this.isCategory();function s(n){MI(t.color)&&!n.inRange&&(n.inRange={color:t.color.slice().reverse()}),n.inRange=n.inRange||{color:e.get("gradientColor")}}s.call(this,r),s.call(this,i),(function(e,t,n){var r=e[t],i=e[n];r&&!i&&(i=e[n]={},enq(r,function(e,t){if(!!Yl.isValidType(t)){var n=enY.get(t,"inactive",a);null!=n&&(i[t]=n,"color"===t&&!i.hasOwnProperty("opacity")&&!i.hasOwnProperty("colorAlpha")&&(i.opacity=[0,0]))}}))}).call(this,r,"inRange","outOfRange"),(function(e){var t=(e.inRange||{}).symbol||(e.outOfRange||{}).symbol,n=(e.inRange||{}).symbolSize||(e.outOfRange||{}).symbolSize,r=this.get("inactiveColor"),i=this.getItemSymbol()||"roundRect";enq(this.stateList,function(s){var u=this.itemSize,c=e[s];!c&&(c=e[s]={color:a?r:[r]}),null==c.symbol&&(c.symbol=t&&Mh(t)||(a?i:[i])),null==c.symbolSize&&(c.symbolSize=n&&Mh(n)||(a?u[0]:[u[0],u[0]])),c.symbol=enJ(c.symbol,function(e){return"none"===e?i:e});var h=c.symbolSize;if(null!=h){var p=-1/0;enZ(h,function(e){e>p&&(p=e)}),c.symbolSize=enJ(h,function(e){return EO(e,[0,p],[0,u[0]],!0)})}},this)}).call(this,i)},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(e){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(e){return null},t.prototype.getVisualMeta=function(e){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(Lv),enQ=[20,140],en$=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.optionUpdated=function(t,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(e){e.mappingMethod="linear",e.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(null==t[0]||isNaN(t[0]))&&(t[0]=20),(null==t[1]||isNaN(t[1]))&&(t[1]=140)},t.prototype._resetRange=function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):MI(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),Mb(this.stateList,function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=t[1]/3)},this)},t.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},t.prototype.getSelected=function(){var e=this.getExtent(),t=EN((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},t.prototype.getValueState=function(e){var t=this.option.range,n=this.getExtent();return(t[0]<=n[0]||t[0]<=e)&&(t[1]>=n[1]||e<=t[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var t=[];return this.eachTargetSeries(function(n){var r=[],i=n.getData();i.each(this.getDataDimensionIndex(i),function(t,n){e[0]<=t&&t<=e[1]&&r.push(n)},this),t.push({seriesId:n.id,dataIndex:r})},this),t},t.prototype.getVisualMeta=function(e){var t=en0(this,"outOfRange",this.getExtent()),n=en0(this,"inRange",this.option.range.slice()),r=[];function i(t,n){r.push({value:t,color:e(t,n)})}for(var a=0,s=0,u=n.length,c=t.length;s<c&&(!n.length||t[s]<=n[0]);s++)t[s]<n[a]&&i(t[s],"outOfRange");for(var h=1;a<u;a++,h=0)h&&r.length&&i(n[a],"outOfRange"),i(n[a],"inRange");for(var h=1;s<c;s++)(!n.length||n[n.length-1]<t[s])&&(h&&(r.length&&i(r[r.length-1].value,"outOfRange"),h=0),i(t[s],"outOfRange"));var p=r.length;return{stops:r,outerColors:[p?r[0].color:"transparent",p?r[p-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=RM(enK.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(enK);function en0(e,t,n){if(n[0]===n[1])return n.slice();for(var r=(n[1]-n[0])/200,i=n[0],a=[],s=0;s<=200&&i<n[1];s++)a.push(i),i+=r;return a.push(n[1]),a}var en1=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return wJ(t,e),t.prototype.init=function(e,t){this.ecModel=e,this.api=t},t.prototype.render=function(e,t,n,r){if(this.visualMapModel=e,!1===e.get("show")){this.group.removeAll();return}this.doRender(e,t,n,r)},t.prototype.renderBackground=function(e){var t=this.visualMapModel,n=R4(t.get("padding")||0),r=e.getBoundingRect();e.add(new DX({z2:-1,silent:!0,shape:{x:r.x-n[3],y:r.y-n[0],width:r.width+n[3]+n[1],height:r.height+n[0]+n[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},t.prototype.getControllerVisual=function(e,t,n){var r=(n=n||{}).forceState,i=this.visualMapModel,a={};if("color"===t){var s=i.get("contentColor");a.color=s}function u(e){return a[e]}function c(e,t){a[e]=t}var h=i.controllerVisuals[r||i.getValueState(e)];return Mb(Yl.prepareVisualTypes(h),function(r){var i=h[r];n.convertOpacityToAlpha&&"opacity"===r&&(r="colorAlpha",i=h.__alphaForOpacity),Yl.dependsOn(r,t)&&i&&i.applyVisual(e,u,c)}),a[t]},t.prototype.positionGroup=function(e){var t=this.visualMapModel,n=this.api;Lc(e,t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},t.prototype.doRender=function(e,t,n,r){},t.type="visualMap",t}(kR),en2=[["left","right","width"],["top","bottom","height"]];function en3(e,t,n){var r=e.option,i=r.align;if(null!=i&&"auto"!==i)return i;for(var a={width:t.getWidth(),height:t.getHeight()},s="horizontal"===r.orient?1:0,u=en2[s],c=[0,null,10],h={},p=0;p<3;p++)h[en2[1-s][p]]=c[p],h[u[p]]=2===p?n[0]:r[u[p]];var f=[["x","width",3],["y","height",0]][s],v=Lu(h,a,r.padding);return u[(v.margin[f[2]]||0)+v[f[0]]+.5*v[f[1]]<.5*a[f[1]]?0:1]}function en5(e,t){return Mb(e||[],function(e){null!=e.dataIndex&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var en4=EO,en6=Math.min,en9=Math.max,en8=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return wJ(t,e),t.prototype.init=function(t,n){e.prototype.init.call(this,t,n),this._hoverLinkFromSeriesMouseOver=MT(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=MT(this._hideIndicator,this)},t.prototype.doRender=function(e,t,n,r){(!r||"selectDataRange"!==r.type||r.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var n=e.get("text");this._renderEndsText(t,n,0),this._renderEndsText(t,n,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},t.prototype._renderEndsText=function(e,t,n){if(!!t){var r=t[1-n];r=null!=r?r+"":"";var i=this.visualMapModel,a=i.get("textGap"),s=i.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([s[0]/2,0===n?-a:s[1]+a],u),h=this._applyTransform(0===n?"bottom":"top",u),p=this._orient,f=this.visualMapModel.textStyleModel;this.group.add(new D8({style:Re(f,{x:c[0],y:c[1],verticalAlign:"horizontal"===p?"middle":h,align:"horizontal"===p?h:"center",text:r})}))}},t.prototype._renderBar=function(e){var t=this.visualMapModel,n=this._shapes,r=t.itemSize,i=this._orient,a=this._useHandle,s=en3(t,this.api,r),u=n.mainGroup=this._createBarGroup(s),c=new ES;u.add(c),c.add(n.outOfRange=en7()),c.add(n.inRange=en7(null,a?ert(this._orient):null,MT(this._dragHandle,this,"all",!1),MT(this._dragHandle,this,"all",!0))),c.setClipPath(new DX({shape:{x:0,y:0,width:r[0],height:r[1],r:3}}));var h=t.textStyleModel.getTextRect("国"),p=en9(h.width,h.height);a&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(t,u,0,r,p,i),this._createHandle(t,u,1,r,p,i)),this._createIndicator(t,u,r,p,i),e.add(u)},t.prototype._createHandle=function(e,t,n,r,i,a){var s=MT(this._dragHandle,this,n,!1),u=MT(this._dragHandle,this,n,!0),c=Eh(e.get("handleSize"),r[0]),h=Fo(e.get("handleIcon"),-c/2,-c/2,c,c,null,!0),p=ert(this._orient);h.attr({cursor:p,draggable:!0,drift:s,ondragend:u,onmousemove:function(e){AW(e.event)}}),h.x=r[0]/2,h.useStyle(e.getModel("handleStyle").getItemStyle()),h.setStyle({strokeNoScale:!0,strokeFirst:!0}),h.style.lineWidth*=2,h.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),Pj(h,!0),t.add(h);var f=new D8({cursor:p,draggable:!0,drift:s,onmousemove:function(e){AW(e.event)},ondragend:u,style:Re(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});f.ensureState("blur").style={opacity:.1},f.stateTransition={duration:200},this.group.add(f);var v=[c,0],y=this._shapes;y.handleThumbs[n]=h,y.handleLabelPoints[n]=v,y.handleLabels[n]=f},t.prototype._createIndicator=function(e,t,n,r,i){var a=Eh(e.get("indicatorSize"),n[0]),s=Fo(e.get("indicatorIcon"),-a/2,-a/2,a,a,null,!0);s.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var u=e.getModel("indicatorStyle").getItemStyle();if(s instanceof DF){var c=s.style;s.useStyle(Mf({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else s.useStyle(u);t.add(s);var h=new D8({silent:!0,invisible:!0,style:Re(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});this.group.add(h);var p=[("horizontal"===i?r/2:6)+n[0]/2,0],f=this._shapes;f.indicator=s,f.indicatorLabel=h,f.indicatorLabelPoint=p,this._firstShowIndicator=!0},t.prototype._dragHandle=function(e,t,n,r){if(!!this._useHandle){if(this._dragging=!t,!t){var i=this._applyTransform([n,r],this._shapes.mainGroup,!0);this._updateInterval(e,i[1]),this._hideIndicator(),this._updateView()}!this.visualMapModel.get("realtime")===t&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?this._hovering||this._clearHoverLinkToSeries():ere(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},t.prototype._resetInterval=function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),n=e.getExtent(),r=[0,e.itemSize[1]];this._handleEnds=[en4(t[0],n,r,!0),en4(t[1],n,r,!0)]},t.prototype._updateInterval=function(e,t){t=t||0;var n=this.visualMapModel,r=this._handleEnds,i=[0,n.itemSize[1]];J$(t,r,i,e,0);var a=n.getExtent();this._dataInterval=[en4(r[0],i,a,!0),en4(r[1],i,a,!0)]},t.prototype._updateView=function(e){var t=this.visualMapModel,n=t.getExtent(),r=this._shapes,i=[0,t.itemSize[1]],a=e?i:this._handleEnds,s=this._createBarVisual(this._dataInterval,n,a,"inRange"),u=this._createBarVisual(n,n,i,"outOfRange");r.inRange.setStyle({fill:s.barColor}).setShape("points",s.barPoints),r.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(a,s)},t.prototype._createBarVisual=function(e,t,n,r){var i={forceState:r,convertOpacityToAlpha:!0},a=this._makeColorGradient(e,i),s=[this.getControllerVisual(e[0],"symbolSize",i),this.getControllerVisual(e[1],"symbolSize",i)],u=this._createBarPoints(n,s);return{barColor:new BO(0,0,0,1,a),barPoints:u,handlesColor:[a[0].color,a[a.length-1].color]}},t.prototype._makeColorGradient=function(e,t){var n=[],r=(e[1]-e[0])/100;n.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var i=1;i<100;i++){var a=e[0]+r*i;if(a>e[1])break;n.push({color:this.getControllerVisual(a,"color",t),offset:i/100})}return n.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),n},t.prototype._createBarPoints=function(e,t){var n=this.visualMapModel.itemSize;return[[n[0]-t[0],e[0]],[n[0],e[0]],[n[0],e[1]],[n[0]-t[1],e[1]]]},t.prototype._createBarGroup=function(e){var t=this._orient,n=this.visualMapModel.get("inverse");return new ES("horizontal"!==t||n?"horizontal"===t&&n?{scaleX:"bottom"===e?-1:1,rotation:-Math.PI/2}:"vertical"!==t||n?{scaleX:"left"===e?1:-1}:{scaleX:"left"===e?1:-1,scaleY:-1}:{scaleX:"bottom"===e?1:-1,rotation:Math.PI/2})},t.prototype._updateHandle=function(e,t){if(!!this._useHandle){var n=this._shapes,r=this.visualMapModel,i=n.handleThumbs,a=n.handleLabels,s=r.itemSize,u=r.getExtent();Mb([0,1],function(c){var h=i[c];h.setStyle("fill",t.handlesColor[c]),h.y=e[c];var p=en4(e[c],[0,s[1]],u,!0),f=this.getControllerVisual(p,"symbolSize");h.scaleX=h.scaleY=f/s[0],h.x=s[0]-f/2;var v=B6(n.handleLabelPoints[c],B4(h,this.group));a[c].setStyle({x:v[0],y:v[1],text:r.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",n.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(e,t,n,r){var i=this.visualMapModel,a=i.getExtent(),s=i.itemSize,u=[0,s[1]],c=this._shapes,h=c.indicator;if(!!h){h.attr("invisible",!1);var p=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0}),f=this.getControllerVisual(e,"symbolSize"),v=en4(e,a,u,!0),y=s[0]-f/2,_={x:h.x,y:h.y};h.y=v,h.x=y;var x=B6(c.indicatorLabelPoint,B4(h,this.group)),b=c.indicatorLabel;b.attr("invisible",!1);var S=this._applyTransform("left",c.mainGroup),w="horizontal"===this._orient;b.setStyle({text:(n||"")+i.formatValueText(t),verticalAlign:w?S:"middle",align:w?"center":S});var M={x:y,y:v,style:{fill:p}},A={style:{x:x[0],y:x[1]}};if(i.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var C={duration:100,easing:"cubicInOut",additive:!0};h.x=_.x,h.y=_.y,h.animateTo(M,C),b.animateTo(A,C)}else h.attr(M),b.attr(A);this._firstShowIndicator=!1;var T=this._shapes.handleLabels;if(T)for(var I=0;I<T.length;I++)this.api.enterBlur(T[I])}},t.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(t){if(e._hovering=!0,!e._dragging){var n=e.visualMapModel.itemSize,r=e._applyTransform([t.offsetX,t.offsetY],e._shapes.mainGroup,!0,!0);r[1]=en6(en9(0,r[1]),n[1]),e._doHoverLinkToSeries(r[1],0<=r[0]&&r[0]<=n[0])}}).on("mouseout",function(){e._hovering=!1,e._dragging||e._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(e,t){var n=this.visualMapModel,r=n.itemSize;if(!!n.option.hoverLink){var i=[0,r[1]],a=n.getExtent();e=en6(en9(i[0],e),i[1]);var s=function(e,t,n){var r=6,i=e.get("hoverLinkDataSize");return i&&(r=en4(i,t,n,!0)/2),r}(n,a,i),u=[e-s,e+s],c=en4(e,i,a,!0),h=[en4(u[0],i,a,!0),en4(u[1],i,a,!0)];u[0]<i[0]&&(h[0]=-1/0),u[1]>i[1]&&(h[1]=1/0),t&&(h[0]===-1/0?this._showIndicator(c,h[1],"< ",s):h[1]===1/0?this._showIndicator(c,h[0],"> ",s):this._showIndicator(c,c,"≈ ",s));var p=this._hoverLinkDataIndices,f=[];(t||ere(n))&&(f=this._hoverLinkDataIndices=n.findTargetDataIndices(h));var v=function(e,t){var n={},r={};return i(e||[],n),i(t||[],r,n),[a(n),a(r)];function i(e,t,n){for(var r=0,i=e.length;r<i;r++){var a=Ir(e[r].seriesId,null);if(null==a)return;for(var s=E6(e[r].dataIndex),u=n&&n[a],c=0,h=s.length;c<h;c++){var p=s[c];u&&u[p]?u[p]=null:(t[a]||(t[a]={}))[p]=1}}}function a(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)&&null!=e[r]){if(t)n.push(+r);else{var i=a(e[r],!0);i.length&&n.push({seriesId:r,dataIndex:i})}}return n}}(p,f);this._dispatchHighDown("downplay",en5(v[0],n)),this._dispatchHighDown("highlight",en5(v[1],n))}},t.prototype._hoverLinkFromSeriesMouseOver=function(e){if(N5(e.target,function(e){var n=D7(e);if(null!=n.dataIndex)return t=n,!0},!0),!t)return;var t,n=this.ecModel.getSeriesByIndex(t.seriesIndex),r=this.visualMapModel;if(!!r.isTargetSeries(n)){var i=n.getData(t.dataType),a=i.getStore().get(r.getDataDimensionIndex(i),t.dataIndex);!isNaN(a)&&this._showIndicator(a,a)}},t.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var t=this._shapes.handleLabels;if(t)for(var n=0;n<t.length;n++)this.api.leaveBlur(t[n])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",en5(e,this.visualMapModel)),e.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(e,t,n,r){var i=B4(t,r?null:this.group);return MI(e)?B6(e,i,n):B9(e,i,n)},t.prototype._dispatchHighDown=function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(en1);function en7(e,t,n,r){return new Bm({shape:{points:e},draggable:!!n,cursor:t,drift:n,onmousemove:function(e){AW(e.event)},ondragend:r})}function ere(e){var t=e.get("hoverLinkOnHandle");return!!(null==t?e.get("realtime"):t)}function ert(e){return"vertical"===e?"ns-resize":"ew-resize"}var ern={type:"selectDataRange",event:"dataRangeSelected",update:"update"},err=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(t){t.setSelected(e.selected)})},eri=[{createOnAllSeries:!0,reset:function(e,t){var n=[];return t.eachComponent("visualMap",function(t){var r,i,a,s,u,c=e.pipelineContext;if(!!t.isTargetSeries(e)&&(!c||!c.large))n.push((r=t.stateList,i=t.targetVisuals,a=MT(t.getValueState,t),s=t.getDataDimensionIndex(e.getData()),u={},Mb(r,function(e){var t=Yl.prepareVisualTypes(i[e]);u[e]=t}),{progress:function(e,t){function n(e){return N$(t,h,e)}function r(e,n){N1(t,h,e,n)}null!=s&&(c=t.getDimensionIndex(s));for(var c,h,p=t.getStore();null!=(h=e.next());){var f=t.getRawDataItem(h);if(!f||!1!==f.visualMap)for(var v=null!=s?p.get(c,h):h,y=a(v),_=i[y],x=u[y],b=0,S=x.length;b<S;b++){var w=x[b];_[w]&&_[w].applyVisual(v,n,r)}}}}))}),n}},{createOnAllSeries:!0,reset:function(e,t){var n=e.getData(),r=[];t.eachComponent("visualMap",function(t){if(t.isTargetSeries(e)){var i=t.getVisualMeta(MT(era,null,e,t))||{stops:[],outerColors:[]},a=t.getDataDimensionIndex(n);a>=0&&(i.dimension=a,r.push(i))}}),e.getData().setVisual("visualMeta",r)}}];function era(e,t,n,r){for(var i=t.targetVisuals[r],a=Yl.prepareVisualTypes(i),s={color:N0(e.getData(),"color")},u=0,c=a.length;u<c;u++){var h=a[u],p=i["opacity"===h?"__alphaForOpacity":h];p&&p.applyVisual(n,f,v)}return s.color;function f(e){return s[e]}function v(e,t){s[e]=t}}var ero=Mb;function ers(e){var t=e&&e.visualMap;!MI(t)&&(t=t?[t]:[]),ero(t,function(e){if(!!e){erl(e,"splitList")&&!erl(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var t=e.pieces;t&&MI(t)&&ero(t,function(e){MO(e)&&(erl(e,"start")&&!erl(e,"min")&&(e.min=e.start),erl(e,"end")&&!erl(e,"max")&&(e.max=e.end))})}})}function erl(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var eru=!1;function erc(e){if(!eru)eru=!0,e.registerSubTypeDefaulter("visualMap",function(e){return e.categories||(e.pieces?e.pieces.length>0:e.splitNumber>0)&&!e.calculable?"piecewise":"continuous"}),e.registerAction(ern,err),Mb(eri,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(ers)}function erh(e){e.registerComponentModel(en$),e.registerComponentView(en8),erc(e)}var erd=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._pieceList=[],n}return wJ(t,e),t.prototype.optionUpdated=function(t,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var r=this._mode=this._determineMode();this._pieceList=[],erp[this._mode].call(this,this._pieceList),this._resetSelected(t,n);var i=this.option.categories;this.resetVisual(function(e,t){"categories"===r?(e.mappingMethod="category",e.categories=Mh(i)):(e.dataExtent=this.getExtent(),e.mappingMethod="piecewise",e.pieceList=MS(this._pieceList,function(e){return e=Mh(e),"inRange"!==t&&(e.visual=null),e}))})},t.prototype.completeVisualOption=function(){var t=this.option,n={},r=Yl.listVisualTypes(),i=this.isCategory();function a(e,t,n){return e&&e[t]&&e[t].hasOwnProperty(n)}Mb(t.pieces,function(e){Mb(r,function(t){e.hasOwnProperty(t)&&(n[t]=1)})}),Mb(n,function(e,n){var r=!1;Mb(this.stateList,function(e){r=r||a(t,e,n)||a(t.target,e,n)},this),r||Mb(this.stateList,function(e){(t[e]||(t[e]={}))[n]=enY.get(n,"inRange"===e?"active":"inactive",i)})},this),e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(e,t){var n=this.option,r=this._pieceList,i=(t?n:e).selected||{};if(n.selected=i,Mb(r,function(e,t){var n=this.getSelectedMapKey(e);!i.hasOwnProperty(n)&&(i[n]=!0)},this),"single"===n.selectedMode){var a=!1;Mb(r,function(e,t){var n=this.getSelectedMapKey(e);i[n]&&(a?i[n]=!1:a=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(e){return"categories"===this._mode?e.value+"":e.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(e){this.option.selected=Mh(e)},t.prototype.getValueState=function(e){var t=Yl.findPieceIndex(e,this._pieceList);return null!=t&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var t=[],n=this._pieceList;return this.eachTargetSeries(function(r){var i=[],a=r.getData();a.each(this.getDataDimensionIndex(a),function(t,r){Yl.findPieceIndex(t,n)===e&&i.push(r)},this),t.push({seriesId:r.id,dataIndex:i})},this),t},t.prototype.getRepresentValue=function(e){var t;if(this.isCategory())t=e.value;else if(null!=e.value)t=e.value;else{var n=e.interval||[];t=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return t},t.prototype.getVisualMeta=function(e){if(!this.isCategory()){var t=[],n=["",""],r=this;var i=this._pieceList.slice();if(i.length){var a=i[0].interval[0];a!==-1/0&&i.unshift({interval:[-1/0,a]}),(a=i[i.length-1].interval[1])!==1/0&&i.push({interval:[a,1/0]})}else i.push({interval:[-1/0,1/0]});var s=-1/0;return Mb(i,function(e){var t=e.interval;t&&(t[0]>s&&u([s,t[0]],"outOfRange"),u(t.slice()),s=t[1])},this),{stops:t,outerColors:n}}function u(i,a){var s=r.getRepresentValue({interval:i});!a&&(a=r.getValueState(s));var u=e(s,a);i[0]===-1/0?n[0]=u:i[1]===1/0?n[1]=u:t.push({value:i[0],color:u},{value:i[1],color:u})}},t.type="visualMap.piecewise",t.defaultOption=RM(enK.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(enK),erp={splitNumber:function(e){var t=this.option,n=Math.min(t.precision,20),r=this.getExtent(),i=t.splitNumber;i=Math.max(parseInt(i,10),1),t.splitNumber=i;for(var a=(r[1]-r[0])/i;+a.toFixed(n)!==a&&n<5;)n++;t.precision=n,a=+a.toFixed(n),t.minOpen&&e.push({interval:[-1/0,r[0]],close:[0,0]});for(var s=0,u=r[0];s<i;u+=a,s++){var c=s===i-1?r[1]:u+a;e.push({interval:[u,c],close:[1,1]})}t.maxOpen&&e.push({interval:[r[1],1/0],close:[0,0]}),EQ(e),Mb(e,function(e,t){e.index=t,e.text=this.formatValueText(e.interval)},this)},categories:function(e){var t=this.option;Mb(t.categories,function(t){e.push({text:this.formatValueText(t,!0),value:t})},this),erf(t,e)},pieces:function(e){var t=this.option;Mb(t.pieces,function(t,n){!MO(t)&&(t={value:t});var r={text:"",index:n};if(null!=t.label&&(r.text=t.label),t.hasOwnProperty("value")){var i=r.value=t.value;r.interval=[i,i],r.close=[1,1]}else{for(var a=r.interval=[],s=r.close=[0,0],u=[1,0,1],c=[-1/0,1/0],h=[],p=0;p<2;p++){for(var f=[["gte","gt","min"],["lte","lt","max"]][p],v=0;v<3&&null==a[p];v++)a[p]=t[f[v]],s[p]=u[v],h[p]=2===v;null==a[p]&&(a[p]=c[p])}h[0]&&a[1]===1/0&&(s[0]=0),h[1]&&a[0]===-1/0&&(s[1]=0);a[0]===a[1]&&s[0]&&s[1]&&(r.value=a[0])}r.visual=Yl.retrieveVisuals(t),e.push(r)},this),erf(t,e),EQ(e),Mb(e,function(e){var t=e.close,n=[["<","≤"][t[1]],[">","≥"][t[0]]];e.text=e.text||this.formatValueText(null!=e.value?e.value:e.interval,!1,n)},this)}};function erf(e,t){var n=e.inverse;("vertical"===e.orient?!n:n)&&t.reverse()}var erg=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return wJ(t,e),t.prototype.doRender=function(){var e=this.group;e.removeAll();var t=this.visualMapModel,n=t.get("textGap"),r=t.textStyleModel,i=r.getFont(),a=r.getTextColor(),s=this._getItemAlign(),u=t.itemSize,c=this._getViewData(),h=c.endsText,p=MG(t.get("showLabel",!0),!h);h&&this._renderEndsText(e,h[0],u,p,s),Mb(c.viewPieceList,function(r){var c=r.piece,h=new ES;h.onclick=MT(this._onItemClick,this,c),this._enableHoverLink(h,r.indexInModelPieceList);var f=t.getRepresentValue(c);if(this._createItemSymbol(h,f,[0,0,u[0],u[1]]),p){var v=this.visualMapModel.getValueState(f);h.add(new D8({style:{x:"right"===s?-n:u[0]+n,y:u[1]/2,text:c.text,verticalAlign:"middle",align:s,font:i,fill:a,opacity:"outOfRange"===v?.5:1}}))}e.add(h)},this),h&&this._renderEndsText(e,h[1],u,p,s),Ll(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},t.prototype._enableHoverLink=function(e,t){var n=this;e.on("mouseover",function(){return r("highlight")}).on("mouseout",function(){return r("downplay")});var r=function(e){var r=n.visualMapModel;r.option.hoverLink&&n.api.dispatchAction({type:e,batch:en5(r.findTargetDataIndices(t),r)})}},t.prototype._getItemAlign=function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return en3(e,this.api,e.itemSize);var n=t.align;return(!n||"auto"===n)&&(n="left"),n},t.prototype._renderEndsText=function(e,t,n,r,i){if(!!t){var a=new ES,s=this.visualMapModel.textStyleModel;a.add(new D8({style:Re(s,{x:r?"right"===i?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:r?i:"center",text:t})})),e.add(a)}},t.prototype._getViewData=function(){var e=this.visualMapModel,t=MS(e.getPieceList(),function(e,t){return{piece:e,indexInModelPieceList:t}}),n=e.get("text"),r=e.get("orient"),i=e.get("inverse");return("horizontal"===r?i:!i)?t.reverse():n&&(n=n.slice().reverse()),{viewPieceList:t,endsText:n}},t.prototype._createItemSymbol=function(e,t,n){e.add(Fo(this.getControllerVisual(t,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(t,"color")))},t.prototype._onItemClick=function(e){var t=this.visualMapModel,n=t.option,r=n.selectedMode;if(!!r){var i=Mh(n.selected),a=t.getSelectedMapKey(e);"single"===r||!0===r?(i[a]=!0,Mb(i,function(e,t){i[t]=t===a})):i[a]=!i[a],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:i})}},t.type="visualMap.piecewise",t}(en1);function erm(e){e.registerComponentModel(erd),e.registerComponentView(erg),erc(e)}var erv={label:{enabled:!0},decal:{show:!1}},ery=Is(),er_={};function erx(e,t){var n=e.getModel("aria");if(!!n.get("enabled")){var r=Mh(erv);Md(r.label,e.getLocaleModel().get("aria"),!1),Md(n.option,r,!1),function(){if(n.getModel("decal").get("show")){var t=M1();e.eachSeries(function(e){if(!e.isColorBySeries()){var n=t.get(e.type);!n&&(n={},t.set(e.type,n)),ery(e).scope=n}}),e.eachRawSeries(function(t){if(!e.isSeriesFiltered(t)){if(MD(t.enableAriaDecal)){t.enableAriaDecal();return}var n=t.getData();if(t.isColorBySeries()){var r=LU(t.ecModel,t.name,er_,e.getSeriesCount()),i=n.getVisual("decal");n.setVisual("decal",h(i,r))}else{var a=t.getRawData(),s={},u=ery(t).scope;n.each(function(e){s[n.getRawIndex(e)]=e});var c=a.count();a.each(function(e){var r=s[e],i=a.getName(e)||e+"",p=LU(t.ecModel,i,u,c),f=n.getItemVisual(r,"decal");n.setItemVisual(r,"decal",h(f,p))})}}function h(e,t){var n=e?Mf(Mf({},t),e):t;return n.dirty=!0,n}})}}(),function(){var r,a,s=t.getZr().dom;if(!s)return;var u=e.getLocaleModel().get("aria"),c=n.getModel("label");if(c.option=Mg(c.option,u),!c.get("enabled"))return;if(c.get("description")){s.setAttribute("aria-label",c.get("description"));return}var h=e.getSeriesCount(),p=c.get(["data","maxCount"])||10,f=Math.min(h,c.get(["series","maxCount"])||10);if(!(h<1)){var v=function(){var t=e.get("title");return t&&t.length&&(t=t[0]),t&&t.text}();if(v){;a=i(c.get(["general","withTitle"]),{title:v})}else a=c.get(["general","withoutTitle"]);var y=[];a+=i(h>1?c.get(["series","multiple","prefix"]):c.get(["series","single","prefix"]),{seriesCount:h}),e.eachSeries(function(t,n){if(n<f){var r=void 0,a=t.get("name")?"withName":"withoutName";r=i(r=h>1?c.get(["series","multiple",a]):c.get(["series","single",a]),{seriesId:t.seriesIndex,seriesName:t.get("name"),seriesType:function(t){var n=e.getLocaleModel().get(["series","typeNames"]);return n[t]||n.chart}(t.subType)});var s=t.getData();s.count()>p?r+=i(c.get(["data","partialData"]),{displayCnt:p}):r+=c.get(["data","allData"]);for(var u=c.get(["data","separator","middle"]),v=c.get(["data","separator","end"]),_=[],x=0;x<s.count();x++)if(x<p){var b=s.getName(x),S=s.getValues(x),w=c.get(["data",b?"withName":"withoutName"]);_.push(i(w,{name:b,value:S.join(u)}))}r+=_.join(u)+v,y.push(r)}});var _=c.getModel(["series","multiple","separator"]),x=_.get("middle"),b=_.get("end");a+=y.join(x)+b,s.setAttribute("aria-label",a)}}()}function i(e,t){if(!MP(e))return e;var n=e;return Mb(t,function(e,t){n=n.replace(RegExp("\\{\\s*"+t+"\\s*\\}","g"),e)}),n}}function erb(e){if(!!e&&!!e.aria){var t=e.aria;null!=t.show&&(t.enabled=t.show),t.label=t.label||{},Mb(["description","general","series","data"],function(e){null!=t[e]&&(t.label[e]=t[e])})}}var erS={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},erw=function(){function e(e){null==(this._condVal=MP(e)?new RegExp(e):MU(e)?e:null)&&OF("")}return e.prototype.evaluate=function(e){var t=typeof e;return MP(t)?this._condVal.test(e):!!ML(t)&&this._condVal.test(e+"")},e}(),erM=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),erA=function(){function e(){}return e.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(!e[t].evaluate())return!1;return!0},e}(),erC=function(){function e(){}return e.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(e[t].evaluate())return!0;return!1},e}(),erT=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),erE=function(){function e(){}return e.prototype.evaluate=function(){for(var e=!!this.valueParser,t=(0,this.getValue)(this.valueGetterParam),n=e?this.valueParser(t):null,r=0;r<this.subCondList.length;r++)if(!this.subCondList[r].evaluate(e?n:t))return!1;return!0},e}();function erI(e,t){if(!0===e||!1===e){var n=new erM;return n.value=e,n}if(!function(e){return MO(e)&&!Mx(e)}(e)&&OF(""),e.and)return erD("and",e,t);if(e.or)return erD("or",e,t);if(e.not)return function(e,t){var n=e.not;!erP(n)&&OF("");var r=new erT;return r.child=erI(n,t),!r.child&&OF(""),r}(e,t);return function(e,t){var n=t.prepareGetValue(e),r=[],i=MC(e),a=e.parser;for(var s=a?(c=a,OU.get(c)):null,u=0;u<i.length;u++){var c,h,p,f=i[u];if(!("parser"===f||t.valueGetterAttrMap.get(f))){var v=M4(erS,f)?erS[f]:f,y=e[f],_=s?s(y):y;var x=(h=v,p=_,("eq"===h||"ne"===h?new Oj("eq"===h,p):M4(OG,h)?new OV(h,p):null)||"reg"===v&&new erw(_));!x&&OF(""),r.push(x)}}!r.length&&OF("");var b=new erE;return b.valueGetterParam=n,b.valueParser=s,b.getValue=t.getValue,b.subCondList=r,b}(e,t)}function erD(e,t,n){var r=t[e];!MI(r)&&OF(""),!r.length&&OF("");var i="and"===e?new erA:new erC;return i.children=MS(r,function(e){return erI(e,n)}),!i.children.length&&OF(""),i}function erP(e){return MO(e)&&!Mx(e)}var erR=function(){function e(e,t){this._cond=erI(e,t)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}(),erL={type:"echarts:filter",transform:function(e){var t,n,r=e.upstream;for(var i=(t=e.config,new erR(t,{valueGetterAttrMap:M1({dimension:!0}),prepareGetValue:function(e){var t=e.dimension;!M4(e,"dimension")&&OF("");var n=r.getDimensionInfo(t);return!n&&OF(""),{dimIdx:n.index}},getValue:function(e){return r.retrieveValueFromItem(n,e.dimIdx)}})),a=[],s=0,u=r.count();s<u;s++)n=r.getRawDataItem(s),i.evaluate()&&a.push(n);return{data:a}}},erO={type:"echarts:sort",transform:function(e){var t=e.upstream,n=e.config,r=E6(n);!r.length&&OF("");var i=[];Mb(r,function(e){var n,r=e.dimension,a=e.order,s=e.parser,u=e.incomparable;null==r&&OF(""),"asc"!==a&&"desc"!==a&&OF(""),u&&"min"!==u&&"max"!==u&&OF(""),"asc"!==a&&"desc"!==a&&OF("");var c=t.getDimensionInfo(r);!c&&OF("");var h=s?(n=s,OU.get(n)):null;s&&!h&&OF(""),i.push({dimIdx:c.index,parser:h,comparator:new OW(a,u)})});var a=t.sourceFormat;a!==Lw&&a!==LM&&OF("");for(var s=[],u=0,c=t.count();u<c;u++)s.push(t.getRawDataItem(u));return s.sort(function(e,n){for(var r=0;r<i.length;r++){var a=i[r],s=t.retrieveValueFromItem(e,a.dimIdx),u=t.retrieveValueFromItem(n,a.dimIdx);a.parser&&(s=a.parser(s),u=a.parser(u));var c=a.comparator.evaluate(s,u);if(0!==c)return c}return 0}),{data:s}}},erk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataset",t}return wJ(t,e),t.prototype.init=function(t,n,r){e.prototype.init.call(this,t,n,r),this._sourceManager=new O7(this),ke(this)},t.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),ke(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:LE},t}(Lv),erB=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataset",t}return wJ(t,e),t.type="dataset",t}(kR),erN=Dv.CMD;function erF(e,t){return 1e-5>Math.abs(e-t)}function erz(e){var t,n,r,i,a,s=e.data,u=e.len(),c=[],h=0,p=0,f=0,v=0;function y(e,n){t&&t.length>2&&c.push(t),t=[e,n]}function _(e,n,r,i){!(erF(e,r)&&erF(n,i))&&t.push(e,n,r,i,r,i)}for(var x=0;x<u;){var b=s[x++],S=1===x;switch(S&&(h=s[x],p=s[x+1],f=h,v=p,(b===erN.L||b===erN.C||b===erN.Q)&&(t=[f,v])),b){case erN.M:h=f=s[x++],p=v=s[x++],y(f,v);break;case erN.L:n=s[x++],_(h,p,n,r=s[x++]),h=n,p=r;break;case erN.C:t.push(s[x++],s[x++],s[x++],s[x++],h=s[x++],p=s[x++]);break;case erN.Q:n=s[x++],r=s[x++],i=s[x++],a=s[x++],t.push(h+2/3*(n-h),p+2/3*(r-p),i+2/3*(n-i),a+2/3*(r-a),i,a),h=i,p=a;break;case erN.A:var w=s[x++],M=s[x++],A=s[x++],C=s[x++],T=s[x++],I=s[x++]+T;x+=1;var D=!s[x++];n=Math.cos(T)*A+w,r=Math.sin(T)*C+M,S?y(f=n,v=r):_(h,p,n,r),h=Math.cos(I)*A+w,p=Math.sin(I)*C+M;for(var P=(D?-1:1)*Math.PI/2,R=T;D?R>I:R<I;R+=P){var L=D?Math.max(R+P,I):Math.min(R+P,I);!function(e,n,r,i,a,s){var u=4*Math.tan(Math.abs(n-e)/4)/3,c=n<e?-1:1,h=Math.cos(e),p=Math.sin(e),f=Math.cos(n),v=Math.sin(n),y=f*a+r,_=v*s+i,x=a*u*c,b=s*u*c;t.push(h*a+r-x*p,p*s+i+b*h,y+x*v,_-b*f,y,_)}(R,L,w,M,A,C)}break;case erN.R:f=h=s[x++],v=p=s[x++],n=f+s[x++],r=v+s[x++],y(n,v),_(n,v,n,r),_(n,r,f,r),_(f,r,f,v),_(f,v,n,v);break;case erN.Z:t&&_(h,p,f,v),h=f,p=v}}return t&&t.length>2&&c.push(t),c}function erU(e,t,n){var r=Math.ceil(Math.sqrt(Math.abs(e[t]/e[1-t])*n)),i=Math.floor(n/r);0===i&&(i=1,r=n);for(var a=[],s=0;s<r;s++)a.push(i);var u=n-r*i;if(u>0)for(var s=0;s<u;s++)a[s%r]+=1;return a}function erH(e,t,n){for(var r=e.r0,i=e.r,a=e.startAngle,s=Math.abs(e.endAngle-a),u=s*i,c=i-r,h=u>Math.abs(c),p=erU([u,c],h?0:1,t),f=(h?s:c)/p.length,v=0;v<p.length;v++){for(var y=(h?c:s)/p[v],_=0;_<p[v];_++){var x={};h?(x.startAngle=a+f*v,x.endAngle=a+f*(v+1),x.r0=r+y*_,x.r=r+y*(_+1)):(x.startAngle=a+y*_,x.endAngle=a+y*(_+1),x.r0=r+f*v,x.r=r+f*(v+1)),x.clockwise=e.clockwise,x.cx=e.cx,x.cy=e.cy,n.push(x)}}}function erG(e,t,n,r){return e*r-n*t}function erV(e,t){var n=e[e.length-1];if(!n||n[0]!==t[0]||n[1]!==t[1])e.push(t)}function erW(e){var t=e.points,n=[],r=[];I4(t,n,r);var i=new Cr(n[0],n[1],r[0]-n[0],r[1]-n[1]),a=i.width,s=i.height,u=i.x,c=i.y,h=new A5,p=new A5;return a>s?(h.x=p.x=u+a/2,h.y=c,p.y=c+s):(h.y=p.y=c+s/2,h.x=u,p.x=u+a),function(e,t,n){for(var r=e.length,i=[],a=0;a<r;a++){var s=e[a],u=e[(a+1)%r],c=function(e,t,n,r,i,a,s,u){var c=n-e,h=r-t,p=s-i,f=u-a,v=p*h-c*f;if(1e-6>Math.abs(v))return null;var y=((e-i)*f-p*(t-a))/v;return y<0||y>1?null:new A5(y*c+e,y*h+t)}(s[0],s[1],u[0],u[1],t.x,t.y,n.x,n.y);c&&i.push({projPt:function(e,t,n){var r=new A5;A5.sub(r,n,t),r.normalize();var i=new A5;return A5.sub(i,e,t),i.dot(r)}(c,t,n),pt:c,idx:a})}if(i.length<2)return[{points:e},{points:e}];i.sort(function(e,t){return e.projPt-t.projPt});var h=i[0],p=i[i.length-1];if(p.idx<h.idx){var f=h;h=p,p=f}for(var v=[h.pt.x,h.pt.y],y=[p.pt.x,p.pt.y],_=[v],x=[y],a=h.idx+1;a<=p.idx;a++)erV(_,e[a].slice());erV(_,y),erV(_,v);for(var a=p.idx+1;a<=h.idx+r;a++)erV(x,e[a%r].slice());return erV(x,v),erV(x,y),[{points:_},{points:x}]}(t,h,p)}function erj(e,t,n,r){if(1===n)r.push(t);else{var i=Math.floor(n/2),a=e(t);erj(e,a[0],i,r),erj(e,a[1],n-i,r)}return r}function erX(e,t){for(var n=e.length,r=e[n-2],i=e[n-1],a=[],s=0;s<t.length;)a[s++]=r,a[s++]=i;return a}function erY(e){for(var t=0,n=0,r=0,i=e.length,a=0,s=i-2;a<i;s=a,a+=2){var u=e[s],c=e[s+1],h=e[a],p=e[a+1],f=u*p-h*c;t+=f,n+=(u+h)*f,r+=(c+p)*f}return 0===t?[e[0]||0,e[1]||0]:[n/t/3,r/t/3,t]}function erJ(e){return e.__isCombineMorphing}var erZ="__mOriginal_";function erq(e,t,n){var r=erZ+t,i=e[r]||e[t];!e[r]&&(e[r]=e[t]);var a=n.replace,s=n.after,u=n.before;e[t]=function(){var e,t=arguments;return u&&u.apply(this,t),e=a?a.apply(this,t):i.apply(this,t),s&&s.apply(this,t),e}}function erK(e,t){var n=erZ+t;e[n]&&(e[t]=e[n],e[n]=null)}function erQ(e,t){for(var n=0;n<e.length;n++){for(var r=e[n],i=0;i<r.length;){var a=r[i],s=r[i+1];r[i++]=t[0]*a+t[2]*s+t[4],r[i++]=t[1]*a+t[3]*s+t[5]}}}function er$(e,t){var n=e.getUpdatedPathProxy(),r=t.getUpdatedPathProxy(),i=function(e,t){for(var n,r,i,a=[],s=[],u=0;u<Math.max(e.length,t.length);u++){var c=e[u],h=t[u],p=void 0,f=void 0;c?h?(p=(n=function(e,t){var n=e.length,r=t.length;if(n===r)return[e,t];for(var i=[],a=[],s=n<r?e:t,u=Math.min(n,r),c=Math.abs(r-n)/6,h=Math.ceil(c/((u-2)/6))+1,p=[s[0],s[1]],f=c,v=2;v<u;){var y=s[v-2],_=s[v-1],x=s[v++],b=s[v++],S=s[v++],w=s[v++],M=s[v++],A=s[v++];if(f<=0){p.push(x,b,S,w,M,A);continue}for(var C=Math.min(f,h-1)+1,T=1;T<=C;T++){var I=T/C;CB(y,x,S,M,I,i),CB(_,b,w,A,I,a),y=i[3],_=a[3],p.push(i[1],a[1],i[2],a[2],y,_),x=i[5],b=a[5],S=i[6],w=a[6]}f-=C-1}return s===e?[p,t]:[e,p]}(c,h))[0],f=n[1],r=p,i=f):(f=erX(i||c,c),p=c):(p=erX(r||h,h),f=h),a.push(p),s.push(f)}return[a,s]}(erz(n),erz(r)),a=i[0],s=i[1],u=e.getComputedTransform(),c=t.getComputedTransform();u&&erQ(a,u),c&&erQ(s,c),erq(t,"updateTransform",{replace:function(){this.transform=null}}),t.transform=null;var h=function(e,t,n,r){for(var i,a=[],s=0;s<e.length;s++){var u,c=e[s],h=t[s],p=erY(c),f=erY(h);null==i&&(i=p[2]<0!=f[2]<0);var v=[],y=[],_=0,x=1/0,b=[],S=c.length;i&&(c=function(e){for(var t=[],n=e.length,r=0;r<n;r+=2)t[r]=e[n-r-2],t[r+1]=e[n-r-1];return t}(c));for(var w=6*function(e,t,n,r){for(var i=(e.length-2)/6,a=1/0,s=0,u=e.length,c=u-2,h=0;h<i;h++){for(var p=6*h,f=0,v=0;v<u;v+=2){var y=0===v?p:(p+v-2)%c+2,_=e[y]-n[0],x=e[y+1]-n[1],b=t[v]-r[0],S=t[v+1]-r[1],w=b-_,M=S-x;f+=w*w+M*M}f<a&&(a=f,s=h)}return s}(c,h,p,f),M=S-2,A=0;A<M;A+=2){var C=(w+A)%M+2;v[A+2]=c[C]-p[0],v[A+3]=c[C+1]-p[1]}v[0]=c[w]-p[0],v[1]=c[w+1]-p[1],!0;for(var T=r/n,I=-r/2;I<=r/2;I+=T){for(var D=Math.sin(I),P=Math.cos(I),R=0,A=0;A<c.length;A+=2){var L=v[A],O=v[A+1],k=h[A]-f[0],B=h[A+1]-f[1],N=k*P-B*D,F=k*D+B*P;b[A]=N,b[A+1]=F;var z=N-L,U=F-O;R+=z*z+U*U}if(R<x){x=R,_=I;for(var H=0;H<b.length;H++)y[H]=b[H]}}a.push({from:v,to:y,fromCp:p,toCp:f,rotation:-_})}return a}(a,s,10,Math.PI),p=[];erq(t,"buildPath",{replace:function(e){for(var n=t.__morphT,r=1-n,i=[],a=0;a<h.length;a++){var s=h[a],u=s.from,c=s.to,f=s.rotation*n,v=s.fromCp,y=s.toCp,_=Math.sin(f),x=Math.cos(f);A_(i,v,y,n);for(var b=0;b<u.length;b+=2){var S=u[b],w=u[b+1],M=c[b],A=c[b+1],C=S*r+M*n,T=w*r+A*n;p[b]=C*x-T*_+i[0],p[b+1]=C*_+T*x+i[1]}var I=p[0],D=p[1];e.moveTo(I,D);for(var b=2;b<u.length;){var M=p[b++],A=p[b++],P=p[b++],R=p[b++],L=p[b++],O=p[b++];I===M&&D===A&&P===L&&R===O?e.lineTo(L,O):e.bezierCurveTo(M,A,P,R,L,O),I=L,D=O}}}})}function er0(e,t,n){if(!e||!t)return t;var r=n.done,i=n.during;return er$(e,t),t.__morphT=0,t.animateTo({__morphT:1},Mg({during:function(e){t.dirtyShape(),i&&i(e)},done:function(){erK(t,"buildPath"),erK(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape(),r&&r()}},n)),t}function er1(e){var t=1/0,n=1/0,r=-1/0,i=-1/0,a=MS(e,function(e){var a=e.getBoundingRect(),s=e.getComputedTransform(),u=a.x+a.width/2+(s?s[4]:0),c=a.y+a.height/2+(s?s[5]:0);return t=Math.min(u,t),n=Math.min(c,n),r=Math.max(u,r),i=Math.max(c,i),[u,c]});return MS(a,function(a,s){return{cp:a,z:function(e,t,n,r,i,a){e=i===n?0:Math.round(32767*(e-n)/(i-n)),t=a===r?0:Math.round(32767*(t-r)/(a-r));for(var s,u=0,c=32768;c>0;c/=2){var h=0,p=0;(e&c)>0&&(h=1),(t&c)>0&&(p=1),u+=c*c*(3*h^p),0===p&&(1===h&&(e=c-1-e,t=c-1-t),s=e,e=t,t=s)}return u}(a[0],a[1],t,n,r,i),path:e[s]}}).sort(function(e,t){return e.z-t.z}).map(function(e){return e.path})}function er2(e){return function(e,t){var n,r=[],i=e.shape;switch(e.type){case"rect":!function(e,t,n){for(var r=e.width,i=e.height,a=r>i,s=erU([r,i],a?0:1,t),u=a?"width":"height",c=a?"height":"width",h=a?"x":"y",p=a?"y":"x",f=e[u]/s.length,v=0;v<s.length;v++){for(var y=e[c]/s[v],_=0;_<s[v];_++){var x={};x[h]=v*f,x[p]=_*y,x[u]=f,x[c]=y,x.x+=e.x,x.y+=e.y,n.push(x)}}}(i,t,r),n=DX;break;case"sector":erH(i,t,r),n=Bu;break;case"circle":erH({r0:0,r:i.r,startAngle:0,endAngle:2*Math.PI,cx:i.cx,cy:i.cy},t,r),n=Bu;break;default:var a=e.getComputedTransform(),s=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,u=MS(function(e,t){var n=erz(e),r=[];t=t||1;for(var i=0;i<n.length;i++){var a=n[i],s=[],u=a[0],c=a[1];s.push(u,c);for(var h=2;h<a.length;){var p=a[h++],f=a[h++],v=a[h++],y=a[h++],_=a[h++],x=a[h++];!function e(t,n,r,i,a,s,u,c,h,p){if(erF(t,r)&&erF(n,i)&&erF(a,u)&&erF(s,c)){h.push(u,c);return}var f=2/p,v=f*f,y=u-t,_=c-n,x=Math.sqrt(y*y+_*_);y/=x,_/=x;var b=r-t,S=i-n,w=a-u,M=s-c,A=b*b+S*S,C=w*w+M*M;if(A<v&&C<v){h.push(u,c);return}var T=y*b+_*S,I=-y*w-_*M;if(A-T*T<v&&T>=0&&C-I*I<v&&I>=0){h.push(u,c);return}var D=[],P=[];CB(t,r,a,u,.5,D),CB(n,i,s,c,.5,P),e(D[0],P[0],D[1],P[1],D[2],P[2],D[3],P[3],h,p),e(D[4],P[4],D[5],P[5],D[6],P[6],D[7],P[7],h,p)}(u,c,p,f,v,y,_,x,s,t),u=_,c=x}r.push(s)}return r}(e.getUpdatedPathProxy(),s),function(e){return function(e){for(var t=[],n=0;n<e.length;)t.push([e[n++],e[n++]]);return t}(e)}),c=u.length;if(0===c)erj(erW,{points:u[0]},t,r);else if(c===t)for(var h=0;h<c;h++)r.push({points:u[h]});else{var p=0,f=MS(u,function(e){var t=[],n=[];I4(e,t,n);var r=(n[1]-t[1])*(n[0]-t[0]);return p+=r,{poly:e,area:r}});f.sort(function(e,t){return t.area-e.area});for(var v=t,h=0;h<c;h++){var y=f[h];if(v<=0)break;var _=h===c-1?v:Math.ceil(y.area/p*t);if(!(_<0))erj(erW,{points:y.poly},_,r),v-=_}}n=Bm}if(!n)return function(e,t){for(var n=[],r=0;r<t;r++)n.push(k$(e));return n}(e,t);for(var x=[],h=0;h<r.length;h++){var b,S,w=new n;w.setShape(r[h]),b=e,(S=w).setStyle(b.style),S.z=b.z,S.z2=b.z2,S.zlevel=b.zlevel,x.push(w)}return x}(e.path,e.count)}function er3(){return{fromIndividuals:[],toIndividuals:[],count:0}}function er5(e){return MI(e[0])}function er4(e,t){for(var n=[],r=e.length,i=0;i<r;i++)n.push({one:e[i],many:[]});for(var i=0;i<t.length;i++){var a=t[i].length,s=void 0;for(s=0;s<a;s++)n[s%r].many.push(t[i][s])}for(var u=0,i=r-1;i>=0;i--)if(!n[i].many.length){var c=n[u].many;if(c.length<=1){if(!u)return n;u=0}var a=c.length,h=Math.ceil(a/2);n[i].many=c.slice(h,a),n[u].many=c.slice(0,h),u++}return n}var er6={clone:function(e){for(var t=[],n=1-Math.pow(1-e.path.style.opacity,1/e.count),r=0;r<e.count;r++){var i=k$(e.path);i.setStyle("opacity",n),t.push(i)}return t},split:null};function er9(e,t,n,r,i,a){if(!e.length||!t.length)return;var s,u,c=Pq("update",r,i);if(!!(c&&c.duration>0)){var h=r.getModel("universalTransition").get("delay"),p=Object.assign({setToFinal:!0},c);if(MI(e[0]))s=e,u=t;if(MI(t[0]))s=t,u=e;for(var f=s?s===e:e.length>t.length,v=s?er4(u,s):er4(f?t:e,[f?e:t]),y=0,_=0;_<v.length;_++)y+=v[_].many.length;for(var x=0,_=0;_<v.length;_++)!function e(t,r,i,s,u){var c=t.many,f=t.one;if(1!==c.length||u){for(var v=Mg({dividePath:er6[n],individualDelay:h&&function(e,t,n,r){return h(e+i,s)}},p),y=r?function(e,t,n){var r=[];!function e(t){for(var n=0;n<t.length;n++){var i=t[n];erJ(i)?e(i.childrenRef()):i instanceof DR&&r.push(i)}}(e);var i=r.length;if(!i)return er3();var a=(n.dividePath||er2)({path:t,count:i});if(a.length!==i)return er3();r=er1(r),a=er1(a);for(var s=n.done,u=n.during,c=n.individualDelay,h=new Et,p=0;p<i;p++){var f=r[p],v=a[p];v.parent=t,v.copyTransform(h),!c&&er$(f,v)}function y(e){for(var t=0;t<a.length;t++)a[t].addSelfToZr(e)}function _(){t.__isCombineMorphing=!1,t.__morphT=-1,t.childrenRef=null,erK(t,"addSelfToZr"),erK(t,"removeSelfFromZr")}t.__isCombineMorphing=!0,t.childrenRef=function(){return a},erq(t,"addSelfToZr",{after:function(e){y(e)}}),erq(t,"removeSelfFromZr",{after:function(e){for(var t=0;t<a.length;t++)a[t].removeSelfFromZr(e)}});var x=a.length;if(c){for(var b=x,S=function(){0==--b&&(_(),s&&s())},p=0;p<x;p++){var w=c?Mg({delay:(n.delay||0)+c(p,x,r[p],a[p]),done:S},n):n;er0(r[p],a[p],w)}}else t.__morphT=0,t.animateTo({__morphT:1},Mg({during:function(e){for(var n=0;n<x;n++){var r=a[n];r.__morphT=t.__morphT,r.dirtyShape()}u&&u(e)},done:function(){_();for(var t=0;t<e.length;t++)erK(e[t],"updateTransform");s&&s()}},n));return t.__zr&&y(t.__zr),{fromIndividuals:r,toIndividuals:a,count:x}}(c,f,v):function(e,t,n){var r=t.length,i=[],a=n.dividePath||er2;if(erJ(e)){!function e(t){for(var n=0;n<t.length;n++){var r=t[n];erJ(r)?e(r.childrenRef()):r instanceof DR&&i.push(r)}}(e.childrenRef());var s=i.length;if(s<r){for(var u=0,c=s;c<r;c++)i.push(k$(i[u++%s]))}i.length=r}else{i=a({path:e,count:r});for(var h=e.getComputedTransform(),c=0;c<i.length;c++)i[c].setLocalTransform(h);if(i.length!==r)return er3()}i=er1(i),t=er1(t);for(var p=n.individualDelay,c=0;c<r;c++){var f=p?Mg({delay:(n.delay||0)+p(c,r,i[c],t[c])},n):n;er0(i[c],t[c],f)}return{fromIndividuals:i,toIndividuals:t,count:t.length}}(f,c,v),_=y.fromIndividuals,x=y.toIndividuals,b=_.length,S=0;S<b;S++){var w=h?Mg({delay:h(S,b)},p):p;a(_[S],x[S],r?c[S]:t.one,r?t.one:c[S],w)}}else{var M=r?c[0]:f,A=r?f:c[0];if(erJ(M))e({many:[M],one:A},!0,i,s,!0);else{var w=h?Mg({delay:h(i,s)},p):p;er0(M,A,w),a(M,A,M,A,w)}}}(v[_],f,x,y),x+=v[_].many.length}}function er8(e){if(!e)return[];if(MI(e)){for(var t=[],n=0;n<e.length;n++)t.push(er8(e[n]));return t}var r=[];return e.traverse(function(e){e instanceof DR&&!e.disableMorphing&&!e.invisible&&!e.ignore&&r.push(e)}),r}var er7=Is();function eie(e,t,n,r){var i=function(e,t){for(var n=e.dimensions,r=0;r<n.length;r++){var i=e.getDimensionInfo(n[r]);if(i&&0===i.otherDims[t])return n[r]}}(e,r?"itemChildGroupId":"itemGroupId");if(i)return function(e,t,n){var r=e.getDimensionInfo(n),i=r&&r.ordinalMeta;if(r){var a=e.get(r.name,t);return i&&i.categories[a]||a+""}}(e,t,i);var a=e.getRawDataItem(t),s=r?"childGroupId":"groupId";if(a&&a[s])return a[s]+"";if(!r)return n||e.getId(t)}function eit(e){var t=[];return Mb(e,function(e){var n=e.data,r=e.dataGroupId;if(!(n.count()>1e4))for(var i=n.getIndices(),a=0;a<i.length;a++)t.push({data:n,groupId:eie(n,a,r,!1),childGroupId:eie(n,a,r,!0),divide:e.divide,dataIndex:a})}),t}function ein(e,t,n){e.traverse(function(e){e instanceof DR&&P$(e,{style:{opacity:0}},t,{dataIndex:n,isFrom:!0})})}function eir(e){if(e.parent){var t=e.getComputedTransform();e.setLocalTransform(t),e.parent.remove(e)}}function eii(e){e.stopAnimation(),e.isGroup&&e.traverse(function(e){e.stopAnimation()})}function eia(e,t,n){var r=eit(e),i=eit(t);function a(e,t,n,r,i){(n||e)&&t.animateFrom({style:n&&n!==e?Mf(Mf({},n.style),e.style):e.style},i)}var s=!1,u=0,c=M1(),h=M1();r.forEach(function(e){e.groupId&&c.set(e.groupId,!0),e.childGroupId&&h.set(e.childGroupId,!0)});for(var p=0;p<i.length;p++){var f=i[p].groupId;if(h.get(f)){u=1;break}var v=i[p].childGroupId;if(v&&c.get(v)){u=2;break}}function y(e,t){return function(n){var r=n.data,i=n.dataIndex;return t?r.getId(i):e?1===u?n.childGroupId:n.groupId:2===u?n.childGroupId:n.groupId}}var _=function(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++){var i=e[r],a=t[r];if(i.data.getId(i.dataIndex)!==a.data.getId(a.dataIndex))return!1}return!0}(r,i),x={};if(!_)for(var p=0;p<i.length;p++){var b=i[p],S=b.data.getItemGraphicEl(b.dataIndex);S&&(x[S.id]=!0)}function w(e,t){var n,u,c,h=r[t],p=i[e],f=p.data.hostModel,v=h.data.getItemGraphicEl(h.dataIndex),y=p.data.getItemGraphicEl(p.dataIndex);if(v===y){;y&&(n=y,u=p.dataIndex,(c=Pq("update",f,u))&&n.traverse(function(e){if(e instanceof IJ){var t=PZ(e).oldStyle;t&&e.animateFrom({style:t},c)}}));return}if(!v||!x[v.id])y&&(eii(y),v?(eii(v),eir(v),s=!0,er9(er8(v),er8(y),p.divide,f,e,a)):ein(y,f,e))}new zO(r,i,y(!0,_),y(!1,_),null,"multiple").update(w).updateManyToOne(function(e,t){var n=i[e],u=n.data,c=u.hostModel,h=u.getItemGraphicEl(n.dataIndex),p=MM(MS(t,function(e){return r[e].data.getItemGraphicEl(r[e].dataIndex)}),function(e){return e&&e!==h&&!x[e.id]});h&&(eii(h),p.length?(Mb(p,function(e){eii(e),eir(e)}),s=!0,er9(er8(p),er8(h),n.divide,c,e,a)):ein(h,c,n.dataIndex))}).updateOneToMany(function(e,t){var n=r[t],u=n.data.getItemGraphicEl(n.dataIndex);if(!u||!x[u.id]){var c=MM(MS(e,function(e){return i[e].data.getItemGraphicEl(i[e].dataIndex)}),function(e){return e&&e!==u}),h=i[e[0]].data.hostModel;c.length&&(Mb(c,function(e){return eii(e)}),u?(eii(u),eir(u),s=!0,er9(er8(u),er8(c),n.divide,h,e[0],a)):Mb(c,function(t){return ein(t,h,e[0])}))}}).updateManyToMany(function(e,t){new zO(t,e,function(e){return r[e].data.getId(r[e].dataIndex)},function(e){return i[e].data.getId(i[e].dataIndex)}).update(function(n,r){w(e[n],t[r])}).execute()}).execute(),s&&Mb(t,function(e){var t=e.data.hostModel,r=t&&n.getViewOfSeriesModel(t),i=Pq("update",t,0);r&&t.isAnimationEnabled()&&i&&i.duration>0&&r.group.traverse(function(e){e instanceof DR&&!e.animators.length&&e.animateFrom({style:{opacity:0}},i)})})}function eio(e){var t=e.getModel("universalTransition").get("seriesKey");return t?t:e.id}function eis(e){return MI(e)?e.sort().join(","):e}function eil(e){if(e.hostModel)return e.hostModel.getModel("universalTransition").get("divideShape")}function eiu(e,t){for(var n=0;n<e.length;n++)if(null!=t.seriesIndex&&t.seriesIndex===e[n].seriesIndex||null!=t.seriesId&&t.seriesId===e[n].id)return n}zP([function(e){e.registerPainter("canvas",H2)}]),zP([function(e){e.registerPainter("svg",GK)}]),zP([function(e){e.registerChartView(Vx),e.registerSeriesModel(G$),e.registerLayout(Vb("line",!0)),e.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),n=e.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",n)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,VM("line"))},function(e){e.registerChartView(VO),e.registerSeriesModel(VC),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,ME(Ux,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Ub("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,VM("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var n=e.componentType||"series";t.eachComponent({mainType:n,query:e},function(t){e.sortInfo&&t.axis.setCategorySortInfo(e.sortInfo)})})},function(e){e.registerChartView(V8),e.registerSeriesModel(Wn),N2("pie",e.registerAction),e.registerLayout(ME(V0,"pie")),e.registerProcessor(V2("pie")),e.registerProcessor({seriesType:"pie",reset:function(e,t){var n=e.getData();n.filterSelf(function(e){var t=n.mapDimension("value"),r=n.get(t,e);return(!ML(r)||!!isNaN(r)||!(r<0))&&!0})}})},function(e){zP(W3),e.registerSeriesModel(Wr),e.registerChartView(Ws),e.registerLayout(Vb("scatter"))},function(e){zP(js),e.registerChartView(W8),e.registerSeriesModel(W7),e.registerLayout(W5),e.registerProcessor(V2("radar")),e.registerPreprocessor(W9)},function(e){zP(Xx),e.registerChartView(Xn),e.registerSeriesModel(Xr),e.registerLayout(Xa),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,Xi),N2("map",e.registerAction)},function(e){var t;e.registerChartView(XD),e.registerSeriesModel(XQ),e.registerLayout(X0),e.registerVisual(X1),(t=e).registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(t){var n=e.dataIndex,r=t.getData().tree.getNodeByDataIndex(n);r.isExpand=!r.isExpand})}),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t,n){t.eachComponent({mainType:"series",subType:"tree",query:e},function(t){var r=Xv(t.coordinateSystem,e,void 0,n);t.setCenter&&t.setCenter(r.center),t.setZoom&&t.setZoom(r.zoom)})})},function(e){e.registerSeriesModel(X5),e.registerChartView(Ya),e.registerVisual(Yb),e.registerLayout(YL),!function(e){for(var t=0;t<X2.length;t++)e.registerAction({type:X2[t],update:"updateView"},M6);e.registerAction({type:"treemapRootToNode",update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"treemap",query:e},function(t,n){var r=XJ(e,["treemapZoomToNode","treemapRootToNode"],t);if(r){var i=t.getViewRoot();i&&(e.direction=Xq(i,r.node)?"rollUp":"drillDown"),t.resetViewRoot(r.node)}})})}(e)},function(e){e.registerChartView(J_),e.registerSeriesModel(JC),e.registerProcessor(YB),e.registerVisual(YN),e.registerVisual(Yz),e.registerLayout(YZ),e.registerLayout(e.PRIORITY.VISUAL.POST_CHART_LAYOUT,Y3),e.registerLayout(Y4),e.registerCoordinateSystem("graphView",{dimensions:Xs.dimensions,create:Y6}),e.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},M6),e.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},M6),e.registerAction(JT,function(e,t,n){t.eachComponent({mainType:"series",query:e},function(t){var r=Xv(t.coordinateSystem,e,void 0,n);t.setCenter&&t.setCenter(r.center),t.setZoom&&t.setZoom(r.zoom)})})},function(e){e.registerChartView(JP),e.registerSeriesModel(JR)},function(e){e.registerChartView(Jk),e.registerSeriesModel(JB),e.registerLayout(JN),e.registerProcessor(V2("funnel"))},function(e){zP(Zq),e.registerChartView(JF),e.registerSeriesModel(JV),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,JX)},function(e){e.registerChartView(Z$),e.registerSeriesModel(Z1),e.registerLayout(Z2),e.registerVisual(qn),e.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(t){t.setNodePosition(e.dataIndex,[e.localX,e.localY])})})},function(e){e.registerSeriesModel(qi),e.registerChartView(qa),e.registerLayout(qh),e.registerTransform(qd)},function(e){e.registerChartView(qf),e.registerSeriesModel(qM),e.registerPreprocessor(qA),e.registerVisual(qP),e.registerLayout(qR)},function(e){e.registerChartView(qB),e.registerSeriesModel(qN),e.registerLayout(Vb("effectScatter"))},function(e){e.registerChartView(qj),e.registerSeriesModel(qZ),e.registerLayout(qW),e.registerVisual(qK)},function(e){e.registerChartView(q0),e.registerSeriesModel(q1)},function(e){e.registerChartView(q4),e.registerSeriesModel(Kp),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,ME(Ux,"pictorialBar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Ub("pictorialBar"))},function(e){e.registerChartView(Kf),e.registerSeriesModel(Kg),e.registerLayout(Km),e.registerProcessor(V2("themeRiver"))},function(e){var t;e.registerChartView(Kb),e.registerSeriesModel(KS),e.registerLayout(ME(KM,"sunburst")),e.registerProcessor(ME(V2,"sunburst")),e.registerVisual(KA),(t=e).registerAction({type:K_,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(t,n){var r=XJ(e,[K_],t);if(r){var i=t.getViewRoot();i&&(e.direction=Xq(i,r.node)?"rollUp":"drillDown"),t.resetViewRoot(r.node)}})}),t.registerAction({type:Kx,update:"none"},function(e,t,n){e=Mf({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(t){var n=XJ(e,[Kx],t);n&&(e.dataIndex=n.node.dataIndex)});n.dispatchAction(Mf(e,{type:"highlight"}))}),t.registerAction({type:"sunburstUnhighlight",update:"updateView"},function(e,t,n){e=Mf({},e);n.dispatchAction(Mf(e,{type:"downplay"}))})},function(e){e.registerChartView(Qa),e.registerSeriesModel(KI)}]),zP(function(e){zP(W3),zP(Q0)}),zP(function(e){zP(Q0),Wj.registerAxisPointerClass("PolarAxisPointer",Q1),e.registerCoordinateSystem("polar",$a),e.registerComponentModel(Q3),e.registerComponentView($b),Wv(e,"angle",Q4,$_),Wv(e,"radius",Q6,$x),e.registerComponentView($c),e.registerComponentView($f),e.registerLayout(ME($y,"bar"))}),zP(Xx),zP(function(e){zP(Q0),Wj.registerAxisPointerClass("SingleAxisPointer",$k),e.registerComponentView($z),e.registerComponentView($A),e.registerComponentModel($T),Wv(e,"single",$T,$T.defaultOption),e.registerCoordinateSystem("single",$R)}),zP(Zq),zP(function(e){e.registerComponentModel($U),e.registerComponentView($G),e.registerCoordinateSystem("calendar",$V)}),zP(function(e){e.registerComponentModel($Z),e.registerComponentView($Q),e.registerPreprocessor(function(e){var t=e.graphic;MI(t)?t[0]&&t[0].elements?e.graphic=[e.graphic[0]]:e.graphic=[{elements:t}]:t&&!t.elements&&(e.graphic=[{elements:[t]}])})}),zP(function(e){var t,n,r,i,a;e.registerComponentModel(eef),e.registerComponentView(eem),t=eev,eeh.saveAsImage=t,n=eex,eeh.magicType=n,r=eeA,eeh.dataView=r,i=eeW,eeh.dataZoom=i,a=eeI,eeh.restore=a,zP(eeu)}),zP(function(e){zP(Q0),e.registerComponentModel(eeY),e.registerComponentView(ete),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},M6),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},M6)}),zP(Q0),zP(function(e){var t;e.registerComponentView(etS),e.registerComponentModel(etw),e.registerPreprocessor(eta),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,etv),e.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(t){t.setAreas(e.areas)})}),e.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},M6),e.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},M6),t=etC,eeh.brush=t}),zP(function(e){e.registerComponentModel(etT),e.registerComponentView(etE)}),zP(function(e){var t;e.registerComponentModel(etD),e.registerComponentView(etk),e.registerSubTypeDefaulter("timeline",function(){return"slider"}),(t=e).registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t,n){var r=t.getComponent("timeline");return r&&null!=e.currentIndex&&(r.setCurrentIndex(e.currentIndex),!r.get("loop",!0)&&r.isIndexMax()&&r.getPlayState()&&(r.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),t.resetOption("timeline",{replaceMerge:r.get("replaceMerge",!0)}),Mg({currentIndex:r.option.currentIndex},e)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var n=t.getComponent("timeline");n&&null!=e.playState&&n.setPlayState(e.playState)}),e.registerPreprocessor(etF)}),zP(function(e){e.registerComponentModel(etj),e.registerComponentView(et3),e.registerPreprocessor(function(e){etH(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})})}),zP(function(e){e.registerComponentModel(et5),e.registerComponentView(ent),e.registerPreprocessor(function(e){etH(e.series,"markLine")&&(e.markLine=e.markLine||{})})}),zP(function(e){e.registerComponentModel(enn),e.registerComponentView(enc),e.registerPreprocessor(function(e){etH(e.series,"markArea")&&(e.markArea=e.markArea||{})})}),zP(function(e){zP(enb),zP(enT)}),zP(function(e){zP(enN),zP(enj)}),zP(enN),zP(enj),zP(function(e){zP(erh),zP(erm)}),zP(erh),zP(erm),zP(function(e){e.registerPreprocessor(erb),e.registerVisual(e.PRIORITY.VISUAL.ARIA,erx)}),zP(function(e){e.registerTransform(erL),e.registerTransform(erO)}),zP(function(e){e.registerComponentModel(erk),e.registerComponentView(erB)}),zP(function(e){e.registerUpdateLifecycle("series:beforeupdate",function(e,t,n){Mb(E6(n.seriesTransition),function(e){Mb(E6(e.to),function(e){for(var t=n.updatedSeries,r=0;r<t.length;r++)(null!=e.seriesIndex&&e.seriesIndex===t[r].seriesIndex||null!=e.seriesId&&e.seriesId===t[r].id)&&(t[r][kb]=!0)})})}),e.registerUpdateLifecycle("series:transition",function(e,t,n){var r=er7(t);if(r.oldSeries&&n.updatedSeries&&n.optionChanged){var i=n.seriesTransition;if(i)Mb(E6(i),function(e){var i,a,s,u,c,h;i=e,a=r,s=n,u=t,c=[],h=[],Mb(E6(i.from),function(e){var t=eiu(a.oldSeries,e);t>=0&&c.push({dataGroupId:a.oldDataGroupIds[t],data:a.oldData[t],divide:eil(a.oldData[t]),groupIdDim:e.dimension})}),Mb(E6(i.to),function(e){var t=eiu(s.updatedSeries,e);if(t>=0){var n=s.updatedSeries[t].getData();h.push({dataGroupId:a.oldDataGroupIds[t],data:n,divide:eil(n),groupIdDim:e.dimension})}}),c.length>0&&h.length>0&&eia(c,h,u)});else{var a,s,u,c,h,p=(a=r,s=n,u=M1(),c=M1(),h=M1(),Mb(a.oldSeries,function(e,t){var n=a.oldDataGroupIds[t],r=a.oldData[t],i=eio(e),s=eis(i);c.set(s,{dataGroupId:n,data:r}),MI(i)&&Mb(i,function(e){h.set(e,{key:s,dataGroupId:n,data:r})})}),Mb(s.updatedSeries,function(e){if(e.isUniversalTransitionEnabled()&&e.isAnimationEnabled()){var t=e.get("dataGroupId"),n=e.getData(),r=eio(e),i=eis(r),a=c.get(i);if(a)u.set(i,{oldSeries:[{dataGroupId:a.dataGroupId,divide:eil(a.data),data:a.data}],newSeries:[{dataGroupId:t,divide:eil(n),data:n}]});else if(MI(r)){var s=[];Mb(r,function(e){var t=c.get(e);t.data&&s.push({dataGroupId:t.dataGroupId,divide:eil(t.data),data:t.data})}),s.length&&u.set(i,{oldSeries:s,newSeries:[{dataGroupId:t,data:n,divide:eil(n)}]})}else{var p=h.get(r);if(p){var f=u.get(p.key);!f&&(f={oldSeries:[{dataGroupId:p.dataGroupId,data:p.data,divide:eil(p.data)}],newSeries:[]},u.set(p.key,f)),f.newSeries.push({dataGroupId:t,data:n,divide:eil(n)})}}}}),u);Mb(p.keys(),function(e){var n=p.get(e);eia(n.oldSeries,n.newSeries,t)})}Mb(n.updatedSeries,function(e){e[kb]&&(e[kb]=!1)})}for(var f=e.getSeries(),v=r.oldSeries=[],y=r.oldDataGroupIds=[],_=r.oldData=[],x=0;x<f.length;x++){var b=f[x].getData();1e4>b.count()&&(v.push(f[x]),y.push(f[x].get("dataGroupId")),_.push(b))}})}),zP(H$);var eic=n("8611");function eih(e,t){var n={};return t.forEach(function(t){n[t]=e[t]}),n}function eid(e){return"function"==typeof e}var eip=n("3341"),eif=n.n(eip),eig=function(e){function t(t){var n=e.call(this,t)||this;return n.echarts=t.echarts,n.ele=null,n.isInitialResize=!0,n}return wU(t,e),t.prototype.componentDidMount=function(){this.renderNewEcharts()},t.prototype.componentDidUpdate=function(e){var t=this.props.shouldSetOption;if(!eid(t)||!!t(e,this.props)){if(!eif()(e.theme,this.props.theme)||!eif()(e.opts,this.props.opts)||!eif()(e.onEvents,this.props.onEvents)){this.dispose(),this.renderNewEcharts();return}var n=["option","notMerge","lazyUpdate","showLoading","loadingOption"];!eif()(eih(this.props,n),eih(e,n))&&this.updateEChartsOption(),(!eif()(e.style,this.props.style)||!eif()(e.className,this.props.className))&&this.resize()}},t.prototype.componentWillUnmount=function(){this.dispose()},t.prototype.getEchartsInstance=function(){return this.echarts.getInstanceByDom(this.ele)||this.echarts.init(this.ele,this.props.theme,this.props.opts)},t.prototype.dispose=function(){if(this.ele){try{(0,eic.clear)(this.ele)}catch(e){}this.echarts.dispose(this.ele)}},t.prototype.renderNewEcharts=function(){var e=this,t=this.props,n=t.onEvents,r=t.onChartReady,i=this.updateEChartsOption();this.bindEvents(i,n||{}),eid(r)&&r(i),this.ele&&(0,eic.bind)(this.ele,function(){e.resize()})},t.prototype.bindEvents=function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&!function(t,n){if("string"==typeof t&&eid(n))e.on(t,function(t){n(t,e)})}(n,t[n])},t.prototype.updateEChartsOption=function(){var e=this.props,t=e.option,n=e.notMerge,r=e.lazyUpdate,i=e.showLoading,a=e.loadingOption,s=this.getEchartsInstance();return s.setOption(t,void 0!==n&&n,void 0!==r&&r),i?s.showLoading(void 0===a?null:a):s.hideLoading(),s},t.prototype.resize=function(){var e=this.getEchartsInstance();if(!this.isInitialResize)try{e.resize()}catch(e){}this.isInitialResize=!1},t.prototype.render=function(){var e=this,t=this.props,n=t.style,r=t.className,i=wH({height:300},n);return fG.createElement("div",{ref:function(t){e.ele=t},style:i,className:"echarts-for-react "+(void 0===r?"":r)})},t}(fG.PureComponent),eim=function(e){function t(t){var n=e.call(this,t)||this;return n.echarts=tb,n}return wU(t,e),t}(eig);let eiv=e=>{let{tankId:t}=e,n=(0,fG.useRef)(null),[r,i]=(0,fG.useState)(),[a,s]=(0,fG.useState)(),[u,c]=(0,fG.useState)([]),[h,p]=(0,fG.useState)([]),[f,v]=(0,fG.useState)(),y=(0,fG.useCallback)(async e=>{let t=await wh(e);if(!t){i(null),p([]);return}let n=Array.from({length:t.maxCycle},(e,t)=>{let n=String(t+1);return{name:`cycle${n}`,value:n}});i(t),p(n)},[]),_=(0,fG.useCallback)(async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;s(wF(wN(e,await wd(t,r)))),setTimeout(()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.getEchartsInstance().resize()},500)},[]),x=(0,fG.useCallback)(async(e,t)=>{c((await wp(e,t)).map(e=>({name:"Mortality"===e.typeCd?"폐사량":e.typeCd,started:e.startDate,updated:e.updtDate})))},[]),b=(0,fG.useCallback)(e=>v(e),[]);return(0,fG.useEffect)(()=>void y(t),[y,t]),(0,fG.useEffect)(()=>void(r&&r.enabled&&_(r,t,r.maxCycle??1)),[r,_,t]),(0,fG.useEffect)(()=>void(r&&r.enabled&&x(t,r.maxCycle??1)),[r,x,t]),(0,tS.jsxs)(tS.Fragment,{children:[(0,tS.jsxs)("div",{className:"flex justify-between px-4 pb-0 pt-4",children:[(0,tS.jsxs)("h3",{className:"text-xl font-semibold text-slate-900",children:[null==r?void 0:r.farmNm," ",t]}),(0,tS.jsx)(wR,{options:h,value:f,onChange:b})]}),a&&(0,tS.jsx)(eim,{className:"!h-[600px] w-full px-3",ref:n,option:a}),(0,tS.jsxs)("div",{className:"flex flex-wrap p-8",children:[(0,tS.jsxs)("div",{className:"w-1/2 flex-0",children:[(0,tS.jsx)("b",{className:"text-sm",children:"시작일"}),(0,tS.jsx)("div",{className:"flex flex-col gap-4 pt-4 text-xs",children:u.map(e=>(0,tS.jsxs)("span",{children:[e.name,": ",e.started]},e.name))})]}),(0,tS.jsxs)("div",{className:"w-1/2 flex-0 text-right",children:[(0,tS.jsx)("b",{className:"text-sm",children:"최근 업데이트"}),(0,tS.jsx)("div",{className:"flex flex-col gap-4 pt-4 text-xs",children:u.map(e=>(0,tS.jsxs)("span",{children:[e.name,": ",e.updated]},e.name))})]})]})]})},eiy=async e=>{try{let t=new URL("http://172.30.1.1:59095/growth");t.search=new URLSearchParams({tankId:e,year:2024,month:7}).toString();let n=await fetch(t.toString());return await n.json()}catch(e){return[]}},ei_=e=>{let t=[],n=[],r=[];e.forEach(e=>{n.push(e.widthInCm),r.push(e.weightInKg),t.push([e.widthInCm,e.weightInKg])});let i=Math.min(...n),a=Math.max(...n),s=(a-i)*.1,u=Math.min(...r),c=Math.max(...r),h=(c-u)*.1;return{xAxis:{type:"value",name:"전장",min:i-s,max:a+s,nameTextStyle:{fontSize:16,fontWeight:"bold"}},yAxis:{type:"value",name:"무게",min:u-h,max:c+h,nameTextStyle:{fontSize:16,fontWeight:"bold"}},series:[{type:"scatter",data:t,symbolSize:20}],tooltip:{trigger:"item",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},formatter:function(t){let n=e[t.dataIndex];return`측정일: ${n.collectDate}<br>무게: ${n.weightInKg}<br>체고: ${n.lengthInCm}<br>전장: ${n.widthInCm}<br>입식일: ${n.intankDate}`}},dataZoom:[{type:"inside",xAxisIndex:0,filterMode:"none"},{type:"inside",yAxisIndex:0,filterMode:"none"}]}},eix=e=>{let{tankId:t}=e,n=(0,fG.useRef)(null),[r,i]=(0,fG.useState)(),a=(0,fG.useCallback)(async e=>{i(ei_(await eiy(e)))},[]);return(0,fG.useEffect)(()=>void a(t),[a,t]),(0,tS.jsxs)(tS.Fragment,{children:[(0,tS.jsx)("div",{className:"flex justify-between px-4 pb-0 pt-4",children:(0,tS.jsx)("h3",{className:"text-xl font-semibold text-slate-900",children:"성장 데이터"})}),r&&(0,tS.jsx)(eim,{className:"!h-[600px] w-full px-3",ref:n,option:r})]})},eib=xE()(xR(e=>({mode:"default",setMode:t=>{e(()=>({mode:t}))}}))),eiS=async e=>{try{let t=new URL("http://172.30.1.1:59095/samples");t.search=new URLSearchParams({tankId:e,year:2024,month:7}).toString();let n=await fetch(t.toString());return await n.json()}catch(e){return[]}};n("2611"),n("4992"),n("5660"),n("1022"),n("3733"),n("9567"),n("8057"),n("3128"),n("874"),n("2256"),n("443"),n("701"),n("5242"),n("646"),n("1309"),n("4887"),n("9818"),n("9964"),n("3231"),n("4646"),n("2479"),n("7295"),n("1985"),n("3243"),n("4958"),n("8725");var eiw=n("6483"),eiM=n.n(eiw);let eiA=e=>e.map(e=>{let t={},n=JSON.parse(e.jsonValues);return Object.keys(n).forEach(e=>t[e]=n[e]),{data:t,id:e.id,sensorAreaName:e.sensorAreaName,sigunguCd:e.sigunguCd,sigunguNm:e.sigunguNm,farmCd:e.farmCd,farmNm:e.farmNm,tankCd:e.tankCd,tankNm:e.tankNm,dataGubun:e.dataGubun,guardAt:e.guardAt,regDt:e.regDt,collectDate:new Date(e.collectDate)}}),eiC=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{xAxisName:"시간(분)",smooth:!0};let r=(Array.isArray(t=e)&&0!==t.length?Object.entries(t.reduce((e,t)=>{if(!t.collectDate)return e;let n=eiM()(t.collectDate).format("YYYY-MM-DD HH:mm");return!e[n]&&(e[n]=[]),e[n].push(t),e},{})).map(e=>{let[t,n]=e,r={...n[0]};return r.data=n.reduce((e,t)=>({...e,...t.data}),{}),r.collectDate=eiM()(t).toDate(),r}):[]).map(e=>e.data),i=Array.from(new Set(r.reduce((e,t)=>[...e,...Object.keys(t)],[]))),a=Array.from({length:r.length},(t,n)=>e[n].collectDate.getMinutes()),s=i.map(e=>({name:e,type:"line",stack:"total",smooth:n.smooth??!1,areaStyle:n.area?{}:void 0,emphasis:{focus:"series"},data:r.map(t=>t[e]||0)}));return{title:n.title?{text:n.title,subtext:n.subtitle,left:"center"}:void 0,tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:i,bottom:"0%"},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a,name:n.xAxisName,nameLocation:"middle",nameGap:30,nameTextStyle:{fontSize:16,fontWeight:"bold"}},yAxis:{type:"value",name:n.yAxisName,nameLocation:"middle",nameGap:50},series:s}},eiT=e=>{let{tankId:t}=e,n=(0,fG.useRef)(null),[r,i]=(0,fG.useState)(),a=(0,fG.useCallback)(async e=>{i(eiC(eiA(await eiS(e)))),setTimeout(()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.getEchartsInstance().resize()},500)},[]);return(0,fG.useEffect)(()=>void a(t),[a,t]),(0,tS.jsxs)(tS.Fragment,{children:[(0,tS.jsx)("div",{className:"flex justify-between px-4 pb-0 pt-4",children:(0,tS.jsx)("h3",{className:"text-xl font-semibold text-slate-900",children:"성장 데이터"})}),r&&(0,tS.jsx)(eim,{className:"!h-[600px] w-full px-3",ref:n,option:r})]})},eiE="65AF1-RT",eiI=e=>{let{tankId:t}=e,n=eib(e=>e.mode);if(t)return t.startsWith(eiE)?"default"===n?(0,tS.jsx)(eiv,{tankId:t}):(0,tS.jsx)(eix,{tankId:t}):t.startsWith("TMP-")?null:(0,tS.jsx)(eiT,{tankId:t})},eiD=e=>{let{tankId:t}=e,{mode:n,setMode:r}=eib();if(t){if(t.startsWith(eiE)){let e="default"===n;return(0,tS.jsx)(S8,{className:"h-10 justify-center p-1",onPointerDown:()=>r(e?"complex":"default"),children:(0,tS.jsx)("span",{className:"px-2",children:e?"성장 데이터":"복합 데이터"})})}return null}},eiP=e=>{let{data:t}=e,n=(0,fG.useCallback)(e=>e?(0,tS.jsxs)("div",{className:"grid pb-2 pl-1 pt-0.5",children:[(0,tS.jsx)("span",{children:e.title}),(0,tS.jsx)("span",{className:"text-xs font-medium text-slate-400",children:e.tankId})]}):"",[]),r=(0,fG.useCallback)(e=>(0,tS.jsx)(eiI,{tankId:null==e?void 0:e.tankId}),[]),i=(0,fG.useCallback)(e=>(0,tS.jsx)(eiD,{tankId:null==e?void 0:e.tankId}),[]);return(0,tS.jsxs)(tS.Fragment,{children:[(0,tS.jsx)("ambientLight",{intensity:1.3,color:"#e2e8f0"}),(0,tS.jsx)(xW,{data:t}),(0,tS.jsx)(wu,{renderTitle:n,renderContent:r,extraButtons:i})]})};function eiR(){let e=function(){let e="undefined"==typeof document;return"useSyncExternalStore"in fV&&(0,fV.useSyncExternalStore)(()=>()=>{},()=>!1,()=>!e)}(),[t,n]=fG.useState(Sz.isHandoffComplete);return t&&!1===Sz.isHandoffComplete&&n(!1),fG.useEffect(()=>{!0!==t&&n(!0)},[t]),fG.useEffect(()=>Sz.handoff(),[]),!e&&t}"undefined"!=typeof process&&"undefined"!=typeof globalThis&&"undefined"!=typeof Element&&(null==(to=null==process?void 0:process.env)?void 0:to.NODE_ENV)==="test"&&void 0===(null==(ts=null==Element?void 0:Element.prototype)?void 0:ts.getAnimations)&&(Element.prototype.getAnimations=function(){return[]});var eiL=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(eiL||{});let eiO=(0,fG.createContext)(null);eiO.displayName="OpenClosedContext";var eik=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(eik||{});function eiB(){return(0,fG.useContext)(eiO)}function eiN({value:e,children:t}){return fG.createElement(eiO.Provider,{value:e},t)}function eiF(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||(null!=(t=e.as)?t:eiW)!==fG.Fragment||1===fG.Children.count(e.children)}let eiz=(0,fG.createContext)(null);eiz.displayName="TransitionContext";var eiU=(e=>(e.Visible="visible",e.Hidden="hidden",e))(eiU||{});let eiH=(0,fG.createContext)(null);function eiG(e){return"children"in e?eiG(e.children):e.current.filter(({el:e})=>null!==e.current).filter(({state:e})=>"visible"===e).length>0}function eiV(e,t){let n;let r=SV(e),i=(0,fG.useRef)([]),a=(n=(0,fG.useRef)(!1),SG(()=>(n.current=!0,()=>{n.current=!1}),[]),n),s=SH(),u=SW((e,t=SQ.Hidden)=>{let n=i.current.findIndex(({el:t})=>t===e);-1!==n&&(Sq(t,{[SQ.Unmount](){i.current.splice(n,1)},[SQ.Hidden](){i.current[n].state="hidden"}}),s.microTask(()=>{var e;!eiG(i)&&a.current&&(null==(e=r.current)||e.call(r))}))}),c=SW(e=>{let t=i.current.find(({el:t})=>t===e);return t?"visible"!==t.state&&(t.state="visible"):i.current.push({el:e,state:"visible"}),()=>u(e,SQ.Unmount)}),h=(0,fG.useRef)([]),p=(0,fG.useRef)(Promise.resolve()),f=(0,fG.useRef)({enter:[],leave:[]}),v=SW((e,n,r)=>{h.current.splice(0),t&&(t.chains.current[n]=t.chains.current[n].filter(([t])=>t!==e)),null==t||t.chains.current[n].push([e,new Promise(e=>{h.current.push(e)})]),null==t||t.chains.current[n].push([e,new Promise(e=>{Promise.all(f.current[n].map(([e,t])=>t)).then(()=>e())})]),"enter"===n?p.current=p.current.then(()=>null==t?void 0:t.wait.current).then(()=>r(n)):r(n)}),y=SW((e,t,n)=>{Promise.all(f.current[t].splice(0).map(([e,t])=>t)).then(()=>{var e;null==(e=h.current.shift())||e()}).then(()=>n(t))});return(0,fG.useMemo)(()=>({children:i,register:c,unregister:u,onStart:v,onStop:y,wait:p,chains:f}),[c,u,i,v,y,f,p])}eiH.displayName="NestingContext";let eiW=fG.Fragment,eij=SK.RenderStrategy,eiX=S5(function(e,t){let{show:n,appear:r=!1,unmount:i=!0,...a}=e,s=(0,fG.useRef)(null),u=wA(...eiF(e)?[s,t]:null===t?[]:[t]);eiR();let c=eiB();if(void 0===n&&null!==c&&(n=(c&eik.Open)===eik.Open),void 0===n)throw Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[h,p]=(0,fG.useState)(n?"visible":"hidden"),f=eiV(()=>{n||p("hidden")}),[v,y]=(0,fG.useState)(!0),_=(0,fG.useRef)([n]);SG(()=>{!1!==v&&_.current[_.current.length-1]!==n&&(_.current.push(n),y(!1))},[_,n]);let x=(0,fG.useMemo)(()=>({show:n,appear:r,initial:v}),[n,r,v]);SG(()=>{n?p("visible"):eiG(f)||null===s.current||p("hidden")},[n,f]);let b={unmount:i},S=SW(()=>{var t;v&&y(!1),null==(t=e.beforeEnter)||t.call(e)}),w=SW(()=>{var t;v&&y(!1),null==(t=e.beforeLeave)||t.call(e)}),M=S$();return fG.createElement(eiH.Provider,{value:f},fG.createElement(eiz.Provider,{value:x},M({ourProps:{...b,as:fG.Fragment,children:fG.createElement(eiY,{ref:u,...b,...a,beforeEnter:S,beforeLeave:w})},theirProps:{},defaultTag:fG.Fragment,features:eij,visible:"visible"===h,name:"Transition"})))}),eiY=S5(function(e,t){var n,r;let{transition:i=!0,beforeEnter:a,afterEnter:s,beforeLeave:u,afterLeave:c,enter:h,enterFrom:p,enterTo:f,entered:v,leave:y,leaveFrom:_,leaveTo:x,...b}=e,[S,w]=(0,fG.useState)(null),M=(0,fG.useRef)(null),A=eiF(e),C=wA(...A?[M,t,w]:null===t?[]:[t]),T=null==(n=b.unmount)||n?SQ.Unmount:SQ.Hidden,{show:I,appear:D,initial:P}=function(){let e=(0,fG.useContext)(eiz);if(null===e)throw Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),[R,L]=(0,fG.useState)(I?"visible":"hidden"),O=function(){let e=(0,fG.useContext)(eiH);if(null===e)throw Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),{register:k,unregister:B}=O;SG(()=>k(M),[k,M]),SG(()=>{if(T===SQ.Hidden&&M.current){if(I&&"visible"!==R){L("visible");return}return Sq(R,{hidden:()=>B(M),visible:()=>k(M)})}},[R,M,k,B,I,T]);let N=eiR();SG(()=>{if(A&&N&&"visible"===R&&null===M.current)throw Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[M,R,N,A]);let F=P&&!D,z=D&&I&&P,U=(0,fG.useRef)(!1),H=eiV(()=>{U.current||(L("hidden"),B(M))},O),G=SW(e=>{U.current=!0;H.onStart(M,e?"enter":"leave",e=>{"enter"===e?null==a||a():"leave"===e&&(null==u||u())})}),V=SW(e=>{let t=e?"enter":"leave";U.current=!1,H.onStop(M,t,e=>{"enter"===e?null==s||s():"leave"===e&&(null==c||c())}),"leave"!==t||eiG(H)||(L("hidden"),B(M))});(0,fG.useEffect)(()=>{A&&i||(G(I),V(I))},[I,A,i]);let[,W]=function(e,t,n,r){let[i,a]=(0,fG.useState)(n),{hasFlag:s,addFlag:u,removeFlag:c}=function(e=0){let[t,n]=(0,fG.useState)(e),r=(0,fG.useCallback)(e=>n(e),[t]),i=(0,fG.useCallback)(e=>n(t=>t|e),[t]),a=(0,fG.useCallback)(e=>(t&e)===e,[t]);return{flags:t,setFlag:r,addFlag:i,hasFlag:a,removeFlag:(0,fG.useCallback)(e=>n(t=>t&~e),[n]),toggleFlag:(0,fG.useCallback)(e=>n(t=>t^e),[n])}}(e&&i?3:0),h=(0,fG.useRef)(!1),p=(0,fG.useRef)(!1);return SG(()=>{var i;if(e){if(n&&a(!0),!t){n&&u(3);return}return null==(i=null==r?void 0:r.start)||i.call(r,n),function(e,{prepare:t,run:n,done:r,inFlight:i}){let a=SU();return function(e,{inFlight:t,prepare:n}){if(null!=t&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}(e,{prepare:t,inFlight:i}),a.nextFrame(()=>{n(),a.requestAnimationFrame(()=>{a.add(function(e,t){var n,r;let i=SU();if(!e)return i.dispose;let a=!1;i.add(()=>{a=!0});let s=null!=(r=null==(n=e.getAnimations)?void 0:n.call(e).filter(e=>e instanceof CSSTransition))?r:[];return 0===s.length?t():Promise.allSettled(s.map(e=>e.finished)).then(()=>{a||t()}),i.dispose}(e,r))})}),a.dispose}(t,{inFlight:h,prepare(){p.current?p.current=!1:p.current=h.current,h.current=!0,p.current||(n?(u(3),c(4)):(u(4),c(2)))},run(){p.current?n?(c(3),u(4)):(c(4),u(3)):n?c(1):u(1)},done(){var e;p.current&&"function"==typeof t.getAnimations&&t.getAnimations().length>0||(h.current=!1,c(7),n||a(!1),null==(e=null==r?void 0:r.end)||e.call(r,n))}})}},[e,n,t,SH()]),e?[i,{closed:s(1),enter:s(2),leave:s(4),transition:s(2)||s(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}(!(!i||!A||!N||F),S,I,{start:G,end:V}),j=S4({ref:C,className:(null==(r=SZ(b.className,z&&h,z&&p,W.enter&&h,W.enter&&W.closed&&p,W.enter&&!W.closed&&f,W.leave&&y,W.leave&&!W.closed&&_,W.leave&&W.closed&&x,!W.transition&&I&&v))?void 0:r.trim())||void 0,...function(e){let t={};for(let n in e)!0===e[n]&&(t[`data-${n}`]="");return t}(W)}),X=0;"visible"===R&&(X|=eik.Open),"hidden"===R&&(X|=eik.Closed),W.enter&&(X|=eik.Opening),W.leave&&(X|=eik.Closing);let Y=S$();return fG.createElement(eiH.Provider,{value:H},fG.createElement(eiN,{value:X},Y({ourProps:j,theirProps:b,defaultTag:eiW,features:eij,visible:"visible"===R,name:"Transition.Child"})))}),eiJ=S5(function(e,t){let n=null!==(0,fG.useContext)(eiz),r=null!==eiB();return fG.createElement(fG.Fragment,null,!n&&r?fG.createElement(eiX,{ref:t,...e}):fG.createElement(eiY,{ref:t,...e}))}),eiZ=Object.assign(eiX,{Child:eiJ,Root:eiX}),eiq=e=>{let{isOpen:t=!1,onClose:n,title:r,children:i,extraButtons:a}=e,s=(0,fG.useCallback)(e=>{e.target===e.currentTarget&&(null==n||n())},[n]);return(0,tS.jsxs)(eiZ,{show:t,as:fG.Fragment,children:[(0,tS.jsx)(eiZ.Child,{as:fG.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,tS.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"})}),(0,tS.jsx)("div",{className:"fixed inset-0 overflow-y-auto",onPointerDown:s,children:(0,tS.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",onPointerDown:s,children:(0,tS.jsx)(eiZ.Child,{as:fG.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,tS.jsxs)("div",{className:`
              w-full max-w-md transform overflow-hidden rounded-lg bg-white p-4
              shadow-xl transition-all
            `,children:[(0,tS.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,tS.jsx)("h3",{className:"text-lg font-medium",children:r}),(0,tS.jsxs)("div",{className:"flex gap-2",children:[a,(0,tS.jsx)("button",{onPointerDown:n,className:`
                      rounded-full p-1 transition-colors

                      hover:bg-gray-100
                    `,children:(0,tS.jsx)(wa,{className:"h-5 w-5 text-gray-500"})})]})]}),(0,tS.jsx)("div",{className:"mt-2 max-h-96 overflow-y-auto",children:i})]})})})})]})},eiK=wr("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),eiQ=wr("ClipboardCopy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]),ei$={models:[]},ei0=xE()(xR((e,t)=>({importData:ei$,setImportData:t=>{e(()=>({importData:t}))},getImportData:()=>t().importData}))),ei1=()=>{let[e,t]=(0,fG.useState)(!1),[n,r]=(0,fG.useState)(!1),i=ei0(e=>e.importData),a=x1(e=>e.isFullscreen),s=(0,fG.useMemo)(()=>{var e;return e=-1,new be(-1)},[]),u=(0,fG.useMemo)(()=>JSON.stringify(i.models,null,2),[i]),c=(0,fG.useCallback)(()=>{window.navigator.clipboard.writeText(u),window.clearTimeout(s.value),r(!0),s.value=window.setTimeout(()=>r(!1),3e3)},[s,u]);return(0,tS.jsxs)("div",{className:"fixed left-0 top-0 p-3",style:{zIndex:a?0:50},children:[(0,tS.jsx)(S8,{onPointerDown:()=>t(!0),children:"JSON"}),(0,tS.jsx)(eiq,{title:"Models",isOpen:e,onClose:()=>t(!1),extraButtons:(0,tS.jsx)("button",{onPointerDown:c,className:`
              rounded-full p-1 transition-colors

              hover:bg-slate-100
            `,children:n?(0,tS.jsx)(eiK,{className:"h-5 w-5 text-slate-500"}):(0,tS.jsx)(eiQ,{className:"h-5 w-5 text-slate-500"})}),children:(0,tS.jsx)("pre",{className:"rounded border bg-slate-50 p-3 text-xs",children:u})})]})},ei2=()=>{let e=xO(e=>e.focused),{scene:t,controls:n}=gk();return(0,fG.useEffect)(()=>{if(!n)return;let r=m4.config.cameraController;if(e){let i=t.getObjectByName(e.objectName).position.toArray().map((e,t)=>e+r.focusedOffset[t]);n.setLookAt(...r.focusedPosition,...i,!0),n.zoomTo(r.focusedZoom,!0)}else n.setLookAt(...r.unfocusedPosition,0,0,0,!0),n.zoomTo(r.unfocusedZoom,!0)},[n,e,t]),(0,tS.jsx)(tS.Fragment,{})},ei3=(0,fG.forwardRef)((e,t)=>{let{data:n}=e,{setImportData:r,getImportData:i}=ei0();return(0,fG.useEffect)(()=>{r(n??ei$)},[n,r]),(0,fG.useImperativeHandle)(t,()=>({getData:()=>i()})),(0,tS.jsxs)("div",{className:m5("fixed left-0 top-0 !size-full slate-300"),children:[(0,tS.jsxs)(mc,{...m4.props.canvas,children:[(0,tS.jsx)(_x,{}),(0,tS.jsx)(ei2,{}),(0,tS.jsx)(fG.Suspense,{fallback:null,children:(0,tS.jsx)(eiP,{data:n})})]}),(0,tS.jsx)(ei1,{})]})});ei3.displayName="App";let ei5=(e,t)=>{let n=tw.createRoot(e),r=(0,fG.createRef)();return n.render((0,tS.jsx)(fG.StrictMode,{children:(0,tS.jsx)(ei3,{ref:r,...t})})),r.current}})(),r})());