/*! For license information please see index.js.LICENSE.txt */
!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("kw",[],r):"object"==typeof exports?exports.kw=r():t.kw=r()}(this,()=>(()=>{var t={438:function(t){"use strict";t.exports=function(t,r){if(null==t)throw TypeError("expected first argument to be an object.");if(void 0===r||"undefined"==typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return t;for(var i=Object.prototype.propertyIsEnumerable,s=Object(t),u=arguments.length,c=0;++c<u;){for(var h=Object(arguments[c]),p=Object.getOwnPropertySymbols(h),f=0;f<p.length;f++){var v=p[f];i.call(h,v)&&(s[v]=h[v])}}return s}},1253:function(t,r){"use strict";r.default=function(t,r){if(t&&r){var i=Array.isArray(r)?r:r.split(",");if(0===i.length)return!0;var s=t.name||"",u=(t.type||"").toLowerCase(),c=u.replace(/\/.*$/,"");return i.some(function(t){var r=t.trim().toLowerCase();return"."===r.charAt(0)?s.toLowerCase().endsWith(r):r.endsWith("/*")?c===r.replace(/\/.*$/,""):u===r})}return!0}},6483:function(t){var r,i;r=0,i=function(){"use strict";var t="millisecond",r="second",i="minute",s="hour",u="week",c="month",h="quarter",p="year",f="date",v="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_=function(t,r,i){var s=String(t);return!s||s.length>=r?t:""+Array(r+1-s.length).join(i)+t},b="en",w={};w[b]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var r=["th","st","nd","rd"],i=t%100;return"["+t+(r[(i-20)%10]||r[i]||"th")+"]"}};var S="$isDayjsObject",M=function(t){return t instanceof I||!(!t||!t[S])},A=function t(r,i,s){var u;if(!r)return b;if("string"==typeof r){var c=r.toLowerCase();w[c]&&(u=c),i&&(w[c]=i,u=c);var h=r.split("-");if(!u&&h.length>1)return t(h[0])}else{var p=r.name;w[p]=r,u=p}return!s&&u&&(b=u),u||!s&&b},C=function(t,r){if(M(t))return t.clone();var i="object"==typeof r?r:{};return i.date=t,i.args=arguments,new I(i)},T={s:_,z:function(t){var r=-t.utcOffset(),i=Math.abs(r);return(r<=0?"+":"-")+_(Math.floor(i/60),2,"0")+":"+_(i%60,2,"0")},m:function t(r,i){if(r.date()<i.date())return-t(i,r);var s=12*(i.year()-r.year())+(i.month()-r.month()),u=r.clone().add(s,c),h=i-u<0,p=r.clone().add(s+(h?-1:1),c);return+(-(s+(i-u)/(h?u-p:p-u))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(v){return({M:c,y:p,w:u,d:"day",D:f,h:s,m:i,s:r,ms:t,Q:h})[v]||String(v||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}};T.l=A,T.i=M,T.w=function(t,r){return C(t,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var I=function(){function _(t){this.$L=A(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[S]=!0}var b=_.prototype;return b.parse=function(t){this.$d=function(t){var r=t.date,i=t.utc;if(null===r)return new Date(NaN);if(T.u(r))return new Date;if(r instanceof Date)return new Date(r);if("string"==typeof r&&!/Z$/i.test(r)){var s=r.match(y);if(s){var u=s[2]-1||0,c=(s[7]||"0").substring(0,3);return i?new Date(Date.UTC(s[1],u,s[3]||1,s[4]||0,s[5]||0,s[6]||0,c)):new Date(s[1],u,s[3]||1,s[4]||0,s[5]||0,s[6]||0,c)}}return new Date(r)}(t),this.init()},b.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},b.$utils=function(){return T},b.isValid=function(){return this.$d.toString()!==v},b.isSame=function(t,r){var i=C(t);return this.startOf(r)<=i&&i<=this.endOf(r)},b.isAfter=function(t,r){return C(t)<this.startOf(r)},b.isBefore=function(t,r){return this.endOf(r)<C(t)},b.$g=function(t,r,i){return T.u(t)?this[r]:this.set(i,t)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(t,h){var v=this,y=!!T.u(h)||h,x=T.p(t),_=function(t,r){var i=T.w(v.$u?Date.UTC(v.$y,r,t):new Date(v.$y,r,t),v);return y?i:i.endOf("day")},b=function(t,r){return T.w(v.toDate()[t].apply(v.toDate("s"),(y?[0,0,0,0]:[23,59,59,999]).slice(r)),v)},w=this.$W,S=this.$M,M=this.$D,A="set"+(this.$u?"UTC":"");switch(x){case p:return y?_(1,0):_(31,11);case c:return y?_(1,S):_(0,S+1);case u:var C=this.$locale().weekStart||0,I=(w<C?w+7:w)-C;return _(y?M-I:M+(6-I),S);case"day":case f:return b(A+"Hours",0);case s:return b(A+"Minutes",1);case i:return b(A+"Seconds",2);case r:return b(A+"Milliseconds",3);default:return this.clone()}},b.endOf=function(t){return this.startOf(t,!1)},b.$set=function(u,h){var v,y=T.p(u),x="set"+(this.$u?"UTC":""),_=((v={}).day=x+"Date",v[f]=x+"Date",v[c]=x+"Month",v[p]=x+"FullYear",v[s]=x+"Hours",v[i]=x+"Minutes",v[r]=x+"Seconds",v[t]=x+"Milliseconds",v)[y],b="day"===y?this.$D+(h-this.$W):h;if(y===c||y===p){var w=this.clone().set(f,1);w.$d[_](b),w.init(),this.$d=w.set(f,Math.min(this.$D,w.daysInMonth())).$d}else _&&this.$d[_](b);return this.init(),this},b.set=function(t,r){return this.clone().$set(t,r)},b.get=function(t){return this[T.p(t)]()},b.add=function(t,h){var f,v=this;t=Number(t);var y=T.p(h),x=function(r){var i=C(v);return T.w(i.date(i.date()+Math.round(r*t)),v)};if(y===c)return this.set(c,this.$M+t);if(y===p)return this.set(p,this.$y+t);if("day"===y)return x(1);if(y===u)return x(7);var _=((f={})[i]=6e4,f[s]=36e5,f[r]=1e3,f)[y]||1,b=this.$d.getTime()+t*_;return T.w(b,this)},b.subtract=function(t,r){return this.add(-1*t,r)},b.format=function(t){var r=this,i=this.$locale();if(!this.isValid())return i.invalidDate||v;var s=t||"YYYY-MM-DDTHH:mm:ssZ",u=T.z(this),c=this.$H,h=this.$m,p=this.$M,f=i.weekdays,y=i.months,_=i.meridiem,b=function(t,i,u,c){return t&&(t[i]||t(r,s))||u[i].slice(0,c)},w=function(t){return T.s(c%12||12,t,"0")},S=_||function(t,r,i){var s=t<12?"AM":"PM";return i?s.toLowerCase():s};return s.replace(x,function(t,s){return s||function(t){switch(t){case"YY":return String(r.$y).slice(-2);case"YYYY":return T.s(r.$y,4,"0");case"M":return p+1;case"MM":return T.s(p+1,2,"0");case"MMM":return b(i.monthsShort,p,y,3);case"MMMM":return b(y,p);case"D":return r.$D;case"DD":return T.s(r.$D,2,"0");case"d":return String(r.$W);case"dd":return b(i.weekdaysMin,r.$W,f,2);case"ddd":return b(i.weekdaysShort,r.$W,f,3);case"dddd":return f[r.$W];case"H":return String(c);case"HH":return T.s(c,2,"0");case"h":return w(1);case"hh":return w(2);case"a":return S(c,h,!0);case"A":return S(c,h,!1);case"m":return String(h);case"mm":return T.s(h,2,"0");case"s":return String(r.$s);case"ss":return T.s(r.$s,2,"0");case"SSS":return T.s(r.$ms,3,"0");case"Z":return u}return null}(t)||u.replace(":","")})},b.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},b.diff=function(t,f,v){var y,x=this,_=T.p(f),b=C(t),w=(b.utcOffset()-this.utcOffset())*6e4,S=this-b,M=function(){return T.m(x,b)};switch(_){case p:y=M()/12;break;case c:y=M();break;case h:y=M()/3;break;case u:y=(S-w)/6048e5;break;case"day":y=(S-w)/864e5;break;case s:y=S/36e5;break;case i:y=S/6e4;break;case r:y=S/1e3;break;default:y=S}return v?y:T.a(y)},b.daysInMonth=function(){return this.endOf(c).$D},b.$locale=function(){return w[this.$L]},b.locale=function(t,r){if(!t)return this.$L;var i=this.clone(),s=A(t,r,!0);return s&&(i.$L=s),i},b.clone=function(){return T.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},_}(),D=I.prototype;return C.prototype=D,[["$ms",t],["$s",r],["$m",i],["$H",s],["$W","day"],["$M",c],["$y",p],["$D",f]].forEach(function(t){D[t[1]]=function(r){return this.$g(r,t[0],t[1])}}),C.extend=function(t,r){return t.$i||(t(r,I,C),t.$i=!0),C},C.locale=A,C.isDayjs=M,C.unix=function(t){return C(1e3*t)},C.en=w[b],C.Ls=w,C.p={},C},t.exports=i()},1110:function(t){function r(t,r,i){function s(){var v=Date.now()-p;v<r&&v>=0?u=setTimeout(s,r-v):(u=null,!i&&(f=t.apply(h,c),h=c=null))}null==r&&(r=100);var u,c,h,p,f,v=function(){h=this,c=arguments,p=Date.now();var v=i&&!u;return!u&&(u=setTimeout(s,r)),v&&(f=t.apply(h,c),h=c=null),f};return v.clear=function(){u&&(clearTimeout(u),u=null)},v.flush=function(){u&&(f=t.apply(h,c),h=c=null,clearTimeout(u),u=null)},v}r.debounce=r,t.exports=r},8396:function(t,r,i){"use strict";var s=i(3566);t.exports=function(t){!s(t)&&(t={});for(var r=arguments.length,i=1;i<r;i++){var u=arguments[i];s(u)&&function(t,r){for(var i in r)(function(t,r){return Object.prototype.hasOwnProperty.call(t,r)})(r,i)&&(t[i]=r[i])}(t,u)}return t}},5582:function(t,r,i){"use strict";var s=i(2723),u=i(438);t.exports=Object.assign||function(t){if(null==t)throw TypeError("Cannot convert undefined or null to object");!c(t)&&(t={});for(var r=1;r<arguments.length;r++){var i=arguments[r];(function(t){return t&&"string"==typeof t})(i)&&(i=function(t){var r={};for(var i in t)r[i]=t[i];return r}(i)),c(i)&&(function(t,r){for(var i in r)(function(t,r){return Object.prototype.hasOwnProperty.call(t,r)})(r,i)&&(t[i]=r[i])}(t,i),u(t,i))}return t};function c(t){return t&&"object"==typeof t||s(t)}},3341:function(t){"use strict";t.exports=function t(r,i){if(r===i)return!0;if(r&&i&&"object"==typeof r&&"object"==typeof i){if(r.constructor!==i.constructor)return!1;if(Array.isArray(r)){if((s=r.length)!=i.length)return!1;for(u=s;0!=u--;)if(!t(r[u],i[u]))return!1;return!0}if(r.constructor===RegExp)return r.source===i.source&&r.flags===i.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===i.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===i.toString();if((s=(c=Object.keys(r)).length)!==Object.keys(i).length)return!1;for(u=s;0!=u--;)if(!Object.prototype.hasOwnProperty.call(i,c[u]))return!1;for(u=s;0!=u--;){var s,u,c,h=c[u];if(!t(r[h],i[h]))return!1}return!0}return r!=r&&i!=i}},1603:function(t){"use strict";t.exports=function(t,r,i){for(var s in t)if(!1===r.call(i,t[s],s,t))break}},3780:function(t){t.exports=function(t,i,s,u,c){if(!function(t){return null!==t&&("object"==typeof t||"function"==typeof t)}(t)||!i)return t;if(i=r(i),s&&(i+="."+r(s)),u&&(i+="."+r(u)),c&&(i+="."+r(c)),i in t)return t[i];for(var h=i.split("."),p=h.length,f=-1;t&&++f<p;){for(var v=h[f];"\\"===v[v.length-1];)v=v.slice(0,-1)+"."+h[++f];t=t[v]}return t};function r(t){return t?Array.isArray(t)?t.join("."):t:""}},3566:function(t){"use strict";t.exports=function(t){return null!=t&&("object"==typeof t||"function"==typeof t)}},2723:function(t,r,i){"use strict";var s=i(6805);t.exports=function(t){return s(t)||"function"==typeof t||Array.isArray(t)}},6805:function(t,r,i){"use strict";var s=i(8646);function u(t){return!0===s(t)&&"[object Object]"===Object.prototype.toString.call(t)}t.exports=function(t){var r,i;return!1!==u(t)&&"function"==typeof(r=t.constructor)&&!1!==u(i=r.prototype)&&!1!==i.hasOwnProperty("isPrototypeOf")&&!0}},8646:function(t){"use strict";t.exports=function(t){return null!=t&&"object"==typeof t&&!1===Array.isArray(t)}},1378:function(t,r,i){"use strict";var s=i(2723),u=i(2793),c=i(3780),h=i(8930);t.exports=function(t,r,i){if(!s(t))throw TypeError("expected an object");if("string"!=typeof r||null==i)return u.apply(null,arguments);if("string"==typeof i)return h(t,r,i),t;var p=c(t,r);return s(i)&&s(p)&&(i=u({},p,i)),h(t,r,i),t}},2793:function(t,r,i){"use strict";var s=i(2723),u=i(1603);function c(t,r){for(var i=arguments.length,s=0;++s<i;){var c=arguments[s];p(c)&&u(c,h,t)}return t}function h(t,r){if(!!function(t){return"__proto__"!==t&&"constructor"!==t&&"prototype"!==t}(r)){var i=this[r];p(t)&&p(i)?c(i,t):this[r]=t}}function p(t){return s(t)&&!Array.isArray(t)}t.exports=c},4049:function(t,r,i){"use strict";var s=i(6257);function u(){}function c(){}c.resetWarningCache=u,t.exports=function(){function t(t,r,i,u,c,h){if(h!==s){var p=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}function r(){return t}t.isRequired=t;var i={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:r,element:t,elementType:t,instanceOf:r,node:t,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:c,resetWarningCache:u};return i.PropTypes=i,i}},507:function(t,r,i){t.exports=i(4049)()},6257:function(t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6521:function(t,r,i){"use strict";var s,u,c,h,p,f,v=i(5271),y=i(7537);function x(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _=new Set,b={};function w(t,r){S(t,r),S(t+"Capture",r)}function S(t,r){for(b[t]=r,t=0;t<r.length;t++)_.add(r[t])}var M=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),A=Object.prototype.hasOwnProperty,C=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T={},I={};function D(t,r,i,s,u,c,h){this.acceptsBooleans=2===r||3===r||4===r,this.attributeName=s,this.attributeNamespace=u,this.mustUseProperty=i,this.propertyName=t,this.type=r,this.sanitizeURL=c,this.removeEmptyString=h}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){P[t]=new D(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];P[r]=new D(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){P[t]=new D(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){P[t]=new D(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){P[t]=new D(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){P[t]=new D(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){P[t]=new D(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){P[t]=new D(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){P[t]=new D(t,5,!1,t.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function L(t){return t[1].toUpperCase()}function k(t,r,i,s){var u,c=P.hasOwnProperty(r)?P[r]:null;if(null!==c?0!==c.type:s||!(2<r.length)||"o"!==r[0]&&"O"!==r[0]||"n"!==r[1]&&"N"!==r[1]){;(function(t,r,i,s){if(null==r||function(t,r,i,s){if(null!==i&&0===i.type)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":if(s)return!1;if(null!==i)return!i.acceptsBooleans;return"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t;default:return!1}}(t,r,i,s))return!0;if(s)return!1;if(null!==i)switch(i.type){case 3:return!r;case 4:return!1===r;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1})(r,i,c,s)&&(i=null),s||null===c?(u=r,(!!A.call(I,u)||!A.call(T,u)&&(C.test(u)?I[u]=!0:(T[u]=!0,!1)))&&(null===i?t.removeAttribute(r):t.setAttribute(r,""+i))):c.mustUseProperty?t[c.propertyName]=null===i?3!==c.type&&"":i:(r=c.attributeName,s=c.attributeNamespace,null===i?t.removeAttribute(r):(i=3===(c=c.type)||4===c&&!0===i?"":""+i,s?t.setAttributeNS(s,r,i):t.setAttribute(r,i)))}}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(R,L);P[r]=new D(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(R,L);P[r]=new D(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(R,L);P[r]=new D(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){P[t]=new D(t,1,!1,t.toLowerCase(),null,!1,!1)}),P.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){P[t]=new D(t,1,!1,t.toLowerCase(),null,!0,!0)});var O=v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),N=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),G=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),Y=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var $=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var J=Symbol.iterator;function Z(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=J&&t[J]||t["@@iterator"])?t:null}var K,q=Object.assign;function Q(t){if(void 0===K)try{throw Error()}catch(t){var r=t.stack.trim().match(/\n( *(at )?)/);K=r&&r[1]||""}return"\n"+K+t}var ee=!1;function et(t,r){if(!t||ee)return"";ee=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r){if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(r,[])}catch(t){var s=t}Reflect.construct(t,[],r)}else{try{r.call()}catch(t){s=t}t.call(r.prototype)}}else{try{throw Error()}catch(t){s=t}t()}}catch(r){if(r&&s&&"string"==typeof r.stack){for(var u=r.stack.split("\n"),c=s.stack.split("\n"),h=u.length-1,p=c.length-1;1<=h&&0<=p&&u[h]!==c[p];)p--;for(;1<=h&&0<=p;h--,p--)if(u[h]!==c[p]){if(1!==h||1!==p)do if(h--,0>--p||u[h]!==c[p]){var f="\n"+u[h].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=h&&0<=p);break}}}finally{ee=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?Q(t):""}function en(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function er(t){var r=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===r||"radio"===r)}function ei(t){t._valueTracker||(t._valueTracker=function(t){var r=er(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),s=""+t[r];if(!t.hasOwnProperty(r)&&void 0!==i&&"function"==typeof i.get&&"function"==typeof i.set){var u=i.get,c=i.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return u.call(this)},set:function(t){s=""+t,c.call(this,t)}}),Object.defineProperty(t,r,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(t){s=""+t},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}(t))}function ea(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var i=r.getValue(),s="";return t&&(s=er(t)?t.checked?"true":"false":t.value),(t=s)!==i&&(r.setValue(t),!0)}function eo(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(r){return t.body}}function es(t,r){var i=r.checked;return q({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:t._wrapperState.initialChecked})}function el(t,r){var i=null==r.defaultValue?"":r.defaultValue,s=null!=r.checked?r.checked:r.defaultChecked;i=en(null!=r.value?r.value:i),t._wrapperState={initialChecked:s,initialValue:i,controlled:"checkbox"===r.type||"radio"===r.type?null!=r.checked:null!=r.value}}function eu(t,r){null!=(r=r.checked)&&k(t,"checked",r,!1)}function ec(t,r){eu(t,r);var i=en(r.value),s=r.type;if(null!=i)"number"===s?(0===i&&""===t.value||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if("submit"===s||"reset"===s){t.removeAttribute("value");return}r.hasOwnProperty("value")?ed(t,r.type,i):r.hasOwnProperty("defaultValue")&&ed(t,r.type,en(r.defaultValue)),null==r.checked&&null!=r.defaultChecked&&(t.defaultChecked=!!r.defaultChecked)}function eh(t,r,i){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var s=r.type;if(!("submit"!==s&&"reset"!==s||void 0!==r.value&&null!==r.value))return;r=""+t._wrapperState.initialValue,i||r===t.value||(t.value=r),t.defaultValue=r}""!==(i=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==i&&(t.name=i)}function ed(t,r,i){("number"!==r||eo(t.ownerDocument)!==t)&&(null==i?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var ep=Array.isArray;function ef(t,r,i,s){if(t=t.options,r){r={};for(var u=0;u<i.length;u++)r["$"+i[u]]=!0;for(i=0;i<t.length;i++)u=r.hasOwnProperty("$"+t[i].value),t[i].selected!==u&&(t[i].selected=u),u&&s&&(t[i].defaultSelected=!0)}else{for(u=0,i=""+en(i),r=null;u<t.length;u++){if(t[u].value===i){t[u].selected=!0,s&&(t[u].defaultSelected=!0);return}null!==r||t[u].disabled||(r=t[u])}null!==r&&(r.selected=!0)}}function eg(t,r){if(null!=r.dangerouslySetInnerHTML)throw Error(x(91));return q({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function em(t,r){var i=r.value;if(null==i){if(i=r.children,r=r.defaultValue,null!=i){if(null!=r)throw Error(x(92));if(ep(i)){if(1<i.length)throw Error(x(93));i=i[0]}r=i}null==r&&(r=""),i=r}t._wrapperState={initialValue:en(i)}}function ev(t,r){var i=en(r.value),s=en(r.defaultValue);null!=i&&((i=""+i)!==t.value&&(t.value=i),null==r.defaultValue&&t.defaultValue!==i&&(t.defaultValue=i)),null!=s&&(t.defaultValue=""+s)}function ey(t){var r=t.textContent;r===t._wrapperState.initialValue&&""!==r&&null!==r&&(t.value=r)}function ex(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function e_(t,r){return null==t||"http://www.w3.org/1999/xhtml"===t?ex(r):"http://www.w3.org/2000/svg"===t&&"foreignObject"===r?"http://www.w3.org/1999/xhtml":t}var eb,ew,eS=(eb=function(t,r){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=r;else{for((ew=ew||document.createElement("div")).innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=ew.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,r,i,s){MSApp.execUnsafeLocalFunction(function(){return eb(t,r,i,s)})}:eb);function eM(t,r){if(r){var i=t.firstChild;if(i&&i===t.lastChild&&3===i.nodeType){i.nodeValue=r;return}}t.textContent=r}var eA={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eC=["Webkit","ms","Moz","O"];function eT(t,r,i){return null==r||"boolean"==typeof r||""===r?"":i||"number"!=typeof r||0===r||eA.hasOwnProperty(t)&&eA[t]?(""+r).trim():r+"px"}function eE(t,r){for(var i in t=t.style,r)if(r.hasOwnProperty(i)){var s=0===i.indexOf("--"),u=eT(i,r[i],s);"float"===i&&(i="cssFloat"),s?t.setProperty(i,u):t[i]=u}}Object.keys(eA).forEach(function(t){eC.forEach(function(r){eA[r=r+t.charAt(0).toUpperCase()+t.substring(1)]=eA[t]})});var eI=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eD(t,r){if(r){if(eI[t]&&(null!=r.children||null!=r.dangerouslySetInnerHTML))throw Error(x(137,t));if(null!=r.dangerouslySetInnerHTML){if(null!=r.children)throw Error(x(60));if("object"!=typeof r.dangerouslySetInnerHTML||!("__html"in r.dangerouslySetInnerHTML))throw Error(x(61))}if(null!=r.style&&"object"!=typeof r.style)throw Error(x(62))}}function eP(t,r){if(-1===t.indexOf("-"))return"string"==typeof r.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eR=null;function eL(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var ek=null,eO=null,eB=null;function eN(t){if(t=rj(t)){if("function"!=typeof ek)throw Error(x(280));var r=t.stateNode;r&&(r=rY(r),ek(t.stateNode,t.type,r))}}function eF(t){eO?eB?eB.push(t):eB=[t]:eO=t}function ez(){if(eO){var t=eO,r=eB;if(eB=eO=null,eN(t),r)for(t=0;t<r.length;t++)eN(r[t])}}function eU(t,r){return t(r)}function eH(){}var eG=!1;function eV(t,r,i){if(eG)return t(r,i);eG=!0;try{return eU(t,r,i)}finally{eG=!1,(null!==eO||null!==eB)&&(eH(),ez())}}function eW(t,r){var i=t.stateNode;if(null===i)return null;var s=rY(i);if(null===s)return null;switch(i=s[r],r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!s;break;default:t=!1}if(t)return null;if(i&&"function"!=typeof i)throw Error(x(231,r,typeof i));return i}var ej=!1;if(M)try{var eX={};Object.defineProperty(eX,"passive",{get:function(){ej=!0}}),window.addEventListener("test",eX,eX),window.removeEventListener("test",eX,eX)}catch(t){ej=!1}function eY(t,r,i,s,u,c,h,p,f){var v=Array.prototype.slice.call(arguments,3);try{r.apply(i,v)}catch(t){this.onError(t)}}var e$=!1,eJ=null,eZ=!1,eK=null,eq={onError:function(t){e$=!0,eJ=t}};function eQ(t,r,i,s,u,c,h,p,f){e$=!1,eJ=null,eY.apply(eq,arguments)}function e0(t){var r=t,i=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do 0!=(4098&(r=t).flags)&&(i=r.return),t=r.return;while(t)}return 3===r.tag?i:null}function e1(t){if(13===t.tag){var r=t.memoizedState;if(null===r&&null!==(t=t.alternate)&&(r=t.memoizedState),null!==r)return r.dehydrated}return null}function e2(t){if(e0(t)!==t)throw Error(x(188))}function e3(t){return null!==(t=function(t){var r=t.alternate;if(!r){if(null===(r=e0(t)))throw Error(x(188));return r!==t?null:t}for(var i=t,s=r;;){var u=i.return;if(null===u)break;var c=u.alternate;if(null===c){if(null!==(s=u.return)){i=s;continue}break}if(u.child===c.child){for(c=u.child;c;){if(c===i)return e2(u),t;if(c===s)return e2(u),r;c=c.sibling}throw Error(x(188))}if(i.return!==s.return)i=u,s=c;else{for(var h=!1,p=u.child;p;){if(p===i){h=!0,i=u,s=c;break}if(p===s){h=!0,s=u,i=c;break}p=p.sibling}if(!h){for(p=c.child;p;){if(p===i){h=!0,i=c,s=u;break}if(p===s){h=!0,s=c,i=u;break}p=p.sibling}if(!h)throw Error(x(189))}}if(i.alternate!==s)throw Error(x(190))}if(3!==i.tag)throw Error(x(188));return i.stateNode.current===i?t:r}(t))?function t(r){if(5===r.tag||6===r.tag)return r;for(r=r.child;null!==r;){var i=t(r);if(null!==i)return i;r=r.sibling}return null}(t):null}var e5=y.unstable_scheduleCallback,e4=y.unstable_cancelCallback,e6=y.unstable_shouldYield,e9=y.unstable_requestPaint,e8=y.unstable_now,e7=y.unstable_getCurrentPriorityLevel,te=y.unstable_ImmediatePriority,tt=y.unstable_UserBlockingPriority,tn=y.unstable_NormalPriority,tr=y.unstable_LowPriority,ti=y.unstable_IdlePriority,ta=null,to=null,ts=Math.clz32?Math.clz32:function(t){return 0==(t>>>=0)?32:31-(tl(t)/tu|0)|0},tl=Math.log,tu=Math.LN2,tc=64,th=4194304;function td(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return 0x7c00000&t;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0x40000000;default:return t}}function tp(t,r){var i=t.pendingLanes;if(0===i)return 0;var s=0,u=t.suspendedLanes,c=t.pingedLanes,h=0xfffffff&i;if(0!==h){var p=h&~u;0!==p?s=td(p):0!=(c&=h)&&(s=td(c))}else 0!=(h=i&~u)?s=td(h):0!==c&&(s=td(c));if(0===s)return 0;if(0!==r&&r!==s&&0==(r&u)&&((u=s&-s)>=(c=r&-r)||16===u&&0!=(4194240&c)))return r;if(0!=(4&s)&&(s|=16&i),0!==(r=t.entangledLanes))for(t=t.entanglements,r&=s;0<r;)u=1<<(i=31-ts(r)),s|=t[i],r&=~u;return s}function tf(t){return 0!=(t=-0x40000001&t.pendingLanes)?t:0x40000000&t?0x40000000:0}function tg(){var t=tc;return 0==(4194240&(tc<<=1))&&(tc=64),t}function tm(t){for(var r=[],i=0;31>i;i++)r.push(t);return r}function tv(t,r,i){t.pendingLanes|=r,0x20000000!==r&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,t[r=31-ts(r)]=i}function ty(t,r){var i=t.entangledLanes|=r;for(t=t.entanglements;i;){var s=31-ts(i),u=1<<s;u&r|t[s]&r&&(t[s]|=r),i&=~u}}var tx=0;function t_(t){return 1<(t&=-t)?4<t?0!=(0xfffffff&t)?16:0x20000000:4:1}var tb,tw,tS,tM,tA,tC=!1,tT=[],tE=null,tI=null,tD=null,tP=new Map,tR=new Map,tL=[],tk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tO(t,r){switch(t){case"focusin":case"focusout":tE=null;break;case"dragenter":case"dragleave":tI=null;break;case"mouseover":case"mouseout":tD=null;break;case"pointerover":case"pointerout":tP.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":tR.delete(r.pointerId)}}function tB(t,r,i,s,u,c){return null===t||t.nativeEvent!==c?(t={blockedOn:r,domEventName:i,eventSystemFlags:s,nativeEvent:c,targetContainers:[u]},null!==r&&null!==(r=rj(r))&&tw(r),t):(t.eventSystemFlags|=s,r=t.targetContainers,null!==u&&-1===r.indexOf(u)&&r.push(u),t)}function tN(t){var r=rW(t.target);if(null!==r){var i=e0(r);if(null!==i){if(13===(r=i.tag)){if(null!==(r=e1(i))){t.blockedOn=r,tA(t.priority,function(){tS(i)});return}}else if(3===r&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=3===i.tag?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tF(t){if(null!==t.blockedOn)return!1;for(var r=t.targetContainers;0<r.length;){var i=tJ(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(null!==i)return null!==(r=rj(i))&&tw(r),t.blockedOn=i,!1;var s=new(i=t.nativeEvent).constructor(i.type,i);eR=s,i.target.dispatchEvent(s),eR=null;r.shift()}return!0}function tz(t,r,i){tF(t)&&i.delete(r)}function tU(){tC=!1,null!==tE&&tF(tE)&&(tE=null),null!==tI&&tF(tI)&&(tI=null),null!==tD&&tF(tD)&&(tD=null),tP.forEach(tz),tR.forEach(tz)}function tH(t,r){t.blockedOn===r&&(t.blockedOn=null,tC||(tC=!0,y.unstable_scheduleCallback(y.unstable_NormalPriority,tU)))}function tG(t){function r(r){return tH(r,t)}if(0<tT.length){tH(tT[0],t);for(var i=1;i<tT.length;i++){var s=tT[i];s.blockedOn===t&&(s.blockedOn=null)}}for(null!==tE&&tH(tE,t),null!==tI&&tH(tI,t),null!==tD&&tH(tD,t),tP.forEach(r),tR.forEach(r),i=0;i<tL.length;i++)(s=tL[i]).blockedOn===t&&(s.blockedOn=null);for(;0<tL.length&&null===(i=tL[0]).blockedOn;)tN(i),null===i.blockedOn&&tL.shift()}var tV=O.ReactCurrentBatchConfig,tW=!0;function tj(t,r,i,s){var u=tx,c=tV.transition;tV.transition=null;try{tx=1,tY(t,r,i,s)}finally{tx=u,tV.transition=c}}function tX(t,r,i,s){var u=tx,c=tV.transition;tV.transition=null;try{tx=4,tY(t,r,i,s)}finally{tx=u,tV.transition=c}}function tY(t,r,i,s){if(tW){var u=tJ(t,r,i,s);if(null===u)rm(t,r,s,t$,i),tO(t,s);else if(function(t,r,i,s,u){switch(r){case"focusin":return tE=tB(tE,t,r,i,s,u),!0;case"dragenter":return tI=tB(tI,t,r,i,s,u),!0;case"mouseover":return tD=tB(tD,t,r,i,s,u),!0;case"pointerover":var c=u.pointerId;return tP.set(c,tB(tP.get(c)||null,t,r,i,s,u)),!0;case"gotpointercapture":return c=u.pointerId,tR.set(c,tB(tR.get(c)||null,t,r,i,s,u)),!0}return!1}(u,t,r,i,s))s.stopPropagation();else if(tO(t,s),4&r&&-1<tk.indexOf(t)){for(;null!==u;){var c=rj(u);if(null!==c&&tb(c),null===(c=tJ(t,r,i,s))&&rm(t,r,s,t$,i),c===u)break;u=c}null!==u&&s.stopPropagation()}else rm(t,r,s,null,i)}}var t$=null;function tJ(t,r,i,s){if(t$=null,null!==(t=rW(t=eL(s)))){if(null===(r=e0(t)))t=null;else if(13===(i=r.tag)){if(null!==(t=e1(r)))return t;t=null}else if(3===i){if(r.stateNode.current.memoizedState.isDehydrated)return 3===r.tag?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}return t$=t,null}function tZ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(e7()){case te:return 1;case tt:return 4;case tn:case tr:return 16;case ti:return 0x20000000;default:return 16}default:return 16}}var tK=null,tq=null,tQ=null;function t0(){if(tQ)return tQ;var t,r,i=tq,s=i.length,u="value"in tK?tK.value:tK.textContent,c=u.length;for(t=0;t<s&&i[t]===u[t];t++);var h=s-t;for(r=1;r<=h&&i[s-r]===u[c-r];r++);return tQ=u.slice(t,1<r?1-r:void 0)}function t1(t){var r=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===r&&(t=13):t=r,10===t&&(t=13),32<=t||13===t?t:0}function t2(){return!0}function t3(){return!1}function t5(t){function r(r,i,s,u,c){for(var h in this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=u,this.target=c,this.currentTarget=null,t)t.hasOwnProperty(h)&&(r=t[h],this[h]=r?r(u):u[h]);return this.isDefaultPrevented=(null!=u.defaultPrevented?u.defaultPrevented:!1===u.returnValue)?t2:t3,this.isPropagationStopped=t3,this}return q(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=t2)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=t2)},persist:function(){},isPersistent:t2}),r}var t4,t6,t9,t8={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},t7=t5(t8),ne=q({},t8,{view:0,detail:0}),nt=t5(ne),nn=q({},ne,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:np,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==t9&&(t9&&"mousemove"===t.type?(t4=t.screenX-t9.screenX,t6=t.screenY-t9.screenY):t6=t4=0,t9=t),t4)},movementY:function(t){return"movementY"in t?t.movementY:t6}}),nr=t5(nn),ni=t5(q({},nn,{dataTransfer:0})),na=t5(q({},ne,{relatedTarget:0})),no=t5(q({},t8,{animationName:0,elapsedTime:0,pseudoElement:0})),ns=t5(q({},t8,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),nl=t5(q({},t8,{data:0})),nu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nd(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):!!(t=nh[t])&&!!r[t]}function np(){return nd}var nf=t5(q({},ne,{key:function(t){if(t.key){var r=nu[t.key]||t.key;if("Unidentified"!==r)return r}return"keypress"===t.type?13===(t=t1(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?nc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:np,charCode:function(t){return"keypress"===t.type?t1(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?t1(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),ng=t5(q({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),nm=t5(q({},ne,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:np})),nv=t5(q({},t8,{propertyName:0,elapsedTime:0,pseudoElement:0})),ny=t5(q({},nn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),nx=[9,13,27,32],n_=M&&"CompositionEvent"in window,nb=null;M&&"documentMode"in document&&(nb=document.documentMode);var nw=M&&"TextEvent"in window&&!nb,nS=M&&(!n_||nb&&8<nb&&11>=nb),nM=!1;function nA(t,r){switch(t){case"keyup":return -1!==nx.indexOf(r.keyCode);case"keydown":return 229!==r.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nC(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var nT=!1,nE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nI(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===r?!!nE[t.type]:"textarea"===r}function nD(t,r,i,s){eF(s),0<(r=ry(r,"onChange")).length&&(i=new t7("onChange","change",null,i,s),t.push({event:i,listeners:r}))}var nP=null,nR=null;function nL(t){rc(t,0)}function nk(t){if(ea(rX(t)))return t}function nO(t,r){if("change"===t)return r}var nB=!1;if(M){if(M){var nN="oninput"in document;if(!nN){var nF=document.createElement("div");nF.setAttribute("oninput","return;"),nN="function"==typeof nF.oninput}s=nN}else s=!1;nB=s&&(!document.documentMode||9<document.documentMode)}function nz(){nP&&(nP.detachEvent("onpropertychange",nU),nR=nP=null)}function nU(t){if("value"===t.propertyName&&nk(nR)){var r=[];nD(r,nR,t,eL(t)),eV(nL,r)}}function nH(t,r,i){"focusin"===t?(nz(),nP=r,nR=i,nP.attachEvent("onpropertychange",nU)):"focusout"===t&&nz()}function nG(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return nk(nR)}function nV(t,r){if("click"===t)return nk(r)}function nW(t,r){if("input"===t||"change"===t)return nk(r)}var nj="function"==typeof Object.is?Object.is:function(t,r){return t===r&&(0!==t||1/t==1/r)||t!=t&&r!=r};function nX(t,r){if(nj(t,r))return!0;if("object"!=typeof t||null===t||"object"!=typeof r||null===r)return!1;var i=Object.keys(t),s=Object.keys(r);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var u=i[s];if(!A.call(r,u)||!nj(t[u],r[u]))return!1}return!0}function nY(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function n$(t,r){var i,s=nY(t);for(t=0;s;){if(3===s.nodeType){if(i=t+s.textContent.length,t<=r&&i>=r)return{node:s,offset:r-t};t=i}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=nY(s)}}function nJ(){for(var t=window,r=eo();r instanceof t.HTMLIFrameElement;){try{var i="string"==typeof r.contentWindow.location.href}catch(t){i=!1}if(i)t=r.contentWindow;else break;r=eo(t.document)}return r}function nZ(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&("input"===r&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===r||"true"===t.contentEditable)}var nK=M&&"documentMode"in document&&11>=document.documentMode,nq=null,nQ=null,n0=null,n1=!1;function n2(t,r,i){var s=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;n1||null==nq||nq!==eo(s)||(s="selectionStart"in(s=nq)&&nZ(s)?{start:s.selectionStart,end:s.selectionEnd}:{anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},n0&&nX(n0,s)||(n0=s,0<(s=ry(nQ,"onSelect")).length&&(r=new t7("onSelect","select",null,r,i),t.push({event:r,listeners:s}),r.target=nq)))}function n3(t,r){var i={};return i[t.toLowerCase()]=r.toLowerCase(),i["Webkit"+t]="webkit"+r,i["Moz"+t]="moz"+r,i}var n5={animationend:n3("Animation","AnimationEnd"),animationiteration:n3("Animation","AnimationIteration"),animationstart:n3("Animation","AnimationStart"),transitionend:n3("Transition","TransitionEnd")},n4={},n6={};function n9(t){if(n4[t])return n4[t];if(!n5[t])return t;var r,i=n5[t];for(r in i)if(i.hasOwnProperty(r)&&r in n6)return n4[t]=i[r];return t}M&&(n6=document.createElement("div").style,"AnimationEvent"in window||(delete n5.animationend.animation,delete n5.animationiteration.animation,delete n5.animationstart.animation),"TransitionEvent"in window||delete n5.transitionend.transition);var n8=n9("animationend"),n7=n9("animationiteration"),re=n9("animationstart"),rt=n9("transitionend"),rn=new Map,rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ri(t,r){rn.set(t,r),w(r,[t])}for(var ra=0;ra<rr.length;ra++){var ro=rr[ra];ri(ro.toLowerCase(),"on"+(ro[0].toUpperCase()+ro.slice(1)))}ri(n8,"onAnimationEnd"),ri(n7,"onAnimationIteration"),ri(re,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(rt,"onTransitionEnd"),S("onMouseEnter",["mouseout","mouseover"]),S("onMouseLeave",["mouseout","mouseover"]),S("onPointerEnter",["pointerout","pointerover"]),S("onPointerLeave",["pointerout","pointerover"]),w("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),w("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),w("onBeforeInput",["compositionend","keypress","textInput","paste"]),w("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),w("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),w("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rl=new Set("cancel close invalid load scroll toggle".split(" ").concat(rs));function ru(t,r,i){var s=t.type||"unknown-event";t.currentTarget=i,!function(t,r,i,s,u,c,h,p,f){if(eQ.apply(this,arguments),e$){if(e$){var v=eJ;e$=!1,eJ=null}else throw Error(x(198));eZ||(eZ=!0,eK=v)}}(s,r,void 0,t),t.currentTarget=null}function rc(t,r){r=0!=(4&r);for(var i=0;i<t.length;i++){var s=t[i],u=s.event;s=s.listeners;e:{var c=void 0;if(r)for(var h=s.length-1;0<=h;h--){var p=s[h],f=p.instance,v=p.currentTarget;if(p=p.listener,f!==c&&u.isPropagationStopped())break e;ru(u,p,v),c=f}else for(h=0;h<s.length;h++){if(f=(p=s[h]).instance,v=p.currentTarget,p=p.listener,f!==c&&u.isPropagationStopped())break e;ru(u,p,v),c=f}}}if(eZ)throw t=eK,eZ=!1,eK=null,t}function rh(t,r){var i=r[rH];void 0===i&&(i=r[rH]=new Set);var s=t+"__bubble";i.has(s)||(rg(r,t,2,!1),i.add(s))}function rd(t,r,i){var s=0;r&&(s|=4),rg(i,t,s,r)}var rp="_reactListening"+Math.random().toString(36).slice(2);function rf(t){if(!t[rp]){t[rp]=!0,_.forEach(function(r){"selectionchange"!==r&&(rl.has(r)||rd(r,!1,t),rd(r,!0,t))});var r=9===t.nodeType?t:t.ownerDocument;null===r||r[rp]||(r[rp]=!0,rd("selectionchange",!1,r))}}function rg(t,r,i,s){switch(tZ(r)){case 1:var u=tj;break;case 4:u=tX;break;default:u=tY}i=u.bind(null,r,i,t),u=void 0,ej&&("touchstart"===r||"touchmove"===r||"wheel"===r)&&(u=!0),s?void 0!==u?t.addEventListener(r,i,{capture:!0,passive:u}):t.addEventListener(r,i,!0):void 0!==u?t.addEventListener(r,i,{passive:u}):t.addEventListener(r,i,!1)}function rm(t,r,i,s,u){var c=s;if(0==(1&r)&&0==(2&r)&&null!==s)e:for(;;){if(null===s)return;var h=s.tag;if(3===h||4===h){var p=s.stateNode.containerInfo;if(p===u||8===p.nodeType&&p.parentNode===u)break;if(4===h)for(h=s.return;null!==h;){var f=h.tag;if((3===f||4===f)&&((f=h.stateNode.containerInfo)===u||8===f.nodeType&&f.parentNode===u))return;h=h.return}for(;null!==p;){if(null===(h=rW(p)))return;if(5===(f=h.tag)||6===f){s=c=h;continue e}p=p.parentNode}}s=s.return}eV(function(){var s=c,u=eL(i),h=[];e:{var p=rn.get(t);if(void 0!==p){var f=t7,v=t;switch(t){case"keypress":if(0===t1(i))break e;case"keydown":case"keyup":f=nf;break;case"focusin":v="focus",f=na;break;case"focusout":v="blur",f=na;break;case"beforeblur":case"afterblur":f=na;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=nr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=ni;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=nm;break;case n8:case n7:case re:f=no;break;case rt:f=nv;break;case"scroll":f=nt;break;case"wheel":f=ny;break;case"copy":case"cut":case"paste":f=ns;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=ng}var y=0!=(4&r),x=!y&&"scroll"===t,_=y?null!==p?p+"Capture":null:p;y=[];for(var b,w=s;null!==w;){var S=(b=w).stateNode;if(5===b.tag&&null!==S&&(b=S,null!==_&&null!=(S=eW(w,_))&&y.push(rv(w,S,b))),x)break;w=w.return}0<y.length&&(p=new f(p,v,null,i,u),h.push({event:p,listeners:y}))}}if(0==(7&r)){e:if(p="mouseover"===t||"pointerover"===t,f="mouseout"===t||"pointerout"===t,!(p&&i!==eR&&(v=i.relatedTarget||i.fromElement)&&(rW(v)||v[rU]))){if((f||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,f?(v=i.relatedTarget||i.toElement,f=s,null!==(v=v?rW(v):null)&&(x=e0(v),v!==x||5!==v.tag&&6!==v.tag)&&(v=null)):(f=null,v=s),f!==v)){if(y=nr,S="onMouseLeave",_="onMouseEnter",w="mouse",("pointerout"===t||"pointerover"===t)&&(y=ng,S="onPointerLeave",_="onPointerEnter",w="pointer"),x=null==f?p:rX(f),b=null==v?p:rX(v),(p=new y(S,w+"leave",f,i,u)).target=x,p.relatedTarget=b,S=null,rW(u)===s&&((y=new y(_,w+"enter",v,i,u)).target=b,y.relatedTarget=x,S=y),x=S,f&&v)t:{for(y=f,_=v,w=0,b=y;b;b=rx(b))w++;for(b=0,S=_;S;S=rx(S))b++;for(;0<w-b;)y=rx(y),w--;for(;0<b-w;)_=rx(_),b--;for(;w--;){if(y===_||null!==_&&y===_.alternate)break t;y=rx(y),_=rx(_)}y=null}else y=null;null!==f&&r_(h,p,f,y,!1),null!==v&&null!==x&&r_(h,x,v,y,!0)}}e:{if("select"===(f=(p=s?rX(s):window).nodeName&&p.nodeName.toLowerCase())||"input"===f&&"file"===p.type)var M,A=nO;else if(nI(p)){if(nB)A=nW;else{A=nG;var C=nH}}else(f=p.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===p.type||"radio"===p.type)&&(A=nV);if(A&&(A=A(t,s))){nD(h,A,i,u);break e}C&&C(t,p,s),"focusout"===t&&(C=p._wrapperState)&&C.controlled&&"number"===p.type&&ed(p,"number",p.value)}switch(C=s?rX(s):window,t){case"focusin":(nI(C)||"true"===C.contentEditable)&&(nq=C,nQ=s,n0=null);break;case"focusout":n0=nQ=nq=null;break;case"mousedown":n1=!0;break;case"contextmenu":case"mouseup":case"dragend":n1=!1,n2(h,i,u);break;case"selectionchange":if(nK)break;case"keydown":case"keyup":n2(h,i,u)}if(n_)t:{switch(t){case"compositionstart":var T="onCompositionStart";break t;case"compositionend":T="onCompositionEnd";break t;case"compositionupdate":T="onCompositionUpdate";break t}T=void 0}else nT?nA(t,i)&&(T="onCompositionEnd"):"keydown"===t&&229===i.keyCode&&(T="onCompositionStart");T&&(nS&&"ko"!==i.locale&&(nT||"onCompositionStart"!==T?"onCompositionEnd"===T&&nT&&(M=t0()):(tq="value"in(tK=u)?tK.value:tK.textContent,nT=!0)),0<(C=ry(s,T)).length&&(T=new nl(T,t,null,i,u),h.push({event:T,listeners:C}),M?T.data=M:null!==(M=nC(i))&&(T.data=M))),(M=nw?function(t,r){switch(t){case"compositionend":return nC(r);case"keypress":if(32!==r.which)return null;return nM=!0," ";case"textInput":return" "===(t=r.data)&&nM?null:t;default:return null}}(t,i):function(t,r){if(nT)return"compositionend"===t||!n_&&nA(t,r)?(t=t0(),tQ=tq=tK=null,nT=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return nS&&"ko"!==r.locale?null:r.data}}(t,i))&&0<(s=ry(s,"onBeforeInput")).length&&(u=new nl("onBeforeInput","beforeinput",null,i,u),h.push({event:u,listeners:s}),u.data=M)}rc(h,r)})}function rv(t,r,i){return{instance:t,listener:r,currentTarget:i}}function ry(t,r){for(var i=r+"Capture",s=[];null!==t;){var u=t,c=u.stateNode;5===u.tag&&null!==c&&(u=c,null!=(c=eW(t,i))&&s.unshift(rv(t,c,u)),null!=(c=eW(t,r))&&s.push(rv(t,c,u))),t=t.return}return s}function rx(t){if(null===t)return null;do t=t.return;while(t&&5!==t.tag);return t||null}function r_(t,r,i,s,u){for(var c=r._reactName,h=[];null!==i&&i!==s;){var p=i,f=p.alternate,v=p.stateNode;if(null!==f&&f===s)break;5===p.tag&&null!==v&&(p=v,u?null!=(f=eW(i,c))&&h.unshift(rv(i,f,p)):u||null!=(f=eW(i,c))&&h.push(rv(i,f,p))),i=i.return}0!==h.length&&t.push({event:r,listeners:h})}var rb=/\r\n?/g,rw=/\u0000|\uFFFD/g;function rS(t){return("string"==typeof t?t:""+t).replace(rb,"\n").replace(rw,"")}function rM(t,r,i){if(r=rS(r),rS(t)!==r&&i)throw Error(x(425))}function rA(){}var rC=null,rT=null;function rE(t,r){return"textarea"===t||"noscript"===t||"string"==typeof r.children||"number"==typeof r.children||"object"==typeof r.dangerouslySetInnerHTML&&null!==r.dangerouslySetInnerHTML&&null!=r.dangerouslySetInnerHTML.__html}var rI="function"==typeof setTimeout?setTimeout:void 0,rD="function"==typeof clearTimeout?clearTimeout:void 0,rP="function"==typeof Promise?Promise:void 0,rR="function"==typeof queueMicrotask?queueMicrotask:void 0!==rP?function(t){return rP.resolve(null).then(t).catch(rL)}:rI;function rL(t){setTimeout(function(){throw t})}function rk(t,r){var i=r,s=0;do{var u=i.nextSibling;if(t.removeChild(i),u&&8===u.nodeType){if("/$"===(i=u.data)){if(0===s){t.removeChild(u),tG(r);return}s--}else"$"!==i&&"$?"!==i&&"$!"!==i||s++}i=u}while(i);tG(r)}function rO(t){for(;null!=t;t=t.nextSibling){var r=t.nodeType;if(1===r||3===r)break;if(8===r){if("$"===(r=t.data)||"$!"===r||"$?"===r)break;if("/$"===r)return null}}return t}function rB(t){t=t.previousSibling;for(var r=0;t;){if(8===t.nodeType){var i=t.data;if("$"===i||"$!"===i||"$?"===i){if(0===r)return t;r--}else"/$"===i&&r++}t=t.previousSibling}return null}var rN=Math.random().toString(36).slice(2),rF="__reactFiber$"+rN,rz="__reactProps$"+rN,rU="__reactContainer$"+rN,rH="__reactEvents$"+rN,rG="__reactListeners$"+rN,rV="__reactHandles$"+rN;function rW(t){var r=t[rF];if(r)return r;for(var i=t.parentNode;i;){if(r=i[rU]||i[rF]){if(i=r.alternate,null!==r.child||null!==i&&null!==i.child)for(t=rB(t);null!==t;){if(i=t[rF])return i;t=rB(t)}return r}i=(t=i).parentNode}return null}function rj(t){return(t=t[rF]||t[rU])&&(5===t.tag||6===t.tag||13===t.tag||3===t.tag)?t:null}function rX(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(x(33))}function rY(t){return t[rz]||null}var r$=[],rJ=-1;function rZ(t){return{current:t}}function rK(t){0>rJ||(t.current=r$[rJ],r$[rJ]=null,rJ--)}function rq(t,r){r$[++rJ]=t.current,t.current=r}var rQ={},r0=rZ(rQ),r1=rZ(!1),r2=rQ;function r3(t,r){var i=t.type.contextTypes;if(!i)return rQ;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===r)return s.__reactInternalMemoizedMaskedChildContext;var u,c={};for(u in i)c[u]=r[u];return s&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=c),c}function r5(t){return null!=(t=t.childContextTypes)}function r4(){rK(r1),rK(r0)}function r6(t,r,i){if(r0.current!==rQ)throw Error(x(168));rq(r0,r),rq(r1,i)}function r9(t,r,i){var s=t.stateNode;if(r=r.childContextTypes,"function"!=typeof s.getChildContext)return i;for(var u in s=s.getChildContext())if(!(u in r))throw Error(x(108,function(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=r.render).displayName||t.name||"",r.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return function t(r){if(null==r)return null;if("function"==typeof r)return r.displayName||r.name||null;if("string"==typeof r)return r;switch(r){case F:return"Fragment";case N:return"Portal";case U:return"Profiler";case z:return"StrictMode";case W:return"Suspense";case j:return"SuspenseList"}if("object"==typeof r)switch(r.$$typeof){case G:return(r.displayName||"Context")+".Consumer";case H:return(r._context.displayName||"Context")+".Provider";case V:var i=r.render;return(r=r.displayName)||(r=""!==(r=i.displayName||i.name||"")?"ForwardRef("+r+")":"ForwardRef"),r;case X:return null!==(i=r.displayName||null)?i:t(r.type)||"Memo";case Y:i=r._payload,r=r._init;try{return t(r(i))}catch(t){}}return null}(r);case 8:return r===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof r)return r.displayName||r.name||null;if("string"==typeof r)return r}return null}(t)||"Unknown",u));return q({},i,s)}function r8(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rQ,r2=r0.current,rq(r0,t),rq(r1,r1.current),!0}function r7(t,r,i){var s=t.stateNode;if(!s)throw Error(x(169));i?(t=r9(t,r,r2),s.__reactInternalMemoizedMergedChildContext=t,rK(r1),rK(r0),rq(r0,t)):rK(r1),rq(r1,i)}var ie=null,it=!1,ir=!1;function ii(t){null===ie?ie=[t]:ie.push(t)}function ia(){if(!ir&&null!==ie){ir=!0;var t=0,r=tx;try{var i=ie;for(tx=1;t<i.length;t++){var s=i[t];do s=s(!0);while(null!==s)}ie=null,it=!1}catch(r){throw null!==ie&&(ie=ie.slice(t+1)),e5(te,ia),r}finally{tx=r,ir=!1}}return null}var io=[],is=0,il=null,iu=0,ic=[],ih=0,id=null,ip=1,ig="";function im(t,r){io[is++]=iu,io[is++]=il,il=t,iu=r}function iv(t,r,i){ic[ih++]=ip,ic[ih++]=ig,ic[ih++]=id,id=t;var s=ip;t=ig;var u=32-ts(s)-1;s&=~(1<<u),i+=1;var c=32-ts(r)+u;if(30<c){var h=u-u%5;c=(s&(1<<h)-1).toString(32),s>>=h,u-=h,ip=1<<32-ts(r)+u|i<<u|s,ig=c+t}else ip=1<<c|i<<u|s,ig=t}function iy(t){null!==t.return&&(im(t,1),iv(t,1,0))}function ix(t){for(;t===il;)il=io[--is],io[is]=null,iu=io[--is],io[is]=null;for(;t===id;)id=ic[--ih],ic[ih]=null,ig=ic[--ih],ic[ih]=null,ip=ic[--ih],ic[ih]=null}var i_=null,ib=null,iw=!1,iS=null;function iM(t,r){var i=s5(5,null,null,0);i.elementType="DELETED",i.stateNode=r,i.return=t,null===(r=t.deletions)?(t.deletions=[i],t.flags|=16):r.push(i)}function iA(t,r){switch(t.tag){case 5:var i=t.type;return null!==(r=1!==r.nodeType||i.toLowerCase()!==r.nodeName.toLowerCase()?null:r)&&(t.stateNode=r,i_=t,ib=rO(r.firstChild),!0);case 6:return null!==(r=""===t.pendingProps||3!==r.nodeType?null:r)&&(t.stateNode=r,i_=t,ib=null,!0);case 13:return null!==(r=8!==r.nodeType?null:r)&&(i=null!==id?{id:ip,overflow:ig}:null,t.memoizedState={dehydrated:r,treeContext:i,retryLane:0x40000000},(i=s5(18,null,null,0)).stateNode=r,i.return=t,t.child=i,i_=t,ib=null,!0);default:return!1}}function iC(t){return 0!=(1&t.mode)&&0==(128&t.flags)}function iT(t){if(iw){var r=ib;if(r){var i=r;if(!iA(t,r)){if(iC(t))throw Error(x(418));r=rO(i.nextSibling);var s=i_;r&&iA(t,r)?iM(s,i):(t.flags=-4097&t.flags|2,iw=!1,i_=t)}}else{if(iC(t))throw Error(x(418));t.flags=-4097&t.flags|2,iw=!1,i_=t}}}function iE(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;i_=t}function iI(t){if(t!==i_)return!1;if(!iw)return iE(t),iw=!0,!1;if((r=3!==t.tag)&&!(r=5!==t.tag)&&(r="head"!==(r=t.type)&&"body"!==r&&!rE(t.type,t.memoizedProps)),r&&(r=ib)){if(iC(t))throw iD(),Error(x(418));for(;r;)iM(t,r),r=rO(r.nextSibling)}if(iE(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(x(317));e:{for(r=0,t=t.nextSibling;t;){if(8===t.nodeType){var r,i=t.data;if("/$"===i){if(0===r){ib=rO(t.nextSibling);break e}r--}else"$"!==i&&"$!"!==i&&"$?"!==i||r++}t=t.nextSibling}ib=null}}else ib=i_?rO(t.stateNode.nextSibling):null;return!0}function iD(){for(var t=ib;t;)t=rO(t.nextSibling)}function iP(){ib=i_=null,iw=!1}function iR(t){null===iS?iS=[t]:iS.push(t)}var iL=O.ReactCurrentBatchConfig;function ik(t,r,i){if(null!==(t=i.ref)&&"function"!=typeof t&&"object"!=typeof t){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(x(309));var s=i.stateNode}if(!s)throw Error(x(147,t));var u=s,c=""+t;return null!==r&&null!==r.ref&&"function"==typeof r.ref&&r.ref._stringRef===c?r.ref:((r=function(t){var r=u.refs;null===t?delete r[c]:r[c]=t})._stringRef=c,r)}if("string"!=typeof t)throw Error(x(284));if(!i._owner)throw Error(x(290,t))}return t}function iO(t,r){throw Error(x(31,"[object Object]"===(t=Object.prototype.toString.call(r))?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function iB(t){return(0,t._init)(t._payload)}function iN(t){function r(r,i){if(t){var s=r.deletions;null===s?(r.deletions=[i],r.flags|=16):s.push(i)}}function i(i,s){if(!t)return null;for(;null!==s;)r(i,s),s=s.sibling;return null}function s(t,r){for(t=new Map;null!==r;)null!==r.key?t.set(r.key,r):t.set(r.index,r),r=r.sibling;return t}function u(t,r){return(t=s6(t,r)).index=0,t.sibling=null,t}function c(r,i,s){return(r.index=s,t)?null!==(s=r.alternate)?(s=s.index)<i?(r.flags|=2,i):s:(r.flags|=2,i):(r.flags|=1048576,i)}function h(r){return t&&null===r.alternate&&(r.flags|=2),r}function p(t,r,i,s){return null===r||6!==r.tag?((r=le(i,t.mode,s)).return=t,r):((r=u(r,i)).return=t,r)}function f(t,r,i,s){var c=i.type;return c===F?y(t,r,i.props.children,s,i.key):null!==r&&(r.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===Y&&iB(c)===r.type)?((s=u(r,i.props)).ref=ik(t,r,i),s.return=t,s):((s=s9(i.type,i.key,i.props,null,t.mode,s)).ref=ik(t,r,i),s.return=t,s)}function v(t,r,i,s){return null===r||4!==r.tag||r.stateNode.containerInfo!==i.containerInfo||r.stateNode.implementation!==i.implementation?((r=lt(i,t.mode,s)).return=t,r):((r=u(r,i.children||[])).return=t,r)}function y(t,r,i,s,c){return null===r||7!==r.tag?((r=s8(i,t.mode,s,c)).return=t,r):((r=u(r,i)).return=t,r)}function _(t,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return(r=le(""+r,t.mode,i)).return=t,r;if("object"==typeof r&&null!==r){switch(r.$$typeof){case B:return(i=s9(r.type,r.key,r.props,null,t.mode,i)).ref=ik(t,null,r),i.return=t,i;case N:return(r=lt(r,t.mode,i)).return=t,r;case Y:return _(t,(0,r._init)(r._payload),i)}if(ep(r)||Z(r))return(r=s8(r,t.mode,i,null)).return=t,r;iO(t,r)}return null}function b(t,r,i,s){var u=null!==r?r.key:null;if("string"==typeof i&&""!==i||"number"==typeof i)return null!==u?null:p(t,r,""+i,s);if("object"==typeof i&&null!==i){switch(i.$$typeof){case B:return i.key===u?f(t,r,i,s):null;case N:return i.key===u?v(t,r,i,s):null;case Y:return b(t,r,(u=i._init)(i._payload),s)}if(ep(i)||Z(i))return null!==u?null:y(t,r,i,s,null);iO(t,i)}return null}function w(t,r,i,s,u){if("string"==typeof s&&""!==s||"number"==typeof s)return p(r,t=t.get(i)||null,""+s,u);if("object"==typeof s&&null!==s){switch(s.$$typeof){case B:return f(r,t=t.get(null===s.key?i:s.key)||null,s,u);case N:return v(r,t=t.get(null===s.key?i:s.key)||null,s,u);case Y:return w(t,r,i,(0,s._init)(s._payload),u)}if(ep(s)||Z(s))return y(r,t=t.get(i)||null,s,u,null);iO(r,s)}return null}return function p(f,v,y,S){if("object"==typeof y&&null!==y&&y.type===F&&null===y.key&&(y=y.props.children),"object"==typeof y&&null!==y){switch(y.$$typeof){case B:e:{for(var M=y.key,A=v;null!==A;){if(A.key===M){if((M=y.type)===F){if(7===A.tag){i(f,A.sibling),(v=u(A,y.props.children)).return=f,f=v;break e}}else if(A.elementType===M||"object"==typeof M&&null!==M&&M.$$typeof===Y&&iB(M)===A.type){i(f,A.sibling),(v=u(A,y.props)).ref=ik(f,A,y),v.return=f,f=v;break e}i(f,A);break}r(f,A);A=A.sibling}y.type===F?((v=s8(y.props.children,f.mode,S,y.key)).return=f,f=v):((S=s9(y.type,y.key,y.props,null,f.mode,S)).ref=ik(f,v,y),S.return=f,f=S)}return h(f);case N:e:{for(A=y.key;null!==v;){if(v.key===A){if(4===v.tag&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){i(f,v.sibling),(v=u(v,y.children||[])).return=f,f=v;break e}else{i(f,v);break}}r(f,v);v=v.sibling}(v=lt(y,f.mode,S)).return=f,f=v}return h(f);case Y:return p(f,v,(A=y._init)(y._payload),S)}if(ep(y))return function(u,h,p,f){for(var v=null,y=null,x=h,S=h=0,M=null;null!==x&&S<p.length;S++){x.index>S?(M=x,x=null):M=x.sibling;var A=b(u,x,p[S],f);if(null===A){null===x&&(x=M);break}t&&x&&null===A.alternate&&r(u,x),h=c(A,h,S),null===y?v=A:y.sibling=A,y=A,x=M}if(S===p.length)return i(u,x),iw&&im(u,S),v;if(null===x){for(;S<p.length;S++)null!==(x=_(u,p[S],f))&&(h=c(x,h,S),null===y?v=x:y.sibling=x,y=x);return iw&&im(u,S),v}for(x=s(u,x);S<p.length;S++)null!==(M=w(x,u,S,p[S],f))&&(t&&null!==M.alternate&&x.delete(null===M.key?S:M.key),h=c(M,h,S),null===y?v=M:y.sibling=M,y=M);return t&&x.forEach(function(t){return r(u,t)}),iw&&im(u,S),v}(f,v,y,S);if(Z(y))return function(u,h,p,f){var v=Z(p);if("function"!=typeof v)throw Error(x(150));if(null==(p=v.call(p)))throw Error(x(151));for(var y=v=null,S=h,M=h=0,A=null,C=p.next();null!==S&&!C.done;M++,C=p.next()){S.index>M?(A=S,S=null):A=S.sibling;var T=b(u,S,C.value,f);if(null===T){null===S&&(S=A);break}t&&S&&null===T.alternate&&r(u,S),h=c(T,h,M),null===y?v=T:y.sibling=T,y=T,S=A}if(C.done)return i(u,S),iw&&im(u,M),v;if(null===S){for(;!C.done;M++,C=p.next())null!==(C=_(u,C.value,f))&&(h=c(C,h,M),null===y?v=C:y.sibling=C,y=C);return iw&&im(u,M),v}for(S=s(u,S);!C.done;M++,C=p.next())null!==(C=w(S,u,M,C.value,f))&&(t&&null!==C.alternate&&S.delete(null===C.key?M:C.key),h=c(C,h,M),null===y?v=C:y.sibling=C,y=C);return t&&S.forEach(function(t){return r(u,t)}),iw&&im(u,M),v}(f,v,y,S);iO(f,y)}return"string"==typeof y&&""!==y||"number"==typeof y?(y=""+y,null!==v&&6===v.tag?(i(f,v.sibling),(v=u(v,y)).return=f):(i(f,v),(v=le(y,f.mode,S)).return=f),h(f=v)):i(f,v)}}var iF=iN(!0),iz=iN(!1),iU=rZ(null),iH=null,iG=null,iV=null;function iW(){iV=iG=iH=null}function ij(t){var r=iU.current;rK(iU),t._currentValue=r}function iX(t,r,i){for(;null!==t;){var s=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,null!==s&&(s.childLanes|=r)):null!==s&&(s.childLanes&r)!==r&&(s.childLanes|=r),t===i)break;t=t.return}}function iY(t,r){iH=t,iV=iG=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!=(t.lanes&r)&&(om=!0),t.firstContext=null)}function i$(t){var r=t._currentValue;if(iV!==t){if(t={context:t,memoizedValue:r,next:null},null===iG){if(null===iH)throw Error(x(308));iG=t,iH.dependencies={lanes:0,firstContext:t}}else iG=iG.next=t}return r}var iJ=null;function iZ(t){null===iJ?iJ=[t]:iJ.push(t)}function iK(t,r,i,s){var u=r.interleaved;return null===u?(i.next=i,iZ(r)):(i.next=u.next,u.next=i),r.interleaved=i,iq(t,s)}function iq(t,r){t.lanes|=r;var i=t.alternate;for(null!==i&&(i.lanes|=r),i=t,t=t.return;null!==t;)t.childLanes|=r,null!==(i=t.alternate)&&(i.childLanes|=r),i=t,t=t.return;return 3===i.tag?i.stateNode:null}var iQ=!1;function i0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function i1(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function i2(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function i3(t,r,i){var s=t.updateQueue;if(null===s)return null;if(s=s.shared,0!=(2&sr)){var u=s.pending;return null===u?r.next=r:(r.next=u.next,u.next=r),s.pending=r,iq(t,i)}return null===(u=s.interleaved)?(r.next=r,iZ(s)):(r.next=u.next,u.next=r),s.interleaved=r,iq(t,i)}function i5(t,r,i){if(null!==(r=r.updateQueue)&&(r=r.shared,0!=(4194240&i))){var s=r.lanes;s&=t.pendingLanes,i|=s,r.lanes=i,ty(t,i)}}function i4(t,r){var i=t.updateQueue,s=t.alternate;if(null!==s&&i===(s=s.updateQueue)){var u=null,c=null;if(null!==(i=i.firstBaseUpdate)){do{var h={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===c?u=c=h:c=c.next=h,i=i.next}while(null!==i);null===c?u=c=r:c=c.next=r}else u=c=r;i={baseState:s.baseState,firstBaseUpdate:u,lastBaseUpdate:c,shared:s.shared,effects:s.effects},t.updateQueue=i;return}null===(t=i.lastBaseUpdate)?i.firstBaseUpdate=r:t.next=r,i.lastBaseUpdate=r}function i6(t,r,i,s){var u=t.updateQueue;iQ=!1;var c=u.firstBaseUpdate,h=u.lastBaseUpdate,p=u.shared.pending;if(null!==p){u.shared.pending=null;var f=p,v=f.next;f.next=null,null===h?c=v:h.next=v,h=f;var y=t.alternate;null!==y&&(p=(y=y.updateQueue).lastBaseUpdate)!==h&&(null===p?y.firstBaseUpdate=v:p.next=v,y.lastBaseUpdate=f)}if(null!==c){var x=u.baseState;for(h=0,y=v=f=null,p=c;;){var _=p.lane,b=p.eventTime;if((s&_)===_){null!==y&&(y=y.next={eventTime:b,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var w=t,S=p;switch(_=r,b=i,S.tag){case 1:if("function"==typeof(w=S.payload)){x=w.call(b,x,_);break e}x=w;break e;case 3:w.flags=-65537&w.flags|128;case 0:if(null==(_="function"==typeof(w=S.payload)?w.call(b,x,_):w))break e;x=q({},x,_);break e;case 2:iQ=!0}}null!==p.callback&&0!==p.lane&&(t.flags|=64,null===(_=u.effects)?u.effects=[p]:_.push(p))}else b={eventTime:b,lane:_,tag:p.tag,payload:p.payload,callback:p.callback,next:null},null===y?(v=y=b,f=x):y=y.next=b,h|=_;if(null===(p=p.next)){if(null===(p=u.shared.pending))break;else p=(_=p).next,_.next=null,u.lastBaseUpdate=_,u.shared.pending=null}}if(null===y&&(f=x),u.baseState=f,u.firstBaseUpdate=v,u.lastBaseUpdate=y,null!==(r=u.shared.interleaved)){u=r;do h|=u.lane,u=u.next;while(u!==r)}else null===c&&(u.shared.lanes=0);sh|=h,t.lanes=h,t.memoizedState=x}}function i9(t,r,i){if(t=r.effects,r.effects=null,null!==t)for(r=0;r<t.length;r++){var s=t[r],u=s.callback;if(null!==u){if(s.callback=null,s=i,"function"!=typeof u)throw Error(x(191,u));u.call(s)}}}var i8={},i7=rZ(i8),ae=rZ(i8),at=rZ(i8);function an(t){if(t===i8)throw Error(x(174));return t}function ar(t,r){switch(rq(at,r),rq(ae,t),rq(i7,i8),t=r.nodeType){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:e_(null,"");break;default:r=(t=8===t?r.parentNode:r).namespaceURI||null,r=e_(r,t=t.tagName)}rK(i7),rq(i7,r)}function ai(){rK(i7),rK(ae),rK(at)}function aa(t){an(at.current);var r=an(i7.current),i=e_(r,t.type);r!==i&&(rq(ae,t),rq(i7,i))}function ao(t){ae.current===t&&(rK(i7),rK(ae))}var as=rZ(0);function al(t){for(var r=t;null!==r;){if(13===r.tag){var i=r.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return r}else if(19===r.tag&&void 0!==r.memoizedProps.revealOrder){if(0!=(128&r.flags))return r}else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var au=[];function ac(){for(var t=0;t<au.length;t++)au[t]._workInProgressVersionPrimary=null;au.length=0}var ah=O.ReactCurrentDispatcher,ad=O.ReactCurrentBatchConfig,ap=0,af=null,ag=null,am=null,av=!1,ay=!1,ax=0,a_=0;function ab(){throw Error(x(321))}function aw(t,r){if(null===r)return!1;for(var i=0;i<r.length&&i<t.length;i++)if(!nj(t[i],r[i]))return!1;return!0}function aS(t,r,i,s,u,c){if(ap=c,af=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ah.current=null===t||null===t.memoizedState?a6:a9,t=i(s,u),ay){c=0;do{if(ay=!1,ax=0,25<=c)throw Error(x(301));c+=1,am=ag=null,r.updateQueue=null,ah.current=a8,t=i(s,u)}while(ay)}if(ah.current=a4,r=null!==ag&&null!==ag.next,ap=0,am=ag=af=null,av=!1,r)throw Error(x(300));return t}function aM(){var t=0!==ax;return ax=0,t}function aA(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===am?af.memoizedState=am=t:am=am.next=t,am}function aC(){if(null===ag){var t=af.alternate;t=null!==t?t.memoizedState:null}else t=ag.next;var r=null===am?af.memoizedState:am.next;if(null!==r)am=r,ag=t;else{if(null===t)throw Error(x(310));t={memoizedState:(ag=t).memoizedState,baseState:ag.baseState,baseQueue:ag.baseQueue,queue:ag.queue,next:null},null===am?af.memoizedState=am=t:am=am.next=t}return am}function aT(t,r){return"function"==typeof r?r(t):r}function aE(t){var r=aC(),i=r.queue;if(null===i)throw Error(x(311));i.lastRenderedReducer=t;var s=ag,u=s.baseQueue,c=i.pending;if(null!==c){if(null!==u){var h=u.next;u.next=c.next,c.next=h}s.baseQueue=u=c,i.pending=null}if(null!==u){c=u.next,s=s.baseState;var p=h=null,f=null,v=c;do{var y=v.lane;if((ap&y)===y)null!==f&&(f=f.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),s=v.hasEagerState?v.eagerState:t(s,v.action);else{var _={lane:y,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};null===f?(p=f=_,h=s):f=f.next=_,af.lanes|=y,sh|=y}v=v.next}while(null!==v&&v!==c);null===f?h=s:f.next=p,nj(s,r.memoizedState)||(om=!0),r.memoizedState=s,r.baseState=h,r.baseQueue=f,i.lastRenderedState=s}if(null!==(t=i.interleaved)){u=t;do c=u.lane,af.lanes|=c,sh|=c,u=u.next;while(u!==t)}else null===u&&(i.lanes=0);return[r.memoizedState,i.dispatch]}function aI(t){var r=aC(),i=r.queue;if(null===i)throw Error(x(311));i.lastRenderedReducer=t;var s=i.dispatch,u=i.pending,c=r.memoizedState;if(null!==u){i.pending=null;var h=u=u.next;do c=t(c,h.action),h=h.next;while(h!==u);nj(c,r.memoizedState)||(om=!0),r.memoizedState=c,null===r.baseQueue&&(r.baseState=c),i.lastRenderedState=c}return[c,s]}function aD(){}function aP(t,r){var i=af,s=aC(),u=r(),c=!nj(s.memoizedState,u);if(c&&(s.memoizedState=u,om=!0),s=s.queue,aV(ak.bind(null,i,s,t),[t]),s.getSnapshot!==r||c||null!==am&&1&am.memoizedState.tag){if(i.flags|=2048,aF(9,aL.bind(null,i,s,u,r),void 0,null),null===si)throw Error(x(349));0!=(30&ap)||aR(i,r,u)}return u}function aR(t,r,i){t.flags|=16384,t={getSnapshot:r,value:i},null===(r=af.updateQueue)?(r={lastEffect:null,stores:null},af.updateQueue=r,r.stores=[t]):null===(i=r.stores)?r.stores=[t]:i.push(t)}function aL(t,r,i,s){r.value=i,r.getSnapshot=s,aO(r)&&aB(t)}function ak(t,r,i){return i(function(){aO(r)&&aB(t)})}function aO(t){var r=t.getSnapshot;t=t.value;try{var i=r();return!nj(t,i)}catch(t){return!0}}function aB(t){var r=iq(t,1);null!==r&&sP(r,t,1,-1)}function aN(t){var r=aA();return"function"==typeof t&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:aT,lastRenderedState:t},r.queue=t,t=t.dispatch=a1.bind(null,af,t),[r.memoizedState,t]}function aF(t,r,i,s){return t={tag:t,create:r,destroy:i,deps:s,next:null},null===(r=af.updateQueue)?(r={lastEffect:null,stores:null},af.updateQueue=r,r.lastEffect=t.next=t):null===(i=r.lastEffect)?r.lastEffect=t.next=t:(s=i.next,i.next=t,t.next=s,r.lastEffect=t),t}function az(){return aC().memoizedState}function aU(t,r,i,s){var u=aA();af.flags|=t,u.memoizedState=aF(1|r,i,void 0,void 0===s?null:s)}function aH(t,r,i,s){var u=aC();s=void 0===s?null:s;var c=void 0;if(null!==ag){var h=ag.memoizedState;if(c=h.destroy,null!==s&&aw(s,h.deps)){u.memoizedState=aF(r,i,c,s);return}}af.flags|=t,u.memoizedState=aF(1|r,i,c,s)}function aG(t,r){return aU(8390656,8,t,r)}function aV(t,r){return aH(2048,8,t,r)}function aW(t,r){return aH(4,2,t,r)}function aj(t,r){return aH(4,4,t,r)}function aX(t,r){return"function"==typeof r?(r(t=t()),function(){r(null)}):null!=r?(t=t(),r.current=t,function(){r.current=null}):void 0}function aY(t,r,i){return i=null!=i?i.concat([t]):null,aH(4,4,aX.bind(null,r,t),i)}function a$(){}function aJ(t,r){var i=aC();r=void 0===r?null:r;var s=i.memoizedState;return null!==s&&null!==r&&aw(r,s[1])?s[0]:(i.memoizedState=[t,r],t)}function aZ(t,r){var i=aC();r=void 0===r?null:r;var s=i.memoizedState;return null!==s&&null!==r&&aw(r,s[1])?s[0]:(t=t(),i.memoizedState=[t,r],t)}function aK(t,r,i){return 0==(21&ap)?(t.baseState&&(t.baseState=!1,om=!0),t.memoizedState=i):(nj(i,r)||(i=tg(),af.lanes|=i,sh|=i,t.baseState=!0),r)}function aq(t,r){var i=tx;tx=0!==i&&4>i?i:4,t(!0);var s=ad.transition;ad.transition={};try{t(!1),r()}finally{tx=i,ad.transition=s}}function aQ(){return aC().memoizedState}function a0(t,r,i){var s=sD(t);i={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null},a2(t)?a3(r,i):null!==(i=iK(t,r,i,s))&&(sP(i,t,s,sI()),a5(i,r,s))}function a1(t,r,i){var s=sD(t),u={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null};if(a2(t))a3(r,u);else{var c=t.alternate;if(0===t.lanes&&(null===c||0===c.lanes)&&null!==(c=r.lastRenderedReducer))try{var h=r.lastRenderedState,p=c(h,i);if(u.hasEagerState=!0,u.eagerState=p,nj(p,h)){var f=r.interleaved;null===f?(u.next=u,iZ(r)):(u.next=f.next,f.next=u),r.interleaved=u;return}}catch(t){}finally{}null!==(i=iK(t,r,u,s))&&(sP(i,t,s,u=sI()),a5(i,r,s))}}function a2(t){var r=t.alternate;return t===af||null!==r&&r===af}function a3(t,r){ay=av=!0;var i=t.pending;null===i?r.next=r:(r.next=i.next,i.next=r),t.pending=r}function a5(t,r,i){if(0!=(4194240&i)){var s=r.lanes;s&=t.pendingLanes,i|=s,r.lanes=i,ty(t,i)}}var a4={readContext:i$,useCallback:ab,useContext:ab,useEffect:ab,useImperativeHandle:ab,useInsertionEffect:ab,useLayoutEffect:ab,useMemo:ab,useReducer:ab,useRef:ab,useState:ab,useDebugValue:ab,useDeferredValue:ab,useTransition:ab,useMutableSource:ab,useSyncExternalStore:ab,useId:ab,unstable_isNewReconciler:!1},a6={readContext:i$,useCallback:function(t,r){return aA().memoizedState=[t,void 0===r?null:r],t},useContext:i$,useEffect:aG,useImperativeHandle:function(t,r,i){return i=null!=i?i.concat([t]):null,aU(4194308,4,aX.bind(null,r,t),i)},useLayoutEffect:function(t,r){return aU(4194308,4,t,r)},useInsertionEffect:function(t,r){return aU(4,2,t,r)},useMemo:function(t,r){var i=aA();return r=void 0===r?null:r,t=t(),i.memoizedState=[t,r],t},useReducer:function(t,r,i){var s=aA();return r=void 0!==i?i(r):r,s.memoizedState=s.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},s.queue=t,t=t.dispatch=a0.bind(null,af,t),[s.memoizedState,t]},useRef:function(t){var r=aA();return t={current:t},r.memoizedState=t},useState:aN,useDebugValue:a$,useDeferredValue:function(t){return aA().memoizedState=t},useTransition:function(){var t=aN(!1),r=t[0];return t=aq.bind(null,t[1]),aA().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,i){var s=af,u=aA();if(iw){if(void 0===i)throw Error(x(407));i=i()}else{if(i=r(),null===si)throw Error(x(349));0!=(30&ap)||aR(s,r,i)}u.memoizedState=i;var c={value:i,getSnapshot:r};return u.queue=c,aG(ak.bind(null,s,c,t),[t]),s.flags|=2048,aF(9,aL.bind(null,s,c,i,r),void 0,null),i},useId:function(){var t=aA(),r=si.identifierPrefix;if(iw){var i=ig,s=ip;r=":"+r+"R"+(i=(s&~(1<<32-ts(s)-1)).toString(32)+i),0<(i=ax++)&&(r+="H"+i.toString(32)),r+=":"}else r=":"+r+"r"+(i=a_++).toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},a9={readContext:i$,useCallback:aJ,useContext:i$,useEffect:aV,useImperativeHandle:aY,useInsertionEffect:aW,useLayoutEffect:aj,useMemo:aZ,useReducer:aE,useRef:az,useState:function(){return aE(aT)},useDebugValue:a$,useDeferredValue:function(t){return aK(aC(),ag.memoizedState,t)},useTransition:function(){return[aE(aT)[0],aC().memoizedState]},useMutableSource:aD,useSyncExternalStore:aP,useId:aQ,unstable_isNewReconciler:!1},a8={readContext:i$,useCallback:aJ,useContext:i$,useEffect:aV,useImperativeHandle:aY,useInsertionEffect:aW,useLayoutEffect:aj,useMemo:aZ,useReducer:aI,useRef:az,useState:function(){return aI(aT)},useDebugValue:a$,useDeferredValue:function(t){var r=aC();return null===ag?r.memoizedState=t:aK(r,ag.memoizedState,t)},useTransition:function(){return[aI(aT)[0],aC().memoizedState]},useMutableSource:aD,useSyncExternalStore:aP,useId:aQ,unstable_isNewReconciler:!1};function a7(t,r){if(t&&t.defaultProps)for(var i in r=q({},r),t=t.defaultProps)void 0===r[i]&&(r[i]=t[i]);return r}function oe(t,r,i,s){i=null==(i=i(s,r=t.memoizedState))?r:q({},r,i),t.memoizedState=i,0===t.lanes&&(t.updateQueue.baseState=i)}var ot={isMounted:function(t){return!!(t=t._reactInternals)&&e0(t)===t},enqueueSetState:function(t,r,i){t=t._reactInternals;var s=sI(),u=sD(t),c=i2(s,u);c.payload=r,null!=i&&(c.callback=i),null!==(r=i3(t,c,u))&&(sP(r,t,u,s),i5(r,t,u))},enqueueReplaceState:function(t,r,i){t=t._reactInternals;var s=sI(),u=sD(t),c=i2(s,u);c.tag=1,c.payload=r,null!=i&&(c.callback=i),null!==(r=i3(t,c,u))&&(sP(r,t,u,s),i5(r,t,u))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var i=sI(),s=sD(t),u=i2(i,s);u.tag=2,null!=r&&(u.callback=r),null!==(r=i3(t,u,s))&&(sP(r,t,s,i),i5(r,t,s))}};function on(t,r,i,s,u,c,h){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(s,c,h):!r.prototype||!r.prototype.isPureReactComponent||!nX(i,s)||!nX(u,c)}function or(t,r,i){var s=!1,u=rQ,c=r.contextType;return"object"==typeof c&&null!==c?c=i$(c):(u=r5(r)?r2:r0.current,c=(s=null!=(s=r.contextTypes))?r3(t,u):rQ),r=new r(i,c),t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,r.updater=ot,t.stateNode=r,r._reactInternals=t,s&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=u,t.__reactInternalMemoizedMaskedChildContext=c),r}function oi(t,r,i,s){t=r.state,"function"==typeof r.componentWillReceiveProps&&r.componentWillReceiveProps(i,s),"function"==typeof r.UNSAFE_componentWillReceiveProps&&r.UNSAFE_componentWillReceiveProps(i,s),r.state!==t&&ot.enqueueReplaceState(r,r.state,null)}function oa(t,r,i,s){var u=t.stateNode;u.props=i,u.state=t.memoizedState,u.refs={},i0(t);var c=r.contextType;"object"==typeof c&&null!==c?u.context=i$(c):(c=r5(r)?r2:r0.current,u.context=r3(t,c)),u.state=t.memoizedState,"function"==typeof(c=r.getDerivedStateFromProps)&&(oe(t,r,c,i),u.state=t.memoizedState),"function"==typeof r.getDerivedStateFromProps||"function"==typeof u.getSnapshotBeforeUpdate||"function"!=typeof u.UNSAFE_componentWillMount&&"function"!=typeof u.componentWillMount||(r=u.state,"function"==typeof u.componentWillMount&&u.componentWillMount(),"function"==typeof u.UNSAFE_componentWillMount&&u.UNSAFE_componentWillMount(),r!==u.state&&ot.enqueueReplaceState(u,u.state,null),i6(t,i,u,s),u.state=t.memoizedState),"function"==typeof u.componentDidMount&&(t.flags|=4194308)}function oo(t,r){try{var i="",s=r;do i+=function(t){switch(t.tag){case 5:return Q(t.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return t=et(t.type,!1);case 11:return t=et(t.type.render,!1);case 1:return t=et(t.type,!0);default:return""}}(s),s=s.return;while(s);var u=i}catch(t){u="\nError generating stack: "+t.message+"\n"+t.stack}return{value:t,source:r,stack:u,digest:null}}function os(t,r,i){return{value:t,source:null,stack:null!=i?i:null,digest:null!=r?r:null}}function ol(t,r){}var ou="function"==typeof WeakMap?WeakMap:Map;function oc(t,r,i){(i=i2(-1,i)).tag=3,i.payload={element:null};var s=r.value;return i.callback=function(){sx||(sx=!0,s_=s),ol(t,r)},i}function oh(t,r,i){(i=i2(-1,i)).tag=3;var s=t.type.getDerivedStateFromError;if("function"==typeof s){var u=r.value;i.payload=function(){return s(u)},i.callback=function(){ol(t,r)}}var c=t.stateNode;return null!==c&&"function"==typeof c.componentDidCatch&&(i.callback=function(){ol(t,r),"function"!=typeof s&&(null===sb?sb=new Set([this]):sb.add(this));var i=r.stack;this.componentDidCatch(r.value,{componentStack:null!==i?i:""})}),i}function od(t,r,i){var s=t.pingCache;if(null===s){s=t.pingCache=new ou;var u=new Set;s.set(r,u)}else void 0===(u=s.get(r))&&(u=new Set,s.set(r,u));u.has(i)||(u.add(i),t=sq.bind(null,t,r,i),r.then(t,t))}function op(t){do{var r;if((r=13===t.tag)&&(r=null===(r=t.memoizedState)||null!==r.dehydrated),r)return t;t=t.return}while(null!==t);return null}function of(t,r,i,s,u){return 0==(1&t.mode)?(t===r?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,1===i.tag&&(null===i.alternate?i.tag=17:((r=i2(-1,1)).tag=2,i3(i,r,1))),i.lanes|=1),t):(t.flags|=65536,t.lanes=u,t)}var og=O.ReactCurrentOwner,om=!1;function ov(t,r,i,s){r.child=null===t?iz(r,null,i,s):iF(r,t.child,i,s)}function oy(t,r,i,s,u){i=i.render;var c=r.ref;return(iY(r,u),s=aS(t,r,i,s,c,u),i=aM(),null===t||om)?(iw&&i&&iy(r),r.flags|=1,ov(t,r,s,u),r.child):(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~u,oN(t,r,u))}function ox(t,r,i,s,u){if(null===t){var c=i.type;return"function"!=typeof c||s4(c)||void 0!==c.defaultProps||null!==i.compare||void 0!==i.defaultProps?((t=s9(i.type,null,s,r,r.mode,u)).ref=r.ref,t.return=r,r.child=t):(r.tag=15,r.type=c,o_(t,r,c,s,u))}if(c=t.child,0==(t.lanes&u)){var h=c.memoizedProps;if((i=null!==(i=i.compare)?i:nX)(h,s)&&t.ref===r.ref)return oN(t,r,u)}return r.flags|=1,(t=s6(c,s)).ref=r.ref,t.return=r,r.child=t}function o_(t,r,i,s,u){if(null!==t){var c=t.memoizedProps;if(nX(c,s)&&t.ref===r.ref){if(om=!1,r.pendingProps=s=c,0==(t.lanes&u))return r.lanes=t.lanes,oN(t,r,u);else 0!=(131072&t.flags)&&(om=!0)}}return oS(t,r,i,s,u)}function ob(t,r,i){var s=r.pendingProps,u=s.children,c=null!==t?t.memoizedState:null;if("hidden"===s.mode){if(0==(1&r.mode))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},rq(sl,ss),ss|=i;else{if(0==(0x40000000&i))return t=null!==c?c.baseLanes|i:i,r.lanes=r.childLanes=0x40000000,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,rq(sl,ss),ss|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==c?c.baseLanes:i,rq(sl,ss),ss|=s}}else null!==c?(s=c.baseLanes|i,r.memoizedState=null):s=i,rq(sl,ss),ss|=s;return ov(t,r,u,i),r.child}function ow(t,r){var i=r.ref;(null===t&&null!==i||null!==t&&t.ref!==i)&&(r.flags|=512,r.flags|=2097152)}function oS(t,r,i,s,u){var c=r5(i)?r2:r0.current;return(c=r3(r,c),iY(r,u),i=aS(t,r,i,s,c,u),s=aM(),null===t||om)?(iw&&s&&iy(r),r.flags|=1,ov(t,r,i,u),r.child):(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~u,oN(t,r,u))}function oM(t,r,i,s,u){if(r5(i)){var c=!0;r8(r)}else c=!1;if(iY(r,u),null===r.stateNode)oB(t,r),or(r,i,s),oa(r,i,s,u),s=!0;else if(null===t){var h=r.stateNode,p=r.memoizedProps;h.props=p;var f=h.context,v=i.contextType;v="object"==typeof v&&null!==v?i$(v):r3(r,v=r5(i)?r2:r0.current);var y=i.getDerivedStateFromProps,x="function"==typeof y||"function"==typeof h.getSnapshotBeforeUpdate;x||"function"!=typeof h.UNSAFE_componentWillReceiveProps&&"function"!=typeof h.componentWillReceiveProps||(p!==s||f!==v)&&oi(r,h,s,v),iQ=!1;var _=r.memoizedState;h.state=_,i6(r,s,h,u),f=r.memoizedState,p!==s||_!==f||r1.current||iQ?("function"==typeof y&&(oe(r,i,y,s),f=r.memoizedState),(p=iQ||on(r,i,p,s,_,f,v))?(x||"function"!=typeof h.UNSAFE_componentWillMount&&"function"!=typeof h.componentWillMount||("function"==typeof h.componentWillMount&&h.componentWillMount(),"function"==typeof h.UNSAFE_componentWillMount&&h.UNSAFE_componentWillMount()),"function"==typeof h.componentDidMount&&(r.flags|=4194308)):("function"==typeof h.componentDidMount&&(r.flags|=4194308),r.memoizedProps=s,r.memoizedState=f),h.props=s,h.state=f,h.context=v,s=p):("function"==typeof h.componentDidMount&&(r.flags|=4194308),s=!1)}else{h=r.stateNode,i1(t,r),p=r.memoizedProps,v=r.type===r.elementType?p:a7(r.type,p),h.props=v,x=r.pendingProps,_=h.context,f="object"==typeof(f=i.contextType)&&null!==f?i$(f):r3(r,f=r5(i)?r2:r0.current);var b=i.getDerivedStateFromProps;(y="function"==typeof b||"function"==typeof h.getSnapshotBeforeUpdate)||"function"!=typeof h.UNSAFE_componentWillReceiveProps&&"function"!=typeof h.componentWillReceiveProps||(p!==x||_!==f)&&oi(r,h,s,f),iQ=!1,_=r.memoizedState,h.state=_,i6(r,s,h,u);var w=r.memoizedState;p!==x||_!==w||r1.current||iQ?("function"==typeof b&&(oe(r,i,b,s),w=r.memoizedState),(v=iQ||on(r,i,v,s,_,w,f)||!1)?(y||"function"!=typeof h.UNSAFE_componentWillUpdate&&"function"!=typeof h.componentWillUpdate||("function"==typeof h.componentWillUpdate&&h.componentWillUpdate(s,w,f),"function"==typeof h.UNSAFE_componentWillUpdate&&h.UNSAFE_componentWillUpdate(s,w,f)),"function"==typeof h.componentDidUpdate&&(r.flags|=4),"function"==typeof h.getSnapshotBeforeUpdate&&(r.flags|=1024)):("function"!=typeof h.componentDidUpdate||p===t.memoizedProps&&_===t.memoizedState||(r.flags|=4),"function"!=typeof h.getSnapshotBeforeUpdate||p===t.memoizedProps&&_===t.memoizedState||(r.flags|=1024),r.memoizedProps=s,r.memoizedState=w),h.props=s,h.state=w,h.context=f,s=v):("function"!=typeof h.componentDidUpdate||p===t.memoizedProps&&_===t.memoizedState||(r.flags|=4),"function"!=typeof h.getSnapshotBeforeUpdate||p===t.memoizedProps&&_===t.memoizedState||(r.flags|=1024),s=!1)}return oA(t,r,i,s,c,u)}function oA(t,r,i,s,u,c){ow(t,r);var h=0!=(128&r.flags);if(!s&&!h)return u&&r7(r,i,!1),oN(t,r,c);s=r.stateNode,og.current=r;var p=h&&"function"!=typeof i.getDerivedStateFromError?null:s.render();return r.flags|=1,null!==t&&h?(r.child=iF(r,t.child,null,c),r.child=iF(r,null,p,c)):ov(t,r,p,c),r.memoizedState=s.state,u&&r7(r,i,!0),r.child}function oC(t){var r=t.stateNode;r.pendingContext?r6(t,r.pendingContext,r.pendingContext!==r.context):r.context&&r6(t,r.context,!1),ar(t,r.containerInfo)}function oT(t,r,i,s,u){return iP(),iR(u),r.flags|=256,ov(t,r,i,s),r.child}var oE={dehydrated:null,treeContext:null,retryLane:0};function oI(t){return{baseLanes:t,cachePool:null,transitions:null}}function oD(t,r,i){var s,u=r.pendingProps,c=as.current,h=!1,p=0!=(128&r.flags);if((s=p)||(s=(null===t||null!==t.memoizedState)&&0!=(2&c)),s?(h=!0,r.flags&=-129):(null===t||null!==t.memoizedState)&&(c|=1),rq(as,1&c),null===t)return(iT(r),null!==(t=r.memoizedState)&&null!==(t=t.dehydrated))?(0==(1&r.mode)?r.lanes=1:"$!"===t.data?r.lanes=8:r.lanes=0x40000000,null):(p=u.children,t=u.fallback,h?(u=r.mode,h=r.child,p={mode:"hidden",children:p},0==(1&u)&&null!==h?(h.childLanes=0,h.pendingProps=p):h=s7(p,u,0,null),t=s8(t,u,i,null),h.return=r,t.return=r,h.sibling=t,r.child=h,r.child.memoizedState=oI(i),r.memoizedState=oE,t):oP(r,p));if(null!==(c=t.memoizedState)&&null!==(s=c.dehydrated))return function(t,r,i,s,u,c,h){if(i)return 256&r.flags?(r.flags&=-257,oR(t,r,h,s=os(Error(x(422))))):null!==r.memoizedState?(r.child=t.child,r.flags|=128,null):(c=s.fallback,u=r.mode,s=s7({mode:"visible",children:s.children},u,0,null),c=s8(c,u,h,null),c.flags|=2,s.return=r,c.return=r,s.sibling=c,r.child=s,0!=(1&r.mode)&&iF(r,t.child,null,h),r.child.memoizedState=oI(h),r.memoizedState=oE,c);if(0==(1&r.mode))return oR(t,r,h,null);if("$!"===u.data){if(s=u.nextSibling&&u.nextSibling.dataset)var p=s.dgst;return s=p,oR(t,r,h,s=os(c=Error(x(419)),s,void 0))}if(p=0!=(h&t.childLanes),om||p){if(null!==(s=si)){switch(h&-h){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:u=32;break;case 0x20000000:u=0x10000000;break;default:u=0}0!==(u=0!=(u&(s.suspendedLanes|h))?0:u)&&u!==c.retryLane&&(c.retryLane=u,iq(t,u),sP(s,t,u,-1))}return sW(),oR(t,r,h,s=os(Error(x(421))))}return"$?"===u.data?(r.flags|=128,r.child=t.child,r=s0.bind(null,t),u._reactRetry=r,null):(t=c.treeContext,ib=rO(u.nextSibling),i_=r,iw=!0,iS=null,null!==t&&(ic[ih++]=ip,ic[ih++]=ig,ic[ih++]=id,ip=t.id,ig=t.overflow,id=r),r=oP(r,s.children),r.flags|=4096,r)}(t,r,p,u,s,c,i);if(h){h=u.fallback,p=r.mode,s=(c=t.child).sibling;var f={mode:"hidden",children:u.children};return 0==(1&p)&&r.child!==c?((u=r.child).childLanes=0,u.pendingProps=f,r.deletions=null):(u=s6(c,f)).subtreeFlags=0xe00000&c.subtreeFlags,null!==s?h=s6(s,h):(h=s8(h,p,i,null),h.flags|=2),h.return=r,u.return=r,u.sibling=h,r.child=u,u=h,h=r.child,p=null===(p=t.child.memoizedState)?oI(i):{baseLanes:p.baseLanes|i,cachePool:null,transitions:p.transitions},h.memoizedState=p,h.childLanes=t.childLanes&~i,r.memoizedState=oE,u}return t=(h=t.child).sibling,u=s6(h,{mode:"visible",children:u.children}),0==(1&r.mode)&&(u.lanes=i),u.return=r,u.sibling=null,null!==t&&(null===(i=r.deletions)?(r.deletions=[t],r.flags|=16):i.push(t)),r.child=u,r.memoizedState=null,u}function oP(t,r){return(r=s7({mode:"visible",children:r},t.mode,0,null)).return=t,t.child=r}function oR(t,r,i,s){return null!==s&&iR(s),iF(r,t.child,null,i),t=oP(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function oL(t,r,i){t.lanes|=r;var s=t.alternate;null!==s&&(s.lanes|=r),iX(t.return,r,i)}function ok(t,r,i,s,u){var c=t.memoizedState;null===c?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:u}:(c.isBackwards=r,c.rendering=null,c.renderingStartTime=0,c.last=s,c.tail=i,c.tailMode=u)}function oO(t,r,i){var s=r.pendingProps,u=s.revealOrder,c=s.tail;if(ov(t,r,s.children,i),0!=(2&(s=as.current)))s=1&s|2,r.flags|=128;else{if(null!==t&&0!=(128&t.flags))e:for(t=r.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&oL(t,i,r);else if(19===t.tag)oL(t,i,r);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===r)break;for(;null===t.sibling;){if(null===t.return||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(rq(as,s),0==(1&r.mode))r.memoizedState=null;else switch(u){case"forwards":for(u=null,i=r.child;null!==i;)null!==(t=i.alternate)&&null===al(t)&&(u=i),i=i.sibling;null===(i=u)?(u=r.child,r.child=null):(u=i.sibling,i.sibling=null),ok(r,!1,u,i,c);break;case"backwards":for(i=null,u=r.child,r.child=null;null!==u;){if(null!==(t=u.alternate)&&null===al(t)){r.child=u;break}t=u.sibling,u.sibling=i,i=u,u=t}ok(r,!0,i,null,c);break;case"together":ok(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function oB(t,r){0==(1&r.mode)&&null!==t&&(t.alternate=null,r.alternate=null,r.flags|=2)}function oN(t,r,i){if(null!==t&&(r.dependencies=t.dependencies),sh|=r.lanes,0==(i&r.childLanes))return null;if(null!==t&&r.child!==t.child)throw Error(x(153));if(null!==r.child){for(i=s6(t=r.child,t.pendingProps),r.child=i,i.return=r;null!==t.sibling;)t=t.sibling,(i=i.sibling=s6(t,t.pendingProps)).return=r;i.sibling=null}return r.child}function oF(t,r){if(!iw)switch(t.tailMode){case"hidden":r=t.tail;for(var i=null;null!==r;)null!==r.alternate&&(i=r),r=r.sibling;null===i?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var s=null;null!==i;)null!==i.alternate&&(s=i),i=i.sibling;null===s?r||null===t.tail?t.tail=null:t.tail.sibling=null:s.sibling=null}}function oz(t){var r=null!==t.alternate&&t.alternate.child===t.child,i=0,s=0;if(r)for(var u=t.child;null!==u;)i|=u.lanes|u.childLanes,s|=0xe00000&u.subtreeFlags,s|=0xe00000&u.flags,u.return=t,u=u.sibling;else for(u=t.child;null!==u;)i|=u.lanes|u.childLanes,s|=u.subtreeFlags,s|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=s,t.childLanes=i,r}u=function(t,r){for(var i=r.child;null!==i;){if(5===i.tag||6===i.tag)t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===r)break;for(;null===i.sibling;){if(null===i.return||i.return===r)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},c=function(){},h=function(t,r,i,s){var u=t.memoizedProps;if(u!==s){t=r.stateNode,an(i7.current);var c,h=null;switch(i){case"input":u=es(t,u),s=es(t,s),h=[];break;case"select":u=q({},u,{value:void 0}),s=q({},s,{value:void 0}),h=[];break;case"textarea":u=eg(t,u),s=eg(t,s),h=[];break;default:"function"!=typeof u.onClick&&"function"==typeof s.onClick&&(t.onclick=rA)}for(v in eD(i,s),i=null,u)if(!s.hasOwnProperty(v)&&u.hasOwnProperty(v)&&null!=u[v]){if("style"===v){var p=u[v];for(c in p)p.hasOwnProperty(c)&&(i||(i={}),i[c]="")}else"dangerouslySetInnerHTML"!==v&&"children"!==v&&"suppressContentEditableWarning"!==v&&"suppressHydrationWarning"!==v&&"autoFocus"!==v&&(b.hasOwnProperty(v)?h||(h=[]):(h=h||[]).push(v,null))}for(v in s){var f=s[v];if(p=null!=u?u[v]:void 0,s.hasOwnProperty(v)&&f!==p&&(null!=f||null!=p)){if("style"===v){if(p){for(c in p)!p.hasOwnProperty(c)||f&&f.hasOwnProperty(c)||(i||(i={}),i[c]="");for(c in f)f.hasOwnProperty(c)&&p[c]!==f[c]&&(i||(i={}),i[c]=f[c])}else i||(h||(h=[]),h.push(v,i)),i=f}else"dangerouslySetInnerHTML"===v?(f=f?f.__html:void 0,p=p?p.__html:void 0,null!=f&&p!==f&&(h=h||[]).push(v,f)):"children"===v?"string"!=typeof f&&"number"!=typeof f||(h=h||[]).push(v,""+f):"suppressContentEditableWarning"!==v&&"suppressHydrationWarning"!==v&&(b.hasOwnProperty(v)?(null!=f&&"onScroll"===v&&rh("scroll",t),h||p===f||(h=[])):(h=h||[]).push(v,f))}}i&&(h=h||[]).push("style",i);var v=h;(r.updateQueue=v)&&(r.flags|=4)}},p=function(t,r,i,s){i!==s&&(r.flags|=4)};var oU=!1,oH=!1,oG="function"==typeof WeakSet?WeakSet:Set,oV=null;function oW(t,r){var i=t.ref;if(null!==i){if("function"==typeof i)try{i(null)}catch(i){sK(t,r,i)}else i.current=null}}function oj(t,r,i){try{i()}catch(i){sK(t,r,i)}}var oX=!1;function oY(t,r,i){var s=r.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var u=s=s.next;do{if((u.tag&t)===t){var c=u.destroy;u.destroy=void 0,void 0!==c&&oj(r,i,c)}u=u.next}while(u!==s)}}function o$(t,r){if(null!==(r=null!==(r=r.updateQueue)?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var s=i.create;i.destroy=s()}i=i.next}while(i!==r)}}function oJ(t){var r=t.ref;if(null!==r){var i=t.stateNode;t.tag;t=i;"function"==typeof r?r(t):r.current=t}}function oZ(t){return 5===t.tag||3===t.tag||4===t.tag}function oK(t){e:for(;;){for(;null===t.sibling;){if(null===t.return||oZ(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue e;if(null===t.child||4===t.tag)continue e;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}var oq=null,oQ=!1;function o0(t,r,i){for(i=i.child;null!==i;)o1(t,r,i),i=i.sibling}function o1(t,r,i){if(to&&"function"==typeof to.onCommitFiberUnmount)try{to.onCommitFiberUnmount(ta,i)}catch(t){}switch(i.tag){case 5:oH||oW(i,r);case 6:var s=oq,u=oQ;oq=null,o0(t,r,i),oq=s,oQ=u,null!==oq&&(oQ?(t=oq,i=i.stateNode,8===t.nodeType?t.parentNode.removeChild(i):t.removeChild(i)):oq.removeChild(i.stateNode));break;case 18:null!==oq&&(oQ?(t=oq,i=i.stateNode,8===t.nodeType?rk(t.parentNode,i):1===t.nodeType&&rk(t,i),tG(t)):rk(oq,i.stateNode));break;case 4:s=oq,u=oQ,oq=i.stateNode.containerInfo,oQ=!0,o0(t,r,i),oq=s,oQ=u;break;case 0:case 11:case 14:case 15:if(!oH&&null!==(s=i.updateQueue)&&null!==(s=s.lastEffect)){u=s=s.next;do{var c=u,h=c.destroy;c=c.tag,void 0!==h&&(0!=(2&c)?oj(i,r,h):0!=(4&c)&&oj(i,r,h)),u=u.next}while(u!==s)}o0(t,r,i);break;case 1:if(!oH&&(oW(i,r),"function"==typeof(s=i.stateNode).componentWillUnmount))try{s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(t){sK(i,r,t)}o0(t,r,i);break;case 21:default:o0(t,r,i);break;case 22:1&i.mode?(oH=(s=oH)||null!==i.memoizedState,o0(t,r,i),oH=s):o0(t,r,i)}}function o2(t){var r=t.updateQueue;if(null!==r){t.updateQueue=null;var i=t.stateNode;null===i&&(i=t.stateNode=new oG),r.forEach(function(r){var s=s1.bind(null,t,r);i.has(r)||(i.add(r),r.then(s,s))})}}function o3(t,r){var i=r.deletions;if(null!==i)for(var s=0;s<i.length;s++){var u=i[s];try{var c=r,h=c;e:for(;null!==h;){switch(h.tag){case 5:oq=h.stateNode,oQ=!1;break e;case 3:case 4:oq=h.stateNode.containerInfo,oQ=!0;break e}h=h.return}if(null===oq)throw Error(x(160));o1(t,c,u),oq=null,oQ=!1;var p=u.alternate;null!==p&&(p.return=null),u.return=null}catch(t){sK(u,r,t)}}if(12854&r.subtreeFlags)for(r=r.child;null!==r;)o5(r,t),r=r.sibling}function o5(t,r){var i=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(o3(r,t),o4(t),4&s){try{oY(3,t,t.return),o$(3,t)}catch(r){sK(t,t.return,r)}try{oY(5,t,t.return)}catch(r){sK(t,t.return,r)}}break;case 1:o3(r,t),o4(t),512&s&&null!==i&&oW(i,i.return);break;case 5:if(o3(r,t),o4(t),512&s&&null!==i&&oW(i,i.return),32&t.flags){var u=t.stateNode;try{eM(u,"")}catch(r){sK(t,t.return,r)}}if(4&s&&null!=(u=t.stateNode)){var c=t.memoizedProps,h=null!==i?i.memoizedProps:c,p=t.type,f=t.updateQueue;if(t.updateQueue=null,null!==f)try{"input"===p&&"radio"===c.type&&null!=c.name&&eu(u,c),eP(p,h);var v=eP(p,c);for(h=0;h<f.length;h+=2){var y=f[h],_=f[h+1];"style"===y?eE(u,_):"dangerouslySetInnerHTML"===y?eS(u,_):"children"===y?eM(u,_):k(u,y,_,v)}switch(p){case"input":ec(u,c);break;case"textarea":ev(u,c);break;case"select":var b=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!c.multiple;var w=c.value;null!=w?ef(u,!!c.multiple,w,!1):!!c.multiple!==b&&(null!=c.defaultValue?ef(u,!!c.multiple,c.defaultValue,!0):ef(u,!!c.multiple,c.multiple?[]:"",!1))}u[rz]=c}catch(r){sK(t,t.return,r)}}break;case 6:if(o3(r,t),o4(t),4&s){if(null===t.stateNode)throw Error(x(162));u=t.stateNode,c=t.memoizedProps;try{u.nodeValue=c}catch(r){sK(t,t.return,r)}}break;case 3:if(o3(r,t),o4(t),4&s&&null!==i&&i.memoizedState.isDehydrated)try{tG(r.containerInfo)}catch(r){sK(t,t.return,r)}break;case 4:default:o3(r,t),o4(t);break;case 13:o3(r,t),o4(t),8192&(u=t.child).flags&&(c=null!==u.memoizedState,u.stateNode.isHidden=c,c&&(null===u.alternate||null===u.alternate.memoizedState)&&(sm=e8())),4&s&&o2(t);break;case 22:if(y=null!==i&&null!==i.memoizedState,1&t.mode?(oH=(v=oH)||y,o3(r,t),oH=v):o3(r,t),o4(t),8192&s){if(v=null!==t.memoizedState,(t.stateNode.isHidden=v)&&!y&&0!=(1&t.mode))for(oV=t,y=t.child;null!==y;){for(_=oV=y;null!==oV;){switch(w=(b=oV).child,b.tag){case 0:case 11:case 14:case 15:oY(4,b,b.return);break;case 1:oW(b,b.return);var S=b.stateNode;if("function"==typeof S.componentWillUnmount){s=b,i=b.return;try{r=s,S.props=r.memoizedProps,S.state=r.memoizedState,S.componentWillUnmount()}catch(t){sK(s,i,t)}}break;case 5:oW(b,b.return);break;case 22:if(null!==b.memoizedState){o9(_);continue}}null!==w?(w.return=b,oV=w):o9(_)}y=y.sibling}e:for(y=null,_=t;;){if(5===_.tag){if(null===y){y=_;try{u=_.stateNode,v?(c=u.style,"function"==typeof c.setProperty?c.setProperty("display","none","important"):c.display="none"):(p=_.stateNode,h=null!=(f=_.memoizedProps.style)&&f.hasOwnProperty("display")?f.display:null,p.style.display=eT("display",h))}catch(r){sK(t,t.return,r)}}}else if(6===_.tag){if(null===y)try{_.stateNode.nodeValue=v?"":_.memoizedProps}catch(r){sK(t,t.return,r)}}else if((22!==_.tag&&23!==_.tag||null===_.memoizedState||_===t)&&null!==_.child){_.child.return=_,_=_.child;continue}if(_===t)break;for(;null===_.sibling;){if(null===_.return||_.return===t)break e;y===_&&(y=null),_=_.return}y===_&&(y=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:o3(r,t),o4(t),4&s&&o2(t);case 21:}}function o4(t){var r=t.flags;if(2&r){try{e:{for(var i=t.return;null!==i;){if(oZ(i)){var s=i;break e}i=i.return}throw Error(x(160))}switch(s.tag){case 5:var u=s.stateNode;32&s.flags&&(eM(u,""),s.flags&=-33);var c=oK(t);!function t(r,i,s){var u=r.tag;if(5===u||6===u)r=r.stateNode,i?s.insertBefore(r,i):s.appendChild(r);else if(4!==u&&null!==(r=r.child))for(t(r,i,s),r=r.sibling;null!==r;)t(r,i,s),r=r.sibling}(t,c,u);break;case 3:case 4:var h=s.stateNode.containerInfo,p=oK(t);!function t(r,i,s){var u=r.tag;if(5===u||6===u)r=r.stateNode,i?8===s.nodeType?s.parentNode.insertBefore(r,i):s.insertBefore(r,i):(8===s.nodeType?(i=s.parentNode).insertBefore(r,s):(i=s).appendChild(r),null!=(s=s._reactRootContainer)||null!==i.onclick||(i.onclick=rA));else if(4!==u&&null!==(r=r.child))for(t(r,i,s),r=r.sibling;null!==r;)t(r,i,s),r=r.sibling}(t,p,h);break;default:throw Error(x(161))}}catch(r){sK(t,t.return,r)}t.flags&=-3}4096&r&&(t.flags&=-4097)}function o6(t){for(;null!==oV;){var r=oV;if(0!=(8772&r.flags)){var i=r.alternate;try{if(0!=(8772&r.flags))switch(r.tag){case 0:case 11:case 15:oH||o$(5,r);break;case 1:var s=r.stateNode;if(4&r.flags&&!oH){if(null===i)s.componentDidMount();else{var u=r.elementType===r.type?i.memoizedProps:a7(r.type,i.memoizedProps);s.componentDidUpdate(u,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}}var c=r.updateQueue;null!==c&&i9(r,c,s);break;case 3:var h=r.updateQueue;if(null!==h){if(i=null,null!==r.child)switch(r.child.tag){case 5:case 1:i=r.child.stateNode}i9(r,h,i)}break;case 5:var p=r.stateNode;if(null===i&&4&r.flags){i=p;var f=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&i.focus();break;case"img":f.src&&(i.src=f.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===r.memoizedState){var v=r.alternate;if(null!==v){var y=v.memoizedState;if(null!==y){var _=y.dehydrated;null!==_&&tG(_)}}}break;default:throw Error(x(163))}oH||512&r.flags&&oJ(r)}catch(t){sK(r,r.return,t)}}if(r===t){oV=null;break}if(null!==(i=r.sibling)){i.return=r.return,oV=i;break}oV=r.return}}function o9(t){for(;null!==oV;){var r=oV;if(r===t){oV=null;break}var i=r.sibling;if(null!==i){i.return=r.return,oV=i;break}oV=r.return}}function o8(t){for(;null!==oV;){var r=oV;try{switch(r.tag){case 0:case 11:case 15:var i=r.return;try{o$(4,r)}catch(t){sK(r,i,t)}break;case 1:var s=r.stateNode;if("function"==typeof s.componentDidMount){var u=r.return;try{s.componentDidMount()}catch(t){sK(r,u,t)}}var c=r.return;try{oJ(r)}catch(t){sK(r,c,t)}break;case 5:var h=r.return;try{oJ(r)}catch(t){sK(r,h,t)}}}catch(t){sK(r,r.return,t)}if(r===t){oV=null;break}var p=r.sibling;if(null!==p){p.return=r.return,oV=p;break}oV=r.return}}var o7=Math.ceil,se=O.ReactCurrentDispatcher,st=O.ReactCurrentOwner,sn=O.ReactCurrentBatchConfig,sr=0,si=null,sa=null,so=0,ss=0,sl=rZ(0),su=0,sc=null,sh=0,sd=0,sp=0,sf=null,sg=null,sm=0,sv=1/0,sy=null,sx=!1,s_=null,sb=null,sw=!1,sS=null,sM=0,sA=0,sC=null,sT=-1,sE=0;function sI(){return 0!=(6&sr)?e8():-1!==sT?sT:sT=e8()}function sD(t){return 0==(1&t.mode)?1:0!=(2&sr)&&0!==so?so&-so:null!==iL.transition?(0===sE&&(sE=tg()),sE):0!==(t=tx)?t:t=void 0===(t=window.event)?16:tZ(t.type)}function sP(t,r,i,s){if(50<sA)throw sA=0,sC=null,Error(x(185));tv(t,i,s),(0==(2&sr)||t!==si)&&(t===si&&(0==(2&sr)&&(sd|=i),4===su&&sB(t,so)),sR(t,s),1===i&&0===sr&&0==(1&r.mode)&&(sv=e8()+500,it&&ia()))}function sR(t,r){var i,s=t.callbackNode;!function(t,r){for(var i=t.suspendedLanes,s=t.pingedLanes,u=t.expirationTimes,c=t.pendingLanes;0<c;){var h=31-ts(c),p=1<<h,f=u[h];-1===f?(0==(p&i)||0!=(p&s))&&(u[h]=function(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;default:return -1}}(p,r)):f<=r&&(t.expiredLanes|=p),c&=~p}}(t,r);var u=tp(t,t===si?so:0);if(0===u)null!==s&&e4(s),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(null!=s&&e4(s),1===r){;0===t.tag?(i=sN.bind(null,t),it=!0,ii(i)):ii(sN.bind(null,t)),rR(function(){0==(6&sr)&&ia()}),s=null}else{switch(t_(u)){case 1:s=te;break;case 4:s=tt;break;case 16:default:s=tn;break;case 0x20000000:s=ti}s=function(t,r){return e5(t,r)}(s,sL.bind(null,t))}t.callbackPriority=r,t.callbackNode=s}}function sL(t,r){if(sT=-1,sE=0,0!=(6&sr))throw Error(x(327));var i=t.callbackNode;if(sJ()&&t.callbackNode!==i)return null;var s=tp(t,t===si?so:0);if(0===s)return null;if(0!=(30&s)||0!=(s&t.expiredLanes)||r)r=sj(t,s);else{r=s;var u=sr;sr|=2;var c=sV();for((si!==t||so!==r)&&(sy=null,sv=e8()+500,sH(t,r));;)try{(function(){for(;null!==sa&&!e6();)sX(sa)})();break}catch(r){sG(t,r)}iW(),se.current=c,sr=u,null!==sa?r=0:(si=null,so=0,r=su)}if(0!==r){if(2===r&&0!==(u=tf(t))&&(s=u,r=sk(t,u)),1===r)throw i=sc,sH(t,0),sB(t,s),sR(t,e8()),i;if(6===r)sB(t,s);else{if(u=t.current.alternate,0==(30&s)&&!function(t){for(var r=t;;){if(16384&r.flags){var i=r.updateQueue;if(null!==i&&null!==(i=i.stores))for(var s=0;s<i.length;s++){var u=i[s],c=u.getSnapshot;u=u.value;try{if(!nj(c(),u))return!1}catch(t){return!1}}}if(i=r.child,16384&r.subtreeFlags&&null!==i)i.return=r,r=i;else{if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}(u)&&(2===(r=sj(t,s))&&0!==(c=tf(t))&&(s=c,r=sk(t,c)),1===r))throw i=sc,sH(t,0),sB(t,s),sR(t,e8()),i;switch(t.finishedWork=u,t.finishedLanes=s,r){case 0:case 1:throw Error(x(345));case 2:case 5:s$(t,sg,sy);break;case 3:if(sB(t,s),(0x7c00000&s)===s&&10<(r=sm+500-e8())){if(0!==tp(t,0))break;if(((u=t.suspendedLanes)&s)!==s){sI(),t.pingedLanes|=t.suspendedLanes&u;break}t.timeoutHandle=rI(s$.bind(null,t,sg,sy),r);break}s$(t,sg,sy);break;case 4:if(sB(t,s),(4194240&s)===s)break;for(u=-1,r=t.eventTimes;0<s;){var h=31-ts(s);c=1<<h,(h=r[h])>u&&(u=h),s&=~c}if(s=u,10<(s=(120>(s=e8()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*o7(s/1960))-s)){t.timeoutHandle=rI(s$.bind(null,t,sg,sy),s);break}s$(t,sg,sy);break;default:throw Error(x(329))}}}return sR(t,e8()),t.callbackNode===i?sL.bind(null,t):null}function sk(t,r){var i=sf;return t.current.memoizedState.isDehydrated&&(sH(t,r).flags|=256),2!==(t=sj(t,r))&&(r=sg,sg=i,null!==r&&sO(r)),t}function sO(t){null===sg?sg=t:sg.push.apply(sg,t)}function sB(t,r){for(r&=~sp,r&=~sd,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var i=31-ts(r),s=1<<i;t[i]=-1,r&=~s}}function sN(t){if(0!=(6&sr))throw Error(x(327));sJ();var r=tp(t,0);if(0==(1&r))return sR(t,e8()),null;var i=sj(t,r);if(0!==t.tag&&2===i){var s=tf(t);0!==s&&(r=s,i=sk(t,s))}if(1===i)throw i=sc,sH(t,0),sB(t,r),sR(t,e8()),i;if(6===i)throw Error(x(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,s$(t,sg,sy),sR(t,e8()),null}function sF(t,r){var i=sr;sr|=1;try{return t(r)}finally{0===(sr=i)&&(sv=e8()+500,it&&ia())}}function sz(t){null!==sS&&0===sS.tag&&0==(6&sr)&&sJ();var r=sr;sr|=1;var i=sn.transition,s=tx;try{if(sn.transition=null,tx=1,t)return t()}finally{tx=s,sn.transition=i,0==(6&(sr=r))&&ia()}}function sU(){ss=sl.current,rK(sl)}function sH(t,r){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(-1!==i&&(t.timeoutHandle=-1,rD(i)),null!==sa)for(i=sa.return;null!==i;){var s=i;switch(ix(s),s.tag){case 1:null!=(s=s.type.childContextTypes)&&r4();break;case 3:ai(),rK(r1),rK(r0),ac();break;case 5:ao(s);break;case 4:ai();break;case 13:case 19:rK(as);break;case 10:ij(s.type._context);break;case 22:case 23:sU()}i=i.return}if(si=t,sa=t=s6(t.current,null),so=ss=r,su=0,sc=null,sp=sd=sh=0,sg=sf=null,null!==iJ){for(r=0;r<iJ.length;r++)if(null!==(s=(i=iJ[r]).interleaved)){i.interleaved=null;var u=s.next,c=i.pending;if(null!==c){var h=c.next;c.next=u,s.next=h}i.pending=s}iJ=null}return t}function sG(t,r){for(;;){var i=sa;try{if(iW(),ah.current=a4,av){for(var s=af.memoizedState;null!==s;){var u=s.queue;null!==u&&(u.pending=null),s=s.next}av=!1}if(ap=0,am=ag=af=null,ay=!1,ax=0,st.current=null,null===i||null===i.return){su=1,sc=r,sa=null;break}e:{var c=t,h=i.return,p=i,f=r;if(r=so,p.flags|=32768,null!==f&&"object"==typeof f&&"function"==typeof f.then){var v=f,y=p,_=y.tag;if(0==(1&y.mode)&&(0===_||11===_||15===_)){var b=y.alternate;b?(y.updateQueue=b.updateQueue,y.memoizedState=b.memoizedState,y.lanes=b.lanes):(y.updateQueue=null,y.memoizedState=null)}var w=op(h);if(null!==w){w.flags&=-257,of(w,h,p,c,r),1&w.mode&&od(c,v,r),r=w,f=v;var S=r.updateQueue;if(null===S){var M=new Set;M.add(f),r.updateQueue=M}else S.add(f);break e}if(0==(1&r)){od(c,v,r),sW();break e}f=Error(x(426))}else if(iw&&1&p.mode){var A=op(h);if(null!==A){0==(65536&A.flags)&&(A.flags|=256),of(A,h,p,c,r),iR(oo(f,p));break e}}c=f=oo(f,p),4!==su&&(su=2),null===sf?sf=[c]:sf.push(c),c=h;do{switch(c.tag){case 3:c.flags|=65536,r&=-r,c.lanes|=r;var C=oc(c,f,r);i4(c,C);break e;case 1:p=f;var T=c.type,I=c.stateNode;if(0==(128&c.flags)&&("function"==typeof T.getDerivedStateFromError||null!==I&&"function"==typeof I.componentDidCatch&&(null===sb||!sb.has(I)))){c.flags|=65536,r&=-r,c.lanes|=r;var D=oh(c,p,r);i4(c,D);break e}}c=c.return}while(null!==c)}sY(i)}catch(t){r=t,sa===i&&null!==i&&(sa=i=i.return);continue}break}}function sV(){var t=se.current;return se.current=a4,null===t?a4:t}function sW(){(0===su||3===su||2===su)&&(su=4),null===si||0==(0xfffffff&sh)&&0==(0xfffffff&sd)||sB(si,so)}function sj(t,r){var i=sr;sr|=2;var s=sV();for((si!==t||so!==r)&&(sy=null,sH(t,r));;)try{(function(){for(;null!==sa;)sX(sa)})();break}catch(r){sG(t,r)}if(iW(),sr=i,se.current=s,null!==sa)throw Error(x(261));return si=null,so=0,su}function sX(t){var r=f(t.alternate,t,ss);t.memoizedProps=t.pendingProps,null===r?sY(t):sa=r,st.current=null}function sY(t){var r=t;do{var i=r.alternate;if(t=r.return,0==(32768&r.flags)){if(null!==(i=function(t,r,i){var s=r.pendingProps;switch(ix(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oz(r),null;case 1:case 17:return r5(r.type)&&r4(),oz(r),null;case 3:return s=r.stateNode,ai(),rK(r1),rK(r0),ac(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(null===t||null===t.child)&&(iI(r)?r.flags|=4:null===t||t.memoizedState.isDehydrated&&0==(256&r.flags)||(r.flags|=1024,null!==iS&&(sO(iS),iS=null))),c(t,r),oz(r),null;case 5:ao(r);var f=an(at.current);if(i=r.type,null!==t&&null!=r.stateNode)h(t,r,i,s,f),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!s){if(null===r.stateNode)throw Error(x(166));return oz(r),null}if(t=an(i7.current),iI(r)){s=r.stateNode,i=r.type;var v=r.memoizedProps;switch(s[rF]=r,s[rz]=v,t=0!=(1&r.mode),i){case"dialog":rh("cancel",s),rh("close",s);break;case"iframe":case"object":case"embed":rh("load",s);break;case"video":case"audio":for(f=0;f<rs.length;f++)rh(rs[f],s);break;case"source":rh("error",s);break;case"img":case"image":case"link":rh("error",s),rh("load",s);break;case"details":rh("toggle",s);break;case"input":el(s,v),rh("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!v.multiple},rh("invalid",s);break;case"textarea":em(s,v),rh("invalid",s)}for(var y in eD(i,v),f=null,v)if(v.hasOwnProperty(y)){var _=v[y];"children"===y?"string"==typeof _?s.textContent!==_&&(!0!==v.suppressHydrationWarning&&rM(s.textContent,_,t),f=["children",_]):"number"==typeof _&&s.textContent!==""+_&&(!0!==v.suppressHydrationWarning&&rM(s.textContent,_,t),f=["children",""+_]):b.hasOwnProperty(y)&&null!=_&&"onScroll"===y&&rh("scroll",s)}switch(i){case"input":ei(s),eh(s,v,!0);break;case"textarea":ei(s),ey(s);break;case"select":case"option":break;default:"function"==typeof v.onClick&&(s.onclick=rA)}s=f,r.updateQueue=s,null!==s&&(r.flags|=4)}else{y=9===f.nodeType?f:f.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=ex(i)),"http://www.w3.org/1999/xhtml"===t?"script"===i?((t=y.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof s.is?t=y.createElement(i,{is:s.is}):(t=y.createElement(i),"select"===i&&(y=t,s.multiple?y.multiple=!0:s.size&&(y.size=s.size))):t=y.createElementNS(t,i),t[rF]=r,t[rz]=s,u(t,r,!1,!1),r.stateNode=t;e:{switch(y=eP(i,s),i){case"dialog":rh("cancel",t),rh("close",t),f=s;break;case"iframe":case"object":case"embed":rh("load",t),f=s;break;case"video":case"audio":for(f=0;f<rs.length;f++)rh(rs[f],t);f=s;break;case"source":rh("error",t),f=s;break;case"img":case"image":case"link":rh("error",t),rh("load",t),f=s;break;case"details":rh("toggle",t),f=s;break;case"input":el(t,s),f=es(t,s),rh("invalid",t);break;case"option":default:f=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},f=q({},s,{value:void 0}),rh("invalid",t);break;case"textarea":em(t,s),f=eg(t,s),rh("invalid",t)}for(v in eD(i,f),_=f)if(_.hasOwnProperty(v)){var w=_[v];"style"===v?eE(t,w):"dangerouslySetInnerHTML"===v?null!=(w=w?w.__html:void 0)&&eS(t,w):"children"===v?"string"==typeof w?("textarea"!==i||""!==w)&&eM(t,w):"number"==typeof w&&eM(t,""+w):"suppressContentEditableWarning"!==v&&"suppressHydrationWarning"!==v&&"autoFocus"!==v&&(b.hasOwnProperty(v)?null!=w&&"onScroll"===v&&rh("scroll",t):null!=w&&k(t,v,w,y))}switch(i){case"input":ei(t),eh(t,s,!1);break;case"textarea":ei(t),ey(t);break;case"option":null!=s.value&&t.setAttribute("value",""+en(s.value));break;case"select":t.multiple=!!s.multiple,null!=(v=s.value)?ef(t,!!s.multiple,v,!1):null!=s.defaultValue&&ef(t,!!s.multiple,s.defaultValue,!0);break;default:"function"==typeof f.onClick&&(t.onclick=rA)}switch(i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(r.flags|=4)}null!==r.ref&&(r.flags|=512,r.flags|=2097152)}return oz(r),null;case 6:if(t&&null!=r.stateNode)p(t,r,t.memoizedProps,s);else{if("string"!=typeof s&&null===r.stateNode)throw Error(x(166));if(i=an(at.current),an(i7.current),iI(r)){if(s=r.stateNode,i=r.memoizedProps,s[rF]=r,(v=s.nodeValue!==i)&&null!==(t=i_))switch(t.tag){case 3:rM(s.nodeValue,i,0!=(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&rM(s.nodeValue,i,0!=(1&t.mode))}v&&(r.flags|=4)}else(s=(9===i.nodeType?i:i.ownerDocument).createTextNode(s))[rF]=r,r.stateNode=s}return oz(r),null;case 13:if(rK(as),s=r.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(iw&&null!==ib&&0!=(1&r.mode)&&0==(128&r.flags))iD(),iP(),r.flags|=98560,v=!1;else if(v=iI(r),null!==s&&null!==s.dehydrated){if(null===t){if(!v)throw Error(x(318));if(!(v=null!==(v=r.memoizedState)?v.dehydrated:null))throw Error(x(317));v[rF]=r}else iP(),0==(128&r.flags)&&(r.memoizedState=null),r.flags|=4;oz(r),v=!1}else null!==iS&&(sO(iS),iS=null),v=!0;if(!v)return 65536&r.flags?r:null}if(0!=(128&r.flags))return r.lanes=i,r;return(s=null!==s)!=(null!==t&&null!==t.memoizedState)&&s&&(r.child.flags|=8192,0!=(1&r.mode)&&(null===t||0!=(1&as.current)?0===su&&(su=3):sW())),null!==r.updateQueue&&(r.flags|=4),oz(r),null;case 4:return ai(),c(t,r),null===t&&rf(r.stateNode.containerInfo),oz(r),null;case 10:return ij(r.type._context),oz(r),null;case 19:if(rK(as),null===(v=r.memoizedState))return oz(r),null;if(s=0!=(128&r.flags),null===(y=v.rendering)){if(s)oF(v,!1);else{if(0!==su||null!==t&&0!=(128&t.flags))for(t=r.child;null!==t;){if(null!==(y=al(t))){for(r.flags|=128,oF(v,!1),null!==(s=y.updateQueue)&&(r.updateQueue=s,r.flags|=4),r.subtreeFlags=0,s=i,i=r.child;null!==i;)v=i,t=s,v.flags&=0xe00002,null===(y=v.alternate)?(v.childLanes=0,v.lanes=t,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=y.childLanes,v.lanes=y.lanes,v.child=y.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=y.memoizedProps,v.memoizedState=y.memoizedState,v.updateQueue=y.updateQueue,v.type=y.type,t=y.dependencies,v.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return rq(as,1&as.current|2),r.child}t=t.sibling}null!==v.tail&&e8()>sv&&(r.flags|=128,s=!0,oF(v,!1),r.lanes=4194304)}}else{if(!s){if(null!==(t=al(y))){if(r.flags|=128,s=!0,null!==(i=t.updateQueue)&&(r.updateQueue=i,r.flags|=4),oF(v,!0),null===v.tail&&"hidden"===v.tailMode&&!y.alternate&&!iw)return oz(r),null}else 2*e8()-v.renderingStartTime>sv&&0x40000000!==i&&(r.flags|=128,s=!0,oF(v,!1),r.lanes=4194304)}v.isBackwards?(y.sibling=r.child,r.child=y):(null!==(i=v.last)?i.sibling=y:r.child=y,v.last=y)}if(null!==v.tail)return r=v.tail,v.rendering=r,v.tail=r.sibling,v.renderingStartTime=e8(),r.sibling=null,i=as.current,rq(as,s?1&i|2:1&i),r;return oz(r),null;case 22:case 23:return sU(),s=null!==r.memoizedState,null!==t&&null!==t.memoizedState!==s&&(r.flags|=8192),s&&0!=(1&r.mode)?0!=(0x40000000&ss)&&(oz(r),6&r.subtreeFlags&&(r.flags|=8192)):oz(r),null;case 24:case 25:return null}throw Error(x(156,r.tag))}(i,r,ss))){sa=i;return}}else{if(null!==(i=function(t,r){switch(ix(r),r.tag){case 1:return r5(r.type)&&r4(),65536&(t=r.flags)?(r.flags=-65537&t|128,r):null;case 3:return ai(),rK(r1),rK(r0),ac(),0!=(65536&(t=r.flags))&&0==(128&t)?(r.flags=-65537&t|128,r):null;case 5:return ao(r),null;case 13:if(rK(as),null!==(t=r.memoizedState)&&null!==t.dehydrated){if(null===r.alternate)throw Error(x(340));iP()}return 65536&(t=r.flags)?(r.flags=-65537&t|128,r):null;case 19:return rK(as),null;case 4:return ai(),null;case 10:return ij(r.type._context),null;case 22:case 23:return sU(),null;default:return null}}(i,r))){i.flags&=32767,sa=i;return}if(null!==t)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{su=6,sa=null;return}}if(null!==(r=r.sibling)){sa=r;return}sa=r=t}while(null!==r);0===su&&(su=5)}function s$(t,r,i){var s=tx,u=sn.transition;try{sn.transition=null,tx=1,function(t,r,i,s){do sJ();while(null!==sS);if(0!=(6&sr))throw Error(x(327));i=t.finishedWork;var u=t.finishedLanes;if(null===i)return;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(x(177));t.callbackNode=null,t.callbackPriority=0;var c=i.lanes|i.childLanes;if(!function(t,r){var i=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<i;){var u=31-ts(i),c=1<<u;r[u]=0,s[u]=-1,t[u]=-1,i&=~c}}(t,c),t===si&&(sa=si=null,so=0),0==(2064&i.subtreeFlags)&&0==(2064&i.flags)||sw||(sw=!0,function(t,r){e5(t,r)}(tn,function(){return sJ(),null})),c=0!=(15990&i.flags),0!=(15990&i.subtreeFlags)||c){c=sn.transition,sn.transition=null;var h,p,f,v=tx;tx=1;var y=sr;sr|=4,st.current=null,!function(t,r){if(rC=tW,nZ(t=nJ())){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{var s=(i=(i=t.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(s&&0!==s.rangeCount){i=s.anchorNode;var u,c=s.anchorOffset,h=s.focusNode;s=s.focusOffset;try{i.nodeType,h.nodeType}catch(t){i=null;break e}var p=0,f=-1,v=-1,y=0,_=0,b=t,w=null;t:for(;;){for(;b!==i||0!==c&&3!==b.nodeType||(f=p+c),b!==h||0!==s&&3!==b.nodeType||(v=p+s),3===b.nodeType&&(p+=b.nodeValue.length),null!==(u=b.firstChild);){;w=b,b=u}for(;;){if(b===t)break t;if(w===i&&++y===c&&(f=p),w===h&&++_===s&&(v=p),null!==(u=b.nextSibling))break;w=(b=w).parentNode}b=u}i=-1===f||-1===v?null:{start:f,end:v}}else i=null}i=i||{start:0,end:0}}else i=null;for(rT={focusedElem:t,selectionRange:i},tW=!1,oV=r;null!==oV;)if(t=(r=oV).child,0!=(1028&r.subtreeFlags)&&null!==t)t.return=r,oV=t;else for(;null!==oV;){r=oV;try{var S=r.alternate;if(0!=(1024&r.flags))switch(r.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==S){var M=S.memoizedProps,A=S.memoizedState,C=r.stateNode,T=C.getSnapshotBeforeUpdate(r.elementType===r.type?M:a7(r.type,M),A);C.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var I=r.stateNode.containerInfo;1===I.nodeType?I.textContent="":9===I.nodeType&&I.documentElement&&I.removeChild(I.documentElement);break;default:throw Error(x(163))}}catch(t){sK(r,r.return,t)}if(null!==(t=r.sibling)){t.return=r.return,oV=t;break}oV=r.return}S=oX,oX=!1}(t,i),o5(i,t),!function(t){var r=nJ(),i=t.focusedElem,s=t.selectionRange;if(r!==i&&i&&i.ownerDocument&&function t(r,i){return!!r&&!!i&&(r===i||(!r||3!==r.nodeType)&&(i&&3===i.nodeType?t(r,i.parentNode):"contains"in r?r.contains(i):!!r.compareDocumentPosition&&!!(16&r.compareDocumentPosition(i))))}(i.ownerDocument.documentElement,i)){if(null!==s&&nZ(i)){if(r=s.start,void 0===(t=s.end)&&(t=r),"selectionStart"in i)i.selectionStart=r,i.selectionEnd=Math.min(t,i.value.length);else if((t=(r=i.ownerDocument||document)&&r.defaultView||window).getSelection){t=t.getSelection();var u=i.textContent.length,c=Math.min(s.start,u);s=void 0===s.end?c:Math.min(s.end,u),!t.extend&&c>s&&(u=s,s=c,c=u),u=n$(i,c);var h=n$(i,s);u&&h&&(1!==t.rangeCount||t.anchorNode!==u.node||t.anchorOffset!==u.offset||t.focusNode!==h.node||t.focusOffset!==h.offset)&&((r=r.createRange()).setStart(u.node,u.offset),t.removeAllRanges(),c>s?(t.addRange(r),t.extend(h.node,h.offset)):(r.setEnd(h.node,h.offset),t.addRange(r)))}}for(r=[],t=i;t=t.parentNode;)1===t.nodeType&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"==typeof i.focus&&i.focus(),i=0;i<r.length;i++)(t=r[i]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}(rT),tW=!!rC,rT=rC=null,t.current=i,h=i,p=t,f=u,oV=h,function t(r,i,s){for(var u=0!=(1&r.mode);null!==oV;){var c=oV,h=c.child;if(22===c.tag&&u){var p=null!==c.memoizedState||oU;if(!p){var f=c.alternate,v=null!==f&&null!==f.memoizedState||oH;f=oU;var y=oH;if(oU=p,(oH=v)&&!y)for(oV=c;null!==oV;)v=(p=oV).child,22===p.tag&&null!==p.memoizedState?o8(c):null!==v?(v.return=p,oV=v):o8(c);for(;null!==h;)oV=h,t(h,i,s),h=h.sibling;oV=c,oU=f,oH=y}o6(r,i,s)}else 0!=(8772&c.subtreeFlags)&&null!==h?(h.return=c,oV=h):o6(r,i,s)}}(h,p,f),e9(),sr=y,tx=v,sn.transition=c}else t.current=i;if(sw&&(sw=!1,sS=t,sM=u),0===(c=t.pendingLanes)&&(sb=null),!function(t){if(to&&"function"==typeof to.onCommitFiberRoot)try{to.onCommitFiberRoot(ta,t,void 0,128==(128&t.current.flags))}catch(t){}}(i.stateNode,s),sR(t,e8()),null!==r)for(s=t.onRecoverableError,i=0;i<r.length;i++)s((u=r[i]).value,{componentStack:u.stack,digest:u.digest});if(sx)throw sx=!1,t=s_,s_=null,t;0!=(1&sM)&&0!==t.tag&&sJ(),0!=(1&(c=t.pendingLanes))?t===sC?sA++:(sA=0,sC=t):sA=0,ia()}(t,r,i,s)}finally{sn.transition=u,tx=s}return null}function sJ(){if(null!==sS){var t=t_(sM),r=sn.transition,i=tx;try{if(sn.transition=null,tx=16>t?16:t,null===sS)var s=!1;else{if(t=sS,sS=null,sM=0,0!=(6&sr))throw Error(x(331));var u=sr;for(sr|=4,oV=t.current;null!==oV;){var c=oV,h=c.child;if(0!=(16&oV.flags)){var p=c.deletions;if(null!==p){for(var f=0;f<p.length;f++){var v=p[f];for(oV=v;null!==oV;){var y=oV;switch(y.tag){case 0:case 11:case 15:oY(8,y,c)}var _=y.child;if(null!==_)_.return=y,oV=_;else for(;null!==oV;){var b=(y=oV).sibling,w=y.return;if(!function t(r){var i=r.alternate;null!==i&&(r.alternate=null,t(i)),r.child=null,r.deletions=null,r.sibling=null,5===r.tag&&null!==(i=r.stateNode)&&(delete i[rF],delete i[rz],delete i[rH],delete i[rG],delete i[rV]),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}(y),y===v){oV=null;break}if(null!==b){b.return=w,oV=b;break}oV=w}}}var S=c.alternate;if(null!==S){var M=S.child;if(null!==M){S.child=null;do{var A=M.sibling;M.sibling=null,M=A}while(null!==M)}}oV=c}}if(0!=(2064&c.subtreeFlags)&&null!==h)h.return=c,oV=h;else for(;null!==oV;){if(c=oV,0!=(2048&c.flags))switch(c.tag){case 0:case 11:case 15:oY(9,c,c.return)}var C=c.sibling;if(null!==C){C.return=c.return,oV=C;break}oV=c.return}}var T=t.current;for(oV=T;null!==oV;){var I=(h=oV).child;if(0!=(2064&h.subtreeFlags)&&null!==I)I.return=h,oV=I;else for(h=T;null!==oV;){if(p=oV,0!=(2048&p.flags))try{switch(p.tag){case 0:case 11:case 15:o$(9,p)}}catch(t){sK(p,p.return,t)}if(p===h){oV=null;break}var D=p.sibling;if(null!==D){D.return=p.return,oV=D;break}oV=p.return}}if(sr=u,ia(),to&&"function"==typeof to.onPostCommitFiberRoot)try{to.onPostCommitFiberRoot(ta,t)}catch(t){}s=!0}return s}finally{tx=i,sn.transition=r}}return!1}function sZ(t,r,i){r=oc(t,r=oo(i,r),1),t=i3(t,r,1),r=sI(),null!==t&&(tv(t,1,r),sR(t,r))}function sK(t,r,i){if(3===t.tag)sZ(t,t,i);else for(;null!==r;){if(3===r.tag){sZ(r,t,i);break}if(1===r.tag){var s=r.stateNode;if("function"==typeof r.type.getDerivedStateFromError||"function"==typeof s.componentDidCatch&&(null===sb||!sb.has(s))){t=oh(r,t=oo(i,t),1),r=i3(r,t,1),t=sI(),null!==r&&(tv(r,1,t),sR(r,t));break}}r=r.return}}function sq(t,r,i){var s=t.pingCache;null!==s&&s.delete(r),r=sI(),t.pingedLanes|=t.suspendedLanes&i,si===t&&(so&i)===i&&(4===su||3===su&&(0x7c00000&so)===so&&500>e8()-sm?sH(t,0):sp|=i),sR(t,r)}function sQ(t,r){0===r&&(0==(1&t.mode)?r=1:(r=th,0==(0x7c00000&(th<<=1))&&(th=4194304)));var i=sI();null!==(t=iq(t,r))&&(tv(t,r,i),sR(t,i))}function s0(t){var r=t.memoizedState,i=0;null!==r&&(i=r.retryLane),sQ(t,i)}function s1(t,r){var i=0;switch(t.tag){case 13:var s=t.stateNode,u=t.memoizedState;null!==u&&(i=u.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(x(314))}null!==s&&s.delete(r),sQ(t,i)}function s2(t,r){return e5(t,r)}function s3(t,r,i,s){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function s5(t,r,i,s){return new s3(t,r,i,s)}function s4(t){return!(!(t=t.prototype)||!t.isReactComponent)}f=function(t,r,i){if(null!==t){if(t.memoizedProps!==r.pendingProps||r1.current)om=!0;else{if(0==(t.lanes&i)&&0==(128&r.flags))return om=!1,function(t,r,i){switch(r.tag){case 3:oC(r),iP();break;case 5:aa(r);break;case 1:r5(r.type)&&r8(r);break;case 4:ar(r,r.stateNode.containerInfo);break;case 10:var s=r.type._context,u=r.memoizedProps.value;rq(iU,s._currentValue),s._currentValue=u;break;case 13:if(null!==(s=r.memoizedState)){if(null!==s.dehydrated)return rq(as,1&as.current),r.flags|=128,null;if(0!=(i&r.child.childLanes))return oD(t,r,i);return rq(as,1&as.current),null!==(t=oN(t,r,i))?t.sibling:null}rq(as,1&as.current);break;case 19:if(s=0!=(i&r.childLanes),0!=(128&t.flags)){if(s)return oO(t,r,i);r.flags|=128}if(null!==(u=r.memoizedState)&&(u.rendering=null,u.tail=null,u.lastEffect=null),rq(as,as.current),!s)return null;break;case 22:case 23:return r.lanes=0,ob(t,r,i)}return oN(t,r,i)}(t,r,i);om=0!=(131072&t.flags)}}else om=!1,iw&&0!=(1048576&r.flags)&&iv(r,iu,r.index);switch(r.lanes=0,r.tag){case 2:var s=r.type;oB(t,r),t=r.pendingProps;var u=r3(r,r0.current);iY(r,i),u=aS(null,r,s,t,u,i);var c=aM();return r.flags|=1,"object"==typeof u&&null!==u&&"function"==typeof u.render&&void 0===u.$$typeof?(r.tag=1,r.memoizedState=null,r.updateQueue=null,r5(s)?(c=!0,r8(r)):c=!1,r.memoizedState=null!==u.state&&void 0!==u.state?u.state:null,i0(r),u.updater=ot,r.stateNode=u,u._reactInternals=r,oa(r,s,t,i),r=oA(null,r,s,!0,c,i)):(r.tag=0,iw&&c&&iy(r),ov(null,r,u,i),r=r.child),r;case 16:s=r.elementType;e:{switch(oB(t,r),t=r.pendingProps,s=(u=s._init)(s._payload),r.type=s,u=r.tag=function(t){if("function"==typeof t)return s4(t)?1:0;if(null!=t){if((t=t.$$typeof)===V)return 11;if(t===X)return 14}return 2}(s),t=a7(s,t),u){case 0:r=oS(null,r,s,t,i);break e;case 1:r=oM(null,r,s,t,i);break e;case 11:r=oy(null,r,s,t,i);break e;case 14:r=ox(null,r,s,a7(s.type,t),i);break e}throw Error(x(306,s,""))}return r;case 0:return s=r.type,u=r.pendingProps,u=r.elementType===s?u:a7(s,u),oS(t,r,s,u,i);case 1:return s=r.type,u=r.pendingProps,u=r.elementType===s?u:a7(s,u),oM(t,r,s,u,i);case 3:e:{if(oC(r),null===t)throw Error(x(387));s=r.pendingProps,u=(c=r.memoizedState).element,i1(t,r),i6(r,s,null,i);var h=r.memoizedState;if(s=h.element,c.isDehydrated){if(c={element:s,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},r.updateQueue.baseState=c,r.memoizedState=c,256&r.flags){u=oo(Error(x(423)),r),r=oT(t,r,s,i,u);break e}else if(s!==u){u=oo(Error(x(424)),r),r=oT(t,r,s,i,u);break e}else for(ib=rO(r.stateNode.containerInfo.firstChild),i_=r,iw=!0,iS=null,i=iz(r,null,s,i),r.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(iP(),s===u){r=oN(t,r,i);break e}ov(t,r,s,i)}r=r.child}return r;case 5:return aa(r),null===t&&iT(r),s=r.type,u=r.pendingProps,c=null!==t?t.memoizedProps:null,h=u.children,rE(s,u)?h=null:null!==c&&rE(s,c)&&(r.flags|=32),ow(t,r),ov(t,r,h,i),r.child;case 6:return null===t&&iT(r),null;case 13:return oD(t,r,i);case 4:return ar(r,r.stateNode.containerInfo),s=r.pendingProps,null===t?r.child=iF(r,null,s,i):ov(t,r,s,i),r.child;case 11:return s=r.type,u=r.pendingProps,u=r.elementType===s?u:a7(s,u),oy(t,r,s,u,i);case 7:return ov(t,r,r.pendingProps,i),r.child;case 8:case 12:return ov(t,r,r.pendingProps.children,i),r.child;case 10:e:{if(s=r.type._context,u=r.pendingProps,c=r.memoizedProps,h=u.value,rq(iU,s._currentValue),s._currentValue=h,null!==c){if(nj(c.value,h)){if(c.children===u.children&&!r1.current){r=oN(t,r,i);break e}}else for(null!==(c=r.child)&&(c.return=r);null!==c;){var p=c.dependencies;if(null!==p){h=c.child;for(var f=p.firstContext;null!==f;){if(f.context===s){if(1===c.tag){(f=i2(-1,i&-i)).tag=2;var v=c.updateQueue;if(null!==v){var y=(v=v.shared).pending;null===y?f.next=f:(f.next=y.next,y.next=f),v.pending=f}}c.lanes|=i,null!==(f=c.alternate)&&(f.lanes|=i),iX(c.return,i,r),p.lanes|=i;break}f=f.next}}else if(10===c.tag)h=c.type===r.type?null:c.child;else if(18===c.tag){if(null===(h=c.return))throw Error(x(341));h.lanes|=i,null!==(p=h.alternate)&&(p.lanes|=i),iX(h,i,r),h=c.sibling}else h=c.child;if(null!==h)h.return=c;else for(h=c;null!==h;){if(h===r){h=null;break}if(null!==(c=h.sibling)){c.return=h.return,h=c;break}h=h.return}c=h}}ov(t,r,u.children,i),r=r.child}return r;case 9:return u=r.type,s=r.pendingProps.children,iY(r,i),s=s(u=i$(u)),r.flags|=1,ov(t,r,s,i),r.child;case 14:return u=a7(s=r.type,r.pendingProps),u=a7(s.type,u),ox(t,r,s,u,i);case 15:return o_(t,r,r.type,r.pendingProps,i);case 17:return s=r.type,u=r.pendingProps,u=r.elementType===s?u:a7(s,u),oB(t,r),r.tag=1,r5(s)?(t=!0,r8(r)):t=!1,iY(r,i),or(r,s,u),oa(r,s,u,i),oA(null,r,s,!0,t,i);case 19:return oO(t,r,i);case 22:return ob(t,r,i)}throw Error(x(156,r.tag))};function s6(t,r){var i=t.alternate;return null===i?((i=s5(t.tag,r,t.key,t.mode)).elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=r,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=0xe00000&t.flags,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,r=t.dependencies,i.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function s9(t,r,i,s,u,c){var h=2;if(s=t,"function"==typeof t)s4(t)&&(h=1);else if("string"==typeof t)h=5;else e:switch(t){case F:return s8(i.children,u,c,r);case z:h=8,u|=8;break;case U:return(t=s5(12,i,r,2|u)).elementType=U,t.lanes=c,t;case W:return(t=s5(13,i,r,u)).elementType=W,t.lanes=c,t;case j:return(t=s5(19,i,r,u)).elementType=j,t.lanes=c,t;case $:return s7(i,u,c,r);default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case H:h=10;break e;case G:h=9;break e;case V:h=11;break e;case X:h=14;break e;case Y:h=16,s=null;break e}throw Error(x(130,null==t?t:typeof t,""))}return(r=s5(h,i,r,u)).elementType=t,r.type=s,r.lanes=c,r}function s8(t,r,i,s){return(t=s5(7,t,s,r)).lanes=i,t}function s7(t,r,i,s){return(t=s5(22,t,s,r)).elementType=$,t.lanes=i,t.stateNode={isHidden:!1},t}function le(t,r,i){return(t=s5(6,t,null,r)).lanes=i,t}function lt(t,r,i){return(r=s5(4,null!==t.children?t.children:[],t.key,r)).lanes=i,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function ln(t,r,i,s,u){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tm(0),this.expirationTimes=tm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tm(0),this.identifierPrefix=s,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function lr(t,r,i,s,u,c,h,p,f){return t=new ln(t,r,i,p,f),1===r?(r=1,!0===c&&(r|=8)):r=0,c=s5(3,null,null,r),t.current=c,c.stateNode=t,c.memoizedState={element:s,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},i0(c),t}function li(t){if(!t)return rQ;t=t._reactInternals;e:{if(e0(t)!==t||1!==t.tag)throw Error(x(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(r5(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(null!==r);throw Error(x(171))}if(1===t.tag){var i=t.type;if(r5(i))return r9(t,i,r)}return r}function la(t,r,i,s,u,c,h,p,f){return(t=lr(i,s,!0,t,u,c,h,p,f)).context=li(null),i=t.current,s=sI(),(c=i2(s,u=sD(i))).callback=null!=r?r:null,i3(i,c,u),t.current.lanes=u,tv(t,u,s),sR(t,s),t}function lo(t,r,i,s){var u=r.current,c=sI(),h=sD(u);return i=li(i),null===r.context?r.context=i:r.pendingContext=i,(r=i2(c,h)).payload={element:t},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(t=i3(u,r,h))&&(sP(t,u,h,c),i5(t,u,h)),h}function ls(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function ll(t,r){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var i=t.retryLane;t.retryLane=0!==i&&i<r?i:r}}function lu(t,r){ll(t,r),(t=t.alternate)&&ll(t,r)}var lc="function"==typeof reportError?reportError:function(t){};function lh(t){this._internalRoot=t}function ld(t){this._internalRoot=t}function lp(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function lf(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function lg(){}ld.prototype.render=lh.prototype.render=function(t){var r=this._internalRoot;if(null===r)throw Error(x(409));lo(t,r,null,null)},ld.prototype.unmount=lh.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var r=t.containerInfo;sz(function(){lo(null,t,null,null)}),r[rU]=null}},ld.prototype.unstable_scheduleHydration=function(t){if(t){var r=tM();t={blockedOn:null,target:t,priority:r};for(var i=0;i<tL.length&&0!==r&&r<tL[i].priority;i++);tL.splice(i,0,t),0===i&&tN(t)}};function lm(t,r,i,s,u){var c=i._reactRootContainer;if(c){var h=c;if("function"==typeof u){var p=u;u=function(){var t=ls(h);p.call(t)}}lo(r,h,t,u)}else h=function(t,r,i,s,u){if(u){if("function"==typeof s){var c=s;s=function(){var t=ls(h);c.call(t)}}var h=la(r,s,t,0,null,!1,!1,"",lg);return t._reactRootContainer=h,t[rU]=h.current,rf(8===t.nodeType?t.parentNode:t),sz(),h}for(;u=t.lastChild;)t.removeChild(u);if("function"==typeof s){var p=s;s=function(){var t=ls(f);p.call(t)}}var f=lr(t,0,!1,null,null,!1,!1,"",lg);return t._reactRootContainer=f,t[rU]=f.current,rf(8===t.nodeType?t.parentNode:t),sz(function(){lo(r,f,i,s)}),f}(i,r,t,u,s);return ls(h)}tb=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var i=td(r.pendingLanes);0!==i&&(ty(r,1|i),sR(r,e8()),0==(6&sr)&&(sv=e8()+500,ia()))}break;case 13:sz(function(){var r=iq(t,1);null!==r&&sP(r,t,1,sI())}),lu(t,1)}},tw=function(t){if(13===t.tag){var r=iq(t,0x8000000);null!==r&&sP(r,t,0x8000000,sI()),lu(t,0x8000000)}},tS=function(t){if(13===t.tag){var r=sD(t),i=iq(t,r);null!==i&&sP(i,t,r,sI()),lu(t,r)}},tM=function(){return tx},tA=function(t,r){var i=tx;try{return tx=t,r()}finally{tx=i}},ek=function(t,r,i){switch(r){case"input":if(ec(t,i),r=i.name,"radio"===i.type&&null!=r){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<i.length;r++){var s=i[r];if(s!==t&&s.form===t.form){var u=rY(s);if(!u)throw Error(x(90));ea(s),ec(s,u)}}}break;case"textarea":ev(t,i);break;case"select":null!=(r=i.value)&&ef(t,!!i.multiple,r,!1)}},eU=sF,eH=sz;var lv={findFiberByHostInstance:rW,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ly={bundleType:lv.bundleType,version:lv.version,rendererPackageName:lv.rendererPackageName,rendererConfig:lv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=e3(t))?null:t.stateNode},findFiberByHostInstance:lv.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lx.isDisabled&&lx.supportsFiber)try{ta=lx.inject(ly),to=lx}catch(t){}}r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={usingClientEntryPoint:!1,Events:[rj,rX,rY,eF,ez,sF]},r.createPortal=function(t,r){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!lp(r))throw Error(x(200));return function(t,r,i){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==s?null:""+s,children:t,containerInfo:r,implementation:i}}(t,r,null,i)},r.createRoot=function(t,r){if(!lp(t))throw Error(x(299));var i=!1,s="",u=lc;return null!=r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onRecoverableError&&(u=r.onRecoverableError)),r=lr(t,1,!1,null,null,i,!1,s,u),t[rU]=r.current,rf(8===t.nodeType?t.parentNode:t),new lh(r)},r.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var r=t._reactInternals;if(void 0===r){if("function"==typeof t.render)throw Error(x(188));throw Error(x(268,t=Object.keys(t).join(",")))}return t=null===(t=e3(r))?null:t.stateNode},r.flushSync=function(t){return sz(t)},r.hydrate=function(t,r,i){if(!lf(r))throw Error(x(200));return lm(null,t,r,!0,i)},r.hydrateRoot=function(t,r,i){if(!lp(t))throw Error(x(405));var s=null!=i&&i.hydratedSources||null,u=!1,c="",h=lc;if(null!=i&&(!0===i.unstable_strictMode&&(u=!0),void 0!==i.identifierPrefix&&(c=i.identifierPrefix),void 0!==i.onRecoverableError&&(h=i.onRecoverableError)),r=la(r,null,t,1,null!=i?i:null,u,!1,c,h),t[rU]=r.current,rf(t),s)for(t=0;t<s.length;t++)u=(u=(i=s[t])._getVersion)(i._source),null==r.mutableSourceEagerHydrationData?r.mutableSourceEagerHydrationData=[i,u]:r.mutableSourceEagerHydrationData.push(i,u);return new ld(r)},r.render=function(t,r,i){if(!lf(r))throw Error(x(200));return lm(null,t,r,!1,i)},r.unmountComponentAtNode=function(t){if(!lf(t))throw Error(x(40));return!!t._reactRootContainer&&(sz(function(){lm(null,null,t,!1,function(){t._reactRootContainer=null,t[rU]=null})}),!0)},r.unstable_batchedUpdates=sF,r.unstable_renderSubtreeIntoContainer=function(t,r,i,s){if(!lf(i))throw Error(x(200));if(null==t||void 0===t._reactInternals)throw Error(x(38));return lm(t,r,i,!1,s)},r.version="18.3.1-next-f1338f8080-20240426"},8751:function(t,r,i){"use strict";var s=i(967);r.createRoot=s.createRoot,r.hydrateRoot=s.hydrateRoot},967:function(t,r,i){"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){}}(),t.exports=i(6521)},2514:function(t,r){"use strict";var i;r.ConcurrentRoot=1,r.ContinuousEventPriority=4,r.DefaultEventPriority=16,r.DiscreteEventPriority=1},1041:function(t,r,i){t.exports=function(t){"use strict";var r,s,u,c,h,p={},f=i(5271),v=i(5297),y=Object.assign;function x(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function B(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=O&&t[O]||t["@@iterator"])?t:null}function N(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case S:return"Fragment";case w:return"Portal";case A:return"Profiler";case M:return"StrictMode";case D:return"Suspense";case P:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case T:return(t.displayName||"Context")+".Consumer";case C:return(t._context.displayName||"Context")+".Provider";case I:var r=t.render;return(t=t.displayName)||(t=""!==(t=r.displayName||r.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case R:return null!==(r=t.displayName||null)?r:N(t.type)||"Memo";case L:r=t._payload,t=t._init;try{return N(t(r))}catch(t){}}return null}function F(t){var r=t,i=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do 0!=(4098&(r=t).flags)&&(i=r.return),t=r.return;while(t)}return 3===r.tag?i:null}function z(t){if(F(t)!==t)throw Error(x(188))}function U(t){var r=t.alternate;if(!r){if(null===(r=F(t)))throw Error(x(188));return r!==t?null:t}for(var i=t,s=r;;){var u=i.return;if(null===u)break;var c=u.alternate;if(null===c){if(null!==(s=u.return)){i=s;continue}break}if(u.child===c.child){for(c=u.child;c;){if(c===i)return z(u),t;if(c===s)return z(u),r;c=c.sibling}throw Error(x(188))}if(i.return!==s.return)i=u,s=c;else{for(var h=!1,p=u.child;p;){if(p===i){h=!0,i=u,s=c;break}if(p===s){h=!0,s=u,i=c;break}p=p.sibling}if(!h){for(p=c.child;p;){if(p===i){h=!0,i=c,s=u;break}if(p===s){h=!0,s=c,i=u;break}p=p.sibling}if(!h)throw Error(x(189))}}if(i.alternate!==s)throw Error(x(190))}if(3!==i.tag)throw Error(x(188));return i.stateNode.current===i?t:r}function H(t){return null!==(t=U(t))?function t(r){if(5===r.tag||6===r.tag)return r;for(r=r.child;null!==r;){var i=t(r);if(null!==i)return i;r=r.sibling}return null}(t):null}var G,V=Array.isArray,W=t.getPublicInstance,j=t.getRootHostContext,X=t.getChildHostContext,Y=t.prepareForCommit,$=t.resetAfterCommit,J=t.createInstance,Z=t.appendInitialChild,K=t.finalizeInitialChildren,q=t.prepareUpdate,Q=t.shouldSetTextContent,ee=t.createTextInstance,et=t.scheduleTimeout,en=t.cancelTimeout,er=t.noTimeout,ei=t.isPrimaryRenderer,ea=t.supportsMutation,eo=t.supportsPersistence,es=t.supportsHydration,el=t.getInstanceFromNode,eu=t.preparePortalMount,ec=t.getCurrentEventPriority,eh=t.detachDeletedInstance,ed=t.supportsMicrotasks,ep=t.scheduleMicrotask,ef=t.supportsTestSelectors,eg=t.findFiberRoot,em=t.getBoundingRect,ev=t.getTextContent,ey=t.isHiddenSubtree,ex=t.matchAccessibilityRole,e_=t.setFocusIfFocusable,eb=t.setupIntersectionObserver,ew=t.appendChild,eS=t.appendChildToContainer,eM=t.commitTextUpdate,eA=t.commitMount,eC=t.commitUpdate,eT=t.insertBefore,eE=t.insertInContainerBefore,eI=t.removeChild,eD=t.removeChildFromContainer,eP=t.resetTextContent,eR=t.hideInstance,eL=t.hideTextInstance,ek=t.unhideInstance,eO=t.unhideTextInstance,eB=t.clearContainer,eN=t.cloneInstance,eF=t.createContainerChildSet,ez=t.appendChildToContainerChildSet,eU=t.finalizeContainerChildren,eH=t.replaceContainerChildren,eG=t.cloneHiddenInstance,eV=t.cloneHiddenTextInstance,eW=t.canHydrateInstance,ej=t.canHydrateTextInstance,eX=t.canHydrateSuspenseInstance,eY=t.isSuspenseInstancePending,e$=t.isSuspenseInstanceFallback,eJ=t.registerSuspenseInstanceRetry,eZ=t.getNextHydratableSibling,eK=t.getFirstHydratableChild,eq=t.getFirstHydratableChildWithinContainer,eQ=t.getFirstHydratableChildWithinSuspenseInstance,e0=t.hydrateInstance,e1=t.hydrateTextInstance,e2=t.hydrateSuspenseInstance,e3=t.getNextHydratableInstanceAfterSuspenseInstance,e5=t.commitHydratedContainer,e4=t.commitHydratedSuspenseInstance,e6=t.clearSuspenseBoundary,e9=t.clearSuspenseBoundaryFromContainer,e8=t.shouldDeleteUnhydratedTailInstances,e7=t.didNotMatchHydratedContainerTextInstance,te=t.didNotMatchHydratedTextInstance;function tt(t){if(void 0===G)try{throw Error()}catch(t){var r=t.stack.trim().match(/\n( *(at )?)/);G=r&&r[1]||""}return"\n"+G+t}var tn=!1;function tr(t,r){if(!t||tn)return"";tn=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r){if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(r,[])}catch(t){var s=t}Reflect.construct(t,[],r)}else{try{r.call()}catch(t){s=t}t.call(r.prototype)}}else{try{throw Error()}catch(t){s=t}t()}}catch(r){if(r&&s&&"string"==typeof r.stack){for(var u=r.stack.split("\n"),c=s.stack.split("\n"),h=u.length-1,p=c.length-1;1<=h&&0<=p&&u[h]!==c[p];)p--;for(;1<=h&&0<=p;h--,p--)if(u[h]!==c[p]){if(1!==h||1!==p)do if(h--,0>--p||u[h]!==c[p]){var f="\n"+u[h].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=h&&0<=p);break}}}finally{tn=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?tt(t):""}var ti=Object.prototype.hasOwnProperty,ta=[],to=-1;function ts(t){return{current:t}}function tl(t){0>to||(t.current=ta[to],ta[to]=null,to--)}function tu(t,r){ta[++to]=t.current,t.current=r}var tc={},th=ts(tc),td=ts(!1),tp=tc;function tf(t,r){var i=t.type.contextTypes;if(!i)return tc;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===r)return s.__reactInternalMemoizedMaskedChildContext;var u,c={};for(u in i)c[u]=r[u];return s&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=c),c}function tg(t){return null!=(t=t.childContextTypes)}function tm(){tl(td),tl(th)}function tv(t,r,i){if(th.current!==tc)throw Error(x(168));tu(th,r),tu(td,i)}function ty(t,r,i){var s=t.stateNode;if(r=r.childContextTypes,"function"!=typeof s.getChildContext)return i;for(var u in s=s.getChildContext())if(!(u in r))throw Error(x(108,function(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=r.render).displayName||t.name||"",r.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N(r);case 8:return r===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof r)return r.displayName||r.name||null;if("string"==typeof r)return r}return null}(t)||"Unknown",u));return y({},i,s)}function tx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tc,tp=th.current,tu(th,t),tu(td,td.current),!0}function t_(t,r,i){var s=t.stateNode;if(!s)throw Error(x(169));i?(t=ty(t,r,tp),s.__reactInternalMemoizedMergedChildContext=t,tl(td),tl(th),tu(th,t)):tl(td),tu(td,i)}var tb=Math.clz32?Math.clz32:function(t){return 0==(t>>>=0)?32:31-(tw(t)/tS|0)|0},tw=Math.log,tS=Math.LN2,tM=64,tA=4194304;function tC(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return 0x7c00000&t;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0x40000000;default:return t}}function tT(t,r){var i=t.pendingLanes;if(0===i)return 0;var s=0,u=t.suspendedLanes,c=t.pingedLanes,h=0xfffffff&i;if(0!==h){var p=h&~u;0!==p?s=tC(p):0!=(c&=h)&&(s=tC(c))}else 0!=(h=i&~u)?s=tC(h):0!==c&&(s=tC(c));if(0===s)return 0;if(0!==r&&r!==s&&0==(r&u)&&((u=s&-s)>=(c=r&-r)||16===u&&0!=(4194240&c)))return r;if(0!=(4&s)&&(s|=16&i),0!==(r=t.entangledLanes))for(t=t.entanglements,r&=s;0<r;)u=1<<(i=31-tb(r)),s|=t[i],r&=~u;return s}function tE(t){return 0!=(t=-0x40000001&t.pendingLanes)?t:0x40000000&t?0x40000000:0}function tI(t){for(var r=[],i=0;31>i;i++)r.push(t);return r}function tD(t,r,i){t.pendingLanes|=r,0x20000000!==r&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,t[r=31-tb(r)]=i}function tP(t,r){var i=t.entangledLanes|=r;for(t=t.entanglements;i;){var s=31-tb(i),u=1<<s;u&r|t[s]&r&&(t[s]|=r),i&=~u}}var tR=0;function tL(t){return 1<(t&=-t)?4<t?0!=(0xfffffff&t)?16:0x20000000:4:1}var tk=v.unstable_scheduleCallback,tO=v.unstable_cancelCallback,tB=v.unstable_shouldYield,tN=v.unstable_requestPaint,tF=v.unstable_now,tz=v.unstable_ImmediatePriority,tU=v.unstable_UserBlockingPriority,tH=v.unstable_NormalPriority,tG=v.unstable_IdlePriority,tV=null,tW=null,tj="function"==typeof Object.is?Object.is:function(t,r){return t===r&&(0!==t||1/t==1/r)||t!=t&&r!=r},tX=null,tY=!1,t$=!1;function tJ(t){null===tX?tX=[t]:tX.push(t)}function tZ(){if(!t$&&null!==tX){t$=!0;var t=0,r=tR;try{var i=tX;for(tR=1;t<i.length;t++){var s=i[t];do s=s(!0);while(null!==s)}tX=null,tY=!1}catch(r){throw null!==tX&&(tX=tX.slice(t+1)),tk(tz,tZ),r}finally{tR=r,t$=!1}}return null}var tK=_.ReactCurrentBatchConfig;function tq(t,r){if(tj(t,r))return!0;if("object"!=typeof t||null===t||"object"!=typeof r||null===r)return!1;var i=Object.keys(t),s=Object.keys(r);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var u=i[s];if(!ti.call(r,u)||!tj(t[u],r[u]))return!1}return!0}function tQ(t,r){if(t&&t.defaultProps)for(var i in r=y({},r),t=t.defaultProps)void 0===r[i]&&(r[i]=t[i]);return r}var t0=ts(null),t1=null,t2=null,t3=null;function t5(){t3=t2=t1=null}function t4(t,r,i){ei?(tu(t0,r._currentValue),r._currentValue=i):(tu(t0,r._currentValue2),r._currentValue2=i)}function t6(t){var r=t0.current;tl(t0),ei?t._currentValue=r:t._currentValue2=r}function t9(t,r,i){for(;null!==t;){var s=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,null!==s&&(s.childLanes|=r)):null!==s&&(s.childLanes&r)!==r&&(s.childLanes|=r),t===i)break;t=t.return}}function t8(t,r){t1=t,t3=t2=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!=(t.lanes&r)&&(r7=!0),t.firstContext=null)}function t7(t){var r=ei?t._currentValue:t._currentValue2;if(t3!==t){if(t={context:t,memoizedValue:r,next:null},null===t2){if(null===t1)throw Error(x(308));t2=t,t1.dependencies={lanes:0,firstContext:t}}else t2=t2.next=t}return r}var ne=null,nt=!1;function nn(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nr(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ni(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function na(t,r){var i=t.updateQueue;null!==i&&(i=i.shared,null!==i9&&0!=(1&t.mode)&&0==(2&i6)?(null===(t=i.interleaved)?(r.next=r,null===ne?ne=[i]:ne.push(i)):(r.next=t.next,t.next=r),i.interleaved=r):(null===(t=i.pending)?r.next=r:(r.next=t.next,t.next=r),i.pending=r))}function no(t,r,i){if(null!==(r=r.updateQueue)&&(r=r.shared,0!=(4194240&i))){var s=r.lanes;s&=t.pendingLanes,i|=s,r.lanes=i,tP(t,i)}}function ns(t,r){var i=t.updateQueue,s=t.alternate;if(null!==s&&i===(s=s.updateQueue)){var u=null,c=null;if(null!==(i=i.firstBaseUpdate)){do{var h={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===c?u=c=h:c=c.next=h,i=i.next}while(null!==i);null===c?u=c=r:c=c.next=r}else u=c=r;i={baseState:s.baseState,firstBaseUpdate:u,lastBaseUpdate:c,shared:s.shared,effects:s.effects},t.updateQueue=i;return}null===(t=i.lastBaseUpdate)?i.firstBaseUpdate=r:t.next=r,i.lastBaseUpdate=r}function nl(t,r,i,s){var u=t.updateQueue;nt=!1;var c=u.firstBaseUpdate,h=u.lastBaseUpdate,p=u.shared.pending;if(null!==p){u.shared.pending=null;var f=p,v=f.next;f.next=null,null===h?c=v:h.next=v,h=f;var x=t.alternate;null!==x&&(p=(x=x.updateQueue).lastBaseUpdate)!==h&&(null===p?x.firstBaseUpdate=v:p.next=v,x.lastBaseUpdate=f)}if(null!==c){var _=u.baseState;for(h=0,x=v=f=null,p=c;;){var b=p.lane,w=p.eventTime;if((s&b)===b){null!==x&&(x=x.next={eventTime:w,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var S=t,M=p;switch(b=r,w=i,M.tag){case 1:if("function"==typeof(S=M.payload)){_=S.call(w,_,b);break e}_=S;break e;case 3:S.flags=-65537&S.flags|128;case 0:if(null==(b="function"==typeof(S=M.payload)?S.call(w,_,b):S))break e;_=y({},_,b);break e;case 2:nt=!0}}null!==p.callback&&0!==p.lane&&(t.flags|=64,null===(b=u.effects)?u.effects=[p]:b.push(p))}else w={eventTime:w,lane:b,tag:p.tag,payload:p.payload,callback:p.callback,next:null},null===x?(v=x=w,f=_):x=x.next=w,h|=b;if(null===(p=p.next)){if(null===(p=u.shared.pending))break;else p=(b=p).next,b.next=null,u.lastBaseUpdate=b,u.shared.pending=null}}if(null===x&&(f=_),u.baseState=f,u.firstBaseUpdate=v,u.lastBaseUpdate=x,null!==(r=u.shared.interleaved)){u=r;do h|=u.lane,u=u.next;while(u!==r)}else null===c&&(u.shared.lanes=0);ai|=h,t.lanes=h,t.memoizedState=_}}function nu(t,r,i){if(t=r.effects,r.effects=null,null!==t)for(r=0;r<t.length;r++){var s=t[r],u=s.callback;if(null!==u){if(s.callback=null,s=i,"function"!=typeof u)throw Error(x(191,u));u.call(s)}}}var nc=(new f.Component).refs;function nh(t,r,i,s){i=null==(i=i(s,r=t.memoizedState))?r:y({},r,i),t.memoizedState=i,0===t.lanes&&(t.updateQueue.baseState=i)}var nd={isMounted:function(t){return!!(t=t._reactInternals)&&F(t)===t},enqueueSetState:function(t,r,i){t=t._reactInternals;var s=aw(),u=aS(t),c=ni(s,u);c.payload=r,null!=i&&(c.callback=i),na(t,c),null!==(r=aM(t,u,s))&&no(r,t,u)},enqueueReplaceState:function(t,r,i){t=t._reactInternals;var s=aw(),u=aS(t),c=ni(s,u);c.tag=1,c.payload=r,null!=i&&(c.callback=i),na(t,c),null!==(r=aM(t,u,s))&&no(r,t,u)},enqueueForceUpdate:function(t,r){t=t._reactInternals;var i=aw(),s=aS(t),u=ni(i,s);u.tag=2,null!=r&&(u.callback=r),na(t,u),null!==(r=aM(t,s,i))&&no(r,t,s)}};function np(t,r,i,s,u,c,h){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(s,c,h):!r.prototype||!r.prototype.isPureReactComponent||!tq(i,s)||!tq(u,c)}function nf(t,r,i){var s=!1,u=tc,c=r.contextType;return"object"==typeof c&&null!==c?c=t7(c):(u=tg(r)?tp:th.current,c=(s=null!=(s=r.contextTypes))?tf(t,u):tc),r=new r(i,c),t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,r.updater=nd,t.stateNode=r,r._reactInternals=t,s&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=u,t.__reactInternalMemoizedMaskedChildContext=c),r}function ng(t,r,i,s){t=r.state,"function"==typeof r.componentWillReceiveProps&&r.componentWillReceiveProps(i,s),"function"==typeof r.UNSAFE_componentWillReceiveProps&&r.UNSAFE_componentWillReceiveProps(i,s),r.state!==t&&nd.enqueueReplaceState(r,r.state,null)}function nm(t,r,i,s){var u=t.stateNode;u.props=i,u.state=t.memoizedState,u.refs=nc,nn(t);var c=r.contextType;"object"==typeof c&&null!==c?u.context=t7(c):(c=tg(r)?tp:th.current,u.context=tf(t,c)),u.state=t.memoizedState,"function"==typeof(c=r.getDerivedStateFromProps)&&(nh(t,r,c,i),u.state=t.memoizedState),"function"==typeof r.getDerivedStateFromProps||"function"==typeof u.getSnapshotBeforeUpdate||"function"!=typeof u.UNSAFE_componentWillMount&&"function"!=typeof u.componentWillMount||(r=u.state,"function"==typeof u.componentWillMount&&u.componentWillMount(),"function"==typeof u.UNSAFE_componentWillMount&&u.UNSAFE_componentWillMount(),r!==u.state&&nd.enqueueReplaceState(u,u.state,null),nl(t,i,u,s),u.state=t.memoizedState),"function"==typeof u.componentDidMount&&(t.flags|=4194308)}var nv=[],ny=0,nx=null,n_=0,nb=[],nw=0,nS=null,nM=1,nA="";function nC(t,r){nv[ny++]=n_,nv[ny++]=nx,nx=t,n_=r}function nT(t,r,i){nb[nw++]=nM,nb[nw++]=nA,nb[nw++]=nS,nS=t;var s=nM;t=nA;var u=32-tb(s)-1;s&=~(1<<u),i+=1;var c=32-tb(r)+u;if(30<c){var h=u-u%5;c=(s&(1<<h)-1).toString(32),s>>=h,u-=h,nM=1<<32-tb(r)+u|i<<u|s,nA=c+t}else nM=1<<c|i<<u|s,nA=t}function nE(t){null!==t.return&&(nC(t,1),nT(t,1,0))}function nI(t){for(;t===nx;)nx=nv[--ny],nv[ny]=null,n_=nv[--ny],nv[ny]=null;for(;t===nS;)nS=nb[--nw],nb[nw]=null,nA=nb[--nw],nb[nw]=null,nM=nb[--nw],nb[nw]=null}var nD=null,nP=null,nR=!1,nL=!1,nk=null;function nO(t,r){var i=aK(5,null,null,0);i.elementType="DELETED",i.stateNode=r,i.return=t,null===(r=t.deletions)?(t.deletions=[i],t.flags|=16):r.push(i)}function nB(t,r){switch(t.tag){case 5:return null!==(r=eW(r,t.type,t.pendingProps))&&(t.stateNode=r,nD=t,nP=eK(r),!0);case 6:return null!==(r=ej(r,t.pendingProps))&&(t.stateNode=r,nD=t,nP=null,!0);case 13:if(null!==(r=eX(r))){var i=null!==nS?{id:nM,overflow:nA}:null;return t.memoizedState={dehydrated:r,treeContext:i,retryLane:0x40000000},(i=aK(18,null,null,0)).stateNode=r,i.return=t,t.child=i,nD=t,nP=null,!0}return!1;default:return!1}}function nN(t){return 0!=(1&t.mode)&&0==(128&t.flags)}function nF(t){if(nR){var r=nP;if(r){var i=r;if(!nB(t,r)){if(nN(t))throw Error(x(418));r=eZ(i);var s=nD;r&&nB(t,r)?nO(s,i):(t.flags=-4097&t.flags|2,nR=!1,nD=t)}}else{if(nN(t))throw Error(x(418));t.flags=-4097&t.flags|2,nR=!1,nD=t}}}function nz(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;nD=t}function nU(t){if(!es||t!==nD)return!1;if(!nR)return nz(t),nR=!0,!1;if(3!==t.tag&&(5!==t.tag||e8(t.type)&&!Q(t.type,t.memoizedProps))){var r=nP;if(r){if(nN(t)){for(t=nP;t;)t=eZ(t);throw Error(x(418))}for(;r;)nO(t,r),r=eZ(r)}}if(nz(t),13===t.tag){if(!es)throw Error(x(316));if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(x(317));nP=e3(t)}else nP=nD?eZ(t.stateNode):null;return!0}function nH(){es&&(nP=nD=null,nL=nR=!1)}function nG(t){null===nk?nk=[t]:nk.push(t)}function nV(t,r,i){if(null!==(t=i.ref)&&"function"!=typeof t&&"object"!=typeof t){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(x(309));var s=i.stateNode}if(!s)throw Error(x(147,t));var u=s,c=""+t;return null!==r&&null!==r.ref&&"function"==typeof r.ref&&r.ref._stringRef===c?r.ref:((r=function(t){var r=u.refs;r===nc&&(r=u.refs={}),null===t?delete r[c]:r[c]=t})._stringRef=c,r)}if("string"!=typeof t)throw Error(x(284));if(!i._owner)throw Error(x(290,t))}return t}function nW(t,r){throw Error(x(31,"[object Object]"===(t=Object.prototype.toString.call(r))?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function nj(t){return(0,t._init)(t._payload)}function nX(t){function r(r,i){if(t){var s=r.deletions;null===s?(r.deletions=[i],r.flags|=16):s.push(i)}}function i(i,s){if(!t)return null;for(;null!==s;)r(i,s),s=s.sibling;return null}function s(t,r){for(t=new Map;null!==r;)null!==r.key?t.set(r.key,r):t.set(r.index,r),r=r.sibling;return t}function u(t,r){return(t=aQ(t,r)).index=0,t.sibling=null,t}function c(r,i,s){return(r.index=s,t)?null!==(s=r.alternate)?(s=s.index)<i?(r.flags|=2,i):s:(r.flags|=2,i):(r.flags|=1048576,i)}function h(r){return t&&null===r.alternate&&(r.flags|=2),r}function p(t,r,i,s){return null===r||6!==r.tag?((r=a3(i,t.mode,s)).return=t,r):((r=u(r,i)).return=t,r)}function f(t,r,i,s){var c=i.type;return c===S?y(t,r,i.props.children,s,i.key):null!==r&&(r.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===L&&nj(c)===r.type)?((s=u(r,i.props)).ref=nV(t,r,i),s.return=t,s):((s=a0(i.type,i.key,i.props,null,t.mode,s)).ref=nV(t,r,i),s.return=t,s)}function v(t,r,i,s){return null===r||4!==r.tag||r.stateNode.containerInfo!==i.containerInfo||r.stateNode.implementation!==i.implementation?((r=a5(i,t.mode,s)).return=t,r):((r=u(r,i.children||[])).return=t,r)}function y(t,r,i,s,c){return null===r||7!==r.tag?((r=a1(i,t.mode,s,c)).return=t,r):((r=u(r,i)).return=t,r)}function _(t,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return(r=a3(""+r,t.mode,i)).return=t,r;if("object"==typeof r&&null!==r){switch(r.$$typeof){case b:return(i=a0(r.type,r.key,r.props,null,t.mode,i)).ref=nV(t,null,r),i.return=t,i;case w:return(r=a5(r,t.mode,i)).return=t,r;case L:return _(t,(0,r._init)(r._payload),i)}if(V(r)||B(r))return(r=a1(r,t.mode,i,null)).return=t,r;nW(t,r)}return null}function M(t,r,i,s){var u=null!==r?r.key:null;if("string"==typeof i&&""!==i||"number"==typeof i)return null!==u?null:p(t,r,""+i,s);if("object"==typeof i&&null!==i){switch(i.$$typeof){case b:return i.key===u?f(t,r,i,s):null;case w:return i.key===u?v(t,r,i,s):null;case L:return M(t,r,(u=i._init)(i._payload),s)}if(V(i)||B(i))return null!==u?null:y(t,r,i,s,null);nW(t,i)}return null}function A(t,r,i,s,u){if("string"==typeof s&&""!==s||"number"==typeof s)return p(r,t=t.get(i)||null,""+s,u);if("object"==typeof s&&null!==s){switch(s.$$typeof){case b:return f(r,t=t.get(null===s.key?i:s.key)||null,s,u);case w:return v(r,t=t.get(null===s.key?i:s.key)||null,s,u);case L:return A(t,r,i,(0,s._init)(s._payload),u)}if(V(s)||B(s))return y(r,t=t.get(i)||null,s,u,null);nW(r,s)}return null}return function p(f,v,y,C){if("object"==typeof y&&null!==y&&y.type===S&&null===y.key&&(y=y.props.children),"object"==typeof y&&null!==y){switch(y.$$typeof){case b:e:{for(var T=y.key,I=v;null!==I;){if(I.key===T){if((T=y.type)===S){if(7===I.tag){i(f,I.sibling),(v=u(I,y.props.children)).return=f,f=v;break e}}else if(I.elementType===T||"object"==typeof T&&null!==T&&T.$$typeof===L&&nj(T)===I.type){i(f,I.sibling),(v=u(I,y.props)).ref=nV(f,I,y),v.return=f,f=v;break e}i(f,I);break}r(f,I);I=I.sibling}y.type===S?((v=a1(y.props.children,f.mode,C,y.key)).return=f,f=v):((C=a0(y.type,y.key,y.props,null,f.mode,C)).ref=nV(f,v,y),C.return=f,f=C)}return h(f);case w:e:{for(I=y.key;null!==v;){if(v.key===I){if(4===v.tag&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){i(f,v.sibling),(v=u(v,y.children||[])).return=f,f=v;break e}else{i(f,v);break}}r(f,v);v=v.sibling}(v=a5(y,f.mode,C)).return=f,f=v}return h(f);case L:return p(f,v,(I=y._init)(y._payload),C)}if(V(y))return function(u,h,p,f){for(var v=null,y=null,x=h,b=h=0,w=null;null!==x&&b<p.length;b++){x.index>b?(w=x,x=null):w=x.sibling;var S=M(u,x,p[b],f);if(null===S){null===x&&(x=w);break}t&&x&&null===S.alternate&&r(u,x),h=c(S,h,b),null===y?v=S:y.sibling=S,y=S,x=w}if(b===p.length)return i(u,x),nR&&nC(u,b),v;if(null===x){for(;b<p.length;b++)null!==(x=_(u,p[b],f))&&(h=c(x,h,b),null===y?v=x:y.sibling=x,y=x);return nR&&nC(u,b),v}for(x=s(u,x);b<p.length;b++)null!==(w=A(x,u,b,p[b],f))&&(t&&null!==w.alternate&&x.delete(null===w.key?b:w.key),h=c(w,h,b),null===y?v=w:y.sibling=w,y=w);return t&&x.forEach(function(t){return r(u,t)}),nR&&nC(u,b),v}(f,v,y,C);if(B(y))return function(u,h,p,f){var v=B(p);if("function"!=typeof v)throw Error(x(150));if(null==(p=v.call(p)))throw Error(x(151));for(var y=v=null,b=h,w=h=0,S=null,C=p.next();null!==b&&!C.done;w++,C=p.next()){b.index>w?(S=b,b=null):S=b.sibling;var T=M(u,b,C.value,f);if(null===T){null===b&&(b=S);break}t&&b&&null===T.alternate&&r(u,b),h=c(T,h,w),null===y?v=T:y.sibling=T,y=T,b=S}if(C.done)return i(u,b),nR&&nC(u,w),v;if(null===b){for(;!C.done;w++,C=p.next())null!==(C=_(u,C.value,f))&&(h=c(C,h,w),null===y?v=C:y.sibling=C,y=C);return nR&&nC(u,w),v}for(b=s(u,b);!C.done;w++,C=p.next())null!==(C=A(b,u,w,C.value,f))&&(t&&null!==C.alternate&&b.delete(null===C.key?w:C.key),h=c(C,h,w),null===y?v=C:y.sibling=C,y=C);return t&&b.forEach(function(t){return r(u,t)}),nR&&nC(u,w),v}(f,v,y,C);nW(f,y)}return"string"==typeof y&&""!==y||"number"==typeof y?(y=""+y,null!==v&&6===v.tag?(i(f,v.sibling),(v=u(v,y)).return=f):(i(f,v),(v=a3(y,f.mode,C)).return=f),h(f=v)):i(f,v)}}var nY=nX(!0),n$=nX(!1),nJ={},nZ=ts(nJ),nK=ts(nJ),nq=ts(nJ);function nQ(t){if(t===nJ)throw Error(x(174));return t}function n0(t,r){tu(nq,r),tu(nK,t),tu(nZ,nJ),t=j(r),tl(nZ),tu(nZ,t)}function n1(){tl(nZ),tl(nK),tl(nq)}function n2(t){var r=nQ(nq.current),i=nQ(nZ.current);r=X(i,t.type,r),i!==r&&(tu(nK,t),tu(nZ,r))}function n3(t){nK.current===t&&(tl(nZ),tl(nK))}var n5=ts(0);function n4(t){for(var r=t;null!==r;){if(13===r.tag){var i=r.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||eY(i)||e$(i)))return r}else if(19===r.tag&&void 0!==r.memoizedProps.revealOrder){if(0!=(128&r.flags))return r}else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var n6=[];function n9(){for(var t=0;t<n6.length;t++){var r=n6[t];ei?r._workInProgressVersionPrimary=null:r._workInProgressVersionSecondary=null}n6.length=0}var n8=_.ReactCurrentDispatcher,n7=_.ReactCurrentBatchConfig,re=0,rt=null,rn=null,rr=null,ri=!1,ra=!1,ro=0,rs=0;function rl(){throw Error(x(321))}function ru(t,r){if(null===r)return!1;for(var i=0;i<r.length&&i<t.length;i++)if(!tj(t[i],r[i]))return!1;return!0}function rc(t,r,i,s,u,c){if(re=c,rt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,n8.current=null===t||null===t.memoizedState?rX:rY,t=i(s,u),ra){c=0;do{if(ra=!1,ro=0,25<=c)throw Error(x(301));c+=1,rr=rn=null,r.updateQueue=null,n8.current=r$,t=i(s,u)}while(ra)}if(n8.current=rj,r=null!==rn&&null!==rn.next,re=0,rr=rn=rt=null,ri=!1,r)throw Error(x(300));return t}function rh(){var t=0!==ro;return ro=0,t}function rd(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===rr?rt.memoizedState=rr=t:rr=rr.next=t,rr}function rp(){if(null===rn){var t=rt.alternate;t=null!==t?t.memoizedState:null}else t=rn.next;var r=null===rr?rt.memoizedState:rr.next;if(null!==r)rr=r,rn=t;else{if(null===t)throw Error(x(310));t={memoizedState:(rn=t).memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},null===rr?rt.memoizedState=rr=t:rr=rr.next=t}return rr}function rf(t,r){return"function"==typeof r?r(t):r}function rg(t){var r=rp(),i=r.queue;if(null===i)throw Error(x(311));i.lastRenderedReducer=t;var s=rn,u=s.baseQueue,c=i.pending;if(null!==c){if(null!==u){var h=u.next;u.next=c.next,c.next=h}s.baseQueue=u=c,i.pending=null}if(null!==u){c=u.next,s=s.baseState;var p=h=null,f=null,v=c;do{var y=v.lane;if((re&y)===y)null!==f&&(f=f.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),s=v.hasEagerState?v.eagerState:t(s,v.action);else{var _={lane:y,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};null===f?(p=f=_,h=s):f=f.next=_,rt.lanes|=y,ai|=y}v=v.next}while(null!==v&&v!==c);null===f?h=s:f.next=p,tj(s,r.memoizedState)||(r7=!0),r.memoizedState=s,r.baseState=h,r.baseQueue=f,i.lastRenderedState=s}if(null!==(t=i.interleaved)){u=t;do c=u.lane,rt.lanes|=c,ai|=c,u=u.next;while(u!==t)}else null===u&&(i.lanes=0);return[r.memoizedState,i.dispatch]}function rm(t){var r=rp(),i=r.queue;if(null===i)throw Error(x(311));i.lastRenderedReducer=t;var s=i.dispatch,u=i.pending,c=r.memoizedState;if(null!==u){i.pending=null;var h=u=u.next;do c=t(c,h.action),h=h.next;while(h!==u);tj(c,r.memoizedState)||(r7=!0),r.memoizedState=c,null===r.baseQueue&&(r.baseState=c),i.lastRenderedState=c}return[c,s]}function rv(){}function ry(t,r){var i=rt,s=rp(),u=r(),c=!tj(s.memoizedState,u);if(c&&(s.memoizedState=u,r7=!0),s=s.queue,rI(rb.bind(null,i,s,t),[t]),s.getSnapshot!==r||c||null!==rr&&1&rr.memoizedState.tag){if(i.flags|=2048,rM(9,r_.bind(null,i,s,u,r),void 0,null),null===i9)throw Error(x(349));0!=(30&re)||rx(i,r,u)}return u}function rx(t,r,i){t.flags|=16384,t={getSnapshot:r,value:i},null===(r=rt.updateQueue)?(r={lastEffect:null,stores:null},rt.updateQueue=r,r.stores=[t]):null===(i=r.stores)?r.stores=[t]:i.push(t)}function r_(t,r,i,s){r.value=i,r.getSnapshot=s,rw(r)&&aM(t,1,-1)}function rb(t,r,i){return i(function(){rw(r)&&aM(t,1,-1)})}function rw(t){var r=t.getSnapshot;t=t.value;try{var i=r();return!tj(t,i)}catch(t){return!0}}function rS(t){var r=rd();return"function"==typeof t&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rf,lastRenderedState:t},r.queue=t,t=t.dispatch=rU.bind(null,rt,t),[r.memoizedState,t]}function rM(t,r,i,s){return t={tag:t,create:r,destroy:i,deps:s,next:null},null===(r=rt.updateQueue)?(r={lastEffect:null,stores:null},rt.updateQueue=r,r.lastEffect=t.next=t):null===(i=r.lastEffect)?r.lastEffect=t.next=t:(s=i.next,i.next=t,t.next=s,r.lastEffect=t),t}function rA(){return rp().memoizedState}function rC(t,r,i,s){var u=rd();rt.flags|=t,u.memoizedState=rM(1|r,i,void 0,void 0===s?null:s)}function rT(t,r,i,s){var u=rp();s=void 0===s?null:s;var c=void 0;if(null!==rn){var h=rn.memoizedState;if(c=h.destroy,null!==s&&ru(s,h.deps)){u.memoizedState=rM(r,i,c,s);return}}rt.flags|=t,u.memoizedState=rM(1|r,i,c,s)}function rE(t,r){return rC(8390656,8,t,r)}function rI(t,r){return rT(2048,8,t,r)}function rD(t,r){return rT(4,2,t,r)}function rP(t,r){return rT(4,4,t,r)}function rR(t,r){return"function"==typeof r?(r(t=t()),function(){r(null)}):null!=r?(t=t(),r.current=t,function(){r.current=null}):void 0}function rL(t,r,i){return i=null!=i?i.concat([t]):null,rT(4,4,rR.bind(null,r,t),i)}function rk(){}function rO(t,r){var i=rp();r=void 0===r?null:r;var s=i.memoizedState;return null!==s&&null!==r&&ru(r,s[1])?s[0]:(i.memoizedState=[t,r],t)}function rB(t,r){var i=rp();r=void 0===r?null:r;var s=i.memoizedState;return null!==s&&null!==r&&ru(r,s[1])?s[0]:(t=t(),i.memoizedState=[t,r],t)}function rN(t,r){var i=tR;tR=0!==i&&4>i?i:4,t(!0);var s=n7.transition;n7.transition={};try{t(!1),r()}finally{tR=i,n7.transition=s}}function rF(){return rp().memoizedState}function rz(t,r,i){var s=aS(t);i={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null},rH(t)?rG(r,i):(rV(t,r,i),null!==(t=aM(t,s,i=aw()))&&rW(t,r,s))}function rU(t,r,i){var s=aS(t),u={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null};if(rH(t))rG(r,u);else{rV(t,r,u);var c=t.alternate;if(0===t.lanes&&(null===c||0===c.lanes)&&null!==(c=r.lastRenderedReducer))try{var h=r.lastRenderedState,p=c(h,i);if(u.hasEagerState=!0,u.eagerState=p,tj(p,h))return}catch(t){}finally{}null!==(t=aM(t,s,i=aw()))&&rW(t,r,s)}}function rH(t){var r=t.alternate;return t===rt||null!==r&&r===rt}function rG(t,r){ra=ri=!0;var i=t.pending;null===i?r.next=r:(r.next=i.next,i.next=r),t.pending=r}function rV(t,r,i){null!==i9&&0!=(1&t.mode)&&0==(2&i6)?(null===(t=r.interleaved)?(i.next=i,null===ne?ne=[r]:ne.push(r)):(i.next=t.next,t.next=i),r.interleaved=i):(null===(t=r.pending)?i.next=i:(i.next=t.next,t.next=i),r.pending=i)}function rW(t,r,i){if(0!=(4194240&i)){var s=r.lanes;s&=t.pendingLanes,i|=s,r.lanes=i,tP(t,i)}}var rj={readContext:t7,useCallback:rl,useContext:rl,useEffect:rl,useImperativeHandle:rl,useInsertionEffect:rl,useLayoutEffect:rl,useMemo:rl,useReducer:rl,useRef:rl,useState:rl,useDebugValue:rl,useDeferredValue:rl,useTransition:rl,useMutableSource:rl,useSyncExternalStore:rl,useId:rl,unstable_isNewReconciler:!1},rX={readContext:t7,useCallback:function(t,r){return rd().memoizedState=[t,void 0===r?null:r],t},useContext:t7,useEffect:rE,useImperativeHandle:function(t,r,i){return i=null!=i?i.concat([t]):null,rC(4194308,4,rR.bind(null,r,t),i)},useLayoutEffect:function(t,r){return rC(4194308,4,t,r)},useInsertionEffect:function(t,r){return rC(4,2,t,r)},useMemo:function(t,r){var i=rd();return r=void 0===r?null:r,t=t(),i.memoizedState=[t,r],t},useReducer:function(t,r,i){var s=rd();return r=void 0!==i?i(r):r,s.memoizedState=s.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},s.queue=t,t=t.dispatch=rz.bind(null,rt,t),[s.memoizedState,t]},useRef:function(t){var r=rd();return t={current:t},r.memoizedState=t},useState:rS,useDebugValue:rk,useDeferredValue:function(t){var r=rS(t),i=r[0],s=r[1];return rE(function(){var r=n7.transition;n7.transition={};try{s(t)}finally{n7.transition=r}},[t]),i},useTransition:function(){var t=rS(!1),r=t[0];return t=rN.bind(null,t[1]),rd().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,i){var s=rt,u=rd();if(nR){if(void 0===i)throw Error(x(407));i=i()}else{if(i=r(),null===i9)throw Error(x(349));0!=(30&re)||rx(s,r,i)}u.memoizedState=i;var c={value:i,getSnapshot:r};return u.queue=c,rE(rb.bind(null,s,c,t),[t]),s.flags|=2048,rM(9,r_.bind(null,s,c,i,r),void 0,null),i},useId:function(){var t=rd(),r=i9.identifierPrefix;if(nR){var i=nA,s=nM;r=":"+r+"R"+(i=(s&~(1<<32-tb(s)-1)).toString(32)+i),0<(i=ro++)&&(r+="H"+i.toString(32)),r+=":"}else r=":"+r+"r"+(i=rs++).toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},rY={readContext:t7,useCallback:rO,useContext:t7,useEffect:rI,useImperativeHandle:rL,useInsertionEffect:rD,useLayoutEffect:rP,useMemo:rB,useReducer:rg,useRef:rA,useState:function(){return rg(rf)},useDebugValue:rk,useDeferredValue:function(t){var r=rg(rf),i=r[0],s=r[1];return rI(function(){var r=n7.transition;n7.transition={};try{s(t)}finally{n7.transition=r}},[t]),i},useTransition:function(){return[rg(rf)[0],rp().memoizedState]},useMutableSource:rv,useSyncExternalStore:ry,useId:rF,unstable_isNewReconciler:!1},r$={readContext:t7,useCallback:rO,useContext:t7,useEffect:rI,useImperativeHandle:rL,useInsertionEffect:rD,useLayoutEffect:rP,useMemo:rB,useReducer:rm,useRef:rA,useState:function(){return rm(rf)},useDebugValue:rk,useDeferredValue:function(t){var r=rm(rf),i=r[0],s=r[1];return rI(function(){var r=n7.transition;n7.transition={};try{s(t)}finally{n7.transition=r}},[t]),i},useTransition:function(){return[rm(rf)[0],rp().memoizedState]},useMutableSource:rv,useSyncExternalStore:ry,useId:rF,unstable_isNewReconciler:!1};function rJ(t,r){try{var i="",s=r;do i+=function(t){switch(t.tag){case 5:return tt(t.type);case 16:return tt("Lazy");case 13:return tt("Suspense");case 19:return tt("SuspenseList");case 0:case 2:case 15:return t=tr(t.type,!1);case 11:return t=tr(t.type.render,!1);case 1:return t=tr(t.type,!0);default:return""}}(s),s=s.return;while(s);var u=i}catch(t){u="\nError generating stack: "+t.message+"\n"+t.stack}return{value:t,source:r,stack:u}}function rZ(t,r){}var rK="function"==typeof WeakMap?WeakMap:Map;function rq(t,r,i){(i=ni(-1,i)).tag=3,i.payload={element:null};var s=r.value;return i.callback=function(){ad||(ad=!0,ap=s),rZ(t,r)},i}function rQ(t,r,i){(i=ni(-1,i)).tag=3;var s=t.type.getDerivedStateFromError;if("function"==typeof s){var u=r.value;i.payload=function(){return s(u)},i.callback=function(){rZ(t,r)}}var c=t.stateNode;return null!==c&&"function"==typeof c.componentDidCatch&&(i.callback=function(){rZ(t,r),"function"!=typeof s&&(null===af?af=new Set([this]):af.add(this));var i=r.stack;this.componentDidCatch(r.value,{componentStack:null!==i?i:""})}),i}function r0(t,r,i){var s=t.pingCache;if(null===s){s=t.pingCache=new rK;var u=new Set;s.set(r,u)}else void 0===(u=s.get(r))&&(u=new Set,s.set(r,u));u.has(i)||(u.add(i),t=aj.bind(null,t,r,i),r.then(t,t))}function r1(t){do{var r;if((r=13===t.tag)&&(r=null===(r=t.memoizedState)||null!==r.dehydrated),r)return t;t=t.return}while(null!==t);return null}function r2(t,r,i,s,u){return 0==(1&t.mode)?(t===r?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,1===i.tag&&(null===i.alternate?i.tag=17:((r=ni(-1,1)).tag=2,na(i,r))),i.lanes|=1),t):(t.flags|=65536,t.lanes=u,t)}function r3(t){t.flags|=4}function r5(t,r){if(null!==t&&t.child===r.child)return!0;if(0!=(16&r.flags))return!1;for(t=r.child;null!==t;){if(0!=(12854&t.flags)||0!=(12854&t.subtreeFlags))return!1;t=t.sibling}return!0}if(ea)r=function(t,r){for(var i=r.child;null!==i;){if(5===i.tag||6===i.tag)Z(t,i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===r)break;for(;null===i.sibling;){if(null===i.return||i.return===r)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},s=function(){},u=function(t,r,i,s,u){(t=t.memoizedProps)!==s&&(i=q(r.stateNode,i,t,s,u,nQ(nZ.current)),(r.updateQueue=i)&&r3(r))},c=function(t,r,i,s){i!==s&&r3(r)};else if(eo){r=function(t,i,s,u){for(var c=i.child;null!==c;){if(5===c.tag){var h=c.stateNode;s&&u&&(h=eG(h,c.type,c.memoizedProps,c)),Z(t,h)}else if(6===c.tag)h=c.stateNode,s&&u&&(h=eV(h,c.memoizedProps,c)),Z(t,h);else if(4!==c.tag){if(22===c.tag&&null!==c.memoizedState)null!==(h=c.child)&&(h.return=c),r(t,c,!0,!0);else if(null!==c.child){c.child.return=c,c=c.child;continue}}if(c===i)break;for(;null===c.sibling;){if(null===c.return||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}};var r4=function(t,r,i,s){for(var u=r.child;null!==u;){if(5===u.tag){var c=u.stateNode;i&&s&&(c=eG(c,u.type,u.memoizedProps,u)),ez(t,c)}else if(6===u.tag)c=u.stateNode,i&&s&&(c=eV(c,u.memoizedProps,u)),ez(t,c);else if(4!==u.tag){if(22===u.tag&&null!==u.memoizedState)null!==(c=u.child)&&(c.return=u),r4(t,u,!0,!0);else if(null!==u.child){u.child.return=u,u=u.child;continue}}if(u===r)break;for(;null===u.sibling;){if(null===u.return||u.return===r)return;u=u.return}u.sibling.return=u.return,u=u.sibling}};s=function(t,r){var i=r.stateNode;if(!r5(t,r)){var s=eF(t=i.containerInfo);r4(s,r,!1,!1),i.pendingChildren=s,r3(r),eU(t,s)}},u=function(t,i,s,u,c){var h=t.stateNode,p=t.memoizedProps;if((t=r5(t,i))&&p===u)i.stateNode=h;else{var f=i.stateNode,v=nQ(nZ.current),y=null;p!==u&&(y=q(f,s,p,u,c,v)),t&&null===y?i.stateNode=h:(K(h=eN(h,y,s,p,u,i,t,f),s,u,c,v)&&r3(i),i.stateNode=h,t?r3(i):r(h,i,!1,!1))}},c=function(t,r,i,s){i!==s?(t=nQ(nq.current),i=nQ(nZ.current),r.stateNode=ee(s,t,i,r),r3(r)):r.stateNode=t.stateNode}}else s=function(){},u=function(){},c=function(){};function r6(t,r){if(!nR)switch(t.tailMode){case"hidden":r=t.tail;for(var i=null;null!==r;)null!==r.alternate&&(i=r),r=r.sibling;null===i?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var s=null;null!==i;)null!==i.alternate&&(s=i),i=i.sibling;null===s?r||null===t.tail?t.tail=null:t.tail.sibling=null:s.sibling=null}}function r9(t){var r=null!==t.alternate&&t.alternate.child===t.child,i=0,s=0;if(r)for(var u=t.child;null!==u;)i|=u.lanes|u.childLanes,s|=0xe00000&u.subtreeFlags,s|=0xe00000&u.flags,u.return=t,u=u.sibling;else for(u=t.child;null!==u;)i|=u.lanes|u.childLanes,s|=u.subtreeFlags,s|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=s,t.childLanes=i,r}var r8=_.ReactCurrentOwner,r7=!1;function ie(t,r,i,s){r.child=null===t?n$(r,null,i,s):nY(r,t.child,i,s)}function it(t,r,i,s,u){i=i.render;var c=r.ref;return(t8(r,u),s=rc(t,r,i,s,c,u),i=rh(),null===t||r7)?(nR&&i&&nE(r),r.flags|=1,ie(t,r,s,u),r.child):(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~u,iS(t,r,u))}function ir(t,r,i,s,u){if(null===t){var c=i.type;return"function"!=typeof c||aq(c)||void 0!==c.defaultProps||null!==i.compare||void 0!==i.defaultProps?((t=a0(i.type,null,s,r,r.mode,u)).ref=r.ref,t.return=r,r.child=t):(r.tag=15,r.type=c,ii(t,r,c,s,u))}if(c=t.child,0==(t.lanes&u)){var h=c.memoizedProps;if((i=null!==(i=i.compare)?i:tq)(h,s)&&t.ref===r.ref)return iS(t,r,u)}return r.flags|=1,(t=aQ(c,s)).ref=r.ref,t.return=r,r.child=t}function ii(t,r,i,s,u){if(null!==t&&tq(t.memoizedProps,s)&&t.ref===r.ref){if(r7=!1,0==(t.lanes&u))return r.lanes=t.lanes,iS(t,r,u);else 0!=(131072&t.flags)&&(r7=!0)}return is(t,r,i,s,u)}function ia(t,r,i){var s=r.pendingProps,u=s.children,c=null!==t?t.memoizedState:null;if("hidden"===s.mode){if(0==(1&r.mode))r.memoizedState={baseLanes:0,cachePool:null},tu(at,ae),ae|=i;else{if(0==(0x40000000&i))return t=null!==c?c.baseLanes|i:i,r.lanes=r.childLanes=0x40000000,r.memoizedState={baseLanes:t,cachePool:null},r.updateQueue=null,tu(at,ae),ae|=t,null;r.memoizedState={baseLanes:0,cachePool:null},s=null!==c?c.baseLanes:i,tu(at,ae),ae|=s}}else null!==c?(s=c.baseLanes|i,r.memoizedState=null):s=i,tu(at,ae),ae|=s;return ie(t,r,u,i),r.child}function io(t,r){var i=r.ref;(null===t&&null!==i||null!==t&&t.ref!==i)&&(r.flags|=512,r.flags|=2097152)}function is(t,r,i,s,u){var c=tg(i)?tp:th.current;return(c=tf(r,c),t8(r,u),i=rc(t,r,i,s,c,u),s=rh(),null===t||r7)?(nR&&s&&nE(r),r.flags|=1,ie(t,r,i,u),r.child):(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~u,iS(t,r,u))}function il(t,r,i,s,u){if(tg(i)){var c=!0;tx(r)}else c=!1;if(t8(r,u),null===r.stateNode)null!==t&&(t.alternate=null,r.alternate=null,r.flags|=2),nf(r,i,s),nm(r,i,s,u),s=!0;else if(null===t){var h=r.stateNode,p=r.memoizedProps;h.props=p;var f=h.context,v=i.contextType;v="object"==typeof v&&null!==v?t7(v):tf(r,v=tg(i)?tp:th.current);var y=i.getDerivedStateFromProps,x="function"==typeof y||"function"==typeof h.getSnapshotBeforeUpdate;x||"function"!=typeof h.UNSAFE_componentWillReceiveProps&&"function"!=typeof h.componentWillReceiveProps||(p!==s||f!==v)&&ng(r,h,s,v),nt=!1;var _=r.memoizedState;h.state=_,nl(r,s,h,u),f=r.memoizedState,p!==s||_!==f||td.current||nt?("function"==typeof y&&(nh(r,i,y,s),f=r.memoizedState),(p=nt||np(r,i,p,s,_,f,v))?(x||"function"!=typeof h.UNSAFE_componentWillMount&&"function"!=typeof h.componentWillMount||("function"==typeof h.componentWillMount&&h.componentWillMount(),"function"==typeof h.UNSAFE_componentWillMount&&h.UNSAFE_componentWillMount()),"function"==typeof h.componentDidMount&&(r.flags|=4194308)):("function"==typeof h.componentDidMount&&(r.flags|=4194308),r.memoizedProps=s,r.memoizedState=f),h.props=s,h.state=f,h.context=v,s=p):("function"==typeof h.componentDidMount&&(r.flags|=4194308),s=!1)}else{h=r.stateNode,nr(t,r),p=r.memoizedProps,v=r.type===r.elementType?p:tQ(r.type,p),h.props=v,x=r.pendingProps,_=h.context,f="object"==typeof(f=i.contextType)&&null!==f?t7(f):tf(r,f=tg(i)?tp:th.current);var b=i.getDerivedStateFromProps;(y="function"==typeof b||"function"==typeof h.getSnapshotBeforeUpdate)||"function"!=typeof h.UNSAFE_componentWillReceiveProps&&"function"!=typeof h.componentWillReceiveProps||(p!==x||_!==f)&&ng(r,h,s,f),nt=!1,_=r.memoizedState,h.state=_,nl(r,s,h,u);var w=r.memoizedState;p!==x||_!==w||td.current||nt?("function"==typeof b&&(nh(r,i,b,s),w=r.memoizedState),(v=nt||np(r,i,v,s,_,w,f)||!1)?(y||"function"!=typeof h.UNSAFE_componentWillUpdate&&"function"!=typeof h.componentWillUpdate||("function"==typeof h.componentWillUpdate&&h.componentWillUpdate(s,w,f),"function"==typeof h.UNSAFE_componentWillUpdate&&h.UNSAFE_componentWillUpdate(s,w,f)),"function"==typeof h.componentDidUpdate&&(r.flags|=4),"function"==typeof h.getSnapshotBeforeUpdate&&(r.flags|=1024)):("function"!=typeof h.componentDidUpdate||p===t.memoizedProps&&_===t.memoizedState||(r.flags|=4),"function"!=typeof h.getSnapshotBeforeUpdate||p===t.memoizedProps&&_===t.memoizedState||(r.flags|=1024),r.memoizedProps=s,r.memoizedState=w),h.props=s,h.state=w,h.context=f,s=v):("function"!=typeof h.componentDidUpdate||p===t.memoizedProps&&_===t.memoizedState||(r.flags|=4),"function"!=typeof h.getSnapshotBeforeUpdate||p===t.memoizedProps&&_===t.memoizedState||(r.flags|=1024),s=!1)}return iu(t,r,i,s,c,u)}function iu(t,r,i,s,u,c){io(t,r);var h=0!=(128&r.flags);if(!s&&!h)return u&&t_(r,i,!1),iS(t,r,c);s=r.stateNode,r8.current=r;var p=h&&"function"!=typeof i.getDerivedStateFromError?null:s.render();return r.flags|=1,null!==t&&h?(r.child=nY(r,t.child,null,c),r.child=nY(r,null,p,c)):ie(t,r,p,c),r.memoizedState=s.state,u&&t_(r,i,!0),r.child}function ic(t){var r=t.stateNode;r.pendingContext?tv(t,r.pendingContext,r.pendingContext!==r.context):r.context&&tv(t,r.context,!1),n0(t,r.containerInfo)}function ih(t,r,i,s,u){return nH(),nG(u),r.flags|=256,ie(t,r,i,s),r.child}var id={dehydrated:null,treeContext:null,retryLane:0};function ip(t){return{baseLanes:t,cachePool:null}}function ig(t,r,i){var s,u=r.pendingProps,c=n5.current,h=!1,p=0!=(128&r.flags);if((s=p)||(s=(null===t||null!==t.memoizedState)&&0!=(2&c)),s?(h=!0,r.flags&=-129):(null===t||null!==t.memoizedState)&&(c|=1),tu(n5,1&c),null===t)return(nF(r),null!==(t=r.memoizedState)&&null!==(t=t.dehydrated))?(0==(1&r.mode)?r.lanes=1:e$(t)?r.lanes=8:r.lanes=0x40000000,null):(c=u.children,t=u.fallback,h?(u=r.mode,h=r.child,c={mode:"hidden",children:c},0==(1&u)&&null!==h?(h.childLanes=0,h.pendingProps=c):h=a2(c,u,0,null),t=a1(t,u,i,null),h.return=r,t.return=r,h.sibling=t,r.child=h,r.child.memoizedState=ip(i),r.memoizedState=id,t):im(r,c));if(null!==(c=t.memoizedState)){if(null!==(s=c.dehydrated)){if(p)return 256&r.flags?(r.flags&=-257,ix(t,r,i,Error(x(422)))):null!==r.memoizedState?(r.child=t.child,r.flags|=128,null):(h=u.fallback,c=r.mode,u=a2({mode:"visible",children:u.children},c,0,null),h=a1(h,c,i,null),h.flags|=2,u.return=r,h.return=r,u.sibling=h,r.child=u,0!=(1&r.mode)&&nY(r,t.child,null,i),r.child.memoizedState=ip(i),r.memoizedState=id,h);if(0==(1&r.mode))r=ix(t,r,i,null);else if(e$(s))r=ix(t,r,i,Error(x(419)));else if(u=0!=(i&t.childLanes),r7||u){if(null!==(u=i9)){switch(i&-i){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:h=32;break;case 0x20000000:h=0x10000000;break;default:h=0}0!==(u=0!=(h&(u.suspendedLanes|i))?0:h)&&u!==c.retryLane&&(c.retryLane=u,aM(t,u,-1))}aN(),r=ix(t,r,i,Error(x(421)))}else eY(s)?(r.flags|=128,r.child=t.child,eJ(s,r=aY.bind(null,t)),r=null):(i=c.treeContext,es&&(nP=eQ(s),nD=r,nR=!0,nk=null,nL=!1,null!==i&&(nb[nw++]=nM,nb[nw++]=nA,nb[nw++]=nS,nM=i.id,nA=i.overflow,nS=r)),r=im(r,r.pendingProps.children),r.flags|=4096);return r};}return h?(u=iy(t,r,u.children,u.fallback,i),h=r.child,c=t.child.memoizedState,h.memoizedState=null===c?ip(i):{baseLanes:c.baseLanes|i,cachePool:null},h.childLanes=t.childLanes&~i,r.memoizedState=id,u):(i=iv(t,r,u.children,i),r.memoizedState=null,i)}function im(t,r){return(r=a2({mode:"visible",children:r},t.mode,0,null)).return=t,t.child=r}function iv(t,r,i,s){var u=t.child;return t=u.sibling,i=aQ(u,{mode:"visible",children:i}),0==(1&r.mode)&&(i.lanes=s),i.return=r,i.sibling=null,null!==t&&(null===(s=r.deletions)?(r.deletions=[t],r.flags|=16):s.push(t)),r.child=i}function iy(t,r,i,s,u){var c=r.mode,h=(t=t.child).sibling,p={mode:"hidden",children:i};return 0==(1&c)&&r.child!==t?((i=r.child).childLanes=0,i.pendingProps=p,r.deletions=null):(i=aQ(t,p)).subtreeFlags=0xe00000&t.subtreeFlags,null!==h?s=aQ(h,s):(s=a1(s,c,u,null),s.flags|=2),s.return=r,i.return=r,i.sibling=s,r.child=i,s}function ix(t,r,i,s){return null!==s&&nG(s),nY(r,t.child,null,i),t=im(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function i_(t,r,i){t.lanes|=r;var s=t.alternate;null!==s&&(s.lanes|=r),t9(t.return,r,i)}function ib(t,r,i,s,u){var c=t.memoizedState;null===c?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:u}:(c.isBackwards=r,c.rendering=null,c.renderingStartTime=0,c.last=s,c.tail=i,c.tailMode=u)}function iw(t,r,i){var s=r.pendingProps,u=s.revealOrder,c=s.tail;if(ie(t,r,s.children,i),0!=(2&(s=n5.current)))s=1&s|2,r.flags|=128;else{if(null!==t&&0!=(128&t.flags))e:for(t=r.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&i_(t,i,r);else if(19===t.tag)i_(t,i,r);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===r)break;for(;null===t.sibling;){if(null===t.return||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(tu(n5,s),0==(1&r.mode))r.memoizedState=null;else switch(u){case"forwards":for(u=null,i=r.child;null!==i;)null!==(t=i.alternate)&&null===n4(t)&&(u=i),i=i.sibling;null===(i=u)?(u=r.child,r.child=null):(u=i.sibling,i.sibling=null),ib(r,!1,u,i,c);break;case"backwards":for(i=null,u=r.child,r.child=null;null!==u;){if(null!==(t=u.alternate)&&null===n4(t)){r.child=u;break}t=u.sibling,u.sibling=i,i=u,u=t}ib(r,!0,i,null,c);break;case"together":ib(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function iS(t,r,i){if(null!==t&&(r.dependencies=t.dependencies),ai|=r.lanes,0==(i&r.childLanes))return null;if(null!==t&&r.child!==t.child)throw Error(x(153));if(null!==r.child){for(i=aQ(t=r.child,t.pendingProps),r.child=i,i.return=r;null!==t.sibling;)t=t.sibling,(i=i.sibling=aQ(t,t.pendingProps)).return=r;i.sibling=null}return r.child}var iM=!1,iA=!1,iC="function"==typeof WeakSet?WeakSet:Set,iT=null;function iE(t,r){var i=t.ref;if(null!==i){if("function"==typeof i)try{i(null)}catch(i){aW(t,r,i)}else i.current=null}}function iI(t,r,i){try{i()}catch(i){aW(t,r,i)}}var iD=!1;function iP(t,r,i){var s=r.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var u=s=s.next;do{if((u.tag&t)===t){var c=u.destroy;u.destroy=void 0,void 0!==c&&iI(r,i,c)}u=u.next}while(u!==s)}}function iR(t,r){if(null!==(r=null!==(r=r.updateQueue)?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var s=i.create;i.destroy=s()}i=i.next}while(i!==r)}}function iL(t){var r=t.ref;if(null!==r){var i=t.stateNode;if(5===t.tag)t=W(i);else t=i;"function"==typeof r?r(t):r.current=t}}function ik(t,r,i){if(tW&&"function"==typeof tW.onCommitFiberUnmount)try{tW.onCommitFiberUnmount(tV,r)}catch(t){}switch(r.tag){case 0:case 11:case 14:case 15:if(null!==(t=r.updateQueue)&&null!==(t=t.lastEffect)){var s=t=t.next;do{var u=s,c=u.destroy;u=u.tag,void 0!==c&&(0!=(2&u)?iI(r,i,c):0!=(4&u)&&iI(r,i,c)),s=s.next}while(s!==t)}break;case 1:if(iE(r,i),"function"==typeof(t=r.stateNode).componentWillUnmount)try{t.props=r.memoizedProps,t.state=r.memoizedState,t.componentWillUnmount()}catch(t){aW(r,i,t)}break;case 5:iE(r,i);break;case 4:ea?iz(t,r,i):eo&&eo&&(i=eF(r=r.stateNode.containerInfo),eH(r,i))}}function iO(t,r,i){for(var s=r;;)if(ik(t,s,i),null===s.child||ea&&4===s.tag){if(s===r)break;for(;null===s.sibling;){if(null===s.return||s.return===r)return;s=s.return}s.sibling.return=s.return,s=s.sibling}else s.child.return=s,s=s.child}function iB(t){return 5===t.tag||3===t.tag||4===t.tag}function iN(t){e:for(;;){for(;null===t.sibling;){if(null===t.return||iB(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue e;if(null===t.child||4===t.tag)continue e;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function iF(t){if(ea){e:{for(var r=t.return;null!==r;){if(iB(r))break e;r=r.return}throw Error(x(160))}var i=r;switch(i.tag){case 5:r=i.stateNode,32&i.flags&&(eP(r),i.flags&=-33),i=iN(t),function t(r,i,s){var u=r.tag;if(5===u||6===u)r=r.stateNode,i?eT(s,r,i):ew(s,r);else if(4!==u&&null!==(r=r.child))for(t(r,i,s),r=r.sibling;null!==r;)t(r,i,s),r=r.sibling}(t,i,r);break;case 3:case 4:r=i.stateNode.containerInfo,i=iN(t),function t(r,i,s){var u=r.tag;if(5===u||6===u)r=r.stateNode,i?eE(s,r,i):eS(s,r);else if(4!==u&&null!==(r=r.child))for(t(r,i,s),r=r.sibling;null!==r;)t(r,i,s),r=r.sibling}(t,i,r);break;default:throw Error(x(161))}}}function iz(t,r,i){for(var s,u,c=r,h=!1;;){if(!h){h=c.return;e:for(;;){if(null===h)throw Error(x(160));switch(s=h.stateNode,h.tag){case 5:u=!1;break e;case 3:case 4:s=s.containerInfo,u=!0;break e}h=h.return}h=!0}if(5===c.tag||6===c.tag)iO(t,c,i),u?eD(s,c.stateNode):eI(s,c.stateNode);else if(18===c.tag)u?e9(s,c.stateNode):e6(s,c.stateNode);else if(4===c.tag){if(null!==c.child){s=c.stateNode.containerInfo,u=!0,c.child.return=c,c=c.child;continue}}else if(ik(t,c,i),null!==c.child){c.child.return=c,c=c.child;continue}if(c===r)break;for(;null===c.sibling;){if(null===c.return||c.return===r)return;4===(c=c.return).tag&&(h=!1)}c.sibling.return=c.return,c=c.sibling}}function iU(t,r){if(ea){switch(r.tag){case 0:case 11:case 14:case 15:iP(3,r,r.return),iR(3,r),iP(5,r,r.return);return;case 1:case 12:case 17:return;case 5:var i=r.stateNode;if(null!=i){var s=r.memoizedProps;t=null!==t?t.memoizedProps:s;var u=r.type,c=r.updateQueue;r.updateQueue=null,null!==c&&eC(i,c,u,t,s,r)}return;case 6:if(null===r.stateNode)throw Error(x(162));i=r.memoizedProps,eM(r.stateNode,null!==t?t.memoizedProps:i,i);return;case 3:es&&null!==t&&t.memoizedState.isDehydrated&&e5(r.stateNode.containerInfo);return;case 13:case 19:iH(r);return}throw Error(x(163))}switch(r.tag){case 0:case 11:case 14:case 15:iP(3,r,r.return),iR(3,r),iP(5,r,r.return);return;case 12:case 22:case 23:return;case 13:case 19:iH(r);return;case 3:es&&null!==t&&t.memoizedState.isDehydrated&&e5(r.stateNode.containerInfo)}e:if(eo){switch(r.tag){case 1:case 5:case 6:break e;case 3:case 4:eH((r=r.stateNode).containerInfo,r.pendingChildren);break e}throw Error(x(163))}}function iH(t){var r=t.updateQueue;if(null!==r){t.updateQueue=null;var i=t.stateNode;null===i&&(i=t.stateNode=new iC),r.forEach(function(r){var s=a$.bind(null,t,r);i.has(r)||(i.add(r),r.then(s,s))})}}function iG(t){for(;null!==iT;){var r=iT;if(0!=(8772&r.flags)){var i=r.alternate;try{if(0!=(8772&r.flags))switch(r.tag){case 0:case 11:case 15:iA||iR(5,r);break;case 1:var s=r.stateNode;if(4&r.flags&&!iA){if(null===i)s.componentDidMount();else{var u=r.elementType===r.type?i.memoizedProps:tQ(r.type,i.memoizedProps);s.componentDidUpdate(u,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}}var c=r.updateQueue;null!==c&&nu(r,c,s);break;case 3:var h=r.updateQueue;if(null!==h){if(i=null,null!==r.child)switch(r.child.tag){case 5:i=W(r.child.stateNode);break;case 1:i=r.child.stateNode}nu(r,h,i)}break;case 5:var p=r.stateNode;null===i&&4&r.flags&&eA(p,r.type,r.memoizedProps,r);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(es&&null===r.memoizedState){var f=r.alternate;if(null!==f){var v=f.memoizedState;if(null!==v){var y=v.dehydrated;null!==y&&e4(y)}}}break;default:throw Error(x(163))}iA||512&r.flags&&iL(r)}catch(t){aW(r,r.return,t)}}if(r===t){iT=null;break}if(null!==(i=r.sibling)){i.return=r.return,iT=i;break}iT=r.return}}function iV(t){for(;null!==iT;){var r=iT;if(r===t){iT=null;break}var i=r.sibling;if(null!==i){i.return=r.return,iT=i;break}iT=r.return}}function iW(t){for(;null!==iT;){var r=iT;try{switch(r.tag){case 0:case 11:case 15:var i=r.return;try{iR(4,r)}catch(t){aW(r,i,t)}break;case 1:var s=r.stateNode;if("function"==typeof s.componentDidMount){var u=r.return;try{s.componentDidMount()}catch(t){aW(r,u,t)}}var c=r.return;try{iL(r)}catch(t){aW(r,c,t)}break;case 5:var h=r.return;try{iL(r)}catch(t){aW(r,h,t)}}}catch(t){aW(r,r.return,t)}if(r===t){iT=null;break}var p=r.sibling;if(null!==p){p.return=r.return,iT=p;break}iT=r.return}}var ij=0,iX=1,iY=2,i$=3,iJ=4;if("function"==typeof Symbol&&Symbol.for){var iZ=Symbol.for;ij=iZ("selector.component"),iX=iZ("selector.has_pseudo_class"),iY=iZ("selector.role"),i$=iZ("selector.test_id"),iJ=iZ("selector.text")}function iK(t){var r=el(t);if(null!=r){if("string"!=typeof r.memoizedProps["data-testname"])throw Error(x(364));return r}if(null===(t=eg(t)))throw Error(x(362));return t.stateNode.current}function iq(t,r){switch(r.$$typeof){case ij:if(t.type===r.value)return!0;break;case iX:e:{r=r.value,t=[t,0];for(var i=0;i<t.length;){var s=t[i++],u=t[i++],c=r[u];if(5!==s.tag||!ey(s)){for(;null!=c&&iq(s,c);)c=r[++u];if(u===r.length){r=!0;break e}for(s=s.child;null!==s;)t.push(s,u),s=s.sibling}}r=!1}return r;case iY:if(5===t.tag&&ex(t.stateNode,r.value))return!0;break;case iJ:if((5===t.tag||6===t.tag)&&null!==(t=ev(t))&&0<=t.indexOf(r.value))return!0;break;case i$:if(5===t.tag&&"string"==typeof(t=t.memoizedProps["data-testname"])&&t.toLowerCase()===r.value.toLowerCase())return!0;break;default:throw Error(x(365))}return!1}function iQ(t){switch(t.$$typeof){case ij:return"<"+(N(t.value)||"Unknown")+">";case iX:return":has("+(iQ(t)||"")+")";case iY:return'[role="'+t.value+'"]';case iJ:return'"'+t.value+'"';case i$:return'[data-testname="'+t.value+'"]';default:throw Error(x(365))}}function i0(t,r){var i=[];t=[t,0];for(var s=0;s<t.length;){var u=t[s++],c=t[s++],h=r[c];if(5!==u.tag||!ey(u)){for(;null!=h&&iq(u,h);)h=r[++c];if(c===r.length)i.push(u);else for(u=u.child;null!==u;)t.push(u,c),u=u.sibling}}return i}function i1(t,r){if(!ef)throw Error(x(363));t=i0(t=iK(t),r),r=[],t=Array.from(t);for(var i=0;i<t.length;){var s=t[i++];if(5===s.tag)ey(s)||r.push(s.stateNode);else for(s=s.child;null!==s;)t.push(s),s=s.sibling}return r}var i2=Math.ceil,i3=_.ReactCurrentDispatcher,i5=_.ReactCurrentOwner,i4=_.ReactCurrentBatchConfig,i6=0,i9=null,i8=null,i7=0,ae=0,at=ts(0),an=0,ar=null,ai=0,aa=0,ao=0,as=null,al=null,au=0,ac=1/0;function ah(){ac=tF()+500}var ad=!1,ap=null,af=null,ag=!1,am=null,av=0,ay=0,ax=null,a_=-1,ab=0;function aw(){return 0!=(6&i6)?tF():-1!==a_?a_:a_=tF()}function aS(t){return 0==(1&t.mode)?1:0!=(2&i6)&&0!==i7?i7&-i7:null!==tK.transition?(0===ab&&(t=tM,0==(4194240&(tM<<=1))&&(tM=64),ab=t),ab):0!==(t=tR)?t:ec()}function aM(t,r,i){if(50<ay)throw ay=0,ax=null,Error(x(185));var s=aA(t,r);return null===s?null:(tD(s,r,i),(0==(2&i6)||s!==i9)&&(s===i9&&(0==(2&i6)&&(aa|=r),4===an&&aD(s,i7)),aC(s,i),1===r&&0===i6&&0==(1&t.mode)&&(ah(),tY&&tZ())),s)}function aA(t,r){t.lanes|=r;var i=t.alternate;for(null!==i&&(i.lanes|=r),i=t,t=t.return;null!==t;)t.childLanes|=r,null!==(i=t.alternate)&&(i.childLanes|=r),i=t,t=t.return;return 3===i.tag?i.stateNode:null}function aC(t,r){var i,s=t.callbackNode;!function(t,r){for(var i=t.suspendedLanes,s=t.pingedLanes,u=t.expirationTimes,c=t.pendingLanes;0<c;){var h=31-tb(c),p=1<<h,f=u[h];-1===f?(0==(p&i)||0!=(p&s))&&(u[h]=function(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;default:return -1}}(p,r)):f<=r&&(t.expiredLanes|=p),c&=~p}}(t,r);var u=tT(t,t===i9?i7:0);if(0===u)null!==s&&tO(s),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(null!=s&&tO(s),1===r){;0===t.tag?(i=aP.bind(null,t),tY=!0,tJ(i)):tJ(aP.bind(null,t)),ed?ep(function(){0===i6&&tZ()}):tk(tz,tZ),s=null}else{switch(tL(u)){case 1:s=tz;break;case 4:s=tU;break;case 16:default:s=tH;break;case 0x20000000:s=tG}s=function(t,r){return tk(t,r)}(s,aT.bind(null,t))}t.callbackPriority=r,t.callbackNode=s}}function aT(t,r){if(a_=-1,ab=0,0!=(6&i6))throw Error(x(327));var i=t.callbackNode;if(aG()&&t.callbackNode!==i)return null;var s=tT(t,t===i9?i7:0);if(0===s)return null;if(0!=(30&s)||0!=(s&t.expiredLanes)||r)r=aF(t,s);else{r=s;var u=i6;i6|=2;var c=aB();for((i9!==t||i7!==r)&&(ah(),ak(t,r));;)try{(function(){for(;null!==i8&&!tB();)az(i8)})();break}catch(r){aO(t,r)}t5(),i3.current=c,i6=u,null!==i8?r=0:(i9=null,i7=0,r=an)}if(0!==r){if(2===r&&0!==(u=tE(t))&&(s=u,r=aE(t,u)),1===r)throw i=ar,ak(t,0),aD(t,s),aC(t,tF()),i;if(6===r)aD(t,s);else{if(u=t.current.alternate,0==(30&s)&&!function(t){for(var r=t;;){if(16384&r.flags){var i=r.updateQueue;if(null!==i&&null!==(i=i.stores))for(var s=0;s<i.length;s++){var u=i[s],c=u.getSnapshot;u=u.value;try{if(!tj(c(),u))return!1}catch(t){return!1}}}if(i=r.child,16384&r.subtreeFlags&&null!==i)i.return=r,r=i;else{if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}(u)&&(2===(r=aF(t,s))&&0!==(c=tE(t))&&(s=c,r=aE(t,c)),1===r))throw i=ar,ak(t,0),aD(t,s),aC(t,tF()),i;switch(t.finishedWork=u,t.finishedLanes=s,r){case 0:case 1:throw Error(x(345));case 2:case 5:aH(t,al);break;case 3:if(aD(t,s),(0x7c00000&s)===s&&10<(r=au+500-tF())){if(0!==tT(t,0))break;if(((u=t.suspendedLanes)&s)!==s){aw(),t.pingedLanes|=t.suspendedLanes&u;break}t.timeoutHandle=et(aH.bind(null,t,al),r);break}aH(t,al);break;case 4:if(aD(t,s),(4194240&s)===s)break;for(u=-1,r=t.eventTimes;0<s;){var h=31-tb(s);c=1<<h,(h=r[h])>u&&(u=h),s&=~c}if(s=u,10<(s=(120>(s=tF()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*i2(s/1960))-s)){t.timeoutHandle=et(aH.bind(null,t,al),s);break}aH(t,al);break;default:throw Error(x(329))}}}return aC(t,tF()),t.callbackNode===i?aT.bind(null,t):null}function aE(t,r){var i=as;return t.current.memoizedState.isDehydrated&&(ak(t,r).flags|=256),2!==(t=aF(t,r))&&(r=al,al=i,null!==r&&aI(r)),t}function aI(t){null===al?al=t:al.push.apply(al,t)}function aD(t,r){for(r&=~ao,r&=~aa,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var i=31-tb(r),s=1<<i;t[i]=-1,r&=~s}}function aP(t){if(0!=(6&i6))throw Error(x(327));aG();var r=tT(t,0);if(0==(1&r))return aC(t,tF()),null;var i=aF(t,r);if(0!==t.tag&&2===i){var s=tE(t);0!==s&&(r=s,i=aE(t,s))}if(1===i)throw i=ar,ak(t,0),aD(t,r),aC(t,tF()),i;if(6===i)throw Error(x(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,aH(t,al),aC(t,tF()),null}function aR(t){null!==am&&0===am.tag&&0==(6&i6)&&aG();var r=i6;i6|=1;var i=i4.transition,s=tR;try{if(i4.transition=null,tR=1,t)return t()}finally{tR=s,i4.transition=i,0==(6&(i6=r))&&tZ()}}function aL(){ae=at.current,tl(at)}function ak(t,r){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==er&&(t.timeoutHandle=er,en(i)),null!==i8)for(i=i8.return;null!==i;){var s=i;switch(nI(s),s.tag){case 1:null!=(s=s.type.childContextTypes)&&tm();break;case 3:n1(),tl(td),tl(th),n9();break;case 5:n3(s);break;case 4:n1();break;case 13:case 19:tl(n5);break;case 10:t6(s.type._context);break;case 22:case 23:aL()}i=i.return}if(i9=t,i8=t=aQ(t.current,null),i7=ae=r,an=0,ar=null,ao=aa=ai=0,al=as=null,null!==ne){for(r=0;r<ne.length;r++)if(null!==(s=(i=ne[r]).interleaved)){i.interleaved=null;var u=s.next,c=i.pending;if(null!==c){var h=c.next;c.next=u,s.next=h}i.pending=s}ne=null}return t}function aO(t,r){for(;;){var i=i8;try{if(t5(),n8.current=rj,ri){for(var s=rt.memoizedState;null!==s;){var u=s.queue;null!==u&&(u.pending=null),s=s.next}ri=!1}if(re=0,rr=rn=rt=null,ra=!1,ro=0,i5.current=null,null===i||null===i.return){an=1,ar=r,i8=null;break}e:{var c=t,h=i.return,p=i,f=r;if(r=i7,p.flags|=32768,null!==f&&"object"==typeof f&&"function"==typeof f.then){var v=f,y=p,_=y.tag;if(0==(1&y.mode)&&(0===_||11===_||15===_)){var b=y.alternate;b?(y.updateQueue=b.updateQueue,y.memoizedState=b.memoizedState,y.lanes=b.lanes):(y.updateQueue=null,y.memoizedState=null)}var w=r1(h);if(null!==w){w.flags&=-257,r2(w,h,p,c,r),1&w.mode&&r0(c,v,r),r=w,f=v;var S=r.updateQueue;if(null===S){var M=new Set;M.add(f),r.updateQueue=M}else S.add(f);break e}if(0==(1&r)){r0(c,v,r),aN();break e}f=Error(x(426))}else if(nR&&1&p.mode){var A=r1(h);if(null!==A){0==(65536&A.flags)&&(A.flags|=256),r2(A,h,p,c,r),nG(f);break e}}c=f,4!==an&&(an=2),null===as?as=[c]:as.push(c),f=rJ(f,p),p=h;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var C=rq(p,f,r);ns(p,C);break e;case 1:c=f;var T=p.type,I=p.stateNode;if(0==(128&p.flags)&&("function"==typeof T.getDerivedStateFromError||null!==I&&"function"==typeof I.componentDidCatch&&(null===af||!af.has(I)))){p.flags|=65536,r&=-r,p.lanes|=r;var D=rQ(p,c,r);ns(p,D);break e}}p=p.return}while(null!==p)}aU(i)}catch(t){r=t,i8===i&&null!==i&&(i8=i=i.return);continue}break}}function aB(){var t=i3.current;return i3.current=rj,null===t?rj:t}function aN(){(0===an||3===an||2===an)&&(an=4),null===i9||0==(0xfffffff&ai)&&0==(0xfffffff&aa)||aD(i9,i7)}function aF(t,r){var i=i6;i6|=2;var s=aB();for(i9===t&&i7===r||ak(t,r);;)try{(function(){for(;null!==i8;)az(i8)})();break}catch(r){aO(t,r)}if(t5(),i6=i,i3.current=s,null!==i8)throw Error(x(261));return i9=null,i7=0,an}function az(t){var r=h(t.alternate,t,ae);t.memoizedProps=t.pendingProps,null===r?aU(t):i8=r,i5.current=null}function aU(t){var i=t;do{var h=i.alternate;if(t=i.return,0==(32768&i.flags)){if(null!==(h=function(t,i,h){var p=i.pendingProps;switch(nI(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return r9(i),null;case 1:case 17:return tg(i.type)&&tm(),r9(i),null;case 3:return p=i.stateNode,n1(),tl(td),tl(th),n9(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(null===t||null===t.child)&&(nU(i)?r3(i):null===t||t.memoizedState.isDehydrated&&0==(256&i.flags)||(i.flags|=1024,null!==nk&&(aI(nk),nk=null))),s(t,i),r9(i),null;case 5:n3(i),h=nQ(nq.current);var f=i.type;if(null!==t&&null!=i.stateNode)u(t,i,f,p,h),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!p){if(null===i.stateNode)throw Error(x(166));return r9(i),null}if(t=nQ(nZ.current),nU(i)){if(!es)throw Error(x(175));t=e0(i.stateNode,i.type,i.memoizedProps,h,t,i,!nL),i.updateQueue=t,null!==t&&r3(i)}else{var v=J(f,p,h,t,i);r(v,i,!1,!1),i.stateNode=v,K(v,f,p,h,t)&&r3(i)}null!==i.ref&&(i.flags|=512,i.flags|=2097152)}return r9(i),null;case 6:if(t&&null!=i.stateNode)c(t,i,t.memoizedProps,p);else{if("string"!=typeof p&&null===i.stateNode)throw Error(x(166));if(t=nQ(nq.current),h=nQ(nZ.current),nU(i)){if(!es)throw Error(x(176));if(t=i.stateNode,(h=e1(t,p=i.memoizedProps,i,!nL))&&null!==(f=nD))switch(v=0!=(1&f.mode),f.tag){case 3:e7(f.stateNode.containerInfo,t,p,v);break;case 5:te(f.type,f.memoizedProps,f.stateNode,t,p,v)}h&&r3(i)}else i.stateNode=ee(p,t,h,i)}return r9(i),null;case 13:if(tl(n5),p=i.memoizedState,nR&&null!==nP&&0!=(1&i.mode)&&0==(128&i.flags)){for(t=nP;t;)t=eZ(t);return nH(),i.flags|=98560,i}if(null!==p&&null!==p.dehydrated){if(p=nU(i),null===t){if(!p)throw Error(x(318));if(!es)throw Error(x(344));if(!(t=null!==(t=i.memoizedState)?t.dehydrated:null))throw Error(x(317));e2(t,i)}else nH(),0==(128&i.flags)&&(i.memoizedState=null),i.flags|=4;return r9(i),null}if(null!==nk&&(aI(nk),nk=null),0!=(128&i.flags))return i.lanes=h,i;return p=null!==p,h=!1,null===t?nU(i):h=null!==t.memoizedState,p&&!h&&(i.child.flags|=8192,0!=(1&i.mode)&&(null===t||0!=(1&n5.current)?0===an&&(an=3):aN())),null!==i.updateQueue&&(i.flags|=4),r9(i),null;case 4:return n1(),s(t,i),null===t&&eu(i.stateNode.containerInfo),r9(i),null;case 10:return t6(i.type._context),r9(i),null;case 19:if(tl(n5),null===(f=i.memoizedState))return r9(i),null;if(p=0!=(128&i.flags),null===(v=f.rendering)){if(p)r6(f,!1);else{if(0!==an||null!==t&&0!=(128&t.flags))for(t=i.child;null!==t;){if(null!==(v=n4(t))){for(i.flags|=128,r6(f,!1),null!==(t=v.updateQueue)&&(i.updateQueue=t,i.flags|=4),i.subtreeFlags=0,t=h,p=i.child;null!==p;)h=p,f=t,h.flags&=0xe00002,null===(v=h.alternate)?(h.childLanes=0,h.lanes=f,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=v.childLanes,h.lanes=v.lanes,h.child=v.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=v.memoizedProps,h.memoizedState=v.memoizedState,h.updateQueue=v.updateQueue,h.type=v.type,f=v.dependencies,h.dependencies=null===f?null:{lanes:f.lanes,firstContext:f.firstContext}),p=p.sibling;return tu(n5,1&n5.current|2),i.child}t=t.sibling}null!==f.tail&&tF()>ac&&(i.flags|=128,p=!0,r6(f,!1),i.lanes=4194304)}}else{if(!p){if(null!==(t=n4(v))){if(i.flags|=128,p=!0,null!==(t=t.updateQueue)&&(i.updateQueue=t,i.flags|=4),r6(f,!0),null===f.tail&&"hidden"===f.tailMode&&!v.alternate&&!nR)return r9(i),null}else 2*tF()-f.renderingStartTime>ac&&0x40000000!==h&&(i.flags|=128,p=!0,r6(f,!1),i.lanes=4194304)}f.isBackwards?(v.sibling=i.child,i.child=v):(null!==(t=f.last)?t.sibling=v:i.child=v,f.last=v)}if(null!==f.tail)return i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=tF(),i.sibling=null,t=n5.current,tu(n5,p?1&t|2:1&t),i;return r9(i),null;case 22:case 23:return aL(),p=null!==i.memoizedState,null!==t&&null!==t.memoizedState!==p&&(i.flags|=8192),p&&0!=(1&i.mode)?0!=(0x40000000&ae)&&(r9(i),ea&&6&i.subtreeFlags&&(i.flags|=8192)):r9(i),null;case 24:case 25:return null}throw Error(x(156,i.tag))}(h,i,ae))){i8=h;return}}else{if(null!==(h=function(t,r){switch(nI(r),r.tag){case 1:return tg(r.type)&&tm(),65536&(t=r.flags)?(r.flags=-65537&t|128,r):null;case 3:return n1(),tl(td),tl(th),n9(),0!=(65536&(t=r.flags))&&0==(128&t)?(r.flags=-65537&t|128,r):null;case 5:return n3(r),null;case 13:if(tl(n5),null!==(t=r.memoizedState)&&null!==t.dehydrated){if(null===r.alternate)throw Error(x(340));nH()}return 65536&(t=r.flags)?(r.flags=-65537&t|128,r):null;case 19:return tl(n5),null;case 4:return n1(),null;case 10:return t6(r.type._context),null;case 22:case 23:return aL(),null;default:return null}}(h,i))){h.flags&=32767,i8=h;return}if(null!==t)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{an=6,i8=null;return}}if(null!==(i=i.sibling)){i8=i;return}i8=i=t}while(null!==i);0===an&&(an=5)}function aH(t,r){var i=tR,s=i4.transition;try{i4.transition=null,tR=1,function(t,r,i){do aG();while(null!==am);if(0!=(6&i6))throw Error(x(327));var s=t.finishedWork,u=t.finishedLanes;if(null===s)return;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(x(177));t.callbackNode=null,t.callbackPriority=0;var c=s.lanes|s.childLanes;if(!function(t,r){var i=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<i;){var u=31-tb(i),c=1<<u;r[u]=0,s[u]=-1,t[u]=-1,i&=~c}}(t,c),t===i9&&(i8=i9=null,i7=0),0==(2064&s.subtreeFlags)&&0==(2064&s.flags)||ag||(ag=!0,function(t,r){tk(t,r)}(tH,function(){return aG(),null})),c=0!=(15990&s.flags),0!=(15990&s.subtreeFlags)||c){c=i4.transition,i4.transition=null;var h,p,f,v=tR;tR=1;var y=i6;i6|=4,i5.current=null,!function(t,r){for(Y(t.containerInfo),iT=r;null!==iT;)if(r=(t=iT).child,0!=(1028&t.subtreeFlags)&&null!==r)r.return=t,iT=r;else for(;null!==iT;){t=iT;try{var i=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==i){var s=i.memoizedProps,u=i.memoizedState,c=t.stateNode,h=c.getSnapshotBeforeUpdate(t.elementType===t.type?s:tQ(t.type,s),u);c.__reactInternalSnapshotBeforeUpdate=h}break;case 3:ea&&eB(t.stateNode.containerInfo);break;default:throw Error(x(163))}}catch(r){aW(t,t.return,r)}if(null!==(r=t.sibling)){r.return=t.return,iT=r;break}iT=t.return}i=iD,iD=!1}(t,s),!function(t,r){for(iT=r;null!==iT;){var i=(r=iT).deletions;if(null!==i)for(var s=0;s<i.length;s++){var u=i[s];try{var c=t;ea?iz(c,u,r):iO(c,u,r);var h=u.alternate;null!==h&&(h.return=null),u.return=null}catch(t){aW(u,r,t)}}if(i=r.child,0!=(12854&r.subtreeFlags)&&null!==i)i.return=r,iT=i;else for(;null!==iT;){r=iT;try{var p=r.flags;if(32&p&&ea&&eP(r.stateNode),512&p){var f=r.alternate;if(null!==f){var v=f.ref;null!==v&&("function"==typeof v?v(null):v.current=null)}}if(8192&p)switch(r.tag){case 13:if(null!==r.memoizedState){var y=r.alternate;(null===y||null===y.memoizedState)&&(au=tF())}break;case 22:var x=null!==r.memoizedState,_=r.alternate,b=null!==_&&null!==_.memoizedState;if(i=r,ea){e:if(s=i,u=x,c=null,ea)for(var w=s;;){if(5===w.tag){if(null===c){c=w;var S=w.stateNode;u?eR(S):ek(w.stateNode,w.memoizedProps)}}else if(6===w.tag){if(null===c){var M=w.stateNode;u?eL(M):eO(M,w.memoizedProps)}}else if((22!==w.tag&&23!==w.tag||null===w.memoizedState||w===s)&&null!==w.child){w.child.return=w,w=w.child;continue}if(w===s)break;for(;null===w.sibling;){if(null===w.return||w.return===s)break e;c===w&&(c=null),w=w.return}c===w&&(c=null),w.sibling.return=w.return,w=w.sibling}}if(x&&!b&&0!=(1&i.mode)){iT=i;for(var A=i.child;null!==A;){for(i=iT=A;null!==iT;){var C=(s=iT).child;switch(s.tag){case 0:case 11:case 14:case 15:iP(4,s,s.return);break;case 1:iE(s,s.return);var T=s.stateNode;if("function"==typeof T.componentWillUnmount){var I=s.return;try{T.props=s.memoizedProps,T.state=s.memoizedState,T.componentWillUnmount()}catch(t){aW(s,I,t)}}break;case 5:iE(s,s.return);break;case 22:if(null!==s.memoizedState){iV(i);continue}}null!==C?(C.return=s,iT=C):iV(i)}A=A.sibling}}}switch(4102&p){case 2:iF(r),r.flags&=-3;break;case 6:iF(r),r.flags&=-3,iU(r.alternate,r);break;case 4096:r.flags&=-4097;break;case 4100:r.flags&=-4097,iU(r.alternate,r);break;case 4:iU(r.alternate,r)}}catch(t){aW(r,r.return,t)}if(null!==(i=r.sibling)){i.return=r.return,iT=i;break}iT=r.return}}}(t,s,u),$(t.containerInfo),t.current=s,h=s,p=t,f=u,iT=h,function t(r,i,s){for(var u=0!=(1&r.mode);null!==iT;){var c=iT,h=c.child;if(22===c.tag&&u){var p=null!==c.memoizedState||iM;if(!p){var f=c.alternate,v=null!==f&&null!==f.memoizedState||iA;f=iM;var y=iA;if(iM=p,(iA=v)&&!y)for(iT=c;null!==iT;)v=(p=iT).child,22===p.tag&&null!==p.memoizedState?iW(c):null!==v?(v.return=p,iT=v):iW(c);for(;null!==h;)iT=h,t(h,i,s),h=h.sibling;iT=c,iM=f,iA=y}iG(r,i,s)}else 0!=(8772&c.subtreeFlags)&&null!==h?(h.return=c,iT=h):iG(r,i,s)}}(h,p,f),tN(),i6=y,tR=v,i4.transition=c}else t.current=s;if(ag&&(ag=!1,am=t,av=u),0===(c=t.pendingLanes)&&(af=null),!function(t){if(tW&&"function"==typeof tW.onCommitFiberRoot)try{tW.onCommitFiberRoot(tV,t,void 0,128==(128&t.current.flags))}catch(t){}}(s.stateNode,i),aC(t,tF()),null!==r)for(i=t.onRecoverableError,s=0;s<r.length;s++)i(r[s]);if(ad)throw ad=!1,t=ap,ap=null,t;0!=(1&av)&&0!==t.tag&&aG(),0!=(1&(c=t.pendingLanes))?t===ax?ay++:(ay=0,ax=t):ay=0,tZ()}(t,r,i)}finally{i4.transition=s,tR=i}return null}function aG(){if(null!==am){var t=tL(av),r=i4.transition,i=tR;try{if(i4.transition=null,tR=16>t?16:t,null===am)var s=!1;else{if(t=am,am=null,av=0,0!=(6&i6))throw Error(x(331));var u=i6;for(i6|=4,iT=t.current;null!==iT;){var c=iT,h=c.child;if(0!=(16&iT.flags)){var p=c.deletions;if(null!==p){for(var f=0;f<p.length;f++){var v=p[f];for(iT=v;null!==iT;){var y=iT;switch(y.tag){case 0:case 11:case 15:iP(8,y,c)}var _=y.child;if(null!==_)_.return=y,iT=_;else for(;null!==iT;){var b=(y=iT).sibling,w=y.return;if(!function t(r){var i=r.alternate;null!==i&&(r.alternate=null,t(i)),r.child=null,r.deletions=null,r.sibling=null,5===r.tag&&null!==(i=r.stateNode)&&eh(i),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}(y),y===v){iT=null;break}if(null!==b){b.return=w,iT=b;break}iT=w}}}var S=c.alternate;if(null!==S){var M=S.child;if(null!==M){S.child=null;do{var A=M.sibling;M.sibling=null,M=A}while(null!==M)}}iT=c}}if(0!=(2064&c.subtreeFlags)&&null!==h)h.return=c,iT=h;else for(;null!==iT;){if(c=iT,0!=(2048&c.flags))switch(c.tag){case 0:case 11:case 15:iP(9,c,c.return)}var C=c.sibling;if(null!==C){C.return=c.return,iT=C;break}iT=c.return}}var T=t.current;for(iT=T;null!==iT;){var I=(h=iT).child;if(0!=(2064&h.subtreeFlags)&&null!==I)I.return=h,iT=I;else for(h=T;null!==iT;){if(p=iT,0!=(2048&p.flags))try{switch(p.tag){case 0:case 11:case 15:iR(9,p)}}catch(t){aW(p,p.return,t)}if(p===h){iT=null;break}var D=p.sibling;if(null!==D){D.return=p.return,iT=D;break}iT=p.return}}if(i6=u,tZ(),tW&&"function"==typeof tW.onPostCommitFiberRoot)try{tW.onPostCommitFiberRoot(tV,t)}catch(t){}s=!0}return s}finally{tR=i,i4.transition=r}}return!1}function aV(t,r,i){r=rq(t,r=rJ(i,r),1),na(t,r),r=aw(),null!==(t=aA(t,1))&&(tD(t,1,r),aC(t,r))}function aW(t,r,i){if(3===t.tag)aV(t,t,i);else for(;null!==r;){if(3===r.tag){aV(r,t,i);break}if(1===r.tag){var s=r.stateNode;if("function"==typeof r.type.getDerivedStateFromError||"function"==typeof s.componentDidCatch&&(null===af||!af.has(s))){t=rQ(r,t=rJ(i,t),1),na(r,t),t=aw(),null!==(r=aA(r,1))&&(tD(r,1,t),aC(r,t));break}}r=r.return}}function aj(t,r,i){var s=t.pingCache;null!==s&&s.delete(r),r=aw(),t.pingedLanes|=t.suspendedLanes&i,i9===t&&(i7&i)===i&&(4===an||3===an&&(0x7c00000&i7)===i7&&500>tF()-au?ak(t,0):ao|=i),aC(t,r)}function aX(t,r){0===r&&(0==(1&t.mode)?r=1:(r=tA,0==(0x7c00000&(tA<<=1))&&(tA=4194304)));var i=aw();null!==(t=aA(t,r))&&(tD(t,r,i),aC(t,i))}function aY(t){var r=t.memoizedState,i=0;null!==r&&(i=r.retryLane),aX(t,i)}function a$(t,r){var i=0;switch(t.tag){case 13:var s=t.stateNode,u=t.memoizedState;null!==u&&(i=u.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(x(314))}null!==s&&s.delete(r),aX(t,i)}function aJ(t,r){return tk(t,r)}function aZ(t,r,i,s){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function aK(t,r,i,s){return new aZ(t,r,i,s)}function aq(t){return!(!(t=t.prototype)||!t.isReactComponent)}h=function(t,r,i){if(null!==t){if(t.memoizedProps!==r.pendingProps||td.current)r7=!0;else{if(0==(t.lanes&i)&&0==(128&r.flags))return r7=!1,function(t,r,i){switch(r.tag){case 3:ic(r),nH();break;case 5:n2(r);break;case 1:tg(r.type)&&tx(r);break;case 4:n0(r,r.stateNode.containerInfo);break;case 10:t4(r,r.type._context,r.memoizedProps.value);break;case 13:var s=r.memoizedState;if(null!==s){if(null!==s.dehydrated)return tu(n5,1&n5.current),r.flags|=128,null;if(0!=(i&r.child.childLanes))return ig(t,r,i);return tu(n5,1&n5.current),null!==(t=iS(t,r,i))?t.sibling:null}tu(n5,1&n5.current);break;case 19:if(s=0!=(i&r.childLanes),0!=(128&t.flags)){if(s)return iw(t,r,i);r.flags|=128}var u=r.memoizedState;if(null!==u&&(u.rendering=null,u.tail=null,u.lastEffect=null),tu(n5,n5.current),!s)return null;break;case 22:case 23:return r.lanes=0,ia(t,r,i)}return iS(t,r,i)}(t,r,i);r7=0!=(131072&t.flags)}}else r7=!1,nR&&0!=(1048576&r.flags)&&nT(r,n_,r.index);switch(r.lanes=0,r.tag){case 2:var s=r.type;null!==t&&(t.alternate=null,r.alternate=null,r.flags|=2),t=r.pendingProps;var u=tf(r,th.current);t8(r,i),u=rc(null,r,s,t,u,i);var c=rh();return r.flags|=1,"object"==typeof u&&null!==u&&"function"==typeof u.render&&void 0===u.$$typeof?(r.tag=1,r.memoizedState=null,r.updateQueue=null,tg(s)?(c=!0,tx(r)):c=!1,r.memoizedState=null!==u.state&&void 0!==u.state?u.state:null,nn(r),u.updater=nd,r.stateNode=u,u._reactInternals=r,nm(r,s,t,i),r=iu(null,r,s,!0,c,i)):(r.tag=0,nR&&c&&nE(r),ie(null,r,u,i),r=r.child),r;case 16:s=r.elementType;e:{switch(null!==t&&(t.alternate=null,r.alternate=null,r.flags|=2),t=r.pendingProps,s=(u=s._init)(s._payload),r.type=s,u=r.tag=function(t){if("function"==typeof t)return aq(t)?1:0;if(null!=t){if((t=t.$$typeof)===I)return 11;if(t===R)return 14}return 2}(s),t=tQ(s,t),u){case 0:r=is(null,r,s,t,i);break e;case 1:r=il(null,r,s,t,i);break e;case 11:r=it(null,r,s,t,i);break e;case 14:r=ir(null,r,s,tQ(s.type,t),i);break e}throw Error(x(306,s,""))}return r;case 0:return s=r.type,u=r.pendingProps,u=r.elementType===s?u:tQ(s,u),is(t,r,s,u,i);case 1:return s=r.type,u=r.pendingProps,u=r.elementType===s?u:tQ(s,u),il(t,r,s,u,i);case 3:e:{if(ic(r),null===t)throw Error(x(387));s=r.pendingProps,u=(c=r.memoizedState).element,nr(t,r),nl(r,s,null,i);var h=r.memoizedState;if(s=h.element,es&&c.isDehydrated){if(c={element:s,isDehydrated:!1,cache:h.cache,transitions:h.transitions},r.updateQueue.baseState=c,r.memoizedState=c,256&r.flags){r=ih(t,r,s,i,u=Error(x(423)));break e}else if(s!==u){r=ih(t,r,s,i,u=Error(x(424)));break e}else for(es&&(nP=eq(r.stateNode.containerInfo),nD=r,nR=!0,nk=null,nL=!1),i=n$(r,null,s,i),r.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(nH(),s===u){r=iS(t,r,i);break e}ie(t,r,s,i)}r=r.child}return r;case 5:return n2(r),null===t&&nF(r),s=r.type,u=r.pendingProps,c=null!==t?t.memoizedProps:null,h=u.children,Q(s,u)?h=null:null!==c&&Q(s,c)&&(r.flags|=32),io(t,r),ie(t,r,h,i),r.child;case 6:return null===t&&nF(r),null;case 13:return ig(t,r,i);case 4:return n0(r,r.stateNode.containerInfo),s=r.pendingProps,null===t?r.child=nY(r,null,s,i):ie(t,r,s,i),r.child;case 11:return s=r.type,u=r.pendingProps,u=r.elementType===s?u:tQ(s,u),it(t,r,s,u,i);case 7:return ie(t,r,r.pendingProps,i),r.child;case 8:case 12:return ie(t,r,r.pendingProps.children,i),r.child;case 10:e:{if(s=r.type._context,u=r.pendingProps,c=r.memoizedProps,t4(r,s,h=u.value),null!==c){if(tj(c.value,h)){if(c.children===u.children&&!td.current){r=iS(t,r,i);break e}}else for(null!==(c=r.child)&&(c.return=r);null!==c;){var p=c.dependencies;if(null!==p){h=c.child;for(var f=p.firstContext;null!==f;){if(f.context===s){if(1===c.tag){(f=ni(-1,i&-i)).tag=2;var v=c.updateQueue;if(null!==v){var y=(v=v.shared).pending;null===y?f.next=f:(f.next=y.next,y.next=f),v.pending=f}}c.lanes|=i,null!==(f=c.alternate)&&(f.lanes|=i),t9(c.return,i,r),p.lanes|=i;break}f=f.next}}else if(10===c.tag)h=c.type===r.type?null:c.child;else if(18===c.tag){if(null===(h=c.return))throw Error(x(341));h.lanes|=i,null!==(p=h.alternate)&&(p.lanes|=i),t9(h,i,r),h=c.sibling}else h=c.child;if(null!==h)h.return=c;else for(h=c;null!==h;){if(h===r){h=null;break}if(null!==(c=h.sibling)){c.return=h.return,h=c;break}h=h.return}c=h}}ie(t,r,u.children,i),r=r.child}return r;case 9:return u=r.type,s=r.pendingProps.children,t8(r,i),s=s(u=t7(u)),r.flags|=1,ie(t,r,s,i),r.child;case 14:return u=tQ(s=r.type,r.pendingProps),u=tQ(s.type,u),ir(t,r,s,u,i);case 15:return ii(t,r,r.type,r.pendingProps,i);case 17:return s=r.type,u=r.pendingProps,u=r.elementType===s?u:tQ(s,u),null!==t&&(t.alternate=null,r.alternate=null,r.flags|=2),r.tag=1,tg(s)?(t=!0,tx(r)):t=!1,t8(r,i),nf(r,s,u),nm(r,s,u,i),iu(null,r,s,!0,t,i);case 19:return iw(t,r,i);case 22:return ia(t,r,i)}throw Error(x(156,r.tag))};function aQ(t,r){var i=t.alternate;return null===i?((i=aK(t.tag,r,t.key,t.mode)).elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=r,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=0xe00000&t.flags,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,r=t.dependencies,i.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function a0(t,r,i,s,u,c){var h=2;if(s=t,"function"==typeof t)aq(t)&&(h=1);else if("string"==typeof t)h=5;else e:switch(t){case S:return a1(i.children,u,c,r);case M:h=8,u|=8;break;case A:return(t=aK(12,i,r,2|u)).elementType=A,t.lanes=c,t;case D:return(t=aK(13,i,r,u)).elementType=D,t.lanes=c,t;case P:return(t=aK(19,i,r,u)).elementType=P,t.lanes=c,t;case k:return a2(i,u,c,r);default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case C:h=10;break e;case T:h=9;break e;case I:h=11;break e;case R:h=14;break e;case L:h=16,s=null;break e}throw Error(x(130,null==t?t:typeof t,""))}return(r=aK(h,i,r,u)).elementType=t,r.type=s,r.lanes=c,r}function a1(t,r,i,s){return(t=aK(7,t,s,r)).lanes=i,t}function a2(t,r,i,s){return(t=aK(22,t,s,r)).elementType=k,t.lanes=i,t.stateNode={},t}function a3(t,r,i){return(t=aK(6,t,null,r)).lanes=i,t}function a5(t,r,i){return(r=aK(4,null!==t.children?t.children:[],t.key,r)).lanes=i,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function a4(t,r,i,s,u){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=er,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tI(0),this.expirationTimes=tI(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tI(0),this.identifierPrefix=s,this.onRecoverableError=u,es&&(this.mutableSourceEagerHydrationData=null)}function a6(t,r,i,s,u,c,h,p,f){return t=new a4(t,r,i,p,f),1===r?(r=1,!0===c&&(r|=8)):r=0,c=aK(3,null,null,r),t.current=c,c.stateNode=t,c.memoizedState={element:s,isDehydrated:i,cache:null,transitions:null},nn(c),t}function a9(t){if(!t)return tc;t=t._reactInternals;e:{if(F(t)!==t||1!==t.tag)throw Error(x(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(tg(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(null!==r);throw Error(x(171))}if(1===t.tag){var i=t.type;if(tg(i))return ty(t,i,r)}return r}function a8(t){var r=t._reactInternals;if(void 0===r){if("function"==typeof t.render)throw Error(x(188));throw Error(x(268,t=Object.keys(t).join(",")))}return null===(t=H(r))?null:t.stateNode}function a7(t,r){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var i=t.retryLane;t.retryLane=0!==i&&i<r?i:r}}function oe(t,r){a7(t,r),(t=t.alternate)&&a7(t,r)}function ot(t){return null===(t=H(t))?null:t.stateNode}function on(){return null}return p.attemptContinuousHydration=function(t){13===t.tag&&(aM(t,0x8000000,aw()),oe(t,0x8000000))},p.attemptHydrationAtCurrentPriority=function(t){if(13===t.tag){var r=aw(),i=aS(t);aM(t,i,r),oe(t,i)}},p.attemptSynchronousHydration=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var i=tC(r.pendingLanes);0!==i&&(tP(r,1|i),aC(r,tF()),0==(6&i6)&&(ah(),tZ()))}break;case 13:var s=aw();aR(function(){return aM(t,1,s)}),oe(t,1)}},p.batchedUpdates=function(t,r){var i=i6;i6|=1;try{return t(r)}finally{0===(i6=i)&&(ah(),tY&&tZ())}},p.createComponentSelector=function(t){return{$$typeof:ij,value:t}},p.createContainer=function(t,r,i,s,u,c,h){return a6(t,r,!1,null,i,s,u,c,h)},p.createHasPseudoClassSelector=function(t){return{$$typeof:iX,value:t}},p.createHydrationContainer=function(t,r,i,s,u,c,h,p,f){return(t=a6(i,s,!0,t,u,c,h,p,f)).context=a9(null),i=t.current,s=aw(),(c=ni(s,u=aS(i))).callback=null!=r?r:null,na(i,c),t.current.lanes=u,tD(t,u,s),aC(t,s),t},p.createPortal=function(t,r,i){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==s?null:""+s,children:t,containerInfo:r,implementation:i}},p.createRoleSelector=function(t){return{$$typeof:iY,value:t}},p.createTestNameSelector=function(t){return{$$typeof:i$,value:t}},p.createTextSelector=function(t){return{$$typeof:iJ,value:t}},p.deferredUpdates=function(t){var r=tR,i=i4.transition;try{return i4.transition=null,tR=16,t()}finally{tR=r,i4.transition=i}},p.discreteUpdates=function(t,r,i,s,u){var c=tR,h=i4.transition;try{return i4.transition=null,tR=1,t(r,i,s,u)}finally{tR=c,i4.transition=h,0===i6&&ah()}},p.findAllNodes=i1,p.findBoundingRects=function(t,r){if(!ef)throw Error(x(363));r=i1(t,r),t=[];for(var i=0;i<r.length;i++)t.push(em(r[i]));for(r=t.length-1;0<r;r--){i=t[r];for(var s=i.x,u=s+i.width,c=i.y,h=c+i.height,p=r-1;0<=p;p--)if(r!==p){var f=t[p],v=f.x,y=v+f.width,_=f.y,b=_+f.height;if(s>=v&&c>=_&&u<=y&&h<=b){t.splice(r,1);break}if(s!==v||i.width!==f.width||b<c||_>h){if(!(c!==_||i.height!==f.height||y<s||v>u)){v>s&&(f.width+=v-s,f.x=s),y<u&&(f.width=u-v),t.splice(r,1);break}}else{_>c&&(f.height+=_-c,f.y=c),b<h&&(f.height=h-_),t.splice(r,1);break}}}return t},p.findHostInstance=a8,p.findHostInstanceWithNoPortals=function(t){return null===(t=null!==(t=U(t))?function t(r){if(5===r.tag||6===r.tag)return r;for(r=r.child;null!==r;){if(4!==r.tag){var i=t(r);if(null!==i)return i}r=r.sibling}return null}(t):null)?null:t.stateNode},p.findHostInstanceWithWarning=function(t){return a8(t)},p.flushControlled=function(t){var r=i6;i6|=1;var i=i4.transition,s=tR;try{i4.transition=null,tR=1,t()}finally{tR=s,i4.transition=i,0===(i6=r)&&(ah(),tZ())}},p.flushPassiveEffects=aG,p.flushSync=aR,p.focusWithin=function(t,r){if(!ef)throw Error(x(363));for(r=Array.from(r=i0(t=iK(t),r)),t=0;t<r.length;){var i=r[t++];if(!ey(i)){if(5===i.tag&&e_(i.stateNode))return!0;for(i=i.child;null!==i;)r.push(i),i=i.sibling}}return!1},p.getCurrentUpdatePriority=function(){return tR},p.getFindAllNodesFailureDescription=function(t,r){if(!ef)throw Error(x(363));var i=0,s=[];t=[iK(t),0];for(var u=0;u<t.length;){var c=t[u++],h=t[u++],p=r[h];if((5!==c.tag||!ey(c))&&(iq(c,p)&&(s.push(iQ(p)),++h>i&&(i=h)),h<r.length))for(c=c.child;null!==c;)t.push(c,h),c=c.sibling}if(i<r.length){for(t=[];i<r.length;i++)t.push(iQ(r[i]));return"findAllNodes was able to match part of the selector:\n  "+s.join(" > ")+"\n\nNo matching component was found for:\n  "+t.join(" > ")}return null},p.getPublicRootInstance=function(t){if(!(t=t.current).child)return null;if(5===t.child.tag)return W(t.child.stateNode);return t.child.stateNode},p.injectIntoDevTools=function(t){if(t={bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:ot,findFiberByHostInstance:t.findFiberByHostInstance||on,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)t=!1;else{var r=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(r.isDisabled||!r.supportsFiber)t=!0;else{try{tV=r.inject(t),tW=r}catch(t){}t=!!r.checkDCE}}return t},p.isAlreadyRendering=function(){return!1},p.observeVisibleRects=function(t,r,i,s){if(!ef)throw Error(x(363));var u=eb(t=i1(t,r),i,s).disconnect;return{disconnect:function(){u()}}},p.registerMutableSourceForHydration=function(t,r){var i=r._getVersion;i=i(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i)},p.runWithPriority=function(t,r){var i=tR;try{return tR=t,r()}finally{tR=i}},p.shouldError=function(){return null},p.shouldSuspend=function(){return!1},p.updateContainer=function(t,r,i,s){var u=r.current,c=aw(),h=aS(u);return i=a9(i),null===r.context?r.context=i:r.pendingContext=i,(r=ni(c,h)).payload={element:t},null!==(s=void 0===s?null:s)&&(r.callback=s),na(u,r),null!==(t=aM(u,h,c))&&no(t,u,h),h},p}},611:function(t,r,i){"use strict";t.exports=i(2514)},6191:function(t,r,i){"use strict";t.exports=i(1041)},8193:function(t,r,i){"use strict";var s=i(5271),u=Symbol.for("react.element"),c=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,p=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function v(t,r,i){var s,c={},v=null,y=null;for(s in void 0!==i&&(v=""+i),void 0!==r.key&&(v=""+r.key),void 0!==r.ref&&(y=r.ref),r)h.call(r,s)&&!f.hasOwnProperty(s)&&(c[s]=r[s]);if(t&&t.defaultProps)for(s in r=t.defaultProps)void 0===c[s]&&(c[s]=r[s]);return{$$typeof:u,type:t,key:v,ref:y,props:c,_owner:p.current}}r.Fragment=c,r.jsx=v,r.jsxs=v},7596:function(t,r){"use strict";var i=Symbol.for("react.element"),s=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),f=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator,w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,M={};function A(t,r,i){this.props=t,this.context=r,this.refs=M,this.updater=i||w}function C(){}function T(t,r,i){this.props=t,this.context=r,this.refs=M,this.updater=i||w}A.prototype.isReactComponent={},A.prototype.setState=function(t,r){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,r,"setState")},A.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},C.prototype=A.prototype;var I=T.prototype=new C;I.constructor=T,S(I,A.prototype),I.isPureReactComponent=!0;var D=Array.isArray,P=Object.prototype.hasOwnProperty,R={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function k(t,r,s){var u,c={},h=null,p=null;if(null!=r)for(u in void 0!==r.ref&&(p=r.ref),void 0!==r.key&&(h=""+r.key),r)P.call(r,u)&&!L.hasOwnProperty(u)&&(c[u]=r[u]);var f=arguments.length-2;if(1===f)c.children=s;else if(1<f){for(var v=Array(f),y=0;y<f;y++)v[y]=arguments[y+2];c.children=v}if(t&&t.defaultProps)for(u in f=t.defaultProps)void 0===c[u]&&(c[u]=f[u]);return{$$typeof:i,type:t,key:h,ref:p,props:c,_owner:R.current}}function O(t){return"object"==typeof t&&null!==t&&t.$$typeof===i}var B=/\/+/g;function N(t,r){var i,s;return"object"==typeof t&&null!==t&&null!=t.key?(i=""+t.key,s={"=":"=0",":":"=2"},"$"+i.replace(/[=:]/g,function(t){return s[t]})):r.toString(36)}function F(t,r,u){if(null==t)return t;var c=[],h=0;return!function t(r,u,c,h,p){var f,v,y,x=typeof r;("undefined"===x||"boolean"===x)&&(r=null);var _=!1;if(null===r)_=!0;else switch(x){case"string":case"number":_=!0;break;case"object":switch(r.$$typeof){case i:case s:_=!0}}if(_){;return p=p(_=r),r=""===h?"."+N(_,0):h,D(p)?(c="",null!=r&&(c=r.replace(B,"$&/")+"/"),t(p,u,c,"",function(t){return t})):null!=p&&(O(p)&&(f=p,v=c+(!p.key||_&&_.key===p.key?"":(""+p.key).replace(B,"$&/")+"/")+r,p={$$typeof:i,type:f.type,key:v,ref:f.ref,props:f.props,_owner:f._owner}),u.push(p)),1}if(_=0,h=""===h?".":h+":",D(r))for(var w=0;w<r.length;w++){var S=h+N(x=r[w],w);_+=t(x,u,c,S,p)}else{;if("function"==typeof(S=null===(y=r)||"object"!=typeof y?null:"function"==typeof(y=b&&y[b]||y["@@iterator"])?y:null))for(r=S.call(r),w=0;!(x=r.next()).done;)S=h+N(x=x.value,w++),_+=t(x,u,c,S,p);else if("object"===x)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(u=String(r))?"object with keys {"+Object.keys(r).join(", ")+"}":u)+"). If you meant to render a collection of children, use an array instead.")}return _}(t,c,"","",function(t){return r.call(u,t,h++)}),c}function z(t){if(-1===t._status){var r=t._result;(r=r()).then(function(r){(0===t._status||-1===t._status)&&(t._status=1,t._result=r)},function(r){(0===t._status||-1===t._status)&&(t._status=2,t._result=r)}),-1===t._status&&(t._status=0,t._result=r)}if(1===t._status)return t._result.default;throw t._result}var U={current:null},H={transition:null};function G(){throw Error("act(...) is not supported in production builds of React.")}r.Children={map:F,forEach:function(t,r,i){F(t,function(){r.apply(this,arguments)},i)},count:function(t){var r=0;return F(t,function(){r++}),r},toArray:function(t){return F(t,function(t){return t})||[]},only:function(t){if(!O(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},r.Component=A,r.Fragment=u,r.Profiler=h,r.PureComponent=T,r.StrictMode=c,r.Suspense=y,r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:H,ReactCurrentOwner:R},r.act=G,r.cloneElement=function(t,r,s){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var u=S({},t.props),c=t.key,h=t.ref,p=t._owner;if(null!=r){if(void 0!==r.ref&&(h=r.ref,p=R.current),void 0!==r.key&&(c=""+r.key),t.type&&t.type.defaultProps)var f=t.type.defaultProps;for(v in r)P.call(r,v)&&!L.hasOwnProperty(v)&&(u[v]=void 0===r[v]&&void 0!==f?f[v]:r[v])}var v=arguments.length-2;if(1===v)u.children=s;else if(1<v){f=Array(v);for(var y=0;y<v;y++)f[y]=arguments[y+2];u.children=f}return{$$typeof:i,type:t.type,key:c,ref:h,props:u,_owner:p}},r.createContext=function(t){return(t={$$typeof:f,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:p,_context:t},t.Consumer=t},r.createElement=k,r.createFactory=function(t){var r=k.bind(null,t);return r.type=t,r},r.createRef=function(){return{current:null}},r.forwardRef=function(t){return{$$typeof:v,render:t}},r.isValidElement=O,r.lazy=function(t){return{$$typeof:_,_payload:{_status:-1,_result:t},_init:z}},r.memo=function(t,r){return{$$typeof:x,type:t,compare:void 0===r?null:r}},r.startTransition=function(t){var r=H.transition;H.transition={};try{t()}finally{H.transition=r}},r.unstable_act=G,r.useCallback=function(t,r){return U.current.useCallback(t,r)},r.useContext=function(t){return U.current.useContext(t)},r.useDebugValue=function(){},r.useDeferredValue=function(t){return U.current.useDeferredValue(t)},r.useEffect=function(t,r){return U.current.useEffect(t,r)},r.useId=function(){return U.current.useId()},r.useImperativeHandle=function(t,r,i){return U.current.useImperativeHandle(t,r,i)},r.useInsertionEffect=function(t,r){return U.current.useInsertionEffect(t,r)},r.useLayoutEffect=function(t,r){return U.current.useLayoutEffect(t,r)},r.useMemo=function(t,r){return U.current.useMemo(t,r)},r.useReducer=function(t,r,i){return U.current.useReducer(t,r,i)},r.useRef=function(t){return U.current.useRef(t)},r.useState=function(t){return U.current.useState(t)},r.useSyncExternalStore=function(t,r,i){return U.current.useSyncExternalStore(t,r,i)},r.useTransition=function(){return U.current.useTransition()},r.version="18.3.1"},5271:function(t,r,i){"use strict";t.exports=i(7596)},2676:function(t,r,i){"use strict";t.exports=i(8193)},247:function(t,r){"use strict";function i(t,r){var i=t.length;for(t.push(r);0<i;){var s=i-1>>>1,u=t[s];if(0<c(u,r))t[s]=r,t[i]=u,i=s;else break}}function s(t){return 0===t.length?null:t[0]}function u(t){if(0===t.length)return null;var r=t[0],i=t.pop();if(i!==r){t[0]=i;for(var s=0,u=t.length,h=u>>>1;s<h;){var p=2*(s+1)-1,f=t[p],v=p+1,y=t[v];if(0>c(f,i))v<u&&0>c(y,f)?(t[s]=y,t[v]=i,s=v):(t[s]=f,t[p]=i,s=p);else if(v<u&&0>c(y,i))t[s]=y,t[v]=i,s=v;else break}}return r}function c(t,r){var i=t.sortIndex-r.sortIndex;return 0!==i?i:t.id-r.id}if("object"==typeof performance&&"function"==typeof performance.now){var h,p=performance;r.unstable_now=function(){return p.now()}}else{var f=Date,v=f.now();r.unstable_now=function(){return f.now()-v}}var y=[],x=[],_=1,b=null,w=3,S=!1,M=!1,A=!1,C="function"==typeof setTimeout?setTimeout:null,T="function"==typeof clearTimeout?clearTimeout:null,I="undefined"!=typeof setImmediate?setImmediate:null;function D(t){for(var r=s(x);null!==r;){if(null===r.callback)u(x);else if(r.startTime<=t)u(x),r.sortIndex=r.expirationTime,i(y,r);else break;r=s(x)}}function P(t){if(A=!1,D(t),!M){if(null!==s(y))M=!0,G(R);else{var r=s(x);null!==r&&V(P,r.startTime-t)}}}function R(t,i){M=!1,A&&(A=!1,T(O),O=-1),S=!0;var c=w;try{for(D(i),b=s(y);null!==b&&(!(b.expirationTime>i)||t&&!F());){var h=b.callback;if("function"==typeof h){b.callback=null,w=b.priorityLevel;var p=h(b.expirationTime<=i);i=r.unstable_now(),"function"==typeof p?b.callback=p:b===s(y)&&u(y),D(i)}else u(y);b=s(y)}if(null!==b)var f=!0;else{var v=s(x);null!==v&&V(P,v.startTime-i),f=!1}return f}finally{b=null,w=c,S=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var L=!1,k=null,O=-1,B=5,N=-1;function F(){return!(r.unstable_now()-N<B)}function z(){if(null!==k){var t=r.unstable_now();N=t;var i=!0;try{i=k(!0,t)}finally{i?h():(L=!1,k=null)}}else L=!1}if("function"==typeof I)h=function(){I(z)};else if("undefined"!=typeof MessageChannel){var U=new MessageChannel,H=U.port2;U.port1.onmessage=z,h=function(){H.postMessage(null)}}else h=function(){C(z,0)};function G(t){k=t,L||(L=!0,h())}function V(t,i){O=C(function(){t(r.unstable_now())},i)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(t){t.callback=null},r.unstable_continueExecution=function(){M||S||(M=!0,G(R))},r.unstable_forceFrameRate=function(t){0>t||125<t||(B=0<t?Math.floor(1e3/t):5)},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_getFirstCallbackNode=function(){return s(y)},r.unstable_next=function(t){switch(w){case 1:case 2:case 3:var r=3;break;default:r=w}var i=w;w=r;try{return t()}finally{w=i}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(t,r){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var i=w;w=t;try{return r()}finally{w=i}},r.unstable_scheduleCallback=function(t,u,c){var h=r.unstable_now();switch(c="object"==typeof c&&null!==c?"number"==typeof(c=c.delay)&&0<c?h+c:h:h,t){case 1:var p=-1;break;case 2:p=250;break;case 5:p=0x3fffffff;break;case 4:p=1e4;break;default:p=5e3}return p=c+p,t={id:_++,callback:u,priorityLevel:t,startTime:c,expirationTime:p,sortIndex:-1},c>h?(t.sortIndex=c,i(x,t),null===s(y)&&t===s(x)&&(A?(T(O),O=-1):A=!0,V(P,c-h))):(t.sortIndex=p,i(y,t),M||S||(M=!0,G(R))),t},r.unstable_shouldYield=F,r.unstable_wrapCallback=function(t){var r=w;return function(){var i=w;w=r;try{return t.apply(this,arguments)}finally{w=i}}}},5297:function(t,r,i){"use strict";t.exports=i(247)},8088:function(t,r){"use strict";function i(t,r){var i=t.length;for(t.push(r);0<i;){var s=i-1>>>1,u=t[s];if(0<c(u,r))t[s]=r,t[i]=u,i=s;else break}}function s(t){return 0===t.length?null:t[0]}function u(t){if(0===t.length)return null;var r=t[0],i=t.pop();if(i!==r){t[0]=i;for(var s=0,u=t.length,h=u>>>1;s<h;){var p=2*(s+1)-1,f=t[p],v=p+1,y=t[v];if(0>c(f,i))v<u&&0>c(y,f)?(t[s]=y,t[v]=i,s=v):(t[s]=f,t[p]=i,s=p);else if(v<u&&0>c(y,i))t[s]=y,t[v]=i,s=v;else break}}return r}function c(t,r){var i=t.sortIndex-r.sortIndex;return 0!==i?i:t.id-r.id}if("object"==typeof performance&&"function"==typeof performance.now){var h,p=performance;r.unstable_now=function(){return p.now()}}else{var f=Date,v=f.now();r.unstable_now=function(){return f.now()-v}}var y=[],x=[],_=1,b=null,w=3,S=!1,M=!1,A=!1,C="function"==typeof setTimeout?setTimeout:null,T="function"==typeof clearTimeout?clearTimeout:null,I="undefined"!=typeof setImmediate?setImmediate:null;function D(t){for(var r=s(x);null!==r;){if(null===r.callback)u(x);else if(r.startTime<=t)u(x),r.sortIndex=r.expirationTime,i(y,r);else break;r=s(x)}}function P(t){if(A=!1,D(t),!M){if(null!==s(y))M=!0,G(R);else{var r=s(x);null!==r&&V(P,r.startTime-t)}}}function R(t,i){M=!1,A&&(A=!1,T(O),O=-1),S=!0;var c=w;try{for(D(i),b=s(y);null!==b&&(!(b.expirationTime>i)||t&&!F());){var h=b.callback;if("function"==typeof h){b.callback=null,w=b.priorityLevel;var p=h(b.expirationTime<=i);i=r.unstable_now(),"function"==typeof p?b.callback=p:b===s(y)&&u(y),D(i)}else u(y);b=s(y)}if(null!==b)var f=!0;else{var v=s(x);null!==v&&V(P,v.startTime-i),f=!1}return f}finally{b=null,w=c,S=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var L=!1,k=null,O=-1,B=5,N=-1;function F(){return!(r.unstable_now()-N<B)}function z(){if(null!==k){var t=r.unstable_now();N=t;var i=!0;try{i=k(!0,t)}finally{i?h():(L=!1,k=null)}}else L=!1}if("function"==typeof I)h=function(){I(z)};else if("undefined"!=typeof MessageChannel){var U=new MessageChannel,H=U.port2;U.port1.onmessage=z,h=function(){H.postMessage(null)}}else h=function(){C(z,0)};function G(t){k=t,L||(L=!0,h())}function V(t,i){O=C(function(){t(r.unstable_now())},i)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(t){t.callback=null},r.unstable_continueExecution=function(){M||S||(M=!0,G(R))},r.unstable_forceFrameRate=function(t){0>t||125<t||(B=0<t?Math.floor(1e3/t):5)},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_getFirstCallbackNode=function(){return s(y)},r.unstable_next=function(t){switch(w){case 1:case 2:case 3:var r=3;break;default:r=w}var i=w;w=r;try{return t()}finally{w=i}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(t,r){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var i=w;w=t;try{return r()}finally{w=i}},r.unstable_scheduleCallback=function(t,u,c){var h=r.unstable_now();switch(c="object"==typeof c&&null!==c?"number"==typeof(c=c.delay)&&0<c?h+c:h:h,t){case 1:var p=-1;break;case 2:p=250;break;case 5:p=0x3fffffff;break;case 4:p=1e4;break;default:p=5e3}return p=c+p,t={id:_++,callback:u,priorityLevel:t,startTime:c,expirationTime:p,sortIndex:-1},c>h?(t.sortIndex=c,i(x,t),null===s(y)&&t===s(x)&&(A?(T(O),O=-1):A=!0,V(P,c-h))):(t.sortIndex=p,i(y,t),M||S||(M=!0,G(R))),t},r.unstable_shouldYield=F,r.unstable_wrapCallback=function(t){var r=w;return function(){var i=w;w=r;try{return t.apply(this,arguments)}finally{w=i}}}},7537:function(t,r,i){"use strict";t.exports=i(8088)},8930:function(t,r,i){"use strict";var s=i(9593),u=i(8396),c=i(6805),h=i(3566);function p(t){return"__proto__"!==t&&"constructor"!==t&&"prototype"!==t}t.exports=function(t,r,i){if(!h(t))return t;if(Array.isArray(r)&&(r=[].concat.apply([],r).join(".")),"string"!=typeof r)return t;for(var f=s(r,{sep:".",brackets:!0}).filter(p),v=f.length,y=-1,x=t;++y<v;){var _=f[y];if(y!==v-1){!h(x[_])&&(x[_]={}),x=x[_];continue}c(x[_])&&c(i)?x[_]=u({},x[_],i):x[_]=i}return t}},9350:function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SizeSensorId=r.SensorTabIndex=r.SensorClassName=void 0;r.SizeSensorId="size-sensor-id";r.SensorClassName="size-sensor-object";r.SensorTabIndex="-1"},2912:function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,i=null;return function(){for(var s=this,u=arguments.length,c=Array(u),h=0;h<u;h++)c[h]=arguments[h];clearTimeout(i),i=setTimeout(function(){t.apply(s,c)},r)}}},1298:function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=1;r.default=function(){return"".concat(i++)}},8611:function(t,r,i){"use strict";r.clear=r.bind=void 0;var s,u=i(2470);r.bind=function(t,r){var i=(0,u.getSensor)(t);return i.bind(r),function(){i.unbind(r)}};r.clear=function(t){var r=(0,u.getSensor)(t);(0,u.removeSensor)(r)}},2470:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.removeSensor=r.getSensor=r.Sensors=void 0;var s=function(t){return t&&t.__esModule?t:{default:t}}(i(1298)),u=i(8170),c=i(9350),h={};function p(t){t&&h[t]&&delete h[t]}r.Sensors=h;r.getSensor=function(t){var r=t.getAttribute(c.SizeSensorId);if(r&&h[r])return h[r];var i=(0,s.default)();t.setAttribute(c.SizeSensorId,i);var f=(0,u.createSensor)(t,function(){return p(i)});return h[i]=f,f};r.removeSensor=function(t){var r=t.element.getAttribute(c.SizeSensorId);t.destroy(),p(r)}},8170:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createSensor=void 0;var s=i(4865),u=i(9842),c="undefined"!=typeof ResizeObserver?u.createSensor:s.createSensor;r.createSensor=c},4865:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createSensor=void 0;var s=function(t){return t&&t.__esModule?t:{default:t}}(i(2912)),u=i(9350);r.createSensor=function(t,r){var i=void 0,c=[],h=function(){"static"===getComputedStyle(t).position&&(t.style.position="relative");var r=document.createElement("object");return r.onload=function(){r.contentDocument.defaultView.addEventListener("resize",p),p()},r.style.display="block",r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.height="100%",r.style.width="100%",r.style.overflow="hidden",r.style.pointerEvents="none",r.style.zIndex="-1",r.style.opacity="0",r.setAttribute("class",u.SensorClassName),r.setAttribute("tabindex",u.SensorTabIndex),r.type="text/html",t.appendChild(r),r.data="about:blank",r},p=(0,s.default)(function(){c.forEach(function(r){r(t)})}),f=function(){i&&i.parentNode&&(i.contentDocument&&i.contentDocument.defaultView.removeEventListener("resize",p),i.parentNode.removeChild(i),t.removeAttribute(u.SizeSensorId),i=void 0,c=[],r&&r())};return{element:t,bind:function(t){!i&&(i=h()),-1===c.indexOf(t)&&c.push(t)},destroy:f,unbind:function(t){var r=c.indexOf(t);-1!==r&&c.splice(r,1),0===c.length&&i&&f()}}}},9842:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createSensor=void 0;var s=i(9350),u=function(t){return t&&t.__esModule?t:{default:t}}(i(2912));r.createSensor=function(t,r){var i=void 0,c=[],h=(0,u.default)(function(){c.forEach(function(r){r(t)})}),p=function(){var r=new ResizeObserver(h);return r.observe(t),h(),r},f=function(){i.disconnect(),c=[],i=void 0,t.removeAttribute(s.SizeSensorId),r&&r()};return{element:t,bind:function(t){!i&&(i=p()),-1===c.indexOf(t)&&c.push(t)},destroy:f,unbind:function(t){var r=c.indexOf(t);-1!==r&&c.splice(r,1),0===c.length&&i&&f()}}}},9593:function(t,r,i){"use strict";var s=i(5582);function u(t,r,i,s){var c=t.indexOf(r,i);return"\\"===t.charAt(c-1)?u(t,r,c+1):c}t.exports=function(t,r,i){if("string"!=typeof t)throw TypeError("expected a string");"function"==typeof r&&(i=r,r=null),"string"==typeof r&&(r={sep:r});var c,h,p=s({sep:"."},r),f=p.quotes||['"',"'","`"];!0===p.brackets?c={"<":">","(":")","[":"]","{":"}"}:p.brackets&&(c=p.brackets);var v=[],y=[],x=[""],_=p.sep,b=t.length,w=-1;function S(){if(c&&y.length)return c[y[y.length-1]]}for(;++w<b;){var M=t[w],A=t[w+1],C={val:M,idx:w,arr:x,str:t};if(v.push(C),"\\"===M){C.val=!0===function(t,r,i){return"function"==typeof t.keepEscaping?t.keepEscaping(r,i):!0===t.keepEscaping||"\\"===r[i+1]}(p,t,w)?M+A:A,C.escaped=!0,"function"==typeof i&&i(C),x[x.length-1]+=C.val,w++;continue}if(c&&c[M]){y.push(M);var T=S(),I=w+1;if(-1!==t.indexOf(T,I+1))for(;y.length&&I<b;){var D=t[++I];if("\\"===D){D++;continue}if(-1!==f.indexOf(D)){I=u(t,D,I+1);continue}if(T=S(),y.length&&-1===t.indexOf(T,I+1))break;if(c[D]){y.push(D);continue}T===D&&y.pop()}if(-1===(h=I)){x[x.length-1]+=M;continue}M=t.slice(w,h+1),C.val=M,C.idx=w=h}if(-1!==f.indexOf(M)){if(-1===(h=u(t,M,w+1))){x[x.length-1]+=M;continue}M=!0===function(t,r){return!0===r.keepDoubleQuotes&&'"'===t||!0===r.keepSingleQuotes&&"'"===t||r.keepQuotes}(M,p)?t.slice(w,h+1):t.slice(w+1,h),C.val=M,C.idx=w=h}if("function"==typeof i&&(i(C,v),M=C.val,w=C.idx),C.val===_&&!1!==C.split){x.push("");continue}x[x.length-1]+=C.val}return x}},7613:function(t,r,i){"use strict";var s=i(5005),u=i(2932),c=TypeError;t.exports=function(t){if(s(t))return t;throw new c(u(t)+" is not a function")}},6241:function(t,r,i){"use strict";var s=i(7051).has;t.exports=function(t){return s(t),t}},3010:function(t,r,i){"use strict";var s=i(296),u=TypeError;t.exports=function(t,r){if(s(r,t))return t;throw new u("Incorrect invocation")}},5089:function(t,r,i){"use strict";var s=i(9061),u=String,c=TypeError;t.exports=function(t){if(s(t))return t;throw new c(u(t)+" is not an object")}},3097:function(t,r,i){"use strict";var s=i(5145),u=i(2293),c=i(6724),h=function(t){return function(r,i,h){var p,f=s(r),v=c(f);if(0===v)return!t&&-1;var y=u(h,v);if(t&&i!=i){for(;v>y;)if((p=f[y++])!=p)return!0}else for(;v>y;y++)if((t||y in f)&&f[y]===i)return t||y||0;return!t&&-1}};t.exports={includes:h(!0),indexOf:h(!1)}},5568:function(t,r,i){"use strict";var s=i(9987),u=i(5541),c=TypeError,h=Object.getOwnPropertyDescriptor,p=s&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=p?function(t,r){if(u(t)&&!h(t,"length").writable)throw new c("Cannot set read only .length");return t.length=r}:function(t,r){return t.length=r}},5069:function(t,r,i){"use strict";var s=i(3639),u=i(7720),c=i(5717);t.exports=function(t,r,i,h){try{var p=c(t,"return");if(p)return u("Promise").resolve(s(p,t)).then(function(){r(i)},function(t){h(t)})}catch(t){return h(t)}r(i)}},1230:function(t,r,i){"use strict";var s=i(3639),u=i(354),c=i(5089),h=i(7958),p=i(5972),f=i(8593),v=i(7431),y=i(5947),x=i(7720),_=i(5717),b=i(3716),w=i(3939),S=i(8643),M=x("Promise"),A=v("toStringTag"),C="AsyncIteratorHelper",T="WrapForValidAsyncIterator",I=y.set,D=function(t){var r=!t,i=y.getterFor(t?T:C),p=function(t){var s=u(function(){return i(t)}),c=s.error,h=s.value;return c||r&&h.done?{exit:!0,value:c?M.reject(h):M.resolve(w(void 0,!0))}:{exit:!1,value:h}};return f(h(b),{next:function(){var t=p(this),r=t.value;if(t.exit)return r;var i=u(function(){return c(r.nextHandler(M))}),s=i.error,h=i.value;return s&&(r.done=!0),s?M.reject(h):M.resolve(h)},return:function(){var r,i,h=p(this),f=h.value;if(h.exit)return f;f.done=!0;var v=f.iterator,y=u(function(){if(f.inner)try{S(f.inner.iterator,"normal")}catch(t){return S(v,"throw",t)}return _(v,"return")});return(r=i=y.value,y.error)?M.reject(i):void 0===r?M.resolve(w(void 0,!0)):(i=(y=u(function(){return s(r,v)})).value,y.error)?M.reject(i):t?M.resolve(i):M.resolve(i).then(function(t){return c(t),w(void 0,!0)})}})},P=D(!0),R=D(!1);p(R,A,"Async Iterator Helper"),t.exports=function(t,r){var i=function(i,s){s?(s.iterator=i.iterator,s.next=i.next):s=i,s.type=r?T:C,s.nextHandler=t,s.counter=0,s.done=!1,I(this,s)};return i.prototype=r?P:R,i}},8631:function(t,r,i){"use strict";var s=i(3639),u=i(7613),c=i(5089),h=i(9061),p=i(9754),f=i(7720),v=i(9720),y=i(5069),x=function(t){var r=0===t,i=1===t,x=2===t,_=3===t;return function(t,b,w){c(t);var S=void 0!==b;(S||!r)&&u(b);var M=v(t),A=f("Promise"),C=M.iterator,T=M.next,I=0;return new A(function(t,u){var f=function(t){y(C,u,t,u)},v=function(){try{if(S)try{p(I)}catch(t){f(t)}A.resolve(c(s(T,C))).then(function(s){try{if(c(s).done)r?(w.length=I,t(w)):t(!_&&(x||void 0));else{var p=s.value;try{if(S){var M=b(p,I),T=function(s){if(i)v();else if(x)s?v():y(C,t,!1,u);else if(r)try{w[I++]=s,v()}catch(t){f(t)}else s?y(C,t,_||p,u):v()};h(M)?A.resolve(M).then(T,f):T(M)}else w[I++]=p,v()}catch(t){f(t)}}}catch(t){u(t)}},u)}catch(t){u(t)}};v()})}};t.exports={toArray:x(0),forEach:x(1),every:x(2),some:x(3),find:x(4)}},4013:function(t,r,i){"use strict";var s=i(3639),u=i(7613),c=i(5089),h=i(9061),p=i(9720),f=i(1230),v=i(3939),y=i(5069),x=f(function(t){var r=this,i=r.iterator,u=r.mapper;return new t(function(p,f){var x=function(t){r.done=!0,f(t)},_=function(t){y(i,x,t,x)};t.resolve(c(s(r.next,i))).then(function(i){try{if(c(i).done)r.done=!0,p(v(void 0,!0));else{var s=i.value;try{var f=u(s,r.counter++),y=function(t){p(v(t,!1))};h(f)?t.resolve(f).then(y,_):y(f)}catch(t){_(t)}}}catch(t){x(t)}},x)})});t.exports=function(t){return c(this),u(t),new x(p(this),{mapper:t})}},3716:function(t,r,i){"use strict";var s,u,c=i(5835),h=i(6660),p=i(5005),f=i(7958),v=i(4023),y=i(9016),x=i(7431),_=i(1979),b="USE_FUNCTION_CONSTRUCTOR",w=x("asyncIterator"),S=c.AsyncIterator,M=h.AsyncIteratorPrototype;if(M)s=M;else if(p(S))s=S.prototype;else if(h[b]||c[b])try{u=v(v(v(Function("return async function*(){}()")()))),v(u)===Object.prototype&&(s=u)}catch(t){}s?_&&(s=f(s)):s={},!p(s[w])&&y(s,w,function(){return this}),t.exports=s},3427:function(t,r,i){"use strict";var s=i(5089),u=i(8643);t.exports=function(t,r,i,c){try{return c?r(s(i)[0],i[1]):r(i)}catch(r){u(t,"throw",r)}}},3973:function(t,r,i){"use strict";var s=i(7626),u=s({}.toString),c=s("".slice);t.exports=function(t){return c(u(t),8,-1)}},9944:function(t,r,i){"use strict";var s=i(2401),u=i(5005),c=i(3973),h=i(7431)("toStringTag"),p=Object,f="Arguments"===c(function(){return arguments}()),v=function(t,r){try{return t[r]}catch(t){}};t.exports=s?c:function(t){var r,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=v(r=p(t),h))?i:f?c(r):"Object"===(s=c(r))&&u(r.callee)?"Arguments":s}},828:function(t,r,i){"use strict";var s=i(1185),u=i(4549),c=i(1791),h=i(7631);t.exports=function(t,r,i){for(var p=u(r),f=h.f,v=c.f,y=0;y<p.length;y++){var x=p[y];!s(t,x)&&!(i&&s(i,x))&&f(t,x,v(r,x))}}},4294:function(t,r,i){"use strict";var s=i(6848);t.exports=!s(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},3939:function(t){"use strict";t.exports=function(t,r){return{value:t,done:r}}},5972:function(t,r,i){"use strict";var s=i(9987),u=i(7631),c=i(9753);t.exports=s?function(t,r,i){return u.f(t,r,c(1,i))}:function(t,r,i){return t[r]=i,t}},9753:function(t){"use strict";t.exports=function(t,r){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:r}}},7223:function(t,r,i){"use strict";var s=i(9987),u=i(7631),c=i(9753);t.exports=function(t,r,i){s?u.f(t,r,c(0,i)):t[r]=i}},3039:function(t,r,i){"use strict";var s=i(9476),u=i(7631);t.exports=function(t,r,i){return i.get&&s(i.get,r,{getter:!0}),i.set&&s(i.set,r,{setter:!0}),u.f(t,r,i)}},9016:function(t,r,i){"use strict";var s=i(5005),u=i(7631),c=i(9476),h=i(6908);t.exports=function(t,r,i,p){!p&&(p={});var f=p.enumerable,v=void 0!==p.name?p.name:r;if(s(i)&&c(i,v,p),p.global)f?t[r]=i:h(r,i);else{try{p.unsafe?t[r]&&(f=!0):delete t[r]}catch(t){}f?t[r]=i:u.f(t,r,{value:i,enumerable:!1,configurable:!p.nonConfigurable,writable:!p.nonWritable})}return t}},8593:function(t,r,i){"use strict";var s=i(9016);t.exports=function(t,r,i){for(var u in r)s(t,u,r[u],i);return t}},6908:function(t,r,i){"use strict";var s=i(5835),u=Object.defineProperty;t.exports=function(t,r){try{u(s,t,{value:r,configurable:!0,writable:!0})}catch(i){s[t]=r}return r}},9987:function(t,r,i){"use strict";var s=i(6848);t.exports=!s(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},2160:function(t,r,i){"use strict";var s=i(5835),u=i(9061),c=s.document,h=u(c)&&u(c.createElement);t.exports=function(t){return h?c.createElement(t):{}}},9754:function(t){"use strict";var r=TypeError;t.exports=function(t){if(t>0x1fffffffffffff)throw r("Maximum allowed index exceeded");return t}},5711:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1594:function(t,r,i){"use strict";var s=i(5835).navigator,u=s&&s.userAgent;t.exports=u?String(u):""},5080:function(t,r,i){"use strict";var s,u,c=i(5835),h=i(1594),p=c.process,f=c.Deno,v=p&&p.versions||f&&f.version,y=v&&v.v8;y&&(u=(s=y.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!u&&h&&(!(s=h.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=h.match(/Chrome\/(\d+)/))&&(u=+s[1]),t.exports=u},2794:function(t,r,i){"use strict";var s=i(5835),u=i(1791).f,c=i(5972),h=i(9016),p=i(6908),f=i(828),v=i(1595);t.exports=function(t,r){var i,y,x,_,b,w=t.target,S=t.global,M=t.stat;if(i=S?s:M?s[w]||p(w,{}):s[w]&&s[w].prototype)for(y in r){if(_=r[y],x=t.dontCallGetSet?(b=u(i,y))&&b.value:i[y],!v(S?y:w+(M?".":"#")+y,t.forced)&&void 0!==x){if(typeof _==typeof x)continue;f(_,x)}(t.sham||x&&x.sham)&&c(_,"sham",!0),h(i,y,_,t)}}},6848:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},612:function(t,r,i){"use strict";var s=i(2255),u=i(7613),c=i(610),h=s(s.bind);t.exports=function(t,r){return u(t),void 0===r?t:c?h(t,r):function(){return t.apply(r,arguments)}}},610:function(t,r,i){"use strict";var s=i(6848);t.exports=!s(function(){var t=(function(){}).bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},3639:function(t,r,i){"use strict";var s=i(610),u=Function.prototype.call;t.exports=s?u.bind(u):function(){return u.apply(u,arguments)}},3735:function(t,r,i){"use strict";var s=i(9987),u=i(1185),c=Function.prototype,h=s&&Object.getOwnPropertyDescriptor,p=u(c,"name"),f=p&&(!s||s&&h(c,"name").configurable);t.exports={EXISTS:p,PROPER:p&&"something"===(function(){}).name,CONFIGURABLE:f}},4484:function(t,r,i){"use strict";var s=i(7626),u=i(7613);t.exports=function(t,r,i){try{return s(u(Object.getOwnPropertyDescriptor(t,r)[i]))}catch(t){}}},2255:function(t,r,i){"use strict";var s=i(3973),u=i(7626);t.exports=function(t){if("Function"===s(t))return u(t)}},7626:function(t,r,i){"use strict";var s=i(610),u=Function.prototype,c=u.call,h=s&&u.bind.bind(c,c);t.exports=s?h:function(t){return function(){return c.apply(t,arguments)}}},7720:function(t,r,i){"use strict";var s=i(5835),u=i(5005);t.exports=function(t,r){var i;return arguments.length<2?u(i=s[t])?i:void 0:s[t]&&s[t][r]}},9720:function(t){"use strict";t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},2722:function(t,r,i){"use strict";var s=i(9944),u=i(5717),c=i(6989),h=i(8026),p=i(7431)("iterator");t.exports=function(t){if(!c(t))return u(t,p)||u(t,"@@iterator")||h[s(t)]}},3833:function(t,r,i){"use strict";var s=i(3639),u=i(7613),c=i(5089),h=i(2932),p=i(2722),f=TypeError;t.exports=function(t,r){var i=arguments.length<2?p(t):r;if(u(i))return c(s(i,t));throw new f(h(t)+" is not iterable")}},5717:function(t,r,i){"use strict";var s=i(7613),u=i(6989);t.exports=function(t,r){var i=t[r];return u(i)?void 0:s(i)}},8111:function(t,r,i){"use strict";var s=i(7613),u=i(5089),c=i(3639),h=i(154),p=i(9720),f="Invalid size",v=RangeError,y=TypeError,x=Math.max,_=function(t,r){this.set=t,this.size=x(r,0),this.has=s(t.has),this.keys=s(t.keys)};_.prototype={getIterator:function(){return p(u(c(this.keys,this.set)))},includes:function(t){return c(this.has,this.set,t)}},t.exports=function(t){u(t);var r=+t.size;if(r!=r)throw new y(f);var i=h(r);if(i<0)throw new v(f);return new _(t,i)}},5835:function(t,r,i){"use strict";var s=function(t){return t&&t.Math===Math&&t};t.exports=s("object"==typeof globalThis&&globalThis)||s("object"==typeof window&&window)||s("object"==typeof self&&self)||s("object"==typeof i.g&&i.g)||s("object"==typeof this&&this)||function(){return this}()||Function("return this")()},1185:function(t,r,i){"use strict";var s=i(7626),u=i(7018),c=s({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,r){return c(u(t),r)}},352:function(t){"use strict";t.exports={}},4579:function(t,r,i){"use strict";var s=i(7720);t.exports=s("document","documentElement")},4684:function(t,r,i){"use strict";var s=i(9987),u=i(6848),c=i(2160);t.exports=!s&&!u(function(){return 7!==Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a})},378:function(t,r,i){"use strict";var s=i(7626),u=i(6848),c=i(3973),h=Object,p=s("".split);t.exports=u(function(){return!h("z").propertyIsEnumerable(0)})?function(t){return"String"===c(t)?p(t,""):h(t)}:h},7901:function(t,r,i){"use strict";var s=i(7626),u=i(5005),c=i(6660),h=s(Function.toString);!u(c.inspectSource)&&(c.inspectSource=function(t){return h(t)}),t.exports=c.inspectSource},5947:function(t,r,i){"use strict";var s,u,c,h=i(2713),p=i(5835),f=i(9061),v=i(5972),y=i(1185),x=i(6660),_=i(6765),b=i(352),w="Object already initialized",S=p.TypeError,M=p.WeakMap;if(h||x.state){var A=x.state||(x.state=new M);A.get=A.get,A.has=A.has,A.set=A.set,s=function(t,r){if(A.has(t))throw new S(w);return r.facade=t,A.set(t,r),r},u=function(t){return A.get(t)||{}},c=function(t){return A.has(t)}}else{var C=_("state");b[C]=!0,s=function(t,r){if(y(t,C))throw new S(w);return r.facade=t,v(t,C,r),r},u=function(t){return y(t,C)?t[C]:{}},c=function(t){return y(t,C)}}t.exports={set:s,get:u,has:c,enforce:function(t){return c(t)?u(t):s(t,{})},getterFor:function(t){return function(r){var i;if(!f(r)||(i=u(r)).type!==t)throw new S("Incompatible receiver, "+t+" required");return i}}}},2107:function(t,r,i){"use strict";var s=i(7431),u=i(8026),c=s("iterator"),h=Array.prototype;t.exports=function(t){return void 0!==t&&(u.Array===t||h[c]===t)}},5541:function(t,r,i){"use strict";var s=i(3973);t.exports=Array.isArray||function(t){return"Array"===s(t)}},5005:function(t){"use strict";var r="object"==typeof document&&document.all;t.exports=void 0===r&&void 0!==r?function(t){return"function"==typeof t||t===r}:function(t){return"function"==typeof t}},1595:function(t,r,i){"use strict";var s=i(6848),u=i(5005),c=/#|\.prototype\./,h=function(t,r){var i=f[p(t)];return i===y||i!==v&&(u(r)?s(r):!!r)},p=h.normalize=function(t){return String(t).replace(c,".").toLowerCase()},f=h.data={},v=h.NATIVE="N",y=h.POLYFILL="P";t.exports=h},6290:function(t,r,i){"use strict";var s=i(9944),u=i(1185),c=i(6989),h=i(7431),p=i(8026),f=h("iterator"),v=Object;t.exports=function(t){if(c(t))return!1;var r=v(t);return void 0!==r[f]||"@@iterator"in r||u(p,s(r))}},6989:function(t){"use strict";t.exports=function(t){return null==t}},9061:function(t,r,i){"use strict";var s=i(5005);t.exports=function(t){return"object"==typeof t?null!==t:s(t)}},1979:function(t){"use strict";t.exports=!1},6671:function(t,r,i){"use strict";var s=i(7720),u=i(5005),c=i(296),h=i(6270),p=Object;t.exports=h?function(t){return"symbol"==typeof t}:function(t){var r=s("Symbol");return u(r)&&c(r.prototype,p(t))}},8184:function(t,r,i){"use strict";var s=i(3639);t.exports=function(t,r,i){for(var u,c,h=i?t:t.iterator,p=t.next;!(u=s(p,h)).done;)if(void 0!==(c=r(u.value)))return c}},3117:function(t,r,i){"use strict";var s=i(612),u=i(3639),c=i(5089),h=i(2932),p=i(2107),f=i(6724),v=i(296),y=i(3833),x=i(2722),_=i(8643),b=TypeError,w=function(t,r){this.stopped=t,this.result=r},S=w.prototype;t.exports=function(t,r,i){var M,A,C,T,I,D,P,R=i&&i.that,L=!!(i&&i.AS_ENTRIES),k=!!(i&&i.IS_RECORD),O=!!(i&&i.IS_ITERATOR),B=!!(i&&i.INTERRUPTED),N=s(r,R),F=function(t){return M&&_(M,"normal",t),new w(!0,t)},z=function(t){return L?(c(t),B?N(t[0],t[1],F):N(t[0],t[1])):B?N(t,F):N(t)};if(k)M=t.iterator;else if(O)M=t;else{if(!(A=x(t)))throw new b(h(t)+" is not iterable");if(p(A)){for(C=0,T=f(t);T>C;C++)if((I=z(t[C]))&&v(S,I))return I;return new w(!1)}M=y(t,A)}for(D=k?t.next:M.next;!(P=u(D,M)).done;){try{I=z(P.value)}catch(t){_(M,"throw",t)}if("object"==typeof I&&I&&v(S,I))return I}return new w(!1)}},8643:function(t,r,i){"use strict";var s=i(3639),u=i(5089),c=i(5717);t.exports=function(t,r,i){var h,p;u(t);try{if(!(h=c(t,"return"))){if("throw"===r)throw i;return i}h=s(h,t)}catch(t){p=!0,h=t}if("throw"===r)throw i;if(p)throw h;return u(h),i}},5625:function(t,r,i){"use strict";var s=i(3639),u=i(7958),c=i(5972),h=i(8593),p=i(7431),f=i(5947),v=i(5717),y=i(7988).IteratorPrototype,x=i(3939),_=i(8643),b=p("toStringTag"),w="IteratorHelper",S="WrapForValidIterator",M=f.set,A=function(t){var r=f.getterFor(t?S:w);return h(u(y),{next:function(){var i=r(this);if(t)return i.nextHandler();try{var s=i.done?void 0:i.nextHandler();return x(s,i.done)}catch(t){throw i.done=!0,t}},return:function(){var i=r(this),u=i.iterator;if(i.done=!0,t){var c=v(u,"return");return c?s(c,u):x(void 0,!0)}if(i.inner)try{_(i.inner.iterator,"normal")}catch(t){return _(u,"throw",t)}return u&&_(u,"normal"),x(void 0,!0)}})},C=A(!0),T=A(!1);c(T,b,"Iterator Helper"),t.exports=function(t,r){var i=function(i,s){s?(s.iterator=i.iterator,s.next=i.next):s=i,s.type=r?S:w,s.nextHandler=t,s.counter=0,s.done=!1,M(this,s)};return i.prototype=r?C:T,i}},1232:function(t,r,i){"use strict";var s=i(3639),u=i(7613),c=i(5089),h=i(9720),p=i(5625),f=i(3427),v=p(function(){var t=this.iterator,r=c(s(this.next,t));if(!(this.done=!!r.done))return f(t,this.mapper,[r.value,this.counter++],!0)});t.exports=function(t){return c(this),u(t),new v(h(this),{mapper:t})}},7988:function(t,r,i){"use strict";var s,u,c,h=i(6848),p=i(5005),f=i(9061),v=i(7958),y=i(4023),x=i(9016),_=i(7431),b=i(1979),w=_("iterator"),S=!1;[].keys&&("next"in(c=[].keys())?(u=y(y(c)))!==Object.prototype&&(s=u):S=!0),!f(s)||h(function(){var t={};return s[w].call(t)!==t})?s={}:b&&(s=v(s)),!p(s[w])&&x(s,w,function(){return this}),t.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:S}},8026:function(t){"use strict";t.exports={}},6724:function(t,r,i){"use strict";var s=i(6721);t.exports=function(t){return s(t.length)}},9476:function(t,r,i){"use strict";var s=i(7626),u=i(6848),c=i(5005),h=i(1185),p=i(9987),f=i(3735).CONFIGURABLE,v=i(7901),y=i(5947),x=y.enforce,_=y.get,b=String,w=Object.defineProperty,S=s("".slice),M=s("".replace),A=s([].join),C=p&&!u(function(){return 8!==w(function(){},"length",{value:8}).length}),T=String(String).split("String"),I=t.exports=function(t,r,i){"Symbol("===S(b(r),0,7)&&(r="["+M(b(r),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),i&&i.getter&&(r="get "+r),i&&i.setter&&(r="set "+r),(!h(t,"name")||f&&t.name!==r)&&(p?w(t,"name",{value:r,configurable:!0}):t.name=r),C&&i&&h(i,"arity")&&t.length!==i.arity&&w(t,"length",{value:i.arity});try{i&&h(i,"constructor")&&i.constructor?p&&w(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var s=x(t);return!h(s,"source")&&(s.source=A(T,"string"==typeof r?r:"")),t};Function.prototype.toString=I(function(){return c(this)&&_(this).source||v(this)},"toString")},2126:function(t){"use strict";var r=Math.ceil,i=Math.floor;t.exports=Math.trunc||function(t){var s=+t;return(s>0?i:r)(s)}},7958:function(t,r,i){"use strict";var s,u=i(5089),c=i(3598),h=i(5711),p=i(352),f=i(4579),v=i(2160),y=i(6765),x="prototype",_="script",b=y("IE_PROTO"),w=function(){},S=function(t){return"<"+_+">"+t+"</"+_+">"},M=function(t){t.write(S("")),t.close();var r=t.parentWindow.Object;return t=null,r},A=function(){var t,r=v("iframe");return r.style.display="none",f.appendChild(r),r.src=String("java"+_+":"),(t=r.contentWindow.document).open(),t.write(S("document.F=Object")),t.close(),t.F},C=function(){try{s=new ActiveXObject("htmlfile")}catch(t){}C="undefined"!=typeof document?document.domain&&s?M(s):A():M(s);for(var t=h.length;t--;)delete C[x][h[t]];return C()};p[b]=!0,t.exports=Object.create||function(t,r){var i;return null!==t?(w[x]=u(t),i=new w,w[x]=null,i[b]=t):i=C(),void 0===r?i:c.f(i,r)}},3598:function(t,r,i){"use strict";var s=i(9987),u=i(1845),c=i(7631),h=i(5089),p=i(5145),f=i(25);r.f=s&&!u?Object.defineProperties:function(t,r){h(t);for(var i,s=p(r),u=f(r),v=u.length,y=0;v>y;)c.f(t,i=u[y++],s[i]);return t}},7631:function(t,r,i){"use strict";var s=i(9987),u=i(4684),c=i(1845),h=i(5089),p=i(889),f=TypeError,v=Object.defineProperty,y=Object.getOwnPropertyDescriptor,x="enumerable",_="configurable",b="writable";r.f=s?c?function(t,r,i){if(h(t),r=p(r),h(i),"function"==typeof t&&"prototype"===r&&"value"in i&&b in i&&!i[b]){var s=y(t,r);s&&s[b]&&(t[r]=i.value,i={configurable:_ in i?i[_]:s[_],enumerable:x in i?i[x]:s[x],writable:!1})}return v(t,r,i)}:v:function(t,r,i){if(h(t),r=p(r),h(i),u)try{return v(t,r,i)}catch(t){}if("get"in i||"set"in i)throw new f("Accessors not supported");return"value"in i&&(t[r]=i.value),t}},1791:function(t,r,i){"use strict";var s=i(9987),u=i(3639),c=i(2457),h=i(9753),p=i(5145),f=i(889),v=i(1185),y=i(4684),x=Object.getOwnPropertyDescriptor;r.f=s?x:function(t,r){if(t=p(t),r=f(r),y)try{return x(t,r)}catch(t){}if(v(t,r))return h(!u(c.f,t,r),t[r])}},2079:function(t,r,i){"use strict";var s=i(2253),u=i(5711).concat("length","prototype");r.f=Object.getOwnPropertyNames||function(t){return s(t,u)}},3002:function(t,r){"use strict";r.f=Object.getOwnPropertySymbols},4023:function(t,r,i){"use strict";var s=i(1185),u=i(5005),c=i(7018),h=i(6765),p=i(4294),f=h("IE_PROTO"),v=Object,y=v.prototype;t.exports=p?v.getPrototypeOf:function(t){var r=c(t);if(s(r,f))return r[f];var i=r.constructor;return u(i)&&r instanceof i?i.prototype:r instanceof v?y:null}},296:function(t,r,i){"use strict";var s=i(7626);t.exports=s({}.isPrototypeOf)},2253:function(t,r,i){"use strict";var s=i(7626),u=i(1185),c=i(5145),h=i(3097).indexOf,p=i(352),f=s([].push);t.exports=function(t,r){var i,s=c(t),v=0,y=[];for(i in s)!u(p,i)&&u(s,i)&&f(y,i);for(;r.length>v;)u(s,i=r[v++])&&(~h(y,i)||f(y,i));return y}},25:function(t,r,i){"use strict";var s=i(2253),u=i(5711);t.exports=Object.keys||function(t){return s(t,u)}},2457:function(t,r){"use strict";var i={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,u=s&&!i.call({1:2},1);r.f=u?function(t){var r=s(this,t);return!!r&&r.enumerable}:i},489:function(t,r,i){"use strict";var s=i(3639),u=i(5005),c=i(9061),h=TypeError;t.exports=function(t,r){var i,p;if("string"===r&&u(i=t.toString)&&!c(p=s(i,t))||u(i=t.valueOf)&&!c(p=s(i,t))||"string"!==r&&u(i=t.toString)&&!c(p=s(i,t)))return p;throw new h("Can't convert object to primitive value")}},4549:function(t,r,i){"use strict";var s=i(7720),u=i(7626),c=i(2079),h=i(3002),p=i(5089),f=u([].concat);t.exports=s("Reflect","ownKeys")||function(t){var r=c.f(p(t)),i=h.f;return i?f(r,i(t)):r}},6411:function(t,r,i){"use strict";var s=i(7626),u=i(1185),c=SyntaxError,h=parseInt,p=String.fromCharCode,f=s("".charAt),v=s("".slice),y=s(/./.exec),x={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":"\n","\\r":"\r","\\t":"	"},_=/^[\da-f]{4}$/i,b=/^[\u0000-\u001F]$/;t.exports=function(t,r){for(var i=!0,s="";r<t.length;){var w=f(t,r);if("\\"===w){var S=v(t,r,r+2);if(u(x,S))s+=x[S],r+=2;else if("\\u"===S){var M=v(t,r+=2,r+4);if(!y(_,M))throw new c("Bad Unicode escape at: "+r);s+=p(h(M,16)),r+=4}else throw new c('Unknown escape sequence: "'+S+'"')}else if('"'===w){i=!1,r++;break}else{if(y(b,w))throw new c("Bad control character in string literal at: "+r);s+=w,r++}}if(i)throw new c("Unterminated string at: "+r);return{value:s,end:r}}},354:function(t){"use strict";t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},7228:function(t,r,i){"use strict";var s=i(6989),u=TypeError;t.exports=function(t){if(s(t))throw new u("Can't call method on "+t);return t}},4167:function(t,r,i){"use strict";var s=i(7051),u=i(1062),c=s.Set,h=s.add;t.exports=function(t){var r=new c;return u(t,function(t){h(r,t)}),r}},9238:function(t,r,i){"use strict";var s=i(6241),u=i(7051),c=i(4167),h=i(1830),p=i(8111),f=i(1062),v=i(8184),y=u.has,x=u.remove;t.exports=function(t){var r=s(this),i=p(t),u=c(r);return h(r)<=i.size?f(r,function(t){i.includes(t)&&x(u,t)}):v(i.getIterator(),function(t){y(r,t)&&x(u,t)}),u}},7051:function(t,r,i){"use strict";var s=i(7626),u=Set.prototype;t.exports={Set:Set,add:s(u.add),has:s(u.has),remove:s(u.delete),proto:u}},8711:function(t,r,i){"use strict";var s=i(6241),u=i(7051),c=i(1830),h=i(8111),p=i(1062),f=i(8184),v=u.Set,y=u.add,x=u.has;t.exports=function(t){var r=s(this),i=h(t),u=new v;return c(r)>i.size?f(i.getIterator(),function(t){x(r,t)&&y(u,t)}):p(r,function(t){i.includes(t)&&y(u,t)}),u}},7449:function(t,r,i){"use strict";var s=i(6241),u=i(7051).has,c=i(1830),h=i(8111),p=i(1062),f=i(8184),v=i(8643);t.exports=function(t){var r=s(this),i=h(t);if(c(r)<=i.size)return!1!==p(r,function(t){if(i.includes(t))return!1},!0);var y=i.getIterator();return!1!==f(y,function(t){if(u(r,t))return v(y,"normal",!1)})}},8300:function(t,r,i){"use strict";var s=i(6241),u=i(1830),c=i(1062),h=i(8111);t.exports=function(t){var r=s(this),i=h(t);return!(u(r)>i.size)&&!1!==c(r,function(t){if(!i.includes(t))return!1},!0)}},6808:function(t,r,i){"use strict";var s=i(6241),u=i(7051).has,c=i(1830),h=i(8111),p=i(8184),f=i(8643);t.exports=function(t){var r=s(this),i=h(t);if(c(r)<i.size)return!1;var v=i.getIterator();return!1!==p(v,function(t){if(!u(r,t))return f(v,"normal",!1)})}},1062:function(t,r,i){"use strict";var s=i(7626),u=i(8184),c=i(7051),h=c.Set,p=c.proto,f=s(p.forEach),v=s(p.keys),y=v(new h).next;t.exports=function(t,r,i){return i?u({iterator:v(t),next:y},r):f(t,r)}},1340:function(t,r,i){"use strict";var s=i(7720),u=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};t.exports=function(t){var r=s("Set");try{new r()[t](u(0));try{return new r()[t](u(-1)),!1}catch(t){return!0}}catch(t){return!1}}},1830:function(t,r,i){"use strict";var s=i(4484),u=i(7051);t.exports=s(u.proto,"size","get")||function(t){return t.size}},541:function(t,r,i){"use strict";var s=i(6241),u=i(7051),c=i(4167),h=i(8111),p=i(8184),f=u.add,v=u.has,y=u.remove;t.exports=function(t){var r=s(this),i=h(t).getIterator(),u=c(r);return p(i,function(t){v(r,t)?y(u,t):f(u,t)}),u}},3822:function(t,r,i){"use strict";var s=i(6241),u=i(7051).add,c=i(4167),h=i(8111),p=i(8184);t.exports=function(t){var r=s(this),i=h(t).getIterator(),f=c(r);return p(i,function(t){u(f,t)}),f}},6765:function(t,r,i){"use strict";var s=i(209),u=i(3831),c=s("keys");t.exports=function(t){return c[t]||(c[t]=u(t))}},6660:function(t,r,i){"use strict";var s=i(1979),u=i(5835),c=i(6908),h="__core-js_shared__",p=t.exports=u[h]||c(h,{});(p.versions||(p.versions=[])).push({version:"3.39.0",mode:s?"pure":"global",copyright:"\xa9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})},209:function(t,r,i){"use strict";var s=i(6660);t.exports=function(t,r){return s[t]||(s[t]=r||{})}},2731:function(t,r,i){"use strict";var s=i(5080),u=i(6848),c=i(5835).String;t.exports=!!Object.getOwnPropertySymbols&&!u(function(){var t=Symbol("symbol detection");return!c(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&s&&s<41})},2293:function(t,r,i){"use strict";var s=i(154),u=Math.max,c=Math.min;t.exports=function(t,r){var i=s(t);return i<0?u(i+r,0):c(i,r)}},5145:function(t,r,i){"use strict";var s=i(378),u=i(7228);t.exports=function(t){return s(u(t))}},154:function(t,r,i){"use strict";var s=i(2126);t.exports=function(t){var r=+t;return r!=r||0===r?0:s(r)}},6721:function(t,r,i){"use strict";var s=i(154),u=Math.min;t.exports=function(t){var r=s(t);return r>0?u(r,0x1fffffffffffff):0}},7018:function(t,r,i){"use strict";var s=i(7228),u=Object;t.exports=function(t){return u(s(t))}},3367:function(t,r,i){"use strict";var s=i(3639),u=i(9061),c=i(6671),h=i(5717),p=i(489),f=i(7431),v=TypeError,y=f("toPrimitive");t.exports=function(t,r){if(!u(t)||c(t))return t;var i,f=h(t,y);if(f){if(void 0===r&&(r="default"),!u(i=s(f,t,r))||c(i))return i;throw new v("Can't convert object to primitive value")}return void 0===r&&(r="number"),p(t,r)}},889:function(t,r,i){"use strict";var s=i(3367),u=i(6671);t.exports=function(t){var r=s(t,"string");return u(r)?r:r+""}},2149:function(t,r,i){"use strict";var s=i(7720),u=i(5005),c=i(6290),h=i(9061),p=s("Set");t.exports=function(t){var r;return h(r=t)&&"number"==typeof r.size&&u(r.has)&&u(r.keys)?t:c(t)?new p(t):t}},2401:function(t,r,i){"use strict";var s=i(7431)("toStringTag"),u={};u[s]="z",t.exports="[object z]"===String(u)},1023:function(t,r,i){"use strict";var s=i(9944),u=String;t.exports=function(t){if("Symbol"===s(t))throw TypeError("Cannot convert a Symbol value to a string");return u(t)}},2932:function(t){"use strict";var r=String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},3831:function(t,r,i){"use strict";var s=i(7626),u=0,c=Math.random(),h=s(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+h(++u+c,36)}},6270:function(t,r,i){"use strict";var s=i(2731);t.exports=s&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},1845:function(t,r,i){"use strict";var s=i(9987),u=i(6848);t.exports=s&&u(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},7968:function(t){"use strict";var r=TypeError;t.exports=function(t,i){if(t<i)throw new r("Not enough arguments");return t}},2713:function(t,r,i){"use strict";var s=i(5835),u=i(5005),c=s.WeakMap;t.exports=u(c)&&/native code/.test(String(c))},7431:function(t,r,i){"use strict";var s=i(5835),u=i(209),c=i(1185),h=i(3831),p=i(2731),f=i(6270),v=s.Symbol,y=u("wks"),x=f?v.for||v:v&&v.withoutSetter||h;t.exports=function(t){return!c(y,t)&&(y[t]=p&&c(v,t)?v[t]:x("Symbol."+t)),y[t]}},7663:function(t,r,i){"use strict";var s=i(2794),u=i(7018),c=i(6724),h=i(5568),p=i(9754),f=i(6848)(function(){return 0x100000001!==[].push.call({length:0x100000000},1)});s({target:"Array",proto:!0,arity:1,forced:f||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}()},{push:function(t){var r=u(this),i=c(r),s=arguments.length;p(i+s);for(var f=0;f<s;f++)r[i]=arguments[f],i++;return h(r,i),i}})},4149:function(t,r,i){"use strict";var s=i(2794),u=i(5835),c=i(3010),h=i(5089),p=i(5005),f=i(4023),v=i(3039),y=i(7223),x=i(6848),_=i(1185),b=i(7431),w=i(7988).IteratorPrototype,S=i(9987),M=i(1979),A="constructor",C="Iterator",T=b("toStringTag"),I=TypeError,D=u[C],P=M||!p(D)||D.prototype!==w||!x(function(){D({})}),R=function(){if(c(this,w),f(this)===w)throw new I("Abstract class Iterator not directly constructable")},L=function(t,r){S?v(w,t,{configurable:!0,get:function(){return r},set:function(r){if(h(this),this===w)throw new I("You can't redefine this property");_(this,t)?this[t]=r:y(this,t,r)}}):w[t]=r};!_(w,T)&&L(T,C),(P||!_(w,A)||w[A]===Object)&&L(A,R),R.prototype=w,s({global:!0,constructor:!0,forced:P},{Iterator:R})},6396:function(t,r,i){"use strict";var s=i(2794),u=i(3117),c=i(7613),h=i(5089),p=i(9720);s({target:"Iterator",proto:!0,real:!0},{forEach:function(t){h(this),c(t);var r=p(this),i=0;u(r,function(r){t(r,i++)},{IS_RECORD:!0})}})},402:function(t,r,i){"use strict";var s=i(2794),u=i(1232);s({target:"Iterator",proto:!0,real:!0,forced:i(1979)},{map:u})},6170:function(t,r,i){"use strict";var s=i(2794),u=i(3117),c=i(7613),h=i(5089),p=i(9720),f=TypeError;s({target:"Iterator",proto:!0,real:!0},{reduce:function(t){h(this),c(t);var r=p(this),i=arguments.length<2,s=i?void 0:arguments[1],v=0;if(u(r,function(r){i?(i=!1,s=r):s=t(s,r,v),v++},{IS_RECORD:!0}),i)throw new f("Reduce of empty iterator with no initial value");return s}})},4992:function(t,r,i){"use strict";var s=i(2794),u=i(9238);s({target:"Set",proto:!0,real:!0,forced:!i(1340)("difference")},{difference:u})},5660:function(t,r,i){"use strict";var s=i(2794),u=i(6848),c=i(8711);s({target:"Set",proto:!0,real:!0,forced:!i(1340)("intersection")||u(function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))})},{intersection:c})},1022:function(t,r,i){"use strict";var s=i(2794),u=i(7449);s({target:"Set",proto:!0,real:!0,forced:!i(1340)("isDisjointFrom")},{isDisjointFrom:u})},3733:function(t,r,i){"use strict";var s=i(2794),u=i(8300);s({target:"Set",proto:!0,real:!0,forced:!i(1340)("isSubsetOf")},{isSubsetOf:u})},9567:function(t,r,i){"use strict";var s=i(2794),u=i(6808);s({target:"Set",proto:!0,real:!0,forced:!i(1340)("isSupersetOf")},{isSupersetOf:u})},8057:function(t,r,i){"use strict";var s=i(2794),u=i(541);s({target:"Set",proto:!0,real:!0,forced:!i(1340)("symmetricDifference")},{symmetricDifference:u})},3128:function(t,r,i){"use strict";var s=i(2794),u=i(3822);s({target:"Set",proto:!0,real:!0,forced:!i(1340)("union")},{union:u})},845:function(t,r,i){"use strict";var s=i(2794),u=i(3010),c=i(4023),h=i(5972),p=i(1185),f=i(7431),v=i(3716),y=i(1979),x=f("toStringTag"),_=TypeError,b=function(){if(u(this,v),c(this)===v)throw new _("Abstract class AsyncIterator not directly constructable")};b.prototype=v,!p(v,x)&&h(v,x,"AsyncIterator"),(y||!p(v,"constructor")||v.constructor===Object)&&h(v,"constructor",b),s({global:!0,constructor:!0,forced:y},{AsyncIterator:b})},1811:function(t,r,i){"use strict";var s=i(2794),u=i(8631).forEach;s({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(t){return u(this,t)}})},6913:function(t,r,i){"use strict";var s=i(2794),u=i(4013);s({target:"AsyncIterator",proto:!0,real:!0,forced:i(1979)},{map:u})},4958:function(t,r,i){"use strict";var s=i(2794),u=i(3639),c=i(7613),h=i(5089),p=i(9061),f=i(7720),v=i(9720),y=i(5069),x=f("Promise"),_=TypeError;s({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(t){h(this),c(t);var r=v(this),i=r.iterator,s=r.next,f=arguments.length<2,b=f?void 0:arguments[1],w=0;return new x(function(r,c){var v=function(t){y(i,c,t,c)},S=function(){try{x.resolve(h(u(s,i))).then(function(i){try{if(h(i).done)f?c(new _("Reduce of empty iterator with no initial value")):r(b);else{var s=i.value;if(f)f=!1,b=s,S();else try{var u=t(b,s,w),y=function(t){b=t,S()};p(u)?x.resolve(u).then(y,v):y(u)}catch(t){v(t)}}w++}catch(t){c(t)}},c)}catch(t){c(t)}};S()})}})},9168:function(t,r,i){"use strict";var s=i(2794),u=i(8631).toArray;s({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return u(this,void 0,[])}})},3747:function(t,r,i){"use strict";i(4149)},4838:function(t,r,i){"use strict";i(6396)},5662:function(t,r,i){"use strict";i(402)},8725:function(t,r,i){"use strict";i(6170)},2611:function(t,r,i){"use strict";var s=i(2794),u=i(9987),c=i(5835),h=i(7720),p=i(7626),f=i(3639),v=i(5005),y=i(9061),x=i(5541),_=i(1185),b=i(1023),w=i(6724),S=i(7223),M=i(6848),A=i(6411),C=i(2731),T=c.JSON,I=c.Number,D=c.SyntaxError,P=T&&T.parse,R=h("Object","keys"),L=Object.getOwnPropertyDescriptor,k=p("".charAt),O=p("".slice),B=p(/./.exec),N=p([].push),F=/^\d$/,z=/^[1-9]$/,U=/^[\d-]$/,H=/^[\t\n\r ]$/,G=function(t,r){var i=new X(t=b(t),0,""),s=i.parse(),u=s.value,c=i.skip(H,s.end);if(c<t.length)throw new D('Unexpected extra character: "'+k(t,c)+'" after the parsed data at: '+c);return v(r)?V({"":u},"",r,s):u},V=function(t,r,i,s){var u,c,h,p,v,b=t[r],S=s&&b===s.value,M=S&&"string"==typeof s.source?{source:s.source}:{};if(y(b)){var A=x(b),C=S?s.nodes:A?[]:{};if(A)for(p=0,u=C.length,h=w(b);p<h;p++)W(b,p,V(b,""+p,i,p<u?C[p]:void 0));else for(p=0,h=w(c=R(b));p<h;p++)W(b,v=c[p],V(b,v,i,_(C,v)?C[v]:void 0))}return f(i,t,r,b,M)},W=function(t,r,i){if(u){var s=L(t,r);if(s&&!s.configurable)return}void 0===i?delete t[r]:S(t,r,i)},j=function(t,r,i,s){this.value=t,this.end=r,this.source=i,this.nodes=s},X=function(t,r){this.source=t,this.index=r};X.prototype={fork:function(t){return new X(this.source,t)},parse:function(){var t=this.source,r=this.skip(H,this.index),i=this.fork(r),s=k(t,r);if(B(U,s))return i.number();switch(s){case"{":return i.object();case"[":return i.array();case'"':return i.string();case"t":return i.keyword(!0);case"f":return i.keyword(!1);case"n":return i.keyword(null)}throw new D('Unexpected character: "'+s+'" at: '+r)},node:function(t,r,i,s,u){return new j(r,s,t?null:O(this.source,i,s),u)},object:function(){for(var t=this.source,r=this.index+1,i=!1,s={},u={};r<t.length;){if("}"===k(t,r=this.until(['"',"}"],r))&&!i){r++;break}var c=this.fork(r).string(),h=c.value;r=c.end,r=this.until([":"],r)+1,r=this.skip(H,r),S(u,h,c=this.fork(r).parse()),S(s,h,c.value);var p=k(t,r=this.until([",","}"],c.end));if(","===p)i=!0,r++;else if("}"===p){r++;break}}return this.node(1,s,this.index,r,u)},array:function(){for(var t=this.source,r=this.index+1,i=!1,s=[],u=[];r<t.length;){if("]"===k(t,r=this.skip(H,r))&&!i){r++;break}var c=this.fork(r).parse();if(N(u,c),N(s,c.value),","===k(t,r=this.until([",","]"],c.end)))i=!0,r++;else if("]"===k(t,r)){r++;break}}return this.node(1,s,this.index,r,u)},string:function(){var t=this.index,r=A(this.source,this.index+1);return this.node(0,r.value,t,r.end)},number:function(){var t=this.source,r=this.index,i=r;if("-"===k(t,i)&&i++,"0"===k(t,i))i++;else if(B(z,k(t,i)))i=this.skip(F,i+1);else throw new D("Failed to parse number at: "+i);if("."===k(t,i)&&(i=this.skip(F,i+1)),("e"===k(t,i)||"E"===k(t,i))&&(("+"===k(t,++i)||"-"===k(t,i))&&i++,i===(i=this.skip(F,i))))throw new D("Failed to parse number's exponent value at: "+i);return this.node(0,I(O(t,r,i)),r,i)},keyword:function(t){var r=""+t,i=this.index,s=i+r.length;if(O(this.source,i,s)!==r)throw new D("Failed to parse value at: "+i);return this.node(0,t,i,s)},skip:function(t,r){for(var i=this.source;r<i.length&&B(t,k(i,r));r++);return r},until:function(t,r){r=this.skip(H,r);for(var i=k(this.source,r),s=0;s<t.length;s++)if(t[s]===i)return r;throw new D('Unexpected character: "'+i+'" at: '+r)}};var Y=M(function(){var t,r="9007199254740993";return P(r,function(r,i,s){t=s.source}),t!==r}),$=C&&!M(function(){return 1/P("-0 	")!=-1/0});s({target:"JSON",stat:!0,forced:Y},{parse:function(t,r){return $&&!v(r)?P(t):G(t,r)}})},874:function(t,r,i){"use strict";var s=i(2794),u=i(6241),c=i(7051).add;s({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=u(this),r=0,i=arguments.length;r<i;r++)c(t,arguments[r]);return t}})},2256:function(t,r,i){"use strict";var s=i(2794),u=i(6241),c=i(7051).remove;s({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t,r=u(this),i=!0,s=0,h=arguments.length;s<h;s++)t=c(r,arguments[s]),i=i&&t;return!!i}})},443:function(t,r,i){"use strict";var s=i(2794),u=i(3639),c=i(2149),h=i(9238);s({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return u(h,this,c(t))}})},701:function(t,r,i){"use strict";var s=i(2794),u=i(612),c=i(6241),h=i(1062);s({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var r=c(this),i=u(t,arguments.length>1?arguments[1]:void 0);return!1!==h(r,function(t){if(!i(t,t,r))return!1},!0)}})},5242:function(t,r,i){"use strict";var s=i(2794),u=i(612),c=i(6241),h=i(7051),p=i(1062),f=h.Set,v=h.add;s({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var r=c(this),i=u(t,arguments.length>1?arguments[1]:void 0),s=new f;return p(r,function(t){i(t,t,r)&&v(s,t)}),s}})},646:function(t,r,i){"use strict";var s=i(2794),u=i(612),c=i(6241),h=i(1062);s({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var r=c(this),i=u(t,arguments.length>1?arguments[1]:void 0),s=h(r,function(t){if(i(t,t,r))return{value:t}},!0);return s&&s.value}})},1309:function(t,r,i){"use strict";var s=i(2794),u=i(3639),c=i(2149),h=i(8711);s({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return u(h,this,c(t))}})},4887:function(t,r,i){"use strict";var s=i(2794),u=i(3639),c=i(2149),h=i(7449);s({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return u(h,this,c(t))}})},9818:function(t,r,i){"use strict";var s=i(2794),u=i(3639),c=i(2149),h=i(8300);s({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return u(h,this,c(t))}})},9964:function(t,r,i){"use strict";var s=i(2794),u=i(3639),c=i(2149),h=i(6808);s({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return u(h,this,c(t))}})},3231:function(t,r,i){"use strict";var s=i(2794),u=i(7626),c=i(6241),h=i(1062),p=i(1023),f=u([].join),v=u([].push);s({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var r=c(this),i=void 0===t?",":p(t),s=[];return h(r,function(t){v(s,t)}),f(s,i)}})},4646:function(t,r,i){"use strict";var s=i(2794),u=i(612),c=i(6241),h=i(7051),p=i(1062),f=h.Set,v=h.add;s({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var r=c(this),i=u(t,arguments.length>1?arguments[1]:void 0),s=new f;return p(r,function(t){v(s,i(t,t,r))}),s}})},2479:function(t,r,i){"use strict";var s=i(2794),u=i(7613),c=i(6241),h=i(1062),p=TypeError;s({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=c(this),i=arguments.length<2,s=i?void 0:arguments[1];if(u(t),h(r,function(u){i?(i=!1,s=u):s=t(s,u,u,r)}),i)throw new p("Reduce of empty set with no initial value");return s}})},7295:function(t,r,i){"use strict";var s=i(2794),u=i(612),c=i(6241),h=i(1062);s({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var r=c(this),i=u(t,arguments.length>1?arguments[1]:void 0);return!0===h(r,function(t){if(i(t,t,r))return!0},!0)}})},1985:function(t,r,i){"use strict";var s=i(2794),u=i(3639),c=i(2149),h=i(541);s({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return u(h,this,c(t))}})},3243:function(t,r,i){"use strict";var s=i(2794),u=i(3639),c=i(2149),h=i(3822);s({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return u(h,this,c(t))}})},3262:function(t,r,i){"use strict";var s=i(9016),u=i(7626),c=i(1023),h=i(7968),p=URLSearchParams,f=p.prototype,v=u(f.append),y=u(f.delete),x=u(f.forEach),_=u([].push),b=new p("a=1&a=2&b=3");b.delete("a",1),b.delete("b",void 0),b+""!="a=2"&&s(f,"delete",function(t){var r,i=arguments.length,s=i<2?void 0:arguments[1];if(i&&void 0===s)return y(this,t);var u=[];x(this,function(t,r){_(u,{key:r,value:t})}),h(i,1);for(var p=c(t),f=c(s),b=0,w=0,S=!1,M=u.length;b<M;)r=u[b++],S||r.key===p?(S=!0,y(this,r.key)):w++;for(;w<M;)!((r=u[w++]).key===p&&r.value===f)&&v(this,r.key,r.value)},{enumerable:!0,unsafe:!0})},5446:function(t,r,i){"use strict";var s=i(9016),u=i(7626),c=i(1023),h=i(7968),p=URLSearchParams,f=p.prototype,v=u(f.getAll),y=u(f.has),x=new p("a=1");(x.has("a",2)||!x.has("a",void 0))&&s(f,"has",function(t){var r=arguments.length,i=r<2?void 0:arguments[1];if(r&&void 0===i)return y(this,t);var s=v(this,t);h(r,1);for(var u=c(i),p=0;p<s.length;)if(s[p++]===u)return!0;return!1},{enumerable:!0,unsafe:!0})},5549:function(t,r,i){"use strict";var s=i(9987),u=i(7626),c=i(3039),h=URLSearchParams.prototype,p=u(h.forEach);s&&!("size"in h)&&c(h,"size",{get:function(){var t=0;return p(this,function(){t++}),t},configurable:!0,enumerable:!0})}},r={};function i(s){var u=r[s];if(void 0!==u)return u.exports;var c=r[s]={exports:{}};return t[s].call(c.exports,c,c.exports,i),c.exports}i.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(r,{a:r}),r},(()=>{var t,r=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};i.t=function(s,u){if(1&u&&(s=this(s)),8&u||"object"==typeof s&&s&&(4&u&&s.__esModule||16&u&&"function"==typeof s.then))return s;var c=Object.create(null);i.r(c);var h={};t=t||[null,r({}),r([]),r(r)];for(var p=2&u&&s;"object"==typeof p&&!~t.indexOf(p);p=r(p))Object.getOwnPropertyNames(p).forEach(function(t){h[t]=function(){return s[t]}});return h.default=function(){return s},i.d(c,h),c}})(),i.d=function(t,r){for(var s in r)i.o(r,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:r[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.nc=void 0;var s={};return(()=>{"use strict";let t,r,u,c,h,p,f,v,y,x,_,b,w,S,M,A,C,T,I,D,P,R,L,k,O,B,N,F,z,U,H,G,V,W,j,X,Y,$;i.r(s),i.d(s,{create:()=>efP,resolveUrl:()=>yo});var J={};i.r(J),i.d(J,{ACESFilmicToneMapping:()=>tn,AddEquation:()=>eP,AddOperation:()=>e9,AdditiveAnimationBlendMode:()=>nD,AdditiveBlending:()=>eT,AgXToneMapping:()=>ti,AlphaFormat:()=>tz,AlwaysCompare:()=>ri,AlwaysDepth:()=>eq,AlwaysStencilFunc:()=>n6,AmbientLight:()=>h6,AnimationAction:()=>dG,AnimationClip:()=>hP,AnimationLoader:()=>hz,AnimationMixer:()=>dW,AnimationObjectGroup:()=>dH,AnimationUtils:()=>hy,ArcCurve:()=>ce,ArrayCamera:()=>lw,ArrowHelper:()=>pM,AttachedBindMode:()=>to,Audio:()=>dS,AudioAnalyser:()=>dI,AudioContext:()=>dc,AudioListener:()=>dw,AudioLoader:()=>dh,AxesHelper:()=>pA,BackSide:()=>eS,BasicDepthPacking:()=>nk,BasicShadowMap:()=>ey,BatchedMesh:()=>uk,Bone:()=>ua,BooleanKeyframeTrack:()=>hM,Box2:()=>d5,Box3:()=>it,Box3Helper:()=>pb,BoxGeometry:()=>a0,BoxHelper:()=>p_,BufferAttribute:()=>aS,BufferGeometry:()=>aU,BufferGeometryLoader:()=>dr,ByteType:()=>tE,Cache:()=>hR,Camera:()=>a6,CameraHelper:()=>pv,CanvasTexture:()=>u9,CapsuleGeometry:()=>cb,CatmullRomCurve3:()=>co,CineonToneMapping:()=>tt,CircleGeometry:()=>cw,ClampToEdgeWrapping:()=>tg,Clock:()=>dm,Color:()=>ad,ColorKeyframeTrack:()=>hA,ColorManagement:()=>rU,CompressedArrayTexture:()=>u4,CompressedCubeTexture:()=>u6,CompressedTexture:()=>u5,CompressedTextureLoader:()=>hU,ConeGeometry:()=>cM,ConstantAlphaFactor:()=>eJ,ConstantColorFactor:()=>eY,Controls:()=>pT,CubeCamera:()=>ot,CubeReflectionMapping:()=>tu,CubeRefractionMapping:()=>tc,CubeTexture:()=>on,CubeTextureLoader:()=>hG,CubeUVReflectionMapping:()=>tp,CubicBezierCurve:()=>cc,CubicBezierCurve3:()=>ch,CubicInterpolant:()=>h_,CullFaceBack:()=>eg,CullFaceFront:()=>em,CullFaceFrontBack:()=>ev,CullFaceNone:()=>ef,Curve:()=>u8,CurvePath:()=>cy,CustomBlending:()=>eD,CustomToneMapping:()=>tr,CylinderGeometry:()=>cS,Cylindrical:()=>d1,Data3DTexture:()=>r4,DataArrayTexture:()=>r3,DataTexture:()=>uo,DataTextureLoader:()=>hV,DataUtils:()=>a_,DecrementStencilOp:()=>nJ,DecrementWrapStencilOp:()=>nK,DefaultLoadingManager:()=>hk,DepthFormat:()=>tW,DepthStencilFormat:()=>tj,DepthTexture:()=>oZ,DetachedBindMode:()=>ts,DirectionalLight:()=>h4,DirectionalLightHelper:()=>pf,DiscreteInterpolant:()=>hw,DodecahedronGeometry:()=>cC,DoubleSide:()=>eM,DstAlphaFactor:()=>eG,DstColorFactor:()=>eW,DynamicCopyUsage:()=>rd,DynamicDrawUsage:()=>ro,DynamicReadUsage:()=>ru,EdgesGeometry:()=>cP,EllipseCurve:()=>u7,EqualCompare:()=>n7,EqualDepth:()=>e1,EqualStencilFunc:()=>n1,EquirectangularReflectionMapping:()=>th,EquirectangularRefractionMapping:()=>td,Euler:()=>iU,EventDispatcher:()=>ry,ExtrudeGeometry:()=>cQ,FileLoader:()=>hF,Float16BufferAttribute:()=>aP,Float32BufferAttribute:()=>aR,FloatType:()=>tL,Fog:()=>lB,FogExp2:()=>lO,FramebufferTexture:()=>u3,FrontSide:()=>ew,Frustum:()=>oc,GLBufferAttribute:()=>dJ,GLSL1:()=>rf,GLSL3:()=>rg,GreaterCompare:()=>rt,GreaterDepth:()=>e3,GreaterEqualCompare:()=>rr,GreaterEqualDepth:()=>e2,GreaterEqualStencilFunc:()=>n4,GreaterStencilFunc:()=>n3,GridHelper:()=>pu,Group:()=>lS,HalfFloatType:()=>tk,HemisphereLight:()=>hX,HemisphereLightHelper:()=>pl,IcosahedronGeometry:()=>c1,ImageBitmapLoader:()=>du,ImageLoader:()=>hH,ImageUtils:()=>r$,IncrementStencilOp:()=>n$,IncrementWrapStencilOp:()=>nZ,InstancedBufferAttribute:()=>uc,InstancedBufferGeometry:()=>dn,InstancedInterleavedBuffer:()=>d$,InstancedMesh:()=>uy,Int16BufferAttribute:()=>aT,Int32BufferAttribute:()=>aI,Int8BufferAttribute:()=>aM,IntType:()=>tP,InterleavedBuffer:()=>lF,InterleavedBufferAttribute:()=>lU,Interpolant:()=>hx,InterpolateDiscrete:()=>nS,InterpolateLinear:()=>nM,InterpolateSmooth:()=>nA,InvertStencilOp:()=>nq,KeepStencilOp:()=>nX,KeyframeTrack:()=>hS,LOD:()=>l5,LatheGeometry:()=>c_,Layers:()=>iH,LessCompare:()=>n8,LessDepth:()=>eQ,LessEqualCompare:()=>re,LessEqualDepth:()=>e0,LessEqualStencilFunc:()=>n2,LessStencilFunc:()=>n0,Light:()=>hj,LightProbe:()=>h7,Line:()=>uV,Line3:()=>d9,LineBasicMaterial:()=>uO,LineCurve:()=>cd,LineCurve3:()=>cp,LineDashedMaterial:()=>hd,LineLoop:()=>u$,LineSegments:()=>uY,LinearFilter:()=>tw,LinearInterpolant:()=>hb,LinearMipMapLinearFilter:()=>tC,LinearMipMapNearestFilter:()=>tM,LinearMipmapLinearFilter:()=>tA,LinearMipmapNearestFilter:()=>tS,LinearSRGBColorSpace:()=>nG,LinearToneMapping:()=>e7,LinearTransfer:()=>nV,Loader:()=>hO,LoaderUtils:()=>dt,LoadingManager:()=>hL,LoopOnce:()=>n_,LoopPingPong:()=>nw,LoopRepeat:()=>nb,LuminanceAlphaFormat:()=>tV,LuminanceFormat:()=>tG,MOUSE:()=>ed,Material:()=>ag,MaterialLoader:()=>de,MathUtils:()=>rI,Matrix2:()=>d2,Matrix3:()=>rP,Matrix4:()=>iD,MaxEquation:()=>eO,Mesh:()=>aq,MeshBasicMaterial:()=>am,MeshDepthMaterial:()=>lp,MeshDistanceMaterial:()=>lf,MeshLambertMaterial:()=>hc,MeshMatcapMaterial:()=>hh,MeshNormalMaterial:()=>hu,MeshPhongMaterial:()=>hs,MeshPhysicalMaterial:()=>ho,MeshStandardMaterial:()=>ha,MeshToonMaterial:()=>hl,MinEquation:()=>ek,MirroredRepeatWrapping:()=>tm,MixOperation:()=>e6,MultiplyBlending:()=>eI,MultiplyOperation:()=>e4,NearestFilter:()=>tv,NearestMipMapLinearFilter:()=>tb,NearestMipMapNearestFilter:()=>tx,NearestMipmapLinearFilter:()=>t_,NearestMipmapNearestFilter:()=>ty,NeutralToneMapping:()=>ta,NeverCompare:()=>n9,NeverDepth:()=>eK,NeverStencilFunc:()=>nQ,NoBlending:()=>eA,NoColorSpace:()=>nU,NoToneMapping:()=>e8,NormalAnimationBlendMode:()=>nI,NormalBlending:()=>eC,NotEqualCompare:()=>rn,NotEqualDepth:()=>e5,NotEqualStencilFunc:()=>n5,NumberKeyframeTrack:()=>hC,Object3D:()=>i3,ObjectLoader:()=>di,ObjectSpaceNormalMap:()=>nz,OctahedronGeometry:()=>c2,OneFactor:()=>eN,OneMinusConstantAlphaFactor:()=>eZ,OneMinusConstantColorFactor:()=>e$,OneMinusDstAlphaFactor:()=>eV,OneMinusDstColorFactor:()=>ej,OneMinusSrcAlphaFactor:()=>eH,OneMinusSrcColorFactor:()=>ez,OrthographicCamera:()=>oC,PCFShadowMap:()=>ex,PCFSoftShadowMap:()=>e_,PMREMGenerator:()=>oN,Path:()=>cx,PerspectiveCamera:()=>oe,Plane:()=>os,PlaneGeometry:()=>op,PlaneHelper:()=>pw,PointLight:()=>h3,PointLightHelper:()=>pi,Points:()=>u0,PointsMaterial:()=>uJ,PolarGridHelper:()=>pc,PolyhedronGeometry:()=>cA,PositionalAudio:()=>dE,PropertyBinding:()=>dU,PropertyMixer:()=>dD,QuadraticBezierCurve:()=>cf,QuadraticBezierCurve3:()=>cg,Quaternion:()=>r9,QuaternionKeyframeTrack:()=>hE,QuaternionLinearInterpolant:()=>hT,RED_GREEN_RGTC2_Format:()=>ny,RED_RGTC1_Format:()=>nm,REVISION:()=>eh,RGBADepthPacking:()=>nO,RGBAFormat:()=>tH,RGBAIntegerFormat:()=>tK,RGBA_ASTC_10x10_Format:()=>nc,RGBA_ASTC_10x5_Format:()=>ns,RGBA_ASTC_10x6_Format:()=>nl,RGBA_ASTC_10x8_Format:()=>nu,RGBA_ASTC_12x10_Format:()=>nh,RGBA_ASTC_12x12_Format:()=>nd,RGBA_ASTC_4x4_Format:()=>t7,RGBA_ASTC_5x4_Format:()=>ne,RGBA_ASTC_5x5_Format:()=>nt,RGBA_ASTC_6x5_Format:()=>nn,RGBA_ASTC_6x6_Format:()=>nr,RGBA_ASTC_8x5_Format:()=>ni,RGBA_ASTC_8x6_Format:()=>na,RGBA_ASTC_8x8_Format:()=>no,RGBA_BPTC_Format:()=>np,RGBA_ETC2_EAC_Format:()=>t8,RGBA_PVRTC_2BPPV1_Format:()=>t4,RGBA_PVRTC_4BPPV1_Format:()=>t5,RGBA_S3TC_DXT1_Format:()=>tQ,RGBA_S3TC_DXT3_Format:()=>t0,RGBA_S3TC_DXT5_Format:()=>t1,RGBDepthPacking:()=>nB,RGBFormat:()=>tU,RGBIntegerFormat:()=>tZ,RGB_BPTC_SIGNED_Format:()=>nf,RGB_BPTC_UNSIGNED_Format:()=>ng,RGB_ETC1_Format:()=>t6,RGB_ETC2_Format:()=>t9,RGB_PVRTC_2BPPV1_Format:()=>t3,RGB_PVRTC_4BPPV1_Format:()=>t2,RGB_S3TC_DXT1_Format:()=>tq,RGDepthPacking:()=>nN,RGFormat:()=>t$,RGIntegerFormat:()=>tJ,RawShaderMaterial:()=>hi,Ray:()=>iI,Raycaster:()=>dK,RectAreaLight:()=>h9,RedFormat:()=>tX,RedIntegerFormat:()=>tY,ReinhardToneMapping:()=>te,RenderTarget:()=>r1,RepeatWrapping:()=>tf,ReplaceStencilOp:()=>nY,ReverseSubtractEquation:()=>eL,RingGeometry:()=>c3,SIGNED_RED_GREEN_RGTC2_Format:()=>nx,SIGNED_RED_RGTC1_Format:()=>nv,SRGBColorSpace:()=>nH,SRGBTransfer:()=>nW,Scene:()=>lN,ShaderChunk:()=>of,ShaderLib:()=>om,ShaderMaterial:()=>a4,ShadowMaterial:()=>hr,Shape:()=>cR,ShapeGeometry:()=>c5,ShapePath:()=>pC,ShapeUtils:()=>cZ,ShortType:()=>tI,Skeleton:()=>uu,SkeletonHelper:()=>pr,SkinnedMesh:()=>ui,Source:()=>rZ,Sphere:()=>ib,SphereGeometry:()=>c4,Spherical:()=>d0,SphericalHarmonics3:()=>h8,SplineCurve:()=>cm,SpotLight:()=>hq,SpotLightHelper:()=>d7,Sprite:()=>l0,SpriteMaterial:()=>lH,SrcAlphaFactor:()=>eU,SrcAlphaSaturateFactor:()=>eX,SrcColorFactor:()=>eF,StaticCopyUsage:()=>rh,StaticDrawUsage:()=>ra,StaticReadUsage:()=>rl,StereoCamera:()=>dg,StreamCopyUsage:()=>rp,StreamDrawUsage:()=>rs,StreamReadUsage:()=>rc,StringKeyframeTrack:()=>hI,SubtractEquation:()=>eR,SubtractiveBlending:()=>eE,TOUCH:()=>ep,TangentSpaceNormalMap:()=>nF,TetrahedronGeometry:()=>c6,Texture:()=>rQ,TextureLoader:()=>hW,TextureUtils:()=>lx,TorusGeometry:()=>c9,TorusKnotGeometry:()=>c8,Triangle:()=>as,TriangleFanDrawMode:()=>nL,TriangleStripDrawMode:()=>nR,TrianglesDrawMode:()=>nP,TubeGeometry:()=>c7,UVMapping:()=>tl,Uint16BufferAttribute:()=>aE,Uint32BufferAttribute:()=>aD,Uint8BufferAttribute:()=>aA,Uint8ClampedBufferAttribute:()=>aC,Uniform:()=>dj,UniformsGroup:()=>dY,UniformsLib:()=>og,UniformsUtils:()=>a5,UnsignedByteType:()=>tT,UnsignedInt248Type:()=>tN,UnsignedInt5999Type:()=>tF,UnsignedIntType:()=>tR,UnsignedShort4444Type:()=>tO,UnsignedShort5551Type:()=>tB,UnsignedShortType:()=>tD,VSMShadowMap:()=>eb,Vector2:()=>rD,Vector3:()=>r8,Vector4:()=>r0,VectorKeyframeTrack:()=>hD,VideoTexture:()=>u2,WebGL3DRenderTarget:()=>r6,WebGLArrayRenderTarget:()=>r5,WebGLCoordinateSystem:()=>rm,WebGLCubeRenderTarget:()=>or,WebGLMultipleRenderTargets:()=>pE,WebGLRenderTarget:()=>r2,WebGLRenderer:()=>lk,WebGLUtils:()=>lb,WebGPUCoordinateSystem:()=>rv,WireframeGeometry:()=>he,WrapAroundEnding:()=>nE,ZeroCurvatureEnding:()=>nC,ZeroFactor:()=>eB,ZeroSlopeEnding:()=>nT,ZeroStencilOp:()=>nj,createCanvasElement:()=>rN});var Z={};i.r(Z),i.d(Z,{HashMap:()=>SX,RADIAN_TO_DEGREE:()=>SQ,assert:()=>Sz,bind:()=>Sx,clone:()=>Sr,concatArray:()=>S$,createCanvas:()=>Sl,createHashMap:()=>SY,createObject:()=>SJ,curry:()=>S_,defaults:()=>Ss,disableUserSelect:()=>SZ,each:()=>Sp,eqNaN:()=>SL,extend:()=>So,filter:()=>Sm,find:()=>Sv,guid:()=>St,hasOwn:()=>SK,indexOf:()=>Su,inherits:()=>Sc,isArray:()=>Sb,isArrayLike:()=>Sd,isBuiltInObject:()=>ST,isDom:()=>SI,isFunction:()=>Sw,isGradientObject:()=>SD,isImagePatternObject:()=>SP,isNumber:()=>SA,isObject:()=>SC,isPrimitive:()=>SV,isRegExp:()=>SR,isString:()=>SS,isStringSafe:()=>SM,isTypedArray:()=>SE,keys:()=>Sy,logError:()=>Sn,map:()=>Sf,merge:()=>Si,mergeAll:()=>Sa,mixin:()=>Sh,noop:()=>Sq,normalizeCssArray:()=>SF,reduce:()=>Sg,retrieve:()=>Sk,retrieve2:()=>SO,retrieve3:()=>SB,setAsPrimitive:()=>SG,slice:()=>SN,trim:()=>SU});var K={};i.r(K),i.d(K,{add:()=>S5,applyTransform:()=>Md,clone:()=>S2,copy:()=>S1,create:()=>S0,dist:()=>Ms,distSquare:()=>Mu,distance:()=>Mo,distanceSquare:()=>Ml,div:()=>Mn,dot:()=>Mr,len:()=>S9,lenSquare:()=>S7,length:()=>S8,lengthSquare:()=>Me,lerp:()=>Mh,max:()=>Mf,min:()=>Mp,mul:()=>Mt,negate:()=>Mc,normalize:()=>Ma,scale:()=>Mi,scaleAndAdd:()=>S4,set:()=>S3,sub:()=>S6});var q={};i.r(q),i.d(q,{clone:()=>MJ,copy:()=>MV,create:()=>MH,identity:()=>MG,invert:()=>M$,mul:()=>MW,rotate:()=>MX,scale:()=>MY,translate:()=>Mj});var Q={};i.r(Q),i.d(Q,{fastLerp:()=>A3,fastMapToColor:()=>A5,lerp:()=>A4,lift:()=>A1,liftColor:()=>Cr,lum:()=>Ce,mapToColor:()=>A6,modifyAlpha:()=>A8,modifyHSL:()=>A9,parse:()=>AQ,random:()=>Ct,stringify:()=>A7,toHex:()=>A2});var ee={};i.r(ee),i.d(ee,{dispose:()=>Tx,disposeAll:()=>T_,getElementSSRData:()=>TS,getInstance:()=>Tb,init:()=>Ty,registerPainter:()=>Tw,registerSSRDataGetter:()=>TM,version:()=>TA});var et={};i.r(et),i.d(et,{Arc:()=>OS,BezierCurve:()=>O_,BoundingRect:()=>M4,Circle:()=>k$,CompoundPath:()=>OM,Ellipse:()=>kK,Group:()=>Tf,Image:()=>ID,IncrementalDisplayable:()=>Ok,Line:()=>Og,LinearGradient:()=>OC,OrientedBoundingRect:()=>OR,Path:()=>IM,Point:()=>MZ,Polygon:()=>Ol,Polyline:()=>Oh,RadialGradient:()=>OT,Rect:()=>IF,Ring:()=>Oi,Sector:()=>Ot,Text:()=>I0,applyTransform:()=>Oq,clipPointsByRect:()=>O2,clipRectByRect:()=>O3,createIcon:()=>O5,extendPath:()=>OU,extendShape:()=>OF,getShapeClass:()=>OG,getTransform:()=>OK,groupTransition:()=>O1,initProps:()=>Dj,isElementRemoved:()=>DX,lineLineIntersect:()=>O6,linePolygonIntersect:()=>O4,makeImage:()=>OW,makePath:()=>OV,mergePath:()=>OX,registerShape:()=>OH,removeElement:()=>DY,removeElementWithFadeOut:()=>DJ,resizePath:()=>OY,setTooltipConfig:()=>O8,subPixelOptimize:()=>OZ,subPixelOptimizeLine:()=>O$,subPixelOptimizeRect:()=>OJ,transformDirection:()=>OQ,traverseElements:()=>Be,updateProps:()=>DW});var en={};i.r(en),i.d(en,{createDimensions:()=>FW,createList:()=>zV,createScale:()=>zj,createSymbol:()=>B8,createTextStyle:()=>zY,dataStack:()=>zW,enableHoverEmphasis:()=>DP,getECData:()=>I1,getLayoutRect:()=>Rt,mixinAxisModelCommonMethods:()=>zX});var er={};i.r(er),i.d(er,{MAX_SAFE_INTEGER:()=>TO,asc:()=>TI,getPercentWithPrecision:()=>TL,getPixelPrecision:()=>TR,getPrecision:()=>TD,getPrecisionSafe:()=>TP,isNumeric:()=>TX,isRadianAroundZero:()=>TN,linearMap:()=>TC,nice:()=>TG,numericToNumber:()=>Tj,parseDate:()=>Tz,quantile:()=>TV,quantity:()=>TU,quantityExponent:()=>TH,reformIntervals:()=>TW,remRadian:()=>TB,round:()=>TE});var ei={};i.r(ei),i.d(ei,{format:()=>PL,parse:()=>Tz});var ea={};i.r(ea),i.d(ea,{Arc:()=>OS,BezierCurve:()=>O_,BoundingRect:()=>M4,Circle:()=>k$,CompoundPath:()=>OM,Ellipse:()=>kK,Group:()=>Tf,Image:()=>ID,IncrementalDisplayable:()=>Ok,Line:()=>Og,LinearGradient:()=>OC,Polygon:()=>Ol,Polyline:()=>Oh,RadialGradient:()=>OT,Rect:()=>IF,Ring:()=>Oi,Sector:()=>Ot,Text:()=>I0,clipPointsByRect:()=>O2,clipRectByRect:()=>O3,createIcon:()=>O5,extendPath:()=>OU,extendShape:()=>OF,getShapeClass:()=>OG,getTransform:()=>OK,initProps:()=>Dj,makeImage:()=>OW,makePath:()=>OV,mergePath:()=>OX,registerShape:()=>OH,resizePath:()=>OY,updateProps:()=>DW});var eo={};i.r(eo),i.d(eo,{addCommas:()=>PJ,capitalFirst:()=>P5,encodeHTML:()=>MT,formatTime:()=>P3,formatTpl:()=>P1,getTextRect:()=>z9,getTooltipMarker:()=>P2,normalizeCssArray:()=>PK,toCamelCase:()=>PZ,truncateText:()=>EC});var es={};i.r(es),i.d(es,{bind:()=>Sx,clone:()=>Sr,curry:()=>S_,defaults:()=>Ss,each:()=>Sp,extend:()=>So,filter:()=>Sm,indexOf:()=>Su,inherits:()=>Sc,isArray:()=>Sb,isFunction:()=>Sw,isObject:()=>SC,isString:()=>SS,map:()=>Sf,merge:()=>Si,reduce:()=>Sg});var el={};i.r(el),i.d(el,{Axis:()=>Uu,ChartView:()=>Bu,ComponentModel:()=>Ru,ComponentView:()=>kM,List:()=>FV,Model:()=>Pp,PRIORITY:()=>NR,SeriesModel:()=>kw,color:()=>Q,connect:()=>N6,dataTool:()=>F_,dependencies:()=>NP,disConnect:()=>N8,disconnect:()=>N9,dispose:()=>N7,env:()=>wY,extendChartView:()=>Up,extendComponentModel:()=>Uc,extendComponentView:()=>Uh,extendSeriesModel:()=>Ud,format:()=>eo,getCoordinateSystemDimensions:()=>Fc,getInstanceByDom:()=>Fe,getInstanceById:()=>Ft,getMap:()=>Fy,graphic:()=>ea,helper:()=>en,init:()=>N4,innerDrawElementOnCanvas:()=>N_,matrix:()=>q,number:()=>er,parseGeoJSON:()=>z6,parseGeoJson:()=>z6,registerAction:()=>Fl,registerCoordinateSystem:()=>Fu,registerLayout:()=>Fh,registerLoading:()=>Fg,registerLocale:()=>P_,registerMap:()=>Fv,registerPostInit:()=>Fa,registerPostUpdate:()=>Fo,registerPreprocessor:()=>Fr,registerProcessor:()=>Fi,registerTheme:()=>Fn,registerTransform:()=>Fx,registerUpdateLifecycle:()=>Fs,registerVisual:()=>Fd,setCanvasCreator:()=>Fm,setPlatformAPI:()=>wq,throttle:()=>Bp,time:()=>ei,use:()=>FS,util:()=>es,vector:()=>K,version:()=>ND,zrUtil:()=>Z,zrender:()=>ee});var eu=i("2676"),ec=i("8751");let eh="170",ed={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ep={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},ef=0,eg=1,em=2,ev=3,ey=0,ex=1,e_=2,eb=3,ew=0,eS=1,eM=2,eA=0,eC=1,eT=2,eE=3,eI=4,eD=5,eP=100,eR=101,eL=102,ek=103,eO=104,eB=200,eN=201,eF=202,ez=203,eU=204,eH=205,eG=206,eV=207,eW=208,ej=209,eX=210,eY=211,e$=212,eJ=213,eZ=214,eK=0,eq=1,eQ=2,e0=3,e1=4,e2=5,e3=6,e5=7,e4=0,e6=1,e9=2,e8=0,e7=1,te=2,tt=3,tn=4,tr=5,ti=6,ta=7,to="attached",ts="detached",tl=300,tu=301,tc=302,th=303,td=304,tp=306,tf=1e3,tg=1001,tm=1002,tv=1003,ty=1004,tx=1004,t_=1005,tb=1005,tw=1006,tS=1007,tM=1007,tA=1008,tC=1008,tT=1009,tE=1010,tI=1011,tD=1012,tP=1013,tR=1014,tL=1015,tk=1016,tO=1017,tB=1018,tN=1020,tF=35902,tz=1021,tU=1022,tH=1023,tG=1024,tV=1025,tW=1026,tj=1027,tX=1028,tY=1029,t$=1030,tJ=1031,tZ=1032,tK=1033,tq=33776,tQ=33777,t0=33778,t1=33779,t2=35840,t3=35841,t5=35842,t4=35843,t6=36196,t9=37492,t8=37496,t7=37808,ne=37809,nt=37810,nn=37811,nr=37812,ni=37813,na=37814,no=37815,ns=37816,nl=37817,nu=37818,nc=37819,nh=37820,nd=37821,np=36492,nf=36494,ng=36495,nm=36283,nv=36284,ny=36285,nx=36286,n_=2200,nb=2201,nw=2202,nS=2300,nM=2301,nA=2302,nC=2400,nT=2401,nE=2402,nI=2500,nD=2501,nP=0,nR=1,nL=2,nk=3200,nO=3201,nB=3202,nN=3203,nF=0,nz=1,nU="",nH="srgb",nG="srgb-linear",nV="linear",nW="srgb",nj=0,nX=7680,nY=7681,n$=7682,nJ=7683,nZ=34055,nK=34056,nq=5386,nQ=512,n0=513,n1=514,n2=515,n3=516,n5=517,n4=518,n6=519,n9=512,n8=513,n7=514,re=515,rt=516,rn=517,rr=518,ri=519,ra=35044,ro=35048,rs=35040,rl=35045,ru=35049,rc=35041,rh=35046,rd=35050,rp=35042,rf="100",rg="300 es",rm=2e3,rv=2001;class ry{addEventListener(t,r){void 0===this._listeners&&(this._listeners={});let i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(r)&&i[t].push(r)}hasEventListener(t,r){if(void 0===this._listeners)return!1;let i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(r)}removeEventListener(t,r){if(void 0===this._listeners)return;let i=this._listeners[t];if(void 0!==i){let t=i.indexOf(r);-1!==t&&i.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;let r=this._listeners[t.type];if(void 0!==r){t.target=this;let i=r.slice(0);for(let r=0,s=i.length;r<s;r++)i[r].call(this,t);t.target=null}}}let rx=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],r_=1234567,rb=Math.PI/180,rw=180/Math.PI;function rS(){let t=0xffffffff*Math.random()|0,r=0xffffffff*Math.random()|0,i=0xffffffff*Math.random()|0,s=0xffffffff*Math.random()|0;return(rx[255&t]+rx[t>>8&255]+rx[t>>16&255]+rx[t>>24&255]+"-"+rx[255&r]+rx[r>>8&255]+"-"+rx[r>>16&15|64]+rx[r>>24&255]+"-"+rx[63&i|128]+rx[i>>8&255]+"-"+rx[i>>16&255]+rx[i>>24&255]+rx[255&s]+rx[s>>8&255]+rx[s>>16&255]+rx[s>>24&255]).toLowerCase()}function rM(t,r,i){return Math.max(r,Math.min(i,t))}function rA(t,r){return(t%r+r)%r}function rC(t,r,i){return(1-i)*t+i*r}function rT(t,r){switch(r.constructor){case Float32Array:return t;case Uint32Array:return t/0xffffffff;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/0x7fffffff,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw Error("Invalid component type.")}}function rE(t,r){switch(r.constructor){case Float32Array:return t;case Uint32Array:return Math.round(0xffffffff*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(0x7fffffff*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw Error("Invalid component type.")}}let rI={DEG2RAD:rb,RAD2DEG:rw,generateUUID:rS,clamp:rM,euclideanModulo:rA,mapLinear:function(t,r,i,s,u){return s+(t-r)*(u-s)/(i-r)},inverseLerp:function(t,r,i){return t!==r?(i-t)/(r-t):0},lerp:rC,damp:function(t,r,i,s){return rC(t,r,1-Math.exp(-i*s))},pingpong:function(t,r=1){return r-Math.abs(rA(t,2*r)-r)},smoothstep:function(t,r,i){return t<=r?0:t>=i?1:(t=(t-r)/(i-r))*t*(3-2*t)},smootherstep:function(t,r,i){return t<=r?0:t>=i?1:(t=(t-r)/(i-r))*t*t*(t*(6*t-15)+10)},randInt:function(t,r){return t+Math.floor(Math.random()*(r-t+1))},randFloat:function(t,r){return t+Math.random()*(r-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(r_=t);let r=r_+=0x6d2b79f5;return r=Math.imul(r^r>>>15,1|r),(((r^=r+Math.imul(r^r>>>7,61|r))^r>>>14)>>>0)/0x100000000},degToRad:function(t){return t*rb},radToDeg:function(t){return t*rw},isPowerOfTwo:function(t){return(t&t-1)==0&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,r,i,s,u){let c=Math.cos,h=Math.sin,p=c(i/2),f=h(i/2),v=c((r+s)/2),y=h((r+s)/2),x=c((r-s)/2),_=h((r-s)/2),b=c((s-r)/2),w=h((s-r)/2);switch(u){case"XYX":t.set(p*y,f*x,f*_,p*v);break;case"YZY":t.set(f*_,p*y,f*x,p*v);break;case"ZXZ":t.set(f*x,f*_,p*y,p*v);break;case"XZX":t.set(p*y,f*w,f*b,p*v);break;case"YXY":t.set(f*b,p*y,f*w,p*v);break;case"ZYZ":t.set(f*w,f*b,p*y,p*v)}},normalize:rE,denormalize:rT};class rD{constructor(t=0,r=0){rD.prototype.isVector2=!0,this.x=t,this.y=r}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,r){return this.x=t,this.y=r,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;default:throw Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let r=this.x,i=this.y,s=t.elements;return this.x=s[0]*r+s[3]*i+s[6],this.y=s[1]*r+s[4]*i+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this}clampLength(t,r){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(r,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){let r=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===r?Math.PI/2:Math.acos(rM(this.dot(t)/r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let r=this.x-t.x,i=this.y-t.y;return r*r+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this}lerpVectors(t,r,i){return this.x=t.x+(r.x-t.x)*i,this.y=t.y+(r.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this}rotateAround(t,r){let i=Math.cos(r),s=Math.sin(r),u=this.x-t.x,c=this.y-t.y;return this.x=u*i-c*s+t.x,this.y=u*s+c*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class rP{constructor(t,r,i,s,u,c,h,p,f){rP.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,r,i,s,u,c,h,p,f)}set(t,r,i,s,u,c,h,p,f){let v=this.elements;return v[0]=t,v[1]=s,v[2]=h,v[3]=r,v[4]=u,v[5]=p,v[6]=i,v[7]=c,v[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let r=this.elements,i=t.elements;return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],this}extractBasis(t,r,i){return t.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let r=t.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){let i=t.elements,s=r.elements,u=this.elements,c=i[0],h=i[3],p=i[6],f=i[1],v=i[4],y=i[7],x=i[2],_=i[5],b=i[8],w=s[0],S=s[3],M=s[6],A=s[1],C=s[4],T=s[7],I=s[2],D=s[5],P=s[8];return u[0]=c*w+h*A+p*I,u[3]=c*S+h*C+p*D,u[6]=c*M+h*T+p*P,u[1]=f*w+v*A+y*I,u[4]=f*S+v*C+y*D,u[7]=f*M+v*T+y*P,u[2]=x*w+_*A+b*I,u[5]=x*S+_*C+b*D,u[8]=x*M+_*T+b*P,this}multiplyScalar(t){let r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=t,r[4]*=t,r[7]*=t,r[2]*=t,r[5]*=t,r[8]*=t,this}determinant(){let t=this.elements,r=t[0],i=t[1],s=t[2],u=t[3],c=t[4],h=t[5],p=t[6],f=t[7],v=t[8];return r*c*v-r*h*f-i*u*v+i*h*p+s*u*f-s*c*p}invert(){let t=this.elements,r=t[0],i=t[1],s=t[2],u=t[3],c=t[4],h=t[5],p=t[6],f=t[7],v=t[8],y=v*c-h*f,x=h*p-v*u,_=f*u-c*p,b=r*y+i*x+s*_;if(0===b)return this.set(0,0,0,0,0,0,0,0,0);let w=1/b;return t[0]=y*w,t[1]=(s*f-v*i)*w,t[2]=(h*i-s*c)*w,t[3]=x*w,t[4]=(v*r-s*p)*w,t[5]=(s*u-h*r)*w,t[6]=_*w,t[7]=(i*p-f*r)*w,t[8]=(c*r-i*u)*w,this}transpose(){let t;let r=this.elements;return t=r[1],r[1]=r[3],r[3]=t,t=r[2],r[2]=r[6],r[6]=t,t=r[5],r[5]=r[7],r[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let r=this.elements;return t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8],this}setUvTransform(t,r,i,s,u,c,h){let p=Math.cos(u),f=Math.sin(u);return this.set(i*p,i*f,-i*(p*c+f*h)+c+t,-s*f,s*p,-s*(-f*c+p*h)+h+r,0,0,1),this}scale(t,r){return this.premultiply(rR.makeScale(t,r)),this}rotate(t){return this.premultiply(rR.makeRotation(-t)),this}translate(t,r){return this.premultiply(rR.makeTranslation(t,r)),this}makeTranslation(t,r){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,r,0,0,1),this}makeRotation(t){let r=Math.cos(t),i=Math.sin(t);return this.set(r,-i,0,i,r,0,0,0,1),this}makeScale(t,r){return this.set(t,0,0,0,r,0,0,0,1),this}equals(t){let r=this.elements,i=t.elements;for(let t=0;t<9;t++)if(r[t]!==i[t])return!1;return!0}fromArray(t,r=0){for(let i=0;i<9;i++)this.elements[i]=t[i+r];return this}toArray(t=[],r=0){let i=this.elements;return t[r]=i[0],t[r+1]=i[1],t[r+2]=i[2],t[r+3]=i[3],t[r+4]=i[4],t[r+5]=i[5],t[r+6]=i[6],t[r+7]=i[7],t[r+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}}let rR=new rP;function rL(t){for(let r=t.length-1;r>=0;--r)if(t[r]>=65535)return!0;return!1}let rk={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function rO(t,r){return new rk[t](r)}function rB(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function rN(){let t=rB("canvas");return t.style.display="block",t}let rF={};function rz(t){!(t in rF)&&(rF[t]=!0)}let rU={enabled:!0,workingColorSpace:nG,spaces:{},convert:function(t,r,i){return!1!==this.enabled&&r!==i&&r&&i?(this.spaces[r].transfer===nW&&(t.r=rH(t.r),t.g=rH(t.g),t.b=rH(t.b)),this.spaces[r].primaries!==this.spaces[i].primaries&&(t.applyMatrix3(this.spaces[r].toXYZ),t.applyMatrix3(this.spaces[i].fromXYZ)),this.spaces[i].transfer===nW&&(t.r=rG(t.r),t.g=rG(t.g),t.b=rG(t.b)),t):t},fromWorkingColorSpace:function(t,r){return this.convert(t,this.workingColorSpace,r)},toWorkingColorSpace:function(t,r){return this.convert(t,r,this.workingColorSpace)},getPrimaries:function(t){return this.spaces[t].primaries},getTransfer:function(t){return t===nU?nV:this.spaces[t].transfer},getLuminanceCoefficients:function(t,r=this.workingColorSpace){return t.fromArray(this.spaces[r].luminanceCoefficients)},define:function(t){Object.assign(this.spaces,t)},_getMatrix:function(t,r,i){return t.copy(this.spaces[r].toXYZ).multiply(this.spaces[i].fromXYZ)},_getDrawingBufferColorSpace:function(t){return this.spaces[t].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(t=this.workingColorSpace){return this.spaces[t].workingColorSpaceConfig.unpackColorSpace}};function rH(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function rG(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}let rV=[.64,.33,.3,.6,.15,.06],rW=[.2126,.7152,.0722],rj=[.3127,.329],rX=new rP().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),rY=new rP().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);rU.define({[nG]:{primaries:rV,whitePoint:rj,transfer:nV,toXYZ:rX,fromXYZ:rY,luminanceCoefficients:rW,workingColorSpaceConfig:{unpackColorSpace:nH},outputColorSpaceConfig:{drawingBufferColorSpace:nH}},[nH]:{primaries:rV,whitePoint:rj,transfer:nW,toXYZ:rX,fromXYZ:rY,luminanceCoefficients:rW,outputColorSpaceConfig:{drawingBufferColorSpace:nH}}});class r${static getDataURL(r){let i;if(/^data:/i.test(r.src)||"undefined"==typeof HTMLCanvasElement)return r.src;if(r instanceof HTMLCanvasElement)i=r;else{void 0===t&&(t=rB("canvas")),t.width=r.width,t.height=r.height;let s=t.getContext("2d");r instanceof ImageData?s.putImageData(r,0,0):s.drawImage(r,0,0,r.width,r.height),i=t}return i.width>2048||i.height>2048?i.toDataURL("image/jpeg",.6):i.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){let r=rB("canvas");r.width=t.width,r.height=t.height;let i=r.getContext("2d");i.drawImage(t,0,0,t.width,t.height);let s=i.getImageData(0,0,t.width,t.height),u=s.data;for(let t=0;t<u.length;t++)u[t]=255*rH(u[t]/255);return i.putImageData(s,0,0),r}if(!t.data)return t;{let r=t.data.slice(0);for(let t=0;t<r.length;t++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[t]=Math.floor(255*rH(r[t]/255)):r[t]=rH(r[t]);return{data:r,width:t.width,height:t.height}}}}let rJ=0;class rZ{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:rJ++}),this.uuid=rS(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){let r=void 0===t||"string"==typeof t;if(!r&&void 0!==t.images[this.uuid])return t.images[this.uuid];let i={uuid:this.uuid,url:""},s=this.data;if(null!==s){let t;if(Array.isArray(s)){t=[];for(let r=0,i=s.length;r<i;r++)s[r].isDataTexture?t.push(rK(s[r].image)):t.push(rK(s[r]))}else t=rK(s);i.url=t}return!r&&(t.images[this.uuid]=i),i}}function rK(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?r$.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:{}}let rq=0;class rQ extends ry{constructor(t=rQ.DEFAULT_IMAGE,r=rQ.DEFAULT_MAPPING,i=tg,s=tg,u=tw,c=tA,h=tH,p=tT,f=rQ.DEFAULT_ANISOTROPY,v=nU){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:rq++}),this.uuid=rS(),this.name="",this.source=new rZ(t),this.mipmaps=[],this.mapping=r,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=u,this.minFilter=c,this.anisotropy=f,this.format=h,this.internalFormat=null,this.type=p,this.offset=new rD(0,0),this.repeat=new rD(1,1),this.center=new rD(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new rP,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=v,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let r=void 0===t||"string"==typeof t;if(!r&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];let i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),!r&&(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==tl)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case tf:t.x=t.x-Math.floor(t.x);break;case tg:t.x=t.x<0?0:1;break;case tm:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case tf:t.y=t.y-Math.floor(t.y);break;case tg:t.y=t.y<0?0:1;break;case tm:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}rQ.DEFAULT_IMAGE=null,rQ.DEFAULT_MAPPING=tl,rQ.DEFAULT_ANISOTROPY=1;class r0{constructor(t=0,r=0,i=0,s=1){r0.prototype.isVector4=!0,this.x=t,this.y=r,this.z=i,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,r,i,s){return this.x=t,this.y=r,this.z=i,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this.w=t.w+r.w,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this.w+=t.w*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this.w=t.w-r.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let r=this.x,i=this.y,s=this.z,u=this.w,c=t.elements;return this.x=c[0]*r+c[4]*i+c[8]*s+c[12]*u,this.y=c[1]*r+c[5]*i+c[9]*s+c[13]*u,this.z=c[2]*r+c[6]*i+c[10]*s+c[14]*u,this.w=c[3]*r+c[7]*i+c[11]*s+c[15]*u,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let r=Math.sqrt(1-t.w*t.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/r,this.y=t.y/r,this.z=t.z/r),this}setAxisAngleFromRotationMatrix(t){let r,i,s,u;let c=t.elements,h=c[0],p=c[4],f=c[8],v=c[1],y=c[5],x=c[9],_=c[2],b=c[6],w=c[10];if(.01>Math.abs(p-v)&&.01>Math.abs(f-_)&&.01>Math.abs(x-b)){if(.1>Math.abs(p+v)&&.1>Math.abs(f+_)&&.1>Math.abs(x+b)&&.1>Math.abs(h+y+w-3))return this.set(1,0,0,0),this;r=Math.PI;let t=(h+1)/2,c=(y+1)/2,S=(w+1)/2,M=(p+v)/4,A=(f+_)/4,C=(x+b)/4;return t>c&&t>S?t<.01?(i=0,s=.707106781,u=.707106781):(s=M/(i=Math.sqrt(t)),u=A/i):c>S?c<.01?(i=.707106781,s=0,u=.707106781):(i=M/(s=Math.sqrt(c)),u=C/s):S<.01?(i=.707106781,s=.707106781,u=0):(i=A/(u=Math.sqrt(S)),s=C/u),this.set(i,s,u,r),this}let S=Math.sqrt((b-x)*(b-x)+(f-_)*(f-_)+(v-p)*(v-p));return .001>Math.abs(S)&&(S=1),this.x=(b-x)/S,this.y=(f-_)/S,this.z=(v-p)/S,this.w=Math.acos((h+y+w-1)/2),this}setFromMatrixPosition(t){let r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this.w=r[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this.z=Math.max(t.z,Math.min(r.z,this.z)),this.w=Math.max(t.w,Math.min(r.w,this.w)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this.z=Math.max(t,Math.min(r,this.z)),this.w=Math.max(t,Math.min(r,this.w)),this}clampLength(t,r){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(r,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this.w+=(t.w-this.w)*r,this}lerpVectors(t,r,i){return this.x=t.x+(r.x-t.x)*i,this.y=t.y+(r.y-t.y)*i,this.z=t.z+(r.z-t.z)*i,this.w=t.w+(r.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this.w=t[r+3],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t[r+3]=this.w,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this.w=t.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class r1 extends ry{constructor(t=1,r=1,i={}){super(),this.isRenderTarget=!0,this.width=t,this.height=r,this.depth=1,this.scissor=new r0(0,0,t,r),this.scissorTest=!1,this.viewport=new r0(0,0,t,r);let s=new rQ({width:t,height:r,depth:1},(i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:tw,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i)).mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];let u=i.count;for(let t=0;t<u;t++)this.textures[t]=s.clone(),this.textures[t].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,r,i=1){if(this.width!==t||this.height!==r||this.depth!==i){this.width=t,this.height=r,this.depth=i;for(let s=0,u=this.textures.length;s<u;s++)this.textures[s].image.width=t,this.textures[s].image.height=r,this.textures[s].image.depth=i;this.dispose()}this.viewport.set(0,0,t,r),this.scissor.set(0,0,t,r)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let r=0,i=t.textures.length;r<i;r++)this.textures[r]=t.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;let r=Object.assign({},t.texture.image);return this.texture.source=new rZ(r),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class r2 extends r1{constructor(t=1,r=1,i={}){super(t,r,i),this.isWebGLRenderTarget=!0}}class r3 extends rQ{constructor(t=null,r=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:r,height:i,depth:s},this.magFilter=tv,this.minFilter=tv,this.wrapR=tg,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class r5 extends r2{constructor(t=1,r=1,i=1,s={}){super(t,r,s),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new r3(null,t,r,i),this.texture.isRenderTargetTexture=!0}}class r4 extends rQ{constructor(t=null,r=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:r,height:i,depth:s},this.magFilter=tv,this.minFilter=tv,this.wrapR=tg,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class r6 extends r2{constructor(t=1,r=1,i=1,s={}){super(t,r,s),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new r4(null,t,r,i),this.texture.isRenderTargetTexture=!0}}class r9{constructor(t=0,r=0,i=0,s=1){this.isQuaternion=!0,this._x=t,this._y=r,this._z=i,this._w=s}static slerpFlat(t,r,i,s,u,c,h){let p=i[s+0],f=i[s+1],v=i[s+2],y=i[s+3],x=u[c+0],_=u[c+1],b=u[c+2],w=u[c+3];if(0===h){t[r+0]=p,t[r+1]=f,t[r+2]=v,t[r+3]=y;return}if(1===h){t[r+0]=x,t[r+1]=_,t[r+2]=b,t[r+3]=w;return}if(y!==w||p!==x||f!==_||v!==b){let t=1-h,r=p*x+f*_+v*b+y*w,i=r>=0?1:-1,s=1-r*r;if(s>Number.EPSILON){let u=Math.sqrt(s),c=Math.atan2(u,r*i);t=Math.sin(t*c)/u,h=Math.sin(h*c)/u}let u=h*i;if(p=p*t+x*u,f=f*t+_*u,v=v*t+b*u,y=y*t+w*u,t===1-h){let t=1/Math.sqrt(p*p+f*f+v*v+y*y);p*=t,f*=t,v*=t,y*=t}}t[r]=p,t[r+1]=f,t[r+2]=v,t[r+3]=y}static multiplyQuaternionsFlat(t,r,i,s,u,c){let h=i[s],p=i[s+1],f=i[s+2],v=i[s+3],y=u[c],x=u[c+1],_=u[c+2],b=u[c+3];return t[r]=h*b+v*y+p*_-f*x,t[r+1]=p*b+v*x+f*y-h*_,t[r+2]=f*b+v*_+h*x-p*y,t[r+3]=v*b-h*y-p*x-f*_,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,r,i,s){return this._x=t,this._y=r,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,r=!0){let i=t._x,s=t._y,u=t._z,c=t._order,h=Math.cos,p=Math.sin,f=h(i/2),v=h(s/2),y=h(u/2),x=p(i/2),_=p(s/2),b=p(u/2);switch(c){case"XYZ":this._x=x*v*y+f*_*b,this._y=f*_*y-x*v*b,this._z=f*v*b+x*_*y,this._w=f*v*y-x*_*b;break;case"YXZ":this._x=x*v*y+f*_*b,this._y=f*_*y-x*v*b,this._z=f*v*b-x*_*y,this._w=f*v*y+x*_*b;break;case"ZXY":this._x=x*v*y-f*_*b,this._y=f*_*y+x*v*b,this._z=f*v*b+x*_*y,this._w=f*v*y-x*_*b;break;case"ZYX":this._x=x*v*y-f*_*b,this._y=f*_*y+x*v*b,this._z=f*v*b-x*_*y,this._w=f*v*y+x*_*b;break;case"YZX":this._x=x*v*y+f*_*b,this._y=f*_*y+x*v*b,this._z=f*v*b-x*_*y,this._w=f*v*y-x*_*b;break;case"XZY":this._x=x*v*y-f*_*b,this._y=f*_*y-x*v*b,this._z=f*v*b+x*_*y,this._w=f*v*y+x*_*b}return!0===r&&this._onChangeCallback(),this}setFromAxisAngle(t,r){let i=r/2,s=Math.sin(i);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){let r=t.elements,i=r[0],s=r[4],u=r[8],c=r[1],h=r[5],p=r[9],f=r[2],v=r[6],y=r[10],x=i+h+y;if(x>0){let t=.5/Math.sqrt(x+1);this._w=.25/t,this._x=(v-p)*t,this._y=(u-f)*t,this._z=(c-s)*t}else if(i>h&&i>y){let t=2*Math.sqrt(1+i-h-y);this._w=(v-p)/t,this._x=.25*t,this._y=(s+c)/t,this._z=(u+f)/t}else if(h>y){let t=2*Math.sqrt(1+h-i-y);this._w=(u-f)/t,this._x=(s+c)/t,this._y=.25*t,this._z=(p+v)/t}else{let t=2*Math.sqrt(1+y-i-h);this._w=(c-s)/t,this._x=(u+f)/t,this._y=(p+v)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,r){let i=t.dot(r)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y),this._w=i):(this._x=t.y*r.z-t.z*r.y,this._y=t.z*r.x-t.x*r.z,this._z=t.x*r.y-t.y*r.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(rM(this.dot(t),-1,1)))}rotateTowards(t,r){let i=this.angleTo(t);if(0===i)return this;let s=Math.min(1,r/i);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,r){let i=t._x,s=t._y,u=t._z,c=t._w,h=r._x,p=r._y,f=r._z,v=r._w;return this._x=i*v+c*h+s*f-u*p,this._y=s*v+c*p+u*h-i*f,this._z=u*v+c*f+i*p-s*h,this._w=c*v-i*h-s*p-u*f,this._onChangeCallback(),this}slerp(t,r){if(0===r)return this;if(1===r)return this.copy(t);let i=this._x,s=this._y,u=this._z,c=this._w,h=c*t._w+i*t._x+s*t._y+u*t._z;if(h<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,h=-h):this.copy(t),h>=1)return this._w=c,this._x=i,this._y=s,this._z=u,this;let p=1-h*h;if(p<=Number.EPSILON){let t=1-r;return this._w=t*c+r*this._w,this._x=t*i+r*this._x,this._y=t*s+r*this._y,this._z=t*u+r*this._z,this.normalize(),this}let f=Math.sqrt(p),v=Math.atan2(f,h),y=Math.sin((1-r)*v)/f,x=Math.sin(r*v)/f;return this._w=c*y+this._w*x,this._x=i*y+this._x*x,this._y=s*y+this._y*x,this._z=u*y+this._z*x,this._onChangeCallback(),this}slerpQuaternions(t,r,i){return this.copy(t).slerp(r,i)}random(){let t=2*Math.PI*Math.random(),r=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),u=Math.sqrt(i);return this.set(s*Math.sin(t),s*Math.cos(t),u*Math.sin(r),u*Math.cos(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,r=0){return this._x=t[r],this._y=t[r+1],this._z=t[r+2],this._w=t[r+3],this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._w,t}fromBufferAttribute(t,r){return this._x=t.getX(r),this._y=t.getY(r),this._z=t.getZ(r),this._w=t.getW(r),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class r8{constructor(t=0,r=0,i=0){r8.prototype.isVector3=!0,this.x=t,this.y=r,this.z=i}set(t,r,i){return void 0===i&&(i=this.z),this.x=t,this.y=r,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,r){return this.x=t.x*r.x,this.y=t.y*r.y,this.z=t.z*r.z,this}applyEuler(t){return this.applyQuaternion(ie.setFromEuler(t))}applyAxisAngle(t,r){return this.applyQuaternion(ie.setFromAxisAngle(t,r))}applyMatrix3(t){let r=this.x,i=this.y,s=this.z,u=t.elements;return this.x=u[0]*r+u[3]*i+u[6]*s,this.y=u[1]*r+u[4]*i+u[7]*s,this.z=u[2]*r+u[5]*i+u[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let r=this.x,i=this.y,s=this.z,u=t.elements,c=1/(u[3]*r+u[7]*i+u[11]*s+u[15]);return this.x=(u[0]*r+u[4]*i+u[8]*s+u[12])*c,this.y=(u[1]*r+u[5]*i+u[9]*s+u[13])*c,this.z=(u[2]*r+u[6]*i+u[10]*s+u[14])*c,this}applyQuaternion(t){let r=this.x,i=this.y,s=this.z,u=t.x,c=t.y,h=t.z,p=t.w,f=2*(c*s-h*i),v=2*(h*r-u*s),y=2*(u*i-c*r);return this.x=r+p*f+c*y-h*v,this.y=i+p*v+h*f-u*y,this.z=s+p*y+u*v-c*f,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let r=this.x,i=this.y,s=this.z,u=t.elements;return this.x=u[0]*r+u[4]*i+u[8]*s,this.y=u[1]*r+u[5]*i+u[9]*s,this.z=u[2]*r+u[6]*i+u[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this.z=Math.max(t.z,Math.min(r.z,this.z)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this.z=Math.max(t,Math.min(r,this.z)),this}clampLength(t,r){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(r,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this}lerpVectors(t,r,i){return this.x=t.x+(r.x-t.x)*i,this.y=t.y+(r.y-t.y)*i,this.z=t.z+(r.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,r){let i=t.x,s=t.y,u=t.z,c=r.x,h=r.y,p=r.z;return this.x=s*p-u*h,this.y=u*c-i*p,this.z=i*h-s*c,this}projectOnVector(t){let r=t.lengthSq();if(0===r)return this.set(0,0,0);let i=t.dot(this)/r;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return r7.copy(this).projectOnVector(t),this.sub(r7)}reflect(t){return this.sub(r7.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let r=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===r?Math.PI/2:Math.acos(rM(this.dot(t)/r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let r=this.x-t.x,i=this.y-t.y,s=this.z-t.z;return r*r+i*i+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,r,i){let s=Math.sin(r)*t;return this.x=s*Math.sin(i),this.y=Math.cos(r)*t,this.z=s*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,r,i){return this.x=t*Math.sin(r),this.y=i,this.z=t*Math.cos(r),this}setFromMatrixPosition(t){let r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(t){let r=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=r,this.y=i,this.z=s,this}setFromMatrixColumn(t,r){return this.fromArray(t.elements,4*r)}setFromMatrix3Column(t,r){return this.fromArray(t.elements,3*r)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=Math.random()*Math.PI*2,r=2*Math.random()-1,i=Math.sqrt(1-r*r);return this.x=i*Math.cos(t),this.y=r,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}let r7=new r8,ie=new r9;class it{constructor(t=new r8(Infinity,Infinity,Infinity),r=new r8(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=r}set(t,r){return this.min.copy(t),this.max.copy(r),this}setFromArray(t){this.makeEmpty();for(let r=0,i=t.length;r<i;r+=3)this.expandByPoint(ii.fromArray(t,r));return this}setFromBufferAttribute(t){this.makeEmpty();for(let r=0,i=t.count;r<i;r++)this.expandByPoint(ii.fromBufferAttribute(t,r));return this}setFromPoints(t){this.makeEmpty();for(let r=0,i=t.length;r<i;r++)this.expandByPoint(t[r]);return this}setFromCenterAndSize(t,r){let i=ii.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,r=!1){return this.makeEmpty(),this.expandByObject(t,r)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,r=!1){t.updateWorldMatrix(!1,!1);let i=t.geometry;if(void 0!==i){let s=i.getAttribute("position");if(!0===r&&void 0!==s&&!0!==t.isInstancedMesh)for(let r=0,i=s.count;r<i;r++)!0===t.isMesh?t.getVertexPosition(r,ii):ii.fromBufferAttribute(s,r),ii.applyMatrix4(t.matrixWorld),this.expandByPoint(ii);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),ia.copy(t.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),ia.copy(i.boundingBox)),ia.applyMatrix4(t.matrixWorld),this.union(ia)}let s=t.children;for(let t=0,i=s.length;t<i;t++)this.expandByObject(s[t],r);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,r){return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,ii),ii.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let r,i;return t.normal.x>0?(r=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(r=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(r+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(r+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(r+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(r+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),r<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(id),ip.subVectors(this.max,id),io.subVectors(t.a,id),is.subVectors(t.b,id),il.subVectors(t.c,id),iu.subVectors(is,io),ic.subVectors(il,is),ih.subVectors(io,il);let r=[0,-iu.z,iu.y,0,-ic.z,ic.y,0,-ih.z,ih.y,iu.z,0,-iu.x,ic.z,0,-ic.x,ih.z,0,-ih.x,-iu.y,iu.x,0,-ic.y,ic.x,0,-ih.y,ih.x,0];return!!(iv(r,io,is,il,ip)&&iv(r=[1,0,0,0,1,0,0,0,1],io,is,il,ip))&&(ig.crossVectors(iu,ic),iv(r=[ig.x,ig.y,ig.z],io,is,il,ip))}clampPoint(t,r){return r.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,ii).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(ii).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(ir[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ir[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ir[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ir[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ir[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ir[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ir[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ir[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ir),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}let ir=[new r8,new r8,new r8,new r8,new r8,new r8,new r8,new r8],ii=new r8,ia=new it,io=new r8,is=new r8,il=new r8,iu=new r8,ic=new r8,ih=new r8,id=new r8,ip=new r8,ig=new r8,im=new r8;function iv(t,r,i,s,u){for(let c=0,h=t.length-3;c<=h;c+=3){im.fromArray(t,c);let h=u.x*Math.abs(im.x)+u.y*Math.abs(im.y)+u.z*Math.abs(im.z),p=r.dot(im),f=i.dot(im),v=s.dot(im);if(Math.max(-Math.max(p,f,v),Math.min(p,f,v))>h)return!1}return!0}let iy=new it,ix=new r8,i_=new r8;class ib{constructor(t=new r8,r=-1){this.isSphere=!0,this.center=t,this.radius=r}set(t,r){return this.center.copy(t),this.radius=r,this}setFromPoints(t,r){let i=this.center;void 0!==r?i.copy(r):iy.setFromPoints(t).getCenter(i);let s=0;for(let r=0,u=t.length;r<u;r++)s=Math.max(s,i.distanceToSquared(t[r]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let r=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=r*r}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,r){let i=this.center.distanceToSquared(t);return r.copy(t),i>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;ix.subVectors(t,this.center);let r=ix.lengthSq();if(r>this.radius*this.radius){let t=Math.sqrt(r),i=(t-this.radius)*.5;this.center.addScaledVector(ix,i/t),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(i_.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(ix.copy(t.center).add(i_)),this.expandByPoint(ix.copy(t.center).sub(i_))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}let iw=new r8,iS=new r8,iM=new r8,iA=new r8,iC=new r8,iT=new r8,iE=new r8;class iI{constructor(t=new r8,r=new r8(0,0,-1)){this.origin=t,this.direction=r}set(t,r){return this.origin.copy(t),this.direction.copy(r),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,r){return r.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,iw)),this}closestPointToPoint(t,r){r.subVectors(t,this.origin);let i=r.dot(this.direction);return i<0?r.copy(this.origin):r.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let r=iw.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(iw.copy(this.origin).addScaledVector(this.direction,r),iw.distanceToSquared(t))}distanceSqToSegment(t,r,i,s){let u,c,h,p;iS.copy(t).add(r).multiplyScalar(.5),iM.copy(r).sub(t).normalize(),iA.copy(this.origin).sub(iS);let f=.5*t.distanceTo(r),v=-this.direction.dot(iM),y=iA.dot(this.direction),x=-iA.dot(iM),_=iA.lengthSq(),b=Math.abs(1-v*v);if(b>0){if(u=v*x-y,c=v*y-x,p=f*b,u>=0){if(c>=-p){if(c<=p){let t=1/b;u*=t,c*=t,h=u*(u+v*c+2*y)+c*(v*u+c+2*x)+_}else h=-(u=Math.max(0,-(v*(c=f)+y)))*u+c*(c+2*x)+_}else h=-(u=Math.max(0,-(v*(c=-f)+y)))*u+c*(c+2*x)+_}else c<=-p?(c=(u=Math.max(0,-(-v*f+y)))>0?-f:Math.min(Math.max(-f,-x),f),h=-u*u+c*(c+2*x)+_):c<=p?(u=0,h=(c=Math.min(Math.max(-f,-x),f))*(c+2*x)+_):(c=(u=Math.max(0,-(v*f+y)))>0?f:Math.min(Math.max(-f,-x),f),h=-u*u+c*(c+2*x)+_)}else c=v>0?-f:f,h=-(u=Math.max(0,-(v*c+y)))*u+c*(c+2*x)+_;return i&&i.copy(this.origin).addScaledVector(this.direction,u),s&&s.copy(iS).addScaledVector(iM,c),h}intersectSphere(t,r){iw.subVectors(t.center,this.origin);let i=iw.dot(this.direction),s=iw.dot(iw)-i*i,u=t.radius*t.radius;if(s>u)return null;let c=Math.sqrt(u-s),h=i-c,p=i+c;return p<0?null:h<0?this.at(p,r):this.at(h,r)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let r=t.normal.dot(this.direction);if(0===r)return 0===t.distanceToPoint(this.origin)?0:null;let i=-(this.origin.dot(t.normal)+t.constant)/r;return i>=0?i:null}intersectPlane(t,r){let i=this.distanceToPlane(t);return null===i?null:this.at(i,r)}intersectsPlane(t){let r=t.distanceToPoint(this.origin);return!!(0===r||t.normal.dot(this.direction)*r<0)||!1}intersectBox(t,r){let i,s,u,c,h,p;let f=1/this.direction.x,v=1/this.direction.y,y=1/this.direction.z,x=this.origin;return(f>=0?(i=(t.min.x-x.x)*f,s=(t.max.x-x.x)*f):(i=(t.max.x-x.x)*f,s=(t.min.x-x.x)*f),v>=0?(u=(t.min.y-x.y)*v,c=(t.max.y-x.y)*v):(u=(t.max.y-x.y)*v,c=(t.min.y-x.y)*v),i>c||u>s)?null:((u>i||isNaN(i))&&(i=u),(c<s||isNaN(s))&&(s=c),y>=0?(h=(t.min.z-x.z)*y,p=(t.max.z-x.z)*y):(h=(t.max.z-x.z)*y,p=(t.min.z-x.z)*y),i>p||h>s)?null:((h>i||i!=i)&&(i=h),(p<s||s!=s)&&(s=p),s<0)?null:this.at(i>=0?i:s,r)}intersectsBox(t){return null!==this.intersectBox(t,iw)}intersectTriangle(t,r,i,s,u){let c;iC.subVectors(r,t),iT.subVectors(i,t),iE.crossVectors(iC,iT);let h=this.direction.dot(iE);if(h>0){if(s)return null;c=1}else{if(!(h<0))return null;c=-1,h=-h}iA.subVectors(this.origin,t);let p=c*this.direction.dot(iT.crossVectors(iA,iT));if(p<0)return null;let f=c*this.direction.dot(iC.cross(iA));if(f<0||p+f>h)return null;let v=-c*iA.dot(iE);return v<0?null:this.at(v/h,u)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class iD{constructor(t,r,i,s,u,c,h,p,f,v,y,x,_,b,w,S){iD.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,r,i,s,u,c,h,p,f,v,y,x,_,b,w,S)}set(t,r,i,s,u,c,h,p,f,v,y,x,_,b,w,S){let M=this.elements;return M[0]=t,M[4]=r,M[8]=i,M[12]=s,M[1]=u,M[5]=c,M[9]=h,M[13]=p,M[2]=f,M[6]=v,M[10]=y,M[14]=x,M[3]=_,M[7]=b,M[11]=w,M[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new iD().fromArray(this.elements)}copy(t){let r=this.elements,i=t.elements;return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],this}copyPosition(t){let r=this.elements,i=t.elements;return r[12]=i[12],r[13]=i[13],r[14]=i[14],this}setFromMatrix3(t){let r=t.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(t,r,i){return t.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,r,i){return this.set(t.x,r.x,i.x,0,t.y,r.y,i.y,0,t.z,r.z,i.z,0,0,0,0,1),this}extractRotation(t){let r=this.elements,i=t.elements,s=1/iP.setFromMatrixColumn(t,0).length(),u=1/iP.setFromMatrixColumn(t,1).length(),c=1/iP.setFromMatrixColumn(t,2).length();return r[0]=i[0]*s,r[1]=i[1]*s,r[2]=i[2]*s,r[3]=0,r[4]=i[4]*u,r[5]=i[5]*u,r[6]=i[6]*u,r[7]=0,r[8]=i[8]*c,r[9]=i[9]*c,r[10]=i[10]*c,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(t){let r=this.elements,i=t.x,s=t.y,u=t.z,c=Math.cos(i),h=Math.sin(i),p=Math.cos(s),f=Math.sin(s),v=Math.cos(u),y=Math.sin(u);if("XYZ"===t.order){let t=c*v,i=c*y,s=h*v,u=h*y;r[0]=p*v,r[4]=-p*y,r[8]=f,r[1]=i+s*f,r[5]=t-u*f,r[9]=-h*p,r[2]=u-t*f,r[6]=s+i*f,r[10]=c*p}else if("YXZ"===t.order){let t=p*v,i=p*y,s=f*v,u=f*y;r[0]=t+u*h,r[4]=s*h-i,r[8]=c*f,r[1]=c*y,r[5]=c*v,r[9]=-h,r[2]=i*h-s,r[6]=u+t*h,r[10]=c*p}else if("ZXY"===t.order){let t=p*v,i=p*y,s=f*v,u=f*y;r[0]=t-u*h,r[4]=-c*y,r[8]=s+i*h,r[1]=i+s*h,r[5]=c*v,r[9]=u-t*h,r[2]=-c*f,r[6]=h,r[10]=c*p}else if("ZYX"===t.order){let t=c*v,i=c*y,s=h*v,u=h*y;r[0]=p*v,r[4]=s*f-i,r[8]=t*f+u,r[1]=p*y,r[5]=u*f+t,r[9]=i*f-s,r[2]=-f,r[6]=h*p,r[10]=c*p}else if("YZX"===t.order){let t=c*p,i=c*f,s=h*p,u=h*f;r[0]=p*v,r[4]=u-t*y,r[8]=s*y+i,r[1]=y,r[5]=c*v,r[9]=-h*v,r[2]=-f*v,r[6]=i*y+s,r[10]=t-u*y}else if("XZY"===t.order){let t=c*p,i=c*f,s=h*p,u=h*f;r[0]=p*v,r[4]=-y,r[8]=f*v,r[1]=t*y+u,r[5]=c*v,r[9]=i*y-s,r[2]=s*y-i,r[6]=h*v,r[10]=u*y+t}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(t){return this.compose(iL,t,ik)}lookAt(t,r,i){let s=this.elements;return iN.subVectors(t,r),0===iN.lengthSq()&&(iN.z=1),iN.normalize(),iO.crossVectors(i,iN),0===iO.lengthSq()&&(1===Math.abs(i.z)?iN.x+=1e-4:iN.z+=1e-4,iN.normalize(),iO.crossVectors(i,iN)),iO.normalize(),iB.crossVectors(iN,iO),s[0]=iO.x,s[4]=iB.x,s[8]=iN.x,s[1]=iO.y,s[5]=iB.y,s[9]=iN.y,s[2]=iO.z,s[6]=iB.z,s[10]=iN.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){let i=t.elements,s=r.elements,u=this.elements,c=i[0],h=i[4],p=i[8],f=i[12],v=i[1],y=i[5],x=i[9],_=i[13],b=i[2],w=i[6],S=i[10],M=i[14],A=i[3],C=i[7],T=i[11],I=i[15],D=s[0],P=s[4],R=s[8],L=s[12],k=s[1],O=s[5],B=s[9],N=s[13],F=s[2],z=s[6],U=s[10],H=s[14],G=s[3],V=s[7],W=s[11],j=s[15];return u[0]=c*D+h*k+p*F+f*G,u[4]=c*P+h*O+p*z+f*V,u[8]=c*R+h*B+p*U+f*W,u[12]=c*L+h*N+p*H+f*j,u[1]=v*D+y*k+x*F+_*G,u[5]=v*P+y*O+x*z+_*V,u[9]=v*R+y*B+x*U+_*W,u[13]=v*L+y*N+x*H+_*j,u[2]=b*D+w*k+S*F+M*G,u[6]=b*P+w*O+S*z+M*V,u[10]=b*R+w*B+S*U+M*W,u[14]=b*L+w*N+S*H+M*j,u[3]=A*D+C*k+T*F+I*G,u[7]=A*P+C*O+T*z+I*V,u[11]=A*R+C*B+T*U+I*W,u[15]=A*L+C*N+T*H+I*j,this}multiplyScalar(t){let r=this.elements;return r[0]*=t,r[4]*=t,r[8]*=t,r[12]*=t,r[1]*=t,r[5]*=t,r[9]*=t,r[13]*=t,r[2]*=t,r[6]*=t,r[10]*=t,r[14]*=t,r[3]*=t,r[7]*=t,r[11]*=t,r[15]*=t,this}determinant(){let t=this.elements,r=t[0],i=t[4],s=t[8],u=t[12],c=t[1],h=t[5],p=t[9],f=t[13],v=t[2],y=t[6],x=t[10],_=t[14],b=t[3],w=t[7],S=t[11];return b*(+u*p*y-s*f*y-u*h*x+i*f*x+s*h*_-i*p*_)+w*(+r*p*_-r*f*x+u*c*x-s*c*_+s*f*v-u*p*v)+S*(+r*f*y-r*h*_-u*c*y+i*c*_+u*h*v-i*f*v)+t[15]*(-s*h*v-r*p*y+r*h*x+s*c*y-i*c*x+i*p*v)}transpose(){let t;let r=this.elements;return t=r[1],r[1]=r[4],r[4]=t,t=r[2],r[2]=r[8],r[8]=t,t=r[6],r[6]=r[9],r[9]=t,t=r[3],r[3]=r[12],r[12]=t,t=r[7],r[7]=r[13],r[13]=t,t=r[11],r[11]=r[14],r[14]=t,this}setPosition(t,r,i){let s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=r,s[14]=i),this}invert(){let t=this.elements,r=t[0],i=t[1],s=t[2],u=t[3],c=t[4],h=t[5],p=t[6],f=t[7],v=t[8],y=t[9],x=t[10],_=t[11],b=t[12],w=t[13],S=t[14],M=t[15],A=y*S*f-w*x*f+w*p*_-h*S*_-y*p*M+h*x*M,C=b*x*f-v*S*f-b*p*_+c*S*_+v*p*M-c*x*M,T=v*w*f-b*y*f+b*h*_-c*w*_-v*h*M+c*y*M,I=b*y*p-v*w*p-b*h*x+c*w*x+v*h*S-c*y*S,D=r*A+i*C+s*T+u*I;if(0===D)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let P=1/D;return t[0]=A*P,t[1]=(w*x*u-y*S*u-w*s*_+i*S*_+y*s*M-i*x*M)*P,t[2]=(h*S*u-w*p*u+w*s*f-i*S*f-h*s*M+i*p*M)*P,t[3]=(y*p*u-h*x*u-y*s*f+i*x*f+h*s*_-i*p*_)*P,t[4]=C*P,t[5]=(v*S*u-b*x*u+b*s*_-r*S*_-v*s*M+r*x*M)*P,t[6]=(b*p*u-c*S*u-b*s*f+r*S*f+c*s*M-r*p*M)*P,t[7]=(c*x*u-v*p*u+v*s*f-r*x*f-c*s*_+r*p*_)*P,t[8]=T*P,t[9]=(b*y*u-v*w*u-b*i*_+r*w*_+v*i*M-r*y*M)*P,t[10]=(c*w*u-b*h*u+b*i*f-r*w*f-c*i*M+r*h*M)*P,t[11]=(v*h*u-c*y*u-v*i*f+r*y*f+c*i*_-r*h*_)*P,t[12]=I*P,t[13]=(v*w*s-b*y*s+b*i*x-r*w*x-v*i*S+r*y*S)*P,t[14]=(b*h*s-c*w*s-b*i*p+r*w*p+c*i*S-r*h*S)*P,t[15]=(c*y*s-v*h*s+v*i*p-r*y*p-c*i*x+r*h*x)*P,this}scale(t){let r=this.elements,i=t.x,s=t.y,u=t.z;return r[0]*=i,r[4]*=s,r[8]*=u,r[1]*=i,r[5]*=s,r[9]*=u,r[2]*=i,r[6]*=s,r[10]*=u,r[3]*=i,r[7]*=s,r[11]*=u,this}getMaxScaleOnAxis(){let t=this.elements,r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6];return Math.sqrt(Math.max(r,i,t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,r,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,r,0,0,1,i,0,0,0,1),this}makeRotationX(t){let r=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,r,-i,0,0,i,r,0,0,0,0,1),this}makeRotationY(t){let r=Math.cos(t),i=Math.sin(t);return this.set(r,0,i,0,0,1,0,0,-i,0,r,0,0,0,0,1),this}makeRotationZ(t){let r=Math.cos(t),i=Math.sin(t);return this.set(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,r){let i=Math.cos(r),s=Math.sin(r),u=1-i,c=t.x,h=t.y,p=t.z,f=u*c,v=u*h;return this.set(f*c+i,f*h-s*p,f*p+s*h,0,f*h+s*p,v*h+i,v*p-s*c,0,f*p-s*h,v*p+s*c,u*p*p+i,0,0,0,0,1),this}makeScale(t,r,i){return this.set(t,0,0,0,0,r,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,r,i,s,u,c){return this.set(1,i,u,0,t,1,c,0,r,s,1,0,0,0,0,1),this}compose(t,r,i){let s=this.elements,u=r._x,c=r._y,h=r._z,p=r._w,f=u+u,v=c+c,y=h+h,x=u*f,_=u*v,b=u*y,w=c*v,S=c*y,M=h*y,A=p*f,C=p*v,T=p*y,I=i.x,D=i.y,P=i.z;return s[0]=(1-(w+M))*I,s[1]=(_+T)*I,s[2]=(b-C)*I,s[3]=0,s[4]=(_-T)*D,s[5]=(1-(x+M))*D,s[6]=(S+A)*D,s[7]=0,s[8]=(b+C)*P,s[9]=(S-A)*P,s[10]=(1-(x+w))*P,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,r,i){let s=this.elements,u=iP.set(s[0],s[1],s[2]).length(),c=iP.set(s[4],s[5],s[6]).length(),h=iP.set(s[8],s[9],s[10]).length();0>this.determinant()&&(u=-u),t.x=s[12],t.y=s[13],t.z=s[14],iR.copy(this);let p=1/u,f=1/c,v=1/h;return iR.elements[0]*=p,iR.elements[1]*=p,iR.elements[2]*=p,iR.elements[4]*=f,iR.elements[5]*=f,iR.elements[6]*=f,iR.elements[8]*=v,iR.elements[9]*=v,iR.elements[10]*=v,r.setFromRotationMatrix(iR),i.x=u,i.y=c,i.z=h,this}makePerspective(t,r,i,s,u,c,h=rm){let p,f;let v=this.elements;if(h===rm)p=-(c+u)/(c-u),f=-2*c*u/(c-u);else if(h===rv)p=-c/(c-u),f=-c*u/(c-u);else throw Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+h);return v[0]=2*u/(r-t),v[4]=0,v[8]=(r+t)/(r-t),v[12]=0,v[1]=0,v[5]=2*u/(i-s),v[9]=(i+s)/(i-s),v[13]=0,v[2]=0,v[6]=0,v[10]=p,v[14]=f,v[3]=0,v[7]=0,v[11]=-1,v[15]=0,this}makeOrthographic(t,r,i,s,u,c,h=rm){let p,f;let v=this.elements,y=1/(r-t),x=1/(i-s),_=1/(c-u);if(h===rm)p=(c+u)*_,f=-2*_;else if(h===rv)p=u*_,f=-1*_;else throw Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+h);return v[0]=2*y,v[4]=0,v[8]=0,v[12]=-((r+t)*y),v[1]=0,v[5]=2*x,v[9]=0,v[13]=-((i+s)*x),v[2]=0,v[6]=0,v[10]=f,v[14]=-p,v[3]=0,v[7]=0,v[11]=0,v[15]=1,this}equals(t){let r=this.elements,i=t.elements;for(let t=0;t<16;t++)if(r[t]!==i[t])return!1;return!0}fromArray(t,r=0){for(let i=0;i<16;i++)this.elements[i]=t[i+r];return this}toArray(t=[],r=0){let i=this.elements;return t[r]=i[0],t[r+1]=i[1],t[r+2]=i[2],t[r+3]=i[3],t[r+4]=i[4],t[r+5]=i[5],t[r+6]=i[6],t[r+7]=i[7],t[r+8]=i[8],t[r+9]=i[9],t[r+10]=i[10],t[r+11]=i[11],t[r+12]=i[12],t[r+13]=i[13],t[r+14]=i[14],t[r+15]=i[15],t}}let iP=new r8,iR=new iD,iL=new r8(0,0,0),ik=new r8(1,1,1),iO=new r8,iB=new r8,iN=new r8,iF=new iD,iz=new r9;class iU{constructor(t=0,r=0,i=0,s=iU.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=r,this._z=i,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,r,i,s=this._order){return this._x=t,this._y=r,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,r=this._order,i=!0){let s=t.elements,u=s[0],c=s[4],h=s[8],p=s[1],f=s[5],v=s[9],y=s[2],x=s[6],_=s[10];switch(r){case"XYZ":this._y=Math.asin(rM(h,-1,1)),.9999999>Math.abs(h)?(this._x=Math.atan2(-v,_),this._z=Math.atan2(-c,u)):(this._x=Math.atan2(x,f),this._z=0);break;case"YXZ":this._x=Math.asin(-rM(v,-1,1)),.9999999>Math.abs(v)?(this._y=Math.atan2(h,_),this._z=Math.atan2(p,f)):(this._y=Math.atan2(-y,u),this._z=0);break;case"ZXY":this._x=Math.asin(rM(x,-1,1)),.9999999>Math.abs(x)?(this._y=Math.atan2(-y,_),this._z=Math.atan2(-c,f)):(this._y=0,this._z=Math.atan2(p,u));break;case"ZYX":this._y=Math.asin(-rM(y,-1,1)),.9999999>Math.abs(y)?(this._x=Math.atan2(x,_),this._z=Math.atan2(p,u)):(this._x=0,this._z=Math.atan2(-c,f));break;case"YZX":this._z=Math.asin(rM(p,-1,1)),.9999999>Math.abs(p)?(this._x=Math.atan2(-v,f),this._y=Math.atan2(-y,u)):(this._x=0,this._y=Math.atan2(h,_));break;case"XZY":this._z=Math.asin(-rM(c,-1,1)),.9999999>Math.abs(c)?(this._x=Math.atan2(x,f),this._y=Math.atan2(h,u)):(this._x=Math.atan2(-v,_),this._y=0)}return this._order=r,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,r,i){return iF.makeRotationFromQuaternion(t),this.setFromRotationMatrix(iF,r,i)}setFromVector3(t,r=this._order){return this.set(t.x,t.y,t.z,r)}reorder(t){return iz.setFromEuler(this),this.setFromQuaternion(iz,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}iU.DEFAULT_ORDER="XYZ";class iH{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!=0}isEnabled(t){return(this.mask&(1<<t|0))!=0}}let iG=0,iV=new r8,iW=new r9,ij=new iD,iX=new r8,iY=new r8,i$=new r8,iJ=new r9,iZ=new r8(1,0,0),iK=new r8(0,1,0),iq=new r8(0,0,1),iQ={type:"added"},i0={type:"removed"},i1={type:"childadded",child:null},i2={type:"childremoved",child:null};class i3 extends ry{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:iG++}),this.uuid=rS(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i3.DEFAULT_UP.clone();let t=new r8,r=new iU,i=new r9,s=new r8(1,1,1);r._onChange(function(){i.setFromEuler(r,!1)}),i._onChange(function(){r.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new iD},normalMatrix:{value:new rP}}),this.matrix=new iD,this.matrixWorld=new iD,this.matrixAutoUpdate=i3.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=i3.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new iH,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,r){this.quaternion.setFromAxisAngle(t,r)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,r){return iW.setFromAxisAngle(t,r),this.quaternion.multiply(iW),this}rotateOnWorldAxis(t,r){return iW.setFromAxisAngle(t,r),this.quaternion.premultiply(iW),this}rotateX(t){return this.rotateOnAxis(iZ,t)}rotateY(t){return this.rotateOnAxis(iK,t)}rotateZ(t){return this.rotateOnAxis(iq,t)}translateOnAxis(t,r){return iV.copy(t).applyQuaternion(this.quaternion),this.position.add(iV.multiplyScalar(r)),this}translateX(t){return this.translateOnAxis(iZ,t)}translateY(t){return this.translateOnAxis(iK,t)}translateZ(t){return this.translateOnAxis(iq,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(ij.copy(this.matrixWorld).invert())}lookAt(t,r,i){t.isVector3?iX.copy(t):iX.set(t,r,i);let s=this.parent;this.updateWorldMatrix(!0,!1),iY.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ij.lookAt(iY,iX,this.up):ij.lookAt(iX,iY,this.up),this.quaternion.setFromRotationMatrix(ij),s&&(ij.extractRotation(s.matrixWorld),iW.setFromRotationMatrix(ij),this.quaternion.premultiply(iW.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?this:(t&&t.isObject3D&&(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(iQ),i1.child=t,this.dispatchEvent(i1),i1.child=null),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}let r=this.children.indexOf(t);return -1!==r&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent(i0),i2.child=t,this.dispatchEvent(i2),i2.child=null),this}removeFromParent(){let t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),ij.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),ij.multiply(t.parent.matrixWorld)),t.applyMatrix4(ij),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(iQ),i1.child=t,this.dispatchEvent(i1),i1.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,r){if(this[t]===r)return this;for(let i=0,s=this.children.length;i<s;i++){let s=this.children[i].getObjectByProperty(t,r);if(void 0!==s)return s}}getObjectsByProperty(t,r,i=[]){this[t]===r&&i.push(this);let s=this.children;for(let u=0,c=s.length;u<c;u++)s[u].getObjectsByProperty(t,r,i);return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(iY,t,i$),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(iY,iJ,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let r=this.matrixWorld.elements;return t.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(t){t(this);let r=this.children;for(let i=0,s=r.length;i<s;i++)r[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);let r=this.children;for(let i=0,s=r.length;i<s;i++)r[i].traverseVisible(t)}traverseAncestors(t){let r=this.parent;null!==r&&(t(r),r.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let r=this.children;for(let i=0,s=r.length;i<s;i++)r[i].updateMatrixWorld(t)}updateWorldMatrix(t,r){let i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===r){let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateWorldMatrix(!1,!0)}}toJSON(t){let r=void 0===t||"string"==typeof t,i={};r&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let s={};function u(r,i){return void 0===r[i.uuid]&&(r[i.uuid]=i.toJSON(t)),i.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(t=>({boxInitialized:t.boxInitialized,boxMin:t.box.min.toArray(),boxMax:t.box.max.toArray(),sphereInitialized:t.sphereInitialized,sphereRadius:t.sphere.radius,sphereCenter:t.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),null!==this._colorsTexture&&(s.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),null!==this.boundingBox&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=u(t.geometries,this.geometry);let r=this.geometry.parameters;if(void 0!==r&&void 0!==r.shapes){let i=r.shapes;if(Array.isArray(i))for(let r=0,s=i.length;r<s;r++){let s=i[r];u(t.shapes,s)}else u(t.shapes,i)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(u(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material){if(Array.isArray(this.material)){let r=[];for(let i=0,s=this.material.length;i<s;i++)r.push(u(t.materials,this.material[i]));s.material=r}else s.material=u(t.materials,this.material)}if(this.children.length>0){s.children=[];for(let r=0;r<this.children.length;r++)s.children.push(this.children[r].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let r=0;r<this.animations.length;r++){let i=this.animations[r];s.animations.push(u(t.animations,i))}}if(r){let r=c(t.geometries),s=c(t.materials),u=c(t.textures),h=c(t.images),p=c(t.shapes),f=c(t.skeletons),v=c(t.animations),y=c(t.nodes);r.length>0&&(i.geometries=r),s.length>0&&(i.materials=s),u.length>0&&(i.textures=u),h.length>0&&(i.images=h),p.length>0&&(i.shapes=p),f.length>0&&(i.skeletons=f),v.length>0&&(i.animations=v),y.length>0&&(i.nodes=y)}return i.object=s,i;function c(t){let r=[];for(let i in t){let s=t[i];delete s.metadata,r.push(s)}return r}}clone(t){return new this.constructor().copy(this,t)}copy(t,r=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===r)for(let r=0;r<t.children.length;r++){let i=t.children[r];this.add(i.clone())}return this}}i3.DEFAULT_UP=new r8(0,1,0),i3.DEFAULT_MATRIX_AUTO_UPDATE=!0,i3.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;let i5=new r8,i4=new r8,i6=new r8,i9=new r8,i8=new r8,i7=new r8,ae=new r8,at=new r8,an=new r8,ar=new r8,ai=new r0,aa=new r0,ao=new r0;class as{constructor(t=new r8,r=new r8,i=new r8){this.a=t,this.b=r,this.c=i}static getNormal(t,r,i,s){s.subVectors(i,r),i5.subVectors(t,r),s.cross(i5);let u=s.lengthSq();return u>0?s.multiplyScalar(1/Math.sqrt(u)):s.set(0,0,0)}static getBarycoord(t,r,i,s,u){i5.subVectors(s,r),i4.subVectors(i,r),i6.subVectors(t,r);let c=i5.dot(i5),h=i5.dot(i4),p=i5.dot(i6),f=i4.dot(i4),v=i4.dot(i6),y=c*f-h*h;if(0===y)return u.set(0,0,0),null;let x=1/y,_=(f*p-h*v)*x,b=(c*v-h*p)*x;return u.set(1-_-b,b,_)}static containsPoint(t,r,i,s){return null!==this.getBarycoord(t,r,i,s,i9)&&i9.x>=0&&i9.y>=0&&i9.x+i9.y<=1}static getInterpolation(t,r,i,s,u,c,h,p){return null===this.getBarycoord(t,r,i,s,i9)?(p.x=0,p.y=0,"z"in p&&(p.z=0),"w"in p&&(p.w=0),null):(p.setScalar(0),p.addScaledVector(u,i9.x),p.addScaledVector(c,i9.y),p.addScaledVector(h,i9.z),p)}static getInterpolatedAttribute(t,r,i,s,u,c){return ai.setScalar(0),aa.setScalar(0),ao.setScalar(0),ai.fromBufferAttribute(t,r),aa.fromBufferAttribute(t,i),ao.fromBufferAttribute(t,s),c.setScalar(0),c.addScaledVector(ai,u.x),c.addScaledVector(aa,u.y),c.addScaledVector(ao,u.z),c}static isFrontFacing(t,r,i,s){return i5.subVectors(i,r),i4.subVectors(t,r),0>i5.cross(i4).dot(s)}set(t,r,i){return this.a.copy(t),this.b.copy(r),this.c.copy(i),this}setFromPointsAndIndices(t,r,i,s){return this.a.copy(t[r]),this.b.copy(t[i]),this.c.copy(t[s]),this}setFromAttributeAndIndices(t,r,i,s){return this.a.fromBufferAttribute(t,r),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,s),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return i5.subVectors(this.c,this.b),i4.subVectors(this.a,this.b),.5*i5.cross(i4).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return as.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,r){return as.getBarycoord(t,this.a,this.b,this.c,r)}getInterpolation(t,r,i,s,u){return as.getInterpolation(t,this.a,this.b,this.c,r,i,s,u)}containsPoint(t){return as.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return as.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,r){let i,s;let u=this.a,c=this.b,h=this.c;i8.subVectors(c,u),i7.subVectors(h,u),at.subVectors(t,u);let p=i8.dot(at),f=i7.dot(at);if(p<=0&&f<=0)return r.copy(u);an.subVectors(t,c);let v=i8.dot(an),y=i7.dot(an);if(v>=0&&y<=v)return r.copy(c);let x=p*y-v*f;if(x<=0&&p>=0&&v<=0)return i=p/(p-v),r.copy(u).addScaledVector(i8,i);ar.subVectors(t,h);let _=i8.dot(ar),b=i7.dot(ar);if(b>=0&&_<=b)return r.copy(h);let w=_*f-p*b;if(w<=0&&f>=0&&b<=0)return s=f/(f-b),r.copy(u).addScaledVector(i7,s);let S=v*b-_*y;if(S<=0&&y-v>=0&&_-b>=0)return ae.subVectors(h,c),s=(y-v)/(y-v+(_-b)),r.copy(c).addScaledVector(ae,s);let M=1/(S+w+x);return i=w*M,s=x*M,r.copy(u).addScaledVector(i8,i).addScaledVector(i7,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let al={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32},au={h:0,s:0,l:0},ac={h:0,s:0,l:0};function ah(t,r,i){return(i<0&&(i+=1),i>1&&(i-=1),i<1/6)?t+(r-t)*6*i:i<.5?r:i<2/3?t+(r-t)*6*(2/3-i):t}class ad{constructor(t,r,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,r,i)}set(t,r,i){return void 0===r&&void 0===i?t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t):this.setRGB(t,r,i),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,r=nH){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,rU.toWorkingColorSpace(this,r),this}setRGB(t,r,i,s=rU.workingColorSpace){return this.r=t,this.g=r,this.b=i,rU.toWorkingColorSpace(this,s),this}setHSL(t,r,i,s=rU.workingColorSpace){if(t=rA(t,1),r=rM(r,0,1),i=rM(i,0,1),0===r)this.r=this.g=this.b=i;else{let s=i<=.5?i*(1+r):i+r-i*r,u=2*i-s;this.r=ah(u,s,t+1/3),this.g=ah(u,s,t),this.b=ah(u,s,t-1/3)}return rU.toWorkingColorSpace(this,s),this}setStyle(t,r=nH){let i;function s(t){void 0!==t&&parseFloat(t)}if(i=/^(\w+)\(([^\)]*)\)/.exec(t)){let t;let u=i[1],c=i[2];switch(u){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return s(t[4]),this.setRGB(Math.min(255,parseInt(t[1],10))/255,Math.min(255,parseInt(t[2],10))/255,Math.min(255,parseInt(t[3],10))/255,r);if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return s(t[4]),this.setRGB(Math.min(100,parseInt(t[1],10))/100,Math.min(100,parseInt(t[2],10))/100,Math.min(100,parseInt(t[3],10))/100,r);break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return s(t[4]),this.setHSL(parseFloat(t[1])/360,parseFloat(t[2])/100,parseFloat(t[3])/100,r)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){let t=i[1],s=t.length;if(3===s)return this.setRGB(parseInt(t.charAt(0),16)/15,parseInt(t.charAt(1),16)/15,parseInt(t.charAt(2),16)/15,r);if(6===s)return this.setHex(parseInt(t,16),r)}else if(t&&t.length>0)return this.setColorName(t,r);return this}setColorName(t,r=nH){let i=al[t.toLowerCase()];return void 0!==i&&this.setHex(i,r),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=rH(t.r),this.g=rH(t.g),this.b=rH(t.b),this}copyLinearToSRGB(t){return this.r=rG(t.r),this.g=rG(t.g),this.b=rG(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=nH){return rU.fromWorkingColorSpace(ap.copy(this),t),65536*Math.round(rM(255*ap.r,0,255))+256*Math.round(rM(255*ap.g,0,255))+Math.round(rM(255*ap.b,0,255))}getHexString(t=nH){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,r=rU.workingColorSpace){let i,s;rU.fromWorkingColorSpace(ap.copy(this),r);let u=ap.r,c=ap.g,h=ap.b,p=Math.max(u,c,h),f=Math.min(u,c,h),v=(f+p)/2;if(f===p)i=0,s=0;else{let t=p-f;switch(s=v<=.5?t/(p+f):t/(2-p-f),p){case u:i=(c-h)/t+(c<h?6:0);break;case c:i=(h-u)/t+2;break;case h:i=(u-c)/t+4}i/=6}return t.h=i,t.s=s,t.l=v,t}getRGB(t,r=rU.workingColorSpace){return rU.fromWorkingColorSpace(ap.copy(this),r),t.r=ap.r,t.g=ap.g,t.b=ap.b,t}getStyle(t=nH){rU.fromWorkingColorSpace(ap.copy(this),t);let r=ap.r,i=ap.g,s=ap.b;return t!==nH?`color(${t} ${r.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(255*r)},${Math.round(255*i)},${Math.round(255*s)})`}offsetHSL(t,r,i){return this.getHSL(au),this.setHSL(au.h+t,au.s+r,au.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,i){return this.r=t.r+(r.r-t.r)*i,this.g=t.g+(r.g-t.g)*i,this.b=t.b+(r.b-t.b)*i,this}lerpHSL(t,r){this.getHSL(au),t.getHSL(ac);let i=rC(au.h,ac.h,r),s=rC(au.s,ac.s,r),u=rC(au.l,ac.l,r);return this.setHSL(i,s,u),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){let r=this.r,i=this.g,s=this.b,u=t.elements;return this.r=u[0]*r+u[3]*i+u[6]*s,this.g=u[1]*r+u[4]*i+u[7]*s,this.b=u[2]*r+u[5]*i+u[8]*s,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let ap=new ad;ad.NAMES=al;let af=0;class ag extends ry{static get type(){return"Material"}get type(){return this.constructor.type}set type(t){}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:af++}),this.uuid=rS(),this.name="",this.blending=eC,this.side=ew,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=eU,this.blendDst=eH,this.blendEquation=eP,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ad(0,0,0),this.blendAlpha=0,this.depthFunc=e0,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=n6,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=nX,this.stencilZFail=nX,this.stencilZPass=nX,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(let r in t){let i=t[r];if(void 0===i)continue;let s=this[r];if(void 0!==s)s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[r]=i}}toJSON(t){let r=void 0===t||"string"==typeof t;r&&(t={textures:{},images:{}});let i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function s(t){let r=[];for(let i in t){let s=t[i];delete s.metadata,r.push(s)}return r}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(i.dispersion=this.dispersion),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapRotation&&(i.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==eC&&(i.blending=this.blending),this.side!==ew&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),this.blendSrc!==eU&&(i.blendSrc=this.blendSrc),this.blendDst!==eH&&(i.blendDst=this.blendDst),this.blendEquation!==eP&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==e0&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==n6&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==nX&&(i.stencilFail=this.stencilFail),this.stencilZFail!==nX&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==nX&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),r){let r=s(t.textures),u=s(t.images);r.length>0&&(i.textures=r),u.length>0&&(i.images=u)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let r=t.clippingPlanes,i=null;if(null!==r){let t=r.length;i=Array(t);for(let s=0;s!==t;++s)i[s]=r[s].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}onBuild(){}}class am extends ag{static get type(){return"MeshBasicMaterial"}constructor(t){super(),this.isMeshBasicMaterial=!0,this.color=new ad(0xffffff),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new iU,this.combine=e4,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}let av=function(){let t=new ArrayBuffer(4),r=new Float32Array(t),i=new Uint32Array(t),s=new Uint32Array(512),u=new Uint32Array(512);for(let t=0;t<256;++t){let r=t-127;r<-27?(s[t]=0,s[256|t]=32768,u[t]=24,u[256|t]=24):r<-14?(s[t]=1024>>-r-14,s[256|t]=1024>>-r-14|32768,u[t]=-r-1,u[256|t]=-r-1):r<=15?(s[t]=r+15<<10,s[256|t]=r+15<<10|32768,u[t]=13,u[256|t]=13):r<128?(s[t]=31744,s[256|t]=64512,u[t]=24,u[256|t]=24):(s[t]=31744,s[256|t]=64512,u[t]=13,u[256|t]=13)}let c=new Uint32Array(2048),h=new Uint32Array(64),p=new Uint32Array(64);for(let t=1;t<1024;++t){let r=t<<13,i=0;for(;(8388608&r)==0;)r<<=1,i-=8388608;r&=-8388609,i+=0x38800000,c[t]=r|i}for(let t=1024;t<2048;++t)c[t]=0x38000000+(t-1024<<13);for(let t=1;t<31;++t)h[t]=t<<23;h[31]=0x47800000,h[32]=0x80000000;for(let t=33;t<63;++t)h[t]=0x80000000+(t-32<<23);h[63]=0xc7800000;for(let t=1;t<64;++t)32!==t&&(p[t]=1024);return{floatView:r,uint32View:i,baseTable:s,shiftTable:u,mantissaTable:c,exponentTable:h,offsetTable:p}}();function ay(t){t=rM(t,-65504,65504),av.floatView[0]=t;let r=av.uint32View[0],i=r>>23&511;return av.baseTable[i]+((8388607&r)>>av.shiftTable[i])}function ax(t){let r=t>>10;return av.uint32View[0]=av.mantissaTable[av.offsetTable[r]+(1023&t)]+av.exponentTable[r],av.floatView[0]}let a_={toHalfFloat:ay,fromHalfFloat:ax},ab=new r8,aw=new rD;class aS{constructor(t,r,i=!1){if(Array.isArray(t))throw TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=r,this.count=void 0!==t?t.length/r:0,this.normalized=i,this.usage=ra,this.updateRanges=[],this.gpuType=tL,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,r){this.updateRanges.push({start:t,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,r,i){t*=this.itemSize,i*=r.itemSize;for(let s=0,u=this.itemSize;s<u;s++)this.array[t+s]=r.array[i+s];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let r=0,i=this.count;r<i;r++)aw.fromBufferAttribute(this,r),aw.applyMatrix3(t),this.setXY(r,aw.x,aw.y);else if(3===this.itemSize)for(let r=0,i=this.count;r<i;r++)ab.fromBufferAttribute(this,r),ab.applyMatrix3(t),this.setXYZ(r,ab.x,ab.y,ab.z);return this}applyMatrix4(t){for(let r=0,i=this.count;r<i;r++)ab.fromBufferAttribute(this,r),ab.applyMatrix4(t),this.setXYZ(r,ab.x,ab.y,ab.z);return this}applyNormalMatrix(t){for(let r=0,i=this.count;r<i;r++)ab.fromBufferAttribute(this,r),ab.applyNormalMatrix(t),this.setXYZ(r,ab.x,ab.y,ab.z);return this}transformDirection(t){for(let r=0,i=this.count;r<i;r++)ab.fromBufferAttribute(this,r),ab.transformDirection(t),this.setXYZ(r,ab.x,ab.y,ab.z);return this}set(t,r=0){return this.array.set(t,r),this}getComponent(t,r){let i=this.array[t*this.itemSize+r];return this.normalized&&(i=rT(i,this.array)),i}setComponent(t,r,i){return this.normalized&&(i=rE(i,this.array)),this.array[t*this.itemSize+r]=i,this}getX(t){let r=this.array[t*this.itemSize];return this.normalized&&(r=rT(r,this.array)),r}setX(t,r){return this.normalized&&(r=rE(r,this.array)),this.array[t*this.itemSize]=r,this}getY(t){let r=this.array[t*this.itemSize+1];return this.normalized&&(r=rT(r,this.array)),r}setY(t,r){return this.normalized&&(r=rE(r,this.array)),this.array[t*this.itemSize+1]=r,this}getZ(t){let r=this.array[t*this.itemSize+2];return this.normalized&&(r=rT(r,this.array)),r}setZ(t,r){return this.normalized&&(r=rE(r,this.array)),this.array[t*this.itemSize+2]=r,this}getW(t){let r=this.array[t*this.itemSize+3];return this.normalized&&(r=rT(r,this.array)),r}setW(t,r){return this.normalized&&(r=rE(r,this.array)),this.array[t*this.itemSize+3]=r,this}setXY(t,r,i){return t*=this.itemSize,this.normalized&&(r=rE(r,this.array),i=rE(i,this.array)),this.array[t+0]=r,this.array[t+1]=i,this}setXYZ(t,r,i,s){return t*=this.itemSize,this.normalized&&(r=rE(r,this.array),i=rE(i,this.array),s=rE(s,this.array)),this.array[t+0]=r,this.array[t+1]=i,this.array[t+2]=s,this}setXYZW(t,r,i,s,u){return t*=this.itemSize,this.normalized&&(r=rE(r,this.array),i=rE(i,this.array),s=rE(s,this.array),u=rE(u,this.array)),this.array[t+0]=r,this.array[t+1]=i,this.array[t+2]=s,this.array[t+3]=u,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==ra&&(t.usage=this.usage),t}}class aM extends aS{constructor(t,r,i){super(new Int8Array(t),r,i)}}class aA extends aS{constructor(t,r,i){super(new Uint8Array(t),r,i)}}class aC extends aS{constructor(t,r,i){super(new Uint8ClampedArray(t),r,i)}}class aT extends aS{constructor(t,r,i){super(new Int16Array(t),r,i)}}class aE extends aS{constructor(t,r,i){super(new Uint16Array(t),r,i)}}class aI extends aS{constructor(t,r,i){super(new Int32Array(t),r,i)}}class aD extends aS{constructor(t,r,i){super(new Uint32Array(t),r,i)}}class aP extends aS{constructor(t,r,i){super(new Uint16Array(t),r,i),this.isFloat16BufferAttribute=!0}getX(t){let r=ax(this.array[t*this.itemSize]);return this.normalized&&(r=rT(r,this.array)),r}setX(t,r){return this.normalized&&(r=rE(r,this.array)),this.array[t*this.itemSize]=ay(r),this}getY(t){let r=ax(this.array[t*this.itemSize+1]);return this.normalized&&(r=rT(r,this.array)),r}setY(t,r){return this.normalized&&(r=rE(r,this.array)),this.array[t*this.itemSize+1]=ay(r),this}getZ(t){let r=ax(this.array[t*this.itemSize+2]);return this.normalized&&(r=rT(r,this.array)),r}setZ(t,r){return this.normalized&&(r=rE(r,this.array)),this.array[t*this.itemSize+2]=ay(r),this}getW(t){let r=ax(this.array[t*this.itemSize+3]);return this.normalized&&(r=rT(r,this.array)),r}setW(t,r){return this.normalized&&(r=rE(r,this.array)),this.array[t*this.itemSize+3]=ay(r),this}setXY(t,r,i){return t*=this.itemSize,this.normalized&&(r=rE(r,this.array),i=rE(i,this.array)),this.array[t+0]=ay(r),this.array[t+1]=ay(i),this}setXYZ(t,r,i,s){return t*=this.itemSize,this.normalized&&(r=rE(r,this.array),i=rE(i,this.array),s=rE(s,this.array)),this.array[t+0]=ay(r),this.array[t+1]=ay(i),this.array[t+2]=ay(s),this}setXYZW(t,r,i,s,u){return t*=this.itemSize,this.normalized&&(r=rE(r,this.array),i=rE(i,this.array),s=rE(s,this.array),u=rE(u,this.array)),this.array[t+0]=ay(r),this.array[t+1]=ay(i),this.array[t+2]=ay(s),this.array[t+3]=ay(u),this}}class aR extends aS{constructor(t,r,i){super(new Float32Array(t),r,i)}}let aL=0,ak=new iD,aO=new i3,aB=new r8,aN=new it,aF=new it,az=new r8;class aU extends ry{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:aL++}),this.uuid=rS(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(rL(t)?aD:aE)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,r){return this.attributes[t]=r,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,r,i=0){this.groups.push({start:t,count:r,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,r){this.drawRange.start=t,this.drawRange.count=r}applyMatrix4(t){let r=this.attributes.position;void 0!==r&&(r.applyMatrix4(t),r.needsUpdate=!0);let i=this.attributes.normal;if(void 0!==i){let r=new rP().getNormalMatrix(t);i.applyNormalMatrix(r),i.needsUpdate=!0}let s=this.attributes.tangent;return void 0!==s&&(s.transformDirection(t),s.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return ak.makeRotationFromQuaternion(t),this.applyMatrix4(ak),this}rotateX(t){return ak.makeRotationX(t),this.applyMatrix4(ak),this}rotateY(t){return ak.makeRotationY(t),this.applyMatrix4(ak),this}rotateZ(t){return ak.makeRotationZ(t),this.applyMatrix4(ak),this}translate(t,r,i){return ak.makeTranslation(t,r,i),this.applyMatrix4(ak),this}scale(t,r,i){return ak.makeScale(t,r,i),this.applyMatrix4(ak),this}lookAt(t){return aO.lookAt(t),aO.updateMatrix(),this.applyMatrix4(aO.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(aB).negate(),this.translate(aB.x,aB.y,aB.z),this}setFromPoints(t){let r=this.getAttribute("position");if(void 0===r){let r=[];for(let i=0,s=t.length;i<s;i++){let s=t[i];r.push(s.x,s.y,s.z||0)}this.setAttribute("position",new aR(r,3))}else{for(let i=0,s=r.count;i<s;i++){let s=t[i];r.setXYZ(i,s.x,s.y,s.z||0)}t.length,r.count,r.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new it);let t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){this.boundingBox.set(new r8(-1/0,-1/0,-1/0),new r8(Infinity,Infinity,Infinity));return}if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),r)for(let t=0,i=r.length;t<i;t++){let i=r[t];aN.setFromBufferAttribute(i),this.morphTargetsRelative?(az.addVectors(this.boundingBox.min,aN.min),this.boundingBox.expandByPoint(az),az.addVectors(this.boundingBox.max,aN.max),this.boundingBox.expandByPoint(az)):(this.boundingBox.expandByPoint(aN.min),this.boundingBox.expandByPoint(aN.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ib);let t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){this.boundingSphere.set(new r8,1/0);return}if(t){let i=this.boundingSphere.center;if(aN.setFromBufferAttribute(t),r)for(let t=0,i=r.length;t<i;t++){let i=r[t];aF.setFromBufferAttribute(i),this.morphTargetsRelative?(az.addVectors(aN.min,aF.min),aN.expandByPoint(az),az.addVectors(aN.max,aF.max),aN.expandByPoint(az)):(aN.expandByPoint(aF.min),aN.expandByPoint(aF.max))}aN.getCenter(i);let s=0;for(let r=0,u=t.count;r<u;r++)az.fromBufferAttribute(t,r),s=Math.max(s,i.distanceToSquared(az));if(r)for(let u=0,c=r.length;u<c;u++){let c=r[u],h=this.morphTargetsRelative;for(let r=0,u=c.count;r<u;r++)az.fromBufferAttribute(c,r),h&&(aB.fromBufferAttribute(t,r),az.add(aB)),s=Math.max(s,i.distanceToSquared(az))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)}}computeTangents(){let t=this.index,r=this.attributes;if(null===t||void 0===r.position||void 0===r.normal||void 0===r.uv)return;let i=r.position,s=r.normal,u=r.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new aS(new Float32Array(4*i.count),4));let c=this.getAttribute("tangent"),h=[],p=[];for(let t=0;t<i.count;t++)h[t]=new r8,p[t]=new r8;let f=new r8,v=new r8,y=new r8,x=new rD,_=new rD,b=new rD,w=new r8,S=new r8,M=this.groups;0===M.length&&(M=[{start:0,count:t.count}]);for(let r=0,s=M.length;r<s;++r){let s=M[r],c=s.start,A=s.count;for(let r=c,s=c+A;r<s;r+=3)!function(t,r,s){f.fromBufferAttribute(i,t),v.fromBufferAttribute(i,r),y.fromBufferAttribute(i,s),x.fromBufferAttribute(u,t),_.fromBufferAttribute(u,r),b.fromBufferAttribute(u,s),v.sub(f),y.sub(f),_.sub(x),b.sub(x);let c=1/(_.x*b.y-b.x*_.y);isFinite(c)&&(w.copy(v).multiplyScalar(b.y).addScaledVector(y,-_.y).multiplyScalar(c),S.copy(y).multiplyScalar(_.x).addScaledVector(v,-b.x).multiplyScalar(c),h[t].add(w),h[r].add(w),h[s].add(w),p[t].add(S),p[r].add(S),p[s].add(S))}(t.getX(r+0),t.getX(r+1),t.getX(r+2))}let A=new r8,C=new r8,T=new r8,I=new r8;function D(t){T.fromBufferAttribute(s,t),I.copy(T);let r=h[t];A.copy(r),A.sub(T.multiplyScalar(T.dot(r))).normalize(),C.crossVectors(I,r);let i=C.dot(p[t]);c.setXYZW(t,A.x,A.y,A.z,i<0?-1:1)}for(let r=0,i=M.length;r<i;++r){let i=M[r],s=i.start,u=i.count;for(let r=s,i=s+u;r<i;r+=3)D(t.getX(r+0)),D(t.getX(r+1)),D(t.getX(r+2))}}computeVertexNormals(){let t=this.index,r=this.getAttribute("position");if(void 0!==r){let i=this.getAttribute("normal");if(void 0===i)i=new aS(new Float32Array(3*r.count),3),this.setAttribute("normal",i);else for(let t=0,r=i.count;t<r;t++)i.setXYZ(t,0,0,0);let s=new r8,u=new r8,c=new r8,h=new r8,p=new r8,f=new r8,v=new r8,y=new r8;if(t)for(let x=0,_=t.count;x<_;x+=3){let _=t.getX(x+0),b=t.getX(x+1),w=t.getX(x+2);s.fromBufferAttribute(r,_),u.fromBufferAttribute(r,b),c.fromBufferAttribute(r,w),v.subVectors(c,u),y.subVectors(s,u),v.cross(y),h.fromBufferAttribute(i,_),p.fromBufferAttribute(i,b),f.fromBufferAttribute(i,w),h.add(v),p.add(v),f.add(v),i.setXYZ(_,h.x,h.y,h.z),i.setXYZ(b,p.x,p.y,p.z),i.setXYZ(w,f.x,f.y,f.z)}else for(let t=0,h=r.count;t<h;t+=3)s.fromBufferAttribute(r,t+0),u.fromBufferAttribute(r,t+1),c.fromBufferAttribute(r,t+2),v.subVectors(c,u),y.subVectors(s,u),v.cross(y),i.setXYZ(t+0,v.x,v.y,v.z),i.setXYZ(t+1,v.x,v.y,v.z),i.setXYZ(t+2,v.x,v.y,v.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let t=this.attributes.normal;for(let r=0,i=t.count;r<i;r++)az.fromBufferAttribute(t,r),az.normalize(),t.setXYZ(r,az.x,az.y,az.z)}toNonIndexed(){function t(t,r){let i=t.array,s=t.itemSize,u=t.normalized,c=new i.constructor(r.length*s),h=0,p=0;for(let u=0,f=r.length;u<f;u++){h=t.isInterleavedBufferAttribute?r[u]*t.data.stride+t.offset:r[u]*s;for(let t=0;t<s;t++)c[p++]=i[h++]}return new aS(c,s,u)}if(null===this.index)return this;let r=new aU,i=this.index.array,s=this.attributes;for(let u in s){let c=t(s[u],i);r.setAttribute(u,c)}let u=this.morphAttributes;for(let s in u){let c=[],h=u[s];for(let r=0,s=h.length;r<s;r++){let s=t(h[r],i);c.push(s)}r.morphAttributes[s]=c}r.morphTargetsRelative=this.morphTargetsRelative;let c=this.groups;for(let t=0,i=c.length;t<i;t++){let i=c[t];r.addGroup(i.start,i.count,i.materialIndex)}return r}toJSON(){let t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){let r=this.parameters;for(let i in r)void 0!==r[i]&&(t[i]=r[i]);return t}t.data={attributes:{}};let r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});let i=this.attributes;for(let r in i){let s=i[r];t.data.attributes[r]=s.toJSON(t.data)}let s={},u=!1;for(let r in this.morphAttributes){let i=this.morphAttributes[r],c=[];for(let r=0,s=i.length;r<s;r++){let s=i[r];c.push(s.toJSON(t.data))}c.length>0&&(s[r]=c,u=!0)}u&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);let c=this.groups;c.length>0&&(t.data.groups=JSON.parse(JSON.stringify(c)));let h=this.boundingSphere;return null!==h&&(t.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let r={};this.name=t.name;let i=t.index;null!==i&&this.setIndex(i.clone(r));let s=t.attributes;for(let t in s){let i=s[t];this.setAttribute(t,i.clone(r))}let u=t.morphAttributes;for(let t in u){let i=[],s=u[t];for(let t=0,u=s.length;t<u;t++)i.push(s[t].clone(r));this.morphAttributes[t]=i}this.morphTargetsRelative=t.morphTargetsRelative;let c=t.groups;for(let t=0,r=c.length;t<r;t++){let r=c[t];this.addGroup(r.start,r.count,r.materialIndex)}let h=t.boundingBox;null!==h&&(this.boundingBox=h.clone());let p=t.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}let aH=new iD,aG=new iI,aV=new ib,aW=new r8,aj=new r8,aX=new r8,aY=new r8,a$=new r8,aJ=new r8,aZ=new r8,aK=new r8;class aq extends i3{constructor(t=new aU,r=new am){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=r,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){let i=t[r[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,r=i.length;t<r;t++){let r=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}}}getVertexPosition(t,r){let i=this.geometry,s=i.attributes.position,u=i.morphAttributes.position,c=i.morphTargetsRelative;r.fromBufferAttribute(s,t);let h=this.morphTargetInfluences;if(u&&h){aJ.set(0,0,0);for(let i=0,s=u.length;i<s;i++){let s=h[i],p=u[i];0!==s&&(a$.fromBufferAttribute(p,t),c?aJ.addScaledVector(a$,s):aJ.addScaledVector(a$.sub(r),s))}r.add(aJ)}return r}raycast(t,r){let i=this.geometry,s=this.material,u=this.matrixWorld;if(void 0!==s){if(null===i.boundingSphere&&i.computeBoundingSphere(),aV.copy(i.boundingSphere),aV.applyMatrix4(u),aG.copy(t.ray).recast(t.near),!1===aV.containsPoint(aG.origin)&&(null===aG.intersectSphere(aV,aW)||aG.origin.distanceToSquared(aW)>(t.far-t.near)**2))return;if(aH.copy(u).invert(),aG.copy(t.ray).applyMatrix4(aH),null!==i.boundingBox&&!1===aG.intersectsBox(i.boundingBox))return;this._computeIntersections(t,r,aG)}}_computeIntersections(t,r,i){let s;let u=this.geometry,c=this.material,h=u.index,p=u.attributes.position,f=u.attributes.uv,v=u.attributes.uv1,y=u.attributes.normal,x=u.groups,_=u.drawRange;if(null!==h){if(Array.isArray(c))for(let u=0,p=x.length;u<p;u++){let p=x[u],b=c[p.materialIndex],w=Math.max(p.start,_.start),S=Math.min(h.count,Math.min(p.start+p.count,_.start+_.count));for(let u=w;u<S;u+=3){let c=h.getX(u),x=h.getX(u+1);(s=aQ(this,b,t,i,f,v,y,c,x,h.getX(u+2)))&&(s.faceIndex=Math.floor(u/3),s.face.materialIndex=p.materialIndex,r.push(s))}}else{let u=Math.max(0,_.start),p=Math.min(h.count,_.start+_.count);for(let x=u;x<p;x+=3){let u=h.getX(x),p=h.getX(x+1);(s=aQ(this,c,t,i,f,v,y,u,p,h.getX(x+2)))&&(s.faceIndex=Math.floor(x/3),r.push(s))}}}else if(void 0!==p){if(Array.isArray(c))for(let u=0,h=x.length;u<h;u++){let h=x[u],b=c[h.materialIndex],w=Math.max(h.start,_.start),S=Math.min(p.count,Math.min(h.start+h.count,_.start+_.count));for(let u=w;u<S;u+=3)(s=aQ(this,b,t,i,f,v,y,u,u+1,u+2))&&(s.faceIndex=Math.floor(u/3),s.face.materialIndex=h.materialIndex,r.push(s))}else{let u=Math.max(0,_.start),h=Math.min(p.count,_.start+_.count);for(let p=u;p<h;p+=3)(s=aQ(this,c,t,i,f,v,y,p,p+1,p+2))&&(s.faceIndex=Math.floor(p/3),r.push(s))}}}}function aQ(t,r,i,s,u,c,h,p,f,v){t.getVertexPosition(p,aj),t.getVertexPosition(f,aX),t.getVertexPosition(v,aY);let y=function(t,r,i,s,u,c,h,p){let f;if(null===(f=r.side===eS?s.intersectTriangle(h,c,u,!0,p):s.intersectTriangle(u,c,h,r.side===ew,p)))return null;aK.copy(p),aK.applyMatrix4(t.matrixWorld);let v=i.ray.origin.distanceTo(aK);return v<i.near||v>i.far?null:{distance:v,point:aK.clone(),object:t}}(t,r,i,s,aj,aX,aY,aZ);if(y){let t=new r8;as.getBarycoord(aZ,aj,aX,aY,t),u&&(y.uv=as.getInterpolatedAttribute(u,p,f,v,t,new rD)),c&&(y.uv1=as.getInterpolatedAttribute(c,p,f,v,t,new rD)),h&&(y.normal=as.getInterpolatedAttribute(h,p,f,v,t,new r8),y.normal.dot(s.direction)>0&&y.normal.multiplyScalar(-1));let r={a:p,b:f,c:v,normal:new r8,materialIndex:0};as.getNormal(aj,aX,aY,r.normal),y.face=r,y.barycoord=t}return y}class a0 extends aU{constructor(t=1,r=1,i=1,s=1,u=1,c=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:r,depth:i,widthSegments:s,heightSegments:u,depthSegments:c};let h=this;s=Math.floor(s),u=Math.floor(u);let p=[],f=[],v=[],y=[],x=0,_=0;function b(t,r,i,s,u,c,b,w,S,M,A){let C=c/S,T=b/M,I=c/2,D=b/2,P=w/2,R=S+1,L=M+1,k=0,O=0,B=new r8;for(let c=0;c<L;c++){let h=c*T-D;for(let p=0;p<R;p++){let x=p*C-I;B[t]=x*s,B[r]=h*u,B[i]=P,f.push(B.x,B.y,B.z),B[t]=0,B[r]=0,B[i]=w>0?1:-1,v.push(B.x,B.y,B.z),y.push(p/S),y.push(1-c/M),k+=1}}for(let t=0;t<M;t++)for(let r=0;r<S;r++){let i=x+r+R*t,s=x+r+R*(t+1),u=x+(r+1)+R*(t+1),c=x+(r+1)+R*t;p.push(i,s,c),p.push(s,u,c),O+=6}h.addGroup(_,O,A),_+=O,x+=k}b("z","y","x",-1,-1,i,r,t,c=Math.floor(c),u,0),b("z","y","x",1,-1,i,r,-t,c,u,1),b("x","z","y",1,1,t,i,r,s,c,2),b("x","z","y",1,-1,t,i,-r,s,c,3),b("x","y","z",1,-1,t,r,i,s,u,4),b("x","y","z",-1,-1,t,r,-i,s,u,5),this.setIndex(p),this.setAttribute("position",new aR(f,3)),this.setAttribute("normal",new aR(v,3)),this.setAttribute("uv",new aR(y,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new a0(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function a1(t){let r={};for(let i in t)for(let s in r[i]={},t[i]){let u=t[i][s];u&&(u.isColor||u.isMatrix3||u.isMatrix4||u.isVector2||u.isVector3||u.isVector4||u.isTexture||u.isQuaternion)?u.isRenderTargetTexture?r[i][s]=null:r[i][s]=u.clone():Array.isArray(u)?r[i][s]=u.slice():r[i][s]=u}return r}function a2(t){let r={};for(let i=0;i<t.length;i++){let s=a1(t[i]);for(let t in s)r[t]=s[t]}return r}function a3(t){let r=t.getRenderTarget();return null===r?t.outputColorSpace:!0===r.isXRRenderTarget?r.texture.colorSpace:rU.workingColorSpace}let a5={clone:a1,merge:a2};class a4 extends ag{static get type(){return"ShaderMaterial"}constructor(t){super(),this.isShaderMaterial=!0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=a1(t.uniforms),this.uniformsGroups=function(t){let r=[];for(let i=0;i<t.length;i++)r.push(t[i].clone());return r}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let r=super.toJSON(t);for(let i in r.glslVersion=this.glslVersion,r.uniforms={},this.uniforms){let s=this.uniforms[i].value;s&&s.isTexture?r.uniforms[i]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?r.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?r.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?r.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?r.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?r.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?r.uniforms[i]={type:"m4",value:s.toArray()}:r.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,r.lights=this.lights,r.clipping=this.clipping;let i={};for(let t in this.extensions)!0===this.extensions[t]&&(i[t]=!0);return Object.keys(i).length>0&&(r.extensions=i),r}}class a6 extends i3{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new iD,this.projectionMatrix=new iD,this.projectionMatrixInverse=new iD,this.coordinateSystem=rm}copy(t,r){return super.copy(t,r),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,r){super.updateWorldMatrix(t,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let a9=new r8,a8=new rD,a7=new rD;class oe extends a6{constructor(t=50,r=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let r=.5*this.getFilmHeight()/t;this.fov=2*rw*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(.5*rb*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*rw*Math.atan(Math.tan(.5*rb*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,r,i){a9.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(a9.x,a9.y).multiplyScalar(-t/a9.z),a9.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(a9.x,a9.y).multiplyScalar(-t/a9.z)}getViewSize(t,r){return this.getViewBounds(t,a8,a7),r.subVectors(a7,a8)}setViewOffset(t,r,i,s,u,c){this.aspect=t/r,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=i,this.view.offsetY=s,this.view.width=u,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,r=t*Math.tan(.5*rb*this.fov)/this.zoom,i=2*r,s=this.aspect*i,u=-.5*s,c=this.view;if(null!==this.view&&this.view.enabled){let t=c.fullWidth,h=c.fullHeight;u+=c.offsetX*s/t,r-=c.offsetY*i/h,s*=c.width/t,i*=c.height/h}let h=this.filmOffset;0!==h&&(u+=t*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(u,u+s,r,r-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let r=super.toJSON(t);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,null!==this.view&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}class ot extends i3{constructor(t,r,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let s=new oe(-90,1,t,r);s.layers=this.layers,this.add(s);let u=new oe(-90,1,t,r);u.layers=this.layers,this.add(u);let c=new oe(-90,1,t,r);c.layers=this.layers,this.add(c);let h=new oe(-90,1,t,r);h.layers=this.layers,this.add(h);let p=new oe(-90,1,t,r);p.layers=this.layers,this.add(p);let f=new oe(-90,1,t,r);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){let t=this.coordinateSystem,r=this.children.concat(),[i,s,u,c,h,p]=r;for(let t of r)this.remove(t);if(t===rm)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),u.up.set(0,0,-1),u.lookAt(0,1,0),c.up.set(0,0,1),c.lookAt(0,-1,0),h.up.set(0,1,0),h.lookAt(0,0,1),p.up.set(0,1,0),p.lookAt(0,0,-1);else if(t===rv)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),u.up.set(0,0,1),u.lookAt(0,1,0),c.up.set(0,0,-1),c.lookAt(0,-1,0),h.up.set(0,-1,0),h.lookAt(0,0,1),p.up.set(0,-1,0),p.lookAt(0,0,-1);else throw Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(let t of r)this.add(t),t.updateMatrixWorld()}update(t,r){null===this.parent&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());let[u,c,h,p,f,v]=this.children,y=t.getRenderTarget(),x=t.getActiveCubeFace(),_=t.getActiveMipmapLevel(),b=t.xr.enabled;t.xr.enabled=!1;let w=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,s),t.render(r,u),t.setRenderTarget(i,1,s),t.render(r,c),t.setRenderTarget(i,2,s),t.render(r,h),t.setRenderTarget(i,3,s),t.render(r,p),t.setRenderTarget(i,4,s),t.render(r,f),i.texture.generateMipmaps=w,t.setRenderTarget(i,5,s),t.render(r,v),t.setRenderTarget(y,x,_),t.xr.enabled=b,i.texture.needsPMREMUpdate=!0}}class on extends rQ{constructor(t,r,i,s,u,c,h,p,f,v){super(t=void 0!==t?t:[],r=void 0!==r?r:tu,i,s,u,c,h,p,f,v),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class or extends r2{constructor(t=1,r={}){super(t,t,r),this.isWebGLCubeRenderTarget=!0;let i={width:t,height:t,depth:1};this.texture=new on([i,i,i,i,i,i],r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:tw}fromEquirectangularTexture(t,r){this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new a0(5,5,5),u=new a4({name:"CubemapFromEquirect",uniforms:a1(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:eS,blending:eA});u.uniforms.tEquirect.value=r;let c=new aq(s,u),h=r.minFilter;return r.minFilter===tA&&(r.minFilter=tw),new ot(1,10,this).update(t,c),r.minFilter=h,c.geometry.dispose(),c.material.dispose(),this}clear(t,r,i,s){let u=t.getRenderTarget();for(let u=0;u<6;u++)t.setRenderTarget(this,u),t.clear(r,i,s);t.setRenderTarget(u)}}let oi=new r8,oa=new r8,oo=new rP;class os{constructor(t=new r8(1,0,0),r=0){this.isPlane=!0,this.normal=t,this.constant=r}set(t,r){return this.normal.copy(t),this.constant=r,this}setComponents(t,r,i,s){return this.normal.set(t,r,i),this.constant=s,this}setFromNormalAndCoplanarPoint(t,r){return this.normal.copy(t),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(t,r,i){let s=oi.subVectors(i,r).cross(oa.subVectors(t,r)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,r){return r.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,r){let i=t.delta(oi),s=this.normal.dot(i);if(0===s)return 0===this.distanceToPoint(t.start)?r.copy(t.start):null;let u=-(t.start.dot(this.normal)+this.constant)/s;return u<0||u>1?null:r.copy(t.start).addScaledVector(i,u)}intersectsLine(t){let r=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return r<0&&i>0||i<0&&r>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,r){let i=r||oo.getNormalMatrix(t),s=this.coplanarPoint(oi).applyMatrix4(t),u=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(u),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}let ol=new ib,ou=new r8;class oc{constructor(t=new os,r=new os,i=new os,s=new os,u=new os,c=new os){this.planes=[t,r,i,s,u,c]}set(t,r,i,s,u,c){let h=this.planes;return h[0].copy(t),h[1].copy(r),h[2].copy(i),h[3].copy(s),h[4].copy(u),h[5].copy(c),this}copy(t){let r=this.planes;for(let i=0;i<6;i++)r[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,r=rm){let i=this.planes,s=t.elements,u=s[0],c=s[1],h=s[2],p=s[3],f=s[4],v=s[5],y=s[6],x=s[7],_=s[8],b=s[9],w=s[10],S=s[11],M=s[12],A=s[13],C=s[14],T=s[15];if(i[0].setComponents(p-u,x-f,S-_,T-M).normalize(),i[1].setComponents(p+u,x+f,S+_,T+M).normalize(),i[2].setComponents(p+c,x+v,S+b,T+A).normalize(),i[3].setComponents(p-c,x-v,S-b,T-A).normalize(),i[4].setComponents(p-h,x-y,S-w,T-C).normalize(),r===rm)i[5].setComponents(p+h,x+y,S+w,T+C).normalize();else if(r===rv)i[5].setComponents(h,y,w,C).normalize();else throw Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+r);return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),ol.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{let r=t.geometry;null===r.boundingSphere&&r.computeBoundingSphere(),ol.copy(r.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(ol)}intersectsSprite(t){return ol.center.set(0,0,0),ol.radius=.7071067811865476,ol.applyMatrix4(t.matrixWorld),this.intersectsSphere(ol)}intersectsSphere(t){let r=this.planes,i=t.center,s=-t.radius;for(let t=0;t<6;t++)if(r[t].distanceToPoint(i)<s)return!1;return!0}intersectsBox(t){let r=this.planes;for(let i=0;i<6;i++){let s=r[i];if(ou.x=s.normal.x>0?t.max.x:t.min.x,ou.y=s.normal.y>0?t.max.y:t.min.y,ou.z=s.normal.z>0?t.max.z:t.min.z,0>s.distanceToPoint(ou))return!1}return!0}containsPoint(t){let r=this.planes;for(let i=0;i<6;i++)if(0>r[i].distanceToPoint(t))return!1;return!0}clone(){return new this.constructor().copy(this)}}function oh(){let t=null,r=!1,i=null,s=null;function u(r,c){i(r,c),s=t.requestAnimationFrame(u)}return{start:function(){if(!0!==r)null!==i&&(s=t.requestAnimationFrame(u),r=!0)},stop:function(){t.cancelAnimationFrame(s),r=!1},setAnimationLoop:function(t){i=t},setContext:function(r){t=r}}}function od(t){let r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(i){i.isInterleavedBufferAttribute&&(i=i.data);let s=r.get(i);s&&(t.deleteBuffer(s.buffer),r.delete(i))},update:function(i,s){if(i.isInterleavedBufferAttribute&&(i=i.data),i.isGLBufferAttribute){let t=r.get(i);(!t||t.version<i.version)&&r.set(i,{buffer:i.buffer,type:i.type,bytesPerElement:i.elementSize,version:i.version});return}let u=r.get(i);if(void 0===u)r.set(i,function(r,i){let s;let u=r.array,c=r.usage,h=u.byteLength,p=t.createBuffer();if(t.bindBuffer(i,p),t.bufferData(i,u,c),r.onUploadCallback(),u instanceof Float32Array)s=t.FLOAT;else if(u instanceof Uint16Array)s=r.isFloat16BufferAttribute?t.HALF_FLOAT:t.UNSIGNED_SHORT;else if(u instanceof Int16Array)s=t.SHORT;else if(u instanceof Uint32Array)s=t.UNSIGNED_INT;else if(u instanceof Int32Array)s=t.INT;else if(u instanceof Int8Array)s=t.BYTE;else if(u instanceof Uint8Array)s=t.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)s=t.UNSIGNED_BYTE;else throw Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:p,type:s,bytesPerElement:u.BYTES_PER_ELEMENT,version:r.version,size:h}}(i,s));else if(u.version<i.version){if(u.size!==i.array.byteLength)throw Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(r,i,s){let u=i.array,c=i.updateRanges;if(t.bindBuffer(s,r),0===c.length)t.bufferSubData(s,0,u);else{c.sort((t,r)=>t.start-r.start);let r=0;for(let t=1;t<c.length;t++){let i=c[r],s=c[t];s.start<=i.start+i.count+1?i.count=Math.max(i.count,s.start+s.count-i.start):c[++r]=s}c.length=r+1;for(let r=0,i=c.length;r<i;r++){let i=c[r];t.bufferSubData(s,i.start*u.BYTES_PER_ELEMENT,u,i.start,i.count)}i.clearUpdateRanges()}i.onUploadCallback()}(u.buffer,i,s),u.version=i.version}}}}class op extends aU{constructor(t=1,r=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:r,widthSegments:i,heightSegments:s};let u=t/2,c=r/2,h=Math.floor(i),p=Math.floor(s),f=h+1,v=p+1,y=t/h,x=r/p,_=[],b=[],w=[],S=[];for(let t=0;t<v;t++){let r=t*x-c;for(let i=0;i<f;i++){let s=i*y-u;b.push(s,-r,0),w.push(0,0,1),S.push(i/h),S.push(1-t/p)}}for(let t=0;t<p;t++)for(let r=0;r<h;r++){let i=r+f*t,s=r+f*(t+1),u=r+1+f*(t+1),c=r+1+f*t;_.push(i,s,c),_.push(s,u,c)}this.setIndex(_),this.setAttribute("position",new aR(b,3)),this.setAttribute("normal",new aR(w,3)),this.setAttribute("uv",new aR(S,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new op(t.width,t.height,t.widthSegments,t.heightSegments)}}let of={alphahash_fragment:"#ifdef USE_ALPHAHASH\n	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n	const float ALPHA_HASH_SCALE = 0.05;\n	float hash2D( vec2 value ) {\n		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n	}\n	float hash3D( vec3 value ) {\n		return hash2D( vec2( hash2D( value.xy ), value.z ) );\n	}\n	float getAlphaHashThreshold( vec3 position ) {\n		float maxDeriv = max(\n			length( dFdx( position.xyz ) ),\n			length( dFdy( position.xyz ) )\n		);\n		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n		vec2 pixScales = vec2(\n			exp2( floor( log2( pixScale ) ) ),\n			exp2( ceil( log2( pixScale ) ) )\n		);\n		vec2 alpha = vec2(\n			hash3D( floor( pixScales.x * position.xyz ) ),\n			hash3D( floor( pixScales.y * position.xyz ) )\n		);\n		float lerpFactor = fract( log2( pixScale ) );\n		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n		float a = min( lerpFactor, 1.0 - lerpFactor );\n		vec3 cases = vec3(\n			x * x / ( 2.0 * a * ( 1.0 - a ) ),\n			( x - 0.5 * a ) / ( 1.0 - a ),\n			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n		);\n		float threshold = ( x < ( 1.0 - a ) )\n			? ( ( x < a ) ? cases.x : cases.y )\n			: cases.z;\n		return clamp( threshold , 1.0e-6, 1.0 );\n	}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n	#ifdef ALPHA_TO_COVERAGE\n	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n	if ( diffuseColor.a == 0.0 ) discard;\n	#else\n	if ( diffuseColor.a < alphaTest ) discard;\n	#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n	uniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_CLEARCOAT ) \n		clearcoatSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_SHEEN ) \n		sheenSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD )\n		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n	#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n	#if ! defined( GL_ANGLE_multi_draw )\n	#define gl_DrawID _gl_DrawID\n	uniform int _gl_DrawID;\n	#endif\n	uniform highp sampler2D batchingTexture;\n	uniform highp usampler2D batchingIdTexture;\n	mat4 getBatchingMatrix( const in float i ) {\n		int size = textureSize( batchingTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n	float getIndirectIndex( const in int i ) {\n		int size = textureSize( batchingIdTexture, 0 ).x;\n		int x = i % size;\n		int y = i / size;\n		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n	}\n#endif\n#ifdef USE_BATCHING_COLOR\n	uniform sampler2D batchingColorTexture;\n	vec3 getBatchingColor( const in float i ) {\n		int size = textureSize( batchingColorTexture, 0 ).x;\n		int j = int( i );\n		int x = j % size;\n		int y = j / size;\n		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n	}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n	vPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n	vec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( specularColor, 1.0, dotVH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n	const mat3 XYZ_TO_REC709 = mat3(\n		 3.2404542, -0.9692660,  0.0556434,\n		-1.5371385,  1.8760108, -0.2040259,\n		-0.4985314,  0.0415560,  1.0572252\n	);\n	vec3 Fresnel0ToIor( vec3 fresnel0 ) {\n		vec3 sqrtF0 = sqrt( fresnel0 );\n		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n	}\n	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n	}\n	float IorToFresnel0( float transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n	}\n	vec3 evalSensitivity( float OPD, vec3 shift ) {\n		float phase = 2.0 * PI * OPD * 1.0e-9;\n		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n		xyz /= 1.0685e-7;\n		vec3 rgb = XYZ_TO_REC709 * xyz;\n		return rgb;\n	}\n	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n		vec3 I;\n		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n		float cosTheta2Sq = 1.0 - sinTheta2Sq;\n		if ( cosTheta2Sq < 0.0 ) {\n			return vec3( 1.0 );\n		}\n		float cosTheta2 = sqrt( cosTheta2Sq );\n		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n		float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n		float T121 = 1.0 - R12;\n		float phi12 = 0.0;\n		if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n		float phi21 = PI - phi12;\n		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n		vec3 phi23 = vec3( 0.0 );\n		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n		vec3 phi = vec3( phi21 ) + phi23;\n		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n		vec3 r123 = sqrt( R123 );\n		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n		vec3 C0 = R12 + Rs;\n		I = C0;\n		vec3 Cm = Rs - T121;\n		for ( int m = 1; m <= 2; ++ m ) {\n			Cm *= r123;\n			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n			I += Cm * Sm;\n		}\n		return max( I, vec3( 0.0 ) );\n	}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vBumpMapUv );\n		vec2 dSTdy = dFdy( vBumpMapUv );\n		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 ) * faceDirection;\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#ifdef ALPHA_TO_COVERAGE\n		float distanceToPlane, distanceGradient;\n		float clipOpacity = 1.0;\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n			distanceGradient = fwidth( distanceToPlane ) / 2.0;\n			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			if ( clipOpacity == 0.0 ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			float unionClipOpacity = 1.0;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n				distanceGradient = fwidth( distanceToPlane ) / 2.0;\n				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			}\n			#pragma unroll_loop_end\n			clipOpacity *= 1.0 - unionClipOpacity;\n		#endif\n		diffuseColor.a *= clipOpacity;\n		if ( diffuseColor.a == 0.0 ) discard;\n	#else\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			bool clipped = true;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n			}\n			#pragma unroll_loop_end\n			if ( clipped ) discard;\n		#endif\n	#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n	vClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n	diffuseColor *= vColor;\n#elif defined( USE_COLOR )\n	diffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR )\n	varying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	varying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n	vColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	vColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n	vColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n	vColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n	vColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n	float precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n	float precisionSafeLength( vec3 v ) {\n		float maxComponent = max3( abs( v ) );\n		return length( v / maxComponent ) * maxComponent;\n	}\n#endif\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n	varying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n	mat3 tmp;\n	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n	return tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n	return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	return vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n	#define cubeUV_minMipLevel 4.0\n	#define cubeUV_minTileSize 16.0\n	float getFace( vec3 direction ) {\n		vec3 absDirection = abs( direction );\n		float face = - 1.0;\n		if ( absDirection.x > absDirection.z ) {\n			if ( absDirection.x > absDirection.y )\n				face = direction.x > 0.0 ? 0.0 : 3.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		} else {\n			if ( absDirection.z > absDirection.y )\n				face = direction.z > 0.0 ? 2.0 : 5.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		}\n		return face;\n	}\n	vec2 getUV( vec3 direction, float face ) {\n		vec2 uv;\n		if ( face == 0.0 ) {\n			uv = vec2( direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 1.0 ) {\n			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n		} else if ( face == 2.0 ) {\n			uv = vec2( - direction.x, direction.y ) / abs( direction.z );\n		} else if ( face == 3.0 ) {\n			uv = vec2( - direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 4.0 ) {\n			uv = vec2( - direction.x, direction.z ) / abs( direction.y );\n		} else {\n			uv = vec2( direction.x, direction.y ) / abs( direction.z );\n		}\n		return 0.5 * ( uv + 1.0 );\n	}\n	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n		float face = getFace( direction );\n		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n		mipInt = max( mipInt, cubeUV_minMipLevel );\n		float faceSize = exp2( mipInt );\n		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n		if ( face > 2.0 ) {\n			uv.y += faceSize;\n			face -= 3.0;\n		}\n		uv.x += face * faceSize;\n		uv.x += filterInt * 3.0 * cubeUV_minTileSize;\n		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n		uv.x *= CUBEUV_TEXEL_WIDTH;\n		uv.y *= CUBEUV_TEXEL_HEIGHT;\n		#ifdef texture2DGradEXT\n			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n		#else\n			return texture2D( envMap, uv ).rgb;\n		#endif\n	}\n	#define cubeUV_r0 1.0\n	#define cubeUV_m0 - 2.0\n	#define cubeUV_r1 0.8\n	#define cubeUV_m1 - 1.0\n	#define cubeUV_r4 0.4\n	#define cubeUV_m4 2.0\n	#define cubeUV_r5 0.305\n	#define cubeUV_m5 3.0\n	#define cubeUV_r6 0.21\n	#define cubeUV_m6 4.0\n	float roughnessToMip( float roughness ) {\n		float mip = 0.0;\n		if ( roughness >= cubeUV_r1 ) {\n			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n		} else if ( roughness >= cubeUV_r4 ) {\n			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n		} else if ( roughness >= cubeUV_r5 ) {\n			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n		} else if ( roughness >= cubeUV_r6 ) {\n			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n		} else {\n			mip = - 2.0 * log2( 1.16 * roughness );		}\n		return mip;\n	}\n	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n		float mipF = fract( mip );\n		float mipInt = floor( mip );\n		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n		if ( mipF == 0.0 ) {\n			return vec4( color0, 1.0 );\n		} else {\n			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n			return vec4( mix( color0, color1, mipF ), 1.0 );\n		}\n	}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n	vec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n	mat3 bm = mat3( batchingMatrix );\n	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n	transformedNormal = bm * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = bm * transformedTangent;\n	#endif\n#endif\n#ifdef USE_INSTANCING\n	mat3 im = mat3( instanceMatrix );\n	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n	transformedNormal = im * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = im * transformedTangent;\n	#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n	#ifdef FLIP_SIDED\n		transformedTangent = - transformedTangent;\n	#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n		emissiveColor = sRGBTransferEOTF( emissiveColor );\n	#endif\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n	return value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vec3 cameraToFrag;\n		if ( isOrthographic ) {\n			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToFrag = normalize( vWorldPosition - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToFrag, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float envMapIntensity;\n	uniform float flipEnvMap;\n	uniform mat3 envMapRotation;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float reflectivity;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		varying vec3 vWorldPosition;\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n	vec3 getIBLIrradiance( const in vec3 normal ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n			return PI * envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 reflectVec = reflect( - viewDir, normal );\n			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n			return envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	#ifdef USE_ANISOTROPY\n		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n			#ifdef ENVMAP_TYPE_CUBE_UV\n				vec3 bentNormal = cross( bitangent, viewDir );\n				bentNormal = normalize( cross( bentNormal, bitangent ) );\n				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n				return getIBLRadiance( viewDir, bentNormal, roughness );\n			#else\n				return vec3( 0.0 );\n			#endif\n		}\n	#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex;\n		if ( isOrthographic ) {\n			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n	vFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n	varying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float vFogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n	uniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n	float dotNL = dot( normal, lightDirection );\n	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n	#ifdef USE_GRADIENTMAP\n		return vec3( texture2D( gradientMap, coord ).r );\n	#else\n		vec2 fw = fwidth( coord ) * 0.5;\n		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n	#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n	vec3 diffuseColor;\n	float specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Lambert\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n	uniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n	float x = normal.x, y = normal.y, z = normal.z;\n	vec3 result = shCoefficients[ 0 ] * 0.886227;\n	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n	return result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n	return irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	return irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n	if ( cutoffDistance > 0.0 ) {\n		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n	}\n	return distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n	return smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n		light.color = directionalLight.color;\n		light.direction = directionalLight.direction;\n		light.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = pointLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		light.color = pointLight.color;\n		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n		light.visible = ( light.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = spotLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float angleCos = dot( light.direction, spotLight.direction );\n		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n		if ( spotAttenuation > 0.0 ) {\n			float lightDistance = length( lVector );\n			light.color = spotLight.color * spotAttenuation;\n			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n			light.visible = ( light.color != vec3( 0.0 ) );\n		} else {\n			light.color = vec3( 0.0 );\n			light.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n		float dotNL = dot( normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		return irradiance;\n	}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n	vec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Toon\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n	vec3 diffuseColor;\n	vec3 specularColor;\n	float specularShininess;\n	float specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n	material.ior = ior;\n	#ifdef USE_SPECULAR\n		float specularIntensityFactor = specularIntensity;\n		vec3 specularColorFactor = specularColor;\n		#ifdef USE_SPECULAR_COLORMAP\n			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n		#endif\n		#ifdef USE_SPECULAR_INTENSITYMAP\n			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n		#endif\n		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n	#else\n		float specularIntensityFactor = 1.0;\n		vec3 specularColorFactor = vec3( 1.0 );\n		material.specularF90 = 1.0;\n	#endif\n	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n	material.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n	material.clearcoat = clearcoat;\n	material.clearcoatRoughness = clearcoatRoughness;\n	material.clearcoatF0 = vec3( 0.04 );\n	material.clearcoatF90 = 1.0;\n	#ifdef USE_CLEARCOATMAP\n		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n	#endif\n	#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n	#endif\n	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n	material.clearcoatRoughness += geometryRoughness;\n	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n	material.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	material.iridescence = iridescence;\n	material.iridescenceIOR = iridescenceIOR;\n	#ifdef USE_IRIDESCENCEMAP\n		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n	#endif\n	#ifdef USE_IRIDESCENCE_THICKNESSMAP\n		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n	#else\n		material.iridescenceThickness = iridescenceThicknessMaximum;\n	#endif\n#endif\n#ifdef USE_SHEEN\n	material.sheenColor = sheenColor;\n	#ifdef USE_SHEEN_COLORMAP\n		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n	#endif\n	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	#ifdef USE_ANISOTROPYMAP\n		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n	#else\n		vec2 anisotropyV = anisotropyVector;\n	#endif\n	material.anisotropy = length( anisotropyV );\n	if( material.anisotropy == 0.0 ) {\n		anisotropyV = vec2( 1.0, 0.0 );\n	} else {\n		anisotropyV /= material.anisotropy;\n		material.anisotropy = saturate( material.anisotropy );\n	}\n	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n	vec3 diffuseColor;\n	float roughness;\n	vec3 specularColor;\n	float specularF90;\n	float dispersion;\n	#ifdef USE_CLEARCOAT\n		float clearcoat;\n		float clearcoatRoughness;\n		vec3 clearcoatF0;\n		float clearcoatF90;\n	#endif\n	#ifdef USE_IRIDESCENCE\n		float iridescence;\n		float iridescenceIOR;\n		float iridescenceThickness;\n		vec3 iridescenceFresnel;\n		vec3 iridescenceF0;\n	#endif\n	#ifdef USE_SHEEN\n		vec3 sheenColor;\n		float sheenRoughness;\n	#endif\n	#ifdef IOR\n		float ior;\n	#endif\n	#ifdef USE_TRANSMISSION\n		float transmission;\n		float transmissionAlpha;\n		float thickness;\n		float attenuationDistance;\n		vec3 attenuationColor;\n	#endif\n	#ifdef USE_ANISOTROPY\n		float anisotropy;\n		float alphaT;\n		vec3 anisotropyT;\n		vec3 anisotropyB;\n	#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n		float v = 0.5 / ( gv + gl );\n		return saturate(v);\n	}\n	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n		float a2 = alphaT * alphaB;\n		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n		highp float v2 = dot( v, v );\n		float w2 = a2 / v2;\n		return RECIPROCAL_PI * a2 * pow2 ( w2 );\n	}\n#endif\n#ifdef USE_CLEARCOAT\n	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n		vec3 f0 = material.clearcoatF0;\n		float f90 = material.clearcoatF90;\n		float roughness = material.clearcoatRoughness;\n		float alpha = pow2( roughness );\n		vec3 halfDir = normalize( lightDir + viewDir );\n		float dotNL = saturate( dot( normal, lightDir ) );\n		float dotNV = saturate( dot( normal, viewDir ) );\n		float dotNH = saturate( dot( normal, halfDir ) );\n		float dotVH = saturate( dot( viewDir, halfDir ) );\n		vec3 F = F_Schlick( f0, f90, dotVH );\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n		return F * ( V * D );\n	}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n	vec3 f0 = material.specularColor;\n	float f90 = material.specularF90;\n	float roughness = material.roughness;\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( f0, f90, dotVH );\n	#ifdef USE_IRIDESCENCE\n		F = mix( F, material.iridescenceFresnel, material.iridescence );\n	#endif\n	#ifdef USE_ANISOTROPY\n		float dotTL = dot( material.anisotropyT, lightDir );\n		float dotTV = dot( material.anisotropyT, viewDir );\n		float dotTH = dot( material.anisotropyT, halfDir );\n		float dotBL = dot( material.anisotropyB, lightDir );\n		float dotBV = dot( material.anisotropyB, viewDir );\n		float dotBH = dot( material.anisotropyB, halfDir );\n		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n	#else\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n	#endif\n	return F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n	float alpha = pow2( roughness );\n	float invAlpha = 1.0 / alpha;\n	float cos2h = dotNH * dotNH;\n	float sin2h = max( 1.0 - cos2h, 0.0078125 );\n	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float D = D_Charlie( sheenRoughness, dotNH );\n	float V = V_Neubelt( dotNV, dotNL );\n	return sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float r2 = roughness * roughness;\n	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n	return saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n	return fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	return specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	#ifdef USE_IRIDESCENCE\n		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n	#else\n		vec3 Fr = specularColor;\n	#endif\n	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n	float Ess = fab.x + fab.y;\n	float Ems = 1.0 - Ess;\n	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n	singleScatter += FssEss;\n	multiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometryNormal;\n		vec3 viewDir = geometryViewDir;\n		vec3 position = geometryPosition;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.roughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifdef USE_CLEARCOAT\n		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n		vec3 ccIrradiance = dotNLcc * directLight.color;\n		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n	#endif\n	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n	#ifdef USE_CLEARCOAT\n		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n	#endif\n	vec3 singleScattering = vec3( 0.0 );\n	vec3 multiScattering = vec3( 0.0 );\n	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n	#ifdef USE_IRIDESCENCE\n		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n	#else\n		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n	#endif\n	vec3 totalScattering = singleScattering + multiScattering;\n	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n	reflectedLight.indirectSpecular += radiance * singleScattering;\n	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n	geometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n	float dotNVi = saturate( dot( normal, geometryViewDir ) );\n	if ( material.iridescenceThickness == 0.0 ) {\n		material.iridescence = 0.0;\n	} else {\n		material.iridescence = saturate( material.iridescence );\n	}\n	if ( material.iridescence > 0.0 ) {\n		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n	}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointLightInfo( pointLight, geometryPosition, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n		pointLightShadow = pointLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	vec4 spotColor;\n	vec3 spotLightCoord;\n	bool inSpotLightMap;\n	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotLightInfo( spotLight, geometryPosition, directLight );\n		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n		#else\n		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#endif\n		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n		#endif\n		#undef SPOT_LIGHT_MAP_INDEX\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		spotLightShadow = spotLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalLightInfo( directionalLight, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n		directionalLightShadow = directionalLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 iblIrradiance = vec3( 0.0 );\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#if defined( USE_LIGHT_PROBES )\n		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n	#endif\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n		iblIrradiance += getIBLIrradiance( geometryNormal );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	#ifdef USE_ANISOTROPY\n		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n	#else\n		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n	#endif\n	#ifdef USE_CLEARCOAT\n		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n	#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n	uniform float logDepthBufFC;\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n	vFragDepth = 1.0 + gl_Position.w;\n	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n	vec4 sampledDiffuseColor = texture2D( map, vMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n	#endif\n	diffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n	uniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	#if defined( USE_POINTS_UV )\n		vec2 uv = vUv;\n	#else\n		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n	#endif\n#endif\n#ifdef USE_MAP\n	diffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n	varying vec2 vUv;\n#else\n	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n		uniform mat3 uvTransform;\n	#endif\n#endif\n#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n	metalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n	float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n	}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n	vColor *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		#if defined( USE_COLOR_ALPHA )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n		#elif defined( USE_COLOR )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n		#endif\n	}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n	objectNormal *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n	#ifndef USE_INSTANCING_MORPH\n		uniform float morphTargetBaseInfluence;\n		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	#endif\n	uniform sampler2DArray morphTargetsTexture;\n	uniform ivec2 morphTargetsTextureSize;\n	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n		int y = texelIndex / morphTargetsTextureSize.x;\n		int x = texelIndex - y * morphTargetsTextureSize.x;\n		ivec3 morphUV = ivec3( x, y, morphTargetIndex );\n		return texelFetch( morphTargetsTexture, morphUV, 0 );\n	}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n	transformed *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal *= faceDirection;\n	#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n	#ifdef USE_TANGENT\n		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn = getTangentFrame( - vViewPosition, normal,\n		#if defined( USE_NORMALMAP )\n			vNormalMapUv\n		#elif defined( USE_CLEARCOAT_NORMALMAP )\n			vClearcoatNormalMapUv\n		#else\n			vUv\n		#endif\n		);\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn[0] *= faceDirection;\n		tbn[1] *= faceDirection;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	#ifdef USE_TANGENT\n		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn2[0] *= faceDirection;\n		tbn2[1] *= faceDirection;\n	#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	#ifdef FLIP_SIDED\n		normal = - normal;\n	#endif\n	#ifdef DOUBLE_SIDED\n		normal = normal * faceDirection;\n	#endif\n	normal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	mapN.xy *= normalScale;\n	normal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n	uniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( uv.st );\n		vec2 st1 = dFdy( uv.st );\n		vec3 N = surf_norm;\n		vec3 q1perp = cross( q1, N );\n		vec3 q0perp = cross( N, q0 );\n		vec3 T = q1perp * st0.x + q0perp * st1.x;\n		vec3 B = q1perp * st0.y + q0perp * st1.y;\n		float det = max( dot( T, T ), dot( B, B ) );\n		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n		return mat3( T * scale, B * scale, N );\n	}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n	vec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n	clearcoatMapN.xy *= clearcoatNormalScale;\n	clearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n	uniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform sampler2D clearcoatNormalMap;\n	uniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n	uniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n	if( v <= 0.0 )\n		return vec4( 0., 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec4( 1., 1., 1., 1. );\n	float vuf;\n	float af = modf( v * PackFactors.a, vuf );\n	float bf = modf( vuf * ShiftRight8, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n	if( v <= 0.0 )\n		return vec3( 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec3( 1., 1., 1. );\n	float vuf;\n	float bf = modf( v * PackFactors.b, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n	if( v <= 0.0 )\n		return vec2( 0., 0. );\n	if( v >= 1.0 )\n		return vec2( 1., 1. );\n	float vuf;\n	float gf = modf( v * 256., vuf );\n	return vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n	return dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n	mvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n	mvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n	gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n	roughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n		return unpackRGBATo2Half( texture2D( shadow, uv ) );\n	}\n	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n		float occlusion = 1.0;\n		vec2 distribution = texture2DDistribution( shadow, uv );\n		float hard_shadow = step( compare , distribution.x );\n		if (hard_shadow != 1.0 ) {\n			float distance = compare - distribution.x ;\n			float variance = max( 0.00000, distribution.y * distribution.y );\n			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n		}\n		return occlusion;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			float dx2 = dx0 / 2.0;\n			float dy2 = dy0 / 2.0;\n			float dx3 = dx1 / 2.0;\n			float dy3 = dy1 / 2.0;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 17.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx = texelSize.x;\n			float dy = texelSize.y;\n			vec2 uv = shadowCoord.xy;\n			vec2 f = fract( uv * shadowMapSize + 0.5 );\n			uv -= f * texelSize;\n			shadow = (\n				texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n						  f.x ),\n					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n						  f.x ),\n					 f.y )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_VSM )\n			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		float shadow = 1.0;\n		vec3 lightToPosition = shadowCoord.xyz;\n		\n		float lightToPositionLength = length( lightToPosition );\n		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;\n			vec3 bd3D = normalize( lightToPosition );\n			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n				shadow = (\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n				) * ( 1.0 / 9.0 );\n			#else\n				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n			#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n	vec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n		shadowWorldPosition = worldPosition;\n		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n		#endif\n		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		directionalLight = directionalLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n		spotLight = spotLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		pointLight = pointLightShadows[ i ];\n		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#endif\n	return shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	uniform highp sampler2D boneTexture;\n	mat4 getBoneMatrix( const in float i ) {\n		int size = textureSize( boneTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n	#ifdef USE_TANGENT\n		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n	return saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n	return a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n	const mat3 ACESInputMat = mat3(\n		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),\n		vec3( 0.04823, 0.01566, 0.83777 )\n	);\n	const mat3 ACESOutputMat = mat3(\n		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),\n		vec3( -0.07367, -0.00605,  1.07602 )\n	);\n	color *= toneMappingExposure / 0.6;\n	color = ACESInputMat * color;\n	color = RRTAndODTFit( color );\n	color = ACESOutputMat * color;\n	return saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n	vec3( 1.6605, - 0.1246, - 0.0182 ),\n	vec3( - 0.5876, 1.1329, - 0.1006 ),\n	vec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n	vec3( 0.6274, 0.0691, 0.0164 ),\n	vec3( 0.3293, 0.9195, 0.0880 ),\n	vec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n	vec3 x2 = x * x;\n	vec3 x4 = x2 * x2;\n	return + 15.5 * x4 * x2\n		- 40.14 * x4 * x\n		+ 31.96 * x4\n		- 6.868 * x2 * x\n		+ 0.4298 * x2\n		+ 0.1191 * x\n		- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n	const mat3 AgXInsetMatrix = mat3(\n		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n	);\n	const mat3 AgXOutsetMatrix = mat3(\n		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n	);\n	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;\n	color *= toneMappingExposure;\n	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n	color = AgXInsetMatrix * color;\n	color = max( color, 1e-10 );	color = log2( color );\n	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n	color = clamp( color, 0.0, 1.0 );\n	color = agxDefaultContrastApprox( color );\n	color = AgXOutsetMatrix * color;\n	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n	color = clamp( color, 0.0, 1.0 );\n	return color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n	const float StartCompression = 0.8 - 0.04;\n	const float Desaturation = 0.15;\n	color *= toneMappingExposure;\n	float x = min( color.r, min( color.g, color.b ) );\n	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n	color -= offset;\n	float peak = max( color.r, max( color.g, color.b ) );\n	if ( peak < StartCompression ) return color;\n	float d = 1. - StartCompression;\n	float newPeak = 1. - d * d / ( peak + d - StartCompression );\n	color *= newPeak / peak;\n	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n	return mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n	material.transmission = transmission;\n	material.transmissionAlpha = 1.0;\n	material.thickness = thickness;\n	material.attenuationDistance = attenuationDistance;\n	material.attenuationColor = attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n	#endif\n	vec3 pos = vWorldPosition;\n	vec3 v = normalize( cameraPosition - pos );\n	vec3 n = inverseTransformDirection( normal, viewMatrix );\n	vec4 transmitted = getIBLVolumeRefraction(\n		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n		material.attenuationColor, material.attenuationDistance );\n	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n	uniform float transmission;\n	uniform float thickness;\n	uniform float attenuationDistance;\n	uniform vec3 attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		uniform sampler2D transmissionMap;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		uniform sampler2D thicknessMap;\n	#endif\n	uniform vec2 transmissionSamplerSize;\n	uniform sampler2D transmissionSamplerMap;\n	uniform mat4 modelMatrix;\n	uniform mat4 projectionMatrix;\n	varying vec3 vWorldPosition;\n	float w0( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n	}\n	float w1( float a ) {\n		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n	}\n	float w2( float a ){\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n	}\n	float w3( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * a * a );\n	}\n	float g0( float a ) {\n		return w0( a ) + w1( a );\n	}\n	float g1( float a ) {\n		return w2( a ) + w3( a );\n	}\n	float h0( float a ) {\n		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n	}\n	float h1( float a ) {\n		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n	}\n	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n		uv = uv * texelSize.zw + 0.5;\n		vec2 iuv = floor( uv );\n		vec2 fuv = fract( uv );\n		float g0x = g0( fuv.x );\n		float g1x = g1( fuv.x );\n		float h0x = h0( fuv.x );\n		float h1x = h1( fuv.x );\n		float h0y = h0( fuv.y );\n		float h1y = h1( fuv.y );\n		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n	}\n	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n		vec2 fLodSizeInv = 1.0 / fLodSize;\n		vec2 cLodSizeInv = 1.0 / cLodSize;\n		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n		return mix( fSample, cSample, fract( lod ) );\n	}\n	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n		vec3 modelScale;\n		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n		return normalize( refractionVector ) * thickness * modelScale;\n	}\n	float applyIorToRoughness( const in float roughness, const in float ior ) {\n		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n	}\n	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n	}\n	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n		if ( isinf( attenuationDistance ) ) {\n			return vec3( 1.0 );\n		} else {\n			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;\n		}\n	}\n	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n		const in vec3 attenuationColor, const in float attenuationDistance ) {\n		vec4 transmittedLight;\n		vec3 transmittance;\n		#ifdef USE_DISPERSION\n			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n			for ( int i = 0; i < 3; i ++ ) {\n				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n				vec3 refractedRayExit = position + transmissionRay;\n		\n				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n				vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n				refractionCoords += 1.0;\n				refractionCoords /= 2.0;\n		\n				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n				transmittedLight[ i ] = transmissionSample[ i ];\n				transmittedLight.a += transmissionSample.a;\n				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n			}\n			transmittedLight.a /= 3.0;\n		\n		#else\n		\n			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n			vec3 refractedRayExit = position + transmissionRay;\n			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n			vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n			refractionCoords += 1.0;\n			refractionCoords /= 2.0;\n			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n		\n		#endif\n		vec3 attenuatedColor = transmittance * transmittedLight.rgb;\n		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n	}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	uniform mat3 mapTransform;\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform mat3 alphaMapTransform;\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	uniform mat3 lightMapTransform;\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	uniform mat3 aoMapTransform;\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	uniform mat3 bumpMapTransform;\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	uniform mat3 normalMapTransform;\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	uniform mat3 displacementMapTransform;\n	varying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	uniform mat3 emissiveMapTransform;\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	uniform mat3 metalnessMapTransform;\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	uniform mat3 roughnessMapTransform;\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	uniform mat3 anisotropyMapTransform;\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	uniform mat3 clearcoatMapTransform;\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform mat3 clearcoatNormalMapTransform;\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform mat3 clearcoatRoughnessMapTransform;\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	uniform mat3 sheenColorMapTransform;\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	uniform mat3 sheenRoughnessMapTransform;\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	uniform mat3 iridescenceMapTransform;\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform mat3 iridescenceThicknessMapTransform;\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	uniform mat3 specularMapTransform;\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	uniform mat3 specularColorMapTransform;\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	uniform mat3 specularIntensityMapTransform;\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	vUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n	vec4 worldPosition = vec4( transformed, 1.0 );\n	#ifdef USE_BATCHING\n		worldPosition = batchingMatrix * worldPosition;\n	#endif\n	#ifdef USE_INSTANCING\n		worldPosition = instanceMatrix * worldPosition;\n	#endif\n	worldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	gl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n	vec4 texColor = texture2D( t2D, vUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n	uniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n	uniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n	#elif defined( ENVMAP_TYPE_CUBE_UV )\n		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n	#else\n		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n	gl_FragColor = texColor;\n	gl_FragColor.a *= opacity;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <logdepthbuf_fragment>\n	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( fragCoordZ );\n	#elif DEPTH_PACKING == 3202\n		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n	#elif DEPTH_PACKING == 3203\n		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n	#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV = equirectUv( direction );\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	vLineDistance = scale * lineDistance;\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinbase_vertex>\n		#include <skinnormal_vertex>\n		#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_lambert_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n	vViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	vec3 viewDir = normalize( vViewPosition );\n	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n	vec3 y = cross( viewDir, x );\n	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n	#ifdef USE_MATCAP\n		vec4 matcapColor = texture2D( matcap, uv );\n	#else\n		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n	#endif\n	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n	#ifdef OPAQUE\n		gl_FragColor.a = 1.0;\n	#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n	varying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n	vWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n	#define IOR\n	#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n	uniform float ior;\n#endif\n#ifdef USE_SPECULAR\n	uniform float specularIntensity;\n	uniform vec3 specularColor;\n	#ifdef USE_SPECULAR_COLORMAP\n		uniform sampler2D specularColorMap;\n	#endif\n	#ifdef USE_SPECULAR_INTENSITYMAP\n		uniform sampler2D specularIntensityMap;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT\n	uniform float clearcoat;\n	uniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n	uniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	uniform float iridescence;\n	uniform float iridescenceIOR;\n	uniform float iridescenceThicknessMinimum;\n	uniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n	uniform vec3 sheenColor;\n	uniform float sheenRoughness;\n	#ifdef USE_SHEEN_COLORMAP\n		uniform sampler2D sheenColorMap;\n	#endif\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		uniform sampler2D sheenRoughnessMap;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	uniform vec2 anisotropyVector;\n	#ifdef USE_ANISOTROPYMAP\n		uniform sampler2D anisotropyMap;\n	#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <clearcoat_normal_fragment_begin>\n	#include <clearcoat_normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n	#include <transmission_fragment>\n	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n	#ifdef USE_SHEEN\n		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n	#endif\n	#ifdef USE_CLEARCOAT\n		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n	#endif\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_toon_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n	varying vec2 vUv;\n	uniform mat3 uvTransform;\n#endif\nvoid main() {\n	#ifdef USE_POINTS_UV\n		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	#endif\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	gl_PointSize = size;\n	#ifdef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	vec4 mvPosition = modelViewMatrix[ 3 ];\n	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n	#ifndef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) scale *= - mvPosition.z;\n	#endif\n	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}"},og={common:{diffuse:{value:new ad(0xffffff)},opacity:{value:1},map:{value:null},mapTransform:{value:new rP},alphaMap:{value:null},alphaMapTransform:{value:new rP},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new rP}},envmap:{envMap:{value:null},envMapRotation:{value:new rP},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new rP}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new rP}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new rP},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new rP},normalScale:{value:new rD(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new rP},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new rP}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new rP}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new rP}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ad(0xffffff)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ad(0xffffff)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new rP},alphaTest:{value:0},uvTransform:{value:new rP}},sprite:{diffuse:{value:new ad(0xffffff)},opacity:{value:1},center:{value:new rD(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new rP},alphaMap:{value:null},alphaMapTransform:{value:new rP},alphaTest:{value:0}}},om={basic:{uniforms:a2([og.common,og.specularmap,og.envmap,og.aomap,og.lightmap,og.fog]),vertexShader:of.meshbasic_vert,fragmentShader:of.meshbasic_frag},lambert:{uniforms:a2([og.common,og.specularmap,og.envmap,og.aomap,og.lightmap,og.emissivemap,og.bumpmap,og.normalmap,og.displacementmap,og.fog,og.lights,{emissive:{value:new ad(0)}}]),vertexShader:of.meshlambert_vert,fragmentShader:of.meshlambert_frag},phong:{uniforms:a2([og.common,og.specularmap,og.envmap,og.aomap,og.lightmap,og.emissivemap,og.bumpmap,og.normalmap,og.displacementmap,og.fog,og.lights,{emissive:{value:new ad(0)},specular:{value:new ad(1118481)},shininess:{value:30}}]),vertexShader:of.meshphong_vert,fragmentShader:of.meshphong_frag},standard:{uniforms:a2([og.common,og.envmap,og.aomap,og.lightmap,og.emissivemap,og.bumpmap,og.normalmap,og.displacementmap,og.roughnessmap,og.metalnessmap,og.fog,og.lights,{emissive:{value:new ad(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:of.meshphysical_vert,fragmentShader:of.meshphysical_frag},toon:{uniforms:a2([og.common,og.aomap,og.lightmap,og.emissivemap,og.bumpmap,og.normalmap,og.displacementmap,og.gradientmap,og.fog,og.lights,{emissive:{value:new ad(0)}}]),vertexShader:of.meshtoon_vert,fragmentShader:of.meshtoon_frag},matcap:{uniforms:a2([og.common,og.bumpmap,og.normalmap,og.displacementmap,og.fog,{matcap:{value:null}}]),vertexShader:of.meshmatcap_vert,fragmentShader:of.meshmatcap_frag},points:{uniforms:a2([og.points,og.fog]),vertexShader:of.points_vert,fragmentShader:of.points_frag},dashed:{uniforms:a2([og.common,og.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:of.linedashed_vert,fragmentShader:of.linedashed_frag},depth:{uniforms:a2([og.common,og.displacementmap]),vertexShader:of.depth_vert,fragmentShader:of.depth_frag},normal:{uniforms:a2([og.common,og.bumpmap,og.normalmap,og.displacementmap,{opacity:{value:1}}]),vertexShader:of.meshnormal_vert,fragmentShader:of.meshnormal_frag},sprite:{uniforms:a2([og.sprite,og.fog]),vertexShader:of.sprite_vert,fragmentShader:of.sprite_frag},background:{uniforms:{uvTransform:{value:new rP},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:of.background_vert,fragmentShader:of.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new rP}},vertexShader:of.backgroundCube_vert,fragmentShader:of.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:of.cube_vert,fragmentShader:of.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:of.equirect_vert,fragmentShader:of.equirect_frag},distanceRGBA:{uniforms:a2([og.common,og.displacementmap,{referencePosition:{value:new r8},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:of.distanceRGBA_vert,fragmentShader:of.distanceRGBA_frag},shadow:{uniforms:a2([og.lights,og.fog,{color:{value:new ad(0)},opacity:{value:1}}]),vertexShader:of.shadow_vert,fragmentShader:of.shadow_frag}};om.physical={uniforms:a2([om.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new rP},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new rP},clearcoatNormalScale:{value:new rD(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new rP},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new rP},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new rP},sheen:{value:0},sheenColor:{value:new ad(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new rP},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new rP},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new rP},transmissionSamplerSize:{value:new rD},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new rP},attenuationDistance:{value:0},attenuationColor:{value:new ad(0)},specularColor:{value:new ad(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new rP},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new rP},anisotropyVector:{value:new rD},anisotropyMap:{value:null},anisotropyMapTransform:{value:new rP}}]),vertexShader:of.meshphysical_vert,fragmentShader:of.meshphysical_frag};let ov={r:0,b:0,g:0},oy=new iU,ox=new iD;function o_(t,r,i,s,u,c,h){let p,f;let v=new ad(0),y=!0===c?0:1,x=null,_=0,b=null;function w(t){let s=!0===t.isScene?t.background:null;return s&&s.isTexture&&(s=(t.backgroundBlurriness>0?i:r).get(s)),s}function S(r,i){r.getRGB(ov,a3(t)),s.buffers.color.setClear(ov.r,ov.g,ov.b,i,h)}return{getClearColor:function(){return v},setClearColor:function(t,r=1){v.set(t),S(v,y=r)},getClearAlpha:function(){return y},setClearAlpha:function(t){S(v,y=t)},render:function(r){let i=!1,u=w(r);null===u?S(v,y):u&&u.isColor&&(S(u,1),i=!0);let c=t.xr.getEnvironmentBlendMode();"additive"===c?s.buffers.color.setClear(0,0,0,1,h):"alpha-blend"===c&&s.buffers.color.setClear(0,0,0,0,h),(t.autoClear||i)&&(s.buffers.depth.setTest(!0),s.buffers.depth.setMask(!0),s.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))},addToRenderList:function(r,i){let s=w(i);s&&(s.isCubeTexture||s.mapping===tp)?(void 0===f&&((f=new aq(new a0(1,1,1),new a4({name:"BackgroundCubeMaterial",uniforms:a1(om.backgroundCube.uniforms),vertexShader:om.backgroundCube.vertexShader,fragmentShader:om.backgroundCube.fragmentShader,side:eS,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(t,r,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),u.update(f)),oy.copy(i.backgroundRotation),oy.x*=-1,oy.y*=-1,oy.z*=-1,s.isCubeTexture&&!1===s.isRenderTargetTexture&&(oy.y*=-1,oy.z*=-1),f.material.uniforms.envMap.value=s,f.material.uniforms.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,f.material.uniforms.backgroundBlurriness.value=i.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=i.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(ox.makeRotationFromEuler(oy)),f.material.toneMapped=rU.getTransfer(s.colorSpace)!==nW,(x!==s||_!==s.version||b!==t.toneMapping)&&(f.material.needsUpdate=!0,x=s,_=s.version,b=t.toneMapping),f.layers.enableAll(),r.unshift(f,f.geometry,f.material,0,0,null)):s&&s.isTexture&&(void 0===p&&((p=new aq(new op(2,2),new a4({name:"BackgroundMaterial",uniforms:a1(om.background.uniforms),vertexShader:om.background.vertexShader,fragmentShader:om.background.fragmentShader,side:ew,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),u.update(p)),p.material.uniforms.t2D.value=s,p.material.uniforms.backgroundIntensity.value=i.backgroundIntensity,p.material.toneMapped=rU.getTransfer(s.colorSpace)!==nW,!0===s.matrixAutoUpdate&&s.updateMatrix(),p.material.uniforms.uvTransform.value.copy(s.matrix),(x!==s||_!==s.version||b!==t.toneMapping)&&(p.material.needsUpdate=!0,x=s,_=s.version,b=t.toneMapping),p.layers.enableAll(),r.unshift(p,p.geometry,p.material,0,0,null))}}}function ob(t,r){let i=t.getParameter(t.MAX_VERTEX_ATTRIBS),s={},u=v(null),c=u,h=!1;function p(r){return t.bindVertexArray(r)}function f(r){return t.deleteVertexArray(r)}function v(t){let r=[],s=[],u=[];for(let t=0;t<i;t++)r[t]=0,s[t]=0,u[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:r,enabledAttributes:s,attributeDivisors:u,object:t,attributes:{},index:null}}function y(){let t=c.newAttributes;for(let r=0,i=t.length;r<i;r++)t[r]=0}function x(t){_(t,0)}function _(r,i){let s=c.newAttributes,u=c.enabledAttributes,h=c.attributeDivisors;s[r]=1,0===u[r]&&(t.enableVertexAttribArray(r),u[r]=1),h[r]!==i&&(t.vertexAttribDivisor(r,i),h[r]=i)}function b(){let r=c.newAttributes,i=c.enabledAttributes;for(let s=0,u=i.length;s<u;s++)i[s]!==r[s]&&(t.disableVertexAttribArray(s),i[s]=0)}function w(r,i,s,u,c,h,p){!0===p?t.vertexAttribIPointer(r,i,s,c,h):t.vertexAttribPointer(r,i,s,u,c,h)}function S(){M(),h=!0,c!==u&&p((c=u).object)}function M(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,f,S,M){let A=!1,C=function(r,i,u){let c=!0===u.wireframe,h=s[r.id];void 0===h&&(h={},s[r.id]=h);let p=h[i.id];void 0===p&&(p={},h[i.id]=p);let f=p[c];return void 0===f&&(f=v(t.createVertexArray()),p[c]=f),f}(S,f,u);c!==C&&p((c=C).object),(A=function(t,r,i,s){let u=c.attributes,h=r.attributes,p=0,f=i.getAttributes();for(let r in f)if(f[r].location>=0){let i=u[r],s=h[r];if(void 0===s&&("instanceMatrix"===r&&t.instanceMatrix&&(s=t.instanceMatrix),"instanceColor"===r&&t.instanceColor&&(s=t.instanceColor)),void 0===i||i.attribute!==s||s&&i.data!==s.data)return!0;p++}return c.attributesNum!==p||c.index!==s||!1}(i,S,f,M))&&function(t,r,i,s){let u={},h=r.attributes,p=0,f=i.getAttributes();for(let r in f)if(f[r].location>=0){let i=h[r];void 0===i&&("instanceMatrix"===r&&t.instanceMatrix&&(i=t.instanceMatrix),"instanceColor"===r&&t.instanceColor&&(i=t.instanceColor));let s={};s.attribute=i,i&&i.data&&(s.data=i.data),u[r]=s,p++}c.attributes=u,c.attributesNum=p,c.index=s}(i,S,f,M),null!==M&&r.update(M,t.ELEMENT_ARRAY_BUFFER),(A||h)&&(h=!1,function(i,s,u,c){y();let h=c.attributes,p=u.getAttributes(),f=s.defaultAttributeValues;for(let s in p){let u=p[s];if(u.location>=0){let p=h[s];if(void 0===p&&("instanceMatrix"===s&&i.instanceMatrix&&(p=i.instanceMatrix),"instanceColor"===s&&i.instanceColor&&(p=i.instanceColor)),void 0!==p){let s=p.normalized,h=p.itemSize,f=r.get(p);if(void 0===f)continue;let v=f.buffer,y=f.type,b=f.bytesPerElement,S=y===t.INT||y===t.UNSIGNED_INT||p.gpuType===tP;if(p.isInterleavedBufferAttribute){let r=p.data,f=r.stride,M=p.offset;if(r.isInstancedInterleavedBuffer){for(let t=0;t<u.locationSize;t++)_(u.location+t,r.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===c._maxInstanceCount&&(c._maxInstanceCount=r.meshPerAttribute*r.count)}else for(let t=0;t<u.locationSize;t++)x(u.location+t);t.bindBuffer(t.ARRAY_BUFFER,v);for(let t=0;t<u.locationSize;t++)w(u.location+t,h/u.locationSize,y,s,f*b,(M+h/u.locationSize*t)*b,S)}else{if(p.isInstancedBufferAttribute){for(let t=0;t<u.locationSize;t++)_(u.location+t,p.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===c._maxInstanceCount&&(c._maxInstanceCount=p.meshPerAttribute*p.count)}else for(let t=0;t<u.locationSize;t++)x(u.location+t);t.bindBuffer(t.ARRAY_BUFFER,v);for(let t=0;t<u.locationSize;t++)w(u.location+t,h/u.locationSize,y,s,h*b,h/u.locationSize*t*b,S)}}else if(void 0!==f){let r=f[s];if(void 0!==r)switch(r.length){case 2:t.vertexAttrib2fv(u.location,r);break;case 3:t.vertexAttrib3fv(u.location,r);break;case 4:t.vertexAttrib4fv(u.location,r);break;default:t.vertexAttrib1fv(u.location,r)}}}}b()}(i,u,f,S),null!==M&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.get(M).buffer))},reset:S,resetDefaultState:M,dispose:function(){for(let t in S(),s){let r=s[t];for(let t in r){let i=r[t];for(let t in i)f(i[t].object),delete i[t];delete r[t]}delete s[t]}},releaseStatesOfGeometry:function(t){if(void 0===s[t.id])return;let r=s[t.id];for(let t in r){let i=r[t];for(let t in i)f(i[t].object),delete i[t];delete r[t]}delete s[t.id]},releaseStatesOfProgram:function(t){for(let r in s){let i=s[r];if(void 0===i[t.id])continue;let u=i[t.id];for(let t in u)f(u[t].object),delete u[t];delete i[t.id]}},initAttributes:y,enableAttribute:x,disableUnusedAttributes:b}}function ow(t,r,i){let s;function u(r,u,c){0!==c&&(t.drawArraysInstanced(s,r,u,c),i.update(u,s,c))}this.setMode=function(t){s=t},this.render=function(r,u){t.drawArrays(s,r,u),i.update(u,s,1)},this.renderInstances=u,this.renderMultiDraw=function(t,u,c){if(0===c)return;r.get("WEBGL_multi_draw").multiDrawArraysWEBGL(s,t,0,u,0,c);let h=0;for(let t=0;t<c;t++)h+=u[t];i.update(h,s,1)},this.renderMultiDrawInstances=function(t,c,h,p){if(0===h)return;let f=r.get("WEBGL_multi_draw");if(null===f)for(let r=0;r<t.length;r++)u(t[r],c[r],p[r]);else{f.multiDrawArraysInstancedWEBGL(s,t,0,c,0,p,0,h);let r=0;for(let t=0;t<h;t++)r+=c[t]*p[t];i.update(r,s,1)}}}function oS(t,r,i,s){let u;function c(r){if("highp"===r){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";r="mediump"}return"mediump"===r&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=void 0!==i.precision?i.precision:"highp",p=c(h);p!==h&&(h=p);let f=!0===i.logarithmicDepthBuffer,v=!0===i.reverseDepthBuffer&&r.has("EXT_clip_control"),y=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),x=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),_=t.getParameter(t.MAX_TEXTURE_SIZE),b=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),w=t.getParameter(t.MAX_VERTEX_ATTRIBS),S=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),M=t.getParameter(t.MAX_VARYING_VECTORS),A=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==u)return u;if(!0===r.has("EXT_texture_filter_anisotropic")){let i=r.get("EXT_texture_filter_anisotropic");u=t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else u=0;return u},getMaxPrecision:c,textureFormatReadable:function(r){return(r===tH||s.convert(r)===t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))&&!0},textureTypeReadable:function(i){let u=i===tk&&(r.has("EXT_color_buffer_half_float")||r.has("EXT_color_buffer_float"));return i===tT||s.convert(i)===t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)||i===tL||!!u||!1},precision:h,logarithmicDepthBuffer:f,reverseDepthBuffer:v,maxTextures:y,maxVertexTextures:x,maxTextureSize:_,maxCubemapSize:b,maxAttributes:w,maxVertexUniforms:S,maxVaryings:M,maxFragmentUniforms:A,vertexTextures:x>0,maxSamples:t.getParameter(t.MAX_SAMPLES)}}function oM(t){let r=this,i=null,s=0,u=!1,c=!1,h=new os,p=new rP,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(t,r){let i=0!==t.length||r||0!==s||u;return u=r,s=t.length,i},this.beginShadows=function(){c=!0,v(null)},this.endShadows=function(){c=!1},this.setGlobalState=function(t,r){i=v(t,r,0)},this.setState=function(h,p,y){let x=h.clippingPlanes,_=h.clipIntersection,b=h.clipShadows,w=t.get(h);if(u&&null!==x&&0!==x.length&&(!c||b)){let t=c?0:s,r=4*t,u=w.clippingState||null;f.value=u,u=v(x,p,r,y);for(let t=0;t!==r;++t)u[t]=i[t];w.clippingState=u,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=t}else c?v(null):function(){f.value!==i&&(f.value=i,f.needsUpdate=s>0),r.numPlanes=s,r.numIntersection=0}()};function v(t,i,s,u){let c=null!==t?t.length:0,v=null;if(0!==c){if(v=f.value,!0!==u||null===v){let r=s+4*c,u=i.matrixWorldInverse;p.getNormalMatrix(u),(null===v||v.length<r)&&(v=new Float32Array(r));for(let r=0,i=s;r!==c;++r,i+=4)h.copy(t[r]).applyMatrix4(u,p),h.normal.toArray(v,i),v[i+3]=h.constant}f.value=v,f.needsUpdate=!0}return r.numPlanes=c,r.numIntersection=0,v}}function oA(t){let r=new WeakMap;function i(t,r){return r===th?t.mapping=tu:r===td&&(t.mapping=tc),t}function s(t){let i=t.target;i.removeEventListener("dispose",s);let u=r.get(i);void 0!==u&&(r.delete(i),u.dispose())}return{get:function(u){if(u&&u.isTexture){let c=u.mapping;if(c===th||c===td){if(r.has(u))return i(r.get(u).texture,u.mapping);{let c=u.image;if(!c||!(c.height>0))return null;{let h=new or(c.height);return h.fromEquirectangularTexture(t,u),r.set(u,h),u.addEventListener("dispose",s),i(h.texture,u.mapping)}}}}return u},dispose:function(){r=new WeakMap}}}class oC extends a6{constructor(t=-1,r=1,i=1,s=-1,u=.1,c=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=r,this.top=i,this.bottom=s,this.near=u,this.far=c,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,r,i,s,u,c){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=i,this.view.offsetY=s,this.view.width=u,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2,u=i-t,c=i+t,h=s+r,p=s-r;if(null!==this.view&&this.view.enabled){let t=(this.right-this.left)/this.view.fullWidth/this.zoom,r=(this.top-this.bottom)/this.view.fullHeight/this.zoom;u+=t*this.view.offsetX,c=u+t*this.view.width,h-=r*this.view.offsetY,p=h-r*this.view.height}this.projectionMatrix.makeOrthographic(u,c,h,p,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let r=super.toJSON(t);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,null!==this.view&&(r.object.view=Object.assign({},this.view)),r}}let oT=[.125,.215,.35,.446,.526,.582],oE=new oC,oI=new ad,oD=null,oP=0,oR=0,oL=!1,ok=(1+Math.sqrt(5))/2,oO=1/ok,oB=[new r8(-ok,oO,0),new r8(ok,oO,0),new r8(-oO,0,ok),new r8(oO,0,ok),new r8(0,ok,-oO),new r8(0,ok,oO),new r8(-1,1,-1),new r8(1,1,-1),new r8(-1,1,1),new r8(1,1,1)];class oN{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,r=0,i=.1,s=100){oD=this._renderer.getRenderTarget(),oP=this._renderer.getActiveCubeFace(),oR=this._renderer.getActiveMipmapLevel(),oL=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(t,i,s,u),r>0&&this._blur(u,0,0,r),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(t,r=null){return this._fromTexture(t,r)}fromCubemap(t,r=null){return this._fromTexture(t,r)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=oH(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=oU(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(oD,oP,oR),this._renderer.xr.enabled=oL,t.scissorTest=!1,oz(t,0,0,t.width,t.height)}_fromTexture(t,r){t.mapping===tu||t.mapping===tc?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),oD=this._renderer.getRenderTarget(),oP=this._renderer.getActiveCubeFace(),oR=this._renderer.getActiveMipmapLevel(),oL=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=r||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,i={magFilter:tw,minFilter:tw,generateMipmaps:!1,type:tk,format:tH,colorSpace:nG,depthBuffer:!1},s=oF(t,r,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==r){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=oF(t,r,i);let{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){let r=[],i=[],s=[],u=t,c=t-4+1+oT.length;for(let h=0;h<c;h++){let c=Math.pow(2,u);i.push(c);let p=1/c;h>t-4?p=oT[h-t+4-1]:0===h&&(p=0),s.push(p);let f=1/(c-2),v=-f,y=1+f,x=[v,v,y,v,y,y,v,v,y,y,v,y],_=new Float32Array(108),b=new Float32Array(72),w=new Float32Array(36);for(let t=0;t<6;t++){let r=t%3*2/3-1,i=t>2?0:-1,s=[r,i,0,r+2/3,i,0,r+2/3,i+1,0,r,i,0,r+2/3,i+1,0,r,i+1,0];_.set(s,18*t),b.set(x,12*t);let u=[t,t,t,t,t,t];w.set(u,6*t)}let S=new aU;S.setAttribute("position",new aS(_,3)),S.setAttribute("uv",new aS(b,2)),S.setAttribute("faceIndex",new aS(w,1)),r.push(S),u>4&&u--}return{lodPlanes:r,sizeLods:i,sigmas:s}}(s)),this._blurMaterial=function(t,r,i){let s=new Float32Array(20);return new a4({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/r,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:new r8(0,1,0)}},vertexShader:oG(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:eA,depthTest:!1,depthWrite:!1})}(s,t,r)}return s}_compileMaterial(t){let r=new aq(this._lodPlanes[0],t);this._renderer.compile(r,oE)}_sceneToCubeUV(t,r,i,s){let u=new oe(90,1,r,i),c=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],p=this._renderer,f=p.autoClear,v=p.toneMapping;p.getClearColor(oI),p.toneMapping=e8,p.autoClear=!1;let y=new am({name:"PMREM.Background",side:eS,depthWrite:!1,depthTest:!1}),x=new aq(new a0,y),_=!1,b=t.background;b?b.isColor&&(y.color.copy(b),t.background=null,_=!0):(y.color.copy(oI),_=!0);for(let r=0;r<6;r++){let i=r%3;0===i?(u.up.set(0,c[r],0),u.lookAt(h[r],0,0)):1===i?(u.up.set(0,0,c[r]),u.lookAt(0,h[r],0)):(u.up.set(0,c[r],0),u.lookAt(0,0,h[r]));let f=this._cubeSize;oz(s,i*f,r>2?f:0,f,f),p.setRenderTarget(s),_&&p.render(x,u),p.render(t,u)}x.geometry.dispose(),x.material.dispose(),p.toneMapping=v,p.autoClear=f,t.background=b}_textureToCubeUV(t,r){let i=this._renderer,s=t.mapping===tu||t.mapping===tc;s?(null===this._cubemapMaterial&&(this._cubemapMaterial=oH()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=oU());let u=s?this._cubemapMaterial:this._equirectMaterial,c=new aq(this._lodPlanes[0],u);u.uniforms.envMap.value=t;let h=this._cubeSize;oz(r,0,0,3*h,2*h),i.setRenderTarget(r),i.render(c,oE)}_applyPMREM(t){let r=this._renderer,i=r.autoClear;r.autoClear=!1;let s=this._lodPlanes.length;for(let r=1;r<s;r++){let i=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),u=oB[(s-r-1)%oB.length];this._blur(t,r-1,r,i,u)}r.autoClear=i}_blur(t,r,i,s,u){let c=this._pingPongRenderTarget;this._halfBlur(t,c,r,i,s,"latitudinal",u),this._halfBlur(c,t,i,i,s,"longitudinal",u)}_halfBlur(t,r,i,s,u,c,h){let p=this._renderer,f=this._blurMaterial;"latitudinal"!==c;let v=new aq(this._lodPlanes[s],f),y=f.uniforms,x=this._sizeLods[i]-1,_=isFinite(u)?Math.PI/(2*x):2*Math.PI/39,b=u/_,w=isFinite(u)?1+Math.floor(3*b):20;let S=[],M=0;for(let t=0;t<20;++t){let r=t/b,i=Math.exp(-r*r/2);S.push(i),0===t?M+=i:t<w&&(M+=2*i)}for(let t=0;t<S.length;t++)S[t]=S[t]/M;y.envMap.value=t.texture,y.samples.value=w,y.weights.value=S,y.latitudinal.value="latitudinal"===c,h&&(y.poleAxis.value=h);let{_lodMax:A}=this;y.dTheta.value=_,y.mipInt.value=A-i;let C=this._sizeLods[s],T=4*(this._cubeSize-C);oz(r,3*C*(s>A-4?s-A+4:0),T,3*C,2*C),p.setRenderTarget(r),p.render(v,oE)}}function oF(t,r,i){let s=new r2(t,r,i);return s.texture.mapping=tp,s.texture.name="PMREM.cubeUv",s.scissorTest=!0,s}function oz(t,r,i,s,u){t.viewport.set(r,i,s,u),t.scissor.set(r,i,s,u)}function oU(){return new a4({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:oG(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:eA,depthTest:!1,depthWrite:!1})}function oH(){return new a4({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:oG(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:eA,depthTest:!1,depthWrite:!1})}function oG(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function oV(t){let r=new WeakMap,i=null;function s(t){let i=t.target;i.removeEventListener("dispose",s);let u=r.get(i);void 0!==u&&(r.delete(i),u.dispose())}return{get:function(u){if(u&&u.isTexture){let c=u.mapping,h=c===th||c===td,p=c===tu||c===tc;if(h||p){let c=r.get(u),f=void 0!==c?c.texture.pmremVersion:0;if(u.isRenderTargetTexture&&u.pmremVersion!==f)return null===i&&(i=new oN(t)),(c=h?i.fromEquirectangular(u,c):i.fromCubemap(u,c)).texture.pmremVersion=u.pmremVersion,r.set(u,c),c.texture;if(void 0!==c)return c.texture;{let f=u.image;return h&&f&&f.height>0||p&&f&&function(t){let r=0;for(let i=0;i<6;i++)void 0!==t[i]&&r++;return 6===r}(f)?(null===i&&(i=new oN(t)),(c=h?i.fromEquirectangular(u):i.fromCubemap(u)).texture.pmremVersion=u.pmremVersion,r.set(u,c),u.addEventListener("dispose",s),c.texture):null}}}return u},dispose:function(){r=new WeakMap,null!==i&&(i.dispose(),i=null)}}}function oW(t){let r={};function i(i){let s;if(void 0!==r[i])return r[i];switch(i){case"WEBGL_depth_texture":s=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=t.getExtension(i)}return r[i]=s,s}return{has:function(t){return null!==i(t)},init:function(){i("EXT_color_buffer_float"),i("WEBGL_clip_cull_distance"),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture"),i("WEBGL_render_shared_exponent")},get:function(t){let r=i(t);return null===r&&rz("THREE.WebGLRenderer: "+t+" extension not supported."),r}}}function oj(t,r,i,s){let u={},c=new WeakMap;function h(t){let p=t.target;for(let t in null!==p.index&&r.remove(p.index),p.attributes)r.remove(p.attributes[t]);for(let t in p.morphAttributes){let i=p.morphAttributes[t];for(let t=0,s=i.length;t<s;t++)r.remove(i[t])}p.removeEventListener("dispose",h),delete u[p.id];let f=c.get(p);f&&(r.remove(f),c.delete(p)),s.releaseStatesOfGeometry(p),!0===p.isInstancedBufferGeometry&&delete p._maxInstanceCount,i.memory.geometries--}function p(t){let i=[],s=t.index,u=t.attributes.position,h=0;if(null!==s){let t=s.array;h=s.version;for(let r=0,s=t.length;r<s;r+=3){let s=t[r+0],u=t[r+1],c=t[r+2];i.push(s,u,u,c,c,s)}}else{if(void 0===u)return;let t=u.array;h=u.version;for(let r=0,s=t.length/3-1;r<s;r+=3){let t=r+0,s=r+1,u=r+2;i.push(t,s,s,u,u,t)}}let p=new(rL(i)?aD:aE)(i,1);p.version=h;let f=c.get(t);f&&r.remove(f),c.set(t,p)}return{get:function(t,r){return!0===u[r.id]?r:(r.addEventListener("dispose",h),u[r.id]=!0,i.memory.geometries++,r)},update:function(i){let s=i.attributes;for(let i in s)r.update(s[i],t.ARRAY_BUFFER);let u=i.morphAttributes;for(let i in u){let s=u[i];for(let i=0,u=s.length;i<u;i++)r.update(s[i],t.ARRAY_BUFFER)}},getWireframeAttribute:function(t){let r=c.get(t);if(r){let i=t.index;null!==i&&r.version<i.version&&p(t)}else p(t);return c.get(t)}}}function oX(t,r,i){let s,u,c;function h(r,h,p){0!==p&&(t.drawElementsInstanced(s,h,u,r*c,p),i.update(h,s,p))}this.setMode=function(t){s=t},this.setIndex=function(t){u=t.type,c=t.bytesPerElement},this.render=function(r,h){t.drawElements(s,h,u,r*c),i.update(h,s,1)},this.renderInstances=h,this.renderMultiDraw=function(t,c,h){if(0===h)return;r.get("WEBGL_multi_draw").multiDrawElementsWEBGL(s,c,0,u,t,0,h);let p=0;for(let t=0;t<h;t++)p+=c[t];i.update(p,s,1)},this.renderMultiDrawInstances=function(t,p,f,v){if(0===f)return;let y=r.get("WEBGL_multi_draw");if(null===y)for(let r=0;r<t.length;r++)h(t[r]/c,p[r],v[r]);else{y.multiDrawElementsInstancedWEBGL(s,p,0,u,t,0,v,0,f);let r=0;for(let t=0;t<f;t++)r+=p[t]*v[t];i.update(r,s,1)}}}function oY(t){let r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:r,programs:null,autoReset:!0,reset:function(){r.calls=0,r.triangles=0,r.points=0,r.lines=0},update:function(i,s,u){switch(r.calls++,s){case t.TRIANGLES:r.triangles+=i/3*u;break;case t.LINES:r.lines+=i/2*u;break;case t.LINE_STRIP:r.lines+=u*(i-1);break;case t.LINE_LOOP:r.lines+=u*i;break;case t.POINTS:r.points+=u*i}}}}function o$(t,r,i){let s=new WeakMap,u=new r0;return{update:function(c,h,p){let f=c.morphTargetInfluences,v=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,y=void 0!==v?v.length:0,x=s.get(h);if(void 0===x||x.count!==y){void 0!==x&&x.texture.dispose();let t=void 0!==h.morphAttributes.position,i=void 0!==h.morphAttributes.normal,c=void 0!==h.morphAttributes.color,p=h.morphAttributes.position||[],f=h.morphAttributes.normal||[],v=h.morphAttributes.color||[],_=0;!0===t&&(_=1),!0===i&&(_=2),!0===c&&(_=3);let b=h.attributes.position.count*_,w=1;b>r.maxTextureSize&&(w=Math.ceil(b/r.maxTextureSize),b=r.maxTextureSize);let S=new Float32Array(b*w*4*y),M=new r3(S,b,w,y);M.type=tL,M.needsUpdate=!0;let A=4*_;for(let r=0;r<y;r++){let s=p[r],h=f[r],y=v[r],x=b*w*4*r;for(let r=0;r<s.count;r++){let p=r*A;!0===t&&(u.fromBufferAttribute(s,r),S[x+p+0]=u.x,S[x+p+1]=u.y,S[x+p+2]=u.z,S[x+p+3]=0),!0===i&&(u.fromBufferAttribute(h,r),S[x+p+4]=u.x,S[x+p+5]=u.y,S[x+p+6]=u.z,S[x+p+7]=0),!0===c&&(u.fromBufferAttribute(y,r),S[x+p+8]=u.x,S[x+p+9]=u.y,S[x+p+10]=u.z,S[x+p+11]=4===y.itemSize?u.w:1)}}x={count:y,texture:M,size:new rD(b,w)},s.set(h,x);h.addEventListener("dispose",function t(){M.dispose(),s.delete(h),h.removeEventListener("dispose",t)})}if(!0===c.isInstancedMesh&&null!==c.morphTexture)p.getUniforms().setValue(t,"morphTexture",c.morphTexture,i);else{let r=0;for(let t=0;t<f.length;t++)r+=f[t];let i=h.morphTargetsRelative?1:1-r;p.getUniforms().setValue(t,"morphTargetBaseInfluence",i),p.getUniforms().setValue(t,"morphTargetInfluences",f)}p.getUniforms().setValue(t,"morphTargetsTexture",x.texture,i),p.getUniforms().setValue(t,"morphTargetsTextureSize",x.size)}}}function oJ(t,r,i,s){let u=new WeakMap;function c(t){let r=t.target;r.removeEventListener("dispose",c),i.remove(r.instanceMatrix),null!==r.instanceColor&&i.remove(r.instanceColor)}return{update:function(h){let p=s.render.frame,f=h.geometry,v=r.get(h,f);if(u.get(v)!==p&&(r.update(v),u.set(v,p)),h.isInstancedMesh&&(!1===h.hasEventListener("dispose",c)&&h.addEventListener("dispose",c),u.get(h)!==p&&(i.update(h.instanceMatrix,t.ARRAY_BUFFER),null!==h.instanceColor&&i.update(h.instanceColor,t.ARRAY_BUFFER),u.set(h,p))),h.isSkinnedMesh){let t=h.skeleton;u.get(t)!==p&&(t.update(),u.set(t,p))}return v},dispose:function(){u=new WeakMap}}}class oZ extends rQ{constructor(t,r,i,s,u,c,h,p,f,v=tW){if(v!==tW&&v!==tj)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&v===tW&&(i=tR),void 0===i&&v===tj&&(i=tN),super(null,s,u,c,h,p,v,i,f),this.isDepthTexture=!0,this.image={width:t,height:r},this.magFilter=void 0!==h?h:tv,this.minFilter=void 0!==p?p:tv,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){let r=super.toJSON(t);return null!==this.compareFunction&&(r.compareFunction=this.compareFunction),r}}let oK=new rQ,oq=new oZ(1,1),oQ=new r3,o0=new r4,o1=new on,o2=[],o3=[],o5=new Float32Array(16),o4=new Float32Array(9),o6=new Float32Array(4);function o9(t,r,i){let s=t[0];if(s<=0||s>0)return t;let u=r*i,c=o2[u];if(void 0===c&&(c=new Float32Array(u),o2[u]=c),0!==r){s.toArray(c,0);for(let s=1,u=0;s!==r;++s)u+=i,t[s].toArray(c,u)}return c}function o8(t,r){if(t.length!==r.length)return!1;for(let i=0,s=t.length;i<s;i++)if(t[i]!==r[i])return!1;return!0}function o7(t,r){for(let i=0,s=r.length;i<s;i++)t[i]=r[i]}function se(t,r){let i=o3[r];void 0===i&&(i=new Int32Array(r),o3[r]=i);for(let s=0;s!==r;++s)i[s]=t.allocateTextureUnit();return i}function st(t,r){let i=this.cache;i[0]!==r&&(t.uniform1f(this.addr,r),i[0]=r)}function sn(t,r){let i=this.cache;if(void 0!==r.x)(i[0]!==r.x||i[1]!==r.y)&&(t.uniform2f(this.addr,r.x,r.y),i[0]=r.x,i[1]=r.y);else{if(o8(i,r))return;t.uniform2fv(this.addr,r),o7(i,r)}}function sr(t,r){let i=this.cache;if(void 0!==r.x)(i[0]!==r.x||i[1]!==r.y||i[2]!==r.z)&&(t.uniform3f(this.addr,r.x,r.y,r.z),i[0]=r.x,i[1]=r.y,i[2]=r.z);else if(void 0!==r.r)(i[0]!==r.r||i[1]!==r.g||i[2]!==r.b)&&(t.uniform3f(this.addr,r.r,r.g,r.b),i[0]=r.r,i[1]=r.g,i[2]=r.b);else{if(o8(i,r))return;t.uniform3fv(this.addr,r),o7(i,r)}}function si(t,r){let i=this.cache;if(void 0!==r.x)(i[0]!==r.x||i[1]!==r.y||i[2]!==r.z||i[3]!==r.w)&&(t.uniform4f(this.addr,r.x,r.y,r.z,r.w),i[0]=r.x,i[1]=r.y,i[2]=r.z,i[3]=r.w);else{if(o8(i,r))return;t.uniform4fv(this.addr,r),o7(i,r)}}function sa(t,r){let i=this.cache,s=r.elements;if(void 0===s){if(o8(i,r))return;t.uniformMatrix2fv(this.addr,!1,r),o7(i,r)}else{if(o8(i,s))return;o6.set(s),t.uniformMatrix2fv(this.addr,!1,o6),o7(i,s)}}function so(t,r){let i=this.cache,s=r.elements;if(void 0===s){if(o8(i,r))return;t.uniformMatrix3fv(this.addr,!1,r),o7(i,r)}else{if(o8(i,s))return;o4.set(s),t.uniformMatrix3fv(this.addr,!1,o4),o7(i,s)}}function ss(t,r){let i=this.cache,s=r.elements;if(void 0===s){if(o8(i,r))return;t.uniformMatrix4fv(this.addr,!1,r),o7(i,r)}else{if(o8(i,s))return;o5.set(s),t.uniformMatrix4fv(this.addr,!1,o5),o7(i,s)}}function sl(t,r){let i=this.cache;i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r)}function su(t,r){let i=this.cache;if(void 0!==r.x)(i[0]!==r.x||i[1]!==r.y)&&(t.uniform2i(this.addr,r.x,r.y),i[0]=r.x,i[1]=r.y);else{if(o8(i,r))return;t.uniform2iv(this.addr,r),o7(i,r)}}function sc(t,r){let i=this.cache;if(void 0!==r.x)(i[0]!==r.x||i[1]!==r.y||i[2]!==r.z)&&(t.uniform3i(this.addr,r.x,r.y,r.z),i[0]=r.x,i[1]=r.y,i[2]=r.z);else{if(o8(i,r))return;t.uniform3iv(this.addr,r),o7(i,r)}}function sh(t,r){let i=this.cache;if(void 0!==r.x)(i[0]!==r.x||i[1]!==r.y||i[2]!==r.z||i[3]!==r.w)&&(t.uniform4i(this.addr,r.x,r.y,r.z,r.w),i[0]=r.x,i[1]=r.y,i[2]=r.z,i[3]=r.w);else{if(o8(i,r))return;t.uniform4iv(this.addr,r),o7(i,r)}}function sd(t,r){let i=this.cache;i[0]!==r&&(t.uniform1ui(this.addr,r),i[0]=r)}function sp(t,r){let i=this.cache;if(void 0!==r.x)(i[0]!==r.x||i[1]!==r.y)&&(t.uniform2ui(this.addr,r.x,r.y),i[0]=r.x,i[1]=r.y);else{if(o8(i,r))return;t.uniform2uiv(this.addr,r),o7(i,r)}}function sf(t,r){let i=this.cache;if(void 0!==r.x)(i[0]!==r.x||i[1]!==r.y||i[2]!==r.z)&&(t.uniform3ui(this.addr,r.x,r.y,r.z),i[0]=r.x,i[1]=r.y,i[2]=r.z);else{if(o8(i,r))return;t.uniform3uiv(this.addr,r),o7(i,r)}}function sg(t,r){let i=this.cache;if(void 0!==r.x)(i[0]!==r.x||i[1]!==r.y||i[2]!==r.z||i[3]!==r.w)&&(t.uniform4ui(this.addr,r.x,r.y,r.z,r.w),i[0]=r.x,i[1]=r.y,i[2]=r.z,i[3]=r.w);else{if(o8(i,r))return;t.uniform4uiv(this.addr,r),o7(i,r)}}function sm(t,r,i){let s;let u=this.cache,c=i.allocateTextureUnit();u[0]!==c&&(t.uniform1i(this.addr,c),u[0]=c),this.type===t.SAMPLER_2D_SHADOW?(oq.compareFunction=re,s=oq):s=oK,i.setTexture2D(r||s,c)}function sv(t,r,i){let s=this.cache,u=i.allocateTextureUnit();s[0]!==u&&(t.uniform1i(this.addr,u),s[0]=u),i.setTexture3D(r||o0,u)}function sy(t,r,i){let s=this.cache,u=i.allocateTextureUnit();s[0]!==u&&(t.uniform1i(this.addr,u),s[0]=u),i.setTextureCube(r||o1,u)}function sx(t,r,i){let s=this.cache,u=i.allocateTextureUnit();s[0]!==u&&(t.uniform1i(this.addr,u),s[0]=u),i.setTexture2DArray(r||oQ,u)}function s_(t,r){t.uniform1fv(this.addr,r)}function sb(t,r){let i=o9(r,this.size,2);t.uniform2fv(this.addr,i)}function sw(t,r){let i=o9(r,this.size,3);t.uniform3fv(this.addr,i)}function sS(t,r){let i=o9(r,this.size,4);t.uniform4fv(this.addr,i)}function sM(t,r){let i=o9(r,this.size,4);t.uniformMatrix2fv(this.addr,!1,i)}function sA(t,r){let i=o9(r,this.size,9);t.uniformMatrix3fv(this.addr,!1,i)}function sC(t,r){let i=o9(r,this.size,16);t.uniformMatrix4fv(this.addr,!1,i)}function sT(t,r){t.uniform1iv(this.addr,r)}function sE(t,r){t.uniform2iv(this.addr,r)}function sI(t,r){t.uniform3iv(this.addr,r)}function sD(t,r){t.uniform4iv(this.addr,r)}function sP(t,r){t.uniform1uiv(this.addr,r)}function sR(t,r){t.uniform2uiv(this.addr,r)}function sL(t,r){t.uniform3uiv(this.addr,r)}function sk(t,r){t.uniform4uiv(this.addr,r)}function sO(t,r,i){let s=this.cache,u=r.length,c=se(i,u);!o8(s,c)&&(t.uniform1iv(this.addr,c),o7(s,c));for(let t=0;t!==u;++t)i.setTexture2D(r[t]||oK,c[t])}function sB(t,r,i){let s=this.cache,u=r.length,c=se(i,u);!o8(s,c)&&(t.uniform1iv(this.addr,c),o7(s,c));for(let t=0;t!==u;++t)i.setTexture3D(r[t]||o0,c[t])}function sN(t,r,i){let s=this.cache,u=r.length,c=se(i,u);!o8(s,c)&&(t.uniform1iv(this.addr,c),o7(s,c));for(let t=0;t!==u;++t)i.setTextureCube(r[t]||o1,c[t])}function sF(t,r,i){let s=this.cache,u=r.length,c=se(i,u);!o8(s,c)&&(t.uniform1iv(this.addr,c),o7(s,c));for(let t=0;t!==u;++t)i.setTexture2DArray(r[t]||oQ,c[t])}class sz{constructor(t,r,i){this.id=t,this.addr=i,this.cache=[],this.type=r.type,this.setValue=function(t){switch(t){case 5126:return st;case 35664:return sn;case 35665:return sr;case 35666:return si;case 35674:return sa;case 35675:return so;case 35676:return ss;case 5124:case 35670:return sl;case 35667:case 35671:return su;case 35668:case 35672:return sc;case 35669:case 35673:return sh;case 5125:return sd;case 36294:return sp;case 36295:return sf;case 36296:return sg;case 35678:case 36198:case 36298:case 36306:case 35682:return sm;case 35679:case 36299:case 36307:return sv;case 35680:case 36300:case 36308:case 36293:return sy;case 36289:case 36303:case 36311:case 36292:return sx}}(r.type)}}class sU{constructor(t,r,i){this.id=t,this.addr=i,this.cache=[],this.type=r.type,this.size=r.size,this.setValue=function(t){switch(t){case 5126:return s_;case 35664:return sb;case 35665:return sw;case 35666:return sS;case 35674:return sM;case 35675:return sA;case 35676:return sC;case 5124:case 35670:return sT;case 35667:case 35671:return sE;case 35668:case 35672:return sI;case 35669:case 35673:return sD;case 5125:return sP;case 36294:return sR;case 36295:return sL;case 36296:return sk;case 35678:case 36198:case 36298:case 36306:case 35682:return sO;case 35679:case 36299:case 36307:return sB;case 35680:case 36300:case 36308:case 36293:return sN;case 36289:case 36303:case 36311:case 36292:return sF}}(r.type)}}class sH{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,r,i){let s=this.seq;for(let u=0,c=s.length;u!==c;++u){let c=s[u];c.setValue(t,r[c.id],i)}}}let sG=/(\w+)(\])?(\[|\.)?/g;function sV(t,r){t.seq.push(r),t.map[r.id]=r}class sW{constructor(t,r){this.seq=[],this.map={};let i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){let i=t.getActiveUniform(r,s),u=t.getUniformLocation(r,i.name);!function(t,r,i){let s=t.name,u=s.length;for(sG.lastIndex=0;;){let c=sG.exec(s),h=sG.lastIndex,p=c[1],f="]"===c[2],v=c[3];if(f&&(p|=0),void 0===v||"["===v&&h+2===u){sV(i,void 0===v?new sz(p,t,r):new sU(p,t,r));break}{let t=i.map[p];void 0===t&&sV(i,t=new sH(p)),i=t}}}(i,u,this)}}setValue(t,r,i,s){let u=this.map[r];void 0!==u&&u.setValue(t,i,s)}setOptional(t,r,i){let s=r[i];void 0!==s&&this.setValue(t,i,s)}static upload(t,r,i,s){for(let u=0,c=r.length;u!==c;++u){let c=r[u],h=i[c.id];!1!==h.needsUpdate&&c.setValue(t,h.value,s)}}static seqWithValue(t,r){let i=[];for(let s=0,u=t.length;s!==u;++s){let u=t[s];u.id in r&&i.push(u)}return i}}function sj(t,r,i){let s=t.createShader(r);return t.shaderSource(s,i),t.compileShader(s),s}let sX=0,sY=new rP;function s$(t,r,i){let s=t.getShaderParameter(r,t.COMPILE_STATUS),u=t.getShaderInfoLog(r).trim();if(s&&""===u)return"";let c=/ERROR: 0:(\d+)/.exec(u);if(!c)return u;{let s=parseInt(c[1]);return i.toUpperCase()+"\n\n"+u+"\n\n"+function(t,r){let i=t.split("\n"),s=[],u=Math.max(r-6,0),c=Math.min(r+6,i.length);for(let t=u;t<c;t++){let u=t+1;s.push(`${u===r?">":" "} ${u}: ${i[t]}`)}return s.join("\n")}(t.getShaderSource(r),s)}}let sJ=new r8;function sZ(t){return""!==t}function sK(t,r){let i=r.numSpotLightShadows+r.numSpotLightMaps-r.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,r.numDirLights).replace(/NUM_SPOT_LIGHTS/g,r.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,r.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,r.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,r.numPointLights).replace(/NUM_HEMI_LIGHTS/g,r.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,r.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,r.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,r.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,r.numPointLightShadows)}function sq(t,r){return t.replace(/NUM_CLIPPING_PLANES/g,r.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,r.numClippingPlanes-r.numClipIntersection)}let sQ=/^[ \t]*#include +<([\w\d./]+)>/gm;function s0(t){return t.replace(sQ,s2)}let s1=new Map;function s2(t,r){let i=of[r];if(void 0===i){let t=s1.get(r);if(void 0!==t)i=of[t];else throw Error("Can not resolve #include <"+r+">")}return s0(i)}let s3=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function s5(t){return t.replace(s3,s4)}function s4(t,r,i,s){let u="";for(let t=parseInt(r);t<parseInt(i);t++)u+=s.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return u}function s6(t){let r=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return"highp"===t.precision?r+="\n#define HIGH_PRECISION":"mediump"===t.precision?r+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(r+="\n#define LOW_PRECISION"),r}function s9(t,r,i,s){var u,c,h;let p,f,v,y,x,_;let b=t.getContext(),w=i.defines,S=i.vertexShader,M=i.fragmentShader;let A=(x="SHADOWMAP_TYPE_BASIC",(u=i).shadowMapType===ex?x="SHADOWMAP_TYPE_PCF":u.shadowMapType===e_?x="SHADOWMAP_TYPE_PCF_SOFT":u.shadowMapType===eb&&(x="SHADOWMAP_TYPE_VSM"),x),C=function(t){let r="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case tu:case tc:r="ENVMAP_TYPE_CUBE";break;case tp:r="ENVMAP_TYPE_CUBE_UV"}return r}(i);let T=(_="ENVMAP_MODE_REFLECTION",(c=i).envMap&&c.envMapMode===tc&&(_="ENVMAP_MODE_REFRACTION"),_),I=function(t){let r="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case e4:r="ENVMAP_BLENDING_MULTIPLY";break;case e6:r="ENVMAP_BLENDING_MIX";break;case e9:r="ENVMAP_BLENDING_ADD"}return r}(i),D=function(t){let r=t.envMapCubeUVHeight;if(null===r)return null;let i=Math.log2(r)-2;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:1/r,maxMip:i}}(i);let P=[(h=i).extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",h.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(sZ).join("\n"),R=function(t){let r=[];for(let i in t){let s=t[i];!1!==s&&r.push("#define "+i+" "+s)}return r.join("\n")}(w),L=b.createProgram(),k=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?((p=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,R].filter(sZ).join("\n")).length>0&&(p+="\n"),(f=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,R].filter(sZ).join("\n")).length>0&&(f+="\n")):(p=[s6(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,R,i.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",i.batching?"#define USE_BATCHING":"",i.batchingColor?"#define USE_BATCHING_COLOR":"",i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.instancingMorph?"#define USE_INSTANCING_MORPH":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+T:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+i.anisotropyMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents&&!1===i.flatShading?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.morphColors?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+A:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(sZ).join("\n"),f=[s6(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,R,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+C:"",i.envMap?"#define "+T:"",i.envMap?"#define "+I:"",D?"#define CUBEUV_TEXEL_WIDTH "+D.texelWidth:"",D?"#define CUBEUV_TEXEL_HEIGHT "+D.texelHeight:"",D?"#define CUBEUV_MAX_MIP "+D.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.dispersion?"#define USE_DISPERSION":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents&&!1===i.flatShading?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor||i.batchingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+A:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==e8?"#define TONE_MAPPING":"",i.toneMapping!==e8?of.tonemapping_pars_fragment:"",i.toneMapping!==e8?function(t,r){let i;switch(r){case e7:i="Linear";break;case te:i="Reinhard";break;case tt:i="Cineon";break;case tn:i="ACESFilmic";break;case ti:i="AgX";break;case ta:i="Neutral";break;case tr:i="Custom";break;default:i="Linear"}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",of.colorspace_pars_fragment,function(t,r){let i=function(t){rU._getMatrix(sY,rU.workingColorSpace,t);let r=`mat3( ${sY.elements.map(t=>t.toFixed(4))} )`;switch(rU.getTransfer(t)){case nV:return[r,"LinearTransferOETF"];case nW:return[r,"sRGBTransferOETF"];default:return[r,"LinearTransferOETF"]}}(r);return`vec4 ${t}( vec4 value ) {
	return ${i[1]}( vec4( value.rgb * ${i[0]}, value.a ) );
}`}("linearToOutputTexel",i.outputColorSpace),function(){rU.getLuminanceCoefficients(sJ);let t=sJ.x.toFixed(4),r=sJ.y.toFixed(4),i=sJ.z.toFixed(4);return`float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( ${t}, ${r}, ${i} );
	return dot( weights, rgb );
}`}(),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(sZ).join("\n")),S=sq(S=sK(S=s0(S),i),i),M=sq(M=sK(M=s0(M),i),i),S=s5(S),M=s5(M),!0!==i.isRawShaderMaterial&&(k="#version 300 es\n",p=[P,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+p,f=["#define varying in",i.glslVersion===rg?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===rg?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+f);let O=k+p+S,B=k+f+M,N=sj(b,b.VERTEX_SHADER,O),F=sj(b,b.FRAGMENT_SHADER,B);function z(r){if(t.debug.checkShaderErrors){let i=b.getProgramInfoLog(L).trim(),s=b.getShaderInfoLog(N).trim(),u=b.getShaderInfoLog(F).trim(),c=!0,h=!0;!1===b.getProgramParameter(L,b.LINK_STATUS)?(c=!1,"function"==typeof t.debug.onShaderError?t.debug.onShaderError(b,L,N,F):(s$(b,N,"vertex"),s$(b,F,"fragment"))):""!==i||(""===s||""===u)&&(h=!1),h&&(r.diagnostics={runnable:c,programLog:i,vertexShader:{log:s,prefix:p},fragmentShader:{log:u,prefix:f}})}b.deleteShader(N),b.deleteShader(F),v=new sW(b,L),y=function(t,r){let i={},s=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES);for(let u=0;u<s;u++){let s=t.getActiveAttrib(r,u),c=s.name,h=1;s.type===t.FLOAT_MAT2&&(h=2),s.type===t.FLOAT_MAT3&&(h=3),s.type===t.FLOAT_MAT4&&(h=4),i[c]={type:s.type,location:t.getAttribLocation(r,c),locationSize:h}}return i}(b,L)}b.attachShader(L,N),b.attachShader(L,F),void 0!==i.index0AttributeName?b.bindAttribLocation(L,0,i.index0AttributeName):!0===i.morphTargets&&b.bindAttribLocation(L,0,"position"),b.linkProgram(L),this.getUniforms=function(){return void 0===v&&z(this),v},this.getAttributes=function(){return void 0===y&&z(this),y};let U=!1===i.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===U&&(U=b.getProgramParameter(L,37297)),U},this.destroy=function(){s.releaseStatesOfProgram(this),b.deleteProgram(L),this.program=void 0},this.type=i.shaderType,this.name=i.shaderName,this.id=sX++,this.cacheKey=r,this.usedTimes=1,this.program=L,this.vertexShader=N,this.fragmentShader=F,this}let s8=0;class s7{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let r=t.vertexShader,i=t.fragmentShader,s=this._getShaderStage(r),u=this._getShaderStage(i),c=this._getShaderCacheForMaterial(t);return!1===c.has(s)&&(c.add(s),s.usedTimes++),!1===c.has(u)&&(c.add(u),u.usedTimes++),this}remove(t){for(let r of this.materialCache.get(t))r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let r=this.materialCache,i=r.get(t);return void 0===i&&(i=new Set,r.set(t,i)),i}_getShaderStage(t){let r=this.shaderCache,i=r.get(t);return void 0===i&&(i=new le(t),r.set(t,i)),i}}class le{constructor(t){this.id=s8++,this.code=t,this.usedTimes=0}}function lt(t,r,i,s,u,c,h){let p=new iH,f=new s7,v=new Set,y=[],x=u.logarithmicDepthBuffer,_=u.vertexTextures,b=u.precision,w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(t){return(v.add(t),0===t)?"uv":`uv${t}`}return{getParameters:function(c,p,y,M,A){let C,T,I,D;let P=M.fog,R=A.geometry,L=c.isMeshStandardMaterial?M.environment:null,k=(c.isMeshStandardMaterial?i:r).get(c.envMap||L),O=k&&k.mapping===tp?k.image.height:null,B=w[c.type];null!==c.precision&&(b=u.getMaxPrecision(c.precision),c.precision);let N=R.morphAttributes.position||R.morphAttributes.normal||R.morphAttributes.color,F=void 0!==N?N.length:0,z=0;if(void 0!==R.morphAttributes.position&&(z=1),void 0!==R.morphAttributes.normal&&(z=2),void 0!==R.morphAttributes.color&&(z=3),B){let t=om[B];C=t.vertexShader,T=t.fragmentShader}else C=c.vertexShader,T=c.fragmentShader,f.update(c),I=f.getVertexShaderID(c),D=f.getFragmentShaderID(c);let U=t.getRenderTarget(),H=t.state.buffers.depth.getReversed(),G=!0===A.isInstancedMesh,V=!0===A.isBatchedMesh,W=!!c.map,j=!!c.matcap,X=!!k,Y=!!c.aoMap,$=!!c.lightMap,J=!!c.bumpMap,Z=!!c.normalMap,K=!!c.displacementMap,q=!!c.emissiveMap,Q=!!c.metalnessMap,ee=!!c.roughnessMap,et=c.anisotropy>0,en=c.clearcoat>0,er=c.dispersion>0,ei=c.iridescence>0,ea=c.sheen>0,eo=c.transmission>0,es=et&&!!c.anisotropyMap,el=en&&!!c.clearcoatMap,eu=en&&!!c.clearcoatNormalMap,ec=en&&!!c.clearcoatRoughnessMap,eh=ei&&!!c.iridescenceMap,ed=ei&&!!c.iridescenceThicknessMap,ep=ea&&!!c.sheenColorMap,ef=ea&&!!c.sheenRoughnessMap,eg=!!c.specularMap,em=!!c.specularColorMap,ev=!!c.specularIntensityMap,ey=eo&&!!c.transmissionMap,ex=eo&&!!c.thicknessMap,e_=!!c.gradientMap,eb=!!c.alphaMap,ew=c.alphaTest>0,eA=!!c.alphaHash,eT=!!c.extensions,eE=e8;c.toneMapped&&(null===U||!0===U.isXRRenderTarget)&&(eE=t.toneMapping);let eI={shaderID:B,shaderType:c.type,shaderName:c.name,vertexShader:C,fragmentShader:T,defines:c.defines,customVertexShaderID:I,customFragmentShaderID:D,isRawShaderMaterial:!0===c.isRawShaderMaterial,glslVersion:c.glslVersion,precision:b,batching:V,batchingColor:V&&null!==A._colorsTexture,instancing:G,instancingColor:G&&null!==A.instanceColor,instancingMorph:G&&null!==A.morphTexture,supportsVertexTextures:_,outputColorSpace:null===U?t.outputColorSpace:!0===U.isXRRenderTarget?U.texture.colorSpace:nG,alphaToCoverage:!!c.alphaToCoverage,map:W,matcap:j,envMap:X,envMapMode:X&&k.mapping,envMapCubeUVHeight:O,aoMap:Y,lightMap:$,bumpMap:J,normalMap:Z,displacementMap:_&&K,emissiveMap:q,normalMapObjectSpace:Z&&c.normalMapType===nz,normalMapTangentSpace:Z&&c.normalMapType===nF,metalnessMap:Q,roughnessMap:ee,anisotropy:et,anisotropyMap:es,clearcoat:en,clearcoatMap:el,clearcoatNormalMap:eu,clearcoatRoughnessMap:ec,dispersion:er,iridescence:ei,iridescenceMap:eh,iridescenceThicknessMap:ed,sheen:ea,sheenColorMap:ep,sheenRoughnessMap:ef,specularMap:eg,specularColorMap:em,specularIntensityMap:ev,transmission:eo,transmissionMap:ey,thicknessMap:ex,gradientMap:e_,opaque:!1===c.transparent&&c.blending===eC&&!1===c.alphaToCoverage,alphaMap:eb,alphaTest:ew,alphaHash:eA,combine:c.combine,mapUv:W&&S(c.map.channel),aoMapUv:Y&&S(c.aoMap.channel),lightMapUv:$&&S(c.lightMap.channel),bumpMapUv:J&&S(c.bumpMap.channel),normalMapUv:Z&&S(c.normalMap.channel),displacementMapUv:K&&S(c.displacementMap.channel),emissiveMapUv:q&&S(c.emissiveMap.channel),metalnessMapUv:Q&&S(c.metalnessMap.channel),roughnessMapUv:ee&&S(c.roughnessMap.channel),anisotropyMapUv:es&&S(c.anisotropyMap.channel),clearcoatMapUv:el&&S(c.clearcoatMap.channel),clearcoatNormalMapUv:eu&&S(c.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ec&&S(c.clearcoatRoughnessMap.channel),iridescenceMapUv:eh&&S(c.iridescenceMap.channel),iridescenceThicknessMapUv:ed&&S(c.iridescenceThicknessMap.channel),sheenColorMapUv:ep&&S(c.sheenColorMap.channel),sheenRoughnessMapUv:ef&&S(c.sheenRoughnessMap.channel),specularMapUv:eg&&S(c.specularMap.channel),specularColorMapUv:em&&S(c.specularColorMap.channel),specularIntensityMapUv:ev&&S(c.specularIntensityMap.channel),transmissionMapUv:ey&&S(c.transmissionMap.channel),thicknessMapUv:ex&&S(c.thicknessMap.channel),alphaMapUv:eb&&S(c.alphaMap.channel),vertexTangents:!!R.attributes.tangent&&(Z||et),vertexColors:c.vertexColors,vertexAlphas:!0===c.vertexColors&&!!R.attributes.color&&4===R.attributes.color.itemSize,pointsUvs:!0===A.isPoints&&!!R.attributes.uv&&(W||eb),fog:!!P,useFog:!0===c.fog,fogExp2:!!P&&P.isFogExp2,flatShading:!0===c.flatShading,sizeAttenuation:!0===c.sizeAttenuation,logarithmicDepthBuffer:x,reverseDepthBuffer:H,skinning:!0===A.isSkinnedMesh,morphTargets:void 0!==R.morphAttributes.position,morphNormals:void 0!==R.morphAttributes.normal,morphColors:void 0!==R.morphAttributes.color,morphTargetsCount:F,morphTextureStride:z,numDirLights:p.directional.length,numPointLights:p.point.length,numSpotLights:p.spot.length,numSpotLightMaps:p.spotLightMap.length,numRectAreaLights:p.rectArea.length,numHemiLights:p.hemi.length,numDirLightShadows:p.directionalShadowMap.length,numPointLightShadows:p.pointShadowMap.length,numSpotLightShadows:p.spotShadowMap.length,numSpotLightShadowsWithMaps:p.numSpotLightShadowsWithMaps,numLightProbes:p.numLightProbes,numClippingPlanes:h.numPlanes,numClipIntersection:h.numIntersection,dithering:c.dithering,shadowMapEnabled:t.shadowMap.enabled&&y.length>0,shadowMapType:t.shadowMap.type,toneMapping:eE,decodeVideoTexture:W&&!0===c.map.isVideoTexture&&rU.getTransfer(c.map.colorSpace)===nW,decodeVideoTextureEmissive:q&&!0===c.emissiveMap.isVideoTexture&&rU.getTransfer(c.emissiveMap.colorSpace)===nW,premultipliedAlpha:c.premultipliedAlpha,doubleSided:c.side===eM,flipSided:c.side===eS,useDepthPacking:c.depthPacking>=0,depthPacking:c.depthPacking||0,index0AttributeName:c.index0AttributeName,extensionClipCullDistance:eT&&!0===c.extensions.clipCullDistance&&s.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(eT&&!0===c.extensions.multiDraw||V)&&s.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:s.has("KHR_parallel_shader_compile"),customProgramCacheKey:c.customProgramCacheKey()};return eI.vertexUv1s=v.has(1),eI.vertexUv2s=v.has(2),eI.vertexUv3s=v.has(3),v.clear(),eI},getProgramCacheKey:function(r){let i=[];if(r.shaderID?i.push(r.shaderID):(i.push(r.customVertexShaderID),i.push(r.customFragmentShaderID)),void 0!==r.defines)for(let t in r.defines)i.push(t),i.push(r.defines[t]);return!1===r.isRawShaderMaterial&&(function(t,r){t.push(r.precision),t.push(r.outputColorSpace),t.push(r.envMapMode),t.push(r.envMapCubeUVHeight),t.push(r.mapUv),t.push(r.alphaMapUv),t.push(r.lightMapUv),t.push(r.aoMapUv),t.push(r.bumpMapUv),t.push(r.normalMapUv),t.push(r.displacementMapUv),t.push(r.emissiveMapUv),t.push(r.metalnessMapUv),t.push(r.roughnessMapUv),t.push(r.anisotropyMapUv),t.push(r.clearcoatMapUv),t.push(r.clearcoatNormalMapUv),t.push(r.clearcoatRoughnessMapUv),t.push(r.iridescenceMapUv),t.push(r.iridescenceThicknessMapUv),t.push(r.sheenColorMapUv),t.push(r.sheenRoughnessMapUv),t.push(r.specularMapUv),t.push(r.specularColorMapUv),t.push(r.specularIntensityMapUv),t.push(r.transmissionMapUv),t.push(r.thicknessMapUv),t.push(r.combine),t.push(r.fogExp2),t.push(r.sizeAttenuation),t.push(r.morphTargetsCount),t.push(r.morphAttributeCount),t.push(r.numDirLights),t.push(r.numPointLights),t.push(r.numSpotLights),t.push(r.numSpotLightMaps),t.push(r.numHemiLights),t.push(r.numRectAreaLights),t.push(r.numDirLightShadows),t.push(r.numPointLightShadows),t.push(r.numSpotLightShadows),t.push(r.numSpotLightShadowsWithMaps),t.push(r.numLightProbes),t.push(r.shadowMapType),t.push(r.toneMapping),t.push(r.numClippingPlanes),t.push(r.numClipIntersection),t.push(r.depthPacking)}(i,r),function(t,r){p.disableAll(),r.supportsVertexTextures&&p.enable(0),r.instancing&&p.enable(1),r.instancingColor&&p.enable(2),r.instancingMorph&&p.enable(3),r.matcap&&p.enable(4),r.envMap&&p.enable(5),r.normalMapObjectSpace&&p.enable(6),r.normalMapTangentSpace&&p.enable(7),r.clearcoat&&p.enable(8),r.iridescence&&p.enable(9),r.alphaTest&&p.enable(10),r.vertexColors&&p.enable(11),r.vertexAlphas&&p.enable(12),r.vertexUv1s&&p.enable(13),r.vertexUv2s&&p.enable(14),r.vertexUv3s&&p.enable(15),r.vertexTangents&&p.enable(16),r.anisotropy&&p.enable(17),r.alphaHash&&p.enable(18),r.batching&&p.enable(19),r.dispersion&&p.enable(20),r.batchingColor&&p.enable(21),t.push(p.mask),p.disableAll(),r.fog&&p.enable(0),r.useFog&&p.enable(1),r.flatShading&&p.enable(2),r.logarithmicDepthBuffer&&p.enable(3),r.reverseDepthBuffer&&p.enable(4),r.skinning&&p.enable(5),r.morphTargets&&p.enable(6),r.morphNormals&&p.enable(7),r.morphColors&&p.enable(8),r.premultipliedAlpha&&p.enable(9),r.shadowMapEnabled&&p.enable(10),r.doubleSided&&p.enable(11),r.flipSided&&p.enable(12),r.useDepthPacking&&p.enable(13),r.dithering&&p.enable(14),r.transmission&&p.enable(15),r.sheen&&p.enable(16),r.opaque&&p.enable(17),r.pointsUvs&&p.enable(18),r.decodeVideoTexture&&p.enable(19),r.decodeVideoTextureEmissive&&p.enable(20),r.alphaToCoverage&&p.enable(21),t.push(p.mask)}(i,r),i.push(t.outputColorSpace)),i.push(r.customProgramCacheKey),i.join()},getUniforms:function(t){let r;let i=w[t.type];if(i){let t=om[i];r=a5.clone(t.uniforms)}else r=t.uniforms;return r},acquireProgram:function(r,i){let s;for(let t=0,r=y.length;t<r;t++){let r=y[t];if(r.cacheKey===i){s=r,++s.usedTimes;break}}return void 0===s&&(s=new s9(t,i,r,c),y.push(s)),s},releaseProgram:function(t){if(0==--t.usedTimes){let r=y.indexOf(t);y[r]=y[y.length-1],y.pop(),t.destroy()}},releaseShaderCache:function(t){f.remove(t)},programs:y,dispose:function(){f.dispose()}}}function ln(){let t=new WeakMap;return{has:function(r){return t.has(r)},get:function(r){let i=t.get(r);return void 0===i&&(i={},t.set(r,i)),i},remove:function(r){t.delete(r)},update:function(r,i,s){t.get(r)[i]=s},dispose:function(){t=new WeakMap}}}function lr(t,r){if(t.groupOrder!==r.groupOrder)return t.groupOrder-r.groupOrder;if(t.renderOrder!==r.renderOrder)return t.renderOrder-r.renderOrder;if(t.material.id!==r.material.id)return t.material.id-r.material.id;else if(t.z!==r.z)return t.z-r.z;else return t.id-r.id}function li(t,r){if(t.groupOrder!==r.groupOrder)return t.groupOrder-r.groupOrder;if(t.renderOrder!==r.renderOrder)return t.renderOrder-r.renderOrder;if(t.z!==r.z)return r.z-t.z;else return t.id-r.id}function la(){let t=[],r=0,i=[],s=[],u=[];function c(i,s,u,c,h,p){let f=t[r];return void 0===f?(f={id:i.id,object:i,geometry:s,material:u,groupOrder:c,renderOrder:i.renderOrder,z:h,group:p},t[r]=f):(f.id=i.id,f.object=i,f.geometry=s,f.material=u,f.groupOrder=c,f.renderOrder=i.renderOrder,f.z=h,f.group=p),r++,f}return{opaque:i,transmissive:s,transparent:u,init:function(){r=0,i.length=0,s.length=0,u.length=0},push:function(t,r,h,p,f,v){let y=c(t,r,h,p,f,v);h.transmission>0?s.push(y):!0===h.transparent?u.push(y):i.push(y)},unshift:function(t,r,h,p,f,v){let y=c(t,r,h,p,f,v);h.transmission>0?s.unshift(y):!0===h.transparent?u.unshift(y):i.unshift(y)},finish:function(){for(let i=r,s=t.length;i<s;i++){let r=t[i];if(null===r.id)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.group=null}},sort:function(t,r){i.length>1&&i.sort(t||lr),s.length>1&&s.sort(r||li),u.length>1&&u.sort(r||li)}}}function lo(){let t=new WeakMap;return{get:function(r,i){let s;let u=t.get(r);return void 0===u?(s=new la,t.set(r,[s])):i>=u.length?(s=new la,u.push(s)):s=u[i],s},dispose:function(){t=new WeakMap}}}function ls(){let t={};return{get:function(r){let i;if(void 0!==t[r.id])return t[r.id];switch(r.type){case"DirectionalLight":i={direction:new r8,color:new ad};break;case"SpotLight":i={position:new r8,direction:new r8,color:new ad,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new r8,color:new ad,distance:0,decay:0};break;case"HemisphereLight":i={direction:new r8,skyColor:new ad,groundColor:new ad};break;case"RectAreaLight":i={color:new ad,position:new r8,halfWidth:new r8,halfHeight:new r8}}return t[r.id]=i,i}}}let ll=0;function lu(t,r){return(r.castShadow?2:0)-(t.castShadow?2:0)+(r.map?1:0)-(t.map?1:0)}function lc(t){let r=new ls,i=function(){let t={};return{get:function(r){let i;if(void 0!==t[r.id])return t[r.id];switch(r.type){case"DirectionalLight":case"SpotLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rD};break;case"PointLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rD,shadowCameraNear:1,shadowCameraFar:1e3}}return t[r.id]=i,i}}}(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let t=0;t<9;t++)s.probe.push(new r8);let u=new r8,c=new iD,h=new iD;return{setup:function(u){let c=0,h=0,p=0;for(let t=0;t<9;t++)s.probe[t].set(0,0,0);let f=0,v=0,y=0,x=0,_=0,b=0,w=0,S=0,M=0,A=0,C=0;u.sort(lu);for(let t=0,T=u.length;t<T;t++){let T=u[t],I=T.color,D=T.intensity,P=T.distance,R=T.shadow&&T.shadow.map?T.shadow.map.texture:null;if(T.isAmbientLight)c+=I.r*D,h+=I.g*D,p+=I.b*D;else if(T.isLightProbe){for(let t=0;t<9;t++)s.probe[t].addScaledVector(T.sh.coefficients[t],D);C++}else if(T.isDirectionalLight){let t=r.get(T);if(t.color.copy(T.color).multiplyScalar(T.intensity),T.castShadow){let t=T.shadow,r=i.get(T);r.shadowIntensity=t.intensity,r.shadowBias=t.bias,r.shadowNormalBias=t.normalBias,r.shadowRadius=t.radius,r.shadowMapSize=t.mapSize,s.directionalShadow[f]=r,s.directionalShadowMap[f]=R,s.directionalShadowMatrix[f]=T.shadow.matrix,b++}s.directional[f]=t,f++}else if(T.isSpotLight){let t=r.get(T);t.position.setFromMatrixPosition(T.matrixWorld),t.color.copy(I).multiplyScalar(D),t.distance=P,t.coneCos=Math.cos(T.angle),t.penumbraCos=Math.cos(T.angle*(1-T.penumbra)),t.decay=T.decay,s.spot[y]=t;let u=T.shadow;if(T.map&&(s.spotLightMap[M]=T.map,M++,u.updateMatrices(T),T.castShadow&&A++),s.spotLightMatrix[y]=u.matrix,T.castShadow){let t=i.get(T);t.shadowIntensity=u.intensity,t.shadowBias=u.bias,t.shadowNormalBias=u.normalBias,t.shadowRadius=u.radius,t.shadowMapSize=u.mapSize,s.spotShadow[y]=t,s.spotShadowMap[y]=R,S++}y++}else if(T.isRectAreaLight){let t=r.get(T);t.color.copy(I).multiplyScalar(D),t.halfWidth.set(.5*T.width,0,0),t.halfHeight.set(0,.5*T.height,0),s.rectArea[x]=t,x++}else if(T.isPointLight){let t=r.get(T);if(t.color.copy(T.color).multiplyScalar(T.intensity),t.distance=T.distance,t.decay=T.decay,T.castShadow){let t=T.shadow,r=i.get(T);r.shadowIntensity=t.intensity,r.shadowBias=t.bias,r.shadowNormalBias=t.normalBias,r.shadowRadius=t.radius,r.shadowMapSize=t.mapSize,r.shadowCameraNear=t.camera.near,r.shadowCameraFar=t.camera.far,s.pointShadow[v]=r,s.pointShadowMap[v]=R,s.pointShadowMatrix[v]=T.shadow.matrix,w++}s.point[v]=t,v++}else if(T.isHemisphereLight){let t=r.get(T);t.skyColor.copy(T.color).multiplyScalar(D),t.groundColor.copy(T.groundColor).multiplyScalar(D),s.hemi[_]=t,_++}}x>0&&(!0===t.has("OES_texture_float_linear")?(s.rectAreaLTC1=og.LTC_FLOAT_1,s.rectAreaLTC2=og.LTC_FLOAT_2):(s.rectAreaLTC1=og.LTC_HALF_1,s.rectAreaLTC2=og.LTC_HALF_2)),s.ambient[0]=c,s.ambient[1]=h,s.ambient[2]=p;let T=s.hash;(T.directionalLength!==f||T.pointLength!==v||T.spotLength!==y||T.rectAreaLength!==x||T.hemiLength!==_||T.numDirectionalShadows!==b||T.numPointShadows!==w||T.numSpotShadows!==S||T.numSpotMaps!==M||T.numLightProbes!==C)&&(s.directional.length=f,s.spot.length=y,s.rectArea.length=x,s.point.length=v,s.hemi.length=_,s.directionalShadow.length=b,s.directionalShadowMap.length=b,s.pointShadow.length=w,s.pointShadowMap.length=w,s.spotShadow.length=S,s.spotShadowMap.length=S,s.directionalShadowMatrix.length=b,s.pointShadowMatrix.length=w,s.spotLightMatrix.length=S+M-A,s.spotLightMap.length=M,s.numSpotLightShadowsWithMaps=A,s.numLightProbes=C,T.directionalLength=f,T.pointLength=v,T.spotLength=y,T.rectAreaLength=x,T.hemiLength=_,T.numDirectionalShadows=b,T.numPointShadows=w,T.numSpotShadows=S,T.numSpotMaps=M,T.numLightProbes=C,s.version=ll++)},setupView:function(t,r){let i=0,p=0,f=0,v=0,y=0,x=r.matrixWorldInverse;for(let r=0,_=t.length;r<_;r++){let _=t[r];if(_.isDirectionalLight){let t=s.directional[i];t.direction.setFromMatrixPosition(_.matrixWorld),u.setFromMatrixPosition(_.target.matrixWorld),t.direction.sub(u),t.direction.transformDirection(x),i++}else if(_.isSpotLight){let t=s.spot[f];t.position.setFromMatrixPosition(_.matrixWorld),t.position.applyMatrix4(x),t.direction.setFromMatrixPosition(_.matrixWorld),u.setFromMatrixPosition(_.target.matrixWorld),t.direction.sub(u),t.direction.transformDirection(x),f++}else if(_.isRectAreaLight){let t=s.rectArea[v];t.position.setFromMatrixPosition(_.matrixWorld),t.position.applyMatrix4(x),h.identity(),c.copy(_.matrixWorld),c.premultiply(x),h.extractRotation(c),t.halfWidth.set(.5*_.width,0,0),t.halfHeight.set(0,.5*_.height,0),t.halfWidth.applyMatrix4(h),t.halfHeight.applyMatrix4(h),v++}else if(_.isPointLight){let t=s.point[p];t.position.setFromMatrixPosition(_.matrixWorld),t.position.applyMatrix4(x),p++}else if(_.isHemisphereLight){let t=s.hemi[y];t.direction.setFromMatrixPosition(_.matrixWorld),t.direction.transformDirection(x),y++}}},state:s}}function lh(t){let r=new lc(t),i=[],s=[],u={lightsArray:i,shadowsArray:s,camera:null,lights:r,transmissionRenderTarget:{}};return{init:function(t){u.camera=t,i.length=0,s.length=0},state:u,setupLights:function(){r.setup(i)},setupLightsView:function(t){r.setupView(i,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){s.push(t)}}}function ld(t){let r=new WeakMap;return{get:function(i,s=0){let u;let c=r.get(i);return void 0===c?(u=new lh(t),r.set(i,[u])):s>=c.length?(u=new lh(t),c.push(u)):u=c[s],u},dispose:function(){r=new WeakMap}}}class lp extends ag{static get type(){return"MeshDepthMaterial"}constructor(t){super(),this.isMeshDepthMaterial=!0,this.depthPacking=nk,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class lf extends ag{static get type(){return"MeshDistanceMaterial"}constructor(t){super(),this.isMeshDistanceMaterial=!0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function lg(t,r,i){let s=new oc,u=new rD,c=new rD,h=new r0,p=new lp({depthPacking:nO}),f=new lf,v={},y=i.maxTextureSize,x={[ew]:eS,[eS]:ew,[eM]:eM},_=new a4({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new rD},radius:{value:4}},vertexShader:"void main() {\n	gl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n	const float samples = float( VSM_SAMPLES );\n	float mean = 0.0;\n	float squared_mean = 0.0;\n	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n	for ( float i = 0.0; i < samples; i ++ ) {\n		float uvOffset = uvStart + i * uvStride;\n		#ifdef HORIZONTAL_PASS\n			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n			mean += distribution.x;\n			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n		#else\n			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n			mean += depth;\n			squared_mean += depth * depth;\n		#endif\n	}\n	mean = mean / samples;\n	squared_mean = squared_mean / samples;\n	float std_dev = sqrt( squared_mean - mean * mean );\n	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),b=_.clone();b.defines.HORIZONTAL_PASS=1;let w=new aU;w.setAttribute("position",new aS(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let S=new aq(w,_),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ex;let A=this.type;this.render=function(i,p,f){if(!1===M.enabled||!1===M.autoUpdate&&!1===M.needsUpdate||0===i.length)return;let v=t.getRenderTarget(),x=t.getActiveCubeFace(),w=t.getActiveMipmapLevel(),T=t.state;T.setBlending(eA),T.buffers.color.setClear(1,1,1,1),T.buffers.depth.setTest(!0),T.setScissorTest(!1);let I=A!==eb&&this.type===eb,D=A===eb&&this.type!==eb;for(let v=0,x=i.length;v<x;v++){let x=i[v],w=x.shadow;if(void 0===w||!1===w.autoUpdate&&!1===w.needsUpdate)continue;u.copy(w.mapSize);let M=w.getFrameExtents();if(u.multiply(M),c.copy(w.mapSize),(u.x>y||u.y>y)&&(u.x>y&&(c.x=Math.floor(y/M.x),u.x=c.x*M.x,w.mapSize.x=c.x),u.y>y&&(c.y=Math.floor(y/M.y),u.y=c.y*M.y,w.mapSize.y=c.y)),null===w.map||!0===I||!0===D){let t=this.type!==eb?{minFilter:tv,magFilter:tv}:{};null!==w.map&&w.map.dispose(),w.map=new r2(u.x,u.y,t),w.map.texture.name=x.name+".shadowMap",w.camera.updateProjectionMatrix()}t.setRenderTarget(w.map),t.clear();let A=w.getViewportCount();for(let i=0;i<A;i++){let u=w.getViewport(i);h.set(c.x*u.x,c.y*u.y,c.x*u.z,c.y*u.w),T.viewport(h),w.updateMatrices(x,i),s=w.getFrustum(),function i(u,c,h,p,f){if(!1===u.visible)return;if(u.layers.test(c.layers)&&(u.isMesh||u.isLine||u.isPoints)&&(u.castShadow||u.receiveShadow&&f===eb)&&(!u.frustumCulled||s.intersectsObject(u))){u.modelViewMatrix.multiplyMatrices(h.matrixWorldInverse,u.matrixWorld);let i=r.update(u),s=u.material;if(Array.isArray(s)){let r=i.groups;for(let v=0,y=r.length;v<y;v++){let y=r[v],x=s[y.materialIndex];if(x&&x.visible){let r=C(u,x,p,f);u.onBeforeShadow(t,u,c,h,i,r,y),t.renderBufferDirect(h,null,i,r,u,y),u.onAfterShadow(t,u,c,h,i,r,y)}}}else if(s.visible){let r=C(u,s,p,f);u.onBeforeShadow(t,u,c,h,i,r,null),t.renderBufferDirect(h,null,i,r,u,null),u.onAfterShadow(t,u,c,h,i,r,null)}}let v=u.children;for(let t=0,r=v.length;t<r;t++)i(v[t],c,h,p,f)}(p,f,w.camera,x,this.type)}!0!==w.isPointLightShadow&&this.type===eb&&function(i,s){let c=r.update(S);_.defines.VSM_SAMPLES!==i.blurSamples&&(_.defines.VSM_SAMPLES=i.blurSamples,b.defines.VSM_SAMPLES=i.blurSamples,_.needsUpdate=!0,b.needsUpdate=!0),null===i.mapPass&&(i.mapPass=new r2(u.x,u.y)),_.uniforms.shadow_pass.value=i.map.texture,_.uniforms.resolution.value=i.mapSize,_.uniforms.radius.value=i.radius,t.setRenderTarget(i.mapPass),t.clear(),t.renderBufferDirect(s,null,c,_,S,null),b.uniforms.shadow_pass.value=i.mapPass.texture,b.uniforms.resolution.value=i.mapSize,b.uniforms.radius.value=i.radius,t.setRenderTarget(i.map),t.clear(),t.renderBufferDirect(s,null,c,b,S,null)}(w,f),w.needsUpdate=!1}A=this.type,M.needsUpdate=!1,t.setRenderTarget(v,x,w)};function C(r,i,s,u){let c=null,h=!0===s.isPointLight?r.customDistanceMaterial:r.customDepthMaterial;if(void 0!==h)c=h;else if(c=!0===s.isPointLight?f:p,t.localClippingEnabled&&!0===i.clipShadows&&Array.isArray(i.clippingPlanes)&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0||i.map&&i.alphaTest>0){let t=c.uuid,r=i.uuid,s=v[t];void 0===s&&(s={},v[t]=s);let u=s[r];void 0===u&&(u=c.clone(),s[r]=u,i.addEventListener("dispose",T)),c=u}return c.visible=i.visible,c.wireframe=i.wireframe,u===eb?c.side=null!==i.shadowSide?i.shadowSide:i.side:c.side=null!==i.shadowSide?i.shadowSide:x[i.side],c.alphaMap=i.alphaMap,c.alphaTest=i.alphaTest,c.map=i.map,c.clipShadows=i.clipShadows,c.clippingPlanes=i.clippingPlanes,c.clipIntersection=i.clipIntersection,c.displacementMap=i.displacementMap,c.displacementScale=i.displacementScale,c.displacementBias=i.displacementBias,c.wireframeLinewidth=i.wireframeLinewidth,c.linewidth=i.linewidth,!0===s.isPointLight&&!0===c.isMeshDistanceMaterial&&(t.properties.get(c).light=s),c}function T(t){for(let r in t.target.removeEventListener("dispose",T),v){let i=v[r],s=t.target.uuid;s in i&&(i[s].dispose(),delete i[s])}}}let lm={[eK]:eq,[eQ]:e3,[e1]:e5,[e0]:e2,[eq]:eK,[e3]:eQ,[e5]:e1,[e2]:e0};function lv(t,r){let i=new function(){let r=!1,i=new r0,s=null,u=new r0(0,0,0,0);return{setMask:function(i){s!==i&&!r&&(t.colorMask(i,i,i,i),s=i)},setLocked:function(t){r=t},setClear:function(r,s,c,h,p){!0===p&&(r*=h,s*=h,c*=h),i.set(r,s,c,h),!1===u.equals(i)&&(t.clearColor(r,s,c,h),u.copy(i))},reset:function(){r=!1,s=null,u.set(-1,0,0,0)}}},s=new function(){let i=!1,s=!1,u=null,c=null,h=null;return{setReversed:function(t){if(s!==t){let t=r.get("EXT_clip_control");s?t.clipControlEXT(t.LOWER_LEFT_EXT,t.ZERO_TO_ONE_EXT):t.clipControlEXT(t.LOWER_LEFT_EXT,t.NEGATIVE_ONE_TO_ONE_EXT);let i=h;h=null,this.setClear(i)}s=t},getReversed:function(){return s},setTest:function(r){r?J(t.DEPTH_TEST):Z(t.DEPTH_TEST)},setMask:function(r){u!==r&&!i&&(t.depthMask(r),u=r)},setFunc:function(r){if(s&&(r=lm[r]),c!==r){switch(r){case eK:t.depthFunc(t.NEVER);break;case eq:t.depthFunc(t.ALWAYS);break;case eQ:t.depthFunc(t.LESS);break;case e0:t.depthFunc(t.LEQUAL);break;case e1:t.depthFunc(t.EQUAL);break;case e2:t.depthFunc(t.GEQUAL);break;case e3:t.depthFunc(t.GREATER);break;case e5:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}c=r}},setLocked:function(t){i=t},setClear:function(r){h!==r&&(s&&(r=1-r),t.clearDepth(r),h=r)},reset:function(){i=!1,u=null,c=null,h=null,s=!1}}},u=new function(){let r=!1,i=null,s=null,u=null,c=null,h=null,p=null,f=null,v=null;return{setTest:function(i){!r&&(i?J(t.STENCIL_TEST):Z(t.STENCIL_TEST))},setMask:function(s){i!==s&&!r&&(t.stencilMask(s),i=s)},setFunc:function(r,i,h){(s!==r||u!==i||c!==h)&&(t.stencilFunc(r,i,h),s=r,u=i,c=h)},setOp:function(r,i,s){(h!==r||p!==i||f!==s)&&(t.stencilOp(r,i,s),h=r,p=i,f=s)},setLocked:function(t){r=t},setClear:function(r){v!==r&&(t.clearStencil(r),v=r)},reset:function(){r=!1,i=null,s=null,u=null,c=null,h=null,p=null,f=null,v=null}}},c=new WeakMap,h=new WeakMap,p={},f={},v=new WeakMap,y=[],x=null,_=!1,b=null,w=null,S=null,M=null,A=null,C=null,T=null,I=new ad(0,0,0),D=0,P=!1,R=null,L=null,k=null,O=null,B=null,N=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),F=!1,z=0,U=t.getParameter(t.VERSION);-1!==U.indexOf("WebGL")?F=(z=parseFloat(/^WebGL (\d)/.exec(U)[1]))>=1:-1!==U.indexOf("OpenGL ES")&&(F=(z=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]))>=2);let H=null,G={},V=t.getParameter(t.SCISSOR_BOX),W=t.getParameter(t.VIEWPORT),j=new r0().fromArray(V),X=new r0().fromArray(W);function Y(r,i,s,u){let c=new Uint8Array(4),h=t.createTexture();t.bindTexture(r,h),t.texParameteri(r,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(r,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let h=0;h<s;h++)r===t.TEXTURE_3D||r===t.TEXTURE_2D_ARRAY?t.texImage3D(i,0,t.RGBA,1,1,u,0,t.RGBA,t.UNSIGNED_BYTE,c):t.texImage2D(i+h,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,c);return h}let $={};function J(r){!0!==p[r]&&(t.enable(r),p[r]=!0)}function Z(r){!1!==p[r]&&(t.disable(r),p[r]=!1)}$[t.TEXTURE_2D]=Y(t.TEXTURE_2D,t.TEXTURE_2D,1),$[t.TEXTURE_CUBE_MAP]=Y(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),$[t.TEXTURE_2D_ARRAY]=Y(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),$[t.TEXTURE_3D]=Y(t.TEXTURE_3D,t.TEXTURE_3D,1,1),i.setClear(0,0,0,1),s.setClear(1),u.setClear(0),J(t.DEPTH_TEST),s.setFunc(e0),ee(!1),et(eg),J(t.CULL_FACE),Q(eA);let K={[eP]:t.FUNC_ADD,[eR]:t.FUNC_SUBTRACT,[eL]:t.FUNC_REVERSE_SUBTRACT};K[ek]=t.MIN,K[eO]=t.MAX;let q={[eB]:t.ZERO,[eN]:t.ONE,[eF]:t.SRC_COLOR,[eU]:t.SRC_ALPHA,[eX]:t.SRC_ALPHA_SATURATE,[eW]:t.DST_COLOR,[eG]:t.DST_ALPHA,[ez]:t.ONE_MINUS_SRC_COLOR,[eH]:t.ONE_MINUS_SRC_ALPHA,[ej]:t.ONE_MINUS_DST_COLOR,[eV]:t.ONE_MINUS_DST_ALPHA,[eY]:t.CONSTANT_COLOR,[e$]:t.ONE_MINUS_CONSTANT_COLOR,[eJ]:t.CONSTANT_ALPHA,[eZ]:t.ONE_MINUS_CONSTANT_ALPHA};function Q(r,i,s,u,c,h,p,f,v,y){if(r===eA){!0===_&&(Z(t.BLEND),_=!1);return}if(!1===_&&(J(t.BLEND),_=!0),r!==eD){if(r!==b||y!==P){if((w!==eP||A!==eP)&&(t.blendEquation(t.FUNC_ADD),w=eP,A=eP),y)switch(r){case eC:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case eT:t.blendFunc(t.ONE,t.ONE);break;case eE:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case eI:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)}else switch(r){case eC:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case eT:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case eE:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case eI:t.blendFunc(t.ZERO,t.SRC_COLOR)}S=null,M=null,C=null,T=null,I.set(0,0,0),D=0,b=r,P=y}return}c=c||i,h=h||s,p=p||u,(i!==w||c!==A)&&(t.blendEquationSeparate(K[i],K[c]),w=i,A=c),(s!==S||u!==M||h!==C||p!==T)&&(t.blendFuncSeparate(q[s],q[u],q[h],q[p]),S=s,M=u,C=h,T=p),(!1===f.equals(I)||v!==D)&&(t.blendColor(f.r,f.g,f.b,v),I.copy(f),D=v),b=r,P=!1}function ee(r){R!==r&&(r?t.frontFace(t.CW):t.frontFace(t.CCW),R=r)}function et(r){r!==ef?(J(t.CULL_FACE),r!==L&&(r===eg?t.cullFace(t.BACK):r===em?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Z(t.CULL_FACE),L=r}function en(r,i,s){r?(J(t.POLYGON_OFFSET_FILL),(O!==i||B!==s)&&(t.polygonOffset(i,s),O=i,B=s)):Z(t.POLYGON_OFFSET_FILL)}return{buffers:{color:i,depth:s,stencil:u},enable:J,disable:Z,bindFramebuffer:function(r,i){return f[r]!==i&&(t.bindFramebuffer(r,i),f[r]=i,r===t.DRAW_FRAMEBUFFER&&(f[t.FRAMEBUFFER]=i),r===t.FRAMEBUFFER&&(f[t.DRAW_FRAMEBUFFER]=i),!0)},drawBuffers:function(r,i){let s=y,u=!1;if(r){void 0===(s=v.get(i))&&(s=[],v.set(i,s));let c=r.textures;if(s.length!==c.length||s[0]!==t.COLOR_ATTACHMENT0){for(let r=0,i=c.length;r<i;r++)s[r]=t.COLOR_ATTACHMENT0+r;s.length=c.length,u=!0}}else s[0]!==t.BACK&&(s[0]=t.BACK,u=!0);u&&t.drawBuffers(s)},useProgram:function(r){return x!==r&&(t.useProgram(r),x=r,!0)},setBlending:Q,setMaterial:function(r,c){r.side===eM?Z(t.CULL_FACE):J(t.CULL_FACE);let h=r.side===eS;c&&(h=!h),ee(h),r.blending===eC&&!1===r.transparent?Q(eA):Q(r.blending,r.blendEquation,r.blendSrc,r.blendDst,r.blendEquationAlpha,r.blendSrcAlpha,r.blendDstAlpha,r.blendColor,r.blendAlpha,r.premultipliedAlpha),s.setFunc(r.depthFunc),s.setTest(r.depthTest),s.setMask(r.depthWrite),i.setMask(r.colorWrite);let p=r.stencilWrite;u.setTest(p),p&&(u.setMask(r.stencilWriteMask),u.setFunc(r.stencilFunc,r.stencilRef,r.stencilFuncMask),u.setOp(r.stencilFail,r.stencilZFail,r.stencilZPass)),en(r.polygonOffset,r.polygonOffsetFactor,r.polygonOffsetUnits),!0===r.alphaToCoverage?J(t.SAMPLE_ALPHA_TO_COVERAGE):Z(t.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:ee,setCullFace:et,setLineWidth:function(r){r!==k&&(F&&t.lineWidth(r),k=r)},setPolygonOffset:en,setScissorTest:function(r){r?J(t.SCISSOR_TEST):Z(t.SCISSOR_TEST)},activeTexture:function(r){void 0===r&&(r=t.TEXTURE0+N-1),H!==r&&(t.activeTexture(r),H=r)},bindTexture:function(r,i,s){void 0===s&&(s=null===H?t.TEXTURE0+N-1:H);let u=G[s];void 0===u&&(u={type:void 0,texture:void 0},G[s]=u),(u.type!==r||u.texture!==i)&&(H!==s&&(t.activeTexture(s),H=s),t.bindTexture(r,i||$[r]),u.type=r,u.texture=i)},unbindTexture:function(){let r=G[H];void 0!==r&&void 0!==r.type&&(t.bindTexture(r.type,null),r.type=void 0,r.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(t){}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){}},updateUBOMapping:function(r,i){let s=h.get(i);void 0===s&&(s=new WeakMap,h.set(i,s));let u=s.get(r);void 0===u&&(u=t.getUniformBlockIndex(i,r.name),s.set(r,u))},uniformBlockBinding:function(r,i){let s=h.get(i).get(r);c.get(i)!==s&&(t.uniformBlockBinding(i,s,r.__bindingPointIndex),c.set(i,s))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(t){}},scissor:function(r){!1===j.equals(r)&&(t.scissor(r.x,r.y,r.z,r.w),j.copy(r))},viewport:function(r){!1===X.equals(r)&&(t.viewport(r.x,r.y,r.z,r.w),X.copy(r))},reset:function(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),s.setReversed(!1),t.clearDepth(1),t.stencilMask(0xffffffff),t.stencilFunc(t.ALWAYS,0,0xffffffff),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),p={},H=null,G={},f={},v=new WeakMap,y=[],x=null,_=!1,b=null,w=null,S=null,M=null,A=null,C=null,T=null,I=new ad(0,0,0),D=0,P=!1,R=null,L=null,k=null,O=null,B=null,j.set(0,0,t.canvas.width,t.canvas.height),X.set(0,0,t.canvas.width,t.canvas.height),i.reset(),s.reset(),u.reset()}}}function ly(t,r,i,s){let u=function(t){switch(t){case tT:case tE:return{byteLength:1,components:1};case tD:case tI:case tk:return{byteLength:2,components:1};case tO:case tB:return{byteLength:2,components:4};case tR:case tP:case tL:return{byteLength:4,components:1};case tF:return{byteLength:4,components:3}}throw Error(`Unknown texture type ${t}.`)}(s);switch(i){case tz:case tG:return t*r;case tV:return t*r*2;case tX:case tY:return t*r/u.components*u.byteLength;case t$:case tJ:return t*r*2/u.components*u.byteLength;case tU:return t*r*3/u.components*u.byteLength;case tH:case tK:return t*r*4/u.components*u.byteLength;case tq:case tQ:return Math.floor((t+3)/4)*Math.floor((r+3)/4)*8;case t0:case t1:return Math.floor((t+3)/4)*Math.floor((r+3)/4)*16;case t3:case t4:return Math.max(t,16)*Math.max(r,8)/4;case t2:case t5:return Math.max(t,8)*Math.max(r,8)/2;case t6:case t9:return Math.floor((t+3)/4)*Math.floor((r+3)/4)*8;case t8:case t7:return Math.floor((t+3)/4)*Math.floor((r+3)/4)*16;case ne:return Math.floor((t+4)/5)*Math.floor((r+3)/4)*16;case nt:return Math.floor((t+4)/5)*Math.floor((r+4)/5)*16;case nn:return Math.floor((t+5)/6)*Math.floor((r+4)/5)*16;case nr:return Math.floor((t+5)/6)*Math.floor((r+5)/6)*16;case ni:return Math.floor((t+7)/8)*Math.floor((r+4)/5)*16;case na:return Math.floor((t+7)/8)*Math.floor((r+5)/6)*16;case no:return Math.floor((t+7)/8)*Math.floor((r+7)/8)*16;case ns:return Math.floor((t+9)/10)*Math.floor((r+4)/5)*16;case nl:return Math.floor((t+9)/10)*Math.floor((r+5)/6)*16;case nu:return Math.floor((t+9)/10)*Math.floor((r+7)/8)*16;case nc:return Math.floor((t+9)/10)*Math.floor((r+9)/10)*16;case nh:return Math.floor((t+11)/12)*Math.floor((r+9)/10)*16;case nd:return Math.floor((t+11)/12)*Math.floor((r+11)/12)*16;case np:case nf:case ng:return Math.ceil(t/4)*Math.ceil(r/4)*16;case nm:case nv:return Math.ceil(t/4)*Math.ceil(r/4)*8;case ny:case nx:return Math.ceil(t/4)*Math.ceil(r/4)*16}throw Error(`Unable to determine texture byte length for ${i} format.`)}let lx={contain:function(t,r){let i=t.image&&t.image.width?t.image.width/t.image.height:1;return i>r?(t.repeat.x=1,t.repeat.y=i/r,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=r/i,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t},cover:function(t,r){let i=t.image&&t.image.width?t.image.width/t.image.height:1;return i>r?(t.repeat.x=r/i,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=i/r,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t},fill:function(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t},getByteLength:ly};function l_(t,r,i,s,u,c,h){let p;let f=r.has("WEBGL_multisampled_render_to_texture")?r.get("WEBGL_multisampled_render_to_texture"):null,v="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),y=new rD,x=new WeakMap,_=new WeakMap,b=!1;try{b="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function w(t,r){return b?new OffscreenCanvas(t,r):rB("canvas")}function S(t,r,i){let s=1,u=J(t);if((u.width>i||u.height>i)&&(s=i/Math.max(u.width,u.height)),s<1&&("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&t instanceof VideoFrame)){let i=Math.floor(s*u.width),c=Math.floor(s*u.height);void 0===p&&(p=w(i,c));let h=r?w(i,c):p;return h.width=i,h.height=c,h.getContext("2d").drawImage(t,0,0,i,c),h}return t}function M(t){return t.generateMipmaps}function A(r){t.generateMipmap(r)}function C(i,s,u,c,h=!1){if(null!==i&&void 0!==t[i])return t[i];let p=s;if(s===t.RED&&(u===t.FLOAT&&(p=t.R32F),u===t.HALF_FLOAT&&(p=t.R16F),u===t.UNSIGNED_BYTE&&(p=t.R8)),s===t.RED_INTEGER&&(u===t.UNSIGNED_BYTE&&(p=t.R8UI),u===t.UNSIGNED_SHORT&&(p=t.R16UI),u===t.UNSIGNED_INT&&(p=t.R32UI),u===t.BYTE&&(p=t.R8I),u===t.SHORT&&(p=t.R16I),u===t.INT&&(p=t.R32I)),s===t.RG&&(u===t.FLOAT&&(p=t.RG32F),u===t.HALF_FLOAT&&(p=t.RG16F),u===t.UNSIGNED_BYTE&&(p=t.RG8)),s===t.RG_INTEGER&&(u===t.UNSIGNED_BYTE&&(p=t.RG8UI),u===t.UNSIGNED_SHORT&&(p=t.RG16UI),u===t.UNSIGNED_INT&&(p=t.RG32UI),u===t.BYTE&&(p=t.RG8I),u===t.SHORT&&(p=t.RG16I),u===t.INT&&(p=t.RG32I)),s===t.RGB_INTEGER&&(u===t.UNSIGNED_BYTE&&(p=t.RGB8UI),u===t.UNSIGNED_SHORT&&(p=t.RGB16UI),u===t.UNSIGNED_INT&&(p=t.RGB32UI),u===t.BYTE&&(p=t.RGB8I),u===t.SHORT&&(p=t.RGB16I),u===t.INT&&(p=t.RGB32I)),s===t.RGBA_INTEGER&&(u===t.UNSIGNED_BYTE&&(p=t.RGBA8UI),u===t.UNSIGNED_SHORT&&(p=t.RGBA16UI),u===t.UNSIGNED_INT&&(p=t.RGBA32UI),u===t.BYTE&&(p=t.RGBA8I),u===t.SHORT&&(p=t.RGBA16I),u===t.INT&&(p=t.RGBA32I)),s===t.RGB&&u===t.UNSIGNED_INT_5_9_9_9_REV&&(p=t.RGB9_E5),s===t.RGBA){let r=h?nV:rU.getTransfer(c);u===t.FLOAT&&(p=t.RGBA32F),u===t.HALF_FLOAT&&(p=t.RGBA16F),u===t.UNSIGNED_BYTE&&(p=r===nW?t.SRGB8_ALPHA8:t.RGBA8),u===t.UNSIGNED_SHORT_4_4_4_4&&(p=t.RGBA4),u===t.UNSIGNED_SHORT_5_5_5_1&&(p=t.RGB5_A1)}return(p===t.R16F||p===t.R32F||p===t.RG16F||p===t.RG32F||p===t.RGBA16F||p===t.RGBA32F)&&r.get("EXT_color_buffer_float"),p}function T(r,i){let s;return r?null===i||i===tR||i===tN?s=t.DEPTH24_STENCIL8:i===tL?s=t.DEPTH32F_STENCIL8:i===tD&&(s=t.DEPTH24_STENCIL8):null===i||i===tR||i===tN?s=t.DEPTH_COMPONENT24:i===tL?s=t.DEPTH_COMPONENT32F:i===tD&&(s=t.DEPTH_COMPONENT16),s}function I(t,r){if(!0===M(t)||t.isFramebufferTexture&&t.minFilter!==tv&&t.minFilter!==tw)return Math.log2(Math.max(r.width,r.height))+1;if(void 0!==t.mipmaps&&t.mipmaps.length>0)return t.mipmaps.length;if(t.isCompressedTexture&&Array.isArray(t.image))return r.mipmaps.length;else return 1}function D(t){let r=t.target;r.removeEventListener("dispose",D),function(t){let r=s.get(t);if(void 0===r.__webglInit)return;let i=t.source,u=_.get(i);if(u){let s=u[r.__cacheKey];s.usedTimes--,0===s.usedTimes&&R(t),0===Object.keys(u).length&&_.delete(i)}s.remove(t)}(r),r.isVideoTexture&&x.delete(r)}function P(r){let i=r.target;i.removeEventListener("dispose",P),function(r){let i=s.get(r);if(r.depthTexture&&(r.depthTexture.dispose(),s.remove(r.depthTexture)),r.isWebGLCubeRenderTarget)for(let r=0;r<6;r++){if(Array.isArray(i.__webglFramebuffer[r]))for(let s=0;s<i.__webglFramebuffer[r].length;s++)t.deleteFramebuffer(i.__webglFramebuffer[r][s]);else t.deleteFramebuffer(i.__webglFramebuffer[r]);i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[r])}else{if(Array.isArray(i.__webglFramebuffer))for(let r=0;r<i.__webglFramebuffer.length;r++)t.deleteFramebuffer(i.__webglFramebuffer[r]);else t.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let r=0;r<i.__webglColorRenderbuffer.length;r++)i.__webglColorRenderbuffer[r]&&t.deleteRenderbuffer(i.__webglColorRenderbuffer[r]);i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer)}let u=r.textures;for(let r=0,i=u.length;r<i;r++){let i=s.get(u[r]);i.__webglTexture&&(t.deleteTexture(i.__webglTexture),h.memory.textures--),s.remove(u[r])}s.remove(r)}(i)}function R(r){let i=s.get(r);t.deleteTexture(i.__webglTexture);let u=r.source,c=_.get(u);delete c[i.__cacheKey],h.memory.textures--}let L=0;function k(r,u){let c=s.get(r);if(r.isVideoTexture&&function(t){let r=h.render.frame;x.get(t)!==r&&(x.set(t,r),t.update())}(r),!1===r.isRenderTargetTexture&&r.version>0&&c.__version!==r.version){let t=r.image;if(null===t);else if(!1===t.complete);else{U(c,r,u);return}}i.bindTexture(t.TEXTURE_2D,c.__webglTexture,t.TEXTURE0+u)}let O={[tf]:t.REPEAT,[tg]:t.CLAMP_TO_EDGE,[tm]:t.MIRRORED_REPEAT},B={[tv]:t.NEAREST,[ty]:t.NEAREST_MIPMAP_NEAREST,[t_]:t.NEAREST_MIPMAP_LINEAR,[tw]:t.LINEAR,[tS]:t.LINEAR_MIPMAP_NEAREST,[tA]:t.LINEAR_MIPMAP_LINEAR},N={[n9]:t.NEVER,[ri]:t.ALWAYS,[n8]:t.LESS,[re]:t.LEQUAL,[n7]:t.EQUAL,[rr]:t.GEQUAL,[rt]:t.GREATER,[rn]:t.NOTEQUAL};function F(i,c){if(c.type===tL&&!1===r.has("OES_texture_float_linear")&&(c.magFilter===tw||c.magFilter===tS||c.magFilter===t_||c.magFilter===tA||c.minFilter===tw||c.minFilter===tS||c.minFilter===t_||c.minFilter),t.texParameteri(i,t.TEXTURE_WRAP_S,O[c.wrapS]),t.texParameteri(i,t.TEXTURE_WRAP_T,O[c.wrapT]),(i===t.TEXTURE_3D||i===t.TEXTURE_2D_ARRAY)&&t.texParameteri(i,t.TEXTURE_WRAP_R,O[c.wrapR]),t.texParameteri(i,t.TEXTURE_MAG_FILTER,B[c.magFilter]),t.texParameteri(i,t.TEXTURE_MIN_FILTER,B[c.minFilter]),c.compareFunction&&(t.texParameteri(i,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(i,t.TEXTURE_COMPARE_FUNC,N[c.compareFunction])),!0===r.has("EXT_texture_filter_anisotropic")){if(c.magFilter!==tv&&(c.minFilter===t_||c.minFilter===tA)&&(c.type!==tL||!1!==r.has("OES_texture_float_linear"))){if(c.anisotropy>1||s.get(c).__currentAnisotropy){let h=r.get("EXT_texture_filter_anisotropic");t.texParameterf(i,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(c.anisotropy,u.getMaxAnisotropy())),s.get(c).__currentAnisotropy=c.anisotropy}}}}function z(r,i){let s=!1;void 0===r.__webglInit&&(r.__webglInit=!0,i.addEventListener("dispose",D));let u=i.source,c=_.get(u);void 0===c&&(c={},_.set(u,c));let p=function(t){let r=[];return r.push(t.wrapS),r.push(t.wrapT),r.push(t.wrapR||0),r.push(t.magFilter),r.push(t.minFilter),r.push(t.anisotropy),r.push(t.internalFormat),r.push(t.format),r.push(t.type),r.push(t.generateMipmaps),r.push(t.premultiplyAlpha),r.push(t.flipY),r.push(t.unpackAlignment),r.push(t.colorSpace),r.join()}(i);if(p!==r.__cacheKey){void 0===c[p]&&(c[p]={texture:t.createTexture(),usedTimes:0},h.memory.textures++,s=!0),c[p].usedTimes++;let u=c[r.__cacheKey];void 0!==u&&(c[r.__cacheKey].usedTimes--,0===u.usedTimes&&R(i)),r.__cacheKey=p,r.__webglTexture=c[p].texture}return s}function U(r,h,p){let f=t.TEXTURE_2D;(h.isDataArrayTexture||h.isCompressedArrayTexture)&&(f=t.TEXTURE_2D_ARRAY),h.isData3DTexture&&(f=t.TEXTURE_3D);let v=z(r,h),y=h.source;i.bindTexture(f,r.__webglTexture,t.TEXTURE0+p);let x=s.get(y);if(y.version!==x.__version||!0===v){let r;i.activeTexture(t.TEXTURE0+p);let s=rU.getPrimaries(rU.workingColorSpace),_=h.colorSpace===nU?null:rU.getPrimaries(h.colorSpace),b=h.colorSpace===nU||s===_?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,h.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,h.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,b);let w=S(h.image,!1,u.maxTextureSize);w=$(h,w);let D=c.convert(h.format,h.colorSpace),P=c.convert(h.type),R=C(h.internalFormat,D,P,h.colorSpace,h.isVideoTexture);F(f,h);let L=h.mipmaps,k=!0!==h.isVideoTexture,O=void 0===x.__version||!0===v,B=y.dataReady,N=I(h,w);if(h.isDepthTexture)R=T(h.format===tj,h.type),O&&(k?i.texStorage2D(t.TEXTURE_2D,1,R,w.width,w.height):i.texImage2D(t.TEXTURE_2D,0,R,w.width,w.height,0,D,P,null));else if(h.isDataTexture){if(L.length>0){k&&O&&i.texStorage2D(t.TEXTURE_2D,N,R,L[0].width,L[0].height);for(let s=0,u=L.length;s<u;s++)r=L[s],k?B&&i.texSubImage2D(t.TEXTURE_2D,s,0,0,r.width,r.height,D,P,r.data):i.texImage2D(t.TEXTURE_2D,s,R,r.width,r.height,0,D,P,r.data);h.generateMipmaps=!1}else k?(O&&i.texStorage2D(t.TEXTURE_2D,N,R,w.width,w.height),B&&i.texSubImage2D(t.TEXTURE_2D,0,0,0,w.width,w.height,D,P,w.data)):i.texImage2D(t.TEXTURE_2D,0,R,w.width,w.height,0,D,P,w.data)}else if(h.isCompressedTexture){if(h.isCompressedArrayTexture){k&&O&&i.texStorage3D(t.TEXTURE_2D_ARRAY,N,R,L[0].width,L[0].height,w.depth);for(let s=0,u=L.length;s<u;s++)if(r=L[s],h.format!==tH){if(null!==D){if(k){if(B){if(h.layerUpdates.size>0){let u=ly(r.width,r.height,h.format,h.type);for(let c of h.layerUpdates){let h=r.data.subarray(c*u/r.data.BYTES_PER_ELEMENT,(c+1)*u/r.data.BYTES_PER_ELEMENT);i.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,s,0,0,c,r.width,r.height,1,D,h)}h.clearLayerUpdates()}else i.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,s,0,0,0,r.width,r.height,w.depth,D,r.data)}}else i.compressedTexImage3D(t.TEXTURE_2D_ARRAY,s,R,r.width,r.height,w.depth,0,r.data,0,0)}}else k?B&&i.texSubImage3D(t.TEXTURE_2D_ARRAY,s,0,0,0,r.width,r.height,w.depth,D,P,r.data):i.texImage3D(t.TEXTURE_2D_ARRAY,s,R,r.width,r.height,w.depth,0,D,P,r.data)}else{k&&O&&i.texStorage2D(t.TEXTURE_2D,N,R,L[0].width,L[0].height);for(let s=0,u=L.length;s<u;s++)r=L[s],h.format!==tH?null!==D&&(k?B&&i.compressedTexSubImage2D(t.TEXTURE_2D,s,0,0,r.width,r.height,D,r.data):i.compressedTexImage2D(t.TEXTURE_2D,s,R,r.width,r.height,0,r.data)):k?B&&i.texSubImage2D(t.TEXTURE_2D,s,0,0,r.width,r.height,D,P,r.data):i.texImage2D(t.TEXTURE_2D,s,R,r.width,r.height,0,D,P,r.data)}}else if(h.isDataArrayTexture){if(k){if(O&&i.texStorage3D(t.TEXTURE_2D_ARRAY,N,R,w.width,w.height,w.depth),B){if(h.layerUpdates.size>0){let r=ly(w.width,w.height,h.format,h.type);for(let s of h.layerUpdates){let u=w.data.subarray(s*r/w.data.BYTES_PER_ELEMENT,(s+1)*r/w.data.BYTES_PER_ELEMENT);i.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,s,w.width,w.height,1,D,P,u)}h.clearLayerUpdates()}else i.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,w.width,w.height,w.depth,D,P,w.data)}}else i.texImage3D(t.TEXTURE_2D_ARRAY,0,R,w.width,w.height,w.depth,0,D,P,w.data)}else if(h.isData3DTexture)k?(O&&i.texStorage3D(t.TEXTURE_3D,N,R,w.width,w.height,w.depth),B&&i.texSubImage3D(t.TEXTURE_3D,0,0,0,0,w.width,w.height,w.depth,D,P,w.data)):i.texImage3D(t.TEXTURE_3D,0,R,w.width,w.height,w.depth,0,D,P,w.data);else if(h.isFramebufferTexture){if(O){if(k)i.texStorage2D(t.TEXTURE_2D,N,R,w.width,w.height);else{let r=w.width,s=w.height;for(let u=0;u<N;u++)i.texImage2D(t.TEXTURE_2D,u,R,r,s,0,D,P,null),r>>=1,s>>=1}}}else if(L.length>0){if(k&&O){let r=J(L[0]);i.texStorage2D(t.TEXTURE_2D,N,R,r.width,r.height)}for(let s=0,u=L.length;s<u;s++)r=L[s],k?B&&i.texSubImage2D(t.TEXTURE_2D,s,0,0,D,P,r):i.texImage2D(t.TEXTURE_2D,s,R,D,P,r);h.generateMipmaps=!1}else if(k){if(O){let r=J(w);i.texStorage2D(t.TEXTURE_2D,N,R,r.width,r.height)}B&&i.texSubImage2D(t.TEXTURE_2D,0,0,0,D,P,w)}else i.texImage2D(t.TEXTURE_2D,0,R,D,P,w);M(h)&&A(f),x.__version=y.version,h.onUpdate&&h.onUpdate(h)}r.__version=h.version}function H(r,u,h,p,v,y){let x=c.convert(h.format,h.colorSpace),_=c.convert(h.type),b=C(h.internalFormat,x,_,h.colorSpace),w=s.get(u),S=s.get(h);if(S.__renderTarget=u,!w.__hasExternalTextures){let r=Math.max(1,u.width>>y),s=Math.max(1,u.height>>y);v===t.TEXTURE_3D||v===t.TEXTURE_2D_ARRAY?i.texImage3D(v,y,b,r,s,u.depth,0,x,_,null):i.texImage2D(v,y,b,r,s,0,x,_,null)}i.bindFramebuffer(t.FRAMEBUFFER,r),Y(u)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,p,v,S.__webglTexture,0,X(u)):(v===t.TEXTURE_2D||v>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&v<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,p,v,S.__webglTexture,y),i.bindFramebuffer(t.FRAMEBUFFER,null)}function G(r,i,s){if(t.bindRenderbuffer(t.RENDERBUFFER,r),i.depthBuffer){let u=i.depthTexture,c=u&&u.isDepthTexture?u.type:null,h=T(i.stencilBuffer,c),p=i.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,v=X(i);Y(i)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,v,h,i.width,i.height):s?t.renderbufferStorageMultisample(t.RENDERBUFFER,v,h,i.width,i.height):t.renderbufferStorage(t.RENDERBUFFER,h,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,p,t.RENDERBUFFER,r)}else{let r=i.textures;for(let u=0;u<r.length;u++){let h=r[u],p=c.convert(h.format,h.colorSpace),v=c.convert(h.type),y=C(h.internalFormat,p,v,h.colorSpace),x=X(i);s&&!1===Y(i)?t.renderbufferStorageMultisample(t.RENDERBUFFER,x,y,i.width,i.height):Y(i)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,x,y,i.width,i.height):t.renderbufferStorage(t.RENDERBUFFER,y,i.width,i.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function V(r){let u=s.get(r),c=!0===r.isWebGLCubeRenderTarget;if(u.__boundDepthTexture!==r.depthTexture){let t=r.depthTexture;if(u.__depthDisposeCallback&&u.__depthDisposeCallback(),t){let r=()=>{delete u.__boundDepthTexture,delete u.__depthDisposeCallback,t.removeEventListener("dispose",r)};t.addEventListener("dispose",r),u.__depthDisposeCallback=r}u.__boundDepthTexture=t}if(r.depthTexture&&!u.__autoAllocateDepthBuffer){if(c)throw Error("target.depthTexture not supported in Cube render targets");!function(r,u){if(u&&u.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(t.FRAMEBUFFER,r),!(u.depthTexture&&u.depthTexture.isDepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let c=s.get(u.depthTexture);c.__renderTarget=u,(!c.__webglTexture||u.depthTexture.image.width!==u.width||u.depthTexture.image.height!==u.height)&&(u.depthTexture.image.width=u.width,u.depthTexture.image.height=u.height,u.depthTexture.needsUpdate=!0),k(u.depthTexture,0);let h=c.__webglTexture,p=X(u);if(u.depthTexture.format===tW)Y(u)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,h,0,p):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,h,0);else if(u.depthTexture.format===tj)Y(u)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,h,0,p):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,h,0);else throw Error("Unknown depthTexture format")}(u.__webglFramebuffer,r)}else if(c){u.__webglDepthbuffer=[];for(let s=0;s<6;s++)if(i.bindFramebuffer(t.FRAMEBUFFER,u.__webglFramebuffer[s]),void 0===u.__webglDepthbuffer[s])u.__webglDepthbuffer[s]=t.createRenderbuffer(),G(u.__webglDepthbuffer[s],r,!1);else{let i=r.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,c=u.__webglDepthbuffer[s];t.bindRenderbuffer(t.RENDERBUFFER,c),t.framebufferRenderbuffer(t.FRAMEBUFFER,i,t.RENDERBUFFER,c)}}else if(i.bindFramebuffer(t.FRAMEBUFFER,u.__webglFramebuffer),void 0===u.__webglDepthbuffer)u.__webglDepthbuffer=t.createRenderbuffer(),G(u.__webglDepthbuffer,r,!1);else{let i=r.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,s=u.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,s),t.framebufferRenderbuffer(t.FRAMEBUFFER,i,t.RENDERBUFFER,s)}i.bindFramebuffer(t.FRAMEBUFFER,null)}let W=[],j=[];function X(t){return Math.min(u.maxSamples,t.samples)}function Y(t){let i=s.get(t);return t.samples>0&&!0===r.has("WEBGL_multisampled_render_to_texture")&&!1!==i.__useRenderToTexture}function $(t,r){let i=t.colorSpace,s=t.format,u=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture?r:(i!==nG&&i!==nU&&rU.getTransfer(i),r)}function J(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?(y.width=t.naturalWidth||t.width,y.height=t.naturalHeight||t.height):"undefined"!=typeof VideoFrame&&t instanceof VideoFrame?(y.width=t.displayWidth,y.height=t.displayHeight):(y.width=t.width,y.height=t.height),y}this.allocateTextureUnit=function(){let t=L;return u.maxTextures,L+=1,t},this.resetTextureUnits=function(){L=0},this.setTexture2D=k,this.setTexture2DArray=function(r,u){let c=s.get(r);if(r.version>0&&c.__version!==r.version){U(c,r,u);return}i.bindTexture(t.TEXTURE_2D_ARRAY,c.__webglTexture,t.TEXTURE0+u)},this.setTexture3D=function(r,u){let c=s.get(r);if(r.version>0&&c.__version!==r.version){U(c,r,u);return}i.bindTexture(t.TEXTURE_3D,c.__webglTexture,t.TEXTURE0+u)},this.setTextureCube=function(r,h){let p=s.get(r);if(r.version>0&&p.__version!==r.version){(function(r,h,p){if(6!==h.image.length)return;let f=z(r,h),v=h.source;i.bindTexture(t.TEXTURE_CUBE_MAP,r.__webglTexture,t.TEXTURE0+p);let y=s.get(v);if(v.version!==y.__version||!0===f){let r;i.activeTexture(t.TEXTURE0+p);let s=rU.getPrimaries(rU.workingColorSpace),x=h.colorSpace===nU?null:rU.getPrimaries(h.colorSpace),_=h.colorSpace===nU||s===x?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,h.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,h.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,_);let b=h.isCompressedTexture||h.image[0].isCompressedTexture,w=h.image[0]&&h.image[0].isDataTexture,T=[];for(let t=0;t<6;t++)b||w?T[t]=w?h.image[t].image:h.image[t]:T[t]=S(h.image[t],!0,u.maxCubemapSize),T[t]=$(h,T[t]);let D=T[0],P=c.convert(h.format,h.colorSpace),R=c.convert(h.type),L=C(h.internalFormat,P,R,h.colorSpace),k=!0!==h.isVideoTexture,O=void 0===y.__version||!0===f,B=v.dataReady,N=I(h,D);if(F(t.TEXTURE_CUBE_MAP,h),b){k&&O&&i.texStorage2D(t.TEXTURE_CUBE_MAP,N,L,D.width,D.height);for(let s=0;s<6;s++){r=T[s].mipmaps;for(let u=0;u<r.length;u++){let c=r[u];h.format!==tH?null!==P&&(k?B&&i.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,u,0,0,c.width,c.height,P,c.data):i.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,u,L,c.width,c.height,0,c.data)):k?B&&i.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,u,0,0,c.width,c.height,P,R,c.data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,u,L,c.width,c.height,0,P,R,c.data)}}}else{if(r=h.mipmaps,k&&O){r.length>0&&N++;let s=J(T[0]);i.texStorage2D(t.TEXTURE_CUBE_MAP,N,L,s.width,s.height)}for(let s=0;s<6;s++)if(w){k?B&&i.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,0,0,T[s].width,T[s].height,P,R,T[s].data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,L,T[s].width,T[s].height,0,P,R,T[s].data);for(let u=0;u<r.length;u++){let c=r[u].image[s].image;k?B&&i.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,u+1,0,0,c.width,c.height,P,R,c.data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,u+1,L,c.width,c.height,0,P,R,c.data)}}else{k?B&&i.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,0,0,P,R,T[s]):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,L,P,R,T[s]);for(let u=0;u<r.length;u++){let c=r[u];k?B&&i.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,u+1,0,0,P,R,c.image[s]):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,u+1,L,P,R,c.image[s])}}}M(h)&&A(t.TEXTURE_CUBE_MAP),y.__version=v.version,h.onUpdate&&h.onUpdate(h)}r.__version=h.version})(p,r,h);return}i.bindTexture(t.TEXTURE_CUBE_MAP,p.__webglTexture,t.TEXTURE0+h)},this.rebindTextures=function(r,i,u){let c=s.get(r);void 0!==i&&H(c.__webglFramebuffer,r,r.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),void 0!==u&&V(r)},this.setupRenderTarget=function(r){let u=r.texture,p=s.get(r),f=s.get(u);r.addEventListener("dispose",P);let v=r.textures,y=!0===r.isWebGLCubeRenderTarget,x=v.length>1;if(!x&&(void 0===f.__webglTexture&&(f.__webglTexture=t.createTexture()),f.__version=u.version,h.memory.textures++),y){p.__webglFramebuffer=[];for(let r=0;r<6;r++)if(u.mipmaps&&u.mipmaps.length>0){p.__webglFramebuffer[r]=[];for(let i=0;i<u.mipmaps.length;i++)p.__webglFramebuffer[r][i]=t.createFramebuffer()}else p.__webglFramebuffer[r]=t.createFramebuffer()}else{if(u.mipmaps&&u.mipmaps.length>0){p.__webglFramebuffer=[];for(let r=0;r<u.mipmaps.length;r++)p.__webglFramebuffer[r]=t.createFramebuffer()}else p.__webglFramebuffer=t.createFramebuffer();if(x)for(let r=0,i=v.length;r<i;r++){let i=s.get(v[r]);void 0===i.__webglTexture&&(i.__webglTexture=t.createTexture(),h.memory.textures++)}if(r.samples>0&&!1===Y(r)){p.__webglMultisampledFramebuffer=t.createFramebuffer(),p.__webglColorRenderbuffer=[],i.bindFramebuffer(t.FRAMEBUFFER,p.__webglMultisampledFramebuffer);for(let i=0;i<v.length;i++){let s=v[i];p.__webglColorRenderbuffer[i]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,p.__webglColorRenderbuffer[i]);let u=c.convert(s.format,s.colorSpace),h=c.convert(s.type),f=C(s.internalFormat,u,h,s.colorSpace,!0===r.isXRRenderTarget),y=X(r);t.renderbufferStorageMultisample(t.RENDERBUFFER,y,f,r.width,r.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+i,t.RENDERBUFFER,p.__webglColorRenderbuffer[i])}t.bindRenderbuffer(t.RENDERBUFFER,null),r.depthBuffer&&(p.__webglDepthRenderbuffer=t.createRenderbuffer(),G(p.__webglDepthRenderbuffer,r,!0)),i.bindFramebuffer(t.FRAMEBUFFER,null)}}if(y){i.bindTexture(t.TEXTURE_CUBE_MAP,f.__webglTexture),F(t.TEXTURE_CUBE_MAP,u);for(let i=0;i<6;i++)if(u.mipmaps&&u.mipmaps.length>0)for(let s=0;s<u.mipmaps.length;s++)H(p.__webglFramebuffer[i][s],r,u,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+i,s);else H(p.__webglFramebuffer[i],r,u,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0);M(u)&&A(t.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(x){for(let u=0,c=v.length;u<c;u++){let c=v[u],h=s.get(c);i.bindTexture(t.TEXTURE_2D,h.__webglTexture),F(t.TEXTURE_2D,c),H(p.__webglFramebuffer,r,c,t.COLOR_ATTACHMENT0+u,t.TEXTURE_2D,0),M(c)&&A(t.TEXTURE_2D)}i.unbindTexture()}else{let s=t.TEXTURE_2D;if((r.isWebGL3DRenderTarget||r.isWebGLArrayRenderTarget)&&(s=r.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),i.bindTexture(s,f.__webglTexture),F(s,u),u.mipmaps&&u.mipmaps.length>0)for(let i=0;i<u.mipmaps.length;i++)H(p.__webglFramebuffer[i],r,u,t.COLOR_ATTACHMENT0,s,i);else H(p.__webglFramebuffer,r,u,t.COLOR_ATTACHMENT0,s,0);M(u)&&A(s),i.unbindTexture()}r.depthBuffer&&V(r)},this.updateRenderTargetMipmap=function(r){let u=r.textures;for(let h=0,p=u.length;h<p;h++){let p=u[h];if(M(p)){var c;let u=(c=r).isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:c.isWebGL3DRenderTarget?t.TEXTURE_3D:c.isWebGLArrayRenderTarget||c.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D,h=s.get(p).__webglTexture;i.bindTexture(u,h),A(u),i.unbindTexture()}}},this.updateMultisampleRenderTarget=function(r){if(r.samples>0){if(!1===Y(r)){let u=r.textures,c=r.width,h=r.height,p=t.COLOR_BUFFER_BIT,f=r.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,y=s.get(r),x=u.length>1;if(x)for(let r=0;r<u.length;r++)i.bindFramebuffer(t.FRAMEBUFFER,y.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+r,t.RENDERBUFFER,null),i.bindFramebuffer(t.FRAMEBUFFER,y.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+r,t.TEXTURE_2D,null,0);i.bindFramebuffer(t.READ_FRAMEBUFFER,y.__webglMultisampledFramebuffer),i.bindFramebuffer(t.DRAW_FRAMEBUFFER,y.__webglFramebuffer);for(let i=0;i<u.length;i++){if(r.resolveDepthBuffer&&(r.depthBuffer&&(p|=t.DEPTH_BUFFER_BIT),r.stencilBuffer&&r.resolveStencilBuffer&&(p|=t.STENCIL_BUFFER_BIT)),x){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,y.__webglColorRenderbuffer[i]);let r=s.get(u[i]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0)}t.blitFramebuffer(0,0,c,h,0,0,c,h,p,t.NEAREST),!0===v&&(W.length=0,j.length=0,W.push(t.COLOR_ATTACHMENT0+i),r.depthBuffer&&!1===r.resolveDepthBuffer&&(W.push(f),j.push(f),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,j)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,W))}if(i.bindFramebuffer(t.READ_FRAMEBUFFER,null),i.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),x)for(let r=0;r<u.length;r++){i.bindFramebuffer(t.FRAMEBUFFER,y.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+r,t.RENDERBUFFER,y.__webglColorRenderbuffer[r]);let c=s.get(u[r]).__webglTexture;i.bindFramebuffer(t.FRAMEBUFFER,y.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+r,t.TEXTURE_2D,c,0)}i.bindFramebuffer(t.DRAW_FRAMEBUFFER,y.__webglMultisampledFramebuffer)}else if(r.depthBuffer&&!1===r.resolveDepthBuffer&&v){let i=r.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[i])}}},this.setupDepthRenderbuffer=V,this.setupFrameBufferTexture=H,this.useMultisampledRTT=Y}function lb(t,r){return{convert:function(i,s=nU){let u;let c=rU.getTransfer(s);if(i===tT)return t.UNSIGNED_BYTE;if(i===tO)return t.UNSIGNED_SHORT_4_4_4_4;if(i===tB)return t.UNSIGNED_SHORT_5_5_5_1;if(i===tF)return t.UNSIGNED_INT_5_9_9_9_REV;if(i===tE)return t.BYTE;if(i===tI)return t.SHORT;if(i===tD)return t.UNSIGNED_SHORT;if(i===tP)return t.INT;if(i===tR)return t.UNSIGNED_INT;if(i===tL)return t.FLOAT;if(i===tk)return t.HALF_FLOAT;if(i===tz)return t.ALPHA;if(i===tU)return t.RGB;if(i===tH)return t.RGBA;if(i===tG)return t.LUMINANCE;if(i===tV)return t.LUMINANCE_ALPHA;if(i===tW)return t.DEPTH_COMPONENT;if(i===tj)return t.DEPTH_STENCIL;if(i===tX)return t.RED;if(i===tY)return t.RED_INTEGER;if(i===t$)return t.RG;if(i===tJ)return t.RG_INTEGER;if(i===tK)return t.RGBA_INTEGER;if(i===tq||i===tQ||i===t0||i===t1){if(c===nW){if(null===(u=r.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(i===tq)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===tQ)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===t0)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===t1)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(u=r.get("WEBGL_compressed_texture_s3tc")))return null;if(i===tq)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===tQ)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===t0)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===t1)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}}if(i===t2||i===t3||i===t5||i===t4){if(null===(u=r.get("WEBGL_compressed_texture_pvrtc")))return null;if(i===t2)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===t3)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===t5)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===t4)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===t6||i===t9||i===t8){if(null===(u=r.get("WEBGL_compressed_texture_etc")))return null;if(i===t6||i===t9)return c===nW?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(i===t8)return c===nW?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC}if(i===t7||i===ne||i===nt||i===nn||i===nr||i===ni||i===na||i===no||i===ns||i===nl||i===nu||i===nc||i===nh||i===nd){if(null===(u=r.get("WEBGL_compressed_texture_astc")))return null;if(i===t7)return c===nW?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===ne)return c===nW?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===nt)return c===nW?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===nn)return c===nW?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===nr)return c===nW?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===ni)return c===nW?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===na)return c===nW?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===no)return c===nW?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===ns)return c===nW?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===nl)return c===nW?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===nu)return c===nW?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===nc)return c===nW?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===nh)return c===nW?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===nd)return c===nW?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===np||i===nf||i===ng){if(null===(u=r.get("EXT_texture_compression_bptc")))return null;if(i===np)return c===nW?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===nf)return u.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===ng)return u.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(i===nm||i===nv||i===ny||i===nx){if(null===(u=r.get("EXT_texture_compression_rgtc")))return null;if(i===np)return u.COMPRESSED_RED_RGTC1_EXT;if(i===nv)return u.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===ny)return u.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===nx)return u.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===tN?t.UNSIGNED_INT_24_8:void 0!==t[i]?t[i]:null}}}class lw extends oe{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class lS extends i3{constructor(){super(),this.isGroup=!0,this.type="Group"}}let lM={type:"move"};class lA{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new lS,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new lS,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new r8,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new r8),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new lS,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new r8,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new r8),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let r=this._hand;if(r)for(let i of t.hand.values())this._getHandJoint(r,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,r,i){let s=null,u=null,c=null,h=this._targetRay,p=this._grip,f=this._hand;if(t&&"visible-blurred"!==r.session.visibilityState){if(f&&t.hand){for(let s of(c=!0,t.hand.values())){let t=r.getJointPose(s,i),u=this._getHandJoint(f,s);null!==t&&(u.matrix.fromArray(t.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,u.jointRadius=t.radius),u.visible=null!==t}let s=f.joints["index-finger-tip"],u=f.joints["thumb-tip"],h=s.position.distanceTo(u.position);f.inputState.pinching&&h>.025?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!f.inputState.pinching&&h<=.015&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==p&&t.gripSpace&&null!==(u=r.getPose(t.gripSpace,i))&&(p.matrix.fromArray(u.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,u.linearVelocity?(p.hasLinearVelocity=!0,p.linearVelocity.copy(u.linearVelocity)):p.hasLinearVelocity=!1,u.angularVelocity?(p.hasAngularVelocity=!0,p.angularVelocity.copy(u.angularVelocity)):p.hasAngularVelocity=!1);null!==h&&(null===(s=r.getPose(t.targetRaySpace,i))&&null!==u&&(s=u),null!==s&&(h.matrix.fromArray(s.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,s.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(s.linearVelocity)):h.hasLinearVelocity=!1,s.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(s.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(lM)))}return null!==h&&(h.visible=null!==s),null!==p&&(p.visible=null!==u),null!==f&&(f.visible=null!==c),this}_getHandJoint(t,r){if(void 0===t.joints[r.jointName]){let i=new lS;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[r.jointName]=i,t.add(i)}return t.joints[r.jointName]}}let lC=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,lT=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class lE{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,r,i){if(null===this.texture){let s=new rQ;t.properties.get(s).__webglTexture=r.texture,(r.depthNear!=i.depthNear||r.depthFar!=i.depthFar)&&(this.depthNear=r.depthNear,this.depthFar=r.depthFar),this.texture=s}}getMesh(t){if(null!==this.texture&&null===this.mesh){let r=t.cameras[0].viewport,i=new a4({vertexShader:lC,fragmentShader:lT,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new aq(new op(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class lI extends ry{constructor(t,r){super();let i=this,s=null,u=1,c=null,h="local-floor",p=1,f=null,v=null,y=null,x=null,_=null,b=null,w=new lE,S=r.getContextAttributes(),M=null,A=null,C=[],T=[],I=new rD,D=null,P=new oe;P.viewport=new r0;let R=new oe;R.viewport=new r0;let L=[P,R],k=new lw,O=null,B=null;function N(t){let r=T.indexOf(t.inputSource);if(-1===r)return;let i=C[r];void 0!==i&&(i.update(t.inputSource,t.frame,f||c),i.dispatchEvent({type:t.type,data:t.inputSource}))}function F(){s.removeEventListener("select",N),s.removeEventListener("selectstart",N),s.removeEventListener("selectend",N),s.removeEventListener("squeeze",N),s.removeEventListener("squeezestart",N),s.removeEventListener("squeezeend",N),s.removeEventListener("end",F),s.removeEventListener("inputsourceschange",z);for(let t=0;t<C.length;t++){let r=T[t];null!==r&&(T[t]=null,C[t].disconnect(r))}O=null,B=null,w.reset(),t.setRenderTarget(M),_=null,x=null,y=null,s=null,A=null,W.stop(),i.isPresenting=!1,t.setPixelRatio(D),t.setSize(I.width,I.height,!1),i.dispatchEvent({type:"sessionend"})}function z(t){for(let r=0;r<t.removed.length;r++){let i=t.removed[r],s=T.indexOf(i);s>=0&&(T[s]=null,C[s].disconnect(i))}for(let r=0;r<t.added.length;r++){let i=t.added[r],s=T.indexOf(i);if(-1===s){for(let t=0;t<C.length;t++){if(t>=T.length){T.push(i),s=t;break}if(null===T[t]){T[t]=i,s=t;break}}if(-1===s)break}let u=C[s];u&&u.connect(i)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let r=C[t];return void 0===r&&(r=new lA,C[t]=r),r.getTargetRaySpace()},this.getControllerGrip=function(t){let r=C[t];return void 0===r&&(r=new lA,C[t]=r),r.getGripSpace()},this.getHand=function(t){let r=C[t];return void 0===r&&(r=new lA,C[t]=r),r.getHandSpace()},this.setFramebufferScaleFactor=function(t){u=t,i.isPresenting},this.setReferenceSpaceType=function(t){h=t,i.isPresenting},this.getReferenceSpace=function(){return f||c},this.setReferenceSpace=function(t){f=t},this.getBaseLayer=function(){return null!==x?x:_},this.getBinding=function(){return y},this.getFrame=function(){return b},this.getSession=function(){return s},this.setSession=async function(v){if(null!==(s=v)){if(M=t.getRenderTarget(),s.addEventListener("select",N),s.addEventListener("selectstart",N),s.addEventListener("selectend",N),s.addEventListener("squeeze",N),s.addEventListener("squeezestart",N),s.addEventListener("squeezeend",N),s.addEventListener("end",F),s.addEventListener("inputsourceschange",z),!0!==S.xrCompatible&&await r.makeXRCompatible(),D=t.getPixelRatio(),t.getSize(I),void 0===s.renderState.layers){let i={antialias:S.antialias,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:u};_=new XRWebGLLayer(s,r,i),s.updateRenderState({baseLayer:_}),t.setPixelRatio(1),t.setSize(_.framebufferWidth,_.framebufferHeight,!1),A=new r2(_.framebufferWidth,_.framebufferHeight,{format:tH,type:tT,colorSpace:t.outputColorSpace,stencilBuffer:S.stencil})}else{let i=null,c=null,h=null;S.depth&&(h=S.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,i=S.stencil?tj:tW,c=S.stencil?tN:tR);let p={colorFormat:r.RGBA8,depthFormat:h,scaleFactor:u};x=(y=new XRWebGLBinding(s,r)).createProjectionLayer(p),s.updateRenderState({layers:[x]}),t.setPixelRatio(1),t.setSize(x.textureWidth,x.textureHeight,!1),A=new r2(x.textureWidth,x.textureHeight,{format:tH,type:tT,depthTexture:new oZ(x.textureWidth,x.textureHeight,c,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:S.stencil,colorSpace:t.outputColorSpace,samples:S.antialias?4:0,resolveDepthBuffer:!1===x.ignoreDepthValues})}A.isXRRenderTarget=!0,this.setFoveation(p),f=null,c=await s.requestReferenceSpace(h),W.setContext(s),W.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==s)return s.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};let U=new r8,H=new r8;function G(t,r){null===r?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(r.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===s)return;let r=t.near,i=t.far;null!==w.texture&&(w.depthNear>0&&(r=w.depthNear),w.depthFar>0&&(i=w.depthFar)),k.near=R.near=P.near=r,k.far=R.far=P.far=i,(O!==k.near||B!==k.far)&&(s.updateRenderState({depthNear:k.near,depthFar:k.far}),O=k.near,B=k.far),P.layers.mask=2|t.layers.mask,R.layers.mask=4|t.layers.mask,k.layers.mask=P.layers.mask|R.layers.mask;let u=t.parent,c=k.cameras;G(k,u);for(let t=0;t<c.length;t++)G(c[t],u);2===c.length?!function(t,r,i){U.setFromMatrixPosition(r.matrixWorld),H.setFromMatrixPosition(i.matrixWorld);let s=U.distanceTo(H),u=r.projectionMatrix.elements,c=i.projectionMatrix.elements,h=u[14]/(u[10]-1),p=u[14]/(u[10]+1),f=(u[9]+1)/u[5],v=(u[9]-1)/u[5],y=(u[8]-1)/u[0],x=(c[8]+1)/c[0],_=s/(-y+x),b=-(_*y);if(r.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(b),t.translateZ(_),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert(),-1===u[10])t.projectionMatrix.copy(r.projectionMatrix),t.projectionMatrixInverse.copy(r.projectionMatrixInverse);else{let r=h+_,i=p+_;t.projectionMatrix.makePerspective(h*y-b,h*x+(s-b),f*p/i*r,v*p/i*r,r,i),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}}(k,P,R):k.projectionMatrix.copy(P.projectionMatrix),function(t,r,i){null===i?t.matrix.copy(r.matrixWorld):(t.matrix.copy(i.matrixWorld),t.matrix.invert(),t.matrix.multiply(r.matrixWorld)),t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),t.projectionMatrix.copy(r.projectionMatrix),t.projectionMatrixInverse.copy(r.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*rw*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}(t,k,u)};this.getCamera=function(){return k},this.getFoveation=function(){if(null!==x||null!==_)return p},this.setFoveation=function(t){p=t,null!==x&&(x.fixedFoveation=t),null!==_&&void 0!==_.fixedFoveation&&(_.fixedFoveation=t)},this.hasDepthSensing=function(){return null!==w.texture},this.getDepthSensingMesh=function(){return w.getMesh(k)};let V=null,W=new oh;W.setAnimationLoop(function(r,u){if(v=u.getViewerPose(f||c),b=u,null!==v){let r=v.views;null!==_&&(t.setRenderTargetFramebuffer(A,_.framebuffer),t.setRenderTarget(A));let i=!1;r.length!==k.cameras.length&&(k.cameras.length=0,i=!0);for(let s=0;s<r.length;s++){let u=r[s],c=null;if(null!==_)c=_.getViewport(u);else{let r=y.getViewSubImage(x,u);c=r.viewport,0===s&&(t.setRenderTargetTextures(A,r.colorTexture,x.ignoreDepthValues?void 0:r.depthStencilTexture),t.setRenderTarget(A))}let h=L[s];void 0===h&&((h=new oe).layers.enable(s),h.viewport=new r0,L[s]=h),h.matrix.fromArray(u.transform.matrix),h.matrix.decompose(h.position,h.quaternion,h.scale),h.projectionMatrix.fromArray(u.projectionMatrix),h.projectionMatrixInverse.copy(h.projectionMatrix).invert(),h.viewport.set(c.x,c.y,c.width,c.height),0===s&&(k.matrix.copy(h.matrix),k.matrix.decompose(k.position,k.quaternion,k.scale)),!0===i&&k.cameras.push(h)}let u=s.enabledFeatures;if(u&&u.includes("depth-sensing")){let i=y.getDepthInformation(r[0]);i&&i.isValid&&i.texture&&w.init(t,i,s.renderState)}}for(let t=0;t<C.length;t++){let r=T[t],i=C[t];null!==r&&void 0!==i&&i.update(r,u,f||c)}V&&V(r,u),u.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:u}),b=null}),this.setAnimationLoop=function(t){V=t},this.dispose=function(){}}}let lD=new iU,lP=new iD;function lR(t,r){function i(t,r){!0===t.matrixAutoUpdate&&t.updateMatrix(),r.value.copy(t.matrix)}function s(t,s){t.opacity.value=s.opacity,s.color&&t.diffuse.value.copy(s.color),s.emissive&&t.emissive.value.copy(s.emissive).multiplyScalar(s.emissiveIntensity),s.map&&(t.map.value=s.map,i(s.map,t.mapTransform)),s.alphaMap&&(t.alphaMap.value=s.alphaMap,i(s.alphaMap,t.alphaMapTransform)),s.bumpMap&&(t.bumpMap.value=s.bumpMap,i(s.bumpMap,t.bumpMapTransform),t.bumpScale.value=s.bumpScale,s.side===eS&&(t.bumpScale.value*=-1)),s.normalMap&&(t.normalMap.value=s.normalMap,i(s.normalMap,t.normalMapTransform),t.normalScale.value.copy(s.normalScale),s.side===eS&&t.normalScale.value.negate()),s.displacementMap&&(t.displacementMap.value=s.displacementMap,i(s.displacementMap,t.displacementMapTransform),t.displacementScale.value=s.displacementScale,t.displacementBias.value=s.displacementBias),s.emissiveMap&&(t.emissiveMap.value=s.emissiveMap,i(s.emissiveMap,t.emissiveMapTransform)),s.specularMap&&(t.specularMap.value=s.specularMap,i(s.specularMap,t.specularMapTransform)),s.alphaTest>0&&(t.alphaTest.value=s.alphaTest);let u=r.get(s),c=u.envMap,h=u.envMapRotation;c&&(t.envMap.value=c,lD.copy(h),lD.x*=-1,lD.y*=-1,lD.z*=-1,c.isCubeTexture&&!1===c.isRenderTargetTexture&&(lD.y*=-1,lD.z*=-1),t.envMapRotation.value.setFromMatrix4(lP.makeRotationFromEuler(lD)),t.flipEnvMap.value=c.isCubeTexture&&!1===c.isRenderTargetTexture?-1:1,t.reflectivity.value=s.reflectivity,t.ior.value=s.ior,t.refractionRatio.value=s.refractionRatio),s.lightMap&&(t.lightMap.value=s.lightMap,t.lightMapIntensity.value=s.lightMapIntensity,i(s.lightMap,t.lightMapTransform)),s.aoMap&&(t.aoMap.value=s.aoMap,t.aoMapIntensity.value=s.aoMapIntensity,i(s.aoMap,t.aoMapTransform))}return{refreshFogUniforms:function(r,i){i.color.getRGB(r.fogColor.value,a3(t)),i.isFog?(r.fogNear.value=i.near,r.fogFar.value=i.far):i.isFogExp2&&(r.fogDensity.value=i.density)},refreshMaterialUniforms:function(t,u,c,h,p){u.isMeshBasicMaterial?s(t,u):u.isMeshLambertMaterial?s(t,u):u.isMeshToonMaterial?(s(t,u),function(t,r){r.gradientMap&&(t.gradientMap.value=r.gradientMap)}(t,u)):u.isMeshPhongMaterial?(s(t,u),function(t,r){t.specular.value.copy(r.specular),t.shininess.value=Math.max(r.shininess,1e-4)}(t,u)):u.isMeshStandardMaterial?(s(t,u),function(t,r){t.metalness.value=r.metalness,r.metalnessMap&&(t.metalnessMap.value=r.metalnessMap,i(r.metalnessMap,t.metalnessMapTransform)),t.roughness.value=r.roughness,r.roughnessMap&&(t.roughnessMap.value=r.roughnessMap,i(r.roughnessMap,t.roughnessMapTransform)),r.envMap&&(t.envMapIntensity.value=r.envMapIntensity)}(t,u),u.isMeshPhysicalMaterial&&function(t,r,s){t.ior.value=r.ior,r.sheen>0&&(t.sheenColor.value.copy(r.sheenColor).multiplyScalar(r.sheen),t.sheenRoughness.value=r.sheenRoughness,r.sheenColorMap&&(t.sheenColorMap.value=r.sheenColorMap,i(r.sheenColorMap,t.sheenColorMapTransform)),r.sheenRoughnessMap&&(t.sheenRoughnessMap.value=r.sheenRoughnessMap,i(r.sheenRoughnessMap,t.sheenRoughnessMapTransform))),r.clearcoat>0&&(t.clearcoat.value=r.clearcoat,t.clearcoatRoughness.value=r.clearcoatRoughness,r.clearcoatMap&&(t.clearcoatMap.value=r.clearcoatMap,i(r.clearcoatMap,t.clearcoatMapTransform)),r.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=r.clearcoatRoughnessMap,i(r.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),r.clearcoatNormalMap&&(t.clearcoatNormalMap.value=r.clearcoatNormalMap,i(r.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(r.clearcoatNormalScale),r.side===eS&&t.clearcoatNormalScale.value.negate())),r.dispersion>0&&(t.dispersion.value=r.dispersion),r.iridescence>0&&(t.iridescence.value=r.iridescence,t.iridescenceIOR.value=r.iridescenceIOR,t.iridescenceThicknessMinimum.value=r.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=r.iridescenceThicknessRange[1],r.iridescenceMap&&(t.iridescenceMap.value=r.iridescenceMap,i(r.iridescenceMap,t.iridescenceMapTransform)),r.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=r.iridescenceThicknessMap,i(r.iridescenceThicknessMap,t.iridescenceThicknessMapTransform))),r.transmission>0&&(t.transmission.value=r.transmission,t.transmissionSamplerMap.value=s.texture,t.transmissionSamplerSize.value.set(s.width,s.height),r.transmissionMap&&(t.transmissionMap.value=r.transmissionMap,i(r.transmissionMap,t.transmissionMapTransform)),t.thickness.value=r.thickness,r.thicknessMap&&(t.thicknessMap.value=r.thicknessMap,i(r.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=r.attenuationDistance,t.attenuationColor.value.copy(r.attenuationColor)),r.anisotropy>0&&(t.anisotropyVector.value.set(r.anisotropy*Math.cos(r.anisotropyRotation),r.anisotropy*Math.sin(r.anisotropyRotation)),r.anisotropyMap&&(t.anisotropyMap.value=r.anisotropyMap,i(r.anisotropyMap,t.anisotropyMapTransform))),t.specularIntensity.value=r.specularIntensity,t.specularColor.value.copy(r.specularColor),r.specularColorMap&&(t.specularColorMap.value=r.specularColorMap,i(r.specularColorMap,t.specularColorMapTransform)),r.specularIntensityMap&&(t.specularIntensityMap.value=r.specularIntensityMap,i(r.specularIntensityMap,t.specularIntensityMapTransform))}(t,u,p)):u.isMeshMatcapMaterial?(s(t,u),function(t,r){r.matcap&&(t.matcap.value=r.matcap)}(t,u)):u.isMeshDepthMaterial?s(t,u):u.isMeshDistanceMaterial?(s(t,u),function(t,i){let s=r.get(i).light;t.referencePosition.value.setFromMatrixPosition(s.matrixWorld),t.nearDistance.value=s.shadow.camera.near,t.farDistance.value=s.shadow.camera.far}(t,u)):u.isMeshNormalMaterial?s(t,u):u.isLineBasicMaterial?(function(t,r){t.diffuse.value.copy(r.color),t.opacity.value=r.opacity,r.map&&(t.map.value=r.map,i(r.map,t.mapTransform))}(t,u),u.isLineDashedMaterial&&function(t,r){t.dashSize.value=r.dashSize,t.totalSize.value=r.dashSize+r.gapSize,t.scale.value=r.scale}(t,u)):u.isPointsMaterial?function(t,r,s,u){t.diffuse.value.copy(r.color),t.opacity.value=r.opacity,t.size.value=r.size*s,t.scale.value=.5*u,r.map&&(t.map.value=r.map,i(r.map,t.uvTransform)),r.alphaMap&&(t.alphaMap.value=r.alphaMap,i(r.alphaMap,t.alphaMapTransform)),r.alphaTest>0&&(t.alphaTest.value=r.alphaTest)}(t,u,c,h):u.isSpriteMaterial?function(t,r){t.diffuse.value.copy(r.color),t.opacity.value=r.opacity,t.rotation.value=r.rotation,r.map&&(t.map.value=r.map,i(r.map,t.mapTransform)),r.alphaMap&&(t.alphaMap.value=r.alphaMap,i(r.alphaMap,t.alphaMapTransform)),r.alphaTest>0&&(t.alphaTest.value=r.alphaTest)}(t,u):u.isShadowMaterial?(t.color.value.copy(u.color),t.opacity.value=u.opacity):u.isShaderMaterial&&(u.uniformsNeedUpdate=!1)}}}function lL(t,r,i,s){let u={},c={},h=[],p=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function f(t){let r={boundary:0,storage:0};return"number"==typeof t||"boolean"==typeof t?(r.boundary=4,r.storage=4):t.isVector2?(r.boundary=8,r.storage=8):t.isVector3||t.isColor?(r.boundary=16,r.storage=12):t.isVector4?(r.boundary=16,r.storage=16):t.isMatrix3?(r.boundary=48,r.storage=48):t.isMatrix4?(r.boundary=64,r.storage=64):t.isTexture,r}function v(r){let i=r.target;i.removeEventListener("dispose",v);let s=h.indexOf(i.__bindingPointIndex);h.splice(s,1),t.deleteBuffer(u[i.id]),delete u[i.id],delete c[i.id]}return{bind:function(t,r){let i=r.program;s.uniformBlockBinding(t,i)},update:function(i,y){let x=u[i.id];void 0===x&&(function(t){let r=t.uniforms,i=0;for(let t=0,s=r.length;t<s;t++){let s=Array.isArray(r[t])?r[t]:[r[t]];for(let t=0,r=s.length;t<r;t++){let r=s[t],u=Array.isArray(r.value)?r.value:[r.value];for(let t=0,s=u.length;t<s;t++){let s=f(u[t]),c=i%16,h=c%s.boundary,p=c+h;i+=h,0!==p&&16-p<s.storage&&(i+=16-p),r.__data=new Float32Array(s.storage/Float32Array.BYTES_PER_ELEMENT),r.__offset=i,i+=s.storage}}}let s=i%16;s>0&&(i+=16-s),t.__size=i,t.__cache={},this}(i),x=function(r){let i=function(){for(let t=0;t<p;t++)if(-1===h.indexOf(t))return h.push(t),t;return 0}();r.__bindingPointIndex=i;let s=t.createBuffer(),u=r.__size,c=r.usage;return t.bindBuffer(t.UNIFORM_BUFFER,s),t.bufferData(t.UNIFORM_BUFFER,u,c),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,i,s),s}(i),u[i.id]=x,i.addEventListener("dispose",v));let _=y.program;s.updateUBOMapping(i,_);let b=r.render.frame;c[i.id]!==b&&(function(r){let i=u[r.id],s=r.uniforms,c=r.__cache;t.bindBuffer(t.UNIFORM_BUFFER,i);for(let r=0,i=s.length;r<i;r++){let i=Array.isArray(s[r])?s[r]:[s[r]];for(let s=0,u=i.length;s<u;s++){let u=i[s];if(!0===function(t,r,i,s){let u=t.value,c=r+"_"+i;if(void 0===s[c])return"number"==typeof u||"boolean"==typeof u?s[c]=u:s[c]=u.clone(),!0;{let t=s[c];if("number"==typeof u||"boolean"==typeof u){if(t!==u)return s[c]=u,!0}else if(!1===t.equals(u))return t.copy(u),!0}return!1}(u,r,s,c)){let r=u.__offset,i=Array.isArray(u.value)?u.value:[u.value],s=0;for(let c=0;c<i.length;c++){let h=i[c],p=f(h);"number"==typeof h||"boolean"==typeof h?(u.__data[0]=h,t.bufferSubData(t.UNIFORM_BUFFER,r+s,u.__data)):h.isMatrix3?(u.__data[0]=h.elements[0],u.__data[1]=h.elements[1],u.__data[2]=h.elements[2],u.__data[3]=0,u.__data[4]=h.elements[3],u.__data[5]=h.elements[4],u.__data[6]=h.elements[5],u.__data[7]=0,u.__data[8]=h.elements[6],u.__data[9]=h.elements[7],u.__data[10]=h.elements[8],u.__data[11]=0):(h.toArray(u.__data,s),s+=p.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,r,u.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}(i),c[i.id]=b)},dispose:function(){for(let r in u)t.deleteBuffer(u[r]);h=[],u={},c={}}}}class lk{constructor(t={}){let r,i,s,u,c,h,p,f,v,y,x,_,b,w,S,M,A,C,T,I,D,P,R,L,k;let{canvas:O=rN(),context:B=null,depth:N=!0,stencil:F=!1,alpha:z=!1,antialias:U=!1,premultipliedAlpha:H=!0,preserveDrawingBuffer:G=!1,powerPreference:V="default",failIfMajorPerformanceCaveat:W=!1,reverseDepthBuffer:j=!1}=t;if(this.isWebGLRenderer=!0,null!==B){if("undefined"!=typeof WebGLRenderingContext&&B instanceof WebGLRenderingContext)throw Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");r=B.getContextAttributes().alpha}else r=z;let X=new Uint32Array(4),Y=new Int32Array(4),$=null,J=null,Z=[],K=[];this.domElement=O,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=nH,this.toneMapping=e8,this.toneMappingExposure=1;let q=this,Q=!1,ee=0,et=0,en=null,er=-1,ei=null,ea=new r0,eo=new r0,es=null,el=new ad(0),eu=0,ec=O.width,ed=O.height,ep=1,ef=null,eg=null,em=new r0(0,0,ec,ed),ev=new r0(0,0,ec,ed),ey=!1,ex=new oc,e_=!1,eb=!1,eA=new iD,eC=new iD,eT=new r8,eE=new r0,eI={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},eD=!1;function eP(){return null===en?ep:1}let eR=B;function eL(t,r){return O.getContext(t,r)}try{if("setAttribute"in O&&O.setAttribute("data-engine",`three.js r${eh}`),O.addEventListener("webglcontextlost",eB,!1),O.addEventListener("webglcontextrestored",eN,!1),O.addEventListener("webglcontextcreationerror",eF,!1),null===eR){let t="webgl2";if(eR=eL(t,{alpha:!0,depth:N,stencil:F,antialias:U,premultipliedAlpha:H,preserveDrawingBuffer:G,powerPreference:V,failIfMajorPerformanceCaveat:W}),null===eR){if(eL(t))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}}}catch(t){throw t}function ek(){(i=new oW(eR)).init(),R=new lb(eR,i),s=new oS(eR,i,t,R),u=new lv(eR,i),s.reverseDepthBuffer&&j&&u.buffers.depth.setReversed(!0),c=new oY(eR),h=new ln,p=new l_(eR,i,u,h,s,R,c),f=new oA(q),v=new oV(q),y=new od(eR),L=new ob(eR,y),x=new oj(eR,y,c,L),_=new oJ(eR,x,y,c),I=new o$(eR,s,p),A=new oM(h),b=new lt(q,f,v,i,s,L,A),w=new lR(q,h),S=new lo,M=new ld(i),T=new o_(q,f,v,u,_,r,H),C=new lg(q,_,s),k=new lL(eR,c,s,u),D=new ow(eR,i,c),P=new oX(eR,i,c),c.programs=b.programs,q.capabilities=s,q.extensions=i,q.properties=h,q.renderLists=S,q.shadowMap=C,q.state=u,q.info=c}ek();let eO=new lI(q,eR);function eB(t){t.preventDefault(),Q=!0}function eN(){Q=!1;let t=c.autoReset,r=C.enabled,i=C.autoUpdate,s=C.needsUpdate,u=C.type;ek(),c.autoReset=t,C.enabled=r,C.autoUpdate=i,C.needsUpdate=s,C.type=u}function eF(t){}function ez(t){let r=t.target;r.removeEventListener("dispose",ez),function(t){(function(t){let r=h.get(t).programs;void 0!==r&&(r.forEach(function(t){b.releaseProgram(t)}),t.isShaderMaterial&&b.releaseShaderCache(t))})(t),h.remove(t)}(r)}this.xr=eO,this.getContext=function(){return eR},this.getContextAttributes=function(){return eR.getContextAttributes()},this.forceContextLoss=function(){let t=i.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){let t=i.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return ep},this.setPixelRatio=function(t){void 0!==t&&(ep=t,this.setSize(ec,ed,!1))},this.getSize=function(t){return t.set(ec,ed)},this.setSize=function(t,r,i=!0){if(!eO.isPresenting)ec=t,ed=r,O.width=Math.floor(t*ep),O.height=Math.floor(r*ep),!0===i&&(O.style.width=t+"px",O.style.height=r+"px"),this.setViewport(0,0,t,r)},this.getDrawingBufferSize=function(t){return t.set(ec*ep,ed*ep).floor()},this.setDrawingBufferSize=function(t,r,i){ec=t,ed=r,ep=i,O.width=Math.floor(t*i),O.height=Math.floor(r*i),this.setViewport(0,0,t,r)},this.getCurrentViewport=function(t){return t.copy(ea)},this.getViewport=function(t){return t.copy(em)},this.setViewport=function(t,r,i,s){t.isVector4?em.set(t.x,t.y,t.z,t.w):em.set(t,r,i,s),u.viewport(ea.copy(em).multiplyScalar(ep).round())},this.getScissor=function(t){return t.copy(ev)},this.setScissor=function(t,r,i,s){t.isVector4?ev.set(t.x,t.y,t.z,t.w):ev.set(t,r,i,s),u.scissor(eo.copy(ev).multiplyScalar(ep).round())},this.getScissorTest=function(){return ey},this.setScissorTest=function(t){u.setScissorTest(ey=t)},this.setOpaqueSort=function(t){ef=t},this.setTransparentSort=function(t){eg=t},this.getClearColor=function(t){return t.copy(T.getClearColor())},this.setClearColor=function(){T.setClearColor.apply(T,arguments)},this.getClearAlpha=function(){return T.getClearAlpha()},this.setClearAlpha=function(){T.setClearAlpha.apply(T,arguments)},this.clear=function(t=!0,r=!0,i=!0){let s=0;if(t){let t=!1;if(null!==en){let r=en.texture.format;t=r===tK||r===tJ||r===tY}if(t){let t=en.texture.type,r=t===tT||t===tR||t===tD||t===tN||t===tO||t===tB,i=T.getClearColor(),s=T.getClearAlpha(),u=i.r,c=i.g,h=i.b;r?(X[0]=u,X[1]=c,X[2]=h,X[3]=s,eR.clearBufferuiv(eR.COLOR,0,X)):(Y[0]=u,Y[1]=c,Y[2]=h,Y[3]=s,eR.clearBufferiv(eR.COLOR,0,Y))}else s|=eR.COLOR_BUFFER_BIT}r&&(s|=eR.DEPTH_BUFFER_BIT),i&&(s|=eR.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(0xffffffff)),eR.clear(s)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){O.removeEventListener("webglcontextlost",eB,!1),O.removeEventListener("webglcontextrestored",eN,!1),O.removeEventListener("webglcontextcreationerror",eF,!1),S.dispose(),M.dispose(),h.dispose(),f.dispose(),v.dispose(),_.dispose(),L.dispose(),k.dispose(),b.dispose(),eO.dispose(),eO.removeEventListener("sessionstart",eG),eO.removeEventListener("sessionend",eV),eW.stop()};function eU(t,r,i){!0===t.transparent&&t.side===eM&&!1===t.forceSinglePass?(t.side=eS,t.needsUpdate=!0,eZ(t,r,i),t.side=ew,t.needsUpdate=!0,eZ(t,r,i),t.side=eM):eZ(t,r,i)}this.renderBufferDirect=function(t,r,c,_,b,S){let M;null===r&&(r=eI);let C=b.isMesh&&0>b.matrixWorld.determinant(),T=function(t,r,i,c,y){!0!==r.isScene&&(r=eI),p.resetTextureUnits();let x=r.fog,_=c.isMeshStandardMaterial?r.environment:null,b=null===en?q.outputColorSpace:!0===en.isXRRenderTarget?en.texture.colorSpace:nG,S=(c.isMeshStandardMaterial?v:f).get(c.envMap||_),M=!0===c.vertexColors&&!!i.attributes.color&&4===i.attributes.color.itemSize,C=!!i.attributes.tangent&&(!!c.normalMap||c.anisotropy>0),T=!!i.morphAttributes.position,D=!!i.morphAttributes.normal,P=!!i.morphAttributes.color,R=e8;c.toneMapped&&(null===en||!0===en.isXRRenderTarget)&&(R=q.toneMapping);let L=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,O=void 0!==L?L.length:0,B=h.get(c),N=J.state.lights;if(!0===e_&&(!0===eb||t!==ei)){let r=t===ei&&c.id===er;A.setState(c,t,r)}let F=!1;c.version===B.__version?B.needsLights&&B.lightsStateVersion!==N.state.version?F=!0:B.outputColorSpace!==b?F=!0:y.isBatchedMesh&&!1===B.batching?F=!0:y.isBatchedMesh||!0!==B.batching?y.isBatchedMesh&&!0===B.batchingColor&&null===y.colorTexture?F=!0:y.isBatchedMesh&&!1===B.batchingColor&&null!==y.colorTexture?F=!0:y.isInstancedMesh&&!1===B.instancing?F=!0:y.isInstancedMesh||!0!==B.instancing?y.isSkinnedMesh&&!1===B.skinning?F=!0:y.isSkinnedMesh||!0!==B.skinning?y.isInstancedMesh&&!0===B.instancingColor&&null===y.instanceColor?F=!0:y.isInstancedMesh&&!1===B.instancingColor&&null!==y.instanceColor?F=!0:y.isInstancedMesh&&!0===B.instancingMorph&&null===y.morphTexture?F=!0:y.isInstancedMesh&&!1===B.instancingMorph&&null!==y.morphTexture?F=!0:B.envMap!==S?F=!0:!0===c.fog&&B.fog!==x?F=!0:void 0!==B.numClippingPlanes&&(B.numClippingPlanes!==A.numPlanes||B.numIntersection!==A.numIntersection)?F=!0:B.vertexAlphas!==M?F=!0:B.vertexTangents!==C?F=!0:B.morphTargets!==T?F=!0:B.morphNormals!==D?F=!0:B.morphColors!==P?F=!0:B.toneMapping!==R?F=!0:B.morphTargetsCount!==O&&(F=!0):F=!0:F=!0:F=!0:(F=!0,B.__version=c.version);let z=B.currentProgram;!0===F&&(z=eZ(c,r,y));let U=!1,H=!1,G=!1,V=z.getUniforms(),W=B.uniforms;if(u.useProgram(z.program)&&(U=!0,H=!0,G=!0),c.id!==er&&(er=c.id,H=!0),U||ei!==t){u.buffers.depth.getReversed()?(eA.copy(t.projectionMatrix),!function(t){let r=t.elements;r[2]=.5*r[2]+.5*r[3],r[6]=.5*r[6]+.5*r[7],r[10]=.5*r[10]+.5*r[11],r[14]=.5*r[14]+.5*r[15]}(eA),!function(t){let r=t.elements;-1===r[11]?(r[10]=-r[10]-1,r[14]=-r[14]):(r[10]=-r[10],r[14]=-r[14]+1)}(eA),V.setValue(eR,"projectionMatrix",eA)):V.setValue(eR,"projectionMatrix",t.projectionMatrix),V.setValue(eR,"viewMatrix",t.matrixWorldInverse);let r=V.map.cameraPosition;void 0!==r&&r.setValue(eR,eT.setFromMatrixPosition(t.matrixWorld)),s.logarithmicDepthBuffer&&V.setValue(eR,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),(c.isMeshPhongMaterial||c.isMeshToonMaterial||c.isMeshLambertMaterial||c.isMeshBasicMaterial||c.isMeshStandardMaterial||c.isShaderMaterial)&&V.setValue(eR,"isOrthographic",!0===t.isOrthographicCamera),ei!==t&&(ei=t,H=!0,G=!0)}if(y.isSkinnedMesh){V.setOptional(eR,y,"bindMatrix"),V.setOptional(eR,y,"bindMatrixInverse");let t=y.skeleton;t&&(null===t.boneTexture&&t.computeBoneTexture(),V.setValue(eR,"boneTexture",t.boneTexture,p))}y.isBatchedMesh&&(V.setOptional(eR,y,"batchingTexture"),V.setValue(eR,"batchingTexture",y._matricesTexture,p),V.setOptional(eR,y,"batchingIdTexture"),V.setValue(eR,"batchingIdTexture",y._indirectTexture,p),V.setOptional(eR,y,"batchingColorTexture"),null!==y._colorsTexture&&V.setValue(eR,"batchingColorTexture",y._colorsTexture,p));let j=i.morphAttributes;if((void 0!==j.position||void 0!==j.normal||void 0!==j.color)&&I.update(y,i,z),(H||B.receiveShadow!==y.receiveShadow)&&(B.receiveShadow=y.receiveShadow,V.setValue(eR,"receiveShadow",y.receiveShadow)),c.isMeshGouraudMaterial&&null!==c.envMap&&(W.envMap.value=S,W.flipEnvMap.value=S.isCubeTexture&&!1===S.isRenderTargetTexture?-1:1),c.isMeshStandardMaterial&&null===c.envMap&&null!==r.environment&&(W.envMapIntensity.value=r.environmentIntensity),H&&(V.setValue(eR,"toneMappingExposure",q.toneMappingExposure),B.needsLights&&function(t,r){t.ambientLightColor.needsUpdate=r,t.lightProbe.needsUpdate=r,t.directionalLights.needsUpdate=r,t.directionalLightShadows.needsUpdate=r,t.pointLights.needsUpdate=r,t.pointLightShadows.needsUpdate=r,t.spotLights.needsUpdate=r,t.spotLightShadows.needsUpdate=r,t.rectAreaLights.needsUpdate=r,t.hemisphereLights.needsUpdate=r}(W,G),x&&!0===c.fog&&w.refreshFogUniforms(W,x),w.refreshMaterialUniforms(W,c,ep,ed,J.state.transmissionRenderTarget[t.id]),sW.upload(eR,eK(B),W,p)),c.isShaderMaterial&&!0===c.uniformsNeedUpdate&&(sW.upload(eR,eK(B),W,p),c.uniformsNeedUpdate=!1),c.isSpriteMaterial&&V.setValue(eR,"center",y.center),V.setValue(eR,"modelViewMatrix",y.modelViewMatrix),V.setValue(eR,"normalMatrix",y.normalMatrix),V.setValue(eR,"modelMatrix",y.matrixWorld),c.isShaderMaterial||c.isRawShaderMaterial){let t=c.uniformsGroups;for(let r=0,i=t.length;r<i;r++){let i=t[r];k.update(i,z),k.bind(i,z)}}return z}(t,r,c,_,b);u.setMaterial(_,C);let R=c.index,O=1;if(!0===_.wireframe){if(void 0===(R=x.getWireframeAttribute(c)))return;O=2}let B=c.drawRange,N=c.attributes.position,F=B.start*O,z=(B.start+B.count)*O;null!==S&&(F=Math.max(F,S.start*O),z=Math.min(z,(S.start+S.count)*O)),null!==R?(F=Math.max(F,0),z=Math.min(z,R.count)):null!=N&&(F=Math.max(F,0),z=Math.min(z,N.count));let U=z-F;if(U<0||U===1/0)return;L.setup(b,_,T,c,R);let H=D;if(null!==R&&(M=y.get(R),(H=P).setIndex(M)),b.isMesh)!0===_.wireframe?(u.setLineWidth(_.wireframeLinewidth*eP()),H.setMode(eR.LINES)):H.setMode(eR.TRIANGLES);else if(b.isLine){let t=_.linewidth;void 0===t&&(t=1),u.setLineWidth(t*eP()),b.isLineSegments?H.setMode(eR.LINES):b.isLineLoop?H.setMode(eR.LINE_LOOP):H.setMode(eR.LINE_STRIP)}else b.isPoints?H.setMode(eR.POINTS):b.isSprite&&H.setMode(eR.TRIANGLES);if(b.isBatchedMesh){if(null!==b._multiDrawInstances)H.renderMultiDrawInstances(b._multiDrawStarts,b._multiDrawCounts,b._multiDrawCount,b._multiDrawInstances);else if(i.get("WEBGL_multi_draw"))H.renderMultiDraw(b._multiDrawStarts,b._multiDrawCounts,b._multiDrawCount);else{let t=b._multiDrawStarts,r=b._multiDrawCounts,i=b._multiDrawCount,s=R?y.get(R).bytesPerElement:1,u=h.get(_).currentProgram.getUniforms();for(let c=0;c<i;c++)u.setValue(eR,"_gl_DrawID",c),H.render(t[c]/s,r[c])}}else if(b.isInstancedMesh)H.renderInstances(F,U,b.count);else if(c.isInstancedBufferGeometry){let t=void 0!==c._maxInstanceCount?c._maxInstanceCount:1/0,r=Math.min(c.instanceCount,t);H.renderInstances(F,U,r)}else H.render(F,U)},this.compile=function(t,r,i=null){null===i&&(i=t),(J=M.get(i)).init(r),K.push(J),i.traverseVisible(function(t){t.isLight&&t.layers.test(r.layers)&&(J.pushLight(t),t.castShadow&&J.pushShadow(t))}),t!==i&&t.traverseVisible(function(t){t.isLight&&t.layers.test(r.layers)&&(J.pushLight(t),t.castShadow&&J.pushShadow(t))}),J.setupLights();let s=new Set;return t.traverse(function(t){if(!(t.isMesh||t.isPoints||t.isLine||t.isSprite))return;let r=t.material;if(r){if(Array.isArray(r))for(let u=0;u<r.length;u++){let c=r[u];eU(c,i,t),s.add(c)}else eU(r,i,t),s.add(r)}}),K.pop(),J=null,s},this.compileAsync=function(t,r,s=null){let u=this.compile(t,r,s);return new Promise(r=>{function s(){if(u.forEach(function(t){h.get(t).currentProgram.isReady()&&u.delete(t)}),0===u.size){r(t);return}setTimeout(s,10)}null!==i.get("KHR_parallel_shader_compile")?s():setTimeout(s,10)})};let eH=null;function eG(){eW.stop()}function eV(){eW.start()}let eW=new oh;function ej(t,r,i,s){if(!1===t.visible)return;if(t.layers.test(r.layers)){if(t.isGroup)i=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(r);else if(t.isLight)J.pushLight(t),t.castShadow&&J.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||ex.intersectsSprite(t)){s&&eE.setFromMatrixPosition(t.matrixWorld).applyMatrix4(eC);let r=_.update(t),u=t.material;u.visible&&$.push(t,r,u,i,eE.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||ex.intersectsObject(t))){let r=_.update(t),u=t.material;if(s&&(void 0!==t.boundingSphere?(null===t.boundingSphere&&t.computeBoundingSphere(),eE.copy(t.boundingSphere.center)):(null===r.boundingSphere&&r.computeBoundingSphere(),eE.copy(r.boundingSphere.center)),eE.applyMatrix4(t.matrixWorld).applyMatrix4(eC)),Array.isArray(u)){let s=r.groups;for(let c=0,h=s.length;c<h;c++){let h=s[c],p=u[h.materialIndex];p&&p.visible&&$.push(t,r,p,i,eE.z,h)}}else u.visible&&$.push(t,r,u,i,eE.z,null)}}let u=t.children;for(let t=0,c=u.length;t<c;t++)ej(u[t],r,i,s)}function eX(t,r,i,s){let c=t.opaque,h=t.transmissive,p=t.transparent;J.setupLightsView(i),!0===e_&&A.setGlobalState(q.clippingPlanes,i),s&&u.viewport(ea.copy(s)),c.length>0&&e$(c,r,i),h.length>0&&e$(h,r,i),p.length>0&&e$(p,r,i),u.buffers.depth.setTest(!0),u.buffers.depth.setMask(!0),u.buffers.color.setMask(!0),u.setPolygonOffset(!1)}function eY(t,r,s,u){if(null!==(!0===s.isScene?s.overrideMaterial:null))return;void 0===J.state.transmissionRenderTarget[u.id]&&(J.state.transmissionRenderTarget[u.id]=new r2(1,1,{generateMipmaps:!0,type:i.has("EXT_color_buffer_half_float")||i.has("EXT_color_buffer_float")?tk:tT,minFilter:tA,samples:4,stencilBuffer:F,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:rU.workingColorSpace}));let c=J.state.transmissionRenderTarget[u.id],h=u.viewport||ea;c.setSize(h.z,h.w);let f=q.getRenderTarget();q.setRenderTarget(c),q.getClearColor(el),(eu=q.getClearAlpha())<1&&q.setClearColor(0xffffff,.5),q.clear(),eD&&T.render(s);let v=q.toneMapping;q.toneMapping=e8;let y=u.viewport;if(void 0!==u.viewport&&(u.viewport=void 0),J.setupLightsView(u),!0===e_&&A.setGlobalState(q.clippingPlanes,u),e$(t,s,u),p.updateMultisampleRenderTarget(c),p.updateRenderTargetMipmap(c),!1===i.has("WEBGL_multisampled_render_to_texture")){let t=!1;for(let i=0,c=r.length;i<c;i++){let c=r[i],h=c.object,p=c.geometry,f=c.material,v=c.group;if(f.side===eM&&h.layers.test(u.layers)){let r=f.side;f.side=eS,f.needsUpdate=!0,eJ(h,s,u,p,f,v),f.side=r,f.needsUpdate=!0,t=!0}}!0===t&&(p.updateMultisampleRenderTarget(c),p.updateRenderTargetMipmap(c))}q.setRenderTarget(f),q.setClearColor(el,eu),void 0!==y&&(u.viewport=y),q.toneMapping=v}function e$(t,r,i){let s=!0===r.isScene?r.overrideMaterial:null;for(let u=0,c=t.length;u<c;u++){let c=t[u],h=c.object,p=c.geometry,f=null===s?c.material:s,v=c.group;h.layers.test(i.layers)&&eJ(h,r,i,p,f,v)}}function eJ(t,r,i,s,u,c){t.onBeforeRender(q,r,i,s,u,c),t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),u.onBeforeRender(q,r,i,s,t,c),!0===u.transparent&&u.side===eM&&!1===u.forceSinglePass?(u.side=eS,u.needsUpdate=!0,q.renderBufferDirect(i,r,s,u,t,c),u.side=ew,u.needsUpdate=!0,q.renderBufferDirect(i,r,s,u,t,c),u.side=eM):q.renderBufferDirect(i,r,s,u,t,c),t.onAfterRender(q,r,i,s,u,c)}function eZ(t,r,i){!0!==r.isScene&&(r=eI);let s=h.get(t),u=J.state.lights,c=J.state.shadowsArray,p=u.state.version,y=b.getParameters(t,u.state,c,r,i),x=b.getProgramCacheKey(y),_=s.programs;s.environment=t.isMeshStandardMaterial?r.environment:null,s.fog=r.fog,s.envMap=(t.isMeshStandardMaterial?v:f).get(t.envMap||s.environment),s.envMapRotation=null!==s.environment&&null===t.envMap?r.environmentRotation:t.envMapRotation,void 0===_&&(t.addEventListener("dispose",ez),_=new Map,s.programs=_);let w=_.get(x);if(void 0!==w){if(s.currentProgram===w&&s.lightsStateVersion===p)return eq(t,y),w}else y.uniforms=b.getUniforms(t),t.onBeforeCompile(y,q),w=b.acquireProgram(y,x),_.set(x,w),s.uniforms=y.uniforms;let S=s.uniforms;return(!t.isShaderMaterial&&!t.isRawShaderMaterial||!0===t.clipping)&&(S.clippingPlanes=A.uniform),eq(t,y),s.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),s.lightsStateVersion=p,s.needsLights&&(S.ambientLightColor.value=u.state.ambient,S.lightProbe.value=u.state.probe,S.directionalLights.value=u.state.directional,S.directionalLightShadows.value=u.state.directionalShadow,S.spotLights.value=u.state.spot,S.spotLightShadows.value=u.state.spotShadow,S.rectAreaLights.value=u.state.rectArea,S.ltc_1.value=u.state.rectAreaLTC1,S.ltc_2.value=u.state.rectAreaLTC2,S.pointLights.value=u.state.point,S.pointLightShadows.value=u.state.pointShadow,S.hemisphereLights.value=u.state.hemi,S.directionalShadowMap.value=u.state.directionalShadowMap,S.directionalShadowMatrix.value=u.state.directionalShadowMatrix,S.spotShadowMap.value=u.state.spotShadowMap,S.spotLightMatrix.value=u.state.spotLightMatrix,S.spotLightMap.value=u.state.spotLightMap,S.pointShadowMap.value=u.state.pointShadowMap,S.pointShadowMatrix.value=u.state.pointShadowMatrix),s.currentProgram=w,s.uniformsList=null,w}function eK(t){if(null===t.uniformsList){let r=t.currentProgram.getUniforms();t.uniformsList=sW.seqWithValue(r.seq,t.uniforms)}return t.uniformsList}function eq(t,r){let i=h.get(t);i.outputColorSpace=r.outputColorSpace,i.batching=r.batching,i.batchingColor=r.batchingColor,i.instancing=r.instancing,i.instancingColor=r.instancingColor,i.instancingMorph=r.instancingMorph,i.skinning=r.skinning,i.morphTargets=r.morphTargets,i.morphNormals=r.morphNormals,i.morphColors=r.morphColors,i.morphTargetsCount=r.morphTargetsCount,i.numClippingPlanes=r.numClippingPlanes,i.numIntersection=r.numClipIntersection,i.vertexAlphas=r.vertexAlphas,i.vertexTangents=r.vertexTangents,i.toneMapping=r.toneMapping}eW.setAnimationLoop(function(t){eH&&eH(t)}),"undefined"!=typeof self&&eW.setContext(self),this.setAnimationLoop=function(t){eH=t,eO.setAnimationLoop(t),null===t?eW.stop():eW.start()},eO.addEventListener("sessionstart",eG),eO.addEventListener("sessionend",eV),this.render=function(t,r){if(void 0!==r&&!0!==r.isCamera||!0===Q)return;if(!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===r.parent&&!0===r.matrixWorldAutoUpdate&&r.updateMatrixWorld(),!0===eO.enabled&&!0===eO.isPresenting&&(!0===eO.cameraAutoUpdate&&eO.updateCamera(r),r=eO.getCamera()),!0===t.isScene&&t.onBeforeRender(q,t,r,en),(J=M.get(t,K.length)).init(r),K.push(J),eC.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ex.setFromProjectionMatrix(eC),eb=this.localClippingEnabled,e_=A.init(this.clippingPlanes,eb),($=S.get(t,Z.length)).init(),Z.push($),!0===eO.enabled&&!0===eO.isPresenting){let t=q.xr.getDepthSensingMesh();null!==t&&ej(t,r,-1/0,q.sortObjects)}ej(t,r,0,q.sortObjects),$.finish(),!0===q.sortObjects&&$.sort(ef,eg),(eD=!1===eO.enabled||!1===eO.isPresenting||!1===eO.hasDepthSensing())&&T.addToRenderList($,t),this.info.render.frame++,!0===e_&&A.beginShadows();let i=J.state.shadowsArray;C.render(i,t,r),!0===e_&&A.endShadows(),!0===this.info.autoReset&&this.info.reset();let s=$.opaque,u=$.transmissive;if(J.setupLights(),r.isArrayCamera){let i=r.cameras;if(u.length>0)for(let r=0,c=i.length;r<c;r++)eY(s,u,t,i[r]);eD&&T.render(t);for(let r=0,s=i.length;r<s;r++){let s=i[r];eX($,t,s,s.viewport)}}else u.length>0&&eY(s,u,t,r),eD&&T.render(t),eX($,t,r);null!==en&&(p.updateMultisampleRenderTarget(en),p.updateRenderTargetMipmap(en)),!0===t.isScene&&t.onAfterRender(q,t,r),L.resetDefaultState(),er=-1,ei=null,K.pop(),K.length>0?(J=K[K.length-1],!0===e_&&A.setGlobalState(q.clippingPlanes,J.state.camera)):J=null,Z.pop(),$=Z.length>0?Z[Z.length-1]:null};this.getActiveCubeFace=function(){return ee},this.getActiveMipmapLevel=function(){return et},this.getRenderTarget=function(){return en},this.setRenderTargetTextures=function(t,r,s){h.get(t.texture).__webglTexture=r,h.get(t.depthTexture).__webglTexture=s;let u=h.get(t);u.__hasExternalTextures=!0,u.__autoAllocateDepthBuffer=void 0===s,!u.__autoAllocateDepthBuffer&&!0===i.has("WEBGL_multisampled_render_to_texture")&&(u.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(t,r){let i=h.get(t);i.__webglFramebuffer=r,i.__useDefaultFramebuffer=void 0===r},this.setRenderTarget=function(t,r=0,i=0){en=t,ee=r,et=i;let s=!0,c=null,f=!1,v=!1;if(t){let y=h.get(t);if(void 0!==y.__useDefaultFramebuffer)u.bindFramebuffer(eR.FRAMEBUFFER,null),s=!1;else if(void 0===y.__webglFramebuffer)p.setupRenderTarget(t);else if(y.__hasExternalTextures)p.rebindTextures(t,h.get(t.texture).__webglTexture,h.get(t.depthTexture).__webglTexture);else if(t.depthBuffer){let r=t.depthTexture;if(y.__boundDepthTexture!==r){if(null!==r&&h.has(r)&&(t.width!==r.image.width||t.height!==r.image.height))throw Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");p.setupDepthRenderbuffer(t)}}let x=t.texture;(x.isData3DTexture||x.isDataArrayTexture||x.isCompressedArrayTexture)&&(v=!0);let _=h.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(c=Array.isArray(_[r])?_[r][i]:_[r],f=!0):c=t.samples>0&&!1===p.useMultisampledRTT(t)?h.get(t).__webglMultisampledFramebuffer:Array.isArray(_)?_[i]:_,ea.copy(t.viewport),eo.copy(t.scissor),es=t.scissorTest}else ea.copy(em).multiplyScalar(ep).floor(),eo.copy(ev).multiplyScalar(ep).floor(),es=ey;if(u.bindFramebuffer(eR.FRAMEBUFFER,c)&&s&&u.drawBuffers(t,c),u.viewport(ea),u.scissor(eo),u.setScissorTest(es),f){let s=h.get(t.texture);eR.framebufferTexture2D(eR.FRAMEBUFFER,eR.COLOR_ATTACHMENT0,eR.TEXTURE_CUBE_MAP_POSITIVE_X+r,s.__webglTexture,i)}else if(v){let s=h.get(t.texture);eR.framebufferTextureLayer(eR.FRAMEBUFFER,eR.COLOR_ATTACHMENT0,s.__webglTexture,i||0,r||0)}er=-1},this.readRenderTargetPixels=function(t,r,i,c,p,f,v){if(!(t&&t.isWebGLRenderTarget))return;let y=h.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==v&&(y=y[v]),y){u.bindFramebuffer(eR.FRAMEBUFFER,y);try{let u=t.texture,h=u.format,v=u.type;if(!s.textureFormatReadable(h)||!s.textureTypeReadable(v))return;r>=0&&r<=t.width-c&&i>=0&&i<=t.height-p&&eR.readPixels(r,i,c,p,R.convert(h),R.convert(v),f)}finally{let t=null!==en?h.get(en).__webglFramebuffer:null;u.bindFramebuffer(eR.FRAMEBUFFER,t)}}},this.readRenderTargetPixelsAsync=async function(t,r,i,c,p,f,v){if(!(t&&t.isWebGLRenderTarget))throw Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let y=h.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==v&&(y=y[v]),y){let v=t.texture,w=v.format,S=v.type;if(!s.textureFormatReadable(w))throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!s.textureTypeReadable(S))throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(r>=0&&r<=t.width-c&&i>=0&&i<=t.height-p){var x,_,b;u.bindFramebuffer(eR.FRAMEBUFFER,y);let t=eR.createBuffer();eR.bindBuffer(eR.PIXEL_PACK_BUFFER,t),eR.bufferData(eR.PIXEL_PACK_BUFFER,f.byteLength,eR.STREAM_READ),eR.readPixels(r,i,c,p,R.convert(w),R.convert(S),0);let s=null!==en?h.get(en).__webglFramebuffer:null;u.bindFramebuffer(eR.FRAMEBUFFER,s);let v=eR.fenceSync(eR.SYNC_GPU_COMMANDS_COMPLETE,0);return eR.flush(),await (x=eR,_=v,b=4,new Promise(function(t,r){setTimeout(function i(){switch(x.clientWaitSync(_,x.SYNC_FLUSH_COMMANDS_BIT,0)){case x.WAIT_FAILED:r();break;case x.TIMEOUT_EXPIRED:setTimeout(i,4);break;default:t()}},b)})),eR.bindBuffer(eR.PIXEL_PACK_BUFFER,t),eR.getBufferSubData(eR.PIXEL_PACK_BUFFER,0,f),eR.deleteBuffer(t),eR.deleteSync(v),f}throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(t,r=null,i=0){!0!==t.isTexture&&(rz("WebGLRenderer: copyFramebufferToTexture function signature has changed."),r=arguments[0]||null,t=arguments[1]);let s=Math.pow(2,-i),c=Math.floor(t.image.width*s),h=Math.floor(t.image.height*s),f=null!==r?r.x:0,v=null!==r?r.y:0;p.setTexture2D(t,0),eR.copyTexSubImage2D(eR.TEXTURE_2D,i,0,0,f,v,c,h),u.unbindTexture()},this.copyTextureToTexture=function(t,r,i=null,s=null,c=0){let f,v,y,x,_,b,w,S,M,A;!0!==t.isTexture&&(rz("WebGLRenderer: copyTextureToTexture function signature has changed."),s=arguments[0]||null,t=arguments[1],r=arguments[2],c=arguments[3]||0,i=null);let C=t.isCompressedTexture?t.mipmaps[c]:t.image;null!==i?(f=i.max.x-i.min.x,v=i.max.y-i.min.y,y=i.isBox3?i.max.z-i.min.z:1,x=i.min.x,_=i.min.y,b=i.isBox3?i.min.z:0):(f=C.width,v=C.height,y=C.depth||1,x=0,_=0,b=0),null!==s?(w=s.x,S=s.y,M=s.z):(w=0,S=0,M=0);let T=R.convert(r.format),I=R.convert(r.type);r.isData3DTexture?(p.setTexture3D(r,0),A=eR.TEXTURE_3D):r.isDataArrayTexture||r.isCompressedArrayTexture?(p.setTexture2DArray(r,0),A=eR.TEXTURE_2D_ARRAY):(p.setTexture2D(r,0),A=eR.TEXTURE_2D),eR.pixelStorei(eR.UNPACK_FLIP_Y_WEBGL,r.flipY),eR.pixelStorei(eR.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),eR.pixelStorei(eR.UNPACK_ALIGNMENT,r.unpackAlignment);let D=eR.getParameter(eR.UNPACK_ROW_LENGTH),P=eR.getParameter(eR.UNPACK_IMAGE_HEIGHT),L=eR.getParameter(eR.UNPACK_SKIP_PIXELS),k=eR.getParameter(eR.UNPACK_SKIP_ROWS),O=eR.getParameter(eR.UNPACK_SKIP_IMAGES);eR.pixelStorei(eR.UNPACK_ROW_LENGTH,C.width),eR.pixelStorei(eR.UNPACK_IMAGE_HEIGHT,C.height),eR.pixelStorei(eR.UNPACK_SKIP_PIXELS,x),eR.pixelStorei(eR.UNPACK_SKIP_ROWS,_),eR.pixelStorei(eR.UNPACK_SKIP_IMAGES,b);let B=t.isDataArrayTexture||t.isData3DTexture,N=r.isDataArrayTexture||r.isData3DTexture;if(t.isRenderTargetTexture||t.isDepthTexture){let i=h.get(t),s=h.get(r),p=h.get(i.__renderTarget),C=h.get(s.__renderTarget);u.bindFramebuffer(eR.READ_FRAMEBUFFER,p.__webglFramebuffer),u.bindFramebuffer(eR.DRAW_FRAMEBUFFER,C.__webglFramebuffer);for(let i=0;i<y;i++)B&&eR.framebufferTextureLayer(eR.READ_FRAMEBUFFER,eR.COLOR_ATTACHMENT0,h.get(t).__webglTexture,c,b+i),t.isDepthTexture?(N&&eR.framebufferTextureLayer(eR.DRAW_FRAMEBUFFER,eR.COLOR_ATTACHMENT0,h.get(r).__webglTexture,c,M+i),eR.blitFramebuffer(x,_,f,v,w,S,f,v,eR.DEPTH_BUFFER_BIT,eR.NEAREST)):N?eR.copyTexSubImage3D(A,c,w,S,M+i,x,_,f,v):eR.copyTexSubImage2D(A,c,w,S,M+i,x,_,f,v);u.bindFramebuffer(eR.READ_FRAMEBUFFER,null),u.bindFramebuffer(eR.DRAW_FRAMEBUFFER,null)}else N?t.isDataTexture||t.isData3DTexture?eR.texSubImage3D(A,c,w,S,M,f,v,y,T,I,C.data):r.isCompressedArrayTexture?eR.compressedTexSubImage3D(A,c,w,S,M,f,v,y,T,C.data):eR.texSubImage3D(A,c,w,S,M,f,v,y,T,I,C):t.isDataTexture?eR.texSubImage2D(eR.TEXTURE_2D,c,w,S,f,v,T,I,C.data):t.isCompressedTexture?eR.compressedTexSubImage2D(eR.TEXTURE_2D,c,w,S,C.width,C.height,T,C.data):eR.texSubImage2D(eR.TEXTURE_2D,c,w,S,f,v,T,I,C);eR.pixelStorei(eR.UNPACK_ROW_LENGTH,D),eR.pixelStorei(eR.UNPACK_IMAGE_HEIGHT,P),eR.pixelStorei(eR.UNPACK_SKIP_PIXELS,L),eR.pixelStorei(eR.UNPACK_SKIP_ROWS,k),eR.pixelStorei(eR.UNPACK_SKIP_IMAGES,O),0===c&&r.generateMipmaps&&eR.generateMipmap(A),u.unbindTexture()},this.copyTextureToTexture3D=function(t,r,i=null,s=null,u=0){return!0!==t.isTexture&&(rz("WebGLRenderer: copyTextureToTexture3D function signature has changed."),i=arguments[0]||null,s=arguments[1]||null,t=arguments[2],r=arguments[3],u=arguments[4]||0),rz('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(t,r,i,s,u)},this.initRenderTarget=function(t){void 0===h.get(t).__webglFramebuffer&&p.setupRenderTarget(t)},this.initTexture=function(t){t.isCubeTexture?p.setTextureCube(t,0):t.isData3DTexture?p.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?p.setTexture2DArray(t,0):p.setTexture2D(t,0),u.unbindTexture()},this.resetState=function(){ee=0,et=0,en=null,u.reset(),L.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return rm}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;let r=this.getContext();r.drawingBufferColorspace=rU._getDrawingBufferColorSpace(t),r.unpackColorSpace=rU._getUnpackColorSpace()}}class lO{constructor(t,r=25e-5){this.isFogExp2=!0,this.name="",this.color=new ad(t),this.density=r}clone(){return new lO(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class lB{constructor(t,r=1,i=1e3){this.isFog=!0,this.name="",this.color=new ad(t),this.near=r,this.far=i}clone(){return new lB(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class lN extends i3{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new iU,this.environmentIntensity=1,this.environmentRotation=new iU,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,r){return super.copy(t,r),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let r=super.toJSON(t);return null!==this.fog&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(r.object.backgroundIntensity=this.backgroundIntensity),r.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(r.object.environmentIntensity=this.environmentIntensity),r.object.environmentRotation=this.environmentRotation.toArray(),r}}class lF{constructor(t,r){this.isInterleavedBuffer=!0,this.array=t,this.stride=r,this.count=void 0!==t?t.length/r:0,this.usage=ra,this.updateRanges=[],this.version=0,this.uuid=rS()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,r){this.updateRanges.push({start:t,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,r,i){t*=this.stride,i*=r.stride;for(let s=0,u=this.stride;s<u;s++)this.array[t+s]=r.array[i+s];return this}set(t,r=0){return this.array.set(t,r),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=rS()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let r=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(r,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=rS()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}let lz=new r8;class lU{constructor(t,r,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=r,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let r=0,i=this.data.count;r<i;r++)lz.fromBufferAttribute(this,r),lz.applyMatrix4(t),this.setXYZ(r,lz.x,lz.y,lz.z);return this}applyNormalMatrix(t){for(let r=0,i=this.count;r<i;r++)lz.fromBufferAttribute(this,r),lz.applyNormalMatrix(t),this.setXYZ(r,lz.x,lz.y,lz.z);return this}transformDirection(t){for(let r=0,i=this.count;r<i;r++)lz.fromBufferAttribute(this,r),lz.transformDirection(t),this.setXYZ(r,lz.x,lz.y,lz.z);return this}getComponent(t,r){let i=this.array[t*this.data.stride+this.offset+r];return this.normalized&&(i=rT(i,this.array)),i}setComponent(t,r,i){return this.normalized&&(i=rE(i,this.array)),this.data.array[t*this.data.stride+this.offset+r]=i,this}setX(t,r){return this.normalized&&(r=rE(r,this.array)),this.data.array[t*this.data.stride+this.offset]=r,this}setY(t,r){return this.normalized&&(r=rE(r,this.array)),this.data.array[t*this.data.stride+this.offset+1]=r,this}setZ(t,r){return this.normalized&&(r=rE(r,this.array)),this.data.array[t*this.data.stride+this.offset+2]=r,this}setW(t,r){return this.normalized&&(r=rE(r,this.array)),this.data.array[t*this.data.stride+this.offset+3]=r,this}getX(t){let r=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(r=rT(r,this.array)),r}getY(t){let r=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(r=rT(r,this.array)),r}getZ(t){let r=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(r=rT(r,this.array)),r}getW(t){let r=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(r=rT(r,this.array)),r}setXY(t,r,i){return t=t*this.data.stride+this.offset,this.normalized&&(r=rE(r,this.array),i=rE(i,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=i,this}setXYZ(t,r,i,s){return t=t*this.data.stride+this.offset,this.normalized&&(r=rE(r,this.array),i=rE(i,this.array),s=rE(s,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=i,this.data.array[t+2]=s,this}setXYZW(t,r,i,s,u){return t=t*this.data.stride+this.offset,this.normalized&&(r=rE(r,this.array),i=rE(i,this.array),s=rE(s,this.array),u=rE(u,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=i,this.data.array[t+2]=s,this.data.array[t+3]=u,this}clone(t){if(void 0!==t)return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new lU(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);{let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return new aS(new this.array.constructor(t),this.itemSize,this.normalized)}}toJSON(t){if(void 0!==t)return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};{let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}}}class lH extends ag{static get type(){return"SpriteMaterial"}constructor(t){super(),this.isSpriteMaterial=!0,this.color=new ad(0xffffff),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let lG=new r8,lV=new r8,lW=new r8,lj=new rD,lX=new rD,lY=new iD,l$=new r8,lJ=new r8,lZ=new r8,lK=new rD,lq=new rD,lQ=new rD;class l0 extends i3{constructor(t=new lH){if(super(),this.isSprite=!0,this.type="Sprite",void 0===r){r=new aU;let t=new lF(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);r.setIndex([0,1,2,0,2,3]),r.setAttribute("position",new lU(t,3,0,!1)),r.setAttribute("uv",new lU(t,2,3,!1))}this.geometry=r,this.material=t,this.center=new rD(.5,.5)}raycast(t,r){let i,s;t.camera,lV.setFromMatrixScale(this.matrixWorld),lY.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),lW.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&lV.multiplyScalar(-lW.z);let u=this.material.rotation;0!==u&&(s=Math.cos(u),i=Math.sin(u));let c=this.center;l1(l$.set(-.5,-.5,0),lW,c,lV,i,s),l1(lJ.set(.5,-.5,0),lW,c,lV,i,s),l1(lZ.set(.5,.5,0),lW,c,lV,i,s),lK.set(0,0),lq.set(1,0),lQ.set(1,1);let h=t.ray.intersectTriangle(l$,lJ,lZ,!1,lG);if(null===h&&(l1(lJ.set(-.5,.5,0),lW,c,lV,i,s),lq.set(0,1),null===(h=t.ray.intersectTriangle(l$,lZ,lJ,!1,lG))))return;let p=t.ray.origin.distanceTo(lG);!(p<t.near)&&!(p>t.far)&&r.push({distance:p,point:lG.clone(),uv:as.getInterpolation(lG,l$,lJ,lZ,lK,lq,lQ,new rD),face:null,object:this})}copy(t,r){return super.copy(t,r),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function l1(t,r,i,s,u,c){lj.subVectors(t,i).addScalar(.5).multiply(s),void 0!==u?(lX.x=c*lj.x-u*lj.y,lX.y=u*lj.x+c*lj.y):lX.copy(lj),t.copy(r),t.x+=lX.x,t.y+=lX.y,t.applyMatrix4(lY)}let l2=new r8,l3=new r8;class l5 extends i3{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);let r=t.levels;for(let t=0,i=r.length;t<i;t++){let i=r[t];this.addLevel(i.object.clone(),i.distance,i.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,r=0,i=0){let s;r=Math.abs(r);let u=this.levels;for(s=0;s<u.length&&!(r<u[s].distance);s++);return u.splice(s,0,{distance:r,hysteresis:i,object:t}),this.add(t),this}removeLevel(t){let r=this.levels;for(let i=0;i<r.length;i++)if(r[i].distance===t){let t=r.splice(i,1);return this.remove(t[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){let r=this.levels;if(r.length>0){let i,s;for(i=1,s=r.length;i<s;i++){let s=r[i].distance;if(r[i].object.visible&&(s-=s*r[i].hysteresis),t<s)break}return r[i-1].object}return null}raycast(t,r){if(this.levels.length>0){l2.setFromMatrixPosition(this.matrixWorld);let i=t.ray.origin.distanceTo(l2);this.getObjectForDistance(i).raycast(t,r)}}update(t){let r=this.levels;if(r.length>1){let i,s;l2.setFromMatrixPosition(t.matrixWorld),l3.setFromMatrixPosition(this.matrixWorld);let u=l2.distanceTo(l3)/t.zoom;for(i=1,r[0].object.visible=!0,s=r.length;i<s;i++){let t=r[i].distance;if(r[i].object.visible&&(t-=t*r[i].hysteresis),u>=t)r[i-1].object.visible=!1,r[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)r[i].object.visible=!1}}toJSON(t){let r=super.toJSON(t);!1===this.autoUpdate&&(r.object.autoUpdate=!1),r.object.levels=[];let i=this.levels;for(let t=0,s=i.length;t<s;t++){let s=i[t];r.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return r}}let l4=new r8,l6=new r0,l9=new r0,l8=new r8,l7=new iD,ue=new r8,ut=new ib,un=new iD,ur=new iI;class ui extends aq{constructor(t,r){super(t,r),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=to,this.bindMatrix=new iD,this.bindMatrixInverse=new iD,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let t=this.geometry;null===this.boundingBox&&(this.boundingBox=new it),this.boundingBox.makeEmpty();let r=t.getAttribute("position");for(let t=0;t<r.count;t++)this.getVertexPosition(t,ue),this.boundingBox.expandByPoint(ue)}computeBoundingSphere(){let t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new ib),this.boundingSphere.makeEmpty();let r=t.getAttribute("position");for(let t=0;t<r.count;t++)this.getVertexPosition(t,ue),this.boundingSphere.expandByPoint(ue)}copy(t,r){return super.copy(t,r),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,r){let i=this.material,s=this.matrixWorld;if(void 0!==i){if(null===this.boundingSphere&&this.computeBoundingSphere(),ut.copy(this.boundingSphere),ut.applyMatrix4(s),!1!==t.ray.intersectsSphere(ut)){if(un.copy(s).invert(),ur.copy(t.ray).applyMatrix4(un),null!==this.boundingBox&&!1===ur.intersectsBox(this.boundingBox))return;this._computeIntersections(t,r,ur)}}}getVertexPosition(t,r){return super.getVertexPosition(t,r),this.applyBoneTransform(t,r),r}bind(t,r){this.skeleton=t,void 0===r&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.copy(r).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let t=new r0,r=this.geometry.attributes.skinWeight;for(let i=0,s=r.count;i<s;i++){t.fromBufferAttribute(r,i);let s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),r.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===to?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===ts&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}applyBoneTransform(t,r){let i=this.skeleton,s=this.geometry;l6.fromBufferAttribute(s.attributes.skinIndex,t),l9.fromBufferAttribute(s.attributes.skinWeight,t),l4.copy(r).applyMatrix4(this.bindMatrix),r.set(0,0,0);for(let t=0;t<4;t++){let s=l9.getComponent(t);if(0!==s){let u=l6.getComponent(t);l7.multiplyMatrices(i.bones[u].matrixWorld,i.boneInverses[u]),r.addScaledVector(l8.copy(l4).applyMatrix4(l7),s)}}return r.applyMatrix4(this.bindMatrixInverse)}}class ua extends i3{constructor(){super(),this.isBone=!0,this.type="Bone"}}class uo extends rQ{constructor(t=null,r=1,i=1,s,u,c,h,p,f=tv,v=tv,y,x){super(null,c,h,p,f,v,s,u,y,x),this.isDataTexture=!0,this.image={data:t,width:r,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}let us=new iD,ul=new iD;class uu{constructor(t=[],r=[]){this.uuid=rS(),this.bones=t.slice(0),this.boneInverses=r,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let t=this.bones,r=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===r.length)this.calculateInverses();else if(t.length!==r.length){this.boneInverses=[];for(let t=0,r=this.bones.length;t<r;t++)this.boneInverses.push(new iD)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,r=this.bones.length;t<r;t++){let r=new iD;this.bones[t]&&r.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let t=0,r=this.bones.length;t<r;t++){let r=this.bones[t];r&&r.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,r=this.bones.length;t<r;t++){let r=this.bones[t];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){let t=this.bones,r=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let s=0,u=t.length;s<u;s++){let u=t[s]?t[s].matrixWorld:ul;us.multiplyMatrices(u,r[s]),us.toArray(i,16*s)}null!==s&&(s.needsUpdate=!0)}clone(){return new uu(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length),r=new Float32Array((t=Math.max(t=4*Math.ceil(t/4),4))*t*4);r.set(this.boneMatrices);let i=new uo(r,t,t,tH,tL);return i.needsUpdate=!0,this.boneMatrices=r,this.boneTexture=i,this}getBoneByName(t){for(let r=0,i=this.bones.length;r<i;r++){let i=this.bones[r];if(i.name===t)return i}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,r){this.uuid=t.uuid;for(let i=0,s=t.bones.length;i<s;i++){let s=r[t.bones[i]];void 0===s&&(s=new ua),this.bones.push(s),this.boneInverses.push(new iD().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){let t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;let r=this.bones,i=this.boneInverses;for(let s=0,u=r.length;s<u;s++){let u=r[s];t.bones.push(u.uuid);let c=i[s];t.boneInverses.push(c.toArray())}return t}}class uc extends aS{constructor(t,r,i,s=1){super(t,r,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){let t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}let uh=new iD,ud=new iD,up=[],uf=new it,ug=new iD,um=new aq,uv=new ib;class uy extends aq{constructor(t,r,i){super(t,r),this.isInstancedMesh=!0,this.instanceMatrix=new uc(new Float32Array(16*i),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let t=0;t<i;t++)this.setMatrixAt(t,ug)}computeBoundingBox(){let t=this.geometry,r=this.count;null===this.boundingBox&&(this.boundingBox=new it),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<r;i++)this.getMatrixAt(i,uh),uf.copy(t.boundingBox).applyMatrix4(uh),this.boundingBox.union(uf)}computeBoundingSphere(){let t=this.geometry,r=this.count;null===this.boundingSphere&&(this.boundingSphere=new ib),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<r;i++)this.getMatrixAt(i,uh),uv.copy(t.boundingSphere).applyMatrix4(uh),this.boundingSphere.union(uv)}copy(t,r){return super.copy(t,r),this.instanceMatrix.copy(t.instanceMatrix),null!==t.morphTexture&&(this.morphTexture=t.morphTexture.clone()),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,r){r.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,r){r.fromArray(this.instanceMatrix.array,16*t)}getMorphAt(t,r){let i=r.morphTargetInfluences,s=this.morphTexture.source.data.data,u=t*(i.length+1)+1;for(let t=0;t<i.length;t++)i[t]=s[u+t]}raycast(t,r){let i=this.matrixWorld,s=this.count;if(um.geometry=this.geometry,um.material=this.material,void 0!==um.material){if(null===this.boundingSphere&&this.computeBoundingSphere(),uv.copy(this.boundingSphere),uv.applyMatrix4(i),!1!==t.ray.intersectsSphere(uv))for(let u=0;u<s;u++){this.getMatrixAt(u,uh),ud.multiplyMatrices(i,uh),um.matrixWorld=ud,um.raycast(t,up);for(let t=0,i=up.length;t<i;t++){let i=up[t];i.instanceId=u,i.object=this,r.push(i)}up.length=0}}}setColorAt(t,r){null===this.instanceColor&&(this.instanceColor=new uc(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),r.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,r){r.toArray(this.instanceMatrix.array,16*t)}setMorphAt(t,r){let i=r.morphTargetInfluences,s=i.length+1;null===this.morphTexture&&(this.morphTexture=new uo(new Float32Array(s*this.count),s,this.count,tX,tL));let u=this.morphTexture.source.data.data,c=0;for(let t=0;t<i.length;t++)c+=i[t];let h=this.geometry.morphTargetsRelative?1:1-c,p=s*t;u[p]=h,u.set(i,p+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function ux(t,r){return t-r}function u_(t,r){return t.z-r.z}function ub(t,r){return r.z-t.z}let uw=new iD,uS=new ad(1,1,1),uM=new oc,uA=new it,uC=new ib,uT=new r8,uE=new r8,uI=new r8,uD=new class t{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,r,i,s){let u=this.pool,c=this.list;this.index>=u.length&&u.push({start:-1,count:-1,z:-1,index:-1});let h=u[this.index];c.push(h),this.index++,h.start=t,h.count=r,h.z=i,h.index=s}reset(){this.list.length=0,this.index=0}},uP=new aq,uR=[];function uL(t,r){if(t.constructor!==r.constructor){let i=Math.min(t.length,r.length);for(let s=0;s<i;s++)r[s]=t[s]}else{let i=Math.min(t.length,r.length);r.set(new t.constructor(t.buffer,0,i))}}class uk extends aq{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(t,r,i=2*r,s){super(new aU,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=r,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let t=Math.sqrt(4*this._maxInstanceCount),r=new uo(new Float32Array((t=Math.max(t=4*Math.ceil(t/4),4))*t*4),t,t,tH,tL);this._matricesTexture=r}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount),r=new uo(new Uint32Array((t=Math.ceil(t))*t),t,t,tY,tR);this._indirectTexture=r}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount),r=new uo(new Float32Array((t=Math.ceil(t))*t*4).fill(1),t,t,tH,tL);r.colorSpace=rU.workingColorSpace,this._colorsTexture=r}_initializeGeometry(t){let r=this.geometry,i=this._maxVertexCount,s=this._maxIndexCount;if(!1===this._geometryInitialized){for(let s in t.attributes){let{array:u,itemSize:c,normalized:h}=t.getAttribute(s),p=new aS(new u.constructor(i*c),c,h);r.setAttribute(s,p)}if(null!==t.getIndex()){let t=i>65535?new Uint32Array(s):new Uint16Array(s);r.setIndex(new aS(t,1))}this._geometryInitialized=!0}}_validateGeometry(t){let r=this.geometry;if(!!t.getIndex()!=!!r.getIndex())throw Error('BatchedMesh: All geometries must consistently have "index".');for(let i in r.attributes){if(!t.hasAttribute(i))throw Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);let s=t.getAttribute(i),u=r.getAttribute(i);if(s.itemSize!==u.itemSize||s.normalized!==u.normalized)throw Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new it);let t=this.boundingBox,r=this._instanceInfo;t.makeEmpty();for(let i=0,s=r.length;i<s;i++){if(!1===r[i].active)continue;let s=r[i].geometryIndex;this.getMatrixAt(i,uw),this.getBoundingBoxAt(s,uA).applyMatrix4(uw),t.union(uA)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ib);let t=this.boundingSphere,r=this._instanceInfo;t.makeEmpty();for(let i=0,s=r.length;i<s;i++){if(!1===r[i].active)continue;let s=r[i].geometryIndex;this.getMatrixAt(i,uw),this.getBoundingSphereAt(s,uC).applyMatrix4(uw),t.union(uC)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw Error("BatchedMesh: Maximum item count reached.");let r={visible:!0,active:!0,geometryIndex:t},i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(ux),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));let s=this._matricesTexture;uw.identity().toArray(s.image.data,16*i),s.needsUpdate=!0;let u=this._colorsTexture;return u&&(uS.toArray(u.image.data,4*i),u.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(t,r=-1,i=-1){let s;this._initializeGeometry(t),this._validateGeometry(t);let u={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},c=this._geometryInfo;u.vertexStart=this._nextVertexStart,u.reservedVertexCount=-1===r?t.getAttribute("position").count:r;let h=t.getIndex();if(null!==h&&(u.indexStart=this._nextIndexStart,u.reservedIndexCount=-1===i?h.count:i),-1!==u.indexStart&&u.indexStart+u.reservedIndexCount>this._maxIndexCount||u.vertexStart+u.reservedVertexCount>this._maxVertexCount)throw Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(ux),c[s=this._availableGeometryIds.shift()]=u):(s=this._geometryCount,this._geometryCount++,c.push(u)),this.setGeometryAt(s,t),this._nextIndexStart=u.indexStart+u.reservedIndexCount,this._nextVertexStart=u.vertexStart+u.reservedVertexCount,s}setGeometryAt(t,r){if(t>=this._geometryCount)throw Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(r);let i=this.geometry,s=null!==i.getIndex(),u=i.getIndex(),c=r.getIndex(),h=this._geometryInfo[t];if(s&&c.count>h.reservedIndexCount||r.attributes.position.count>h.reservedVertexCount)throw Error("BatchedMesh: Reserved space not large enough for provided geometry.");let p=h.vertexStart,f=h.reservedVertexCount;for(let t in h.vertexCount=r.getAttribute("position").count,i.attributes){let s=r.getAttribute(t),u=i.getAttribute(t);!function(t,r,i=0){let s=r.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==r.array.constructor){let u=t.count;for(let c=0;c<u;c++)for(let u=0;u<s;u++)r.setComponent(c+i,u,t.getComponent(c,u))}else r.array.set(t.array,i*s);r.needsUpdate=!0}(s,u,p);let c=s.itemSize;for(let t=s.count;t<f;t++){let r=p+t;for(let t=0;t<c;t++)u.setComponent(r,t,0)}u.needsUpdate=!0,u.addUpdateRange(p*c,f*c)}if(s){let t=h.indexStart,i=h.reservedIndexCount;h.indexCount=r.getIndex().count;for(let r=0;r<c.count;r++)u.setX(t+r,p+c.getX(r));for(let r=c.count;r<i;r++)u.setX(t+r,p);u.needsUpdate=!0,u.addUpdateRange(t,h.reservedIndexCount)}return h.start=s?h.indexStart:h.vertexStart,h.count=s?h.indexCount:h.vertexCount,h.boundingBox=null,null!==r.boundingBox&&(h.boundingBox=r.boundingBox.clone()),h.boundingSphere=null,null!==r.boundingSphere&&(h.boundingSphere=r.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){let r=this._geometryInfo;if(t>=r.length||!1===r[t].active)return this;let i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].geometryIndex===t&&this.deleteInstance(r);return r[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){let r=this._instanceInfo;return t>=r.length||!1===r[t].active?this:(r[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this)}optimize(){let t=0,r=0,i=this._geometryInfo,s=i.map((t,r)=>r).sort((t,r)=>i[t].vertexStart-i[r].vertexStart),u=this.geometry;for(let c=0,h=i.length;c<h;c++){let h=i[s[c]];if(!1!==h.active){if(null!==u.index){if(h.indexStart!==r){let{indexStart:i,vertexStart:s,reservedIndexCount:c}=h,p=u.index,f=p.array,v=t-s;for(let t=i;t<i+c;t++)f[t]=f[t]+v;p.array.copyWithin(r,i,i+c),p.addUpdateRange(r,c),h.indexStart=r}r+=h.reservedIndexCount}if(h.vertexStart!==t){let{vertexStart:r,reservedVertexCount:i}=h,s=u.attributes;for(let u in s){let c=s[u],{array:h,itemSize:p}=c;h.copyWithin(t*p,r*p,(r+i)*p),c.addUpdateRange(t*p,i*p)}h.vertexStart=t}t+=h.reservedVertexCount,h.start=u.index?h.indexStart:h.vertexStart,this._nextIndexStart=u.index?h.indexStart+h.reservedIndexCount:0,this._nextVertexStart=h.vertexStart+h.reservedVertexCount}}return this}getBoundingBoxAt(t,r){if(t>=this._geometryCount)return null;let i=this.geometry,s=this._geometryInfo[t];if(null===s.boundingBox){let t=new it,r=i.index,u=i.attributes.position;for(let i=s.start,c=s.start+s.count;i<c;i++){let s=i;r&&(s=r.getX(s)),t.expandByPoint(uT.fromBufferAttribute(u,s))}s.boundingBox=t}return r.copy(s.boundingBox),r}getBoundingSphereAt(t,r){if(t>=this._geometryCount)return null;let i=this.geometry,s=this._geometryInfo[t];if(null===s.boundingSphere){let r=new ib;this.getBoundingBoxAt(t,uA),uA.getCenter(r.center);let u=i.index,c=i.attributes.position,h=0;for(let t=s.start,i=s.start+s.count;t<i;t++){let i=t;u&&(i=u.getX(i)),uT.fromBufferAttribute(c,i),h=Math.max(h,r.center.distanceToSquared(uT))}r.radius=Math.sqrt(h),s.boundingSphere=r}return r.copy(s.boundingSphere),r}setMatrixAt(t,r){let i=this._instanceInfo,s=this._matricesTexture,u=this._matricesTexture.image.data;return t>=i.length||!1===i[t].active?this:(r.toArray(u,16*t),s.needsUpdate=!0,this)}getMatrixAt(t,r){let i=this._instanceInfo,s=this._matricesTexture.image.data;return t>=i.length||!1===i[t].active?null:r.fromArray(s,16*t)}setColorAt(t,r){null===this._colorsTexture&&this._initColorsTexture();let i=this._colorsTexture,s=this._colorsTexture.image.data,u=this._instanceInfo;return t>=u.length||!1===u[t].active?this:(r.toArray(s,4*t),i.needsUpdate=!0,this)}getColorAt(t,r){let i=this._colorsTexture.image.data,s=this._instanceInfo;return t>=s.length||!1===s[t].active?null:r.fromArray(i,4*t)}setVisibleAt(t,r){let i=this._instanceInfo;return t>=i.length||!1===i[t].active||i[t].visible===r?this:(i[t].visible=r,this._visibilityChanged=!0,this)}getVisibleAt(t){let r=this._instanceInfo;return!(t>=r.length)&&!1!==r[t].active&&r[t].visible}setGeometryIdAt(t,r){let i=this._instanceInfo,s=this._geometryInfo;return t>=i.length||!1===i[t].active||r>=s.length||!1===s[r].active?null:(i[t].geometryIndex=r,this)}getGeometryIdAt(t){let r=this._instanceInfo;return t>=r.length||!1===r[t].active?-1:r[t].geometryIndex}getGeometryRangeAt(t,r={}){if(t<0||t>=this._geometryCount)return null;let i=this._geometryInfo[t];return r.vertexStart=i.vertexStart,r.vertexCount=i.vertexCount,r.reservedVertexCount=i.reservedVertexCount,r.indexStart=i.indexStart,r.indexCount=i.indexCount,r.reservedIndexCount=i.reservedIndexCount,r.start=i.start,r.count=i.count,r}setInstanceCount(t){let r=this._availableInstanceIds,i=this._instanceInfo;for(r.sort(ux);r[r.length-1]===i.length;)i.pop(),r.pop();if(t<i.length)throw Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);let s=new Int32Array(t),u=new Int32Array(t);uL(this._multiDrawCounts,s),uL(this._multiDrawStarts,u),this._multiDrawCounts=s,this._multiDrawStarts=u,this._maxInstanceCount=t;let c=this._indirectTexture,h=this._matricesTexture,p=this._colorsTexture;c.dispose(),this._initIndirectTexture(),uL(c.image.data,this._indirectTexture.image.data),h.dispose(),this._initMatricesTexture(),uL(h.image.data,this._matricesTexture.image.data),p&&(p.dispose(),this._initColorsTexture(),uL(p.image.data,this._colorsTexture.image.data))}setGeometrySize(t,r){let i=[...this._geometryInfo].filter(t=>t.active);if(Math.max(...i.map(t=>t.vertexStart+t.reservedVertexCount))>t)throw Error(`BatchedMesh: Geometry vertex values are being used outside the range ${r}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(t=>t.indexStart+t.reservedIndexCount))>r)throw Error(`BatchedMesh: Geometry index values are being used outside the range ${r}. Cannot shrink further.`);let s=this.geometry;s.dispose(),this._maxVertexCount=t,this._maxIndexCount=r,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new aU,this._initializeGeometry(s));let u=this.geometry;for(let t in s.index&&uL(s.index.array,u.index.array),s.attributes)uL(s.attributes[t].array,u.attributes[t].array)}raycast(t,r){let i=this._instanceInfo,s=this._geometryInfo,u=this.matrixWorld,c=this.geometry;uP.material=this.material,uP.geometry.index=c.index,uP.geometry.attributes=c.attributes,null===uP.geometry.boundingBox&&(uP.geometry.boundingBox=new it),null===uP.geometry.boundingSphere&&(uP.geometry.boundingSphere=new ib);for(let c=0,h=i.length;c<h;c++){if(!i[c].visible||!i[c].active)continue;let h=i[c].geometryIndex,p=s[h];uP.geometry.setDrawRange(p.start,p.count),this.getMatrixAt(c,uP.matrixWorld).premultiply(u),this.getBoundingBoxAt(h,uP.geometry.boundingBox),this.getBoundingSphereAt(h,uP.geometry.boundingSphere),uP.raycast(t,uR);for(let t=0,i=uR.length;t<i;t++){let i=uR[t];i.object=this,i.batchId=c,r.push(i)}uR.length=0}uP.material=null,uP.geometry.index=null,uP.geometry.attributes={},uP.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=null!==t.boundingBox?t.boundingBox.clone():null,this.boundingSphere=null!==t.boundingSphere?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(t=>({...t,boundingBox:null!==t.boundingBox?t.boundingBox.clone():null,boundingSphere:null!==t.boundingSphere?t.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(t=>({...t})),this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._geometryCount=t._geometryCount,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(t,r,i,s,u){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;let c=s.getIndex(),h=null===c?1:c.array.BYTES_PER_ELEMENT,p=this._instanceInfo,f=this._multiDrawStarts,v=this._multiDrawCounts,y=this._geometryInfo,x=this.perObjectFrustumCulled,_=this._indirectTexture,b=_.image.data;x&&(uw.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),uM.setFromProjectionMatrix(uw,t.coordinateSystem));let w=0;if(this.sortObjects){uw.copy(this.matrixWorld).invert(),uT.setFromMatrixPosition(i.matrixWorld).applyMatrix4(uw),uE.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(uw);for(let t=0,r=p.length;t<r;t++)if(p[t].visible&&p[t].active){let r=p[t].geometryIndex;this.getMatrixAt(t,uw),this.getBoundingSphereAt(r,uC).applyMatrix4(uw);let i=!1;if(x&&(i=!uM.intersectsSphere(uC)),!i){let i=y[r],s=uI.subVectors(uC.center,uT).dot(uE);uD.push(i.start,i.count,s,t)}}let t=uD.list,r=this.customSort;null===r?t.sort(u.transparent?ub:u_):r.call(this,t,i);for(let r=0,i=t.length;r<i;r++){let i=t[r];f[w]=i.start*h,v[w]=i.count,b[w]=i.index,w++}uD.reset()}else for(let t=0,r=p.length;t<r;t++)if(p[t].visible&&p[t].active){let r=p[t].geometryIndex,i=!1;if(x&&(this.getMatrixAt(t,uw),this.getBoundingSphereAt(r,uC).applyMatrix4(uw),i=!uM.intersectsSphere(uC)),!i){let i=y[r];f[w]=i.start*h,v[w]=i.count,b[w]=t,w++}}_.needsUpdate=!0,this._multiDrawCount=w,this._visibilityChanged=!1}onBeforeShadow(t,r,i,s,u,c){this.onBeforeRender(t,null,s,u,c)}}class uO extends ag{static get type(){return"LineBasicMaterial"}constructor(t){super(),this.isLineBasicMaterial=!0,this.color=new ad(0xffffff),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}let uB=new r8,uN=new r8,uF=new iD,uz=new iI,uU=new ib,uH=new r8,uG=new r8;class uV extends i3{constructor(t=new aU,r=new uO){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=r,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){let t=this.geometry;if(null===t.index){let r=t.attributes.position,i=[0];for(let t=1,s=r.count;t<s;t++)uB.fromBufferAttribute(r,t-1),uN.fromBufferAttribute(r,t),i[t]=i[t-1],i[t]+=uB.distanceTo(uN);t.setAttribute("lineDistance",new aR(i,1))}return this}raycast(t,r){let i=this.geometry,s=this.matrixWorld,u=t.params.Line.threshold,c=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),uU.copy(i.boundingSphere),uU.applyMatrix4(s),uU.radius+=u,!1===t.ray.intersectsSphere(uU))return;uF.copy(s).invert(),uz.copy(t.ray).applyMatrix4(uF);let h=u/((this.scale.x+this.scale.y+this.scale.z)/3),p=h*h,f=this.isLineSegments?2:1,v=i.index,y=i.attributes.position;if(null!==v){let i=Math.max(0,c.start),s=Math.min(v.count,c.start+c.count);for(let u=i,c=s-1;u<c;u+=f){let i=v.getX(u),s=uW(this,t,uz,p,i,v.getX(u+1));s&&r.push(s)}if(this.isLineLoop){let u=v.getX(s-1),c=uW(this,t,uz,p,u,v.getX(i));c&&r.push(c)}}else{let i=Math.max(0,c.start),s=Math.min(y.count,c.start+c.count);for(let u=i,c=s-1;u<c;u+=f){let i=uW(this,t,uz,p,u,u+1);i&&r.push(i)}if(this.isLineLoop){let u=uW(this,t,uz,p,s-1,i);u&&r.push(u)}}}updateMorphTargets(){let t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){let i=t[r[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,r=i.length;t<r;t++){let r=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}}}}function uW(t,r,i,s,u,c){let h=t.geometry.attributes.position;if(uB.fromBufferAttribute(h,u),uN.fromBufferAttribute(h,c),i.distanceSqToSegment(uB,uN,uH,uG)>s)return;uH.applyMatrix4(t.matrixWorld);let p=r.ray.origin.distanceTo(uH);if(!(p<r.near)&&!(p>r.far))return{distance:p,point:uG.clone().applyMatrix4(t.matrixWorld),index:u,face:null,faceIndex:null,barycoord:null,object:t}}let uj=new r8,uX=new r8;class uY extends uV{constructor(t,r){super(t,r),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let t=this.geometry;if(null===t.index){let r=t.attributes.position,i=[];for(let t=0,s=r.count;t<s;t+=2)uj.fromBufferAttribute(r,t),uX.fromBufferAttribute(r,t+1),i[t]=0===t?0:i[t-1],i[t+1]=i[t]+uj.distanceTo(uX);t.setAttribute("lineDistance",new aR(i,1))}return this}}class u$ extends uV{constructor(t,r){super(t,r),this.isLineLoop=!0,this.type="LineLoop"}}class uJ extends ag{static get type(){return"PointsMaterial"}constructor(t){super(),this.isPointsMaterial=!0,this.color=new ad(0xffffff),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let uZ=new iD,uK=new iI,uq=new ib,uQ=new r8;class u0 extends i3{constructor(t=new aU,r=new uJ){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=r,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,r){let i=this.geometry,s=this.matrixWorld,u=t.params.Points.threshold,c=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),uq.copy(i.boundingSphere),uq.applyMatrix4(s),uq.radius+=u,!1===t.ray.intersectsSphere(uq))return;uZ.copy(s).invert(),uK.copy(t.ray).applyMatrix4(uZ);let h=u/((this.scale.x+this.scale.y+this.scale.z)/3),p=h*h,f=i.index,v=i.attributes.position;if(null!==f){let i=Math.max(0,c.start),u=Math.min(f.count,c.start+c.count);for(let c=i;c<u;c++){let i=f.getX(c);uQ.fromBufferAttribute(v,i),u1(uQ,i,p,s,t,r,this)}}else{let i=Math.max(0,c.start),u=Math.min(v.count,c.start+c.count);for(let c=i;c<u;c++)uQ.fromBufferAttribute(v,c),u1(uQ,c,p,s,t,r,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){let i=t[r[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,r=i.length;t<r;t++){let r=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}}}}function u1(t,r,i,s,u,c,h){let p=uK.distanceSqToPoint(t);if(p<i){let i=new r8;uK.closestPointToPoint(t,i),i.applyMatrix4(s);let f=u.ray.origin.distanceTo(i);if(f<u.near||f>u.far)return;c.push({distance:f,distanceToRay:Math.sqrt(p),point:i,index:r,face:null,faceIndex:null,barycoord:null,object:h})}}class u2 extends rQ{constructor(t,r,i,s,u,c,h,p,f){super(t,r,i,s,u,c,h,p,f),this.isVideoTexture=!0,this.minFilter=void 0!==c?c:tw,this.magFilter=void 0!==u?u:tw,this.generateMipmaps=!1;let v=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(function r(){v.needsUpdate=!0,t.requestVideoFrameCallback(r)})}clone(){return new this.constructor(this.image).copy(this)}update(){let t=this.image;!1=="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class u3 extends rQ{constructor(t,r){super({width:t,height:r}),this.isFramebufferTexture=!0,this.magFilter=tv,this.minFilter=tv,this.generateMipmaps=!1,this.needsUpdate=!0}}class u5 extends rQ{constructor(t,r,i,s,u,c,h,p,f,v,y,x){super(null,c,h,p,f,v,s,u,y,x),this.isCompressedTexture=!0,this.image={width:r,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class u4 extends u5{constructor(t,r,i,s,u,c){super(t,r,i,u,c),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=tg,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class u6 extends u5{constructor(t,r,i){super(void 0,t[0].width,t[0].height,r,i,tu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class u9 extends rQ{constructor(t,r,i,s,u,c,h,p,f){super(t,r,i,s,u,c,h,p,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class u8{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return null}getPointAt(t,r){let i=this.getUtoTmapping(t);return this.getPoint(i,r)}getPoints(t=5){let r=[];for(let i=0;i<=t;i++)r.push(this.getPoint(i/t));return r}getSpacedPoints(t=5){let r=[];for(let i=0;i<=t;i++)r.push(this.getPointAt(i/t));return r}getLength(){let t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let r=[],i,s=this.getPoint(0),u=0;r.push(0);for(let c=1;c<=t;c++)u+=(i=this.getPoint(c/t)).distanceTo(s),r.push(u),s=i;return this.cacheArcLengths=r,r}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,r){let i;let s=this.getLengths(),u=0,c=s.length;i=r?r:t*s[c-1];let h=0,p=c-1,f;for(;h<=p;)if((f=s[u=Math.floor(h+(p-h)/2)]-i)<0)h=u+1;else if(f>0)p=u-1;else{p=u;break}if(s[u=p]===i)return u/(c-1);let v=s[u],y=s[u+1];return(u+(i-v)/(y-v))/(c-1)}getTangent(t,r){let i=t-1e-4,s=t+1e-4;i<0&&(i=0),s>1&&(s=1);let u=this.getPoint(i),c=this.getPoint(s),h=r||(u.isVector2?new rD:new r8);return h.copy(c).sub(u).normalize(),h}getTangentAt(t,r){let i=this.getUtoTmapping(t);return this.getTangent(i,r)}computeFrenetFrames(t,r){let i=new r8,s=[],u=[],c=[],h=new r8,p=new iD;for(let r=0;r<=t;r++){let i=r/t;s[r]=this.getTangentAt(i,new r8)}u[0]=new r8,c[0]=new r8;let f=Number.MAX_VALUE,v=Math.abs(s[0].x),y=Math.abs(s[0].y),x=Math.abs(s[0].z);v<=f&&(f=v,i.set(1,0,0)),y<=f&&(f=y,i.set(0,1,0)),x<=f&&i.set(0,0,1),h.crossVectors(s[0],i).normalize(),u[0].crossVectors(s[0],h),c[0].crossVectors(s[0],u[0]);for(let r=1;r<=t;r++){if(u[r]=u[r-1].clone(),c[r]=c[r-1].clone(),h.crossVectors(s[r-1],s[r]),h.length()>Number.EPSILON){h.normalize();let t=Math.acos(rM(s[r-1].dot(s[r]),-1,1));u[r].applyMatrix4(p.makeRotationAxis(h,t))}c[r].crossVectors(s[r],u[r])}if(!0===r){let r=Math.acos(rM(u[0].dot(u[t]),-1,1));r/=t,s[0].dot(h.crossVectors(u[0],u[t]))>0&&(r=-r);for(let i=1;i<=t;i++)u[i].applyMatrix4(p.makeRotationAxis(s[i],r*i)),c[i].crossVectors(s[i],u[i])}return{tangents:s,normals:u,binormals:c}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){let t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class u7 extends u8{constructor(t=0,r=0,i=1,s=1,u=0,c=2*Math.PI,h=!1,p=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=r,this.xRadius=i,this.yRadius=s,this.aStartAngle=u,this.aEndAngle=c,this.aClockwise=h,this.aRotation=p}getPoint(t,r=new rD){let i=2*Math.PI,s=this.aEndAngle-this.aStartAngle,u=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(s=u?0:i),!0===this.aClockwise&&!u&&(s===i?s=-i:s-=i);let c=this.aStartAngle+t*s,h=this.aX+this.xRadius*Math.cos(c),p=this.aY+this.yRadius*Math.sin(c);if(0!==this.aRotation){let t=Math.cos(this.aRotation),r=Math.sin(this.aRotation),i=h-this.aX,s=p-this.aY;h=i*t-s*r+this.aX,p=i*r+s*t+this.aY}return r.set(h,p)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){let t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class ce extends u7{constructor(t,r,i,s,u,c){super(t,r,i,i,s,u,c),this.isArcCurve=!0,this.type="ArcCurve"}}function ct(){let t=0,r=0,i=0,s=0;function u(u,c,h,p){t=u,r=h,i=-3*u+3*c-2*h-p,s=2*u-2*c+h+p}return{initCatmullRom:function(t,r,i,s,c){u(r,i,c*(i-t),c*(s-r))},initNonuniformCatmullRom:function(t,r,i,s,c,h,p){let f=(r-t)/c-(i-t)/(c+h)+(i-r)/h,v=(i-r)/h-(s-r)/(h+p)+(s-i)/p;u(r,i,f*=h,v*=h)},calc:function(u){let c=u*u;return t+r*u+i*c+c*u*s}}}let cn=new r8,cr=new ct,ci=new ct,ca=new ct;class co extends u8{constructor(t=[],r=!1,i="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=r,this.curveType=i,this.tension=s}getPoint(t,r=new r8){let i,s;let u=this.points,c=u.length,h=(c-(this.closed?0:1))*t,p=Math.floor(h),f=h-p;this.closed?p+=p>0?0:(Math.floor(Math.abs(p)/c)+1)*c:0===f&&p===c-1&&(p=c-2,f=1),this.closed||p>0?i=u[(p-1)%c]:(cn.subVectors(u[0],u[1]).add(u[0]),i=cn);let v=u[p%c],y=u[(p+1)%c];if(this.closed||p+2<c?s=u[(p+2)%c]:(cn.subVectors(u[c-1],u[c-2]).add(u[c-1]),s=cn),"centripetal"===this.curveType||"chordal"===this.curveType){let t="chordal"===this.curveType?.5:.25,r=Math.pow(i.distanceToSquared(v),t),u=Math.pow(v.distanceToSquared(y),t),c=Math.pow(y.distanceToSquared(s),t);u<1e-4&&(u=1),r<1e-4&&(r=u),c<1e-4&&(c=u),cr.initNonuniformCatmullRom(i.x,v.x,y.x,s.x,r,u,c),ci.initNonuniformCatmullRom(i.y,v.y,y.y,s.y,r,u,c),ca.initNonuniformCatmullRom(i.z,v.z,y.z,s.z,r,u,c)}else"catmullrom"===this.curveType&&(cr.initCatmullRom(i.x,v.x,y.x,s.x,this.tension),ci.initCatmullRom(i.y,v.y,y.y,s.y,this.tension),ca.initCatmullRom(i.z,v.z,y.z,s.z,this.tension));return r.set(cr.calc(f),ci.calc(f),ca.calc(f)),r}copy(t){super.copy(t),this.points=[];for(let r=0,i=t.points.length;r<i;r++){let i=t.points[r];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){let t=super.toJSON();t.points=[];for(let r=0,i=this.points.length;r<i;r++){let i=this.points[r];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let r=0,i=t.points.length;r<i;r++){let i=t.points[r];this.points.push(new r8().fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function cs(t,r,i,s,u){let c=(s-r)*.5,h=(u-i)*.5,p=t*t;return t*p*(2*i-2*s+c+h)+(-3*i+3*s-2*c-h)*p+c*t+i}function cl(t,r,i,s){var u,c;return function(t,r){let i=1-t;return i*i*r}(t,r)+2*(1-(u=t))*u*i+(c=t)*c*s}function cu(t,r,i,s,u){var c,h;return function(t,r){let i=1-t;return i*i*i*r}(t,r)+function(t,r){let i=1-t;return 3*i*i*t*r}(t,i)+3*(1-(c=t))*c*c*s+(h=t)*h*h*u}class cc extends u8{constructor(t=new rD,r=new rD,i=new rD,s=new rD){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=r,this.v2=i,this.v3=s}getPoint(t,r=new rD){let i=this.v0,s=this.v1,u=this.v2,c=this.v3;return r.set(cu(t,i.x,s.x,u.x,c.x),cu(t,i.y,s.y,u.y,c.y)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class ch extends u8{constructor(t=new r8,r=new r8,i=new r8,s=new r8){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=r,this.v2=i,this.v3=s}getPoint(t,r=new r8){let i=this.v0,s=this.v1,u=this.v2,c=this.v3;return r.set(cu(t,i.x,s.x,u.x,c.x),cu(t,i.y,s.y,u.y,c.y),cu(t,i.z,s.z,u.z,c.z)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class cd extends u8{constructor(t=new rD,r=new rD){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=r}getPoint(t,r=new rD){return 1===t?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r}getPointAt(t,r){return this.getPoint(t,r)}getTangent(t,r=new rD){return r.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,r){return this.getTangent(t,r)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class cp extends u8{constructor(t=new r8,r=new r8){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=r}getPoint(t,r=new r8){return 1===t?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r}getPointAt(t,r){return this.getPoint(t,r)}getTangent(t,r=new r8){return r.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,r){return this.getTangent(t,r)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class cf extends u8{constructor(t=new rD,r=new rD,i=new rD){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=r,this.v2=i}getPoint(t,r=new rD){let i=this.v0,s=this.v1,u=this.v2;return r.set(cl(t,i.x,s.x,u.x),cl(t,i.y,s.y,u.y)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class cg extends u8{constructor(t=new r8,r=new r8,i=new r8){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=r,this.v2=i}getPoint(t,r=new r8){let i=this.v0,s=this.v1,u=this.v2;return r.set(cl(t,i.x,s.x,u.x),cl(t,i.y,s.y,u.y),cl(t,i.z,s.z,u.z)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class cm extends u8{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,r=new rD){let i=this.points,s=(i.length-1)*t,u=Math.floor(s),c=s-u,h=i[0===u?u:u-1],p=i[u],f=i[u>i.length-2?i.length-1:u+1],v=i[u>i.length-3?i.length-1:u+2];return r.set(cs(c,h.x,p.x,f.x,v.x),cs(c,h.y,p.y,f.y,v.y)),r}copy(t){super.copy(t),this.points=[];for(let r=0,i=t.points.length;r<i;r++){let i=t.points[r];this.points.push(i.clone())}return this}toJSON(){let t=super.toJSON();t.points=[];for(let r=0,i=this.points.length;r<i;r++){let i=this.points[r];t.points.push(i.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let r=0,i=t.points.length;r<i;r++){let i=t.points[r];this.points.push(new rD().fromArray(i))}return this}}var cv=Object.freeze({__proto__:null,ArcCurve:ce,CatmullRomCurve3:co,CubicBezierCurve:cc,CubicBezierCurve3:ch,EllipseCurve:u7,LineCurve:cd,LineCurve3:cp,QuadraticBezierCurve:cf,QuadraticBezierCurve3:cg,SplineCurve:cm});class cy extends u8{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){let t=this.curves[0].getPoint(0),r=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(r)){let i=!0===t.isVector2?"LineCurve":"LineCurve3";this.curves.push(new cv[i](r,t))}return this}getPoint(t,r){let i=t*this.getLength(),s=this.getCurveLengths(),u=0;for(;u<s.length;){if(s[u]>=i){let t=s[u]-i,c=this.curves[u],h=c.getLength(),p=0===h?0:1-t/h;return c.getPointAt(p,r)}u++}return null}getLength(){let t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let t=[],r=0;for(let i=0,s=this.curves.length;i<s;i++)r+=this.curves[i].getLength(),t.push(r);return this.cacheLengths=t,t}getSpacedPoints(t=40){let r=[];for(let i=0;i<=t;i++)r.push(this.getPoint(i/t));return this.autoClose&&r.push(r[0]),r}getPoints(t=12){let r;let i=[];for(let s=0,u=this.curves;s<u.length;s++){let c=u[s],h=c.isEllipseCurve?2*t:c.isLineCurve||c.isLineCurve3?1:c.isSplineCurve?t*c.points.length:t,p=c.getPoints(h);for(let t=0;t<p.length;t++){let s=p[t];!(r&&r.equals(s))&&(i.push(s),r=s)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}copy(t){super.copy(t),this.curves=[];for(let r=0,i=t.curves.length;r<i;r++){let i=t.curves[r];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this}toJSON(){let t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let r=0,i=this.curves.length;r<i;r++){let i=this.curves[r];t.curves.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let r=0,i=t.curves.length;r<i;r++){let i=t.curves[r];this.curves.push(new cv[i.type]().fromJSON(i))}return this}}class cx extends cy{constructor(t){super(),this.type="Path",this.currentPoint=new rD,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let r=1,i=t.length;r<i;r++)this.lineTo(t[r].x,t[r].y);return this}moveTo(t,r){return this.currentPoint.set(t,r),this}lineTo(t,r){let i=new cd(this.currentPoint.clone(),new rD(t,r));return this.curves.push(i),this.currentPoint.set(t,r),this}quadraticCurveTo(t,r,i,s){let u=new cf(this.currentPoint.clone(),new rD(t,r),new rD(i,s));return this.curves.push(u),this.currentPoint.set(i,s),this}bezierCurveTo(t,r,i,s,u,c){let h=new cc(this.currentPoint.clone(),new rD(t,r),new rD(i,s),new rD(u,c));return this.curves.push(h),this.currentPoint.set(u,c),this}splineThru(t){let r=new cm([this.currentPoint.clone()].concat(t));return this.curves.push(r),this.currentPoint.copy(t[t.length-1]),this}arc(t,r,i,s,u,c){let h=this.currentPoint.x,p=this.currentPoint.y;return this.absarc(t+h,r+p,i,s,u,c),this}absarc(t,r,i,s,u,c){return this.absellipse(t,r,i,i,s,u,c),this}ellipse(t,r,i,s,u,c,h,p){let f=this.currentPoint.x,v=this.currentPoint.y;return this.absellipse(t+f,r+v,i,s,u,c,h,p),this}absellipse(t,r,i,s,u,c,h,p){let f=new u7(t,r,i,s,u,c,h,p);if(this.curves.length>0){let t=f.getPoint(0);!t.equals(this.currentPoint)&&this.lineTo(t.x,t.y)}this.curves.push(f);let v=f.getPoint(1);return this.currentPoint.copy(v),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){let t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class c_ extends aU{constructor(t=[new rD(0,-.5),new rD(.5,0),new rD(0,.5)],r=12,i=0,s=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:r,phiStart:i,phiLength:s},r=Math.floor(r),s=rM(s,0,2*Math.PI);let u=[],c=[],h=[],p=[],f=[],v=1/r,y=new r8,x=new rD,_=new r8,b=new r8,w=new r8,S=0,M=0;for(let r=0;r<=t.length-1;r++)switch(r){case 0:S=t[r+1].x-t[r].x,M=t[r+1].y-t[r].y,_.x=1*M,_.y=-S,_.z=0*M,w.copy(_),_.normalize(),p.push(_.x,_.y,_.z);break;case t.length-1:p.push(w.x,w.y,w.z);break;default:S=t[r+1].x-t[r].x,M=t[r+1].y-t[r].y,_.x=1*M,_.y=-S,_.z=0*M,b.copy(_),_.x+=w.x,_.y+=w.y,_.z+=w.z,_.normalize(),p.push(_.x,_.y,_.z),w.copy(b)}for(let u=0;u<=r;u++){let _=i+u*v*s,b=Math.sin(_),w=Math.cos(_);for(let i=0;i<=t.length-1;i++){y.x=t[i].x*b,y.y=t[i].y,y.z=t[i].x*w,c.push(y.x,y.y,y.z),x.x=u/r,x.y=i/(t.length-1),h.push(x.x,x.y);let s=p[3*i+0]*b,v=p[3*i+1],_=p[3*i+0]*w;f.push(s,v,_)}}for(let i=0;i<r;i++)for(let r=0;r<t.length-1;r++){let s=r+i*t.length,c=s+t.length,h=s+t.length+1,p=s+1;u.push(s,c,p),u.push(h,p,c)}this.setIndex(u),this.setAttribute("position",new aR(c,3)),this.setAttribute("uv",new aR(h,2)),this.setAttribute("normal",new aR(f,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new c_(t.points,t.segments,t.phiStart,t.phiLength)}}class cb extends c_{constructor(t=1,r=1,i=4,s=8){let u=new cx;u.absarc(0,-r/2,t,1.5*Math.PI,0),u.absarc(0,r/2,t,0,.5*Math.PI),super(u.getPoints(i),s),this.type="CapsuleGeometry",this.parameters={radius:t,length:r,capSegments:i,radialSegments:s}}static fromJSON(t){return new cb(t.radius,t.length,t.capSegments,t.radialSegments)}}class cw extends aU{constructor(t=1,r=32,i=0,s=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:r,thetaStart:i,thetaLength:s},r=Math.max(3,r);let u=[],c=[],h=[],p=[],f=new r8,v=new rD;c.push(0,0,0),h.push(0,0,1),p.push(.5,.5);for(let u=0,y=3;u<=r;u++,y+=3){let x=i+u/r*s;f.x=t*Math.cos(x),f.y=t*Math.sin(x),c.push(f.x,f.y,f.z),h.push(0,0,1),v.x=(c[y]/t+1)/2,v.y=(c[y+1]/t+1)/2,p.push(v.x,v.y)}for(let t=1;t<=r;t++)u.push(t,t+1,0);this.setIndex(u),this.setAttribute("position",new aR(c,3)),this.setAttribute("normal",new aR(h,3)),this.setAttribute("uv",new aR(p,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new cw(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class cS extends aU{constructor(t=1,r=1,i=1,s=32,u=1,c=!1,h=0,p=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:r,height:i,radialSegments:s,heightSegments:u,openEnded:c,thetaStart:h,thetaLength:p};let f=this;s=Math.floor(s),u=Math.floor(u);let v=[],y=[],x=[],_=[],b=0,w=[],S=i/2,M=0;(function(){let c=new r8,A=new r8,C=0,T=(r-t)/i;for(let f=0;f<=u;f++){let v=[],M=f/u,C=M*(r-t)+t;for(let t=0;t<=s;t++){let r=t/s,u=r*p+h,f=Math.sin(u),w=Math.cos(u);A.x=C*f,A.y=-M*i+S,A.z=C*w,y.push(A.x,A.y,A.z),c.set(f,T,w).normalize(),x.push(c.x,c.y,c.z),_.push(r,1-M),v.push(b++)}w.push(v)}for(let i=0;i<s;i++)for(let s=0;s<u;s++){let c=w[s][i],h=w[s+1][i],p=w[s+1][i+1],f=w[s][i+1];(t>0||0!==s)&&(v.push(c,h,f),C+=3),(r>0||s!==u-1)&&(v.push(h,p,f),C+=3)}f.addGroup(M,C,0),M+=C})(),!1===c&&(t>0&&A(!0),r>0&&A(!1)),this.setIndex(v),this.setAttribute("position",new aR(y,3)),this.setAttribute("normal",new aR(x,3)),this.setAttribute("uv",new aR(_,2));function A(i){let u=b,c=new rD,w=new r8,A=0,C=!0===i?t:r,T=!0===i?1:-1;for(let t=1;t<=s;t++)y.push(0,S*T,0),x.push(0,T,0),_.push(.5,.5),b++;let I=b;for(let t=0;t<=s;t++){let r=t/s*p+h,i=Math.cos(r),u=Math.sin(r);w.x=C*u,w.y=S*T,w.z=C*i,y.push(w.x,w.y,w.z),x.push(0,T,0),c.x=.5*i+.5,c.y=.5*u*T+.5,_.push(c.x,c.y),b++}for(let t=0;t<s;t++){let r=u+t,s=I+t;!0===i?v.push(s,s+1,r):v.push(s+1,s,r),A+=3}f.addGroup(M,A,!0===i?1:2),M+=A}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new cS(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class cM extends cS{constructor(t=1,r=1,i=32,s=1,u=!1,c=0,h=2*Math.PI){super(0,t,r,i,s,u,c,h),this.type="ConeGeometry",this.parameters={radius:t,height:r,radialSegments:i,heightSegments:s,openEnded:u,thetaStart:c,thetaLength:h}}static fromJSON(t){return new cM(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class cA extends aU{constructor(t=[],r=[],i=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:r,radius:i,detail:s};let u=[],c=[];(function(t){let i=new r8,s=new r8,u=new r8;for(let c=0;c<r.length;c+=3)p(r[c+0],i),p(r[c+1],s),p(r[c+2],u),function(t,r,i,s){let u=s+1,c=[];for(let s=0;s<=u;s++){c[s]=[];let h=t.clone().lerp(i,s/u),p=r.clone().lerp(i,s/u),f=u-s;for(let t=0;t<=f;t++)0===t&&s===u?c[s][t]=h:c[s][t]=h.clone().lerp(p,t/f)}for(let t=0;t<u;t++)for(let r=0;r<2*(u-t)-1;r++){let i=Math.floor(r/2);r%2==0?(h(c[t][i+1]),h(c[t+1][i]),h(c[t][i])):(h(c[t][i+1]),h(c[t+1][i+1]),h(c[t+1][i]))}}(i,s,u,t)})(s),function(t){let r=new r8;for(let i=0;i<u.length;i+=3)r.x=u[i+0],r.y=u[i+1],r.z=u[i+2],r.normalize().multiplyScalar(t),u[i+0]=r.x,u[i+1]=r.y,u[i+2]=r.z}(i),function(){let t=new r8;for(let r=0;r<u.length;r+=3){t.x=u[r+0],t.y=u[r+1],t.z=u[r+2];let i=v(t)/2/Math.PI+.5,s=function(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}(t)/Math.PI+.5;c.push(i,1-s)}(function(){let t=new r8,r=new r8,i=new r8,s=new r8,h=new rD,p=new rD,y=new rD;for(let x=0,_=0;x<u.length;x+=9,_+=6){t.set(u[x+0],u[x+1],u[x+2]),r.set(u[x+3],u[x+4],u[x+5]),i.set(u[x+6],u[x+7],u[x+8]),h.set(c[_+0],c[_+1]),p.set(c[_+2],c[_+3]),y.set(c[_+4],c[_+5]),s.copy(t).add(r).add(i).divideScalar(3);let b=v(s);f(h,_+0,t,b),f(p,_+2,r,b),f(y,_+4,i,b)}})(),function(){for(let t=0;t<c.length;t+=6){let r=c[t+0],i=c[t+2],s=c[t+4],u=Math.max(r,i,s),h=Math.min(r,i,s);u>.9&&h<.1&&(r<.2&&(c[t+0]+=1),i<.2&&(c[t+2]+=1),s<.2&&(c[t+4]+=1))}}()}(),this.setAttribute("position",new aR(u,3)),this.setAttribute("normal",new aR(u.slice(),3)),this.setAttribute("uv",new aR(c,2)),0===s?this.computeVertexNormals():this.normalizeNormals();function h(t){u.push(t.x,t.y,t.z)}function p(r,i){let s=3*r;i.x=t[s+0],i.y=t[s+1],i.z=t[s+2]}function f(t,r,i,s){s<0&&1===t.x&&(c[r]=t.x-1),0===i.x&&0===i.z&&(c[r]=s/2/Math.PI+.5)}function v(t){return Math.atan2(t.z,-t.x)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new cA(t.vertices,t.indices,t.radius,t.details)}}class cC extends cA{constructor(t=1,r=0){let i=(1+Math.sqrt(5))/2,s=1/i;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,r),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:r}}static fromJSON(t){return new cC(t.radius,t.detail)}}let cT=new r8,cE=new r8,cI=new r8,cD=new as;class cP extends aU{constructor(t=null,r=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:r},null!==t){let i=Math.cos(rb*r),s=t.getIndex(),u=t.getAttribute("position"),c=s?s.count:u.count,h=[0,0,0],p=["a","b","c"],f=[,,,],v={},y=[];for(let t=0;t<c;t+=3){s?(h[0]=s.getX(t),h[1]=s.getX(t+1),h[2]=s.getX(t+2)):(h[0]=t,h[1]=t+1,h[2]=t+2);let{a:r,b:c,c:x}=cD;if(r.fromBufferAttribute(u,h[0]),c.fromBufferAttribute(u,h[1]),x.fromBufferAttribute(u,h[2]),cD.getNormal(cI),f[0]=`${Math.round(1e4*r.x)},${Math.round(1e4*r.y)},${Math.round(1e4*r.z)}`,f[1]=`${Math.round(1e4*c.x)},${Math.round(1e4*c.y)},${Math.round(1e4*c.z)}`,f[2]=`${Math.round(1e4*x.x)},${Math.round(1e4*x.y)},${Math.round(1e4*x.z)}`,f[0]!==f[1]&&f[1]!==f[2]&&f[2]!==f[0])for(let t=0;t<3;t++){let r=(t+1)%3,s=f[t],u=f[r],c=cD[p[t]],x=cD[p[r]],_=`${s}_${u}`,b=`${u}_${s}`;b in v&&v[b]?(cI.dot(v[b].normal)<=i&&(y.push(c.x,c.y,c.z),y.push(x.x,x.y,x.z)),v[b]=null):!(_ in v)&&(v[_]={index0:h[t],index1:h[r],normal:cI.clone()})}}for(let t in v)if(v[t]){let{index0:r,index1:i}=v[t];cT.fromBufferAttribute(u,r),cE.fromBufferAttribute(u,i),y.push(cT.x,cT.y,cT.z),y.push(cE.x,cE.y,cE.z)}this.setAttribute("position",new aR(y,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class cR extends cx{constructor(t){super(t),this.uuid=rS(),this.type="Shape",this.holes=[]}getPointsHoles(t){let r=[];for(let i=0,s=this.holes.length;i<s;i++)r[i]=this.holes[i].getPoints(t);return r}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let r=0,i=t.holes.length;r<i;r++){let i=t.holes[r];this.holes.push(i.clone())}return this}toJSON(){let t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let r=0,i=this.holes.length;r<i;r++){let i=this.holes[r];t.holes.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let r=0,i=t.holes.length;r<i;r++){let i=t.holes[r];this.holes.push(new cx().fromJSON(i))}return this}}let cL={triangulate:function(t,r,i=2){let s,u,c,h,p,f,v;let y=r&&r.length,x=y?r[0]*i:t.length,_=ck(t,0,x,i,!0),b=[];if(!_||_.next===_.prev)return b;if(y&&(_=function(t,r,i,s){let u,c,h,p,f;let v=[];for(u=0,c=r.length;u<c;u++)h=r[u]*s,p=u<c-1?r[u+1]*s:t.length,(f=ck(t,h,p,s,!1))===f.next&&(f.steiner=!0),v.push(function(t){let r=t,i=t;do(r.x<i.x||r.x===i.x&&r.y<i.y)&&(i=r),r=r.next;while(r!==t);return i}(f));for(v.sort(cN),u=0;u<v.length;u++)i=function(t,r){let i=function(t,r){let i=r,s=-1/0,u,c=t.x,h=t.y;do{if(h<=i.y&&h>=i.next.y&&i.next.y!==i.y){let t=i.x+(h-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=c&&t>s&&(s=t,u=i.x<i.next.x?i:i.next,t===c))return u}i=i.next}while(i!==r);if(!u)return null;let p=u,f=u.x,v=u.y,y=1/0,x;i=u;do c>=i.x&&i.x>=f&&c!==i.x&&cz(h<v?c:s,h,f,v,h<v?s:c,h,i.x,i.y)&&(x=Math.abs(h-i.y)/(c-i.x),cj(i,t)&&(x<y||x===y&&(i.x>u.x||i.x===u.x&&function(t,r){return 0>cU(t.prev,t,r.prev)&&0>cU(r.next,t,t.next)}(u,i)))&&(u=i,y=x)),i=i.next;while(i!==p);return u}(t,r);if(!i)return r;let s=cX(i,t);return cO(s,s.next),cO(i,i.next)}(v[u],i);return i}(t,r,_,i)),t.length>80*i){s=c=t[0],u=h=t[1];for(let r=i;r<x;r+=i)p=t[r],f=t[r+1],p<s&&(s=p),f<u&&(u=f),p>c&&(c=p),f>h&&(h=f);v=0!==(v=Math.max(c-s,h-u))?32767/v:0}return cB(_,b,i,s,u,v,0),b}};function ck(t,r,i,s,u){let c,h;if(u===function(t,r,i,s){let u=0;for(let c=r,h=i-s;c<i;c+=s)u+=(t[h]-t[c])*(t[c+1]+t[h+1]),h=c;return u}(t,r,i,s)>0)for(c=r;c<i;c+=s)h=cY(c,t[c],t[c+1],h);else for(c=i-s;c>=r;c-=s)h=cY(c,t[c],t[c+1],h);return h&&cH(h,h.next)&&(c$(h),h=h.next),h}function cO(t,r){if(!t)return t;!r&&(r=t);let i=t,s;do if(s=!1,!i.steiner&&(cH(i,i.next)||0===cU(i.prev,i,i.next))){if(c$(i),(i=r=i.prev)===i.next)break;s=!0}else i=i.next;while(s||i!==r);return r}function cB(t,r,i,s,u,c,h){if(!t)return;!h&&c&&function(t,r,i,s){let u=t;do 0===u.z&&(u.z=cF(u.x,u.y,r,i,s)),u.prevZ=u.prev,u.nextZ=u.next,u=u.next;while(u!==t);u.prevZ.nextZ=null,u.prevZ=null,function(t){let r,i,s,u,c,h,p,f,v=1;do{for(i=t,t=null,c=null,h=0;i;){for(h++,s=i,p=0,r=0;r<v&&(p++,s=s.nextZ);r++);for(f=v;p>0||f>0&&s;)0!==p&&(0===f||!s||i.z<=s.z)?(u=i,i=i.nextZ,p--):(u=s,s=s.nextZ,f--),c?c.nextZ=u:t=u,u.prevZ=c,c=u;i=s}c.nextZ=null,v*=2}while(h>1);}(u)}(t,s,u,c);let p=t,f,v;for(;t.prev!==t.next;){if(f=t.prev,v=t.next,c?function(t,r,i,s){let u=t.prev,c=t.next;if(cU(u,t,c)>=0)return!1;let h=u.x,p=t.x,f=c.x,v=u.y,y=t.y,x=c.y,_=h<p?h<f?h:f:p<f?p:f,b=v<y?v<x?v:x:y<x?y:x,w=h>p?h>f?h:f:p>f?p:f,S=v>y?v>x?v:x:y>x?y:x,M=cF(_,b,r,i,s),A=cF(w,S,r,i,s),C=t.prevZ,T=t.nextZ;for(;C&&C.z>=M&&T&&T.z<=A;){if(C.x>=_&&C.x<=w&&C.y>=b&&C.y<=S&&C!==u&&C!==c&&cz(h,v,p,y,f,x,C.x,C.y)&&cU(C.prev,C,C.next)>=0)return!1;if(C=C.prevZ,T.x>=_&&T.x<=w&&T.y>=b&&T.y<=S&&T!==u&&T!==c&&cz(h,v,p,y,f,x,T.x,T.y)&&cU(T.prev,T,T.next)>=0)return!1;T=T.nextZ}for(;C&&C.z>=M;){if(C.x>=_&&C.x<=w&&C.y>=b&&C.y<=S&&C!==u&&C!==c&&cz(h,v,p,y,f,x,C.x,C.y)&&cU(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;T&&T.z<=A;){if(T.x>=_&&T.x<=w&&T.y>=b&&T.y<=S&&T!==u&&T!==c&&cz(h,v,p,y,f,x,T.x,T.y)&&cU(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}(t,s,u,c):function(t){let r=t.prev,i=t.next;if(cU(r,t,i)>=0)return!1;let s=r.x,u=t.x,c=i.x,h=r.y,p=t.y,f=i.y,v=s<u?s<c?s:c:u<c?u:c,y=h<p?h<f?h:f:p<f?p:f,x=s>u?s>c?s:c:u>c?u:c,_=h>p?h>f?h:f:p>f?p:f,b=i.next;for(;b!==r;){if(b.x>=v&&b.x<=x&&b.y>=y&&b.y<=_&&cz(s,h,u,p,c,f,b.x,b.y)&&cU(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}(t)){r.push(f.i/i|0),r.push(t.i/i|0),r.push(v.i/i|0),c$(t),t=v.next,p=v.next;continue}if((t=v)===p){h?1===h?cB(t=function(t,r,i){let s=t;do{let u=s.prev,c=s.next.next;!cH(u,c)&&cG(u,s,s.next,c)&&cj(u,c)&&cj(c,u)&&(r.push(u.i/i|0),r.push(s.i/i|0),r.push(c.i/i|0),c$(s),c$(s.next),s=t=c),s=s.next}while(s!==t);return cO(s)}(cO(t),r,i),r,i,s,u,c,2):2===h&&function(t,r,i,s,u,c){let h=t;do{let t=h.next.next;for(;t!==h.prev;){if(h.i!==t.i&&function(t,r){return t.next.i!==r.i&&t.prev.i!==r.i&&!function(t,r){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==r.i&&i.next.i!==r.i&&cG(i,i.next,t,r))return!0;i=i.next}while(i!==t);return!1}(t,r)&&(cj(t,r)&&cj(r,t)&&function(t,r){let i=t,s=!1,u=(t.x+r.x)/2,c=(t.y+r.y)/2;do i.y>c!=i.next.y>c&&i.next.y!==i.y&&u<(i.next.x-i.x)*(c-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next;while(i!==t);return s}(t,r)&&(cU(t.prev,t,r.prev)||cU(t,r.prev,r))||cH(t,r)&&cU(t.prev,t,t.next)>0&&cU(r.prev,r,r.next)>0)}(h,t)){let p=cX(h,t);h=cO(h,h.next),p=cO(p,p.next),cB(h,r,i,s,u,c,0),cB(p,r,i,s,u,c,0);return}t=t.next}h=h.next}while(h!==t)}(t,r,i,s,u,c):cB(cO(t),r,i,s,u,c,1);break}}}function cN(t,r){return t.x-r.x}function cF(t,r,i,s,u){return t=((t=((t=((t=((t=(t-i)*u|0)|t<<8)&0xff00ff)|t<<4)&0xf0f0f0f)|t<<2)&0x33333333)|t<<1)&0x55555555,t|(r=((r=((r=((r=((r=(r-s)*u|0)|r<<8)&0xff00ff)|r<<4)&0xf0f0f0f)|r<<2)&0x33333333)|r<<1)&0x55555555)<<1}function cz(t,r,i,s,u,c,h,p){return(u-h)*(r-p)>=(t-h)*(c-p)&&(t-h)*(s-p)>=(i-h)*(r-p)&&(i-h)*(c-p)>=(u-h)*(s-p)}function cU(t,r,i){return(r.y-t.y)*(i.x-r.x)-(r.x-t.x)*(i.y-r.y)}function cH(t,r){return t.x===r.x&&t.y===r.y}function cG(t,r,i,s){let u=cW(cU(t,r,i)),c=cW(cU(t,r,s)),h=cW(cU(i,s,t)),p=cW(cU(i,s,r));return!!(u!==c&&h!==p||0===u&&cV(t,i,r)||0===c&&cV(t,s,r)||0===h&&cV(i,t,s)||0===p&&cV(i,r,s))||!1}function cV(t,r,i){return r.x<=Math.max(t.x,i.x)&&r.x>=Math.min(t.x,i.x)&&r.y<=Math.max(t.y,i.y)&&r.y>=Math.min(t.y,i.y)}function cW(t){return t>0?1:t<0?-1:0}function cj(t,r){return 0>cU(t.prev,t,t.next)?cU(t,r,t.next)>=0&&cU(t,t.prev,r)>=0:0>cU(t,r,t.prev)||0>cU(t,t.next,r)}function cX(t,r){let i=new cJ(t.i,t.x,t.y),s=new cJ(r.i,r.x,r.y),u=t.next,c=r.prev;return t.next=r,r.prev=t,i.next=u,u.prev=i,s.next=i,i.prev=s,c.next=s,s.prev=c,s}function cY(t,r,i,s){let u=new cJ(t,r,i);return s?(u.next=s.next,u.prev=s,s.next.prev=u,s.next=u):(u.prev=u,u.next=u),u}function c$(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function cJ(t,r,i){this.i=t,this.x=r,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class cZ{static area(t){let r=t.length,i=0;for(let s=r-1,u=0;u<r;s=u++)i+=t[s].x*t[u].y-t[u].x*t[s].y;return .5*i}static isClockWise(t){return 0>cZ.area(t)}static triangulateShape(t,r){let i=[],s=[],u=[];cK(t),cq(i,t);let c=t.length;r.forEach(cK);for(let t=0;t<r.length;t++)s.push(c),c+=r[t].length,cq(i,r[t]);let h=cL.triangulate(i,s);for(let t=0;t<h.length;t+=3)u.push(h.slice(t,t+3));return u}}function cK(t){let r=t.length;r>2&&t[r-1].equals(t[0])&&t.pop()}function cq(t,r){for(let i=0;i<r.length;i++)t.push(r[i].x),t.push(r[i].y)}class cQ extends aU{constructor(t=new cR([new rD(.5,.5),new rD(-.5,.5),new rD(-.5,-.5),new rD(.5,-.5)]),r={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:r},t=Array.isArray(t)?t:[t];let i=this,s=[],u=[];for(let c=0,h=t.length;c<h;c++)(function(t){let c,h,p,f;let v=[],y=void 0!==r.curveSegments?r.curveSegments:12,x=void 0!==r.steps?r.steps:1,_=void 0!==r.depth?r.depth:1,b=void 0===r.bevelEnabled||r.bevelEnabled,w=void 0!==r.bevelThickness?r.bevelThickness:.2,S=void 0!==r.bevelSize?r.bevelSize:w-.1,M=void 0!==r.bevelOffset?r.bevelOffset:0,A=void 0!==r.bevelSegments?r.bevelSegments:3,C=r.extrudePath,T=void 0!==r.UVGenerator?r.UVGenerator:c0,I,D=!1;C&&(I=C.getSpacedPoints(x),D=!0,b=!1,c=C.computeFrenetFrames(x,!1),h=new r8,p=new r8,f=new r8),!b&&(A=0,w=0,S=0,M=0);let P=t.extractPoints(y),R=P.shape,L=P.holes;if(!cZ.isClockWise(R)){R=R.reverse();for(let t=0,r=L.length;t<r;t++){let r=L[t];cZ.isClockWise(r)&&(L[t]=r.reverse())}}let k=cZ.triangulateShape(R,L),O=R;for(let t=0,r=L.length;t<r;t++){let r=L[t];R=R.concat(r)}function B(t,r,i){return t.clone().addScaledVector(r,i)}let N=R.length,F=k.length;function z(t,r,i){let s,u,c;let h=t.x-r.x,p=t.y-r.y,f=i.x-t.x,v=i.y-t.y,y=h*h+p*p;if(Math.abs(h*v-p*f)>Number.EPSILON){let x=Math.sqrt(y),_=Math.sqrt(f*f+v*v),b=r.x-p/x,w=r.y+h/x,S=i.x-v/_,M=((S-b)*v-(i.y+f/_-w)*f)/(h*v-p*f);s=b+h*M-t.x;let A=s*s+(u=w+p*M-t.y)*u;if(A<=2)return new rD(s,u);c=Math.sqrt(A/2)}else{let t=!1;h>Number.EPSILON?f>Number.EPSILON&&(t=!0):h<-Number.EPSILON?f<-Number.EPSILON&&(t=!0):Math.sign(p)===Math.sign(v)&&(t=!0),t?(s=-p,u=h,c=Math.sqrt(y)):(s=h,u=p,c=Math.sqrt(y/2))}return new rD(s/c,u/c)}let U=[];for(let t=0,r=O.length,i=r-1,s=t+1;t<r;t++,i++,s++)i===r&&(i=0),s===r&&(s=0),U[t]=z(O[t],O[i],O[s]);let H=[],G,V=U.concat();for(let t=0,r=L.length;t<r;t++){let r=L[t];G=[];for(let t=0,i=r.length,s=i-1,u=t+1;t<i;t++,s++,u++)s===i&&(s=0),u===i&&(u=0),G[t]=z(r[t],r[s],r[u]);H.push(G),V=V.concat(G)}for(let t=0;t<A;t++){let r=t/A,i=w*Math.cos(r*Math.PI/2),s=S*Math.sin(r*Math.PI/2)+M;for(let t=0,r=O.length;t<r;t++){let r=B(O[t],U[t],s);X(r.x,r.y,-i)}for(let t=0,r=L.length;t<r;t++){let r=L[t];G=H[t];for(let t=0,u=r.length;t<u;t++){let u=B(r[t],G[t],s);X(u.x,u.y,-i)}}}let W=S+M;for(let t=0;t<N;t++){let r=b?B(R[t],V[t],W):R[t];D?(p.copy(c.normals[0]).multiplyScalar(r.x),h.copy(c.binormals[0]).multiplyScalar(r.y),f.copy(I[0]).add(p).add(h),X(f.x,f.y,f.z)):X(r.x,r.y,0)}for(let t=1;t<=x;t++)for(let r=0;r<N;r++){let i=b?B(R[r],V[r],W):R[r];D?(p.copy(c.normals[t]).multiplyScalar(i.x),h.copy(c.binormals[t]).multiplyScalar(i.y),f.copy(I[t]).add(p).add(h),X(f.x,f.y,f.z)):X(i.x,i.y,_/x*t)}for(let t=A-1;t>=0;t--){let r=t/A,i=w*Math.cos(r*Math.PI/2),s=S*Math.sin(r*Math.PI/2)+M;for(let t=0,r=O.length;t<r;t++){let r=B(O[t],U[t],s);X(r.x,r.y,_+i)}for(let t=0,r=L.length;t<r;t++){let r=L[t];G=H[t];for(let t=0,u=r.length;t<u;t++){let u=B(r[t],G[t],s);D?X(u.x,u.y+I[x-1].y,I[x-1].x+i):X(u.x,u.y,_+i)}}}(function(){let t=s.length/3;if(b){let t=0,r=0*N;for(let t=0;t<F;t++){let i=k[t];Y(i[2]+r,i[1]+r,i[0]+r)}r=N*(t=x+2*A);for(let t=0;t<F;t++){let i=k[t];Y(i[0]+r,i[1]+r,i[2]+r)}}else{for(let t=0;t<F;t++){let r=k[t];Y(r[2],r[1],r[0])}for(let t=0;t<F;t++){let r=k[t];Y(r[0]+N*x,r[1]+N*x,r[2]+N*x)}}i.addGroup(t,s.length/3-t,0)})(),function(){let t=s.length/3,r=0;j(O,0),r+=O.length;for(let t=0,i=L.length;t<i;t++){let i=L[t];j(i,r),r+=i.length}i.addGroup(t,s.length/3-t,1)}();function j(t,r){let u=t.length;for(;--u>=0;){let c=u,h=u-1;h<0&&(h=t.length-1);for(let t=0,u=x+2*A;t<u;t++){let u=N*t,p=N*(t+1);(function(t,r,u,c){$(t),$(r),$(c),$(r),$(u),$(c);let h=s.length/3,p=T.generateSideWallUV(i,s,h-6,h-3,h-2,h-1);J(p[0]),J(p[1]),J(p[3]),J(p[1]),J(p[2]),J(p[3])})(r+c+u,r+h+u,r+h+p,r+c+p)}}}function X(t,r,i){v.push(t),v.push(r),v.push(i)}function Y(t,r,u){$(t),$(r),$(u);let c=s.length/3,h=T.generateTopUV(i,s,c-3,c-2,c-1);J(h[0]),J(h[1]),J(h[2])}function $(t){s.push(v[3*t+0]),s.push(v[3*t+1]),s.push(v[3*t+2])}function J(t){u.push(t.x),u.push(t.y)}})(t[c]);this.setAttribute("position",new aR(s,3)),this.setAttribute("uv",new aR(u,2)),this.computeVertexNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){let t=super.toJSON(),r=this.parameters.shapes;return function(t,r,i){if(i.shapes=[],Array.isArray(t))for(let r=0,s=t.length;r<s;r++){let s=t[r];i.shapes.push(s.uuid)}else i.shapes.push(t.uuid);return i.options=Object.assign({},r),void 0!==r.extrudePath&&(i.options.extrudePath=r.extrudePath.toJSON()),i}(r,this.parameters.options,t)}static fromJSON(t,r){let i=[];for(let s=0,u=t.shapes.length;s<u;s++){let u=r[t.shapes[s]];i.push(u)}let s=t.options.extrudePath;return void 0!==s&&(t.options.extrudePath=new cv[s.type]().fromJSON(s)),new cQ(i,t.options)}}let c0={generateTopUV:function(t,r,i,s,u){let c=r[3*i],h=r[3*i+1],p=r[3*s],f=r[3*s+1],v=r[3*u],y=r[3*u+1];return[new rD(c,h),new rD(p,f),new rD(v,y)]},generateSideWallUV:function(t,r,i,s,u,c){let h=r[3*i],p=r[3*i+1],f=r[3*i+2],v=r[3*s],y=r[3*s+1],x=r[3*s+2],_=r[3*u],b=r[3*u+1],w=r[3*u+2],S=r[3*c],M=r[3*c+1],A=r[3*c+2];return Math.abs(p-y)<Math.abs(h-v)?[new rD(h,1-f),new rD(v,1-x),new rD(_,1-w),new rD(S,1-A)]:[new rD(p,1-f),new rD(y,1-x),new rD(b,1-w),new rD(M,1-A)]}};class c1 extends cA{constructor(t=1,r=0){let i=(1+Math.sqrt(5))/2;super([-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,r),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:r}}static fromJSON(t){return new c1(t.radius,t.detail)}}class c2 extends cA{constructor(t=1,r=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,r),this.type="OctahedronGeometry",this.parameters={radius:t,detail:r}}static fromJSON(t){return new c2(t.radius,t.detail)}}class c3 extends aU{constructor(t=.5,r=1,i=32,s=1,u=0,c=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:r,thetaSegments:i,phiSegments:s,thetaStart:u,thetaLength:c},i=Math.max(3,i);let h=[],p=[],f=[],v=[],y=t,x=(r-t)/(s=Math.max(1,s)),_=new r8,b=new rD;for(let t=0;t<=s;t++){for(let t=0;t<=i;t++){let s=u+t/i*c;_.x=y*Math.cos(s),_.y=y*Math.sin(s),p.push(_.x,_.y,_.z),f.push(0,0,1),b.x=(_.x/r+1)/2,b.y=(_.y/r+1)/2,v.push(b.x,b.y)}y+=x}for(let t=0;t<s;t++){let r=t*(i+1);for(let t=0;t<i;t++){let s=t+r,u=s+i+1,c=s+i+2,p=s+1;h.push(s,u,p),h.push(u,c,p)}}this.setIndex(h),this.setAttribute("position",new aR(p,3)),this.setAttribute("normal",new aR(f,3)),this.setAttribute("uv",new aR(v,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new c3(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class c5 extends aU{constructor(t=new cR([new rD(0,.5),new rD(-.5,-.5),new rD(.5,-.5)]),r=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:r};let i=[],s=[],u=[],c=[],h=0,p=0;if(!1===Array.isArray(t))f(t);else for(let r=0;r<t.length;r++)f(t[r]),this.addGroup(h,p,r),h+=p,p=0;function f(t){let h=s.length/3,f=t.extractPoints(r),v=f.shape,y=f.holes;!1===cZ.isClockWise(v)&&(v=v.reverse());for(let t=0,r=y.length;t<r;t++){let r=y[t];!0===cZ.isClockWise(r)&&(y[t]=r.reverse())}let x=cZ.triangulateShape(v,y);for(let t=0,r=y.length;t<r;t++){let r=y[t];v=v.concat(r)}for(let t=0,r=v.length;t<r;t++){let r=v[t];s.push(r.x,r.y,0),u.push(0,0,1),c.push(r.x,r.y)}for(let t=0,r=x.length;t<r;t++){let r=x[t],s=r[0]+h,u=r[1]+h,c=r[2]+h;i.push(s,u,c),p+=3}}this.setIndex(i),this.setAttribute("position",new aR(s,3)),this.setAttribute("normal",new aR(u,3)),this.setAttribute("uv",new aR(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){let t=super.toJSON();return function(t,r){if(r.shapes=[],Array.isArray(t))for(let i=0,s=t.length;i<s;i++){let s=t[i];r.shapes.push(s.uuid)}else r.shapes.push(t.uuid);return r}(this.parameters.shapes,t)}static fromJSON(t,r){let i=[];for(let s=0,u=t.shapes.length;s<u;s++){let u=r[t.shapes[s]];i.push(u)}return new c5(i,t.curveSegments)}}class c4 extends aU{constructor(t=1,r=32,i=16,s=0,u=2*Math.PI,c=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:r,heightSegments:i,phiStart:s,phiLength:u,thetaStart:c,thetaLength:h},r=Math.max(3,Math.floor(r)),i=Math.max(2,Math.floor(i));let p=Math.min(c+h,Math.PI),f=0,v=[],y=new r8,x=new r8,_=[],b=[],w=[],S=[];for(let _=0;_<=i;_++){let M=[],A=_/i,C=0;0===_&&0===c?C=.5/r:_===i&&p===Math.PI&&(C=-.5/r);for(let i=0;i<=r;i++){let p=i/r;y.x=-t*Math.cos(s+p*u)*Math.sin(c+A*h),y.y=t*Math.cos(c+A*h),y.z=t*Math.sin(s+p*u)*Math.sin(c+A*h),b.push(y.x,y.y,y.z),x.copy(y).normalize(),w.push(x.x,x.y,x.z),S.push(p+C,1-A),M.push(f++)}v.push(M)}for(let t=0;t<i;t++)for(let s=0;s<r;s++){let r=v[t][s+1],u=v[t][s],h=v[t+1][s],f=v[t+1][s+1];(0!==t||c>0)&&_.push(r,u,f),(t!==i-1||p<Math.PI)&&_.push(u,h,f)}this.setIndex(_),this.setAttribute("position",new aR(b,3)),this.setAttribute("normal",new aR(w,3)),this.setAttribute("uv",new aR(S,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new c4(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class c6 extends cA{constructor(t=1,r=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,r),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:r}}static fromJSON(t){return new c6(t.radius,t.detail)}}class c9 extends aU{constructor(t=1,r=.4,i=12,s=48,u=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:r,radialSegments:i,tubularSegments:s,arc:u},i=Math.floor(i),s=Math.floor(s);let c=[],h=[],p=[],f=[],v=new r8,y=new r8,x=new r8;for(let c=0;c<=i;c++)for(let _=0;_<=s;_++){let b=_/s*u,w=c/i*Math.PI*2;y.x=(t+r*Math.cos(w))*Math.cos(b),y.y=(t+r*Math.cos(w))*Math.sin(b),y.z=r*Math.sin(w),h.push(y.x,y.y,y.z),v.x=t*Math.cos(b),v.y=t*Math.sin(b),x.subVectors(y,v).normalize(),p.push(x.x,x.y,x.z),f.push(_/s),f.push(c/i)}for(let t=1;t<=i;t++)for(let r=1;r<=s;r++){let i=(s+1)*t+r-1,u=(s+1)*(t-1)+r-1,h=(s+1)*(t-1)+r,p=(s+1)*t+r;c.push(i,u,p),c.push(u,h,p)}this.setIndex(c),this.setAttribute("position",new aR(h,3)),this.setAttribute("normal",new aR(p,3)),this.setAttribute("uv",new aR(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new c9(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class c8 extends aU{constructor(t=1,r=.4,i=64,s=8,u=2,c=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:r,tubularSegments:i,radialSegments:s,p:u,q:c},i=Math.floor(i),s=Math.floor(s);let h=[],p=[],f=[],v=[],y=new r8,x=new r8,_=new r8,b=new r8,w=new r8,S=new r8,M=new r8;for(let h=0;h<=i;++h){let C=h/i*u*Math.PI*2;A(C,u,c,t,_),A(C+.01,u,c,t,b),S.subVectors(b,_),M.addVectors(b,_),w.crossVectors(S,M),M.crossVectors(w,S),w.normalize(),M.normalize();for(let t=0;t<=s;++t){let u=t/s*Math.PI*2,c=-r*Math.cos(u),b=r*Math.sin(u);y.x=_.x+(c*M.x+b*w.x),y.y=_.y+(c*M.y+b*w.y),y.z=_.z+(c*M.z+b*w.z),p.push(y.x,y.y,y.z),x.subVectors(y,_).normalize(),f.push(x.x,x.y,x.z),v.push(h/i),v.push(t/s)}}for(let t=1;t<=i;t++)for(let r=1;r<=s;r++){let i=(s+1)*(t-1)+(r-1),u=(s+1)*t+(r-1),c=(s+1)*t+r,p=(s+1)*(t-1)+r;h.push(i,u,p),h.push(u,c,p)}function A(t,r,i,s,u){let c=Math.cos(t),h=Math.sin(t),p=i/r*t,f=Math.cos(p);u.x=s*(2+f)*.5*c,u.y=s*(2+f)*h*.5,u.z=s*Math.sin(p)*.5}this.setIndex(h),this.setAttribute("position",new aR(p,3)),this.setAttribute("normal",new aR(f,3)),this.setAttribute("uv",new aR(v,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new c8(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class c7 extends aU{constructor(t=new cg(new r8(-1,-1,0),new r8(-1,1,0),new r8(1,1,0)),r=64,i=1,s=8,u=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:r,radius:i,radialSegments:s,closed:u};let c=t.computeFrenetFrames(r,u);this.tangents=c.tangents,this.normals=c.normals,this.binormals=c.binormals;let h=new r8,p=new r8,f=new rD,v=new r8,y=[],x=[],_=[],b=[];(function(){for(let t=0;t<r;t++)w(t);w(!1===u?r:0),function(){for(let t=0;t<=r;t++)for(let i=0;i<=s;i++)f.x=t/r,f.y=i/s,_.push(f.x,f.y)}(),function(){for(let t=1;t<=r;t++)for(let r=1;r<=s;r++){let i=(s+1)*(t-1)+(r-1),u=(s+1)*t+(r-1),c=(s+1)*t+r,h=(s+1)*(t-1)+r;b.push(i,u,h),b.push(u,c,h)}}()})(),this.setIndex(b),this.setAttribute("position",new aR(y,3)),this.setAttribute("normal",new aR(x,3)),this.setAttribute("uv",new aR(_,2));function w(u){v=t.getPointAt(u/r,v);let f=c.normals[u],_=c.binormals[u];for(let t=0;t<=s;t++){let r=t/s*Math.PI*2,u=Math.sin(r),c=-Math.cos(r);p.x=c*f.x+u*_.x,p.y=c*f.y+u*_.y,p.z=c*f.z+u*_.z,p.normalize(),x.push(p.x,p.y,p.z),h.x=v.x+i*p.x,h.y=v.y+i*p.y,h.z=v.z+i*p.z,y.push(h.x,h.y,h.z)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){let t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new c7(new cv[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class he extends aU{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},null!==t){let r=[],i=new Set,s=new r8,u=new r8;if(null!==t.index){let c=t.attributes.position,h=t.index,p=t.groups;0===p.length&&(p=[{start:0,count:h.count,materialIndex:0}]);for(let t=0,f=p.length;t<f;++t){let f=p[t],v=f.start,y=f.count;for(let t=v,p=v+y;t<p;t+=3)for(let p=0;p<3;p++){let f=h.getX(t+p),v=h.getX(t+(p+1)%3);s.fromBufferAttribute(c,f),u.fromBufferAttribute(c,v),!0===ht(s,u,i)&&(r.push(s.x,s.y,s.z),r.push(u.x,u.y,u.z))}}}else{let c=t.attributes.position;for(let t=0,h=c.count/3;t<h;t++)for(let h=0;h<3;h++){let p=3*t+h,f=3*t+(h+1)%3;s.fromBufferAttribute(c,p),u.fromBufferAttribute(c,f),!0===ht(s,u,i)&&(r.push(s.x,s.y,s.z),r.push(u.x,u.y,u.z))}}this.setAttribute("position",new aR(r,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function ht(t,r,i){let s=`${t.x},${t.y},${t.z}-${r.x},${r.y},${r.z}`,u=`${r.x},${r.y},${r.z}-${t.x},${t.y},${t.z}`;return!0!==i.has(s)&&!0!==i.has(u)&&(i.add(s),i.add(u),!0)}var hn=Object.freeze({__proto__:null,BoxGeometry:a0,CapsuleGeometry:cb,CircleGeometry:cw,ConeGeometry:cM,CylinderGeometry:cS,DodecahedronGeometry:cC,EdgesGeometry:cP,ExtrudeGeometry:cQ,IcosahedronGeometry:c1,LatheGeometry:c_,OctahedronGeometry:c2,PlaneGeometry:op,PolyhedronGeometry:cA,RingGeometry:c3,ShapeGeometry:c5,SphereGeometry:c4,TetrahedronGeometry:c6,TorusGeometry:c9,TorusKnotGeometry:c8,TubeGeometry:c7,WireframeGeometry:he});class hr extends ag{static get type(){return"ShadowMaterial"}constructor(t){super(),this.isShadowMaterial=!0,this.color=new ad(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class hi extends a4{static get type(){return"RawShaderMaterial"}constructor(t){super(t),this.isRawShaderMaterial=!0}}class ha extends ag{static get type(){return"MeshStandardMaterial"}constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.color=new ad(0xffffff),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ad(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nF,this.normalScale=new rD(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new iU,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class ho extends ha{static get type(){return"MeshPhysicalMaterial"}constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new rD(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return rM(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ad(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ad(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ad(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class hs extends ag{static get type(){return"MeshPhongMaterial"}constructor(t){super(),this.isMeshPhongMaterial=!0,this.color=new ad(0xffffff),this.specular=new ad(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ad(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nF,this.normalScale=new rD(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new iU,this.combine=e4,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class hl extends ag{static get type(){return"MeshToonMaterial"}constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.color=new ad(0xffffff),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ad(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nF,this.normalScale=new rD(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class hu extends ag{static get type(){return"MeshNormalMaterial"}constructor(t){super(),this.isMeshNormalMaterial=!0,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nF,this.normalScale=new rD(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class hc extends ag{static get type(){return"MeshLambertMaterial"}constructor(t){super(),this.isMeshLambertMaterial=!0,this.color=new ad(0xffffff),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ad(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nF,this.normalScale=new rD(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new iU,this.combine=e4,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class hh extends ag{static get type(){return"MeshMatcapMaterial"}constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.color=new ad(0xffffff),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nF,this.normalScale=new rD(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class hd extends uO{static get type(){return"LineDashedMaterial"}constructor(t){super(),this.isLineDashedMaterial=!0,this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function hp(t,r,i){return t&&(i||t.constructor!==r)?"number"==typeof r.BYTES_PER_ELEMENT?new r(t):Array.prototype.slice.call(t):t}function hf(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function hg(t){let r=t.length,i=Array(r);for(let t=0;t!==r;++t)i[t]=t;return i.sort(function(r,i){return t[r]-t[i]}),i}function hm(t,r,i){let s=t.length,u=new t.constructor(s);for(let c=0,h=0;h!==s;++c){let s=i[c]*r;for(let i=0;i!==r;++i)u[h++]=t[s+i]}return u}function hv(t,r,i,s){let u=1,c=t[0];for(;void 0!==c&&void 0===c[s];)c=t[u++];if(void 0===c)return;let h=c[s];if(void 0!==h){if(Array.isArray(h))do void 0!==(h=c[s])&&(r.push(c.time),i.push.apply(i,h)),c=t[u++];while(void 0!==c);else if(void 0!==h.toArray)do void 0!==(h=c[s])&&(r.push(c.time),h.toArray(i,i.length)),c=t[u++];while(void 0!==c);else do void 0!==(h=c[s])&&(r.push(c.time),i.push(h)),c=t[u++];while(void 0!==c)}}let hy={convertArray:hp,isTypedArray:hf,getKeyframeOrder:hg,sortedArray:hm,flattenJSON:hv,subclip:function(t,r,i,s,u=30){let c=t.clone();c.name=r;let h=[];for(let t=0;t<c.tracks.length;++t){let r=c.tracks[t],p=r.getValueSize(),f=[],v=[];for(let t=0;t<r.times.length;++t){let c=r.times[t]*u;if(!(c<i)&&!(c>=s)){f.push(r.times[t]);for(let i=0;i<p;++i)v.push(r.values[t*p+i])}}0!==f.length&&(r.times=hp(f,r.times.constructor),r.values=hp(v,r.values.constructor),h.push(r))}c.tracks=h;let p=1/0;for(let t=0;t<c.tracks.length;++t)p>c.tracks[t].times[0]&&(p=c.tracks[t].times[0]);for(let t=0;t<c.tracks.length;++t)c.tracks[t].shift(-1*p);return c.resetDuration(),c},makeClipAdditive:function(t,r=0,i=t,s=30){s<=0&&(s=30);let u=i.tracks.length,c=r/s;for(let r=0;r<u;++r){let s;let u=i.tracks[r],h=u.ValueTypeName;if("bool"===h||"string"===h)continue;let p=t.tracks.find(function(t){return t.name===u.name&&t.ValueTypeName===h});if(void 0===p)continue;let f=0,v=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=v/3);let y=0,x=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=x/3);let _=u.times.length-1;if(c<=u.times[0]){let t=f,r=v-f;s=u.values.slice(t,r)}else if(c>=u.times[_]){let t=_*v+f,r=t+v-f;s=u.values.slice(t,r)}else{let t=u.createInterpolant(),r=f,i=v-f;t.evaluate(c),s=t.resultBuffer.slice(r,i)}"quaternion"===h&&new r9().fromArray(s).normalize().conjugate().toArray(s);let b=p.times.length;for(let t=0;t<b;++t){let r=t*x+y;if("quaternion"===h)r9.multiplyQuaternionsFlat(p.values,r,s,0,p.values,r);else{let t=x-2*y;for(let i=0;i<t;++i)p.values[r+i]-=s[i]}}}return t.blendMode=nD,t}};class hx{constructor(t,r,i,s){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==s?s:new r.constructor(i),this.sampleValues=r,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){let r=this.parameterPositions,i=this._cachedIndex,s=r[i],u=r[i-1];n:{r:{let c;i:{a:if(!(t<s)){for(let c=i+2;;){if(void 0===s){if(t<u)break a;return i=r.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===c)break;if(u=s,t<(s=r[++i]))break r}c=r.length;break i}if(!(t>=u)){let h=r[1];t<h&&(i=2,u=h);for(let c=i-2;;){if(void 0===u)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(s=u,t>=(u=r[--i-1]))break r}c=i,i=0;break i}break n}for(;i<c;){let s=i+c>>>1;t<r[s]?c=s:i=s+1}if(s=r[i],void 0===(u=r[i-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===s)return i=r.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,u,s)}return this.interpolate_(i,u,t,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){let r=this.resultBuffer,i=this.sampleValues,s=this.valueSize,u=t*s;for(let t=0;t!==s;++t)r[t]=i[u+t];return r}interpolate_(){throw Error("call to abstract method")}intervalChanged_(){}}class h_ extends hx{constructor(t,r,i,s){super(t,r,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:nC,endingEnd:nC}}intervalChanged_(t,r,i){let s=this.parameterPositions,u=t-2,c=t+1,h=s[u],p=s[c];if(void 0===h)switch(this.getSettings_().endingStart){case nT:u=t,h=2*r-i;break;case nE:u=s.length-2,h=r+s[u]-s[u+1];break;default:u=t,h=i}if(void 0===p)switch(this.getSettings_().endingEnd){case nT:c=t,p=2*i-r;break;case nE:c=1,p=i+s[1]-s[0];break;default:c=t-1,p=r}let f=(i-r)*.5,v=this.valueSize;this._weightPrev=f/(r-h),this._weightNext=f/(p-i),this._offsetPrev=u*v,this._offsetNext=c*v}interpolate_(t,r,i,s){let u=this.resultBuffer,c=this.sampleValues,h=this.valueSize,p=t*h,f=p-h,v=this._offsetPrev,y=this._offsetNext,x=this._weightPrev,_=this._weightNext,b=(i-r)/(s-r),w=b*b,S=w*b,M=-x*S+2*x*w-x*b,A=(1+x)*S+(-1.5-2*x)*w+(-.5+x)*b+1,C=(-1-_)*S+(1.5+_)*w+.5*b,T=_*S-_*w;for(let t=0;t!==h;++t)u[t]=M*c[v+t]+A*c[f+t]+C*c[p+t]+T*c[y+t];return u}}class hb extends hx{constructor(t,r,i,s){super(t,r,i,s)}interpolate_(t,r,i,s){let u=this.resultBuffer,c=this.sampleValues,h=this.valueSize,p=t*h,f=p-h,v=(i-r)/(s-r),y=1-v;for(let t=0;t!==h;++t)u[t]=c[f+t]*y+c[p+t]*v;return u}}class hw extends hx{constructor(t,r,i,s){super(t,r,i,s)}interpolate_(t){return this.copySampleValue_(t-1)}}class hS{constructor(t,r,i,s){if(void 0===t)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===r||0===r.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=hp(r,this.TimeBufferType),this.values=hp(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(t){let r;let i=t.constructor;if(i.toJSON!==this.toJSON)r=i.toJSON(t);else{r={name:t.name,times:hp(t.times,Array),values:hp(t.values,Array)};let i=t.getInterpolation();i!==t.DefaultInterpolation&&(r.interpolation=i)}return r.type=t.ValueTypeName,r}InterpolantFactoryMethodDiscrete(t){return new hw(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new hb(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new h_(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let r;switch(t){case nS:r=this.InterpolantFactoryMethodDiscrete;break;case nM:r=this.InterpolantFactoryMethodLinear;break;case nA:r=this.InterpolantFactoryMethodSmooth}if(void 0===r){let r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(r)}return this}return this.createInterpolant=r,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return nS;case this.InterpolantFactoryMethodLinear:return nM;case this.InterpolantFactoryMethodSmooth:return nA}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){let r=this.times;for(let i=0,s=r.length;i!==s;++i)r[i]+=t}return this}scale(t){if(1!==t){let r=this.times;for(let i=0,s=r.length;i!==s;++i)r[i]*=t}return this}trim(t,r){let i=this.times,s=i.length,u=0,c=s-1;for(;u!==s&&i[u]<t;)++u;for(;-1!==c&&i[c]>r;)--c;if(++c,0!==u||c!==s){u>=c&&(u=(c=Math.max(c,1))-1);let t=this.getValueSize();this.times=i.slice(u,c),this.values=this.values.slice(u*t,c*t)}return this}validate(){let t=!0,r=this.getValueSize();r-Math.floor(r)!=0&&(t=!1);let i=this.times,s=this.values,u=i.length;0===u&&(t=!1);let c=null;for(let r=0;r!==u;r++){let s=i[r];if("number"==typeof s&&isNaN(s)||null!==c&&c>s){t=!1;break}c=s}if(void 0!==s&&hf(s)){for(let r=0,i=s.length;r!==i;++r)if(isNaN(s[r])){t=!1;break}}return t}optimize(){let t=this.times.slice(),r=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===nA,u=t.length-1,c=1;for(let h=1;h<u;++h){let u=!1,p=t[h];if(p!==t[h+1]&&(1!==h||p!==t[0])){if(s)u=!0;else{let t=h*i,s=t-i,c=t+i;for(let h=0;h!==i;++h){let i=r[t+h];if(i!==r[s+h]||i!==r[c+h]){u=!0;break}}}}if(u){if(h!==c){t[c]=t[h];let s=h*i,u=c*i;for(let t=0;t!==i;++t)r[u+t]=r[s+t]}++c}}if(u>0){t[c]=t[u];for(let t=u*i,s=c*i,h=0;h!==i;++h)r[s+h]=r[t+h];++c}return c!==t.length?(this.times=t.slice(0,c),this.values=r.slice(0,c*i)):(this.times=t,this.values=r),this}clone(){let t=this.times.slice(),r=this.values.slice(),i=new this.constructor(this.name,t,r);return i.createInterpolant=this.createInterpolant,i}}hS.prototype.TimeBufferType=Float32Array,hS.prototype.ValueBufferType=Float32Array,hS.prototype.DefaultInterpolation=nM;class hM extends hS{constructor(t,r,i){super(t,r,i)}}hM.prototype.ValueTypeName="bool",hM.prototype.ValueBufferType=Array,hM.prototype.DefaultInterpolation=nS,hM.prototype.InterpolantFactoryMethodLinear=void 0,hM.prototype.InterpolantFactoryMethodSmooth=void 0;class hA extends hS{}hA.prototype.ValueTypeName="color";class hC extends hS{}hC.prototype.ValueTypeName="number";class hT extends hx{constructor(t,r,i,s){super(t,r,i,s)}interpolate_(t,r,i,s){let u=this.resultBuffer,c=this.sampleValues,h=this.valueSize,p=(i-r)/(s-r),f=t*h;for(let t=f+h;f!==t;f+=4)r9.slerpFlat(u,0,c,f-h,c,f,p);return u}}class hE extends hS{InterpolantFactoryMethodLinear(t){return new hT(this.times,this.values,this.getValueSize(),t)}}hE.prototype.ValueTypeName="quaternion",hE.prototype.InterpolantFactoryMethodSmooth=void 0;class hI extends hS{constructor(t,r,i){super(t,r,i)}}hI.prototype.ValueTypeName="string",hI.prototype.ValueBufferType=Array,hI.prototype.DefaultInterpolation=nS,hI.prototype.InterpolantFactoryMethodLinear=void 0,hI.prototype.InterpolantFactoryMethodSmooth=void 0;class hD extends hS{}hD.prototype.ValueTypeName="vector";class hP{constructor(t="",r=-1,i=[],s=nI){this.name=t,this.tracks=i,this.duration=r,this.blendMode=s,this.uuid=rS(),this.duration<0&&this.resetDuration()}static parse(t){let r=[],i=t.tracks,s=1/(t.fps||1);for(let t=0,u=i.length;t!==u;++t)r.push((function(t){if(void 0===t.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");let r=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return hC;case"vector":case"vector2":case"vector3":case"vector4":return hD;case"color":return hA;case"quaternion":return hE;case"bool":case"boolean":return hM;case"string":return hI}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){let r=[],i=[];hv(t.keys,r,i,"value"),t.times=r,t.values=i}return void 0!==r.parse?r.parse(t):new r(t.name,t.times,t.values,t.interpolation)})(i[t]).scale(s));let u=new this(t.name,t.duration,r,t.blendMode);return u.uuid=t.uuid,u}static toJSON(t){let r=[],i=t.tracks,s={name:t.name,duration:t.duration,tracks:r,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,s=i.length;t!==s;++t)r.push(hS.toJSON(i[t]));return s}static CreateFromMorphTargetSequence(t,r,i,s){let u=r.length,c=[];for(let t=0;t<u;t++){let h=[],p=[];h.push((t+u-1)%u,t,(t+1)%u),p.push(0,1,0);let f=hg(h);h=hm(h,1,f),p=hm(p,1,f),!s&&0===h[0]&&(h.push(u),p.push(p[0])),c.push(new hC(".morphTargetInfluences["+r[t].name+"]",h,p).scale(1/i))}return new this(t,-1,c)}static findByName(t,r){let i=t;!Array.isArray(t)&&(i=t.geometry&&t.geometry.animations||t.animations);for(let t=0;t<i.length;t++)if(i[t].name===r)return i[t];return null}static CreateClipsFromMorphTargetSequences(t,r,i){let s={},u=/^([\w-]*?)([\d]+)$/;for(let r=0,i=t.length;r<i;r++){let i=t[r],c=i.name.match(u);if(c&&c.length>1){let t=c[1],r=s[t];!r&&(s[t]=r=[]),r.push(i)}}let c=[];for(let t in s)c.push(this.CreateFromMorphTargetSequence(t,s[t],r,i));return c}static parseAnimation(t,r){if(!t)return null;let i=function(t,r,i,s,u){if(0!==i.length){let c=[],h=[];hv(i,c,h,s),0!==c.length&&u.push(new t(r,c,h))}},s=[],u=t.name||"default",c=t.fps||30,h=t.blendMode,p=t.length||-1,f=t.hierarchy||[];for(let t=0;t<f.length;t++){let u=f[t].keys;if(u&&0!==u.length){if(u[0].morphTargets){let t;let r={};for(t=0;t<u.length;t++)if(u[t].morphTargets)for(let i=0;i<u[t].morphTargets.length;i++)r[u[t].morphTargets[i]]=-1;for(let i in r){let r=[],c=[];for(let s=0;s!==u[t].morphTargets.length;++s){let s=u[t];r.push(s.time),c.push(s.morphTarget===i?1:0)}s.push(new hC(".morphTargetInfluence["+i+"]",r,c))}p=r.length*c}else{let c=".bones["+r[t].name+"]";i(hD,c+".position",u,"pos",s),i(hE,c+".quaternion",u,"rot",s),i(hD,c+".scale",u,"scl",s)}}}return 0===s.length?null:new this(u,p,s,h)}resetDuration(){let t=this.tracks,r=0;for(let i=0,s=t.length;i!==s;++i){let t=this.tracks[i];r=Math.max(r,t.times[t.times.length-1])}return this.duration=r,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let r=0;r<this.tracks.length;r++)t=t&&this.tracks[r].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){let t=[];for(let r=0;r<this.tracks.length;r++)t.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}let hR={enabled:!1,files:{},add:function(t,r){!1!==this.enabled&&(this.files[t]=r)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class hL{constructor(t,r,i){let s,u=this,c=!1,h=0,p=0;let f=[];this.onStart=void 0,this.onLoad=t,this.onProgress=r,this.onError=i,this.itemStart=function(t){p++,!1===c&&void 0!==u.onStart&&u.onStart(t,h,p),c=!0},this.itemEnd=function(t){h++,void 0!==u.onProgress&&u.onProgress(t,h,p),h===p&&(c=!1,void 0!==u.onLoad&&u.onLoad())},this.itemError=function(t){void 0!==u.onError&&u.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,r){return f.push(t,r),this},this.removeHandler=function(t){let r=f.indexOf(t);return -1!==r&&f.splice(r,2),this},this.getHandler=function(t){for(let r=0,i=f.length;r<i;r+=2){let i=f[r],s=f[r+1];if(i.global&&(i.lastIndex=0),i.test(t))return s}return null}}}let hk=new hL;class hO{constructor(t){this.manager=void 0!==t?t:hk,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,r){let i=this;return new Promise(function(s,u){i.load(t,s,r,u)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}hO.DEFAULT_MATERIAL_NAME="__DEFAULT";let hB={};class hN extends Error{constructor(t,r){super(t),this.response=r}}class hF extends hO{constructor(t){super(t)}load(t,r,i,s){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);let u=hR.get(t);if(void 0!==u)return this.manager.itemStart(t),setTimeout(()=>{r&&r(u),this.manager.itemEnd(t)},0),u;if(void 0!==hB[t]){hB[t].push({onLoad:r,onProgress:i,onError:s});return}hB[t]=[],hB[t].push({onLoad:r,onProgress:i,onError:s});let c=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),h=this.mimeType,p=this.responseType;fetch(c).then(r=>{if(200===r.status||0===r.status){if(r.status,"undefined"==typeof ReadableStream||void 0===r.body||void 0===r.body.getReader)return r;let i=hB[t],s=r.body.getReader(),u=r.headers.get("X-File-Size")||r.headers.get("Content-Length"),c=u?parseInt(u):0,h=0!==c,p=0;return new Response(new ReadableStream({start(t){(function r(){s.read().then(({done:s,value:u})=>{if(s)t.close();else{let s=new ProgressEvent("progress",{lengthComputable:h,loaded:p+=u.byteLength,total:c});for(let t=0,r=i.length;t<r;t++){let r=i[t];r.onProgress&&r.onProgress(s)}t.enqueue(u),r()}},r=>{t.error(r)})})()}}))}throw new hN(`fetch for "${r.url}" responded with ${r.status}: ${r.statusText}`,r)}).then(t=>{switch(p){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then(t=>new DOMParser().parseFromString(t,h));case"json":return t.json();default:if(void 0===h)return t.text();{let r=/charset="?([^;"\s]*)"?/i.exec(h),i=new TextDecoder(r&&r[1]?r[1].toLowerCase():void 0);return t.arrayBuffer().then(t=>i.decode(t))}}}).then(r=>{hR.add(t,r);let i=hB[t];delete hB[t];for(let t=0,s=i.length;t<s;t++){let s=i[t];s.onLoad&&s.onLoad(r)}}).catch(r=>{let i=hB[t];if(void 0===i)throw this.manager.itemError(t),r;delete hB[t];for(let t=0,s=i.length;t<s;t++){let s=i[t];s.onError&&s.onError(r)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class hz extends hO{constructor(t){super(t)}load(t,r,i,s){let u=this,c=new hF(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,function(i){try{r(u.parse(JSON.parse(i)))}catch(r){s&&s(r),u.manager.itemError(t)}},i,s)}parse(t){let r=[];for(let i=0;i<t.length;i++){let s=hP.parse(t[i]);r.push(s)}return r}}class hU extends hO{constructor(t){super(t)}load(t,r,i,s){let u=this,c=[],h=new u5,p=new hF(this.manager);p.setPath(this.path),p.setResponseType("arraybuffer"),p.setRequestHeader(this.requestHeader),p.setWithCredentials(u.withCredentials);let f=0;if(Array.isArray(t))for(let v=0,y=t.length;v<y;++v)!function(v){p.load(t[v],function(t){let i=u.parse(t,!0);c[v]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},6===(f+=1)&&(1===i.mipmapCount&&(h.minFilter=tw),h.image=c,h.format=i.format,h.needsUpdate=!0,r&&r(h))},i,s)}(v);else p.load(t,function(t){let i=u.parse(t,!0);if(i.isCubemap){let t=i.mipmaps.length/i.mipmapCount;for(let r=0;r<t;r++){c[r]={mipmaps:[]};for(let t=0;t<i.mipmapCount;t++)c[r].mipmaps.push(i.mipmaps[r*i.mipmapCount+t]),c[r].format=i.format,c[r].width=i.width,c[r].height=i.height}h.image=c}else h.image.width=i.width,h.image.height=i.height,h.mipmaps=i.mipmaps;1===i.mipmapCount&&(h.minFilter=tw),h.format=i.format,h.needsUpdate=!0,r&&r(h)},i,s);return h}}class hH extends hO{constructor(t){super(t)}load(t,r,i,s){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);let u=this,c=hR.get(t);if(void 0!==c)return u.manager.itemStart(t),setTimeout(function(){r&&r(c),u.manager.itemEnd(t)},0),c;let h=rB("img");function p(){v(),hR.add(t,this),r&&r(this),u.manager.itemEnd(t)}function f(r){v(),s&&s(r),u.manager.itemError(t),u.manager.itemEnd(t)}function v(){h.removeEventListener("load",p,!1),h.removeEventListener("error",f,!1)}return h.addEventListener("load",p,!1),h.addEventListener("error",f,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(h.crossOrigin=this.crossOrigin),u.manager.itemStart(t),h.src=t,h}}class hG extends hO{constructor(t){super(t)}load(t,r,i,s){let u=new on;u.colorSpace=nH;let c=new hH(this.manager);c.setCrossOrigin(this.crossOrigin),c.setPath(this.path);let h=0;for(let i=0;i<t.length;++i)!function(i){c.load(t[i],function(t){u.images[i]=t,6==++h&&(u.needsUpdate=!0,r&&r(u))},void 0,s)}(i);return u}}class hV extends hO{constructor(t){super(t)}load(t,r,i,s){let u=this,c=new uo,h=new hF(this.manager);return h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setPath(this.path),h.setWithCredentials(u.withCredentials),h.load(t,function(t){let i;try{i=u.parse(t)}catch(t){if(void 0===s)return;s(t)}void 0!==i.image?c.image=i.image:void 0!==i.data&&(c.image.width=i.width,c.image.height=i.height,c.image.data=i.data),c.wrapS=void 0!==i.wrapS?i.wrapS:tg,c.wrapT=void 0!==i.wrapT?i.wrapT:tg,c.magFilter=void 0!==i.magFilter?i.magFilter:tw,c.minFilter=void 0!==i.minFilter?i.minFilter:tw,c.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.colorSpace&&(c.colorSpace=i.colorSpace),void 0!==i.flipY&&(c.flipY=i.flipY),void 0!==i.format&&(c.format=i.format),void 0!==i.type&&(c.type=i.type),void 0!==i.mipmaps&&(c.mipmaps=i.mipmaps,c.minFilter=tA),1===i.mipmapCount&&(c.minFilter=tw),void 0!==i.generateMipmaps&&(c.generateMipmaps=i.generateMipmaps),c.needsUpdate=!0,r&&r(c,i)},i,s),c}}class hW extends hO{constructor(t){super(t)}load(t,r,i,s){let u=new rQ,c=new hH(this.manager);return c.setCrossOrigin(this.crossOrigin),c.setPath(this.path),c.load(t,function(t){u.image=t,u.needsUpdate=!0,void 0!==r&&r(u)},i,s),u}}class hj extends i3{constructor(t,r=1){super(),this.isLight=!0,this.type="Light",this.color=new ad(t),this.intensity=r}dispose(){}copy(t,r){return super.copy(t,r),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){let r=super.toJSON(t);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,void 0!==this.groundColor&&(r.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(r.object.distance=this.distance),void 0!==this.angle&&(r.object.angle=this.angle),void 0!==this.decay&&(r.object.decay=this.decay),void 0!==this.penumbra&&(r.object.penumbra=this.penumbra),void 0!==this.shadow&&(r.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(r.object.target=this.target.uuid),r}}class hX extends hj{constructor(t,r,i){super(t,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(i3.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ad(r)}copy(t,r){return super.copy(t,r),this.groundColor.copy(t.groundColor),this}}let hY=new iD,h$=new r8,hJ=new r8;class hZ{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new rD(512,512),this.map=null,this.mapPass=null,this.matrix=new iD,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new oc,this._frameExtents=new rD(1,1),this._viewportCount=1,this._viewports=[new r0(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){let r=this.camera,i=this.matrix;h$.setFromMatrixPosition(t.matrixWorld),r.position.copy(h$),hJ.setFromMatrixPosition(t.target.matrixWorld),r.lookAt(hJ),r.updateMatrixWorld(),hY.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hY),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(hY)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let t={};return 1!==this.intensity&&(t.intensity=this.intensity),0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class hK extends hZ{constructor(){super(new oe(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){let r=this.camera,i=2*rw*t.angle*this.focus,s=this.mapSize.width/this.mapSize.height,u=t.distance||r.far;(i!==r.fov||s!==r.aspect||u!==r.far)&&(r.fov=i,r.aspect=s,r.far=u,r.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class hq extends hj{constructor(t,r,i=0,s=Math.PI/3,u=0,c=2){super(t,r),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(i3.DEFAULT_UP),this.updateMatrix(),this.target=new i3,this.distance=i,this.angle=s,this.penumbra=u,this.decay=c,this.map=null,this.shadow=new hK}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,r){return super.copy(t,r),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}let hQ=new iD,h0=new r8,h1=new r8;class h2 extends hZ{constructor(){super(new oe(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new rD(4,2),this._viewportCount=6,this._viewports=[new r0(2,1,1,1),new r0(0,1,1,1),new r0(3,1,1,1),new r0(1,1,1,1),new r0(3,0,1,1),new r0(1,0,1,1)],this._cubeDirections=[new r8(1,0,0),new r8(-1,0,0),new r8(0,0,1),new r8(0,0,-1),new r8(0,1,0),new r8(0,-1,0)],this._cubeUps=[new r8(0,1,0),new r8(0,1,0),new r8(0,1,0),new r8(0,1,0),new r8(0,0,1),new r8(0,0,-1)]}updateMatrices(t,r=0){let i=this.camera,s=this.matrix,u=t.distance||i.far;u!==i.far&&(i.far=u,i.updateProjectionMatrix()),h0.setFromMatrixPosition(t.matrixWorld),i.position.copy(h0),h1.copy(i.position),h1.add(this._cubeDirections[r]),i.up.copy(this._cubeUps[r]),i.lookAt(h1),i.updateMatrixWorld(),s.makeTranslation(-h0.x,-h0.y,-h0.z),hQ.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hQ)}}class h3 extends hj{constructor(t,r,i=0,s=2){super(t,r),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new h2}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,r){return super.copy(t,r),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class h5 extends hZ{constructor(){super(new oC(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class h4 extends hj{constructor(t,r){super(t,r),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(i3.DEFAULT_UP),this.updateMatrix(),this.target=new i3,this.shadow=new h5}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class h6 extends hj{constructor(t,r){super(t,r),this.isAmbientLight=!0,this.type="AmbientLight"}}class h9 extends hj{constructor(t,r,i=10,s=10){super(t,r),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){let r=super.toJSON(t);return r.object.width=this.width,r.object.height=this.height,r}}class h8{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new r8)}set(t){for(let r=0;r<9;r++)this.coefficients[r].copy(t[r]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,r){let i=t.x,s=t.y,u=t.z,c=this.coefficients;return r.copy(c[0]).multiplyScalar(.282095),r.addScaledVector(c[1],.488603*s),r.addScaledVector(c[2],.488603*u),r.addScaledVector(c[3],.488603*i),r.addScaledVector(c[4],i*s*1.092548),r.addScaledVector(c[5],s*u*1.092548),r.addScaledVector(c[6],.315392*(3*u*u-1)),r.addScaledVector(c[7],i*u*1.092548),r.addScaledVector(c[8],.546274*(i*i-s*s)),r}getIrradianceAt(t,r){let i=t.x,s=t.y,u=t.z,c=this.coefficients;return r.copy(c[0]).multiplyScalar(.886227),r.addScaledVector(c[1],1.023328*s),r.addScaledVector(c[2],1.023328*u),r.addScaledVector(c[3],1.023328*i),r.addScaledVector(c[4],.858086*i*s),r.addScaledVector(c[5],.858086*s*u),r.addScaledVector(c[6],.743125*u*u-.247708),r.addScaledVector(c[7],.858086*i*u),r.addScaledVector(c[8],.429043*(i*i-s*s)),r}add(t){for(let r=0;r<9;r++)this.coefficients[r].add(t.coefficients[r]);return this}addScaledSH(t,r){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],r);return this}scale(t){for(let r=0;r<9;r++)this.coefficients[r].multiplyScalar(t);return this}lerp(t,r){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],r);return this}equals(t){for(let r=0;r<9;r++)if(!this.coefficients[r].equals(t.coefficients[r]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,r=0){let i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(t,r+3*s);return this}toArray(t=[],r=0){let i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(t,r+3*s);return t}static getBasisAt(t,r){let i=t.x,s=t.y,u=t.z;r[0]=.282095,r[1]=.488603*s,r[2]=.488603*u,r[3]=.488603*i,r[4]=1.092548*i*s,r[5]=1.092548*s*u,r[6]=.315392*(3*u*u-1),r[7]=1.092548*i*u,r[8]=.546274*(i*i-s*s)}}class h7 extends hj{constructor(t=new h8,r=1){super(void 0,r),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){let r=super.toJSON(t);return r.object.sh=this.sh.toArray(),r}}class de extends hO{constructor(t){super(t),this.textures={}}load(t,r,i,s){let u=this,c=new hF(u.manager);c.setPath(u.path),c.setRequestHeader(u.requestHeader),c.setWithCredentials(u.withCredentials),c.load(t,function(i){try{r(u.parse(JSON.parse(i)))}catch(r){s&&s(r),u.manager.itemError(t)}},i,s)}parse(t){let r=this.textures;function i(t){return r[t],r[t]}let s=this.createMaterialFromType(t.type);if(void 0!==t.uuid&&(s.uuid=t.uuid),void 0!==t.name&&(s.name=t.name),void 0!==t.color&&void 0!==s.color&&s.color.setHex(t.color),void 0!==t.roughness&&(s.roughness=t.roughness),void 0!==t.metalness&&(s.metalness=t.metalness),void 0!==t.sheen&&(s.sheen=t.sheen),void 0!==t.sheenColor&&(s.sheenColor=new ad().setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(s.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==s.emissive&&s.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==s.specular&&s.specular.setHex(t.specular),void 0!==t.specularIntensity&&(s.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==s.specularColor&&s.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(s.shininess=t.shininess),void 0!==t.clearcoat&&(s.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(s.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.dispersion&&(s.dispersion=t.dispersion),void 0!==t.iridescence&&(s.iridescence=t.iridescence),void 0!==t.iridescenceIOR&&(s.iridescenceIOR=t.iridescenceIOR),void 0!==t.iridescenceThicknessRange&&(s.iridescenceThicknessRange=t.iridescenceThicknessRange),void 0!==t.transmission&&(s.transmission=t.transmission),void 0!==t.thickness&&(s.thickness=t.thickness),void 0!==t.attenuationDistance&&(s.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==s.attenuationColor&&s.attenuationColor.setHex(t.attenuationColor),void 0!==t.anisotropy&&(s.anisotropy=t.anisotropy),void 0!==t.anisotropyRotation&&(s.anisotropyRotation=t.anisotropyRotation),void 0!==t.fog&&(s.fog=t.fog),void 0!==t.flatShading&&(s.flatShading=t.flatShading),void 0!==t.blending&&(s.blending=t.blending),void 0!==t.combine&&(s.combine=t.combine),void 0!==t.side&&(s.side=t.side),void 0!==t.shadowSide&&(s.shadowSide=t.shadowSide),void 0!==t.opacity&&(s.opacity=t.opacity),void 0!==t.transparent&&(s.transparent=t.transparent),void 0!==t.alphaTest&&(s.alphaTest=t.alphaTest),void 0!==t.alphaHash&&(s.alphaHash=t.alphaHash),void 0!==t.depthFunc&&(s.depthFunc=t.depthFunc),void 0!==t.depthTest&&(s.depthTest=t.depthTest),void 0!==t.depthWrite&&(s.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(s.colorWrite=t.colorWrite),void 0!==t.blendSrc&&(s.blendSrc=t.blendSrc),void 0!==t.blendDst&&(s.blendDst=t.blendDst),void 0!==t.blendEquation&&(s.blendEquation=t.blendEquation),void 0!==t.blendSrcAlpha&&(s.blendSrcAlpha=t.blendSrcAlpha),void 0!==t.blendDstAlpha&&(s.blendDstAlpha=t.blendDstAlpha),void 0!==t.blendEquationAlpha&&(s.blendEquationAlpha=t.blendEquationAlpha),void 0!==t.blendColor&&void 0!==s.blendColor&&s.blendColor.setHex(t.blendColor),void 0!==t.blendAlpha&&(s.blendAlpha=t.blendAlpha),void 0!==t.stencilWriteMask&&(s.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(s.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(s.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(s.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(s.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(s.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(s.stencilZPass=t.stencilZPass),void 0!==t.stencilWrite&&(s.stencilWrite=t.stencilWrite),void 0!==t.wireframe&&(s.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(s.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(s.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(s.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(s.rotation=t.rotation),void 0!==t.linewidth&&(s.linewidth=t.linewidth),void 0!==t.dashSize&&(s.dashSize=t.dashSize),void 0!==t.gapSize&&(s.gapSize=t.gapSize),void 0!==t.scale&&(s.scale=t.scale),void 0!==t.polygonOffset&&(s.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(s.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(s.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(s.dithering=t.dithering),void 0!==t.alphaToCoverage&&(s.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(s.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.forceSinglePass&&(s.forceSinglePass=t.forceSinglePass),void 0!==t.visible&&(s.visible=t.visible),void 0!==t.toneMapped&&(s.toneMapped=t.toneMapped),void 0!==t.userData&&(s.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?s.vertexColors=t.vertexColors>0:s.vertexColors=t.vertexColors),void 0!==t.uniforms)for(let r in t.uniforms){let u=t.uniforms[r];switch(s.uniforms[r]={},u.type){case"t":s.uniforms[r].value=i(u.value);break;case"c":s.uniforms[r].value=new ad().setHex(u.value);break;case"v2":s.uniforms[r].value=new rD().fromArray(u.value);break;case"v3":s.uniforms[r].value=new r8().fromArray(u.value);break;case"v4":s.uniforms[r].value=new r0().fromArray(u.value);break;case"m3":s.uniforms[r].value=new rP().fromArray(u.value);break;case"m4":s.uniforms[r].value=new iD().fromArray(u.value);break;default:s.uniforms[r].value=u.value}}if(void 0!==t.defines&&(s.defines=t.defines),void 0!==t.vertexShader&&(s.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(s.fragmentShader=t.fragmentShader),void 0!==t.glslVersion&&(s.glslVersion=t.glslVersion),void 0!==t.extensions)for(let r in t.extensions)s.extensions[r]=t.extensions[r];if(void 0!==t.lights&&(s.lights=t.lights),void 0!==t.clipping&&(s.clipping=t.clipping),void 0!==t.size&&(s.size=t.size),void 0!==t.sizeAttenuation&&(s.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(s.map=i(t.map)),void 0!==t.matcap&&(s.matcap=i(t.matcap)),void 0!==t.alphaMap&&(s.alphaMap=i(t.alphaMap)),void 0!==t.bumpMap&&(s.bumpMap=i(t.bumpMap)),void 0!==t.bumpScale&&(s.bumpScale=t.bumpScale),void 0!==t.normalMap&&(s.normalMap=i(t.normalMap)),void 0!==t.normalMapType&&(s.normalMapType=t.normalMapType),void 0!==t.normalScale){let r=t.normalScale;!1===Array.isArray(r)&&(r=[r,r]),s.normalScale=new rD().fromArray(r)}return void 0!==t.displacementMap&&(s.displacementMap=i(t.displacementMap)),void 0!==t.displacementScale&&(s.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(s.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(s.roughnessMap=i(t.roughnessMap)),void 0!==t.metalnessMap&&(s.metalnessMap=i(t.metalnessMap)),void 0!==t.emissiveMap&&(s.emissiveMap=i(t.emissiveMap)),void 0!==t.emissiveIntensity&&(s.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(s.specularMap=i(t.specularMap)),void 0!==t.specularIntensityMap&&(s.specularIntensityMap=i(t.specularIntensityMap)),void 0!==t.specularColorMap&&(s.specularColorMap=i(t.specularColorMap)),void 0!==t.envMap&&(s.envMap=i(t.envMap)),void 0!==t.envMapRotation&&s.envMapRotation.fromArray(t.envMapRotation),void 0!==t.envMapIntensity&&(s.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(s.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(s.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(s.lightMap=i(t.lightMap)),void 0!==t.lightMapIntensity&&(s.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(s.aoMap=i(t.aoMap)),void 0!==t.aoMapIntensity&&(s.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(s.gradientMap=i(t.gradientMap)),void 0!==t.clearcoatMap&&(s.clearcoatMap=i(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(s.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(s.clearcoatNormalMap=i(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(s.clearcoatNormalScale=new rD().fromArray(t.clearcoatNormalScale)),void 0!==t.iridescenceMap&&(s.iridescenceMap=i(t.iridescenceMap)),void 0!==t.iridescenceThicknessMap&&(s.iridescenceThicknessMap=i(t.iridescenceThicknessMap)),void 0!==t.transmissionMap&&(s.transmissionMap=i(t.transmissionMap)),void 0!==t.thicknessMap&&(s.thicknessMap=i(t.thicknessMap)),void 0!==t.anisotropyMap&&(s.anisotropyMap=i(t.anisotropyMap)),void 0!==t.sheenColorMap&&(s.sheenColorMap=i(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(s.sheenRoughnessMap=i(t.sheenRoughnessMap)),s}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return de.createMaterialFromType(t)}static createMaterialFromType(t){return new({ShadowMaterial:hr,SpriteMaterial:lH,RawShaderMaterial:hi,ShaderMaterial:a4,PointsMaterial:uJ,MeshPhysicalMaterial:ho,MeshStandardMaterial:ha,MeshPhongMaterial:hs,MeshToonMaterial:hl,MeshNormalMaterial:hu,MeshLambertMaterial:hc,MeshDepthMaterial:lp,MeshDistanceMaterial:lf,MeshBasicMaterial:am,MeshMatcapMaterial:hh,LineDashedMaterial:hd,LineBasicMaterial:uO,Material:ag})[t]}}class dt{static decodeText(t){if("undefined"!=typeof TextDecoder)return new TextDecoder().decode(t);let r="";for(let i=0,s=t.length;i<s;i++)r+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(r))}catch(t){return r}}static extractUrlBase(t){let r=t.lastIndexOf("/");return -1===r?"./":t.slice(0,r+1)}static resolveURL(t,r){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(r)&&/^\//.test(t)&&(r=r.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t))?t:r+t}}class dn extends aU{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){let t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class dr extends hO{constructor(t){super(t)}load(t,r,i,s){let u=this,c=new hF(u.manager);c.setPath(u.path),c.setRequestHeader(u.requestHeader),c.setWithCredentials(u.withCredentials),c.load(t,function(i){try{r(u.parse(JSON.parse(i)))}catch(r){s&&s(r),u.manager.itemError(t)}},i,s)}parse(t){let r={},i={};function s(t,s){if(void 0!==r[s])return r[s];let u=t.interleavedBuffers[s],c=function(t,r){if(void 0!==i[r])return i[r];let s=new Uint32Array(t.arrayBuffers[r]).buffer;return i[r]=s,s}(t,u.buffer),h=new lF(rO(u.type,c),u.stride);return h.uuid=u.uuid,r[s]=h,h}let u=t.isInstancedBufferGeometry?new dn:new aU,c=t.data.index;if(void 0!==c){let t=rO(c.type,c.array);u.setIndex(new aS(t,1))}let h=t.data.attributes;for(let r in h){let i;let c=h[r];if(c.isInterleavedBufferAttribute)i=new lU(s(t.data,c.data),c.itemSize,c.offset,c.normalized);else{let t=rO(c.type,c.array);i=new(c.isInstancedBufferAttribute?uc:aS)(t,c.itemSize,c.normalized)}void 0!==c.name&&(i.name=c.name),void 0!==c.usage&&i.setUsage(c.usage),u.setAttribute(r,i)}let p=t.data.morphAttributes;if(p)for(let r in p){let i=p[r],c=[];for(let r=0,u=i.length;r<u;r++){let u;let h=i[r];u=h.isInterleavedBufferAttribute?new lU(s(t.data,h.data),h.itemSize,h.offset,h.normalized):new aS(rO(h.type,h.array),h.itemSize,h.normalized),void 0!==h.name&&(u.name=h.name),c.push(u)}u.morphAttributes[r]=c}t.data.morphTargetsRelative&&(u.morphTargetsRelative=!0);let f=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==f)for(let t=0,r=f.length;t!==r;++t){let r=f[t];u.addGroup(r.start,r.count,r.materialIndex)}let v=t.data.boundingSphere;if(void 0!==v){let t=new r8;void 0!==v.center&&t.fromArray(v.center),u.boundingSphere=new ib(t,v.radius)}return t.name&&(u.name=t.name),t.userData&&(u.userData=t.userData),u}}class di extends hO{constructor(t){super(t)}load(t,r,i,s){let u=this,c=""===this.path?dt.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||c;let h=new hF(this.manager);h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(t,function(i){let c=null;try{c=JSON.parse(i)}catch(t){void 0!==s&&s(t);return}let h=c.metadata;if(void 0===h||void 0===h.type||"geometry"===h.type.toLowerCase()){void 0!==s&&s(Error("THREE.ObjectLoader: Can't load "+t));return}u.parse(c,r)},i,s)}async loadAsync(t,r){let i=""===this.path?dt.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||i;let s=new hF(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);let u=JSON.parse(await s.loadAsync(t,r)),c=u.metadata;if(void 0===c||void 0===c.type||"geometry"===c.type.toLowerCase())throw Error("THREE.ObjectLoader: Can't load "+t);return await this.parseAsync(u)}parse(t,r){let i=this.parseAnimations(t.animations),s=this.parseShapes(t.shapes),u=this.parseGeometries(t.geometries,s),c=this.parseImages(t.images,function(){void 0!==r&&r(f)}),h=this.parseTextures(t.textures,c),p=this.parseMaterials(t.materials,h),f=this.parseObject(t.object,u,p,h,i),v=this.parseSkeletons(t.skeletons,f);if(this.bindSkeletons(f,v),this.bindLightTargets(f),void 0!==r){let t=!1;for(let r in c)if(c[r].data instanceof HTMLImageElement){t=!0;break}!1===t&&r(f)}return f}async parseAsync(t){let r=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),s=this.parseGeometries(t.geometries,i),u=await this.parseImagesAsync(t.images),c=this.parseTextures(t.textures,u),h=this.parseMaterials(t.materials,c),p=this.parseObject(t.object,s,h,c,r),f=this.parseSkeletons(t.skeletons,p);return this.bindSkeletons(p,f),this.bindLightTargets(p),p}parseShapes(t){let r={};if(void 0!==t)for(let i=0,s=t.length;i<s;i++){let s=new cR().fromJSON(t[i]);r[s.uuid]=s}return r}parseSkeletons(t,r){let i={},s={};if(r.traverse(function(t){t.isBone&&(s[t.uuid]=t)}),void 0!==t)for(let r=0,u=t.length;r<u;r++){let u=new uu().fromJSON(t[r],s);i[u.uuid]=u}return i}parseGeometries(t,r){let i={};if(void 0!==t){let s=new dr;for(let u=0,c=t.length;u<c;u++){let c;let h=t[u];switch(h.type){case"BufferGeometry":case"InstancedBufferGeometry":c=s.parse(h);break;default:h.type in hn&&(c=hn[h.type].fromJSON(h,r))}c.uuid=h.uuid,void 0!==h.name&&(c.name=h.name),void 0!==h.userData&&(c.userData=h.userData),i[h.uuid]=c}}return i}parseMaterials(t,r){let i={},s={};if(void 0!==t){let u=new de;u.setTextures(r);for(let r=0,c=t.length;r<c;r++){let c=t[r];void 0===i[c.uuid]&&(i[c.uuid]=u.parse(c)),s[c.uuid]=i[c.uuid]}}return s}parseAnimations(t){let r={};if(void 0!==t)for(let i=0;i<t.length;i++){let s=t[i],u=hP.parse(s);r[u.uuid]=u}return r}parseImages(t,r){let i;let s=this,u={};function c(t){if("string"==typeof t){var r;return r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:s.resourcePath+t,s.manager.itemStart(r),i.load(r,function(){s.manager.itemEnd(r)},void 0,function(){s.manager.itemError(r),s.manager.itemEnd(r)})}return t.data?{data:rO(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){(i=new hH(new hL(r))).setCrossOrigin(this.crossOrigin);for(let r=0,i=t.length;r<i;r++){let i=t[r],s=i.url;if(Array.isArray(s)){let t=[];for(let r=0,i=s.length;r<i;r++){let i=c(s[r]);null!==i&&(i instanceof HTMLImageElement?t.push(i):t.push(new uo(i.data,i.width,i.height)))}u[i.uuid]=new rZ(t)}else{let t=c(i.url);u[i.uuid]=new rZ(t)}}}return u}async parseImagesAsync(t){let r;let i=this,s={};async function u(t){if("string"==typeof t){let s=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:i.resourcePath+t;return await r.loadAsync(s)}return t.data?{data:rO(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){(r=new hH(this.manager)).setCrossOrigin(this.crossOrigin);for(let r=0,i=t.length;r<i;r++){let i=t[r],c=i.url;if(Array.isArray(c)){let t=[];for(let r=0,i=c.length;r<i;r++){let i=c[r],s=await u(i);null!==s&&(s instanceof HTMLImageElement?t.push(s):t.push(new uo(s.data,s.width,s.height)))}s[i.uuid]=new rZ(t)}else{let t=await u(i.url);s[i.uuid]=new rZ(t)}}}return s}parseTextures(t,r){function i(t,r){return"number"==typeof t?t:r[t]}let s={};if(void 0!==t)for(let u=0,c=t.length;u<c;u++){let c;let h=t[u];h.image,r[h.image];let p=r[h.image],f=p.data;Array.isArray(f)?(c=new on,6===f.length&&(c.needsUpdate=!0)):(c=f&&f.data?new uo:new rQ,f&&(c.needsUpdate=!0)),c.source=p,c.uuid=h.uuid,void 0!==h.name&&(c.name=h.name),void 0!==h.mapping&&(c.mapping=i(h.mapping,da)),void 0!==h.channel&&(c.channel=h.channel),void 0!==h.offset&&c.offset.fromArray(h.offset),void 0!==h.repeat&&c.repeat.fromArray(h.repeat),void 0!==h.center&&c.center.fromArray(h.center),void 0!==h.rotation&&(c.rotation=h.rotation),void 0!==h.wrap&&(c.wrapS=i(h.wrap[0],ds),c.wrapT=i(h.wrap[1],ds)),void 0!==h.format&&(c.format=h.format),void 0!==h.internalFormat&&(c.internalFormat=h.internalFormat),void 0!==h.type&&(c.type=h.type),void 0!==h.colorSpace&&(c.colorSpace=h.colorSpace),void 0!==h.minFilter&&(c.minFilter=i(h.minFilter,dl)),void 0!==h.magFilter&&(c.magFilter=i(h.magFilter,dl)),void 0!==h.anisotropy&&(c.anisotropy=h.anisotropy),void 0!==h.flipY&&(c.flipY=h.flipY),void 0!==h.generateMipmaps&&(c.generateMipmaps=h.generateMipmaps),void 0!==h.premultiplyAlpha&&(c.premultiplyAlpha=h.premultiplyAlpha),void 0!==h.unpackAlignment&&(c.unpackAlignment=h.unpackAlignment),void 0!==h.compareFunction&&(c.compareFunction=h.compareFunction),void 0!==h.userData&&(c.userData=h.userData),s[h.uuid]=c}return s}parseObject(t,r,i,s,u){let c,h,p;function f(t){return r[t],r[t]}function v(t){if(void 0!==t){if(Array.isArray(t)){let r=[];for(let s=0,u=t.length;s<u;s++){let u=t[s];i[u],r.push(i[u])}return r}return i[t],i[t]}}function y(t){return s[t],s[t]}switch(t.type){case"Scene":c=new lN,void 0!==t.background&&(Number.isInteger(t.background)?c.background=new ad(t.background):c.background=y(t.background)),void 0!==t.environment&&(c.environment=y(t.environment)),void 0!==t.fog&&("Fog"===t.fog.type?c.fog=new lB(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(c.fog=new lO(t.fog.color,t.fog.density)),""!==t.fog.name&&(c.fog.name=t.fog.name)),void 0!==t.backgroundBlurriness&&(c.backgroundBlurriness=t.backgroundBlurriness),void 0!==t.backgroundIntensity&&(c.backgroundIntensity=t.backgroundIntensity),void 0!==t.backgroundRotation&&c.backgroundRotation.fromArray(t.backgroundRotation),void 0!==t.environmentIntensity&&(c.environmentIntensity=t.environmentIntensity),void 0!==t.environmentRotation&&c.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":c=new oe(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(c.focus=t.focus),void 0!==t.zoom&&(c.zoom=t.zoom),void 0!==t.filmGauge&&(c.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(c.filmOffset=t.filmOffset),void 0!==t.view&&(c.view=Object.assign({},t.view));break;case"OrthographicCamera":c=new oC(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(c.zoom=t.zoom),void 0!==t.view&&(c.view=Object.assign({},t.view));break;case"AmbientLight":c=new h6(t.color,t.intensity);break;case"DirectionalLight":(c=new h4(t.color,t.intensity)).target=t.target||"";break;case"PointLight":c=new h3(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":c=new h9(t.color,t.intensity,t.width,t.height);break;case"SpotLight":(c=new hq(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay)).target=t.target||"";break;case"HemisphereLight":c=new hX(t.color,t.groundColor,t.intensity);break;case"LightProbe":c=new h7().fromJSON(t);break;case"SkinnedMesh":h=f(t.geometry),c=new ui(h,p=v(t.material)),void 0!==t.bindMode&&(c.bindMode=t.bindMode),void 0!==t.bindMatrix&&c.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(c.skeleton=t.skeleton);break;case"Mesh":h=f(t.geometry),c=new aq(h,p=v(t.material));break;case"InstancedMesh":h=f(t.geometry),p=v(t.material);let x=t.count,_=t.instanceMatrix,b=t.instanceColor;(c=new uy(h,p,x)).instanceMatrix=new uc(new Float32Array(_.array),16),void 0!==b&&(c.instanceColor=new uc(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":h=f(t.geometry),p=v(t.material),(c=new uk(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,p)).geometry=h,c.perObjectFrustumCulled=t.perObjectFrustumCulled,c.sortObjects=t.sortObjects,c._drawRanges=t.drawRanges,c._reservedRanges=t.reservedRanges,c._visibility=t.visibility,c._active=t.active,c._bounds=t.bounds.map(t=>{let r=new it;r.min.fromArray(t.boxMin),r.max.fromArray(t.boxMax);let i=new ib;return i.radius=t.sphereRadius,i.center.fromArray(t.sphereCenter),{boxInitialized:t.boxInitialized,box:r,sphereInitialized:t.sphereInitialized,sphere:i}}),c._maxInstanceCount=t.maxInstanceCount,c._maxVertexCount=t.maxVertexCount,c._maxIndexCount=t.maxIndexCount,c._geometryInitialized=t.geometryInitialized,c._geometryCount=t.geometryCount,c._matricesTexture=y(t.matricesTexture.uuid),void 0!==t.colorsTexture&&(c._colorsTexture=y(t.colorsTexture.uuid));break;case"LOD":c=new l5;break;case"Line":c=new uV(f(t.geometry),v(t.material));break;case"LineLoop":c=new u$(f(t.geometry),v(t.material));break;case"LineSegments":c=new uY(f(t.geometry),v(t.material));break;case"PointCloud":case"Points":c=new u0(f(t.geometry),v(t.material));break;case"Sprite":c=new l0(v(t.material));break;case"Group":c=new lS;break;case"Bone":c=new ua;break;default:c=new i3}if(c.uuid=t.uuid,void 0!==t.name&&(c.name=t.name),void 0!==t.matrix?(c.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(c.matrixAutoUpdate=t.matrixAutoUpdate),c.matrixAutoUpdate&&c.matrix.decompose(c.position,c.quaternion,c.scale)):(void 0!==t.position&&c.position.fromArray(t.position),void 0!==t.rotation&&c.rotation.fromArray(t.rotation),void 0!==t.quaternion&&c.quaternion.fromArray(t.quaternion),void 0!==t.scale&&c.scale.fromArray(t.scale)),void 0!==t.up&&c.up.fromArray(t.up),void 0!==t.castShadow&&(c.castShadow=t.castShadow),void 0!==t.receiveShadow&&(c.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.intensity&&(c.shadow.intensity=t.shadow.intensity),void 0!==t.shadow.bias&&(c.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(c.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(c.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&c.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(c.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(c.visible=t.visible),void 0!==t.frustumCulled&&(c.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(c.renderOrder=t.renderOrder),void 0!==t.userData&&(c.userData=t.userData),void 0!==t.layers&&(c.layers.mask=t.layers),void 0!==t.children){let h=t.children;for(let t=0;t<h.length;t++)c.add(this.parseObject(h[t],r,i,s,u))}if(void 0!==t.animations){let r=t.animations;for(let t=0;t<r.length;t++){let i=r[t];c.animations.push(u[i])}}if("LOD"===t.type){void 0!==t.autoUpdate&&(c.autoUpdate=t.autoUpdate);let r=t.levels;for(let t=0;t<r.length;t++){let i=r[t],s=c.getObjectByProperty("uuid",i.object);void 0!==s&&c.addLevel(s,i.distance,i.hysteresis)}}return c}bindSkeletons(t,r){0!==Object.keys(r).length&&t.traverse(function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){let i=r[t.skeleton];void 0===i||t.bind(i,t.bindMatrix)}})}bindLightTargets(t){t.traverse(function(r){if(r.isDirectionalLight||r.isSpotLight){let i=r.target,s=t.getObjectByProperty("uuid",i);void 0!==s?r.target=s:r.target=new i3}})}}let da={UVMapping:tl,CubeReflectionMapping:tu,CubeRefractionMapping:tc,EquirectangularReflectionMapping:th,EquirectangularRefractionMapping:td,CubeUVReflectionMapping:tp},ds={RepeatWrapping:tf,ClampToEdgeWrapping:tg,MirroredRepeatWrapping:tm},dl={NearestFilter:tv,NearestMipmapNearestFilter:ty,NearestMipmapLinearFilter:t_,LinearFilter:tw,LinearMipmapNearestFilter:tS,LinearMipmapLinearFilter:tA};class du extends hO{constructor(t){super(t),this.isImageBitmapLoader=!0,this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,r,i,s){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);let u=this,c=hR.get(t);if(void 0!==c){if(u.manager.itemStart(t),c.then){c.then(i=>{r&&r(i),u.manager.itemEnd(t)}).catch(t=>{s&&s(t)});return}return setTimeout(function(){r&&r(c),u.manager.itemEnd(t)},0),c}let h={};h.credentials="anonymous"===this.crossOrigin?"same-origin":"include",h.headers=this.requestHeader;let p=fetch(t,h).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,Object.assign(u.options,{colorSpaceConversion:"none"}))}).then(function(i){return hR.add(t,i),r&&r(i),u.manager.itemEnd(t),i}).catch(function(r){s&&s(r),hR.remove(t),u.manager.itemError(t),u.manager.itemEnd(t)});hR.add(t,p),u.manager.itemStart(t)}}class dc{static getContext(){return void 0===u&&(u=new(window.AudioContext||window.webkitAudioContext)),u}static setContext(t){u=t}}class dh extends hO{constructor(t){super(t)}load(t,r,i,s){let u=this,c=new hF(this.manager);function h(r){s&&s(r),u.manager.itemError(t)}c.setResponseType("arraybuffer"),c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,function(t){try{let i=t.slice(0);dc.getContext().decodeAudioData(i,function(t){r(t)}).catch(h)}catch(t){h(t)}},i,s)}}let dd=new iD,dp=new iD,df=new iD;class dg{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new oe,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new oe,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){let r=this._cache;if(r.focus!==t.focus||r.fov!==t.fov||r.aspect!==t.aspect*this.aspect||r.near!==t.near||r.far!==t.far||r.zoom!==t.zoom||r.eyeSep!==this.eyeSep){let i,s;r.focus=t.focus,r.fov=t.fov,r.aspect=t.aspect*this.aspect,r.near=t.near,r.far=t.far,r.zoom=t.zoom,r.eyeSep=this.eyeSep,df.copy(t.projectionMatrix);let u=r.eyeSep/2,c=u*r.near/r.focus,h=r.near*Math.tan(rb*r.fov*.5)/r.zoom;dp.elements[12]=-u,dd.elements[12]=u,i=-h*r.aspect+c,s=h*r.aspect+c,df.elements[0]=2*r.near/(s-i),df.elements[8]=(s+i)/(s-i),this.cameraL.projectionMatrix.copy(df),i=-h*r.aspect-c,s=h*r.aspect-c,df.elements[0]=2*r.near/(s-i),df.elements[8]=(s+i)/(s-i),this.cameraR.projectionMatrix.copy(df)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(dp),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(dd)}}class dm{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=dv(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let r=dv();t=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=t}return t}}function dv(){return performance.now()}let dy=new r8,dx=new r9,d_=new r8,db=new r8;class dw extends i3{constructor(){super(),this.type="AudioListener",this.context=dc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new dm}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);let r=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(dy,dx,d_),db.set(0,0,-1).applyQuaternion(dx),r.positionX){let t=this.context.currentTime+this.timeDelta;r.positionX.linearRampToValueAtTime(dy.x,t),r.positionY.linearRampToValueAtTime(dy.y,t),r.positionZ.linearRampToValueAtTime(dy.z,t),r.forwardX.linearRampToValueAtTime(db.x,t),r.forwardY.linearRampToValueAtTime(db.y,t),r.forwardZ.linearRampToValueAtTime(db.z,t),r.upX.linearRampToValueAtTime(i.x,t),r.upY.linearRampToValueAtTime(i.y,t),r.upZ.linearRampToValueAtTime(i.z,t)}else r.setPosition(dy.x,dy.y,dy.z),r.setOrientation(db.x,db.y,db.z,i.x,i.y,i.z)}}class dS extends i3{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying||!1===this.hasPlaybackControl)return;this._startedAt=this.context.currentTime+t;let r=this.context.createBufferSource();return r.buffer=this.buffer,r.loop=this.loop,r.loopStart=this.loopStart,r.loopEnd=this.loopEnd,r.onended=this.onEnded.bind(this),r.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=r,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,r=this.filters.length;t<r;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,r=this.filters.length;t<r;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return!t&&(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1!==this.hasPlaybackControl&&this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}let dM=new r8,dA=new r9,dC=new r8,dT=new r8;class dE extends dS{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,r,i){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=r,this.panner.coneOuterGain=i,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(dM,dA,dC),dT.set(0,0,1).applyQuaternion(dA);let r=this.panner;if(r.positionX){let t=this.context.currentTime+this.listener.timeDelta;r.positionX.linearRampToValueAtTime(dM.x,t),r.positionY.linearRampToValueAtTime(dM.y,t),r.positionZ.linearRampToValueAtTime(dM.z,t),r.orientationX.linearRampToValueAtTime(dT.x,t),r.orientationY.linearRampToValueAtTime(dT.y,t),r.orientationZ.linearRampToValueAtTime(dT.z,t)}else r.setPosition(dM.x,dM.y,dM.z),r.setOrientation(dT.x,dT.y,dT.z)}}class dI{constructor(t,r=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=r,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0,r=this.getFrequencyData();for(let i=0;i<r.length;i++)t+=r[i];return t/r.length}}class dD{constructor(t,r,i){let s,u,c;switch(this.binding=t,this.valueSize=i,r){case"quaternion":s=this._slerp,u=this._slerpAdditive,c=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":s=this._select,u=this._select,c=this._setAdditiveIdentityOther,this.buffer=Array(5*i);break;default:s=this._lerp,u=this._lerpAdditive,c=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=u,this._setIdentity=c,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,r){let i=this.buffer,s=this.valueSize,u=t*s+s,c=this.cumulativeWeight;if(0===c){for(let t=0;t!==s;++t)i[u+t]=i[t];c=r}else{c+=r;let t=r/c;this._mixBufferRegion(i,u,0,t,s)}this.cumulativeWeight=c}accumulateAdditive(t){let r=this.buffer,i=this.valueSize,s=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(r,s,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){let r=this.valueSize,i=this.buffer,s=t*r+r,u=this.cumulativeWeight,c=this.cumulativeWeightAdditive,h=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,u<1){let t=r*this._origIndex;this._mixBufferRegion(i,s,t,1-u,r)}c>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*r,1,r);for(let t=r,u=r+r;t!==u;++t)if(i[t]!==i[t+r]){h.setValue(i,s);break}}saveOriginalState(){let t=this.binding,r=this.buffer,i=this.valueSize,s=i*this._origIndex;t.getValue(r,s);for(let t=i;t!==s;++t)r[t]=r[s+t%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){let t=this._addIndex*this.valueSize,r=t+this.valueSize;for(let i=t;i<r;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let t=this._origIndex*this.valueSize,r=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[r+i]=this.buffer[t+i]}_select(t,r,i,s,u){if(s>=.5)for(let s=0;s!==u;++s)t[r+s]=t[i+s]}_slerp(t,r,i,s){r9.slerpFlat(t,r,t,r,t,i,s)}_slerpAdditive(t,r,i,s,u){let c=this._workIndex*u;r9.multiplyQuaternionsFlat(t,c,t,r,t,i),r9.slerpFlat(t,r,t,r,t,c,s)}_lerp(t,r,i,s,u){let c=1-s;for(let h=0;h!==u;++h){let u=r+h;t[u]=t[u]*c+t[i+h]*s}}_lerpAdditive(t,r,i,s,u){for(let c=0;c!==u;++c){let u=r+c;t[u]=t[u]+t[i+c]*s}}}let dP="\\[\\]\\.:\\/",dR=RegExp("["+dP+"]","g"),dL="[^"+dP+"]",dk="[^"+dP.replace("\\.","")+"]",dO=/((?:WC+[\/:])*)/.source.replace("WC",dL),dB=/(WCOD+)?/.source.replace("WCOD",dk),dN=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",dL),dF=RegExp("^"+dO+dB+dN+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",dL)+"$"),dz=["material","materials","bones","map"];class dU{constructor(t,r,i){this.path=r,this.parsedPath=i||dU.parseTrackName(r),this.node=dU.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,i){return t&&t.isAnimationObjectGroup?new dU.Composite(t,r,i):new dU(t,r,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(dR,"")}static parseTrackName(t){let r=dF.exec(t);if(null===r)throw Error("PropertyBinding: Cannot parse trackName: "+t);let i={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){let t=i.nodeName.substring(s+1);-1!==dz.indexOf(t)&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=t)}if(null===i.propertyName||0===i.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,r){if(void 0===r||""===r||"."===r||-1===r||r===t.name||r===t.uuid)return t;if(t.skeleton){let i=t.skeleton.getBoneByName(r);if(void 0!==i)return i}if(t.children){let i=function(t){for(let s=0;s<t.length;s++){let u=t[s];if(u.name===r||u.uuid===r)return u;let c=i(u.children);if(c)return c}return null},s=i(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){let i=this.resolvedProperty;for(let s=0,u=i.length;s!==u;++s)t[r++]=i[s]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){let i=this.resolvedProperty;for(let s=0,u=i.length;s!==u;++s)i[s]=t[r++]}_setValue_array_setNeedsUpdate(t,r){let i=this.resolvedProperty;for(let s=0,u=i.length;s!==u;++s)i[s]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){let i=this.resolvedProperty;for(let s=0,u=i.length;s!==u;++s)i[s]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node,r=this.parsedPath,i=r.objectName,s=r.propertyName,u=r.propertyIndex;if(!t&&(t=dU.findNode(this.rootNode,r.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return;if(i){let s=r.objectIndex;switch(i){case"materials":if(!t.material||!t.material.materials)return;t=t.material.materials;break;case"bones":if(!t.skeleton)return;t=t.skeleton.bones;for(let r=0;r<t.length;r++)if(t[r].name===s){s=r;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material||!t.material.map)return;t=t.material.map;break;default:if(void 0===t[i])return;t=t[i]}if(void 0!==s){if(void 0===t[s])return;t=t[s]}}let c=t[s];if(void 0===c){r.nodeName;return}let h=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?h=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(h=this.Versioning.MatrixWorldNeedsUpdate);let p=this.BindingType.Direct;if(void 0!==u){if("morphTargetInfluences"===s){if(!t.geometry||!t.geometry.morphAttributes)return;void 0!==t.morphTargetDictionary[u]&&(u=t.morphTargetDictionary[u])}p=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=u}else void 0!==c.fromArray&&void 0!==c.toArray?(p=this.BindingType.HasFromToArray,this.resolvedProperty=c):Array.isArray(c)?(p=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=s;this.getValue=this.GetterByBindingType[p],this.setValue=this.SetterByBindingTypeAndVersioning[p][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}dU.Composite=class t{constructor(t,r,i){let s=i||dU.parseTrackName(r);this._targetGroup=t,this._bindings=t.subscribe_(r,s)}getValue(t,r){this.bind();let i=this._targetGroup.nCachedObjects_,s=this._bindings[i];void 0!==s&&s.getValue(t,r)}setValue(t,r){let i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,u=i.length;s!==u;++s)i[s].setValue(t,r)}bind(){let t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=t.length;r!==i;++r)t[r].bind()}unbind(){let t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=t.length;r!==i;++r)t[r].unbind()}},dU.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},dU.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},dU.prototype.GetterByBindingType=[dU.prototype._getValue_direct,dU.prototype._getValue_array,dU.prototype._getValue_arrayElement,dU.prototype._getValue_toArray],dU.prototype.SetterByBindingTypeAndVersioning=[[dU.prototype._setValue_direct,dU.prototype._setValue_direct_setNeedsUpdate,dU.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[dU.prototype._setValue_array,dU.prototype._setValue_array_setNeedsUpdate,dU.prototype._setValue_array_setMatrixWorldNeedsUpdate],[dU.prototype._setValue_arrayElement,dU.prototype._setValue_arrayElement_setNeedsUpdate,dU.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[dU.prototype._setValue_fromArray,dU.prototype._setValue_fromArray_setNeedsUpdate,dU.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class dH{constructor(){this.isAnimationObjectGroup=!0,this.uuid=rS(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;let t={};this._indicesByUUID=t;for(let r=0,i=arguments.length;r!==i;++r)t[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};let r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}add(){let t=this._objects,r=this._indicesByUUID,i=this._paths,s=this._parsedPaths,u=this._bindings,c=u.length,h,p=t.length,f=this.nCachedObjects_;for(let v=0,y=arguments.length;v!==y;++v){let y=arguments[v],x=y.uuid,_=r[x];if(void 0===_){_=p++,r[x]=_,t.push(y);for(let t=0;t!==c;++t)u[t].push(new dU(y,i[t],s[t]))}else if(_<f){h=t[_];let p=--f,v=t[p];r[v.uuid]=_,t[_]=v,r[x]=p,t[p]=y;for(let t=0;t!==c;++t){let r=u[t],c=r[p],h=r[_];r[_]=c,void 0===h&&(h=new dU(y,i[t],s[t])),r[p]=h}}else t[_]}this.nCachedObjects_=f}remove(){let t=this._objects,r=this._indicesByUUID,i=this._bindings,s=i.length,u=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){let h=arguments[c],p=h.uuid,f=r[p];if(void 0!==f&&f>=u){let c=u++,v=t[c];r[v.uuid]=f,t[f]=v,r[p]=c,t[c]=h;for(let t=0;t!==s;++t){let r=i[t],s=r[c],u=r[f];r[f]=s,r[c]=u}}}this.nCachedObjects_=u}uncache(){let t=this._objects,r=this._indicesByUUID,i=this._bindings,s=i.length,u=this.nCachedObjects_,c=t.length;for(let h=0,p=arguments.length;h!==p;++h){let p=arguments[h],f=p.uuid,v=r[f];if(void 0!==v){if(delete r[f],v<u){let h=--u,p=t[h],f=--c,y=t[f];r[p.uuid]=v,t[v]=p,r[y.uuid]=h,t[h]=y,t.pop();for(let t=0;t!==s;++t){let r=i[t],s=r[h],u=r[f];r[v]=s,r[h]=u,r.pop()}}else{let u=--c,h=t[u];u>0&&(r[h.uuid]=v),t[v]=h,t.pop();for(let t=0;t!==s;++t){let r=i[t];r[v]=r[u],r.pop()}}}}this.nCachedObjects_=u}subscribe_(t,r){let i=this._bindingsIndicesByPath,s=i[t],u=this._bindings;if(void 0!==s)return u[s];let c=this._paths,h=this._parsedPaths,p=this._objects,f=p.length,v=this.nCachedObjects_,y=Array(f);s=u.length,i[t]=s,c.push(t),h.push(r),u.push(y);for(let i=v,s=p.length;i!==s;++i){let s=p[i];y[i]=new dU(s,t,r)}return y}unsubscribe_(t){let r=this._bindingsIndicesByPath,i=r[t];if(void 0!==i){let s=this._paths,u=this._parsedPaths,c=this._bindings,h=c.length-1,p=c[h];r[t[h]]=i,c[i]=p,c.pop(),u[i]=u[h],u.pop(),s[i]=s[h],s.pop()}}}class dG{constructor(t,r,i=null,s=r.blendMode){this._mixer=t,this._clip=r,this._localRoot=i,this.blendMode=s;let u=r.tracks,c=u.length,h=Array(c),p={endingStart:nC,endingEnd:nC};for(let t=0;t!==c;++t){let r=u[t].createInterpolant(null);h[t]=r,r.settings=p}this._interpolantSettings=p,this._interpolants=h,this._propertyBindings=Array(c),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=nb,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,r){return this.loop=t,this.repetitions=r,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,r,i){if(t.fadeOut(r),this.fadeIn(r),i){let i=this._clip.duration,s=t._clip.duration;t.warp(1,s/i,r),this.warp(i/s,1,r)}return this}crossFadeTo(t,r,i){return t.crossFadeFrom(this,r,i)}stopFading(){let t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,r,i){let s=this._mixer,u=s.time,c=this.timeScale,h=this._timeScaleInterpolant;null===h&&(h=s._lendControlInterpolant(),this._timeScaleInterpolant=h);let p=h.parameterPositions,f=h.sampleValues;return p[0]=u,p[1]=u+i,f[0]=t/c,f[1]=r/c,this}stopWarping(){let t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,r,i,s){if(!this.enabled){this._updateWeight(t);return}let u=this._startTime;if(null!==u){let s=(t-u)*i;s<0||0===i?r=0:(this._startTime=null,r=i*s)}r*=this._updateTimeScale(t);let c=this._updateTime(r),h=this._updateWeight(t);if(h>0){let t=this._interpolants,r=this._propertyBindings;if(this.blendMode===nD)for(let i=0,s=t.length;i!==s;++i)t[i].evaluate(c),r[i].accumulateAdditive(h);else for(let i=0,u=t.length;i!==u;++i)t[i].evaluate(c),r[i].accumulate(s,h)}}_updateWeight(t){let r=0;if(this.enabled){r=this.weight;let i=this._weightInterpolant;if(null!==i){let s=i.evaluate(t)[0];r*=s,t>i.parameterPositions[1]&&(this.stopFading(),0===s&&(this.enabled=!1))}}return this._effectiveWeight=r,r}_updateTimeScale(t){let r=0;if(!this.paused){r=this.timeScale;let i=this._timeScaleInterpolant;null!==i&&(r*=i.evaluate(t)[0],t>i.parameterPositions[1]&&(this.stopWarping(),0===r?this.paused=!0:this.timeScale=r))}return this._effectiveTimeScale=r,r}_updateTime(t){let r=this._clip.duration,i=this.loop,s=this.time+t,u=this._loopCount,c=i===nw;if(0===t)return -1===u?s:c&&(1&u)==1?r-s:s;if(i===n_){-1===u&&(this._loopCount=0,this._setEndings(!0,!0,!1));o:{if(s>=r)s=r;else if(s<0)s=0;else{this.time=s;break o}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===u&&(t>=0?(u=0,this._setEndings(!0,0===this.repetitions,c)):this._setEndings(0===this.repetitions,!0,c)),s>=r||s<0){let i=Math.floor(s/r);s-=r*i,u+=Math.abs(i);let h=this.repetitions-u;if(h<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=t>0?r:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===h){let r=t<0;this._setEndings(r,!r,c)}else this._setEndings(!1,!1,c);this._loopCount=u,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:i})}}else this.time=s;if(c&&(1&u)==1)return r-s}return s}_setEndings(t,r,i){let s=this._interpolantSettings;i?(s.endingStart=nT,s.endingEnd=nT):(t?s.endingStart=this.zeroSlopeAtStart?nT:nC:s.endingStart=nE,r?s.endingEnd=this.zeroSlopeAtEnd?nT:nC:s.endingEnd=nE)}_scheduleFading(t,r,i){let s=this._mixer,u=s.time,c=this._weightInterpolant;null===c&&(c=s._lendControlInterpolant(),this._weightInterpolant=c);let h=c.parameterPositions,p=c.sampleValues;return h[0]=u,p[0]=r,h[1]=u+t,p[1]=i,this}}let dV=new Float32Array(1);class dW extends ry{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,r){let i=t._localRoot||this._root,s=t._clip.tracks,u=s.length,c=t._propertyBindings,h=t._interpolants,p=i.uuid,f=this._bindingsByRootAndName,v=f[p];void 0===v&&(v={},f[p]=v);for(let t=0;t!==u;++t){let u=s[t],f=u.name,y=v[f];if(void 0!==y)++y.referenceCount,c[t]=y;else{if(void 0!==(y=c[t])){null===y._cacheIndex&&(++y.referenceCount,this._addInactiveBinding(y,p,f));continue}let s=r&&r._propertyBindings[t].binding.parsedPath;y=new dD(dU.create(i,f,s),u.ValueTypeName,u.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,p,f),c[t]=y}h[t].resultBuffer=y.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){let r=(t._localRoot||this._root).uuid,i=t._clip.uuid,s=this._actionsByClip[i];this._bindAction(t,s&&s.knownActions[0]),this._addInactiveAction(t,i,r)}let r=t._propertyBindings;for(let t=0,i=r.length;t!==i;++t){let i=r[t];0==i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){let r=t._propertyBindings;for(let t=0,i=r.length;t!==i;++t){let i=r[t];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){let r=t._cacheIndex;return null!==r&&r<this._nActiveActions}_addInactiveAction(t,r,i){let s=this._actions,u=this._actionsByClip,c=u[r];if(void 0===c)c={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,u[r]=c;else{let r=c.knownActions;t._byClipCacheIndex=r.length,r.push(t)}t._cacheIndex=s.length,s.push(t),c.actionByRoot[i]=t}_removeInactiveAction(t){let r=this._actions,i=r[r.length-1],s=t._cacheIndex;i._cacheIndex=s,r[s]=i,r.pop(),t._cacheIndex=null;let u=t._clip.uuid,c=this._actionsByClip,h=c[u],p=h.knownActions,f=p[p.length-1],v=t._byClipCacheIndex;f._byClipCacheIndex=v,p[v]=f,p.pop(),t._byClipCacheIndex=null;let y=h.actionByRoot,x=(t._localRoot||this._root).uuid;delete y[x],0===p.length&&delete c[u],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){let r=t._propertyBindings;for(let t=0,i=r.length;t!==i;++t){let i=r[t];0==--i.referenceCount&&this._removeInactiveBinding(i)}}_lendAction(t){let r=this._actions,i=t._cacheIndex,s=this._nActiveActions++,u=r[s];t._cacheIndex=s,r[s]=t,u._cacheIndex=i,r[i]=u}_takeBackAction(t){let r=this._actions,i=t._cacheIndex,s=--this._nActiveActions,u=r[s];t._cacheIndex=s,r[s]=t,u._cacheIndex=i,r[i]=u}_addInactiveBinding(t,r,i){let s=this._bindingsByRootAndName,u=this._bindings,c=s[r];void 0===c&&(c={},s[r]=c),c[i]=t,t._cacheIndex=u.length,u.push(t)}_removeInactiveBinding(t){let r=this._bindings,i=t.binding,s=i.rootNode.uuid,u=i.path,c=this._bindingsByRootAndName,h=c[s],p=r[r.length-1],f=t._cacheIndex;p._cacheIndex=f,r[f]=p,r.pop(),delete h[u],0===Object.keys(h).length&&delete c[s]}_lendBinding(t){let r=this._bindings,i=t._cacheIndex,s=this._nActiveBindings++,u=r[s];t._cacheIndex=s,r[s]=t,u._cacheIndex=i,r[i]=u}_takeBackBinding(t){let r=this._bindings,i=t._cacheIndex,s=--this._nActiveBindings,u=r[s];t._cacheIndex=s,r[s]=t,u._cacheIndex=i,r[i]=u}_lendControlInterpolant(){let t=this._controlInterpolants,r=this._nActiveControlInterpolants++,i=t[r];return void 0===i&&((i=new hb(new Float32Array(2),new Float32Array(2),1,dV)).__cacheIndex=r,t[r]=i),i}_takeBackControlInterpolant(t){let r=this._controlInterpolants,i=t.__cacheIndex,s=--this._nActiveControlInterpolants,u=r[s];t.__cacheIndex=s,r[s]=t,u.__cacheIndex=i,r[i]=u}clipAction(t,r,i){let s=r||this._root,u=s.uuid,c="string"==typeof t?hP.findByName(s,t):t,h=null!==c?c.uuid:t,p=this._actionsByClip[h],f=null;if(void 0===i&&(i=null!==c?c.blendMode:nI),void 0!==p){let t=p.actionByRoot[u];if(void 0!==t&&t.blendMode===i)return t;f=p.knownActions[0],null===c&&(c=f._clip)}if(null===c)return null;let v=new dG(this,c,r,i);return this._bindAction(v,f),this._addInactiveAction(v,h,u),v}existingAction(t,r){let i=r||this._root,s=i.uuid,u="string"==typeof t?hP.findByName(i,t):t,c=u?u.uuid:t,h=this._actionsByClip[c];return void 0!==h&&h.actionByRoot[s]||null}stopAllAction(){let t=this._actions,r=this._nActiveActions;for(let i=r-1;i>=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;let r=this._actions,i=this._nActiveActions,s=this.time+=t,u=Math.sign(t),c=this._accuIndex^=1;for(let h=0;h!==i;++h)r[h]._update(s,t,u,c);let h=this._bindings,p=this._nActiveBindings;for(let t=0;t!==p;++t)h[t].apply(c);return this}setTime(t){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){let r=this._actions,i=t.uuid,s=this._actionsByClip,u=s[i];if(void 0!==u){let t=u.knownActions;for(let i=0,s=t.length;i!==s;++i){let s=t[i];this._deactivateAction(s);let u=s._cacheIndex,c=r[r.length-1];s._cacheIndex=null,s._byClipCacheIndex=null,c._cacheIndex=u,r[u]=c,r.pop(),this._removeInactiveBindingsForAction(s)}delete s[i]}}uncacheRoot(t){let r=t.uuid,i=this._actionsByClip;for(let t in i){let s=i[t].actionByRoot[r];void 0!==s&&(this._deactivateAction(s),this._removeInactiveAction(s))}let s=this._bindingsByRootAndName[r];if(void 0!==s)for(let t in s){let r=s[t];r.restoreOriginalState(),this._removeInactiveBinding(r)}}uncacheAction(t,r){let i=this.existingAction(t,r);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class dj{constructor(t){this.value=t}clone(){return new dj(void 0===this.value.clone?this.value:this.value.clone())}}let dX=0;class dY extends ry{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:dX++}),this.name="",this.usage=ra,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){let r=this.uniforms.indexOf(t);return -1!==r&&this.uniforms.splice(r,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(t){this.name=t.name,this.usage=t.usage;let r=t.uniforms;this.uniforms.length=0;for(let t=0,i=r.length;t<i;t++){let i=Array.isArray(r[t])?r[t]:[r[t]];for(let t=0;t<i.length;t++)this.uniforms.push(i[t].clone())}return this}clone(){return new this.constructor().copy(this)}}class d$ extends lF{constructor(t,r,i=1){super(t,r),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){let r=super.clone(t);return r.meshPerAttribute=this.meshPerAttribute,r}toJSON(t){let r=super.toJSON(t);return r.isInstancedInterleavedBuffer=!0,r.meshPerAttribute=this.meshPerAttribute,r}}class dJ{constructor(t,r,i,s,u){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=r,this.itemSize=i,this.elementSize=s,this.count=u,this.version=0}set needsUpdate(t){!0===t&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,r){return this.type=t,this.elementSize=r,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}let dZ=new iD;class dK{constructor(t,r,i=0,s=1/0){this.ray=new iI(t,r),this.near=i,this.far=s,this.camera=null,this.layers=new iH,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,r){this.ray.set(t,r)}setFromCamera(t,r){r.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(r).sub(this.ray.origin).normalize(),this.camera=r):r.isOrthographicCamera&&(this.ray.origin.set(t.x,t.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld),this.camera=r)}setFromXRController(t){return dZ.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(dZ),this}intersectObject(t,r=!0,i=[]){return dQ(t,this,i,r),i.sort(dq),i}intersectObjects(t,r=!0,i=[]){for(let s=0,u=t.length;s<u;s++)dQ(t[s],this,i,r);return i.sort(dq),i}}function dq(t,r){return t.distance-r.distance}function dQ(t,r,i,s){let u=!0;if(t.layers.test(r.layers)&&!1===t.raycast(r,i)&&(u=!1),!0===u&&!0===s){let s=t.children;for(let t=0,u=s.length;t<u;t++)dQ(s[t],r,i,!0)}}class d0{constructor(t=1,r=0,i=0){return this.radius=t,this.phi=r,this.theta=i,this}set(t,r,i){return this.radius=t,this.phi=r,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,r,i){return this.radius=Math.sqrt(t*t+r*r+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(rM(r/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class d1{constructor(t=1,r=0,i=0){return this.radius=t,this.theta=r,this.y=i,this}set(t,r,i){return this.radius=t,this.theta=r,this.y=i,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,r,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=r,this}clone(){return new this.constructor().copy(this)}}class d2{constructor(t,r,i,s){d2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==t&&this.set(t,r,i,s)}identity(){return this.set(1,0,0,1),this}fromArray(t,r=0){for(let i=0;i<4;i++)this.elements[i]=t[i+r];return this}set(t,r,i,s){let u=this.elements;return u[0]=t,u[2]=r,u[1]=i,u[3]=s,this}}let d3=new rD;class d5{constructor(t=new rD(Infinity,Infinity),r=new rD(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=r}set(t,r){return this.min.copy(t),this.max.copy(r),this}setFromPoints(t){this.makeEmpty();for(let r=0,i=t.length;r<i;r++)this.expandByPoint(t[r]);return this}setFromCenterAndSize(t,r){let i=d3.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=Infinity,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,r){return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,r){return r.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,d3).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}let d4=new r8,d6=new r8;class d9{constructor(t=new r8,r=new r8){this.start=t,this.end=r}set(t,r){return this.start.copy(t),this.end.copy(r),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,r){return this.delta(r).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,r){d4.subVectors(t,this.start),d6.subVectors(this.end,this.start);let i=d6.dot(d6),s=d6.dot(d4)/i;return r&&(s=rM(s,0,1)),s}closestPointToPoint(t,r,i){let s=this.closestPointToPointParameter(t,r);return this.delta(i).multiplyScalar(s).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}let d8=new r8;class d7 extends i3{constructor(t,r){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=r,this.type="SpotLightHelper";let i=new aU,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let t=0,r=1;t<32;t++,r++){let i=t/32*Math.PI*2,u=r/32*Math.PI*2;s.push(Math.cos(i),Math.sin(i),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new aR(s,3));let u=new uO({fog:!1,toneMapped:!1});this.cone=new uY(i,u),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);let t=this.light.distance?this.light.distance:1e3,r=t*Math.tan(this.light.angle);this.cone.scale.set(r,r,t),d8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(d8),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}let pe=new r8,pt=new iD,pn=new iD;class pr extends uY{constructor(t){let r=function t(r){let i=[];!0===r.isBone&&i.push(r);for(let s=0;s<r.children.length;s++)i.push.apply(i,t(r.children[s]));return i}(t),i=new aU,s=[],u=[],c=new ad(0,0,1),h=new ad(0,1,0);for(let t=0;t<r.length;t++){let i=r[t];i.parent&&i.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),u.push(c.r,c.g,c.b),u.push(h.r,h.g,h.b))}i.setAttribute("position",new aR(s,3)),i.setAttribute("color",new aR(u,3)),super(i,new uO({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=r,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){let r=this.bones,i=this.geometry,s=i.getAttribute("position");pn.copy(this.root.matrixWorld).invert();for(let t=0,i=0;t<r.length;t++){let u=r[t];u.parent&&u.parent.isBone&&(pt.multiplyMatrices(pn,u.matrixWorld),pe.setFromMatrixPosition(pt),s.setXYZ(i,pe.x,pe.y,pe.z),pt.multiplyMatrices(pn,u.parent.matrixWorld),pe.setFromMatrixPosition(pt),s.setXYZ(i+1,pe.x,pe.y,pe.z),i+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}class pi extends aq{constructor(t,r,i){let s=new c4(r,4,2);super(s,new am({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}let pa=new r8,po=new ad,ps=new ad;class pl extends i3{constructor(t,r,i){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";let s=new c2(r);s.rotateY(.5*Math.PI),this.material=new am({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);let u=new Float32Array(3*s.getAttribute("position").count);s.setAttribute("color",new aS(u,3)),this.add(new aq(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){let t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{let r=t.geometry.getAttribute("color");po.copy(this.light.color),ps.copy(this.light.groundColor);for(let t=0,i=r.count;t<i;t++){let s=t<i/2?po:ps;r.setXYZ(t,s.r,s.g,s.b)}r.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(pa.setFromMatrixPosition(this.light.matrixWorld).negate())}}class pu extends uY{constructor(t=10,r=10,i=4473924,s=8947848){i=new ad(i),s=new ad(s);let u=r/2,c=t/r,h=t/2,p=[],f=[];for(let t=0,v=0,y=-h;t<=r;t++,y+=c){p.push(-h,0,y,h,0,y),p.push(y,0,-h,y,0,h);let r=t===u?i:s;r.toArray(f,v),v+=3,r.toArray(f,v),v+=3,r.toArray(f,v),v+=3,r.toArray(f,v),v+=3}let v=new aU;v.setAttribute("position",new aR(p,3)),v.setAttribute("color",new aR(f,3)),super(v,new uO({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class pc extends uY{constructor(t=10,r=16,i=8,s=64,u=4473924,c=8947848){u=new ad(u),c=new ad(c);let h=[],p=[];if(r>1)for(let i=0;i<r;i++){let s=i/r*(2*Math.PI),f=Math.sin(s)*t,v=Math.cos(s)*t;h.push(0,0,0),h.push(f,0,v);let y=1&i?u:c;p.push(y.r,y.g,y.b),p.push(y.r,y.g,y.b)}for(let r=0;r<i;r++){let f=1&r?u:c,v=t-t/i*r;for(let t=0;t<s;t++){let r=t/s*(2*Math.PI),i=Math.sin(r)*v,u=Math.cos(r)*v;h.push(i,0,u),p.push(f.r,f.g,f.b),i=Math.sin(r=(t+1)/s*(2*Math.PI))*v,u=Math.cos(r)*v,h.push(i,0,u),p.push(f.r,f.g,f.b)}}let f=new aU;f.setAttribute("position",new aR(h,3)),f.setAttribute("color",new aR(p,3)),super(f,new uO({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}let ph=new r8,pd=new r8,pp=new r8;class pf extends i3{constructor(t,r,i){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",void 0===r&&(r=1);let s=new aU;s.setAttribute("position",new aR([-r,r,0,r,r,0,r,-r,0,-r,-r,0,-r,r,0],3));let u=new uO({fog:!1,toneMapped:!1});this.lightPlane=new uV(s,u),this.add(this.lightPlane),(s=new aU).setAttribute("position",new aR([0,0,0,0,0,1],3)),this.targetLine=new uV(s,u),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),ph.setFromMatrixPosition(this.light.matrixWorld),pd.setFromMatrixPosition(this.light.target.matrixWorld),pp.subVectors(pd,ph),this.lightPlane.lookAt(pd),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(pd),this.targetLine.scale.z=pp.length()}}let pg=new r8,pm=new a6;class pv extends uY{constructor(t){let r=new aU,i=new uO({color:0xffffff,vertexColors:!0,toneMapped:!1}),s=[],u=[],c={};function h(t,r){p(t),p(r)}function p(t){s.push(0,0,0),u.push(0,0,0),void 0===c[t]&&(c[t]=[]),c[t].push(s.length/3-1)}h("n1","n2"),h("n2","n4"),h("n4","n3"),h("n3","n1"),h("f1","f2"),h("f2","f4"),h("f4","f3"),h("f3","f1"),h("n1","f1"),h("n2","f2"),h("n3","f3"),h("n4","f4"),h("p","n1"),h("p","n2"),h("p","n3"),h("p","n4"),h("u1","u2"),h("u2","u3"),h("u3","u1"),h("c","t"),h("p","c"),h("cn1","cn2"),h("cn3","cn4"),h("cf1","cf2"),h("cf3","cf4"),r.setAttribute("position",new aR(s,3)),r.setAttribute("color",new aR(u,3)),super(r,i),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=c,this.update();let f=new ad(0xffaa00),v=new ad(0xff0000),y=new ad(43775),x=new ad(0xffffff),_=new ad(3355443);this.setColors(f,v,y,x,_)}setColors(t,r,i,s,u){let c=this.geometry.getAttribute("color");c.setXYZ(0,t.r,t.g,t.b),c.setXYZ(1,t.r,t.g,t.b),c.setXYZ(2,t.r,t.g,t.b),c.setXYZ(3,t.r,t.g,t.b),c.setXYZ(4,t.r,t.g,t.b),c.setXYZ(5,t.r,t.g,t.b),c.setXYZ(6,t.r,t.g,t.b),c.setXYZ(7,t.r,t.g,t.b),c.setXYZ(8,t.r,t.g,t.b),c.setXYZ(9,t.r,t.g,t.b),c.setXYZ(10,t.r,t.g,t.b),c.setXYZ(11,t.r,t.g,t.b),c.setXYZ(12,t.r,t.g,t.b),c.setXYZ(13,t.r,t.g,t.b),c.setXYZ(14,t.r,t.g,t.b),c.setXYZ(15,t.r,t.g,t.b),c.setXYZ(16,t.r,t.g,t.b),c.setXYZ(17,t.r,t.g,t.b),c.setXYZ(18,t.r,t.g,t.b),c.setXYZ(19,t.r,t.g,t.b),c.setXYZ(20,t.r,t.g,t.b),c.setXYZ(21,t.r,t.g,t.b),c.setXYZ(22,t.r,t.g,t.b),c.setXYZ(23,t.r,t.g,t.b),c.setXYZ(24,r.r,r.g,r.b),c.setXYZ(25,r.r,r.g,r.b),c.setXYZ(26,r.r,r.g,r.b),c.setXYZ(27,r.r,r.g,r.b),c.setXYZ(28,r.r,r.g,r.b),c.setXYZ(29,r.r,r.g,r.b),c.setXYZ(30,r.r,r.g,r.b),c.setXYZ(31,r.r,r.g,r.b),c.setXYZ(32,i.r,i.g,i.b),c.setXYZ(33,i.r,i.g,i.b),c.setXYZ(34,i.r,i.g,i.b),c.setXYZ(35,i.r,i.g,i.b),c.setXYZ(36,i.r,i.g,i.b),c.setXYZ(37,i.r,i.g,i.b),c.setXYZ(38,s.r,s.g,s.b),c.setXYZ(39,s.r,s.g,s.b),c.setXYZ(40,u.r,u.g,u.b),c.setXYZ(41,u.r,u.g,u.b),c.setXYZ(42,u.r,u.g,u.b),c.setXYZ(43,u.r,u.g,u.b),c.setXYZ(44,u.r,u.g,u.b),c.setXYZ(45,u.r,u.g,u.b),c.setXYZ(46,u.r,u.g,u.b),c.setXYZ(47,u.r,u.g,u.b),c.setXYZ(48,u.r,u.g,u.b),c.setXYZ(49,u.r,u.g,u.b),c.needsUpdate=!0}update(){let t=this.geometry,r=this.pointMap;pm.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),py("c",r,t,pm,0,0,-1),py("t",r,t,pm,0,0,1),py("n1",r,t,pm,-1,-1,-1),py("n2",r,t,pm,1,-1,-1),py("n3",r,t,pm,-1,1,-1),py("n4",r,t,pm,1,1,-1),py("f1",r,t,pm,-1,-1,1),py("f2",r,t,pm,1,-1,1),py("f3",r,t,pm,-1,1,1),py("f4",r,t,pm,1,1,1),py("u1",r,t,pm,.7,1.1,-1),py("u2",r,t,pm,-.7,1.1,-1),py("u3",r,t,pm,0,2,-1),py("cf1",r,t,pm,-1,0,1),py("cf2",r,t,pm,1,0,1),py("cf3",r,t,pm,0,-1,1),py("cf4",r,t,pm,0,1,1),py("cn1",r,t,pm,-1,0,-1),py("cn2",r,t,pm,1,0,-1),py("cn3",r,t,pm,0,-1,-1),py("cn4",r,t,pm,0,1,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function py(t,r,i,s,u,c,h){pg.set(u,c,h).unproject(s);let p=r[t];if(void 0!==p){let t=i.getAttribute("position");for(let r=0,i=p.length;r<i;r++)t.setXYZ(p[r],pg.x,pg.y,pg.z)}}let px=new it;class p_ extends uY{constructor(t,r=0xffff00){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(24),u=new aU;u.setIndex(new aS(i,1)),u.setAttribute("position",new aS(s,3)),super(u,new uO({color:r,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==this.object&&px.setFromObject(this.object),px.isEmpty())return;let r=px.min,i=px.max,s=this.geometry.attributes.position,u=s.array;u[0]=i.x,u[1]=i.y,u[2]=i.z,u[3]=r.x,u[4]=i.y,u[5]=i.z,u[6]=r.x,u[7]=r.y,u[8]=i.z,u[9]=i.x,u[10]=r.y,u[11]=i.z,u[12]=i.x,u[13]=i.y,u[14]=r.z,u[15]=r.x,u[16]=i.y,u[17]=r.z,u[18]=r.x,u[19]=r.y,u[20]=r.z,u[21]=i.x,u[22]=r.y,u[23]=r.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,r){return super.copy(t,r),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class pb extends uY{constructor(t,r=0xffff00){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new aU;s.setIndex(new aS(i,1)),s.setAttribute("position",new aR([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(s,new uO({color:r,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){let r=this.box;!r.isEmpty()&&(r.getCenter(this.position),r.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class pw extends uV{constructor(t,r=1,i=0xffff00){let s=new aU;s.setAttribute("position",new aR([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),s.computeBoundingSphere(),super(s,new uO({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=r;let u=new aU;u.setAttribute("position",new aR([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),u.computeBoundingSphere(),this.add(new aq(u,new am({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}let pS=new r8;class pM extends i3{constructor(t=new r8(0,0,1),r=new r8(0,0,0),i=1,s=0xffff00,u=.2*i,p=.2*u){super(),this.type="ArrowHelper",void 0===c&&((c=new aU).setAttribute("position",new aR([0,0,0,0,1,0],3)),(h=new cS(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(r),this.line=new uV(c,new uO({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new aq(h,new am({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,u,p)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{pS.set(t.z,0,-t.x).normalize();let r=Math.acos(t.y);this.quaternion.setFromAxisAngle(pS,r)}}setLength(t,r=.2*t,i=.2*r){this.line.scale.set(1,Math.max(1e-4,t-r),1),this.line.updateMatrix(),this.cone.scale.set(i,r,i),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class pA extends uY{constructor(t=1){let r=new aU;r.setAttribute("position",new aR([0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],3)),r.setAttribute("color",new aR([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(r,new uO({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,r,i){let s=new ad,u=this.geometry.attributes.color.array;return s.set(t),s.toArray(u,0),s.toArray(u,3),s.set(r),s.toArray(u,6),s.toArray(u,9),s.set(i),s.toArray(u,12),s.toArray(u,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class pC{constructor(){this.type="ShapePath",this.color=new ad,this.subPaths=[],this.currentPath=null}moveTo(t,r){return this.currentPath=new cx,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,r),this}lineTo(t,r){return this.currentPath.lineTo(t,r),this}quadraticCurveTo(t,r,i,s){return this.currentPath.quadraticCurveTo(t,r,i,s),this}bezierCurveTo(t,r,i,s,u,c){return this.currentPath.bezierCurveTo(t,r,i,s,u,c),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){let r,i,s,u,c;let h=cZ.isClockWise,p=this.subPaths;if(0===p.length)return[];let f=[];if(1===p.length)return i=p[0],(s=new cR).curves=i.curves,f.push(s),f;let v=!h(p[0].getPoints());v=t?!v:v;let y=[],x=[],_=[],b=0;x[0]=void 0,_[b]=[];for(let s=0,c=p.length;s<c;s++)r=h(u=(i=p[s]).getPoints()),(r=t?!r:r)?(!v&&x[b]&&b++,x[b]={s:new cR,p:u},x[b].s.curves=i.curves,v&&b++,_[b]=[]):_[b].push({h:i,p:u[0]});if(!x[0])return function(t){let r=[];for(let i=0,s=t.length;i<s;i++){let s=t[i],u=new cR;u.curves=s.curves,r.push(u)}return r}(p);if(x.length>1){let t=!1,r=0;for(let t=0,r=x.length;t<r;t++)y[t]=[];for(let i=0,s=x.length;i<s;i++){let s=_[i];for(let u=0;u<s.length;u++){let c=s[u],h=!0;for(let s=0;s<x.length;s++)(function(t,r){let i=r.length,s=!1;for(let u=i-1,c=0;c<i;u=c++){let i=r[u],h=r[c],p=h.x-i.x,f=h.y-i.y;if(Math.abs(f)>Number.EPSILON){if(f<0&&(i=r[c],p=-p,h=r[u],f=-f),t.y<i.y||t.y>h.y)continue;if(t.y===i.y){if(t.x===i.x)return!0}else{let r=f*(t.x-i.x)-p*(t.y-i.y);if(0===r)return!0;if(r<0)continue;s=!s}}else{if(t.y!==i.y)continue;if(h.x<=t.x&&t.x<=i.x||i.x<=t.x&&t.x<=h.x)return!0}}return s})(c.p,x[s].p)&&(i!==s&&r++,h?(h=!1,y[s].push(c)):t=!0);h&&y[i].push(c)}}r>0&&!1===t&&(_=y)}for(let t=0,r=x.length;t<r;t++){s=x[t].s,f.push(s),c=_[t];for(let t=0,r=c.length;t<r;t++)s.holes.push(c[t].h)}return f}}class pT extends ry{constructor(t,r=null){super(),this.object=t,this.domElement=r,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class pE extends r2{constructor(t=1,r=1,i=1,s={}){super(t,r,{...s,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:eh}})),"undefined"!=typeof window&&(window.__THREE__||(window.__THREE__=eh));var pI=i("5271"),pD=i.t(pI,2),pP=i("611");let pR="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?pI.useEffect:pI.useLayoutEffect;function pL(t){let r="function"==typeof t?function(t){let r;let i=new Set,s=(t,s)=>{let u="function"==typeof t?t(r):t;if(u!==r){let t=r;r=s?u:Object.assign({},r,u),i.forEach(i=>i(r,t))}},u=()=>r,c=(t,s=u,c=Object.is)=>{let h=s(r);function p(){let i=s(r);if(!c(h,i)){let r=h;t(h=i,r)}}return i.add(p),()=>i.delete(p)},h={setState:s,getState:u,subscribe:(t,r,s)=>r||s?c(t,r,s):(i.add(t),()=>i.delete(t)),destroy:()=>i.clear()};return r=t(s,u,h),h}(t):t,i=(t=r.getState,i=Object.is)=>{let s;let[,u]=(0,pI.useReducer)(t=>t+1,0),c=r.getState(),h=(0,pI.useRef)(c),p=(0,pI.useRef)(t),f=(0,pI.useRef)(i),v=(0,pI.useRef)(!1),y=(0,pI.useRef)();void 0===y.current&&(y.current=t(c));let x=!1;(h.current!==c||p.current!==t||f.current!==i||v.current)&&(s=t(c),x=!i(y.current,s)),pR(()=>{x&&(y.current=s),h.current=c,p.current=t,f.current=i,v.current=!1});let _=(0,pI.useRef)(c);pR(()=>{let t=()=>{try{let t=r.getState(),i=p.current(t);!f.current(y.current,i)&&(h.current=t,y.current=i,u())}catch(t){v.current=!0,u()}},i=r.subscribe(t);return r.getState()!==_.current&&t(),i},[]);let b=x?s:y.current;return(0,pI.useDebugValue)(b),b};return Object.assign(i,r),i[Symbol.iterator]=function(){let t=[i,r];return{next(){let r=t.length<=0;return{value:t.shift(),done:r}}}},i}let pk=t=>"object"==typeof t&&"function"==typeof t.then,pO=[];function pB(t,r,i=(t,r)=>t===r){if(t===r)return!0;if(!t||!r)return!1;let s=t.length;if(r.length!==s)return!1;for(let u=0;u<s;u++)if(!i(t[u],r[u]))return!1;return!0}function pN(t,r=null,i=!1,s={}){for(let u of(null===r&&(r=[t]),pO))if(pB(r,u.keys,u.equal)){if(i)return;if(Object.prototype.hasOwnProperty.call(u,"error"))throw u.error;if(Object.prototype.hasOwnProperty.call(u,"response"))return s.lifespan&&s.lifespan>0&&(u.timeout&&clearTimeout(u.timeout),u.timeout=setTimeout(u.remove,s.lifespan)),u.response;if(!i)throw u.promise}let u={keys:r,equal:s.equal,remove:()=>{let t=pO.indexOf(u);-1!==t&&pO.splice(t,1)},promise:(pk(t)?t:t(...r)).then(t=>{u.response=t,s.lifespan&&s.lifespan>0&&(u.timeout=setTimeout(u.remove,s.lifespan))}).catch(t=>u.error=t)};if(pO.push(u),!i)throw u.promise}let pF=(t,r,i)=>pN(t,r,!1,i),pz=(t,r,i)=>void pN(t,r,!0,i),pU=t=>{if(void 0===t||0===t.length)pO.splice(0,pO.length);else{let r=pO.find(r=>pB(t,r.keys,r.equal));r&&r.remove()}};var pH=i("6191"),pG=i.n(pH),pV=i("5297");let pW={},pj=t=>void Object.assign(pW,t),pX=t=>"colorSpace"in t||"outputColorSpace"in t,pY=()=>{var t;return null!=(t=pW.ColorManagement)?t:null},p$=t=>t&&t.isOrthographicCamera,pJ=t=>t&&t.hasOwnProperty("current"),pZ="undefined"!=typeof window&&(null!=(eal=window.document)&&eal.createElement||(null==(eau=window.navigator)?void 0:eau.product)==="ReactNative")?pI.useLayoutEffect:pI.useEffect;function pK(t){let r=pI.useRef(t);return pZ(()=>void(r.current=t),[t]),r}function pq({set:t}){return pZ(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class pQ extends pI.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}pQ.getDerivedStateFromError=()=>({error:!0});let p0="__default",p1=new Map,p2=t=>t&&!!t.memoized&&!!t.changes;function p3(t){var r;let i="undefined"!=typeof window?null!=(r=window.devicePixelRatio)?r:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],i),t[1]):t}let p5=t=>{var r;return null==(r=t.__r3f)?void 0:r.root.getState()};function p4(t){let r=t.__r3f.root;for(;r.getState().previousRoot;)r=r.getState().previousRoot;return r}let p6={obj:t=>t===Object(t)&&!p6.arr(t)&&"function"!=typeof t,fun:t=>"function"==typeof t,str:t=>"string"==typeof t,num:t=>"number"==typeof t,boo:t=>"boolean"==typeof t,und:t=>void 0===t,arr:t=>Array.isArray(t),equ(t,r,{arrays:i="shallow",objects:s="reference",strict:u=!0}={}){let c;if(typeof t!=typeof r||!!t!=!!r)return!1;if(p6.str(t)||p6.num(t)||p6.boo(t))return t===r;let h=p6.obj(t);if(h&&"reference"===s)return t===r;let p=p6.arr(t);if(p&&"reference"===i)return t===r;if((p||h)&&t===r)return!0;for(c in t)if(!(c in r))return!1;if(h&&"shallow"===i&&"shallow"===s){for(c in u?r:t)if(!p6.equ(t[c],r[c],{strict:u,objects:"reference"}))return!1}else for(c in u?r:t)if(t[c]!==r[c])return!1;if(p6.und(c)){if(p&&0===t.length&&0===r.length||h&&0===Object.keys(t).length&&0===Object.keys(r).length)return!0;if(t!==r)return!1}return!0}};function p9(t){let r={nodes:{},materials:{}};return t&&t.traverse(t=>{t.name&&(r.nodes[t.name]=t),t.material&&!r.materials[t.material.name]&&(r.materials[t.material.name]=t.material)}),r}function p8(t,r){return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...r},t}function p7(t,r){let i=t;if(!r.includes("-"))return{target:i,key:r};{let s=r.split("-"),u=s.pop();return{target:i=s.reduce((t,r)=>t[r],t),key:u}}}let fe=/-\d+$/;function ft(t,r,i){if(p6.str(i)){if(fe.test(i)){let{target:r,key:s}=p7(t,i.replace(fe,""));!Array.isArray(r[s])&&(r[s]=[])}let{target:s,key:u}=p7(t,i);r.__r3f.previousAttach=s[u],s[u]=r}else r.__r3f.previousAttach=i(t,r)}function fn(t,r,i){var s,u;if(p6.str(i)){let{target:s,key:u}=p7(t,i),c=r.__r3f.previousAttach;void 0===c?delete s[u]:s[u]=c}else null==(s=r.__r3f)||null==s.previousAttach||s.previousAttach(t,r);null==(u=r.__r3f)||delete u.previousAttach}function fr(t,{children:r,key:i,ref:s,...u},{children:c,key:h,ref:p,...f}={},v=!1){let y=t.__r3f,x=Object.entries(u),_=[];if(v){let t=Object.keys(f);for(let r=0;r<t.length;r++)!u.hasOwnProperty(t[r])&&x.unshift([t[r],p0+"remove"])}x.forEach(([r,i])=>{var s;if(null!=(s=t.__r3f)&&s.primitive&&"object"===r||p6.equ(i,f[r]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(r))return _.push([r,i,!0,[]]);let c=[];for(let t in r.includes("-")&&(c=r.split("-")),_.push([r,i,!1,c]),u){let i=u[t];t.startsWith(`${r}-`)&&_.push([t,i,!1,t.split("-")])}});let b={...u};return null!=y&&y.memoizedProps&&null!=y&&y.memoizedProps.args&&(b.args=y.memoizedProps.args),null!=y&&y.memoizedProps&&null!=y&&y.memoizedProps.attach&&(b.attach=y.memoizedProps.attach),{memoized:b,changes:_}}let fi="undefined"!=typeof process&&!1;function fa(t,r){var i;let s=t.__r3f,u=null==s?void 0:s.root,c=null==u?void 0:null==u.getState?void 0:u.getState(),{memoized:h,changes:p}=p2(r)?r:fr(t,r),f=null==s?void 0:s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=h);for(let r=0;r<p.length;r++){let[i,u,h,f]=p[r];if(pX(t)){let t="srgb",r="srgb-linear";"encoding"===i?(i="colorSpace",u=3001===u?t:r):"outputEncoding"===i&&(i="outputColorSpace",u=3001===u?t:r)}let v=t,y=v[i];if(f.length&&!((y=f.reduce((t,r)=>t[r],t))&&y.set)){let[r,...s]=f.reverse();v=s.reverse().reduce((t,r)=>t[r],t),i=r}if(u===p0+"remove"){if(v.constructor){let t=p1.get(v.constructor);!t&&(t=new v.constructor,p1.set(v.constructor,t)),u=t[i]}else u=0}if(h&&s)u?s.handlers[i]=u:delete s.handlers[i],s.eventCount=Object.keys(s.handlers).length;else if(y&&y.set&&(y.copy||y instanceof iH)){if(Array.isArray(u))y.fromArray?y.fromArray(u):y.set(...u);else if(y.copy&&u&&u.constructor&&(fi?y.constructor.name===u.constructor.name:y.constructor===u.constructor))y.copy(u);else if(void 0!==u){let t=y instanceof ad;!t&&y.setScalar?y.setScalar(u):y instanceof iH&&u instanceof iH?y.mask=u.mask:y.set(u),!pY()&&c&&!c.linear&&t&&y.convertSRGBToLinear()}}else if(v[i]=u,v[i]instanceof rQ&&v[i].format===tH&&v[i].type===tT&&c){let t=v[i];pX(t)&&pX(c.gl)?t.colorSpace=c.gl.outputColorSpace:t.encoding=c.gl.outputEncoding}fo(t)}if(s&&s.parent&&t.raycast&&f!==s.eventCount){let r=p4(t).getState().internal,i=r.interaction.indexOf(t);i>-1&&r.interaction.splice(i,1),s.eventCount&&r.interaction.push(t)}return!(1===p.length&&"onUpdate"===p[0][0])&&p.length&&null!=(i=t.__r3f)&&i.parent&&fs(t),t}function fo(t){var r,i;let s=null==(r=t.__r3f)?void 0:null==(i=r.root)?void 0:null==i.getState?void 0:i.getState();s&&0===s.internal.frames&&s.invalidate()}function fs(t){null==t.onUpdate||t.onUpdate(t)}function fl(t,r){!t.manual&&(p$(t)?(t.left=-(r.width/2),t.right=r.width/2,t.top=r.height/2,t.bottom=-(r.height/2)):t.aspect=r.width/r.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function fu(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function fc(t,r,i,s){let u=i.get(r);u&&(i.delete(r),0===i.size&&(t.delete(s),u.target.releasePointerCapture(s)))}let fh=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],fd=t=>!!(null!=t&&t.render),fp=pI.createContext(null),ff=(t,r)=>{let i=pL((i,s)=>{let u,c=new r8,h=new r8,p=new r8;function f(t=s().camera,r=h,i=s().size){let{width:u,height:v,top:y,left:x}=i,_=u/v;r instanceof r8?p.copy(r):p.set(...r);let b=t.getWorldPosition(c).distanceTo(p);if(p$(t))return{width:u/t.zoom,height:v/t.zoom,top:y,left:x,factor:1,distance:b,aspect:_};{let r=2*Math.tan(t.fov*Math.PI/180/2)*b,i=u/v*r;return{width:i,height:r,top:y,left:x,factor:u/i,distance:b,aspect:_}}}let v=t=>i(r=>({performance:{...r.performance,current:t}})),y=new rD;return{set:i,get:s,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(r=1)=>t(s(),r),advance:(t,i)=>r(t,i,s()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new dm,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{let t=s();u&&clearTimeout(u),t.performance.current!==t.performance.min&&v(t.performance.min),u=setTimeout(()=>v(s().performance.max),t.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:f},setEvents:t=>i(r=>({...r,events:{...r.events,...t}})),setSize:(t,r,u,c,p)=>{let v=s().camera,y={width:t,height:r,top:c||0,left:p||0,updateStyle:u};i(t=>({size:y,viewport:{...t.viewport,...f(v,h,y)}}))},setDpr:t=>i(r=>{let i=p3(t);return{viewport:{...r.viewport,dpr:i,initialDpr:r.viewport.initialDpr||i}}}),setFrameloop:(t="always")=>{let r=s().clock;r.stop(),r.elapsedTime=0,"never"!==t&&(r.start(),r.elapsedTime=0),i(()=>({frameloop:t}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:pI.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(t,r,i)=>{let u=s().internal;return u.priority=u.priority+(r>0?1:0),u.subscribers.push({ref:t,priority:r,store:i}),u.subscribers=u.subscribers.sort((t,r)=>t.priority-r.priority),()=>{let i=s().internal;null!=i&&i.subscribers&&(i.priority=i.priority-(r>0?1:0),i.subscribers=i.subscribers.filter(r=>r.ref!==t))}}}}}),s=i.getState(),u=s.size,c=s.viewport.dpr,h=s.camera;return i.subscribe(()=>{let{camera:t,size:r,viewport:s,gl:p,set:f}=i.getState();if(r.width!==u.width||r.height!==u.height||s.dpr!==c){var v;u=r,c=s.dpr,fl(t,r),p.setPixelRatio(s.dpr);let i=null!=(v=r.updateStyle)?v:"undefined"!=typeof HTMLCanvasElement&&p.domElement instanceof HTMLCanvasElement;p.setSize(r.width,r.height,i)}t!==h&&(h=t,f(r=>({viewport:{...r.viewport,...r.viewport.getCurrentViewport(t)}})))}),i.subscribe(r=>t(r)),i},fg=new Set,fm=new Set,fv=new Set;function fy(t,r){if(t.size)for(let{callback:i}of t.values())i(r)}function fx(t,r){switch(t){case"before":return fy(fg,r);case"after":return fy(fm,r);case"tail":return fy(fv,r)}}function f_(t,r,i){let s=r.clock.getDelta();for("never"===r.frameloop&&"number"==typeof t&&(s=t-r.clock.elapsedTime,r.clock.oldTime=r.clock.elapsedTime,r.clock.elapsedTime=t),f=r.internal.subscribers,p=0;p<f.length;p++)(v=f[p]).ref.current(v.store.getState(),s,i);return!r.internal.priority&&r.gl.render&&r.gl.render(r.scene,r.camera),r.internal.frames=Math.max(0,r.internal.frames-1),"always"===r.frameloop?1:r.internal.frames}function fb(){let t=pI.useContext(fp);if(!t)throw Error("R3F: Hooks can only be used within the Canvas component!");return t}function fw(t=t=>t,r){return fb()(t,r)}function fS(t,r=0){let i=fb(),s=i.getState().internal.subscribe,u=pK(t);return pZ(()=>s(u,r,i),[r,s,i]),null}let fM=new WeakMap;function fA(t,r){return function(i,...s){let u=fM.get(i);return!u&&(u=new i,fM.set(i,u)),t&&t(u),Promise.all(s.map(t=>new Promise((i,s)=>u.load(t,t=>{t.scene&&Object.assign(t,p9(t.scene)),i(t)},r,r=>s(Error(`Could not load ${t}: ${null==r?void 0:r.message}`))))))}}function fC(t,r,i,s){let u=Array.isArray(r)?r:[r],c=pF(fA(i,s),[t,...u],{equal:p6.equ});return Array.isArray(r)?c:c[0]}fC.preload=function(t,r,i){let s=Array.isArray(r)?r:[r];return pz(fA(i),[t,...s])},fC.clear=function(t,r){return pU([t,...Array.isArray(r)?r:[r]])};let fT=new Map,{invalidate:fE,advance:fI}=function(t){let r,i,s,u=!1,c=!1;function h(p){for(let v of(i=requestAnimationFrame(h),u=!0,r=0,fx("before",p),c=!0,t.values())){var f;(s=v.store.getState()).internal.active&&("always"===s.frameloop||s.internal.frames>0)&&!(null!=(f=s.gl.xr)&&f.isPresenting)&&(r+=f_(p,s))}if(c=!1,fx("after",p),0===r)return fx("tail",p),u=!1,cancelAnimationFrame(i)}return{loop:h,invalidate:function r(i,s=1){var p;if(!i)return t.forEach(t=>r(t.store.getState(),s));(null==(p=i.gl.xr)||!p.isPresenting)&&i.internal.active&&"never"!==i.frameloop&&(s>1?i.internal.frames=Math.min(60,i.internal.frames+s):c?i.internal.frames=2:i.internal.frames=1,!u&&(u=!0,requestAnimationFrame(h)))},advance:function(r,i=!0,s,u){if(i&&fx("before",r),s)f_(r,s,u);else for(let i of t.values())f_(r,i.store.getState());i&&fx("after",r)}}}(fT),{reconciler:fD,applyProps:fP}=function(t,r){function i(t,{args:r=[],attach:i,...s},u){let c,h=`${t[0].toUpperCase()}${t.slice(1)}`;if("primitive"===t){if(void 0===s.object)throw Error("R3F: Primitives without 'object' are invalid!");c=p8(s.object,{type:t,root:u,attach:i,primitive:!0})}else{let s=pW[h];if(!s)throw Error(`R3F: ${h} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(r))throw Error("R3F: The args prop must be an array!");c=p8(new s(...r),{type:t,root:u,attach:i,memoizedProps:{args:r}})}return void 0===c.__r3f.attach&&(c instanceof aU?c.__r3f.attach="geometry":c instanceof ag&&(c.__r3f.attach="material")),"inject"!==h&&fa(c,s),c}function s(t,r){let i=!1;if(r){var s,u;null!=(s=r.__r3f)&&s.attach?ft(t,r,r.__r3f.attach):r.isObject3D&&t.isObject3D&&(t.add(r),i=!0),!i&&(null==(u=t.__r3f)||u.objects.push(r)),!r.__r3f&&p8(r,{}),r.__r3f.parent=t,fs(r),fo(r)}}function u(t,r,i){let s=!1;if(r){var u,c;if(null!=(u=r.__r3f)&&u.attach)ft(t,r,r.__r3f.attach);else if(r.isObject3D&&t.isObject3D){r.parent=t,r.dispatchEvent({type:"added"}),t.dispatchEvent({type:"childadded",child:r});let u=t.children.filter(t=>t!==r),c=u.indexOf(i);t.children=[...u.slice(0,c),r,...u.slice(c)],s=!0}!s&&(null==(c=t.__r3f)||c.objects.push(r)),!r.__r3f&&p8(r,{}),r.__r3f.parent=t,fs(r),fo(r)}}function c(t,r,i=!1){t&&[...t].forEach(t=>h(r,t,i))}function h(t,r,i){if(r){var s,u,h,p,f;r.__r3f&&(r.__r3f.parent=null),null!=(s=t.__r3f)&&s.objects&&(t.__r3f.objects=t.__r3f.objects.filter(t=>t!==r)),null!=(u=r.__r3f)&&u.attach?fn(t,r,r.__r3f.attach):r.isObject3D&&t.isObject3D&&(t.remove(r),null!=(p=r.__r3f)&&p.root&&function(t,r){let{internal:i}=t.getState();i.interaction=i.interaction.filter(t=>t!==r),i.initialHits=i.initialHits.filter(t=>t!==r),i.hovered.forEach((t,s)=>{(t.eventObject===r||t.object===r)&&i.hovered.delete(s)}),i.capturedMap.forEach((t,s)=>{fc(i.capturedMap,r,t,s)})}(p4(r),r));let v=null==(h=r.__r3f)?void 0:h.primitive,y=!v&&(void 0===i?null!==r.dispose:i);if(!v&&(c(null==(f=r.__r3f)?void 0:f.objects,r,y),c(r.children,r,y)),delete r.__r3f,y&&r.dispose&&"Scene"!==r.type){let t=()=>{try{r.dispose()}catch(t){}};"undefined"==typeof IS_REACT_ACT_ENVIRONMENT?(0,pV.unstable_scheduleCallback)(pV.unstable_IdlePriority,t):t()}fo(t)}}let p=()=>{};return{reconciler:pG()({createInstance:i,removeChild:h,appendChild:s,appendInitialChild:s,insertBefore:u,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(t,r)=>{if(!r)return;let i=t.getState().scene;i.__r3f&&(i.__r3f.root=t,s(i,r))},removeChildFromContainer:(t,r)=>{r&&h(t.getState().scene,r)},insertInContainerBefore:(t,r,i)=>{if(!r||!i)return;let s=t.getState().scene;s.__r3f&&u(s,r,i)},getRootHostContext:()=>null,getChildHostContext:t=>t,finalizeInitialChildren(t){var r;return!!(null!=(r=null==t?void 0:t.__r3f)?r:{}).handlers},prepareUpdate(t,r,i,s){var u;if((null!=(u=null==t?void 0:t.__r3f)?u:{}).primitive&&s.object&&s.object!==t)return[!0];{let{args:r=[],children:u,...c}=s,{args:h=[],children:p,...f}=i;if(!Array.isArray(r))throw Error("R3F: the args prop must be an array!");if(r.some((t,r)=>t!==h[r]))return[!0];let v=fr(t,c,f,!0);return v.changes.length?[!1,v]:null}},commitUpdate(t,[r,u],c,p,f,v){r?!function(t,r,u,c){var p;let f=null==(p=t.__r3f)?void 0:p.parent;if(!f)return;let v=i(r,u,t.__r3f.root);if(t.children){for(let r of t.children)r.__r3f&&s(v,r);t.children=t.children.filter(t=>!t.__r3f)}t.__r3f.objects.forEach(t=>s(v,t)),t.__r3f.objects=[],!t.__r3f.autoRemovedBeforeAppend&&h(f,t),v.parent&&(v.__r3f.autoRemovedBeforeAppend=!0),s(f,v),v.raycast&&v.__r3f.eventCount&&p4(v).getState().internal.interaction.push(v),[c,c.alternate].forEach(t=>{null!==t&&(t.stateNode=v,t.ref&&("function"==typeof t.ref?t.ref(v):t.ref.current=v))})}(t,c,f,v):fa(t,u)},commitMount(t,r,i,s){var u;let c=null!=(u=t.__r3f)?u:{};t.raycast&&c.handlers&&c.eventCount&&p4(t).getState().internal.interaction.push(t)},getPublicInstance:t=>t,prepareForCommit:()=>null,preparePortalMount:t=>p8(t.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(t){var r;let{attach:i,parent:s}=null!=(r=t.__r3f)?r:{};i&&s&&fn(s,t,i),t.isObject3D&&(t.visible=!1),fo(t)},unhideInstance(t,r){var i;let{attach:s,parent:u}=null!=(i=t.__r3f)?i:{};s&&u&&ft(u,t,s),(t.isObject3D&&null==r.visible||r.visible)&&(t.visible=!0),fo(t)},createTextInstance:p,hideTextInstance:p,unhideTextInstance:p,getCurrentEventPriority:()=>r?r():pP.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!=typeof performance&&p6.fun(performance.now)?performance.now:p6.fun(Date.now)?Date.now:()=>0,scheduleTimeout:p6.fun(setTimeout)?setTimeout:void 0,cancelTimeout:p6.fun(clearTimeout)?clearTimeout:void 0}),applyProps:fa}}(0,function(){var t;let r="undefined"!=typeof self&&self||"undefined"!=typeof window&&window;if(!r)return pP.DefaultEventPriority;switch(null==(t=r.event)?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return pP.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return pP.ContinuousEventPriority;default:return pP.DefaultEventPriority}}),fR={objects:"shallow",strict:!1},fL=(t,r)=>{let i="function"==typeof t?t(r):t;return fd(i)?i:new lk({powerPreference:"high-performance",canvas:r,antialias:!0,alpha:!0,...t})};function fk(t){let r,i;let s=fT.get(t),u=null==s?void 0:s.fiber,c=null==s?void 0:s.store;let h="function"==typeof reportError?reportError:console.error,p=c||ff(fE,fI),f=u||fD.createContainer(p,pP.ConcurrentRoot,null,!1,null,"",h,null);!s&&fT.set(t,{fiber:f,store:p});let v=!1;return{configure(s={}){var u,c;let{gl:h,size:f,scene:y,events:x,onCreated:_,shadows:b=!1,linear:w=!1,flat:S=!1,legacy:M=!1,orthographic:A=!1,frameloop:C="always",dpr:T=[1,2],performance:I,raycaster:D,camera:P,onPointerMissed:R}=s,L=p.getState(),k=L.gl;!L.gl&&L.set({gl:k=fL(h,t)});let O=L.raycaster;!O&&L.set({raycaster:O=new dK});let{params:B,...N}=D||{};if(!p6.equ(N,O,fR)&&fP(O,{...N}),!p6.equ(B,O.params,fR)&&fP(O,{params:{...O.params,...B}}),!L.camera||L.camera===i&&!p6.equ(i,P,fR)){i=P;let t=P instanceof a6,r=t?P:A?new oC(0,0,0,0,.1,1e3):new oe(75,0,.1,1e3);!t&&(r.position.z=5,P&&(fP(r,P),("aspect"in P||"left"in P||"right"in P||"bottom"in P||"top"in P)&&(r.manual=!0,r.updateProjectionMatrix())),!L.camera&&!(null!=P&&P.rotation)&&r.lookAt(0,0,0)),L.set({camera:r}),O.camera=r}if(!L.scene){let t;y instanceof lN?t=y:(t=new lN,y&&fP(t,y)),L.set({scene:p8(t)})}if(!L.xr){let t=(t,r)=>{let i=p.getState();"never"!==i.frameloop&&fI(t,!0,i,r)},r=()=>{let r=p.getState();r.gl.xr.enabled=r.gl.xr.isPresenting,r.gl.xr.setAnimationLoop(r.gl.xr.isPresenting?t:null),!r.gl.xr.isPresenting&&fE(r)},i={connect(){let t=p.getState().gl;t.xr.addEventListener("sessionstart",r),t.xr.addEventListener("sessionend",r)},disconnect(){let t=p.getState().gl;t.xr.removeEventListener("sessionstart",r),t.xr.removeEventListener("sessionend",r)}};"function"==typeof(null==(u=k.xr)?void 0:u.addEventListener)&&i.connect(),L.set({xr:i})}if(k.shadowMap){let t=k.shadowMap.enabled,r=k.shadowMap.type;k.shadowMap.enabled=!!b,p6.boo(b)?k.shadowMap.type=e_:p6.str(b)?k.shadowMap.type=null!=(c=({basic:ey,percentage:ex,soft:e_,variance:eb})[b])?c:e_:p6.obj(b)&&Object.assign(k.shadowMap,b),(t!==k.shadowMap.enabled||r!==k.shadowMap.type)&&(k.shadowMap.needsUpdate=!0)}let F=pY();F&&("enabled"in F?F.enabled=!M:"legacyMode"in F&&(F.legacyMode=M)),!v&&fP(k,{outputEncoding:w?3e3:3001,toneMapping:S?e8:tn}),L.legacy!==M&&L.set(()=>({legacy:M})),L.linear!==w&&L.set(()=>({linear:w})),L.flat!==S&&L.set(()=>({flat:S})),h&&!p6.fun(h)&&!fd(h)&&!p6.equ(h,k,fR)&&fP(k,h),x&&!L.events.handlers&&L.set({events:x(p)});let z=function(t,r){let i="undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement;if(r){let{width:t,height:s,top:u,left:c,updateStyle:h=i}=r;return{width:t,height:s,top:u,left:c,updateStyle:h}}if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&t.parentElement){let{width:r,height:s,top:u,left:c}=t.parentElement.getBoundingClientRect();return{width:r,height:s,top:u,left:c,updateStyle:i}}if("undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:i};return{width:0,height:0,top:0,left:0}}(t,f);return!p6.equ(z,L.size,fR)&&L.setSize(z.width,z.height,z.updateStyle,z.top,z.left),T&&L.viewport.dpr!==p3(T)&&L.setDpr(T),L.frameloop!==C&&L.setFrameloop(C),!L.onPointerMissed&&L.set({onPointerMissed:R}),I&&!p6.equ(I,L.performance,fR)&&L.set(t=>({performance:{...t.performance,...I}})),r=_,v=!0,this},render(i){return!v&&this.configure(),fD.updateContainer((0,eu.jsx)(fO,{store:p,children:i,onCreated:r,rootElement:t}),f,null,()=>void 0),p},unmount(){fB(t)}}}function fO({store:t,children:r,onCreated:i,rootElement:s}){return pZ(()=>{let r=t.getState();r.set(t=>({internal:{...t.internal,active:!0}})),i&&i(r),!t.getState().events.connected&&(null==r.events.connect||r.events.connect(s))},[]),(0,eu.jsx)(fp.Provider,{value:t,children:r})}function fB(t,r){let i=fT.get(t),s=null==i?void 0:i.fiber;if(s){let u=null==i?void 0:i.store.getState();u&&(u.internal.active=!1),fD.updateContainer(null,s,null,()=>{u&&setTimeout(()=>{try{var i,s,c,h;null==u.events.disconnect||u.events.disconnect(),null==(i=u.gl)||null==(s=i.renderLists)||null==s.dispose||s.dispose(),null==(c=u.gl)||null==c.forceContextLoss||c.forceContextLoss(),null!=(h=u.gl)&&h.xr&&u.xr.disconnect(),!function(t){for(let r in t.dispose&&"Scene"!==t.type&&t.dispose(),t)null==r.dispose||r.dispose(),delete t[r]}(u),fT.delete(t),r&&r(t)}catch(t){}},500)})}}function fN({state:t={},children:r,container:i}){let{events:s,size:u,...c}=t,h=fb(),[p]=pI.useState(()=>new dK),[f]=pI.useState(()=>new rD),v=pI.useCallback((t,r)=>{let v,y={...t};Object.keys(t).forEach(i=>{(fh.includes(i)||t[i]!==r[i]&&r[i])&&delete y[i]});if(r&&u){let i=r.camera;v=t.viewport.getCurrentViewport(i,new r8,u),i!==t.camera&&fl(i,u)}return{...y,scene:i,raycaster:p,pointer:f,mouse:f,previousRoot:h,events:{...t.events,...null==r?void 0:r.events,...s},size:{...t.size,...u},viewport:{...t.viewport,...v},...c}},[t]),[y]=pI.useState(()=>{let t=h.getState();return pL((r,v)=>({...t,scene:i,raycaster:p,pointer:f,mouse:f,previousRoot:h,events:{...t.events,...s},size:{...t.size,...u},...c,set:r,get:v,setEvents:t=>r(r=>({...r,events:{...r.events,...t}}))}))});return pI.useEffect(()=>{let t=h.subscribe(t=>y.setState(r=>v(t,r)));return()=>{t()}},[v]),pI.useEffect(()=>{y.setState(t=>v(h.getState(),t))},[v]),pI.useEffect(()=>()=>{y.destroy()},[]),(0,eu.jsx)(eu.Fragment,{children:fD.createPortal((0,eu.jsx)(fp.Provider,{value:y,children:r}),y,null)})}fD.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:pI.version}),pI.unstable_act;let fF={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function fz(t){let{handlePointer:r}=function(t){function r(t){return t.filter(t=>["Move","Over","Enter","Out","Leave"].some(r=>{var i;return null==(i=t.__r3f)?void 0:i.handlers["onPointer"+r]}))}function i(r){let{internal:i}=t.getState();for(let t of i.hovered.values())if(!r.length||!r.find(r=>r.object===t.object&&r.index===t.index&&r.instanceId===t.instanceId)){let s=t.eventObject.__r3f,u=null==s?void 0:s.handlers;if(i.hovered.delete(fu(t)),null!=s&&s.eventCount){let i={...t,intersections:r};null==u.onPointerOut||u.onPointerOut(i),null==u.onPointerLeave||u.onPointerLeave(i)}}}function s(t,r){for(let i=0;i<r.length;i++){let s=r[i].__r3f;null==s||null==s.handlers.onPointerMissed||s.handlers.onPointerMissed(t)}}return{handlePointer:function(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>i([]);case"onLostPointerCapture":return r=>{let{internal:s}=t.getState();"pointerId"in r&&s.capturedMap.has(r.pointerId)&&requestAnimationFrame(()=>{s.capturedMap.has(r.pointerId)&&(s.capturedMap.delete(r.pointerId),i([]))})}}return function(c){let{onPointerMissed:h,internal:p}=t.getState();p.lastEvent.current=c;let f="onPointerMove"===u,v="onClick"===u||"onContextMenu"===u||"onDoubleClick"===u,y=function(r,i){let s=t.getState(),u=new Set,c=[],h=i?i(s.internal.interaction):s.internal.interaction;for(let t=0;t<h.length;t++){let r=p5(h[t]);r&&(r.raycaster.camera=void 0)}!s.previousRoot&&(null==s.events.compute||s.events.compute(r,s));let p=h.flatMap(function(t){let i=p5(t);if(!i||!i.events.enabled||null===i.raycaster.camera)return[];if(void 0===i.raycaster.camera){var s;null==i.events.compute||i.events.compute(r,i,null==(s=i.previousRoot)?void 0:s.getState()),void 0===i.raycaster.camera&&(i.raycaster.camera=null)}return i.raycaster.camera?i.raycaster.intersectObject(t,!0):[]}).sort((t,r)=>{let i=p5(t.object),s=p5(r.object);return i&&s&&s.events.priority-i.events.priority||t.distance-r.distance}).filter(t=>{let r=fu(t);return!u.has(r)&&(u.add(r),!0)});for(let t of(s.events.filter&&(p=s.events.filter(p,s)),p)){let r=t.object;for(;r;){var f;null!=(f=r.__r3f)&&f.eventCount&&c.push({...t,eventObject:r}),r=r.parent}}if("pointerId"in r&&s.internal.capturedMap.has(r.pointerId))for(let t of s.internal.capturedMap.get(r.pointerId).values())!u.has(fu(t.intersection))&&c.push(t.intersection);return c}(c,f?r:void 0),x=v?function(r){let{internal:i}=t.getState(),s=r.offsetX-i.initialClick[0],u=r.offsetY-i.initialClick[1];return Math.round(Math.sqrt(s*s+u*u))}(c):0;"onPointerDown"===u&&(p.initialClick=[c.offsetX,c.offsetY],p.initialHits=y.map(t=>t.eventObject)),v&&!y.length&&x<=2&&(s(c,p.interaction),h&&h(c)),f&&i(y);!function(r,s,u,c){let h=t.getState();if(r.length){let t={stopped:!1};for(let p of r){let{raycaster:f,pointer:v,camera:y,internal:x}=p5(p.object)||h,_=new r8(v.x,v.y,0).unproject(y),b=t=>{var r,i;return null!=(r=null==(i=x.capturedMap.get(t))?void 0:i.has(p.eventObject))&&r},w=t=>{let r={intersection:p,target:s.target};x.capturedMap.has(t)?x.capturedMap.get(t).set(p.eventObject,r):x.capturedMap.set(t,new Map([[p.eventObject,r]])),s.target.setPointerCapture(t)},S=t=>{let r=x.capturedMap.get(t);r&&fc(x.capturedMap,p.eventObject,r,t)},M={};for(let t in s){let r=s[t];"function"!=typeof r&&(M[t]=r)}let A={...p,...M,pointer:v,intersections:r,stopped:t.stopped,delta:u,unprojectedPoint:_,ray:f.ray,camera:y,stopPropagation(){let u="pointerId"in s&&x.capturedMap.get(s.pointerId);(!u||u.has(p.eventObject))&&(A.stopped=t.stopped=!0,x.hovered.size&&Array.from(x.hovered.values()).find(t=>t.eventObject===p.eventObject)&&i([...r.slice(0,r.indexOf(p)),p]))},target:{hasPointerCapture:b,setPointerCapture:w,releasePointerCapture:S},currentTarget:{hasPointerCapture:b,setPointerCapture:w,releasePointerCapture:S},nativeEvent:s};if(c(A),!0===t.stopped)break}};}(y,c,x,function(t){let r=t.eventObject,i=r.__r3f,h=null==i?void 0:i.handlers;if(null!=i&&i.eventCount){if(f){if(h.onPointerOver||h.onPointerEnter||h.onPointerOut||h.onPointerLeave){let r=fu(t),i=p.hovered.get(r);i?i.stopped&&t.stopPropagation():(p.hovered.set(r,t),null==h.onPointerOver||h.onPointerOver(t),null==h.onPointerEnter||h.onPointerEnter(t))}null==h.onPointerMove||h.onPointerMove(t)}else{let i=h[u];i?(!v||p.initialHits.includes(r))&&(s(c,p.interaction.filter(t=>!p.initialHits.includes(t))),i(t)):v&&p.initialHits.includes(r)&&s(c,p.interaction.filter(t=>!p.initialHits.includes(t)))}}})}}}}(t);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(2*(t.offsetY/r.size.height))+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(fF).reduce((t,i)=>({...t,[i]:r(i)}),{}),update:()=>{var r;let{events:i,internal:s}=t.getState();null!=(r=s.lastEvent)&&r.current&&i.handlers&&i.handlers.onPointerMove(s.lastEvent.current)},connect:r=>{var i;let{set:s,events:u}=t.getState();null==u.disconnect||u.disconnect(),s(t=>({events:{...t.events,connected:r}})),Object.entries(null!=(i=u.handlers)?i:[]).forEach(([t,i])=>{let[s,u]=fF[t];r.addEventListener(s,i,{passive:u})})},disconnect:()=>{let{set:r,events:i}=t.getState();if(i.connected){var s;Object.entries(null!=(s=i.handlers)?s:[]).forEach(([t,r])=>{if(i&&i.connected instanceof HTMLElement){let[s]=fF[t];i.connected.removeEventListener(s,r)}}),r(t=>({events:{...t.events,connected:void 0}}))}}}}var fU=i("1110"),fH=i.n(fU),fG=Object.defineProperty,fV=Object.defineProperties,fW=Object.getOwnPropertyDescriptors,fj=Object.getOwnPropertySymbols,fX=Object.prototype.hasOwnProperty,fY=Object.prototype.propertyIsEnumerable,f$=(t,r,i)=>r in t?fG(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,fJ=(t,r)=>{for(var i in r||(r={}))fX.call(r,i)&&f$(t,i,r[i]);if(fj)for(var i of fj(r))fY.call(r,i)&&f$(t,i,r[i]);return t},fZ=(t,r)=>fV(t,fW(r));let fK="undefined"!=typeof window&&((null==(eac=window.document)?void 0:eac.createElement)||(null==(eah=window.navigator)?void 0:eah.product)==="ReactNative")?pI.useLayoutEffect:pI.useEffect;function fq(t,r,i){if(!t)return;if(!0===i(t))return t;let s=r?t.return:t.child;for(;s;){let t=fq(s,r,i);if(t)return t;s=r?null:s.sibling}}function fQ(t){try{return Object.defineProperties(t,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(r){return t}}let f0=console.error;console.error=function(){let t=[...arguments].join("");if((null==t?void 0:t.startsWith("Warning:"))&&t.includes("useContext")){console.error=f0;return}return f0.apply(this,arguments)};let f1=fQ(pI.createContext(null));class f2 extends pI.Component{render(){return pI.createElement(f1.Provider,{value:this._reactInternals},this.props.children)}}function f3(){let t=pI.useContext(f1);if(null===t)throw Error("its-fine: useFiber must be called within a <FiberProvider />!");let r=pI.useId();return pI.useMemo(()=>{for(let i of[t,null==t?void 0:t.alternate]){if(!i)continue;let t=fq(i,!1,t=>{let i=t.memoizedState;for(;i;){if(i.memoizedState===r)return!0;i=i.next}});if(t)return t}},[t,r])}let f5=["x","y","top","bottom","left","right","width","height"],f4=(t,r)=>f5.every(i=>t[i]===r[i]),f6=pI.forwardRef(function({children:t,fallback:r,resize:i,style:s,gl:u,events:c=fz,eventSource:h,eventPrefix:p,shadows:f,linear:v,flat:y,legacy:x,orthographic:_,frameloop:b,dpr:w,performance:S,raycaster:M,camera:A,scene:C,onPointerMissed:T,onCreated:I,...D},P){pI.useMemo(()=>pj(J),[]);let R=function(){let t=function(){let t=f3(),[r]=pI.useState(()=>new Map);r.clear();let i=t;for(;i;){if(i.type&&"object"==typeof i.type){let t=void 0===i.type._context&&i.type.Provider===i.type?i.type:i.type._context;t&&t!==f1&&!r.has(t)&&r.set(t,pI.useContext(fQ(t)))}i=i.return}return r}();return pI.useMemo(()=>Array.from(t.keys()).reduce((r,i)=>s=>pI.createElement(r,null,pI.createElement(i.Provider,fZ(fJ({},s),{value:t.get(i)}))),t=>pI.createElement(f2,fJ({},t))),[t])}(),[L,k]=function({debounce:t,scroll:r,polyfill:i,offsetSize:s}={debounce:0,scroll:!1,offsetSize:!1}){let u=i||"undefined"!=typeof window&&window.ResizeObserver,[c,h]=(0,pI.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!u)return c.width=1280,c.height=800,[()=>{},c,()=>{}];let p=(0,pI.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:c,orientationHandler:null}),f=t?"number"==typeof t?t:t.scroll:null,v=t?"number"==typeof t?t:t.resize:null,y=(0,pI.useRef)(!1);(0,pI.useEffect)(()=>(y.current=!0,()=>void(y.current=!1)));let[x,_,b]=(0,pI.useMemo)(()=>{let t=()=>{if(!p.current.element)return;let{left:t,top:r,width:i,height:u,bottom:c,right:f,x:v,y:x}=p.current.element.getBoundingClientRect(),_={left:t,top:r,width:i,height:u,bottom:c,right:f,x:v,y:x};p.current.element instanceof HTMLElement&&s&&(_.height=p.current.element.offsetHeight,_.width=p.current.element.offsetWidth),Object.freeze(_),y.current&&!f4(p.current.lastBounds,_)&&h(p.current.lastBounds=_)};return[t,v?fH()(t,v):t,f?fH()(t,f):t]},[h,s,f,v]);function w(){p.current.scrollContainers&&(p.current.scrollContainers.forEach(t=>t.removeEventListener("scroll",b,!0)),p.current.scrollContainers=null),p.current.resizeObserver&&(p.current.resizeObserver.disconnect(),p.current.resizeObserver=null),p.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",p.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",p.current.orientationHandler))}function S(){var t;p.current.element&&(p.current.resizeObserver=new u(_),null==(t=p.current.resizeObserver)||t.observe(p.current.element),r&&p.current.scrollContainers&&p.current.scrollContainers.forEach(t=>t.addEventListener("scroll",b,{capture:!0,passive:!0})),p.current.orientationHandler=()=>{b()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",p.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",p.current.orientationHandler))}return function(t,r){(0,pI.useEffect)(()=>{if(r)return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)},[t,r])}(b,!!r),function(t){(0,pI.useEffect)(()=>(window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)),[t])}(_),(0,pI.useEffect)(()=>{w(),S()},[r,b,_]),(0,pI.useEffect)(()=>w,[]),[t=>{t&&t!==p.current.element&&(w(),p.current.element=t,p.current.scrollContainers=function t(r){let i=[];if(!r||r===document.body)return i;let{overflow:s,overflowX:u,overflowY:c}=window.getComputedStyle(r);return[s,u,c].some(t=>"auto"===t||"scroll"===t)&&i.push(r),[...i,...t(r.parentElement)]}(t),S())},c,x]}({scroll:!0,debounce:{scroll:50,resize:0},...i}),O=pI.useRef(null),B=pI.useRef(null);pI.useImperativeHandle(P,()=>O.current);let N=pK(T),[F,z]=pI.useState(!1),[U,H]=pI.useState(!1);if(F)throw F;if(U)throw U;let G=pI.useRef(null);pZ(()=>{let r=O.current;k.width>0&&k.height>0&&r&&(!G.current&&(G.current=fk(r)),G.current.configure({gl:u,events:c,shadows:f,linear:v,flat:y,legacy:x,orthographic:_,frameloop:b,dpr:w,performance:S,raycaster:M,camera:A,scene:C,size:k,onPointerMissed:(...t)=>null==N.current?void 0:N.current(...t),onCreated:t=>{null==t.events.connect||t.events.connect(h?pJ(h)?h.current:h:B.current),p&&t.setEvents({compute:(t,r)=>{let i=t[p+"X"],s=t[p+"Y"];r.pointer.set(i/r.size.width*2-1,-(2*(s/r.size.height))+1),r.raycaster.setFromCamera(r.pointer,r.camera)}}),null==I||I(t)}}),G.current.render((0,eu.jsx)(R,{children:(0,eu.jsx)(pQ,{set:H,children:(0,eu.jsx)(pI.Suspense,{fallback:(0,eu.jsx)(pq,{set:z}),children:t})})})))}),pI.useEffect(()=>{let t=O.current;if(t)return()=>fB(t)},[]);let V=h?"none":"auto";return(0,eu.jsx)("div",{ref:B,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:V,...s},...D,children:(0,eu.jsx)("div",{ref:L,style:{width:"100%",height:"100%"},children:(0,eu.jsx)("canvas",{ref:O,style:{display:"block"},children:r})})})}),f9=pI.forwardRef(function(t,r){return(0,eu.jsx)(f2,{children:(0,eu.jsx)(f6,{...t,ref:r})})}),f8=t=>{let r=gn(t),{conflictingClassGroups:i,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:t=>{let i=t.split("-");return""===i[0]&&1!==i.length&&i.shift(),f7(i,r)||gt(t)},getConflictingClassGroupIds:(t,r)=>{let u=i[t]||[];return r&&s[t]?[...u,...s[t]]:u}}},f7=(t,r)=>{if(0===t.length)return r.classGroupId;let i=t[0],s=r.nextPart.get(i),u=s?f7(t.slice(1),s):void 0;if(u)return u;if(0===r.validators.length)return;let c=t.join("-");return r.validators.find(({validator:t})=>t(c))?.classGroupId},ge=/^\[(.+)\]$/,gt=t=>{if(ge.test(t)){let r=ge.exec(t)[1],i=r?.substring(0,r.indexOf(":"));if(i)return"arbitrary.."+i}},gn=t=>{let{theme:r,prefix:i}=t,s={nextPart:new Map,validators:[]};return go(Object.entries(t.classGroups),i).forEach(([t,i])=>{gr(i,s,t,r)}),s},gr=(t,r,i,s)=>{t.forEach(t=>{if("string"==typeof t){(""===t?r:gi(r,t)).classGroupId=i;return}if("function"==typeof t){if(ga(t)){gr(t(s),r,i,s);return}r.validators.push({validator:t,classGroupId:i});return}Object.entries(t).forEach(([t,u])=>{gr(u,gi(r,t),i,s)})})},gi=(t,r)=>{let i=t;return r.split("-").forEach(t=>{!i.nextPart.has(t)&&i.nextPart.set(t,{nextPart:new Map,validators:[]}),i=i.nextPart.get(t)}),i},ga=t=>t.isThemeGetter,go=(t,r)=>r?t.map(([t,i])=>[t,i.map(t=>"string"==typeof t?r+t:"object"==typeof t?Object.fromEntries(Object.entries(t).map(([t,i])=>[r+t,i])):t)]):t,gs=t=>{if(t<1)return{get:()=>void 0,set:()=>{}};let r=0,i=new Map,s=new Map,u=(u,c)=>{i.set(u,c),++r>t&&(r=0,s=i,i=new Map)};return{get(t){let r=i.get(t);return void 0!==r?r:void 0!==(r=s.get(t))?(u(t,r),r):void 0},set(t,r){i.has(t)?i.set(t,r):u(t,r)}}},gl=t=>{let{separator:r,experimentalParseClassName:i}=t,s=1===r.length,u=r[0],c=r.length,h=t=>{let i;let h=[],p=0,f=0;for(let v=0;v<t.length;v++){let y=t[v];if(0===p){if(y===u&&(s||t.slice(v,v+c)===r)){h.push(t.slice(f,v)),f=v+c;continue}if("/"===y){i=v;continue}}"["===y?p++:"]"===y&&p--}let v=0===h.length?t:t.substring(f),y=v.startsWith("!"),x=y?v.substring(1):v;return{modifiers:h,hasImportantModifier:y,baseClassName:x,maybePostfixModifierPosition:i&&i>f?i-f:void 0}};return i?t=>i({className:t,parseClassName:h}):h},gu=t=>{if(t.length<=1)return t;let r=[],i=[];return t.forEach(t=>{"["===t[0]?(r.push(...i.sort(),t),i=[]):i.push(t)}),r.push(...i.sort()),r},gc=t=>({cache:gs(t.cacheSize),parseClassName:gl(t),...f8(t)}),gh=/\s+/,gd=(t,r)=>{let{parseClassName:i,getClassGroupId:s,getConflictingClassGroupIds:u}=r,c=[],h=t.trim().split(gh),p="";for(let t=h.length-1;t>=0;t-=1){let r=h[t],{modifiers:f,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:x}=i(r),_=!!x,b=s(_?y.substring(0,x):y);if(!b){if(!_||!(b=s(y))){p=r+(p.length>0?" "+p:p);continue}_=!1}let w=gu(f).join(":"),S=v?w+"!":w,M=S+b;if(c.includes(M))continue;c.push(M);let A=u(b,_);for(let t=0;t<A.length;++t){let r=A[t];c.push(S+r)}p=r+(p.length>0?" "+p:p)}return p};function gp(){let t,r,i=0,s="";for(;i<arguments.length;)(t=arguments[i++])&&(r=gf(t))&&(s&&(s+=" "),s+=r);return s}let gf=t=>{let r;if("string"==typeof t)return t;let i="";for(let s=0;s<t.length;s++)t[s]&&(r=gf(t[s]))&&(i&&(i+=" "),i+=r);return i},gg=t=>{let r=r=>r[t]||[];return r.isThemeGetter=!0,r},gm=/^\[(?:([a-z-]+):)?(.+)\]$/i,gv=/^\d+\/\d+$/,gy=new Set(["px","full","screen"]),gx=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,g_=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,gb=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,gw=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,gS=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gM=t=>gC(t)||gy.has(t)||gv.test(t),gA=t=>gz(t,"length",gU),gC=t=>!!t&&!Number.isNaN(Number(t)),gT=t=>gz(t,"number",gC),gE=t=>!!t&&Number.isInteger(Number(t)),gI=t=>t.endsWith("%")&&gC(t.slice(0,-1)),gD=t=>gm.test(t),gP=t=>gx.test(t),gR=new Set(["length","size","percentage"]),gL=t=>gz(t,gR,gH),gk=t=>gz(t,"position",gH),gO=new Set(["image","url"]),gB=t=>gz(t,gO,gV),gN=t=>gz(t,"",gG),gF=()=>!0,gz=(t,r,i)=>{let s=gm.exec(t);if(s)return s[1]?"string"==typeof r?s[1]===r:r.has(s[1]):i(s[2]);return!1},gU=t=>g_.test(t)&&!gb.test(t),gH=()=>!1,gG=t=>gw.test(t),gV=t=>gS.test(t);Symbol.toStringTag;let gW=function(t,...r){let i,s,u;let c=function(p){return s=(i=gc(r.reduce((t,r)=>r(t),t()))).cache.get,u=i.cache.set,c=h,h(p)};function h(t){let r=s(t);if(r)return r;let c=gd(t,i);return u(t,c),c}return function(){return c(gp.apply(null,arguments))}}(()=>{let t=gg("colors"),r=gg("spacing"),i=gg("blur"),s=gg("brightness"),u=gg("borderColor"),c=gg("borderRadius"),h=gg("borderSpacing"),p=gg("borderWidth"),f=gg("contrast"),v=gg("grayscale"),y=gg("hueRotate"),x=gg("invert"),_=gg("gap"),b=gg("gradientColorStops"),w=gg("gradientColorStopPositions"),S=gg("inset"),M=gg("margin"),A=gg("opacity"),C=gg("padding"),T=gg("saturate"),I=gg("scale"),D=gg("sepia"),P=gg("skew"),R=gg("space"),L=gg("translate"),k=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto",gD,r],N=()=>[gD,r],F=()=>["",gM,gA],z=()=>["auto",gC,gD],U=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",gD],j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[gC,gD];return{cacheSize:500,separator:":",theme:{colors:[gF],spacing:[gM,gA],blur:["none","",gP,gD],brightness:X(),borderColor:[t],borderRadius:["none","","full",gP,gD],borderSpacing:N(),borderWidth:F(),contrast:X(),grayscale:W(),hueRotate:X(),invert:W(),gap:N(),gradientColorStops:[t],gradientColorStopPositions:[gI,gA],inset:B(),margin:B(),opacity:X(),padding:N(),saturate:X(),scale:X(),sepia:W(),skew:X(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",gD]}],container:["container"],columns:[{columns:[gP]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...U(),gD]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[S]}],"inset-x":[{"inset-x":[S]}],"inset-y":[{"inset-y":[S]}],start:[{start:[S]}],end:[{end:[S]}],top:[{top:[S]}],right:[{right:[S]}],bottom:[{bottom:[S]}],left:[{left:[S]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",gE,gD]}],basis:[{basis:B()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",gD]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",gE,gD]}],"grid-cols":[{"grid-cols":[gF]}],"col-start-end":[{col:["auto",{span:["full",gE,gD]},gD]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[gF]}],"row-start-end":[{row:["auto",{span:[gE,gD]},gD]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",gD]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",gD]}],gap:[{gap:[_]}],"gap-x":[{"gap-x":[_]}],"gap-y":[{"gap-y":[_]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[M]}],mx:[{mx:[M]}],my:[{my:[M]}],ms:[{ms:[M]}],me:[{me:[M]}],mt:[{mt:[M]}],mr:[{mr:[M]}],mb:[{mb:[M]}],ml:[{ml:[M]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",gD,r]}],"min-w":[{"min-w":[gD,r,"min","max","fit"]}],"max-w":[{"max-w":[gD,r,"none","full","min","max","fit","prose",{screen:[gP]},gP]}],h:[{h:[gD,r,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[gD,r,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[gD,r,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[gD,r,"auto","min","max","fit"]}],"font-size":[{text:["base",gP,gA]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",gT]}],"font-family":[{font:[gF]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",gD]}],"line-clamp":[{"line-clamp":["none",gC,gT]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",gM,gD]}],"list-image":[{"list-image":["none",gD]}],"list-style-type":[{list:["none","disc","decimal",gD]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",gM,gA]}],"underline-offset":[{"underline-offset":["auto",gM,gD]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",gD]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",gD]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...U(),gk]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",gL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},gB]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[c]}],"rounded-s":[{"rounded-s":[c]}],"rounded-e":[{"rounded-e":[c]}],"rounded-t":[{"rounded-t":[c]}],"rounded-r":[{"rounded-r":[c]}],"rounded-b":[{"rounded-b":[c]}],"rounded-l":[{"rounded-l":[c]}],"rounded-ss":[{"rounded-ss":[c]}],"rounded-se":[{"rounded-se":[c]}],"rounded-ee":[{"rounded-ee":[c]}],"rounded-es":[{"rounded-es":[c]}],"rounded-tl":[{"rounded-tl":[c]}],"rounded-tr":[{"rounded-tr":[c]}],"rounded-br":[{"rounded-br":[c]}],"rounded-bl":[{"rounded-bl":[c]}],"border-w":[{border:[p]}],"border-w-x":[{"border-x":[p]}],"border-w-y":[{"border-y":[p]}],"border-w-s":[{"border-s":[p]}],"border-w-e":[{"border-e":[p]}],"border-w-t":[{"border-t":[p]}],"border-w-r":[{"border-r":[p]}],"border-w-b":[{"border-b":[p]}],"border-w-l":[{"border-l":[p]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[p]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[p]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:H()}],"border-color":[{border:[u]}],"border-color-x":[{"border-x":[u]}],"border-color-y":[{"border-y":[u]}],"border-color-s":[{"border-s":[u]}],"border-color-e":[{"border-e":[u]}],"border-color-t":[{"border-t":[u]}],"border-color-r":[{"border-r":[u]}],"border-color-b":[{"border-b":[u]}],"border-color-l":[{"border-l":[u]}],"divide-color":[{divide:[u]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[gM,gD]}],"outline-w":[{outline:[gM,gA]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[gM,gA]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",gP,gN]}],"shadow-color":[{shadow:[gF]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[i]}],brightness:[{brightness:[s]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",gP,gD]}],grayscale:[{grayscale:[v]}],"hue-rotate":[{"hue-rotate":[y]}],invert:[{invert:[x]}],saturate:[{saturate:[T]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[i]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[v]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[y]}],"backdrop-invert":[{"backdrop-invert":[x]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[h]}],"border-spacing-x":[{"border-spacing-x":[h]}],"border-spacing-y":[{"border-spacing-y":[h]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",gD]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",gD]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",gD]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[gE,gD]}],"translate-x":[{"translate-x":[L]}],"translate-y":[{"translate-y":[L]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",gD]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",gD]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",gD]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[gM,gA,gT]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}),gj=function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return gW(function(){for(var t,r,i=0,s="",u=arguments.length;i<u;i++)(t=arguments[i])&&(r=function t(r){var i,s,u="";if("string"==typeof r||"number"==typeof r)u+=r;else if("object"==typeof r){if(Array.isArray(r)){var c=r.length;for(i=0;i<c;i++)r[i]&&(s=t(r[i]))&&(u&&(u+=" "),u+=s)}else for(s in r)r[s]&&(u&&(u+=" "),u+=s)}return u}(t))&&(s&&(s+=" "),s+=r);return s}(r))},gX={props:{canvas:{shadows:!0,orthographic:!0,dpr:[1,2],camera:{position:[25,50,50],fov:20,zoom:50},flat:!0,frameloop:"demand"},shadow:{frames:60,color:"#cbd5e1",colorBlend:2,toneMapped:!0,alphaTest:.75,opacity:.9,scale:16},light:{intensity:3.5,amount:8,radius:4,ambient:.5,position:[-25,50,25],bias:.001,size:16},grid:{args:[10.5,10.5],cellSize:.5,cellThickness:.5,cellColor:"#a3a3a3",sectionSize:3,sectionThickness:1,sectionColor:"#a3a3a3",fadeStrength:1,followCamera:!1,infiniteGrid:!0},camera:{makeDefault:!0,dollyToCursor:!1,maxPolarAngle:Math.PI/2.2,minZoom:25,maxZoom:150,minDistance:5,maxDistance:15},background:{attach:"background",args:["#f5f5f5"]},fog:{attach:"fog",args:["#f5f5f5",60,100]}}};function gY(){return(gY=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var s in i)({}).hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}).apply(null,arguments)}let g$=t=>t&&t.isCubeTexture;class gJ extends aq{constructor(t,r){var i,s;let u=g$(t),c=null!=(s=u?null==(i=t.image[0])?void 0:i.width:t.image.width)?s:1024,h=Math.floor(Math.log2(c/4)),p=Math.pow(2,h),f=3*Math.max(p,112),v=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,y=[u?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/f}`,`#define CUBEUV_TEXEL_HEIGHT ${1/(4*p)}`,`#define CUBEUV_MAX_MIP ${h}.0`].join("\n")+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(eh.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,x={map:{value:t},height:{value:(null==r?void 0:r.height)||15},radius:{value:(null==r?void 0:r.radius)||100}},_=new c1(1,16);super(_,new a4({uniforms:x,fragmentShader:y,vertexShader:v,side:eM}))}set radius(t){this.material.uniforms.radius.value=t}get radius(){return this.material.uniforms.radius.value}set height(t){this.material.uniforms.height.value=t}get height(){return this.material.uniforms.height.value}}class gZ extends hV{constructor(t){super(t),this.type=tk}parse(t){let r,i,s;let u=function(t,r){switch(t){case 1:throw Error("THREE.RGBELoader: Read Error: "+(r||""));case 2:throw Error("THREE.RGBELoader: Write Error: "+(r||""));case 3:throw Error("THREE.RGBELoader: Bad File Format: "+(r||""));default:throw Error("THREE.RGBELoader: Memory Error: "+(r||""))}},c=function(t,r,i){r=r||1024;let s=t.pos,u=-1,c=0,h="",p=String.fromCharCode.apply(null,new Uint16Array(t.subarray(s,s+128)));for(;0>(u=p.indexOf("\n"))&&c<r&&s<t.byteLength;)h+=p,c+=p.length,s+=128,p+=String.fromCharCode.apply(null,new Uint16Array(t.subarray(s,s+128)));return!!(-1<u)&&(!1!==i&&(t.pos+=c+u+1),h+p.slice(0,u))},h=new Uint8Array(t);h.pos=0;let p=function(t){let r,i;let s=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,h=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,p=/^\s*FORMAT=(\S+)\s*$/,f=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,v={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};for((t.pos>=t.byteLength||!(r=c(t)))&&u(1,"no header found"),!(i=r.match(/^#\?(\S+)/))&&u(3,"bad initial token"),v.valid|=1,v.programtype=i[1],v.string+=r+"\n";!1!==(r=c(t));){;if(v.string+=r+"\n","#"===r.charAt(0)){v.comments+=r+"\n";continue}if((i=r.match(s))&&(v.gamma=parseFloat(i[1])),(i=r.match(h))&&(v.exposure=parseFloat(i[1])),(i=r.match(p))&&(v.valid|=2,v.format=i[1]),(i=r.match(f))&&(v.valid|=4,v.height=parseInt(i[1],10),v.width=parseInt(i[2],10)),2&v.valid&&4&v.valid)break}return!(2&v.valid)&&u(3,"missing format specifier"),!(4&v.valid)&&u(3,"missing image size specifier"),v}(h),f=p.width,v=p.height,y=function(t,r,i){if(r<8||r>32767||2!==t[0]||2!==t[1]||128&t[2])return new Uint8Array(t);r!==(t[2]<<8|t[3])&&u(3,"wrong scanline width");let s=new Uint8Array(4*r*i);!s.length&&u(4,"unable to allocate buffer space");let c=0,h=0,p=4*r,f=new Uint8Array(4),v=new Uint8Array(p),y=i;for(;y>0&&h<t.byteLength;){h+4>t.byteLength&&u(1),f[0]=t[h++],f[1]=t[h++],f[2]=t[h++],f[3]=t[h++],(2!=f[0]||2!=f[1]||(f[2]<<8|f[3])!=r)&&u(3,"bad rgbe scanline format");let i=0,x;for(;i<p&&h<t.byteLength;){let r=(x=t[h++])>128;if(r&&(x-=128),(0===x||i+x>p)&&u(3,"bad scanline data"),r){let r=t[h++];for(let t=0;t<x;t++)v[i++]=r}else v.set(t.subarray(h,h+x),i),i+=x,h+=x}for(let t=0;t<r;t++){let i=0;s[c]=v[t+i],i+=r,s[c+1]=v[t+i],i+=r,s[c+2]=v[t+i],i+=r,s[c+3]=v[t+i],c+=4}y--}return s}(h.subarray(h.pos),f,v);switch(this.type){case tL:let x=new Float32Array(4*(s=y.length/4));for(let t=0;t<s;t++)!function(t,r,i,s){let u=Math.pow(2,t[r+3]-128)/255;i[s+0]=t[r+0]*u,i[s+1]=t[r+1]*u,i[s+2]=t[r+2]*u,i[s+3]=1}(y,4*t,x,4*t);r=x,i=tL;break;case tk:let _=new Uint16Array(4*(s=y.length/4));for(let t=0;t<s;t++)!function(t,r,i,s){let u=Math.pow(2,t[r+3]-128)/255;i[s+0]=a_.toHalfFloat(Math.min(t[r+0]*u,65504)),i[s+1]=a_.toHalfFloat(Math.min(t[r+1]*u,65504)),i[s+2]=a_.toHalfFloat(Math.min(t[r+2]*u,65504)),i[s+3]=a_.toHalfFloat(1)}(y,4*t,_,4*t);r=_,i=tk;break;default:throw Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:f,height:v,data:r,header:p.string,gamma:p.gamma,exposure:p.exposure,type:i}}setDataType(t){return this.type=t,this}load(t,r,i,s){return super.load(t,function(t,i){switch(t.type){case tL:case tk:"colorSpace"in t?t.colorSpace="srgb-linear":t.encoding=3e3,t.minFilter=tw,t.magFilter=tw,t.generateMipmaps=!1,t.flipY=!0}r&&r(t,i)},i,s)}}var gK=function(t,r,i,s,u){var c=new Worker(null[r]||(null[r]=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))));return c.onerror=function(t){return u(t.error,null)},c.onmessage=function(t){return u(null,t.data)},c.postMessage(i,s),c},gq=Uint8Array,gQ=Uint16Array,g0=Uint32Array,g1=new gq([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),g2=new gq([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),g3=new gq([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),g5=function(t,r){for(var i=new gQ(31),s=0;s<31;++s)i[s]=r+=1<<t[s-1];for(var u=new g0(i[30]),s=1;s<30;++s)for(var c=i[s];c<i[s+1];++c)u[c]=c-i[s]<<5|s;return[i,u]},g4=g5(g1,2),g6=g4[0],g9=g4[1];g6[28]=258,g9[258]=28;for(var g8=g5(g2,0),g7=g8[0],me=g8[1],mt=new gQ(32768),mn=0;mn<32768;++mn){var mr=(43690&mn)>>>1|(21845&mn)<<1;mr=(61680&(mr=(52428&mr)>>>2|(13107&mr)<<2))>>>4|(3855&mr)<<4,mt[mn]=((65280&mr)>>>8|(255&mr)<<8)>>>1}for(var mi=function(t,r,i){for(var s,u=t.length,c=0,h=new gQ(r);c<u;++c)++h[t[c]-1];var p=new gQ(r);for(c=0;c<r;++c)p[c]=p[c-1]+h[c-1]<<1;if(i){s=new gQ(1<<r);var f=15-r;for(c=0;c<u;++c)if(t[c]){for(var v=c<<4|t[c],y=r-t[c],x=p[t[c]-1]++<<y,_=x|(1<<y)-1;x<=_;++x)s[mt[x]>>>f]=v}}else for(c=0,s=new gQ(u);c<u;++c)t[c]&&(s[c]=mt[p[t[c]-1]++]>>>15-t[c]);return s},ma=new gq(288),mn=0;mn<144;++mn)ma[mn]=8;for(var mn=144;mn<256;++mn)ma[mn]=9;for(var mn=256;mn<280;++mn)ma[mn]=7;for(var mn=280;mn<288;++mn)ma[mn]=8;for(var mo=new gq(32),mn=0;mn<32;++mn)mo[mn]=5;var ms=mi(ma,9,1),ml=mi(mo,5,1),mu=function(t){for(var r=t[0],i=1;i<t.length;++i)t[i]>r&&(r=t[i]);return r},mc=function(t,r,i){var s=r/8|0;return(t[s]|t[s+1]<<8)>>(7&r)&i},mh=function(t,r){var i=r/8|0;return(t[i]|t[i+1]<<8|t[i+2]<<16)>>(7&r)},md=function(t){return(t/8|0)+(7&t&&1)},mp=function(t,r,i){(null==r||r<0)&&(r=0),(null==i||i>t.length)&&(i=t.length);var s=new(t instanceof gQ?gQ:t instanceof g0?g0:gq)(i-r);return s.set(t.subarray(r,i)),s},mf=function(t,r,i){var s=t.length;if(!s||i&&!i.l&&s<5)return r||new gq(0);var u=!r||i,c=!i||i.i;!i&&(i={}),!r&&(r=new gq(3*s));var h=function(t){var i=r.length;if(t>i){var s=new gq(Math.max(2*i,t));s.set(r),r=s}},p=i.f||0,f=i.p||0,v=i.b||0,y=i.l,x=i.d,_=i.m,b=i.n,w=8*s;do{if(!y){i.f=p=mc(t,f,1);var S=mc(t,f+1,3);if(f+=3,S){if(1==S)y=ms,x=ml,_=9,b=5;else if(2==S){var M=mc(t,f,31)+257,A=mc(t,f+10,15)+4,C=M+mc(t,f+5,31)+1;f+=14;for(var T=new gq(C),I=new gq(19),D=0;D<A;++D)I[g3[D]]=mc(t,f+3*D,7);f+=3*A;for(var P=mu(I),R=(1<<P)-1,L=mi(I,P,1),D=0;D<C;){var k=L[mc(t,f,R)];f+=15&k;var O=k>>>4;if(O<16)T[D++]=O;else{var B=0,N=0;for(16==O?(N=3+mc(t,f,3),f+=2,B=T[D-1]):17==O?(N=3+mc(t,f,7),f+=3):18==O&&(N=11+mc(t,f,127),f+=7);N--;)T[D++]=B}}var F=T.subarray(0,M),z=T.subarray(M);_=mu(F),b=mu(z),y=mi(F,_,1),x=mi(z,b,1)}else throw"invalid block type"}else{var O=md(f)+4,U=t[O-4]|t[O-3]<<8,H=O+U;if(H>s){if(c)throw"unexpected EOF";break}u&&h(v+U),r.set(t.subarray(O,H),v),i.b=v+=U,i.p=f=8*H;continue}if(f>w){if(c)throw"unexpected EOF";break}}u&&h(v+131072);for(var G=(1<<_)-1,V=(1<<b)-1,W=f;;W=f){var B=y[mh(t,f)&G],j=B>>>4;if((f+=15&B)>w){if(c)throw"unexpected EOF";break}if(!B)throw"invalid length/literal";if(j<256)r[v++]=j;else if(256==j){W=f,y=null;break}else{var X=j-254;if(j>264){var D=j-257,Y=g1[D];X=mc(t,f,(1<<Y)-1)+g6[D],f+=Y}var $=x[mh(t,f)&V],J=$>>>4;if(!$)throw"invalid distance";f+=15&$;var z=g7[J];if(J>3){var Y=g2[J];z+=mh(t,f)&(1<<Y)-1,f+=Y}if(f>w){if(c)throw"unexpected EOF";break}u&&h(v+131072);for(var Z=v+X;v<Z;v+=4)r[v]=r[v-z],r[v+1]=r[v+1-z],r[v+2]=r[v+2-z],r[v+3]=r[v+3-z];v=Z}}i.l=y,i.p=W,i.b=v,y&&(p=1,i.m=_,i.d=x,i.n=b)}while(!p);return v==r.length?r:mp(r,0,v)},mg=function(t,r,i){i<<=7&r;var s=r/8|0;t[s]|=i,t[s+1]|=i>>>8},mm=function(t,r,i){i<<=7&r;var s=r/8|0;t[s]|=i,t[s+1]|=i>>>8,t[s+2]|=i>>>16},mv=function(t,r){for(var i=[],s=0;s<t.length;++s)t[s]&&i.push({s:s,f:t[s]});var u=i.length,c=i.slice();if(!u)return[mM,0];if(1==u){var h=new gq(i[0].s+1);return h[i[0].s]=1,[h,1]}i.sort(function(t,r){return t.f-r.f}),i.push({s:-1,f:25001});var p=i[0],f=i[1],v=0,y=1,x=2;for(i[0]={s:-1,f:p.f+f.f,l:p,r:f};y!=u-1;)p=i[i[v].f<i[x].f?v++:x++],f=i[v!=y&&i[v].f<i[x].f?v++:x++],i[y++]={s:-1,f:p.f+f.f,l:p,r:f};for(var _=c[0].s,s=1;s<u;++s)c[s].s>_&&(_=c[s].s);var b=new gQ(_+1),w=my(i[y-1],b,0);if(w>r){var s=0,S=0,M=w-r,A=1<<M;for(c.sort(function(t,r){return b[r.s]-b[t.s]||t.f-r.f});s<u;++s){var C=c[s].s;if(b[C]>r)S+=A-(1<<w-b[C]),b[C]=r;else break}for(S>>>=M;S>0;){var T=c[s].s;b[T]<r?S-=1<<r-b[T]++-1:++s}for(;s>=0&&S;--s){var I=c[s].s;b[I]==r&&(--b[I],++S)}w=r}return[new gq(b),w]},my=function(t,r,i){return -1==t.s?Math.max(my(t.l,r,i+1),my(t.r,r,i+1)):r[t.s]=i},mx=function(t){for(var r=t.length;r&&!t[--r];);for(var i=new gQ(++r),s=0,u=t[0],c=1,h=function(t){i[s++]=t},p=1;p<=r;++p)if(t[p]==u&&p!=r)++c;else{if(!u&&c>2){for(;c>138;c-=138)h(32754);c>2&&(h(c>10?c-11<<5|28690:c-3<<5|12305),c=0)}else if(c>3){for(h(u),--c;c>6;c-=6)h(8304);c>2&&(h(c-3<<5|8208),c=0)}for(;c--;)h(u);c=1,u=t[p]}return[i.subarray(0,s),r]},m_=function(t,r){for(var i=0,s=0;s<r.length;++s)i+=t[s]*r[s];return i},mb=function(t,r,i){var s=i.length,u=md(r+2);t[u]=255&s,t[u+1]=s>>>8,t[u+2]=255^t[u],t[u+3]=255^t[u+1];for(var c=0;c<s;++c)t[u+c+4]=i[c];return(u+4+s)*8},mw=function(t,r,i,s,u,c,h,p,f,v,y){mg(r,y++,i),++u[256];for(var x,_,b,w,S=mv(u,15),M=S[0],A=S[1],C=mv(c,15),T=C[0],I=C[1],D=mx(M),P=D[0],R=D[1],L=mx(T),k=L[0],O=L[1],B=new gQ(19),N=0;N<P.length;++N)B[31&P[N]]++;for(var N=0;N<k.length;++N)B[31&k[N]]++;for(var F=mv(B,7),z=F[0],U=F[1],H=19;H>4&&!z[g3[H-1]];--H);var G=v+5<<3,V=m_(u,ma)+m_(c,mo)+h,W=m_(u,M)+m_(c,T)+h+14+3*H+m_(B,z)+(2*B[16]+3*B[17]+7*B[18]);if(G<=V&&G<=W)return mb(r,y,t.subarray(f,f+v));if(mg(r,y,1+(W<V)),y+=2,W<V){x=mi(M,A,0),_=M,b=mi(T,I,0),w=T;var j=mi(z,U,0);mg(r,y,R-257),mg(r,y+5,O-1),mg(r,y+10,H-4),y+=14;for(var N=0;N<H;++N)mg(r,y+3*N,z[g3[N]]);y+=3*H;for(var X=[P,k],Y=0;Y<2;++Y){for(var $=X[Y],N=0;N<$.length;++N){var J=31&$[N];mg(r,y,j[J]),y+=z[J],J>15&&(mg(r,y,$[N]>>>5&127),y+=$[N]>>>12)}}}else x=null,_=ma,b=null,w=mo;for(var N=0;N<p;++N)if(s[N]>255){var J=s[N]>>>18&31;mm(r,y,x[J+257]),y+=_[J+257],J>7&&(mg(r,y,s[N]>>>23&31),y+=g1[J]);var Z=31&s[N];mm(r,y,b[Z]),y+=w[Z],Z>3&&(mm(r,y,s[N]>>>5&8191),y+=g2[Z])}else mm(r,y,x[s[N]]),y+=_[s[N]];return mm(r,y,x[256]),y+_[256]},mS=new g0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),mM=new gq(0),mA=function(t,r,i,s,u,c){var h=t.length,p=new gq(s+h+5*(1+Math.ceil(h/7e3))+u),f=p.subarray(s,p.length-u),v=0;if(!r||h<8)for(var y=0;y<=h;y+=65535){var x=y+65535;x<h?v=mb(f,v,t.subarray(y,x)):(f[y]=c,v=mb(f,v,t.subarray(y,h)))}else{for(var _=mS[r-1],b=_>>>13,w=8191&_,S=(1<<i)-1,M=new gQ(32768),A=new gQ(S+1),C=Math.ceil(i/3),T=2*C,I=function(r){return(t[r]^t[r+1]<<C^t[r+2]<<T)&S},D=new g0(25e3),P=new gQ(288),R=new gQ(32),L=0,k=0,y=0,O=0,B=0,N=0;y<h;++y){var F=I(y),z=32767&y,U=A[F];if(M[z]=U,A[F]=z,B<=y){var H=h-y;if((L>7e3||O>24576)&&H>423){v=mw(t,f,0,D,P,R,k,O,N,y-N,v),O=L=k=0,N=y;for(var G=0;G<286;++G)P[G]=0;for(var G=0;G<30;++G)R[G]=0}var V=2,W=0,j=w,X=z-U&32767;if(H>2&&F==I(y-X)){for(var Y=Math.min(b,H)-1,$=Math.min(32767,y),J=Math.min(258,H);X<=$&&--j&&z!=U;){if(t[y+V]==t[y+V-X]){for(var Z=0;Z<J&&t[y+Z]==t[y+Z-X];++Z);if(Z>V){if(V=Z,W=X,Z>Y)break;for(var K=Math.min(X,Z-2),q=0,G=0;G<K;++G){var Q=y-X+G+32768&32767,ee=M[Q],et=Q-ee+32768&32767;et>q&&(q=et,U=Q)}}}U=M[z=U],X+=z-U+32768&32767}}if(W){D[O++]=0x10000000|g9[V]<<18|me[W];var en=31&g9[V],er=31&me[W];k+=g1[en]+g2[er],++P[257+en],++R[er],B=y+V,++L}else D[O++]=t[y],++P[t[y]]}}v=mw(t,f,c,D,P,R,k,O,N,y-N,v),!c&&7&v&&(v=mb(f,v+1,mM))}return mp(p,0,s+md(v)+u)},mC=function(){var t=-1;return{p:function(r){for(var i=t,s=0;s<r.length;++s)i=null[255&i^r[s]]^i>>>8;t=i},d:function(){return~t}}},mT=function(){var t=1,r=0;return{p:function(i){for(var s=t,u=r,c=i.length,h=0;h!=c;){for(var p=Math.min(h+2655,c);h<p;++h)u+=s+=i[h];s=(65535&s)+15*(s>>16),u=(65535&u)+15*(u>>16)}t=s,r=u},d:function(){return t%=65521,r%=65521,(255&t)<<24|t>>>8<<16|(255&r)<<8|r>>>8}}},mE=function(t,r,i,s,u){return mA(t,null==r.level?6:r.level,null==r.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+r.mem,i,s,!u)},mI=function(t,r){var i={};for(var s in t)i[s]=t[s];for(var s in r)i[s]=r[s];return i},mD=function(t,r,i){for(var s=t(),u=t.toString(),c=u.slice(u.indexOf("[")+1,u.lastIndexOf("]")).replace(/ /g,"").split(","),h=0;h<s.length;++h){var p=s[h],f=c[h];if("function"==typeof p){r+=";"+f+"=";var v=p.toString();if(p.prototype){if(-1!=v.indexOf("[native code]")){var y=v.indexOf(" ",8)+1;r+=v.slice(y,v.indexOf("(",y))}else for(var x in r+=v,p.prototype)r+=";"+f+".prototype."+x+"="+p.prototype[x].toString()}else r+=v}else i[f]=p}return[r,i]},mP=function(t){var r=[];for(var i in t)(t[i]instanceof gq||t[i]instanceof gQ||t[i]instanceof g0)&&r.push((t[i]=new t[i].constructor(t[i])).buffer);return r},mR=function(t,r,i,s){if(!null[i]){for(var u,c="",h={},p=t.length-1,f=0;f<p;++f)c=(u=mD(t[f],c,h))[0],h=u[1];null[i]=mD(t[p],c,h)}var v=mI({},null[i][1]);return gK(null[i][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+r.toString()+"}",i,v,mP(v),s)},mL=function(){return[gq,gQ,g0,g1,g2,g3,g6,g7,ms,ml,mt,mi,mu,mc,mh,md,mp,mf,m0,mz,mU]},mk=function(){return[gq,gQ,g0,g1,g2,g3,g9,me,null,ma,null,mo,mt,mS,mM,mi,mg,mm,mv,my,mx,m_,mb,mw,md,mp,mA,mE,mq,mz]},mO=function(){return[mX,mJ,mj,mC,null]},mB=function(){return[mY,m$]},mN=function(){return[mZ,mj,mT]},mF=function(){return[mK]},mz=function(t){return postMessage(t,[t.buffer])},mU=function(t){return t&&t.size&&new gq(t.size)},mH=function(t,r,i,s,u,c){var h=mR(i,s,u,function(t,r){h.terminate(),c(t,r)});return h.postMessage([t,r],r.consume?[t.buffer]:[]),function(){h.terminate()}},mG=function(t,r){return t[r]|t[r+1]<<8},mV=function(t,r){return(t[r]|t[r+1]<<8|t[r+2]<<16|t[r+3]<<24)>>>0},mW=function(t,r){return mV(t,r)+0x100000000*mV(t,r+4)},mj=function(t,r,i){for(;i;++r)t[r]=i,i>>>=8},mX=function(t,r){var i=r.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=r.level<2?4:9==r.level?2:0,t[9]=3,0!=r.mtime&&mj(t,4,Math.floor(new Date(r.mtime||Date.now())/1e3)),i){t[3]=8;for(var s=0;s<=i.length;++s)t[s+10]=i.charCodeAt(s)}},mY=function(t){if(31!=t[0]||139!=t[1]||8!=t[2])throw"invalid gzip data";var r=t[3],i=10;4&r&&(i+=t[10]|(t[11]<<8)+2);for(var s=(r>>3&1)+(r>>4&1);s>0;s-=!t[i++]);return i+(2&r)},m$=function(t){var r=t.length;return(t[r-4]|t[r-3]<<8|t[r-2]<<16|t[r-1]<<24)>>>0},mJ=function(t){return 10+(t.filename&&t.filename.length+1||0)},mZ=function(t,r){var i=r.level,s=0==i?0:i<6?1:9==i?3:2;t[0]=120,t[1]=s<<6|(s?32-2*s:1)},mK=function(t){if((15&t[0])!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(32&t[1])throw"invalid zlib data: preset dictionaries not supported"};function mq(t,r){return mE(t,r||{},0,0)}function mQ(t,r,i){if(!i&&(i=r,r={}),"function"!=typeof i)throw"no callback";return mH(t,r,[mL],function(t){return mz(function(t,r){return mf(t,r)}(t.data[0],mU(t.data[1])))},1,i)}function m0(t,r){return mf(t,r)}function m1(t,r){!r&&(r={});var i=mC(),s=t.length;i.p(t);var u=mE(t,r,mJ(r),8),c=u.length;return mX(u,r),mj(u,c-8,i.d()),mj(u,c-4,s),u}function m2(t,r){return mf(t.subarray(mY(t),-8),r||new gq(m$(t)))}function m3(t,r){!r&&(r={});var i=mT();i.p(t);var s=mE(t,r,2,4);return mZ(s,r),mj(s,s.length-4,i.d()),s}function m5(t,r){return mf((mK(t),t.subarray(2,-4)),r)}var m4=function(t,r,i,s){for(var u in t){var c=t[u],h=r+u;c instanceof gq?i[h]=[c,s]:Array.isArray(c)?i[h]=[c[0],mI(s,c[1])]:m4(c,h+"/",i,s)}},m6="undefined"!=typeof TextEncoder&&new TextEncoder,m9="undefined"!=typeof TextDecoder&&new TextDecoder,m8=0;try{m9.decode(mM,{stream:!0})}catch(t){}var m7=function(t){for(var r="",i=0;;){var s=t[i++],u=(s>127)+(s>223)+(s>239);if(i+u>t.length)return[r,mp(t,i-1)];u?3==u?r+=String.fromCharCode(55296|(s=((15&s)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536)>>10,56320|1023&s):1&u?r+=String.fromCharCode((31&s)<<6|63&t[i++]):r+=String.fromCharCode((15&s)<<12|(63&t[i++])<<6|63&t[i++]):r+=String.fromCharCode(s)}};function ve(t,r){if(r){for(var i=new gq(t.length),s=0;s<t.length;++s)i[s]=t.charCodeAt(s);return i}if(m6)return m6.encode(t);for(var u=t.length,c=new gq(t.length+(t.length>>1)),h=0,p=function(t){c[h++]=t},s=0;s<u;++s){if(h+5>c.length){var f=new gq(h+8+(u-s<<1));f.set(c),c=f}var v=t.charCodeAt(s);v<128||r?p(v):(v<2048?p(192|v>>6):(v>55295&&v<57344?(p(240|(v=65536+(1047552&v)|1023&t.charCodeAt(++s))>>18),p(128|v>>12&63)):p(224|v>>12),p(128|v>>6&63)),p(128|63&v))}return mp(c,0,h)}var vt=function(t,r){return r+30+mG(t,r+26)+mG(t,r+28)},vn=function(t,r,i){var s=mG(t,r+28),u=function(t,r){if(r){for(var i="",s=0;s<t.length;s+=16384)i+=String.fromCharCode.apply(null,t.subarray(s,s+16384));return i}if(m9)return m9.decode(t);var u=m7(t),c=u[0];if(u[1].length)throw"invalid utf-8 data";return c}(t.subarray(r+46,r+46+s),!(2048&mG(t,r+8))),c=r+46+s,h=mV(t,r+20),p=i&&0xffffffff==h?vr(t,c):[h,mV(t,r+24),mV(t,r+42)],f=p[0],v=p[1],y=p[2];return[mG(t,r+10),f,v,u,c+mG(t,r+30)+mG(t,r+32),y]},vr=function(t,r){for(;1!=mG(t,r);r+=4+mG(t,r+2));return[mW(t,r+12),mW(t,r+4),mW(t,r+20)]},vi=function(t){var r=0;if(t)for(var i in t){var s=t[i].length;if(s>65535)throw"extra field too long";r+=s+4}return r},va=function(t,r,i,s,u,c,h,p){var f=s.length,v=i.extra,y=p&&p.length,x=vi(v);mj(t,r,null!=h?0x2014b50:0x4034b50),r+=4,null!=h&&(t[r++]=20,t[r++]=i.os),t[r]=20,r+=2,t[r++]=i.flag<<1|(null==c&&8),t[r++]=u&&8,t[r++]=255&i.compression,t[r++]=i.compression>>8;var _=new Date(null==i.mtime?Date.now():i.mtime),b=_.getFullYear()-1980;if(b<0||b>119)throw"date not in range 1980-2099";if(mj(t,r,b<<25|_.getMonth()+1<<21|_.getDate()<<16|_.getHours()<<11|_.getMinutes()<<5|_.getSeconds()>>>1),r+=4,null!=c&&(mj(t,r,i.crc),mj(t,r+4,c),mj(t,r+8,i.size)),mj(t,r+12,f),mj(t,r+14,x),r+=16,null!=h&&(mj(t,r,y),mj(t,r+6,i.attrs),mj(t,r+10,h),r+=14),t.set(s,r),r+=f,x)for(var w in v){var S=v[w],M=S.length;mj(t,r,+w),mj(t,r+2,M),t.set(S,r+4),r+=4+M}return y&&(t.set(p,r),r+=y),r},vo=function(t,r,i,s,u){mj(t,r,0x6054b50),mj(t,r+8,i),mj(t,r+10,i),mj(t,r+12,s),mj(t,r+16,u)};let vs="colorSpace"in new rQ;class vl extends hV{constructor(t){super(t),this.type=tk}parse(t){let r=8192,i=65537,s=16384,u=16383,c=32768,h=65535,p=6,f={l:0,c:0,lc:0};function v(t,r,i,s,u){for(;i<t;)r=r<<8|W(s,u),i+=8;i-=t,f.l=r>>i&(1<<t)-1,f.c=r,f.lc=i}let y=Array(59);function x(t){return 63&t}function _(t){return t>>6}let b={c:0,lc:0};function w(t,r,i,s){t=t<<8|W(i,s),r+=8,b.c=t,b.lc=r}let S={c:0,lc:0};function M(t,r,i,s,u,c,h,p,f,v){if(t==r){s<8&&(w(i,s,u,h),i=b.c,s=b.lc);var y=i>>(s-=8),y=new Uint8Array([y])[0];if(f.value+y>v)return!1;for(var x=p[f.value-1];y-- >0;)p[f.value++]=x}else{if(!(f.value<v))return!1;p[f.value++]=t}S.c=i,S.lc=s}function A(t){return 65535&t}function C(t){var r=65535&t;return r>32767?r-65536:r}let T={a:0,b:0};function I(t,r){var i=C(t),s=C(r),u=i+(1&s)+(s>>1),c=u-s;T.a=u,T.b=c}function D(t,r){var i=65535&r,s=(65535&t)-(i>>1)&h;T.a=i+s-c&h,T.b=s}function P(t,r,c,h,x,_){var A=c.value,C=V(r,c),T=V(r,c);c.value+=4;var I=V(r,c);if(c.value+=4,C<0||C>=i||T<0||T>=i)throw"Something wrong with HUF_ENCSIZE";var D=Array(i),P=Array(s);!function(t){for(var r=0;r<s;r++)t[r]={},t[r].len=0,t[r].lit=0,t[r].p=null}(P);var R=h-(c.value-A);if(!function(t,r,s,u,c,h,x){for(var _=0,b=0;c<=h;c++){if(s.value-s.value>u)return!1;v(6,_,b,t,s);var w=f.l;if(_=f.c,b=f.lc,x[c]=w,63==w){if(s.value-s.value>u)throw"Something wrong with hufUnpackEncTable";v(8,_,b,t,s);var S=f.l+p;if(_=f.c,b=f.lc,c+S>h+1)throw"Something wrong with hufUnpackEncTable";for(;S--;)x[c++]=0;c--}else if(w>=59){var S=w-59+2;if(c+S>h+1)throw"Something wrong with hufUnpackEncTable";for(;S--;)x[c++]=0;c--}}!function(t){for(var r=0;r<=58;++r)y[r]=0;for(var r=0;r<i;++r)y[t[r]]+=1;for(var s=0,r=58;r>0;--r){var u=s+y[r]>>1;y[r]=s,s=u}for(var r=0;r<i;++r){var c=t[r];c>0&&(t[r]=c|y[c]++<<6)}}(x)}(t,0,c,R,C,T,D),I>8*(h-(c.value-A)))throw"Something wrong with hufUncompress";!function(t,r,i,s){for(;r<=i;r++){var u=t[r]>>6,c=63&t[r];if(u>>c)throw"Invalid table entry";if(c>14){var h=s[u>>c-14];if(h.len)throw"Invalid table entry";if(h.lit++,h.p){var p=h.p;h.p=Array(h.lit);for(var f=0;f<h.lit-1;++f)h.p[f]=p[f]}else h.p=[,];h.p[h.lit-1]=r}else if(c){for(var v=0,f=1<<14-c;f>0;f--){var h=s[(u<<14-c)+v];if(h.len||h.p)throw"Invalid table entry";h.len=c,h.lit=r,v++}}};}(D,C,T,P),!function(t,r,i,s,c,h,p,f,v,y){for(var x=0,_=0,A=Math.trunc(c.value+(h+7)/8);c.value<A;)for(w(x,_,i,c),x=b.c,_=b.lc;_>=14;){var C=r[x>>_-14&u];if(C.len)_-=C.len,M(C.lit,p,x,_,i,s,c,v,y,f),x=S.c,_=S.lc;else{if(!C.p)throw"hufDecode issues";for(T=0;T<C.lit;T++){for(var T,I=63&t[C.p[T]];_<I&&c.value<A;)w(x,_,i,c),x=b.c,_=b.lc;if(_>=I){if(t[C.p[T]]>>6==(x>>_-I&(1<<I)-1)){_-=I,M(C.p[T],p,x,_,i,s,c,v,y,f),x=S.c,_=S.lc;break}}}if(T==C.lit)throw"hufDecode issues"}}var D=8-h&7;for(x>>=D,_-=D;_>0;){var C=r[x<<14-_&u];if(C.len)_-=C.len,M(C.lit,p,x,_,i,s,c,v,y,f),x=S.c,_=S.lc;else throw"hufDecode issues"};}(D,P,t,r,c,I,T,_,x,{value:0})}function R(t){for(var r=1;r<t.length;r++){var i=t[r-1]+t[r]-128;t[r]=i}}function L(t,r){for(var i=0,s=Math.floor((t.length+1)/2),u=0,c=t.length-1;!(u>c);){;if(r[u++]=t[i++],u>c)break;r[u++]=t[s++]}}function k(t){for(var r=t.byteLength,i=[],s=0,u=new DataView(t);r>0;){var c=u.getInt8(s++);if(c<0){var h=-c;r-=h+1;for(var p=0;p<h;p++)i.push(u.getUint8(s++))}else{var h=c;r-=2;for(var f=u.getUint8(s++),p=0;p<h+1;p++)i.push(f)}}return i}function O(t){return new DataView(t.array.buffer,t.offset.value,t.size)}function B(t){var r=new Uint8Array(k(t.viewer.buffer.slice(t.offset.value,t.offset.value+t.size))),i=new Uint8Array(r.length);return R(r),L(r,i),new DataView(i.buffer)}function N(t){var r=m5(t.array.slice(t.offset.value,t.offset.value+t.size)),i=new Uint8Array(r.length);return R(r),L(r,i),new DataView(i.buffer)}function F(t){for(var i=t.viewer,s={value:t.offset.value},u=new Uint16Array(t.width*t.scanlineBlockSize*(t.channels*t.type)),c=new Uint8Array(r),h=0,p=Array(t.channels),f=0;f<t.channels;f++)p[f]={},p[f].start=h,p[f].end=p[f].start,p[f].nx=t.width,p[f].ny=t.lines,p[f].size=t.type,h+=p[f].nx*p[f].ny*p[f].size;var v=Z(i,s),y=Z(i,s);if(y>=r)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(v<=y)for(var f=0;f<y-v+1;f++)c[f+v]=j(i,s);var x=new Uint16Array(65536),_=function(t,r){for(var i=0,s=0;s<65536;++s)(0==s||t[s>>3]&1<<(7&s))&&(r[i++]=s);for(var u=i-1;i<65536;)r[i++]=0;return u}(c,x),b=V(i,s);P(t.array,i,s,b,u,h);for(var f=0;f<t.channels;++f){for(var w=p[f],S=0;S<p[f].size;++S)!function(t,r,i,s,u,c,h){for(var p=h<16384,f=i>u?u:i,v=1;v<=f;)v<<=1;for(v>>=1,y=v,v>>=1;v>=1;){for(var y,x,_,b,w,S=0,M=0+c*(u-y),A=c*v,C=c*y,P=s*v,R=s*y;S<=M;S+=C){for(var L=S,k=S+s*(i-y);L<=k;L+=R){var O=L+P,B=L+A,N=B+P;p?(I(t[L+r],t[B+r]),x=T.a,b=T.b,I(t[O+r],t[N+r]),_=T.a,w=T.b,I(x,_),t[L+r]=T.a,t[O+r]=T.b,I(b,w)):(D(t[L+r],t[B+r]),x=T.a,b=T.b,D(t[O+r],t[N+r]),_=T.a,w=T.b,D(x,_),t[L+r]=T.a,t[O+r]=T.b,D(b,w)),t[B+r]=T.a,t[N+r]=T.b}if(i&v){var B=L+A;p?I(t[L+r],t[B+r]):D(t[L+r],t[B+r]),x=T.a,t[B+r]=T.b,t[L+r]=x}}if(u&v){for(var L=S,k=S+s*(i-y);L<=k;L+=R){var O=L+P;p?I(t[L+r],t[O+r]):D(t[L+r],t[O+r]),x=T.a,t[O+r]=T.b,t[L+r]=x}}y=v,v>>=1};}(u,w.start+S,w.nx,w.size,w.ny,w.nx*w.size,_)}!function(t,r,i){for(var s=0;s<i;++s)r[s]=t[r[s]]}(x,u,h);for(var M=0,A=new Uint8Array(u.buffer.byteLength),C=0;C<t.lines;C++)for(var R=0;R<t.channels;R++){var w=p[R],L=w.nx*w.size,k=new Uint8Array(u.buffer,2*w.end,2*L);A.set(k,M),M+=2*L,w.end+=L}return new DataView(A.buffer)}function z(t){var r=m5(t.array.slice(t.offset.value,t.offset.value+t.size));let i=t.lines*t.channels*t.width,s=1==t.type?new Uint16Array(i):new Uint32Array(i),u=0,c=0,h=[,,,,];for(let i=0;i<t.lines;i++)for(let i=0;i<t.channels;i++){let i=0;switch(t.type){case 1:h[0]=u,h[1]=h[0]+t.width,u=h[1]+t.width;for(let u=0;u<t.width;++u)i+=r[h[0]++]<<8|r[h[1]++],s[c]=i,c++;break;case 2:h[0]=u,h[1]=h[0]+t.width,h[2]=h[1]+t.width,u=h[2]+t.width;for(let u=0;u<t.width;++u)i+=r[h[0]++]<<24|r[h[1]++]<<16|r[h[2]++]<<8,s[c]=i,c++}}return new DataView(s.buffer)}function U(t){var r=t.viewer,i={value:t.offset.value},s=new Uint8Array(t.width*t.lines*(t.channels*t.type*2)),u={version:X(r,i),unknownUncompressedSize:X(r,i),unknownCompressedSize:X(r,i),acCompressedSize:X(r,i),dcCompressedSize:X(r,i),rleCompressedSize:X(r,i),rleUncompressedSize:X(r,i),rleRawSize:X(r,i),totalAcUncompressedCount:X(r,i),totalDcUncompressedCount:X(r,i),acCompression:X(r,i)};if(u.version<2)throw"EXRLoader.parse: "+et.compression+" version "+u.version+" is unsupported";for(var c=[],h=Z(r,i)-2;h>0;){var p=H(r.buffer,i),f=j(r,i),v=f>>2&3,y=new Int8Array([(f>>4)-1])[0],x=j(r,i);c.push({name:p,index:y,type:x,compression:v}),h-=p.length+3}for(var _=et.channels,b=Array(t.channels),w=0;w<t.channels;++w){var S=b[w]={},M=_[w];S.name=M.name,S.compression=0,S.decoded=!1,S.type=M.pixelType,S.pLinear=M.pLinear,S.width=t.width,S.height=t.lines}for(var A={idx:[,,,]},C=0;C<t.channels;++C){for(var S=b[C],w=0;w<c.length;++w){var T=c[w];S.name==T.name&&(S.compression=T.compression,T.index>=0&&(A.idx[T.index]=C),S.offset=C)}}if(u.acCompressedSize>0)switch(u.acCompression){case 0:var I=new Uint16Array(u.totalAcUncompressedCount);P(t.array,r,i,u.acCompressedSize,I,u.totalAcUncompressedCount);break;case 1:var D=t.array.slice(i.value,i.value+u.totalAcUncompressedCount),R=m5(D),I=new Uint16Array(R.buffer);i.value+=u.totalAcUncompressedCount}if(u.dcCompressedSize>0){var L=new Uint16Array(N({array:t.array,offset:i,size:u.dcCompressedSize}).buffer);i.value+=u.dcCompressedSize}if(u.rleRawSize>0){var D=t.array.slice(i.value,i.value+u.rleCompressedSize),R=m5(D),O=k(R.buffer);i.value+=u.rleCompressedSize}for(var B=0,F=Array(b.length),w=0;w<F.length;++w)F[w]=[];for(var z=0;z<t.lines;++z)for(var U=0;U<b.length;++U)F[U].push(B),B+=b[U].width*t.type*2;!function(t,r,i,s,u,c){var h=new DataView(c.buffer),p=i[t.idx[0]].width,f=i[t.idx[0]].height,v=Math.floor(p/8),y=Math.ceil(p/8),x=Math.ceil(f/8),_=p-(y-1)*8,b=f-(x-1)*8,w={value:0},S=[,,,],M=[,,,],A=[,,,],C=[,,,],T=[,,,];for(let i=0;i<3;++i)T[i]=r[t.idx[i]],S[i]=i<1?0:S[i-1]+y*x,M[i]=new Float32Array(64),A[i]=new Uint16Array(64),C[i]=new Uint16Array(64*y);for(let r=0;r<x;++r){var I=8;r==x-1&&(I=b);var D=8;for(let t=0;t<y;++t){t==y-1&&(D=_);for(let t=0;t<3;++t)A[t].fill(0),A[t][0]=u[S[t]++],function(t,r,i){for(var s,u=1;u<64;)65280==(s=r[t.value])?u=64:s>>8==255?u+=255&s:(i[u]=s,u++),t.value++}(w,s,A[t]),function(t,r){r[0]=J(t[0]),r[1]=J(t[1]),r[2]=J(t[5]),r[3]=J(t[6]),r[4]=J(t[14]),r[5]=J(t[15]),r[6]=J(t[27]),r[7]=J(t[28]),r[8]=J(t[2]),r[9]=J(t[4]),r[10]=J(t[7]),r[11]=J(t[13]),r[12]=J(t[16]),r[13]=J(t[26]),r[14]=J(t[29]),r[15]=J(t[42]),r[16]=J(t[3]),r[17]=J(t[8]),r[18]=J(t[12]),r[19]=J(t[17]),r[20]=J(t[25]),r[21]=J(t[30]),r[22]=J(t[41]),r[23]=J(t[43]),r[24]=J(t[9]),r[25]=J(t[11]),r[26]=J(t[18]),r[27]=J(t[24]),r[28]=J(t[31]),r[29]=J(t[40]),r[30]=J(t[44]),r[31]=J(t[53]),r[32]=J(t[10]),r[33]=J(t[19]),r[34]=J(t[23]),r[35]=J(t[32]),r[36]=J(t[39]),r[37]=J(t[45]),r[38]=J(t[52]),r[39]=J(t[54]),r[40]=J(t[20]),r[41]=J(t[22]),r[42]=J(t[33]),r[43]=J(t[38]),r[44]=J(t[46]),r[45]=J(t[51]),r[46]=J(t[55]),r[47]=J(t[60]),r[48]=J(t[21]),r[49]=J(t[34]),r[50]=J(t[37]),r[51]=J(t[47]),r[52]=J(t[50]),r[53]=J(t[56]),r[54]=J(t[59]),r[55]=J(t[61]),r[56]=J(t[35]),r[57]=J(t[36]),r[58]=J(t[48]),r[59]=J(t[49]),r[60]=J(t[57]),r[61]=J(t[58]),r[62]=J(t[62]),r[63]=J(t[63])}(A[t],M[t]),function(t){let r=.35355362513961314,i=.5*Math.cos(3.14159/16),s=.5*Math.cos(3.14159/8),u=.5*Math.cos(3*3.14159/16),c=.2777854612564676,h=.5*Math.cos(3*3.14159/8),p=.09754573032714427;for(var f=[,,,,],v=[,,,,],y=[,,,,],x=[,,,,],_=0;_<8;++_){var b=8*_;f[0]=s*t[b+2],f[1]=h*t[b+2],f[2]=s*t[b+6],f[3]=h*t[b+6],v[0]=i*t[b+1]+u*t[b+3]+c*t[b+5]+p*t[b+7],v[1]=u*t[b+1]-p*t[b+3]-i*t[b+5]-c*t[b+7],v[2]=c*t[b+1]-i*t[b+3]+p*t[b+5]+u*t[b+7],v[3]=p*t[b+1]-c*t[b+3]+u*t[b+5]-i*t[b+7],y[0]=r*(t[b+0]+t[b+4]),y[3]=r*(t[b+0]-t[b+4]),y[1]=f[0]+f[3],y[2]=f[1]-f[2],x[0]=y[0]+y[1],x[1]=y[3]+y[2],x[2]=y[3]-y[2],x[3]=y[0]-y[1],t[b+0]=x[0]+v[0],t[b+1]=x[1]+v[1],t[b+2]=x[2]+v[2],t[b+3]=x[3]+v[3],t[b+4]=x[3]-v[3],t[b+5]=x[2]-v[2],t[b+6]=x[1]-v[1],t[b+7]=x[0]-v[0]}for(var w=0;w<8;++w)f[0]=s*t[16+w],f[1]=h*t[16+w],f[2]=s*t[48+w],f[3]=h*t[48+w],v[0]=i*t[8+w]+u*t[24+w]+c*t[40+w]+p*t[56+w],v[1]=u*t[8+w]-p*t[24+w]-i*t[40+w]-c*t[56+w],v[2]=c*t[8+w]-i*t[24+w]+p*t[40+w]+u*t[56+w],v[3]=p*t[8+w]-c*t[24+w]+u*t[40+w]-i*t[56+w],y[0]=r*(t[w]+t[32+w]),y[3]=r*(t[w]-t[32+w]),y[1]=f[0]+f[3],y[2]=f[1]-f[2],x[0]=y[0]+y[1],x[1]=y[3]+y[2],x[2]=y[3]-y[2],x[3]=y[0]-y[1],t[0+w]=x[0]+v[0],t[8+w]=x[1]+v[1],t[16+w]=x[2]+v[2],t[24+w]=x[3]+v[3],t[32+w]=x[3]-v[3],t[40+w]=x[2]-v[2],t[48+w]=x[1]-v[1],t[56+w]=x[0]-v[0]}(M[t]);(function(t){for(var r=0;r<64;++r){var i=t[0][r],s=t[1][r],u=t[2][r];t[0][r]=i+1.5747*u,t[1][r]=i-.1873*s-.4682*u,t[2][r]=i+1.8556*s}})(M);for(let r=0;r<3;++r)(function(t,r,i){for(var s=0;s<64;++s)r[i+s]=a_.toHalfFloat(function(t){return t<=1?Math.sign(t)*Math.pow(Math.abs(t),2.2):Math.sign(t)*Math.pow(9.025013291561939,Math.abs(t)-1)}(t[s]))})(M[r],C[r],64*t)}let c=0;for(let s=0;s<3;++s){let u=i[t.idx[s]].type;for(let t=8*r;t<8*r+I;++t){c=T[s][t];for(let r=0;r<v;++r){let i=64*r+(7&t)*8;h.setUint16(c+0*u,C[s][i+0],!0),h.setUint16(c+2*u,C[s][i+1],!0),h.setUint16(c+4*u,C[s][i+2],!0),h.setUint16(c+6*u,C[s][i+3],!0),h.setUint16(c+8*u,C[s][i+4],!0),h.setUint16(c+10*u,C[s][i+5],!0),h.setUint16(c+12*u,C[s][i+6],!0),h.setUint16(c+14*u,C[s][i+7],!0),c+=16*u}}if(v!=y)for(let t=8*r;t<8*r+I;++t){let r=T[s][t]+8*v*2*u,i=64*v+(7&t)*8;for(let t=0;t<D;++t)h.setUint16(r+2*t*u,C[s][i+t],!0)}}}for(var P=new Uint16Array(p),h=new DataView(c.buffer),R=0;R<3;++R){i[t.idx[R]].decoded=!0;var L=i[t.idx[R]].type;if(2==i[R].type)for(var k=0;k<f;++k){let t=T[R][k];for(var O=0;O<p;++O)P[O]=h.getUint16(t+2*O*L,!0);for(var O=0;O<p;++O)h.setFloat32(t+2*O*L,J(P[O]),!0)}}}(A,F,b,I,L,s);for(var w=0;w<b.length;++w){var S=b[w];if(!S.decoded){if(2===S.compression){for(var G=0,V=0,z=0;z<t.lines;++z){for(var W=F[w][G],Y=0;Y<S.width;++Y){for(var $=0;$<2*S.type;++$)s[W++]=O[V+$*S.width*S.height];V++}G++}}else throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(s.buffer)}function H(t,r){for(var i=new Uint8Array(t),s=0;0!=i[r.value+s];)s+=1;var u=new TextDecoder().decode(i.slice(r.value,r.value+s));return r.value=r.value+s+1,u}function G(t,r){var i=t.getInt32(r.value,!0);return r.value=r.value+4,i}function V(t,r){var i=t.getUint32(r.value,!0);return r.value=r.value+4,i}function W(t,r){var i=t[r.value];return r.value=r.value+1,i}function j(t,r){var i=t.getUint8(r.value);return r.value=r.value+1,i}let X=function(t,r){let i;return"getBigInt64"in DataView.prototype?i=Number(t.getBigInt64(r.value,!0)):i=t.getUint32(r.value+4,!0)+Number(t.getUint32(r.value,!0)<<32),r.value+=8,i};function Y(t,r){var i=t.getFloat32(r.value,!0);return r.value+=4,i}function $(t,r){return a_.toHalfFloat(Y(t,r))}function J(t){var r=(31744&t)>>10,i=1023&t;return(t>>15?-1:1)*(r?31===r?i?NaN:1/0:Math.pow(2,r-15)*(1+i/1024):i/1024*6103515625e-14)}function Z(t,r){var i=t.getUint16(r.value,!0);return r.value+=2,i}function K(t,r){return J(Z(t,r))}let q=new DataView(t),Q=new Uint8Array(t),ee={value:0},et=function(t,r,i){let s={};if(0x1312f76!=t.getUint32(0,!0))throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";s.version=t.getUint8(4);let u=t.getUint8(5);s.spec={singleTile:!!(2&u),longName:!!(4&u),deepFormat:!!(8&u),multiPart:!!(16&u)},i.value=8;for(var c=!0;c;){var h=H(r,i);if(0==h)c=!1;else{var p=H(r,i),f=V(t,i),v=function(t,r,i,s,u){var c,h,p,f,v,y,x,_,b,w,S,M,A,C,T,I,D,P,R,L,k,O,B,N;if("string"===s||"stringvector"===s||"iccProfile"===s){;return c=r,h=i,p=u,f=new TextDecoder().decode(new Uint8Array(c).slice(h.value,h.value+p)),h.value=h.value+p,f}if("chlist"===s)return function(t,r,i,s){for(var u=i.value,c=[];i.value<u+s-1;){var h=H(r,i),p=G(t,i),f=j(t,i);i.value+=3;var v=G(t,i),y=G(t,i);c.push({name:h,pixelType:p,pLinear:f,xSampling:v,ySampling:y})}return i.value+=1,c}(t,r,i,u);if("chromaticities"===s){;return x=Y(v=t,y=i),_=Y(v,y),b=Y(v,y),w=Y(v,y),S=Y(v,y),M=Y(v,y),{redX:x,redY:_,greenX:b,greenY:w,blueX:S,blueY:M,whiteX:Y(v,y),whiteY:Y(v,y)}}else if("compression"===s)return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][j(t,i)];else if("box2i"===s){;return T=V(A=t,C=i),I=V(A,C),{xMin:T,yMin:I,xMax:V(A,C),yMax:V(A,C)}}else if("lineOrder"===s)return["INCREASING_Y"][j(t,i)];else if("float"===s)return Y(t,i);else if("v2f"===s){;return[Y(D=t,P=i),Y(D,P)]}else if("v3f"===s){;return[Y(R=t,L=i),Y(R,L),Y(R,L)]}else if("int"===s)return G(t,i);else if("rational"===s){;return[G(k=t,O=i),V(k,O)]}else if("timecode"===s){;return[V(B=t,N=i),V(B,N)]}else{if("preview"===s)return i.value+=u,"skipped";i.value+=u;return}}(t,r,i,p,f);void 0===v||(s[h]=v)}}if((-5&u)!=0)throw"THREE.EXRLoader: provided file is currently unsupported.";return s}(q,t,ee),en=function(t,r,i,s,u){let c={size:0,viewer:r,array:i,offset:s,width:t.dataWindow.xMax-t.dataWindow.xMin+1,height:t.dataWindow.yMax-t.dataWindow.yMin+1,channels:t.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:t.channels[0].pixelType,uncompress:null,getter:null,format:null,[vs?"colorSpace":"encoding"]:null};switch(t.compression){case"NO_COMPRESSION":c.lines=1,c.uncompress=O;break;case"RLE_COMPRESSION":c.lines=1,c.uncompress=B;break;case"ZIPS_COMPRESSION":c.lines=1,c.uncompress=N;break;case"ZIP_COMPRESSION":c.lines=16,c.uncompress=N;break;case"PIZ_COMPRESSION":c.lines=32,c.uncompress=F;break;case"PXR24_COMPRESSION":c.lines=16,c.uncompress=z;break;case"DWAA_COMPRESSION":c.lines=32,c.uncompress=U;break;case"DWAB_COMPRESSION":c.lines=256,c.uncompress=U;break;default:throw"EXRLoader.parse: "+t.compression+" is unsupported"}if(c.scanlineBlockSize=c.lines,1==c.type)switch(u){case tL:c.getter=K,c.inputSize=2;break;case tk:c.getter=Z,c.inputSize=2}else if(2==c.type)switch(u){case tL:c.getter=Y,c.inputSize=4;break;case tk:c.getter=$,c.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+c.type+" for "+t.compression+".";c.blockCount=(t.dataWindow.yMax+1)/c.scanlineBlockSize;for(var h=0;h<c.blockCount;h++)X(r,s);c.outputChannels=3==c.channels?4:c.channels;let p=c.width*c.height*c.outputChannels;switch(u){case tL:c.byteArray=new Float32Array(p),c.channels<c.outputChannels&&c.byteArray.fill(1,0,p);break;case tk:c.byteArray=new Uint16Array(p),c.channels<c.outputChannels&&c.byteArray.fill(15360,0,p)}return c.bytesPerLine=c.width*c.inputSize*c.channels,4==c.outputChannels?c.format=tH:c.format=tX,vs?c.colorSpace="srgb-linear":c.encoding=3e3,c}(et,q,Q,ee,this.type),er={value:0},ei={R:0,G:1,B:2,A:3,Y:0};for(let t=0;t<en.height/en.scanlineBlockSize;t++){let r=V(q,ee);en.size=V(q,ee),en.lines=r+en.scanlineBlockSize>en.height?en.height-r:en.scanlineBlockSize;let i=en.size<en.lines*en.bytesPerLine?en.uncompress(en):O(en);ee.value+=en.size;for(let r=0;r<en.scanlineBlockSize;r++){let s=r+t*en.scanlineBlockSize;if(s>=en.height)break;for(let t=0;t<en.channels;t++){let u=ei[et.channels[t].name];for(let c=0;c<en.width;c++){er.value=(r*(en.channels*en.width)+t*en.width+c)*en.inputSize;let h=(en.height-1-s)*(en.width*en.outputChannels)+c*en.outputChannels+u;en.byteArray[h]=en.getter(i,er)}}}}return{header:et,width:en.width,height:en.height,data:en.byteArray,format:en.format,[vs?"colorSpace":"encoding"]:en[vs?"colorSpace":"encoding"],type:this.type}}setDataType(t){return this.type=t,this}load(t,r,i,s){return super.load(t,function(t,i){vs?t.colorSpace=i.colorSpace:t.encoding=i.encoding,t.minFilter=tw,t.magFilter=tw,t.generateMipmaps=!1,t.flipY=!1,r&&r(t,i)},i,s)}}let vu=(t,r,i)=>{let s;switch(t){case tT:s=new Uint8ClampedArray(r*i*4);break;case tk:s=new Uint16Array(r*i*4);break;case tR:s=new Uint32Array(r*i*4);break;case tE:s=new Int8Array(r*i*4);break;case tI:s=new Int16Array(r*i*4);break;case tP:s=new Int32Array(r*i*4);break;case tL:s=new Float32Array(r*i*4);break;default:throw Error("Unsupported data type")}return s},vc=(t,r,i,s)=>{if(void 0!==y)return y;let u=new r2(1,1,s);r.setRenderTarget(u);let c=new aq(new op,new am({color:0xffffff}));r.render(c,i),r.setRenderTarget(null);let h=vu(t,u.width,u.height);return r.readRenderTargetPixels(u,0,0,u.width,u.height,h),u.dispose(),c.geometry.dispose(),c.material.dispose(),y=0!==h[0]};class vh{constructor(t){var r,i,s,u,c,h,p,f,v,y,x,_,b,w,S,M;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(t){throw this._renderer.setRenderTarget(null),t}this._renderer.setRenderTarget(null)},this._width=t.width,this._height=t.height,this._type=t.type,this._colorSpace=t.colorSpace;let A={format:tH,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:(null===(r=t.renderTargetOptions)||void 0===r?void 0:r.anisotropy)!==void 0?null===(i=t.renderTargetOptions)||void 0===i?void 0:i.anisotropy:1,generateMipmaps:(null===(s=t.renderTargetOptions)||void 0===s?void 0:s.generateMipmaps)!==void 0&&(null===(u=t.renderTargetOptions)||void 0===u?void 0:u.generateMipmaps),magFilter:(null===(c=t.renderTargetOptions)||void 0===c?void 0:c.magFilter)!==void 0?null===(h=t.renderTargetOptions)||void 0===h?void 0:h.magFilter:tw,minFilter:(null===(p=t.renderTargetOptions)||void 0===p?void 0:p.minFilter)!==void 0?null===(f=t.renderTargetOptions)||void 0===f?void 0:f.minFilter:tw,samples:(null===(v=t.renderTargetOptions)||void 0===v?void 0:v.samples)!==void 0?null===(y=t.renderTargetOptions)||void 0===y?void 0:y.samples:void 0,wrapS:(null===(x=t.renderTargetOptions)||void 0===x?void 0:x.wrapS)!==void 0?null===(_=t.renderTargetOptions)||void 0===_?void 0:_.wrapS:tg,wrapT:(null===(b=t.renderTargetOptions)||void 0===b?void 0:b.wrapT)!==void 0?null===(w=t.renderTargetOptions)||void 0===w?void 0:w.wrapT:tg};if(this._material=t.material,t.renderer?this._renderer=t.renderer:(this._renderer=vh.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new lN,this._camera=new oC,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!vc(this._type,this._renderer,this._camera,A)){let t;if(this._type===tk)t=this._renderer.extensions.has("EXT_color_buffer_float")?tL:void 0;void 0!==t?this._type=t:this._supportsReadPixels=!1}this._quad=new aq(new op,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new r2(this.width,this.height,A),this._renderTarget.texture.mapping=(null===(S=t.renderTargetOptions)||void 0===S?void 0:S.mapping)!==void 0?null===(M=t.renderTargetOptions)||void 0===M?void 0:M.mapping:tl}static instantiateRenderer(){let t=new lk;return t.setSize(128,128),t}toArray(){if(!this._supportsReadPixels)throw Error("Can't read pixels in this browser");let t=vu(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,t),t}toDataTexture(t){let r=new uo(this.toArray(),this.width,this.height,tH,this._type,(null==t?void 0:t.mapping)||tl,(null==t?void 0:t.wrapS)||tg,(null==t?void 0:t.wrapT)||tg,(null==t?void 0:t.magFilter)||tw,(null==t?void 0:t.minFilter)||tw,(null==t?void 0:t.anisotropy)||1,nG);return r.generateMipmaps=(null==t?void 0:t.generateMipmaps)!==void 0&&(null==t?void 0:t.generateMipmaps),r}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(t){this.disposeOnDemandRenderer(),t&&this.renderTarget.dispose(),this.material instanceof a4&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof rQ&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof rQ&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(t){this._width=t,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(t){this._height=t,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(t){this._renderTarget=t,this._width=t.width,this._height=t.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}let vd=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,vp=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class vf extends a4{constructor({gamma:t,offsetHdr:r,offsetSdr:i,gainMapMin:s,gainMapMax:u,maxDisplayBoost:c,hdrCapacityMin:h,hdrCapacityMax:p,sdr:f,gainMap:v}){super({name:"GainMapDecoderMaterial",vertexShader:vd,fragmentShader:vp,uniforms:{sdr:{value:f},gainMap:{value:v},gamma:{value:new r8(1/t[0],1/t[1],1/t[2])},offsetHdr:{value:new r8().fromArray(r)},offsetSdr:{value:new r8().fromArray(i)},gainMapMin:{value:new r8().fromArray(s)},gainMapMax:{value:new r8().fromArray(u)},weightFactor:{value:(Math.log2(c)-h)/(p-h)}},blending:eA,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=c,this._hdrCapacityMin=h,this._hdrCapacityMax=p,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(t){this.uniforms.sdr.value=t}get gainMap(){return this.uniforms.gainMap.value}set gainMap(t){this.uniforms.gainMap.value=t}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(t){this.uniforms.offsetHdr.value.fromArray(t)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(t){this.uniforms.offsetSdr.value.fromArray(t)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(t){this.uniforms.gainMapMin.value.fromArray(t)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(t){this.uniforms.gainMapMax.value.fromArray(t)}get gamma(){let t=this.uniforms.gamma.value;return[1/t.x,1/t.y,1/t.z]}set gamma(t){let r=this.uniforms.gamma.value;r.x=1/t[0],r.y=1/t[1],r.z=1/t[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(t){this._hdrCapacityMin=t,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(t){this._hdrCapacityMax=t,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(t){this._maxDisplayBoost=Math.max(1,Math.min(65504,t)),this.calculateWeight()}calculateWeight(){let t=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,t))}}class vg extends Error{}class vm extends Error{}let vv=(t,r,i)=>{var s;let u;let c=null===(s=t.attributes.getNamedItem(r))||void 0===s?void 0:s.nodeValue;if(c)u=c;else{let s=t.getElementsByTagName(r)[0];if(s){let t=s.getElementsByTagName("rdf:li");if(3===t.length)u=Array.from(t).map(t=>t.innerHTML);else throw Error(`Gainmap metadata contains an array of items for ${r} but its length is not 3`)}else{if(i)return i;throw Error(`Can't find ${r} in gainmap metadata`)}}return u},vy=t=>{var r,i;let s;"undefined"!=typeof TextDecoder?s=new TextDecoder().decode(t):s=t.toString();let u=s.indexOf("<x:xmpmeta"),c=new DOMParser;for(;-1!==u;){let t=s.indexOf("x:xmpmeta>",u);s.slice(u,t+10);let h=s.slice(u,t+10);try{let t=c.parseFromString(h,"text/xml").getElementsByTagName("rdf:Description")[0],s=vv(t,"hdrgm:GainMapMin","0"),u=vv(t,"hdrgm:GainMapMax"),p=vv(t,"hdrgm:Gamma","1"),f=vv(t,"hdrgm:OffsetSDR","0.015625"),v=vv(t,"hdrgm:OffsetHDR","0.015625"),y=null===(r=t.attributes.getNamedItem("hdrgm:HDRCapacityMin"))||void 0===r?void 0:r.nodeValue;!y&&(y="0");let x=null===(i=t.attributes.getNamedItem("hdrgm:HDRCapacityMax"))||void 0===i?void 0:i.nodeValue;if(!x)throw Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(s)?s.map(t=>parseFloat(t)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(u)?u.map(t=>parseFloat(t)):[parseFloat(u),parseFloat(u),parseFloat(u)],gamma:Array.isArray(p)?p.map(t=>parseFloat(t)):[parseFloat(p),parseFloat(p),parseFloat(p)],offsetSdr:Array.isArray(f)?f.map(t=>parseFloat(t)):[parseFloat(f),parseFloat(f),parseFloat(f)],offsetHdr:Array.isArray(v)?v.map(t=>parseFloat(t)):[parseFloat(v),parseFloat(v),parseFloat(v)],hdrCapacityMin:parseFloat(y),hdrCapacityMax:parseFloat(x)}}catch(t){}u=s.indexOf("<x:xmpmeta",t)}};class vx{constructor(t){this.options={debug:!!t&&void 0!==t.debug&&t.debug,extractFII:!t||void 0===t.extractFII||t.extractFII,extractNonFII:!t||void 0===t.extractNonFII||t.extractNonFII}}extract(t){return new Promise((r,i)=>{let s;let u=this.options.debug,c=new DataView(t.buffer);if(65496!==c.getUint16(0)){i(Error("Not a valid jpeg"));return}let h=c.byteLength,p=2,f=0;for(;p<h;){if(++f>250){i(Error(`Found no marker after ${f} loops `));return}if(255!==c.getUint8(p)){i(Error(`Not a valid marker at offset 0x${p.toString(16)}, found: 0x${c.getUint8(p).toString(16)}`));return}if(s=c.getUint8(p+1),226===s){let t=p+4;if(0x4d504600===c.getUint32(t)){let s;let u=t+4;if(18761===c.getUint16(u))s=!1;else if(19789===c.getUint16(u))s=!0;else{i(Error("No valid endianness marker found in TIFF header"));return}if(42!==c.getUint16(u+2,!s)){i(Error("Not valid TIFF data! (no 0x002A marker)"));return}let h=c.getUint32(u+4,!s);if(h<8){i(Error("Not valid TIFF data! (First offset less than 8)"));return}let p=u+h,f=c.getUint16(p,!s),v=p+2,y=0;for(let t=v;t<v+12*f;t+=12)45057===c.getUint16(t,!s)&&(y=c.getUint32(t+8,!s));let x=p+2+12*f+4,_=[];for(let t=x;t<x+16*y;t+=16){let r={MPType:c.getUint32(t,!s),size:c.getUint32(t+4,!s),dataOffset:c.getUint32(t+8,!s),dependantImages:c.getUint32(t+12,!s),start:-1,end:-1,isFII:!1};r.dataOffset?(r.start=u+r.dataOffset,r.isFII=!1):(r.start=0,r.isFII=!0),r.end=r.start+r.size,_.push(r)}if(this.options.extractNonFII&&_.length){let t=new Blob([c]),i=[];for(let r of _){if(r.isFII&&!this.options.extractFII)continue;let s=t.slice(r.start,r.end+1,"image/jpeg");i.push(s)}r(i)}}}p+=2+c.getUint16(p+2)}})}}let v_=async t=>{let r=vy(t);if(!r)throw new vm("Gain map XMP metadata not found");let i=new vx({extractFII:!0,extractNonFII:!0}),s=await i.extract(t);if(2!==s.length)throw new vg("Gain map recovery image not found");return{sdr:new Uint8Array(await s[0].arrayBuffer()),gainMap:new Uint8Array(await s[1].arrayBuffer()),metadata:r}},vb=t=>new Promise((r,i)=>{let s=document.createElement("img");s.onload=()=>{r(s)},s.onerror=t=>{i(t)},s.src=URL.createObjectURL(t)});class vw extends hO{constructor(t,r){super(r),t&&(this._renderer=t),this._internalLoadingManager=new hL}setRenderer(t){return this._renderer=t,this}setRenderTargetOptions(t){return this._renderTargetOptions=t,this}prepareQuadRenderer(){return this._renderer,new vh({width:16,height:16,type:tk,colorSpace:nG,material:new vf({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new rQ,sdr:new rQ}),renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(t,r,i,s){let u,c;let h=s?new Blob([s],{type:"image/jpeg"}):void 0,p=new Blob([i],{type:"image/jpeg"}),f=!1;if("undefined"==typeof createImageBitmap){let t=await Promise.all([h?vb(h):Promise.resolve(void 0),vb(p)]);c=t[0],u=t[1],f=!0}else{let t=await Promise.all([h?createImageBitmap(h,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(p,{imageOrientation:"flipY"})]);c=t[0],u=t[1]}let v=new rQ(c||new ImageData(2,2),tl,tg,tg,tw,tC,tH,tT,1,nG);v.flipY=f,v.needsUpdate=!0;let y=new rQ(u,tl,tg,tg,tw,tC,tH,tT,1,nH);y.flipY=f,y.needsUpdate=!0,t.width=u.width,t.height=u.height,t.material.gainMap=v,t.material.sdr=y,t.material.gainMapMin=r.gainMapMin,t.material.gainMapMax=r.gainMapMax,t.material.offsetHdr=r.offsetHdr,t.material.offsetSdr=r.offsetSdr,t.material.gamma=r.gamma,t.material.hdrCapacityMin=r.hdrCapacityMin,t.material.hdrCapacityMax=r.hdrCapacityMax,t.material.maxDisplayBoost=Math.pow(2,r.hdrCapacityMax),t.material.needsUpdate=!0,t.render()}}class vS extends vw{load([t,r,i],s,u,c){let h,p,f;let v=this.prepareQuadRenderer(),y=async()=>{if(h&&p&&f){try{await this.render(v,f,h,p)}catch(s){this.manager.itemError(t),this.manager.itemError(r),this.manager.itemError(i),"function"==typeof c&&c(s),v.disposeOnDemandRenderer();return}"function"==typeof s&&s(v),this.manager.itemEnd(t),this.manager.itemEnd(r),this.manager.itemEnd(i),v.disposeOnDemandRenderer()}},x=!0,_=0,b=0,w=!0,S=0,M=0,A=!0,C=0,T=0,I=()=>{"function"==typeof u&&u(new ProgressEvent("progress",{lengthComputable:x&&w&&A,loaded:b+M+T,total:_+S+C}))};this.manager.itemStart(t),this.manager.itemStart(r),this.manager.itemStart(i);let D=new hF(this._internalLoadingManager);D.setResponseType("arraybuffer"),D.setRequestHeader(this.requestHeader),D.setPath(this.path),D.setWithCredentials(this.withCredentials),D.load(t,async t=>{if("string"==typeof t)throw Error("Invalid sdr buffer");h=t,await y()},t=>{x=t.lengthComputable,b=t.loaded,_=t.total,I()},r=>{this.manager.itemError(t),"function"==typeof c&&c(r)});let P=new hF(this._internalLoadingManager);P.setResponseType("arraybuffer"),P.setRequestHeader(this.requestHeader),P.setPath(this.path),P.setWithCredentials(this.withCredentials),P.load(r,async t=>{if("string"==typeof t)throw Error("Invalid gainmap buffer");p=t,await y()},t=>{w=t.lengthComputable,M=t.loaded,S=t.total,I()},t=>{this.manager.itemError(r),"function"==typeof c&&c(t)});let R=new hF(this._internalLoadingManager);return R.setRequestHeader(this.requestHeader),R.setPath(this.path),R.setWithCredentials(this.withCredentials),R.load(i,async t=>{if("string"!=typeof t)throw Error("Invalid metadata string");f=JSON.parse(t),await y()},t=>{A=t.lengthComputable,T=t.loaded,C=t.total,I()},t=>{this.manager.itemError(i),"function"==typeof c&&c(t)}),v}}class vM extends vw{load(t,r,i,s){let u=this.prepareQuadRenderer(),c=new hF(this._internalLoadingManager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(this.withCredentials),this.manager.itemStart(t),c.load(t,async i=>{let c,h,p;if("string"==typeof i)throw Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");let f=new Uint8Array(i);try{let t=await v_(f);c=t.sdr,h=t.gainMap,p=t.metadata}catch(t){if(t instanceof vm||t instanceof vg)p={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=f;else throw t}try{await this.render(u,p,c,h)}catch(r){this.manager.itemError(t),"function"==typeof s&&s(r),u.disposeOnDemandRenderer();return}"function"==typeof r&&r(u),this.manager.itemEnd(t),u.disposeOnDemandRenderer()},i,r=>{this.manager.itemError(t),"function"==typeof s&&s(r)}),u}}let vA={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},vC="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",vT=t=>Array.isArray(t),vE=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function vI({files:t=vE,path:r="",preset:i,encoding:s,extensions:u}={}){let c=null,h=!1;i&&(vR(i),t=vA[i],r=vC),h=vT(t);let{extension:p,isCubemap:f}=vL(t);if(!(c=vk(p)))throw Error("useEnvironment: Unrecognized file extension: "+t);let v=fw(t=>t.gl);(0,pI.useLayoutEffect)(()=>{("webp"===p||"jpg"===p||"jpeg"===p)&&v.domElement.addEventListener("webglcontextlost",function(){fC.clear(c,h?[t]:t)},{once:!0})},[t,v.domElement]);let y=fC(c,h?[t]:t,t=>{("webp"===p||"jpg"===p||"jpeg"===p)&&t.setRenderer(v),null==t.setPath||t.setPath(r),u&&u(t)}),x=h?y[0]:y;if("jpg"===p||"jpeg"===p||"webp"===p){var _;x=null==(_=x.renderTarget)?void 0:_.texture}return x.mapping=f?tu:th,"colorSpace"in x?x.colorSpace=(null!=s?s:f)?"srgb":"srgb-linear":x.encoding=(null!=s?s:f)?3001:3e3,x}let vD={files:vE,path:"",preset:void 0,extensions:void 0};vI.preload=t=>{let r={...vD,...t},{files:i,path:s=""}=r,{preset:u,extensions:c}=r;u&&(vR(u),i=vA[u],s=vC);let{extension:h}=vL(i);if("webp"===h||"jpg"===h||"jpeg"===h)throw Error("useEnvironment: Preloading gainmaps is not supported");let p=vk(h);if(!p)throw Error("useEnvironment: Unrecognized file extension: "+i);fC.preload(p,vT(i)?[i]:i,t=>{null==t.setPath||t.setPath(s),c&&c(t)})};let vP={files:vE,preset:void 0};function vR(t){if(!(t in vA))throw Error("Preset must be one of: "+Object.keys(vA).join(", "))}function vL(t){var r;let i=vT(t)&&6===t.length,s=vT(t)&&3===t.length&&t.some(t=>t.endsWith("json")),u=vT(t)?t[0]:t;return{extension:i?"cube":s?"webp":u.startsWith("data:application/exr")?"exr":u.startsWith("data:application/hdr")?"hdr":u.startsWith("data:image/jpeg")?"jpg":null==(r=u.split(".").pop())||null==(r=r.split("?"))||null==(r=r.shift())?void 0:r.toLowerCase(),isCubemap:i,isGainmap:s}}function vk(t){return"cube"===t?hG:"hdr"===t?gZ:"exr"===t?vl:"jpg"===t||"jpeg"===t?vM:"webp"===t?vS:null}vI.clear=t=>{let r={...vP,...t},{files:i}=r,{preset:s}=r;s&&(vR(s),i=vA[s]);let{extension:u}=vL(i),c=vk(u);if(!c)throw Error("useEnvironment: Unrecognized file extension: "+i);fC.clear(c,vT(i)?[i]:i)};let vO=t=>t.current&&t.current.isScene,vB=t=>vO(t)?t.current:t;function vN(t,r,i,s,u={}){var c,h,p,f,v;u={backgroundBlurriness:null!==(c=u.blur)&&void 0!==c?c:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...u};let y=vB(r||i),x=y.background,_=y.environment,b={backgroundBlurriness:y.backgroundBlurriness,backgroundIntensity:y.backgroundIntensity,backgroundRotation:null!==(h=null==(p=y.backgroundRotation)||null==p.clone?void 0:p.clone())&&void 0!==h?h:[0,0,0],environmentIntensity:y.environmentIntensity,environmentRotation:null!==(f=null==(v=y.environmentRotation)||null==v.clone?void 0:v.clone())&&void 0!==f?f:[0,0,0]};return"only"!==t&&(y.environment=s),t&&(y.background=s),fP(y,u),()=>{"only"!==t&&(y.environment=_),t&&(y.background=x),fP(y,b)}}function vF({scene:t,background:r=!1,map:i,...s}){let u=fw(t=>t.scene);return pI.useLayoutEffect(()=>{if(i)return vN(r,t,u,i,s)}),null}function vz({background:t=!1,scene:r,blur:i,backgroundBlurriness:s,backgroundIntensity:u,backgroundRotation:c,environmentIntensity:h,environmentRotation:p,...f}){let v=vI(f),y=fw(t=>t.scene);return pI.useLayoutEffect(()=>vN(t,r,y,v,{blur:i,backgroundBlurriness:s,backgroundIntensity:u,backgroundRotation:c,environmentIntensity:h,environmentRotation:p})),null}function vU({children:t,near:r=1,far:i=1e3,resolution:s=256,frames:u=1,map:c,background:h=!1,blur:p,backgroundBlurriness:f,backgroundIntensity:v,backgroundRotation:y,environmentIntensity:x,environmentRotation:_,scene:b,files:w,path:S,preset:M,extensions:A}){var C,T,I;let D=fw(t=>t.gl),P=fw(t=>t.scene),R=pI.useRef(null),[L]=pI.useState(()=>new lN),k=pI.useMemo(()=>{let t=new or(s);return t.texture.type=tk,t},[s]);pI.useLayoutEffect(()=>(1===u&&R.current.update(D,L),vN(h,b,P,k.texture,{blur:p,backgroundBlurriness:f,backgroundIntensity:v,backgroundRotation:y,environmentIntensity:x,environmentRotation:_})),[t,L,k.texture,b,P,h,u,D]);let O=1;return fS(()=>{(u===1/0||O<u)&&(R.current.update(D,L),O++)}),pI.createElement(pI.Fragment,null,(C=pI.createElement(pI.Fragment,null,t,pI.createElement("cubeCamera",{ref:R,args:[r,i,k]}),w||M?pI.createElement(vz,{background:!0,files:w,preset:M,path:S,extensions:A}):c?pI.createElement(vF,{background:!0,map:c,extensions:A}):null),T=L,(0,eu.jsx)(fN,{children:C,container:T,state:void 0},T.uuid)))}function vH(t){var r,i,s,u;let c=vI(t),h=t.map||c;pI.useMemo(()=>pj({GroundProjectedEnvImpl:gJ}),[]);let p=pI.useMemo(()=>[h],[h]),f=null==(r=t.ground)?void 0:r.height,v=null==(i=t.ground)?void 0:i.radius,y=null!==(s=null==(u=t.ground)?void 0:u.scale)&&void 0!==s?s:1e3;return pI.createElement(pI.Fragment,null,pI.createElement(vF,gY({},t,{map:h})),pI.createElement("groundProjectedEnvImpl",{args:p,scale:y,height:f,radius:v}))}function vG(t){return t.ground?pI.createElement(vH,t):t.map?pI.createElement(vF,t):t.children?pI.createElement(vU,t):pI.createElement(vz,t)}function vV(t,r,i,s){let u=class extends a4{constructor(u={}){let c=Object.entries(t);super({uniforms:c.reduce((t,[r,i])=>{let s=a5.clone({[r]:{value:i}});return{...t,...s}},{}),vertexShader:r,fragmentShader:i}),this.key="",c.forEach(([t])=>Object.defineProperty(this,t,{get:()=>this.uniforms[t].value,set:r=>this.uniforms[t].value=r})),Object.assign(this,u),s&&s(this)}};return u.key=rI.generateUUID(),u}let vW=parseInt(eh.replace(/\D+/g,"")),vj=vV({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new ad,sectionColor:new ad,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new r8,worldPlanePosition:new r8},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${vW>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),vX=pI.forwardRef(({args:t,cellColor:r="#000000",sectionColor:i="#2080ff",cellSize:s=.5,sectionSize:u=1,followCamera:c=!1,infiniteGrid:h=!1,fadeDistance:p=100,fadeStrength:f=1,fadeFrom:v=1,cellThickness:y=.5,sectionThickness:x=1,side:_=eS,...b},w)=>{pj({GridMaterial:vj});let S=pI.useRef(null);pI.useImperativeHandle(w,()=>S.current,[]);let M=new os,A=new r8(0,1,0),C=new r8(0,0,0);return fS(t=>{M.setFromNormalAndCoplanarPoint(A,C).applyMatrix4(S.current.matrixWorld);let r=S.current.material,i=r.uniforms.worldCamProjPosition,s=r.uniforms.worldPlanePosition;M.projectPoint(t.camera.position,i.value),s.value.set(0,0,0).applyMatrix4(S.current.matrixWorld)}),pI.createElement("mesh",gY({ref:S,frustumCulled:!1},b),pI.createElement("gridMaterial",gY({transparent:!0,"extensions-derivatives":!0,side:_},{cellSize:s,sectionSize:u,cellColor:r,sectionColor:i,cellThickness:y,sectionThickness:x},{fadeDistance:p,fadeStrength:f,fadeFrom:v,infiniteGrid:h,followCamera:c})),pI.createElement("planeGeometry",{args:t}))}),vY={LEFT:1,RIGHT:2,MIDDLE:4},v$=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),vJ={NONE:0,IN:1,OUT:-1};function vZ(t){return t.isPerspectiveCamera}function vK(t){return t.isOrthographicCamera}let vq=2*Math.PI,vQ=Math.PI/2,v0=Math.PI/180;function v1(t,r,i){return Math.max(r,Math.min(i,t))}function v2(t,r=1e-5){return Math.abs(t)<r}function v3(t,r,i=1e-5){return v2(t-r,i)}function v5(t,r){return Math.round(t/r)*r}function v4(t){return isFinite(t)?t:t<0?-Number.MAX_VALUE:Number.MAX_VALUE}function v6(t){return Math.abs(t)<Number.MAX_VALUE?t:1/0*t}function v9(t,r,i,s,u=1/0,c){let h=2/(s=Math.max(1e-4,s)),p=h*c,f=1/(1+p+.48*p*p+.235*p*p*p),v=t-r,y=r,x=u*s;r=t-(v=v1(v,-x,x));let _=(i.value+h*v)*c;i.value=(i.value-h*_)*f;let b=r+(v+_)*f;return y-t>0==b>y&&(b=y,i.value=(b-y)/c),b}function v8(t,r,i,s,u=1/0,c,h){let p=2/(s=Math.max(1e-4,s)),f=p*c,v=1/(1+f+.48*f*f+.235*f*f*f),y=r.x,x=r.y,_=r.z,b=t.x-y,w=t.y-x,S=t.z-_,M=y,A=x,C=_,T=u*s,I=b*b+w*w+S*S;if(I>T*T){let t=Math.sqrt(I);b=b/t*T,w=w/t*T,S=S/t*T}y=t.x-b,x=t.y-w,_=t.z-S;let D=(i.x+p*b)*c,P=(i.y+p*w)*c,R=(i.z+p*S)*c;i.x=(i.x-p*D)*v,i.y=(i.y-p*P)*v,i.z=(i.z-p*R)*v,h.x=y+(b+D)*v,h.y=x+(w+P)*v,h.z=_+(S+R)*v;let L=M-t.x,k=A-t.y,O=C-t.z,B=h.x-M,N=h.y-A;return L*B+k*N+O*(h.z-C)>0&&(h.x=M,h.y=A,h.z=C,i.x=(h.x-M)/c,i.y=(h.y-A)/c,i.z=(h.z-C)/c),h}function v7(t,r){r.set(0,0),t.forEach(t=>{r.x+=t.clientX,r.y+=t.clientY}),r.x/=t.length,r.y/=t.length}function ye(t,r){return!!vK(t)||!1}class yt{constructor(){this._listeners={}}addEventListener(t,r){let i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(r)&&i[t].push(r)}hasEventListener(t,r){let i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(r)}removeEventListener(t,r){let i=this._listeners[t];if(void 0!==i){let t=i.indexOf(r);-1!==t&&i.splice(t,1)}}removeAllEventListeners(t){if(!t){this._listeners={};return}Array.isArray(this._listeners[t])&&(this._listeners[t].length=0)}dispatchEvent(t){let r=this._listeners[t.type];if(void 0!==r){t.target=this;let i=r.slice(0);for(let r=0,s=i.length;r<s;r++)i[r].call(this,t)}}}let yn=1/8,yr=/Mac/.test(null===(ead=null==globalThis?void 0:globalThis.navigator)||void 0===ead?void 0:ead.platform);class yi extends yt{static install(t){_=Object.freeze(new(x=t.THREE).Vector3(0,0,0)),b=Object.freeze(new x.Vector3(0,1,0)),w=Object.freeze(new x.Vector3(0,0,1)),S=new x.Vector2,M=new x.Vector3,A=new x.Vector3,C=new x.Vector3,T=new x.Vector3,I=new x.Vector3,D=new x.Vector3,P=new x.Vector3,R=new x.Vector3,L=new x.Vector3,k=new x.Spherical,O=new x.Spherical,B=new x.Box3,N=new x.Box3,F=new x.Sphere,z=new x.Quaternion,U=new x.Quaternion,H=new x.Matrix4,G=new x.Raycaster}static get ACTION(){return v$}constructor(t,r){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=v$.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=vJ.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new x.Vector3,this._focalOffsetVelocity=new x.Vector3,this._zoomVelocity={value:0},this._truckInternal=(t,r,i)=>{let s,u;if(vZ(this._camera)){let i=M.copy(this._camera.position).sub(this._target),c=this._camera.getEffectiveFOV()*v0,h=i.length()*Math.tan(.5*c);s=this.truckSpeed*t*h/this._elementRect.height,u=this.truckSpeed*r*h/this._elementRect.height}else{if(!vK(this._camera))return;let i=this._camera;s=t*(i.right-i.left)/i.zoom/this._elementRect.width,u=r*(i.top-i.bottom)/i.zoom/this._elementRect.height}this.verticalDragToForward?(i?this.setFocalOffset(this._focalOffsetEnd.x+s,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(s,0,!0),this.forward(-u,!0)):i?this.setFocalOffset(this._focalOffsetEnd.x+s,this._focalOffsetEnd.y+u,this._focalOffsetEnd.z,!0):this.truck(s,u,!0)},this._rotateInternal=(t,r)=>{let i=vq*this.azimuthRotateSpeed*t/this._elementRect.height,s=vq*this.polarRotateSpeed*r/this._elementRect.height;this.rotate(i,s,!0)},this._dollyInternal=(t,r,i)=>{let s=Math.pow(.95,-t*this.dollySpeed),u=this._sphericalEnd.radius,c=this._sphericalEnd.radius*s,h=v1(c,this.minDistance,this.maxDistance);this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(c,!0):(this.infinityDolly&&!this.dollyToCursor&&this.dollyInFixed(h-c,!0),this._dollyToNoClamp(h,!0)),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?c:h)-u,this._dollyControlCoord.set(r,i)),this._lastDollyDirection=Math.sign(-t)},this._zoomInternal=(t,r,i)=>{let s=Math.pow(.95,t*this.dollySpeed),u=this._zoom,c=this._zoom*s;this.zoomTo(c,!0),this.dollyToCursor&&(this._changedZoom+=c-u,this._dollyControlCoord.set(r,i))},this._camera=t,this._yAxisUpSpace=new x.Quaternion().setFromUnitVectors(this._camera.up,b),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=v$.NONE,this._target=new x.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new x.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new x.Spherical().setFromVector3(M.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new x.Vector3,new x.Vector3,new x.Vector3,new x.Vector3],this._updateNearPlaneCorners(),this._boundary=new x.Box3(new x.Vector3(-1/0,-1/0,-1/0),new x.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new x.Vector2,this.mouseButtons={left:v$.ROTATE,middle:v$.DOLLY,right:v$.TRUCK,wheel:vZ(this._camera)?v$.DOLLY:vK(this._camera)?v$.ZOOM:v$.NONE},this.touches={one:v$.TOUCH_ROTATE,two:vZ(this._camera)?v$.TOUCH_DOLLY_TRUCK:vK(this._camera)?v$.TOUCH_ZOOM_TRUCK:v$.NONE,three:v$.TOUCH_TRUCK};let i=new x.Vector2,s=new x.Vector2,u=new x.Vector2,c=t=>{if(!this._enabled||!this._domElement)return;if(0!==this._interactiveArea.left||0!==this._interactiveArea.top||1!==this._interactiveArea.width||1!==this._interactiveArea.height){let r=this._domElement.getBoundingClientRect(),i=t.clientX/r.width,s=t.clientY/r.height;if(i<this._interactiveArea.left||i>this._interactiveArea.right||s<this._interactiveArea.top||s>this._interactiveArea.bottom)return}let r="mouse"!==t.pointerType?null:(t.buttons&vY.LEFT)===vY.LEFT?vY.LEFT:(t.buttons&vY.MIDDLE)===vY.MIDDLE?vY.MIDDLE:(t.buttons&vY.RIGHT)===vY.RIGHT?vY.RIGHT:null;if(null!==r){let t=this._findPointerByMouseButton(r);t&&this._disposePointer(t)}if((t.buttons&vY.LEFT)===vY.LEFT&&this._lockedPointer)return;let i={pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY,deltaX:0,deltaY:0,mouseButton:r};this._activePointers.push(i),this._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",p),this._domElement.ownerDocument.addEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",p),this._isDragging=!0,_(t)},h=t=>{t.cancelable&&t.preventDefault();let r=t.pointerId,i=this._lockedPointer||this._findPointerById(r);if(i){if(i.clientX=t.clientX,i.clientY=t.clientY,i.deltaX=t.movementX,i.deltaY=t.movementY,this._state=0,"touch"===t.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(t.buttons&vY.LEFT)===vY.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(t.buttons&vY.MIDDLE)===vY.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(t.buttons&vY.RIGHT)===vY.RIGHT&&(this._state=this._state|this.mouseButtons.right);w()}},p=t=>{let r=this._findPointerById(t.pointerId);if(!r||r!==this._lockedPointer){if(r&&this._disposePointer(r),"touch"===t.pointerType)switch(this._activePointers.length){case 0:this._state=v$.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=v$.NONE;A()}},f=-1,v=t=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===v$.NONE)return;if(0!==this._interactiveArea.left||0!==this._interactiveArea.top||1!==this._interactiveArea.width||1!==this._interactiveArea.height){let r=this._domElement.getBoundingClientRect(),i=t.clientX/r.width,s=t.clientY/r.height;if(i<this._interactiveArea.left||i>this._interactiveArea.right||s<this._interactiveArea.top||s>this._interactiveArea.bottom)return}if(t.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===v$.ROTATE||this.mouseButtons.wheel===v$.TRUCK){let t=performance.now();f-t<1e3&&this._getClientRect(this._elementRect),f=t}let r=yr?-1:-3,i=1===t.deltaMode?t.deltaY/r:t.deltaY/(10*r),s=this.dollyToCursor?(t.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,u=this.dollyToCursor?-((t.clientY-this._elementRect.y)/this._elementRect.height*2)+1:0;switch(this.mouseButtons.wheel){case v$.ROTATE:this._rotateInternal(t.deltaX,t.deltaY),this._isUserControllingRotate=!0;break;case v$.TRUCK:this._truckInternal(t.deltaX,t.deltaY,!1),this._isUserControllingTruck=!0;break;case v$.OFFSET:this._truckInternal(t.deltaX,t.deltaY,!0),this._isUserControllingOffset=!0;break;case v$.DOLLY:this._dollyInternal(-i,s,u),this._isUserControllingDolly=!0;break;case v$.ZOOM:this._zoomInternal(-i,s,u),this._isUserControllingZoom=!0}this.dispatchEvent({type:"control"})},y=t=>{if(this._domElement&&this._enabled){if(this.mouseButtons.right===yi.ACTION.NONE){let r=t instanceof PointerEvent?t.pointerId:0,i=this._findPointerById(r);i&&this._disposePointer(i),this._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",p);return}t.preventDefault()}},_=t=>{if(!!this._enabled){if(v7(this._activePointers,S),this._getClientRect(this._elementRect),i.copy(S),s.copy(S),this._activePointers.length>=2){let t=S.x-this._activePointers[1].clientX,r=S.y-this._activePointers[1].clientY,i=Math.sqrt(t*t+r*r);u.set(0,i);let c=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,h=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;s.set(c,h)}if(this._state=0,t){if("pointerType"in t&&"touch"===t.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else!this._lockedPointer&&(t.buttons&vY.LEFT)===vY.LEFT&&(this._state=this._state|this.mouseButtons.left),(t.buttons&vY.MIDDLE)===vY.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(t.buttons&vY.RIGHT)===vY.RIGHT&&(this._state=this._state|this.mouseButtons.right)}else this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);((this._state&v$.ROTATE)===v$.ROTATE||(this._state&v$.TOUCH_ROTATE)===v$.TOUCH_ROTATE||(this._state&v$.TOUCH_DOLLY_ROTATE)===v$.TOUCH_DOLLY_ROTATE||(this._state&v$.TOUCH_ZOOM_ROTATE)===v$.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&v$.TRUCK)===v$.TRUCK||(this._state&v$.TOUCH_TRUCK)===v$.TOUCH_TRUCK||(this._state&v$.TOUCH_DOLLY_TRUCK)===v$.TOUCH_DOLLY_TRUCK||(this._state&v$.TOUCH_ZOOM_TRUCK)===v$.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&v$.DOLLY)===v$.DOLLY||(this._state&v$.TOUCH_DOLLY)===v$.TOUCH_DOLLY||(this._state&v$.TOUCH_DOLLY_TRUCK)===v$.TOUCH_DOLLY_TRUCK||(this._state&v$.TOUCH_DOLLY_OFFSET)===v$.TOUCH_DOLLY_OFFSET||(this._state&v$.TOUCH_DOLLY_ROTATE)===v$.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&v$.ZOOM)===v$.ZOOM||(this._state&v$.TOUCH_ZOOM)===v$.TOUCH_ZOOM||(this._state&v$.TOUCH_ZOOM_TRUCK)===v$.TOUCH_ZOOM_TRUCK||(this._state&v$.TOUCH_ZOOM_OFFSET)===v$.TOUCH_ZOOM_OFFSET||(this._state&v$.TOUCH_ZOOM_ROTATE)===v$.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&v$.OFFSET)===v$.OFFSET||(this._state&v$.TOUCH_OFFSET)===v$.TOUCH_OFFSET||(this._state&v$.TOUCH_DOLLY_OFFSET)===v$.TOUCH_DOLLY_OFFSET||(this._state&v$.TOUCH_ZOOM_OFFSET)===v$.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})}},w=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,v7(this._activePointers,S);let t=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,r=t?-t.deltaX:s.x-S.x,c=t?-t.deltaY:s.y-S.y;if(s.copy(S),((this._state&v$.ROTATE)===v$.ROTATE||(this._state&v$.TOUCH_ROTATE)===v$.TOUCH_ROTATE||(this._state&v$.TOUCH_DOLLY_ROTATE)===v$.TOUCH_DOLLY_ROTATE||(this._state&v$.TOUCH_ZOOM_ROTATE)===v$.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(r,c),this._isUserControllingRotate=!0),(this._state&v$.DOLLY)===v$.DOLLY||(this._state&v$.ZOOM)===v$.ZOOM){let t=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,r=this.dollyToCursor?-((i.y-this._elementRect.y)/this._elementRect.height*2)+1:0,s=this.dollyDragInverted?-1:1;(this._state&v$.DOLLY)===v$.DOLLY?(this._dollyInternal(s*c*yn,t,r),this._isUserControllingDolly=!0):(this._zoomInternal(s*c*yn,t,r),this._isUserControllingZoom=!0)}if((this._state&v$.TOUCH_DOLLY)===v$.TOUCH_DOLLY||(this._state&v$.TOUCH_ZOOM)===v$.TOUCH_ZOOM||(this._state&v$.TOUCH_DOLLY_TRUCK)===v$.TOUCH_DOLLY_TRUCK||(this._state&v$.TOUCH_ZOOM_TRUCK)===v$.TOUCH_ZOOM_TRUCK||(this._state&v$.TOUCH_DOLLY_OFFSET)===v$.TOUCH_DOLLY_OFFSET||(this._state&v$.TOUCH_ZOOM_OFFSET)===v$.TOUCH_ZOOM_OFFSET||(this._state&v$.TOUCH_DOLLY_ROTATE)===v$.TOUCH_DOLLY_ROTATE||(this._state&v$.TOUCH_ZOOM_ROTATE)===v$.TOUCH_ZOOM_ROTATE){let t=S.x-this._activePointers[1].clientX,r=S.y-this._activePointers[1].clientY,i=Math.sqrt(t*t+r*r),c=u.y-i;u.set(0,i);let h=this.dollyToCursor?(s.x-this._elementRect.x)/this._elementRect.width*2-1:0,p=this.dollyToCursor?-((s.y-this._elementRect.y)/this._elementRect.height*2)+1:0;(this._state&v$.TOUCH_DOLLY)===v$.TOUCH_DOLLY||(this._state&v$.TOUCH_DOLLY_ROTATE)===v$.TOUCH_DOLLY_ROTATE||(this._state&v$.TOUCH_DOLLY_TRUCK)===v$.TOUCH_DOLLY_TRUCK||(this._state&v$.TOUCH_DOLLY_OFFSET)===v$.TOUCH_DOLLY_OFFSET?(this._dollyInternal(c*yn,h,p),this._isUserControllingDolly=!0):(this._zoomInternal(c*yn,h,p),this._isUserControllingZoom=!0)}((this._state&v$.TRUCK)===v$.TRUCK||(this._state&v$.TOUCH_TRUCK)===v$.TOUCH_TRUCK||(this._state&v$.TOUCH_DOLLY_TRUCK)===v$.TOUCH_DOLLY_TRUCK||(this._state&v$.TOUCH_ZOOM_TRUCK)===v$.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(r,c,!1),this._isUserControllingTruck=!0),((this._state&v$.OFFSET)===v$.OFFSET||(this._state&v$.TOUCH_OFFSET)===v$.TOUCH_OFFSET||(this._state&v$.TOUCH_DOLLY_OFFSET)===v$.TOUCH_DOLLY_OFFSET||(this._state&v$.TOUCH_ZOOM_OFFSET)===v$.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(r,c,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},A=()=>{v7(this._activePointers,S),s.copy(S),this._dragNeedsUpdate=!1,(0===this._activePointers.length||1===this._activePointers.length&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),0===this._activePointers.length&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",p),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{this._enabled&&this._domElement&&(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",p),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",C),this._domElement.ownerDocument.addEventListener("pointerlockerror",T),this._domElement.ownerDocument.addEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",p),_())},this.unlockPointer=()=>{var t,r,i;null!==this._lockedPointer&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),null===(t=this._domElement)||void 0===t||t.ownerDocument.exitPointerLock(),null===(r=this._domElement)||void 0===r||r.ownerDocument.removeEventListener("pointerlockchange",C),null===(i=this._domElement)||void 0===i||i.ownerDocument.removeEventListener("pointerlockerror",T),this.cancel()};let C=()=>{!(this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement)&&this.unlockPointer()},T=()=>{this.unlockPointer()};this._addAllEventListeners=t=>{this._domElement=t,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",c),this._domElement.addEventListener("pointercancel",p),this._domElement.addEventListener("wheel",v,{passive:!1}),this._domElement.addEventListener("contextmenu",y)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",c),this._domElement.removeEventListener("pointercancel",p),this._domElement.removeEventListener("wheel",v,{passive:!1}),this._domElement.removeEventListener("contextmenu",y),this._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",p),this._domElement.ownerDocument.removeEventListener("pointerlockchange",C),this._domElement.ownerDocument.removeEventListener("pointerlockerror",T))},this.cancel=()=>{this._state!==v$.NONE&&(this._state=v$.NONE,this._activePointers.length=0,A())},r&&this.connect(r),this.update(0)}get camera(){return this._camera}set camera(t){this._camera=t,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._domElement&&(t?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(t){(this._spherical.radius!==t||this._sphericalEnd.radius!==t)&&(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(t){(this._spherical.theta!==t||this._sphericalEnd.theta!==t)&&(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(t){(this._spherical.phi!==t||this._sphericalEnd.phi!==t)&&(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0}set interactiveArea(t){this._interactiveArea.width=v1(t.width,0,1),this._interactiveArea.height=v1(t.height,0,1),this._interactiveArea.x=v1(t.x,0,1-this._interactiveArea.width),this._interactiveArea.y=v1(t.y,0,1-this._interactiveArea.height)}addEventListener(t,r){super.addEventListener(t,r)}removeEventListener(t,r){super.removeEventListener(t,r)}rotate(t,r,i=!1){return this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+r,i)}rotateAzimuthTo(t,r=!1){return this.rotateTo(t,this._sphericalEnd.phi,r)}rotatePolarTo(t,r=!1){return this.rotateTo(this._sphericalEnd.theta,t,r)}rotateTo(t,r,i=!1){this._isUserControllingRotate=!1;let s=v1(t,this.minAzimuthAngle,this.maxAzimuthAngle),u=v1(r,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=s,this._sphericalEnd.phi=u,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,!i&&(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);let c=!i||v3(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&v3(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(c)}dolly(t,r=!1){return this.dollyTo(this._sphericalEnd.radius-t,r)}dollyTo(t,r=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=vJ.NONE,this._changedDolly=0,this._dollyToNoClamp(v1(t,this.minDistance,this.maxDistance),r)}_dollyToNoClamp(t,r=!1){let i=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){let r=this._collisionTest(),s=v3(r,this._spherical.radius);if(!(i>t)&&s)return Promise.resolve();this._sphericalEnd.radius=Math.min(t,r)}else this._sphericalEnd.radius=t;this._needsUpdate=!0,!r&&(this._spherical.radius=this._sphericalEnd.radius);let s=!r||v3(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(t,r=!1){this._targetEnd.add(this._getCameraDirection(T).multiplyScalar(t)),!r&&this._target.copy(this._targetEnd);let i=!r||v3(this._target.x,this._targetEnd.x,this.restThreshold)&&v3(this._target.y,this._targetEnd.y,this.restThreshold)&&v3(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(t,r=!1){return this.zoomTo(this._zoomEnd+t,r)}zoomTo(t,r=!1){this._isUserControllingZoom=!1,this._zoomEnd=v1(t,this.minZoom,this.maxZoom),this._needsUpdate=!0,!r&&(this._zoom=this._zoomEnd);let i=!r||v3(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(t,r,i=!1){return this.truck(t,r,i)}truck(t,r,i=!1){this._camera.updateMatrix(),I.setFromMatrixColumn(this._camera.matrix,0),D.setFromMatrixColumn(this._camera.matrix,1),I.multiplyScalar(t),D.multiplyScalar(-r);let s=M.copy(I).add(D),u=A.copy(this._targetEnd).add(s);return this.moveTo(u.x,u.y,u.z,i)}forward(t,r=!1){M.setFromMatrixColumn(this._camera.matrix,0),M.crossVectors(this._camera.up,M),M.multiplyScalar(t);let i=A.copy(this._targetEnd).add(M);return this.moveTo(i.x,i.y,i.z,r)}elevate(t,r=!1){return M.copy(this._camera.up).multiplyScalar(t),this.moveTo(this._targetEnd.x+M.x,this._targetEnd.y+M.y,this._targetEnd.z+M.z,r)}moveTo(t,r,i,s=!1){this._isUserControllingTruck=!1;let u=M.set(t,r,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,u,this.boundaryFriction),this._needsUpdate=!0,!s&&this._target.copy(this._targetEnd);let c=!s||v3(this._target.x,this._targetEnd.x,this.restThreshold)&&v3(this._target.y,this._targetEnd.y,this.restThreshold)&&v3(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(c)}lookInDirectionOf(t,r,i,s=!1){let u=M.set(t,r,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(u.x,u.y,u.z,s)}fitToBox(t,r,{cover:i=!1,paddingLeft:s=0,paddingRight:u=0,paddingBottom:c=0,paddingTop:h=0}={}){let p=[],f=t.isBox3?B.copy(t):B.setFromObject(t);f.isEmpty()&&Promise.resolve();let v=v5(this._sphericalEnd.theta,vQ),y=v5(this._sphericalEnd.phi,vQ);p.push(this.rotateTo(v,y,r));let x=M.setFromSpherical(this._sphericalEnd).normalize(),_=z.setFromUnitVectors(x,w),S=v3(Math.abs(x.y),1);S&&_.multiply(U.setFromAxisAngle(b,v)),_.multiply(this._yAxisUpSpaceInverse);let C=N.makeEmpty();A.copy(f.min).applyQuaternion(_),C.expandByPoint(A),A.copy(f.min).setX(f.max.x).applyQuaternion(_),C.expandByPoint(A),A.copy(f.min).setY(f.max.y).applyQuaternion(_),C.expandByPoint(A),A.copy(f.max).setZ(f.min.z).applyQuaternion(_),C.expandByPoint(A),A.copy(f.min).setZ(f.max.z).applyQuaternion(_),C.expandByPoint(A),A.copy(f.max).setY(f.min.y).applyQuaternion(_),C.expandByPoint(A),A.copy(f.max).setX(f.min.x).applyQuaternion(_),C.expandByPoint(A),A.copy(f.max).applyQuaternion(_),C.expandByPoint(A),C.min.x-=s,C.min.y-=c,C.max.x+=u,C.max.y+=h,_.setFromUnitVectors(w,x),S&&_.premultiply(U.invert()),_.premultiply(this._yAxisUpSpace);let T=C.getSize(M),I=C.getCenter(A).applyQuaternion(_);if(vZ(this._camera)){let t=this.getDistanceToFitBox(T.x,T.y,T.z,i);p.push(this.moveTo(I.x,I.y,I.z,r)),p.push(this.dollyTo(t,r)),p.push(this.setFocalOffset(0,0,0,r))}else if(vK(this._camera)){let t=this._camera,s=t.right-t.left,u=t.top-t.bottom,c=i?Math.max(s/T.x,u/T.y):Math.min(s/T.x,u/T.y);p.push(this.moveTo(I.x,I.y,I.z,r)),p.push(this.zoomTo(c,r)),p.push(this.setFocalOffset(0,0,0,r))}return Promise.all(p)}fitToSphere(t,r){let i=[],s="isObject3D"in t?yi.createBoundingSphere(t,F):F.copy(t);if(i.push(this.moveTo(s.center.x,s.center.y,s.center.z,r)),vZ(this._camera)){let t=this.getDistanceToFitSphere(s.radius);i.push(this.dollyTo(t,r))}else if(vK(this._camera)){let t=this._camera.right-this._camera.left,u=this._camera.top-this._camera.bottom,c=2*s.radius,h=Math.min(t/c,u/c);i.push(this.zoomTo(h,r))}return i.push(this.setFocalOffset(0,0,0,r)),Promise.all(i)}setLookAt(t,r,i,s,u,c,h=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=vJ.NONE,this._changedDolly=0;let p=A.set(s,u,c),f=M.set(t,r,i);this._targetEnd.copy(p),this._sphericalEnd.setFromVector3(f.sub(p).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,!h&&(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));let v=!h||v3(this._target.x,this._targetEnd.x,this.restThreshold)&&v3(this._target.y,this._targetEnd.y,this.restThreshold)&&v3(this._target.z,this._targetEnd.z,this.restThreshold)&&v3(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&v3(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&v3(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(v)}lerpLookAt(t,r,i,s,u,c,h,p,f,v,y,x,_,b=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=vJ.NONE,this._changedDolly=0;let w=M.set(s,u,c),S=A.set(t,r,i);k.setFromVector3(S.sub(w).applyQuaternion(this._yAxisUpSpace));let T=C.set(v,y,x),I=A.set(h,p,f);O.setFromVector3(I.sub(T).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(w.lerp(T,_));let D=O.theta-k.theta,P=O.phi-k.phi,R=O.radius-k.radius;this._sphericalEnd.set(k.radius+R*_,k.phi+P*_,k.theta+D*_),this.normalizeRotations(),this._needsUpdate=!0,!b&&(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));let L=!b||v3(this._target.x,this._targetEnd.x,this.restThreshold)&&v3(this._target.y,this._targetEnd.y,this.restThreshold)&&v3(this._target.z,this._targetEnd.z,this.restThreshold)&&v3(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&v3(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&v3(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(L)}setPosition(t,r,i,s=!1){return this.setLookAt(t,r,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,s)}setTarget(t,r,i,s=!1){let u=this.getPosition(M),c=this.setLookAt(u.x,u.y,u.z,t,r,i,s);return this._sphericalEnd.phi=v1(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),c}setFocalOffset(t,r,i,s=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(t,r,i),this._needsUpdate=!0,!s&&this._focalOffset.copy(this._focalOffsetEnd);let u=!s||v3(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&v3(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&v3(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(u)}setOrbitPoint(t,r,i){this._camera.updateMatrixWorld(),I.setFromMatrixColumn(this._camera.matrixWorldInverse,0),D.setFromMatrixColumn(this._camera.matrixWorldInverse,1),P.setFromMatrixColumn(this._camera.matrixWorldInverse,2);let s=M.set(t,r,i),u=s.distanceTo(this._camera.position),c=s.sub(this._camera.position);I.multiplyScalar(c.x),D.multiplyScalar(c.y),P.multiplyScalar(c.z),M.copy(I).add(D).add(P),M.z=M.z+u,this.dollyTo(u,!1),this.setFocalOffset(-M.x,M.y,-M.z,!1),this.moveTo(t,r,i,!1)}setBoundary(t){if(!t){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(t,r,i,s){if(null===t){this._viewport=null;return}this._viewport=this._viewport||new x.Vector4,"number"==typeof t?this._viewport.set(t,r,i,s):this._viewport.copy(t)}getDistanceToFitBox(t,r,i,s=!1){if(ye(this._camera,"getDistanceToFitBox"))return this._spherical.radius;let u=t/r,c=this._camera.getEffectiveFOV()*v0,h=this._camera.aspect;return .5*((s?u>h:u<h)?r:t/h)/Math.tan(.5*c)+.5*i}getDistanceToFitSphere(t){if(ye(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;let r=this._camera.getEffectiveFOV()*v0,i=2*Math.atan(Math.tan(.5*r)*this._camera.aspect);return t/Math.sin(.5*(1<this._camera.aspect?r:i))}getTarget(t,r=!0){return(t&&t.isVector3?t:new x.Vector3).copy(r?this._targetEnd:this._target)}getPosition(t,r=!0){return(t&&t.isVector3?t:new x.Vector3).setFromSpherical(r?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(r?this._targetEnd:this._target)}getSpherical(t,r=!0){return(t||new x.Spherical).copy(r?this._sphericalEnd:this._spherical)}getFocalOffset(t,r=!0){return(t&&t.isVector3?t:new x.Vector3).copy(r?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%vq,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=vq),this._spherical.theta+=vq*Math.round((this._sphericalEnd.theta-this._spherical.theta)/vq)}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(t=!1){if(!v3(this._camera.up.x,this._cameraUp0.x)||!v3(this._camera.up.y,this._cameraUp0.y)||!v3(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);let t=this.getPosition(M);this.updateCameraUp(),this.setPosition(t.x,t.y,t.z)}return Promise.all([this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)])}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,b),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){let t=M.subVectors(this._target,this._camera.position).normalize(),r=A.crossVectors(t,this._camera.up);this._camera.up.crossVectors(r,t).normalize(),this._camera.updateMatrixWorld();let i=this.getPosition(M);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(t){let r=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,s=this._sphericalEnd.radius-this._spherical.radius,u=R.subVectors(this._targetEnd,this._target),c=L.subVectors(this._focalOffsetEnd,this._focalOffset),h=this._zoomEnd-this._zoom;if(v2(r))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{let r=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=v9(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,r,1/0,t),this._needsUpdate=!0}if(v2(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{let r=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=v9(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,r,1/0,t),this._needsUpdate=!0}if(v2(s))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{let r=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=v9(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,r,this.maxSpeed,t),this._needsUpdate=!0}if(v2(u.x)&&v2(u.y)&&v2(u.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{let r=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;v8(this._target,this._targetEnd,this._targetVelocity,r,this.maxSpeed,t,this._target),this._needsUpdate=!0}if(v2(c.x)&&v2(c.y)&&v2(c.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{let r=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;v8(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,r,this.maxSpeed,t,this._focalOffset),this._needsUpdate=!0}if(v2(h))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{let r=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=v9(this._zoom,this._zoomEnd,this._zoomVelocity,r,1/0,t)}if(this.dollyToCursor){if(vZ(this._camera)&&0!==this._changedDolly){let t=this._spherical.radius-this._lastDistance,r=this._camera,i=this._getCameraDirection(T),s=M.copy(i).cross(r.up).normalize();0===s.lengthSq()&&(s.x=1);let u=A.crossVectors(s,i),c=this._sphericalEnd.radius*Math.tan(r.getEffectiveFOV()*v0*.5),h=(this._sphericalEnd.radius-t-this._sphericalEnd.radius)/this._sphericalEnd.radius,p=C.copy(this._targetEnd).add(s.multiplyScalar(this._dollyControlCoord.x*c*r.aspect)).add(u.multiplyScalar(this._dollyControlCoord.y*c)),f=M.copy(this._targetEnd).lerp(p,h),v=this._lastDollyDirection===vJ.IN&&this._spherical.radius<=this.minDistance,y=this._lastDollyDirection===vJ.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(v||y)){this._sphericalEnd.radius-=t,this._spherical.radius-=t;let r=A.copy(i).multiplyScalar(-t);f.add(r)}this._boundary.clampPoint(f,f);let x=A.subVectors(f,this._targetEnd);this._targetEnd.copy(f),this._target.add(x),this._changedDolly-=t,v2(this._changedDolly)&&(this._changedDolly=0)}else if(vK(this._camera)&&0!==this._changedZoom){let t=this._zoom-this._lastZoom,r=this._camera,i=M.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(r.near+r.far)/(r.near-r.far)).unproject(r),s=A.set(0,0,-1).applyQuaternion(r.quaternion),u=C.copy(i).add(s.multiplyScalar(-i.dot(r.up))),c=-(this._zoom-t-this._zoom)/this._zoom,h=this._getCameraDirection(T),p=this._targetEnd.dot(h),f=M.copy(this._targetEnd).lerp(u,c),v=f.dot(h),y=h.multiplyScalar(v-p);f.sub(y),this._boundary.clampPoint(f,f);let x=A.subVectors(f,this._targetEnd);this._targetEnd.copy(f),this._target.add(x),this._changedZoom-=t,v2(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;let p=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,p),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!v2(this._focalOffset.x)||!v2(this._focalOffset.y)||!v2(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),I.setFromMatrixColumn(this._camera.matrix,0),D.setFromMatrixColumn(this._camera.matrix,1),P.setFromMatrixColumn(this._camera.matrix,2),I.multiplyScalar(this._focalOffset.x),D.multiplyScalar(-this._focalOffset.y),P.multiplyScalar(this._focalOffset.z),M.copy(I).add(D).add(P),this._camera.position.add(M)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),M.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);let f=this._needsUpdate;return f&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):f?(this.dispatchEvent({type:"update"}),v2(r,this.restThreshold)&&v2(i,this.restThreshold)&&v2(s,this.restThreshold)&&v2(u.x,this.restThreshold)&&v2(u.y,this.restThreshold)&&v2(u.z,this.restThreshold)&&v2(c.x,this.restThreshold)&&v2(c.y,this.restThreshold)&&v2(c.z,this.restThreshold)&&v2(h,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!f&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=f,this._needsUpdate=!1,f}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:v4(this.maxDistance),minZoom:this.minZoom,maxZoom:v4(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:v4(this.maxPolarAngle),minAzimuthAngle:v4(this.minAzimuthAngle),maxAzimuthAngle:v4(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:M.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(t,r=!1){let i=JSON.parse(t);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=v6(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=v6(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=v6(i.maxPolarAngle),this.minAzimuthAngle=v6(i.minAzimuthAngle),this.maxAzimuthAngle=v6(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this.verticalDragToForward=i.verticalDragToForward,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],r),k.setFromVector3(M.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(k.theta,k.phi,r),this.dollyTo(k.radius,r),this.zoomTo(i.zoom,r),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],r),this._needsUpdate=!0}connect(t){if(!this._domElement)t.setAttribute("data-camera-controls-version","2.9.0"),this._addAllEventListeners(t),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(t){return t.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(t){return this._getTargetDirection(t).negate()}_findPointerById(t){return this._activePointers.find(r=>r.pointerId===t)}_findPointerByMouseButton(t){return this._activePointers.find(r=>r.mouseButton===t)}_disposePointer(t){this._activePointers.splice(this._activePointers.indexOf(t),1)}_encloseToBoundary(t,r,i){let s=r.lengthSq();if(0===s)return t;let u=A.copy(r).add(t),c=this._boundary.clampPoint(u,C).sub(u),h=c.lengthSq();if(0===h)return t.add(r);if(h===s)return t;if(0===i)return t.add(r).add(c);else{let s=1+i*h/r.dot(c);return t.add(A.copy(r).multiplyScalar(s)).add(c.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(vZ(this._camera)){let t=this._camera,r=t.near,i=Math.tan(.5*(t.getEffectiveFOV()*v0))*r,s=i*t.aspect;this._nearPlaneCorners[0].set(-s,-i,0),this._nearPlaneCorners[1].set(s,-i,0),this._nearPlaneCorners[2].set(s,i,0),this._nearPlaneCorners[3].set(-s,i,0)}else if(vK(this._camera)){let t=this._camera,r=1/t.zoom,i=t.left*r,s=t.right*r,u=t.top*r,c=t.bottom*r;this._nearPlaneCorners[0].set(i,u,0),this._nearPlaneCorners[1].set(s,u,0),this._nearPlaneCorners[2].set(s,c,0),this._nearPlaneCorners[3].set(i,c,0)}}_collisionTest(){let t=1/0;if(!(this.colliderMeshes.length>=1)||ye(this._camera,"_collisionTest"))return t;let r=this._getTargetDirection(T);H.lookAt(_,r,this._camera.up);for(let i=0;i<4;i++){let s=A.copy(this._nearPlaneCorners[i]);s.applyMatrix4(H);let u=C.addVectors(this._target,s);G.set(u,r),G.far=this._spherical.radius+1;let c=G.intersectObjects(this.colliderMeshes);0!==c.length&&c[0].distance<t&&(t=c[0].distance)}return t}_getClientRect(t){if(!this._domElement)return;let r=this._domElement.getBoundingClientRect();return t.x=r.left,t.y=r.top,this._viewport?(t.x+=this._viewport.x,t.y+=r.height-this._viewport.w-this._viewport.y,t.width=this._viewport.z,t.height=this._viewport.w):(t.width=r.width,t.height=r.height),t}_createOnRestPromise(t){return t?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{let r=()=>{this.removeEventListener("rest",r),t()};this.addEventListener("rest",r)}))}_addAllEventListeners(t){}_removeAllEventListeners(){}get dampingFactor(){return 0}set dampingFactor(t){}get draggingDampingFactor(){return 0}set draggingDampingFactor(t){}static createBoundingSphere(t,r=new x.Sphere){let i=r.center;B.makeEmpty(),t.traverseVisible(t=>{t.isMesh&&B.expandByObject(t)}),B.getCenter(i);let s=0;return t.traverseVisible(t=>{if(!t.isMesh)return;let r=t.geometry.clone();r.applyMatrix4(t.matrixWorld);let u=r.attributes.position;for(let t=0,r=u.count;t<r;t++)M.fromBufferAttribute(u,t),s=Math.max(s,i.distanceToSquared(M))}),r.radius=Math.sqrt(s),r}}let ya=(0,pI.forwardRef)((t,r)=>{(0,pI.useMemo)(()=>{let t={Box3:it,MathUtils:{clamp:rI.clamp},Matrix4:iD,Quaternion:r9,Raycaster:dK,Sphere:ib,Spherical:d0,Vector2:rD,Vector3:r8,Vector4:r0};yi.install({THREE:t}),pj({CameraControlsImpl:yi})},[]);let{camera:i,domElement:s,makeDefault:u,onStart:c,onEnd:h,onChange:p,regress:f,...v}=t,y=fw(t=>t.camera),x=fw(t=>t.gl),_=fw(t=>t.invalidate),b=fw(t=>t.events),w=fw(t=>t.setEvents),S=fw(t=>t.set),M=fw(t=>t.get),A=fw(t=>t.performance),C=i||y,T=s||b.connected||x.domElement,I=(0,pI.useMemo)(()=>new yi(C),[C]);return fS((t,r)=>{I.enabled&&I.update(r)},-1),(0,pI.useEffect)(()=>(I.connect(T),()=>void I.disconnect()),[T,I]),(0,pI.useEffect)(()=>{let t=t=>{_(),f&&A.regress(),p&&p(t)},r=t=>{c&&c(t)},i=t=>{h&&h(t)};return I.addEventListener("update",t),I.addEventListener("controlstart",r),I.addEventListener("controlend",i),I.addEventListener("control",t),I.addEventListener("transitionstart",t),I.addEventListener("wake",t),()=>{I.removeEventListener("update",t),I.removeEventListener("controlstart",r),I.removeEventListener("controlend",i),I.removeEventListener("control",t),I.removeEventListener("transitionstart",t),I.removeEventListener("wake",t)}},[I,c,h,_,w,f,p]),(0,pI.useEffect)(()=>{if(u){let t=M().controls;return S({controls:I}),()=>S({controls:t})}},[u,I]),pI.createElement("primitive",gY({ref:r,object:I},v))}),yo=t=>{if(t.startsWith("http://")||t.startsWith("https://"))return t;let r=t.startsWith("/")?t:`/${t}`;return`${"/".replace(/\/+$/,"")}${r}`},ys=()=>(0,eu.jsxs)(eu.Fragment,{children:[(0,eu.jsx)("color",{...gX.props.background}),(0,eu.jsx)("fog",{...gX.props.fog}),(0,eu.jsx)(vG,{path:yo("/assets/hdri/"),files:"venice_sunset_1k.hdr"}),(0,eu.jsx)(vX,{...gX.props.grid,position:[0,-.01,0]}),(0,eu.jsx)(ya,{...gX.props.camera})]});i("6913"),i("5662");let yl=new WeakMap;class yu extends hO{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,r,i,s){let u=new hF(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,t=>{let i={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(t,i).then(r).catch(s)},i,s)}decodeDracoFile(t,r,i,s){let u={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(t,u).then(r)}decodeGeometry(t,r){let i;for(let t in r.attributeTypes){let i=r.attributeTypes[t];void 0!==i.BYTES_PER_ELEMENT&&(r.attributeTypes[t]=i.name)}let s=JSON.stringify(r);if(yl.has(t)){let r=yl.get(t);if(r.key===s)return r.promise;if(0===t.byteLength)throw Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let u=this.workerNextTaskID++,c=t.byteLength,h=this._getWorker(u,c).then(s=>(i=s,new Promise((s,c)=>{i._callbacks[u]={resolve:s,reject:c},i.postMessage({type:"decode",id:u,taskConfig:r,buffer:t},[t])}))).then(t=>this._createGeometry(t.geometry));return h.catch(()=>!0).then(()=>{i&&u&&this._releaseTask(i,u)}),yl.set(t,{key:s,promise:h}),h}_createGeometry(t){let r=new aU;t.index&&r.setIndex(new aS(t.index.array,1));for(let i=0;i<t.attributes.length;i++){let s=t.attributes[i],u=s.name,c=s.array,h=s.itemSize;r.setAttribute(u,new aS(c,h))}return r}_loadLibrary(t,r){let i=new hF(this.manager);return i.setPath(this.decoderPath),i.setResponseType(r),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(t,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let t="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,r=[];return t?r.push(this._loadLibrary("draco_decoder.js","text")):(r.push(this._loadLibrary("draco_wasm_wrapper.js","text")),r.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(r).then(r=>{let i=r[0];!t&&(this.decoderConfig.wasmBinary=r[1]);let s=yc.toString(),u=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([u]))}),this.decoderPending}_getWorker(t,r){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let t=new Worker(this.workerSourceURL);t._callbacks={},t._taskCosts={},t._taskLoad=0,t.postMessage({type:"init",decoderConfig:this.decoderConfig}),t.onmessage=function(r){let i=r.data;switch(i.type){case"decode":t._callbacks[i.id].resolve(i);break;case"error":t._callbacks[i.id].reject(i)}},this.workerPool.push(t)}else this.workerPool.sort(function(t,r){return t._taskLoad>r._taskLoad?-1:1});let i=this.workerPool[this.workerPool.length-1];return i._taskCosts[t]=r,i._taskLoad+=r,i})}_releaseTask(t,r){t._taskLoad-=t._taskCosts[r],delete t._callbacks[r],delete t._taskCosts[r]}debug(){}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function yc(){let t,r;onmessage=function(i){let s=i.data;switch(s.type){case"init":t=s.decoderConfig,r=new Promise(function(r){t.onModuleLoaded=function(t){r({draco:t})},DracoDecoderModule(t)});break;case"decode":let u=s.buffer,c=s.taskConfig;r.then(t=>{let r=t.draco,i=new r.Decoder,h=new r.DecoderBuffer;h.Init(new Int8Array(u),u.byteLength);try{let t=function(t,r,i,s){let u,c;let h=s.attributeIDs,p=s.attributeTypes,f=r.GetEncodedGeometryType(i);if(f===t.TRIANGULAR_MESH)u=new t.Mesh,c=r.DecodeBufferToMesh(i,u);else if(f===t.POINT_CLOUD)u=new t.PointCloud,c=r.DecodeBufferToPointCloud(i,u);else throw Error("THREE.DRACOLoader: Unexpected geometry type.");if(!c.ok()||0===u.ptr)throw Error("THREE.DRACOLoader: Decoding failed: "+c.error_msg());let v={index:null,attributes:[]};for(let i in h){let c,f;let y=self[p[i]];if(s.useUniqueIDs)f=h[i],c=r.GetAttributeByUniqueId(u,f);else{if(-1===(f=r.GetAttributeId(u,t[h[i]])))continue;c=r.GetAttribute(u,f)}v.attributes.push(function(t,r,i,s,u,c){let h=c.num_components(),p=i.num_points()*h,f=p*u.BYTES_PER_ELEMENT,v=function(t,r){switch(r){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32}}(t,u),y=t._malloc(f);r.GetAttributeDataArrayForAllPoints(i,c,v,f,y);let x=new u(t.HEAPF32.buffer,y,p).slice();return t._free(y),{name:s,array:x,itemSize:h}}(t,r,u,i,y,c))}return f===t.TRIANGULAR_MESH&&(v.index=function(t,r,i){let s=3*i.num_faces(),u=4*s,c=t._malloc(u);r.GetTrianglesUInt32Array(i,u,c);let h=new Uint32Array(t.HEAPF32.buffer,c,s).slice();return t._free(c),{array:h,itemSize:1}}(t,r,u)),t.destroy(u),v}(r,i,h,c),u=t.attributes.map(t=>t.array.buffer);t.index&&u.push(t.index.array.buffer),self.postMessage({type:"decode",id:s.id,geometry:t},u)}catch(t){self.postMessage({type:"error",id:s.id,error:t.message})}finally{r.destroy(h),r.destroy(i)}})}}}let yh=()=>{let t;if(V)return V;let r=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!=typeof WebAssembly)return{supported:!1};let s="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(r)&&(s="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");let u=WebAssembly.instantiate(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;++i){let s=t.charCodeAt(i);r[i]=s>96?s-71:s>64?s-65:s>47?s+4:s>46?63:62}let s=0;for(let u=0;u<t.length;++u)r[s++]=r[u]<60?i[r[u]]:(r[u]-60)*64+r[++u];return r.buffer.slice(0,s)}(s),{}).then(r=>{(t=r.instance).exports.__wasm_call_ctors()});function c(r,i,s,u,c,h){let p=t.exports.sbrk,f=s+3&-4,v=p(f*u),y=p(c.length),x=new Uint8Array(t.exports.memory.buffer);x.set(c,y);let _=r(v,s,u,y,c.length);if(0===_&&h&&h(v,f,u),i.set(x.subarray(v,v+s*u)),p(v-p(0)),0!==_)throw Error(`Malformed buffer data: ${_}`)}let h={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},p={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return V={ready:u,supported:!0,decodeVertexBuffer(r,i,s,u,p){c(t.exports.meshopt_decodeVertexBuffer,r,i,s,u,t.exports[h[p]])},decodeIndexBuffer(r,i,s,u){c(t.exports.meshopt_decodeIndexBuffer,r,i,s,u)},decodeIndexSequence(r,i,s,u){c(t.exports.meshopt_decodeIndexSequence,r,i,s,u)},decodeGltfBuffer(r,i,s,u,f,v){c(t.exports[p[f]],r,i,s,u,t.exports[h[v]])}}};function yd(t,r){if(r===nP)return t;if(r!==nL&&r!==nR)return t;{let i=t.getIndex();if(null===i){let r=[],s=t.getAttribute("position");if(void 0===s)return t;for(let t=0;t<s.count;t++)r.push(t);t.setIndex(r),i=t.getIndex()}let s=i.count-2,u=[];if(i){if(r===nL)for(let t=1;t<=s;t++)u.push(i.getX(0)),u.push(i.getX(t)),u.push(i.getX(t+1));else for(let t=0;t<s;t++)t%2==0?(u.push(i.getX(t)),u.push(i.getX(t+1)),u.push(i.getX(t+2))):(u.push(i.getX(t+2)),u.push(i.getX(t+1)),u.push(i.getX(t)))}u.length;let c=t.clone();return c.setIndex(u),c.clearGroups(),c}}let yp=parseInt(eh.replace(/\D+/g,""));function yf(t){if("undefined"!=typeof TextDecoder)return new TextDecoder().decode(t);let r="";for(let i=0,s=t.length;i<s;i++)r+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(r))}catch(t){return r}}let yg="srgb",ym="srgb-linear";class yv extends hO{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new yS(t)}),this.register(function(t){return new yM(t)}),this.register(function(t){return new yL(t)}),this.register(function(t){return new yk(t)}),this.register(function(t){return new yO(t)}),this.register(function(t){return new yC(t)}),this.register(function(t){return new yT(t)}),this.register(function(t){return new yE(t)}),this.register(function(t){return new yI(t)}),this.register(function(t){return new yw(t)}),this.register(function(t){return new yD(t)}),this.register(function(t){return new yA(t)}),this.register(function(t){return new yR(t)}),this.register(function(t){return new yP(t)}),this.register(function(t){return new y_(t)}),this.register(function(t){return new yB(t)}),this.register(function(t){return new yN(t)})}load(t,r,i,s){let u;let c=this;if(""!==this.resourcePath)u=this.resourcePath;else if(""!==this.path){let r=dt.extractUrlBase(t);u=dt.resolveURL(r,this.path)}else u=dt.extractUrlBase(t);this.manager.itemStart(t);let h=function(r){s&&s(r),c.manager.itemError(t),c.manager.itemEnd(t)},p=new hF(this.manager);p.setPath(this.path),p.setResponseType("arraybuffer"),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(t,function(i){try{c.parse(i,u,function(i){r(i),c.manager.itemEnd(t)},h)}catch(t){h(t)}},i,h)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return -1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return -1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,r,i,s){let u;let c={},h={};if("string"==typeof t)u=JSON.parse(t);else if(t instanceof ArrayBuffer){if(yf(new Uint8Array(t.slice(0,4)))===yF){try{c[yx.KHR_BINARY_GLTF]=new yU(t)}catch(t){s&&s(t);return}u=JSON.parse(c[yx.KHR_BINARY_GLTF].content)}else u=JSON.parse(yf(new Uint8Array(t)))}else u=t;if(void 0===u.asset||u.asset.version[0]<2){s&&s(Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let p=new y9(u,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});p.fileLoader.setRequestHeader(this.requestHeader);for(let t=0;t<this.pluginCallbacks.length;t++){let r=this.pluginCallbacks[t](p);r.name,h[r.name]=r,c[r.name]=!0}if(u.extensionsUsed)for(let t=0;t<u.extensionsUsed.length;++t){let r=u.extensionsUsed[t],i=u.extensionsRequired||[];switch(r){case yx.KHR_MATERIALS_UNLIT:c[r]=new yb;break;case yx.KHR_DRACO_MESH_COMPRESSION:c[r]=new yH(u,this.dracoLoader);break;case yx.KHR_TEXTURE_TRANSFORM:c[r]=new yG;break;case yx.KHR_MESH_QUANTIZATION:c[r]=new yV;break;default:i.indexOf(r)>=0&&h[r]}}p.setExtensions(c),p.setPlugins(h),p.parse(i,s)}parseAsync(t,r){let i=this;return new Promise(function(s,u){i.parse(t,r,s,u)})}}function yy(){let t={};return{get:function(r){return t[r]},add:function(r,i){t[r]=i},remove:function(r){delete t[r]},removeAll:function(){t={}}}}let yx={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class y_{constructor(t){this.parser=t,this.name=yx.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let t=this.parser,r=this.parser.json.nodes||[];for(let i=0,s=r.length;i<s;i++){let s=r[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&t._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(t){let r;let i=this.parser,s="light:"+t,u=i.cache.get(s);if(u)return u;let c=i.json,h=((c.extensions&&c.extensions[this.name]||{}).lights||[])[t],p=new ad(0xffffff);void 0!==h.color&&p.setRGB(h.color[0],h.color[1],h.color[2],ym);let f=void 0!==h.range?h.range:0;switch(h.type){case"directional":(r=new h4(p)).target.position.set(0,0,-1),r.add(r.target);break;case"point":(r=new h3(p)).distance=f;break;case"spot":(r=new hq(p)).distance=f,h.spot=h.spot||{},h.spot.innerConeAngle=void 0!==h.spot.innerConeAngle?h.spot.innerConeAngle:0,h.spot.outerConeAngle=void 0!==h.spot.outerConeAngle?h.spot.outerConeAngle:Math.PI/4,r.angle=h.spot.outerConeAngle,r.penumbra=1-h.spot.innerConeAngle/h.spot.outerConeAngle,r.target.position.set(0,0,-1),r.add(r.target);break;default:throw Error("THREE.GLTFLoader: Unexpected light type: "+h.type)}return r.position.set(0,0,0),r.decay=2,y3(r,h),void 0!==h.intensity&&(r.intensity=h.intensity),r.name=i.createUniqueName(h.name||"light_"+t),u=Promise.resolve(r),i.cache.add(s,u),u}getDependency(t,r){if("light"===t)return this._loadLight(r)}createNodeAttachment(t){let r=this,i=this.parser,s=i.json.nodes[t],u=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===u?null:this._loadLight(u).then(function(t){return i._getNodeRef(r.cache,u,t)})}}class yb{constructor(){this.name=yx.KHR_MATERIALS_UNLIT}getMaterialType(){return am}extendParams(t,r,i){let s=[];t.color=new ad(1,1,1),t.opacity=1;let u=r.pbrMetallicRoughness;if(u){if(Array.isArray(u.baseColorFactor)){let r=u.baseColorFactor;t.color.setRGB(r[0],r[1],r[2],ym),t.opacity=r[3]}void 0!==u.baseColorTexture&&s.push(i.assignTexture(t,"map",u.baseColorTexture,yg))}return Promise.all(s)}}class yw{constructor(t){this.parser=t,this.name=yx.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,r){let i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=i.extensions[this.name].emissiveStrength;return void 0!==s&&(r.emissiveIntensity=s),Promise.resolve()}}class yS{constructor(t){this.parser=t,this.name=yx.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){let r=this.parser.json.materials[t];return r.extensions&&r.extensions[this.name]?ho:null}extendMaterialParams(t,r){let i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let u=[],c=s.extensions[this.name];if(void 0!==c.clearcoatFactor&&(r.clearcoat=c.clearcoatFactor),void 0!==c.clearcoatTexture&&u.push(i.assignTexture(r,"clearcoatMap",c.clearcoatTexture)),void 0!==c.clearcoatRoughnessFactor&&(r.clearcoatRoughness=c.clearcoatRoughnessFactor),void 0!==c.clearcoatRoughnessTexture&&u.push(i.assignTexture(r,"clearcoatRoughnessMap",c.clearcoatRoughnessTexture)),void 0!==c.clearcoatNormalTexture&&(u.push(i.assignTexture(r,"clearcoatNormalMap",c.clearcoatNormalTexture)),void 0!==c.clearcoatNormalTexture.scale)){let t=c.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new rD(t,t)}return Promise.all(u)}}class yM{constructor(t){this.parser=t,this.name=yx.KHR_MATERIALS_DISPERSION}getMaterialType(t){let r=this.parser.json.materials[t];return r.extensions&&r.extensions[this.name]?ho:null}extendMaterialParams(t,r){let i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=i.extensions[this.name];return r.dispersion=void 0!==s.dispersion?s.dispersion:0,Promise.resolve()}}class yA{constructor(t){this.parser=t,this.name=yx.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){let r=this.parser.json.materials[t];return r.extensions&&r.extensions[this.name]?ho:null}extendMaterialParams(t,r){let i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let u=[],c=s.extensions[this.name];return void 0!==c.iridescenceFactor&&(r.iridescence=c.iridescenceFactor),void 0!==c.iridescenceTexture&&u.push(i.assignTexture(r,"iridescenceMap",c.iridescenceTexture)),void 0!==c.iridescenceIor&&(r.iridescenceIOR=c.iridescenceIor),void 0===r.iridescenceThicknessRange&&(r.iridescenceThicknessRange=[100,400]),void 0!==c.iridescenceThicknessMinimum&&(r.iridescenceThicknessRange[0]=c.iridescenceThicknessMinimum),void 0!==c.iridescenceThicknessMaximum&&(r.iridescenceThicknessRange[1]=c.iridescenceThicknessMaximum),void 0!==c.iridescenceThicknessTexture&&u.push(i.assignTexture(r,"iridescenceThicknessMap",c.iridescenceThicknessTexture)),Promise.all(u)}}class yC{constructor(t){this.parser=t,this.name=yx.KHR_MATERIALS_SHEEN}getMaterialType(t){let r=this.parser.json.materials[t];return r.extensions&&r.extensions[this.name]?ho:null}extendMaterialParams(t,r){let i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let u=[];r.sheenColor=new ad(0,0,0),r.sheenRoughness=0,r.sheen=1;let c=s.extensions[this.name];if(void 0!==c.sheenColorFactor){let t=c.sheenColorFactor;r.sheenColor.setRGB(t[0],t[1],t[2],ym)}return void 0!==c.sheenRoughnessFactor&&(r.sheenRoughness=c.sheenRoughnessFactor),void 0!==c.sheenColorTexture&&u.push(i.assignTexture(r,"sheenColorMap",c.sheenColorTexture,yg)),void 0!==c.sheenRoughnessTexture&&u.push(i.assignTexture(r,"sheenRoughnessMap",c.sheenRoughnessTexture)),Promise.all(u)}}class yT{constructor(t){this.parser=t,this.name=yx.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){let r=this.parser.json.materials[t];return r.extensions&&r.extensions[this.name]?ho:null}extendMaterialParams(t,r){let i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let u=[],c=s.extensions[this.name];return void 0!==c.transmissionFactor&&(r.transmission=c.transmissionFactor),void 0!==c.transmissionTexture&&u.push(i.assignTexture(r,"transmissionMap",c.transmissionTexture)),Promise.all(u)}}class yE{constructor(t){this.parser=t,this.name=yx.KHR_MATERIALS_VOLUME}getMaterialType(t){let r=this.parser.json.materials[t];return r.extensions&&r.extensions[this.name]?ho:null}extendMaterialParams(t,r){let i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let u=[],c=s.extensions[this.name];r.thickness=void 0!==c.thicknessFactor?c.thicknessFactor:0,void 0!==c.thicknessTexture&&u.push(i.assignTexture(r,"thicknessMap",c.thicknessTexture)),r.attenuationDistance=c.attenuationDistance||1/0;let h=c.attenuationColor||[1,1,1];return r.attenuationColor=new ad().setRGB(h[0],h[1],h[2],ym),Promise.all(u)}}class yI{constructor(t){this.parser=t,this.name=yx.KHR_MATERIALS_IOR}getMaterialType(t){let r=this.parser.json.materials[t];return r.extensions&&r.extensions[this.name]?ho:null}extendMaterialParams(t,r){let i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=i.extensions[this.name];return r.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class yD{constructor(t){this.parser=t,this.name=yx.KHR_MATERIALS_SPECULAR}getMaterialType(t){let r=this.parser.json.materials[t];return r.extensions&&r.extensions[this.name]?ho:null}extendMaterialParams(t,r){let i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let u=[],c=s.extensions[this.name];r.specularIntensity=void 0!==c.specularFactor?c.specularFactor:1,void 0!==c.specularTexture&&u.push(i.assignTexture(r,"specularIntensityMap",c.specularTexture));let h=c.specularColorFactor||[1,1,1];return r.specularColor=new ad().setRGB(h[0],h[1],h[2],ym),void 0!==c.specularColorTexture&&u.push(i.assignTexture(r,"specularColorMap",c.specularColorTexture,yg)),Promise.all(u)}}class yP{constructor(t){this.parser=t,this.name=yx.EXT_MATERIALS_BUMP}getMaterialType(t){let r=this.parser.json.materials[t];return r.extensions&&r.extensions[this.name]?ho:null}extendMaterialParams(t,r){let i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let u=[],c=s.extensions[this.name];return r.bumpScale=void 0!==c.bumpFactor?c.bumpFactor:1,void 0!==c.bumpTexture&&u.push(i.assignTexture(r,"bumpMap",c.bumpTexture)),Promise.all(u)}}class yR{constructor(t){this.parser=t,this.name=yx.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){let r=this.parser.json.materials[t];return r.extensions&&r.extensions[this.name]?ho:null}extendMaterialParams(t,r){let i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let u=[],c=s.extensions[this.name];return void 0!==c.anisotropyStrength&&(r.anisotropy=c.anisotropyStrength),void 0!==c.anisotropyRotation&&(r.anisotropyRotation=c.anisotropyRotation),void 0!==c.anisotropyTexture&&u.push(i.assignTexture(r,"anisotropyMap",c.anisotropyTexture)),Promise.all(u)}}class yL{constructor(t){this.parser=t,this.name=yx.KHR_TEXTURE_BASISU}loadTexture(t){let r=this.parser,i=r.json,s=i.textures[t];if(!s.extensions||!s.extensions[this.name])return null;let u=s.extensions[this.name],c=r.options.ktx2Loader;if(!c){if(!(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures")}return r.loadTextureImage(t,u.source,c)}}class yk{constructor(t){this.parser=t,this.name=yx.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){let r=this.name,i=this.parser,s=i.json,u=s.textures[t];if(!u.extensions||!u.extensions[r])return null;let c=u.extensions[r],h=s.images[c.source],p=i.textureLoader;if(h.uri){let t=i.options.manager.getHandler(h.uri);null!==t&&(p=t)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(t,c.source,p);if(s.extensionsRequired&&s.extensionsRequired.indexOf(r)>=0)throw Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return!this.isSupported&&(this.isSupported=new Promise(function(t){let r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){t(1===r.height)}})),this.isSupported}}class yO{constructor(t){this.parser=t,this.name=yx.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){let r=this.name,i=this.parser,s=i.json,u=s.textures[t];if(!u.extensions||!u.extensions[r])return null;let c=u.extensions[r],h=s.images[c.source],p=i.textureLoader;if(h.uri){let t=i.options.manager.getHandler(h.uri);null!==t&&(p=t)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(t,c.source,p);if(s.extensionsRequired&&s.extensionsRequired.indexOf(r)>=0)throw Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return!this.isSupported&&(this.isSupported=new Promise(function(t){let r=new Image;r.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",r.onload=r.onerror=function(){t(1===r.height)}})),this.isSupported}}class yB{constructor(t){this.name=yx.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){let r=this.parser.json,i=r.bufferViews[t];if(!i.extensions||!i.extensions[this.name])return null;{let t=i.extensions[this.name],s=this.parser.getDependency("buffer",t.buffer),u=this.parser.options.meshoptDecoder;if(!u||!u.supported){if(!(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files")}return s.then(function(r){let i=t.byteOffset||0,s=t.byteLength||0,c=t.count,h=t.byteStride,p=new Uint8Array(r,i,s);return u.decodeGltfBufferAsync?u.decodeGltfBufferAsync(c,h,p,t.mode,t.filter).then(function(t){return t.buffer}):u.ready.then(function(){let r=new ArrayBuffer(c*h);return u.decodeGltfBuffer(new Uint8Array(r),c,h,p,t.mode,t.filter),r})})}}}class yN{constructor(t){this.name=yx.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){let r=this.parser.json,i=r.nodes[t];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;for(let t of r.meshes[i.mesh].primitives)if(t.mode!==yY.TRIANGLES&&t.mode!==yY.TRIANGLE_STRIP&&t.mode!==yY.TRIANGLE_FAN&&void 0!==t.mode)return null;let s=i.extensions[this.name].attributes,u=[],c={};for(let t in s)u.push(this.parser.getDependency("accessor",s[t]).then(r=>(c[t]=r,c[t])));return u.length<1?null:(u.push(this.parser.createNodeMesh(t)),Promise.all(u).then(t=>{let r=t.pop(),i=r.isGroup?r.children:[r],s=t[0].count,u=[];for(let t of i){let r=new iD,i=new r8,h=new r9,p=new r8(1,1,1),f=new uy(t.geometry,t.material,s);for(let t=0;t<s;t++)c.TRANSLATION&&i.fromBufferAttribute(c.TRANSLATION,t),c.ROTATION&&h.fromBufferAttribute(c.ROTATION,t),c.SCALE&&p.fromBufferAttribute(c.SCALE,t),f.setMatrixAt(t,r.compose(i,h,p));for(let r in c)if("_COLOR_0"===r){let t=c[r];f.instanceColor=new uc(t.array,t.itemSize,t.normalized)}else"TRANSLATION"!==r&&"ROTATION"!==r&&"SCALE"!==r&&t.geometry.setAttribute(r,c[r]);i3.prototype.copy.call(f,t),this.parser.assignFinalMaterial(f),u.push(f)}return r.isGroup?(r.clear(),r.add(...u),r):u[0]}))}}let yF="glTF",yz={JSON:0x4e4f534a,BIN:5130562};class yU{constructor(t){this.name=yx.KHR_BINARY_GLTF,this.content=null,this.body=null;let r=new DataView(t,0,12);if(this.header={magic:yf(new Uint8Array(t.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==yF)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw Error("THREE.GLTFLoader: Legacy binary file detected.");let i=this.header.length-12,s=new DataView(t,12),u=0;for(;u<i;){let r=s.getUint32(u,!0);u+=4;let i=s.getUint32(u,!0);if(u+=4,i===yz.JSON){let i=new Uint8Array(t,12+u,r);this.content=yf(i)}else if(i===yz.BIN){let i=12+u;this.body=t.slice(i,i+r)}u+=r}if(null===this.content)throw Error("THREE.GLTFLoader: JSON content not found.")}}class yH{constructor(t,r){if(!r)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=yx.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=r,this.dracoLoader.preload()}decodePrimitive(t,r){let i=this.json,s=this.dracoLoader,u=t.extensions[this.name].bufferView,c=t.extensions[this.name].attributes,h={},p={},f={};for(let t in c)h[yq[t]||t.toLowerCase()]=c[t];for(let r in t.attributes){let s=yq[r]||r.toLowerCase();if(void 0!==c[r]){let u=i.accessors[t.attributes[r]],c=y$[u.componentType];f[s]=c.name,p[s]=!0===u.normalized}}return r.getDependency("bufferView",u).then(function(t){return new Promise(function(r,i){s.decodeDracoFile(t,function(t){for(let r in t.attributes){let i=t.attributes[r],s=p[r];void 0!==s&&(i.normalized=s)}r(t)},h,f,ym,i)})})}}class yG{constructor(){this.name=yx.KHR_TEXTURE_TRANSFORM}extendTexture(t,r){return(void 0===r.texCoord||r.texCoord===t.channel)&&void 0===r.offset&&void 0===r.rotation&&void 0===r.scale?t:(t=t.clone(),void 0!==r.texCoord&&(t.channel=r.texCoord),void 0!==r.offset&&t.offset.fromArray(r.offset),void 0!==r.rotation&&(t.rotation=r.rotation),void 0!==r.scale&&t.repeat.fromArray(r.scale),t.needsUpdate=!0,t)}}class yV{constructor(){this.name=yx.KHR_MESH_QUANTIZATION}}class yW extends hx{constructor(t,r,i,s){super(t,r,i,s)}copySampleValue_(t){let r=this.resultBuffer,i=this.sampleValues,s=this.valueSize,u=t*s*3+s;for(let t=0;t!==s;t++)r[t]=i[u+t];return r}interpolate_(t,r,i,s){let u=this.resultBuffer,c=this.sampleValues,h=this.valueSize,p=2*h,f=3*h,v=s-r,y=(i-r)/v,x=y*y,_=x*y,b=t*f,w=b-f,S=-2*_+3*x,M=_-x,A=1-S,C=M-x+y;for(let t=0;t!==h;t++){let r=c[w+t+h],i=c[w+t+p]*v,s=c[b+t+h],f=c[b+t]*v;u[t]=A*r+C*i+S*s+M*f}return u}}let yj=new r9;class yX extends yW{interpolate_(t,r,i,s){let u=super.interpolate_(t,r,i,s);return yj.fromArray(u).normalize().toArray(u),u}}let yY={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},y$={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},yJ={9728:tv,9729:tw,9984:ty,9985:tS,9986:t_,9987:tA},yZ={33071:tg,33648:tm,10497:tf},yK={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},yq={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...yp>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},yQ={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},y0={CUBICSPLINE:void 0,LINEAR:nM,STEP:nS},y1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function y2(t,r,i){for(let s in i.extensions)void 0===t[s]&&(r.userData.gltfExtensions=r.userData.gltfExtensions||{},r.userData.gltfExtensions[s]=i.extensions[s])}function y3(t,r){void 0!==r.extras&&"object"==typeof r.extras&&Object.assign(t.userData,r.extras)}function y5(t){let r="",i=Object.keys(t).sort();for(let s=0,u=i.length;s<u;s++)r+=i[s]+":"+t[i[s]]+";";return r}function y4(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}let y6=new iD;class y9{constructor(t={},r={}){this.json=t,this.extensions={},this.plugins={},this.options=r,this.cache=new yy,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=!1,u=-1;"undefined"!=typeof navigator&&void 0!==navigator.userAgent&&(i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),u=(s=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||i||s&&u<98?this.textureLoader=new hW(this.options.manager):this.textureLoader=new du(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new hF(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,r){let i=this,s=this.json,u=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(t){return t._markDefs&&t._markDefs()}),Promise.all(this._invokeAll(function(t){return t.beforeRoot&&t.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(r){let c={scene:r[0][s.scene||0],scenes:r[0],animations:r[1],cameras:r[2],asset:s.asset,parser:i,userData:{}};return y2(u,c,s),y3(c,s),Promise.all(i._invokeAll(function(t){return t.afterRoot&&t.afterRoot(c)})).then(function(){for(let t of c.scenes)t.updateMatrixWorld();t(c)})}).catch(r)}_markDefs(){let t=this.json.nodes||[],r=this.json.skins||[],i=this.json.meshes||[];for(let i=0,s=r.length;i<s;i++){let s=r[i].joints;for(let r=0,i=s.length;r<i;r++)t[s[r]].isBone=!0}for(let r=0,s=t.length;r<s;r++){let s=t[r];void 0!==s.mesh&&(this._addNodeRef(this.meshCache,s.mesh),void 0!==s.skin&&(i[s.mesh].isSkinnedMesh=!0)),void 0!==s.camera&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(t,r){void 0!==r&&(void 0===t.refs[r]&&(t.refs[r]=t.uses[r]=0),t.refs[r]++)}_getNodeRef(t,r,i){if(t.refs[r]<=1)return i;let s=i.clone(),u=(t,r)=>{let i=this.associations.get(t);for(let[s,c]of(null!=i&&this.associations.set(r,i),t.children.entries()))u(c,r.children[s])};return u(i,s),s.name+="_instance_"+t.uses[r]++,s}_invokeOne(t){let r=Object.values(this.plugins);r.push(this);for(let i=0;i<r.length;i++){let s=t(r[i]);if(s)return s}return null}_invokeAll(t){let r=Object.values(this.plugins);r.unshift(this);let i=[];for(let s=0;s<r.length;s++){let u=t(r[s]);u&&i.push(u)}return i}getDependency(t,r){let i=t+":"+r,s=this.cache.get(i);if(!s){switch(t){case"scene":s=this.loadScene(r);break;case"node":s=this._invokeOne(function(t){return t.loadNode&&t.loadNode(r)});break;case"mesh":s=this._invokeOne(function(t){return t.loadMesh&&t.loadMesh(r)});break;case"accessor":s=this.loadAccessor(r);break;case"bufferView":s=this._invokeOne(function(t){return t.loadBufferView&&t.loadBufferView(r)});break;case"buffer":s=this.loadBuffer(r);break;case"material":s=this._invokeOne(function(t){return t.loadMaterial&&t.loadMaterial(r)});break;case"texture":s=this._invokeOne(function(t){return t.loadTexture&&t.loadTexture(r)});break;case"skin":s=this.loadSkin(r);break;case"animation":s=this._invokeOne(function(t){return t.loadAnimation&&t.loadAnimation(r)});break;case"camera":s=this.loadCamera(r);break;default:if(!(s=this._invokeOne(function(i){return i!=this&&i.getDependency&&i.getDependency(t,r)})))throw Error("Unknown type: "+t)}this.cache.add(i,s)}return s}getDependencies(t){let r=this.cache.get(t);if(!r){let i=this;r=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map(function(r,s){return i.getDependency(t,s)})),this.cache.add(t,r)}return r}loadBuffer(t){let r=this.json.buffers[t],i=this.fileLoader;if(r.type&&"arraybuffer"!==r.type)throw Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(void 0===r.uri&&0===t)return Promise.resolve(this.extensions[yx.KHR_BINARY_GLTF].body);let s=this.options;return new Promise(function(t,u){i.load(dt.resolveURL(r.uri,s.path),t,void 0,function(){u(Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}loadBufferView(t){let r=this.json.bufferViews[t];return this.getDependency("buffer",r.buffer).then(function(t){let i=r.byteLength||0,s=r.byteOffset||0;return t.slice(s,s+i)})}loadAccessor(t){let r=this,i=this.json,s=this.json.accessors[t];if(void 0===s.bufferView&&void 0===s.sparse){let t=yK[s.type],r=y$[s.componentType],i=!0===s.normalized;return Promise.resolve(new aS(new r(s.count*t),t,i))}let u=[];return void 0!==s.bufferView?u.push(this.getDependency("bufferView",s.bufferView)):u.push(null),void 0!==s.sparse&&(u.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),u.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(u).then(function(t){let u,c;let h=t[0],p=yK[s.type],f=y$[s.componentType],v=f.BYTES_PER_ELEMENT,y=v*p,x=s.byteOffset||0,_=void 0!==s.bufferView?i.bufferViews[s.bufferView].byteStride:void 0,b=!0===s.normalized;if(_&&_!==y){let t=Math.floor(x/_),i="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+t+":"+s.count,y=r.cache.get(i);!y&&(y=new lF(u=new f(h,t*_,s.count*_/v),_/v),r.cache.add(i,y)),c=new lU(y,p,x%_/v,b)}else c=new aS(u=null===h?new f(s.count*p):new f(h,x,s.count*p),p,b);if(void 0!==s.sparse){let r=yK.SCALAR,i=y$[s.sparse.indices.componentType],u=s.sparse.indices.byteOffset||0,v=s.sparse.values.byteOffset||0,y=new i(t[1],u,s.sparse.count*r),x=new f(t[2],v,s.sparse.count*p);null!==h&&(c=new aS(c.array.slice(),c.itemSize,c.normalized));for(let t=0,r=y.length;t<r;t++){let r=y[t];if(c.setX(r,x[t*p]),p>=2&&c.setY(r,x[t*p+1]),p>=3&&c.setZ(r,x[t*p+2]),p>=4&&c.setW(r,x[t*p+3]),p>=5)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return c})}loadTexture(t){let r=this.json,i=this.options,s=r.textures[t].source,u=r.images[s],c=this.textureLoader;if(u.uri){let t=i.manager.getHandler(u.uri);null!==t&&(c=t)}return this.loadTextureImage(t,s,c)}loadTextureImage(t,r,i){let s=this,u=this.json,c=u.textures[t],h=u.images[r],p=(h.uri||h.bufferView)+":"+c.sampler;if(this.textureCache[p])return this.textureCache[p];let f=this.loadImageSource(r,i).then(function(r){r.flipY=!1,r.name=c.name||h.name||"",""===r.name&&"string"==typeof h.uri&&!1===h.uri.startsWith("data:image/")&&(r.name=h.uri);let i=(u.samplers||{})[c.sampler]||{};return r.magFilter=yJ[i.magFilter]||tw,r.minFilter=yJ[i.minFilter]||tA,r.wrapS=yZ[i.wrapS]||tf,r.wrapT=yZ[i.wrapT]||tf,s.associations.set(r,{textures:t}),r}).catch(function(){return null});return this.textureCache[p]=f,f}loadImageSource(t,r){let i=this.json,s=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(t=>t.clone());let u=i.images[t],c=self.URL||self.webkitURL,h=u.uri||"",p=!1;if(void 0!==u.bufferView)h=this.getDependency("bufferView",u.bufferView).then(function(t){p=!0;let r=new Blob([t],{type:u.mimeType});return h=c.createObjectURL(r)});else if(void 0===u.uri)throw Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");let f=Promise.resolve(h).then(function(t){return new Promise(function(i,u){let c=i;!0===r.isImageBitmapLoader&&(c=function(t){let r=new rQ(t);r.needsUpdate=!0,i(r)}),r.load(dt.resolveURL(t,s.path),c,void 0,u)})}).then(function(t){var r;return!0===p&&c.revokeObjectURL(h),y3(t,u),t.userData.mimeType=u.mimeType||((r=u.uri).search(/\.jpe?g($|\?)/i)>0||0===r.search(/^data\:image\/jpeg/)?"image/jpeg":r.search(/\.webp($|\?)/i)>0||0===r.search(/^data\:image\/webp/)?"image/webp":"image/png"),t}).catch(function(t){throw t});return this.sourceCache[t]=f,f}assignTexture(t,r,i,s){let u=this;return this.getDependency("texture",i.index).then(function(c){if(!c)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((c=c.clone()).channel=i.texCoord),u.extensions[yx.KHR_TEXTURE_TRANSFORM]){let t=void 0!==i.extensions?i.extensions[yx.KHR_TEXTURE_TRANSFORM]:void 0;if(t){let r=u.associations.get(c);c=u.extensions[yx.KHR_TEXTURE_TRANSFORM].extendTexture(c,t),u.associations.set(c,r)}}return void 0!==s&&("number"==typeof s&&(s=3001===s?yg:ym),"colorSpace"in c?c.colorSpace=s:c.encoding=s===yg?3001:3e3),t[r]=c,c})}assignFinalMaterial(t){let r=t.geometry,i=t.material,s=void 0===r.attributes.tangent,u=void 0!==r.attributes.color,c=void 0===r.attributes.normal;if(t.isPoints){let t="PointsMaterial:"+i.uuid,r=this.cache.get(t);!r&&(r=new uJ,ag.prototype.copy.call(r,i),r.color.copy(i.color),r.map=i.map,r.sizeAttenuation=!1,this.cache.add(t,r)),i=r}else if(t.isLine){let t="LineBasicMaterial:"+i.uuid,r=this.cache.get(t);!r&&(r=new uO,ag.prototype.copy.call(r,i),r.color.copy(i.color),r.map=i.map,this.cache.add(t,r)),i=r}if(s||u||c){let t="ClonedMaterial:"+i.uuid+":";s&&(t+="derivative-tangents:"),u&&(t+="vertex-colors:"),c&&(t+="flat-shading:");let r=this.cache.get(t);!r&&(r=i.clone(),u&&(r.vertexColors=!0),c&&(r.flatShading=!0),s&&(r.normalScale&&(r.normalScale.y*=-1),r.clearcoatNormalScale&&(r.clearcoatNormalScale.y*=-1)),this.cache.add(t,r),this.associations.set(r,this.associations.get(i))),i=r}t.material=i}getMaterialType(){return ha}loadMaterial(t){let r;let i=this,s=this.json,u=this.extensions,c=s.materials[t],h={},p=c.extensions||{},f=[];if(p[yx.KHR_MATERIALS_UNLIT]){let t=u[yx.KHR_MATERIALS_UNLIT];r=t.getMaterialType(),f.push(t.extendParams(h,c,i))}else{let s=c.pbrMetallicRoughness||{};if(h.color=new ad(1,1,1),h.opacity=1,Array.isArray(s.baseColorFactor)){let t=s.baseColorFactor;h.color.setRGB(t[0],t[1],t[2],ym),h.opacity=t[3]}void 0!==s.baseColorTexture&&f.push(i.assignTexture(h,"map",s.baseColorTexture,yg)),h.metalness=void 0!==s.metallicFactor?s.metallicFactor:1,h.roughness=void 0!==s.roughnessFactor?s.roughnessFactor:1,void 0!==s.metallicRoughnessTexture&&(f.push(i.assignTexture(h,"metalnessMap",s.metallicRoughnessTexture)),f.push(i.assignTexture(h,"roughnessMap",s.metallicRoughnessTexture))),r=this._invokeOne(function(r){return r.getMaterialType&&r.getMaterialType(t)}),f.push(Promise.all(this._invokeAll(function(r){return r.extendMaterialParams&&r.extendMaterialParams(t,h)})))}!0===c.doubleSided&&(h.side=eM);let v=c.alphaMode||y1.OPAQUE;if(v===y1.BLEND?(h.transparent=!0,h.depthWrite=!1):(h.transparent=!1,v===y1.MASK&&(h.alphaTest=void 0!==c.alphaCutoff?c.alphaCutoff:.5)),void 0!==c.normalTexture&&r!==am&&(f.push(i.assignTexture(h,"normalMap",c.normalTexture)),h.normalScale=new rD(1,1),void 0!==c.normalTexture.scale)){let t=c.normalTexture.scale;h.normalScale.set(t,t)}if(void 0!==c.occlusionTexture&&r!==am&&(f.push(i.assignTexture(h,"aoMap",c.occlusionTexture)),void 0!==c.occlusionTexture.strength&&(h.aoMapIntensity=c.occlusionTexture.strength)),void 0!==c.emissiveFactor&&r!==am){let t=c.emissiveFactor;h.emissive=new ad().setRGB(t[0],t[1],t[2],ym)}return void 0!==c.emissiveTexture&&r!==am&&f.push(i.assignTexture(h,"emissiveMap",c.emissiveTexture,yg)),Promise.all(f).then(function(){let s=new r(h);return c.name&&(s.name=c.name),y3(s,c),i.associations.set(s,{materials:t}),c.extensions&&y2(u,s,c),s})}createUniqueName(t){let r=dU.sanitizeNodeName(t||"");return r in this.nodeNamesUsed?r+"_"+ ++this.nodeNamesUsed[r]:(this.nodeNamesUsed[r]=0,r)}loadGeometries(t){let r=this,i=this.extensions,s=this.primitiveCache,u=[];for(let c=0,h=t.length;c<h;c++){let h=t[c],p=function(t){let r;let i=t.extensions&&t.extensions[yx.KHR_DRACO_MESH_COMPRESSION];if(r=i?"draco:"+i.bufferView+":"+i.indices+":"+y5(i.attributes):t.indices+":"+y5(t.attributes)+":"+t.mode,void 0!==t.targets)for(let i=0,s=t.targets.length;i<s;i++)r+=":"+y5(t.targets[i]);return r}(h),f=s[p];if(f)u.push(f.promise);else{let t;t=h.extensions&&h.extensions[yx.KHR_DRACO_MESH_COMPRESSION]?function(t){return i[yx.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,r).then(function(i){return y8(i,t,r)})}(h):y8(new aU,h,r),s[p]={primitive:h,promise:t},u.push(t)}}return Promise.all(u)}loadMesh(t){let r=this,i=this.json,s=this.extensions,u=i.meshes[t],c=u.primitives,h=[];for(let t=0,r=c.length;t<r;t++){var p;let r=void 0===c[t].material?(void 0===(p=this.cache).DefaultMaterial&&(p.DefaultMaterial=new ha({color:0xffffff,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ew})),p.DefaultMaterial):this.getDependency("material",c[t].material);h.push(r)}return h.push(r.loadGeometries(c)),Promise.all(h).then(function(i){let h=i.slice(0,i.length-1),p=i[i.length-1],f=[];for(let i=0,v=p.length;i<v;i++){let v;let y=p[i],x=c[i],_=h[i];if(x.mode===yY.TRIANGLES||x.mode===yY.TRIANGLE_STRIP||x.mode===yY.TRIANGLE_FAN||void 0===x.mode)!0===(v=!0===u.isSkinnedMesh?new ui(y,_):new aq(y,_)).isSkinnedMesh&&v.normalizeSkinWeights(),x.mode===yY.TRIANGLE_STRIP?v.geometry=yd(v.geometry,nR):x.mode===yY.TRIANGLE_FAN&&(v.geometry=yd(v.geometry,nL));else if(x.mode===yY.LINES)v=new uY(y,_);else if(x.mode===yY.LINE_STRIP)v=new uV(y,_);else if(x.mode===yY.LINE_LOOP)v=new u$(y,_);else if(x.mode===yY.POINTS)v=new u0(y,_);else throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+x.mode);Object.keys(v.geometry.morphAttributes).length>0&&!function(t,r){if(t.updateMorphTargets(),void 0!==r.weights)for(let i=0,s=r.weights.length;i<s;i++)t.morphTargetInfluences[i]=r.weights[i];if(r.extras&&Array.isArray(r.extras.targetNames)){let i=r.extras.targetNames;if(t.morphTargetInfluences.length===i.length){t.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++)t.morphTargetDictionary[i[r]]=r}}}(v,u),v.name=r.createUniqueName(u.name||"mesh_"+t),y3(v,u),x.extensions&&y2(s,v,x),r.assignFinalMaterial(v),f.push(v)}for(let i=0,s=f.length;i<s;i++)r.associations.set(f[i],{meshes:t,primitives:i});if(1===f.length)return u.extensions&&y2(s,f[0],u),f[0];let v=new lS;u.extensions&&y2(s,v,u),r.associations.set(v,{meshes:t});for(let t=0,r=f.length;t<r;t++)v.add(f[t]);return v})}loadCamera(t){let r;let i=this.json.cameras[t],s=i[i.type];if(!!s)return"perspective"===i.type?r=new oe(rI.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):"orthographic"===i.type&&(r=new oC(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(r.name=this.createUniqueName(i.name)),y3(r,i),Promise.resolve(r)}loadSkin(t){let r=this.json.skins[t],i=[];for(let t=0,s=r.joints.length;t<s;t++)i.push(this._loadNodeShallow(r.joints[t]));return void 0!==r.inverseBindMatrices?i.push(this.getDependency("accessor",r.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(t){let r=t.pop(),i=[],s=[];for(let u=0,c=t.length;u<c;u++){let c=t[u];if(c){i.push(c);let t=new iD;null!==r&&t.fromArray(r.array,16*u),s.push(t)}}return new uu(i,s)})}loadAnimation(t){let r=this.json,i=this,s=r.animations[t],u=s.name?s.name:"animation_"+t,c=[],h=[],p=[],f=[],v=[];for(let t=0,r=s.channels.length;t<r;t++){let r=s.channels[t],i=s.samplers[r.sampler],u=r.target,y=u.node,x=void 0!==s.parameters?s.parameters[i.input]:i.input,_=void 0!==s.parameters?s.parameters[i.output]:i.output;void 0!==u.node&&(c.push(this.getDependency("node",y)),h.push(this.getDependency("accessor",x)),p.push(this.getDependency("accessor",_)),f.push(i),v.push(u))}return Promise.all([Promise.all(c),Promise.all(h),Promise.all(p),Promise.all(f),Promise.all(v)]).then(function(t){let r=t[0],s=t[1],c=t[2],h=t[3],p=t[4],f=[];for(let t=0,u=r.length;t<u;t++){let u=r[t],v=s[t],y=c[t],x=h[t],_=p[t];if(void 0===u)continue;u.updateMatrix&&u.updateMatrix();let b=i._createAnimationTracks(u,v,y,x,_);if(b)for(let t=0;t<b.length;t++)f.push(b[t])}return new hP(u,void 0,f)})}createNodeMesh(t){let r=this.json,i=this,s=r.nodes[t];return void 0===s.mesh?null:i.getDependency("mesh",s.mesh).then(function(t){let r=i._getNodeRef(i.meshCache,s.mesh,t);return void 0!==s.weights&&r.traverse(function(t){if(t.isMesh)for(let r=0,i=s.weights.length;r<i;r++)t.morphTargetInfluences[r]=s.weights[r]}),r})}loadNode(t){let r=this.json,i=r.nodes[t],s=this._loadNodeShallow(t),u=[],c=i.children||[];for(let t=0,r=c.length;t<r;t++)u.push(this.getDependency("node",c[t]));let h=void 0===i.skin?Promise.resolve(null):this.getDependency("skin",i.skin);return Promise.all([s,Promise.all(u),h]).then(function(t){let r=t[0],i=t[1],s=t[2];null!==s&&r.traverse(function(t){t.isSkinnedMesh&&t.bind(s,y6)});for(let t=0,s=i.length;t<s;t++)r.add(i[t]);return r})}_loadNodeShallow(t){let r=this.json,i=this.extensions,s=this;if(void 0!==this.nodeCache[t])return this.nodeCache[t];let u=r.nodes[t],c=u.name?s.createUniqueName(u.name):"",h=[],p=s._invokeOne(function(r){return r.createNodeMesh&&r.createNodeMesh(t)});return p&&h.push(p),void 0!==u.camera&&h.push(s.getDependency("camera",u.camera).then(function(t){return s._getNodeRef(s.cameraCache,u.camera,t)})),s._invokeAll(function(r){return r.createNodeAttachment&&r.createNodeAttachment(t)}).forEach(function(t){h.push(t)}),this.nodeCache[t]=Promise.all(h).then(function(r){let h;if((h=!0===u.isBone?new ua:r.length>1?new lS:1===r.length?r[0]:new i3)!==r[0])for(let t=0,i=r.length;t<i;t++)h.add(r[t]);if(u.name&&(h.userData.name=u.name,h.name=c),y3(h,u),u.extensions&&y2(i,h,u),void 0!==u.matrix){let t=new iD;t.fromArray(u.matrix),h.applyMatrix4(t)}else void 0!==u.translation&&h.position.fromArray(u.translation),void 0!==u.rotation&&h.quaternion.fromArray(u.rotation),void 0!==u.scale&&h.scale.fromArray(u.scale);return!s.associations.has(h)&&s.associations.set(h,{}),s.associations.get(h).nodes=t,h}),this.nodeCache[t]}loadScene(t){let r=this.extensions,i=this.json.scenes[t],s=this,u=new lS;i.name&&(u.name=s.createUniqueName(i.name)),y3(u,i),i.extensions&&y2(r,u,i);let c=i.nodes||[],h=[];for(let t=0,r=c.length;t<r;t++)h.push(s.getDependency("node",c[t]));return Promise.all(h).then(function(t){for(let r=0,i=t.length;r<i;r++)u.add(t[r]);return s.associations=(t=>{let r=new Map;for(let[t,i]of s.associations)(t instanceof ag||t instanceof rQ)&&r.set(t,i);return t.traverse(t=>{let i=s.associations.get(t);null!=i&&r.set(t,i)}),r})(u),u})}_createAnimationTracks(t,r,i,s,u){let c;let h=[],p=t.name?t.name:t.uuid,f=[];switch(yQ[u.path]===yQ.weights?t.traverse(function(t){t.morphTargetInfluences&&f.push(t.name?t.name:t.uuid)}):f.push(p),yQ[u.path]){case yQ.weights:c=hC;break;case yQ.rotation:c=hE;break;case yQ.position:case yQ.scale:c=hD;break;default:if(1===i.itemSize)c=hC;else c=hD}let v=void 0!==s.interpolation?y0[s.interpolation]:nM,y=this._getArrayFromAccessor(i);for(let t=0,i=f.length;t<i;t++){let i=new c(f[t]+"."+yQ[u.path],r.array,y,v);"CUBICSPLINE"===s.interpolation&&this._createCubicSplineTrackInterpolant(i),h.push(i)}return h}_getArrayFromAccessor(t){let r=t.array;if(t.normalized){let t=y4(r.constructor),i=new Float32Array(r.length);for(let s=0,u=r.length;s<u;s++)i[s]=r[s]*t;r=i}return r}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(t){return new(this instanceof hE?yX:yW)(this.times,this.values,this.getValueSize()/3,t)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function y8(t,r,i){let s=r.attributes,u=[];for(let r in s){let c=yq[r]||r.toLowerCase();!(c in t.attributes)&&u.push(function(r,s){return i.getDependency("accessor",r).then(function(r){t.setAttribute(s,r)})}(s[r],c))}if(void 0!==r.indices&&!t.index){let s=i.getDependency("accessor",r.indices).then(function(r){t.setIndex(r)});u.push(s)}return y3(t,r),!function(t,r,i){let s=r.attributes,u=new it;if(void 0===s.POSITION)return;{let t=i.json.accessors[s.POSITION],r=t.min,c=t.max;if(void 0===r||void 0===c)return;if(u.set(new r8(r[0],r[1],r[2]),new r8(c[0],c[1],c[2])),t.normalized){let r=y4(y$[t.componentType]);u.min.multiplyScalar(r),u.max.multiplyScalar(r)}}let c=r.targets;if(void 0!==c){let t=new r8,r=new r8;for(let s=0,u=c.length;s<u;s++){let u=c[s];if(void 0!==u.POSITION){let s=i.json.accessors[u.POSITION],c=s.min,h=s.max;if(void 0!==c&&void 0!==h){if(r.setX(Math.max(Math.abs(c[0]),Math.abs(h[0]))),r.setY(Math.max(Math.abs(c[1]),Math.abs(h[1]))),r.setZ(Math.max(Math.abs(c[2]),Math.abs(h[2]))),s.normalized){let t=y4(y$[s.componentType]);r.multiplyScalar(t)}t.max(r)}}}u.expandByVector(t)}t.boundingBox=u;let h=new ib;u.getCenter(h.center),h.radius=u.min.distanceTo(u.max)/2,t.boundingSphere=h}(t,r,i),Promise.all(u).then(function(){return void 0!==r.targets?function(t,r,i){let s=!1,u=!1,c=!1;for(let t=0,i=r.length;t<i;t++){let i=r[t];if(void 0!==i.POSITION&&(s=!0),void 0!==i.NORMAL&&(u=!0),void 0!==i.COLOR_0&&(c=!0),s&&u&&c)break}if(!s&&!u&&!c)return Promise.resolve(t);let h=[],p=[],f=[];for(let v=0,y=r.length;v<y;v++){let y=r[v];if(s){let r=void 0!==y.POSITION?i.getDependency("accessor",y.POSITION):t.attributes.position;h.push(r)}if(u){let r=void 0!==y.NORMAL?i.getDependency("accessor",y.NORMAL):t.attributes.normal;p.push(r)}if(c){let r=void 0!==y.COLOR_0?i.getDependency("accessor",y.COLOR_0):t.attributes.color;f.push(r)}}return Promise.all([Promise.all(h),Promise.all(p),Promise.all(f)]).then(function(r){let i=r[0],h=r[1],p=r[2];return s&&(t.morphAttributes.position=i),u&&(t.morphAttributes.normal=h),c&&(t.morphAttributes.color=p),t.morphTargetsRelative=!0,t})}(t,r.targets,i):t})}let y7=null,xe="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function xt(t=!0,r=!0,i){return s=>{i&&i(s),t&&(!y7&&(y7=new yu),y7.setDecoderPath("string"==typeof t?t:xe),s.setDRACOLoader(y7)),r&&s.setMeshoptDecoder("function"==typeof yh?yh():yh)}}let xn=(t,r,i,s)=>fC(yv,t,xt(r,i,s));function xr(t,r,i={}){let s,u,c,h,p;let f=new r8,v=new r9,y=new r8,x=new iD,_=new iD,b=new iD;i.preserveMatrix=void 0===i.preserveMatrix||i.preserveMatrix,i.preservePosition=void 0===i.preservePosition||i.preservePosition,i.preserveHipPosition=void 0!==i.preserveHipPosition&&i.preserveHipPosition,i.useTargetMatrix=void 0!==i.useTargetMatrix&&i.useTargetMatrix,i.hip=void 0!==i.hip?i.hip:"hip",i.names=i.names||{};let w=r.isObject3D?r.skeleton.bones:xa(r),S=t.isObject3D?t.skeleton.bones:xa(t);if(t.isObject3D?t.skeleton.pose():(i.useTargetMatrix=!0,i.preserveMatrix=!1),i.preservePosition){p=[];for(let t=0;t<S.length;t++)p.push(S[t].position.clone())}if(i.preserveMatrix){t.updateMatrixWorld(),t.matrixWorld.identity();for(let r=0;r<t.children.length;++r)t.children[r].updateMatrixWorld(!0)}if(i.offsets){s=[];for(let t=0;t<S.length;++t)u=S[t],c=i.names[u.name]||u.name,i.offsets[c]&&(u.matrix.multiply(i.offsets[c]),u.matrix.decompose(u.position,u.quaternion,u.scale),u.updateMatrixWorld()),s.push(u.matrixWorld.clone())}for(let r=0;r<S.length;++r){if(u=S[r],h=xi(c=i.names[u.name]||u.name,w),b.copy(u.matrixWorld),h){if(h.updateMatrixWorld(),i.useTargetMatrix?_.copy(h.matrixWorld):(_.copy(t.matrixWorld).invert(),_.multiply(h.matrixWorld)),y.setFromMatrixScale(_),_.scale(y.set(1/y.x,1/y.y,1/y.z)),b.makeRotationFromQuaternion(v.setFromRotationMatrix(_)),t.isObject3D){let r=S.indexOf(u),i=s?s[r]:x.copy(t.skeleton.boneInverses[r]).invert();b.multiply(i)}b.copyPosition(_)}u.parent&&u.parent.isBone?(u.matrix.copy(u.parent.matrixWorld).invert(),u.matrix.multiply(b)):u.matrix.copy(b),i.preserveHipPosition&&c===i.hip&&u.matrix.setPosition(f.set(0,u.position.y,0)),u.matrix.decompose(u.position,u.quaternion,u.scale),u.updateMatrixWorld()}if(i.preservePosition)for(let t=0;t<S.length;++t)u=S[t],(c=i.names[u.name]||u.name)!==i.hip&&u.position.copy(p[t]);i.preserveMatrix&&t.updateMatrixWorld(!0)}xn.preload=(t,r,i,s)=>fC.preload(yv,t,xt(r,i,s)),xn.clear=t=>fC.clear(yv,t),xn.setDecoderPath=t=>{xe=t};function xi(t,r){for(let i=0,s=xa(r);i<s.length;i++)if(t===s[i].name)return s[i]}function xa(t){return Array.isArray(t)?t:t.bones}let xo={clone:function(t){let r=new Map,i=new Map,s=t.clone();return function t(r,i,s){s(r,i);for(let u=0;u<r.children.length;u++)t(r.children[u],i.children[u],s)}(t,s,function(t,s){r.set(s,t),i.set(t,s)}),s.traverse(function(t){if(!t.isSkinnedMesh)return;let s=r.get(t),u=s.skeleton.bones;t.skeleton=s.skeleton.clone(),t.bindMatrix.copy(s.bindMatrix),t.skeleton.bones=u.map(function(t){return i.get(t)}),t.bind(t.skeleton,t.bindMatrix)}),s}},xs=pI.forwardRef(({isChild:t=!1,object:r,children:i,deep:s,castShadow:u,receiveShadow:c,inject:h,keys:p,...f},v)=>{let y={keys:p,deep:s,inject:h,castShadow:u,receiveShadow:c};if(Array.isArray(r=pI.useMemo(()=>{if(!1===t&&!Array.isArray(r)){let t=!1;if(r.traverse(r=>{r.isSkinnedMesh&&(t=!0)}),t)return xo.clone(r)}return r},[r,t])))return pI.createElement("group",gY({},f,{ref:v}),r.map(t=>pI.createElement(xs,gY({key:t.uuid,object:t},y))),i);let{children:x,..._}=function(t,{keys:r=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData","bindMode","bindMatrix","bindMatrixInverse","skeleton"],deep:i,inject:s,castShadow:u,receiveShadow:c}){let h={};for(let i of r)h[i]=t[i];return i&&(h.geometry&&"materialsOnly"!==i&&(h.geometry=h.geometry.clone()),h.material&&"geometriesOnly"!==i&&(h.material=h.material.clone())),s&&(h="function"==typeof s?{...h,children:s(t)}:pI.isValidElement(s)?{...h,children:s}:{...h,...s}),t instanceof aq&&(u&&(h.castShadow=!0),c&&(h.receiveShadow=!0)),h}(r,y),b=r.type[0].toLowerCase()+r.type.slice(1);return pI.createElement(b,gY({},_,f,{ref:v}),r.children.map(t=>"Bone"===t.type?pI.createElement("primitive",gY({key:t.uuid,object:t},y)):pI.createElement(xs,gY({key:t.uuid,object:t},y,{isChild:!0}))),i,x)}),xl=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],xu=1234567;function xc(){let t=0xffffffff*Math.random()|0,r=0xffffffff*Math.random()|0,i=0xffffffff*Math.random()|0,s=0xffffffff*Math.random()|0;return(xl[255&t]+xl[t>>8&255]+xl[t>>16&255]+xl[t>>24&255]+"-"+xl[255&r]+xl[r>>8&255]+"-"+xl[r>>16&15|64]+xl[r>>24&255]+"-"+xl[63&i|128]+xl[i>>8&255]+"-"+xl[i>>16&255]+xl[i>>24&255]+xl[255&s]+xl[s>>8&255]+xl[s>>16&255]+xl[s>>24&255]).toLowerCase()}let xh=t=>{let r;let i=new Set,s=(t,s)=>{let u="function"==typeof t?t(r):t;if(!Object.is(u,r)){let t=r;r=(null!=s?s:"object"!=typeof u||null===u)?u:Object.assign({},r,u),i.forEach(i=>i(r,t))}},u=()=>r,c={setState:s,getState:u,getInitialState:()=>h,subscribe:t=>(i.add(t),()=>i.delete(t))},h=r=t(s,u,c);return c},xd=t=>t?xh(t):xh,xp=t=>t,xf=t=>{let r=xd(t),i=t=>(function(t,r=xp){let i=pI.useSyncExternalStore(t.subscribe,()=>r(t.getState()),()=>r(t.getInitialState()));return pI.useDebugValue(i),i})(r,t);return Object.assign(i,r),i},xg=t=>t?xf(t):xf,xm=new Map,xv=t=>{let r=xm.get(t);return r?Object.fromEntries(Object.entries(r.stores).map(([t,r])=>[t,r.getState()])):{}},xy=(t,r,i)=>{if(void 0===t)return{type:"untracked",connection:r.connect(i)};let s=xm.get(i.name);if(s)return{type:"tracked",store:t,...s};let u={connection:r.connect(i),stores:{}};return xm.set(i.name,u),{type:"tracked",store:t,...u}},xx=(t,r={})=>(i,s,u)=>{let c;let{enabled:h,anonymousActionType:p,store:f,...v}=r;try{c=(null==h||h)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(t){}if(!c)return t(i,s,u);let{connection:y,...x}=xy(f,c,v),_=!0;u.setState=(t,r,c)=>{let h=i(t,r);if(!_)return h;let x=void 0===c?{type:p||"anonymous"}:"string"==typeof c?{type:c}:c;return void 0===f?(null==y||y.send(x,s()),h):(null==y||y.send({...x,type:`${f}/${x.type}`},{...xv(v.name),[f]:u.getState()}),h)};let b=(...t)=>{let r=_;_=!1,i(...t),_=r},w=t(u.setState,s,u);if("untracked"===x.type?null==y||y.init(w):(x.stores[x.store]=u,null==y||y.init(Object.fromEntries(Object.entries(x.stores).map(([t,r])=>[t,t===x.store?w:r.getState()])))),u.dispatchFromDevtools&&"function"==typeof u.dispatch){let t=!1,r=u.dispatch;u.dispatch=(...i)=>{"__setState"===i[0].type&&!t&&(t=!0),r(...i)}}return y.subscribe(t=>{var r;switch(t.type){case"ACTION":if("string"!=typeof t.payload)return;return x_(t.payload,t=>{if("__setState"===t.type){if(void 0===f){b(t.state);return}Object.keys(t.state).length;let r=t.state[f];if(null==r)return;JSON.stringify(u.getState())!==JSON.stringify(r)&&b(r);return}if(!!u.dispatchFromDevtools)"function"==typeof u.dispatch&&u.dispatch(t)});case"DISPATCH":switch(t.payload.type){case"RESET":if(b(w),void 0===f)return null==y?void 0:y.init(u.getState());return null==y?void 0:y.init(xv(v.name));case"COMMIT":if(void 0===f){null==y||y.init(u.getState());break}return null==y?void 0:y.init(xv(v.name));case"ROLLBACK":return x_(t.state,t=>{if(void 0===f){b(t),null==y||y.init(u.getState());return}b(t[f]),null==y||y.init(xv(v.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return x_(t.state,t=>{if(void 0===f){b(t);return}JSON.stringify(u.getState())!==JSON.stringify(t[f])&&b(t[f])});case"IMPORT_STATE":{let{nextLiftedState:i}=t.payload,s=null==(r=i.computedStates.slice(-1)[0])?void 0:r.state;if(!s)return;void 0===f?b(s):b(s[f]),null==y||y.send(null,i);break}case"PAUSE_RECORDING":return _=!_}return}}),w},x_=(t,r)=>{let i;try{i=JSON.parse(t)}catch(t){}void 0!==i&&r(i)},xb=xg()(xx(t=>({focused:null,setFocused:r=>t({focused:r})}))),xw=(0,eu.jsx)("meshStandardMaterial",{color:"#404040",roughness:.7,metalness:.2,transparent:!0,opacity:.25,depthWrite:!1}),xS=t=>{let{data:r}=t,{scene:i}=xn(yo(r.model)),{focused:s,setFocused:u}=xb(),c=(0,pI.useMemo)(()=>xc(),[]),h=(0,pI.useMemo)(()=>c===(null==s?void 0:s.objectName),[s,c]),p=(0,pI.useCallback)(()=>{u(h?null:{objectName:c})},[h,c,u]);return(0,eu.jsx)(xs,{name:c,userData:r.metadata,object:i,position:r.position,castShadow:!0,receiveShadow:!0,onPointerDown:p,inject:s&&!h&&xw})},xM=vV({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }"),xA=pI.createContext(null),xC=vV({color:new ad,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${vW>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),xT=pI.forwardRef(({children:t,temporal:r,frames:i=40,limit:s=1/0,blend:u=20,scale:c=10,opacity:h=1,alphaTest:p=.75,color:f="black",colorBlend:v=2,resolution:y=1024,toneMapped:x=!0,..._},b)=>{pj({SoftShadowMaterial:xC});let w=fw(t=>t.gl),S=fw(t=>t.scene),M=fw(t=>t.camera),A=fw(t=>t.invalidate),C=pI.useRef(null),T=pI.useRef(null),[I]=pI.useState(()=>new xI(w,S,y));pI.useLayoutEffect(()=>{I.configure(C.current)},[]);let D=pI.useMemo(()=>({lights:new Map,temporal:!!r,frames:Math.max(2,i),blend:Math.max(2,i===1/0?u:i),count:0,getMesh:()=>C.current,reset:()=>{I.clear();let t=C.current.material;t.opacity=0,t.alphaTest=0,D.count=0},update:(t=1)=>{let r=C.current.material;D.temporal?(r.opacity=Math.min(h,r.opacity+h/D.blend),r.alphaTest=Math.min(p,r.alphaTest+p/D.blend)):(r.opacity=h,r.alphaTest=p),T.current.visible=!0,I.prepare();for(let r=0;r<t;r++)D.lights.forEach(t=>t.update()),I.update(M,D.blend);T.current.visible=!1,I.finish()}}),[I,M,S,r,i,u,h,p]);return pI.useLayoutEffect(()=>{D.reset(),!D.temporal&&D.frames!==1/0&&D.update(D.blend)}),pI.useImperativeHandle(b,()=>D,[D]),fS(()=>{(D.temporal||D.frames===1/0)&&D.count<D.frames&&D.count<s&&(A(),D.update(),D.count++)}),pI.createElement("group",_,pI.createElement("group",{traverse:()=>null,ref:T},pI.createElement(xA.Provider,{value:D},t)),pI.createElement("mesh",{receiveShadow:!0,ref:C,scale:c,rotation:[-Math.PI/2,0,0]},pI.createElement("planeGeometry",null),pI.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:x,color:f,blend:v,map:I.progressiveLightMap2.texture})))}),xE=pI.forwardRef(({castShadow:t=!0,bias:r=.001,mapSize:i=512,size:s=5,near:u=.5,far:c=500,frames:h=1,position:p=[0,0,0],radius:f=1,amount:v=8,intensity:y=vW>=155?Math.PI:1,ambient:x=.5,..._},b)=>{let w=pI.useRef(null),S=new r8(...p).length(),M=pI.useContext(xA),A=pI.useCallback(()=>{let t;if(w.current)for(let r=0;r<w.current.children.length;r++)if(t=w.current.children[r],Math.random()>x)t.position.set(p[0]+rI.randFloatSpread(f),p[1]+rI.randFloatSpread(f),p[2]+rI.randFloatSpread(f));else{let r=Math.acos(2*Math.random()-1)-Math.PI/2,i=2*Math.PI*Math.random();t.position.set(Math.cos(r)*Math.cos(i)*S,Math.abs(Math.cos(r)*Math.sin(i)*S),Math.sin(r)*S)}},[f,x,S,...p]),C=pI.useMemo(()=>({update:A}),[A]);return pI.useImperativeHandle(b,()=>C,[C]),pI.useLayoutEffect(()=>{var t;let r=w.current;return M&&(null==(t=M.lights)||t.set(r.uuid,C)),()=>{var t;null==M||null==(t=M.lights)||t.delete(r.uuid)}},[M,C]),pI.createElement("group",gY({ref:w},_),Array.from({length:v},(h,p)=>pI.createElement("directionalLight",{key:p,castShadow:t,"shadow-bias":r,"shadow-mapSize":[i,i],intensity:y/v},pI.createElement("orthographicCamera",{attach:"shadow-camera",args:[-s,s,s,-s,u,c]}))))});class xI{constructor(t,r,i=1024){this.renderer=t,this.res=i,this.scene=r,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new ad,this.clearAlpha=0;let s={type:tk,magFilter:tv,minFilter:tv};this.progressiveLightMap1=new r2(this.res,this.res,s),this.progressiveLightMap2=new r2(this.res,this.res,s),this.discardMat=new xM,this.targetMat=new hc({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=t=>{t.vertexShader="varying vec2 vUv;\n"+t.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";let r=t.fragmentShader.indexOf("void main() {");t.fragmentShader="varying vec2 vUv;\n"+t.fragmentShader.slice(0,r)+"uniform sampler2D previousShadowMap;\n	uniform float averagingWindow;\n"+t.fragmentShader.slice(r-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,t.uniforms.previousShadowMap=this.previousShadowMap,t.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(t=>{if(!t.geometry){if(t.isLight)this.lights.push({object:t,intensity:t.intensity})}else this.meshes.push({object:t,material:t.material})})}prepare(){this.lights.forEach(t=>t.object.intensity=0),this.meshes.forEach(t=>t.object.material=this.discardMat)}finish(){this.lights.forEach(t=>t.object.intensity=t.intensity),this.meshes.forEach(t=>t.object.material=t.material)}configure(t){this.object=t}update(t,r=100){if(!this.object)return;this.averagingWindow.value=r,this.object.material=this.targetMat;let i=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,s=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,u=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(i),this.previousShadowMap.value=s.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,t),this.renderer.setRenderTarget(null),this.scene.background=u}}let xD=()=>(0,eu.jsx)(xT,{...gX.props.shadow,children:(0,eu.jsx)(xE,{...gX.props.light})}),xP=t=>{let{data:r}=t,i=(0,pI.useMemo)(()=>null==r?void 0:r.models.map((t,r)=>(0,eu.jsx)(xS,{data:t},r)),[r]);return(0,eu.jsxs)("group",{children:[i,(0,eu.jsx)(xD,{})]})};i("9168"),i("845");let xR=new r8,xL=new r8,xk=new r8,xO=new rD;function xB(t,r,i){let s=xR.setFromMatrixPosition(t.matrixWorld);s.project(r);let u=i.width/2,c=i.height/2;return[s.x*u+u,-(s.y*c)+c]}let xN=t=>1e-10>Math.abs(t)?0:t;function xF(t,r,i=""){let s="matrix3d(";for(let i=0;16!==i;i++)s+=xN(r[i]*t.elements[i])+(15!==i?",":")");return i+s}let xz=(Y=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],t=>xF(t,Y));let xU=($=t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1],(t,r)=>xF(t,$(r),"translate(-50%,-50%)")),xH=pI.forwardRef(({children:t,eps:r=.001,style:i,className:s,prepend:u,center:c,fullscreen:h,portal:p,distanceFactor:f,sprite:v=!1,transform:y=!1,occlude:x,onOcclude:_,castShadow:b,receiveShadow:w,material:S,geometry:M,zIndexRange:A=[0x1000037,0],calculatePosition:C=xB,as:T="div",wrapperClass:I,pointerEvents:D="auto",...P},R)=>{let{gl:L,camera:k,scene:O,size:B,raycaster:N,events:F,viewport:z}=fw(),[U]=pI.useState(()=>document.createElement(T)),H=pI.useRef(),G=pI.useRef(null),V=pI.useRef(0),W=pI.useRef([0,0]),j=pI.useRef(null),X=pI.useRef(null),Y=(null==p?void 0:p.current)||F.connected||L.domElement.parentNode,$=pI.useRef(null),J=pI.useRef(!1),Z=pI.useMemo(()=>x&&"blending"!==x||Array.isArray(x)&&x.length&&function(t){return t&&"object"==typeof t&&"current"in t}(x[0]),[x]);pI.useLayoutEffect(()=>{let t=L.domElement;x&&"blending"===x?(t.style.zIndex=`${Math.floor(A[0]/2)}`,t.style.position="absolute",t.style.pointerEvents="none"):(t.style.zIndex=null,t.style.position=null,t.style.pointerEvents=null)},[x]),pI.useLayoutEffect(()=>{if(G.current){let t=H.current=ec.createRoot(U);if(O.updateMatrixWorld(),y)U.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{let t=C(G.current,k,B);U.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${t[0]}px,${t[1]}px,0);transform-origin:0 0;`}return Y&&(u?Y.prepend(U):Y.appendChild(U)),()=>{Y&&Y.removeChild(U),t.unmount()}}},[Y,y]),pI.useLayoutEffect(()=>{I&&(U.className=I)},[I]);let K=pI.useMemo(()=>y?{position:"absolute",top:0,left:0,width:B.width,height:B.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:c?"translate3d(-50%,-50%,0)":"none",...h&&{top:-B.height/2,left:-B.width/2,width:B.width,height:B.height},...i},[i,c,h,B,y]),q=pI.useMemo(()=>({position:"absolute",pointerEvents:D}),[D]);pI.useLayoutEffect(()=>{var r,u;J.current=!1,y?null==(r=H.current)||r.render(pI.createElement("div",{ref:j,style:K},pI.createElement("div",{ref:X,style:q},pI.createElement("div",{ref:R,className:s,style:i,children:t})))):null==(u=H.current)||u.render(pI.createElement("div",{ref:R,style:K,className:s,children:t}))});let Q=pI.useRef(!0);fS(t=>{if(G.current){k.updateMatrixWorld(),G.current.updateWorldMatrix(!0,!1);let t=y?W.current:C(G.current,k,B);if(y||Math.abs(V.current-k.zoom)>r||Math.abs(W.current[0]-t[0])>r||Math.abs(W.current[1]-t[1])>r){let r=function(t,r){let i=xR.setFromMatrixPosition(t.matrixWorld),s=xL.setFromMatrixPosition(r.matrixWorld),u=i.sub(s),c=r.getWorldDirection(xk);return u.angleTo(c)>Math.PI/2}(G.current,k),i=!1;Z&&(Array.isArray(x)?i=x.map(t=>t.current):"blending"!==x&&(i=[O]));let s=Q.current;if(i){let t=function(t,r,i,s){let u=xR.setFromMatrixPosition(t.matrixWorld),c=u.clone();c.project(r),xO.set(c.x,c.y),i.setFromCamera(xO,r);let h=i.intersectObjects(s,!0);if(h.length){let t=h[0].distance;return u.distanceTo(i.ray.origin)<t}return!0}(G.current,k,N,i);Q.current=t&&!r}else Q.current=!r;s!==Q.current&&(_?_(!Q.current):U.style.display=Q.current?"block":"none");let u=Math.floor(A[0]/2),c=x?Z?[A[0],u]:[u-1,0]:A;if(U.style.zIndex=`${function(t,r,i){if(r instanceof oe||r instanceof oC){let s=xR.setFromMatrixPosition(t.matrixWorld),u=xL.setFromMatrixPosition(r.matrixWorld),c=s.distanceTo(u),h=(i[1]-i[0])/(r.far-r.near),p=i[1]-h*r.far;return Math.round(h*c+p)}}(G.current,k,c)}`,y){let[t,r]=[B.width/2,B.height/2],i=k.projectionMatrix.elements[5]*r,{isOrthographicCamera:s,top:u,left:c,bottom:h,right:p}=k,y=xz(k.matrixWorldInverse),x=s?`scale(${i})translate(${xN(-(p+c)/2)}px,${xN((u+h)/2)}px)`:`translateZ(${i}px)`,_=G.current.matrixWorld;v&&((_=k.matrixWorldInverse.clone().transpose().copyPosition(_).scale(G.current.scale)).elements[3]=_.elements[7]=_.elements[11]=0,_.elements[15]=1),U.style.width=B.width+"px",U.style.height=B.height+"px",U.style.perspective=s?"":`${i}px`,j.current&&X.current&&(j.current.style.transform=`${x}${y}translate(${t}px,${r}px)`,X.current.style.transform=xU(_,1/((f||10)/400)))}else{let r=void 0===f?1:function(t,r){if(r instanceof oC)return r.zoom;if(!(r instanceof oe))return 1;{let i=xR.setFromMatrixPosition(t.matrixWorld),s=xL.setFromMatrixPosition(r.matrixWorld),u=r.fov*Math.PI/180;return 1/(2*Math.tan(u/2)*i.distanceTo(s))}}(G.current,k)*f;U.style.transform=`translate3d(${t[0]}px,${t[1]}px,0) scale(${r})`}W.current=t,V.current=k.zoom}}if(!Z&&$.current&&!J.current){if(y){if(j.current){let t=j.current.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){let{isOrthographicCamera:r}=k;if(r||M)P.scale&&(Array.isArray(P.scale)?P.scale instanceof r8?$.current.scale.copy(P.scale.clone().divideScalar(1)):$.current.scale.set(1/P.scale[0],1/P.scale[1],1/P.scale[2]):$.current.scale.setScalar(1/P.scale));else{let r=(f||10)/400,i=t.clientWidth*r,s=t.clientHeight*r;$.current.scale.set(i,s,1)}J.current=!0}}}else{let r=U.children[0];if(null!=r&&r.clientWidth&&null!=r&&r.clientHeight){let t=1/z.factor,i=r.clientWidth*t,s=r.clientHeight*t;$.current.scale.set(i,s,1),J.current=!0}$.current.lookAt(t.camera.position)}}});let ee=pI.useMemo(()=>({vertexShader:y?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[y]);return pI.createElement("group",gY({},P,{ref:G}),x&&!Z&&pI.createElement("mesh",{castShadow:b,receiveShadow:w,ref:$},M||pI.createElement("planeGeometry",null),S||pI.createElement("shaderMaterial",{side:eM,vertexShader:ee.vertexShader,fragmentShader:ee.fragmentShader})))}),xG=xg()(xx(t=>({fullscreenId:null,isFullscreen:!1,setFullscreen:(r,i)=>{t(t=>t.fullscreenId!==r&&t.isFullscreen?t:{fullscreenId:r,isFullscreen:i})}})));var xV=Symbol.for("preact-signals");function xW(){if(xY>1)xY--;else{for(var t,r=!1;void 0!==xX;){var i=xX;for(xX=void 0,x$++;void 0!==i;){var s=i.o;if(i.o=void 0,i.f&=-3,!(8&i.f)&&xQ(i))try{i.c()}catch(i){!r&&(t=i,r=!0)}i=s}}if(x$=0,xY--,r)throw t}}var xj=void 0,xX=void 0,xY=0,x$=0,xJ=0;function xZ(t){if(void 0!==xj){var r=t.n;if(void 0===r||r.t!==xj)return r={i:0,S:t,p:xj.s,n:void 0,t:xj,e:void 0,x:void 0,r:r},void 0!==xj.s&&(xj.s.n=r),xj.s=r,t.n=r,32&xj.f&&t.S(r),r;if(-1===r.i)return r.i=0,void 0!==r.n&&(r.n.p=r.p,void 0!==r.p&&(r.p.n=r.n),r.p=xj.s,r.n=void 0,xj.s.n=r,xj.s=r),r}}function xK(t){this.v=t,this.i=0,this.n=void 0,this.t=void 0}function xq(t){return new xK(t)}function xQ(t){for(var r=t.s;void 0!==r;r=r.n)if(r.S.i!==r.i||!r.S.h()||r.S.i!==r.i)return!0;return!1}function x0(t){for(var r=t.s;void 0!==r;r=r.n){var i=r.S.n;if(void 0!==i&&(r.r=i),r.S.n=r,r.i=-1,void 0===r.n){t.s=r;break}}}function x1(t){for(var r=t.s,i=void 0;void 0!==r;){var s=r.p;-1===r.i?(r.S.U(r),void 0!==s&&(s.n=r.n),void 0!==r.n&&(r.n.p=s)):i=r,r.S.n=r.r,void 0!==r.r&&(r.r=void 0),r=s}t.s=i}function x2(t){xK.call(this,void 0),this.x=t,this.s=void 0,this.g=xJ-1,this.f=4}xK.prototype.brand=xV,xK.prototype.h=function(){return!0},xK.prototype.S=function(t){this.t!==t&&void 0===t.e&&(t.x=this.t,void 0!==this.t&&(this.t.e=t),this.t=t)},xK.prototype.U=function(t){if(void 0!==this.t){var r=t.e,i=t.x;void 0!==r&&(r.x=i,t.e=void 0),void 0!==i&&(i.e=r,t.x=void 0),t===this.t&&(this.t=i)}},xK.prototype.subscribe=function(t){var r=this;return function(t){var r=new x6(t);try{r.c()}catch(t){throw r.d(),t}return r.d.bind(r)}(function(){var i=r.value,s=xj;xj=void 0;try{t(i)}finally{xj=s}})},xK.prototype.valueOf=function(){return this.value},xK.prototype.toString=function(){return this.value+""},xK.prototype.toJSON=function(){return this.value},xK.prototype.peek=function(){var t=xj;xj=void 0;try{return this.value}finally{xj=t}},Object.defineProperty(xK.prototype,"value",{get:function(){var t=xZ(this);return void 0!==t&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(x$>100)throw Error("Cycle detected");this.v=t,this.i++,xJ++,xY++;try{for(var r=this.t;void 0!==r;r=r.x)r.t.N()}finally{xW()}}}}),(x2.prototype=new xK).h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f))return!0;if(this.f&=-5,this.g===xJ)return!0;if(this.g=xJ,this.f|=1,this.i>0&&!xQ(this))return this.f&=-2,!0;var t=xj;try{x0(this),xj=this;var r=this.x();(16&this.f||this.v!==r||0===this.i)&&(this.v=r,this.f&=-17,this.i++)}catch(t){this.v=t,this.f|=16,this.i++}return xj=t,x1(this),this.f&=-2,!0},x2.prototype.S=function(t){if(void 0===this.t){this.f|=36;for(var r=this.s;void 0!==r;r=r.n)r.S.S(r)}xK.prototype.S.call(this,t)},x2.prototype.U=function(t){if(void 0!==this.t&&(xK.prototype.U.call(this,t),void 0===this.t)){this.f&=-33;for(var r=this.s;void 0!==r;r=r.n)r.S.U(r)}},x2.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;void 0!==t;t=t.x)t.t.N()}},Object.defineProperty(x2.prototype,"value",{get:function(){if(1&this.f)throw Error("Cycle detected");var t=xZ(this);if(this.h(),void 0!==t&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function x3(t){var r=t.u;if(t.u=void 0,"function"==typeof r){xY++;var i=xj;xj=void 0;try{r()}catch(r){throw t.f&=-2,t.f|=8,x5(t),r}finally{xj=i,xW()}}}function x5(t){for(var r=t.s;void 0!==r;r=r.n)r.S.U(r);t.x=void 0,t.s=void 0,x3(t)}function x4(t){if(xj!==this)throw Error("Out-of-order effect");x1(this),xj=t,this.f&=-2,8&this.f&&x5(this),xW()}function x6(t){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}x6.prototype.c=function(){var t=this.S();try{if(8&this.f||void 0===this.x)return;var r=this.x();"function"==typeof r&&(this.u=r)}finally{t()}},x6.prototype.S=function(){if(1&this.f)throw Error("Cycle detected");this.f|=1,this.f&=-9,x3(this),x0(this),xY++;var t=xj;return xj=this,x4.bind(this,t)},x6.prototype.N=function(){!(2&this.f)&&(this.f|=2,this.o=xX,xX=this)},x6.prototype.d=function(){this.f|=8,!(1&this.f)&&x5(this)};function x9(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,s=Array(r);i<r;i++)s[i]=t[i];return s}function x8(t,r){if(t){if("string"==typeof t)return x9(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);if("Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return x9(t,r)}}function x7(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var i,s,u=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=u){var c=[],h=!0,p=!1;try{for(u=u.call(t);!(h=(i=u.next()).done)&&(c.push(i.value),!r||c.length!==r);h=!0);}catch(t){p=!0,s=t}finally{try{!h&&null!=u.return&&u.return()}finally{if(p)throw s}}return c}}(t,r)||x8(t,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(t){return function(t){if(Array.isArray(t))return x9(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||x8(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(t,r,i){return _isNativeReflectConstruct()?_t=Reflect.construct:_t=function(t,r,i){var s=[null];s.push.apply(s,r);var u=new(Function.bind.apply(t,s));return i&&_setPrototypeOf(u,i.prototype),u},_t.apply(null,arguments)}function _n(t){var r=x7(t[0],2),i=r[0],s=r[1],u=x7(t[1],2),c=u[0],h=u[1],p=x7(t[2],2);return determinant3(i,s,1,c,h,1,p[0],p[1],1)}function _r(t){return 0===_n(t)}var _i=new rD,_a=new rD;function _o(t,r){if(t.x===r.x)return void 0!==t.z&&t.y===r.y?t.z-r.z:t.y-r.y;return t.x-r.x}function _s(t,r,i){return r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function _l(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,s)}return i}function _u(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}function _c(t,r){for(var i=0;i<r.length;i++){var s=r[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var _h=function t(r,i,s){var u=this;_u(this,t),_s(this,"dot2",function(t,r){return u.x*t+u.y*r}),_s(this,"dot3",function(t,r,i){return u.x*t+u.y*r+u.z*i}),this.x=r,this.y=i,this.z=s},_d=[new _h(1,1,0),new _h(-1,1,0),new _h(1,-1,0),new _h(-1,-1,0),new _h(1,0,1),new _h(-1,0,1),new _h(1,0,-1),new _h(-1,0,-1),new _h(0,1,1),new _h(0,-1,1),new _h(0,1,-1),new _h(0,-1,-1)],_p=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],_f=Array(512),_g=Array(512);!function(t){t>0&&t<1&&(t*=65536),(t=Math.floor(t))<256&&(t|=t<<8);for(var r,i=0;i<256;i++)r=1&i?_p[i]^255&t:_p[i]^t>>8&255,_f[i]=_f[i+256]=r,_g[i]=_g[i+256]=_d[r%12]}(0);function _m(t){var r=function(t){if("number"==typeof t)t=Math.abs(t);else if("string"==typeof t){var r=t;t=0;for(var i=0;i<r.length;i++)t=(t+(i+1)*(r.charCodeAt(i)%96))%0x7fffffff}return 0===t&&(t=311),t}(t);return function(){var t=48271*r%0x7fffffff;return r=t,t/0x7fffffff}}var _v=new function t(r){var i=this;_u(this,t),_s(this,"seed",0),_s(this,"init",function(t){i.seed=t,i.value=_m(t)}),_s(this,"value",_m(this.seed)),this.init(r)}(Math.random()),_y=null,_x=function(t){return 1/(1+t+.48*t*t+.235*t*t*t)};function __(t,r,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.25,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:_x,p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:.001,f="velocity_"+r;if(void 0===t.__damp&&(t.__damp={}),void 0===t.__damp[f]&&(t.__damp[f]=0),Math.abs(t[r]-i)<=p)return t[r]=i,!1;var v=2/(s=Math.max(1e-4,s)),y=h(v*u),x=t[r]-i,_=i,b=c*s;x=Math.min(Math.max(x,-b),b),i=t[r]-x;var w=(t.__damp[f]+v*x)*u;t.__damp[f]=(t.__damp[f]-v*w)*y;var S=i+(x+w)*y;return _-t[r]>0==S>_&&(S=_,t.__damp[f]=(S-_)/u),t[r]=S,!0}var _b=new r8,_w=new r9,_S=new r9,_M=new iD,_A=new r8;function _C(t,r,i,s,u,c,h,p){var f,v,y,x,_;return __(t,r,t[r]+(f=t[r],(_=(x=(v=i-f)-Math.floor(v/(y=2*Math.PI))*y,Math.max(0,Math.min(y,x))))>Math.PI&&(_-=2*Math.PI),_),s,u,c,h,p)}var _T=new rD,_E=new r8;function _I(t,r,i,s,u,c,h){return"number"==typeof r?_E.setScalar(r):Array.isArray(r)?_E.set(r[0],r[1],r[2]):_E.copy(r),eag=__(t,"x",_E.x,i,s,u,c,h),eam=__(t,"y",_E.y,i,s,u,c,h),eav=__(t,"z",_E.z,i,s,u,c,h),eag||eam||eav}var _D=new r0,_P=new iU,_R=new ad,_L=new r9,_k=new r0,_O=new r0,_B=new r0;function _N(t,r,i,s,u,c,h){Array.isArray(r)?_L.set(r[0],r[1],r[2],r[3]):_L.copy(r);var p=t.dot(_L)>0?1:-1;return _L.x*=p,_L.y*=p,_L.z*=p,_L.w*=p,eaE=__(t,"x",_L.x,i,s,u,c,h),eaI=__(t,"y",_L.y,i,s,u,c,h),eaD=__(t,"z",_L.z,i,s,u,c,h),eaP=__(t,"w",_L.w,i,s,u,c,h),_k.set(t.x,t.y,t.z,t.w).normalize(),_O.set(t.__damp.velocity_x,t.__damp.velocity_y,t.__damp.velocity_z,t.__damp.velocity_w),_B.copy(_k).multiplyScalar(_O.dot(_k)/_k.dot(_k)),t.__damp.velocity_x-=_B.x,t.__damp.velocity_y-=_B.y,t.__damp.velocity_z-=_B.z,t.__damp.velocity_w-=_B.w,t.set(_k.x,_k.y,_k.z,_k.w),eaE||eaI||eaD||eaP}var _F=new d0,_z=new iD,_U=new r8,_H=new r9,_G=new r8,_V=Object.freeze({__proto__:null,rsqw:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/(2*Math.PI);return i/Math.atan(1/r)*Math.atan(Math.sin(2*Math.PI*t*s)/r)},exp:_x,linear:function(t){return t},sine:{in:function(t){return 1-Math.cos(t*Math.PI/2)},out:function(t){return Math.sin(t*Math.PI/2)},inOut:function(t){return-(Math.cos(Math.PI*t)-1)/2}},cubic:{in:function(t){return t*t*t},out:function(t){return 1-Math.pow(1-t,3)},inOut:function(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}},quint:{in:function(t){return t*t*t*t*t},out:function(t){return 1-Math.pow(1-t,5)},inOut:function(t){return t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2}},circ:{in:function(t){return 1-Math.sqrt(1-Math.pow(t,2))},out:function(t){return Math.sqrt(1-Math.pow(t-1,2))},inOut:function(t){return t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2}},quart:{in:function(t){return t*t*t*t},out:function(t){return 1- --t*t*t*t},inOut:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t}},expo:{in:function(t){return 0===t?0:Math.pow(2,10*t-10)},out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},inOut:function(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}},damp:__,dampLookAt:function(t,r,i,s,u,c,h){"number"==typeof r?_b.setScalar(r):Array.isArray(r)?_b.set(r[0],r[1],r[2]):_b.copy(r);var p,f,v=t.parent;if(t.updateWorldMatrix(!0,!1),_A.setFromMatrixPosition(t.matrixWorld),(p=t)&&p.isCamera||(f=t)&&f.isLight)_M.lookAt(_A,_b,t.up);else _M.lookAt(_b,_A,t.up);_N(t.quaternion,_S.setFromRotationMatrix(_M),i,s,u,c,h),v&&(_M.extractRotation(v.matrixWorld),_w.setFromRotationMatrix(_M),_N(t.quaternion,_S.copy(t.quaternion).premultiply(_w.invert()),i,s,u,c,h))},dampAngle:_C,damp2:function(t,r,i,s,u,c,h){return"number"==typeof r?_T.setScalar(r):Array.isArray(r)?_T.set(r[0],r[1]):_T.copy(r),eap=__(t,"x",_T.x,i,s,u,c,h),eaf=__(t,"y",_T.y,i,s,u,c,h),eap||eaf},damp3:_I,damp4:function(t,r,i,s,u,c,h){return"number"==typeof r?_D.setScalar(r):Array.isArray(r)?_D.set(r[0],r[1],r[2],r[3]):_D.copy(r),eay=__(t,"x",_D.x,i,s,u,c,h),eax=__(t,"y",_D.y,i,s,u,c,h),ea_=__(t,"z",_D.z,i,s,u,c,h),eab=__(t,"w",_D.w,i,s,u,c,h),eay||eax||ea_||eab},dampE:function(t,r,i,s,u,c,h){return Array.isArray(r)?_P.set(r[0],r[1],r[2],r[3]):_P.copy(r),eaw=_C(t,"x",_P.x,i,s,u,c,h),eaS=_C(t,"y",_P.y,i,s,u,c,h),eaM=_C(t,"z",_P.z,i,s,u,c,h),eaw||eaS||eaM},dampC:function(t,r,i,s,u,c,h){return r instanceof ad?_R.copy(r):Array.isArray(r)?_R.setRGB(r[0],r[1],r[2]):_R.set(r),eaA=__(t,"r",_R.r,i,s,u,c,h),eaC=__(t,"g",_R.g,i,s,u,c,h),eaT=__(t,"b",_R.b,i,s,u,c,h),eaA||eaC||eaT},dampQ:_N,dampS:function(t,r,i,s,u,c,h){return Array.isArray(r)?_F.set(r[0],r[1],r[2]):_F.copy(r),eaR=__(t,"radius",_F.radius,i,s,u,c,h),eaL=_C(t,"phi",_F.phi,i,s,u,c,h),eak=_C(t,"theta",_F.theta,i,s,u,c,h),eaR||eaL||eak},dampM:function(t,r,i,s,u,c,h){return void 0===t.__damp&&(t.__damp={position:new r8,rotation:new r9,scale:new r8},t.decompose(t.__damp.position,t.__damp.rotation,t.__damp.scale)),Array.isArray(r)?_z.set.apply(_z,_e(r)):_z.copy(r),_z.decompose(_U,_H,_G),eaO=_I(t.__damp.position,_U,i,s,u,c,h),eaB=_N(t.__damp.rotation,_H,i,s,u,c,h),eaN=_I(t.__damp.scale,_G,i,s,u,c,h),t.compose(t.__damp.position,t.__damp.rotation,t.__damp.scale),eaO||eaB||eaN}});function _W(t,r){return(_W=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function _j(t){return(_j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _X(t){var r=Math.sqrt(t.x*t.x+t.z*t.z+t.y*t.y);return{r:r,phi:Math.acos(t.y/r),theta:Math.atan2(t.z,t.x)}}let _Y=t=>t.map(t=>t/180*Math.PI),_$=(0,pI.forwardRef)((t,r)=>{let{children:i,scale:s=0,position:u=[0,0,0],rotation:c=[0,0,0],onCustom:h,customSmooth:p=.2}=t,f=(0,pI.useRef)(null),v=(0,pI.useMemo)(()=>new xK({scale:null,position:null,rotation:null,alpha:0,delta:0}),[]);return(0,pI.useImperativeHandle)(r,()=>({setScale:function(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r)v.value.scale=t;else{var i;v.value.scale=null,null===(i=f.current)||void 0===i||i.scale.setScalar(t)}},setPosition:function(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r)v.value.position=t;else{var i;v.value.position=null,null===(i=f.current)||void 0===i||i.position.fromArray(t)}},setRotation:function(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r)v.value.rotation=_Y(t);else{var i;v.value.rotation=null,null===(i=f.current)||void 0===i||i.rotation.fromArray([..._Y(t),"XYZ"])}},setCustom:t=>{v.value.delta=t},stop:()=>{v.value.scale=null,v.value.position=null}})),fS((t,r)=>{f.current&&(v.value.scale&&_V.damp3(f.current.scale,v.value.scale,.2,r),v.value.position&&_V.damp3(f.current.position,v.value.position,.15,r),v.value.rotation&&_V.dampE(f.current.rotation,v.value.rotation,.4,r),h&&(_V.damp(v.value,"alpha",v.value.delta,p,r),h(v.value.alpha)))}),(0,eu.jsx)("group",{ref:f,scale:s,position:u,rotation:[..._Y(c),"XYZ"],children:i})});_$.displayName="TransformableGroup";function _J(t){var r;return"undefined"!=typeof window&&null!=window.navigator&&((null===(r=window.navigator.userAgentData)||void 0===r?void 0:r.brands.some(r=>t.test(r.brand)))||t.test(window.navigator.userAgent))}function _Z(t){var r;return"undefined"!=typeof window&&null!=window.navigator&&t.test((null===(r=window.navigator.userAgentData)||void 0===r?void 0:r.platform)||window.navigator.platform)}function _K(t){let r=null;return()=>(null==r&&(r=t()),r)}let _q=_K(function(){return _Z(/^Mac/i)}),_Q=_K(function(){return _Z(/^iPhone/i)}),_0=_K(function(){return _Z(/^iPad/i)||_q()&&navigator.maxTouchPoints>1}),_1=_K(function(){return _Q()||_0()});_K(function(){return _q()||_1()}),_K(function(){return _J(/AppleWebKit/i)&&!_2()});let _2=_K(function(){return _J(/Chrome/i)}),_3=_K(function(){return _J(/Android/i)});_K(function(){return _J(/Firefox/i)});let _5=t=>{var r;return null!==(r=null==t?void 0:t.ownerDocument)&&void 0!==r?r:document},_4=t=>t&&"window"in t&&t.window===t?t:_5(t).defaultView||window,_6=null,_9=new Set,_8=new Map,_7=!1,be=!1,bt={Tab:!0,Escape:!0};function bn(t,r){for(let i of _9)i(t,r)}function br(t){var r;if(_7=!0,!((r=t).metaKey||!_q()&&r.altKey||r.ctrlKey||"Control"===r.key||"Shift"===r.key||"Meta"===r.key))_6="keyboard",bn("keyboard",t)}function bi(t){_6="pointer",("mousedown"===t.type||"pointerdown"===t.type)&&(_7=!0,bn("pointer",t))}function ba(t){var r;if(0===(r=t).mozInputSource&&r.isTrusted||(_3()&&r.pointerType?"click"===r.type&&1===r.buttons:0===r.detail&&!r.pointerType))_7=!0,_6="virtual"}function bo(t){t.target!==window&&t.target!==document&&(!_7&&!be&&(_6="virtual",bn("virtual",t)),_7=!1,be=!1)}function bs(){_7=!1,be=!0}function bl(t){if("undefined"==typeof window||_8.get(_4(t)))return;let r=_4(t),i=_5(t),s=r.HTMLElement.prototype.focus;r.HTMLElement.prototype.focus=function(){_7=!0,s.apply(this,arguments)},i.addEventListener("keydown",br,!0),i.addEventListener("keyup",br,!0),i.addEventListener("click",ba,!0),r.addEventListener("focus",bo,!0),r.addEventListener("blur",bs,!1),"undefined"!=typeof PointerEvent?(i.addEventListener("pointerdown",bi,!0),i.addEventListener("pointermove",bi,!0),i.addEventListener("pointerup",bi,!0)):(i.addEventListener("mousedown",bi,!0),i.addEventListener("mousemove",bi,!0),i.addEventListener("mouseup",bi,!0)),r.addEventListener("beforeunload",()=>{bu(t)},{once:!0}),_8.set(r,{focus:s})}let bu=(t,r)=>{let i=_4(t),s=_5(t);r&&s.removeEventListener("DOMContentLoaded",r),_8.has(i)&&(i.HTMLElement.prototype.focus=_8.get(i).focus,s.removeEventListener("keydown",br,!0),s.removeEventListener("keyup",br,!0),s.removeEventListener("click",ba,!0),i.removeEventListener("focus",bo,!0),i.removeEventListener("blur",bs,!1),"undefined"!=typeof PointerEvent?(s.removeEventListener("pointerdown",bi,!0),s.removeEventListener("pointermove",bi,!0),s.removeEventListener("pointerup",bi,!0)):(s.removeEventListener("mousedown",bi,!0),s.removeEventListener("mousemove",bi,!0),s.removeEventListener("mouseup",bi,!0)),_8.delete(i))};function bc(){return"pointer"!==_6}"undefined"!=typeof document&&!function(t){let r;let i=_5(void 0);"loading"!==i.readyState?bl(t):(r=()=>{bl(t)},i.addEventListener("DOMContentLoaded",r)),()=>bu(t,r)}();let bh=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function bd(t,r,i){bl(),(0,pI.useEffect)(()=>{let r=(r,s)=>{(function(t,r,i){var s;let u="undefined"!=typeof window?_4(null==i?void 0:i.target).HTMLInputElement:HTMLInputElement,c="undefined"!=typeof window?_4(null==i?void 0:i.target).HTMLTextAreaElement:HTMLTextAreaElement,h="undefined"!=typeof window?_4(null==i?void 0:i.target).HTMLElement:HTMLElement,p="undefined"!=typeof window?_4(null==i?void 0:i.target).KeyboardEvent:KeyboardEvent;return!((t=t||(null==i?void 0:i.target)instanceof u&&!bh.has(null==i?void 0:null===(s=i.target)||void 0===s?void 0:s.type)||(null==i?void 0:i.target)instanceof c||(null==i?void 0:i.target)instanceof h&&(null==i?void 0:i.target.isContentEditable))&&"keyboard"===r&&i instanceof p&&!bt[i.key])})(!!(null==i?void 0:i.isTextInput),r,s)&&t(bc())};return _9.add(r),()=>{_9.delete(r)}},r)}let bp="undefined"!=typeof document?pI.useLayoutEffect:()=>{};class bf{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(t,r){this.nativeEvent=r,this.target=r.target,this.currentTarget=r.currentTarget,this.relatedTarget=r.relatedTarget,this.bubbles=r.bubbles,this.cancelable=r.cancelable,this.defaultPrevented=r.defaultPrevented,this.eventPhase=r.eventPhase,this.isTrusted=r.isTrusted,this.timeStamp=r.timeStamp,this.type=t}}function bg(t){let r=(0,pI.useRef)({isFocused:!1,observer:null});bp(()=>{let t=r.current;return()=>{t.observer&&(t.observer.disconnect(),t.observer=null)}},[]);let i=function(t){let r=(0,pI.useRef)(null);return bp(()=>{r.current=t},[t]),(0,pI.useCallback)((...t)=>{let i=r.current;return null==i?void 0:i(...t)},[])}(r=>{null==t||t(r)});return(0,pI.useCallback)(t=>{if(t.target instanceof HTMLButtonElement||t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLSelectElement){r.current.isFocused=!0;let s=t.target;s.addEventListener("focusout",t=>{r.current.isFocused=!1,s.disabled&&i(new bf("blur",t)),r.current.observer&&(r.current.observer.disconnect(),r.current.observer=null)},{once:!0}),r.current.observer=new MutationObserver(()=>{if(r.current.isFocused&&s.disabled){var t;null===(t=r.current.observer)||void 0===t||t.disconnect();let i=s===document.activeElement?null:document.activeElement;s.dispatchEvent(new FocusEvent("blur",{relatedTarget:i})),s.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:i}))}}),r.current.observer.observe(s,{attributes:!0,attributeFilter:["disabled"]})}},[i])}function bm(t={}){let{autoFocus:r=!1,isTextInput:i,within:s}=t,u=(0,pI.useRef)({isFocused:!1,isFocusVisible:r||bc()}),[c,h]=(0,pI.useState)(!1),[p,f]=(0,pI.useState)(()=>u.current.isFocused&&u.current.isFocusVisible),v=(0,pI.useCallback)(()=>f(u.current.isFocused&&u.current.isFocusVisible),[]),y=(0,pI.useCallback)(t=>{u.current.isFocused=t,h(t),v()},[v]);bd(t=>{u.current.isFocusVisible=t,v()},[],{isTextInput:i});let{focusProps:x}=function(t){let{isDisabled:r,onFocus:i,onBlur:s,onFocusChange:u}=t,c=(0,pI.useCallback)(t=>{if(t.target===t.currentTarget)return s&&s(t),u&&u(!1),!0},[s,u]),h=bg(c),p=(0,pI.useCallback)(t=>{let r=_5(t.target);t.target===t.currentTarget&&r.activeElement===t.target&&(i&&i(t),u&&u(!0),h(t))},[u,i,h]);return{focusProps:{onFocus:!r&&(i||u||s)?p:void 0,onBlur:!r&&(s||u)?c:void 0}}}({isDisabled:s,onFocusChange:y}),{focusWithinProps:_}=function(t){let{isDisabled:r,onBlurWithin:i,onFocusWithin:s,onFocusWithinChange:u}=t,c=(0,pI.useRef)({isFocusWithin:!1}),h=(0,pI.useCallback)(t=>{c.current.isFocusWithin&&!t.currentTarget.contains(t.relatedTarget)&&(c.current.isFocusWithin=!1,i&&i(t),u&&u(!1))},[i,u,c]),p=bg(h),f=(0,pI.useCallback)(t=>{!c.current.isFocusWithin&&document.activeElement===t.target&&(s&&s(t),u&&u(!0),c.current.isFocusWithin=!0,p(t))},[s,u,p]);return r?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:f,onBlur:h}}}({isDisabled:!s,onFocusWithinChange:y});return{isFocused:c,isFocusVisible:p,focusProps:s?_:x}}let bv=!1,by=0;function bx(){bv=!0,setTimeout(()=>{bv=!1},50)}function b_(t){"touch"===t.pointerType&&bx()}function bb(){if("undefined"!=typeof document)return"undefined"!=typeof PointerEvent?document.addEventListener("pointerup",b_):document.addEventListener("touchend",bx),by++,()=>{!(--by>0)&&("undefined"!=typeof PointerEvent?document.removeEventListener("pointerup",b_):document.removeEventListener("touchend",bx))}}function bw(t){let{onHoverStart:r,onHoverChange:i,onHoverEnd:s,isDisabled:u}=t,[c,h]=(0,pI.useState)(!1),p=(0,pI.useRef)({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;(0,pI.useEffect)(bb,[]);let{hoverProps:f,triggerHoverEnd:v}=(0,pI.useMemo)(()=>{let t=(t,s)=>{if(p.pointerType=s,u||"touch"===s||p.isHovered||!t.currentTarget.contains(t.target))return;p.isHovered=!0;let c=t.currentTarget;p.target=c,r&&r({type:"hoverstart",target:c,pointerType:s}),i&&i(!0),h(!0)},c=(t,r)=>{if(p.pointerType="",p.target=null,"touch"===r||!p.isHovered)return;p.isHovered=!1;let u=t.currentTarget;s&&s({type:"hoverend",target:u,pointerType:r}),i&&i(!1),h(!1)},f={};return"undefined"!=typeof PointerEvent?(f.onPointerEnter=r=>{(!bv||"mouse"!==r.pointerType)&&t(r,r.pointerType)},f.onPointerLeave=t=>{!u&&t.currentTarget.contains(t.target)&&c(t,t.pointerType)}):(f.onTouchStart=()=>{p.ignoreEmulatedMouseEvents=!0},f.onMouseEnter=r=>{!p.ignoreEmulatedMouseEvents&&!bv&&t(r,"mouse"),p.ignoreEmulatedMouseEvents=!1},f.onMouseLeave=t=>{!u&&t.currentTarget.contains(t.target)&&c(t,"mouse")}),{hoverProps:f,triggerHoverEnd:c}},[r,i,s,u,p]);return(0,pI.useEffect)(()=>{u&&v({currentTarget:p.target},p.pointerType)},[u]),{hoverProps:f,isHovered:c}}var bS=Object.defineProperty,bM=(t,r,i)=>r in t?bS(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,bA=(t,r,i)=>(bM(t,"symbol"!=typeof r?r+"":r,i),i);let bC=new class t{constructor(){bA(this,"current",this.detect()),bA(this,"handoffState","pending"),bA(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}};function bT(){let t=[],r={addEventListener:(t,i,s,u)=>(t.addEventListener(i,s,u),r.add(()=>t.removeEventListener(i,s,u))),requestAnimationFrame(...t){let i=requestAnimationFrame(...t);return r.add(()=>cancelAnimationFrame(i))},nextFrame:(...t)=>r.requestAnimationFrame(()=>r.requestAnimationFrame(...t)),setTimeout(...t){let i=setTimeout(...t);return r.add(()=>clearTimeout(i))},microTask(...t){var i;let s={current:!0};return i=()=>{s.current&&t[0]()},"function"==typeof queueMicrotask?queueMicrotask(i):Promise.resolve().then(i).catch(t=>setTimeout(()=>{throw t})),r.add(()=>{s.current=!1})},style(t,r,i){let s=t.style.getPropertyValue(r);return Object.assign(t.style,{[r]:i}),this.add(()=>{Object.assign(t.style,{[r]:s})})},group(t){let r=bT();return t(r),this.add(()=>r.dispose())},add:r=>(t.includes(r)||t.push(r),()=>{let i=t.indexOf(r);if(i>=0)for(let r of t.splice(i,1))r()}),dispose(){for(let r of t.splice(0))r()}};return r}function bE(){let[t]=(0,pI.useState)(bT);return(0,pI.useEffect)(()=>()=>t.dispose(),[t]),t}let bI=(t,r)=>{bC.isServer?(0,pI.useEffect)(t,r):(0,pI.useLayoutEffect)(t,r)};function bD(t){let r=(0,pI.useRef)(t);return bI(()=>{r.current=t},[t]),r}let bP=function(t){let r=bD(t);return pI.useCallback((...t)=>r.current(...t),[r])};function bR({disabled:t=!1}={}){let r=(0,pI.useRef)(null),[i,s]=(0,pI.useState)(!1),u=bE(),c=bP(()=>{r.current=null,s(!1),u.dispose()}),h=bP(t=>{if(u.dispose(),null===r.current){r.current=t.currentTarget,s(!0);{var i;let h=(i=t.currentTarget,bC.isServer?null:i instanceof Node?i.ownerDocument:null!=i&&i.hasOwnProperty("current")&&i.current instanceof Node?i.current.ownerDocument:document);u.addEventListener(h,"pointerup",c,!1),u.addEventListener(h,"pointermove",t=>{if(r.current){var i,u,c;let h,p;s((u=(h=(i=t).width/2,p=i.height/2,{top:i.clientY-p,right:i.clientX+h,bottom:i.clientY+p,left:i.clientX-h}),c=r.current.getBoundingClientRect(),!(!u||!c||u.right<c.left||u.left>c.right||u.bottom<c.top||u.top>c.bottom)))}},!1),u.addEventListener(h,"pointercancel",c,!1)}}});return{pressed:i,pressProps:t?{}:{onPointerDown:h,onPointerUp:c,onClick:c}}}let bL=(0,pI.createContext)(void 0);function bk(){return(0,pI.useContext)(bL)}function bO({value:t,children:r}){return pI.createElement(bL.Provider,{value:t},r)}function bB(...t){return Array.from(new Set(t.flatMap(t=>"string"==typeof t?t.split(" "):[]))).filter(Boolean).join(" ")}function bN(t,r,...i){if(t in r){let s=r[t];return"function"==typeof s?s(...i):s}let s=Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(r).map(t=>`"${t}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,bN),s}var bF=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(bF||{}),bz=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(bz||{});function bU(){let t=function(){let t=(0,pI.useRef)([]),r=(0,pI.useCallback)(r=>{for(let i of t.current)null!=i&&("function"==typeof i?i(r):i.current=r)},[]);return(...i)=>{if(!i.every(t=>null==t))return t.current=i,r}}();return(0,pI.useCallback)(r=>(function({ourProps:t,theirProps:r,slot:i,defaultTag:s,features:u,visible:c=!0,name:h,mergeRefs:p}){p=null!=p?p:bG;let f=bV(r,t);if(c)return bH(f,i,s,h,p);let v=null!=u?u:0;if(2&v){let{static:t=!1,...r}=f;if(t)return bH(r,i,s,h,p)}if(1&v){let{unmount:t=!0,...r}=f;return bN(t?0:1,{0:()=>null,1:()=>bH({...r,hidden:!0,style:{display:"none"}},i,s,h,p)})}return bH(f,i,s,h,p)})({mergeRefs:t,...r}),[t])}function bH(t,r={},i,s,u){let{as:c=i,children:h,refName:p="ref",...f}=bY(t,["unmount","static"]),v=void 0!==t.ref?{[p]:t.ref}:{},y="function"==typeof h?h(r):h;"className"in f&&f.className&&"function"==typeof f.className&&(f.className=f.className(r)),f["aria-labelledby"]&&f["aria-labelledby"]===f.id&&(f["aria-labelledby"]=void 0);let x={};if(r){let t=!1,i=[];for(let[s,u]of Object.entries(r))"boolean"==typeof u&&(t=!0),!0===u&&i.push(s.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`));if(t)for(let t of(x["data-headlessui-state"]=i.join(" "),i))x[`data-${t}`]=""}if(c===pI.Fragment&&(Object.keys(bX(f)).length>0||Object.keys(bX(x)).length>0)){if(!(0,pI.isValidElement)(y)||Array.isArray(y)&&y.length>1){if(Object.keys(bX(f)).length>0)throw Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(bX(f)).concat(Object.keys(bX(x))).map(t=>`  - ${t}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(t=>`  - ${t}`).join(`
`)].join(`
`))}else{let t=y.props,r=null==t?void 0:t.className,i="function"==typeof r?(...t)=>bB(r(...t),f.className):bB(r,f.className),s=bV(y.props,bX(bY(f,["ref"])));for(let t in x)t in s&&delete x[t];return(0,pI.cloneElement)(y,Object.assign({},s,x,v,{ref:u(function(t){return pI.version.split(".")[0]>="19"?t.props.ref:t.ref}(y),v.ref)},i?{className:i}:{}))}}return(0,pI.createElement)(c,Object.assign({},bY(f,["ref"]),c!==pI.Fragment&&v,c!==pI.Fragment&&x),y)}function bG(...t){return t.every(t=>null==t)?void 0:r=>{for(let i of t)null!=i&&("function"==typeof i?i(r):i.current=r)}}function bV(...t){var r;if(0===t.length)return{};if(1===t.length)return t[0];let i={},s={};for(let r of t)for(let t in r)t.startsWith("on")&&"function"==typeof r[t]?(null!=s[t]||(s[t]=[]),s[t].push(r[t])):i[t]=r[t];if(i.disabled||i["aria-disabled"])for(let t in s)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(t)&&(s[t]=[t=>{var r;return null==(r=null==t?void 0:t.preventDefault)?void 0:r.call(t)}]);for(let t in s)Object.assign(i,{[t](r,...i){for(let u of s[t]){if((r instanceof Event||(null==r?void 0:r.nativeEvent)instanceof Event)&&r.defaultPrevented)return;u(r,...i)}}});return i}function bW(...t){var r;if(0===t.length)return{};if(1===t.length)return t[0];let i={},s={};for(let r of t)for(let t in r)t.startsWith("on")&&"function"==typeof r[t]?(null!=s[t]||(s[t]=[]),s[t].push(r[t])):i[t]=r[t];for(let t in s)Object.assign(i,{[t](...r){for(let i of s[t])null==i||i(...r)}});return i}function bj(t){var r;return Object.assign((0,pI.forwardRef)(t),{displayName:null!=(r=t.displayName)?r:t.name})}function bX(t){let r=Object.assign({},t);for(let t in r)void 0===r[t]&&delete r[t];return r}function bY(t,r=[]){let i=Object.assign({},t);for(let t of r)t in i&&delete i[t];return i}let b$=bj(function(t,r){var i;let s=bk(),{disabled:u=s||!1,autoFocus:c=!1,...h}=t,{isFocusVisible:p,focusProps:f}=bm({autoFocus:c}),{isHovered:v,hoverProps:y}=bw({isDisabled:u}),{pressed:x,pressProps:_}=bR({disabled:u}),b=bW({ref:r,type:null!=(i=h.type)?i:"button",disabled:u||void 0,autoFocus:c},f,y,_),w=(0,pI.useMemo)(()=>({disabled:u,hover:v,focus:p,active:x,autofocus:c}),[u,v,p,x,c]);return bU()({ourProps:b,theirProps:h,slot:w,defaultTag:"button",name:"Button"})}),bJ=t=>{let{children:r,className:i,...s}=t;return(0,eu.jsx)(b$,{className:gj(`
        inline-flex items-center gap-2 rounded-md border border-slate-300
        bg-slate-50 px-3 py-1.5 text-xs/6 text-slate-700 shadow-inner
        shadow-white/10

        hover:bg-slate-100

        ${i}
      `),...s,children:r})},bZ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bK=(...t)=>t.filter((t,r,i)=>!!t&&""!==t.trim()&&i.indexOf(t)===r).join(" ").trim();var bq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let bQ=(0,pI.forwardRef)(({color:t="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:u="",children:c,iconNode:h,...p},f)=>(0,pI.createElement)("svg",{ref:f,...bq,width:r,height:r,stroke:t,strokeWidth:s?24*Number(i)/Number(r):i,className:bK("lucide",u),...p},[...h.map(([t,r])=>(0,pI.createElement)(t,r)),...Array.isArray(c)?c:[c]])),b0=(t,r)=>{let i=(0,pI.forwardRef)(({className:i,...s},u)=>(0,pI.createElement)(bQ,{ref:u,iconNode:r,className:bK(`lucide-${bZ(t)}`,i),...s}));return i.displayName=`${t}`,i},b1=b0("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),b2=b0("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),b3=t=>{let{width:r,height:i,onMaximize:s,onClose:u,title:c,children:h,extraButtons:p}=t;return(0,eu.jsxs)("div",{className:gj(`
        pointer-events-auto select-none rounded-lg border border-slate-300
        bg-slate-100
      `),style:{width:r,height:i},children:[(0,eu.jsxs)("div",{className:"flex h-[60px] gap-0.5 px-2 pb-1 pt-2",children:[(0,eu.jsx)("b",{className:"flex-1 text-xl",children:c}),(0,eu.jsxs)("div",{className:"flex gap-1",children:[p,s&&(0,eu.jsx)(bJ,{className:"size-10 justify-center p-1",onPointerDown:()=>s(),children:(0,eu.jsx)(b1,{className:"size-3"})}),u&&(0,eu.jsx)(bJ,{className:"size-10 justify-center p-1",onPointerDown:()=>u(),children:(0,eu.jsx)(b2,{className:"size-3"})})]})]}),(0,eu.jsx)("div",{className:"mx-4 overflow-auto rounded-lg bg-neutral-50 scrollbar",style:{height:`calc(${i} - 60px - 1rem)`},children:h})]})},b5={environments:{postProcess:!1},cameraController:{focusedOffset:[2.5,1.5,2.5],focusedPosition:[-50,25,50],focusedZoom:75,unfocusedPosition:[25,50,50],unfocusedZoom:70},floatingUI:{width:300,height:350,focusedScale:.8,focusedPosition:[2.7,3,2],focusedRotation:[0,-52,0]}},b4=xg()(xx(t=>({config:b5,setConfig:(r,i)=>{t(t=>({config:{...t.config,[r]:i}}),!1,`config/set/${r}`)}}))),b6=[0,0,0],b9=[0,0,0],b8=t=>{let{scale:r=.5,renderTitle:i,renderContent:s,extraButtons:u}=t,{scene:c,controls:h}=fw(),p=(0,pI.useRef)(null),f=(0,pI.useRef)(null),{fullscreenId:v,isFullscreen:y,setFullscreen:x}=xG(),{focused:_,setFocused:b}=xb(),w=b4(t=>t.config.floatingUI),S=b4(t=>t.config.cameraController.focusedOffset),M=(0,pI.useMemo)(()=>xc(),[]),A=(0,pI.useMemo)(()=>y&&v===M,[v,M,y]),C=(0,pI.useMemo)(()=>_?c.getObjectByName(_.objectName):null,[_,c]),T=(0,pI.useMemo)(()=>A?{wrapper:{width:"100%",height:"100%"},content:{width:"100%",height:"100%"}}:{wrapper:{width:`${w.width}px`,height:`${w.height}px`},content:{width:`${w.width/r}px`,height:`${w.height/r}px`}},[w.height,w.width,A,r]),I=(0,pI.useMemo)(()=>{var t;return t=-1,new xK(-1)},[]),D=(0,pI.useCallback)(t=>t.map((t,r)=>t+w.focusedPosition[r]),[w.focusedPosition]),P=(0,pI.useCallback)(()=>{b(null),clearTimeout(I.value),h.enabled=!0},[h,I,b]),R=(0,pI.useCallback)(()=>{var t,r,i,s,u,c;if(y&&!A)return;let f=!y;x(M,f),clearTimeout(I.value);if(h.enabled=!0,f)null===(t=p.current)||void 0===t||t.setScale(1),null===(r=p.current)||void 0===r||r.setPosition(b6),null===(i=p.current)||void 0===i||i.setRotation(b9),h.setTarget(...b6,!1),I.value=window.setTimeout(()=>h.enabled=!1,500);else{let t=C.position.toArray();null===(s=p.current)||void 0===s||s.setPosition(D(t)),null===(u=p.current)||void 0===u||u.setScale(w.focusedScale),null===(c=p.current)||void 0===c||c.setRotation(w.focusedRotation),h.setTarget(...t.map((t,r)=>t+S[r]),!1)}},[D,S,w.focusedRotation,w.focusedScale,h,M,A,y,C,x,I]),L=(0,pI.useCallback)(t=>{var r;f.current&&(f.current.style.opacity=t.toString()),(null===(r=f.current)||void 0===r?void 0:r.parentElement)&&(f.current.parentElement.style.pointerEvents="none")},[]);return(0,pI.useEffect)(()=>{var t,r,i,s,u,c,h,f;x(M,!1),C?(null===(t=p.current)||void 0===t||t.setPosition(D(C.position.toArray()),!0),null===(r=p.current)||void 0===r||r.setScale(w.focusedScale,!0),null===(i=p.current)||void 0===i||i.setRotation(w.focusedRotation,!0),null===(s=p.current)||void 0===s||s.setCustom(1)):(null===(u=p.current)||void 0===u||u.setPosition(b6,!0),null===(c=p.current)||void 0===c||c.setScale(.001,!0),null===(h=p.current)||void 0===h||h.setRotation(b9,!0),null===(f=p.current)||void 0===f||f.setCustom(0))},[M,x,C,c,D,w.focusedScale,w.focusedRotation]),(0,eu.jsx)(_$,{ref:p,position:b6,scale:.001,rotation:b9,onCustom:L,children:(0,eu.jsx)(xH,{ref:f,transform:!A,fullscreen:A,zIndexRange:[35,0],children:(0,eu.jsx)("div",{onPointerDown:t=>t.stopPropagation(),style:{width:T.wrapper.width,height:T.wrapper.height,transform:A?"none":`scale(${r})`},children:(0,eu.jsx)(b3,{width:T.content.width,height:T.content.height,onClose:P,onMaximize:R,title:i(null==C?void 0:C.userData),extraButtons:null==u?void 0:u(null==C?void 0:C.userData),children:s(null==C?void 0:C.userData)})})})})};i("3262"),i("5446"),i("5549");let b7="http://172.30.1.1:59095/api",we=async t=>{try{let r=await fetch(`${b7}/farm-info?tankId=${t}`);return await r.json()}catch(t){return null}},wt=async(t,r)=>{try{let i=new URL(`${b7}/mortality`),s={tankCd:t,cycle:String(r)};i.search=new URLSearchParams(s).toString();let u=await fetch(i.toString());return await u.json()}catch(t){return[]}},wn=async(t,r)=>{try{let i=new URL(`${b7}/findDate`),s={tankCd:t,cycle:String(r)};i.search=new URLSearchParams(s).toString();let u=await fetch(i.toString());return await u.json()}catch(t){return[]}};var wr=i("967"),wi=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(wi||{});let wa=bj(function(t,r){var i;let{features:s=1,...u}=t,c={ref:r,"aria-hidden":(2&s)==2||(null!=(i=u["aria-hidden"])?i:void 0),hidden:(4&s)==4||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(4&s)==4&&(2&s)!=2&&{display:"none"}}};return bU()({ourProps:c,theirProps:u,slot:{},defaultTag:"span",name:"Hidden"})}),wo=(0,pI.createContext)(null);function ws(t){let[r,i]=(0,pI.useState)(null);return pI.createElement(wo.Provider,{value:{target:r}},t.children,pI.createElement(wa,{features:wi.Hidden,ref:i}))}function wl({children:t}){let r=E(wo);if(!r)return o.createElement(o.Fragment,null,t);let{target:i}=r;return i?g(o.createElement(o.Fragment,null,t),i):null}function wu({setForm:t,formId:r}){return m(()=>{if(r){let i=document.getElementById(r);i&&t(i)}},[t,r]),r?null:o.createElement(l,{features:d.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:r=>{if(!r)return;let i=r.closest("form");i&&t(i)}})}let wc=(0,pI.createContext)(void 0);function wh(){return(0,pI.useContext)(wc)}function wd({id:t,children:r}){return pI.createElement(wc.Provider,{value:t},r)}let wp=Symbol();function wf(...t){let r=(0,pI.useRef)(t);(0,pI.useEffect)(()=>{r.current=t},[t]);let i=bP(t=>{for(let i of r.current)null!=i&&("function"==typeof i?i(t):i.current=t)});return t.every(t=>null==t||(null==t?void 0:t[wp]))?void 0:i}let wg=(0,pI.createContext)(null);wg.displayName="DescriptionContext";Object.assign(bj(function(t,r){let i=(0,pI.useId)(),s=bk(),{id:u=`headlessui-description-${i}`,...c}=t,h=function t(){let r=(0,pI.useContext)(wg);if(null===r){let r=Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(r,t),r}return r}(),p=wf(r);bI(()=>h.register(u),[u,h.register]);let f=s||!1,v=(0,pI.useMemo)(()=>({...h.slot,disabled:f}),[h.slot,f]),y={ref:p,...h.props,id:u};return bU()({ourProps:y,theirProps:c,slot:v,defaultTag:"p",name:h.name||"Description"})}),{});let wm=(0,pI.createContext)(null);wm.displayName="LabelContext";function wv(t){var r,i,s;let u=null!=(i=null==(r=(0,pI.useContext)(wm))?void 0:r.value)?i:void 0;return(null!=(s=null==t?void 0:t.length)?s:0)>0?[u,...t].filter(Boolean).join(" "):u}Object.assign(bj(function(t,r){var i;let s=(0,pI.useId)(),u=function t(){let r=(0,pI.useContext)(wm);if(null===r){let r=Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(r,t),r}return r}(),c=wh(),h=bk(),{id:p=`headlessui-label-${s}`,htmlFor:f=null!=c?c:null==(i=u.props)?void 0:i.htmlFor,passive:v=!1,...y}=t,x=wf(r);bI(()=>u.register(p),[p,u.register]);let _=bP(t=>{let r=t.currentTarget;if(r instanceof HTMLLabelElement&&t.preventDefault(),u.props&&"onClick"in u.props&&"function"==typeof u.props.onClick&&u.props.onClick(t),r instanceof HTMLLabelElement){let t=document.getElementById(r.htmlFor);if(t){let r=t.getAttribute("disabled");if("true"===r||""===r)return;let i=t.getAttribute("aria-disabled");if("true"===i||""===i)return;(t instanceof HTMLInputElement&&("radio"===t.type||"checkbox"===t.type)||"radio"===t.role||"checkbox"===t.role||"switch"===t.role)&&t.click(),t.focus({preventScroll:!0})}}}),b=h||!1,w=(0,pI.useMemo)(()=>({...u.slot,disabled:b}),[u.slot,b]),S={ref:x,...u.props,id:p,htmlFor:f,onClick:_};return v&&("onClick"in S&&(delete S.htmlFor,delete S.onClick),"onClick"in y&&delete y.onClick),bU()({ourProps:S,theirProps:y,slot:w,defaultTag:f?"label":"div",name:u.name||"Label"})}),{});let wy=bj(function(t,r){let i=`headlessui-control-${(0,pI.useId)()}`,[s,u]=function({inherit:t=!1}={}){let r=wv(),[i,s]=(0,pI.useState)([]),u=t?[r,...i].filter(Boolean):i;return[u.length>0?u.join(" "):void 0,(0,pI.useMemo)(()=>function(t){let r=bP(t=>(s(r=>[...r,t]),()=>s(r=>{let i=r.slice(),s=i.indexOf(t);return -1!==s&&i.splice(s,1),i}))),i=(0,pI.useMemo)(()=>({register:r,slot:t.slot,name:t.name,props:t.props,value:t.value}),[r,t.slot,t.name,t.props,t.value]);return pI.createElement(wm.Provider,{value:i},t.children)},[s])]}(),[c,h]=function(){let[t,r]=(0,pI.useState)([]);return[t.length>0?t.join(" "):void 0,(0,pI.useMemo)(()=>function(t){let i=bP(t=>(r(r=>[...r,t]),()=>r(r=>{let i=r.slice(),s=i.indexOf(t);return -1!==s&&i.splice(s,1),i}))),s=(0,pI.useMemo)(()=>({register:i,slot:t.slot,name:t.name,props:t.props,value:t.value}),[i,t.slot,t.name,t.props,t.value]);return pI.createElement(wg.Provider,{value:s},t.children)},[r])]}(),p=bk(),{disabled:f=p||!1,...v}=t,y=(0,pI.useMemo)(()=>({disabled:f}),[f]),x=bU();return pI.createElement(bO,{value:f},pI.createElement(u,{value:s},pI.createElement(h,{value:c},pI.createElement(wd,{id:i},x({ourProps:{ref:r,disabled:f||void 0,"aria-disabled":f||void 0},theirProps:{...v,children:pI.createElement(ws,null,"function"==typeof v.children?v.children(y):v.children)},slot:y,defaultTag:"div",name:"Field"})))))}),w_=bj(function(t,r){var i,s;let u=(0,pI.useId)(),c=wh(),h=bk(),{id:p=c||`headlessui-select-${u}`,disabled:f=h||!1,invalid:v=!1,autoFocus:y=!1,...x}=t,_=wv(),b=null!=(s=null==(i=(0,pI.useContext)(wg))?void 0:i.value)?s:void 0,{isFocusVisible:w,focusProps:S}=bm({autoFocus:y}),{isHovered:M,hoverProps:A}=bw({isDisabled:f}),{pressed:C,pressProps:T}=bR({disabled:f}),I=bW({ref:r,id:p,"aria-labelledby":_,"aria-describedby":b,"aria-invalid":v?"":void 0,disabled:f||void 0,autoFocus:y},S,A,T),D=(0,pI.useMemo)(()=>({disabled:f,invalid:v,hover:M,focus:w,active:C,autofocus:y}),[f,v,M,w,C,y]);return bU()({ourProps:I,theirProps:x,slot:D,defaultTag:"select",name:"Select"})}),wb=b0("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ww=t=>{let{options:r,value:i,onChange:s}=t,[u,c]=(0,pI.useState)(i);(0,pI.useEffect)(()=>{c(i)},[i]);let h=(0,pI.useCallback)(t=>{c(t.target.value),s(t.target.value)},[s]);return(0,eu.jsx)("div",{className:"min-w-28",children:(0,eu.jsx)(wy,{children:(0,eu.jsxs)("div",{className:"relative",children:[(0,eu.jsx)(w_,{className:gj(`
              block w-full appearance-none rounded-lg border border-slate-300
              bg-slate-50 px-3 py-1.5 text-sm/6 text-neutral-700

              *:text-black

              data-[focus]:outline-2 data-[focus]:-outline-offset-2
              data-[focus]:outline-black/25

              focus:outline-none
            `),onChange:h,value:u,children:r.map(t=>(0,eu.jsx)("option",{value:t.value,children:t.name},t.value))}),(0,eu.jsx)(wb,{className:gj(`
              group pointer-events-none absolute right-2.5 top-2.5 size-4
              fill-black/60
            `),"aria-hidden":"true"})]})})})};function wS(t,r,i){return r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}i("1811"),i("4838"),i("3747"),i("7663");var wM=function(t){return t.TMP="TMP",t.SA="SA",t.DO="DO",t.PH="PH",t.ORP="ORP",t.mortality="mortality",t}({});class wA{}wS(wA,"colors",Object.freeze({TMP:"#2A4B8C",SA:"#91CC75",DO:"#73C0DE",PH:"#FAC858",ORP:"#EE6666",mortality:"#FF6666"})),wS(wA,"durationColors",Object.freeze(["#FF0000","#FF6666","#FFE5E5"])),wS(wA,"units",Object.freeze({TMP:"",SA:"PPT",DO:"mg/L",PH:"pH",ORP:"mv",mortality:""}));class wC{static formatTooltip(t){let r="<b>"+t[0].axisValue+"</b> <br>";return t.forEach(t=>{if(null!==t.data){let i=wA.units[t.seriesName]||"";if("boxplot"===t.seriesType&&null!=t.data[1])r+=`${t.marker} ${t.seriesName}: <br>
                              : ${t.data[1]} ${i}<br>
                             Q1: ${t.data[2]} ${i}<br>
                             : ${t.data[3]} ${i}<br>
                             Q3: ${t.data[4]} ${i}<br>
                              : ${t.data[5]} ${i}<br>`;else if("line"===t.seriesType){let s="mortality"===t.seriesName?"":t.seriesName,u="mortality"===t.seriesName?t.data:t.data.toFixed(2);r+=`${t.marker} ${s}: ${u} ${i}<br>`}else if("bar"===t.seriesType&&0!==t.data.value){let i=Math.floor(t.data.value/60),s=t.data.value%60;r+=`${t.marker} <b>(25)  </b>: <br/>  ${t.data.period}<br>  ${i} ${s<10?"0"+s:s}<br>`}}}),r}static createYAxis(t,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4?arguments[4]:void 0;return{type:"value",name:t,position:r,offset:i,alignTicks:!0,axisLine:{show:!0,lineStyle:{color:u}},axisLabel:{formatter:r=>`${"mortality"!==t?r.toFixed(2):Math.floor(r)}${wA.units[t]||""}`},min:"mortality"===t?"dataMin":t=>t.min-1,gridIndex:s}}static createYAxisForDuration(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{type:"value",name:"duration",position:t,offset:r,alignTicks:!0,axisLine:{show:!0,lineStyle:{color:wA.colors.TMP}},axisLabel:{formatter:t=>{let r=Math.floor(t/60),i=t%60;return`${r}:${i<10?"0"+i:i}`}},min:t=>t.min-1,gridIndex:i}}static createSeries(t,r,i,s){let u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h={name:r,type:t,yAxisIndex:s,data:i,smooth:c,itemStyle:u,lineStyle:{}};return"boxplot"===t?h.itemStyle={color:"transparent",borderColor:u.color}:h.lineStyle={opacity:.5},h}}let wT=(t,r)=>{let i={farmCd:t.farmCd,salValues:[],doValues:[],phValues:[],mortalityValues:[],durationValues:[],orpValues:[],values:[],date:[]},s="65AF1"===t.farmCd;return r.forEach(t=>{if(i.salValues.push(t.saData),i.doValues.push(t.doData),i.phValues.push(t.phData),i.mortalityValues.push(t.fishDeathCnt),t.duration){let r=t.duration.periodStarts.map((r,i)=>`${r} ~ ${t.duration.periodEnds[i]}`);i.durationValues.push({...t.duration,periods:r})}s&&i.orpValues.push(t.orpData),i.values.push([t.tmp.tmpMinValue,t.tmp.tmpQ1Value,t.tmp.tmpQ2Value,t.tmp.tmpQ3Value,t.tmp.tmpPeakValue]),i.date.push(`${t.collectDate} ${null==t.daysPassedPd?"":"("+t.daysPassedPd+")"}`)}),i},wE=t=>{let r=["TMP","DO","SA","PH","mortality"],i=[wC.createYAxis(wM.TMP,"left",0,0,wA.colors.TMP),wC.createYAxisForDuration("left",0,1),wC.createYAxis(wM.DO,"right",55,0,wA.colors.DO),wC.createYAxis(wM.SA,"right",130,0,wA.colors.SA),wC.createYAxis(wM.PH,"right",0,0,wA.colors.PH),wC.createYAxis(wM.mortality,"left",70,0,wA.colors.mortality)],s=[wC.createSeries("boxplot",wM.TMP,t.values,0,{color:wA.colors.TMP}),wC.createSeries("line",wM.DO,t.doValues,2,{color:wA.colors.DO}),wC.createSeries("line",wM.SA,t.salValues,3,{color:wA.colors.SA}),wC.createSeries("line",wM.PH,t.phValues,4,{color:wA.colors.PH}),wC.createSeries("line",wM.mortality,t.mortalityValues,5,{color:wA.colors.mortality}),...function(t){return Array.from({length:Math.max(...t.map(t=>t.durations.length))},(r,i)=>{var s;return{type:"bar",name:"duration"+i,data:(s=i,t.map(t=>({duration:void 0!==t.durations[s]?t.durations[s]:0,period:void 0!==t.periods[s]?t.periods[s]:""}))).map(t=>({value:t.duration,period:t.period})),xAxisIndex:1,yAxisIndex:1,itemStyle:{color:wA.durationColors[i]},stack:"stacked"}})}(t.durationValues)];return t.orpValues.length&&(r.push("ORP"),i.push({type:"value",name:"ORP",position:"left",offset:140,alignTicks:!0,axisLine:{show:!0,lineStyle:{color:wA.colors.mortality}},axisLabel:{formatter:t=>`${t.toFixed(2)}mv`},min:t=>t.min-1}),s.push({name:"ORP",type:"line",yAxisIndex:6,data:t.orpValues,smooth:!1,lineStyle:{opacity:.5},itemStyle:{color:wA.colors.mortality}})),{tooltip:{trigger:"axis",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},formatter:function(t){return wC.formatTooltip(t)}},legend:{bottom:10,left:"center",data:r},grid:[{left:"10%",right:"8%",height:"50%",containLabel:!0},{left:"10%",right:"8%",top:"63%",height:"16%",containLabel:!0}],xAxis:[{type:"category",data:t.date,gridIndex:0,boundaryGap:!0,axisLine:{onZero:!1},splitLine:{show:!1},axisPointer:{z:100}},{type:"category",gridIndex:1,data:t.date,boundaryGap:!0,axisLabel:{show:!1}}],yAxis:i,graphic:{type:"text",left:"10%",top:"82%",style:{text:"*      2  25    .",textAlign:"center",fill:"#333",font:"bold 12px Arial"}},dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:80,end:100}],series:s}};var wI=function(t,r){return(wI=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])})(t,r)};function wD(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}wI(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}var wP=function(){return(wP=Object.assign||function(t){for(var r,i=1,s=arguments.length;i<s;i++)for(var u in r=arguments[i],r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u]);return t}).apply(this,arguments)};function wR(t,r,i,s){return new(i||(i=Promise))(function(u,c){function h(t){try{f(s.next(t))}catch(t){c(t)}}function p(t){try{f(s.throw(t))}catch(t){c(t)}}function f(t){var r;t.done?u(t.value):((r=t.value)instanceof i?r:new i(function(t){t(r)})).then(h,p)}f((s=s.apply(t,r||[])).next())})}function wL(t,r){var i,s,u,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},h=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return h.next=p(0),h.throw=p(1),h.return=p(2),"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h;function p(p){return function(f){return function(p){if(i)throw TypeError("Generator is already executing.");for(;h&&(h=0,p[0]&&(c=0)),c;)try{if(i=1,s&&(u=2&p[0]?s.return:p[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,p[1])).done)return u;switch(s=0,u&&(p=[2&p[0],u.value]),p[0]){case 0:case 1:u=p;break;case 4:return c.label++,{value:p[1],done:!1};case 5:c.label++,s=p[1],p=[0];continue;case 7:p=c.ops.pop(),c.trys.pop();continue;default:if(!(u=(u=c.trys).length>0&&u[u.length-1])&&(6===p[0]||2===p[0])){c=0;continue}if(3===p[0]&&(!u||p[1]>u[0]&&p[1]<u[3])){c.label=p[1];break}if(6===p[0]&&c.label<u[1]){c.label=u[1],u=p;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(p);break}u[2]&&c.ops.pop(),c.trys.pop();continue}p=r.call(t,c)}catch(t){p=[6,t],s=0}finally{i=u=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([p,f])}}}var wk=Object.create?function(t,r,i,s){void 0===s&&(s=i);var u=Object.getOwnPropertyDescriptor(r,i);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[i]}}),Object.defineProperty(t,s,u)}:function(t,r,i,s){void 0===s&&(s=i),t[s]=r[i]};function wO(t){var r="function"==typeof Symbol&&Symbol.iterator,i=r&&t[r],s=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function wB(t){return this instanceof wB?(this.v=t,this):new wB(t)}var wN=Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r},wF=function(t){return(wF=Object.getOwnPropertyNames||function(t){var r=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[r.length]=i);return r})(t)},wz=function(t,r){return(wz=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])})(t,r)};function wU(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}wz(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}var wH=Object.create?function(t,r,i,s){void 0===s&&(s=i),Object.defineProperty(t,s,{enumerable:!0,get:function(){return r[i]}})}:function(t,r,i,s){void 0===s&&(s=i),t[s]=r[i]};function wG(t){var r="function"==typeof Symbol&&Symbol.iterator,i=r&&t[r],s=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function wV(t){return this instanceof wV?(this.v=t,this):new wV(t)}var wW=Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r},wj=function(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1},wX=new function(){this.browser=new wj,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow="undefined"!=typeof window};"object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?(wX.wxa=!0,wX.touchEventsSupported=!0):"undefined"==typeof document&&"undefined"!=typeof self?wX.worker=!0:"undefined"==typeof navigator||0===navigator.userAgent.indexOf("Node.js")?(wX.node=!0,wX.svgSupported=!0):function(t,r){var i=r.browser,s=t.match(/Firefox\/([\d.]+)/),u=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),c=t.match(/Edge?\/([\d.]+)/),h=/micromessenger/i.test(t);s&&(i.firefox=!0,i.version=s[1]),u&&(i.ie=!0,i.version=u[1]),c&&(i.edge=!0,i.version=c[1],i.newEdge=+c[1].split(".")[0]>18),h&&(i.weChat=!0),r.svgSupported="undefined"!=typeof SVGRect,r.touchEventsSupported="ontouchstart"in window&&!i.ie&&!i.edge,r.pointerEventsSupported="onpointerdown"in window&&(i.edge||i.ie&&+i.version>=11),r.domSupported="undefined"!=typeof document;var p=document.documentElement.style;r.transform3dSupported=(i.ie&&"transition"in p||i.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in p)&&!("OTransition"in p),r.transformSupported=r.transform3dSupported||i.ie&&+i.version>=9}(navigator.userAgent,wX);let wY=wX;var w$="sans-serif",wJ="12px "+w$,wZ=function(t){var r={};if("undefined"==typeof JSON)return r;for(var i=0;i<t.length;i++){var s=String.fromCharCode(i+32),u=(t.charCodeAt(i)-20)/100;r[s]=u}return r}("007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N"),wK={createCanvas:function(){return"undefined"!=typeof document&&document.createElement("canvas")},measureText:function(){var t,r;return function(i,s){if(!t){var u=wK.createCanvas();t=u&&u.getContext("2d")}if(t)return r!==s&&(r=t.font=s||wJ),t.measureText(i);i=i||"",s=s||wJ;var c=/((?:\d+)?\.?\d*)px/.exec(s),h=c&&+c[1]||12,p=0;if(s.indexOf("mono")>=0)p=h*i.length;else for(var f=0;f<i.length;f++){var v=wZ[i[f]];p+=null==v?h:v*h}return{width:p}}}(),loadImage:function(t,r,i){var s=new Image;return s.onload=r,s.onerror=i,s.src=t,s}};function wq(t){for(var r in wK)t[r]&&(wK[r]=t[r])}var wQ=Sg(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(t,r){return t["[object "+r+"]"]=!0,t},{}),w0=Sg(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(t,r){return t["[object "+r+"Array]"]=!0,t},{}),w1=Object.prototype.toString,w2=Array.prototype,w3=w2.forEach,w5=w2.filter,w4=w2.slice,w6=w2.map,w9=(function(){}).constructor,w8=w9?w9.prototype:null,w7="__proto__",Se=2311;function St(){return Se++}function Sn(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r]}function Sr(t){if(null==t||"object"!=typeof t)return t;var r=t,i=w1.call(t);if("[object Array]"===i){if(!function(t){return t[SH]}(t)){r=[];for(var s=0,u=t.length;s<u;s++)r[s]=Sr(t[s])}}else if(w0[i]){if(!function(t){return t[SH]}(t)){var c=t.constructor;if(c.from)r=c.from(t);else{r=new c(t.length);for(var s=0,u=t.length;s<u;s++)r[s]=t[s]}}}else if(!wQ[i]&&!function(t){return t[SH]}(t)&&!SI(t))for(var h in r={},t)t.hasOwnProperty(h)&&h!==w7&&(r[h]=Sr(t[h]));return r}function Si(t,r,i){if(!SC(r)||!SC(t))return i?Sr(r):t;for(var s in r)if(r.hasOwnProperty(s)&&s!==w7){var u=t[s],c=r[s];!(SC(c)&&SC(u))||Sb(c)||Sb(u)||SI(c)||SI(u)||ST(c)||ST(u)||function(t){return t[SH]}(c)||function(t){return t[SH]}(u)?(i||!(s in t))&&(t[s]=Sr(r[s])):Si(u,c,i)}return t}function Sa(t,r){for(var i=t[0],s=1,u=t.length;s<u;s++)i=Si(i,t[s],r);return i}function So(t,r){if(Object.assign)Object.assign(t,r);else for(var i in r)r.hasOwnProperty(i)&&i!==w7&&(t[i]=r[i]);return t}function Ss(t,r,i){for(var s=Sy(r),u=0;u<s.length;u++){var c=s[u];(i?null!=r[c]:null==t[c])&&(t[c]=r[c])}return t}var Sl=wK.createCanvas;function Su(t,r){if(t){if(t.indexOf)return t.indexOf(r);for(var i=0,s=t.length;i<s;i++)if(t[i]===r)return i}return -1}function Sc(t,r){var i=t.prototype;function s(){}for(var u in s.prototype=r.prototype,t.prototype=new s,i)i.hasOwnProperty(u)&&(t.prototype[u]=i[u]);t.prototype.constructor=t,t.superClass=r}function Sh(t,r,i){if(t="prototype"in t?t.prototype:t,r="prototype"in r?r.prototype:r,Object.getOwnPropertyNames){for(var s=Object.getOwnPropertyNames(r),u=0;u<s.length;u++){var c=s[u];"constructor"!==c&&(i?null!=r[c]:null==t[c])&&(t[c]=r[c])}}else Ss(t,r,i)}function Sd(t){return!!t&&"string"!=typeof t&&"number"==typeof t.length}function Sp(t,r,i){if(!!(t&&r))if(t.forEach&&t.forEach===w3)t.forEach(r,i);else if(t.length===+t.length)for(var s=0,u=t.length;s<u;s++)r.call(i,t[s],s,t);else for(var c in t)t.hasOwnProperty(c)&&r.call(i,t[c],c,t)}function Sf(t,r,i){if(!t)return[];if(!r)return SN(t);if(t.map&&t.map===w6)return t.map(r,i);for(var s=[],u=0,c=t.length;u<c;u++)s.push(r.call(i,t[u],u,t));return s}function Sg(t,r,i,s){if(!!(t&&r)){for(var u=0,c=t.length;u<c;u++)i=r.call(s,i,t[u],u,t);return i}}function Sm(t,r,i){if(!t)return[];if(!r)return SN(t);if(t.filter&&t.filter===w5)return t.filter(r,i);for(var s=[],u=0,c=t.length;u<c;u++)r.call(i,t[u],u,t)&&s.push(t[u]);return s}function Sv(t,r,i){if(!!(t&&r)){for(var s=0,u=t.length;s<u;s++)if(r.call(i,t[s],s,t))return t[s]}}function Sy(t){if(!t)return[];if(Object.keys)return Object.keys(t);var r=[];for(var i in t)t.hasOwnProperty(i)&&r.push(i);return r}var Sx=w8&&Sw(w8.bind)?w8.call.bind(w8.bind):function(t,r){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];return function(){return t.apply(r,i.concat(w4.call(arguments)))}};function S_(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){return t.apply(this,r.concat(w4.call(arguments)))}}function Sb(t){return Array.isArray?Array.isArray(t):"[object Array]"===w1.call(t)}function Sw(t){return"function"==typeof t}function SS(t){return"string"==typeof t}function SM(t){return"[object String]"===w1.call(t)}function SA(t){return"number"==typeof t}function SC(t){var r=typeof t;return"function"===r||!!t&&"object"===r}function ST(t){return!!wQ[w1.call(t)]}function SE(t){return!!w0[w1.call(t)]}function SI(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}function SD(t){return null!=t.colorStops}function SP(t){return null!=t.image}function SR(t){return"[object RegExp]"===w1.call(t)}function SL(t){return t!=t}function Sk(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var i=0,s=t.length;i<s;i++)if(null!=t[i])return t[i]}function SO(t,r){return null!=t?t:r}function SB(t,r,i){return null!=t?t:null!=r?r:i}function SN(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return w4.apply(t,r)}function SF(t){if("number"==typeof t)return[t,t,t,t];var r=t.length;return 2===r?[t[0],t[1],t[0],t[1]]:3===r?[t[0],t[1],t[2],t[1]]:t}function Sz(t,r){if(!t)throw Error(r)}function SU(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var SH="__ec_primitive__";function SG(t){t[SH]=!0}function SV(t){return t[SH]}var SW=function(){function t(){this.data={}}return t.prototype.delete=function(t){var r=this.has(t);return r&&delete this.data[t],r},t.prototype.has=function(t){return this.data.hasOwnProperty(t)},t.prototype.get=function(t){return this.data[t]},t.prototype.set=function(t,r){return this.data[t]=r,this},t.prototype.keys=function(){return Sy(this.data)},t.prototype.forEach=function(t){var r=this.data;for(var i in r)r.hasOwnProperty(i)&&t(r[i],i)},t}(),Sj="function"==typeof Map,SX=function(){function t(r){var i=Sb(r);this.data=Sj?new Map:new SW;var s=this;function u(t,r){i?s.set(t,r):s.set(r,t)}r instanceof t?r.each(u):r&&Sp(r,u)}return t.prototype.hasKey=function(t){return this.data.has(t)},t.prototype.get=function(t){return this.data.get(t)},t.prototype.set=function(t,r){return this.data.set(t,r),r},t.prototype.each=function(t,r){this.data.forEach(function(i,s){t.call(r,i,s)})},t.prototype.keys=function(){var t=this.data.keys();return Sj?Array.from(t):t},t.prototype.removeKey=function(t){this.data.delete(t)},t}();function SY(t){return new SX(t)}function S$(t,r){for(var i=new t.constructor(t.length+r.length),s=0;s<t.length;s++)i[s]=t[s];for(var u=t.length,s=0;s<r.length;s++)i[s+u]=r[s];return i}function SJ(t,r){var i;if(Object.create)i=Object.create(t);else{var s=function(){};s.prototype=t,i=new s}return r&&So(i,r),i}function SZ(t){var r=t.style;r.webkitUserSelect="none",r.userSelect="none",r.webkitTapHighlightColor="rgba(0,0,0,0)",r["-webkit-touch-callout"]="none"}function SK(t,r){return t.hasOwnProperty(r)}function Sq(){}var SQ=180/Math.PI;function S0(t,r){return null==t&&(t=0),null==r&&(r=0),[t,r]}function S1(t,r){return t[0]=r[0],t[1]=r[1],t}function S2(t){return[t[0],t[1]]}function S3(t,r,i){return t[0]=r,t[1]=i,t}function S5(t,r,i){return t[0]=r[0]+i[0],t[1]=r[1]+i[1],t}function S4(t,r,i,s){return t[0]=r[0]+i[0]*s,t[1]=r[1]+i[1]*s,t}function S6(t,r,i){return t[0]=r[0]-i[0],t[1]=r[1]-i[1],t}function S9(t){return Math.sqrt(S7(t))}var S8=S9;function S7(t){return t[0]*t[0]+t[1]*t[1]}var Me=S7;function Mt(t,r,i){return t[0]=r[0]*i[0],t[1]=r[1]*i[1],t}function Mn(t,r,i){return t[0]=r[0]/i[0],t[1]=r[1]/i[1],t}function Mr(t,r){return t[0]*r[0]+t[1]*r[1]}function Mi(t,r,i){return t[0]=r[0]*i,t[1]=r[1]*i,t}function Ma(t,r){var i=S9(r);return 0===i?(t[0]=0,t[1]=0):(t[0]=r[0]/i,t[1]=r[1]/i),t}function Mo(t,r){return Math.sqrt((t[0]-r[0])*(t[0]-r[0])+(t[1]-r[1])*(t[1]-r[1]))}var Ms=Mo;function Ml(t,r){return(t[0]-r[0])*(t[0]-r[0])+(t[1]-r[1])*(t[1]-r[1])}var Mu=Ml;function Mc(t,r){return t[0]=-r[0],t[1]=-r[1],t}function Mh(t,r,i,s){return t[0]=r[0]+s*(i[0]-r[0]),t[1]=r[1]+s*(i[1]-r[1]),t}function Md(t,r,i){var s=r[0],u=r[1];return t[0]=i[0]*s+i[2]*u+i[4],t[1]=i[1]*s+i[3]*u+i[5],t}function Mp(t,r,i){return t[0]=Math.min(r[0],i[0]),t[1]=Math.min(r[1],i[1]),t}function Mf(t,r,i){return t[0]=Math.max(r[0],i[0]),t[1]=Math.max(r[1],i[1]),t}var Mg=function(t,r){this.target=t,this.topTarget=r&&r.topTarget},Mm=function(){function t(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Mg(r,t),"dragstart",t.event))},t.prototype._drag=function(t){var r=this._draggingTarget;if(r){var i=t.offsetX,s=t.offsetY,u=i-this._x,c=s-this._y;this._x=i,this._y=s,r.drift(u,c,t),this.handler.dispatchToElement(new Mg(r,t),"drag",t.event);var h=this.handler.findHover(i,s,r).target,p=this._dropTarget;this._dropTarget=h,r!==h&&(p&&h!==p&&this.handler.dispatchToElement(new Mg(p,t),"dragleave",t.event),h&&h!==p&&this.handler.dispatchToElement(new Mg(h,t),"dragenter",t.event))}},t.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new Mg(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Mg(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},t}(),Mv=function(){function t(t){t&&(this._$eventProcessor=t)}return t.prototype.on=function(t,r,i,s){!this._$handlers&&(this._$handlers={});var u=this._$handlers;if("function"==typeof r&&(s=i,i=r,r=null),!i||!t)return this;var c=this._$eventProcessor;null!=r&&c&&c.normalizeQuery&&(r=c.normalizeQuery(r)),!u[t]&&(u[t]=[]);for(var h=0;h<u[t].length;h++)if(u[t][h].h===i)return this;var p={h:i,query:r,ctx:s||this,callAtLast:i.zrEventfulCallAtLast},f=u[t].length-1,v=u[t][f];return v&&v.callAtLast?u[t].splice(f,0,p):u[t].push(p),this},t.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},t.prototype.off=function(t,r){var i=this._$handlers;if(!i)return this;if(!t)return this._$handlers={},this;if(r){if(i[t]){for(var s=[],u=0,c=i[t].length;u<c;u++)i[t][u].h!==r&&s.push(i[t][u]);i[t]=s}i[t]&&0===i[t].length&&delete i[t]}else delete i[t];return this},t.prototype.trigger=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(!this._$handlers)return this;var s=this._$handlers[t],u=this._$eventProcessor;if(s){for(var c=r.length,h=s.length,p=0;p<h;p++){var f=s[p];if(!u||!u.filter||null==f.query||!!u.filter(t,f.query))switch(c){case 0:f.h.call(f.ctx);break;case 1:f.h.call(f.ctx,r[0]);break;case 2:f.h.call(f.ctx,r[0],r[1]);break;default:f.h.apply(f.ctx,r)}}}return u&&u.afterTrigger&&u.afterTrigger(t),this},t.prototype.triggerWithContext=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(!this._$handlers)return this;var s=this._$handlers[t],u=this._$eventProcessor;if(s){for(var c=r.length,h=r[c-1],p=s.length,f=0;f<p;f++){var v=s[f];if(!u||!u.filter||null==v.query||!!u.filter(t,v.query))switch(c){case 0:v.h.call(h);break;case 1:v.h.call(h,r[0]);break;case 2:v.h.call(h,r[0],r[1]);break;default:v.h.apply(h,r.slice(1,c-1))}}}return u&&u.afterTrigger&&u.afterTrigger(t),this},t}(),My=Math.log(2);function Mx(t,r,i,s,u,c){var h=s+"-"+u,p=t.length;if(c.hasOwnProperty(h))return c[h];if(1===r){var f=Math.round(Math.log((1<<p)-1&~u)/My);return t[i][f]}for(var v=s|1<<i,y=i+1;s&1<<y;)y++;for(var x=0,_=0,b=0;_<p;_++){var w=1<<_;!(w&u)&&(x+=(b%2?-1:1)*t[i][_]*Mx(t,r-1,y,v,u|w,c),b++)}return c[h]=x,x}function M_(t,r){var i=[[t[0],t[1],1,0,0,0,-r[0]*t[0],-r[0]*t[1]],[0,0,0,t[0],t[1],1,-r[1]*t[0],-r[1]*t[1]],[t[2],t[3],1,0,0,0,-r[2]*t[2],-r[2]*t[3]],[0,0,0,t[2],t[3],1,-r[3]*t[2],-r[3]*t[3]],[t[4],t[5],1,0,0,0,-r[4]*t[4],-r[4]*t[5]],[0,0,0,t[4],t[5],1,-r[5]*t[4],-r[5]*t[5]],[t[6],t[7],1,0,0,0,-r[6]*t[6],-r[6]*t[7]],[0,0,0,t[6],t[7],1,-r[7]*t[6],-r[7]*t[7]]],s={},u=Mx(i,8,0,0,0,s);if(0!==u){for(var c=[],h=0;h<8;h++)for(var p=0;p<8;p++)null==c[p]&&(c[p]=0),c[p]+=((h+p)%2?-1:1)*Mx(i,7,0===h?1:0,1<<h,1<<p,s)/u*r[h];return function(t,r,i){var s=r*c[6]+i*c[7]+1;t[0]=(r*c[0]+i*c[1]+c[2])/s,t[1]=(r*c[3]+i*c[4]+c[5])/s}}}var Mb="___zrEVENTSAVED",Mw=[];function MS(t,r,i,s,u){if(r.getBoundingClientRect&&wY.domSupported&&!MM(r)){var c=r[Mb]||(r[Mb]={}),h=function(t,r,i){for(var s=i?"invTrans":"trans",u=r[s],c=r.srcCoords,h=[],p=[],f=!0,v=0;v<4;v++){var y=t[v].getBoundingClientRect(),x=2*v,_=y.left,b=y.top;h.push(_,b),f=f&&c&&_===c[x]&&b===c[x+1],p.push(t[v].offsetLeft,t[v].offsetTop)}return f&&u?u:(r.srcCoords=h,r[s]=i?M_(p,h):M_(h,p))}(function(t,r){var i=r.markers;if(i)return i;i=r.markers=[];for(var s=["left","right"],u=["top","bottom"],c=0;c<4;c++){var h=document.createElement("div"),p=h.style,f=c%2,v=(c>>1)%2;p.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",s[f]+":0",u[v]+":0",s[1-f]+":auto",u[1-v]+":auto",""].join("!important;"),t.appendChild(h),i.push(h)}return i}(r,c),c,u);if(h)return h(t,i,s),!0}return!1}function MM(t){return"CANVAS"===t.nodeName.toUpperCase()}var MA=/([&<>"'])/g,MC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function MT(t){return null==t?"":(t+"").replace(MA,function(t,r){return MC[r]})}var ME=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,MI=[],MD=wY.browser.firefox&&39>+wY.browser.version.split(".")[0];function MP(t,r,i,s){return i=i||{},s?MR(t,r,i):MD&&null!=r.layerX&&r.layerX!==r.offsetX?(i.zrX=r.layerX,i.zrY=r.layerY):null!=r.offsetX?(i.zrX=r.offsetX,i.zrY=r.offsetY):MR(t,r,i),i}function MR(t,r,i){if(wY.domSupported&&t.getBoundingClientRect){var s=r.clientX,u=r.clientY;if(MM(t)){var c=t.getBoundingClientRect();i.zrX=s-c.left,i.zrY=u-c.top;return}if(MS(MI,t,s,u)){i.zrX=MI[0],i.zrY=MI[1];return}}i.zrX=i.zrY=0}function ML(t){return t||window.event}function Mk(t,r,i){if(null!=(r=ML(r)).zrX)return r;var s=r.type;if(s&&s.indexOf("touch")>=0){var u="touchend"!==s?r.targetTouches[0]:r.changedTouches[0];u&&MP(t,u,r,i)}else{MP(t,r,r,i);var c=function(t){var r=t.wheelDelta;if(r)return r;var i=t.deltaX,s=t.deltaY;if(null==i||null==s)return r;var u=0!==s?Math.abs(s):Math.abs(i);return 3*u*(s>0?-1:s<0?1:i>0?-1:1)}(r);r.zrDelta=c?c/120:-(r.detail||0)/3}var h=r.button;return null==r.which&&void 0!==h&&ME.test(r.type)&&(r.which=1&h?1:2&h?3:4&h?2:0),r}function MO(t,r,i,s){t.addEventListener(r,i,s)}var MB=function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0};function MN(t){return 2===t.which||3===t.which}var MF=function(){function t(){this._track=[]}return t.prototype.recognize=function(t,r,i){return this._doTrack(t,r,i),this._recognize(t)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(t,r,i){var s=t.touches;if(!!s){for(var u={points:[],touches:[],target:r,event:t},c=0,h=s.length;c<h;c++){var p=s[c],f=MP(i,p,{});u.points.push([f.zrX,f.zrY]),u.touches.push(p)}this._track.push(u)}},t.prototype._recognize=function(t){for(var r in MU)if(MU.hasOwnProperty(r)){var i=MU[r](this._track,t);if(i)return i}},t}();function Mz(t){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1];return Math.sqrt(r*r+i*i)}var MU={pinch:function(t,r){var i=t.length;if(!!i){var s=(t[i-1]||{}).points,u=(t[i-2]||{}).points||s;if(u&&u.length>1&&s&&s.length>1){var c,h=Mz(s)/Mz(u);isFinite(h)||(h=1),r.pinchScale=h;var p=[((c=s)[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2];return r.pinchX=p[0],r.pinchY=p[1],{type:"pinch",target:t[0].target,event:r}}}}};function MH(){return[1,0,0,1,0,0]}function MG(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function MV(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t}function MW(t,r,i){var s=r[0]*i[0]+r[2]*i[1],u=r[1]*i[0]+r[3]*i[1],c=r[0]*i[2]+r[2]*i[3],h=r[1]*i[2]+r[3]*i[3],p=r[0]*i[4]+r[2]*i[5]+r[4],f=r[1]*i[4]+r[3]*i[5]+r[5];return t[0]=s,t[1]=u,t[2]=c,t[3]=h,t[4]=p,t[5]=f,t}function Mj(t,r,i){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4]+i[0],t[5]=r[5]+i[1],t}function MX(t,r,i,s){void 0===s&&(s=[0,0]);var u=r[0],c=r[2],h=r[4],p=r[1],f=r[3],v=r[5],y=Math.sin(i),x=Math.cos(i);return t[0]=u*x+p*y,t[1]=-u*y+p*x,t[2]=c*x+f*y,t[3]=-c*y+x*f,t[4]=x*(h-s[0])+y*(v-s[1])+s[0],t[5]=x*(v-s[1])-y*(h-s[0])+s[1],t}function MY(t,r,i){var s=i[0],u=i[1];return t[0]=r[0]*s,t[1]=r[1]*u,t[2]=r[2]*s,t[3]=r[3]*u,t[4]=r[4]*s,t[5]=r[5]*u,t}function M$(t,r){var i=r[0],s=r[2],u=r[4],c=r[1],h=r[3],p=r[5],f=i*h-c*s;return f?(f=1/f,t[0]=h*f,t[1]=-c*f,t[2]=-s*f,t[3]=i*f,t[4]=(s*p-h*u)*f,t[5]=(c*u-i*p)*f,t):null}function MJ(t){var r=MH();return MV(r,t),r}let MZ=function(){function t(t,r){this.x=t||0,this.y=r||0}return t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(t,r){return this.x=t,this.y=r,this},t.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.scale=function(t){this.x*=t,this.y*=t},t.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},t.prototype.distance=function(t){var r=this.x-t.x,i=this.y-t.y;return Math.sqrt(r*r+i*i)},t.prototype.distanceSquare=function(t){var r=this.x-t.x,i=this.y-t.y;return r*r+i*i},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(t){if(!!t){var r=this.x,i=this.y;return this.x=t[0]*r+t[2]*i+t[4],this.y=t[1]*r+t[3]*i+t[5],this}},t.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},t.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},t.set=function(t,r,i){t.x=r,t.y=i},t.copy=function(t,r){t.x=r.x,t.y=r.y},t.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.lenSquare=function(t){return t.x*t.x+t.y*t.y},t.dot=function(t,r){return t.x*r.x+t.y*r.y},t.add=function(t,r,i){t.x=r.x+i.x,t.y=r.y+i.y},t.sub=function(t,r,i){t.x=r.x-i.x,t.y=r.y-i.y},t.scale=function(t,r,i){t.x=r.x*i,t.y=r.y*i},t.scaleAndAdd=function(t,r,i,s){t.x=r.x+i.x*s,t.y=r.y+i.y*s},t.lerp=function(t,r,i,s){var u=1-s;t.x=u*r.x+s*i.x,t.y=u*r.y+s*i.y},t}();var MK=Math.min,Mq=Math.max,MQ=new MZ,M0=new MZ,M1=new MZ,M2=new MZ,M3=new MZ,M5=new MZ;let M4=function(){function t(t,r,i,s){i<0&&(t+=i,i=-i),s<0&&(r+=s,s=-s),this.x=t,this.y=r,this.width=i,this.height=s}return t.prototype.union=function(t){var r=MK(t.x,this.x),i=MK(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Mq(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=Mq(t.y+t.height,this.y+this.height)-i:this.height=t.height,this.x=r,this.y=i},t.prototype.applyTransform=function(r){t.applyTransform(this,this,r)},t.prototype.calculateTransform=function(t){var r=t.width/this.width,i=t.height/this.height,s=MH();return Mj(s,s,[-this.x,-this.y]),MY(s,s,[r,i]),Mj(s,s,[t.x,t.y]),s},t.prototype.intersect=function(r,i){if(!r)return!1;!(r instanceof t)&&(r=t.create(r));var s=this.x,u=this.x+this.width,c=this.y,h=this.y+this.height,p=r.x,f=r.x+r.width,v=r.y,y=r.y+r.height,x=!(u<p||f<s||h<v||y<c);if(i){var _=1/0,b=0,w=Math.abs(u-p),S=Math.abs(f-s),M=Math.abs(h-v),A=Math.abs(y-c),C=Math.min(w,S),T=Math.min(M,A);u<p||f<s?C>b&&(b=C,w<S?MZ.set(M5,-w,0):MZ.set(M5,S,0)):C<_&&(_=C,w<S?MZ.set(M3,w,0):MZ.set(M3,-S,0)),h<v||y<c?T>b&&(b=T,M<A?MZ.set(M5,0,-M):MZ.set(M5,0,A)):C<_&&(_=C,M<A?MZ.set(M3,0,M):MZ.set(M3,0,-A))}return i&&MZ.copy(i,x?M3:M5),x},t.prototype.contain=function(t,r){return t>=this.x&&t<=this.x+this.width&&r>=this.y&&r<=this.y+this.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(r){t.copy(this,r)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return 0===this.width||0===this.height},t.create=function(r){return new t(r.x,r.y,r.width,r.height)},t.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},t.applyTransform=function(r,i,s){if(!s){r!==i&&t.copy(r,i);return}if(s[1]<1e-5&&s[1]>-1e-5&&s[2]<1e-5&&s[2]>-1e-5){var u=s[0],c=s[3],h=s[4],p=s[5];r.x=i.x*u+h,r.y=i.y*c+p,r.width=i.width*u,r.height=i.height*c,r.width<0&&(r.x+=r.width,r.width=-r.width),r.height<0&&(r.y+=r.height,r.height=-r.height);return}MQ.x=M1.x=i.x,MQ.y=M2.y=i.y,M0.x=M2.x=i.x+i.width,M0.y=M1.y=i.y+i.height,MQ.transform(s),M2.transform(s),M0.transform(s),M1.transform(s),r.x=MK(MQ.x,M0.x,M1.x,M2.x),r.y=MK(MQ.y,M0.y,M1.y,M2.y);var f=Mq(MQ.x,M0.x,M1.x,M2.x),v=Mq(MQ.y,M0.y,M1.y,M2.y);r.width=f-r.x,r.height=v-r.y},t}();var M6="silent";function M9(){MB(this.event)}var M8=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.handler=null,r}return wU(r,t),r.prototype.dispose=function(){},r.prototype.setCursor=function(){},r}(Mv),M7=function(t,r){this.x=t,this.y=r},Ae=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],At=new M4(0,0,0,0),An=function(t){function r(r,i,s,u,c){var h=t.call(this)||this;return h._hovered=new M7(0,0),h.storage=r,h.painter=i,h.painterRoot=u,h._pointerSize=c,s=s||new M8,h.proxy=null,h.setHandlerProxy(s),h._draggingMgr=new Mm(h),h}return wU(r,t),r.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(Sp(Ae,function(r){t.on&&t.on(r,this[r],this)},this),t.handler=this),this.proxy=t},r.prototype.mousemove=function(t){var r=t.zrX,i=t.zrY,s=Ai(this,r,i),u=this._hovered,c=u.target;c&&!c.__zr&&(c=(u=this.findHover(u.x,u.y)).target);var h=this._hovered=s?new M7(r,i):this.findHover(r,i),p=h.target,f=this.proxy;f.setCursor&&f.setCursor(p?p.cursor:"default"),c&&p!==c&&this.dispatchToElement(u,"mouseout",t),this.dispatchToElement(h,"mousemove",t),p&&p!==c&&this.dispatchToElement(h,"mouseover",t)},r.prototype.mouseout=function(t){var r=t.zrEventControl;"only_globalout"!==r&&this.dispatchToElement(this._hovered,"mouseout",t),"no_globalout"!==r&&this.trigger("globalout",{type:"globalout",event:t})},r.prototype.resize=function(){this._hovered=new M7(0,0)},r.prototype.dispatch=function(t,r){var i=this[t];i&&i.call(this,r)},r.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},r.prototype.setCursorStyle=function(t){var r=this.proxy;r.setCursor&&r.setCursor(t)},r.prototype.dispatchToElement=function(t,r,i){var s,u,c,h=(t=t||{}).target;if(!h||!h.silent){var p="on"+r;for(var f=(s=r,u=t,{type:s,event:c=i,target:u.target,topTarget:u.topTarget,cancelBubble:!1,offsetX:c.zrX,offsetY:c.zrY,gestureEvent:c.gestureEvent,pinchX:c.pinchX,pinchY:c.pinchY,pinchScale:c.pinchScale,wheelDelta:c.zrDelta,zrByTouch:c.zrByTouch,which:c.which,stop:M9});h&&(h[p]&&(f.cancelBubble=!!h[p].call(h,f)),h.trigger(r,f),h=h.__hostTarget?h.__hostTarget:h.parent,!f.cancelBubble););!f.cancelBubble&&(this.trigger(r,f),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(t){"function"==typeof t[p]&&t[p].call(t,f),t.trigger&&t.trigger(r,f)}))}},r.prototype.findHover=function(t,r,i){var s=this.storage.getDisplayList(),u=new M7(t,r);if(Ar(s,u,t,r,i),this._pointerSize&&!u.target){for(var c=[],h=this._pointerSize,p=h/2,f=new M4(t-p,r-p,h,h),v=s.length-1;v>=0;v--){var y=s[v];y!==i&&!y.ignore&&!y.ignoreCoarsePointer&&(!y.parent||!y.parent.ignoreCoarsePointer)&&(At.copy(y.getBoundingRect()),y.transform&&At.applyTransform(y.transform),At.intersect(f)&&c.push(y))}if(c.length){for(var x=Math.PI/12,_=2*Math.PI,b=0;b<p;b+=4)for(var w=0;w<_;w+=x)if(Ar(c,u,t+b*Math.cos(w),r+b*Math.sin(w),i),u.target)return u}}return u},r.prototype.processGesture=function(t,r){!this._gestureMgr&&(this._gestureMgr=new MF);var i=this._gestureMgr;"start"===r&&i.clear();var s=i.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===r&&i.clear(),s){var u=s.type;t.gestureEvent=u;var c=new M7;c.target=s.target,this.dispatchToElement(c,u,s.event)}},r}(Mv);Sp(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){An.prototype[t]=function(r){var i,s,u=r.zrX,c=r.zrY,h=Ai(this,u,c);if(("mouseup"!==t||!h)&&(s=(i=this.findHover(u,c)).target),"mousedown"===t)this._downEl=s,this._downPoint=[r.zrX,r.zrY],this._upEl=s;else if("mouseup"===t)this._upEl=s;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||Ms(this._downPoint,[r.zrX,r.zrY])>4)return;this._downPoint=null}this.dispatchToElement(i,t,r)}});function Ar(t,r,i,s,u){for(var c=t.length-1;c>=0;c--){var h=t[c],p=void 0;if(h!==u&&!h.ignore&&(p=function(t,r,i){if(t[t.rectHover?"rectContain":"contain"](r,i)){for(var s=t,u=void 0,c=!1;s;){if(s.ignoreClip&&(c=!0),!c){var h=s.getClipPath();if(h&&!h.contain(r,i))return!1}s.silent&&(u=!0);var p=s.__hostTarget;s=p||s.parent}return!u||M6}return!1}(h,i,s))&&(r.topTarget||(r.topTarget=h),p!==M6)){r.target=h;break}}}function Ai(t,r,i){var s=t.painter;return r<0||r>s.getWidth()||i<0||i>s.getHeight()}function Aa(t,r,i,s){var u=r+1;if(u===i)return 1;if(0>s(t[u++],t[r])){for(;u<i&&0>s(t[u],t[u-1]);)u++;(function(t,r,i){for(i--;r<i;){var s=t[r];t[r++]=t[i],t[i--]=s}})(t,r,u)}else for(;u<i&&s(t[u],t[u-1])>=0;)u++;return u-r}function Ao(t,r,i,s,u){for(s===r&&s++;s<i;s++){for(var c,h=t[s],p=r,f=s;p<f;)0>u(h,t[c=p+f>>>1])?f=c:p=c+1;var v=s-p;switch(v){case 3:t[p+3]=t[p+2];case 2:t[p+2]=t[p+1];case 1:t[p+1]=t[p];break;default:for(;v>0;)t[p+v]=t[p+v-1],v--}t[p]=h}}function As(t,r,i,s,u,c){var h=0,p=0,f=1;if(c(t,r[i+u])>0){for(p=s-u;f<p&&c(t,r[i+u+f])>0;)h=f,(f=(f<<1)+1)<=0&&(f=p);f>p&&(f=p),h+=u,f+=u}else{for(p=u+1;f<p&&0>=c(t,r[i+u-f]);)h=f,(f=(f<<1)+1)<=0&&(f=p);f>p&&(f=p);var v=h;h=u-f,f=u-v}for(h++;h<f;){var y=h+(f-h>>>1);c(t,r[i+y])>0?h=y+1:f=y}return f}function Al(t,r,i,s,u,c){var h=0,p=0,f=1;if(0>c(t,r[i+u])){for(p=u+1;f<p&&0>c(t,r[i+u-f]);)h=f,(f=(f<<1)+1)<=0&&(f=p);f>p&&(f=p);var v=h;h=u-f,f=u-v}else{for(p=s-u;f<p&&c(t,r[i+u+f])>=0;)h=f,(f=(f<<1)+1)<=0&&(f=p);f>p&&(f=p),h+=u,f+=u}for(h++;h<f;){var y=h+(f-h>>>1);0>c(t,r[i+y])?f=y:h=y+1}return f}function Au(t,r,i,s){!i&&(i=0),!s&&(s=t.length);var u=s-i;if(!(u<2)){var c=0;if(u<32){c=Aa(t,i,s,r),Ao(t,i,s,i+c,r);return}var h=function(t,r){var i,s,u=7,c=0,h=[];i=[],s=[];function p(p){var f=i[p],v=s[p],y=i[p+1],x=s[p+1];s[p]=v+x,p===c-3&&(i[p+1]=i[p+2],s[p+1]=s[p+2]),c--;var _=Al(t[y],t,f,v,0,r);if(f+=_,0!=(v-=_)&&0!==(x=As(t[f+v-1],t,y,x,x-1,r)))v<=x?function(i,s,c,p){var f,v,y,x=0;for(x=0;x<s;x++)h[x]=t[i+x];var _=0,b=c,w=i;if(t[w++]=t[b++],0==--p){for(x=0;x<s;x++)t[w+x]=h[_+x];return}if(1===s){for(x=0;x<p;x++)t[w+x]=t[b+x];t[w+p]=h[_];return}for(var S=u;;){f=0,v=0,y=!1;do if(0>r(t[b],h[_])){if(t[w++]=t[b++],v++,f=0,0==--p){y=!0;break}}else if(t[w++]=h[_++],f++,v=0,1==--s){y=!0;break}while((f|v)<S);if(y)break;do{if(0!==(f=Al(t[b],h,_,s,0,r))){for(x=0;x<f;x++)t[w+x]=h[_+x];if(w+=f,_+=f,(s-=f)<=1){y=!0;break}}if(t[w++]=t[b++],0==--p){y=!0;break}if(0!==(v=As(h[_],t,b,p,0,r))){for(x=0;x<v;x++)t[w+x]=t[b+x];if(w+=v,b+=v,0==(p-=v)){y=!0;break}}if(t[w++]=h[_++],1==--s){y=!0;break}S--}while(f>=7||v>=7);if(y)break;S<0&&(S=0),S+=2}if((u=S)<1&&(u=1),1===s){for(x=0;x<p;x++)t[w+x]=t[b+x];t[w+p]=h[_]}else if(0===s)throw Error();else for(x=0;x<s;x++)t[w+x]=h[_+x]}(f,v,y,x):function(i,s,c,p){var f=0;for(f=0;f<p;f++)h[f]=t[c+f];var v=i+s-1,y=p-1,x=c+p-1,_=0,b=0;if(t[x--]=t[v--],0==--s){for(f=0,_=x-(p-1);f<p;f++)t[_+f]=h[f];return}if(1===p){for(x-=s,v-=s,b=x+1,_=v+1,f=s-1;f>=0;f--)t[b+f]=t[_+f];t[x]=h[y];return}for(var w=u;;){var S=0,M=0,A=!1;do if(0>r(h[y],t[v])){if(t[x--]=t[v--],S++,M=0,0==--s){A=!0;break}}else if(t[x--]=h[y--],M++,S=0,1==--p){A=!0;break}while((S|M)<w);if(A)break;do{if(0!=(S=s-Al(h[y],t,i,s,s-1,r))){for(x-=S,v-=S,s-=S,b=x+1,_=v+1,f=S-1;f>=0;f--)t[b+f]=t[_+f];if(0===s){A=!0;break}}if(t[x--]=h[y--],1==--p){A=!0;break}if(0!=(M=p-As(t[v],h,0,p,p-1,r))){for(x-=M,y-=M,p-=M,b=x+1,_=y+1,f=0;f<M;f++)t[b+f]=h[_+f];if(p<=1){A=!0;break}}if(t[x--]=t[v--],0==--s){A=!0;break}w--}while(S>=7||M>=7);if(A)break;w<0&&(w=0),w+=2}if((u=w)<1&&(u=1),1===p){for(x-=s,v-=s,b=x+1,_=v+1,f=s-1;f>=0;f--)t[b+f]=t[_+f];t[x]=h[y]}else if(0===p)throw Error();else for(f=0,_=x-(p-1);f<p;f++)t[_+f]=h[f]}(f,v,y,x)}return{mergeRuns:function(){for(;c>1;){var t=c-2;if(t>=1&&s[t-1]<=s[t]+s[t+1]||t>=2&&s[t-2]<=s[t]+s[t-1])s[t-1]<s[t+1]&&t--;else if(s[t]>s[t+1])break;p(t)}},forceMergeRuns:function(){for(;c>1;){var t=c-2;t>0&&s[t-1]<s[t+1]&&t--,p(t)}},pushRun:function(t,r){i[c]=t,s[c]=r,c+=1}}}(t,r),p=function(t){for(var r=0;t>=32;)r|=1&t,t>>=1;return t+r}(u);do{if((c=Aa(t,i,s,r))<p){var f=u;f>p&&(f=p),Ao(t,i,i+f,i+c,r),c=f}h.pushRun(i,c),h.mergeRuns(),u-=c,i+=c}while(0!==u);h.forceMergeRuns()}}var Ac=!1;function Ah(){if(!Ac)Ac=!0}function Ad(t,r){if(t.zlevel===r.zlevel)return t.z===r.z?t.z2-r.z2:t.z-r.z;return t.zlevel-r.zlevel}var Ap=function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=Ad}return t.prototype.traverse=function(t,r){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(t,r)},t.prototype.getDisplayList=function(t,r){r=r||!1;var i=this._displayList;return(t||!i.length)&&this.updateDisplayList(r),i},t.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,i=this._displayList,s=0,u=r.length;s<u;s++)this._updateAndAddDisplayable(r[s],null,t);i.length=this._displayListLen,Au(i,Ad)},t.prototype._updateAndAddDisplayable=function(t,r,i){if(!t.ignore||!!i){t.beforeUpdate(),t.update(),t.afterUpdate();var s=t.getClipPath();if(t.ignoreClip)r=null;else if(s){r=r?r.slice():[];for(var u=s,c=t;u;)u.parent=c,u.updateTransform(),r.push(u),c=u,u=u.getClipPath()}if(t.childrenRef){for(var h=t.childrenRef(),p=0;p<h.length;p++){var f=h[p];t.__dirty&&(f.__dirty|=1),this._updateAndAddDisplayable(f,r,i)}t.__dirty=0}else r&&r.length?t.__clipPaths=r:t.__clipPaths&&t.__clipPaths.length>0&&(t.__clipPaths=[]),isNaN(t.z)&&(Ah(),t.z=0),isNaN(t.z2)&&(Ah(),t.z2=0),isNaN(t.zlevel)&&(Ah(),t.zlevel=0),this._displayList[this._displayListLen++]=t;var v=t.getDecalElement&&t.getDecalElement();v&&this._updateAndAddDisplayable(v,r,i);var y=t.getTextGuideLine();y&&this._updateAndAddDisplayable(y,r,i);var x=t.getTextContent();x&&this._updateAndAddDisplayable(x,r,i)}},t.prototype.addRoot=function(t){if(!t.__zr||t.__zr.storage!==this)this._roots.push(t)},t.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,i=t.length;r<i;r++)this.delRoot(t[r]);return}var s=Su(this._roots,t);s>=0&&this._roots.splice(s,1)},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t}();eaF=wY.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)};var Af={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return .5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var r,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,r=.1):r=.4*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*Math.PI*(t-r)/.4)))},elasticOut:function(t){var r,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,r=.1):r=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin(2*Math.PI*(t-r)/.4)+1)},elasticInOut:function(t){var r,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,r=.1):r=.4*Math.asin(1/i)/(2*Math.PI),(t*=2)<1)?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin(2*Math.PI*(t-r)/.4)):i*Math.pow(2,-10*(t-=1))*Math.sin(2*Math.PI*(t-r)/.4)*.5+1},backIn:function(t){return t*t*(2.70158*t-1.70158)},backOut:function(t){return--t*t*(2.70158*t+1.70158)+1},backInOut:function(t){return(t*=2)<1?t*t*(3.5949095*t-2.5949095)*.5:.5*((t-=2)*t*(3.5949095*t+2.5949095)+2)},bounceIn:function(t){return 1-Af.bounceOut(1-t)},bounceOut:function(t){if(t<1/2.75)return 7.5625*t*t;if(t<2/2.75)return 7.5625*(t-=1.5/2.75)*t+.75;if(t<2.5/2.75)return 7.5625*(t-=2.25/2.75)*t+.9375;else return 7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*Af.bounceIn(2*t):.5*Af.bounceOut(2*t-1)+.5}},Ag=Math.pow,Am=Math.sqrt,Av=Am(3),Ay=1/3,Ax=S0(),A_=S0(),Ab=S0();function Aw(t){return t>-1e-8&&t<1e-8}function AS(t){return t>1e-8||t<-1e-8}function AM(t,r,i,s,u){var c=1-u;return c*c*(c*t+3*u*r)+u*u*(u*s+3*c*i)}function AA(t,r,i,s,u){var c=1-u;return 3*(((r-t)*c+2*(i-r)*u)*c+(s-i)*u*u)}function AC(t,r,i,s,u,c){var h=s+3*(r-i)-t,p=3*(i-2*r+t),f=3*(r-t),v=t-u,y=p*p-3*h*f,x=p*f-9*h*v,_=f*f-3*p*v,b=0;if(Aw(y)&&Aw(x)){if(Aw(p))c[0]=0;else{var w=-f/p;w>=0&&w<=1&&(c[b++]=w)}}else{var S=x*x-4*y*_;if(Aw(S)){var M=x/y,w=-p/h+M,A=-M/2;w>=0&&w<=1&&(c[b++]=w),A>=0&&A<=1&&(c[b++]=A)}else if(S>0){var C=Am(S),T=y*p+1.5*h*(-x+C),I=y*p+1.5*h*(-x-C);T=T<0?-Ag(-T,Ay):Ag(T,Ay);var w=(-p-(T+(I=I<0?-Ag(-I,Ay):Ag(I,Ay))))/(3*h);w>=0&&w<=1&&(c[b++]=w)}else{var D=Math.acos((2*y*p-3*h*x)/(2*Am(y*y*y)))/3,P=Am(y),R=Math.cos(D),w=(-p-2*P*R)/(3*h),A=(-p+P*(R+Av*Math.sin(D)))/(3*h),L=(-p+P*(R-Av*Math.sin(D)))/(3*h);w>=0&&w<=1&&(c[b++]=w),A>=0&&A<=1&&(c[b++]=A),L>=0&&L<=1&&(c[b++]=L)}}return b}function AT(t,r,i,s,u){var c=6*i-12*r+6*t,h=9*r+3*s-3*t-9*i,p=3*r-3*t,f=0;if(Aw(h)){if(AS(c)){var v=-p/c;v>=0&&v<=1&&(u[f++]=v)}}else{var y=c*c-4*h*p;if(Aw(y))u[0]=-c/(2*h);else if(y>0){var x=Am(y),v=(-c+x)/(2*h),_=(-c-x)/(2*h);v>=0&&v<=1&&(u[f++]=v),_>=0&&_<=1&&(u[f++]=_)}}return f}function AE(t,r,i,s,u,c){var h=(r-t)*u+t,p=(i-r)*u+r,f=(s-i)*u+i,v=(p-h)*u+h,y=(f-p)*u+p,x=(y-v)*u+v;c[0]=t,c[1]=h,c[2]=v,c[3]=x,c[4]=x,c[5]=y,c[6]=f,c[7]=s}function AI(t,r,i,s,u,c,h,p,f,v,y){var x,_,b,w,S,M=.005,A=1/0;Ax[0]=f,Ax[1]=v;for(var C=0;C<1;C+=.05)A_[0]=AM(t,i,u,h,C),A_[1]=AM(r,s,c,p,C),(w=Mu(Ax,A_))<A&&(x=C,A=w);A=1/0;for(var T=0;T<32&&!(M<1e-4);T++){;_=x-M,b=x+M,A_[0]=AM(t,i,u,h,_),A_[1]=AM(r,s,c,p,_),w=Mu(A_,Ax),_>=0&&w<A?(x=_,A=w):(Ab[0]=AM(t,i,u,h,b),Ab[1]=AM(r,s,c,p,b),S=Mu(Ab,Ax),b<=1&&S<A?(x=b,A=S):M*=.5)}return y&&(y[0]=AM(t,i,u,h,x),y[1]=AM(r,s,c,p,x)),Am(A)}function AD(t,r,i,s){var u=1-s;return u*(u*t+2*s*r)+s*s*i}function AP(t,r,i,s){return 2*((1-s)*(r-t)+s*(i-r))}function AR(t,r,i){var s=t+i-2*r;return 0===s?.5:(t-r)/s}function AL(t,r,i,s,u){var c=(r-t)*s+t,h=(i-r)*s+r,p=(h-c)*s+c;u[0]=t,u[1]=c,u[2]=p,u[3]=p,u[4]=h,u[5]=i}function Ak(t,r,i,s,u,c,h,p,f){var v,y=.005,x=1/0;Ax[0]=h,Ax[1]=p;for(var _=0;_<1;_+=.05){A_[0]=AD(t,i,u,_),A_[1]=AD(r,s,c,_);var b=Mu(Ax,A_);b<x&&(v=_,x=b)}x=1/0;for(var w=0;w<32&&!(y<1e-4);w++){;var S=v-y,M=v+y;A_[0]=AD(t,i,u,S),A_[1]=AD(r,s,c,S);var b=Mu(A_,Ax);if(S>=0&&b<x)v=S,x=b;else{Ab[0]=AD(t,i,u,M),Ab[1]=AD(r,s,c,M);var A=Mu(Ab,Ax);M<=1&&A<x?(v=M,x=A):y*=.5}}return f&&(f[0]=AD(t,i,u,v),f[1]=AD(r,s,c,v)),Am(x)}var AO=/cubic-bezier\(([0-9,\.e ]+)\)/;function AB(t){var r=t&&AO.exec(t);if(r){var i=r[1].split(","),s=+SU(i[0]),u=+SU(i[1]),c=+SU(i[2]),h=+SU(i[3]);if(isNaN(s+u+c+h))return;var p=[];return function(t){return t<=0?0:t>=1?1:AC(0,s,c,1,t,p)&&AM(0,u,h,1,p[0])}}}var AN=function(){function t(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||Sq,this.ondestroy=t.ondestroy||Sq,this.onrestart=t.onrestart||Sq,t.easing&&this.setEasing(t.easing)}return t.prototype.step=function(t,r){if(!this._inited&&(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var i=this._life,s=t-this._startTime-this._pausedTime,u=s/i;u<0&&(u=0),u=Math.min(u,1);var c=this.easingFunc,h=c?c(u):u;if(this.onframe(h),1===u){if(!this.loop)return!0;this._startTime=t-s%i,this._pausedTime=0,this.onrestart()}return!1},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.setEasing=function(t){this.easing=t,this.easingFunc=Sw(t)?t:Af[t]||AB(t)},t}(),AF=function(t){this.value=t},Az=function(){function t(){this._len=0}return t.prototype.insert=function(t){var r=new AF(t);return this.insertEntry(r),r},t.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},t.prototype.remove=function(t){var r=t.prev,i=t.next;r?r.next=i:this.head=i,i?i.prev=r:this.tail=r,t.next=t.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t}(),AU=function(){function t(t){this._list=new Az,this._maxSize=10,this._map={},this._maxSize=t}return t.prototype.put=function(t,r){var i=this._list,s=this._map,u=null;if(null==s[t]){var c=i.len(),h=this._lastRemovedEntry;if(c>=this._maxSize&&c>0){var p=i.head;i.remove(p),delete s[p.key],u=p.value,this._lastRemovedEntry=p}h?h.value=r:h=new AF(r),h.key=t,i.insertEntry(h),s[t]=h}return u},t.prototype.get=function(t){var r=this._map[t],i=this._list;if(null!=r)return r!==i.tail&&(i.remove(r),i.insertEntry(r)),r.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t}(),AH={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function AG(t){return(t=Math.round(t))<0?0:t>255?255:t}function AV(t){return t<0?0:t>1?1:t}function AW(t){return t.length&&"%"===t.charAt(t.length-1)?AG(parseFloat(t)/100*255):AG(parseInt(t,10))}function Aj(t){return t.length&&"%"===t.charAt(t.length-1)?AV(parseFloat(t)/100):AV(parseFloat(t))}function AX(t,r,i){return(i<0?i+=1:i>1&&(i-=1),6*i<1)?t+(r-t)*i*6:2*i<1?r:3*i<2?t+(r-t)*(2/3-i)*6:t}function AY(t,r,i){return t+(r-t)*i}function A$(t,r,i,s,u){return t[0]=r,t[1]=i,t[2]=s,t[3]=u,t}function AJ(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}var AZ=new AU(20),AK=null;function Aq(t,r){AK&&AJ(AK,r),AK=AZ.put(t,AK||r.slice())}function AQ(t,r){if(!!t){r=r||[];var i=AZ.get(t);if(i)return AJ(r,i);var s=(t+="").replace(/ /g,"").toLowerCase();if(s in AH)return AJ(r,AH[s]),Aq(t,r),r;var u=s.length;if("#"===s.charAt(0)){if(4===u||5===u){var c=parseInt(s.slice(1,4),16);if(!(c>=0&&c<=4095)){A$(r,0,0,0,1);return}return A$(r,(3840&c)>>4|(3840&c)>>8,240&c|(240&c)>>4,15&c|(15&c)<<4,5===u?parseInt(s.slice(4),16)/15:1),Aq(t,r),r}if(7===u||9===u){var c=parseInt(s.slice(1,7),16);if(!(c>=0&&c<=0xffffff)){A$(r,0,0,0,1);return}return A$(r,(0xff0000&c)>>16,(65280&c)>>8,255&c,9===u?parseInt(s.slice(7),16)/255:1),Aq(t,r),r}return}var h=s.indexOf("("),p=s.indexOf(")");if(-1!==h&&p+1===u){var f=s.substr(0,h),v=s.substr(h+1,p-(h+1)).split(","),y=1;switch(f){case"rgba":if(4!==v.length)return 3===v.length?A$(r,+v[0],+v[1],+v[2],1):A$(r,0,0,0,1);y=Aj(v.pop());case"rgb":if(v.length>=3)return A$(r,AW(v[0]),AW(v[1]),AW(v[2]),3===v.length?y:Aj(v[3])),Aq(t,r),r;A$(r,0,0,0,1);return;case"hsla":if(4!==v.length){A$(r,0,0,0,1);return}return v[3]=Aj(v[3]),A0(v,r),Aq(t,r),r;case"hsl":if(3!==v.length){A$(r,0,0,0,1);return}return A0(v,r),Aq(t,r),r;default:return}}A$(r,0,0,0,1)}}function A0(t,r){var i=(parseFloat(t[0])%360+360)%360/360,s=Aj(t[1]),u=Aj(t[2]),c=u<=.5?u*(s+1):u+s-u*s,h=2*u-c;return A$(r=r||[],AG(255*AX(h,c,i+1/3)),AG(255*AX(h,c,i)),AG(255*AX(h,c,i-1/3)),1),4===t.length&&(r[3]=t[3]),r}function A1(t,r){var i=AQ(t);if(i){for(var s=0;s<3;s++)r<0?i[s]=i[s]*(1-r)|0:i[s]=(255-i[s])*r+i[s]|0,i[s]>255?i[s]=255:i[s]<0&&(i[s]=0);return A7(i,4===i.length?"rgba":"rgb")}}function A2(t){var r=AQ(t);if(r)return(0x1000000+(r[0]<<16)+(r[1]<<8)+ +r[2]).toString(16).slice(1)}function A3(t,r,i){if(!!(r&&r.length)&&!!(t>=0&&t<=1)){i=i||[];var s,u,c,h,p,f,v,y,x=t*(r.length-1),_=Math.floor(x),b=Math.ceil(x),w=r[_],S=r[b],M=x-_;return i[0]=AG((s=w[0],u=S[0],s+(u-s)*M)),i[1]=AG((c=w[1],h=S[1],c+(h-c)*M)),i[2]=AG((p=w[2],f=S[2],p+(f-p)*M)),i[3]=AV((v=w[3],y=S[3],v+(y-v)*M)),i}}var A5=A3;function A4(t,r,i){if(!!(r&&r.length)&&!!(t>=0&&t<=1)){var s,u,c,h,p,f,v,y,x=t*(r.length-1),_=Math.floor(x),b=Math.ceil(x),w=AQ(r[_]),S=AQ(r[b]),M=x-_;var A=A7([AG((s=w[0],u=S[0],s+(u-s)*M)),AG((c=w[1],h=S[1],c+(h-c)*M)),AG((p=w[2],f=S[2],p+(f-p)*M)),AV((v=w[3],y=S[3],v+(y-v)*M))],"rgba");return i?{color:A,leftIndex:_,rightIndex:b,value:x}:A}}var A6=A4;function A9(t,r,i,s){var u,c=AQ(t);if(t){;return c=function(t){if(!!t){var r,i,s=t[0]/255,u=t[1]/255,c=t[2]/255,h=Math.min(s,u,c),p=Math.max(s,u,c),f=p-h,v=(p+h)/2;if(0===f)r=0,i=0;else{i=v<.5?f/(p+h):f/(2-p-h);var y=((p-s)/6+f/2)/f,x=((p-u)/6+f/2)/f,_=((p-c)/6+f/2)/f;s===p?r=_-x:u===p?r=1/3+y-_:c===p&&(r=2/3+x-y),r<0&&(r+=1),r>1&&(r-=1)}var b=[360*r,i,v];return null!=t[3]&&b.push(t[3]),b}}(c),null!=r&&(c[0]=(u=Math.round(u=r))<0?0:u>360?360:u),null!=i&&(c[1]=Aj(i)),null!=s&&(c[2]=Aj(s)),A7(A0(c),"rgba")}}function A8(t,r){var i=AQ(t);if(i&&null!=r)return i[3]=AV(r),A7(i,"rgba")}function A7(t,r){if(!!t&&!!t.length){var i=t[0]+","+t[1]+","+t[2];return("rgba"===r||"hsva"===r||"hsla"===r)&&(i+=","+t[3]),r+"("+i+")"}}function Ce(t,r){var i=AQ(t);return i?(.299*i[0]+.587*i[1]+.114*i[2])*i[3]/255+(1-i[3])*r:0}function Ct(){return A7([Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())],"rgb")}var Cn=new AU(100);function Cr(t){if(SS(t)){var r=Cn.get(t);return!r&&(r=A1(t,-.1),Cn.put(t,r)),r}if(SD(t)){var i=So({},t);return i.colorStops=Sf(t.colorStops,function(t){return{offset:t.offset,color:A1(t.color,-.1)}}),i}return t}var Ci=Math.round;function Ca(t){var r;if(t&&"transparent"!==t){if("string"==typeof t&&t.indexOf("rgba")>-1){var i=AQ(t);i&&(t="rgb("+i[0]+","+i[1]+","+i[2]+")",r=i[3])}}else t="none";return{color:t,opacity:null==r?1:r}}function Co(t){return t<1e-4&&t>-1e-4}function Cs(t){return Ci(1e3*t)/1e3}function Cl(t){return Ci(1e4*t)/1e4}var Cu={left:"start",right:"end",center:"middle",middle:"middle"};function Cc(t){return t&&!!t.image}function Ch(t){var r;return Cc(t)||(r=t)&&!!r.svgElement}function Cd(t){return"linear"===t.type}function Cp(t){return"radial"===t.type}function Cf(t){return t&&("linear"===t.type||"radial"===t.type)}function Cg(t){return"url(#"+t+")"}function Cm(t){var r=t.getGlobalScale();return Math.max(Math.ceil(Math.log(Math.max(r[0],r[1]))/Math.log(10)),1)}function Cv(t){var r=t.x||0,i=t.y||0,s=(t.rotation||0)*SQ,u=SO(t.scaleX,1),c=SO(t.scaleY,1),h=t.skewX||0,p=t.skewY||0,f=[];return(r||i)&&f.push("translate("+r+"px,"+i+"px)"),s&&f.push("rotate("+s+")"),(1!==u||1!==c)&&f.push("scale("+u+","+c+")"),(h||p)&&f.push("skew("+Ci(h*SQ)+"deg, "+Ci(p*SQ)+"deg)"),f.join(" ")}var Cy=wY.hasGlobalWindow&&Sw(window.btoa)?function(t){return window.btoa(unescape(encodeURIComponent(t)))}:"undefined"!=typeof Buffer?function(t){return Buffer.from(t).toString("base64")}:function(t){return null},Cx=Array.prototype.slice;function C_(t,r,i){return(r-t)*i+t}function Cb(t,r,i,s){for(var u,c,h=r.length,p=0;p<h;p++){;t[p]=(u=r[p],c=i[p],(c-u)*s+u)}return t}function Cw(t,r,i,s){for(var u=r.length,c=0;c<u;c++)t[c]=r[c]+i[c]*s;return t}function CS(t,r,i,s){for(var u=r.length,c=u&&r[0].length,h=0;h<u;h++){!t[h]&&(t[h]=[]);for(var p=0;p<c;p++)t[h][p]=r[h][p]+i[h][p]*s}return t}function CM(t){if(Sd(t)){var r=t.length;if(Sd(t[0])){for(var i=[],s=0;s<r;s++)i.push(Cx.call(t[s]));return i}return Cx.call(t)}return t}function CA(t){return t[0]=Math.floor(t[0])||0,t[1]=Math.floor(t[1])||0,t[2]=Math.floor(t[2])||0,t[3]=null==t[3]?1:t[3],"rgba("+t.join(",")+")"}function CC(t){return 4===t||5===t}function CT(t){return 1===t||2===t}var CE=[0,0,0,0],CI=function(){function t(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return this.keyframes.length>=1},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(t,r,i){this._needsSort=!0;var s,u=this.keyframes,c=u.length,h=!1,p=6,f=r;if(Sd(r)){var v,y=Sd((v=r)&&v[0])?2:1;p=y,(1===y&&!SA(r[0])||2===y&&!SA(r[0][0]))&&(h=!0)}else{;if(SA(r)&&!((s=r)!=s))p=0;else if(SS(r)){if(isNaN(+r)){var x=AQ(r);x&&(f=x,p=3)}else p=0}else if(SD(r)){var _=So({},f);_.colorStops=Sf(r.colorStops,function(t){return{offset:t.offset,color:AQ(t.color)}}),Cd(r)?p=4:Cp(r)&&(p=5),f=_}}0===c?this.valType=p:(p!==this.valType||6===p)&&(h=!0),this.discrete=this.discrete||h;var b={time:t,value:f,rawValue:r,percent:0};return i&&(b.easing=i,b.easingFunc=Sw(i)?i:Af[i]||AB(i)),u.push(b),b},t.prototype.prepare=function(t,r){var i=this.keyframes;this._needsSort&&i.sort(function(t,r){return t.time-r.time});for(var s=this.valType,u=i.length,c=i[u-1],h=this.discrete,p=CT(s),f=CC(s),v=0;v<u;v++){var y=i[v],x=y.value,_=c.value;y.percent=y.time/t,!h&&(p&&v!==u-1?!function(t,r,i){if(!!t.push&&!!r.push){var s=t.length,u=r.length;if(s!==u){if(s>u)t.length=u;else for(var c=s;c<u;c++)t.push(1===i?r[c]:Cx.call(r[c]))}for(var h=t[0]&&t[0].length,c=0;c<t.length;c++)if(1===i)isNaN(t[c])&&(t[c]=r[c]);else for(var p=0;p<h;p++)isNaN(t[c][p])&&(t[c][p]=r[c][p])}}(x,_,s):f&&!function(t,r){for(var i=t.length,s=r.length,u=i>s?r:t,c=Math.min(i,s),h=u[c-1]||{color:[0,0,0,0],offset:0},p=c;p<Math.max(i,s);p++)u.push({offset:h.offset,color:h.color.slice()})}(x.colorStops,_.colorStops))}if(!h&&5!==s&&r&&this.needsAnimate()&&r.needsAnimate()&&s===r.valType&&!r._finished){this._additiveTrack=r;for(var b=i[0].value,v=0;v<u;v++)0===s?i[v].additiveValue=i[v].value-b:3===s?i[v].additiveValue=Cw([],i[v].value,b,-1):CT(s)&&(i[v].additiveValue=1===s?Cw([],i[v].value,b,-1):CS([],i[v].value,b,-1))}},t.prototype.step=function(t,r){if(this._finished)return;this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var i,s,u,c=null!=this._additiveTrack,h=c?"additiveValue":"value",p=this.valType,f=this.keyframes,v=f.length,y=this.propName,x=3===p,_=this._lastFr,b=Math.min;if(1===v)s=u=f[0];else{if(r<0)i=0;else if(r<this._lastFrP){;for(i=b(_+1,v-1);i>=0&&!(f[i].percent<=r);i--);i=b(i,v-2)}else{for(i=_;i<v&&!(f[i].percent>r);i++);i=b(i-1,v-2)}u=f[i+1],s=f[i]}if(!!(s&&u)){this._lastFr=i,this._lastFrP=r;var w=u.percent-s.percent,S=0===w?1:b((r-s.percent)/w,1);u.easingFunc&&(S=u.easingFunc(S));var M=c?this._additiveValue:x?CE:t[y];if((CT(p)||x)&&!M&&(M=this._additiveValue=[]),this.discrete)t[y]=S<1?s.rawValue:u.rawValue;else if(CT(p))1===p?Cb(M,s[h],u[h],S):function(t,r,i,s){for(var u=r.length,c=u&&r[0].length,h=0;h<u;h++){!t[h]&&(t[h]=[]);for(var p,f,v=0;v<c;v++){;t[h][v]=(p=r[h][v],f=i[h][v],(f-p)*s+p)}}return t}(M,s[h],u[h],S);else if(CC(p)){var A,C,T,I,D,P,R,L,k,O,B,N=s[h],F=u[h],z=4===p;if(t[y]={type:z?"linear":"radial",x:(C=N.x,T=F.x,(T-C)*S+C),y:(I=N.y,D=F.y,(D-I)*S+I),colorStops:Sf(N.colorStops,function(t,r){var i,s,u=F.colorStops[r];return{offset:(i=t.offset,s=u.offset,(s-i)*S+i),color:CA(Cb([],t.color,u.color,S))}}),global:F.global},z){;t[y].x2=(P=N.x2,R=F.x2,(R-P)*S+P),t[y].y2=(L=N.y2,k=F.y2,(k-L)*S+L)}else{;t[y].r=(O=N.r,B=F.r,(B-O)*S+O)}}else if(x)Cb(M,s[h],u[h],S),!c&&(t[y]=CA(M));else{var U,H,G=(U=s[h],H=u[h],(H-U)*S+U);c?this._additiveValue=G:t[y]=G}c&&this._addToTarget(t)}},t.prototype._addToTarget=function(t){var r=this.valType,i=this.propName,s=this._additiveValue;0===r?t[i]=t[i]+s:3===r?(AQ(t[i],CE),Cw(CE,CE,s,1),t[i]=CA(CE)):1===r?Cw(t[i],t[i],s,1):2===r&&CS(t[i],t[i],s,1)},t}(),CD=function(){function t(t,r,i,s){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&s){Sn("Can' use additive animation on looped animation.");return}this._additiveAnimators=s,this._allowDiscrete=i}return t.prototype.getMaxTime=function(){return this._maxTime},t.prototype.getDelay=function(){return this._delay},t.prototype.getLoop=function(){return this._loop},t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(t){this._target=t},t.prototype.when=function(t,r,i){return this.whenWithKeys(t,r,Sy(r),i)},t.prototype.whenWithKeys=function(t,r,i,s){for(var u=this._tracks,c=0;c<i.length;c++){var h=i[c],p=u[h];if(!p){p=u[h]=new CI(h);var f=void 0,v=this._getAdditiveTrack(h);if(v){var y=v.keyframes,x=y[y.length-1];f=x&&x.value,3===v.valType&&f&&(f=CA(f))}else f=this._target[h];if(null==f)continue;t>0&&p.addKeyframe(0,CM(f),s),this._trackKeys.push(h)}p.addKeyframe(t,CM(r[h]),s)}return this._maxTime=Math.max(this._maxTime,t),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t){for(var r=t.length,i=0;i<r;i++)t[i].call(this)}},t.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var i=0;i<r.length;i++)r[i].call(this)},t.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,i=0;i<r.length;i++)t[r[i]].setFinished()},t.prototype._getAdditiveTrack=function(t){var r,i=this._additiveAnimators;if(i)for(var s=0;s<i.length;s++){var u=i[s].getTrack(t);u&&(r=u)}return r},t.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,i=[],s=this._maxTime||0,u=0;u<this._trackKeys.length;u++){var c=this._trackKeys[u],h=this._tracks[c],p=this._getAdditiveTrack(c),f=h.keyframes,v=f.length;if(h.prepare(s,p),h.needsAnimate()){if(!this._allowDiscrete&&h.discrete){var y=f[v-1];y&&(r._target[h.propName]=y.rawValue),h.setFinished()}else i.push(h)}}if(i.length||this._force){var x=new AN({life:s,loop:this._loop,delay:this._delay||0,onframe:function(t){r._started=2;var s=r._additiveAnimators;if(s){for(var u=!1,c=0;c<s.length;c++)if(s[c]._clip){u=!0;break}!u&&(r._additiveAnimators=null)}for(var c=0;c<i.length;c++)i[c].step(r._target,t);var h=r._onframeCbs;if(h)for(var c=0;c<h.length;c++)h[c](r._target,t)},ondestroy:function(){r._doneCallback()}});this._clip=x,this.animation&&this.animation.addClip(x),t&&x.setEasing(t)}else this._doneCallback();return this}},t.prototype.stop=function(t){if(!!this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},t.prototype.delay=function(t){return this._delay=t,this},t.prototype.during=function(t){return t&&(!this._onframeCbs&&(this._onframeCbs=[]),this._onframeCbs.push(t)),this},t.prototype.done=function(t){return t&&(!this._doneCbs&&(this._doneCbs=[]),this._doneCbs.push(t)),this},t.prototype.aborted=function(t){return t&&(!this._abortedCbs&&(this._abortedCbs=[]),this._abortedCbs.push(t)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(t){return this._tracks[t]},t.prototype.getTracks=function(){var t=this;return Sf(this._trackKeys,function(r){return t._tracks[r]})},t.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var i=this._tracks,s=this._trackKeys,u=0;u<t.length;u++){var c=i[t[u]];c&&!c.isFinished()&&(r?c.step(this._target,1):1===this._started&&c.step(this._target,0),c.setFinished())}for(var h=!0,u=0;u<s.length;u++)if(!i[s[u]].isFinished()){h=!1;break}return h&&this._abortedCallback(),h},t.prototype.saveTo=function(t,r,i){if(!!t){r=r||this._trackKeys;for(var s=0;s<r.length;s++){var u=r[s],c=this._tracks[u];if(!(!c||c.isFinished())){var h=c.keyframes,p=h[i?0:h.length-1];p&&(t[u]=CM(p.rawValue))}}}},t.prototype.__changeFinalValue=function(t,r){r=r||Sy(t);for(var i=0;i<r.length;i++){var s=r[i],u=this._tracks[s];if(!!u){var c=u.keyframes;if(c.length>1){var h=c.pop();u.addKeyframe(h.time,t[s]),u.prepare(this._maxTime,u.getAdditiveTrack())}}}},t}();function CP(){return new Date().getTime()}var CR=function(t){function r(r){var i=t.call(this)||this;return i._running=!1,i._time=0,i._pausedTime=0,i._pauseStart=0,i._paused=!1,r=r||{},i.stage=r.stage||{},i}return wU(r,t),r.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},r.prototype.addAnimator=function(t){t.animation=this;var r=t.getClip();r&&this.addClip(r)},r.prototype.removeClip=function(t){if(!!t.animation){var r=t.prev,i=t.next;r?r.next=i:this._head=i,i?i.prev=r:this._tail=r,t.next=t.prev=t.animation=null}},r.prototype.removeAnimator=function(t){var r=t.getClip();r&&this.removeClip(r),t.animation=null},r.prototype.update=function(t){for(var r=CP()-this._pausedTime,i=r-this._time,s=this._head;s;){var u=s.next;s.step(r,i)&&(s.ondestroy(),this.removeClip(s)),s=u}this._time=r,!t&&(this.trigger("frame",i),this.stage.update&&this.stage.update())},r.prototype._startLoop=function(){var t=this;this._running=!0;eaF(function r(){t._running&&(eaF(r),t._paused||t.update())})},r.prototype.start=function(){if(!this._running)this._time=CP(),this._pausedTime=0,this._startLoop()},r.prototype.stop=function(){this._running=!1},r.prototype.pause=function(){!this._paused&&(this._pauseStart=CP(),this._paused=!0)},r.prototype.resume=function(){this._paused&&(this._pausedTime+=CP()-this._pauseStart,this._paused=!1)},r.prototype.clear=function(){for(var t=this._head;t;){var r=t.next;t.prev=t.next=t.animation=null,t=r}this._head=this._tail=null},r.prototype.isFinished=function(){return null==this._head},r.prototype.animate=function(t,r){r=r||{},this.start();var i=new CD(t,r.loop);return this.addAnimator(i),i},r}(Mv),CL=wY.domSupported,Ck=function(){var t=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},i=Sf(t,function(t){var i=t.replace("mouse","pointer");return r.hasOwnProperty(i)?i:t});return{mouse:t,touch:["touchstart","touchend","touchmove"],pointer:i}}(),CO={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},CB=!1;function CN(t){var r=t.pointerType;return"pen"===r||"touch"===r}function CF(t){t&&(t.zrByTouch=!0)}function Cz(t,r){for(var i=r,s=!1;i&&9!==i.nodeType&&!(s=i.domBelongToZr||i!==r&&i===t.painterRoot);)i=i.parentNode;return s}var CU=function(t,r){this.stopPropagation=Sq,this.stopImmediatePropagation=Sq,this.preventDefault=Sq,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY},CH={mousedown:function(t){t=Mk(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=Mk(this.dom,t);var r=this.__mayPointerCapture;r&&(t.zrX!==r[0]||t.zrY!==r[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=Mk(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){!Cz(this,(t=Mk(this.dom,t)).toElement||t.relatedTarget)&&(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){CB=!0,t=Mk(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){if(!CB)t=Mk(this.dom,t),this.trigger("mousewheel",t)},touchstart:function(t){CF(t=Mk(this.dom,t)),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),CH.mousemove.call(this,t),CH.mousedown.call(this,t)},touchmove:function(t){CF(t=Mk(this.dom,t)),this.handler.processGesture(t,"change"),CH.mousemove.call(this,t)},touchend:function(t){CF(t=Mk(this.dom,t)),this.handler.processGesture(t,"end"),CH.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<300&&CH.click.call(this,t)},pointerdown:function(t){CH.mousedown.call(this,t)},pointermove:function(t){!CN(t)&&CH.mousemove.call(this,t)},pointerup:function(t){CH.mouseup.call(this,t)},pointerout:function(t){!CN(t)&&CH.mouseout.call(this,t)}};Sp(["click","dblclick","contextmenu"],function(t){CH[t]=function(r){r=Mk(this.dom,r),this.trigger(t,r)}});var CG={pointermove:function(t){!CN(t)&&CG.mousemove.call(this,t)},pointerup:function(t){CG.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var r=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),r&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function CV(t,r,i,s){t.mounted[r]=i,t.listenerOpts[r]=s,MO(t.domTarget,r,i,s)}function CW(t){var r=t.mounted;for(var i in r)r.hasOwnProperty(i)&&!function(t,r,i,s){t.removeEventListener(r,i,s)}(t.domTarget,i,r[i],t.listenerOpts[i]);t.mounted={}}var Cj=function(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r},CX=function(t){function r(r,i){var s,u,c,h=t.call(this)||this;return h.__pointerCapturing=!1,h.dom=r,h.painterRoot=i,h._localHandlerScope=new Cj(r,CH),CL&&(h._globalHandlerScope=new Cj(document,CG)),s=h,c=(u=h._localHandlerScope).domHandlers,wY.pointerEventsSupported?Sp(Ck.pointer,function(t){CV(u,t,function(r){c[t].call(s,r)})}):(wY.touchEventsSupported&&Sp(Ck.touch,function(t){CV(u,t,function(r){var i;c[t].call(s,r),(i=u).touching=!0,null!=i.touchTimer&&(clearTimeout(i.touchTimer),i.touchTimer=null),i.touchTimer=setTimeout(function(){i.touching=!1,i.touchTimer=null},700)})}),Sp(Ck.mouse,function(t){CV(u,t,function(r){r=ML(r),!u.touching&&c[t].call(s,r)})})),h}return wU(r,t),r.prototype.dispose=function(){CW(this._localHandlerScope),CL&&CW(this._globalHandlerScope)},r.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},r.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,CL&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var r=this._globalHandlerScope;t?function(t,r){wY.pointerEventsSupported?Sp(CO.pointer,i):!wY.touchEventsSupported&&Sp(CO.mouse,i);function i(i){CV(r,i,function(s){if(!Cz(t,(s=ML(s)).target)){var u,c;u=t,c=s,s=Mk(u.dom,new CU(u,c),!0),r.domHandlers[i].call(t,s)}},{capture:!0})}}(this,r):CW(r)}},r}(Mv),CY=1;wY.hasGlobalWindow&&(CY=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var C$=CY,CJ="#333",CZ="#ccc",CK=MG;function Cq(t){return t>5e-5||t<-5e-5}var CQ=[],C0=[],C1=MH(),C2=Math.abs,C3=function(){var t;function r(){}return r.prototype.getLocalTransform=function(t){return r.getLocalTransform(this,t)},r.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},r.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},r.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},r.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},r.prototype.needLocalTransform=function(){return Cq(this.rotation)||Cq(this.x)||Cq(this.y)||Cq(this.scaleX-1)||Cq(this.scaleY-1)||Cq(this.skewX)||Cq(this.skewY)},r.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),i=this.transform;if(!(r||t)){i&&(CK(i),this.invTransform=null);return}i=i||MH(),r?this.getLocalTransform(i):CK(i),t&&(r?MW(i,t,i):MV(i,t)),this.transform=i,this._resolveGlobalScaleRatio(i)},r.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(null!=r&&1!==r){this.getGlobalScale(CQ);var i=CQ[0]<0?-1:1,s=CQ[1]<0?-1:1,u=((CQ[0]-i)*r+i)/CQ[0]||0,c=((CQ[1]-s)*r+s)/CQ[1]||0;t[0]*=u,t[1]*=u,t[2]*=c,t[3]*=c}this.invTransform=this.invTransform||MH(),M$(this.invTransform,t)},r.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},r.prototype.setLocalTransform=function(t){if(!!t){var r=t[0]*t[0]+t[1]*t[1],i=t[2]*t[2]+t[3]*t[3],s=Math.atan2(t[1],t[0]),u=Math.PI/2+s-Math.atan2(t[3],t[2]);i=Math.sqrt(i)*Math.cos(u),r=Math.sqrt(r),this.skewX=u,this.skewY=0,this.rotation=-s,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=i,this.originX=0,this.originY=0}},r.prototype.decomposeTransform=function(){if(!!this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(t.invTransform=t.invTransform||MH(),MW(C0,t.invTransform,r),r=C0);var i=this.originX,s=this.originY;(i||s)&&(C1[4]=i,C1[5]=s,MW(C0,r,C1),C0[4]-=i,C0[5]-=s,r=C0),this.setLocalTransform(r)}},r.prototype.getGlobalScale=function(t){var r=this.transform;return(t=t||[],r)?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},r.prototype.transformCoordToLocal=function(t,r){var i=[t,r],s=this.invTransform;return s&&Md(i,i,s),i},r.prototype.transformCoordToGlobal=function(t,r){var i=[t,r],s=this.transform;return s&&Md(i,i,s),i},r.prototype.getLineScale=function(){var t=this.transform;return t&&C2(t[0]-1)>1e-10&&C2(t[3]-1)>1e-10?Math.sqrt(C2(t[0]*t[3]-t[2]*t[1])):1},r.prototype.copyTransform=function(t){C4(this,t)},r.getLocalTransform=function(t,r){r=r||[];var i=t.originX||0,s=t.originY||0,u=t.scaleX,c=t.scaleY,h=t.anchorX,p=t.anchorY,f=t.rotation||0,v=t.x,y=t.y,x=t.skewX?Math.tan(t.skewX):0,_=t.skewY?Math.tan(-t.skewY):0;if(i||s||h||p){var b=i+h,w=s+p;r[4]=-b*u-x*w*c,r[5]=-w*c-_*b*u}else r[4]=r[5]=0;return r[0]=u,r[3]=c,r[1]=_*u,r[2]=x*c,f&&MX(r,r,f),r[4]+=i+v,r[5]+=s+y,r},r.initDefaultProps=void((t=r.prototype).scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0),r}(),C5=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function C4(t,r){for(var i=0;i<C5.length;i++){var s=C5[i];t[s]=r[s]}}var C6={};function C9(t,r){var i=C6[r=r||wJ];!i&&(i=C6[r]=new AU(500));var s=i.get(t);return null==s&&(s=wK.measureText(t,r).width,i.put(t,s)),s}function C8(t,r,i,s){var u=C9(t,r),c=Tn(r);return new M4(Te(0,u,i),Tt(0,c,s),u,c)}function C7(t,r,i,s){var u=((t||"")+"").split("\n");if(1===u.length)return C8(u[0],r,i,s);for(var c=new M4(0,0,0,0),h=0;h<u.length;h++){var p=C8(u[h],r,i,s);0===h?c.copy(p):c.union(p)}return c}function Te(t,r,i){return"right"===i?t-=r:"center"===i&&(t-=r/2),t}function Tt(t,r,i){return"middle"===i?t-=r/2:"bottom"===i&&(t-=r),t}function Tn(t){return C9("",t)}function Tr(t,r){if("string"==typeof t)return t.lastIndexOf("%")>=0?parseFloat(t)/100*r:parseFloat(t);return t}function Ti(t,r,i){var s=r.position||"inside",u=null!=r.distance?r.distance:5,c=i.height,h=i.width,p=c/2,f=i.x,v=i.y,y="left",x="top";if(s instanceof Array)f+=Tr(s[0],i.width),v+=Tr(s[1],i.height),y=null,x=null;else switch(s){case"left":f-=u,v+=p,y="right",x="middle";break;case"right":f+=u+h,v+=p,x="middle";break;case"top":f+=h/2,v-=u,y="center",x="bottom";break;case"bottom":f+=h/2,v+=c+u,y="center";break;case"inside":f+=h/2,v+=p,y="center",x="middle";break;case"insideLeft":f+=u,v+=p,x="middle";break;case"insideRight":f+=h-u,v+=p,y="right",x="middle";break;case"insideTop":f+=h/2,v+=u,y="center";break;case"insideBottom":f+=h/2,v+=c-u,y="center",x="bottom";break;case"insideTopLeft":f+=u,v+=u;break;case"insideTopRight":f+=h-u,v+=u,y="right";break;case"insideBottomLeft":f+=u,v+=c-u,x="bottom";break;case"insideBottomRight":f+=h-u,v+=c-u,y="right",x="bottom"}return(t=t||{}).x=f,t.y=v,t.align=y,t.verticalAlign=x,t}var Ta="__zr_normal__",To=C5.concat(["ignore"]),Ts=Sg(C5,function(t,r){return t[r]=!0,t},{ignore:!1}),Tl={},Tu=new M4(0,0,0,0),Tc=function(){function t(t){this.id=St(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return t.prototype._init=function(t){this.attr(t)},t.prototype.drift=function(t,r,i){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0}var s=this.transform;!s&&(s=this.transform=[1,0,0,1,0,0]),s[4]+=t,s[5]+=r,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){!this.textConfig&&(this.textConfig={});var i=this.textConfig,s=i.local,u=r.innerTransformable,c=void 0,h=void 0,p=!1;u.parent=s?this:null;var f=!1;if(u.copyTransform(r),null!=i.position){i.layoutRect?Tu.copy(i.layoutRect):Tu.copy(this.getBoundingRect()),!s&&Tu.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Tl,i,Tu):Ti(Tl,i,Tu),u.x=Tl.x,u.y=Tl.y,c=Tl.align,h=Tl.verticalAlign;var v=i.origin;if(v&&null!=i.rotation){var y=void 0,x=void 0;"center"===v?(y=.5*Tu.width,x=.5*Tu.height):(y=Tr(v[0],Tu.width),x=Tr(v[1],Tu.height)),f=!0,u.originX=-u.x+y+(s?0:Tu.x),u.originY=-u.y+x+(s?0:Tu.y)}}null!=i.rotation&&(u.rotation=i.rotation);var _=i.offset;_&&(u.x+=_[0],u.y+=_[1],!f&&(u.originX=-_[0],u.originY=-_[1]));var b=null==i.inside?"string"==typeof i.position&&i.position.indexOf("inside")>=0:i.inside,w=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),S=void 0,M=void 0,A=void 0;b&&this.canBeInsideText()?(S=i.insideFill,M=i.insideStroke,(null==S||"auto"===S)&&(S=this.getInsideTextFill()),(null==M||"auto"===M)&&(M=this.getInsideTextStroke(S),A=!0)):(S=i.outsideFill,M=i.outsideStroke,(null==S||"auto"===S)&&(S=this.getOutsideFill()),(null==M||"auto"===M)&&(M=this.getOutsideStroke(S),A=!0)),((S=S||"#000")!==w.fill||M!==w.stroke||A!==w.autoStroke||c!==w.align||h!==w.verticalAlign)&&(p=!0,w.fill=S,w.stroke=M,w.autoStroke=A,w.align=c,w.verticalAlign=h,r.setDefaultTextStyle(w)),r.__dirty|=1,p&&r.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(t){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?CZ:CJ},t.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),i="string"==typeof r&&AQ(r);!i&&(i=[255,255,255,1]);for(var s=i[3],u=this.__zr.isDarkMode(),c=0;c<3;c++)i[c]=i[c]*s+(u?0:255)*(1-s);return i[3]=1,A7(i,"rgba")},t.prototype.traverse=function(t,r){},t.prototype.attrKV=function(t,r){"textConfig"===t?this.setTextConfig(r):"textContent"===t?this.setTextContent(r):"clipPath"===t?this.setClipPath(r):"extra"===t?(this.extra=this.extra||{},So(this.extra,r)):this[t]=r},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(t,r){if("string"==typeof t)this.attrKV(t,r);else if(SC(t)){for(var i=Sy(t),s=0;s<i.length;s++){var u=i[s];this.attrKV(u,t[u])}}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,i=0;i<this.animators.length;i++){var s=this.animators[i],u=s.__fromStateTransition;if(!s.getLoop()&&(!u||u===Ta)){var c=s.targetName,h=c?r[c]:r;s.saveTo(h)}}},t.prototype._innerSaveToNormal=function(t){var r=this._normalState;!r&&(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,To)},t.prototype._savePrimaryToNormal=function(t,r,i){for(var s=0;s<i.length;s++){var u=i[s];null!=t[u]&&!(u in r)&&(r[u]=this[u])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(t){return this.states[t]},t.prototype.ensureState=function(t){var r=this.states;return!r[t]&&(r[t]={}),r[t]},t.prototype.clearStates=function(t){this.useState(Ta,!1,t)},t.prototype.useState=function(t,r,i,s){var u,c=t===Ta;if(!this.hasState()&&c)return;var h=this.currentStates,p=this.stateTransition;if(!(Su(h,t)>=0)||!r&&1!==h.length){if(this.stateProxy&&!c&&(u=this.stateProxy(t)),!u&&(u=this.states&&this.states[t]),!u&&!c){Sn("State "+t+" not exists.");return}!c&&this.saveCurrentToNormalState(u);var f=!!(u&&u.hoverLayer||s);f&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,r,!i&&!this.__inHover&&p&&p.duration>0,p);var v=this._textContent,y=this._textGuide;return v&&v.useState(t,r,i,f),y&&y.useState(t,r,i,f),c?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!f&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2),u}},t.prototype.useStates=function(t,r,i){if(t.length){var s=[],u=this.currentStates,c=t.length,h=c===u.length;if(h){for(var p=0;p<c;p++)if(t[p]!==u[p]){h=!1;break}}if(!h){for(var p=0;p<c;p++){var f=t[p],v=void 0;this.stateProxy&&(v=this.stateProxy(f,t)),!v&&(v=this.states[f]),v&&s.push(v)}var y=s[c-1],x=!!(y&&y.hoverLayer||i);x&&this._toggleHoverLayerFlag(!0);var _=this._mergeStates(s),b=this.stateTransition;this.saveCurrentToNormalState(_),this._applyStateObj(t.join(","),_,this._normalState,!1,!r&&!this.__inHover&&b&&b.duration>0,b);var w=this._textContent,S=this._textGuide;w&&w.useStates(t,r,x),S&&S.useStates(t,r,x),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!x&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2)}}else this.clearStates()},t.prototype.isSilent=function(){for(var t=this.silent,r=this.parent;!t&&r;){if(r.silent){t=!0;break}r=r.parent}return t},t.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},t.prototype.removeState=function(t){var r=Su(this.currentStates,t);if(r>=0){var i=this.currentStates.slice();i.splice(r,1),this.useStates(i)}},t.prototype.replaceState=function(t,r,i){var s=this.currentStates.slice(),u=Su(s,t),c=Su(s,r)>=0;u>=0?c?s.splice(u,1):s[u]=r:i&&!c&&s.push(r),this.useStates(s)},t.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},t.prototype._mergeStates=function(t){for(var r,i={},s=0;s<t.length;s++){var u=t[s];So(i,u),u.textConfig&&So(r=r||{},u.textConfig)}return r&&(i.textConfig=r),i},t.prototype._applyStateObj=function(t,r,i,s,u,c){var h=!(r&&s);r&&r.textConfig?(this.textConfig=So({},s?this.textConfig:i.textConfig),So(this.textConfig,r.textConfig)):h&&i.textConfig&&(this.textConfig=i.textConfig);for(var p={},f=!1,v=0;v<To.length;v++){var y=To[v],x=u&&Ts[y];r&&null!=r[y]?x?(f=!0,p[y]=r[y]):this[y]=r[y]:h&&null!=i[y]&&(x?(f=!0,p[y]=i[y]):this[y]=i[y])}if(!u)for(var v=0;v<this.animators.length;v++){var _=this.animators[v],b=_.targetName;!_.getLoop()&&_.__changeFinalValue(b?(r||i)[b]:r||i)}f&&this._transitionState(t,p,c)},t.prototype._attachComponent=function(t){if((!t.__zr||!!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},t.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},t.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(t){var r=this._textContent;if(r!==t){r&&r!==t&&this.removeTextContent();t.innerTransformable=new C3,this._attachComponent(t),this._textContent=t,this.markRedraw()}},t.prototype.setTextConfig=function(t){!this.textConfig&&(this.textConfig={}),So(this.textConfig,t),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=1;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,i=this._textGuide;r&&(r.__inHover=t),i&&(i.__inHover=t)},t.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var i=0;i<r.length;i++)t.animation.addAnimator(r[i]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},t.prototype.removeSelfFromZr=function(t){if(!!this.__zr){this.__zr=null;var r=this.animators;if(r)for(var i=0;i<r.length;i++)t.animation.removeAnimator(r[i]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},t.prototype.animate=function(t,r,i){var s=t?this[t]:this,u=new CD(s,r,i);return t&&(u.targetName=t),this.addAnimator(u,t),u},t.prototype.addAnimator=function(t,r){var i=this.__zr,s=this;t.during(function(){s.updateDuringAnimation(r)}).done(function(){var r=s.animators,i=Su(r,t);i>=0&&r.splice(i,1)}),this.animators.push(t),i&&i.animation.addAnimator(t),i&&i.wakeUp()},t.prototype.updateDuringAnimation=function(t){this.markRedraw()},t.prototype.stopAnimation=function(t,r){for(var i=this.animators,s=i.length,u=[],c=0;c<s;c++){var h=i[c];t&&t!==h.scope?u.push(h):h.stop(r)}return this.animators=u,this},t.prototype.animateTo=function(t,r,i){Th(this,t,r,i)},t.prototype.animateFrom=function(t,r,i){Th(this,t,r,i,!0)},t.prototype._transitionState=function(t,r,i,s){for(var u=Th(this,r,i,s),c=0;c<u.length;c++)u[c].__fromStateTransition=t},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=function(){var r=t.prototype;function i(t,i,s,u){Object.defineProperty(r,t,{get:function(){return!this[i]&&c(this,this[i]=[]),this[i]},set:function(t){this[s]=t[0],this[u]=t[1],this[i]=t,c(this,t)}});function c(t,r){Object.defineProperty(r,0,{get:function(){return t[s]},set:function(r){t[s]=r}}),Object.defineProperty(r,1,{get:function(){return t[u]},set:function(r){t[u]=r}})}}r.type="element",r.name="",r.ignore=r.silent=r.isGroup=r.draggable=r.dragging=r.ignoreClip=r.__inHover=!1,r.__dirty=1,Object.defineProperty&&(i("position","_legacyPos","x","y"),i("scale","_legacyScale","scaleX","scaleY"),i("origin","_legacyOrigin","originX","originY"))}(),t}();function Th(t,r,i,s,u){var c=[];(function t(r,i,s,u,c,h,p,f){for(var v=Sy(u),y=c.duration,x=c.delay,_=c.additive,b=c.setToFinal,w=!SC(h),S=r.animators,M=[],A=0;A<v.length;A++){var C=v[A],T=u[C];if(null!=T&&null!=s[C]&&(w||h[C])){if(!SC(T)||Sd(T)||SD(T))M.push(C);else{if(i){!f&&(s[C]=T,r.updateDuringAnimation(i));continue}t(r,C,s[C],T,c,h&&h[C],p,f)}}else!f&&(s[C]=T,r.updateDuringAnimation(i),M.push(C))}var I=M.length;if(!_&&I)for(var D=0;D<S.length;D++){var P=S[D];if(P.targetName===i&&P.stopTracks(M)){var R=Su(S,P);S.splice(R,1)}}if(!c.force&&(I=(M=Sm(M,function(t){var r,i;return r=u[t],!(r===(i=s[t])||Sd(r)&&Sd(i)&&function(t,r){var i=t.length;if(i!==r.length)return!1;for(var s=0;s<i;s++)if(t[s]!==r[s])return!1;return!0}(r,i))})).length),I>0||c.force&&!p.length){var L=void 0,k=void 0,O=void 0;if(f){k={},b&&(L={});for(var D=0;D<I;D++){var C=M[D];k[C]=s[C],b?L[C]=u[C]:s[C]=u[C]}}else if(b){O={};for(var D=0;D<I;D++){var C=M[D];O[C]=CM(s[C]),!function(t,r,i){if(Sd(r[i])){if(!Sd(t[i])&&(t[i]=[]),SE(r[i])){var s=r[i].length;t[i].length!==s&&(t[i]=new r[i].constructor(s),Td(t[i],r[i],s))}else{var u=r[i],c=t[i],h=u.length;if(Sd(u[0])){for(var p=u[0].length,f=0;f<h;f++)c[f]?Td(c[f],u[f],p):c[f]=Array.prototype.slice.call(u[f])}else Td(c,u,h);c.length=u.length}}else t[i]=r[i]}(s,u,C)}}var P=new CD(s,!1,!1,_?Sm(S,function(t){return t.targetName===i}):null);P.targetName=i,c.scope&&(P.scope=c.scope),b&&L&&P.whenWithKeys(0,L,M),O&&P.whenWithKeys(0,O,M),P.whenWithKeys(null==y?500:y,f?k:u,M).delay(x||0),r.addAnimator(P,i),p.push(P)}})(t,"",t,r,i=i||{},s,c,u);var h=c.length,p=!1,f=i.done,v=i.aborted,y=function(){p=!0,--h<=0&&(p?f&&f():v&&v())},x=function(){--h<=0&&(p?f&&f():v&&v())};!h&&f&&f(),c.length>0&&i.during&&c[0].during(function(t,r){i.during(r)});for(var _=0;_<c.length;_++){var b=c[_];y&&b.done(y),x&&b.aborted(x),i.force&&b.duration(i.duration),b.start(i.easing)}return c}function Td(t,r,i){for(var s=0;s<i;s++)t[s]=r[s]}Sh(Tc,Mv),Sh(Tc,C3);var Tp=function(t){function r(r){var i=t.call(this)||this;return i.isGroup=!0,i._children=[],i.attr(r),i}return wU(r,t),r.prototype.childrenRef=function(){return this._children},r.prototype.children=function(){return this._children.slice()},r.prototype.childAt=function(t){return this._children[t]},r.prototype.childOfName=function(t){for(var r=this._children,i=0;i<r.length;i++)if(r[i].name===t)return r[i]},r.prototype.childCount=function(){return this._children.length},r.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},r.prototype.addBefore=function(t,r){if(t&&t!==this&&t.parent!==this&&r&&r.parent===this){var i=this._children,s=i.indexOf(r);s>=0&&(i.splice(s,0,t),this._doAdd(t))}return this},r.prototype.replace=function(t,r){var i=Su(this._children,t);return i>=0&&this.replaceAt(r,i),this},r.prototype.replaceAt=function(t,r){var i=this._children,s=i[r];if(t&&t!==this&&t.parent!==this&&t!==s){i[r]=t,s.parent=null;var u=this.__zr;u&&s.removeSelfFromZr(u),this._doAdd(t)}return this},r.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var r=this.__zr;r&&r!==t.__zr&&t.addSelfToZr(r),r&&r.refresh()},r.prototype.remove=function(t){var r=this.__zr,i=this._children,s=Su(i,t);return s<0?this:(i.splice(s,1),t.parent=null,r&&t.removeSelfFromZr(r),r&&r.refresh(),this)},r.prototype.removeAll=function(){for(var t=this._children,r=this.__zr,i=0;i<t.length;i++){var s=t[i];r&&s.removeSelfFromZr(r),s.parent=null}return t.length=0,this},r.prototype.eachChild=function(t,r){for(var i=this._children,s=0;s<i.length;s++){var u=i[s];t.call(r,u,s)}return this},r.prototype.traverse=function(t,r){for(var i=0;i<this._children.length;i++){var s=this._children[i],u=t.call(r,s);s.isGroup&&!u&&s.traverse(t,r)}return this},r.prototype.addSelfToZr=function(r){t.prototype.addSelfToZr.call(this,r);for(var i=0;i<this._children.length;i++)this._children[i].addSelfToZr(r)},r.prototype.removeSelfFromZr=function(r){t.prototype.removeSelfFromZr.call(this,r);for(var i=0;i<this._children.length;i++)this._children[i].removeSelfFromZr(r)},r.prototype.getBoundingRect=function(t){for(var r=new M4(0,0,0,0),i=t||this._children,s=[],u=null,c=0;c<i.length;c++){var h=i[c];if(!h.ignore&&!h.invisible){var p=h.getBoundingRect(),f=h.getLocalTransform(s);f?(M4.applyTransform(r,p,f),(u=u||r.clone()).union(r)):(u=u||p.clone()).union(p)}}return u||r},r}(Tc);Tp.prototype.type="group";let Tf=Tp;var Tg={},Tm={},Tv=function(){function t(t,r,i){var s,u=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,i=i||{},this.dom=r,this.id=t;var c=new Ap,h=i.renderer||"canvas";!Tg[h]&&(h=Sy(Tg)[0]);i.useDirtyRect=null!=i.useDirtyRect&&i.useDirtyRect;var p=new Tg[h](r,c,i,t),f=i.ssr||p.ssrOnly;this.storage=c,this.painter=p;var v=wY.node||wY.worker||f?null:new CX(p.getViewportRoot(),p.root),y=i.useCoarsePointer,x=null==y||"auto"===y?wY.touchEventsSupported:!!y;x&&(s=SO(i.pointerSize,44)),this.handler=new An(c,p,v,p.root,s),this.animation=new CR({stage:{update:f?null:function(){return u._flush(!0)}}}),!f&&this.animation.start()}return t.prototype.add=function(t){if(!this._disposed&&!!t)this.storage.addRoot(t),t.addSelfToZr(this),this.refresh()},t.prototype.remove=function(t){if(!this._disposed&&!!t)this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh()},t.prototype.configLayer=function(t,r){if(!this._disposed)this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh()},t.prototype.setBackgroundColor=function(t){if(!this._disposed)this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=function(t){if(!t)return!1;if("string"==typeof t)return .4>Ce(t,1);if(t.colorStops){for(var r=t.colorStops,i=0,s=r.length,u=0;u<s;u++)i+=Ce(r[u].color,1);return(i/=s)<.4}return!1}(t)},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(t){this._darkMode=t},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(t){if(!this._disposed)!t&&this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},t.prototype.refresh=function(){if(!this._disposed)this._needsRefresh=!0,this.animation.start()},t.prototype.flush=function(){if(!this._disposed)this._flush(!1)},t.prototype._flush=function(t){var r,i=CP();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var s=CP();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:s-i})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},t.prototype.wakeUp=function(){if(!this._disposed)this.animation.start(),this._stillFrameAccum=0},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){if(!this._disposed)this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover()},t.prototype.resize=function(t){if(!this._disposed)t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},t.prototype.clearAnimation=function(){if(!this._disposed)this.animation.clear()},t.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},t.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},t.prototype.setCursorStyle=function(t){if(!this._disposed)this.handler.setCursorStyle(t)},t.prototype.findHover=function(t,r){if(!this._disposed)return this.handler.findHover(t,r)},t.prototype.on=function(t,r,i){return!this._disposed&&this.handler.on(t,r,i),this},t.prototype.off=function(t,r){if(!this._disposed)this.handler.off(t,r)},t.prototype.trigger=function(t,r){if(!this._disposed)this.handler.trigger(t,r)},t.prototype.clear=function(){if(!this._disposed){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof Tf&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},t.prototype.dispose=function(){var t;if(!this._disposed)this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,t=this.id,delete Tm[t]},t}();function Ty(t,r){var i=new Tv(St(),t,r);return Tm[i.id]=i,i}function Tx(t){t.dispose()}function T_(){for(var t in Tm)Tm.hasOwnProperty(t)&&Tm[t].dispose();Tm={}}function Tb(t){return Tm[t]}function Tw(t,r){Tg[t]=r}function TS(t){if("function"==typeof eaz)return eaz(t)}function TM(t){eaz=t}var TA="5.6.0";function TC(t,r,i,s){var u=r[0],c=r[1],h=i[0],p=i[1],f=c-u,v=p-h;if(0===f)return 0===v?h:(h+p)/2;if(s){if(f>0){if(t<=u)return h;if(t>=c)return p}else{if(t>=u)return h;if(t<=c)return p}}else{if(t===u)return h;if(t===c)return p}return(t-u)/f*v+h}function TT(t,r){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}if(SS(t))return t.replace(/^\s+|\s+$/g,"").match(/%$/)?parseFloat(t)/100*r:parseFloat(t);return null==t?NaN:+t}function TE(t,r,i){return null==r&&(r=10),r=Math.min(Math.max(0,r),20),t=(+t).toFixed(r),i?t:+t}function TI(t){return t.sort(function(t,r){return t-r}),t}function TD(t){if(isNaN(t=+t))return 0;if(t>1e-14){for(var r=1,i=0;i<15;i++,r*=10)if(Math.round(t*r)/r===t)return i}return TP(t)}function TP(t){var r=t.toString().toLowerCase(),i=r.indexOf("e"),s=i>0?+r.slice(i+1):0,u=i>0?i:r.length,c=r.indexOf(".");return Math.max(0,(c<0?0:u-1-c)-s)}function TR(t,r){var i=Math.log,s=Math.LN10,u=Math.min(Math.max(-Math.floor(i(t[1]-t[0])/s)+Math.round(i(Math.abs(r[1]-r[0]))/s),0),20);return isFinite(u)?u:20}function TL(t,r,i){return t[r]&&Tk(t,i)[r]||0}function Tk(t,r){var i=Sg(t,function(t,r){return t+(isNaN(r)?0:r)},0);if(0===i)return[];for(var s=Math.pow(10,r),u=Sf(t,function(t){return(isNaN(t)?0:t)/i*s*100}),c=100*s,h=Sf(u,function(t){return Math.floor(t)}),p=Sg(h,function(t,r){return t+r},0),f=Sf(u,function(t,r){return t-h[r]});p<c;){for(var v=Number.NEGATIVE_INFINITY,y=null,x=0,_=f.length;x<_;++x)f[x]>v&&(v=f[x],y=x);++h[y],f[y]=0,++p}return Sf(h,function(t){return t/s})}var TO=0x1fffffffffffff;function TB(t){var r=2*Math.PI;return(t%r+r)%r}function TN(t){return t>-1e-4&&t<1e-4}var TF=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Tz(t){if(t instanceof Date)return t;if(SS(t)){var r=TF.exec(t);if(!r)return new Date(NaN);if(!r[8])return new Date(+r[1],+(r[2]||1)-1,+r[3]||1,+r[4]||0,+(r[5]||0),+r[6]||0,r[7]?+r[7].substring(0,3):0);var i=+r[4]||0;return"Z"!==r[8].toUpperCase()&&(i-=+r[8].slice(0,3)),new Date(Date.UTC(+r[1],+(r[2]||1)-1,+r[3]||1,i,+(r[5]||0),+r[6]||0,r[7]?+r[7].substring(0,3):0))}if(null==t)return new Date(NaN);return new Date(Math.round(t))}function TU(t){return Math.pow(10,TH(t))}function TH(t){if(0===t)return 0;var r=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,r)>=10&&r++,r}function TG(t,r){var i,s=TH(t),u=Math.pow(10,s),c=t/u;return t=(i=r?c<1.5?1:c<2.5?2:c<4?3:c<7?5:10:c<1?1:c<2?2:c<3?3:c<5?5:10)*u,s>=-20?+t.toFixed(s<0?-s:0):t}function TV(t,r){var i=(t.length-1)*r+1,s=Math.floor(i),u=+t[s-1],c=i-s;return c?u+c*(t[s]-u):u}function TW(t){t.sort(function(t,r){return function t(r,i,s){return r.interval[s]<i.interval[s]||r.interval[s]===i.interval[s]&&(r.close[s]-i.close[s]==(s?-1:1)||!s&&t(r,i,1))}(t,r,0)?-1:1});for(var r=-1/0,i=1,s=0;s<t.length;){for(var u=t[s].interval,c=t[s].close,h=0;h<2;h++)u[h]<=r&&(u[h]=r,c[h]=h?1:1-i),r=u[h],i=c[h];u[0]===u[1]&&c[0]*c[1]!=1?t.splice(s,1):s++}return t}function Tj(t){var r=parseFloat(t);return r==t&&(0!==r||!SS(t)||0>=t.indexOf("x"))?r:NaN}function TX(t){return!isNaN(Tj(t))}function TY(){return Math.round(9*Math.random())}function T$(t,r){return null==t?r:null==r?t:t*r/function t(r,i){return 0===i?r:t(i,r%i)}(t,r)}function TJ(t,r,i){return(r-t)*i+t}var TZ="series\0",TK="\0_ec_\0";function Tq(t){return t instanceof Array?t:null==t?[]:[t]}function TQ(t,r,i){if(t){t[r]=t[r]||{},t.emphasis=t.emphasis||{},t.emphasis[r]=t.emphasis[r]||{};for(var s=0,u=i.length;s<u;s++){var c=i[s];!t.emphasis[r].hasOwnProperty(c)&&t[r].hasOwnProperty(c)&&(t.emphasis[r][c]=t[r][c])}}}var T0=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function T1(t){return!SC(t)||Sb(t)||t instanceof Date?t:t.value}function T2(t,r,i){var s="normalMerge"===i,u="replaceMerge"===i,c="replaceAll"===i;t=t||[],r=(r||[]).slice();var h=SY();Sp(r,function(t,i){if(!SC(t)){r[i]=null;return}});var p=function(t,r,i){var s=[];if("replaceAll"===i)return s;for(var u=0;u<t.length;u++){var c=t[u];c&&null!=c.id&&r.set(c.id,u),s.push({existing:"replaceMerge"===i||T9(c)?null:c,newOption:null,keyInfo:null,brandNew:null})}return s}(t,h,i);return(s||u)&&function(t,r,i,s){Sp(s,function(u,c){if(!!u&&null!=u.id){var h=T5(u.id),p=i.get(h);if(null!=p){var f=t[p];Sz(!f.newOption,'Duplicated option on id "'+h+'".'),f.newOption=u,f.existing=r[p],s[c]=null}}})}(p,t,h,r),s&&function(t,r){Sp(r,function(i,s){if(!!i&&null!=i.name)for(var u=0;u<t.length;u++){var c=t[u].existing;if(!t[u].newOption&&c&&(null==c.id||null==i.id)&&!T9(i)&&!T9(c)&&T3("name",c,i)){t[u].newOption=i,r[s]=null;return}}})}(p,r),s||u?function(t,r,i){Sp(r,function(r){if(!!r){for(var s,u=0;(s=t[u])&&(s.newOption||T9(s.existing)||s.existing&&null!=r.id&&!T3("id",r,s.existing));)u++;s?(s.newOption=r,s.brandNew=i):t.push({newOption:r,brandNew:i,existing:null,keyInfo:null}),u++}})}(p,r,u):c&&function(t,r){Sp(r,function(r){t.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}(p,r),function(t){var r=SY();Sp(t,function(t){var i=t.existing;i&&r.set(i.id,t)}),Sp(t,function(t){var i=t.newOption;Sz(!i||null==i.id||!r.get(i.id)||r.get(i.id)===t,"id duplicates: "+(i&&i.id)),i&&null!=i.id&&r.set(i.id,t),t.keyInfo||(t.keyInfo={})}),Sp(t,function(t,i){var s=t.existing,u=t.newOption,c=t.keyInfo;if(!!SC(u)){if(c.name=null!=u.name?T5(u.name):s?s.name:TZ+i,s)c.id=T5(s.id);else if(null!=u.id)c.id=T5(u.id);else{var h=0;do c.id="\0"+c.name+"\0"+h++;while(r.get(c.id))}r.set(c.id,t)}})}(p),p}function T3(t,r,i){var s=T4(r[t],null),u=T4(i[t],null);return null!=s&&null!=u&&s===u}function T5(t){return T4(t,"")}function T4(t,r){return null==t?r:SS(t)?t:SA(t)||SM(t)?t+"":r}function T6(t){var r=t.name;return!!(r&&r.indexOf(TZ))}function T9(t){return t&&null!=t.id&&0===T5(t.id).indexOf(TK)}function T8(t,r){if(null!=r.dataIndexInside)return r.dataIndexInside;if(null!=r.dataIndex)return Sb(r.dataIndex)?Sf(r.dataIndex,function(r){return t.indexOfRawIndex(r)}):t.indexOfRawIndex(r.dataIndex);if(null!=r.name)return Sb(r.name)?Sf(r.name,function(r){return t.indexOfName(r)}):t.indexOfName(r.name)}function T7(){var t="__ec_inner_"+Ee++;return function(r){return r[t]||(r[t]={})}}var Ee=TY();function Et(t,r,i){var s=En(r,i),u=s.mainTypeSpecified,c=s.queryOptionMap,h=s.others,p=i?i.defaultMainType:null;return!u&&p&&c.set(p,{}),c.each(function(r,s){var u=Ea(t,s,r,{useDefault:p===s,enableAll:!i||null==i.enableAll||i.enableAll,enableNone:!i||null==i.enableNone||i.enableNone});h[s+"Models"]=u.models,h[s+"Model"]=u.models[0]}),h}function En(t,r){if(SS(t)){var i,s={};s[t+"Index"]=0,i=s}else i=t;var u=SY(),c={},h=!1;return Sp(i,function(t,i){if("dataIndex"===i||"dataIndexInside"===i){c[i]=t;return}var s=i.match(/^(\w+)(Index|Id|Name)$/)||[],p=s[1],f=(s[2]||"").toLowerCase();if(!(!p||!f||r&&r.includeMainTypes&&0>Su(r.includeMainTypes,p)))h=h||!!p,(u.get(p)||u.set(p,{}))[f]=t}),{mainTypeSpecified:h,queryOptionMap:u,others:c}}var Er={useDefault:!0,enableAll:!1,enableNone:!1},Ei={useDefault:!1,enableAll:!0,enableNone:!0};function Ea(t,r,i,s){s=s||Er;var u=i.index,c=i.id,h=i.name,p={models:null,specified:null!=u||null!=c||null!=h};if(!p.specified){var f=void 0;return p.models=s.useDefault&&(f=t.getComponent(r))?[f]:[],p}return"none"===u||!1===u?(Sz(s.enableNone,'`"none"` or `false` is not a valid value on index option.'),p.models=[],p):("all"===u&&(Sz(s.enableAll,'`"all"` is not a valid value on index option.'),u=c=h=null),p.models=t.queryComponents({mainType:r,index:u,id:c,name:h}),p)}function Eo(t,r,i){t.setAttribute?t.setAttribute(r,i):t[r]=i}function Es(t,r){var i=SY(),s=[];return Sp(t,function(t){var u=r(t);(i.get(u)||(s.push(u),i.set(u,[]))).push(t)}),{keys:s,buckets:i}}function El(t,r,i,s,u){var c=null==r||"auto"===r;if(null==s)return s;if(SA(s)){var h,p=(s-(h=i||0))*u+h;return TE(p,c?Math.max(TD(i||0),TD(s)):r)}if(SS(s))return u<1?i:s;for(var f=[],v=Math.max(i?i.length:0,s.length),y=0;y<v;++y){var x=t.getDimensionInfo(y);if(x&&"ordinal"===x.type)f[y]=(u<1&&i?i:s)[y];else{var _,b=i&&i[y]?i[y]:0,w=s[y];var p=(w-(_=b))*u+_;f[y]=TE(p,c?Math.max(TD(b),TD(w)):r)}}return f}var Eu="___EC__COMPONENT__CONTAINER___",Ec="___EC__EXTENDED_CLASS___";function Eh(t){var r={main:"",sub:""};if(t){var i=t.split(".");r.main=i[0]||"",r.sub=i[1]||""}return r}function Ed(t,r){t.$constructor=t,t.extend=function(t){var r,i=this;return function(t){return Sw(t)&&/^class\s/.test(Function.prototype.toString.call(t))}(i)?r=function(t){function r(){return t.apply(this,arguments)||this}return wU(r,t),r}(i):Sc(r=function(){(t.$constructor||i).apply(this,arguments)},this),So(r.prototype,t),r[Ec]=!0,r.extend=this.extend,r.superCall=Eg,r.superApply=Em,r.superClass=i,r}}function Ep(t,r){t.extend=r.extend}var Ef=Math.round(10*Math.random());function Eg(t,r){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];return this.superClass.prototype[r].apply(t,i)}function Em(t,r,i){return this.superClass.prototype[r].apply(t,i)}function Ev(t){var r={};t.registerClass=function(t){var i=t.type||t.prototype.type;if(i){s=i,Sz(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(s),'componentType "'+s+'" illegal'),t.prototype.type=i;var s,u=Eh(i);u.sub?u.sub!==Eu&&(function(t){var i=r[t.main];return(!i||!i[Eu])&&((i=r[t.main]={})[Eu]=!0),i}(u)[u.sub]=t):r[u.main]=t}return t},t.getClass=function(t,i,s){var u=r[t];if(u&&u[Eu]&&(u=i?u[i]:null),s&&!u)throw Error(i?"Component "+t+"."+(i||"")+" is used but not imported.":t+".type should be specified.");return u},t.getClassesByMainType=function(t){var i=Eh(t),s=[],u=r[i.main];return u&&u[Eu]?Sp(u,function(t,r){r!==Eu&&s.push(t)}):s.push(u),s},t.hasClass=function(t){return!!r[Eh(t).main]},t.getAllClassMainTypes=function(){var t=[];return Sp(r,function(r,i){t.push(i)}),t},t.hasSubTypes=function(t){var i=r[Eh(t).main];return i&&i[Eu]}}function Ey(t,r){for(var i=0;i<t.length;i++)!t[i][1]&&(t[i][1]=t[i][0]);return r=r||!1,function(i,s,u){for(var c={},h=0;h<t.length;h++){var p=t[h][1];if(!(s&&Su(s,p)>=0||u&&0>Su(u,p))){var f=i.getShallow(p,r);null!=f&&(c[t[h][0]]=f)}}return c}}var Ex=Ey([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),E_=function(){function t(){}return t.prototype.getAreaStyle=function(t,r){return Ex(this,t,r)},t}(),Eb=new AU(50);function Ew(t,r,i,s,u){if(!t)return r;if("string"!=typeof t)return t;if(r&&r.__zrImageSrc===t||!i)return r;var c=Eb.get(t),h={hostEl:i,cb:s,cbPayload:u};return c?EM(r=c.image)||c.pending.push(h):((r=wK.loadImage(t,ES,ES)).__zrImageSrc=t,Eb.put(t,r.__cachedImgObj={image:r,pending:[h]})),r}function ES(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var r=0;r<t.pending.length;r++){var i=t.pending[r],s=i.cb;s&&s(this,i.cbPayload),i.hostEl.dirty()}t.pending.length=0}function EM(t){return t&&t.width&&t.height}var EA=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function EC(t,r,i,s,u){if(!r)return"";var c=(t+"").split("\n");u=ET(r,i,s,u);for(var h=0,p=c.length;h<p;h++)c[h]=EE(c[h],u);return c.join("\n")}function ET(t,r,i,s){var u=So({},s=s||{});u.font=r,i=SO(i,"..."),u.maxIterations=SO(s.maxIterations,2);var c=u.minChar=SO(s.minChar,0);u.cnCharWidth=C9("",r);var h=u.ascCharWidth=C9("a",r);u.placeholder=SO(s.placeholder,"");for(var p=t=Math.max(0,t-1),f=0;f<c&&p>=h;f++)p-=h;var v=C9(i,r);return v>p&&(i="",v=0),p=t-v,u.ellipsis=i,u.ellipsisWidth=v,u.contentWidth=p,u.containerWidth=t,u}function EE(t,r){var i=r.containerWidth,s=r.font,u=r.contentWidth;if(!i)return"";var c=C9(t,s);if(c<=i)return t;for(var h=0;;h++){if(c<=u||h>=r.maxIterations){t+=r.ellipsis;break}var p=0===h?function(t,r,i,s){for(var u=0,c=0,h=t.length;c<h&&u<r;c++){var p=t.charCodeAt(c);u+=0<=p&&p<=127?i:s}return c}(t,u,r.ascCharWidth,r.cnCharWidth):c>0?Math.floor(t.length*u/c):0;c=C9(t=t.substr(0,p),s)}return""===t&&(t=r.placeholder),t}var EI=function(){},ED=function(t){this.tokens=[],t&&(this.tokens=t)},EP=function(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]};function ER(t,r,i,s,u){var c,h,p=""===r,f=u&&i.rich[u]||{},v=t.lines,y=f.font||i.font,x=!1;if(s){var _=f.padding,b=_?_[1]+_[3]:0;if(null!=f.width&&"auto"!==f.width){var w=Tr(f.width,s.width)+b;v.length>0&&w+s.accumWidth>s.width&&(c=r.split("\n"),x=!0),s.accumWidth=w}else{var S=Ek(r,y,s.width,s.breakAll,s.accumWidth);s.accumWidth=S.accumWidth+b,h=S.linesWidths,c=S.lines}}else c=r.split("\n");for(var M=0;M<c.length;M++){var A=c[M],C=new EI;if(C.styleName=u,C.text=A,C.isLineHolder=!A&&!p,"number"==typeof f.width?C.width=f.width:C.width=h?h[M]:C9(A,y),M||x)v.push(new ED([C]));else{var T=(v[v.length-1]||(v[0]=new ED)).tokens,I=T.length;1===I&&T[0].isLineHolder?T[0]=C:(A||!I||p)&&T.push(C)}}}var EL=Sg(",&?/;] ".split(""),function(t,r){return t[r]=!0,t},{});function Ek(t,r,i,s,u){for(var c=[],h=[],p="",f="",v=0,y=0,x=0;x<t.length;x++){var _=t.charAt(x);if("\n"===_){f&&(p+=f,y+=v),c.push(p),h.push(y),p="",f="",v=0,y=0;continue}var b=C9(_,r),w=!s&&!function(t){var r;if((r=t.charCodeAt(0))>=32&&r<=591||r>=880&&r<=4351||r>=4608&&r<=5119||r>=7680&&r<=8303)return!!EL[t]||!1;return!0}(_);if(c.length?y+b>i:u+y+b>i){y?(p||f)&&(w?(!p&&(p=f,f="",y=v=0),c.push(p),h.push(y-v),f+=_,v+=b,p="",y=v):(f&&(p+=f,f="",v=0),c.push(p),h.push(y),p=_,y=b)):w?(c.push(f),h.push(v),f=_,v=b):(c.push(_),h.push(b));continue}y+=b,w?(f+=_,v+=b):(f&&(p+=f,f="",v=0),p+=_)}return!c.length&&!p&&(p=t,f="",v=0),f&&(p+=f),p&&(c.push(p),h.push(y)),1===c.length&&(y+=u),{accumWidth:y,lines:c,linesWidths:h}}var EO="__zr_style_"+Math.round(10*Math.random()),EB={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},EN={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};EB[EO]=!0;var EF=["z","z2","invisible"],Ez=["invisible"],EU=function(t){var r;function i(r){return t.call(this,r)||this}return wU(i,t),i.prototype._init=function(r){for(var i=Sy(r),s=0;s<i.length;s++){var u=i[s];"style"===u?this.useStyle(r[u]):t.prototype.attrKV.call(this,u,r[u])}!this.style&&this.useStyle({})},i.prototype.beforeBrush=function(){},i.prototype.afterBrush=function(){},i.prototype.innerBeforeBrush=function(){},i.prototype.innerAfterBrush=function(){},i.prototype.shouldBePainted=function(t,r,i,s){var u=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&function(t,r,i){return EH.copy(t.getBoundingRect()),t.transform&&EH.applyTransform(t.transform),EG.width=r,EG.height=i,!EH.intersect(EG)}(this,t,r)||u&&!u[0]&&!u[3])return!1;if(i&&this.__clipPaths){for(var c=0;c<this.__clipPaths.length;++c)if(this.__clipPaths[c].isZeroArea())return!1}if(s&&this.parent){for(var h=this.parent;h;){if(h.ignore)return!1;h=h.parent}}return!0},i.prototype.contain=function(t,r){return this.rectContain(t,r)},i.prototype.traverse=function(t,r){t.call(r,this)},i.prototype.rectContain=function(t,r){var i=this.transformCoordToLocal(t,r);return this.getBoundingRect().contain(i[0],i[1])},i.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,i=this.getBoundingRect(),s=this.style,u=s.shadowBlur||0,c=s.shadowOffsetX||0,h=s.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new M4(0,0,0,0)),r?M4.applyTransform(t,i,r):t.copy(i),(u||c||h)&&(t.width+=2*u+Math.abs(c),t.height+=2*u+Math.abs(h),t.x=Math.min(t.x,t.x+c-u),t.y=Math.min(t.y,t.y+h-u));var p=this.dirtyRectTolerance;!t.isZero()&&(t.x=Math.floor(t.x-p),t.y=Math.floor(t.y-p),t.width=Math.ceil(t.width+1+2*p),t.height=Math.ceil(t.height+1+2*p))}return t},i.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new M4(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},i.prototype.getPrevPaintRect=function(){return this._prevPaintRect},i.prototype.animateStyle=function(t){return this.animate("style",t)},i.prototype.updateDuringAnimation=function(t){"style"===t?this.dirtyStyle():this.markRedraw()},i.prototype.attrKV=function(r,i){"style"!==r?t.prototype.attrKV.call(this,r,i):this.style?this.setStyle(i):this.useStyle(i)},i.prototype.setStyle=function(t,r){return"string"==typeof t?this.style[t]=r:So(this.style,t),this.dirtyStyle(),this},i.prototype.dirtyStyle=function(t){!t&&this.markRedraw(),this.__dirty|=2,this._rect&&(this._rect=null)},i.prototype.dirty=function(){this.dirtyStyle()},i.prototype.styleChanged=function(){return!!(2&this.__dirty)},i.prototype.styleUpdated=function(){this.__dirty&=-3},i.prototype.createStyle=function(t){return SJ(EB,t)},i.prototype.useStyle=function(t){!t[EO]&&(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},i.prototype.isStyleObject=function(t){return t[EO]},i.prototype._innerSaveToNormal=function(r){t.prototype._innerSaveToNormal.call(this,r);var i=this._normalState;r.style&&!i.style&&(i.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,i,EF)},i.prototype._applyStateObj=function(r,i,s,u,c,h){t.prototype._applyStateObj.call(this,r,i,s,u,c,h);var p,f=!(i&&u);if(i&&i.style?c?u?p=i.style:(p=this._mergeStyle(this.createStyle(),s.style),this._mergeStyle(p,i.style)):(p=this._mergeStyle(this.createStyle(),u?this.style:s.style),this._mergeStyle(p,i.style)):f&&(p=s.style),p){if(c){var v=this.style;if(this.style=this.createStyle(f?{}:v),f){for(var y=Sy(v),x=0;x<y.length;x++){var _=y[x];_ in p&&(p[_]=p[_],this.style[_]=v[_])}}for(var b=Sy(p),x=0;x<b.length;x++){var _=b[x];this.style[_]=this.style[_]}this._transitionState(r,{style:p},h,this.getAnimationStyleProps())}else this.useStyle(p)}for(var w=this.__inHover?Ez:EF,x=0;x<w.length;x++){var _=w[x];i&&null!=i[_]?this[_]=i[_]:f&&null!=s[_]&&(this[_]=s[_])}},i.prototype._mergeStates=function(r){for(var i,s=t.prototype._mergeStates.call(this,r),u=0;u<r.length;u++){var c=r[u];c.style&&(i=i||{},this._mergeStyle(i,c.style))}return i&&(s.style=i),s},i.prototype._mergeStyle=function(t,r){return So(t,r),t},i.prototype.getAnimationStyleProps=function(){return EN},i.initDefaultProps=void((r=i.prototype).type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=3),i}(Tc),EH=new M4(0,0,0,0),EG=new M4(0,0,0,0),EV=Math.min,EW=Math.max,Ej=Math.sin,EX=Math.cos,EY=2*Math.PI,E$=S0(),EJ=S0(),EZ=S0();function EK(t,r,i){if(0!==t.length){for(var s=t[0],u=s[0],c=s[0],h=s[1],p=s[1],f=1;f<t.length;f++)u=EV(u,(s=t[f])[0]),c=EW(c,s[0]),h=EV(h,s[1]),p=EW(p,s[1]);r[0]=u,r[1]=h,i[0]=c,i[1]=p}}function Eq(t,r,i,s,u,c){u[0]=EV(t,i),u[1]=EV(r,s),c[0]=EW(t,i),c[1]=EW(r,s)}var EQ=[],E0=[],E1={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},E2=[],E3=[],E5=[],E4=[],E6=[],E9=[],E8=Math.min,E7=Math.max,Ie=Math.cos,It=Math.sin,In=Math.abs,Ir=Math.PI,Ii=2*Ir,Ia="undefined"!=typeof Float32Array,Io=[];function Is(t){return Math.round(t/Ir*1e8)/1e8%2*Ir}function Il(t,r){var i=Is(t[0]);i<0&&(i+=Ii);var s=i-t[0],u=t[1];u+=s,!r&&u-i>=Ii?u=i+Ii:r&&i-u>=Ii?u=i-Ii:!r&&i>u?u=i+(Ii-Is(i-u)):r&&i<u&&(u=i-(Ii-Is(u-i))),t[0]=i,t[1]=u}var Iu=function(){var t;function r(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return r.prototype.increaseVersion=function(){this._version++},r.prototype.getVersion=function(){return this._version},r.prototype.setScale=function(t,r,i){(i=i||0)>0&&(this._ux=In(i/C$/t)||0,this._uy=In(i/C$/r)||0)},r.prototype.setDPR=function(t){this.dpr=t},r.prototype.setContext=function(t){this._ctx=t},r.prototype.getContext=function(){return this._ctx},r.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},r.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},r.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(E1.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},r.prototype.lineTo=function(t,r){var i=In(t-this._xi),s=In(r-this._yi),u=i>this._ux||s>this._uy;if(this.addData(E1.L,t,r),this._ctx&&u&&this._ctx.lineTo(t,r),u)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var c=i*i+s*s;c>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=c)}return this},r.prototype.bezierCurveTo=function(t,r,i,s,u,c){return this._drawPendingPt(),this.addData(E1.C,t,r,i,s,u,c),this._ctx&&this._ctx.bezierCurveTo(t,r,i,s,u,c),this._xi=u,this._yi=c,this},r.prototype.quadraticCurveTo=function(t,r,i,s){return this._drawPendingPt(),this.addData(E1.Q,t,r,i,s),this._ctx&&this._ctx.quadraticCurveTo(t,r,i,s),this._xi=i,this._yi=s,this},r.prototype.arc=function(t,r,i,s,u,c){this._drawPendingPt(),Io[0]=s,Io[1]=u,Il(Io,c),s=Io[0];var h=(u=Io[1])-s;return this.addData(E1.A,t,r,i,i,s,h,0,c?0:1),this._ctx&&this._ctx.arc(t,r,i,s,u,c),this._xi=Ie(u)*i+t,this._yi=It(u)*i+r,this},r.prototype.arcTo=function(t,r,i,s,u){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,i,s,u),this},r.prototype.rect=function(t,r,i,s){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,i,s),this.addData(E1.R,t,r,i,s),this},r.prototype.closePath=function(){this._drawPendingPt(),this.addData(E1.Z);var t=this._ctx,r=this._x0,i=this._y0;return t&&t.closePath(),this._xi=r,this._yi=i,this},r.prototype.fill=function(t){t&&t.fill(),this.toStatic()},r.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},r.prototype.len=function(){return this._len},r.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&Ia&&(this.data=new Float32Array(r));for(var i=0;i<r;i++)this.data[i]=t[i];this._len=r},r.prototype.appendPath=function(t){!(t instanceof Array)&&(t=[t]);for(var r=t.length,i=0,s=this._len,u=0;u<r;u++)i+=t[u].len();Ia&&this.data instanceof Float32Array&&(this.data=new Float32Array(s+i));for(var u=0;u<r;u++){for(var c=t[u].data,h=0;h<c.length;h++)this.data[s++]=c[h]}this._len=s},r.prototype.addData=function(t,r,i,s,u,c,h,p,f){if(!!this._saveData){var v=this.data;this._len+arguments.length>v.length&&(this._expandData(),v=this.data);for(var y=0;y<arguments.length;y++)v[this._len++]=arguments[y]}},r.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},r.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},r.prototype.toStatic=function(){if(!!this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,Ia&&this._len>11&&(this.data=new Float32Array(t)))}},r.prototype.getBoundingRect=function(){E5[0]=E5[1]=E6[0]=E6[1]=Number.MAX_VALUE,E4[0]=E4[1]=E9[0]=E9[1]=-Number.MAX_VALUE;var t,r=this.data,i=0,s=0,u=0,c=0;for(t=0;t<this._len;){var h=r[t++],p=1===t;switch(p&&(i=r[t],s=r[t+1],u=i,c=s),h){case E1.M:i=u=r[t++],s=c=r[t++],E6[0]=u,E6[1]=c,E9[0]=u,E9[1]=c;break;case E1.L:Eq(i,s,r[t],r[t+1],E6,E9),i=r[t++],s=r[t++];break;case E1.C:!function(t,r,i,s,u,c,h,p,f,v){var y=AT(t,i,u,h,EQ);f[0]=1/0,f[1]=1/0,v[0]=-1/0,v[1]=-1/0;for(var x=0;x<y;x++){var _=AM(t,i,u,h,EQ[x]);f[0]=EV(_,f[0]),v[0]=EW(_,v[0])}y=AT(r,s,c,p,E0);for(var x=0;x<y;x++){var b=AM(r,s,c,p,E0[x]);f[1]=EV(b,f[1]),v[1]=EW(b,v[1])}f[0]=EV(t,f[0]),v[0]=EW(t,v[0]),f[0]=EV(h,f[0]),v[0]=EW(h,v[0]),f[1]=EV(r,f[1]),v[1]=EW(r,v[1]),f[1]=EV(p,f[1]),v[1]=EW(p,v[1])}(i,s,r[t++],r[t++],r[t++],r[t++],r[t],r[t+1],E6,E9),i=r[t++],s=r[t++];break;case E1.Q:!function(t,r,i,s,u,c,h,p){var f=EW(EV(AR(t,i,u),1),0),v=EW(EV(AR(r,s,c),1),0),y=AD(t,i,u,f),x=AD(r,s,c,v);h[0]=EV(t,u,y),h[1]=EV(r,c,x),p[0]=EW(t,u,y),p[1]=EW(r,c,x)}(i,s,r[t++],r[t++],r[t],r[t+1],E6,E9),i=r[t++],s=r[t++];break;case E1.A:var f=r[t++],v=r[t++],y=r[t++],x=r[t++],_=r[t++],b=r[t++]+_;t+=1;var w=!r[t++];p&&(u=Ie(_)*y+f,c=It(_)*x+v),!function(t,r,i,s,u,c,h,p,f){var v=Mp,y=Mf,x=Math.abs(u-c);if(x%EY<1e-4&&x>1e-4){p[0]=t-i,p[1]=r-s,f[0]=t+i,f[1]=r+s;return}if(E$[0]=EX(u)*i+t,E$[1]=Ej(u)*s+r,EJ[0]=EX(c)*i+t,EJ[1]=Ej(c)*s+r,v(p,E$,EJ),y(f,E$,EJ),(u%=EY)<0&&(u+=EY),(c%=EY)<0&&(c+=EY),u>c&&!h?c+=EY:u<c&&h&&(u+=EY),h){var _=c;c=u,u=_}for(var b=0;b<c;b+=Math.PI/2)b>u&&(EZ[0]=EX(b)*i+t,EZ[1]=Ej(b)*s+r,v(p,EZ,p),y(f,EZ,f))}(f,v,y,x,_,b,w,E6,E9),i=Ie(b)*y+f,s=It(b)*x+v;break;case E1.R:u=i=r[t++],Eq(u,c=s=r[t++],u+r[t++],c+r[t++],E6,E9);break;case E1.Z:i=u,s=c}Mp(E5,E5,E6),Mf(E4,E4,E9)}return 0===t&&(E5[0]=E5[1]=E4[0]=E4[1]=0),new M4(E5[0],E5[1],E4[0]-E5[0],E4[1]-E5[1])},r.prototype._calculateLength=function(){var t=this.data,r=this._len,i=this._ux,s=this._uy,u=0,c=0,h=0,p=0;!this._pathSegLen&&(this._pathSegLen=[]);for(var f=this._pathSegLen,v=0,y=0,x=0;x<r;){var _=t[x++],b=1===x;b&&(u=t[x],c=t[x+1],h=u,p=c);var w=-1;switch(_){case E1.M:u=h=t[x++],c=p=t[x++];break;case E1.L:var S=t[x++],M=t[x++],A=S-u,C=M-c;(In(A)>i||In(C)>s||x===r-1)&&(w=Math.sqrt(A*A+C*C),u=S,c=M);break;case E1.C:var T=t[x++],I=t[x++],S=t[x++],M=t[x++],D=t[x++],P=t[x++];w=function(t,r,i,s,u,c,h,p,f){for(var v=t,y=r,x=0,_=.1,b=1;b<=f;b++){var w=b*_,S=AM(t,i,u,h,w),M=AM(r,s,c,p,w),A=S-v,C=M-y;x+=Math.sqrt(A*A+C*C),v=S,y=M}return x}(u,c,T,I,S,M,D,P,10),u=D,c=P;break;case E1.Q:var T=t[x++],I=t[x++],S=t[x++],M=t[x++];w=function(t,r,i,s,u,c,h){for(var p=t,f=r,v=0,y=.1,x=1;x<=h;x++){var _=x*y,b=AD(t,i,u,_),w=AD(r,s,c,_),S=b-p,M=w-f;v+=Math.sqrt(S*S+M*M),p=b,f=w}return v}(u,c,T,I,S,M,10),u=S,c=M;break;case E1.A:var R=t[x++],L=t[x++],k=t[x++],O=t[x++],B=t[x++],N=t[x++],F=N+B;x+=1,b&&(h=Ie(B)*k+R,p=It(B)*O+L),w=E7(k,O)*E8(Ii,Math.abs(N)),u=Ie(F)*k+R,c=It(F)*O+L;break;case E1.R:h=u=t[x++],p=c=t[x++],w=2*t[x++]+2*t[x++];break;case E1.Z:var A=h-u,C=p-c;w=Math.sqrt(A*A+C*C),u=h,c=p}w>=0&&(f[y++]=w,v+=w)}return this._pathLen=v,v},r.prototype.rebuildPath=function(t,r){var i,s,u,c,h,p,f,v,y,x,_=this.data,b=this._ux,w=this._uy,S=this._len,M=r<1,A=0,C=0,T=0;if(!M||(!this._pathSegLen&&this._calculateLength(),f=this._pathSegLen,!!(v=r*this._pathLen)))s:for(var I=0;I<S;){var D=_[I++],P=1===I;switch(P&&(u=_[I],c=_[I+1],i=u,s=c),D!==E1.L&&T>0&&(t.lineTo(y,x),T=0),D){case E1.M:i=u=_[I++],s=c=_[I++],t.moveTo(u,c);break;case E1.L:h=_[I++],p=_[I++];var R=In(h-u),L=In(p-c);if(R>b||L>w){if(M){var k=f[C++];if(A+k>v){var O=(v-A)/k;t.lineTo(u*(1-O)+h*O,c*(1-O)+p*O);break s}A+=k}t.lineTo(h,p),u=h,c=p,T=0}else{var B=R*R+L*L;B>T&&(y=h,x=p,T=B)}break;case E1.C:var N=_[I++],F=_[I++],z=_[I++],U=_[I++],H=_[I++],G=_[I++];if(M){var k=f[C++];if(A+k>v){var O=(v-A)/k;AE(u,N,z,H,O,E2),AE(c,F,U,G,O,E3),t.bezierCurveTo(E2[1],E3[1],E2[2],E3[2],E2[3],E3[3]);break s}A+=k}t.bezierCurveTo(N,F,z,U,H,G),u=H,c=G;break;case E1.Q:var N=_[I++],F=_[I++],z=_[I++],U=_[I++];if(M){var k=f[C++];if(A+k>v){var O=(v-A)/k;AL(u,N,z,O,E2),AL(c,F,U,O,E3),t.quadraticCurveTo(E2[1],E3[1],E2[2],E3[2]);break s}A+=k}t.quadraticCurveTo(N,F,z,U),u=z,c=U;break;case E1.A:var V=_[I++],W=_[I++],j=_[I++],X=_[I++],Y=_[I++],$=_[I++],J=_[I++],Z=!_[I++],K=j>X?j:X,q=In(j-X)>.001,Q=Y+$,ee=!1;if(M){var k=f[C++];A+k>v&&(Q=Y+$*(v-A)/k,ee=!0),A+=k}if(q&&t.ellipse?t.ellipse(V,W,j,X,J,Y,Q,Z):t.arc(V,W,K,Y,Q,Z),ee)break s;P&&(i=Ie(Y)*j+V,s=It(Y)*X+W),u=Ie(Q)*j+V,c=It(Q)*X+W;break;case E1.R:i=u=_[I],s=c=_[I+1],h=_[I++],p=_[I++];var et=_[I++],en=_[I++];if(M){var k=f[C++];if(A+k>v){var er=v-A;t.moveTo(h,p),t.lineTo(h+E8(er,et),p),(er-=et)>0&&t.lineTo(h+et,p+E8(er,en)),(er-=en)>0&&t.lineTo(h+E7(et-er,0),p+en),(er-=et)>0&&t.lineTo(h,p+E7(en-er,0));break s}A+=k}t.rect(h,p,et,en);break;case E1.Z:if(M){var k=f[C++];if(A+k>v){var O=(v-A)/k;t.lineTo(u*(1-O)+i*O,c*(1-O)+s*O);break s}A+=k}t.closePath(),u=i,c=s}}},r.prototype.clone=function(){var t=new r,i=this.data;return t.data=i.slice?i.slice():Array.prototype.slice.call(i),t._len=this._len,t},r.CMD=E1,r.initDefaultProps=void((t=r.prototype)._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0),r}();function Ic(t,r,i,s,u,c,h){if(0===u)return!1;var p=0,f=t;if(h>r+u&&h>s+u||h<r-u&&h<s-u||c>t+u&&c>i+u||c<t-u&&c<i-u)return!1;if(t===i)return Math.abs(c-t)<=u/2;p=(r-s)/(t-i),f=(t*s-i*r)/(t-i);var v=p*c-h+f;return v*v/(p*p+1)<=u/2*u/2}function Ih(t,r,i,s,u,c,h,p,f){return 0!==h&&(!(f>r+h)||!(f>s+h)||!(f>c+h))&&(!(f<r-h)||!(f<s-h)||!(f<c-h))&&(!(p>t+h)||!(p>i+h)||!(p>u+h))&&(!(p<t-h)||!(p<i-h)||!(p<u-h))&&Ak(t,r,i,s,u,c,p,f,null)<=h/2}var Id=2*Math.PI;function Ip(t){return(t%=Id)<0&&(t+=Id),t}var If=2*Math.PI;function Ig(t,r,i,s,u,c){if(c>r&&c>s||c<r&&c<s||s===r)return 0;var h=(c-r)/(s-r),p=s<r?1:-1;(1===h||0===h)&&(p=s<r?.5:-.5);var f=h*(i-t)+t;return f===u?1/0:f>u?p:0}var Im=Iu.CMD,Iv=2*Math.PI,Iy=[-1,-1,-1],Ix=[-1,-1];function I_(t,r,i,s,u){for(var c,h,p=t.data,f=t.len(),v=0,y=0,x=0,_=0,b=0,w=0;w<f;){var S,M,A,C,T,I,D,P,R,L,k,O=p[w++],B=1===w;switch(O===Im.M&&w>1&&!i&&(v+=Ig(y,x,_,b,s,u)),B&&(y=p[w],x=p[w+1],_=y,b=x),O){case Im.M:_=p[w++],b=p[w++],y=_,x=b;break;case Im.L:if(i){if(Ic(y,x,p[w],p[w+1],r,s,u))return!0}else v+=Ig(y,x,p[w],p[w+1],s,u)||0;y=p[w++],x=p[w++];break;case Im.C:if(i){;if(S=y,M=x,A=p[w++],C=p[w++],T=p[w++],I=p[w++],D=p[w],P=p[w+1],R=r,L=s,k=u,0!==R&&(!(k>M+R)||!(k>C+R)||!(k>I+R)||!(k>P+R))&&(!(k<M-R)||!(k<C-R)||!(k<I-R)||!(k<P-R))&&(!(L>S+R)||!(L>A+R)||!(L>T+R)||!(L>D+R))&&(!(L<S-R)||!(L<A-R)||!(L<T-R)||!(L<D-R))&&AI(S,M,A,C,T,I,D,P,L,k,null)<=R/2)return!0}else v+=function(t,r,i,s,u,c,h,p,f,v){if(v>r&&v>s&&v>c&&v>p||v<r&&v<s&&v<c&&v<p)return 0;var y=AC(r,s,c,p,v,Iy);if(0===y)return 0;for(var x=0,_=-1,b=void 0,w=void 0,S=0;S<y;S++){var M=Iy[S],A=0===M||1===M?.5:1;if(!(AM(t,i,u,h,M)<f))_<0&&(_=AT(r,s,c,p,Ix),Ix[1]<Ix[0]&&_>1&&!function(){var t=Ix[0];Ix[0]=Ix[1],Ix[1]=t}(),b=AM(r,s,c,p,Ix[0]),_>1&&(w=AM(r,s,c,p,Ix[1]))),2===_?M<Ix[0]?x+=b<r?A:-A:M<Ix[1]?x+=w<b?A:-A:x+=p<w?A:-A:M<Ix[0]?x+=b<r?A:-A:x+=p<b?A:-A}return x}(y,x,p[w++],p[w++],p[w++],p[w++],p[w],p[w+1],s,u)||0;y=p[w++],x=p[w++];break;case Im.Q:if(i){if(Ih(y,x,p[w++],p[w++],p[w],p[w+1],r,s,u))return!0}else v+=function(t,r,i,s,u,c,h,p){if(p>r&&p>s&&p>c||p<r&&p<s&&p<c)return 0;var f=function(t,r,i,s,u){var c=t-2*r+i,h=2*(r-t),p=t-s,f=0;if(Aw(c)){if(AS(h)){var v=-p/h;v>=0&&v<=1&&(u[f++]=v)}}else{var y=h*h-4*c*p;if(Aw(y)){var v=-h/(2*c);v>=0&&v<=1&&(u[f++]=v)}else if(y>0){var x=Am(y),v=(-h+x)/(2*c),_=(-h-x)/(2*c);v>=0&&v<=1&&(u[f++]=v),_>=0&&_<=1&&(u[f++]=_)}}return f}(r,s,c,p,Iy);if(0===f)return 0;var v=AR(r,s,c);if(v>=0&&v<=1){for(var y=0,x=AD(r,s,c,v),_=0;_<f;_++){var b=0===Iy[_]||1===Iy[_]?.5:1,w=AD(t,i,u,Iy[_]);if(!(w<h))Iy[_]<v?y+=x<r?b:-b:y+=c<x?b:-b}return y}var b=0===Iy[0]||1===Iy[0]?.5:1,w=AD(t,i,u,Iy[0]);return w<h?0:c<r?b:-b}(y,x,p[w++],p[w++],p[w],p[w+1],s,u)||0;y=p[w++],x=p[w++];break;case Im.A:var N=p[w++],F=p[w++],z=p[w++],U=p[w++],H=p[w++],G=p[w++];w+=1;var V=!!(1-p[w++]);c=Math.cos(H)*z+N,h=Math.sin(H)*U+F,B?(_=c,b=h):v+=Ig(y,x,c,h,s,u);var W=(s-N)*U/z+N;if(i){if(function(t,r,i,s,u,c,h,p,f){if(0===h)return!1;var v=Math.sqrt((p-=t)*p+(f-=r)*f);if(v-h>i||v+h<i)return!1;if(Math.abs(s-u)%If<1e-4)return!0;if(c){var y=s;s=Ip(u),u=Ip(y)}else s=Ip(s),u=Ip(u);s>u&&(u+=If);var x=Math.atan2(f,p);return x<0&&(x+=If),x>=s&&x<=u||x+If>=s&&x+If<=u}(N,F,U,H,H+G,V,r,W,u))return!0}else v+=function(t,r,i,s,u,c,h,p){if((p-=r)>i||p<-i)return 0;var f=Math.sqrt(i*i-p*p);Iy[0]=-f,Iy[1]=f;var v=Math.abs(s-u);if(v<1e-4)return 0;if(v>=Iv-1e-4){s=0,u=Iv;var y=c?1:-1;return h>=Iy[0]+t&&h<=Iy[1]+t?y:0}if(s>u){var x=s;s=u,u=x}s<0&&(s+=Iv,u+=Iv);for(var _=0,b=0;b<2;b++){var w=Iy[b];if(w+t>h){var S=Math.atan2(p,w),y=c?1:-1;S<0&&(S=Iv+S),(S>=s&&S<=u||S+Iv>=s&&S+Iv<=u)&&(S>Math.PI/2&&S<1.5*Math.PI&&(y=-y),_+=y)}}return _}(N,F,U,H,H+G,V,W,u);y=Math.cos(H+G)*z+N,x=Math.sin(H+G)*U+F;break;case Im.R:_=y=p[w++],b=x=p[w++];var j=p[w++],X=p[w++];if(c=_+j,h=b+X,i){if(Ic(_,b,c,b,r,s,u)||Ic(c,b,c,h,r,s,u)||Ic(c,h,_,h,r,s,u)||Ic(_,h,_,b,r,s,u))return!0}else v+=Ig(c,b,c,h,s,u),v+=Ig(_,h,_,b,s,u);break;case Im.Z:if(i){if(Ic(y,x,_,b,r,s,u))return!0}else v+=Ig(y,x,_,b,s,u);y=_,x=b}}if(!i&&!(1e-4>Math.abs(x-b)))v+=Ig(y,x,_,b,s,u)||0;return 0!==v}var Ib=Ss({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},EB),Iw={style:Ss({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},EN.style)},IS=C5.concat(["invisible","culling","z","z2","zlevel","parent"]);let IM=function(t){var r;function i(r){return t.call(this,r)||this}return wU(i,t),i.prototype.update=function(){var r=this;t.prototype.update.call(this);var s=this.style;if(s.decal){var u=this._decalEl=this._decalEl||new i;u.buildPath===i.prototype.buildPath&&(u.buildPath=function(t){r.buildPath(t,r.shape)}),u.silent=!0;var c=u.style;for(var h in s)c[h]!==s[h]&&(c[h]=s[h]);c.fill=s.fill?s.decal:null,c.decal=null,c.shadowColor=null,s.strokeFirst&&(c.stroke=null);for(var p=0;p<IS.length;++p)u[IS[p]]=this[IS[p]];u.__dirty|=1}else this._decalEl&&(this._decalEl=null)},i.prototype.getDecalElement=function(){return this._decalEl},i.prototype._init=function(r){var i=Sy(r);this.shape=this.getDefaultShape();var s=this.getDefaultStyle();s&&this.useStyle(s);for(var u=0;u<i.length;u++){var c=i[u],h=r[c];"style"===c?this.style?So(this.style,h):this.useStyle(h):"shape"===c?So(this.shape,h):t.prototype.attrKV.call(this,c,h)}!this.style&&this.useStyle({})},i.prototype.getDefaultStyle=function(){return null},i.prototype.getDefaultShape=function(){return{}},i.prototype.canBeInsideText=function(){return this.hasFill()},i.prototype.getInsideTextFill=function(){var t=this.style.fill;if("none"!==t){if(SS(t)){var r=Ce(t,0);return r>.5?CJ:r>.2?"#eee":CZ}if(t)return CZ}return CJ},i.prototype.getInsideTextStroke=function(t){var r=this.style.fill;if(SS(r)){var i=this.__zr;if(!!(i&&i.isDarkMode())==.4>Ce(t,0))return r}},i.prototype.buildPath=function(t,r,i){},i.prototype.pathUpdated=function(){this.__dirty&=-5},i.prototype.getUpdatedPathProxy=function(t){return this.path||this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},i.prototype.createPathProxy=function(){this.path=new Iu(!1)},i.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return!(null==r||"none"===r||!(t.lineWidth>0))},i.prototype.hasFill=function(){var t=this.style.fill;return null!=t&&"none"!==t},i.prototype.getBoundingRect=function(){var t=this._rect,r=this.style,i=!t;if(i){var s=!1;!this.path&&(s=!0,this.createPathProxy());var u=this.path;(s||4&this.__dirty)&&(u.beginPath(),this.buildPath(u,this.shape,!1),this.pathUpdated()),t=u.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var c=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||i){c.copy(t);var h=r.strokeNoScale?this.getLineScale():1,p=r.lineWidth;if(!this.hasFill()){var f=this.strokeContainThreshold;p=Math.max(p,null==f?4:f)}h>1e-10&&(c.width+=p/h,c.height+=p/h,c.x-=p/h/2,c.y-=p/h/2)}return c}return t},i.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),s=this.getBoundingRect(),u=this.style;if(t=i[0],r=i[1],s.contain(t,r)){var c=this.path;if(this.hasStroke()){var h=u.lineWidth,p=u.strokeNoScale?this.getLineScale():1;if(p>1e-10){if(!this.hasFill()&&(h=Math.max(h,this.strokeContainThreshold)),I_(c,h/p,!0,t,r))return!0}}if(this.hasFill())return I_(c,0,!1,t,r)}return!1},i.prototype.dirtyShape=function(){this.__dirty|=4,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},i.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},i.prototype.animateShape=function(t){return this.animate("shape",t)},i.prototype.updateDuringAnimation=function(t){"style"===t?this.dirtyStyle():"shape"===t?this.dirtyShape():this.markRedraw()},i.prototype.attrKV=function(r,i){"shape"===r?this.setShape(i):t.prototype.attrKV.call(this,r,i)},i.prototype.setShape=function(t,r){var i=this.shape;return!i&&(i=this.shape={}),"string"==typeof t?i[t]=r:So(i,t),this.dirtyShape(),this},i.prototype.shapeChanged=function(){return!!(4&this.__dirty)},i.prototype.createStyle=function(t){return SJ(Ib,t)},i.prototype._innerSaveToNormal=function(r){t.prototype._innerSaveToNormal.call(this,r);var i=this._normalState;r.shape&&!i.shape&&(i.shape=So({},this.shape))},i.prototype._applyStateObj=function(r,i,s,u,c,h){t.prototype._applyStateObj.call(this,r,i,s,u,c,h);var p,f=!(i&&u);if(i&&i.shape?c?u?p=i.shape:(p=So({},s.shape),So(p,i.shape)):(p=So({},u?this.shape:s.shape),So(p,i.shape)):f&&(p=s.shape),p){if(c){this.shape=So({},this.shape);for(var v={},y=Sy(p),x=0;x<y.length;x++){var _=y[x];"object"==typeof p[_]?this.shape[_]=p[_]:v[_]=p[_]}this._transitionState(r,{shape:v},h)}else this.shape=p,this.dirtyShape()}},i.prototype._mergeStates=function(r){for(var i,s=t.prototype._mergeStates.call(this,r),u=0;u<r.length;u++){var c=r[u];c.shape&&(i=i||{},this._mergeStyle(i,c.shape))}return i&&(s.shape=i),s},i.prototype.getAnimationStyleProps=function(){return Iw},i.prototype.isZeroArea=function(){return!1},i.extend=function(t){var r=function(r){function i(i){var s=r.call(this,i)||this;return t.init&&t.init.call(s,i),s}return wU(i,r),i.prototype.getDefaultStyle=function(){return Sr(t.style)},i.prototype.getDefaultShape=function(){return Sr(t.shape)},i}(i);for(var s in t)"function"==typeof t[s]&&(r.prototype[s]=t[s]);return r},i.initDefaultProps=void((r=i.prototype).type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=7),i}(EU);var IA=Ss({strokeFirst:!0,font:wJ,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},Ib),IC=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return null!=r&&"none"!==r&&t.lineWidth>0},r.prototype.hasFill=function(){var t=this.style.fill;return null!=t&&"none"!==t},r.prototype.createStyle=function(t){return SJ(IA,t)},r.prototype.setBoundingRect=function(t){this._rect=t},r.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var r=t.text;null!=r?r+="":r="";var i=C7(r,t.font,t.textAlign,t.textBaseline);if(i.x+=t.x||0,i.y+=t.y||0,this.hasStroke()){var s=t.lineWidth;i.x-=s/2,i.y-=s/2,i.width+=s,i.height+=s}this._rect=i}return this._rect},r.initDefaultProps=void(r.prototype.dirtyRectTolerance=10),r}(EU);IC.prototype.type="tspan";var IT=Ss({x:0,y:0},EB),IE={style:Ss({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},EN.style)},II=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.prototype.createStyle=function(t){return SJ(IT,t)},r.prototype._getSize=function(t){var r,i=this.style,s=i[t];if(null!=s)return s;var u=(r=i.image)&&"string"!=typeof r&&r.width&&r.height?i.image:this.__image;if(!u)return 0;var c="width"===t?"height":"width",h=i[c];return null==h?u[t]:u[t]/u[c]*h},r.prototype.getWidth=function(){return this._getSize("width")},r.prototype.getHeight=function(){return this._getSize("height")},r.prototype.getAnimationStyleProps=function(){return IE},r.prototype.getBoundingRect=function(){var t=this.style;return!this._rect&&(this._rect=new M4(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},r}(EU);II.prototype.type="image";let ID=II;var IP=Math.round;function IR(t,r,i){if(!!r){var s=r.x1,u=r.x2,c=r.y1,h=r.y2;t.x1=s,t.x2=u,t.y1=c,t.y2=h;var p=i&&i.lineWidth;return p?(IP(2*s)===IP(2*u)&&(t.x1=t.x2=Ik(s,p,!0)),IP(2*c)===IP(2*h)&&(t.y1=t.y2=Ik(c,p,!0)),t):t}}function IL(t,r,i){if(!!r){var s=r.x,u=r.y,c=r.width,h=r.height;t.x=s,t.y=u,t.width=c,t.height=h;var p=i&&i.lineWidth;return p?(t.x=Ik(s,p,!0),t.y=Ik(u,p,!0),t.width=Math.max(Ik(s+c,p,!1)-t.x,0===c?0:1),t.height=Math.max(Ik(u+h,p,!1)-t.y,0===h?0:1),t):t}}function Ik(t,r,i){if(!r)return t;var s=IP(2*t);return(s+IP(r))%2==0?s/2:(s+(i?1:-1))/2}var IO=function(){this.x=0,this.y=0,this.width=0,this.height=0},IB={},IN=function(t){function r(r){return t.call(this,r)||this}return wU(r,t),r.prototype.getDefaultShape=function(){return new IO},r.prototype.buildPath=function(t,r){if(this.subPixelOptimize){var i,s,u,c,h,p,f,v,y,x,_,b,w,S,M,A,C=IL(IB,r,this.style);w=C.x,S=C.y,M=C.width,A=C.height,C.r=r.r,r=C}else w=r.x,S=r.y,M=r.width,A=r.height;if(r.r){;i=t,v=(s=r).x,y=s.y,x=s.width,_=s.height,b=s.r,x<0&&(v+=x,x=-x),_<0&&(y+=_,_=-_),"number"==typeof b?u=c=h=p=b:b instanceof Array?1===b.length?u=c=h=p=b[0]:2===b.length?(u=h=b[0],c=p=b[1]):3===b.length?(u=b[0],c=p=b[1],h=b[2]):(u=b[0],c=b[1],h=b[2],p=b[3]):u=c=h=p=0,u+c>x&&(f=u+c,u*=x/f,c*=x/f),h+p>x&&(f=h+p,h*=x/f,p*=x/f),c+h>_&&(f=c+h,c*=_/f,h*=_/f),u+p>_&&(f=u+p,u*=_/f,p*=_/f),i.moveTo(v+u,y),i.lineTo(v+x-c,y),0!==c&&i.arc(v+x-c,y+c,c,-Math.PI/2,0),i.lineTo(v+x,y+_-h),0!==h&&i.arc(v+x-h,y+_-h,h,0,Math.PI/2),i.lineTo(v+p,y+_),0!==p&&i.arc(v+p,y+_-p,p,Math.PI/2,Math.PI),i.lineTo(v,y+u),0!==u&&i.arc(v+u,y+u,u,Math.PI,1.5*Math.PI)}else t.rect(w,S,M,A)},r.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},r}(IM);IN.prototype.type="rect";let IF=IN;var Iz={fill:"#000"},IU={style:Ss({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},EN.style)},IH=function(t){function r(r){var i=t.call(this)||this;return i.type="text",i._children=[],i._defaultStyle=Iz,i.attr(r),i}return wU(r,t),r.prototype.childrenRef=function(){return this._children},r.prototype.update=function(){t.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var i=this._children[r];i.zlevel=this.zlevel,i.z=this.z,i.z2=this.z2,i.culling=this.culling,i.cursor=this.cursor,i.invisible=this.invisible}},r.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):t.prototype.updateTransform.call(this)},r.prototype.getLocalTransform=function(r){var i=this.innerTransformable;return i?i.getLocalTransform(r):t.prototype.getLocalTransform.call(this,r)},r.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),t.prototype.getComputedTransform.call(this)},r.prototype._updateSubTexts=function(){this._childCursor=0,function(t){I$(t),Sp(t.rich,I$)}(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},r.prototype.addSelfToZr=function(r){t.prototype.addSelfToZr.call(this,r);for(var i=0;i<this._children.length;i++)this._children[i].__zr=r},r.prototype.removeSelfFromZr=function(r){t.prototype.removeSelfFromZr.call(this,r);for(var i=0;i<this._children.length;i++)this._children[i].__zr=null},r.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new M4(0,0,0,0),r=this._children,i=[],s=null,u=0;u<r.length;u++){var c=r[u],h=c.getBoundingRect(),p=c.getLocalTransform(i);p?(t.copy(h),t.applyTransform(p),(s=s||t.clone()).union(t)):(s=s||h.clone()).union(h)}this._rect=s||t}return this._rect},r.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||Iz},r.prototype.setTextContent=function(t){},r.prototype._mergeStyle=function(t,r){if(!r)return t;var i=r.rich,s=t.rich||i&&{};return So(t,r),i&&s?(this._mergeRich(s,i),t.rich=s):s&&(t.rich=s),t},r.prototype._mergeRich=function(t,r){for(var i=Sy(r),s=0;s<i.length;s++){var u=i[s];t[u]=t[u]||{},So(t[u],r[u])}},r.prototype.getAnimationStyleProps=function(){return IU},r.prototype._getOrCreateChild=function(t){var r=this._children[this._childCursor];return(!r||!(r instanceof t))&&(r=new t),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},r.prototype._updatePlainTexts=function(){var t=this.style,r=t.font||wJ,i=t.padding,s=function(t,r){null!=t&&(t+="");var i,s=r.overflow,u=r.padding,c=r.font,h=Tn(c),p=SO(r.lineHeight,h),f=!!r.backgroundColor,v="truncate"===r.lineOverflow,y=r.width,x=(i=null!=y&&("break"===s||"breakAll"===s)?t?Ek(t,r.font,y,"breakAll"===s,0).lines:[]:t?t.split("\n"):[]).length*p,_=SO(r.height,x);if(x>_&&v){var b=Math.floor(_/p);i=i.slice(0,b)}if(t&&"truncate"===s&&null!=y){for(var w=ET(y,c,r.ellipsis,{minChar:r.truncateMinChar,placeholder:r.placeholder}),S=0;S<i.length;S++)i[S]=EE(i[S],w)}for(var M=_,A=0,S=0;S<i.length;S++)A=Math.max(C9(i[S],c),A);null==y&&(y=A);var C=A;return u&&(M+=u[0]+u[2],C+=u[1]+u[3],y+=u[1]+u[3]),f&&(C=y),{lines:i,height:_,outerWidth:C,outerHeight:M,lineHeight:p,calculatedLineHeight:h,contentWidth:A,contentHeight:x,width:y}}(Iq(t),t),u=IQ(t),c=!!t.backgroundColor,h=s.outerHeight,p=s.outerWidth,f=s.contentWidth,v=s.lines,y=s.lineHeight,x=this._defaultStyle,_=t.x||0,b=t.y||0,w=t.align||x.align||"left",S=t.verticalAlign||x.verticalAlign||"top",M=_,A=Tt(b,s.contentHeight,S);if(u||i){var C=Te(_,p,w),T=Tt(b,h,S);u&&this._renderBackground(t,t,C,T,p,h)}A+=y/2,i&&(M=IK(_,w,i),"top"===S?A+=i[0]:"bottom"===S&&(A-=i[2]));for(var I=0,D=!1,P=IZ("fill"in t?t.fill:(D=!0,x.fill)),R=IJ("stroke"in t?t.stroke:c||x.autoStroke&&!D?null:(I=2,x.stroke)),L=t.textShadowBlur>0,k=null!=t.width&&("truncate"===t.overflow||"break"===t.overflow||"breakAll"===t.overflow),O=s.calculatedLineHeight,B=0;B<v.length;B++){var N=this._getOrCreateChild(IC),F=N.createStyle();N.useStyle(F),F.text=v[B],F.x=M,F.y=A,w&&(F.textAlign=w),F.textBaseline="middle",F.opacity=t.opacity,F.strokeFirst=!0,L&&(F.shadowBlur=t.textShadowBlur||0,F.shadowColor=t.textShadowColor||"transparent",F.shadowOffsetX=t.textShadowOffsetX||0,F.shadowOffsetY=t.textShadowOffsetY||0),F.stroke=R,F.fill=P,R&&(F.lineWidth=t.lineWidth||I,F.lineDash=t.lineDash,F.lineDashOffset=t.lineDashOffset||0),F.font=r,IX(F,t),A+=y,k&&N.setBoundingRect(new M4(Te(F.x,t.width,F.textAlign),Tt(F.y,O,F.textBaseline),f,O))}},r.prototype._updateRichTexts=function(){var t=this.style,r=function(t,r){var i,s=new EP;if(null!=t&&(t+=""),!t)return s;for(var u=r.width,c=r.height,h=r.overflow,p=("break"===h||"breakAll"===h)&&null!=u?{width:u,accumWidth:0,breakAll:"breakAll"===h}:null,f=EA.lastIndex=0;null!=(i=EA.exec(t));){var v=i.index;v>f&&ER(s,t.substring(f,v),r,p),ER(s,i[2],r,p,i[1]),f=EA.lastIndex}f<t.length&&ER(s,t.substring(f,t.length),r,p);var y=[],x=0,_=0,b=r.padding,w="truncate"===h,S="truncate"===r.lineOverflow;function M(t,r,i){t.width=r,t.lineHeight=i,x+=i,_=Math.max(_,r)}l:for(var A=0;A<s.lines.length;A++){for(var C=s.lines[A],T=0,I=0,D=0;D<C.tokens.length;D++){var P=C.tokens[D],R=P.styleName&&r.rich[P.styleName]||{},L=P.textPadding=R.padding,k=L?L[1]+L[3]:0,O=P.font=R.font||r.font;P.contentHeight=Tn(O);var B=SO(R.height,P.contentHeight);if(P.innerHeight=B,L&&(B+=L[0]+L[2]),P.height=B,P.lineHeight=SB(R.lineHeight,r.lineHeight,B),P.align=R&&R.align||r.align,P.verticalAlign=R&&R.verticalAlign||"middle",S&&null!=c&&x+P.lineHeight>c){D>0?(C.tokens=C.tokens.slice(0,D),M(C,I,T),s.lines=s.lines.slice(0,A+1)):s.lines=s.lines.slice(0,A);break l}var N=R.width,F=null==N||"auto"===N;if("string"==typeof N&&"%"===N.charAt(N.length-1))P.percentWidth=N,y.push(P),P.contentWidth=C9(P.text,O);else{if(F){var z=R.backgroundColor,U=z&&z.image;U&&EM(U=function(t){if("string"!=typeof t)return t;var r=Eb.get(t);return r&&r.image}(U))&&(P.width=Math.max(P.width,U.width*B/U.height))}var H=w&&null!=u?u-I:null;null!=H&&H<P.width?!F||H<k?(P.text="",P.width=P.contentWidth=0):(P.text=EC(P.text,H-k,O,r.ellipsis,{minChar:r.truncateMinChar}),P.width=P.contentWidth=C9(P.text,O)):P.contentWidth=C9(P.text,O)}P.width+=k,I+=P.width,R&&(T=Math.max(T,P.lineHeight))}M(C,I,T)}s.outerWidth=s.width=SO(u,_),s.outerHeight=s.height=SO(c,x),s.contentHeight=x,s.contentWidth=_,b&&(s.outerWidth+=b[1]+b[3],s.outerHeight+=b[0]+b[2]);for(var A=0;A<y.length;A++){var P=y[A],G=P.percentWidth;P.width=parseInt(G,10)/100*s.width}return s}(Iq(t),t),i=r.width,s=r.outerWidth,u=r.outerHeight,c=t.padding,h=t.x||0,p=t.y||0,f=this._defaultStyle,v=t.align||f.align,y=t.verticalAlign||f.verticalAlign,x=Te(h,s,v),_=Tt(p,u,y),b=x,w=_;c&&(b+=c[3],w+=c[0]);var S=b+i;IQ(t)&&this._renderBackground(t,t,x,_,s,u);for(var M=!!t.backgroundColor,A=0;A<r.lines.length;A++){for(var C=r.lines[A],T=C.tokens,I=T.length,D=C.lineHeight,P=C.width,R=0,L=b,k=S,O=I-1,B=void 0;R<I&&(!(B=T[R]).align||"left"===B.align);)this._placeToken(B,t,D,w,L,"left",M),P-=B.width,L+=B.width,R++;for(;O>=0&&"right"===(B=T[O]).align;)this._placeToken(B,t,D,w,k,"right",M),P-=B.width,k-=B.width,O--;for(L+=(i-(L-b)-(S-k)-P)/2;R<=O;)B=T[R],this._placeToken(B,t,D,w,L+B.width/2,"center",M),L+=B.width,R++;w+=D}},r.prototype._placeToken=function(t,r,i,s,u,c,h){var p=r.rich[t.styleName]||{};p.text=t.text;var f=t.verticalAlign,v=s+i/2;"top"===f?v=s+t.height/2:"bottom"===f&&(v=s+i-t.height/2),!t.isLineHolder&&IQ(p)&&this._renderBackground(p,r,"right"===c?u-t.width:"center"===c?u-t.width/2:u,v-t.height/2,t.width,t.height);var y=!!p.backgroundColor,x=t.textPadding;x&&(u=IK(u,c,x),v-=t.height/2-x[0]-t.innerHeight/2);var _=this._getOrCreateChild(IC),b=_.createStyle();_.useStyle(b);var w=this._defaultStyle,S=!1,M=0,A=IZ("fill"in p?p.fill:"fill"in r?r.fill:(S=!0,w.fill)),C=IJ("stroke"in p?p.stroke:"stroke"in r?r.stroke:y||h||w.autoStroke&&!S?null:(M=2,w.stroke)),T=p.textShadowBlur>0||r.textShadowBlur>0;b.text=t.text,b.x=u,b.y=v,T&&(b.shadowBlur=p.textShadowBlur||r.textShadowBlur||0,b.shadowColor=p.textShadowColor||r.textShadowColor||"transparent",b.shadowOffsetX=p.textShadowOffsetX||r.textShadowOffsetX||0,b.shadowOffsetY=p.textShadowOffsetY||r.textShadowOffsetY||0),b.textAlign=c,b.textBaseline="middle",b.font=t.font||wJ,b.opacity=SB(p.opacity,r.opacity,1),IX(b,p),C&&(b.lineWidth=SB(p.lineWidth,r.lineWidth,M),b.lineDash=SO(p.lineDash,r.lineDash),b.lineDashOffset=r.lineDashOffset||0,b.stroke=C),A&&(b.fill=A);var I=t.contentWidth,D=t.contentHeight;_.setBoundingRect(new M4(Te(b.x,I,b.textAlign),Tt(b.y,D,b.textBaseline),I,D))},r.prototype._renderBackground=function(t,r,i,s,u,c){var h,p,f=t.backgroundColor,v=t.borderWidth,y=t.borderColor,x=f&&f.image,_=f&&!x,b=t.borderRadius,w=this;if(_||t.lineHeight||v&&y){(h=this._getOrCreateChild(IF)).useStyle(h.createStyle()),h.style.fill=null;var S=h.shape;S.x=i,S.y=s,S.width=u,S.height=c,S.r=b,h.dirtyShape()}if(_){var M=h.style;M.fill=f||null,M.fillOpacity=SO(t.fillOpacity,1)}else if(x){(p=this._getOrCreateChild(ID)).onload=function(){w.dirtyStyle()};var A=p.style;A.image=f.image,A.x=i,A.y=s,A.width=u,A.height=c}if(v&&y){var M=h.style;M.lineWidth=v,M.stroke=y,M.strokeOpacity=SO(t.strokeOpacity,1),M.lineDash=t.borderDash,M.lineDashOffset=t.borderDashOffset||0,h.strokeContainThreshold=0,h.hasFill()&&h.hasStroke()&&(M.strokeFirst=!0,M.lineWidth*=2)}var C=(h||p).style;C.shadowBlur=t.shadowBlur||0,C.shadowColor=t.shadowColor||"transparent",C.shadowOffsetX=t.shadowOffsetX||0,C.shadowOffsetY=t.shadowOffsetY||0,C.opacity=SB(t.opacity,r.opacity,1)},r.makeFont=function(t){var r="";return IY(t)&&(r=[t.fontStyle,t.fontWeight,Ij(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),r&&SU(r)||t.textFont||t.font},r}(EU),IG={left:!0,right:1,center:1},IV={top:1,bottom:1,middle:1},IW=["fontStyle","fontWeight","fontSize","fontFamily"];function Ij(t){return"string"==typeof t&&(-1!==t.indexOf("px")||-1!==t.indexOf("rem")||-1!==t.indexOf("em"))?t:isNaN(+t)?"12px":t+"px"}function IX(t,r){for(var i=0;i<IW.length;i++){var s=IW[i],u=r[s];null!=u&&(t[s]=u)}}function IY(t){return null!=t.fontSize||t.fontFamily||t.fontWeight}function I$(t){if(t){t.font=IH.makeFont(t);var r=t.align;"middle"===r&&(r="center"),t.align=null==r||IG[r]?r:"left";var i=t.verticalAlign;"center"===i&&(i="middle"),t.verticalAlign=null==i||IV[i]?i:"top",t.padding&&(t.padding=SF(t.padding))}}function IJ(t,r){return null==t||r<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function IZ(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function IK(t,r,i){return"right"===r?t-i[1]:"center"===r?t+i[3]/2-i[1]/2:t+i[3]}function Iq(t){var r=t.text;return null!=r&&(r+=""),r}function IQ(t){return!!(t.backgroundColor||t.lineHeight||t.borderWidth&&t.borderColor)}let I0=IH;var I1=T7(),I2=function(t,r,i,s){if(s){var u=I1(s);u.dataIndex=i,u.dataType=r,u.seriesIndex=t,u.ssrType="chart","group"===s.type&&s.traverse(function(s){var u=I1(s);u.seriesIndex=t,u.dataIndex=i,u.dataType=r,u.ssrType="chart"})}},I3=1,I5={},I4=T7(),I6=T7(),I9=["emphasis","blur","select"],I8=["normal","emphasis","blur","select"],I7="highlight",De="downplay",Dt="select",Dn="unselect",Dr="toggleSelect";function Di(t){return null!=t&&"none"!==t}function Da(t,r,i){t.onHoverStateChange&&(t.hoverState||0)!==i&&t.onHoverStateChange(r),t.hoverState=i}function Do(t){Da(t,"emphasis",2)}function Ds(t){2===t.hoverState&&Da(t,"normal",0)}function Dl(t){Da(t,"blur",1)}function Du(t){1===t.hoverState&&Da(t,"normal",0)}function Dc(t){t.selected=!0}function Dh(t){t.selected=!1}function Dd(t,r,i){r(t,i)}function Dp(t,r,i){r(t,i),t.isGroup&&t.traverse(function(t){r(t,i)})}function Df(t,r){switch(r){case"emphasis":t.hoverState=2;break;case"normal":t.hoverState=0;break;case"blur":t.hoverState=1;break;case"select":t.selected=!0}}function Dg(t,r){var i,s,u,c,h,p,f,v=this.states[t];if(this.style){if("emphasis"===t)return function(t,r,i,s){var u=i&&Su(i,"select")>=0,c=!1;if(t instanceof IM){var h=I4(t),p=u&&h.selectFill||h.normalFill,f=u&&h.selectStroke||h.normalStroke;if(Di(p)||Di(f)){var v=(s=s||{}).style||{};"inherit"===v.fill?(c=!0,s=So({},s),(v=So({},v)).fill=p):!Di(v.fill)&&Di(p)?(c=!0,s=So({},s),(v=So({},v)).fill=Cr(p)):!Di(v.stroke)&&Di(f)&&(!c&&(s=So({},s),v=So({},v)),v.stroke=Cr(f)),s.style=v}}if(s&&null==s.z2){!c&&(s=So({},s));var y=t.z2EmphasisLift;s.z2=t.z2+(null!=y?y:10)}return s}(this,0,r,v);if("blur"===t){;return i=this,s=t,u=v,c=Su(i.currentStates,s)>=0,h=i.style.opacity,p=c?null:function(t,r,i,s){for(var u=t.style,c={},h=0;h<r.length;h++){var p=r[h],f=u[p];c[p]=null==f?s&&s[p]:f}for(var h=0;h<t.animators.length;h++){var v=t.animators[h];v.__fromStateTransition&&0>v.__fromStateTransition.indexOf(i)&&"style"===v.targetName&&v.saveTo(c,r)}return c}(i,["opacity"],s,{opacity:1}),null==(f=(u=u||{}).style||{}).opacity&&(u=So({},u),f=So({opacity:c?h:.1*p.opacity},f),u.style=f),u}else if("select"===t)return function(t,r,i){if(i&&null==i.z2){i=So({},i);var s=t.z2SelectLift;i.z2=t.z2+(null!=s?s:9)}return i}(this,0,v)}return v}function Dm(t){t.stateProxy=Dg;var r=t.getTextContent(),i=t.getTextGuideLine();r&&(r.stateProxy=Dg),i&&(i.stateProxy=Dg)}function Dv(t,r){DA(t,r)||t.__highByOuter||Dp(t,Do)}function Dy(t,r){DA(t,r)||t.__highByOuter||Dp(t,Ds)}function Dx(t,r){t.__highByOuter|=1<<(r||0),Dp(t,Do)}function D_(t,r){(t.__highByOuter&=~(1<<(r||0)))||Dp(t,Ds)}function Db(t){Dp(t,Dl)}function Dw(t){Dp(t,Du)}function DS(t){Dp(t,Dc)}function DM(t){Dp(t,Dh)}function DA(t,r){return t.__highDownSilentOnTouch&&r.zrByTouch}function DC(t){var r=t.getModel(),i=[],s=[];r.eachComponent(function(r,u){var c=I6(u),h="series"===r,p=h?t.getViewOfSeriesModel(u):t.getViewOfComponentModel(u);h||s.push(p),c.isBlured&&(p.group.traverse(function(t){Du(t)}),h&&i.push(u)),c.isBlured=!1}),Sp(s,function(t){t&&t.toggleBlurSeries&&t.toggleBlurSeries(i,!1,r)})}function DT(t,r,i,s){var u=s.getModel();function c(t,r){for(var i=0;i<r.length;i++){var s=t.getItemGraphicEl(r[i]);s&&Dp(s,Du)}}if(i=i||"coordinateSystem",null!=t&&!!r&&"none"!==r){var h=u.getSeriesByIndex(t),p=h.coordinateSystem;p&&p.master&&(p=p.master);var f=[];u.eachSeries(function(t){var u=h===t,v=t.coordinateSystem;v&&v.master&&(v=v.master);var y=v&&p?v===p:u;if(!("series"===i&&!u||"coordinateSystem"===i&&!y||"series"===r&&u)){if(s.getViewOfSeriesModel(t).group.traverse(function(t){if(!t.__highByOuter||!u||"self"!==r)Dl(t)}),Sd(r))c(t.getData(),r);else if(SC(r)){for(var x=Sy(r),_=0;_<x.length;_++)c(t.getData(x[_]),r[x[_]])}f.push(t),I6(t).isBlured=!0}}),u.eachComponent(function(t,r){if("series"!==t){var i=s.getViewOfComponentModel(r);i&&i.toggleBlurSeries&&i.toggleBlurSeries(f,!0,u)}})}}function DE(t,r,i){if(null==t||null==r)return;var s=i.getModel().getComponent(t,r);if(!s)return;I6(s).isBlured=!0;var u=i.getViewOfComponentModel(s);if(!!u&&!!u.focusBlurEnabled)u.group.traverse(function(t){Dl(t)})}function DI(t,r,i,s){var u,c={focusSelf:!1,dispatchers:null};if(null==t||"series"===t||null==r||null==i)return c;var h=s.getModel().getComponent(t,r);if(!h)return c;var p=s.getViewOfComponentModel(h);if(!p||!p.findHighDownDispatchers)return c;for(var f=p.findHighDownDispatchers(i),v=0;v<f.length;v++)if("self"===I1(f[v]).focus){u=!0;break}return{focusSelf:u,dispatchers:f}}function DD(t){Sp(t.getAllData(),function(r){var i=r.data,s=r.type;i.eachItemGraphicEl(function(r,i){t.isSelected(i,s)?Dp(r,Dc):Dp(r,Dh)})})}function DP(t,r,i){DN(t,!0),Dp(t,Dm),DL(t,r,i)}function DR(t,r,i,s){s?DN(t,!1):DP(t,r,i)}function DL(t,r,i){var s=I1(t);null!=r?(s.focus=r,s.blurScope=i):s.focus&&(s.focus=null)}var Dk=["emphasis","blur","select"],DO={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function DB(t,r,i,s){i=i||"itemStyle";for(var u=0;u<Dk.length;u++){var c=Dk[u],h=r.getModel([c,i]);t.ensureState(c).style=s?s(h):h[DO[i]]()}}function DN(t,r){var i=!1===r;t.highDownSilentOnTouch&&(t.__highDownSilentOnTouch=t.highDownSilentOnTouch),(!i||t.__highDownDispatcher)&&(t.__highByOuter=t.__highByOuter||0,t.__highDownDispatcher=!i)}function DF(t){return!!(t&&t.__highDownDispatcher)}function Dz(t){var r=t.type;return r===Dt||r===Dn||r===Dr}function DU(t){var r=t.type;return r===I7||r===De}var DH=T7();function DG(t,r,i,s,u){if(r&&r.ecModel){var c,h=r.ecModel.getUpdatePayload();c=h&&h.animation}var p=r&&r.isAnimationEnabled(),f="update"===t;if(!p)return null;var v=void 0,y=void 0,x=void 0;return s?(v=SO(s.duration,200),y=SO(s.easing,"cubicOut"),x=0):(v=r.getShallow(f?"animationDurationUpdate":"animationDuration"),y=r.getShallow(f?"animationEasingUpdate":"animationEasing"),x=r.getShallow(f?"animationDelayUpdate":"animationDelay")),c&&(null!=c.duration&&(v=c.duration),null!=c.easing&&(y=c.easing),null!=c.delay&&(x=c.delay)),Sw(x)&&(x=x(i,u)),Sw(v)&&(v=v(i)),{duration:v||0,delay:x,easing:y}}function DV(t,r,i,s,u,c,h){var p,f=!1;Sw(u)?(h=c,c=u,u=null):SC(u)&&(c=u.cb,h=u.during,f=u.isFrom,p=u.removeOpt,u=u.dataIndex);var v="leave"===t;!v&&r.stopAnimation("leave");var y=DG(t,s,u,v?p||{}:null,s&&s.getAnimationDelayParams?s.getAnimationDelayParams(r,u):null);if(y&&y.duration>0){var x={duration:y.duration,delay:y.delay||0,easing:y.easing,done:c,force:!!c||!!h,setToFinal:!v,scope:t,during:h};f?r.animateFrom(i,x):r.animateTo(i,x)}else r.stopAnimation(),f||r.attr(i),h&&h(1),c&&c()}function DW(t,r,i,s,u,c){DV("update",t,r,i,s,u,c)}function Dj(t,r,i,s,u,c){DV("enter",t,r,i,s,u,c)}function DX(t){if(!t.__zr)return!0;for(var r=0;r<t.animators.length;r++)if("leave"===t.animators[r].scope)return!0;return!1}function DY(t,r,i,s,u,c){if(!DX(t))DV("leave",t,r,i,s,u,c)}function D$(t,r,i,s){t.removeTextContent(),t.removeTextGuideLine(),DY(t,{style:{opacity:0}},r,i,s)}function DJ(t,r,i){function s(){t.parent&&t.parent.remove(t)}t.isGroup?t.traverse(function(t){!t.isGroup&&D$(t,r,i,s)}):D$(t,r,i,s)}function DZ(t){DH(t).oldStyle=t.style}var DK={};function Dq(t,r){for(var i=0;i<I9.length;i++){var s=I9[i],u=r[s],c=t.ensureState(s);c.style=c.style||{},c.style.text=u}var h=t.currentStates.slice();t.clearStates(!0),t.setStyle({text:r.normal}),t.useStates(h,!0)}function DQ(t,r,i){var s,u=t.labelFetcher,c=t.labelDataIndex,h=t.labelDimIndex,p=r.normal;u&&(s=u.getFormattedLabel(c,"normal",null,h,p&&p.get("formatter"),null!=i?{interpolatedValue:i}:null)),null==s&&(s=Sw(t.defaultText)?t.defaultText(c,t,i):t.defaultText);for(var f={normal:s},v=0;v<I9.length;v++){var y=I9[v],x=r[y];f[y]=SO(u?u.getFormattedLabel(c,y,null,h,x&&x.get("formatter")):null,s)}return f}function D0(t,r,i,s){i=i||DK;for(var u=t instanceof I0,c=!1,h=0;h<I8.length;h++){var p=r[I8[h]];if(p&&p.getShallow("show")){c=!0;break}}var f=u?t:t.getTextContent();if(c){!u&&(!f&&(f=new I0,t.setTextContent(f)),t.stateProxy&&(f.stateProxy=t.stateProxy));var v=DQ(i,r),y=r.normal,x=!!y.getShallow("show"),_=D2(y,s&&s.normal,i,!1,!u);_.text=v.normal,!u&&t.setTextConfig(D3(y,i,!1));for(var h=0;h<I9.length;h++){var b=I9[h],p=r[b];if(p){var w=f.ensureState(b),S=!!SO(p.getShallow("show"),x);S!==x&&(w.ignore=!S),w.style=D2(p,s&&s[b],i,!0,!u),w.style.text=v[b],!u&&(t.ensureState(b).textConfig=D3(p,i,!0))}}f.silent=!!y.getShallow("silent"),null!=f.style.x&&(_.x=f.style.x),null!=f.style.y&&(_.y=f.style.y),f.ignore=!x,f.useStyle(_),f.dirty(),i.enableTextSetter&&(D7(f).setLabelText=function(t){var s=DQ(i,r,t);Dq(f,s)})}else f&&(f.ignore=!0);t.dirty()}function D1(t,r){r=r||"label";for(var i={normal:t.getModel(r)},s=0;s<I9.length;s++){var u=I9[s];i[u]=t.getModel([u,r])}return i}function D2(t,r,i,s,u){var c={};return function(t,r,i,s,u){i=i||DK;var c,h=r.ecModel,p=h&&h.option.textStyle,f=function(t){for(var r;t&&t!==t.ecModel;){var i=(t.option||DK).rich;if(i){r=r||{};for(var s=Sy(i),u=0;u<s.length;u++)r[s[u]]=1}t=t.parentModel}return r}(r);if(f){for(var v in c={},f)if(f.hasOwnProperty(v)){var y=r.getModel(["rich",v]);D9(c[v]={},y,p,i,s,u,!1,!0)}}c&&(t.rich=c);var x=r.get("overflow");x&&(t.overflow=x);var _=r.get("minMargin");null!=_&&(t.margin=_),D9(t,r,p,i,s,u,!0,!1)}(c,t,i,s,u),r&&So(c,r),c}function D3(t,r,i){r=r||{};var s,u={},c=t.getShallow("rotate"),h=SO(t.getShallow("distance"),i?null:5),p=t.getShallow("offset");return"outside"===(s=t.getShallow("position")||(i?null:"inside"))&&(s=r.defaultOutsidePosition||"top"),null!=s&&(u.position=s),null!=p&&(u.offset=p),null!=c&&(c*=Math.PI/180,u.rotation=c),null!=h&&(u.distance=h),u.outsideFill="inherit"===t.get("color")?r.inheritColor||null:"auto",u}var D5=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],D4=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],D6=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function D9(t,r,i,s,u,c,h,p){i=!u&&i||DK;var f=s&&s.inheritColor,v=r.getShallow("color"),y=r.getShallow("textBorderColor"),x=SO(r.getShallow("opacity"),i.opacity);("inherit"===v||"auto"===v)&&(v=f?f:null),("inherit"===y||"auto"===y)&&(y=f?f:null),!c&&(v=v||i.color,y=y||i.textBorderColor),null!=v&&(t.fill=v),null!=y&&(t.stroke=y);var _=SO(r.getShallow("textBorderWidth"),i.textBorderWidth);null!=_&&(t.lineWidth=_);var b=SO(r.getShallow("textBorderType"),i.textBorderType);null!=b&&(t.lineDash=b);var w=SO(r.getShallow("textBorderDashOffset"),i.textBorderDashOffset);null!=w&&(t.lineDashOffset=w),!u&&null==x&&!p&&(x=s&&s.defaultOpacity),null!=x&&(t.opacity=x),!u&&!c&&null==t.fill&&s.inheritColor&&(t.fill=s.inheritColor);for(var S=0;S<D5.length;S++){var M=D5[S],A=SO(r.getShallow(M),i[M]);null!=A&&(t[M]=A)}for(var S=0;S<D4.length;S++){var M=D4[S],A=r.getShallow(M);null!=A&&(t[M]=A)}if(null==t.verticalAlign){var C=r.getShallow("baseline");null!=C&&(t.verticalAlign=C)}if(!h||!s.disableBox){for(var S=0;S<D6.length;S++){var M=D6[S],A=r.getShallow(M);null!=A&&(t[M]=A)}var T=r.getShallow("borderType");null!=T&&(t.borderDash=T),("auto"===t.backgroundColor||"inherit"===t.backgroundColor)&&f&&(t.backgroundColor=f),("auto"===t.borderColor||"inherit"===t.borderColor)&&f&&(t.borderColor=f)}}function D8(t,r){var i=r&&r.getModel("textStyle");return SU([t.fontStyle||i&&i.getShallow("fontStyle")||"",t.fontWeight||i&&i.getShallow("fontWeight")||"",(t.fontSize||i&&i.getShallow("fontSize")||12)+"px",t.fontFamily||i&&i.getShallow("fontFamily")||"sans-serif"].join(" "))}var D7=T7();function Pe(t,r,i,s){if(!!t){var u=D7(t);u.prevValue=u.value,u.value=i;var c=r.normal;u.valueAnimation=c.get("valueAnimation"),u.valueAnimation&&(u.precision=c.get("precision"),u.defaultInterpolatedText=s,u.statesModels=r)}}function Pt(t,r,i,s,u){var c=D7(t);if(!!c.valueAnimation&&c.prevValue!==c.value){var h=c.defaultInterpolatedText,p=SO(c.interpolatedValue,c.prevValue),f=c.value;t.percent=0,(null==c.prevValue?Dj:DW)(t,{percent:1},s,r,null,function(s){var v=El(i,c.precision,p,f,s);c.interpolatedValue=1===s?null:v,Dq(t,DQ({labelDataIndex:r,labelFetcher:u,defaultText:h?h(v):v+""},c.statesModels,v))})}}var Pn=["textStyle","color"],Pr=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],Pi=new I0,Pa=function(){function t(){}return t.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(Pn):null)},t.prototype.getFont=function(){return D8({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},t.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},i=0;i<Pr.length;i++)r[Pr[i]]=this.getShallow(Pr[i]);return Pi.useStyle(r),Pi.update(),Pi.getBoundingRect()},t}(),Po=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Ps=Ey(Po),Pl=function(){function t(){}return t.prototype.getLineStyle=function(t){return Ps(this,t)},t}(),Pu=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Pc=Ey(Pu),Ph=function(){function t(){}return t.prototype.getItemStyle=function(t,r){return Pc(this,t,r)},t}(),Pd=function(){function t(t,r,i){this.parentModel=r,this.ecModel=i,this.option=t}return t.prototype.init=function(t,r,i){for(var s=[],u=3;u<arguments.length;u++)s[u-3]=arguments[u]},t.prototype.mergeOption=function(t,r){Si(this.option,t,!0)},t.prototype.get=function(t,r){return null==t?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},t.prototype.getShallow=function(t,r){var i=this.option,s=null==i?i:i[t];if(null==s&&!r){var u=this.parentModel;u&&(s=u.getShallow(t))}return s},t.prototype.getModel=function(r,i){var s=null!=r,u=s?this.parsePath(r):null,c=s?this._doGet(u):this.option;return new t(c,i=i||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(u)),this.ecModel)},t.prototype.isEmpty=function(){return null==this.option},t.prototype.restoreData=function(){},t.prototype.clone=function(){return new this.constructor(Sr(this.option))},t.prototype.parsePath=function(t){return"string"==typeof t?t.split("."):t},t.prototype.resolveParentPath=function(t){return t},t.prototype.isAnimationEnabled=function(){if(!wY.node&&this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},t.prototype._doGet=function(t,r){var i=this.option;if(!t)return i;for(var s=0;s<t.length;s++){if(!!t[s]){if(null==(i=i&&"object"==typeof i?i[t[s]]:null))break}}return null==i&&r&&(i=r._doGet(this.resolveParentPath(t),r.parentModel)),i},t}();Ed(Pd),!function(t){var r=["__\0is_clz",Ef++].join("_");t.prototype[r]=!0;t.isInstance=function(t){return!!(t&&t[r])}}(Pd),Sh(Pd,Pl),Sh(Pd,Ph),Sh(Pd,E_),Sh(Pd,Pa);let Pp=Pd;var Pf=Math.round(10*Math.random());function Pg(t){return[t||"",Pf++].join("_")}function Pm(t,r){return Si(Si({},t,!0),r,!0)}var Pv={},Py={},Px=wY.domSupported&&(document.documentElement.lang||navigator.language||navigator.browserLanguage||"EN").toUpperCase().indexOf("ZH")>-1?"ZH":"EN";function P_(t,r){Py[t=t.toUpperCase()]=new Pp(r),Pv[t]=r}function Pb(t){return Py[t]}P_("EN",{time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}}),P_("ZH",{time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}});var Pw=6e4,PS=36e5,PM=864e5,PA=31536e6,PC={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},PT="{yyyy}-{MM}-{dd}",PE={year:"{yyyy}",month:"{yyyy}-{MM}",day:PT,hour:PT+" "+PC.hour,minute:PT+" "+PC.minute,second:PT+" "+PC.second,millisecond:PC.none},PI=["year","month","day","hour","minute","second","millisecond"],PD=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function PP(t,r){return t+="","0000".substr(0,r-t.length)+t}function PR(t){switch(t){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return t}}function PL(t,r,i,s){var u=Tz(t),c=u[PB(i)](),h=u[PN(i)]()+1,p=Math.floor((h-1)/3)+1,f=u[PF(i)](),v=u["get"+(i?"UTC":"")+"Day"](),y=u[Pz(i)](),x=(y-1)%12+1,_=u[PU(i)](),b=u[PH(i)](),w=u[PG(i)](),S=y>=12?"pm":"am",M=S.toUpperCase(),A=(s instanceof Pp?s:Py[s||Px]||Py.EN).getModel("time"),C=A.get("month"),T=A.get("monthAbbr"),I=A.get("dayOfWeek"),D=A.get("dayOfWeekAbbr");return(r||"").replace(/{a}/g,S+"").replace(/{A}/g,M+"").replace(/{yyyy}/g,c+"").replace(/{yy}/g,PP(c%100+"",2)).replace(/{Q}/g,p+"").replace(/{MMMM}/g,C[h-1]).replace(/{MMM}/g,T[h-1]).replace(/{MM}/g,PP(h,2)).replace(/{M}/g,h+"").replace(/{dd}/g,PP(f,2)).replace(/{d}/g,f+"").replace(/{eeee}/g,I[v]).replace(/{ee}/g,D[v]).replace(/{e}/g,v+"").replace(/{HH}/g,PP(y,2)).replace(/{H}/g,y+"").replace(/{hh}/g,PP(x+"",2)).replace(/{h}/g,x+"").replace(/{mm}/g,PP(_,2)).replace(/{m}/g,_+"").replace(/{ss}/g,PP(b,2)).replace(/{s}/g,b+"").replace(/{SSS}/g,PP(w,3)).replace(/{S}/g,w+"")}function Pk(t,r){var i=Tz(t),s=i[PN(r)]()+1,u=i[PF(r)](),c=i[Pz(r)](),h=i[PU(r)](),p=i[PH(r)](),f=0===i[PG(r)](),v=f&&0===p,y=v&&0===h,x=y&&0===c,_=x&&1===u;if(_&&1===s)return"year";if(_)return"month";if(x)return"day";else if(y)return"hour";else if(v)return"minute";else if(f)return"second";else return"millisecond"}function PO(t,r,i){var s=SA(t)?Tz(t):t;switch(r=r||Pk(t,i)){case"year":return s[PB(i)]();case"half-year":return s[PN(i)]()>=6?1:0;case"quarter":return Math.floor((s[PN(i)]()+1)/4);case"month":return s[PN(i)]();case"day":return s[PF(i)]();case"half-day":return s[Pz(i)]()/24;case"hour":return s[Pz(i)]();case"minute":return s[PU(i)]();case"second":return s[PH(i)]();case"millisecond":return s[PG(i)]()}}function PB(t){return t?"getUTCFullYear":"getFullYear"}function PN(t){return t?"getUTCMonth":"getMonth"}function PF(t){return t?"getUTCDate":"getDate"}function Pz(t){return t?"getUTCHours":"getHours"}function PU(t){return t?"getUTCMinutes":"getMinutes"}function PH(t){return t?"getUTCSeconds":"getSeconds"}function PG(t){return t?"getUTCMilliseconds":"getMilliseconds"}function PV(t){return t?"setUTCMonth":"setMonth"}function PW(t){return t?"setUTCDate":"setDate"}function Pj(t){return t?"setUTCHours":"setHours"}function PX(t){return t?"setUTCMinutes":"setMinutes"}function PY(t){return t?"setUTCSeconds":"setSeconds"}function P$(t){return t?"setUTCMilliseconds":"setMilliseconds"}function PJ(t){if(!TX(t))return SS(t)?t:"-";var r=(t+"").split(".");return r[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(r.length>1?"."+r[1]:"")}function PZ(t,r){return t=(t||"").toLowerCase().replace(/-(.)/g,function(t,r){return r.toUpperCase()}),r&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var PK=SF;function Pq(t,r,i){function s(t){return t&&SU(t)?t:"-"}function u(t){return!!(null!=t&&!isNaN(t)&&isFinite(t))}var c="time"===r,h=t instanceof Date;if(c||h){var p=c?Tz(t):t;if(!isNaN(+p))return PL(p,"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}",i);if(h)return"-"}if("ordinal"===r)return SM(t)?s(t):SA(t)&&u(t)?t+"":"-";var f=Tj(t);return u(f)?PJ(f):SM(t)?s(t):"boolean"==typeof t?t+"":"-"}var PQ=["a","b","c","d","e","f","g"],P0=function(t,r){return"{"+t+(null==r?"":r)+"}"};function P1(t,r,i){!Sb(r)&&(r=[r]);var s=r.length;if(!s)return"";for(var u=r[0].$vars||[],c=0;c<u.length;c++){var h=PQ[c];t=t.replace(P0(h),P0(h,0))}for(var p=0;p<s;p++)for(var f=0;f<u.length;f++){var v=r[p][u[f]];t=t.replace(P0(PQ[f],p),i?MT(v):v)}return t}function P2(t,r){var i=SS(t)?{color:t,extraCssText:r}:t||{},s=i.color,u=i.type;r=i.extraCssText;var c=i.renderMode||"html";return s?"html"===c?"subItem"===u?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+MT(s)+";"+(r||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+MT(s)+";"+(r||"")+'"></span>':{renderMode:c,content:"{"+(i.markerId||"markerX")+"|}  ",style:"subItem"===u?{width:4,height:4,borderRadius:2,backgroundColor:s}:{width:10,height:10,borderRadius:5,backgroundColor:s}}:""}function P3(t,r,i){("week"===t||"month"===t||"quarter"===t||"half-year"===t||"year"===t)&&(t="MM-dd\nyyyy");var s=Tz(r),u=i?"getUTC":"get",c=s[u+"FullYear"](),h=s[u+"Month"]()+1,p=s[u+"Date"](),f=s[u+"Hours"](),v=s[u+"Minutes"](),y=s[u+"Seconds"](),x=s[u+"Milliseconds"]();return t=t.replace("MM",PP(h,2)).replace("M",h).replace("yyyy",c).replace("yy",PP(c%100+"",2)).replace("dd",PP(p,2)).replace("d",p).replace("hh",PP(f,2)).replace("h",f).replace("mm",PP(v,2)).replace("m",v).replace("ss",PP(y,2)).replace("s",y).replace("SSS",PP(x,3))}function P5(t){return t?t.charAt(0).toUpperCase()+t.substr(1):t}function P4(t,r){return r=r||"transparent",SS(t)?t:SC(t)&&t.colorStops&&(t.colorStops[0]||{}).color||r}function P6(t,r){if("_blank"===r||"blank"===r){var i=window.open();i.opener=null,i.location.href=t}else window.open(t,r)}var P9=Sp,P8=["left","right","top","bottom","width","height"],P7=[["width","left","right"],["height","top","bottom"]];function Re(t,r,i,s,u){var c=0,h=0;null==s&&(s=1/0),null==u&&(u=1/0);var p=0;r.eachChild(function(f,v){var y,x,_=f.getBoundingRect(),b=r.childAt(v+1),w=b&&b.getBoundingRect();if("horizontal"===t){var S=_.width+(w?-w.x+_.x:0);(y=c+S)>s||f.newline?(c=0,y=S,h+=p+i,p=_.height):p=Math.max(p,_.height)}else{var M=_.height+(w?-w.y+_.y:0);(x=h+M)>u||f.newline?(c+=p+i,h=0,x=M,p=_.width):p=Math.max(p,_.width)}if(!f.newline)f.x=c,f.y=h,f.markRedraw(),"horizontal"===t?c=y+i:h=x+i})}S_(Re,"vertical"),S_(Re,"horizontal");function Rt(t,r,i){i=PK(i||0);var s=r.width,u=r.height,c=TT(t.left,s),h=TT(t.top,u),p=TT(t.right,s),f=TT(t.bottom,u),v=TT(t.width,s),y=TT(t.height,u),x=i[2]+i[0],_=i[1]+i[3],b=t.aspect;switch(isNaN(v)&&(v=s-p-_-c),isNaN(y)&&(y=u-f-x-h),null!=b&&(isNaN(v)&&isNaN(y)&&(b>s/u?v=.8*s:y=.8*u),isNaN(v)&&(v=b*y),isNaN(y)&&(y=v/b)),isNaN(c)&&(c=s-p-v-_),isNaN(h)&&(h=u-f-y-x),t.left||t.right){case"center":c=s/2-v/2-i[3];break;case"right":c=s-v-_}switch(t.top||t.bottom){case"middle":case"center":h=u/2-y/2-i[0];break;case"bottom":h=u-y-x}c=c||0,h=h||0,isNaN(v)&&(v=s-_-c-(p||0)),isNaN(y)&&(y=u-x-h-(f||0));var w=new M4(c+i[3],h+i[0],v,y);return w.margin=i,w}function Rn(t,r,i,s,u,c){var h,p=!u||!u.hv||u.hv[0],f=!u||!u.hv||u.hv[1],v=u&&u.boundingMode||"all";if((c=c||t).x=t.x,c.y=t.y,!p&&!f)return!1;if("raw"===v)h="group"===t.type?new M4(0,0,+r.width||0,+r.height||0):t.getBoundingRect();else if(h=t.getBoundingRect(),t.needLocalTransform()){var y=t.getLocalTransform();(h=h.clone()).applyTransform(y)}var x=Rt(Ss({width:h.width,height:h.height},r),i,s),_=p?x.x-h.x:0,b=f?x.y-h.y:0;return"raw"===v?(c.x=_,c.y=b):(c.x+=_,c.y+=b),c===t&&t.markRedraw(),!0}function Rr(t){var r=t.layoutMode||t.constructor.layoutMode;return SC(r)?r:r?{type:r}:null}function Ri(t,r,i){var s=i&&i.ignoreSize;Sb(s)||(s=[s,s]);var u=h(P7[0],0),c=h(P7[1],1);function h(i,u){var c={},h=0,v={},y=0;if(P9(i,function(r){v[r]=t[r]}),P9(i,function(t){p(r,t)&&(c[t]=v[t]=r[t]),f(c,t)&&h++,f(v,t)&&y++}),s[u])return f(r,i[1])?v[i[2]]=null:f(r,i[2])&&(v[i[1]]=null),v;if(2===y||!h)return v;if(h>=2)return c;for(var x=0;x<i.length;x++){var _=i[x];if(!p(c,_)&&p(t,_)){c[_]=t[_];break}}return c}function p(t,r){return t.hasOwnProperty(r)}function f(t,r){return null!=t[r]&&"auto"!==t[r]}function v(t,r,i){P9(t,function(t){r[t]=i[t]})}v(P7[0],t,u),v(P7[1],t,c)}function Ra(t){return Ro({},t)}function Ro(t,r){return r&&t&&P9(P8,function(i){r.hasOwnProperty(i)&&(t[i]=r[i])}),t}var Rs=T7(),Rl=function(t){var r;function i(r,i,s){var u=t.call(this,r,i,s)||this;return u.uid=Pg("ec_cpt_model"),u}return wU(i,t),i.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i)},i.prototype.mergeDefaultAndTheme=function(t,r){var i=Rr(this),s=i?Ra(t):{};Si(t,r.getTheme().get(this.mainType)),Si(t,this.getDefaultOption()),i&&Ri(t,s,i)},i.prototype.mergeOption=function(t,r){Si(this.option,t,!0);var i=Rr(this);i&&Ri(this.option,t,i)},i.prototype.optionUpdated=function(t,r){},i.prototype.getDefaultOption=function(){var t,r=this.constructor;if(!((t=r)&&t[Ec]))return r.defaultOption;var i=Rs(this);if(!i.defaultOption){for(var s=[],u=r;u;){var c=u.prototype.defaultOption;c&&s.push(c),u=u.superClass}for(var h={},p=s.length-1;p>=0;p--)h=Si(h,s[p],!0);i.defaultOption=h}return i.defaultOption},i.prototype.getReferringComponents=function(t,r){return Ea(this.ecModel,t,{index:this.get(t+"Index",!0),id:this.get(t+"Id",!0)},r)},i.prototype.getBoxLayoutParams=function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}},i.prototype.getZLevelKey=function(){return""},i.prototype.setZLevel=function(t){this.option.zlevel=t},i.protoInitialize=void((r=i.prototype).type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0),i}(Pp);Ep(Rl,Pp),Ev(Rl),!function(t){var r={};t.registerSubTypeDefaulter=function(t,i){r[Eh(t).main]=i},t.determineSubType=function(i,s){var u=s.type;if(!u){var c=Eh(i).main;t.hasSubTypes(i)&&r[c]&&(u=r[c](s))}return u}}(Rl),!function(t,r){t.topologicalTravel=function(t,s,u,c){if(!!t.length){var h=function(t){var s={},u=[];return Sp(t,function(c){var h=i(s,c),p=function(t,r){var i=[];return Sp(t,function(t){Su(r,t)>=0&&i.push(t)}),i}(h.originalDeps=r(c),t);h.entryCount=p.length,0===h.entryCount&&u.push(c),Sp(p,function(t){0>Su(h.predecessor,t)&&h.predecessor.push(t);var r=i(s,t);0>Su(r.successor,t)&&r.successor.push(c)})}),{graph:s,noEntryList:u}}(s),p=h.graph,f=h.noEntryList,v={};for(Sp(t,function(t){v[t]=!0});f.length;){var y=f.pop(),x=p[y],_=!!v[y];_&&(u.call(c,y,x.originalDeps.slice()),delete v[y]),Sp(x.successor,_?w:b)}Sp(v,function(){throw Error("")})}function b(t){p[t].entryCount--,0===p[t].entryCount&&f.push(t)}function w(t){v[t]=!0,b(t)}};function i(t,r){return!t[r]&&(t[r]={predecessor:[],successor:[]}),t[r]}}(Rl,function(t){var r=[];return Sp(Rl.getClassesByMainType(t),function(t){r=r.concat(t.dependencies||t.prototype.dependencies||[])}),r=Sf(r,function(t){return Eh(t).main}),"dataset"!==t&&0>=Su(r,"dataset")&&r.unshift("dataset"),r});let Ru=Rl;var Rc="";"undefined"!=typeof navigator&&(Rc=navigator.platform||"");var Rh="rgba(0, 0, 0, 0.2)";let Rd={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Rh,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Rh,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Rh,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Rh,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Rh,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Rh,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:Rc.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var Rp=SY(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),Rf="original",Rg="arrayRows",Rm="objectRows",Rv="keyedColumns",Ry="typedArray",Rx="unknown",R_="column",Rb={Must:1,Might:2,Not:3},Rw=T7();function RS(t,r,i){var s,u,c={},h=RA(r);if(!h||!t)return c;var p=[],f=[],v=Rw(r.ecModel).datasetMap,y=h.uid+"_"+i.seriesLayoutBy;Sp(t=t.slice(),function(r,i){var h=SC(r)?r:t[i]={name:r};"ordinal"===h.type&&null==s&&(s=i,u=b(h)),c[h.name]=[]});var x=v.get(y)||v.set(y,{categoryWayDim:u,valueWayDim:0});function _(t,r,i){for(var s=0;s<i;s++)t.push(r+s)}function b(t){var r=t.dimsDef;return r?r.length:1}return Sp(t,function(t,r){var i=t.name,u=b(t);if(null==s){var h=x.valueWayDim;_(c[i],h,u),_(f,h,u),x.valueWayDim+=u}else if(s===r)_(c[i],0,u),_(p,0,u);else{var h=x.categoryWayDim;_(c[i],h,u),_(f,h,u),x.categoryWayDim+=u}}),p.length&&(c.itemName=p),f.length&&(c.seriesName=f),c}function RM(t,r,i){var s,u={};if(!RA(t))return u;var c=r.sourceFormat,h=r.dimensionsDefine;(c===Rm||c===Rv)&&Sp(h,function(t,r){(SC(t)?t.name:t)==="name"&&(s=r)});var p=function(){for(var t={},u={},p=[],f=0,v=Math.min(5,i);f<v;f++){var y=RT(r.data,c,r.seriesLayoutBy,h,r.startIndex,f);p.push(y);var x=y===Rb.Not;if(x&&null==t.v&&f!==s&&(t.v=f),(null==t.n||t.n===t.v||!x&&p[t.n]===Rb.Not)&&(t.n=f),_(t)&&p[t.n]!==Rb.Not)return t;!x&&(y===Rb.Might&&null==u.v&&f!==s&&(u.v=f),(null==u.n||u.n===u.v)&&(u.n=f))}function _(t){return null!=t.v&&null!=t.n}return _(t)?t:_(u)?u:null}();if(p){u.value=[p.v];var f=null!=s?s:p.n;u.itemName=[f],u.seriesName=[f]}return u}function RA(t){if(!t.get("data",!0))return Ea(t.ecModel,"dataset",{index:t.get("datasetIndex",!0),id:t.get("datasetId",!0)},Er).models[0]}function RC(t,r){return RT(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,r)}function RT(t,r,i,s,u,c){var h,p,f;if(SE(t))return Rb.Not;if(s){var v=s[c];SC(v)?(p=v.name,f=v.type):SS(v)&&(p=v)}if(null!=f)return"ordinal"===f?Rb.Must:Rb.Not;if(r===Rg){if("row"===i){for(var y=t[c],x=0;x<(y||[]).length&&x<5;x++)if(null!=(h=S(y[u+x])))return h}else for(var x=0;x<t.length&&x<5;x++){var _=t[u+x];if(_&&null!=(h=S(_[c])))return h}}else if(r===Rm){if(!p)return Rb.Not;for(var x=0;x<t.length&&x<5;x++){var b=t[x];if(b&&null!=(h=S(b[p])))return h}}else if(r===Rv){if(!p)return Rb.Not;var y=t[p];if(!y||SE(y))return Rb.Not;for(var x=0;x<y.length&&x<5;x++)if(null!=(h=S(y[x])))return h}else if(r===Rf)for(var x=0;x<t.length&&x<5;x++){var b=t[x],w=T1(b);if(!Sb(w))return Rb.Not;if(null!=(h=S(w[c])))return h}function S(t){var r=SS(t);return null!=t&&Number.isFinite(Number(t))&&""!==t?r?Rb.Might:Rb.Not:r&&"-"!==t?Rb.Must:void 0}return Rb.Not}var RE=SY(),RI=T7(),RD=T7(),RP=function(){function t(){}return t.prototype.getColorFromPalette=function(t,r,i){return RL(this,RI,Tq(this.get("color",!0)),this.get("colorLayer",!0),t,r,i)},t.prototype.clearColorPalette=function(){(function(t,r){r(t).paletteIdx=0,r(t).paletteNameMap={}})(this,RI)},t}();function RR(t,r,i,s){var u=Tq(t.get(["aria","decal","decals"]));return RL(t,RD,u,null,r,i,s)}function RL(t,r,i,s,u,c,h){var p=r(c=c||t),f=p.paletteIdx||0,v=p.paletteNameMap=p.paletteNameMap||{};if(v.hasOwnProperty(u))return v[u];var y=null!=h&&s?function(t,r){for(var i=t.length,s=0;s<i;s++)if(t[s].length>r)return t[s];return t[i-1]}(s,h):i;if(!!(y=y||i)&&!!y.length){var x=y[f];return u&&(v[u]=x),p.paletteIdx=(f+1)%y.length,x}}var Rk="\0_ec_inner",RO=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.prototype.init=function(t,r,i,s,u,c){s=s||{},this.option=null,this._theme=new Pp(s),this._locale=new Pp(u),this._optionManager=c},r.prototype.setOption=function(t,r,i){var s=RF(r);this._optionManager.setOption(t,i,s),this._resetOption(null,s)},r.prototype.resetOption=function(t,r){return this._resetOption(t,RF(r))},r.prototype._resetOption=function(t,r){var i=!1,s=this._optionManager;if(!t||"recreate"===t){var u=s.mountOption("recreate"===t);this.option&&"recreate"!==t?(this.restoreData(),this._mergeOption(u,r)):eaG(this,u),i=!0}if(("timeline"===t||"media"===t)&&this.restoreData(),!t||"recreate"===t||"timeline"===t){var c=s.getTimelineOption(this);c&&(i=!0,this._mergeOption(c,r))}if(!t||"recreate"===t||"media"===t){var h=s.getMediaOption(this);h.length&&Sp(h,function(t){i=!0,this._mergeOption(t,r)},this)}return i},r.prototype.mergeOption=function(t){this._mergeOption(t,null)},r.prototype._mergeOption=function(t,r){var i,s=this.option,u=this._componentsMap,c=this._componentsCount,h=[],p=SY(),f=r&&r.replaceMergeMainTypeMap;i=this,Rw(i).datasetMap=SY(),Sp(t,function(t,r){if(null!=t)Ru.hasClass(r)?r&&(h.push(r),p.set(r,!0)):s[r]=null==s[r]?Sr(t):Si(s[r],t,!0)}),f&&f.each(function(t,r){Ru.hasClass(r)&&!p.get(r)&&(h.push(r),p.set(r,!0))}),Ru.topologicalTravel(h,Ru.getAllClassMainTypes(),function(r){var i,h,p,v,y=function(t,r,i){var s=RE.get(r);if(!s)return i;var u=s(t);return u?i.concat(u):i}(this,r,Tq(t[r])),x=u.get(r),_=x?f&&f.get(r)?"replaceMerge":"normalMerge":"replaceAll",b=T2(x,y,_);i=b,h=r,p=Ru,Sp(i,function(t){var r=t.newOption;SC(r)&&(t.keyInfo.mainType=h,t.keyInfo.subType=function(t,r,i,s){return r.type?r.type:i?i.subType:s.determineSubType(t,r)}(h,r,t.existing,p))}),s[r]=null,u.set(r,null),c.set(r,0);var w=[],S=[],M=0;Sp(b,function(t,i){var s=t.existing,u=t.newOption;if(u){var c="series"===r,h=Ru.getClass(r,t.keyInfo.subType,!c);if(!h)return;if("tooltip"===r){if(v)return;v=!0}if(s&&s.constructor===h)s.name=t.keyInfo.name,s.mergeOption(u,this),s.optionUpdated(u,!1);else{var p=So({componentIndex:i},t.keyInfo);So(s=new h(u,this,this,p),p),t.brandNew&&(s.__requireNewView=!0),s.init(u,this,this),s.optionUpdated(null,!0)}}else s&&(s.mergeOption({},this),s.optionUpdated({},!1));s?(w.push(s.option),S.push(s),M++):(w.push(void 0),S.push(void 0))},this),s[r]=w,u.set(r,S),c.set(r,M),"series"===r&&eaU(this)},this);!this._seriesIndices&&eaU(this)},r.prototype.getOption=function(){var t=Sr(this.option);return Sp(t,function(r,i){if(Ru.hasClass(i)){for(var s=Tq(r),u=s.length,c=!1,h=u-1;h>=0;h--)s[h]&&!T9(s[h])?c=!0:(s[h]=null,!c&&u--);s.length=u,t[i]=s}}),delete t[Rk],t},r.prototype.getTheme=function(){return this._theme},r.prototype.getLocaleModel=function(){return this._locale},r.prototype.setUpdatePayload=function(t){this._payload=t},r.prototype.getUpdatePayload=function(){return this._payload},r.prototype.getComponent=function(t,r){var i=this._componentsMap.get(t);if(i){var s=i[r||0];if(s)return s;if(null==r){for(var u=0;u<i.length;u++)if(i[u])return i[u]}}},r.prototype.queryComponents=function(t){var r,i=t.mainType;if(!i)return[];var s=t.index,u=t.id,c=t.name,h=this._componentsMap.get(i);return h&&h.length?(null!=s?(r=[],Sp(Tq(s),function(t){h[t]&&r.push(h[t])})):r=null!=u?RB("id",u,h):null!=c?RB("name",c,h):Sm(h,function(t){return!!t}),RN(r,t)):[]},r.prototype.findComponents=function(t){var r=t.query,i=t.mainType,s=function(t){var r=i+"Index",s=i+"Id",u=i+"Name";return t&&(null!=t[r]||null!=t[s]||null!=t[u])?{mainType:i,index:t[r],id:t[s],name:t[u]}:null}(r);return function(r){return t.filter?Sm(r,t.filter):r}(RN(s?this.queryComponents(s):Sm(this._componentsMap.get(i),function(t){return!!t}),t))},r.prototype.eachComponent=function(t,r,i){var s=this._componentsMap;if(Sw(t))s.each(function(i,s){for(var u=0;i&&u<i.length;u++){var c=i[u];c&&t.call(r,s,c,c.componentIndex)}});else{for(var u=SS(t)?s.get(t):SC(t)?this.findComponents(t):null,c=0;u&&c<u.length;c++){var h=u[c];h&&r.call(i,h,h.componentIndex)}}},r.prototype.getSeriesByName=function(t){var r=T4(t,null);return Sm(this._componentsMap.get("series"),function(t){return!!t&&null!=r&&t.name===r})},r.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},r.prototype.getSeriesByType=function(t){return Sm(this._componentsMap.get("series"),function(r){return!!r&&r.subType===t})},r.prototype.getSeries=function(){return Sm(this._componentsMap.get("series"),function(t){return!!t})},r.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},r.prototype.eachSeries=function(t,r){eaH(this),Sp(this._seriesIndices,function(i){var s=this._componentsMap.get("series")[i];t.call(r,s,i)},this)},r.prototype.eachRawSeries=function(t,r){Sp(this._componentsMap.get("series"),function(i){i&&t.call(r,i,i.componentIndex)})},r.prototype.eachSeriesByType=function(t,r,i){eaH(this),Sp(this._seriesIndices,function(s){var u=this._componentsMap.get("series")[s];u.subType===t&&r.call(i,u,s)},this)},r.prototype.eachRawSeriesByType=function(t,r,i){return Sp(this.getSeriesByType(t),r,i)},r.prototype.isSeriesFiltered=function(t){return eaH(this),null==this._seriesIndicesMap.get(t.componentIndex)},r.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},r.prototype.filterSeries=function(t,r){eaH(this);var i=[];Sp(this._seriesIndices,function(s){var u=this._componentsMap.get("series")[s];t.call(r,u,s)&&i.push(s)},this),this._seriesIndices=i,this._seriesIndicesMap=SY(i)},r.prototype.restoreData=function(t){eaU(this);var r=this._componentsMap,i=[];r.each(function(t,r){Ru.hasClass(r)&&i.push(r)}),Ru.topologicalTravel(i,Ru.getAllClassMainTypes(),function(i){Sp(r.get(i),function(r){r&&("series"!==i||!function(t,r){if(r){var i=r.seriesIndex,s=r.seriesId,u=r.seriesName;return null!=i&&t.componentIndex!==i||null!=s&&t.id!==s||null!=u&&t.name!==u}}(r,t))&&r.restoreData()})})},r.internalField=void(eaU=function(t){var r=t._seriesIndices=[];Sp(t._componentsMap.get("series"),function(t){t&&r.push(t.componentIndex)}),t._seriesIndicesMap=SY(r)},eaH=function(t){},eaG=function(t,r){t.option={},t.option[Rk]=1,t._componentsMap=SY({series:[]}),t._componentsCount=SY();var i=r.aria;SC(i)&&null==i.enabled&&(i.enabled=!0),function(t,r){var i=t.color&&!t.colorLayer;Sp(r,function(r,s){if("colorLayer"!==s||!i)!Ru.hasClass(s)&&("object"==typeof r?t[s]=t[s]?Si(t[s],r,!1):Sr(r):null==t[s]&&(t[s]=r))})}(r,t._theme.option),Si(r,Rd,!1),t._mergeOption(r,null)}),r}(Pp);function RB(t,r,i){if(Sb(r)){var s=SY();return Sp(r,function(t){null!=t&&null!=T4(t,null)&&s.set(t,!0)}),Sm(i,function(r){return r&&s.get(r[t])})}var u=T4(r,null);return Sm(i,function(r){return r&&null!=u&&r[t]===u})}function RN(t,r){return r.hasOwnProperty("subType")?Sm(t,function(t){return t&&t.subType===r.subType}):t}function RF(t){var r=SY();return t&&Sp(Tq(t.replaceMerge),function(t){r.set(t,!0)}),{replaceMergeMainTypeMap:r}}Sh(RO,RP);var Rz=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"];let RU=function(t){Sp(Rz,function(r){this[r]=Sx(t[r],t)},this)};var RH={},RG=function(){function t(){this._coordinateSystems=[]}return t.prototype.create=function(t,r){var i=[];Sp(RH,function(s,u){var c=s.create(t,r);i=i.concat(c||[])}),this._coordinateSystems=i},t.prototype.update=function(t,r){Sp(this._coordinateSystems,function(i){i.update&&i.update(t,r)})},t.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},t.register=function(t,r){RH[t]=r},t.get=function(t){return RH[t]},t}(),RV=/^(min|max)?(.+)$/,RW=function(){function t(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return t.prototype.setOption=function(t,r,i){t&&(Sp(Tq(t.series),function(t){t&&t.data&&SE(t.data)&&SG(t.data)}),Sp(Tq(t.dataset),function(t){t&&t.source&&SE(t.source)&&SG(t.source)})),t=Sr(t);var s=this._optionBackup,u=function(t,r,i){var s,u,c=[],h=t.baseOption,p=t.timeline,f=t.options,v=t.media,y=!!t.media,x=!!(f||p||h&&h.timeline);function _(t){Sp(r,function(r){r(t,i)})}return h?!(u=h).timeline&&(u.timeline=p):((x||y)&&(t.options=t.media=null),u=t),y&&Sb(v)&&Sp(v,function(t){t&&t.option&&(t.query?c.push(t):!s&&(s=t))}),_(u),Sp(f,function(t){return _(t)}),Sp(c,function(t){return _(t.option)}),{baseOption:u,timelineOptions:f||[],mediaDefault:s,mediaList:c}}(t,r,!s);this._newBaseOption=u.baseOption,s?(u.timelineOptions.length&&(s.timelineOptions=u.timelineOptions),u.mediaList.length&&(s.mediaList=u.mediaList),u.mediaDefault&&(s.mediaDefault=u.mediaDefault)):this._optionBackup=u},t.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],Sr(t?r.baseOption:this._newBaseOption)},t.prototype.getTimelineOption=function(t){var r,i=this._timelineOptions;if(i.length){var s=t.getComponent("timeline");s&&(r=Sr(i[s.getCurrentIndex()]))}return r},t.prototype.getMediaOption=function(t){var r=this._api.getWidth(),i=this._api.getHeight(),s=this._mediaList,u=this._mediaDefault,c=[],h=[];if(!s.length&&!u)return h;for(var p=0,f=s.length;p<f;p++)(function(t,r,i){var s={width:r,height:i,aspectratio:r/i},u=!0;return Sp(t,function(t,r){var i=r.match(RV);if(!!i&&!!i[1]&&!!i[2]){var c=i[1];!function(t,r,i){return"min"===i?t>=r:"max"===i?t<=r:t===r}(s[i[2].toLowerCase()],t,c)&&(u=!1)}}),u})(s[p].query,r,i)&&c.push(p);return!c.length&&u&&(c=[-1]),c.length&&!function(t,r){return t.join(",")===r.join(",")}(c,this._currentMediaIndices)&&(h=Sf(c,function(t){return Sr(-1===t?u.option:s[t].option)})),this._currentMediaIndices=c,h},t}(),Rj=Sp,RX=SC,RY=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function R$(t){var r=t&&t.itemStyle;if(!!r)for(var i=0,s=RY.length;i<s;i++){var u=RY[i],c=r.normal,h=r.emphasis;c&&c[u]&&(t[u]=t[u]||{},t[u].normal?Si(t[u].normal,c[u]):t[u].normal=c[u],c[u]=null),h&&h[u]&&(t[u]=t[u]||{},t[u].emphasis?Si(t[u].emphasis,h[u]):t[u].emphasis=h[u],h[u]=null)}}function RJ(t,r,i){if(t&&t[r]&&(t[r].normal||t[r].emphasis)){var s=t[r].normal,u=t[r].emphasis;s&&(i?(t[r].normal=t[r].emphasis=null,Ss(t[r],s)):t[r]=s),u&&(t.emphasis=t.emphasis||{},t.emphasis[r]=u,u.focus&&(t.emphasis.focus=u.focus),u.blurScope&&(t.emphasis.blurScope=u.blurScope))}}function RZ(t){RJ(t,"itemStyle"),RJ(t,"lineStyle"),RJ(t,"areaStyle"),RJ(t,"label"),RJ(t,"labelLine"),RJ(t,"upperLabel"),RJ(t,"edgeLabel")}function RK(t,r){var i=RX(t)&&t[r],s=RX(i)&&i.textStyle;if(s)for(var u=0,c=T0.length;u<c;u++){var h=T0[u];s.hasOwnProperty(h)&&(i[h]=s[h])}}function Rq(t){t&&(RZ(t),RK(t,"label"),t.emphasis&&RK(t.emphasis,"label"))}function RQ(t){return Sb(t)?t:t?[t]:[]}function R0(t){return(Sb(t)?t[0]:t)||{}}function R1(t){t&&Sp(R2,function(r){r[0]in t&&!(r[1]in t)&&(t[r[1]]=t[r[0]])})}var R2=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],R3=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],R5=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function R4(t){var r=t&&t.itemStyle;if(r)for(var i=0;i<R5.length;i++){var s=R5[i][1],u=R5[i][0];null!=r[s]&&(r[u]=r[s])}}function R6(t){if(!!t)"edge"===t.alignTo&&null!=t.margin&&null==t.edgeDistance&&(t.edgeDistance=t.margin)}function R9(t){if(!!t)t.downplay&&!t.blur&&(t.blur=t.downplay)}function R8(t,r){var i,s,u;i=t,s=r,Rj(RQ(i.series),function(t){RX(t)&&function(t){if(!!RX(t)){R$(t),RZ(t),RK(t,"label"),RK(t,"upperLabel"),RK(t,"edgeLabel"),t.emphasis&&(RK(t.emphasis,"label"),RK(t.emphasis,"upperLabel"),RK(t.emphasis,"edgeLabel"));var r=t.markPoint;r&&(R$(r),Rq(r));var i=t.markLine;i&&(R$(i),Rq(i));var s=t.markArea;s&&Rq(s);var u=t.data;if("graph"===t.type){u=u||t.nodes;var c=t.links||t.edges;if(c&&!SE(c))for(var h=0;h<c.length;h++)Rq(c[h]);Sp(t.categories,function(t){RZ(t)})}if(u&&!SE(u))for(var h=0;h<u.length;h++)Rq(u[h]);if((r=t.markPoint)&&r.data){for(var p=r.data,h=0;h<p.length;h++)Rq(p[h])}if((i=t.markLine)&&i.data){for(var f=i.data,h=0;h<f.length;h++)Sb(f[h])?(Rq(f[h][0]),Rq(f[h][1])):Rq(f[h])}"gauge"===t.type?(RK(t,"axisLabel"),RK(t,"title"),RK(t,"detail")):"treemap"===t.type?(RJ(t.breadcrumb,"itemStyle"),Sp(t.levels,function(t){RZ(t)})):"tree"===t.type&&RZ(t.leaves)}}(t)}),u=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"],s&&u.push("valueAxis","categoryAxis","logAxis","timeAxis"),Rj(u,function(t){Rj(RQ(i[t]),function(t){t&&(RK(t,"axisLabel"),RK(t.axisPointer,"label"))})}),Rj(RQ(i.parallel),function(t){var r=t&&t.parallelAxisDefault;RK(r,"axisLabel"),RK(r&&r.axisPointer,"label")}),Rj(RQ(i.calendar),function(t){RJ(t,"itemStyle"),RK(t,"dayLabel"),RK(t,"monthLabel"),RK(t,"yearLabel")}),Rj(RQ(i.radar),function(t){RK(t,"name"),t.name&&null==t.axisName&&(t.axisName=t.name,delete t.name),null!=t.nameGap&&null==t.axisNameGap&&(t.axisNameGap=t.nameGap,delete t.nameGap)}),Rj(RQ(i.geo),function(t){RX(t)&&(Rq(t),Rj(RQ(t.regions),function(t){Rq(t)}))}),Rj(RQ(i.timeline),function(t){Rq(t),RJ(t,"label"),RJ(t,"itemStyle"),RJ(t,"controlStyle",!0);var r=t.data;Sb(r)&&Sp(r,function(t){SC(t)&&(RJ(t,"label"),RJ(t,"itemStyle"))})}),Rj(RQ(i.toolbox),function(t){RJ(t,"iconStyle"),Rj(t.feature,function(t){RJ(t,"iconStyle")})}),RK(R0(i.axisPointer),"label"),RK(R0(i.tooltip).axisPointer,"label"),t.series=Tq(t.series),Sp(t.series,function(t){if(!!SC(t)){var r=t.type;if("line"===r)null!=t.clipOverflow&&(t.clip=t.clipOverflow);else if("pie"===r||"gauge"===r){null!=t.clockWise&&(t.clockwise=t.clockWise),R6(t.label);var i=t.data;if(i&&!SE(i))for(var s=0;s<i.length;s++)R6(i[s]);null!=t.hoverOffset&&(t.emphasis=t.emphasis||{},t.emphasis.scaleSize=null)}else if("gauge"===r){var u=function(t,r){for(var i=r.split(","),s=t,u=0;u<i.length&&null!=(s=s&&s[i[u]]);u++);return s}(t,"pointer.color");null!=u&&function(t,r,i,s){for(var u,c=r.split(","),h=t,p=0;p<c.length-1;p++)null==h[u=c[p]]&&(h[u]={}),h=h[u];null==h[c[p]]&&(h[c[p]]=i)}(t,"itemStyle.color",u)}else if("bar"===r){R4(t),R4(t.backgroundStyle),R4(t.emphasis);var i=t.data;if(i&&!SE(i))for(var s=0;s<i.length;s++)"object"==typeof i[s]&&(R4(i[s]),R4(i[s]&&i[s].emphasis))}else if("sunburst"===r){var c=t.highlightPolicy;c&&(t.emphasis=t.emphasis||{},!t.emphasis.focus&&(t.emphasis.focus=c)),R9(t),!function t(r,i){if(r)for(var s=0;s<r.length;s++)i(r[s]),r[s]&&t(r[s].children,i)}(t.data,R9)}else"graph"===r||"sankey"===r?!function(t){if(!!t)null!=t.focusNodeAdjacency&&(t.emphasis=t.emphasis||{},null==t.emphasis.focus&&(t.emphasis.focus="adjacency"))}(t):"map"===r&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&Ss(t,t.mapLocation));null!=t.hoverAnimation&&(t.emphasis=t.emphasis||{},t.emphasis&&null==t.emphasis.scale&&(t.emphasis.scale=t.hoverAnimation)),R1(t)}}),t.dataRange&&(t.visualMap=t.dataRange),Sp(R3,function(r){var i=t[r];i&&(!Sb(i)&&(i=[i]),Sp(i,function(t){R1(t)}))})}function R7(t){Sp(t,function(r,i){var s=[],u=[NaN,NaN],c=[r.stackResultDimension,r.stackedOverDimension],h=r.data,p=r.isStackedByIndex,f=r.seriesModel.get("stackStrategy")||"samesign";h.modify(c,function(c,v,y){var x,_,b=h.get(r.stackedDimension,y);if(isNaN(b))return u;p?_=h.getRawIndex(y):x=h.get(r.stackedByDimension,y);for(var w=NaN,S=i-1;S>=0;S--){var M=t[S];if(!p&&(_=M.data.rawIndexOf(M.stackedByDimension,x)),_>=0){var A=M.data.getByRawIndex(M.stackResultDimension,_);if("all"===f||"positive"===f&&A>0||"negative"===f&&A<0||"samesign"===f&&b>=0&&A>0||"samesign"===f&&b<=0&&A<0){b=function(t,r){var i=Math.max(TD(t),TD(r)),s=t+r;return i>20?s:TE(s,i)}(b,A),w=A;break}}}return s[0]=b,s[1]=w,s})})}var Le=function(t){this.data=t.data||(t.sourceFormat===Rv?{}:[]),this.sourceFormat=t.sourceFormat||Rx,this.seriesLayoutBy=t.seriesLayoutBy||R_,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var i=0;i<r.length;i++){var s=r[i];null==s.type&&RC(this,i)===Rb.Must&&(s.type="ordinal")}};function Lt(t){return t instanceof Le}function Ln(t,r,i){i=i||Li(t);var s=r.seriesLayoutBy,u=function(t,r,i,s,u){if(!t)return{dimensionsDefine:La(u),startIndex:h,dimensionsDetectedCount:c};if(r===Rg){var c,h;"auto"===s||null==s?Lo(function(t){null!=t&&"-"!==t&&(SS(t)?null==h&&(h=1):h=0)},i,t,10):h=SA(s)?s:s?1:0,!u&&1===h&&(u=[],Lo(function(t,r){u[r]=null!=t?t+"":""},i,t,1/0)),c=u?u.length:"row"===i?t.length:t[0]?t[0].length:null}else if(r===Rm)!u&&(u=function(t){for(var r,i=0;i<t.length&&!(r=t[i++]););if(r)return Sy(r)}(t));else if(r===Rv)!u&&(u=[],Sp(t,function(t,r){u.push(r)}));else if(r===Rf){var p=T1(t[0]);c=Sb(p)&&p.length||1}return{startIndex:h,dimensionsDefine:La(u),dimensionsDetectedCount:c}}(t,i,s,r.sourceHeader,r.dimensions);return new Le({data:t,sourceFormat:i,seriesLayoutBy:s,dimensionsDefine:u.dimensionsDefine,startIndex:u.startIndex,dimensionsDetectedCount:u.dimensionsDetectedCount,metaRawOption:Sr(r)})}function Lr(t){return new Le({data:t,sourceFormat:SE(t)?Ry:Rf})}function Li(t){var r=Rx;if(SE(t))r=Ry;else if(Sb(t)){0===t.length&&(r=Rg);for(var i=0,s=t.length;i<s;i++){var u=t[i];if(null!=u){if(Sb(u)||SE(u)){r=Rg;break}else if(SC(u)){r=Rm;break}}}}else if(SC(t)){for(var c in t)if(SK(t,c)&&Sd(t[c])){r=Rv;break}}return r}function La(t){if(!!t){var r=SY();return Sf(t,function(t,i){var s={name:(t=SC(t)?t:{name:t}).name,displayName:t.displayName,type:t.type};if(null==s.name)return s;s.name+="",null==s.displayName&&(s.displayName=s.name);var u=r.get(s.name);return u?s.name+="-"+u.count++:r.set(s.name,{count:1}),s})}}function Lo(t,r,i,s){if("row"===r)for(var u=0;u<i.length&&u<s;u++)t(i[u]?i[u][0]:null,u);else{for(var c=i[0]||[],u=0;u<c.length&&u<s;u++)t(c[u],u)}}function Ls(t){var r=t.sourceFormat;return r===Rm||r===Rv}var Ll=function(){var t;function r(t,r){var i=Lt(t)?t:Lr(t);this._source=i;var s=this._data=i.data;i.sourceFormat===Ry&&(this._offset=0,this._dimSize=r,this._data=s),eaY(this,s,i)}return r.prototype.getSource=function(){return this._source},r.prototype.count=function(){return 0},r.prototype.getItem=function(t,r){},r.prototype.appendData=function(t){},r.prototype.clean=function(){},r.protoInitialize=void((t=r.prototype).pure=!1,t.persistent=!0),r.internalField=function(){eaY=function(t,u,c){var h=c.sourceFormat,p=c.seriesLayoutBy,f=c.startIndex,v=c.dimensionsDefine,y=eaX[Ly(h,p)];if(So(t,y),h===Ry)t.getItem=r,t.count=s,t.fillStorage=i;else{var x=Lh(h,p);t.getItem=Sx(x,null,u,f,v);var _=Lf(h,p);t.count=Sx(_,null,u,f,v)}};var t,r=function(t,r){t-=this._offset,r=r||[];for(var i=this._data,s=this._dimSize,u=s*t,c=0;c<s;c++)r[c]=i[u+c];return r},i=function(t,r,i,s){for(var u=this._data,c=this._dimSize,h=0;h<c;h++){for(var p=s[h],f=null==p[0]?1/0:p[0],v=null==p[1]?-1/0:p[1],y=r-t,x=i[h],_=0;_<y;_++){var b=u[_*c+h];x[t+_]=b,b<f&&(f=b),b>v&&(v=b)}p[0]=f,p[1]=v}},s=function(){return this._data?this._data.length/this._dimSize:0};function u(t){for(var r=0;r<t.length;r++)this._data.push(t[r])}(t={})[Rg+"_"+R_]={pure:!0,appendData:u},t[Rg+"_row"]={pure:!0,appendData:function(){throw Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[Rm]={pure:!0,appendData:u},t[Rv]={pure:!0,appendData:function(t){var r=this._data;Sp(t,function(t,i){for(var s=r[i]||(r[i]=[]),u=0;u<(t||[]).length;u++)s.push(t[u])})}},t[Rf]={appendData:u},t[Ry]={persistent:!1,pure:!0,appendData:function(t){this._data=t},clean:function(){this._offset+=this.count(),this._data=null}},eaX=t}(),r}(),Lu=function(t,r,i,s){return t[s]},Lc=((eaV={})[Rg+"_"+R_]=function(t,r,i,s){return t[s+r]},eaV[Rg+"_row"]=function(t,r,i,s,u){s+=r;for(var c=u||[],h=0;h<t.length;h++){var p=t[h];c[h]=p?p[s]:null}return c},eaV[Rm]=Lu,eaV[Rv]=function(t,r,i,s,u){for(var c=u||[],h=0;h<i.length;h++){var p=i[h].name,f=t[p];c[h]=f?f[s]:null}return c},eaV[Rf]=Lu,eaV);function Lh(t,r){var i=Lc[Ly(t,r)];return i}var Ld=function(t,r,i){return t.length},Lp=((eaW={})[Rg+"_"+R_]=function(t,r,i){return Math.max(0,t.length-r)},eaW[Rg+"_row"]=function(t,r,i){var s=t[0];return s?Math.max(0,s.length-r):0},eaW[Rm]=Ld,eaW[Rv]=function(t,r,i){var s=i[0].name,u=t[s];return u?u.length:0},eaW[Rf]=Ld,eaW);function Lf(t,r){var i=Lp[Ly(t,r)];return i}var Lg=function(t,r,i){return t[r]},Lm=((eaj={})[Rg]=Lg,eaj[Rm]=function(t,r,i){return t[i]},eaj[Rv]=Lg,eaj[Rf]=function(t,r,i){var s=T1(t);return s instanceof Array?s[r]:s},eaj[Ry]=Lg,eaj);function Lv(t){var r=Lm[t];return r}function Ly(t,r){return t===Rg?t+"_"+r:t}function Lx(t,r,i){if(!t)return;var s=t.getRawDataItem(r);if(null!=s){var u=t.getStore(),c=u.getSource().sourceFormat;if(null!=i){var h=t.getDimensionIndex(i),p=u.getDimensionProperty(h);return Lv(c)(s,h,p)}var f=s;return c===Rf&&(f=T1(s)),f}}var L_=/\{@(.+?)\}/g,Lb=function(){function t(){}return t.prototype.getDataParams=function(t,r){var i=this.getData(r),s=this.getRawValue(t,r),u=i.getRawIndex(t),c=i.getName(t),h=i.getRawDataItem(t),p=i.getItemVisual(t,"style"),f=p&&p[i.getItemVisual(t,"drawType")||"fill"],v=p&&p.stroke,y=this.mainType,x="series"===y,_=i.userOutput&&i.userOutput.get();return{componentType:y,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:x?this.subType:null,seriesIndex:this.seriesIndex,seriesId:x?this.id:null,seriesName:x?this.name:null,name:c,dataIndex:u,data:h,dataType:r,value:s,color:f,borderColor:v,dimensionNames:_?_.fullDimensions:null,encode:_?_.encode:null,$vars:["seriesName","name","value"]}},t.prototype.getFormattedLabel=function(t,r,i,s,u,c){r=r||"normal";var h=this.getData(i),p=this.getDataParams(t,i);return(c&&(p.value=c.interpolatedValue),null!=s&&Sb(p.value)&&(p.value=p.value[s]),!u&&(u=h.getItemModel(t).get("normal"===r?["label","formatter"]:[r,"label","formatter"])),Sw(u))?(p.status=r,p.dimensionIndex=s,u(p)):SS(u)?P1(u,p).replace(L_,function(r,i){var s=i.length,u=i;"["===u.charAt(0)&&"]"===u.charAt(s-1)&&(u=+u.slice(1,s-1));var p=Lx(h,t,u);if(c&&Sb(c.interpolatedValue)){var f=h.getDimensionIndex(u);f>=0&&(p=c.interpolatedValue[f])}return null!=p?p+"":""}):void 0},t.prototype.getRawValue=function(t,r){return Lx(this.getData(r),t)},t.prototype.formatTooltip=function(t,r,i){},t}();function Lw(t){var r,i;return SC(t)?t.type&&(i=t):r=t,{text:r,frag:i}}function LS(t){return new LM(t)}var LM=function(){function t(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return t.prototype.perform=function(t){var r,i,s=this._upstream,u=t&&t.skip;if(this._dirty&&s){var c=this.context;c.data=c.outputData=s.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!u&&(r=this._plan(this.context));var h=function(t){return t>=1||(t=1),t}(this._modBy),p=this._modDataCount||0,f=function(t){return t>=1||(t=1),t}(t&&t.modBy),v=t&&t.modDataCount||0;function y(t){return t>=1||(t=1),t}(h!==f||p!==v)&&(r="reset"),(this._dirty||"reset"===r)&&(this._dirty=!1,i=this._doReset(u)),this._modBy=f,this._modDataCount=v;var x=t&&t.step;if(s?this._dueEnd=s._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var _=this._dueIndex,b=Math.min(null!=x?this._dueIndex+x:1/0,this._dueEnd);if(!u&&(i||_<b)){var w=this._progress;if(Sb(w))for(var S=0;S<w.length;S++)this._doProgress(w[S],_,b,f,v);else this._doProgress(w,_,b,f,v)}this._dueIndex=b;var M=null!=this._settedOutputEnd?this._settedOutputEnd:b;this._outputDueEnd=M}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},t.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},t.prototype._doProgress=function(t,r,i,s,u){LA.reset(r,i,s,u),this._callingProgress=t,this._callingProgress({start:r,end:i,count:i-r,next:LA.next},this.context)},t.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!t&&this._reset&&((r=this._reset(this.context))&&r.progress&&(i=r.forceFirstProgress,r=r.progress),Sb(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var r,i,s=this._downstream;return s&&s.dirty(),i},t.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},t.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},t.prototype.dispose=function(){if(!this._disposed)this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0},t.prototype.getUpstream=function(){return this._upstream},t.prototype.getDownstream=function(){return this._downstream},t.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},t}(),LA=function(){var t,r,i,s,u,c={reset:function(f,v,y,x){r=f,t=v,i=y,u=Math.ceil((s=x)/i),c.next=i>1&&s>0?p:h}};return c;function h(){return r<t?r++:null}function p(){var c=r%u*i+Math.ceil(r/u),h=r>=t?null:c<s?c:r;return r++,h}}(),LC={},LT="undefined"!=typeof console&&console.warn&&console.log;function LE(t,r,i){if(LT){if(i){if(LC[r])return;LC[r]=!0}console[t]("[ECharts] "+r)}}function LI(t){}function LD(t){throw Error(t)}function LP(t,r){var i=r&&r.type;return"ordinal"===i?t:("time"===i&&!SA(t)&&null!=t&&"-"!==t&&(t=+Tz(t)),null==t||""===t?NaN:Number(t))}var LR=SY({number:function(t){return parseFloat(t)},time:function(t){return+Tz(t)},trim:function(t){return SS(t)?SU(t):t}});function LL(t){return LR.get(t)}var Lk={lt:function(t,r){return t<r},lte:function(t,r){return t<=r},gt:function(t,r){return t>r},gte:function(t,r){return t>=r}},LO=function(){function t(t,r){!SA(r)&&LD(""),this._opFn=Lk[t],this._rvalFloat=Tj(r)}return t.prototype.evaluate=function(t){return SA(t)?this._opFn(t,this._rvalFloat):this._opFn(Tj(t),this._rvalFloat)},t}(),LB=function(){function t(t,r){var i="desc"===t;this._resultLT=i?1:-1,null==r&&(r=i?"min":"max"),this._incomparable="min"===r?-1/0:1/0}return t.prototype.evaluate=function(t,r){var i=SA(t)?t:Tj(t),s=SA(r)?r:Tj(r),u=isNaN(i),c=isNaN(s);if(u&&(i=this._incomparable),c&&(s=this._incomparable),u&&c){var h=SS(t),p=SS(r);h&&(i=p?t:0),p&&(s=h?r:0)}return i<s?this._resultLT:i>s?-this._resultLT:0},t}(),LN=function(){function t(t,r){this._rval=r,this._isEQ=t,this._rvalTypeof=typeof r,this._rvalFloat=Tj(r)}return t.prototype.evaluate=function(t){var r=t===this._rval;if(!r){var i=typeof t;i!==this._rvalTypeof&&("number"===i||"number"===this._rvalTypeof)&&(r=Tj(t)===this._rvalFloat)}return this._isEQ?r:!r},t}(),LF=function(){function t(){}return t.prototype.getRawData=function(){throw Error("not supported")},t.prototype.getRawDataItem=function(t){throw Error("not supported")},t.prototype.cloneRawData=function(){},t.prototype.getDimensionInfo=function(t){},t.prototype.cloneAllDimensionInfo=function(){},t.prototype.count=function(){},t.prototype.retrieveValue=function(t,r){},t.prototype.retrieveValueFromItem=function(t,r){},t.prototype.convertValue=function(t,r){return LP(t,r)},t}();function Lz(t){return!LW(t.sourceFormat)&&LD(""),t.data}function LU(t){var r=t.sourceFormat,i=t.data;if(!LW(r)&&LD(""),r===Rg){for(var s=[],u=0,c=i.length;u<c;u++)s.push(i[u].slice());return s}if(r===Rm){for(var s=[],u=0,c=i.length;u<c;u++)s.push(So({},i[u]));return s}}function LH(t,r,i){return null==i?void 0:!SA(i)&&(isNaN(i)||SK(r,i))?SK(r,i)?r[i]:void 0:t[i]}function LG(t){return Sr(t)}var LV=SY();function LW(t){return t===Rg||t===Rm}var Lj="undefined",LX=typeof Uint32Array===Lj?Array:Uint32Array,LY=typeof Uint16Array===Lj?Array:Uint16Array,L$=typeof Int32Array===Lj?Array:Int32Array,LJ=typeof Float64Array===Lj?Array:Float64Array,LZ={float:LJ,int:L$,ordinal:Array,number:Array,time:LJ};function LK(t){return t>65535?LX:LY}function Lq(){return[1/0,-1/0]}function LQ(t,r,i,s,u){var c=LZ[i||"float"];if(u){var h=t[r],p=h&&h.length;if(p!==s){for(var f=new c(s),v=0;v<p;v++)f[v]=h[v];t[r]=f}}else t[r]=new c(s)}var L0=function(){function t(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=SY()}return t.prototype.initData=function(t,r,i){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var s=t.getSource(),u=this.defaultDimValueGetter=ea$[s.sourceFormat];this._dimValueGetter=i||u,this._rawExtent=[],Ls(s),this._dimensions=Sf(r,function(t){return{type:t.type,property:t.property}}),this._initDataFromProvider(0,t.count())},t.prototype.getProvider=function(){return this._provider},t.prototype.getSource=function(){return this._provider.getSource()},t.prototype.ensureCalculationDimension=function(t,r){var i=this._calcDimNameToIdx,s=this._dimensions,u=i.get(t);if(null!=u){if(s[u].type===r)return u}else u=s.length;return s[u]={type:r},i.set(t,u),this._chunks[u]=new LZ[r||"float"](this._rawCount),this._rawExtent[u]=Lq(),u},t.prototype.collectOrdinalMeta=function(t,r){var i=this._chunks[t],s=this._dimensions[t],u=this._rawExtent,c=s.ordinalOffset||0,h=i.length;0===c&&(u[t]=Lq());for(var p=u[t],f=c;f<h;f++){var v=i[f]=r.parseAndCollect(i[f]);!isNaN(v)&&(p[0]=Math.min(v,p[0]),p[1]=Math.max(v,p[1]))}s.ordinalMeta=r,s.ordinalOffset=h,s.type="ordinal"},t.prototype.getOrdinalMeta=function(t){return this._dimensions[t].ordinalMeta},t.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},t.prototype.appendData=function(t){var r=this._provider,i=this.count();r.appendData(t);var s=r.count();return!r.persistent&&(s+=i),i<s&&this._initDataFromProvider(i,s,!0),[i,s]},t.prototype.appendValues=function(t,r){for(var i=this._chunks,s=this._dimensions,u=s.length,c=this._rawExtent,h=this.count(),p=h+Math.max(t.length,r||0),f=0;f<u;f++){var v=s[f];LQ(i,f,v.type,p,!0)}for(var y=[],x=h;x<p;x++){for(var _=x-h,b=0;b<u;b++){var v=s[b],w=ea$.arrayRows.call(this,t[_]||y,v.property,_,b);i[b][x]=w;var S=c[b];w<S[0]&&(S[0]=w),w>S[1]&&(S[1]=w)}}return this._rawCount=this._count=p,{start:h,end:p}},t.prototype._initDataFromProvider=function(t,r,i){for(var s=this._provider,u=this._chunks,c=this._dimensions,h=c.length,p=this._rawExtent,f=Sf(c,function(t){return t.property}),v=0;v<h;v++){var y=c[v];!p[v]&&(p[v]=Lq()),LQ(u,v,y.type,r,i)}if(s.fillStorage)s.fillStorage(t,r,u,p);else{for(var x=[],_=t;_<r;_++){x=s.getItem(_,x);for(var b=0;b<h;b++){var w=u[b],S=this._dimValueGetter(x,f[b],_,b);w[_]=S;var M=p[b];S<M[0]&&(M[0]=S),S>M[1]&&(M[1]=S)}}}!s.persistent&&s.clean&&s.clean(),this._rawCount=this._count=r,this._extent=[]},t.prototype.count=function(){return this._count},t.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var i=this._chunks[t];return i?i[this.getRawIndex(r)]:NaN},t.prototype.getValues=function(t,r){var i=[],s=[];if(null==r){r=t,t=[];for(var u=0;u<this._dimensions.length;u++)s.push(u)}else s=t;for(var u=0,c=s.length;u<c;u++)i.push(this.get(s[u],r));return i},t.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var i=this._chunks[t];return i?i[r]:NaN},t.prototype.getSum=function(t){var r=this._chunks[t],i=0;if(r)for(var s=0,u=this.count();s<u;s++){var c=this.get(t,s);!isNaN(c)&&(i+=c)}return i},t.prototype.getMedian=function(t){var r=[];this.each([t],function(t){!isNaN(t)&&r.push(t)});var i=r.sort(function(t,r){return t-r}),s=this.count();return 0===s?0:s%2==1?i[(s-1)/2]:(i[s/2]+i[s/2-1])/2},t.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return -1;if(!this._indices)return t;var r=this._indices,i=r[t];if(null!=i&&i<this._count&&i===t)return t;for(var s=0,u=this._count-1;s<=u;){var c=(s+u)/2|0;if(r[c]<t)s=c+1;else{if(!(r[c]>t))return c;u=c-1}}return -1},t.prototype.indicesOfNearest=function(t,r,i){var s=this._chunks[t],u=[];if(!s)return u;null==i&&(i=1/0);for(var c=1/0,h=-1,p=0,f=0,v=this.count();f<v;f++){var y=r-s[this.getRawIndex(f)],x=Math.abs(y);x<=i&&((x<c||x===c&&y>=0&&h<0)&&(c=x,h=y,p=0),y===h&&(u[p++]=f))}return u.length=p,u},t.prototype.getIndices=function(){var t,r=this._indices;if(r){var i=r.constructor,s=this._count;if(i===Array){t=new i(s);for(var u=0;u<s;u++)t[u]=r[u]}else t=new i(r.buffer,0,s)}else{var i=LK(this._rawCount);t=new i(this.count());for(var u=0;u<t.length;u++)t[u]=u}return t},t.prototype.filter=function(t,r){if(!this._count)return this;for(var i=this.clone(),s=i.count(),u=new(LK(i._rawCount))(s),c=[],h=t.length,p=0,f=t[0],v=i._chunks,y=0;y<s;y++){var x=void 0,_=i.getRawIndex(y);if(0===h)x=r(y);else if(1===h)x=r(v[f][_],y);else{for(var b=0;b<h;b++)c[b]=v[t[b]][_];c[b]=y,x=r.apply(null,c)}x&&(u[p++]=_)}return p<s&&(i._indices=u),i._count=p,i._extent=[],i._updateGetRawIdx(),i},t.prototype.selectRange=function(t){var r=this.clone(),i=r._count;if(!i)return this;var s=Sy(t),u=s.length;if(!u)return this;var c=r.count(),h=new(LK(r._rawCount))(c),p=0,f=s[0],v=t[f][0],y=t[f][1],x=r._chunks,_=!1;if(!r._indices){var b=0;if(1===u){for(var w=x[s[0]],S=0;S<i;S++){var M=w[S];(M>=v&&M<=y||isNaN(M))&&(h[p++]=b),b++}_=!0}else if(2===u){for(var w=x[s[0]],A=x[s[1]],C=t[s[1]][0],T=t[s[1]][1],S=0;S<i;S++){var M=w[S],I=A[S];(M>=v&&M<=y||isNaN(M))&&(I>=C&&I<=T||isNaN(I))&&(h[p++]=b),b++}_=!0}}if(!_){if(1===u)for(var S=0;S<c;S++){var D=r.getRawIndex(S),M=x[s[0]][D];(M>=v&&M<=y||isNaN(M))&&(h[p++]=D)}else for(var S=0;S<c;S++){for(var P=!0,D=r.getRawIndex(S),R=0;R<u;R++){var L=s[R],M=x[L][D];(M<t[L][0]||M>t[L][1])&&(P=!1)}P&&(h[p++]=r.getRawIndex(S))}}return p<c&&(r._indices=h),r._count=p,r._extent=[],r._updateGetRawIdx(),r},t.prototype.map=function(t,r){var i=this.clone(t);return this._updateDims(i,t,r),i},t.prototype.modify=function(t,r){this._updateDims(this,t,r)},t.prototype._updateDims=function(t,r,i){for(var s=t._chunks,u=[],c=r.length,h=t.count(),p=[],f=t._rawExtent,v=0;v<r.length;v++)f[r[v]]=Lq();for(var y=0;y<h;y++){for(var x=t.getRawIndex(y),_=0;_<c;_++)p[_]=s[r[_]][x];p[c]=y;var b=i&&i.apply(null,p);if(null!=b){"object"!=typeof b&&(u[0]=b,b=u);for(var v=0;v<b.length;v++){var w=r[v],S=b[v],M=f[w],A=s[w];A&&(A[x]=S),S<M[0]&&(M[0]=S),S>M[1]&&(M[1]=S)}}}},t.prototype.lttbDownSample=function(t,r){var i,s,u,c=this.clone([t],!0),h=c._chunks[t],p=this.count(),f=0,v=Math.floor(1/r),y=this.getRawIndex(0),x=new(LK(this._rawCount))(Math.min((Math.ceil(p/v)+2)*2,p));x[f++]=y;for(var _=1;_<p-1;_+=v){for(var b=Math.min(_+v,p-1),w=Math.min(_+2*v,p),S=(w+b)/2,M=0,A=b;A<w;A++){var C=this.getRawIndex(A),T=h[C];if(!isNaN(T))M+=T}M/=w-b;var I=_,D=Math.min(_+v,p),P=_-1,R=h[y];i=-1,u=I;for(var L=-1,k=0,A=I;A<D;A++){var C=this.getRawIndex(A),T=h[C];if(isNaN(T)){k++,L<0&&(L=C);continue}(s=Math.abs((P-S)*(T-R)-(P-A)*(M-R)))>i&&(i=s,u=C)}k>0&&k<D-I&&(x[f++]=Math.min(L,u),u=Math.max(L,u)),x[f++]=u,y=u}return x[f++]=this.getRawIndex(p-1),c._count=f,c._indices=x,c.getRawIndex=this._getRawIdx,c},t.prototype.downSample=function(t,r,i,s){for(var u=this.clone([t],!0),c=u._chunks,h=[],p=Math.floor(1/r),f=c[t],v=this.count(),y=u._rawExtent[t]=Lq(),x=new(LK(this._rawCount))(Math.ceil(v/p)),_=0,b=0;b<v;b+=p){p>v-b&&(p=v-b,h.length=p);for(var w=0;w<p;w++){var S=this.getRawIndex(b+w);h[w]=f[S]}var M=i(h),A=this.getRawIndex(Math.min(b+s(h,M)||0,v-1));f[A]=M,M<y[0]&&(y[0]=M),M>y[1]&&(y[1]=M),x[_++]=A}return u._count=_,u._indices=x,u._updateGetRawIdx(),u},t.prototype.each=function(t,r){if(!!this._count)for(var i=t.length,s=this._chunks,u=0,c=this.count();u<c;u++){var h=this.getRawIndex(u);switch(i){case 0:r(u);break;case 1:r(s[t[0]][h],u);break;case 2:r(s[t[0]][h],s[t[1]][h],u);break;default:for(var p=0,f=[];p<i;p++)f[p]=s[t[p]][h];f[p]=u,r.apply(null,f)}}},t.prototype.getDataExtent=function(t){var r,i=this._chunks[t],s=Lq();if(!i)return s;var u=this.count();if(!this._indices)return this._rawExtent[t].slice();if(r=this._extent[t])return r.slice();for(var c=(r=s)[0],h=r[1],p=0;p<u;p++){var f=i[this.getRawIndex(p)];f<c&&(c=f),f>h&&(h=f)}return r=[c,h],this._extent[t]=r,r},t.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var i=[],s=this._chunks,u=0;u<s.length;u++)i.push(s[u][r]);return i},t.prototype.clone=function(r,i){var s=new t,u=this._chunks,c=r&&Sg(r,function(t,r){return t[r]=!0,t},{});if(c)for(var h=0;h<u.length;h++)s._chunks[h]=c[h]?function(t){var r=t.constructor;return r===Array?t.slice():new r(t)}(u[h]):u[h];else s._chunks=u;return this._copyCommonProps(s),!i&&(s._indices=this._cloneIndices()),s._updateGetRawIdx(),s},t.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=Sr(this._extent),t._rawExtent=Sr(this._rawExtent)},t.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var i=this._indices.length;r=new t(i);for(var s=0;s<i;s++)r[s]=this._indices[s]}else r=new t(this._indices);return r}return null},t.prototype._getRawIdxIdentity=function(t){return t},t.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},t.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},t.internalField=function(){function t(t,r,i,s){return LP(t[s],this._dimensions[s])}ea$={arrayRows:t,objectRows:function(t,r,i,s){return LP(t[r],this._dimensions[s])},keyedColumns:t,original:function(t,r,i,s){var u=t&&(null==t.value?t:t.value);return LP(u instanceof Array?u[s]:u,this._dimensions[s])},typedArray:function(t,r,i,s){return t[s]}}}(),t}(),L1=function(){function t(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return t.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},t.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},t.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},t.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},t.prototype._createSource=function(){this._setLocalSource([],[]);var t,r,i=this._sourceHost,s=this._getUpstreamSourceManagers(),u=!!s.length;if(L3(i)){var c=void 0,h=void 0,p=void 0;if(u){var f=s[0];f.prepareSource(),c=(p=f.getSource()).data,h=p.sourceFormat,r=[f._getVersionSign()]}else h=SE(c=i.get("data",!0))?Ry:Rf,r=[];var v=this._getSourceMetaRawOption()||{},y=p&&p.metaRawOption||{},x=SO(v.seriesLayoutBy,y.seriesLayoutBy)||null,_=SO(v.sourceHeader,y.sourceHeader),b=SO(v.dimensions,y.dimensions);t=x!==y.seriesLayoutBy||!!_!=!!y.sourceHeader||b?[Ln(c,{seriesLayoutBy:x,sourceHeader:_,dimensions:b},h)]:[]}else if(u){var w=this._applyTransform(s);t=w.sourceList,r=w.upstreamSignList}else t=[Ln(i.get("source",!0),this._getSourceMetaRawOption(),null)],r=[];this._setLocalSource(t,r)},t.prototype._applyTransform=function(t){var r,i,s=this._sourceHost,u=s.get("transform",!0),c=s.get("fromTransformResult",!0);null!=c&&1!==t.length&&L5("");var h=[],p=[];if(Sp(t,function(t){t.prepareSource();var r=t.getSource(c||0);null!=c&&!r&&L5(""),h.push(r),p.push(t._getVersionSign())}),u)i=function(t,r,i){var s=Tq(t),u=s.length;!u&&LD("");for(var c=0;c<u;c++)r=function(t,r,i,s){!r.length&&LD(""),!SC(t)&&LD("");var u=t.type,c=LV.get(u);!c&&LD("");var h=Sf(r,function(t){return function(t,r){var i=new LF,s=t.data,u=i.sourceFormat=t.sourceFormat,c=t.startIndex;t.seriesLayoutBy!==R_&&LD("");var h=[],p={},f=t.dimensionsDefine;if(f)Sp(f,function(t,r){var i=t.name,s={index:r,name:i,displayName:t.displayName};h.push(s),null!=i&&(SK(p,i)&&LD(""),p[i]=s)});else for(var v=0;v<t.dimensionsDetectedCount;v++)h.push({index:v});var y=Lh(u,R_);r.__isBuiltIn&&(i.getRawDataItem=function(t){return y(s,c,h,t)},i.getRawData=Sx(Lz,null,t)),i.cloneRawData=Sx(LU,null,t);var x=Lf(u,R_);i.count=Sx(x,null,s,c,h);var _=Lv(u);i.retrieveValue=function(t,r){return b(y(s,c,h,t),r)};var b=i.retrieveValueFromItem=function(t,r){if(null!=t){var i=h[r];if(i)return _(t,r,i.name)}};return i.getDimensionInfo=Sx(LH,null,h,p),i.cloneAllDimensionInfo=Sx(LG,null,h),i}(t,c)}),p=Tq(c.transform({upstream:h[0],upstreamList:h,config:Sr(t.config)}));return Sf(p,function(t,i){!SC(t)&&LD(""),!t.data&&LD(""),!LW(Li(t.data))&&LD("");var s,u=r[0];if(u&&0===i&&!t.dimensions){var c=u.startIndex;c&&(t.data=u.data.slice(0,c).concat(t.data)),s={seriesLayoutBy:R_,sourceHeader:c,dimensions:u.metaRawOption.dimensions}}else s={seriesLayoutBy:R_,sourceHeader:0,dimensions:t.dimensions};return Ln(t.data,s,null)})}(s[c],r,i,1===u?null:c),c!==u-1&&(r.length=Math.max(r.length,1));return r}(u,h,{datasetIndex:s.componentIndex});else if(null!=c){;i=[new Le({data:(r=h[0]).data,sourceFormat:r.sourceFormat,seriesLayoutBy:r.seriesLayoutBy,dimensionsDefine:Sr(r.dimensionsDefine),startIndex:r.startIndex,dimensionsDetectedCount:r.dimensionsDetectedCount})]}return{sourceList:i,upstreamSignList:p}},t.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var i=t[r];if(i._isDirty()||this._upstreamSignList[r]!==i._getVersionSign())return!0}},t.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var i=this._getUpstreamSourceManagers();return i[0]&&i[0].getSource(t)}return r},t.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},t.prototype._innerGetDataStore=function(t,r,i){var s=this._storeList,u=s[0];!u&&(u=s[0]={});var c=u[i];if(!c){var h=this._getUpstreamSourceManagers()[0];L3(this._sourceHost)&&h?c=h._innerGetDataStore(t,r,i):(c=new L0).initData(new Ll(r,t.length),t),u[i]=c}return c},t.prototype._getUpstreamSourceManagers=function(){var t,r=this._sourceHost;if(L3(r)){var i=RA(r);return i?[i.getSourceManager()]:[]}return Sf((t=r).get("transform",!0)||t.get("fromTransformResult",!0)?Ea(t.ecModel,"dataset",{index:t.get("fromDatasetIndex",!0),id:t.get("fromDatasetId",!0)},Er).models:[],function(t){return t.getSourceManager()})},t.prototype._getSourceMetaRawOption=function(){var t,r,i,s=this._sourceHost;return L3(s)?(t=s.get("seriesLayoutBy",!0),r=s.get("sourceHeader",!0),i=s.get("dimensions",!0)):!this._getUpstreamSourceManagers().length&&(t=s.get("seriesLayoutBy",!0),r=s.get("sourceHeader",!0),i=s.get("dimensions",!0)),{seriesLayoutBy:t,sourceHeader:r,dimensions:i}},t}();function L2(t){t.option.transform&&SG(t.option.transform)}function L3(t){return"series"===t.mainType}function L5(t){throw Error(t)}var L4="line-height:1";function L6(t,r){var i=t.color||"#6e7079",s=t.fontSize||12,u=t.fontWeight||"400",c=t.color||"#464646",h=t.fontSize||14,p=t.fontWeight||"900";return"html"===r?{nameStyle:"font-size:"+MT(s+"")+"px;color:"+MT(i)+";font-weight:"+MT(u+""),valueStyle:"font-size:"+MT(h+"")+"px;color:"+MT(c)+";font-weight:"+MT(p+"")}:{nameStyle:{fontSize:s,fill:i,fontWeight:u},valueStyle:{fontSize:h,fill:c,fontWeight:p}}}var L9=[0,10,20,30],L8=["","\n","\n\n","\n\n\n"];function L7(t,r){return r.type=t,r}function ke(t){return"section"===t.type}function kt(t){return ke(t)?kn:kr}function kn(t,r,i,s){var u=r.noHeader,c=function(t){return{html:L9[t],richText:L8[t]}}(function t(r){if(ke(r)){var i=0,s=r.blocks.length,u=s>1||s>0&&!r.noHeader;return Sp(r.blocks,function(r){var s=t(r);s>=i&&(i=s+ +(u&&(!s||ke(r)&&!r.noHeader)))}),i}return 0}(r)),h=[],p=r.blocks||[];Sz(!p||Sb(p)),p=p||[];var f=t.orderMode;if(r.sortBlocks&&f){p=p.slice();var v={valueAsc:"asc",valueDesc:"desc"};if(SK(v,f)){var y=new LB(v[f],null);p.sort(function(t,r){return y.evaluate(t.sortParam,r.sortParam)})}else"seriesDesc"===f&&p.reverse()}Sp(p,function(i,u){var p=r.valueFormatter,f=(ke(i)?kn:kr)(p?So(So({},t),{valueFormatter:p}):t,i,u>0?c.html:0,s);null!=f&&h.push(f)});var x="richText"===t.renderMode?h.join(c.richText):ka(h.join(""),u?i:c.html);if(u)return x;var _=Pq(r.header,"ordinal",t.useUTC),b=L6(s,t.renderMode).nameStyle;return"richText"===t.renderMode?ko(t,_,b)+c.richText+x:ka('<div style="'+b+";"+L4+';">'+MT(_)+"</div>"+x,i)}function kr(t,r,i,s){var u=t.renderMode,c=r.noName,h=r.noValue,p=!r.markerType,f=r.name,v=t.useUTC,y=r.valueFormatter||t.valueFormatter||function(t){return Sf(t=Sb(t)?t:[t],function(t,r){return Pq(t,Sb(b)?b[r]:b,v)})};if(!c||!h){var x=p?"":t.markupStyleCreator.makeTooltipMarker(r.markerType,r.markerColor||"#333",u),_=c?"":Pq(f,"ordinal",v),b=r.valueType,w=h?[]:y(r.value,r.dataIndex),S=!p||!c,M=!p&&c,A=L6(s,u),C=A.nameStyle,T=A.valueStyle;return"richText"===u?(p?"":x)+(c?"":ko(t,_,C))+(h?"":function(t,r,i,s,u){var c=[u];return i&&c.push({padding:[0,0,0,s?10:20],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(Sb(r)?r.join("  "):r,c)}(t,w,S,M,T)):ka((p?"":x)+(c?"":function(t,r,i){return'<span style="'+i+";"+(r?"margin-left:2px":"")+'">'+MT(t)+"</span>"}(_,!p,C))+(h?"":function(t,r,i,s){return'<span style="'+(r?"float:right;margin-left:"+(i?"10px":"20px"):"")+";"+s+'">'+Sf(t=Sb(t)?t:[t],function(t){return MT(t)}).join("&nbsp;&nbsp;")+"</span>"}(w,S,M,T)),i)}}function ki(t,r,i,s,u,c){if(!!t)return(ke(t)?kn:kr)({useUTC:u,renderMode:i,orderMode:s,markupStyleCreator:r,valueFormatter:t.valueFormatter},t,0,c)}function ka(t,r){return'<div style="margin: '+r+"px 0 0;"+L4+';">'+t+'<div style="clear:both"></div></div>'}function ko(t,r,i){return t.markupStyleCreator.wrapRichTextStyle(r,i)}function ks(t,r){return P4(t.getData().getItemVisual(r,"style")[t.visualDrawType])}function kl(t,r){var i=t.get("padding");return null!=i?i:"richText"===r?[8,10]:10}var ku=function(){function t(){this.richTextStyles={},this._nextStyleNameId=TY()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(t,r,i){var s="richText"===i?this._generateStyleName():null,u=P2({color:r,type:t,renderMode:i,markerId:s});return SS(u)?u:(this.richTextStyles[s]=u.style,u.content)},t.prototype.wrapRichTextStyle=function(t,r){var i={};Sb(r)?Sp(r,function(t){return So(i,t)}):So(i,r);var s=this._generateStyleName();return this.richTextStyles[s]=i,"{"+s+"|"+t+"}"},t}();function kc(t){var r,i,s,u,c=t.series,h=t.dataIndex,p=t.multipleSeries,f=c.getData(),v=f.mapDimensionsAll("defaultedTooltip"),y=v.length,x=c.getRawValue(h),_=Sb(x),b=ks(c,h);if(y>1||_&&!y){var w=function(t,r,i,s,u){var c=r.getData(),h=Sg(t,function(t,r,i){var s=c.getDimensionInfo(i);return t=t||s&&!1!==s.tooltip&&null!=s.displayName},!1),p=[],f=[],v=[];function y(t,r){var i=c.getDimensionInfo(r);if(!!i&&!1!==i.otherDims.tooltip)h?v.push(L7("nameValue",{markerType:"subItem",markerColor:u,name:i.displayName,value:t,valueType:i.type})):(p.push(t),f.push(i.type))}return s.length?Sp(s,function(t){y(Lx(c,i,t),t)}):Sp(t,y),{inlineValues:p,inlineValueTypes:f,blocks:v}}(x,c,h,v,b);r=w.inlineValues,i=w.inlineValueTypes,s=w.blocks,u=w.inlineValues[0]}else if(y){var S=f.getDimensionInfo(v[0]);u=r=Lx(f,h,v[0]),i=S.type}else u=r=_?x[0]:x;var M=T6(c),A=M&&c.name||"",C=f.getName(h),T=p?A:C;return L7("section",{header:A,noHeader:p||!M,sortParam:u,blocks:[L7("nameValue",{markerType:"item",markerColor:b,name:T,noName:!SU(T),value:r,valueType:i,dataIndex:h})].concat(s||[])})}var kh=T7();function kd(t,r){return t.getName(r)||t.getId(r)}var kp="__universalTransitionEnabled",kf=function(t){var r;function i(){var r=null!==t&&t.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return wU(i,t),i.prototype.init=function(t,r,i){this.seriesIndex=this.componentIndex,this.dataTask=LS({count:km,reset:kv}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,i),(kh(this).sourceManager=new L1(this)).prepareSource();var s=this.getInitialData(t,i);kx(s,this),this.dataTask.context.data=s;kh(this).dataBeforeProcessed=s,kg(this),this._initSelectedMapFromData(s)},i.prototype.mergeDefaultAndTheme=function(t,r){var i=Rr(this),s=i?Ra(t):{},u=this.subType;Ru.hasClass(u)&&(u+="Series"),Si(t,r.getTheme().get(this.subType)),Si(t,this.getDefaultOption()),TQ(t,"label",["show"]),this.fillDataTextStyle(t.data),i&&Ri(t,s,i)},i.prototype.mergeOption=function(t,r){t=Si(this.option,t,!0),this.fillDataTextStyle(t.data);var i=Rr(this);i&&Ri(this.option,t,i);var s=kh(this).sourceManager;s.dirty(),s.prepareSource();var u=this.getInitialData(t,r);kx(u,this),this.dataTask.dirty(),this.dataTask.context.data=u,kh(this).dataBeforeProcessed=u,kg(this),this._initSelectedMapFromData(u)},i.prototype.fillDataTextStyle=function(t){if(t&&!SE(t)){for(var r=["show"],i=0;i<t.length;i++)t[i]&&t[i].label&&TQ(t[i],"label",r)}},i.prototype.getInitialData=function(t,r){},i.prototype.appendData=function(t){this.getRawData().appendData(t.data)},i.prototype.getData=function(t){var r=kb(this);if(!r)return kh(this).data;var i=r.context.data;return null!=t&&i.getLinkedData?i.getLinkedData(t):i},i.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},i.prototype.setData=function(t){var r=kb(this);if(r){var i=r.context;i.outputData=t,r!==this.dataTask&&(i.data=t)}kh(this).data=t},i.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return SY(t)},i.prototype.getSourceManager=function(){return kh(this).sourceManager},i.prototype.getSource=function(){return this.getSourceManager().getSource()},i.prototype.getRawData=function(){return kh(this).dataBeforeProcessed},i.prototype.getColorBy=function(){return this.get("colorBy")||"series"},i.prototype.isColorBySeries=function(){return"series"===this.getColorBy()},i.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},i.prototype.formatTooltip=function(t,r,i){return kc({series:this,dataIndex:t,multipleSeries:r})},i.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(wY.node&&!(t&&t.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},i.prototype.restoreData=function(){this.dataTask.dirty()},i.prototype.getColorFromPalette=function(t,r,i){var s=this.ecModel,u=RP.prototype.getColorFromPalette.call(this,t,r,i);return!u&&(u=s.getColorFromPalette(t,r,i)),u},i.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},i.prototype.getProgressive=function(){return this.get("progressive")},i.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},i.prototype.select=function(t,r){this._innerSelect(this.getData(r),t)},i.prototype.unselect=function(t,r){var i=this.option.selectedMap;if(!!i){var s=this.option.selectedMode,u=this.getData(r);if("series"===s||"all"===i){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var c=0;c<t.length;c++){var h=kd(u,t[c]);i[h]=!1,this._selectedDataIndicesMap[h]=-1}}},i.prototype.toggleSelect=function(t,r){for(var i=[],s=0;s<t.length;s++)i[0]=t[s],this.isSelected(t[s],r)?this.unselect(i,r):this.select(i,r)},i.prototype.getSelectedDataIndices=function(){if("all"===this.option.selectedMap)return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,r=Sy(t),i=[],s=0;s<r.length;s++){var u=t[r[s]];u>=0&&i.push(u)}return i},i.prototype.isSelected=function(t,r){var i=this.option.selectedMap;if(!i)return!1;var s=this.getData(r);return("all"===i||i[kd(s,t)])&&!s.getItemModel(t).get(["select","disabled"])},i.prototype.isUniversalTransitionEnabled=function(){if(this[kp])return!0;var t=this.option.universalTransition;return!!t&&(!0===t||t&&t.enabled)},i.prototype._innerSelect=function(t,r){var i,s,u=this.option,c=u.selectedMode,h=r.length;if(!!c&&!!h){if("series"===c)u.selectedMap="all";else if("multiple"===c){!SC(u.selectedMap)&&(u.selectedMap={});for(var p=u.selectedMap,f=0;f<h;f++){var v=r[f],y=kd(t,v);p[y]=!0,this._selectedDataIndicesMap[y]=t.getRawIndex(v)}}else if("single"===c||!0===c){var x=r[h-1],y=kd(t,x);u.selectedMap=((i={})[y]=!0,i),this._selectedDataIndicesMap=((s={})[y]=t.getRawIndex(x),s)}}},i.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var r=[];t.hasItemOption&&t.each(function(i){var s=t.getRawDataItem(i);s&&s.selected&&r.push(i)}),r.length>0&&this._innerSelect(t,r)}},i.registerClass=function(t){return Ru.registerClass(t)},i.protoInitialize=void((r=i.prototype).type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"),i}(Ru);function kg(t){var r=t.name;!T6(t)&&(t.name=function(t){var r=t.getRawData(),i=r.mapDimensionsAll("seriesName"),s=[];return Sp(i,function(t){var i=r.getDimensionInfo(t);i.displayName&&s.push(i.displayName)}),s.join(" ")}(t)||r)}Sh(kf,Lb),Sh(kf,RP),Ep(kf,Ru);function km(t){return t.model.getRawData().count()}function kv(t){var r=t.model;return r.setData(r.getRawData().cloneShallow()),ky}function ky(t,r){r.outputData&&t.end>r.outputData.count()&&r.model.getRawData().cloneShallow(r.outputData)}function kx(t,r){Sp(S$(t.CHANGABLE_METHODS,t.DOWNSAMPLE_METHODS),function(i){t.wrapMethod(i,S_(k_,r))})}function k_(t,r){var i=kb(t);return i&&i.setOutputEnd((r||this).count()),r}function kb(t){var r=(t.ecModel||{}).scheduler,i=r&&r.getPipeline(t.uid);if(i){var s=i.currentTask;if(s){var u=s.agentStubMap;u&&(s=u.get(t.uid))}return s}}let kw=kf;var kS=function(){function t(){this.group=new Tf,this.uid=Pg("viewComponent")}return t.prototype.init=function(t,r){},t.prototype.render=function(t,r,i,s){},t.prototype.dispose=function(t,r){},t.prototype.updateView=function(t,r,i,s){},t.prototype.updateLayout=function(t,r,i,s){},t.prototype.updateVisual=function(t,r,i,s){},t.prototype.toggleBlurSeries=function(t,r,i){},t.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},t}();Ed(kS),Ev(kS);let kM=kS;function kA(){var t=T7();return function(r){var i=t(r),s=r.pipelineContext,u=!!i.large,c=!!i.progressiveRender,h=i.large=!!(s&&s.large),p=i.progressiveRender=!!(s&&s.progressiveRender);return!!(u!==h||c!==p)&&"reset"}}var kC=Iu.CMD,kT=[[],[],[]],kE=Math.sqrt,kI=Math.atan2;function kD(t,r){if(!!r){var i,s,u,c,h,p,f=t.data,v=t.len(),y=kC.M,x=kC.C,_=kC.L,b=kC.R,w=kC.A,S=kC.Q;for(u=0,c=0;u<v;){switch(i=f[u++],c=u,s=0,i){case y:case _:s=1;break;case x:s=3;break;case S:s=2;break;case w:var M=r[4],A=r[5],C=kE(r[0]*r[0]+r[1]*r[1]),T=kE(r[2]*r[2]+r[3]*r[3]),I=kI(-r[1]/T,r[0]/C);f[u]*=C,f[u++]+=M,f[u]*=T,f[u++]+=A,f[u++]*=C,f[u++]*=T,f[u++]+=I,f[u++]+=I,u+=2,c=u;break;case b:p[0]=f[u++],p[1]=f[u++],Md(p,p,r),f[c++]=p[0],f[c++]=p[1],p[0]+=f[u++],p[1]+=f[u++],Md(p,p,r),f[c++]=p[0],f[c++]=p[1]}for(h=0;h<s;h++){var D=kT[h];D[0]=f[u++],D[1]=f[u++],Md(D,D,r),f[c++]=D[0],f[c++]=D[1]}}t.increaseVersion()}}var kP=Math.sqrt,kR=Math.sin,kL=Math.cos,kk=Math.PI;function kO(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function kB(t,r){return(t[0]*r[0]+t[1]*r[1])/(kO(t)*kO(r))}function kN(t,r){return(t[0]*r[1]<t[1]*r[0]?-1:1)*Math.acos(kB(t,r))}function kF(t,r,i,s,u,c,h,p,f,v,y){var x=kk/180*f,_=kL(x)*(t-i)/2+kR(x)*(r-s)/2,b=-1*kR(x)*(t-i)/2+kL(x)*(r-s)/2,w=_*_/(h*h)+b*b/(p*p);w>1&&(h*=kP(w),p*=kP(w));var S=(u===c?-1:1)*kP((h*h*(p*p)-h*h*(b*b)-p*p*(_*_))/(h*h*(b*b)+p*p*(_*_)))||0,M=S*h*b/p,A=-(S*p)*_/h,C=(t+i)/2+kL(x)*M-kR(x)*A,T=(r+s)/2+kR(x)*M+kL(x)*A,I=kN([1,0],[(_-M)/h,(b-A)/p]),D=[(_-M)/h,(b-A)/p],P=[(-1*_-M)/h,(-1*b-A)/p],R=kN(D,P);if(-1>=kB(D,P)&&(R=kk),kB(D,P)>=1&&(R=0),R<0){var L=Math.round(R/kk*1e6)/1e6;R=2*kk+L%2*kk}y.addData(v,C,T,h,p,I,R,x,c)}var kz=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,kU=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g,kH=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.prototype.applyTransform=function(t){},r}(IM);function kG(t){return null!=t.setData}function kV(t,r){var i=function(t){var r,i=new Iu;if(!t)return i;var s=0,u=0,c=0,h=0,p=Iu.CMD,f=t.match(kz);if(!f)return i;for(var v=0;v<f.length;v++){for(var y=f[v],x=y.charAt(0),_=void 0,b=y.match(kU)||[],w=b.length,S=0;S<w;S++)b[S]=parseFloat(b[S]);for(var M=0;M<w;){var A=void 0,C=void 0,T=void 0,I=void 0,D=void 0,P=void 0,R=void 0,L=s,k=u,O=void 0,B=void 0;switch(x){case"l":s+=b[M++],u+=b[M++],_=p.L,i.addData(_,s,u);break;case"L":s=b[M++],u=b[M++],_=p.L,i.addData(_,s,u);break;case"m":s+=b[M++],u+=b[M++],_=p.M,i.addData(_,s,u),c=s,h=u,x="l";break;case"M":s=b[M++],u=b[M++],_=p.M,i.addData(_,s,u),c=s,h=u,x="L";break;case"h":s+=b[M++],_=p.L,i.addData(_,s,u);break;case"H":s=b[M++],_=p.L,i.addData(_,s,u);break;case"v":u+=b[M++],_=p.L,i.addData(_,s,u);break;case"V":u=b[M++],_=p.L,i.addData(_,s,u);break;case"C":_=p.C,i.addData(_,b[M++],b[M++],b[M++],b[M++],b[M++],b[M++]),s=b[M-2],u=b[M-1];break;case"c":_=p.C,i.addData(_,b[M++]+s,b[M++]+u,b[M++]+s,b[M++]+u,b[M++]+s,b[M++]+u),s+=b[M-2],u+=b[M-1];break;case"S":A=s,C=u,O=i.len(),B=i.data,r===p.C&&(A+=s-B[O-4],C+=u-B[O-3]),_=p.C,L=b[M++],k=b[M++],s=b[M++],u=b[M++],i.addData(_,A,C,L,k,s,u);break;case"s":A=s,C=u,O=i.len(),B=i.data,r===p.C&&(A+=s-B[O-4],C+=u-B[O-3]),_=p.C,L=s+b[M++],k=u+b[M++],s+=b[M++],u+=b[M++],i.addData(_,A,C,L,k,s,u);break;case"Q":L=b[M++],k=b[M++],s=b[M++],u=b[M++],_=p.Q,i.addData(_,L,k,s,u);break;case"q":L=b[M++]+s,k=b[M++]+u,s+=b[M++],u+=b[M++],_=p.Q,i.addData(_,L,k,s,u);break;case"T":A=s,C=u,O=i.len(),B=i.data,r===p.Q&&(A+=s-B[O-4],C+=u-B[O-3]),s=b[M++],u=b[M++],_=p.Q,i.addData(_,A,C,s,u);break;case"t":A=s,C=u,O=i.len(),B=i.data,r===p.Q&&(A+=s-B[O-4],C+=u-B[O-3]),s+=b[M++],u+=b[M++],_=p.Q,i.addData(_,A,C,s,u);break;case"A":T=b[M++],I=b[M++],D=b[M++],P=b[M++],R=b[M++],L=s,k=u,s=b[M++],u=b[M++],kF(L,k,s,u,P,R,T,I,D,_=p.A,i);break;case"a":T=b[M++],I=b[M++],D=b[M++],P=b[M++],R=b[M++],L=s,k=u,s+=b[M++],u+=b[M++],kF(L,k,s,u,P,R,T,I,D,_=p.A,i)}}("z"===x||"Z"===x)&&(_=p.Z,i.addData(_),s=c,u=h),r=_}return i.toStatic(),i}(t),s=So({},r);return s.buildPath=function(t){if(kG(t)){t.setData(i.data);var r=t.getContext();r&&t.rebuildPath(r,1)}else{var r=t;i.rebuildPath(r,1)}},s.applyTransform=function(t){kD(i,t),this.dirtyShape()},s}function kW(t,r){return new kH(kV(t,r))}function kj(t,r){r=r||{};var i=new IM;return t.shape&&i.setShape(t.shape),i.setStyle(t.style),r.bakeTransform?kD(i.path,t.getComputedTransform()):r.toLocal?i.setLocalTransform(t.getComputedTransform()):i.copyTransform(t),i.buildPath=t.buildPath,i.applyTransform=i.applyTransform,i.z=t.z,i.z2=t.z2,i.zlevel=t.zlevel,i}var kX=function(){this.cx=0,this.cy=0,this.r=0},kY=function(t){function r(r){return t.call(this,r)||this}return wU(r,t),r.prototype.getDefaultShape=function(){return new kX},r.prototype.buildPath=function(t,r){t.moveTo(r.cx+r.r,r.cy),t.arc(r.cx,r.cy,r.r,0,2*Math.PI)},r}(IM);kY.prototype.type="circle";let k$=kY;var kJ=function(){this.cx=0,this.cy=0,this.rx=0,this.ry=0},kZ=function(t){function r(r){return t.call(this,r)||this}return wU(r,t),r.prototype.getDefaultShape=function(){return new kJ},r.prototype.buildPath=function(t,r){var i=r.cx,s=r.cy,u=r.rx,c=r.ry,h=.5522848*u,p=.5522848*c;t.moveTo(i-u,s),t.bezierCurveTo(i-u,s-p,i-h,s-c,i,s-c),t.bezierCurveTo(i+h,s-c,i+u,s-p,i+u,s),t.bezierCurveTo(i+u,s+p,i+h,s+c,i,s+c),t.bezierCurveTo(i-h,s+c,i-u,s+p,i-u,s),t.closePath()},r}(IM);kZ.prototype.type="ellipse";let kK=kZ;var kq=Math.PI,kQ=2*kq,k0=Math.sin,k1=Math.cos,k2=Math.acos,k3=Math.atan2,k5=Math.abs,k4=Math.sqrt,k6=Math.max,k9=Math.min;function k8(t,r,i,s,u,c,h){var p=t-i,f=r-s,v=(h?c:-c)/k4(p*p+f*f),y=v*f,x=-v*p,_=t+y,b=r+x,w=i+y,S=s+x,M=(_+w)/2,A=(b+S)/2,C=w-_,T=S-b,I=C*C+T*T,D=u-c,P=_*S-w*b,R=(T<0?-1:1)*k4(k6(0,D*D*I-P*P)),L=(P*T-C*R)/I,k=(-P*C-T*R)/I,O=(P*T+C*R)/I,B=(-P*C+T*R)/I,N=L-M,F=k-A,z=O-M,U=B-A;return N*N+F*F>z*z+U*U&&(L=O,k=B),{cx:L,cy:k,x0:-y,y0:-x,x1:L*(u/D-1),y1:k*(u/D-1)}}var k7=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0},Oe=function(t){function r(r){return t.call(this,r)||this}return wU(r,t),r.prototype.getDefaultShape=function(){return new k7},r.prototype.buildPath=function(t,r){!function(t,r){var i,s=k6(r.r,0),u=k6(r.r0||0,0),c=s>0,h=u>0;if(!c&&!h)return;if(!c&&(s=u,u=0),u>s){var p=s;s=u,u=p}var f=r.startAngle,v=r.endAngle;if(!(isNaN(f)||isNaN(v))){var y=r.cx,x=r.cy,_=!!r.clockwise,b=k5(v-f),w=b>kQ&&b%kQ;if(w>1e-4&&(b=w),s>1e-4){if(b>kQ-1e-4)t.moveTo(y+s*k1(f),x+s*k0(f)),t.arc(y,x,s,f,v,!_),u>1e-4&&(t.moveTo(y+u*k1(v),x+u*k0(v)),t.arc(y,x,u,v,f,_));else{var S=void 0,M=void 0,A=void 0,C=void 0,T=void 0,I=void 0,D=void 0,P=void 0,R=void 0,L=void 0,k=void 0,O=void 0,B=void 0,N=void 0,F=void 0,z=void 0,U=s*k1(f),H=s*k0(f),G=u*k1(v),V=u*k0(v),W=b>1e-4;if(W){var j=r.cornerRadius;j&&(S=(i=function(t){var r;if(Sb(t)){var i=t.length;if(!i)return t;r=1===i?[t[0],t[0],0,0]:2===i?[t[0],t[0],t[1],t[1]]:3===i?t.concat(t[2]):t}else r=[t,t,t,t];return r}(j))[0],M=i[1],A=i[2],C=i[3]);var X=k5(s-u)/2;if(T=k9(X,A),I=k9(X,C),D=k9(X,S),P=k9(X,M),k=R=k6(T,I),O=L=k6(D,P),(R>1e-4||L>1e-4)&&(B=s*k1(v),N=s*k0(v),F=u*k1(f),z=u*k0(f),b<kq)){var Y=function(t,r,i,s,u,c,h,p){var f=i-t,v=s-r,y=h-u,x=p-c,_=x*f-y*v;if(!(_*_<1e-4))return _=(y*(r-c)-x*(t-u))/_,[t+_*f,r+_*v]}(U,H,F,z,B,N,G,V);if(Y){var $=U-Y[0],J=H-Y[1],Z=B-Y[0],K=N-Y[1],q=1/k0(k2(($*Z+J*K)/(k4($*$+J*J)*k4(Z*Z+K*K)))/2),Q=k4(Y[0]*Y[0]+Y[1]*Y[1]);k=k9(R,(s-Q)/(q+1)),O=k9(L,(u-Q)/(q-1))}}}if(W){if(k>1e-4){var ee=k9(A,k),et=k9(C,k),en=k8(F,z,U,H,s,ee,_),er=k8(B,N,G,V,s,et,_);t.moveTo(y+en.cx+en.x0,x+en.cy+en.y0),k<R&&ee===et?t.arc(y+en.cx,x+en.cy,k,k3(en.y0,en.x0),k3(er.y0,er.x0),!_):(ee>0&&t.arc(y+en.cx,x+en.cy,ee,k3(en.y0,en.x0),k3(en.y1,en.x1),!_),t.arc(y,x,s,k3(en.cy+en.y1,en.cx+en.x1),k3(er.cy+er.y1,er.cx+er.x1),!_),et>0&&t.arc(y+er.cx,x+er.cy,et,k3(er.y1,er.x1),k3(er.y0,er.x0),!_))}else t.moveTo(y+U,x+H),t.arc(y,x,s,f,v,!_)}else t.moveTo(y+U,x+H);if(u>1e-4&&W){if(O>1e-4){var ee=k9(S,O),et=k9(M,O),en=k8(G,V,B,N,u,-et,_),er=k8(U,H,F,z,u,-ee,_);t.lineTo(y+en.cx+en.x0,x+en.cy+en.y0),O<L&&ee===et?t.arc(y+en.cx,x+en.cy,O,k3(en.y0,en.x0),k3(er.y0,er.x0),!_):(et>0&&t.arc(y+en.cx,x+en.cy,et,k3(en.y0,en.x0),k3(en.y1,en.x1),!_),t.arc(y,x,u,k3(en.cy+en.y1,en.cx+en.x1),k3(er.cy+er.y1,er.cx+er.x1),_),ee>0&&t.arc(y+er.cx,x+er.cy,ee,k3(er.y1,er.x1),k3(er.y0,er.x0),!_))}else t.lineTo(y+G,x+V),t.arc(y,x,u,v,f,_)}else t.lineTo(y+G,x+V)}}else t.moveTo(y,x);t.closePath()}}(t,r)},r.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},r}(IM);Oe.prototype.type="sector";let Ot=Oe;var On=function(){this.cx=0,this.cy=0,this.r=0,this.r0=0},Or=function(t){function r(r){return t.call(this,r)||this}return wU(r,t),r.prototype.getDefaultShape=function(){return new On},r.prototype.buildPath=function(t,r){var i=r.cx,s=r.cy,u=2*Math.PI;t.moveTo(i+r.r,s),t.arc(i,s,r.r,0,u,!1),t.moveTo(i+r.r0,s),t.arc(i,s,r.r0,0,u,!0)},r}(IM);Or.prototype.type="ring";let Oi=Or;function Oa(t,r,i){var s=r.smooth,u=r.points;if(u&&u.length>=2){if(s){var c=function(t,r,i,s){var u,c,h,p,f=[],v=[],y=[],x=[];if(s){h=[1/0,1/0],p=[-1/0,-1/0];for(var _=0,b=t.length;_<b;_++)Mp(h,h,t[_]),Mf(p,p,t[_]);Mp(h,h,s[0]),Mf(p,p,s[1])}for(var _=0,b=t.length;_<b;_++){var w=t[_];if(i)u=t[_?_-1:b-1],c=t[(_+1)%b];else{if(0===_||_===b-1){f.push(S2(t[_]));continue}u=t[_-1],c=t[_+1]}S6(v,c,u),Mi(v,v,r);var S=Mo(w,u),M=Mo(w,c),A=S+M;0!==A&&(S/=A,M/=A),Mi(y,v,-S),Mi(x,v,M);var C=S5([],w,y),T=S5([],w,x);s&&(Mf(C,C,h),Mp(C,C,p),Mf(T,T,h),Mp(T,T,p)),f.push(C),f.push(T)}return i&&f.push(f.shift()),f}(u,s,i,r.smoothConstraint);t.moveTo(u[0][0],u[0][1]);for(var h=u.length,p=0;p<(i?h:h-1);p++){var f=c[2*p],v=c[2*p+1],y=u[(p+1)%h];t.bezierCurveTo(f[0],f[1],v[0],v[1],y[0],y[1])}}else{t.moveTo(u[0][0],u[0][1]);for(var p=1,x=u.length;p<x;p++)t.lineTo(u[p][0],u[p][1])}i&&t.closePath()}}var Oo=function(){this.points=null,this.smooth=0,this.smoothConstraint=null},Os=function(t){function r(r){return t.call(this,r)||this}return wU(r,t),r.prototype.getDefaultShape=function(){return new Oo},r.prototype.buildPath=function(t,r){Oa(t,r,!0)},r}(IM);Os.prototype.type="polygon";let Ol=Os;var Ou=function(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null},Oc=function(t){function r(r){return t.call(this,r)||this}return wU(r,t),r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new Ou},r.prototype.buildPath=function(t,r){Oa(t,r,!1)},r}(IM);Oc.prototype.type="polyline";let Oh=Oc;var Od={},Op=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1},Of=function(t){function r(r){return t.call(this,r)||this}return wU(r,t),r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new Op},r.prototype.buildPath=function(t,r){if(this.subPixelOptimize){var i,s,u,c,h=IR(Od,r,this.style);i=h.x1,s=h.y1,u=h.x2,c=h.y2}else i=r.x1,s=r.y1,u=r.x2,c=r.y2;var p=r.percent;if(0!==p)t.moveTo(i,s),p<1&&(u=i*(1-p)+u*p,c=s*(1-p)+c*p),t.lineTo(u,c)},r.prototype.pointAt=function(t){var r=this.shape;return[r.x1*(1-t)+r.x2*t,r.y1*(1-t)+r.y2*t]},r}(IM);Of.prototype.type="line";let Og=Of;var Om=[],Ov=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1};function Oy(t,r,i){var s=t.cpx2,u=t.cpy2;return null!=s||null!=u?[(i?AA:AM)(t.x1,t.cpx1,t.cpx2,t.x2,r),(i?AA:AM)(t.y1,t.cpy1,t.cpy2,t.y2,r)]:[(i?AP:AD)(t.x1,t.cpx1,t.x2,r),(i?AP:AD)(t.y1,t.cpy1,t.y2,r)]}var Ox=function(t){function r(r){return t.call(this,r)||this}return wU(r,t),r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new Ov},r.prototype.buildPath=function(t,r){var i=r.x1,s=r.y1,u=r.x2,c=r.y2,h=r.cpx1,p=r.cpy1,f=r.cpx2,v=r.cpy2,y=r.percent;if(0!==y)t.moveTo(i,s),null==f||null==v?(y<1&&(AL(i,h,u,y,Om),h=Om[1],u=Om[2],AL(s,p,c,y,Om),p=Om[1],c=Om[2]),t.quadraticCurveTo(h,p,u,c)):(y<1&&(AE(i,h,f,u,y,Om),h=Om[1],f=Om[2],u=Om[3],AE(s,p,v,c,y,Om),p=Om[1],v=Om[2],c=Om[3]),t.bezierCurveTo(h,p,f,v,u,c))},r.prototype.pointAt=function(t){return Oy(this.shape,t,!1)},r.prototype.tangentAt=function(t){var r=Oy(this.shape,t,!0);return Ma(r,r)},r}(IM);Ox.prototype.type="bezier-curve";let O_=Ox;var Ob=function(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},Ow=function(t){function r(r){return t.call(this,r)||this}return wU(r,t),r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new Ob},r.prototype.buildPath=function(t,r){var i=r.cx,s=r.cy,u=Math.max(r.r,0),c=r.startAngle,h=r.endAngle,p=r.clockwise,f=Math.cos(c),v=Math.sin(c);t.moveTo(f*u+i,v*u+s),t.arc(i,s,u,c,h,!p)},r}(IM);Ow.prototype.type="arc";let OS=Ow,OM=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.type="compound",r}return wU(r,t),r.prototype._updatePathDirty=function(){for(var t=this.shape.paths,r=this.shapeChanged(),i=0;i<t.length;i++)r=r||t[i].shapeChanged();r&&this.dirtyShape()},r.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],r=this.getGlobalScale(),i=0;i<t.length;i++)!t[i].path&&t[i].createPathProxy(),t[i].path.setScale(r[0],r[1],t[i].segmentIgnoreThreshold)},r.prototype.buildPath=function(t,r){for(var i=r.paths||[],s=0;s<i.length;s++)i[s].buildPath(t,i[s].shape,!0)},r.prototype.afterBrush=function(){for(var t=this.shape.paths||[],r=0;r<t.length;r++)t[r].pathUpdated()},r.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),IM.prototype.getBoundingRect.call(this)},r}(IM);var OA=function(){function t(t){this.colorStops=t||[]}return t.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},t}();let OC=function(t){function r(r,i,s,u,c,h){var p=t.call(this,c)||this;return p.x=null==r?0:r,p.y=null==i?0:i,p.x2=null==s?1:s,p.y2=null==u?0:u,p.type="linear",p.global=h||!1,p}return wU(r,t),r}(OA),OT=function(t){function r(r,i,s,u,c){var h=t.call(this,u)||this;return h.x=null==r?.5:r,h.y=null==i?.5:i,h.r=null==s?.5:s,h.type="radial",h.global=c||!1,h}return wU(r,t),r}(OA);var OE=[0,0],OI=[0,0],OD=new MZ,OP=new MZ;let OR=function(){function t(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var i=0;i<4;i++)this._corners[i]=new MZ;for(var i=0;i<2;i++)this._axes[i]=new MZ;t&&this.fromBoundingRect(t,r)}return t.prototype.fromBoundingRect=function(t,r){var i=this._corners,s=this._axes,u=t.x,c=t.y,h=u+t.width,p=c+t.height;if(i[0].set(u,c),i[1].set(h,c),i[2].set(h,p),i[3].set(u,p),r)for(var f=0;f<4;f++)i[f].transform(r);MZ.sub(s[0],i[1],i[0]),MZ.sub(s[1],i[3],i[0]),s[0].normalize(),s[1].normalize();for(var f=0;f<2;f++)this._origin[f]=s[f].dot(i[0])},t.prototype.intersect=function(t,r){var i=!0,s=!r;return(OD.set(1/0,1/0),OP.set(0,0),!this._intersectCheckOneSide(this,t,OD,OP,s,1)&&(i=!1,s)||!this._intersectCheckOneSide(t,this,OD,OP,s,-1)&&(i=!1,s))?i:(!s&&MZ.copy(r,i?OD:OP),i)},t.prototype._intersectCheckOneSide=function(t,r,i,s,u,c){for(var h=!0,p=0;p<2;p++){var f=this._axes[p];if(this._getProjMinMaxOnAxis(p,t._corners,OE),this._getProjMinMaxOnAxis(p,r._corners,OI),OE[1]<OI[0]||OE[0]>OI[1]){if(h=!1,u)return h;var v=Math.abs(OI[0]-OE[1]),y=Math.abs(OE[0]-OI[1]);Math.min(v,y)>s.len()&&(v<y?MZ.scale(s,f,-v*c):MZ.scale(s,f,y*c))}else if(i){var v=Math.abs(OI[0]-OE[1]),y=Math.abs(OE[0]-OI[1]);Math.min(v,y)<i.len()&&(v<y?MZ.scale(i,f,v*c):MZ.scale(i,f,-y*c))}}return h},t.prototype._getProjMinMaxOnAxis=function(t,r,i){for(var s=this._axes[t],u=this._origin,c=r[0].dot(s)+u[t],h=c,p=c,f=1;f<r.length;f++){var v=r[f].dot(s)+u[t];h=Math.min(v,h),p=Math.max(v,p)}i[0]=h,i[1]=p},t}();var OL=[];let Ok=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return wU(r,t),r.prototype.traverse=function(t,r){t.call(r,this)},r.prototype.useStyle=function(){this.style={}},r.prototype.getCursor=function(){return this._cursor},r.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},r.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},r.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},r.prototype.addDisplayable=function(t,r){r?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},r.prototype.addDisplayables=function(t,r){r=r||!1;for(var i=0;i<t.length;i++)this.addDisplayable(t[i],r)},r.prototype.getDisplayables=function(){return this._displayables},r.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},r.prototype.eachPendingDisplayable=function(t){for(var r=this._cursor;r<this._displayables.length;r++)t&&t(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)t&&t(this._temporaryDisplayables[r])},r.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var r=this._displayables[t];r.parent=this,r.update(),r.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var r=this._temporaryDisplayables[t];r.parent=this,r.update(),r.parent=null}},r.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new M4(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var i=this._displayables[r],s=i.getBoundingRect().clone();i.needLocalTransform()&&s.applyTransform(i.getLocalTransform(OL)),t.union(s)}this._rect=t}return this._rect},r.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r);if(this.getBoundingRect().contain(i[0],i[1])){for(var s=0;s<this._displayables.length;s++)if(this._displayables[s].contain(t,r))return!0}return!1},r}(EU);var OO=Math.max,OB=Math.min,ON={};function OF(t){return IM.extend(t)}var Oz=function(t,r){var i=kV(t,r);return function(t){function r(r){var s=t.call(this,r)||this;return s.applyTransform=i.applyTransform,s.buildPath=i.buildPath,s}return wU(r,t),r}(kH)};function OU(t,r){return Oz(t,r)}function OH(t,r){ON[t]=r}function OG(t){if(ON.hasOwnProperty(t))return ON[t]}function OV(t,r,i,s){var u=new kH(kV(t,r));return i&&("center"===s&&(i=Oj(i,u.getBoundingRect())),OY(u,i)),u}function OW(t,r,i){var s=new ID({style:{image:t,x:r.x,y:r.y,width:r.width,height:r.height},onload:function(t){if("center"===i){var u={width:t.width,height:t.height};s.setStyle(Oj(r,u))}}});return s}function Oj(t,r){var i,s=r.width/r.height,u=t.height*s;return i=u<=t.width?t.height:(u=t.width)/s,{x:t.x+t.width/2-u/2,y:t.y+t.height/2-i/2,width:u,height:i}}var OX=function(t,r){for(var i=[],s=t.length,u=0;u<s;u++){var c=t[u];i.push(c.getUpdatedPathProxy(!0))}var h=new IM(r);return h.createPathProxy(),h.buildPath=function(t){if(kG(t)){t.appendPath(i);var r=t.getContext();r&&t.rebuildPath(r,1)}},h};function OY(t,r){if(!!t.applyTransform){var i=t.getBoundingRect().calculateTransform(r);t.applyTransform(i)}}function O$(t,r){return IR(t,t,{lineWidth:r}),t}function OJ(t){return IL(t.shape,t.shape,t.style),t}var OZ=Ik;function OK(t,r){for(var i=MG([]);t&&t!==r;)MW(i,t.getLocalTransform(),i),t=t.parent;return i}function Oq(t,r,i){return r&&!Sd(r)&&(r=C3.getLocalTransform(r)),i&&(r=M$([],r)),Md([],t,r)}function OQ(t,r,i){var s=0===r[4]||0===r[5]||0===r[0]?1:Math.abs(2*r[4]/r[0]),u=0===r[4]||0===r[5]||0===r[2]?1:Math.abs(2*r[4]/r[2]),c=["left"===t?-s:"right"===t?s:0,"top"===t?-u:"bottom"===t?u:0];return Math.abs((c=Oq(c,r,i))[0])>Math.abs(c[1])?c[0]>0?"right":"left":c[1]>0?"bottom":"top"}function O0(t){return!t.isGroup}function O1(t,r,i){if(!!t&&!!r){var s,u=(s={},t.traverse(function(t){if(!t.isGroup&&t.anid)s[t.anid]=t}),s);r.traverse(function(t){if(!t.isGroup&&t.anid){var r=u[t.anid];if(r){var s=c(t);t.attr(c(r)),DW(t,s,i,I1(t).dataIndex)}}})}function c(t){var r={x:t.x,y:t.y,rotation:t.rotation};if(null!=t.shape)r.shape=So({},t.shape);return r}}function O2(t,r){return Sf(t,function(t){var i=t[0];i=OB(i=OO(i,r.x),r.x+r.width);var s=t[1];return[i,s=OB(s=OO(s,r.y),r.y+r.height)]})}function O3(t,r){var i=OO(t.x,r.x),s=OB(t.x+t.width,r.x+r.width),u=OO(t.y,r.y),c=OB(t.y+t.height,r.y+r.height);if(s>=i&&c>=u)return{x:i,y:u,width:s-i,height:c-u}}function O5(t,r,i){var s=So({rectHover:!0},r),u=s.style={strokeNoScale:!0};if(i=i||{x:-1,y:-1,width:2,height:2},t)return 0===t.indexOf("image://")?(u.image=t.slice(8),Ss(u,i),new ID(s)):OV(t.replace("path://",""),s,i,"center")}function O4(t,r,i,s,u){for(var c=0,h=u[u.length-1];c<u.length;c++){var p=u[c];if(O6(t,r,i,s,p[0],p[1],h[0],h[1]))return!0;h=p}}function O6(t,r,i,s,u,c,h,p){var f=i-t,v=s-r,y=h-u,x=p-c,_=function(t,r,i,s){return t*s-i*r}(y,x,f,v);if(function(t){return t<=1e-6&&t>=-1e-6}(_))return!1;var b=t-u,w=r-c,S=function(t,r,i,s){return t*s-i*r}(b,w,f,v)/_;if(S<0||S>1)return!1;var M=function(t,r,i,s){return t*s-i*r}(b,w,y,x)/_;return!(M<0)&&!(M>1)&&!0}function O9(t,r,i,s){return t*s-i*r}function O8(t){var r=t.itemTooltipOption,i=t.componentModel,s=t.itemName,u=SS(r)?{formatter:r}:r,c=i.mainType,h=i.componentIndex,p={componentType:c,name:s,$vars:["name"]};p[c+"Index"]=h;var f=t.formatterParamsExtra;f&&Sp(Sy(f),function(t){!SK(p,t)&&(p[t]=f[t],p.$vars.push(t))});var v=I1(t.el);v.componentMainType=c,v.componentIndex=h,v.tooltipConfig={name:s,option:Ss({content:s,encodeHTMLContent:!0,formatterParams:p},u)}}function O7(t,r){var i;t.isGroup&&(i=r(t)),!i&&t.traverse(r)}function Be(t,r){if(t){if(Sb(t))for(var i=0;i<t.length;i++)O7(t[i],r);else O7(t,r)}}ei4=k$,ON.circle=ei4,ei6=kK,ON.ellipse=ei6,ei9=Ot,ON.sector=ei9,ei8=Oi,ON.ring=ei8,ei7=Ol,ON.polygon=ei7,eae=Oh,ON.polyline=eae,eat=IF,ON.rect=eat,ean=Og,ON.line=ean,ear=O_,ON.bezierCurve=ear,eai=OS,ON.arc=eai;var Bt=T7(),Bn=kA(),Br=function(){function t(){this.group=new Tf,this.uid=Pg("viewChart"),this.renderTask=LS({plan:Bo,reset:Bs}),this.renderTask.context={view:this}}return t.prototype.init=function(t,r){},t.prototype.render=function(t,r,i,s){},t.prototype.highlight=function(t,r,i,s){var u=t.getData(s&&s.dataType);if(!!u)Ba(u,s,"emphasis")},t.prototype.downplay=function(t,r,i,s){var u=t.getData(s&&s.dataType);if(!!u)Ba(u,s,"normal")},t.prototype.remove=function(t,r){this.group.removeAll()},t.prototype.dispose=function(t,r){},t.prototype.updateView=function(t,r,i,s){this.render(t,r,i,s)},t.prototype.updateLayout=function(t,r,i,s){this.render(t,r,i,s)},t.prototype.updateVisual=function(t,r,i,s){this.render(t,r,i,s)},t.prototype.eachRendered=function(t){Be(this.group,t)},t.markUpdateMethod=function(t,r){Bt(t).updateMethod=r},t.protoInitialize=void(t.prototype.type="chart"),t}();function Bi(t,r,i){t&&DF(t)&&("emphasis"===r?Dx:D_)(t,i)}function Ba(t,r,i){var s,u,c=T8(t,r);var h=r&&null!=r.highlightKey?(null==(u=I5[s=r.highlightKey])&&I3<=32&&(u=I5[s]=I3++),u):null;null!=c?Sp(Tq(c),function(r){Bi(t.getItemGraphicEl(r),i,h)}):t.eachItemGraphicEl(function(t){Bi(t,i,h)})}function Bo(t){return Bn(t.model)}function Bs(t){var r=t.model,i=t.ecModel,s=t.api,u=t.payload,c=r.pipelineContext.progressiveRender,h=t.view,p=u&&Bt(u).updateMethod,f=c?"incrementalPrepareRender":p&&h[p]?p:"render";return"render"!==f&&h[f](r,i,s,u),Bl[f]}Ed(Br,["dispose"]),Ev(Br);var Bl={incrementalPrepareRender:{progress:function(t,r){r.view.incrementalRender(t,r.model,r.ecModel,r.api,r.payload)}},render:{forceFirstProgress:!0,progress:function(t,r){r.view.render(r.model,r.ecModel,r.api,r.payload)}}};let Bu=Br;var Bc="\0__throttleOriginMethod",Bh="\0__throttleRate",Bd="\0__throttleType";function Bp(t,r,i){var s,u,c,h,p,f=0,v=0,y=null;function x(){v=new Date().getTime(),y=null,t.apply(c,h||[])}r=r||0;var _=function(){for(var t=[],_=0;_<arguments.length;_++)t[_]=arguments[_];s=new Date().getTime(),c=this,h=t;var b=p||r,w=p||i;p=null,u=s-(w?f:v)-b,clearTimeout(y),w?y=setTimeout(x,b):u>=0?x():y=setTimeout(x,-u),f=s};return _.clear=function(){y&&(clearTimeout(y),y=null)},_.debounceNextCall=function(t){p=t},_}function Bf(t,r,i,s){var u=t[r];if(!!u){var c=u[Bc]||u,h=u[Bd];if(u[Bh]!==i||h!==s){if(null==i||!s)return t[r]=c;(u=t[r]=Bp(c,i,"debounce"===s))[Bc]=c,u[Bd]=s,u[Bh]=i}return u}}function Bg(t,r){var i=t[r];i&&i[Bc]&&(i.clear&&i.clear(),t[r]=i[Bc])}var Bm=T7(),Bv={itemStyle:Ey(Pu,!0),lineStyle:Ey(Po,!0)},By={lineStyle:"stroke",itemStyle:"fill"};function Bx(t,r){var i=t.visualStyleMapper||Bv[r];return i?i:Bv.itemStyle}function B_(t,r){var i=t.visualDrawType||By[r];return i?i:"fill"}var Bb=new Pp,Bw=Math.PI,BS=function(){function t(t,r,i,s){this._stageTaskMap=SY(),this.ecInstance=t,this.api=r,i=this._dataProcessorHandlers=i.slice(),s=this._visualHandlers=s.slice(),this._allHandlers=i.concat(s)}return t.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(t){var r=t.overallTask;r&&r.dirty()})},t.prototype.getPerformArgs=function(t,r){if(!!t.__pipeline){var i=this._pipelineMap.get(t.__pipeline.id),s=i.context,u=!r&&i.progressiveEnabled&&(!s||s.progressiveRender)&&t.__idxInPipeline>i.blockIndex?i.step:null,c=s&&s.modDataCount,h=null!=c?Math.ceil(c/u):null;return{step:u,modBy:h,modDataCount:c}}},t.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},t.prototype.updateStreamModes=function(t,r){var i=this._pipelineMap.get(t.uid),s=t.getData().count(),u=i.progressiveEnabled&&r.incrementalPrepareRender&&s>=i.threshold,c=t.get("large")&&s>=t.get("largeThreshold"),h="mod"===t.get("progressiveChunkMode")?s:null;t.pipelineContext=i.context={progressiveRender:u,modDataCount:h,large:c}},t.prototype.restorePipelines=function(t){var r=this,i=r._pipelineMap=SY();t.eachSeries(function(t){var s=t.getProgressive(),u=t.uid;i.set(u,{id:u,head:null,tail:null,threshold:t.getProgressiveThreshold(),progressiveEnabled:s&&!(t.preventIncremental&&t.preventIncremental()),blockIndex:-1,step:Math.round(s||700),count:0}),r._pipe(t,t.dataTask)})},t.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),i=this.api;Sp(this._allHandlers,function(s){var u=t.get(s.uid)||t.set(s.uid,{});Sz(!(s.reset&&s.overallReset),""),s.reset&&this._createSeriesStageTask(s,u,r,i),s.overallReset&&this._createOverallStageTask(s,u,r,i)},this)},t.prototype.prepareView=function(t,r,i,s){var u=t.renderTask,c=u.context;c.model=r,c.ecModel=i,c.api=s,u.__block=!t.incrementalPrepareRender,this._pipe(r,u)},t.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},t.prototype.performVisualTasks=function(t,r,i){this._performStageTasks(this._visualHandlers,t,r,i)},t.prototype._performStageTasks=function(t,r,i,s){s=s||{};var u=!1,c=this;function h(t,r){return t.setDirty&&(!t.dirtyMap||t.dirtyMap.get(r.__pipeline.id))}Sp(t,function(t,p){if(!s.visualType||s.visualType===t.visualType){var f=c._stageTaskMap.get(t.uid),v=f.seriesTaskMap,y=f.overallTask;if(y){var x,_=y.agentStubMap;_.each(function(t){h(s,t)&&(t.dirty(),x=!0)}),x&&y.dirty(),c.updatePayload(y,i);var b=c.getPerformArgs(y,s.block);_.each(function(t){t.perform(b)}),y.perform(b)&&(u=!0)}else v&&v.each(function(p,f){h(s,p)&&p.dirty();var v=c.getPerformArgs(p,s.block);v.skip=!t.performRawSeries&&r.isSeriesFiltered(p.context.model),c.updatePayload(p,i),p.perform(v)&&(u=!0)})}}),this.unfinished=u||this.unfinished},t.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(t){r=t.dataTask.perform()||r}),this.unfinished=r||this.unfinished},t.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},t.prototype.updatePayload=function(t,r){"remain"!==r&&(t.context.payload=r)},t.prototype._createSeriesStageTask=function(t,r,i,s){var u=this,c=r.seriesTaskMap,h=r.seriesTaskMap=SY(),p=t.seriesType,f=t.getTargetSeries;function v(r){var p=r.uid,f=h.set(p,c&&c.get(p)||LS({plan:BE,reset:BI,count:BR}));f.context={model:r,ecModel:i,api:s,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:u},u._pipe(r,f)}t.createOnAllSeries?i.eachRawSeries(v):p?i.eachRawSeriesByType(p,v):f&&f(i,s).each(v)},t.prototype._createOverallStageTask=function(t,r,i,s){var u=this,c=r.overallTask=r.overallTask||LS({reset:BM});c.context={ecModel:i,api:s,overallReset:t.overallReset,scheduler:u};var h=c.agentStubMap,p=c.agentStubMap=SY(),f=t.seriesType,v=t.getTargetSeries,y=!0,x=!1;function _(t){var r=t.uid,i=p.set(r,h&&h.get(r)||(x=!0,LS({reset:BA,onDirty:BT})));i.context={model:t,overallProgress:y},i.agent=c,i.__block=y,u._pipe(t,i)}Sz(!t.createOnAllSeries,""),f?i.eachRawSeriesByType(f,_):v?v(i,s).each(_):(y=!1,Sp(i.getSeries(),_)),x&&c.dirty()},t.prototype._pipe=function(t,r){var i=t.uid,s=this._pipelineMap.get(i);s.head||(s.head=r),s.tail&&s.tail.pipe(r),s.tail=r,r.__idxInPipeline=s.count++,r.__pipeline=s},t.wrapStageHandler=function(t,r){return Sw(t)&&(t={overallReset:t,seriesType:function(t){eaJ=null;try{t(BL,Bk)}catch(t){}return eaJ}(t)}),t.uid=Pg("stageHandler"),r&&(t.visualType=r),t},t}();function BM(t){t.overallReset(t.ecModel,t.api,t.payload)}function BA(t){return t.overallProgress&&BC}function BC(){this.agent.dirty(),this.getDownstream().dirty()}function BT(){this.agent&&this.agent.dirty()}function BE(t){return t.plan?t.plan(t.model,t.ecModel,t.api,t.payload):null}function BI(t){t.useClearVisual&&t.data.clearAllVisual();var r=t.resetDefines=Tq(t.reset(t.model,t.ecModel,t.api,t.payload));return r.length>1?Sf(r,function(t,r){return BP(r)}):BD}var BD=BP(0);function BP(t){return function(r,i){var s=i.data,u=i.resetDefines[t];if(u&&u.dataEach)for(var c=r.start;c<r.end;c++)u.dataEach(s,c);else u&&u.progress&&u.progress(r,s)}}function BR(t){return t.data.count()}var BL={},Bk={};function BO(t,r){for(var i in r.prototype)t[i]=Sq}BO(BL,RO),BO(Bk,RU),BL.eachSeriesByType=BL.eachRawSeriesByType=function(t){eaJ=t},BL.eachComponent=function(t){"series"===t.mainType&&t.subType&&(eaJ=t.subType)};var BB=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],BN="#B9B8CE",BF="#100C2A",Bz=function(){return{axisLine:{lineStyle:{color:BN}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},BU=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],BH={darkMode:!0,color:BU,backgroundColor:BF,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:BN}},textStyle:{color:BN},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:BN}},dataZoom:{borderColor:"#71708A",textStyle:{color:BN},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:BN}},timeline:{lineStyle:{color:BN},label:{color:BN},controlStyle:{color:BN,borderColor:BN}},calendar:{itemStyle:{color:BF},dayLabel:{color:BN},monthLabel:{color:BN},yearLabel:{color:BN}},timeAxis:Bz(),logAxis:Bz(),valueAxis:Bz(),categoryAxis:Bz(),line:{symbol:"circle"},graph:{color:BU},gauge:{title:{color:BN},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:BN},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};BH.categoryAxis.splitLine.show=!1;var BG=function(){function t(){}return t.prototype.normalizeQuery=function(t){var r={},i={},s={};if(SS(t)){var u=Eh(t);r.mainType=u.main||null,r.subType=u.sub||null}else{var c=["Index","Name","Id"],h={name:1,dataIndex:1,dataType:1};Sp(t,function(t,u){for(var p=!1,f=0;f<c.length;f++){var v=c[f],y=u.lastIndexOf(v);if(y>0&&y===u.length-v.length){var x=u.slice(0,y);"data"!==x&&(r.mainType=x,r[v.toLowerCase()]=t,p=!0)}}h.hasOwnProperty(u)&&(i[u]=t,p=!0),!p&&(s[u]=t)})}return{cptQuery:r,dataQuery:i,otherQuery:s}},t.prototype.filter=function(t,r){var i=this.eventInfo;if(!i)return!0;var s=i.targetEl,u=i.packedEvent,c=i.model,h=i.view;if(!c||!h)return!0;var p=r.cptQuery,f=r.dataQuery;return v(p,c,"mainType")&&v(p,c,"subType")&&v(p,c,"index","componentIndex")&&v(p,c,"name")&&v(p,c,"id")&&v(f,u,"name")&&v(f,u,"dataIndex")&&v(f,u,"dataType")&&(!h.filterForExposedEvent||h.filterForExposedEvent(t,r.otherQuery,s,u));function v(t,r,i,s){return null==t[i]||r[s||i]===t[i]}},t.prototype.afterTrigger=function(){this.eventInfo=null},t}(),BV=["symbol","symbolSize","symbolRotate","symbolOffset"],BW=BV.concat(["symbolKeepAspect"]);function Bj(t,r,i){switch(i){case"color":return t.getItemVisual(r,"style")[t.getVisual("drawType")];case"opacity":return t.getItemVisual(r,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getItemVisual(r,i)}}function BX(t,r){switch(r){case"color":return t.getVisual("style")[t.getVisual("drawType")];case"opacity":return t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getVisual(r)}}function BY(t,r,i,s){switch(i){case"color":t.ensureUniqueItemVisual(r,"style")[t.getVisual("drawType")]=s,t.setItemVisual(r,"colorFromPalette",!1);break;case"opacity":t.ensureUniqueItemVisual(r,"style").opacity=s;break;case"symbol":case"symbolSize":case"liftZ":t.setItemVisual(r,i,s)}}function B$(t,r){Sp([[t+"ToggleSelect","toggleSelect"],[t+"Select","select"],[t+"UnSelect","unselect"]],function(i){r(i[0],function(r,s,u){var c,h,p;r=So({},r);u.dispatchAction(So(r,{type:i[1],seriesIndex:(c=s,h=r,p=[],c.eachComponent({mainType:"series",subType:t,query:h},function(t){p.push(t.seriesIndex)}),p)}))})})}function BJ(t,r,i,s,u){var c=t+r;!i.isSilent(c)&&s.eachComponent({mainType:"series",subType:"pie"},function(t){for(var r=t.seriesIndex,s=t.option.selectedMap,h=u.selected,p=0;p<h.length;p++)if(h[p].seriesIndex===r){var f=t.getData(),v=T8(f,u.fromActionPayload);i.trigger(c,{type:c,seriesId:t.id,name:Sb(v)?f.getName(v[0]):f.getName(v),selected:SS(s)?s:So({},s)})}})}function BZ(t,r,i){for(var s;t&&(!r(t)||(s=t,!i));){;t=t.__hostTarget||t.parent}return s}var BK=Math.round(9*Math.random()),Bq="function"==typeof Object.defineProperty,BQ=function(){function t(){this._id="__ec_inner_"+BK++}return t.prototype.get=function(t){return this._guard(t)[this._id]},t.prototype.set=function(t,r){var i=this._guard(t);return Bq?Object.defineProperty(i,this._id,{value:r,enumerable:!1,configurable:!0}):i[this._id]=r,this},t.prototype.delete=function(t){return!!this.has(t)&&(delete this._guard(t)[this._id],!0)},t.prototype.has=function(t){return!!this._guard(t)[this._id]},t.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},t}(),B0=IM.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,r){var i=r.cx,s=r.cy,u=r.width/2,c=r.height/2;t.moveTo(i,s-c),t.lineTo(i+u,s+c),t.lineTo(i-u,s+c),t.closePath()}}),B1=IM.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,r){var i=r.cx,s=r.cy,u=r.width/2,c=r.height/2;t.moveTo(i,s-c),t.lineTo(i+u,s),t.lineTo(i,s+c),t.lineTo(i-u,s),t.closePath()}}),B2=IM.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,r){var i=r.x,s=r.y,u=r.width/5*3,c=Math.max(u,r.height),h=u/2,p=h*h/(c-h),f=s-c+h+p,v=Math.asin(p/h),y=Math.cos(v)*h,x=Math.sin(v),_=Math.cos(v),b=.6*h,w=.7*h;t.moveTo(i-y,f+p),t.arc(i,f,h,Math.PI-v,2*Math.PI+v),t.bezierCurveTo(i+y-x*b,f+p+_*b,i,s-w,i,s),t.bezierCurveTo(i,s-w,i-y+x*b,f+p+_*b,i-y,f+p),t.closePath()}}),B3=IM.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,r){var i=r.height,s=r.width,u=r.x,c=r.y,h=s/3*2;t.moveTo(u,c),t.lineTo(u+h,c+i),t.lineTo(u,c+i/4*3),t.lineTo(u-h,c+i),t.lineTo(u,c),t.closePath()}}),B5={line:function(t,r,i,s,u){u.x1=t,u.y1=r+s/2,u.x2=t+i,u.y2=r+s/2},rect:function(t,r,i,s,u){u.x=t,u.y=r,u.width=i,u.height=s},roundRect:function(t,r,i,s,u){u.x=t,u.y=r,u.width=i,u.height=s,u.r=Math.min(i,s)/4},square:function(t,r,i,s,u){var c=Math.min(i,s);u.x=t,u.y=r,u.width=c,u.height=c},circle:function(t,r,i,s,u){u.cx=t+i/2,u.cy=r+s/2,u.r=Math.min(i,s)/2},diamond:function(t,r,i,s,u){u.cx=t+i/2,u.cy=r+s/2,u.width=i,u.height=s},pin:function(t,r,i,s,u){u.x=t+i/2,u.y=r+s/2,u.width=i,u.height=s},arrow:function(t,r,i,s,u){u.x=t+i/2,u.y=r+s/2,u.width=i,u.height=s},triangle:function(t,r,i,s,u){u.cx=t+i/2,u.cy=r+s/2,u.width=i,u.height=s}},B4={};Sp({line:Og,rect:IF,roundRect:IF,square:IF,circle:k$,diamond:B1,pin:B2,arrow:B3,triangle:B0},function(t,r){B4[r]=new t});var B6=IM.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,r,i){var s=Ti(t,r,i),u=this.shape;return u&&"pin"===u.symbolType&&"inside"===r.position&&(s.y=i.y+.4*i.height),s},buildPath:function(t,r,i){var s=r.symbolType;if("none"!==s){var u=B4[s];!u&&(u=B4[s="rect"]),B5[s](r.x,r.y,r.width,r.height,u.shape),u.buildPath(t,u.shape,i)}}});function B9(t,r){if("image"!==this.type){var i=this.style;this.__isEmptyBrush?(i.stroke=t,i.fill=r||"#fff",i.lineWidth=2):"line"===this.shape.symbolType?i.stroke=t:i.fill=t,this.markRedraw()}}function B8(t,r,i,s,u,c,h){var p,f=0===t.indexOf("empty");return f&&(t=t.substr(5,1).toLowerCase()+t.substr(6)),(p=0===t.indexOf("image://")?OW(t.slice(8),new M4(r,i,s,u),h?"center":"cover"):0===t.indexOf("path://")?OV(t.slice(7),{},new M4(r,i,s,u),h?"center":"cover"):new B6({shape:{symbolType:t,x:r,y:i,width:s,height:u}})).__isEmptyBrush=f,p.setColor=B9,c&&p.setColor(c),p}function B7(t){return!Sb(t)&&(t=[+t,+t]),[t[0]||0,t[1]||0]}function Ne(t,r){if(null!=t)return!Sb(t)&&(t=[t,t]),[TT(t[0],r[0])||0,TT(SO(t[1],t[0]),r[1])||0]}function Nt(t){return isFinite(t)}function Nn(t,r,i){for(var s,u,c,h,p,f,v,y,x,_,b,w,S,M,A,C,T="radial"===r.type?(s=t,u=r,h=(c=i).width,f=Math.min(h,p=c.height),v=null==u.x?.5:u.x,y=null==u.y?.5:u.y,x=null==u.r?.5:u.r,!u.global&&(v=v*h+c.x,y=y*p+c.y,x*=f),v=Nt(v)?v:.5,y=Nt(y)?y:.5,x=x>=0&&Nt(x)?x:.5,s.createRadialGradient(v,y,0,v,y,x)):(_=t,b=r,w=i,S=null==b.x?0:b.x,M=null==b.x2?1:b.x2,A=null==b.y?0:b.y,C=null==b.y2?0:b.y2,!b.global&&(S=S*w.width+w.x,M=M*w.width+w.x,A=A*w.height+w.y,C=C*w.height+w.y),S=Nt(S)?S:0,M=Nt(M)?M:1,A=Nt(A)?A:0,C=Nt(C)?C:0,_.createLinearGradient(S,A,M,C)),I=r.colorStops,D=0;D<I.length;D++)T.addColorStop(I[D].offset,I[D].color);return T}function Nr(t){return parseInt(t,10)}function Ni(t,r,i){var s=["width","height"][r],u=["clientWidth","clientHeight"][r],c=["paddingLeft","paddingTop"][r],h=["paddingRight","paddingBottom"][r];if(null!=i[s]&&"auto"!==i[s])return parseFloat(i[s]);var p=document.defaultView.getComputedStyle(t);return(t[u]||Nr(p[s])||Nr(t.style[s]))-(Nr(p[c])||0)-(Nr(p[h])||0)|0}function Na(t){var r,i,s=t.style;var u=s.lineDash&&s.lineWidth>0&&(r=s.lineDash,i=s.lineWidth,r&&"solid"!==r&&i>0?"dashed"===r?[4*i,2*i]:"dotted"===r?[i]:SA(r)?[r]:Sb(r)?r:null:null),c=s.lineDashOffset;if(u){var h=s.strokeNoScale&&t.getLineScale?t.getLineScale():1;h&&1!==h&&(u=Sf(u,function(t){return t/h}),c/=h)}return[u,c]}var No=new Iu(!0);function Ns(t){var r=t.stroke;return!(null==r||"none"===r||!(t.lineWidth>0))}function Nl(t){return"string"==typeof t&&"none"!==t}function Nu(t){var r=t.fill;return null!=r&&"none"!==r}function Nc(t,r){if(null!=r.fillOpacity&&1!==r.fillOpacity){var i=t.globalAlpha;t.globalAlpha=r.fillOpacity*r.opacity,t.fill(),t.globalAlpha=i}else t.fill()}function Nh(t,r){if(null!=r.strokeOpacity&&1!==r.strokeOpacity){var i=t.globalAlpha;t.globalAlpha=r.strokeOpacity*r.opacity,t.stroke(),t.globalAlpha=i}else t.stroke()}function Nd(t,r,i){var s=Ew(r.image,r.__image,i);if(EM(s)){var u=t.createPattern(s,r.repeat||"repeat");if("function"==typeof DOMMatrix&&u&&u.setTransform){var c=new DOMMatrix;c.translateSelf(r.x||0,r.y||0),c.rotateSelf(0,0,(r.rotation||0)*SQ),c.scaleSelf(r.scaleX||1,r.scaleY||1),u.setTransform(c)}return u}}var Np=["shadowBlur","shadowOffsetX","shadowOffsetY"],Nf=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function Ng(t,r,i,s,u){var c=!1;if(!s&&r===(i=i||{}))return!1;if(s||r.opacity!==i.opacity){Ny(t,u),c=!0;var h=Math.max(Math.min(r.opacity,1),0);t.globalAlpha=isNaN(h)?EB.opacity:h}(s||r.blend!==i.blend)&&(!c&&(Ny(t,u),c=!0),t.globalCompositeOperation=r.blend||EB.blend);for(var p=0;p<Np.length;p++){var f=Np[p];(s||r[f]!==i[f])&&(!c&&(Ny(t,u),c=!0),t[f]=t.dpr*(r[f]||0))}return(s||r.shadowColor!==i.shadowColor)&&(!c&&(Ny(t,u),c=!0),t.shadowColor=r.shadowColor||EB.shadowColor),c}function Nm(t,r,i,s,u){var c=Nx(r,u.inHover),h=s?null:i&&Nx(i,u.inHover)||{};if(c===h)return!1;var p=Ng(t,c,h,s,u);if((s||c.fill!==h.fill)&&(!p&&(Ny(t,u),p=!0),Nl(c.fill)&&(t.fillStyle=c.fill)),(s||c.stroke!==h.stroke)&&(!p&&(Ny(t,u),p=!0),Nl(c.stroke)&&(t.strokeStyle=c.stroke)),(s||c.opacity!==h.opacity)&&(!p&&(Ny(t,u),p=!0),t.globalAlpha=null==c.opacity?1:c.opacity),r.hasStroke()){var f=c.lineWidth/(c.strokeNoScale&&r.getLineScale?r.getLineScale():1);t.lineWidth!==f&&(!p&&(Ny(t,u),p=!0),t.lineWidth=f)}for(var v=0;v<Nf.length;v++){var y=Nf[v],x=y[0];(s||c[x]!==h[x])&&(!p&&(Ny(t,u),p=!0),t[x]=c[x]||y[1])}return p}function Nv(t,r){var i=r.transform,s=t.dpr||1;i?t.setTransform(s*i[0],s*i[1],s*i[2],s*i[3],s*i[4],s*i[5]):t.setTransform(s,0,0,s,0,0)}function Ny(t,r){r.batchFill&&t.fill(),r.batchStroke&&t.stroke(),r.batchFill="",r.batchStroke=""}function Nx(t,r){return r&&t.__hoverStyle||t.style}function N_(t,r){Nb(t,r,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Nb(t,r,i,s){var u,c,h,p,f,v,y,x,_,b,w=r.transform;if(!r.shouldBePainted(i.viewWidth,i.viewHeight,!1,!1)){r.__dirty&=-2,r.__isRendered=!1;return}var S=r.__clipPaths,M=i.prevElClipPaths,A=!1,C=!1;if((!M||function(t,r){if(t===r||!t&&!r)return!1;if(!t||!r||t.length!==r.length)return!0;for(var i=0;i<t.length;i++)if(t[i]!==r[i])return!0;return!1}(S,M))&&(M&&M.length&&(Ny(t,i),t.restore(),C=A=!0,i.prevElClipPaths=null,i.allClipped=!1,i.prevEl=null),S&&S.length&&(Ny(t,i),t.save(),!function(t,r,i){for(var s=!1,u=0;u<t.length;u++){var c=t[u];s=s||c.isZeroArea(),Nv(r,c),r.beginPath(),c.buildPath(r,c.shape),r.clip()}i.allClipped=s}(S,t,i),A=!0),i.prevElClipPaths=S),i.allClipped){r.__isRendered=!1;return}r.beforeBrush&&r.beforeBrush(),r.innerBeforeBrush();var T=i.prevEl;!T&&(C=A=!0);var I=r instanceof IM&&r.autoBatch&&(c=Nu(u=r.style),h=Ns(u),!(u.lineDash||!(+c^+h)||c&&"string"!=typeof u.fill||h&&"string"!=typeof u.stroke||u.strokePercent<1||u.strokeOpacity<1||u.fillOpacity<1));if(!A&&(p=w,f=T.transform,p&&f?p[0]===f[0]&&p[1]===f[1]&&p[2]===f[2]&&p[3]===f[3]&&p[4]===f[4]&&p[5]===f[5]:p||f?0:1))!I&&Ny(t,i);else Ny(t,i),Nv(t,r);var D=Nx(r,i.inHover);if(r instanceof IM)1!==i.lastDrawType&&(C=!0,i.lastDrawType=1),Nm(t,r,T,C,i),(!I||!i.batchFill&&!i.batchStroke)&&t.beginPath(),!function(t,r,i,s){var u,c,h,p=Ns(i),f=Nu(i),v=i.strokePercent,y=v<1,x=!r.path;(!r.silent||y)&&x&&r.createPathProxy();var _=r.path||No,b=r.__dirty;if(!s){var w=i.fill,S=i.stroke,M=f&&!!w.colorStops,A=p&&!!S.colorStops,C=f&&!!w.image,T=p&&!!S.image,I=void 0,D=void 0,P=void 0,R=void 0,L=void 0;(M||A)&&(L=r.getBoundingRect()),M&&(I=b?Nn(t,w,L):r.__canvasFillGradient,r.__canvasFillGradient=I),A&&(D=b?Nn(t,S,L):r.__canvasStrokeGradient,r.__canvasStrokeGradient=D),C&&(P=b||!r.__canvasFillPattern?Nd(t,w,r):r.__canvasFillPattern,r.__canvasFillPattern=P),T&&(R=b||!r.__canvasStrokePattern?Nd(t,S,r):r.__canvasStrokePattern,r.__canvasStrokePattern=P),M?t.fillStyle=I:C&&(P?t.fillStyle=P:f=!1),A?t.strokeStyle=D:T&&(R?t.strokeStyle=R:p=!1)}var k=r.getGlobalScale();_.setScale(k[0],k[1],r.segmentIgnoreThreshold),t.setLineDash&&i.lineDash&&(c=(u=Na(r))[0],h=u[1]);var O=!0;(x||4&b)&&(_.setDPR(t.dpr),y?_.setContext(null):(_.setContext(t),O=!1),_.reset(),r.buildPath(_,r.shape,s),_.toStatic(),r.pathUpdated()),O&&_.rebuildPath(t,y?v:1),c&&(t.setLineDash(c),t.lineDashOffset=h),!s&&(i.strokeFirst?(p&&Nh(t,i),f&&Nc(t,i)):(f&&Nc(t,i),p&&Nh(t,i))),c&&t.setLineDash([])}(t,r,D,I),I&&(i.batchFill=D.fill||"",i.batchStroke=D.stroke||"");else if(r instanceof IC)3!==i.lastDrawType&&(C=!0,i.lastDrawType=3),Nm(t,r,T,C,i),!function(t,r,i){var s,u=i.text;if(null!=u&&(u+=""),u){t.font=i.font||wJ,t.textAlign=i.textAlign,t.textBaseline=i.textBaseline;var c=void 0,h=void 0;t.setLineDash&&i.lineDash&&(c=(s=Na(r))[0],h=s[1]),c&&(t.setLineDash(c),t.lineDashOffset=h),i.strokeFirst?(Ns(i)&&t.strokeText(u,i.x,i.y),Nu(i)&&t.fillText(u,i.x,i.y)):(Nu(i)&&t.fillText(u,i.x,i.y),Ns(i)&&t.strokeText(u,i.x,i.y)),c&&t.setLineDash([])}}(t,r,D);else if(r instanceof ID){;2!==i.lastDrawType&&(C=!0,i.lastDrawType=2),v=t,y=r,x=T,_=C,Ng(v,Nx(y,(b=i).inHover),x&&Nx(x,b.inHover),_,b),!function(t,r,i){var s=r.__image=Ew(i.image,r.__image,r,r.onload);if(!!s&&!!EM(s)){var u=i.x||0,c=i.y||0,h=r.getWidth(),p=r.getHeight(),f=s.width/s.height;if(null==h&&null!=p?h=p*f:null==p&&null!=h?p=h/f:null==h&&null==p&&(h=s.width,p=s.height),i.sWidth&&i.sHeight){var v=i.sx||0,y=i.sy||0;t.drawImage(s,v,y,i.sWidth,i.sHeight,u,c,h,p)}else if(i.sx&&i.sy){var v=i.sx,y=i.sy,x=h-v,_=p-y;t.drawImage(s,v,y,x,_,u,c,h,p)}else t.drawImage(s,u,c,h,p)}}(t,r,D)}else r.getTemporalDisplayables&&(4!==i.lastDrawType&&(C=!0,i.lastDrawType=4),function(t,r,i){var s,u,c=r.getDisplayables(),h=r.getTemporalDisplayables();t.save();var p={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:i.viewWidth,viewHeight:i.viewHeight,inHover:i.inHover};for(s=r.getCursor(),u=c.length;s<u;s++){var f=c[s];f.beforeBrush&&f.beforeBrush(),f.innerBeforeBrush(),Nb(t,f,p,s===u-1),f.innerAfterBrush(),f.afterBrush&&f.afterBrush(),p.prevEl=f}for(var v=0,y=h.length;v<y;v++){var f=h[v];f.beforeBrush&&f.beforeBrush(),f.innerBeforeBrush(),Nb(t,f,p,v===y-1),f.innerAfterBrush(),f.afterBrush&&f.afterBrush(),p.prevEl=f}r.clearTemporalDisplayables(),r.notClear=!0,t.restore()}(t,r,i));I&&s&&Ny(t,i),r.innerAfterBrush(),r.afterBrush&&r.afterBrush(),i.prevEl=r,r.__dirty=0,r.__isRendered=!0}var Nw=new BQ,NS=new AU(100),NM=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function NA(t,r){if("none"===t)return null;var i=r.getDevicePixelRatio(),s=r.getZr(),u="svg"===s.painter.type;t.dirty&&Nw.delete(t);var c=Nw.get(t);if(c)return c;var h=Ss(t,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===h.backgroundColor&&(h.backgroundColor=null);var p={repeat:"repeat"};return function(t){for(var r,c,p=[i],f=!0,v=0;v<NM.length;++v){var y=h[NM[v]];if(null!=y&&!Sb(y)&&!SS(y)&&!SA(y)&&"boolean"!=typeof y){f=!1;break}p.push(y)}if(f){r=p.join(",")+(u?"-svg":"");var x=NS.get(r);x&&(u?t.svgElement=x:t.image=x)}var _=function t(r){if(!r||0===r.length)return[[0,0]];if(SA(r)){var i=Math.ceil(r);return[[i,i]]}for(var s=!0,u=0;u<r.length;++u)if(!SA(r[u])){s=!1;break}if(s)return t([r]);for(var c=[],u=0;u<r.length;++u)if(SA(r[u])){var i=Math.ceil(r[u]);c.push([i,i])}else{var i=Sf(r[u],function(t){return Math.ceil(t)});i.length%2==1?c.push(i.concat(i)):c.push(i)}return c}(h.dashArrayX),b=function(t){if(!t||"object"==typeof t&&0===t.length)return[0,0];if(SA(t)){var r=Math.ceil(t);return[r,r]}var i=Sf(t,function(t){return Math.ceil(t)});return t.length%2?i.concat(i):i}(h.dashArrayY),w=function t(r){if(!r||0===r.length)return[["rect"]];if(SS(r))return[[r]];for(var i=!0,s=0;s<r.length;++s)if(!SS(r[s])){i=!1;break}if(i)return t([r]);for(var u=[],s=0;s<r.length;++s)SS(r[s])?u.push([r[s]]):u.push(r[s]);return u}(h.symbol),S=function(t){return Sf(t,function(t){return NC(t)})}(_),M=NC(b),A=!u&&wK.createCanvas(),C=u&&{tag:"g",attrs:{},key:"dcl",children:[]},T=function(){for(var t=1,r=0,i=S.length;r<i;++r)t=T$(t,S[r]);for(var s=1,r=0,i=w.length;r<i;++r)s=T$(s,w[r].length);t*=s;var u=M*S.length*w.length;return{width:Math.max(1,Math.min(t,h.maxTileWidth)),height:Math.max(1,Math.min(u,h.maxTileHeight))}}();A&&(A.width=T.width*i,A.height=T.height*i,c=A.getContext("2d")),function(){c&&(c.clearRect(0,0,A.width,A.height),h.backgroundColor&&(c.fillStyle=h.backgroundColor,c.fillRect(0,0,A.width,A.height)));for(var t=0,r=0;r<b.length;++r)t+=b[r];if(!(t<=0))for(var p=-M,f=0,v=0,y=0;p<T.height;){if(f%2==0){for(var x=v/2%w.length,S=0,I=0,D=0;S<2*T.width;){for(var P=0,r=0;r<_[y].length;++r)P+=_[y][r];if(P<=0)break;if(I%2==0){var R=(1-h.symbolSize)*.5,L=S+_[y][I]*R,k=p+b[f]*R,O=_[y][I]*h.symbolSize,B=b[f]*h.symbolSize,N=D/2%w[x].length;(function(t,r,p,f,v){var y=u?1:i,x=B8(v,t*y,r*y,p*y,f*y,h.color,h.symbolKeepAspect);if(u){var _=s.painter.renderOneToVNode(x);_&&C.children.push(_)}else N_(c,x)})(L,k,O,B,w[x][N])}S+=_[y][I],++D,++I===_[y].length&&(I=0)}++y===_.length&&(y=0)}p+=b[f],++v,++f===b.length&&(f=0)}}(),f&&NS.put(r,A||C),t.image=A,t.svgElement=C,t.svgWidth=T.width,t.svgHeight=T.height}(p),p.rotation=h.rotation,p.scaleX=p.scaleY=u?1:1/i,Nw.set(t,p),t.dirty=!1,p}function NC(t){for(var r=0,i=0;i<t.length;++i)r+=t[i];return t.length%2==1?2*r:r}var NT=new Mv,NE={};function NI(t){return NE[t]}var ND="5.5.1",NP={zrender:"5.6.0"},NR={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:4600,COMPONENT:4e3,BRUSH:5e3,CHART_ITEM:4500,ARIA:6e3,DECAL:7e3}},NL="__flagInMainProcess",Nk="__pendingUpdate",NO="__needsUpdateStatus",NB=/^[a-zA-Z0-9_]+$/,NN="__connectUpdateStatus";function NF(t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.isDisposed()){NX(this.id);return}return NU(this,t,r)}}function Nz(t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return NU(this,t,r)}}function NU(t,r,i){return i[0]=i[0]&&i[0].toLowerCase(),Mv.prototype[r].apply(t,i)}var NH=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r}(Mv),NG=NH.prototype;NG.on=Nz("on"),NG.off=Nz("off");var NV=function(t){function r(r,i,s){var u=t.call(this,new BG)||this;u._chartsViews=[],u._chartsMap={},u._componentsViews=[],u._componentsMap={},u._pendingActions=[],s=s||{},SS(i)&&(i=Nq[i]),u._dom=r;if(s.ssr)eaz=function(t){var r=I1(t),i=r.dataIndex;if(null!=i){var s=SY();return s.set("series_index",r.seriesIndex),s.set("data_index",i),r.ssrType&&s.set("ssr_type",r.ssrType),s}};var c=u._zr=Ty(r,{renderer:s.renderer||"canvas",devicePixelRatio:s.devicePixelRatio,width:s.width,height:s.height,ssr:s.ssr,useDirtyRect:SO(s.useDirtyRect,!1),useCoarsePointer:SO(s.useCoarsePointer,"auto"),pointerSize:s.pointerSize});u._ssr=s.ssr,u._throttledZrFlush=Bp(Sx(c.flush,c),17),(i=Sr(i))&&R8(i,!0),u._theme=i,u._locale=function(t){if(!SS(t))return Si(Sr(t),Sr(Pv.EN),!1);var r=Pv[t.toUpperCase()]||{};return"ZH"===t||"EN"===t?Sr(r):Si(Sr(r),Sr(Pv.EN),!1)}(s.locale||Px),u._coordSysMgr=new RG;var h=u._api=eoe(u);function p(t,r){return t.__prio-r.__prio}return Au(NK,p),Au(NJ,p),u._scheduler=new BS(u,h,NJ,NK),u._messageCenter=new NH,u._initEvents(),u.resize=Sx(u.resize,u),c.animation.on("frame",u._onframe,u),ea4(c,u),ea6(c,u),SG(u),u}return wU(r,t),r.prototype._onframe=function(){if(!this._disposed){eor(this);var t=this._scheduler;if(this[Nk]){var r=this[Nk].silent;this[NL]=!0;try{eaZ(this),eaQ.update.call(this,null,this[Nk].updateParams)}catch(t){throw this[NL]=!1,this[Nk]=null,t}this._zr.flush(),this[NL]=!1,this[Nk]=null,ea3.call(this,r),ea5.call(this,r)}else if(t.unfinished){var i=1,s=this._model,u=this._api;t.unfinished=!1;do{var c=+new Date;t.performSeriesTasks(s),t.performDataProcessorTasks(s),ea1(this,s),t.performVisualTasks(s),ea7(this,this._model,u,"remain",{}),i-=+new Date-c}while(i>0&&t.unfinished);!t.unfinished&&this._zr.flush()}}},r.prototype.getDom=function(){return this._dom},r.prototype.getId=function(){return this.id},r.prototype.getZr=function(){return this._zr},r.prototype.isSSR=function(){return this._ssr},r.prototype.setOption=function(t,r,i){if(!this[NL]){if(this._disposed){NX(this.id);return}if(SC(r)&&(i=r.lazyUpdate,s=r.silent,u=r.replaceMerge,c=r.transition,r=r.notMerge),this[NL]=!0,!this._model||r){var s,u,c,h=new RW(this._api),p=this._theme,f=this._model=new RO;f.scheduler=this._scheduler,f.ssr=this._ssr,f.init(null,null,null,p,this._locale,h)}this._model.setOption(t,{replaceMerge:u},NZ);var v={seriesTransition:c,optionChanged:!0};if(i)this[Nk]={silent:s,updateParams:v},this[NL]=!1,this.getZr().wakeUp();else{try{eaZ(this),eaQ.update.call(this,null,v)}catch(t){throw this[Nk]=null,this[NL]=!1,t}!this._ssr&&this._zr.flush(),this[Nk]=null,this[NL]=!1,ea3.call(this,s),ea5.call(this,s)}}},r.prototype.setTheme=function(){LI("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},r.prototype.getModel=function(){return this._model},r.prototype.getOption=function(){return this._model&&this._model.getOption()},r.prototype.getWidth=function(){return this._zr.getWidth()},r.prototype.getHeight=function(){return this._zr.getHeight()},r.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||wY.hasGlobalWindow&&window.devicePixelRatio||1},r.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},r.prototype.renderToCanvas=function(t){t=t||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},r.prototype.renderToSVGString=function(t){t=t||{};var r=this._zr.painter;return r.renderToString({useViewBox:t.useViewBox})},r.prototype.getSvgDataURL=function(){if(!!wY.svgSupported){var t=this._zr;return Sp(t.storage.getDisplayList(),function(t){t.stopAnimation(null,!0)}),t.painter.toDataURL()}},r.prototype.getDataURL=function(t){if(this._disposed){NX(this.id);return}var r=(t=t||{}).excludeComponents,i=this._model,s=[],u=this;Sp(r,function(t){i.eachComponent({mainType:t},function(t){var r=u._componentsMap[t.__viewId];!r.group.ignore&&(s.push(r),r.group.ignore=!0)})});var c="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return Sp(s,function(t){t.group.ignore=!1}),c},r.prototype.getConnectedDataURL=function(t){if(this._disposed){NX(this.id);return}var r="svg"===t.type,i=this.group,s=Math.min,u=Math.max,c=1/0;if(!N1[i])return this.getDataURL(t);var h=c,p=c,f=-c,v=-c,y=[],x=t&&t.pixelRatio||this.getDevicePixelRatio();Sp(N0,function(c,x){if(c.group===i){var _=r?c.getZr().painter.getSvgDom().innerHTML:c.renderToCanvas(Sr(t)),b=c.getDom().getBoundingClientRect();h=s(b.left,h),p=s(b.top,p),f=u(b.right,f),v=u(b.bottom,v),y.push({dom:_,left:b.left,top:b.top})}}),h*=x,p*=x,f*=x,v*=x;var _=f-h,b=v-p,w=wK.createCanvas(),S=Ty(w,{renderer:r?"svg":"canvas"});if(S.resize({width:_,height:b}),!r)return t.connectedBackgroundColor&&S.add(new IF({shape:{x:0,y:0,width:_,height:b},style:{fill:t.connectedBackgroundColor}})),Sp(y,function(t){var r=new ID({style:{x:t.left*x-h,y:t.top*x-p,image:t.dom}});S.add(r)}),S.refreshImmediately(),w.toDataURL("image/"+(t&&t.type||"png"));var M="";return Sp(y,function(t){var r=t.left-h,i=t.top-p;M+='<g transform="translate('+r+","+i+')">'+t.dom+"</g>"}),S.painter.getSvgRoot().innerHTML=M,t.connectedBackgroundColor&&S.painter.setBackgroundColor(t.connectedBackgroundColor),S.refreshImmediately(),S.painter.toDataURL()},r.prototype.convertToPixel=function(t,r){return ea0(this,"convertToPixel",t,r)},r.prototype.convertFromPixel=function(t,r){return ea0(this,"convertFromPixel",t,r)},r.prototype.containPixel=function(t,r){var i;if(this._disposed){NX(this.id);return}return Sp(Et(this._model,t),function(t,s){s.indexOf("Models")>=0&&Sp(t,function(t){var u=t.coordinateSystem;if(u&&u.containPoint)i=i||!!u.containPoint(r);else if("seriesModels"===s){var c=this._chartsMap[t.__viewId];c&&c.containPoint&&(i=i||c.containPoint(r,t))}},this)},this),!!i},r.prototype.getVisual=function(t,r){var i=Et(this._model,t,{defaultMainType:"series"}),s=i.seriesModel,u=s.getData(),c=i.hasOwnProperty("dataIndexInside")?i.dataIndexInside:i.hasOwnProperty("dataIndex")?u.indexOfRawIndex(i.dataIndex):null;return null!=c?Bj(u,c,r):BX(u,r)},r.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},r.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},r.prototype._initEvents=function(){var t=this;Sp(Nj,function(r){var i=function(i){var s,u=t.getModel(),c=i.target;if("globalout"===r?s={}:c&&BZ(c,function(t){var r=I1(t);if(r&&null!=r.dataIndex){var i=r.dataModel||u.getSeriesByIndex(r.seriesIndex);return s=i&&i.getDataParams(r.dataIndex,r.dataType,c)||{},!0}if(r.eventData)return s=So({},r.eventData),!0},!0),s){var h=s.componentType,p=s.componentIndex;("markLine"===h||"markPoint"===h||"markArea"===h)&&(h="series",p=s.seriesIndex);var f=h&&null!=p&&u.getComponent(h,p),v=f&&t["series"===f.mainType?"_chartsMap":"_componentsMap"][f.__viewId];s.event=i,s.type=r,t._$eventProcessor.eventInfo={targetEl:c,packedEvent:s,model:f,view:v},t.trigger(r,s)}};i.zrEventfulCallAtLast=!0,t._zr.on(r,i,t)}),Sp(N$,function(r,i){t._messageCenter.on(i,function(t){this.trigger(i,t)},t)}),Sp(["selectchanged"],function(r){t._messageCenter.on(r,function(t){this.trigger(r,t)},t)}),!function(t,r,i){t.on("selectchanged",function(t){var s=i.getModel();t.isFromClick?(BJ("map","selectchanged",r,s,t),BJ("pie","selectchanged",r,s,t)):"select"===t.fromAction?(BJ("map","selected",r,s,t),BJ("pie","selected",r,s,t)):"unselect"===t.fromAction&&(BJ("map","unselected",r,s,t),BJ("pie","unselected",r,s,t))})}(this._messageCenter,this,this._api)},r.prototype.isDisposed=function(){return this._disposed},r.prototype.clear=function(){if(this._disposed){NX(this.id);return}this.setOption({series:[]},!0)},r.prototype.dispose=function(){if(this._disposed){NX(this.id);return}this._disposed=!0,this.getDom()&&Eo(this.getDom(),N5,"");var t=this._api,r=this._model;Sp(this._componentsViews,function(i){i.dispose(r,t)}),Sp(this._chartsViews,function(i){i.dispose(r,t)}),this._zr.dispose(),this._dom=this._model=this._chartsMap=this._componentsMap=this._chartsViews=this._componentsViews=this._scheduler=this._api=this._zr=this._throttledZrFlush=this._theme=this._coordSysMgr=this._messageCenter=null,delete N0[this.id]},r.prototype.resize=function(t){if(this[NL])return;if(this._disposed){NX(this.id);return}this._zr.resize(t);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var i=r.resetOption("media"),s=t&&t.silent;this[Nk]&&(null==s&&(s=this[Nk].silent),i=!0,this[Nk]=null),this[NL]=!0;try{i&&eaZ(this),eaQ.update.call(this,{type:"resize",animation:So({duration:0},t&&t.animation)})}catch(t){throw this[NL]=!1,t}this[NL]=!1,ea3.call(this,s),ea5.call(this,s)}},r.prototype.showLoading=function(t,r){if(this._disposed){NX(this.id);return}if(SC(t)&&(r=t,t=""),t=t||"default",this.hideLoading(),!!NQ[t]){var i=NQ[t](this._api,r),s=this._zr;this._loadingFX=i,s.add(i)}},r.prototype.hideLoading=function(){if(this._disposed){NX(this.id);return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},r.prototype.makeActionFromEvent=function(t){var r=So({},t);return r.type=N$[t.type],r},r.prototype.dispatchAction=function(t,r){if(this._disposed){NX(this.id);return}if(!SC(r)&&(r={silent:!!r}),!!NY[t.type]&&!!this._model){if(this[NL]){this._pendingActions.push(t);return}var i=r.silent;ea2.call(this,t,i);var s=r.flush;s?this._zr.flush():!1!==s&&wY.browser.weChat&&this._throttledZrFlush(),ea3.call(this,i),ea5.call(this,i)}},r.prototype.updateLabelLayout=function(){NT.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},r.prototype.appendData=function(t){if(this._disposed){NX(this.id);return}var r=t.seriesIndex,i=this.getModel().getSeriesByIndex(r);i.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()},r.internalField=function(){function t(t){t.clearColorPalette(),t.eachSeries(function(t){t.clearColorPalette()})}eaZ=function(t){var r=t._scheduler;r.restorePipelines(t._model),r.prepareStageTasks(),eaK(t,!0),eaK(t,!1),r.plan()},eaK=function(t,r){for(var i=t._model,s=t._scheduler,u=r?t._componentsViews:t._chartsViews,c=r?t._componentsMap:t._chartsMap,h=t._zr,p=t._api,f=0;f<u.length;f++)u[f].__alive=!1;function v(t){var f=t.__requireNewView;t.__requireNewView=!1;var v="_ec_"+t.id+"_"+t.type,y=!f&&c[v];if(!y){var x=Eh(t.type),_=r?kM.getClass(x.main,x.sub):Bu.getClass(x.sub);(y=new _).init(i,p),c[v]=y,u.push(y),h.add(y.group)}t.__viewId=y.__id=v,y.__alive=!0,y.__model=t,y.group.__ecComponentInfo={mainType:t.mainType,index:t.componentIndex},r||s.prepareView(y,t,i,p)}r?i.eachComponent(function(t,r){"series"!==t&&v(r)}):i.eachSeries(v);for(var f=0;f<u.length;){var y=u[f];y.__alive?f++:(r||y.renderTask.dispose(),h.remove(y.group),y.dispose(i,p),u.splice(f,1),c[y.__id]===y&&delete c[y.__id],y.__id=y.group.__ecComponentInfo=null)}},eaq=function(t,r,i,s,u){var c,h=t._model;if(h.setUpdatePayload(i),!s){Sp([].concat(t._componentsViews).concat(t._chartsViews),y);return}var p={};p[s+"Id"]=i[s+"Id"],p[s+"Index"]=i[s+"Index"],p[s+"Name"]=i[s+"Name"];var f={mainType:s,query:p};u&&(f.subType=u);var v=i.excludeSeriesId;function y(s){s&&s.__alive&&s[r]&&s[r](s.__model,h,t._api,i)}null!=v&&(c=SY(),Sp(Tq(v),function(t){var r=T4(t,null);null!=r&&c.set(r,!0)})),h&&h.eachComponent(f,function(r){if(!c||null==c.get(r.id))if(DU(i)){if(r instanceof kw)i.type===I7&&!i.notBlur&&!r.get(["emphasis","disabled"])&&!function(t,r,i){var s=t.seriesIndex,u=t.getData(r.dataType);if(!!u){var c=T8(u,r);c=(Sb(c)?c[0]:c)||0;var h=u.getItemGraphicEl(c);if(!h){for(var p=u.count(),f=0;!h&&f<p;)h=u.getItemGraphicEl(f++)}if(h){var v=I1(h);DT(s,v.focus,v.blurScope,i)}else{var y=t.get(["emphasis","focus"]),x=t.get(["emphasis","blurScope"]);null!=y&&DT(s,y,x,i)}}}(r,i,t._api);else{var s=DI(r.mainType,r.componentIndex,i.name,t._api),u=s.focusSelf,h=s.dispatchers;i.type===I7&&u&&!i.notBlur&&DE(r.mainType,r.componentIndex,t._api),h&&Sp(h,function(t){i.type===I7?Dx(t):D_(t)})}}else Dz(i)&&r instanceof kw&&(!function(t,r,i){if(!!Dz(r)){var s=r.dataType,u=T8(t.getData(s),r);!Sb(u)&&(u=[u]),t[r.type===Dr?"toggleSelect":r.type===Dt?"select":"unselect"](u,s)}}(r,i,t._api),DD(r),eon(t))},t),h&&h.eachComponent(f,function(r){if(!c||null==c.get(r.id))y(t["series"===s?"_chartsMap":"_componentsMap"][r.__viewId])},t)},eaQ={prepareAndUpdate:function(t){eaZ(this),eaQ.update.call(this,t,{optionChanged:null!=t.newOption})},update:function(r,i){var s=this._model,u=this._api,c=this._zr,h=this._coordSysMgr,p=this._scheduler;if(!!s){s.setUpdatePayload(r),p.restoreData(s,r),p.performSeriesTasks(s),h.create(s,u),p.performDataProcessorTasks(s,r),ea1(this,s),h.update(s,u),t(s),p.performVisualTasks(s,r),ea9(this,s,u,r,i);var f=s.get("backgroundColor")||"transparent",v=s.get("darkMode");c.setBackgroundColor(f),null!=v&&"auto"!==v&&c.setDarkMode(v),NT.trigger("afterupdate",s,u)}},updateTransform:function(r){var i=this,s=this._model,u=this._api;if(!!s){s.setUpdatePayload(r);var c=[];s.eachComponent(function(t,h){if("series"!==t){var p=i.getViewOfComponentModel(h);if(p&&p.__alive){if(p.updateTransform){var f=p.updateTransform(h,s,u,r);f&&f.update&&c.push(p)}else c.push(p)}}});var h=SY();s.eachSeries(function(t){var c=i._chartsMap[t.__viewId];if(c.updateTransform){var p=c.updateTransform(t,s,u,r);p&&p.update&&h.set(t.uid,1)}else h.set(t.uid,1)}),t(s),this._scheduler.performVisualTasks(s,r,{setDirty:!0,dirtyMap:h}),ea7(this,s,u,r,{},h),NT.trigger("afterupdate",s,u)}},updateView:function(r){var i=this._model;if(!!i)i.setUpdatePayload(r),Bu.markUpdateMethod(r,"updateView"),t(i),this._scheduler.performVisualTasks(i,r,{setDirty:!0}),ea9(this,i,this._api,r,{}),NT.trigger("afterupdate",i,this._api)},updateVisual:function(r){var i=this,s=this._model;if(!!s)s.setUpdatePayload(r),s.eachSeries(function(t){t.getData().clearAllVisual()}),Bu.markUpdateMethod(r,"updateVisual"),t(s),this._scheduler.performVisualTasks(s,r,{visualType:"visual",setDirty:!0}),s.eachComponent(function(t,u){if("series"!==t){var c=i.getViewOfComponentModel(u);c&&c.__alive&&c.updateVisual(u,s,i._api,r)}}),s.eachSeries(function(t){i._chartsMap[t.__viewId].updateVisual(t,s,i._api,r)}),NT.trigger("afterupdate",s,this._api)},updateLayout:function(t){eaQ.update.call(this,t)}},ea0=function(t,r,i,s){if(t._disposed){NX(t.id);return}for(var u,c=t._model,h=t._coordSysMgr.getCoordinateSystems(),p=Et(c,i),f=0;f<h.length;f++){var v=h[f];if(v[r]&&null!=(u=v[r](c,p,s)))return u}},ea1=function(t,r){var i=t._chartsMap,s=t._scheduler;r.eachSeries(function(t){s.updateStreamModes(t,i[t.__viewId])})},ea2=function(t,r){var i,s=this,u=this.getModel(),c=t.type,h=t.escapeConnect,p=NY[c],f=p.actionInfo,v=(f.update||"update").split(":"),y=v.pop(),x=null!=v[0]&&Eh(v[0]);this[NL]=!0;var _=[t],b=!1;t.batch&&(b=!0,_=Sf(t.batch,function(r){return(r=Ss(So({},r),t)).batch=null,r}));var w=[],S=Dz(t),M=DU(t);if(M&&DC(this._api),Sp(_,function(r){if((i=(i=p.action(r,s._model,s._api))||So({},r)).type=f.event||i.type,w.push(i),M){var u=En(t),c=u.queryOptionMap;eaq(s,y,r,u.mainTypeSpecified?c.keys()[0]:"series"),eon(s)}else S?(eaq(s,y,r,"series"),eon(s)):x&&eaq(s,y,r,x.main,x.sub)}),"none"!==y&&!M&&!S&&!x)try{this[Nk]?(eaZ(this),eaQ.update.call(this,t),this[Nk]=null):eaQ[y].call(this,t)}catch(t){throw this[NL]=!1,t}if(i=b?{type:f.event||c,escapeConnect:h,batch:w}:w[0],this[NL]=!1,!r){var A=this._messageCenter;if(A.trigger(i.type,i),S){var C,T={type:"selectchanged",escapeConnect:h,selected:(C=[],u.eachSeries(function(t){Sp(t.getAllData(),function(r){r.data;var i=r.type,s=t.getSelectedDataIndices();if(s.length>0){var u={dataIndex:s,seriesIndex:t.seriesIndex};null!=i&&(u.dataType=i),C.push(u)}})}),C),isFromClick:t.isFromClick||!1,fromAction:t.type,fromActionPayload:t};A.trigger(T.type,T)}}},ea3=function(t){for(var r=this._pendingActions;r.length;){var i=r.shift();ea2.call(this,i,t)}},ea5=function(t){t||this.trigger("updated")},ea4=function(t,r){t.on("rendered",function(i){r.trigger("rendered",i),t.animation.isFinished()&&!r[Nk]&&!r._scheduler.unfinished&&!r._pendingActions.length&&r.trigger("finished")})},ea6=function(t,r){t.on("mouseover",function(t){var i,s,u,c,h,p,f,v=BZ(t.target,DF);if(v){;i=v,s=t,u=r._api,p=(h=DI((c=I1(i)).componentMainType,c.componentIndex,c.componentHighDownName,u)).dispatchers,f=h.focusSelf,p?(f&&DE(c.componentMainType,c.componentIndex,u),Sp(p,function(t){return Dv(t,s)})):(DT(c.seriesIndex,c.focus,c.blurScope,u),"self"===c.focus&&DE(c.componentMainType,c.componentIndex,u),Dv(i,s)),eon(r)}}).on("mouseout",function(t){var i,s,u,c,h,p=BZ(t.target,DF);if(p){;i=p,s=t,DC(u=r._api),(h=DI((c=I1(i)).componentMainType,c.componentIndex,c.componentHighDownName,u).dispatchers)?Sp(h,function(t){return Dy(t,s)}):Dy(i,s),eon(r)}}).on("click",function(t){var i=BZ(t.target,function(t){return null!=I1(t).dataIndex},!0);if(i){var s=i.selected?"unselect":"select",u=I1(i);r._api.dispatchAction({type:s,dataType:u.dataType,dataIndexInside:u.dataIndex,seriesIndex:u.seriesIndex,isFromClick:!0})}})};function r(t){for(var r=[],i=t.currentStates,s=0;s<i.length;s++){var u=i[s];!("emphasis"===u||"blur"===u||"select"===u)&&r.push(u)}t.selected&&t.states.select&&r.push("select"),2===t.hoverState&&t.states.emphasis?r.push("emphasis"):1===t.hoverState&&t.states.blur&&r.push("blur"),t.useStates(r)}ea9=function(t,r,i,s,u){!function(t){var r=[],i=[],s=!1;if(t.eachComponent(function(t,u){var c=u.get("zlevel")||0,h=u.get("z")||0,p=u.getZLevelKey();s=s||!!p,("series"===t?i:r).push({zlevel:c,z:h,idx:u.componentIndex,type:t,key:p})}),s){var u,c,h=r.concat(i);Au(h,function(t,r){return t.zlevel===r.zlevel?t.z-r.z:t.zlevel-r.zlevel}),Sp(h,function(r){var i=t.getComponent(r.type,r.idx),s=r.zlevel,h=r.key;null!=u&&(s=Math.max(u,s)),h?(s===u&&h!==c&&s++,c=h):c&&(s===u&&s++,c=""),u=s,i.setZLevel(s)})}}(r),ea8(t,r,i,s,u),Sp(t._chartsViews,function(t){t.__alive=!1}),ea7(t,r,i,s,u),Sp(t._chartsViews,function(t){!t.__alive&&t.remove(r,i)})},ea8=function(t,r,c,h,p,f){Sp(f||t._componentsViews,function(t){var p=t.__model;s(p,t),t.render(p,r,c,h),i(p,t),u(p,t)})},ea7=function(t,r,c,h,p,f){var v=t._scheduler;p=So(p||{},{updatedSeries:r.getSeries()}),NT.trigger("series:beforeupdate",r,c,p);var y=!1;r.eachSeries(function(r){var i=t._chartsMap[r.__viewId];i.__alive=!0;var u=i.renderTask;v.updatePayload(u,h),s(r,i),f&&f.get(r.uid)&&u.dirty(),u.perform(v.getPerformArgs(u))&&(y=!0),i.group.silent=!!r.get("silent"),function(t,r){var i=t.get("blendMode")||null;r.eachRendered(function(t){!t.isGroup&&(t.style.blend=i)})}(r,i),DD(r)}),v.unfinished=y||v.unfinished,NT.trigger("series:layoutlabels",r,c,p),NT.trigger("series:transition",r,c,p),r.eachSeries(function(r){var s=t._chartsMap[r.__viewId];i(r,s),u(r,s)}),function(t,r){var i=t._zr.storage,s=0;i.traverse(function(t){!t.isGroup&&s++}),s>r.get("hoverLayerThreshold")&&!wY.node&&!wY.worker&&r.eachSeries(function(r){if(!r.preventUsingHoverLayer){var i=t._chartsMap[r.__viewId];i.__alive&&i.eachRendered(function(t){t.states.emphasis&&(t.states.emphasis.hoverLayer=!0)})}})}(t,r),NT.trigger("series:afterupdate",r,c,p)},eon=function(t){t[NO]=!0,t.getZr().wakeUp()},eor=function(t){if(!!t[NO])t.getZr().storage.traverse(function(t){if(!DX(t))r(t)}),t[NO]=!1};function i(t,r){if(!t.preventAutoZ){var i=t.get("z")||0,s=t.get("zlevel")||0;r.eachRendered(function(t){return function t(r,i,s,u){var c=r.getTextContent(),h=r.getTextGuideLine();if(r.isGroup){for(var p=r.childrenRef(),f=0;f<p.length;f++)u=Math.max(t(p[f],i,s,u),u)}else r.z=i,r.zlevel=s,u=Math.max(r.z2,u);if(c&&(c.z=i,c.zlevel=s,isFinite(u)&&(c.z2=u+2)),h){var v=r.textGuideLineConfig;h.z=i,h.zlevel=s,isFinite(u)&&(h.z2=u+(v&&v.showAbove?1:-1))}return u}(t,i,s,-1/0),!0})}}function s(t,r){r.eachRendered(function(t){if(!DX(t)){var r=t.getTextContent(),i=t.getTextGuideLine();t.stateTransition&&(t.stateTransition=null),r&&r.stateTransition&&(r.stateTransition=null),i&&i.stateTransition&&(i.stateTransition=null),t.hasState()?(t.prevStates=t.currentStates,t.clearStates()):t.prevStates&&(t.prevStates=null)}})}function u(t,i){var s=t.getModel("stateAnimation"),u=t.isAnimationEnabled(),c=s.get("duration"),h=c>0?{duration:c,delay:s.get("delay"),easing:s.get("easing")}:null;i.eachRendered(function(t){if(t.states&&t.states.emphasis){if(!DX(t)){if(t instanceof IM){var i,s,c;(s=I4(i=t)).normalFill=i.style.fill,s.normalStroke=i.style.stroke,c=i.states.select||{},s.selectFill=c.style&&c.style.fill||null,s.selectStroke=c.style&&c.style.stroke||null}if(t.__dirty){var p=t.prevStates;p&&t.useStates(p)}if(u){t.stateTransition=h;var f=t.getTextContent(),v=t.getTextGuideLine();f&&(f.stateTransition=h),v&&(v.stateTransition=h)}t.__dirty&&r(t)}}})}eoe=function(t){return new(function(r){function i(){return null!==r&&r.apply(this,arguments)||this}return wU(i,r),i.prototype.getCoordinateSystems=function(){return t._coordSysMgr.getCoordinateSystems()},i.prototype.getComponentByElement=function(r){for(;r;){var i=r.__ecComponentInfo;if(null!=i)return t._model.getComponent(i.mainType,i.index);r=r.parent}},i.prototype.enterEmphasis=function(r,i){Dx(r,i),eon(t)},i.prototype.leaveEmphasis=function(r,i){D_(r,i),eon(t)},i.prototype.enterBlur=function(r){Dp(r,Dl),eon(t)},i.prototype.leaveBlur=function(r){Dp(r,Du),eon(t)},i.prototype.enterSelect=function(r){Dp(r,Dc),eon(t)},i.prototype.leaveSelect=function(r){Dp(r,Dh),eon(t)},i.prototype.getModel=function(){return t.getModel()},i.prototype.getViewOfComponentModel=function(r){return t.getViewOfComponentModel(r)},i.prototype.getViewOfSeriesModel=function(r){return t.getViewOfSeriesModel(r)},i}(RU))(t)},eot=function(t){function r(t,r){for(var i=0;i<t.length;i++)t[i][NN]=r}Sp(N$,function(i,s){t._messageCenter.on(s,function(i){if(N1[t.group]&&0!==t[NN]){if(!i||!i.escapeConnect){var s=t.makeActionFromEvent(i),u=[];Sp(N0,function(r){r!==t&&r.group===t.group&&u.push(r)}),r(u,0),Sp(u,function(t){1!==t[NN]&&t.dispatchAction(s)}),r(u,2)}}})})}}(),r}(Mv),NW=NV.prototype;NW.on=NF("on"),NW.off=NF("off"),NW.one=function(t,r,i){var s=this;LI("ECharts#one is deprecated.");this.on.call(this,t,function i(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];r&&r.apply&&r.apply(this,u),s.off(t,i)},i)};var Nj=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function NX(t){}var NY={},N$={},NJ=[],NZ=[],NK=[],Nq={},NQ={},N0={},N1={},N2=+new Date-0,N3=+new Date-0,N5="_echarts_instance_";function N4(t,r,i){var s=!(i&&i.ssr);if(s){var u=Fe(t);if(u)return u}var c=new NV(t,r,i);return c.id="ec_"+N2++,N0[c.id]=c,s&&Eo(t,N5,c.id),eot(c),NT.trigger("afterinit",c),c}function N6(t){if(Sb(t)){var r=t;t=null,Sp(r,function(r){null!=r.group&&(t=r.group)}),t=t||"g_"+N3++,Sp(r,function(r){r.group=t})}return N1[t]=!0,t}function N9(t){N1[t]=!1}var N8=N9;function N7(t){SS(t)?t=N0[t]:!(t instanceof NV)&&(t=Fe(t)),t instanceof NV&&!t.isDisposed()&&t.dispose()}function Fe(t){var r,i;return N0[r=t,i=N5,r.getAttribute?r.getAttribute(i):r[i]]}function Ft(t){return N0[t]}function Fn(t,r){Nq[t]=r}function Fr(t){0>Su(NZ,t)&&NZ.push(t)}function Fi(t,r){Ff(NJ,t,r,2e3)}function Fa(t){Fs("afterinit",t)}function Fo(t){Fs("afterupdate",t)}function Fs(t,r){NT.on(t,r)}function Fl(t,r,i){Sw(r)&&(i=r,r="");var s=SC(t)?t.type:[t,t={event:r}][0];if(t.event=(t.event||s).toLowerCase(),!N$[r=t.event])Sz(NB.test(s)&&NB.test(r)),!NY[s]&&(NY[s]={action:i,actionInfo:t}),N$[r]=s}function Fu(t,r){RG.register(t,r)}function Fc(t){var r=RG.get(t);if(r)return r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice()}function Fh(t,r){Ff(NK,t,r,1e3,"layout")}function Fd(t,r){Ff(NK,t,r,3e3,"visual")}var Fp=[];function Ff(t,r,i,s,u){(Sw(r)||SC(r))&&(i=r,r=s);if(!(Su(Fp,i)>=0)){Fp.push(i);var c=BS.wrapStageHandler(i,u);c.__prio=r,c.__raw=i,t.push(c)}}function Fg(t,r){NQ[t]=r}function Fm(t){wq({createCanvas:t})}function Fv(t,r,i){var s=NE.registerMap;s&&s(t,r,i)}function Fy(t){var r=NE.getMap;return r&&r(t)}var Fx=function(t){var r=(t=Sr(t)).type;!r&&LD("");var i=r.split(":");2!==i.length&&LD("");var s=!1;"echarts"===i[0]&&(r=i[1],s=!0),t.__isBuiltIn=s,LV.set(r,t)};Fd(2e3,{createOnAllSeries:!0,performRawSeries:!0,reset:function(t,r){var i=t.getData(),s=t.visualStyleAccessPath||"itemStyle",u=t.getModel(s),c=Bx(t,s)(u),h=u.getShallow("decal");h&&(i.setVisual("decal",h),h.dirty=!0);var p=B_(t,s),f=c[p],v=Sw(f)?f:null,y="auto"===c.fill||"auto"===c.stroke;if(!c[p]||v||y){var x=t.getColorFromPalette(t.name,null,r.getSeriesCount());!c[p]&&(c[p]=x,i.setVisual("colorFromPalette",!0)),c.fill="auto"===c.fill||Sw(c.fill)?x:c.fill,c.stroke="auto"===c.stroke||Sw(c.stroke)?x:c.stroke}if(i.setVisual("style",c),i.setVisual("drawType",p),!r.isSeriesFiltered(t)&&v)return i.setVisual("colorFromPalette",!1),{dataEach:function(r,i){var s=t.getDataParams(i),u=So({},c);u[p]=v(s),r.setItemVisual(i,"style",u)}}}}),Fd(4500,{createOnAllSeries:!0,performRawSeries:!0,reset:function(t,r){if(!(t.ignoreStyleOnData||r.isSeriesFiltered(t))){var i=t.getData(),s=t.visualStyleAccessPath||"itemStyle",u=Bx(t,s),c=i.getVisual("drawType");return{dataEach:i.hasItemOption?function(t,r){var i=t.getRawDataItem(r);if(i&&i[s]){Bb.option=i[s];var h=u(Bb);So(t.ensureUniqueItemVisual(r,"style"),h),Bb.option.decal&&(t.setItemVisual(r,"decal",Bb.option.decal),Bb.option.decal.dirty=!0),c in h&&t.setItemVisual(r,"colorFromPalette",!1)}}:null}}}}),Fd(4500,{performRawSeries:!0,overallReset:function(t){var r=SY();t.eachSeries(function(t){var i=t.getColorBy();if(!t.isColorBySeries()){var s=t.type+"-"+i,u=r.get(s);!u&&(u={},r.set(s,u)),Bm(t).scope=u}}),t.eachSeries(function(r){if(!(r.isColorBySeries()||t.isSeriesFiltered(r))){var i=r.getRawData(),s={},u=r.getData(),c=Bm(r).scope,h=r.visualStyleAccessPath||"itemStyle",p=B_(r,h);u.each(function(t){s[u.getRawIndex(t)]=t}),i.each(function(t){var h=s[t];if(u.getItemVisual(h,"colorFromPalette")){var f=u.ensureUniqueItemVisual(h,"style"),v=i.getName(t)||t+"",y=i.count();f[p]=r.getColorFromPalette(v,c,y)}})}})}}),Fd(2e3,{createOnAllSeries:!0,performRawSeries:!0,reset:function(t,r){var i=t.getData();if(t.legendIcon&&i.setVisual("legendIcon",t.legendIcon),!t.hasSymbolVisual)return;for(var s={},u={},c=!1,h=0;h<BV.length;h++){var p=BV[h],f=t.get(p);Sw(f)?(c=!0,u[p]=f):s[p]=f}if(s.symbol=s.symbol||t.defaultSymbol,i.setVisual(So({legendIcon:t.legendIcon||s.symbol,symbolKeepAspect:t.get("symbolKeepAspect")},s)),!r.isSeriesFiltered(t)){var v=Sy(u);return{dataEach:c?function(r,i){for(var s=t.getRawValue(i),c=t.getDataParams(i),h=0;h<v.length;h++){var p=v[h];r.setItemVisual(i,p,u[p](s,c))}}:null}}}}),Fd(4500,{createOnAllSeries:!0,performRawSeries:!0,reset:function(t,r){if(!(!t.hasSymbolVisual||r.isSeriesFiltered(t))){var i=t.getData();return{dataEach:i.hasItemOption?function(t,r){for(var i=t.getItemModel(r),s=0;s<BW.length;s++){var u=BW[s],c=i.getShallow(u,!0);null!=c&&t.setItemVisual(r,u,c)}}:null}}}}),Fd(7e3,function(t,r){t.eachRawSeries(function(i){if(!t.isSeriesFiltered(i)){var s=i.getData();s.hasItemVisual()&&s.each(function(t){var i=s.getItemVisual(t,"decal");i&&(s.ensureUniqueItemVisual(t,"style").decal=NA(i,r))});var u=s.getVisual("decal");u&&(s.getVisual("style").decal=NA(u,r))}})}),Fr(R8),Fi(900,function(t){var r=SY();t.eachSeries(function(t){var i=t.get("stack");if(i){var s=r.get(i)||r.set(i,[]),u=t.getData(),c={stackResultDimension:u.getCalculationInfo("stackResultDimension"),stackedOverDimension:u.getCalculationInfo("stackedOverDimension"),stackedDimension:u.getCalculationInfo("stackedDimension"),stackedByDimension:u.getCalculationInfo("stackedByDimension"),isStackedByIndex:u.getCalculationInfo("isStackedByIndex"),data:u,seriesModel:t};if(!c.stackedDimension||!(c.isStackedByIndex||c.stackedByDimension))return;s.length&&u.setCalculationInfo("stackedOnSeries",s[s.length-1].seriesModel),s.push(c)}}),r.each(R7)}),eaa=function(t,r){Ss(r=r||{},{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var i,s=new Tf,u=new IF({style:{fill:r.maskColor},zlevel:r.zlevel,z:1e4});s.add(u);var c=new I0({style:{text:r.text,fill:r.textColor,fontSize:r.fontSize,fontWeight:r.fontWeight,fontStyle:r.fontStyle,fontFamily:r.fontFamily},zlevel:r.zlevel,z:10001}),h=new IF({style:{fill:"none"},textContent:c,textConfig:{position:"right",distance:10},zlevel:r.zlevel,z:10001});return s.add(h),r.showSpinner&&((i=new OS({shape:{startAngle:-Bw/2,endAngle:-Bw/2+.1,r:r.spinnerRadius},style:{stroke:r.color,lineCap:"round",lineWidth:r.lineWidth},zlevel:r.zlevel,z:10001})).animateShape(!0).when(1e3,{endAngle:3*Bw/2}).start("circularInOut"),i.animateShape(!0).when(1e3,{startAngle:3*Bw/2}).delay(300).start("circularInOut"),s.add(i)),s.resize=function(){var s=c.getBoundingRect().width,p=r.showSpinner?r.spinnerRadius:0,f=(t.getWidth()-2*p-(r.showSpinner&&s?10:0)-s)/2-(r.showSpinner&&s?0:5+s/2)+(r.showSpinner?0:s/2)+(s?0:p),v=t.getHeight()/2;r.showSpinner&&i.setShape({cx:f,cy:v}),h.setShape({x:f-p,y:v-p,width:2*p,height:2*p}),u.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},s.resize(),s},NQ.default=eaa,Fl({type:I7,event:I7,update:I7},Sq),Fl({type:De,event:De,update:De},Sq),Fl({type:Dt,event:Dt,update:Dt},Sq),Fl({type:Dn,event:Dn,update:Dn},Sq),Fl({type:Dr,event:Dr,update:Dr},Sq),eao={color:BB,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],BB]},Nq.light=eao,eas=BH,Nq.dark=eas;var F_={},Fb=[],Fw={registerPreprocessor:Fr,registerProcessor:Fi,registerPostInit:Fa,registerPostUpdate:Fo,registerUpdateLifecycle:Fs,registerAction:Fl,registerCoordinateSystem:Fu,registerLayout:Fh,registerVisual:Fd,registerTransform:Fx,registerLoading:Fg,registerMap:Fv,registerImpl:function(t,r){NE[t]=r},PRIORITY:NR,ComponentModel:Ru,ComponentView:kM,SeriesModel:kw,ChartView:Bu,registerComponentModel:function(t){Ru.registerClass(t)},registerComponentView:function(t){kM.registerClass(t)},registerSeriesModel:function(t){kw.registerClass(t)},registerChartView:function(t){Bu.registerClass(t)},registerSubTypeDefaulter:function(t,r){Ru.registerSubTypeDefaulter(t,r)},registerPainter:function(t,r){var i,s;i=t,s=r,Tg[i]=s}};function FS(t){if(Sb(t)){Sp(t,function(t){FS(t)});return}if(!(Su(Fb,t)>=0))Fb.push(t),Sw(t)&&(t={install:t}),t.install(Fw)}function FM(t){return null==t?0:t.length||1}function FA(t){return t}var FC=function(){function t(t,r,i,s,u,c){this._old=t,this._new=r,this._oldKeyGetter=i||FA,this._newKeyGetter=s||FA,this.context=u,this._diffModeMultiple="multiple"===c}return t.prototype.add=function(t){return this._add=t,this},t.prototype.update=function(t){return this._update=t,this},t.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},t.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},t.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},t.prototype.remove=function(t){return this._remove=t,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var t=this._old,r=this._new,i={},s=Array(t.length),u=Array(r.length);this._initIndexMap(t,null,s,"_oldKeyGetter"),this._initIndexMap(r,i,u,"_newKeyGetter");for(var c=0;c<t.length;c++){var h=s[c],p=i[h],f=FM(p);if(f>1){var v=p.shift();1===p.length&&(i[h]=p[0]),this._update&&this._update(v,c)}else 1===f?(i[h]=null,this._update&&this._update(p,c)):this._remove&&this._remove(c)}this._performRestAdd(u,i)},t.prototype._executeMultiple=function(){var t=this._old,r=this._new,i={},s={},u=[],c=[];this._initIndexMap(t,i,u,"_oldKeyGetter"),this._initIndexMap(r,s,c,"_newKeyGetter");for(var h=0;h<u.length;h++){var p=u[h],f=i[p],v=s[p],y=FM(f),x=FM(v);if(y>1&&1===x)this._updateManyToOne&&this._updateManyToOne(v,f),s[p]=null;else if(1===y&&x>1)this._updateOneToMany&&this._updateOneToMany(v,f),s[p]=null;else if(1===y&&1===x)this._update&&this._update(v,f),s[p]=null;else if(y>1&&x>1)this._updateManyToMany&&this._updateManyToMany(v,f),s[p]=null;else if(y>1)for(var _=0;_<y;_++)this._remove&&this._remove(f[_]);else this._remove&&this._remove(f)}this._performRestAdd(c,s)},t.prototype._performRestAdd=function(t,r){for(var i=0;i<t.length;i++){var s=t[i],u=r[s],c=FM(u);if(c>1)for(var h=0;h<c;h++)this._add&&this._add(u[h]);else 1===c&&this._add&&this._add(u);r[s]=null}},t.prototype._initIndexMap=function(t,r,i,s){for(var u=this._diffModeMultiple,c=0;c<t.length;c++){var h="_ec_"+this[s](t[c],c);if(!u&&(i[c]=h),!!r){var p=r[h],f=FM(p);0===f?(r[h]=c,u&&i.push(h)):1===f?r[h]=[p,c]:p.push(c)}}},t}(),FT=function(){function t(t,r){this._encode=t,this._schema=r}return t.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},t.prototype._getFullDimensionNames=function(){return!this._cachedDimNames&&(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},t}();function FE(t,r){return!t.hasOwnProperty(r)&&(t[r]=[]),t[r]}function FI(t){return"category"===t?"ordinal":"time"===t?"time":"float"}let FD=function(t){this.otherDims={},null!=t&&So(this,t)};var FP=T7(),FR={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},FL=function(){function t(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return t.prototype.isDimensionOmitted=function(){return this._dimOmitted},t.prototype._updateDimOmitted=function(t){if(this._dimOmitted=t,!!t)!this._dimNameMap&&(this._dimNameMap=FB(this.source))},t.prototype.getSourceDimensionIndex=function(t){return SO(this._dimNameMap.get(t),-1)},t.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},t.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=Ls(this.source),i=!function(t){return t>30}(t),s="",u=[],c=0,h=0;c<t;c++){var p=void 0,f=void 0,v=void 0,y=this.dimensions[h];if(y&&y.storeDimIndex===c)p=r?y.name:null,f=y.type,v=y.ordinalMeta,h++;else{var x=this.getSourceDimension(c);x&&(p=r?x.name:null,f=x.type)}u.push({property:p,type:f,ordinalMeta:v}),r&&null!=p&&(!y||!y.isCalculationCoord)&&(s+=i?p.replace(/\`/g,"`1").replace(/\$/g,"`2"):p),s+="$",s+=FR[f]||"f",v&&(s+=v.uid),s+="$"}var _=this.source;return{dimensions:u,hash:[_.seriesLayoutBy,_.startIndex,s].join("$$")}},t.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,i=0;r<this._fullDimCount;r++){var s=void 0,u=this.dimensions[i];if(u&&u.storeDimIndex===r)!u.isCalculationCoord&&(s=u.name),i++;else{var c=this.getSourceDimension(r);c&&(s=c.name)}t.push(s)}return t},t.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},t}();function Fk(t){return t instanceof FL}function FO(t){for(var r=SY(),i=0;i<(t||[]).length;i++){var s=t[i],u=SC(s)?s.name:s;null!=u&&null==r.get(u)&&r.set(u,i)}return r}function FB(t){var r=FP(t);return r.dimNameMap||(r.dimNameMap=FO(t.dimensionsDefine))}function FN(t){return t>30}var FF=SC,Fz=Sf,FU="undefined"==typeof Int32Array?Array:Int32Array,FH=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],FG=["_approximateExtent"];let FV=function(){function t(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var i,s=!1;Fk(t)?(i=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(s=!0,i=t),i=i||["x","y"];for(var u={},c=[],h={},p=!1,f={},v=0;v<i.length;v++){var y=i[v],x=SS(y)?new FD({name:y}):y instanceof FD?y:new FD(y),_=x.name;x.type=x.type||"float",!x.coordDim&&(x.coordDim=_,x.coordDimIndex=0);var b=x.otherDims=x.otherDims||{};c.push(_),u[_]=x,null!=f[_]&&(p=!0),x.createInvertedIndices&&(h[_]=[]),0===b.itemName&&(this._nameDimIdx=v),0===b.itemId&&(this._idDimIdx=v);s&&(x.storeDimIndex=v)}if(this.dimensions=c,this._dimInfos=u,this._initGetDimensionInfo(p),this.hostModel=r,this._invertedIndicesMap=h,this._dimOmitted){var w=this._dimIdxToName=SY();Sp(c,function(t){w.set(u[t].storeDimIndex,t)})}}return t.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(null==r)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var i=this._dimIdxToName.get(r);if(null!=i)return i;var s=this._schema.getSourceDimension(r);if(s)return s.name},t.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(null!=r)return r;if(null==t)return -1;var i=this._getDimInfo(t);return i?i.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},t.prototype._recognizeDimIndex=function(t){if(SA(t)||null!=t&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||0>this._schema.getSourceDimensionIndex(t)))return+t},t.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},t.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},t.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(t){return r.hasOwnProperty(t)?r[t]:void 0}:function(t){return r[t]}},t.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},t.prototype.mapDimension=function(t,r){var i=this._dimSummary;if(null==r)return i.encodeFirstDimNotExtra[t];var s=i.encode[t];return s?s[r]:null},t.prototype.mapDimensionsAll=function(t){return(this._dimSummary.encode[t]||[]).slice()},t.prototype.getStore=function(){return this._store},t.prototype.initData=function(t,r,i){var s,u,c,h,p,f,v,y,x,_,b,w,S,M=this;if(t instanceof L0&&(S=t),!S){var A=this.dimensions,C=Lt(t)||Sd(t)?new Ll(t,A.length):t;S=new L0;var T=Fz(A,function(t){return{type:M._dimInfos[t].type,property:t}});S.initData(C,T,i)}this._store=S,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,S.count()),this._dimSummary=(s=this,u=this._schema,h=(c={}).encode={},p=SY(),f=[],v=[],y={},Sp(s.dimensions,function(t){var r=s.getDimensionInfo(t),i=r.coordDim;if(i){var u=r.coordDimIndex;FE(h,i)[u]=t,!r.isExtraCoord&&(p.set(i,1),function(t){return!("ordinal"===t||"time"===t)}(r.type)&&(f[0]=t),FE(y,i)[u]=s.getDimensionIndex(r.name)),r.defaultTooltip&&v.push(t)}Rp.each(function(t,i){var s=FE(h,i),u=r.otherDims[i];null!=u&&!1!==u&&(s[u]=r.name)})}),x=[],_={},p.each(function(t,r){var i=h[r];_[r]=i[0],x=x.concat(i)}),c.dataDimsOnCoord=x,c.dataDimIndicesOnCoord=Sf(x,function(t){return s.getDimensionInfo(t).storeDimIndex}),c.encodeFirstDimNotExtra=_,(b=h.label)&&b.length&&(f=b.slice()),(w=h.tooltip)&&w.length?v=w.slice():!v.length&&(v=f.slice()),h.defaultedLabel=f,h.defaultedTooltip=v,c.userOutput=new FT(y,u),c),this.userOutput=this._dimSummary.userOutput},t.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},t.prototype.appendValues=function(t,r){var i=this._store.appendValues(t,r.length),s=i.start,u=i.end,c=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var h=s;h<u;h++){var p=h-s;this._nameList[h]=r[p],c&&eoc(this,h)}},t.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,i=0;i<r.length;i++){var s=this._dimInfos[r[i]];s.ordinalMeta&&t.collectOrdinalMeta(s.storeDimIndex,s.ordinalMeta)}},t.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return null==this._idDimIdx&&t.getSource().sourceFormat!==Ry&&!t.fillStorage},t.prototype._doInit=function(t,r){if(!(t>=r)){var i=this._store.getProvider();this._updateOrdinalMeta();var s=this._nameList,u=this._idList;if(i.getSource().sourceFormat===Rf&&!i.pure){for(var c=[],h=t;h<r;h++){var p,f=i.getItem(h,c);if(!this.hasItemOption&&SC(p=f)&&!(p instanceof Array))this.hasItemOption=!0;if(f){var v=f.name;null==s[h]&&null!=v&&(s[h]=T4(v,null));var y=f.id;null==u[h]&&null!=y&&(u[h]=T4(y,null))}}}if(this._shouldMakeIdFromName())for(var h=t;h<r;h++)eoc(this,h);eoi(this)}},t.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},t.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},t.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},t.prototype.setCalculationInfo=function(t,r){FF(t)?So(this._calculationInfo,t):this._calculationInfo[t]=r},t.prototype.getName=function(t){var r=this.getRawIndex(t),i=this._nameList[r];return null==i&&null!=this._nameDimIdx&&(i=eoo(this,this._nameDimIdx,r)),null==i&&(i=""),i},t.prototype._getCategory=function(t,r){var i=this._store.get(t,r),s=this._store.getOrdinalMeta(t);return s?s.categories[i]:i},t.prototype.getId=function(t){return eoa(this,this.getRawIndex(t))},t.prototype.count=function(){return this._store.count()},t.prototype.get=function(t,r){var i=this._store,s=this._dimInfos[t];if(s)return i.get(s.storeDimIndex,r)},t.prototype.getByRawIndex=function(t,r){var i=this._store,s=this._dimInfos[t];if(s)return i.getByRawIndex(s.storeDimIndex,r)},t.prototype.getIndices=function(){return this._store.getIndices()},t.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},t.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},t.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},t.prototype.getValues=function(t,r){var i=this,s=this._store;return Sb(t)?s.getValues(Fz(t,function(t){return i._getStoreDimIndex(t)}),r):s.getValues(t)},t.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,i=0,s=r.length;i<s;i++)if(isNaN(this._store.get(r[i],t)))return!1;return!0},t.prototype.indexOfName=function(t){for(var r=0,i=this._store.count();r<i;r++)if(this.getName(r)===t)return r;return -1},t.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},t.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},t.prototype.rawIndexOf=function(t,r){var i=t&&this._invertedIndicesMap[t],s=i[r];return null==s||isNaN(s)?-1:s},t.prototype.indicesOfNearest=function(t,r,i){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,i)},t.prototype.each=function(t,r,i){Sw(t)&&(i=r,r=t,t=[]);var s=i||this,u=Fz(eos(t),this._getStoreDimIndex,this);this._store.each(u,s?Sx(r,s):r)},t.prototype.filterSelf=function(t,r,i){Sw(t)&&(i=r,r=t,t=[]);var s=i||this,u=Fz(eos(t),this._getStoreDimIndex,this);return this._store=this._store.filter(u,s?Sx(r,s):r),this},t.prototype.selectRange=function(t){var r=this,i={},s=Sy(t),u=[];return Sp(s,function(s){var c=r._getStoreDimIndex(s);i[c]=t[s],u.push(c)}),this._store=this._store.selectRange(i),this},t.prototype.mapArray=function(t,r,i){Sw(t)&&(i=r,r=t,t=[]),i=i||this;var s=[];return this.each(t,function(){s.push(r&&r.apply(this,arguments))},i),s},t.prototype.map=function(t,r,i,s){var u=i||s||this,c=Fz(eos(t),this._getStoreDimIndex,this),h=eou(this);return h._store=this._store.map(c,u?Sx(r,u):r),h},t.prototype.modify=function(t,r,i,s){var u=i||s||this,c=Fz(eos(t),this._getStoreDimIndex,this);this._store.modify(c,u?Sx(r,u):r)},t.prototype.downSample=function(t,r,i,s){var u=eou(this);return u._store=this._store.downSample(this._getStoreDimIndex(t),r,i,s),u},t.prototype.lttbDownSample=function(t,r){var i=eou(this);return i._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),i},t.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},t.prototype.getItemModel=function(t){var r=this.hostModel;return new Pp(this.getRawDataItem(t),r,r&&r.ecModel)},t.prototype.diff=function(t){var r=this;return new FC(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(r){return eoa(t,r)},function(t){return eoa(r,t)})},t.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},t.prototype.setVisual=function(t,r){this._visual=this._visual||{},FF(t)?So(this._visual,t):this._visual[t]=r},t.prototype.getItemVisual=function(t,r){var i=this._itemVisuals[t],s=i&&i[r];return null==s?this.getVisual(r):s},t.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},t.prototype.ensureUniqueItemVisual=function(t,r){var i=this._itemVisuals,s=i[t];!s&&(s=i[t]={});var u=s[r];return null==u&&(Sb(u=this.getVisual(r))?u=u.slice():FF(u)&&(u=So({},u)),s[r]=u),u},t.prototype.setItemVisual=function(t,r,i){var s=this._itemVisuals[t]||{};this._itemVisuals[t]=s,FF(r)?So(s,r):s[r]=i},t.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},t.prototype.setLayout=function(t,r){FF(t)?So(this._layout,t):this._layout[t]=r},t.prototype.getLayout=function(t){return this._layout[t]},t.prototype.getItemLayout=function(t){return this._itemLayouts[t]},t.prototype.setItemLayout=function(t,r,i){this._itemLayouts[t]=i?So(this._itemLayouts[t]||{},r):r},t.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},t.prototype.setItemGraphicEl=function(t,r){I2(this.hostModel&&this.hostModel.seriesIndex,this.dataType,t,r),this._graphicEls[t]=r},t.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},t.prototype.eachItemGraphicEl=function(t,r){Sp(this._graphicEls,function(i,s){i&&t&&t.call(r,i,s)})},t.prototype.cloneShallow=function(r){return!r&&(r=new t(this._schema?this._schema:Fz(this.dimensions,this._getDimInfo,this),this.hostModel)),eol(r,this),r._store=this._store,r},t.prototype.wrapMethod=function(t,r){var i=this[t];if(!!Sw(i))this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=i.apply(this,arguments);return r.apply(this,[t].concat(SN(arguments)))}},t.internalField=void(eoi=function(t){var r=t._invertedIndicesMap;Sp(r,function(i,s){var u=t._dimInfos[s],c=u.ordinalMeta,h=t._store;if(c){i=r[s]=new FU(c.categories.length);for(var p=0;p<i.length;p++)i[p]=-1;for(var p=0;p<h.count();p++)i[h.get(u.storeDimIndex,p)]=p}})},eoo=function(t,r,i){return T4(t._getCategory(r,i),null)},eoa=function(t,r){var i=t._idList[r];return null==i&&null!=t._idDimIdx&&(i=eoo(t,t._idDimIdx,r)),null==i&&(i="e\0\0"+r),i},eos=function(t){return!Sb(t)&&(t=null!=t?[t]:[]),t},eou=function(r){var i=new t(r._schema?r._schema:Fz(r.dimensions,r._getDimInfo,r),r.hostModel);return eol(i,r),i},eol=function(t,r){Sp(FH.concat(r.__wrappedMethods||[]),function(i){r.hasOwnProperty(i)&&(t[i]=r[i])}),t.__wrappedMethods=r.__wrappedMethods,Sp(FG,function(i){t[i]=Sr(r[i])}),t._calculationInfo=So({},r._calculationInfo)},eoc=function(t,r){var i=t._nameList,s=t._idList,u=t._nameDimIdx,c=t._idDimIdx,h=i[r],p=s[r];if(null==h&&null!=u&&(i[r]=h=eoo(t,u,r)),null==p&&null!=c&&(s[r]=p=eoo(t,c,r)),null==p&&null!=h){var f=t._nameRepeatCount,v=f[h]=(f[h]||0)+1;p=h,v>1&&(p+="__ec__"+v),s[r]=p}}),t}();function FW(t,r){return Fj(t,r).dimensions}function Fj(t,r){!Lt(t)&&(t=Lr(t));var i=(r=r||{}).coordDimensions||[],s=r.dimensionsDefine||t.dimensionsDefine||[],u=SY(),c=[],h=function(t,r,i,s){var u=Math.max(t.dimensionsDetectedCount||1,r.length,i.length,s||0);return Sp(r,function(t){var r;SC(t)&&(r=t.dimsDef)&&(u=Math.max(u,r.length))}),u}(t,i,s,r.dimensionsCount),p=r.canOmitUnusedDimensions&&h>30,f=s===t.dimensionsDefine,v=f?FB(t):FO(s),y=r.encodeDefine;!y&&r.encodeDefaulter&&(y=r.encodeDefaulter(t,h));for(var x=SY(y),_=new L$(h),b=0;b<_.length;b++)_[b]=-1;function w(t){var r=_[t];if(r<0){var i=s[t],u=SC(i)?i:{name:i},h=new FD,p=u.name;null!=p&&null!=v.get(p)&&(h.name=h.displayName=p),null!=u.type&&(h.type=u.type),null!=u.displayName&&(h.displayName=u.displayName);var f=c.length;return _[t]=f,h.storeDimIndex=t,c.push(h),h}return c[r]}if(!p)for(var b=0;b<h;b++)w(b);x.each(function(t,r){var i=Tq(t).slice();if(1===i.length&&!SS(i[0])&&i[0]<0){x.set(r,!1);return}var s=x.set(r,[]);Sp(i,function(t,i){var u=SS(t)?v.get(t):t;null!=u&&u<h&&(s[i]=u,M(w(u),r,i))})});var S=0;function M(t,r,i){null!=Rp.get(r)?t.otherDims[r]=i:(t.coordDim=r,t.coordDimIndex=i,u.set(r,!0))}Sp(i,function(t){if(SS(t))r=t,u={};else{r=(u=t).name;var r,i,s,u,c=u.ordinalMeta;u.ordinalMeta=null,(u=So({},u)).ordinalMeta=c,i=u.dimsDef,s=u.otherDims,u.name=u.coordDim=u.coordDimIndex=u.dimsDef=u.otherDims=null}var p=x.get(r);if(!1!==p){if(!(p=Tq(p)).length)for(var v=0;v<(i&&i.length||1);v++){for(;S<h&&null!=w(S).coordDim;)S++;S<h&&p.push(S++)}Sp(p,function(t,c){var h=w(t);if(f&&null!=u.type&&(h.type=u.type),M(Ss(h,u),r,c),null==h.name&&i){var p=i[c];SC(p)||(p={name:p}),h.name=h.displayName=p.name,h.defaultTooltip=p.defaultTooltip}s&&Ss(h.otherDims,s)})}});var A=r.generateCoord,C=r.generateCoordCount,T=null!=C;C=A?C||1:0;var I=A||"value";function D(t){null==t.name&&(t.name=t.coordDim)}if(p)Sp(c,function(t){D(t)}),c.sort(function(t,r){return t.storeDimIndex-r.storeDimIndex});else for(var P=0;P<h;P++){var R=w(P);null==R.coordDim&&(R.coordDim=function(t,r,i){if(i||r.hasKey(t)){for(var s=0;r.hasKey(t+s);)s++;t+=s}return r.set(t,!0),t}(I,u,T),R.coordDimIndex=0,(!A||C<=0)&&(R.isExtraCoord=!0),C--),D(R),null==R.type&&(RC(t,P)===Rb.Must||R.isExtraCoord&&(null!=R.otherDims.itemName||null!=R.otherDims.seriesName))&&(R.type="ordinal")}return function(t){for(var r=SY(),i=0;i<t.length;i++){var s=t[i],u=s.name,c=r.get(u)||0;c>0&&(s.name=u+(c-1)),c++,r.set(u,c)}}(c),new FL({source:t,dimensions:c,fullDimensionCount:h,dimensionOmitted:p})}var FX=function(t){this.coordSysDims=[],this.axisMap=SY(),this.categoryAxisMap=SY(),this.coordSysName=t},FY={cartesian2d:function(t,r,i,s){var u=t.getReferringComponents("xAxis",Er).models[0],c=t.getReferringComponents("yAxis",Er).models[0];r.coordSysDims=["x","y"],i.set("x",u),i.set("y",c),F$(u)&&(s.set("x",u),r.firstCategoryDimIndex=0),F$(c)&&(s.set("y",c),null==r.firstCategoryDimIndex&&(r.firstCategoryDimIndex=1))},singleAxis:function(t,r,i,s){var u=t.getReferringComponents("singleAxis",Er).models[0];r.coordSysDims=["single"],i.set("single",u),F$(u)&&(s.set("single",u),r.firstCategoryDimIndex=0)},polar:function(t,r,i,s){var u=t.getReferringComponents("polar",Er).models[0],c=u.findAxisModel("radiusAxis"),h=u.findAxisModel("angleAxis");r.coordSysDims=["radius","angle"],i.set("radius",c),i.set("angle",h),F$(c)&&(s.set("radius",c),r.firstCategoryDimIndex=0),F$(h)&&(s.set("angle",h),null==r.firstCategoryDimIndex&&(r.firstCategoryDimIndex=1))},geo:function(t,r,i,s){r.coordSysDims=["lng","lat"]},parallel:function(t,r,i,s){var u=t.ecModel,c=u.getComponent("parallel",t.get("parallelIndex")),h=r.coordSysDims=c.dimensions.slice();Sp(c.parallelAxisIndex,function(t,c){var p=u.getComponent("parallelAxis",t),f=h[c];i.set(f,p),F$(p)&&(s.set(f,p),null==r.firstCategoryDimIndex&&(r.firstCategoryDimIndex=c))})}};function F$(t){return"category"===t.get("type")}function FJ(t,r,i){var s,u,c,h,p,f,v,y=(i=i||{}).byIndex,x=i.stackedCoordDimension;(function(t){return!Fk(t.schema)})(r)?s=r:(s=(u=r.schema).dimensions,c=r.store);var _=!!(t&&t.get("stack"));if(Sp(s,function(t,r){SS(t)&&(s[r]=t={name:t}),_&&!t.isExtraCoord&&(!y&&!h&&t.ordinalMeta&&(h=t),!p&&"ordinal"!==t.type&&"time"!==t.type&&(!x||x===t.coordDim)&&(p=t))}),p&&!y&&!h&&(y=!0),p){f="__\0ecstackresult_"+t.id,v="__\0ecstackedover_"+t.id,h&&(h.createInvertedIndices=!0);var b=p.coordDim,w=p.type,S=0;Sp(s,function(t){t.coordDim===b&&S++});var M={name:f,coordDim:b,coordDimIndex:S,type:w,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:s.length},A={name:v,coordDim:v,coordDimIndex:S+1,type:w,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:s.length+1};u?(c&&(M.storeDimIndex=c.ensureCalculationDimension(v,w),A.storeDimIndex=c.ensureCalculationDimension(f,w)),u.appendCalculationDimension(M),u.appendCalculationDimension(A)):(s.push(M),s.push(A))}return{stackedDimension:p&&p.name,stackedByDimension:h&&h.name,isStackedByIndex:y,stackedOverDimension:v,stackResultDimension:f}}function FZ(t,r){return!!r&&r===t.getCalculationInfo("stackedDimension")}function FK(t,r){return FZ(t,r)?t.getCalculationInfo("stackResultDimension"):r}let Fq=function(t,r,i){i=i||{};var s,u,c,h,p,f,v,y,x,_,b,w=r.getSourceManager(),S=!1;t?(S=!0,b=Lr(t)):S=(b=w.getSource()).sourceFormat===Rf;var M=function(t){var r=t.get("coordinateSystem"),i=new FX(r),s=FY[r];if(s)return s(t,i,i.axisMap,i.categoryAxisMap),i}(r);var A=(s=r,u=M,h=s.get("coordinateSystem"),p=RG.get(h),u&&u.coordSysDims&&(c=Sf(u.coordSysDims,function(t){var r={name:t},i=u.axisMap.get(t);if(i){var s=i.get("type");r.type=FI(s)}return r})),!c&&(c=p&&(p.getDimensionsInfo?p.getDimensionsInfo():p.dimensions.slice())||["x","y"]),c),C=i.useEncodeDefaulter,T=Sw(C)?C:C?S_(RS,A,r):null,I=Fj(b,{coordDimensions:A,generateCoord:i.generateCoord,encodeDefine:r.getEncode(),encodeDefaulter:T,canOmitUnusedDimensions:!S});var D=(f=I.dimensions,v=i.createInvertedIndices,(y=M)&&Sp(f,function(t,r){var i=t.coordDim,s=y.categoryAxisMap.get(i);s&&(null==x&&(x=r),t.ordinalMeta=s.getOrdinalMeta(),v&&(t.createInvertedIndices=!0)),null!=t.otherDims.itemName&&(_=!0)}),!_&&null!=x&&(f[x].otherDims.itemName=0),x),P=S?null:w.getSharedDataStore(I),R=FJ(r,{schema:I,store:P}),L=new FV(I,r);L.setCalculationInfo(R);var k=null!=D&&function(t){if(t.sourceFormat===Rf)return!Sb(T1(function(t){for(var r=0;r<t.length&&null==t[r];)r++;return t[r]}(t.data||[])))}(b)?function(t,r,i,s){return s===D?i:this.defaultDimValueGetter(t,r,i,s)}:null;return L.hasItemOption=!1,L.initData(S?b:P,null,k),L};var FQ=function(){function t(t){this._setting=t||{},this._extent=[1/0,-1/0]}return t.prototype.getSetting=function(t){return this._setting[t]},t.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},t.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.setExtent=function(t,r){var i=this._extent;!isNaN(t)&&(i[0]=t),!isNaN(r)&&(i[1]=r)},t.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},t.prototype.isBlank=function(){return this._isBlank},t.prototype.setBlank=function(t){this._isBlank=t},t}();Ev(FQ);var F0=0,F1=function(){function t(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++F0}return t.createByAxisModel=function(r){var i=r.option,s=i.data,u=s&&Sf(s,F2);return new t({categories:u,needCollect:!u,deduplication:!1!==i.dedplication})},t.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},t.prototype.parseAndCollect=function(t){var r,i=this._needCollect;if(!SS(t)&&!i)return t;if(i&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var s=this._getOrCreateMap();return null==(r=s.get(t))&&(i?(r=this.categories.length,this.categories[r]=t,s.set(t,r)):r=NaN),r},t.prototype._getOrCreateMap=function(){return this._map||(this._map=SY(this.categories))},t}();function F2(t){return SC(t)&&null!=t.value?t.value:t+""}function F3(t){return"interval"===t.type||"log"===t.type}function F5(t){var r=Math.pow(10,TH(t)),i=t/r;return i?2===i?i=3:3===i?i=5:i*=2:i=1,TE(i*r)}function F4(t){return TD(t)+2}function F6(t,r,i){t[r]=Math.max(Math.min(t[r],i[1]),i[0])}function F9(t,r){return t>=r[0]&&t<=r[1]}function F8(t,r){return r[1]===r[0]?.5:(t-r[0])/(r[1]-r[0])}function F7(t,r){return t*(r[1]-r[0])+r[0]}var ze=function(t){function r(r){var i=t.call(this,r)||this;i.type="ordinal";var s=i.getSetting("ordinalMeta");return!s&&(s=new F1({})),Sb(s)&&(s=new F1({categories:Sf(s,function(t){return SC(t)?t.value:t})})),i._ordinalMeta=s,i._extent=i.getSetting("extent")||[0,s.categories.length-1],i}return wU(r,t),r.prototype.parse=function(t){return null==t?NaN:SS(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},r.prototype.contain=function(t){return F9(t=this.parse(t),this._extent)&&null!=this._ordinalMeta.categories[t]},r.prototype.normalize=function(t){return F8(t=this._getTickNumber(this.parse(t)),this._extent)},r.prototype.scale=function(t){return t=Math.round(F7(t,this._extent)),this.getRawOrdinalNumber(t)},r.prototype.getTicks=function(){for(var t=[],r=this._extent,i=r[0];i<=r[1];)t.push({value:i}),i++;return t},r.prototype.getMinorTicks=function(t){},r.prototype.setSortInfo=function(t){if(null==t){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=t.ordinalNumbers,i=this._ordinalNumbersByTick=[],s=this._ticksByOrdinalNumber=[],u=0,c=this._ordinalMeta.categories.length,h=Math.min(c,r.length);u<h;++u){var p=r[u];i[u]=p,s[p]=u}for(var f=0;u<c;++u){for(;null!=s[f];)f++;i.push(f),s[f]=u}},r.prototype._getTickNumber=function(t){var r=this._ticksByOrdinalNumber;return r&&t>=0&&t<r.length?r[t]:t},r.prototype.getRawOrdinalNumber=function(t){var r=this._ordinalNumbersByTick;return r&&t>=0&&t<r.length?r[t]:t},r.prototype.getLabel=function(t){if(!this.isBlank()){var r=this.getRawOrdinalNumber(t.value),i=this._ordinalMeta.categories[r];return null==i?"":i+""}},r.prototype.count=function(){return this._extent[1]-this._extent[0]+1},r.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},r.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},r.prototype.getOrdinalMeta=function(){return this._ordinalMeta},r.prototype.calcNiceTicks=function(){},r.prototype.calcNiceExtent=function(){},r.type="ordinal",r}(FQ);FQ.registerClass(ze);var zt=TE,zn=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return wU(r,t),r.prototype.parse=function(t){return t},r.prototype.contain=function(t){return F9(t,this._extent)},r.prototype.normalize=function(t){return F8(t,this._extent)},r.prototype.scale=function(t){return F7(t,this._extent)},r.prototype.setExtent=function(t,r){var i=this._extent;!isNaN(t)&&(i[0]=parseFloat(t)),!isNaN(r)&&(i[1]=parseFloat(r))},r.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1]),this.setExtent(r[0],r[1])},r.prototype.getInterval=function(){return this._interval},r.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=TD(t)+2},r.prototype.getTicks=function(t){var r=this._interval,i=this._extent,s=this._niceExtent,u=this._intervalPrecision,c=[];if(!r)return c;i[0]<s[0]&&(t?c.push({value:zt(s[0]-r,u)}):c.push({value:i[0]}));for(var h=s[0];h<=s[1]&&(c.push({value:h}),(h=zt(h+r,u))!==c[c.length-1].value);){;if(c.length>1e4)return[]}var p=c.length?c[c.length-1].value:s[1];return i[1]>p&&(t?c.push({value:zt(p+r,u)}):c.push({value:i[1]})),c},r.prototype.getMinorTicks=function(t){for(var r=this.getTicks(!0),i=[],s=this.getExtent(),u=1;u<r.length;u++){for(var c=r[u],h=r[u-1],p=0,f=[],v=(c.value-h.value)/t;p<t-1;){var y=zt(h.value+(p+1)*v);y>s[0]&&y<s[1]&&f.push(y),p++}i.push(f)}return i},r.prototype.getLabel=function(t,r){if(null==t)return"";var i=r&&r.precision;return null==i?i=TD(t.value)||0:"auto"===i&&(i=this._intervalPrecision),PJ(zt(t.value,i,!0))},r.prototype.calcNiceTicks=function(t,r,i){t=t||5;var s,u,c,h,p,f,v,y,x=this._extent,_=x[1]-x[0];if(!!isFinite(_)){_<0&&(_=-_,x.reverse());var b=(s=x,u=t,c=r,h=i,p={},f=s[1]-s[0],v=p.interval=TG(f/u,!0),null!=c&&v<c&&(v=p.interval=c),null!=h&&v>h&&(v=p.interval=h),y=p.intervalPrecision=function(t){return TD(t)+2}(v),function(t,r){isFinite(t[0])||(t[0]=r[0]),isFinite(t[1])||(t[1]=r[1]),F6(t,0,r),F6(t,1,r),t[0]>t[1]&&(t[0]=t[1])}(p.niceTickExtent=[TE(Math.ceil(s[0]/v)*v,y),TE(Math.floor(s[1]/v)*v,y)],s),p);this._intervalPrecision=b.intervalPrecision,this._interval=b.interval,this._niceExtent=b.niceTickExtent}},r.prototype.calcNiceExtent=function(t){var r=this._extent;if(r[0]===r[1]){if(0!==r[0]){var i=Math.abs(r[0]);t.fixMax||(r[1]+=i/2),r[0]-=i/2}else r[1]=1}!isFinite(r[1]-r[0])&&(r[0]=0,r[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var s=this._interval;!t.fixMin&&(r[0]=zt(Math.floor(r[0]/s)*s)),!t.fixMax&&(r[1]=zt(Math.ceil(r[1]/s)*s))},r.prototype.setNiceExtent=function(t,r){this._niceExtent=[t,r]},r.type="interval",r}(FQ);FQ.registerClass(zn);var zr="undefined"!=typeof Float32Array,zi=zr?Float32Array:Array;function za(t){return Sb(t)?zr?new Float32Array(t):t:new zi(t)}var zo="__ec_stack_";function zs(t){return t.get("stack")||zo+t.seriesIndex}function zl(t){return t.dim+t.index}function zu(t,r){var i=[];return r.eachSeriesByType(t,function(t){zf(t)&&i.push(t)}),i}function zc(t){var r=function(t){var r={};Sp(t,function(t){var i=t.coordinateSystem.getBaseAxis();if("time"===i.type||"value"===i.type)for(var s=t.getData(),u=i.dim+"_"+i.index,c=s.getDimensionIndex(s.mapDimension(i.dim)),h=s.getStore(),p=0,f=h.count();p<f;++p){var v=h.get(c,p);r[u]?r[u].push(v):r[u]=[v]}});var i={};for(var s in r)if(r.hasOwnProperty(s)){var u=r[s];if(u){u.sort(function(t,r){return t-r});for(var c=null,h=1;h<u.length;++h){var p=u[h]-u[h-1];p>0&&(c=null===c?p:Math.min(c,p))}i[s]=c}}return i}(t),i=[];return Sp(t,function(t){var s,u=t.coordinateSystem.getBaseAxis(),c=u.getExtent();if("category"===u.type)s=u.getBandWidth();else if("value"===u.type||"time"===u.type){var h=r[u.dim+"_"+u.index],p=Math.abs(c[1]-c[0]),f=u.scale.getExtent(),v=Math.abs(f[1]-f[0]);s=h?p/v*h:p}else{var y=t.getData();s=Math.abs(c[1]-c[0])/y.count()}var x=TT(t.get("barWidth"),s),_=TT(t.get("barMaxWidth"),s),b=TT(t.get("barMinWidth")||(zg(t)?.5:1),s),w=t.get("barGap"),S=t.get("barCategoryGap");i.push({bandWidth:s,barWidth:x,barMaxWidth:_,barMinWidth:b,barGap:w,barCategoryGap:S,axisKey:zl(u),stackId:zs(t)})}),zh(i)}function zh(t){var r={};Sp(t,function(t,i){var s=t.axisKey,u=t.bandWidth,c=r[s]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},h=c.stacks;r[s]=c;var p=t.stackId;!h[p]&&c.autoWidthCount++,h[p]=h[p]||{width:0,maxWidth:0};var f=t.barWidth;f&&!h[p].width&&(h[p].width=f,f=Math.min(c.remainedWidth,f),c.remainedWidth-=f);var v=t.barMaxWidth;v&&(h[p].maxWidth=v);var y=t.barMinWidth;y&&(h[p].minWidth=y);var x=t.barGap;null!=x&&(c.gap=x);var _=t.barCategoryGap;null!=_&&(c.categoryGap=_)});var i={};return Sp(r,function(t,r){i[r]={};var s,u=t.stacks,c=t.bandWidth,h=t.categoryGap;null==h&&(h=Math.max(35-4*Sy(u).length,15)+"%");var p=TT(h,c),f=TT(t.gap,1),v=t.remainedWidth,y=t.autoWidthCount,x=(v-p)/(y+(y-1)*f);x=Math.max(x,0),Sp(u,function(t){var r=t.maxWidth,i=t.minWidth;if(t.width){var s=t.width;r&&(s=Math.min(s,r)),i&&(s=Math.max(s,i)),t.width=s,v-=s+f*s,y--}else{var s=x;r&&r<s&&(s=Math.min(r,v)),i&&i>s&&(s=i),s!==x&&(t.width=s,v-=s+f*s,y--)}}),x=Math.max(x=(v-p)/(y+(y-1)*f),0);var _=0;Sp(u,function(t,r){!t.width&&(t.width=x),s=t,_+=t.width*(1+f)}),s&&(_-=s.width*f);var b=-_/2;Sp(u,function(t,s){i[r][s]=i[r][s]||{bandWidth:c,offset:b,width:t.width},b+=t.width*(1+f)})}),i}function zd(t,r){var i=zu(t,r),s=zc(i);Sp(i,function(t){var r=t.getData(),i=t.coordinateSystem.getBaseAxis(),u=zs(t),c=s[zl(i)][u],h=c.offset,p=c.width;r.setLayout({bandWidth:c.bandWidth,offset:h,size:p})})}function zp(t){return{seriesType:t,plan:kA(),reset:function(t){if(!!zf(t)){var r=t.getData(),i=t.coordinateSystem,s=i.getBaseAxis(),u=i.getOtherAxis(s),c=r.getDimensionIndex(r.mapDimension(u.dim)),h=r.getDimensionIndex(r.mapDimension(s.dim)),p=t.get("showBackground",!0),f=r.mapDimension(u.dim),v=r.getCalculationInfo("stackResultDimension"),y=FZ(r,f)&&!!r.getCalculationInfo("stackedOnSeries"),x=u.isHorizontal(),_=function(t,r){var i=r.model.get("startValue");return!i&&(i=0),r.toGlobalCoord(r.dataToCoord("log"===r.type?i>0?i:1:i))}(s,u),b=zg(t),w=t.get("barMinHeight")||0,S=v&&r.getDimensionIndex(v),M=r.getLayout("size"),A=r.getLayout("offset");return{progress:function(t,r){for(var s,u=t.count,f=b&&za(3*u),v=b&&p&&za(3*u),C=b&&za(u),T=i.master.getRect(),I=x?T.width:T.height,D=r.getStore(),P=0;null!=(s=t.next());){var R=D.get(y?S:c,s),L=D.get(h,s),k=_,O=void 0;y&&(O=+R-D.get(c,s));var B=void 0,N=void 0,F=void 0,z=void 0;if(x){var U=i.dataToPoint([R,L]);if(y){var H=i.dataToPoint([O,L]);k=H[0]}B=k,N=U[1]+A,F=U[0]-k,z=M,Math.abs(F)<w&&(F=(F<0?-1:1)*w)}else{var U=i.dataToPoint([L,R]);if(y){var H=i.dataToPoint([L,O]);k=H[1]}B=U[0]+A,N=k,F=M,Math.abs(z=U[1]-k)<w&&(z=(z<=0?-1:1)*w)}b?(f[P]=B,f[P+1]=N,f[P+2]=x?F:z,v&&(v[P]=x?T.x:B,v[P+1]=x?N:T.y,v[P+2]=I),C[s]=s):r.setItemLayout(s,{x:B,y:N,width:F,height:z}),P+=3}b&&r.setLayout({largePoints:f,largeDataIndices:C,largeBackgroundPoints:v,valueAxisHorizontal:x})}}}}}}function zf(t){return t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type}function zg(t){return t.pipelineContext&&t.pipelineContext.large}var zm=function(t,r,i,s){for(;i<s;){var u=i+s>>>1;t[u][1]<r?i=u+1:s=u}return i},zv=function(t){function r(r){var i=t.call(this,r)||this;return i.type="time",i}return wU(r,t),r.prototype.getLabel=function(t){var r=this.getSetting("useUTC");return PL(t.value,PE[function(t){switch(t){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}(PR(this._minLevelUnit))]||PE.second,r,this.getSetting("locale"))},r.prototype.getFormattedLabel=function(t,r,i){var s=this.getSetting("useUTC");return function(t,r,i,s,u){var c=null;if(SS(i))c=i;else if(Sw(i))c=i(t.value,r,{level:t.level});else{var h=So({},PC);if(t.level>0)for(var p=0;p<PI.length;++p)h[PI[p]]="{primary|"+h[PI[p]]+"}";var f=i?!1===i.inherit?i:Ss(i,h):h,v=Pk(t.value,u);if(f[v])c=f[v];else if(f.inherit){for(var y=PD.indexOf(v),p=y-1;p>=0;--p)if(f[v]){c=f[v];break}c=c||h.none}if(Sb(c)){var x=null==t.level?0:t.level>=0?t.level:c.length+t.level;x=Math.min(x,c.length-1),c=c[x]}}return PL(new Date(t.value),c,u,s)}(t,r,i,this.getSetting("locale"),s)},r.prototype.getTicks=function(){var t=this._interval,r=this._extent,i=[];if(!t)return i;i.push({value:r[0],level:0});var s=this.getSetting("useUTC"),u=function(t,r,i,s){for(var u=0,c=[],h=[],p=0,f=0,v=0;v<PD.length&&u++<1e4;++v){var y,x=PR(PD[v]);if((y=PD[v])===PR(y)){if(!function(t,u,c){var h=[],p=!u.length;if(!function(t,r,i,s){var u=Tz(r),c=Tz(i),h=function(t){return PO(u,t,s)===PO(c,t,s)},p=function(){return h("year")},f=function(){return p()&&h("month")},v=function(){return f()&&h("day")},y=function(){return v()&&h("hour")},x=function(){return y()&&h("minute")},_=function(){return x()&&h("second")};switch(t){case"year":return p();case"month":return f();case"day":return v();case"hour":return y();case"minute":return x();case"second":return _();case"millisecond":return _()&&h("millisecond")}}(PR(t),s[0],s[1],i)){p&&(u=[{value:function(t,r,i){var s=new Date(t);switch(PR(r)){case"year":case"month":s[PV(i)](0);case"day":s[PW(i)](1);case"hour":s[Pj(i)](0);case"minute":s[PX(i)](0);case"second":s[PY(i)](0),s[P$(i)](0)}return s.getTime()}(new Date(s[0]),t,i)},{value:s[1]}]);for(var f=0;f<u.length-1;f++){var v,y,x,_,b=u[f].value,w=u[f+1].value;if(b!==w){var S=void 0,M=void 0,A=void 0,C=!1;switch(t){case"year":S=Math.max(1,Math.round(r/PM/365)),M=PB(i),A=i?"setUTCFullYear":"setFullYear";break;case"half-year":case"quarter":case"month":;S=(v=r/(30*PM))>6?6:v>3?3:v>2?2:1,M=PN(i),A=PV(i);break;case"week":case"half-week":case"day":;x=0,S=(y=r/PM)>16?16:y>7.5?7:y>3.5?4:y>1.5?2:1,M=PF(i),A=PW(i),C=!0;break;case"half-day":case"quarter-day":case"hour":;S=(_=r/PS)>12?12:_>6?6:_>3.5?4:_>2?2:1,M=Pz(i),A=Pj(i);break;case"minute":S=zx(r,!0),M=PU(i),A=PX(i);break;case"second":S=zx(r,!1),M=PH(i),A=PY(i);break;case"millisecond":S=TG(r,!0),M=PG(i),A=P$(i)}!function(t,r,i,u,c,h,p){for(var f=new Date(r),v=r,y=f[u]();v<i&&v<=s[1];)p.push({value:v}),y+=t,f[c](y),v=f.getTime();p.push({value:v,notAdd:!0})}(S,b,w,M,A,0,h),"year"===t&&c.length>1&&0===f&&c.unshift({value:c[0].value-S})}}for(var f=0;f<h.length;f++)c.push(h[f]);}}(PD[v],c[c.length-1]||[],h),x!==(PD[v+1]?PR(PD[v+1]):null)){if(h.length){f=p,h.sort(function(t,r){return t.value-r.value});for(var _=[],b=0;b<h.length;++b){var w=h[b].value;(0===b||h[b-1].value!==w)&&(_.push(h[b]),w>=s[0]&&w<=s[1]&&p++)}var S=(s[1]-s[0])/r;if(p>1.5*S&&f>S/1.5)break;if(c.push(_),p>S||t===PD[v])break}h=[]}}}for(var M=Sm(Sf(c,function(t){return Sm(t,function(t){return t.value>=s[0]&&t.value<=s[1]&&!t.notAdd})}),function(t){return t.length>0}),A=[],C=M.length-1,v=0;v<M.length;++v){for(var T=M[v],I=0;I<T.length;++I)A.push({value:T[I].value,level:C-v})}A.sort(function(t,r){return t.value-r.value});for(var D=[],v=0;v<A.length;++v)(0===v||A[v].value!==A[v-1].value)&&D.push(A[v]);return D}(this._minLevelUnit,this._approxInterval,s,r);return(i=i.concat(u)).push({value:r[1],level:0}),i},r.prototype.calcNiceExtent=function(t){var r=this._extent;if(r[0]===r[1]&&(r[0]-=PM,r[1]+=PM),r[1]===-1/0&&r[0]===1/0){var i=new Date;r[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),r[0]=r[1]-PM}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},r.prototype.calcNiceTicks=function(t,r,i){t=t||10;var s=this._extent,u=s[1]-s[0];this._approxInterval=u/t,null!=r&&this._approxInterval<r&&(this._approxInterval=r),null!=i&&this._approxInterval>i&&(this._approxInterval=i);var c=zy.length,h=Math.min(zm(zy,this._approxInterval,0,c),c-1);this._interval=zy[h][1],this._minLevelUnit=zy[Math.max(h-1,0)][0]},r.prototype.parse=function(t){return SA(t)?t:+Tz(t)},r.prototype.contain=function(t){return F9(this.parse(t),this._extent)},r.prototype.normalize=function(t){return F8(this.parse(t),this._extent)},r.prototype.scale=function(t){return F7(t,this._extent)},r.type="time",r}(zn),zy=[["second",1e3],["minute",Pw],["hour",PS],["quarter-day",6*PS],["half-day",12*PS],["day",1.2*PM],["half-week",3.5*PM],["week",7*PM],["month",31*PM],["quarter",95*PM],["half-year",PA/2],["year",PA]];function zx(t,r){return(t/=r?Pw:1e3)>30?30:t>20?20:t>15?15:t>10?10:t>5?5:t>2?2:1}FQ.registerClass(zv);var z_=FQ.prototype,zb=zn.prototype,zw=Math.floor,zS=Math.ceil,zM=Math.pow,zA=Math.log,zC=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new zn,r._interval=0,r}return wU(r,t),r.prototype.getTicks=function(t){var r=this._originalScale,i=this._extent,s=r.getExtent();return Sf(zb.getTicks.call(this,t),function(t){var r=t.value,u=TE(zM(this.base,r));return u=r===i[0]&&this._fixMin?function(t,r){return TE(t,TD(r))}(u,s[0]):u,{value:u=r===i[1]&&this._fixMax?function(t,r){return TE(t,TD(r))}(u,s[1]):u}},this)},r.prototype.setExtent=function(t,r){var i=zA(this.base);t=zA(Math.max(0,t))/i,r=zA(Math.max(0,r))/i,zb.setExtent.call(this,t,r)},r.prototype.getExtent=function(){var t=this.base,r=z_.getExtent.call(this);r[0]=zM(t,r[0]),r[1]=zM(t,r[1]);var i=this._originalScale.getExtent();return this._fixMin&&(r[0]=function(t,r){return TE(t,TD(r))}(r[0],i[0])),this._fixMax&&(r[1]=function(t,r){return TE(t,TD(r))}(r[1],i[1])),r},r.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var r=this.base;t[0]=zA(t[0])/zA(r),t[1]=zA(t[1])/zA(r),z_.unionExtent.call(this,t)},r.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},r.prototype.calcNiceTicks=function(t){t=t||10;var r=this._extent,i=r[1]-r[0];if(i!==1/0&&!(i<=0)){var s=TU(i);for(t/i*s<=.5&&(s*=10);!isNaN(s)&&1>Math.abs(s)&&Math.abs(s)>0;)s*=10;var u=[TE(zS(r[0]/s)*s),TE(zw(r[1]/s)*s)];this._interval=s,this._niceExtent=u}},r.prototype.calcNiceExtent=function(t){zb.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},r.prototype.parse=function(t){return t},r.prototype.contain=function(t){return F9(t=zA(t)/zA(this.base),this._extent)},r.prototype.normalize=function(t){return F8(t=zA(t)/zA(this.base),this._extent)},r.prototype.scale=function(t){return t=F7(t,this._extent),zM(this.base,t)},r.type="log",r}(FQ),zT=zC.prototype;function zE(t,r){return TE(t,TD(r))}zT.getMinorTicks=zb.getMinorTicks,zT.getLabel=zb.getLabel,FQ.registerClass(zC);var zI=function(){function t(t,r,i){this._prepareParams(t,r,i)}return t.prototype._prepareParams=function(t,r,i){i[1]<i[0]&&(i=[NaN,NaN]),this._dataMin=i[0],this._dataMax=i[1];var s=this._isOrdinal="ordinal"===t.type;this._needCrossZero="interval"===t.type&&r.getNeedCrossZero&&r.getNeedCrossZero();var u=r.get("min",!0);null==u&&(u=r.get("startValue",!0));var c=this._modelMinRaw=u;Sw(c)?this._modelMinNum=zL(t,c({min:i[0],max:i[1]})):"dataMin"!==c&&(this._modelMinNum=zL(t,c));var h=this._modelMaxRaw=r.get("max",!0);if(Sw(h)?this._modelMaxNum=zL(t,h({min:i[0],max:i[1]})):"dataMax"!==h&&(this._modelMaxNum=zL(t,h)),s)this._axisDataLen=r.getCategories().length;else{var p=r.get("boundaryGap"),f=Sb(p)?p:[p||0,p||0];"boolean"==typeof f[0]||"boolean"==typeof f[1]?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Tr(f[0],1),Tr(f[1],1)]}},t.prototype.calculate=function(){var t,r,i=this._isOrdinal,s=this._dataMin,u=this._dataMax,c=this._axisDataLen,h=this._boundaryGapInner,p=i?null:u-s||Math.abs(s),f="dataMin"===this._modelMinRaw?s:this._modelMinNum,v="dataMax"===this._modelMaxRaw?u:this._modelMaxNum,y=null!=f,x=null!=v;null==f&&(f=i?c?0:NaN:s-h[0]*p),null==v&&(v=i?c?c-1:NaN:u+h[1]*p),null!=f&&isFinite(f)||(f=NaN),null!=v&&isFinite(v)||(v=NaN);var _=(t=f)!=t||(r=v)!=r||i&&!c;this._needCrossZero&&(f>0&&v>0&&!y&&(f=0),f<0&&v<0&&!x&&(v=0));var b=this._determinedMin,w=this._determinedMax;return null!=b&&(f=b,y=!0),null!=w&&(v=w,x=!0),{min:f,max:v,minFixed:y,maxFixed:x,isBlank:_}},t.prototype.modifyDataMinMax=function(t,r){this[zP[t]]=r},t.prototype.setDeterminedMinMax=function(t,r){var i=zD[t];this[i]=r},t.prototype.freeze=function(){this.frozen=!0},t}(),zD={min:"_determinedMin",max:"_determinedMax"},zP={min:"_dataMin",max:"_dataMax"};function zR(t,r,i){var s=t.rawExtentInfo;return s?s:(s=new zI(t,r,i),t.rawExtentInfo=s,s)}function zL(t,r){var i;return null==r?null:(i=r)!=i?NaN:t.parse(r)}function zk(t,r){var i=t.type,s=zR(t,r,t.getExtent()).calculate();t.setBlank(s.isBlank);var u=s.min,c=s.max,h=r.ecModel;if(h&&"time"===i){var p=zu("bar",h),f=!1;if(Sp(p,function(t){f=f||t.getBaseAxis()===r.axis}),f){var v=function(t,r,i,s){var u=i.axis.getExtent(),c=u[1]-u[0],h=function(t,r,i){if(t&&r){var s=t[zl(r)];return s}}(s,i.axis);if(void 0===h)return{min:t,max:r};var p=1/0;Sp(h,function(t){p=Math.min(t.offset,p)});var f=-1/0;Sp(h,function(t){f=Math.max(t.offset+t.width,f)});var v=(p=Math.abs(p))+(f=Math.abs(f)),y=r-t,x=y/(1-(p+f)/c)-y;return r+=f/v*x,{min:t-=p/v*x,max:r}}(u,c,r,zc(p));u=v.min,c=v.max}}return{extent:[u,c],fixMin:s.minFixed,fixMax:s.maxFixed}}function zO(t,r){var i=zk(t,r),s=i.extent,u=r.get("splitNumber");t instanceof zC&&(t.base=r.get("logBase"));var c=t.type,h=r.get("interval"),p="interval"===c||"time"===c;t.setExtent(s[0],s[1]),t.calcNiceExtent({splitNumber:u,fixMin:i.fixMin,fixMax:i.fixMax,minInterval:p?r.get("minInterval"):null,maxInterval:p?r.get("maxInterval"):null}),null!=h&&t.setInterval&&t.setInterval(h)}function zB(t,r){if(r=r||t.get("type"))switch(r){case"category":return new ze({ordinalMeta:t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),extent:[1/0,-1/0]});case"time":return new zv({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new(FQ.getClass(r)||zn)}}function zN(t){var r,i,s,u=t.getLabelModel().get("formatter"),c="category"===t.type?t.scale.getExtent()[0]:null;if("time"===t.scale.type){;return r=u,function(i,s){return t.scale.getFormattedLabel(i,s,r)}}if(SS(u)){;return i=u,function(r){var s=t.scale.getLabel(r);return i.replace("{value}",null!=s?s:"")}}if(!Sw(u))return function(r){return t.scale.getLabel(r)};else{;return s=u,function(r,i){return null!=c&&(i=r.value-c),s(zF(t,r),i,null!=r.level?{level:r.level}:null)}}}function zF(t,r){return"category"===t.type?t.scale.getLabel(r):r.value}function zz(t){var r=t.get("interval");return null==r?"auto":r}function zU(t){return"category"===t.type&&0===zz(t.getLabelModel())}function zH(t,r){var i={};return Sp(t.mapDimensionsAll(r),function(r){i[FK(t,r)]=!0}),Sy(i)}var zG=function(){function t(){}return t.prototype.getNeedCrossZero=function(){return!this.option.scale},t.prototype.getCoordSysModel=function(){},t}();function zV(t){return Fq(null,t)}var zW={isDimensionStacked:FZ,enableDataStack:FJ,getStackedDimension:FK};function zj(t,r){var i=r;!(r instanceof Pp)&&(i=new Pp(r));var s=zB(i);return s.setExtent(t[0],t[1]),zO(s,i),s}function zX(t){Sh(t,zG)}function zY(t,r){return D2(t,null,null,"normal"!==(r=r||{}).state)}function z$(t,r){return 1e-8>Math.abs(t-r)}function zJ(t,r,i){var s=0,u=t[0];if(!u)return!1;for(var c=1;c<t.length;c++){var h=t[c];s+=Ig(u[0],u[1],h[0],h[1],r,i),u=h}var p=t[0];return(!z$(u[0],p[0])||!z$(u[1],p[1]))&&(s+=Ig(u[0],u[1],p[0],p[1],r,i)),0!==s}var zZ=[];function zK(t,r){for(var i=0;i<t.length;i++)Md(t[i],t[i],r)}function zq(t,r,i,s){for(var u=0;u<t.length;u++){var c=t[u];s&&(c=s.project(c)),c&&isFinite(c[0])&&isFinite(c[1])&&(Mp(r,r,c),Mf(i,i,c))}}var zQ=function(){function t(t){this.name=t}return t.prototype.setCenter=function(t){this._center=t},t.prototype.getCenter=function(){var t=this._center;return!t&&(t=this._center=this.calcCenter()),t},t}(),z0=function(t,r){this.type="polygon",this.exterior=t,this.interiors=r},z1=function(t){this.type="linestring",this.points=t},z2=function(t){function r(r,i,s){var u=t.call(this,r)||this;return u.type="geoJSON",u.geometries=i,u._center=s&&[s[0],s[1]],u}return wU(r,t),r.prototype.calcCenter=function(){for(var t,r=this.geometries,i=0,s=0;s<r.length;s++){var u=r[s],c=u.exterior,h=c&&c.length;h>i&&(t=u,i=h)}if(t)return function(t){for(var r=0,i=0,s=0,u=t.length,c=t[u-1][0],h=t[u-1][1],p=0;p<u;p++){var f=t[p][0],v=t[p][1],y=c*v-f*h;r+=y,i+=(c+f)*y,s+=(h+v)*y,c=f,h=v}return r?[i/r/3,s/r/3,r]:[t[0][0]||0,t[0][1]||0]}(t.exterior);var p=this.getBoundingRect();return[p.x+p.width/2,p.y+p.height/2]},r.prototype.getBoundingRect=function(t){var r=this._rect;if(r&&!t)return r;var i=[1/0,1/0],s=[-1/0,-1/0];return Sp(this.geometries,function(r){"polygon"===r.type?zq(r.exterior,i,s,t):Sp(r.points,function(r){zq(r,i,s,t)})}),!(isFinite(i[0])&&isFinite(i[1])&&isFinite(s[0])&&isFinite(s[1]))&&(i[0]=i[1]=s[0]=s[1]=0),r=new M4(i[0],i[1],s[0]-i[0],s[1]-i[1]),!t&&(this._rect=r),r},r.prototype.contain=function(t){var r=this.getBoundingRect(),i=this.geometries;if(!r.contain(t[0],t[1]))return!1;u:for(var s=0,u=i.length;s<u;s++){var c=i[s];if("polygon"===c.type){var h=c.exterior,p=c.interiors;if(zJ(h,t[0],t[1])){for(var f=0;f<(p?p.length:0);f++)if(zJ(p[f],t[0],t[1]))continue u;return!0}}}return!1},r.prototype.transformTo=function(t,r,i,s){var u=this.getBoundingRect(),c=u.width/u.height;i?!s&&(s=i/c):i=c*s;for(var h=new M4(t,r,i,s),p=u.calculateTransform(h),f=this.geometries,v=0;v<f.length;v++){var y=f[v];"polygon"===y.type?(zK(y.exterior,p),Sp(y.interiors,function(t){zK(t,p)})):Sp(y.points,function(t){zK(t,p)})}(u=this._rect).copy(h),this._center=[u.x+u.width/2,u.y+u.height/2]},r.prototype.cloneShallow=function(t){null==t&&(t=this.name);var i=new r(t,this.geometries,this._center);return i._rect=this._rect,i.transformTo=null,i},r}(zQ),z3=function(t){function r(r,i){var s=t.call(this,r)||this;return s.type="geoSVG",s._elOnlyForCalculate=i,s}return wU(r,t),r.prototype.calcCenter=function(){for(var t=this._elOnlyForCalculate,r=t.getBoundingRect(),i=[r.x+r.width/2,r.y+r.height/2],s=MG(zZ),u=t;u&&!u.isGeoSVGGraphicRoot;)MW(s,u.getLocalTransform(),s),u=u.parent;return M$(s,s),Md(i,i,s),i},r}(zQ);function z5(t,r,i){for(var s=0;s<t.length;s++)t[s]=z4(t[s],r[s],i)}function z4(t,r,i){for(var s=[],u=r[0],c=r[1],h=0;h<t.length;h+=2){var p=t.charCodeAt(h)-64,f=t.charCodeAt(h+1)-64;f=f>>1^-(1&f),p=(p>>1^-(1&p))+u,f+=c,u=p,c=f,s.push([p/i,f/i])}return s}function z6(t,r){return Sf(Sm((t=function(t){if(!t.UTF8Encoding)return t;var r=t.UTF8Scale;return null==r&&(r=1024),Sp(t.features,function(t){var i=t.geometry,s=i.encodeOffsets,u=i.coordinates;if(!!s)switch(i.type){case"LineString":i.coordinates=z4(u,s,r);break;case"Polygon":case"MultiLineString":z5(u,s,r);break;case"MultiPolygon":Sp(u,function(t,i){return z5(t,s[i],r)})}}),t.UTF8Encoding=!1,t}(t)).features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var i=t.properties,s=t.geometry,u=[];switch(s.type){case"Polygon":var c=s.coordinates;u.push(new z0(c[0],c.slice(1)));break;case"MultiPolygon":Sp(s.coordinates,function(t){t[0]&&u.push(new z0(t[0],t.slice(1)))});break;case"LineString":u.push(new z1([s.coordinates]));break;case"MultiLineString":u.push(new z1(s.coordinates))}var h=new z2(i[r||"name"],u,i.cp);return h.properties=i,h})}function z9(t,r,i,s,u,c,h,p){return new I0({style:{text:t,font:r,align:i,verticalAlign:s,padding:u,rich:c,overflow:h?"truncate":null,lineHeight:p}}).getBoundingRect()}var z8=T7();function z7(t,r){var i=Sf(r,function(r){return t.scale.parse(r)});return"time"===t.type&&i.length>0&&(i.sort(),i.unshift(i[0]),i.push(i[i.length-1])),i}function Ue(t,r){var i,s,u=Ut(t,"labels"),c=zz(r),h=Un(u,c);return h?h:(Sw(c)?i=Ua(t,c):(s="auto"===c?function(t){var r=z8(t).autoInterval;return null!=r?r:z8(t).autoInterval=t.calculateCategoryInterval()}(t):c,i=Ui(t,s)),Ur(u,c,{labels:i,labelCategoryInterval:s}))}function Ut(t,r){return z8(t)[r]||(z8(t)[r]=[])}function Un(t,r){for(var i=0;i<t.length;i++)if(t[i].key===r)return t[i].value}function Ur(t,r,i){return t.push({key:r,value:i}),i}function Ui(t,r,i){var s=zN(t),u=t.scale,c=u.getExtent(),h=t.getLabelModel(),p=[],f=Math.max((r||0)+1,1),v=c[0],y=u.count();0!==v&&f>1&&y/f>2&&(v=Math.round(Math.ceil(v/f)*f));var x=zU(t),_=h.get("showMinLabel")||x,b=h.get("showMaxLabel")||x;_&&v!==c[0]&&S(c[0]);for(var w=v;w<=c[1];w+=f)S(w);function S(t){var r={value:t};p.push(i?t:{formattedLabel:s(r),rawLabel:u.getLabel(r),tickValue:t})}return b&&w-f!==c[1]&&S(c[1]),p}function Ua(t,r,i){var s=t.scale,u=zN(t),c=[];return Sp(s.getTicks(),function(t){var h=s.getLabel(t),p=t.value;r(t.value,h)&&c.push(i?p:{formattedLabel:u(t),rawLabel:h,tickValue:p})}),c}var Uo=[0,1],Us=function(){function t(t,r,i){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=i||[0,0]}return t.prototype.contain=function(t){var r=this._extent,i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return t>=i&&t<=s},t.prototype.containData=function(t){return this.scale.contain(t)},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.getPixelPrecision=function(t){return TR(t||this.scale.getExtent(),this._extent)},t.prototype.setExtent=function(t,r){var i=this._extent;i[0]=t,i[1]=r},t.prototype.dataToCoord=function(t,r){var i=this._extent,s=this.scale;return t=s.normalize(t),this.onBand&&"ordinal"===s.type&&Ul(i=i.slice(),s.count()),TC(t,Uo,i,r)},t.prototype.coordToData=function(t,r){var i=this._extent,s=this.scale;this.onBand&&"ordinal"===s.type&&Ul(i=i.slice(),s.count());var u=TC(t,i,Uo,r);return this.scale.scale(u)},t.prototype.pointToData=function(t,r){},t.prototype.getTicksCoords=function(t){var r,i,s,u=(t=t||{}).tickModel||this.getTickModel();var c=(r=this,i=u,(s=r.getTickModel().get("customValues"))?{ticks:z7(r,s)}:"category"===r.type?function(t,r){var i,s,u=Ut(t,"ticks"),c=zz(r),h=Un(u,c);if(h)return h;if((!r.get("show")||t.scale.isBlank())&&(i=[]),Sw(c))i=Ua(t,c,!0);else if("auto"===c){var p=Ue(t,t.getLabelModel());s=p.labelCategoryInterval,i=Sf(p.labels,function(t){return t.tickValue})}else i=Ui(t,s=c,!0);return Ur(u,c,{ticks:i,tickCategoryInterval:s})}(r,i):{ticks:Sf(r.scale.getTicks(),function(t){return t.value})}).ticks,h=Sf(c,function(t){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(t):t),tickValue:t}},this);return function(t,r,i,s){var u,c,h=r.length;if(!!t.onBand&&!i&&!!h){var p=t.getExtent();if(1===h)r[0].coord=p[0],u=r[1]={coord:p[1]};else{var f=r[h-1].tickValue-r[0].tickValue,v=(r[h-1].coord-r[0].coord)/f;Sp(r,function(t){t.coord-=v/2}),c=1+t.scale.getExtent()[1]-r[h-1].tickValue,u={coord:r[h-1].coord+v*c},r.push(u)}var y=p[0]>p[1];x(r[0].coord,p[0])&&(s?r[0].coord=p[0]:r.shift()),s&&x(p[0],r[0].coord)&&r.unshift({coord:p[0]}),x(p[1],u.coord)&&(s?u.coord=p[1]:r.pop()),s&&x(u.coord,p[1])&&r.push({coord:p[1]})}function x(t,r){return t=TE(t),r=TE(r),y?t>r:t<r}}(this,h,u.get("alignWithLabel"),t.clamp),h},t.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var t=this.model.getModel("minorTick").get("splitNumber");return!(t>0&&t<100)&&(t=5),Sf(this.scale.getMinorTicks(t),function(t){return Sf(t,function(t){return{coord:this.dataToCoord(t),tickValue:t}},this)},this)},t.prototype.getViewLabels=function(){return function(t){var r=t.getLabelModel().get("customValues");if(r){var i=zN(t);return{labels:z7(t,r).map(function(r){var s={value:r};return{formattedLabel:i(s),rawLabel:t.scale.getLabel(s),tickValue:r}})}}return"category"===t.type?function(t){var r=t.getLabelModel(),i=Ue(t,r);return!r.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:i.labelCategoryInterval}:i}(t):function(t){var r=t.scale.getTicks(),i=zN(t);return{labels:Sf(r,function(r,s){return{level:r.level,formattedLabel:i(r,s),rawLabel:t.scale.getLabel(r),tickValue:r.value}})}}(t)}(this).labels},t.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},t.prototype.getTickModel=function(){return this.model.getModel("axisTick")},t.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),i=r[1]-r[0]+(this.onBand?1:0);return 0===i&&(i=1),Math.abs(Math.abs(t[1]-t[0]))/i},t.prototype.calculateCategoryInterval=function(){return function(t){var r=function(t){var r=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:r.get("rotate")||0,font:r.getFont()}}(t),i=zN(t),s=(r.axisRotate-r.labelRotate)/180*Math.PI,u=t.scale,c=u.getExtent(),h=u.count();if(c[1]-c[0]<1)return 0;var p=1;h>40&&(p=Math.max(1,Math.floor(h/40)));for(var f=c[0],v=t.dataToCoord(f+1)-t.dataToCoord(f),y=Math.abs(v*Math.cos(s)),x=Math.abs(v*Math.sin(s)),_=0,b=0;f<=c[1];f+=p){var w=0,S=0,M=C7(i({value:f}),r.font,"center","top");w=1.3*M.width,S=1.3*M.height,_=Math.max(_,w,7),b=Math.max(b,S,7)}var A=_/y,C=b/x;isNaN(A)&&(A=1/0),isNaN(C)&&(C=1/0);var T=Math.max(0,Math.floor(Math.min(A,C))),I=z8(t.model),D=t.getExtent(),P=I.lastAutoInterval,R=I.lastTickCount;return null!=P&&null!=R&&1>=Math.abs(P-T)&&1>=Math.abs(R-h)&&P>T&&I.axisExtent0===D[0]&&I.axisExtent1===D[1]?T=P:(I.lastTickCount=h,I.lastAutoInterval=T,I.axisExtent0=D[0],I.axisExtent1=D[1]),T}(this)},t}();function Ul(t,r){var i=t[1]-t[0],s=i/r/2;t[0]+=s,t[1]-=s}let Uu=Us;function Uc(t){var r=Ru.extend(t);return Ru.registerClass(r),r}function Uh(t){var r=kM.extend(t);return kM.registerClass(r),r}function Ud(t){var r=kw.extend(t);return kw.registerClass(r),r}function Up(t){var r=Bu.extend(t);return Bu.registerClass(r),r}var Uf=2*Math.PI,Ug=Iu.CMD,Um=["top","right","bottom","left"];function Uv(t,r,i,s,u,c,h,p){var f=i-t,v=s-r,y=Math.sqrt(f*f+v*v),x=((u-t)*(f/=y)+(c-r)*(v/=y))/y;p&&(x=Math.min(Math.max(x,0),1)),x*=y;var _=h[0]=t+x*f,b=h[1]=r+x*v;return Math.sqrt((_-u)*(_-u)+(b-c)*(b-c))}function Uy(t,r,i,s,u,c,h){i<0&&(t+=i,i=-i),s<0&&(r+=s,s=-s);var p=t+i,f=r+s,v=h[0]=Math.min(Math.max(u,t),p),y=h[1]=Math.min(Math.max(c,r),f);return Math.sqrt((v-u)*(v-u)+(y-c)*(y-c))}var Ux=[],U_=new MZ,Ub=new MZ,Uw=new MZ,US=new MZ,UM=new MZ;function UA(t,r){if(!t)return;var i=t.getTextGuideLine(),s=t.getTextContent();if(!!(s&&i)){var u=t.textGuideLineConfig||{},c=[[0,0],[0,0],[0,0]],h=u.candidates||Um,p=s.getBoundingRect().clone();p.applyTransform(s.getComputedTransform());var f=1/0,v=u.anchor,y=t.getComputedTransform(),x=y&&M$([],y),_=r.get("length2")||0;v&&Uw.copy(v);for(var b=0;b<h.length;b++){!function(t,r,i,s,u){var c=i.width,h=i.height;switch(t){case"top":s.set(i.x+c/2,i.y-0),u.set(0,-1);break;case"bottom":s.set(i.x+c/2,i.y+h+r),u.set(0,1);break;case"left":s.set(i.x-r,i.y+h/2),u.set(-1,0);break;case"right":s.set(i.x+c+r,i.y+h/2),u.set(1,0)}}(h[b],0,p,U_,US),MZ.scaleAndAdd(Ub,U_,US,_),Ub.transform(x);var w=t.getBoundingRect(),S=v?v.distance(Ub):t instanceof IM?function(t,r,i){for(var s,u,c=0,h=0,p=0,f=0,v=1/0,y=r.data,x=t.x,_=t.y,b=0;b<y.length;){var w=y[b++];1===b&&(c=y[b],h=y[b+1],p=c,f=h);var S=v;switch(w){case Ug.M:p=y[b++],f=y[b++],c=p,h=f;break;case Ug.L:S=Uv(c,h,y[b],y[b+1],x,_,Ux,!0),c=y[b++],h=y[b++];break;case Ug.C:S=AI(c,h,y[b++],y[b++],y[b++],y[b++],y[b],y[b+1],x,_,Ux),c=y[b++],h=y[b++];break;case Ug.Q:S=Ak(c,h,y[b++],y[b++],y[b],y[b+1],x,_,Ux),c=y[b++],h=y[b++];break;case Ug.A:var M=y[b++],A=y[b++],C=y[b++],T=y[b++],I=y[b++],D=y[b++];b+=1;var P=!!(1-y[b++]);s=Math.cos(I)*C+M,u=Math.sin(I)*T+A,b<=1&&(p=s,f=u);var R=(x-M)*T/C+M;S=function(t,r,i,s,u,c,h,p,f){var v=Math.sqrt((h-=t)*h+(p-=r)*p),y=(h/=v)*i+t,x=(p/=v)*i+r;if(Math.abs(s-u)%Uf<1e-4)return f[0]=y,f[1]=x,v-i;if(c){var _=s;s=Ip(u),u=Ip(_)}else s=Ip(s),u=Ip(u);s>u&&(u+=Uf);var b=Math.atan2(p,h);if(b<0&&(b+=Uf),b>=s&&b<=u||b+Uf>=s&&b+Uf<=u)return f[0]=y,f[1]=x,v-i;var w=i*Math.cos(s)+t,S=i*Math.sin(s)+r,M=i*Math.cos(u)+t,A=i*Math.sin(u)+r,C=(w-h)*(w-h)+(S-p)*(S-p),T=(M-h)*(M-h)+(A-p)*(A-p);return C<T?(f[0]=w,f[1]=S,Math.sqrt(C)):(f[0]=M,f[1]=A,Math.sqrt(T))}(M,A,T,I,I+D,P,R,_,Ux),c=Math.cos(I+D)*C+M,h=Math.sin(I+D)*T+A;break;case Ug.R:p=c=y[b++],S=Uy(p,f=h=y[b++],y[b++],y[b++],x,_,Ux);break;case Ug.Z:S=Uv(c,h,p,f,x,_,Ux,!0),c=p,h=f}S<v&&(v=S,i.set(Ux[0],Ux[1]))}return v}(Ub,t.path,Uw):function(t,r,i){var s=Uy(r.x,r.y,r.width,r.height,t.x,t.y,Ux);return i.set(Ux[0],Ux[1]),s}(Ub,w,Uw);S<f&&(f=S,Ub.transform(y),Uw.transform(y),Uw.toArray(c[0]),Ub.toArray(c[1]),U_.toArray(c[2]))}UE(c,r.get("minTurnAngle")),i.setShape({points:c})}}var UC=[],UT=new MZ;function UE(t,r){if(!(r<=180&&r>0))return;r=r/180*Math.PI,U_.fromArray(t[0]),Ub.fromArray(t[1]),Uw.fromArray(t[2]),MZ.sub(US,U_,Ub),MZ.sub(UM,Uw,Ub);var i=US.len(),s=UM.len();if(!(i<.001)&&!(s<.001)){if(US.scale(1/i),UM.scale(1/s),Math.cos(r)<US.dot(UM)){var u=Uv(Ub.x,Ub.y,Uw.x,Uw.y,U_.x,U_.y,UC,!1);UT.fromArray(UC),UT.scaleAndAdd(UM,u/Math.tan(Math.PI-r));var c=Uw.x!==Ub.x?(UT.x-Ub.x)/(Uw.x-Ub.x):(UT.y-Ub.y)/(Uw.y-Ub.y);if(isNaN(c))return;c<0?MZ.copy(UT,Ub):c>1&&MZ.copy(UT,Uw),UT.toArray(t[1])}}}function UI(t,r,i,s){var u="normal"===i,c=u?t:t.ensureState(i);c.ignore=r;var h=s.get("smooth");h&&!0===h&&(h=.3),c.shape=c.shape||{},h>0&&(c.shape.smooth=h);var p=s.getModel("lineStyle").getLineStyle();u?t.useStyle(p):c.style=p}function UD(t,r){var i=r.smooth,s=r.points;if(!!s)if(t.moveTo(s[0][0],s[0][1]),i>0&&s.length>=3){var u=Ms(s[0],s[1]),c=Ms(s[1],s[2]);if(!u||!c){t.lineTo(s[1][0],s[1][1]),t.lineTo(s[2][0],s[2][1]);return}var h=Math.min(u,c)*i,p=Mh([],s[1],s[0],h/u),f=Mh([],s[1],s[2],h/c),v=Mh([],p,f,.5);t.bezierCurveTo(p[0],p[1],p[0],p[1],v[0],v[1]),t.bezierCurveTo(f[0],f[1],f[0],f[1],s[2][0],s[2][1])}else for(var y=1;y<s.length;y++)t.lineTo(s[y][0],s[y][1])}function UP(t,r,i){var s=t.getTextGuideLine(),u=t.getTextContent();if(!u){s&&t.removeTextGuideLine();return}for(var c=r.normal,h=c.get("show"),p=u.ignore,f=0;f<I8.length;f++){var v=I8[f],y=r[v],x="normal"===v;if(y){var _=y.get("show");if((x?p:SO(u.states[v]&&u.states[v].ignore,p))||!SO(_,h)){var b=x?s:s&&s.states[v];b&&(b.ignore=!0),s&&UI(s,!0,v,y);continue}!s&&(s=new Oh,t.setTextGuideLine(s),!x&&(p||!h)&&UI(s,!0,"normal",r.normal),t.stateProxy&&(s.stateProxy=t.stateProxy)),UI(s,!1,v,y)}}if(s){Ss(s.style,i),s.style.fill=null;var w=c.get("showAbove");(t.textGuideLineConfig=t.textGuideLineConfig||{}).showAbove=w||!1,s.buildPath=UD}}function UR(t,r){r=r||"labelLine";for(var i={normal:t.getModel(r)},s=0;s<I9.length;s++){var u=I9[s];i[u]=t.getModel([u,r])}return i}function UL(t){for(var r=[],i=0;i<t.length;i++){var s=t[i];if(!s.defaultAttr.ignore){var u=s.label,c=u.getComputedTransform(),h=u.getBoundingRect(),p=!c||c[1]<1e-5&&c[2]<1e-5,f=u.style.margin||0,v=h.clone();v.applyTransform(c),v.x-=f/2,v.y-=f/2,v.width+=f,v.height+=f;var y=p?new OR(h,c):null;r.push({label:u,labelLine:s.labelLine,rect:v,localRect:h,obb:y,priority:s.priority,defaultAttr:s.defaultAttr,layoutOption:s.computedLayoutOption,axisAligned:p,transform:c})}}return r}function Uk(t,r,i,s,u,c){var h,p,f,v=t.length;if(!(v<2)){t.sort(function(t,i){return t.rect[r]-i.rect[r]});for(var y=0,x=!1,_=[],b=0,w=0;w<v;w++){var S=t[w],M=S.rect;(h=M[r]-y)<0&&(M[r]-=h,S.label[r]-=h,x=!0);var A=Math.max(-h,0);_.push(A),b+=A,y=M[r]+M[i]}b>0&&c&&P(-b/v,0,v);var C=t[0],T=t[v-1];return I(),p<0&&R(-p,.8),f<0&&R(f,.8),I(),D(p,f,1),D(f,p,-1),I(),p<0&&L(-p),f<0&&L(f),x}function I(){p=C.rect[r]-s,f=u-T.rect[r]-T.rect[i]}function D(t,r,i){if(t<0){var s=Math.min(r,-t);if(s>0){P(s*i,0,v);var u=s+t;u<0&&R(-u*i,1)}else R(-t*i,1)}}function P(i,s,u){0!==i&&(x=!0);for(var c=s;c<u;c++){var h=t[c],p=h.rect;p[r]+=i,h.label[r]+=i}}function R(s,u){for(var c=[],h=0,p=1;p<v;p++){var f=t[p-1].rect,y=Math.max(t[p].rect[r]-f[r]-f[i],0);c.push(y),h+=y}if(!!h){var x=Math.min(Math.abs(s)/h,u);if(s>0)for(var p=0;p<v-1;p++){var _=c[p]*x;P(_,0,p+1)}else for(var p=v-1;p>0;p--){var _=c[p-1]*x;P(-_,p,v)}}}function L(t){for(var r=t<0?-1:1,i=Math.ceil((t=Math.abs(t))/(v-1)),s=0;s<v-1;s++)if(r>0?P(i,0,s+1):P(-i,v-s-1,v),(t-=i)<=0)return}}function UO(t,r,i,s){return Uk(t,"y","height",r,i,s)}function UB(t){var r=[];t.sort(function(t,r){return r.priority-t.priority});var i=new M4(0,0,0,0);function s(t){if(!t.ignore){var r=t.ensureState("emphasis");null==r.ignore&&(r.ignore=!1)}t.ignore=!0}for(var u=0;u<t.length;u++){var c=t[u],h=c.axisAligned,p=c.localRect,f=c.transform,v=c.label,y=c.labelLine;i.copy(c.rect),i.width-=.1,i.height-=.1,i.x+=.05,i.y+=.05;for(var x=c.obb,_=!1,b=0;b<r.length;b++){var w=r[b];if(!!i.intersect(w.rect)){if(h&&w.axisAligned){_=!0;break}if(!w.obb&&(w.obb=new OR(w.localRect,w.transform)),!x&&(x=new OR(p,f)),x.intersect(w.obb)){_=!0;break}}}_?(s(v),y&&s(y)):(v.attr("ignore",c.defaultAttr.ignore),y&&y.attr("ignore",c.defaultAttr.labelGuideIgnore),r.push(c))}}var UN=["align","verticalAlign","width","height","fontSize"],UF=new C3,Uz=T7(),UU=T7();function UH(t,r,i){for(var s=0;s<i.length;s++){var u=i[s];null!=r[u]&&(t[u]=r[u])}}var UG=["x","y","rotation"],UV=function(){function t(){this._labelList=[],this._chartViewList=[]}return t.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},t.prototype._addLabel=function(t,r,i,s,u){var c,h=s.style,p=s.__hostTarget.textConfig||{},f=s.getComputedTransform(),v=s.getBoundingRect().plain();M4.applyTransform(v,v,f),f?UF.setLocalTransform(f):(UF.x=UF.y=UF.rotation=UF.originX=UF.originY=0,UF.scaleX=UF.scaleY=1),UF.rotation=Ip(UF.rotation);var y=s.__hostTarget;if(y){c=y.getBoundingRect().plain();var x=y.getComputedTransform();M4.applyTransform(c,c,x)}var _=c&&y.getTextGuideLine();this._labelList.push({label:s,labelLine:_,seriesModel:i,dataIndex:t,dataType:r,layoutOption:u,computedLayoutOption:null,rect:v,hostRect:c,priority:c?c.width*c.height:0,defaultAttr:{ignore:s.ignore,labelGuideIgnore:_&&_.ignore,x:UF.x,y:UF.y,scaleX:UF.scaleX,scaleY:UF.scaleY,rotation:UF.rotation,style:{x:h.x,y:h.y,align:h.align,verticalAlign:h.verticalAlign,width:h.width,height:h.height,fontSize:h.fontSize},cursor:s.cursor,attachedPos:p.position,attachedRot:p.rotation}})},t.prototype.addLabelsOfSeries=function(t){var r=this;this._chartViewList.push(t);var i=t.__model,s=i.get("labelLayout");if(!!(Sw(s)||Sy(s).length))t.group.traverse(function(t){if(t.ignore)return!0;var u=t.getTextContent(),c=I1(t);u&&!u.disableLabelLayout&&r._addLabel(c.dataIndex,c.dataType,i,u,s)})},t.prototype.updateLayoutConfig=function(t){for(var r=t.getWidth(),i=t.getHeight(),s=0;s<this._labelList.length;s++){var u=this._labelList[s],c=u.label,h=c.__hostTarget,p=u.defaultAttr,f=void 0;f=(f=Sw(u.layoutOption)?u.layoutOption(function(t,r){var i=t.label,s=r&&r.getTextGuideLine();return{dataIndex:t.dataIndex,dataType:t.dataType,seriesIndex:t.seriesModel.seriesIndex,text:t.label.style.text,rect:t.hostRect,labelRect:t.rect,align:i.style.align,verticalAlign:i.style.verticalAlign,labelLinePoints:function(t){if(t){for(var r=[],i=0;i<t.length;i++)r.push(t[i].slice());return r}}(s&&s.shape.points)}}(u,h)):u.layoutOption)||{},u.computedLayoutOption=f;var v=Math.PI/180;h&&h.setTextConfig({local:!1,position:null!=f.x||null!=f.y?null:p.attachedPos,rotation:null!=f.rotate?f.rotate*v:p.attachedRot,offset:[f.dx||0,f.dy||0]});var y=!1;if(null!=f.x?(c.x=TT(f.x,r),c.setStyle("x",0),y=!0):(c.x=p.x,c.setStyle("x",p.style.x)),null!=f.y?(c.y=TT(f.y,i),c.setStyle("y",0),y=!0):(c.y=p.y,c.setStyle("y",p.style.y)),f.labelLinePoints){var x=h.getTextGuideLine();x&&(x.setShape({points:f.labelLinePoints}),y=!1)}Uz(c).needsUpdateLabelLine=y,c.rotation=null!=f.rotate?f.rotate*v:p.rotation,c.scaleX=p.scaleX,c.scaleY=p.scaleY;for(var _=0;_<UN.length;_++){var b=UN[_];c.setStyle(b,null!=f[b]?f[b]:p.style[b])}if(f.draggable){if(c.draggable=!0,c.cursor="move",h){var w=u.seriesModel;null!=u.dataIndex&&(w=u.seriesModel.getData(u.dataType).getItemModel(u.dataIndex)),c.on("drag",function(t,r){return function(){UA(t,r)}}(h,w.getModel("labelLine")))}}else c.off("drag"),c.cursor=p.cursor}},t.prototype.layout=function(t){var r,i,s=t.getWidth(),u=t.getHeight(),c=UL(this._labelList),h=Sm(c,function(t){return"shiftX"===t.layoutOption.moveOverlap}),p=Sm(c,function(t){return"shiftY"===t.layoutOption.moveOverlap});r=0,Uk(h,"x","width",0,s,void 0),UO(p,0,u),UB(Sm(c,function(t){return t.layoutOption.hideOverlap}))},t.prototype.processLabelsOverall=function(){var t=this;Sp(this._chartViewList,function(r){var i=r.__model,s=r.ignoreLabelLineUpdate,u=i.isAnimationEnabled();r.group.traverse(function(r){if(r.ignore&&!r.forceLabelAnimation)return!0;var c=!s,h=r.getTextContent();!c&&h&&(c=Uz(h).needsUpdateLabelLine),c&&t._updateLabelLine(r,i),u&&t._animateLabels(r,i)})})},t.prototype._updateLabelLine=function(t,r){var i=t.getTextContent(),s=I1(t),u=s.dataIndex;if(i&&null!=u){var c=r.getData(s.dataType),h=c.getItemModel(u),p={},f=c.getItemVisual(u,"style");if(f){var v=c.getVisual("drawType");p.stroke=f[v]}var y=h.getModel("labelLine");UP(t,UR(h),p),UA(t,y)}},t.prototype._animateLabels=function(t,r){var i=t.getTextContent(),s=t.getTextGuideLine();if(i&&(t.forceLabelAnimation||!i.ignore&&!i.invisible&&!t.disableLabelAnimation&&!DX(t))){var u=Uz(i),c=u.oldLayout,h=I1(t),p=h.dataIndex,f={x:i.x,y:i.y,rotation:i.rotation},v=r.getData(h.dataType);if(c){i.attr(c);var y=t.prevStates;y&&(Su(y,"select")>=0&&i.attr(u.oldLayoutSelect),Su(y,"emphasis")>=0&&i.attr(u.oldLayoutEmphasis)),DW(i,f,r,p)}else if(i.attr(f),!D7(i).valueAnimation){var x=SO(i.style.opacity,1);i.style.opacity=0,Dj(i,{style:{opacity:x}},r,p)}if(u.oldLayout=f,i.states.select){var _=u.oldLayoutSelect={};UH(_,f,UG),UH(_,i.states.select,UG)}if(i.states.emphasis){var b=u.oldLayoutEmphasis={};UH(b,f,UG),UH(b,i.states.emphasis,UG)}Pt(i,p,v,r,r)}if(s&&!s.ignore&&!s.invisible){var u=UU(s),c=u.oldLayout,w={points:s.shape.points};c?(s.attr({shape:c}),DW(s,{shape:w},r)):(s.setShape(w),s.style.strokePercent=0,Dj(s,{style:{strokePercent:1}},r)),u.oldLayout=w}},t}(),UW=T7();function Uj(t){t.registerUpdateLifecycle("series:beforeupdate",function(t,r,i){var s=UW(r).labelManager;!s&&(s=UW(r).labelManager=new UV),s.clearLabels()}),t.registerUpdateLifecycle("series:layoutlabels",function(t,r,i){var s=UW(r).labelManager;i.updatedSeries.forEach(function(t){s.addLabelsOfSeries(r.getViewOfSeriesModel(t))}),s.updateLayoutConfig(r),s.layout(r),s.processLabelsOverall()})}function UX(t,r,i){var s=wK.createCanvas(),u=r.getWidth(),c=r.getHeight(),h=s.style;return h&&(h.position="absolute",h.left="0",h.top="0",h.width=u+"px",h.height=c+"px",s.setAttribute("data-zr-dom-id",t)),s.width=u*i,s.height=c*i,s}FS(Uj);var UY=function(t){function r(r,i,s){var u,c=t.call(this)||this;c.motionBlur=!1,c.lastFrameAlpha=.7,c.dpr=1,c.virtual=!1,c.config={},c.incremental=!1,c.zlevel=0,c.maxRepaintRectCount=5,c.__dirty=!0,c.__firstTimePaint=!0,c.__used=!1,c.__drawIndex=0,c.__startIndex=0,c.__endIndex=0,c.__prevStartIndex=null,c.__prevEndIndex=null,s=s||C$,"string"==typeof r?u=UX(r,i,s):SC(r)&&(r=(u=r).id),c.id=r,c.dom=u;var h=u.style;return h&&(SZ(u),u.onselectstart=function(){return!1},h.padding="0",h.margin="0",h.borderWidth="0"),c.painter=i,c.dpr=s,c}return wU(r,t),r.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},r.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},r.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},r.prototype.setUnpainted=function(){this.__firstTimePaint=!0},r.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=UX("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},r.prototype.createRepaintRects=function(t,r,i,s){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var u,c=[],h=this.maxRepaintRectCount,p=!1,f=new M4(0,0,0,0);function v(t){if(!(!t.isFinite()||t.isZero()))if(0===c.length){var r=new M4(0,0,0,0);r.copy(t),c.push(r)}else{for(var i=!1,s=1/0,u=0,v=0;v<c.length;++v){var y=c[v];if(y.intersect(t)){var x=new M4(0,0,0,0);x.copy(y),x.union(t),c[v]=x,i=!0;break}if(p){f.copy(t),f.union(y);var _=t.width*t.height,b=y.width*y.height,w=f.width*f.height-_-b;w<s&&(s=w,u=v)}}if(p&&(c[u].union(t),i=!0),!i){var r=new M4(0,0,0,0);r.copy(t),c.push(r)}!p&&(p=c.length>=h)}}for(var y=this.__startIndex;y<this.__endIndex;++y){var x=t[y];if(x){var _=x.shouldBePainted(i,s,!0,!0),b=x.__isRendered&&(1&x.__dirty||!_)?x.getPrevPaintRect():null;b&&v(b);var w=_&&(1&x.__dirty||!x.__isRendered)?x.getPaintRect():null;w&&v(w)}}for(var y=this.__prevStartIndex;y<this.__prevEndIndex;++y){var x=r[y],_=x&&x.shouldBePainted(i,s,!0,!0);if(x&&(!_||!x.__zr)&&x.__isRendered){var b=x.getPrevPaintRect();b&&v(b)}}do{u=!1;for(var y=0;y<c.length;){if(c[y].isZero()){c.splice(y,1);continue}for(var S=y+1;S<c.length;)c[y].intersect(c[S])?(u=!0,c[y].union(c[S]),c.splice(S,1)):S++;y++}}while(u);return this._paintRects=c,c},r.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},r.prototype.resize=function(t,r){var i=this.dpr,s=this.dom,u=s.style,c=this.domBack;u&&(u.width=t+"px",u.height=r+"px"),s.width=t*i,s.height=r*i,c&&(c.width=t*i,c.height=r*i,1!==i&&this.ctxBack.scale(i,i))},r.prototype.clear=function(t,r,i){var s=this.dom,u=this.ctx,c=s.width,h=s.height;r=r||this.clearColor;var p=this.motionBlur&&!t,f=this.lastFrameAlpha,v=this.dpr,y=this;p&&(!this.domBack&&this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(s,0,0,c/v,h/v));var x=this.domBack;function _(t,i,s,c){if(u.clearRect(t,i,s,c),r&&"transparent"!==r){var h=void 0;SD(r)?(h=(r.global||r.__width===s&&r.__height===c)&&r.__canvasGradient||Nn(u,r,{x:0,y:0,width:s,height:c}),r.__canvasGradient=h,r.__width=s,r.__height=c):SP(r)&&(r.scaleX=r.scaleX||v,r.scaleY=r.scaleY||v,h=Nd(u,r,{dirty:function(){y.setUnpainted(),y.painter.refresh()}})),u.save(),u.fillStyle=h||r,u.fillRect(t,i,s,c),u.restore()}p&&(u.save(),u.globalAlpha=f,u.drawImage(x,t,i,s,c),u.restore())}!i||p?_(0,0,c,h):i.length&&Sp(i,function(t){_(t.x*v,t.y*v,t.width*v,t.height*v)})},r}(Mv),U$=function(){function t(t,r,i,s){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var u=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=i=So({},i||{}),this.dpr=i.devicePixelRatio||C$,this._singleCanvas=u,this.root=t,t.style&&(SZ(t),t.innerHTML=""),this.storage=r;var c=this._zlevelList;this._prevDisplayList=[];var h=this._layers;if(u){var p=t.width,f=t.height;null!=i.width&&(p=i.width),null!=i.height&&(f=i.height),this.dpr=i.devicePixelRatio||1,t.width=p*this.dpr,t.height=f*this.dpr,this._width=p,this._height=f;var v=new UY(t,this,this.dpr);v.__builtin__=!0,v.initContext(),h[314159]=v,v.zlevel=314159,c.push(314159),this._domRoot=t}else{this._width=Ni(t,0,i),this._height=Ni(t,1,i);var y,x,_,b=this._domRoot=(y=this._width,x=this._height,(_=document.createElement("div")).style.cssText=["position:relative","width:"+y+"px","height:"+x+"px","padding:0","margin:0","border-width:0"].join(";")+";",_);t.appendChild(b)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.refresh=function(t){var r=this.storage.getDisplayList(!0),i=this._prevDisplayList,s=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,i,t,this._redrawId);for(var u=0;u<s.length;u++){var c=s[u],h=this._layers[c];if(!h.__builtin__&&h.refresh){var p=0===u?this._backgroundColor:null;h.refresh(p)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(t){var r,i=t.length,s=this._hoverlayer;if(s&&s.clear(),!!i){for(var u={inHover:!0,viewWidth:this._width,viewHeight:this._height},c=0;c<i;c++){var h=t[c];h.__inHover&&(!s&&(s=this._hoverlayer=this.getLayer(1e5)),!r&&(r=s.ctx).save(),Nb(r,h,u,c===i-1))}r&&r.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(1e5)},t.prototype.paintOne=function(t,r){N_(t,r)},t.prototype._paintList=function(t,r,i,s){if(this._redrawId===s){i=i||!1,this._updateLayerStatus(t);var u=this._doPaintList(t,r,i),c=u.finished,h=u.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),h&&this._paintHoverList(t),c)this.eachLayer(function(t){t.afterBrush&&t.afterBrush()});else{var p=this;eaF(function(){p._paintList(t,r,i,s)})}}},t.prototype._compositeManually=function(){var t=this.getLayer(314159).ctx,r=this._domRoot.width,i=this._domRoot.height;t.clearRect(0,0,r,i),this.eachBuiltinLayer(function(s){s.virtual&&t.drawImage(s.dom,0,0,r,i)})},t.prototype._doPaintList=function(t,r,i){for(var s=this,u=[],c=this._opts.useDirtyRect,h=0;h<this._zlevelList.length;h++){var p=this._zlevelList[h],f=this._layers[p];f.__builtin__&&f!==this._hoverlayer&&(f.__dirty||i)&&u.push(f)}for(var v=!0,y=!1,x=this,_=0;_<u.length;_++)!function(h){var p,f=u[h],_=f.ctx,b=c&&f.createRepaintRects(t,r,x._width,x._height),w=i?f.__startIndex:f.__drawIndex,S=!i&&f.incremental&&Date.now,M=S&&Date.now(),A=f.zlevel===x._zlevelList[0]?x._backgroundColor:null;if(f.__startIndex===f.__endIndex)f.clear(!1,A,b);else if(w===f.__startIndex){var C=t[w];(!C.incremental||!C.notClear||i)&&f.clear(!1,A,b)}-1===w&&(w=f.__startIndex);var T=function(r){var i={inHover:!1,allClipped:!1,prevEl:null,viewWidth:s._width,viewHeight:s._height};for(p=w;p<f.__endIndex;p++){var u=t[p];if(u.__inHover&&(y=!0),s._doPaintEl(u,f,c,r,i,p===f.__endIndex-1),S&&Date.now()-M>15)break}i.prevElClipPaths&&_.restore()};if(b){if(0===b.length)p=f.__endIndex;else{for(var I=x.dpr,D=0;D<b.length;++D){var P=b[D];_.save(),_.beginPath(),_.rect(P.x*I,P.y*I,P.width*I,P.height*I),_.clip(),T(P),_.restore()}}}else _.save(),T(),_.restore();f.__drawIndex=p,f.__drawIndex<f.__endIndex&&(v=!1)}(_);return wY.wxa&&Sp(this._layers,function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()}),{finished:v,needsRefreshHover:y}},t.prototype._doPaintEl=function(t,r,i,s,u,c){var h=r.ctx;if(i){var p=t.getPaintRect();(!s||p&&p.intersect(s))&&(Nb(h,t,u,c),t.setPrevPaintRect(p))}else Nb(h,t,u,c)},t.prototype.getLayer=function(t,r){this._singleCanvas&&!this._needsManuallyCompositing&&(t=314159);var i=this._layers[t];return!i&&((i=new UY("zr_"+t,this,this.dpr)).zlevel=t,i.__builtin__=!0,this._layerConfig[t]?Si(i,this._layerConfig[t],!0):this._layerConfig[t-.01]&&Si(i,this._layerConfig[t-.01],!0),r&&(i.virtual=r),this.insertLayer(t,i),i.initContext()),i},t.prototype.insertLayer=function(t,r){var i,s=this._layers,u=this._zlevelList,c=u.length,h=this._domRoot,p=null,f=-1;if(s[t])return;if(!!((i=r)&&(i.__builtin__||"function"==typeof i.resize&&"function"==typeof i.refresh))){if(c>0&&t>u[0]){for(f=0;f<c-1&&(!(u[f]<t)||!(u[f+1]>t));f++);p=s[u[f]]}if(u.splice(f+1,0,t),s[t]=r,!r.virtual){if(p){var v=p.dom;v.nextSibling?h.insertBefore(r.dom,v.nextSibling):h.appendChild(r.dom)}else h.firstChild?h.insertBefore(r.dom,h.firstChild):h.appendChild(r.dom)}r.painter||(r.painter=this)}},t.prototype.eachLayer=function(t,r){for(var i=this._zlevelList,s=0;s<i.length;s++){var u=i[s];t.call(r,this._layers[u],u)}},t.prototype.eachBuiltinLayer=function(t,r){for(var i=this._zlevelList,s=0;s<i.length;s++){var u=i[s],c=this._layers[u];c.__builtin__&&t.call(r,c,u)}},t.prototype.eachOtherLayer=function(t,r){for(var i=this._zlevelList,s=0;s<i.length;s++){var u=i[s],c=this._layers[u];!c.__builtin__&&t.call(r,c,u)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(t){function r(t){h&&(h.__endIndex!==t&&(h.__dirty=!0),h.__endIndex=t)}if(this.eachBuiltinLayer(function(t,r){t.__dirty=t.__used=!1}),this._singleCanvas)for(var i,s,u=1;u<t.length;u++){var c=t[u];if(c.zlevel!==t[u-1].zlevel||c.incremental){this._needsManuallyCompositing=!0;break}}var h=null,p=0;for(s=0;s<t.length;s++){var c=t[s],f=c.zlevel,v=void 0;i!==f&&(i=f,p=0),c.incremental?((v=this.getLayer(f+.001,this._needsManuallyCompositing)).incremental=!0,p=1):v=this.getLayer(f+(p>0?.01:0),this._needsManuallyCompositing),!v.__builtin__&&Sn("ZLevel "+f+" has been used by unkown layer "+v.id),v!==h&&(v.__used=!0,v.__startIndex!==s&&(v.__dirty=!0),v.__startIndex=s,v.incremental?v.__drawIndex=-1:v.__drawIndex=s,r(s),h=v),1&c.__dirty&&!c.__inHover&&(v.__dirty=!0,v.incremental&&v.__drawIndex<0&&(v.__drawIndex=s))}r(s),this.eachBuiltinLayer(function(t,r){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)})},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(t){t.clear()},t.prototype.setBackgroundColor=function(t){this._backgroundColor=t,Sp(this._layers,function(t){t.setUnpainted()})},t.prototype.configLayer=function(t,r){if(r){var i=this._layerConfig;i[t]?Si(i[t],r,!0):i[t]=r;for(var s=0;s<this._zlevelList.length;s++){var u=this._zlevelList[s];(u===t||u===t+.01)&&Si(this._layers[u],i[t],!0)}}},t.prototype.delLayer=function(t){var r=this._layers,i=this._zlevelList,s=r[t];if(!!s)s.dom.parentNode.removeChild(s.dom),delete r[t],i.splice(Su(i,t),1)},t.prototype.resize=function(t,r){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var s=this._opts,u=this.root;if(null!=t&&(s.width=t),null!=r&&(s.height=r),t=Ni(u,0,s),r=Ni(u,1,s),i.style.display="",this._width!==t||r!==this._height){for(var c in i.style.width=t+"px",i.style.height=r+"px",this._layers)this._layers.hasOwnProperty(c)&&this._layers[c].resize(t,r);this.refresh(!0)}this._width=t,this._height=r}else{if(null==t||null==r)return;this._width=t,this._height=r,this.getLayer(314159).resize(t,r)}return this},t.prototype.clearLayer=function(t){var r=this._layers[t];r&&r.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var r=new UY("image",this,t.pixelRatio||this.dpr);r.initContext(),r.clear(!1,t.backgroundColor||this._backgroundColor);var i=r.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var s=r.dom.width,u=r.dom.height;this.eachLayer(function(t){t.__builtin__?i.drawImage(t.dom,0,0,s,u):t.renderToCanvas&&(i.save(),t.renderToCanvas(i),i.restore())})}else{for(var c={inHover:!1,viewWidth:this._width,viewHeight:this._height},h=this.storage.getDisplayList(!0),p=0,f=h.length;p<f;p++)Nb(i,h[p],c,p===f-1)}return r.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t}(),UJ=Math.sin,UZ=Math.cos,UK=Math.PI,Uq=2*Math.PI,UQ=180/UK,U0=function(){function t(){}return t.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},t.prototype.moveTo=function(t,r){this._add("M",t,r)},t.prototype.lineTo=function(t,r){this._add("L",t,r)},t.prototype.bezierCurveTo=function(t,r,i,s,u,c){this._add("C",t,r,i,s,u,c)},t.prototype.quadraticCurveTo=function(t,r,i,s){this._add("Q",t,r,i,s)},t.prototype.arc=function(t,r,i,s,u,c){this.ellipse(t,r,i,i,0,s,u,c)},t.prototype.ellipse=function(t,r,i,s,u,c,h,p){var f=h-c,v=!p,y=Math.abs(f),x=Co(y-Uq)||(v?f>=Uq:-f>=Uq),_=f>0?f%Uq:f%Uq+Uq,b=!1;b=!!x||!Co(y)&&_>=UK==!!v;var w=t+i*UZ(c),S=r+s*UJ(c);this._start&&this._add("M",w,S);var M=Math.round(u*UQ);if(x){var A=1/this._p,C=(v?1:-1)*(Uq-A);this._add("A",i,s,M,1,+v,t+i*UZ(c+C),r+s*UJ(c+C)),A>.01&&this._add("A",i,s,M,0,+v,w,S)}else{var T=t+i*UZ(h),I=r+s*UJ(h);this._add("A",i,s,M,+b,+v,T,I)}},t.prototype.rect=function(t,r,i,s){this._add("M",t,r),this._add("l",i,0),this._add("l",0,s),this._add("l",-i,0),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(t,r,i,s,u,c,h,p,f){for(var v=[],y=this._p,x=1;x<arguments.length;x++){var _=arguments[x];if(isNaN(_)){this._invalid=!0;return}v.push(Math.round(_*y)/y)}this._d.push(t+v.join(" ")),this._start="Z"===t},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},t.prototype.getStr=function(){return this._str},t}(),U1="none",U2=Math.round,U3=["lineCap","miterLimit","lineJoin"],U5=Sf(U3,function(t){return"stroke-"+t.toLowerCase()}),U4="http://www.w3.org/2000/svg",U6="http://www.w3.org/1999/xlink",U9="ecmeta_";function U8(t){return document.createElementNS(U4,t)}function U7(t,r,i,s,u){return{tag:t,attrs:i||{},children:s,text:u,key:r}}function He(t,r){var i=(r=r||{}).newline?"\n":"";return function t(r){var s=r.children,u=r.tag,c=r.attrs,h=r.text;return function(t,r){var i=[];if(r)for(var s in r){var u=r[s],c=s;if(!1!==u){!0!==u&&null!=u&&(c+='="'+u+'"');i.push(c)}}return"<"+t+" "+i.join(" ")+">"}(u,c)+("style"!==u?MT(h):h||"")+(s?""+i+Sf(s,function(r){return t(r)}).join(i)+i:"")+("</"+u)+">"}(t)}function Ht(t){return{zrId:t,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function Hn(t,r,i,s){return U7("svg","root",{width:t,height:r,xmlns:U4,"xmlns:xlink":U6,version:"1.1",baseProfile:"full",viewBox:!!s&&"0 0 "+t+" "+r},i)}var Hr=0;function Hi(){return Hr++}var Ha={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Ho="transform-origin",Hs={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Hl(t,r){var i=r.zrId+"-ani-"+r.cssAnimIdx++;return r.cssAnims[i]=t,i}function Hu(t){return SS(t)?Ha[t]?"cubic-bezier("+Ha[t]+")":AB(t)?t:"":""}function Hc(t,r,i,s){var u=t.animators,c=u.length,h=[];if(t instanceof OM){var p=function(t,r,i){var s,u,c=t.shape.paths,h={};if(Sp(c,function(t){var r=Ht(i.zrId);r.animation=!0,Hc(t,{},r,!0);var c=r.cssAnims,p=r.cssNodes,f=Sy(c),v=f.length;if(!!v){var y=c[u=f[v-1]];for(var x in y){var _=y[x];h[x]=h[x]||{d:""},h[x].d+=_.d||""}for(var b in p){var w=p[b].animation;w.indexOf(u)>=0&&(s=w)}}}),!!s){r.d=!1;var p=Hl(h,i);return s.replace(u,p)}}(t,r,i);if(p)h.push(p);else if(!c)return}else if(!c)return;for(var f={},v=0;v<c;v++){var y=u[v],x=[y.getMaxTime()/1e3+"s"],_=Hu(y.getClip().easing),b=y.getDelay();_?x.push(_):x.push("linear"),b&&x.push(b/1e3+"s"),y.getLoop()&&x.push("infinite");var w=x.join(" ");f[w]=f[w]||[w,[]],f[w][1].push(y)}for(var S in f){var p=function(u){var c,h,p=u[1],f=p.length,v={},y={},x={},_="animation-timing-function";function b(t,r,i){for(var s=t.getTracks(),u=t.getMaxTime(),c=0;c<s.length;c++){var h=s[c];if(h.needsAnimate()){var p=h.keyframes,f=h.propName;if(i&&(f=i(f)),f)for(var v=0;v<p.length;v++){var y=p[v],x=Math.round(y.time/u*100)+"%",b=Hu(y.easing),w=y.rawValue;(SS(w)||SA(w))&&(r[x]=r[x]||{},r[x][f]=y.rawValue,b&&(r[x][_]=b))}}}}for(var w=0;w<f;w++){var S=p[w],M=S.targetName;M?"shape"===M&&b(S,y):s||b(S,v)}for(var A in v){var C={};C4(C,t),So(C,v[A]);var T=Cv(C),I=v[A][_];x[A]=T?{transform:T}:{},!function(t,r){var i=r.originX,s=r.originY;(i||s)&&(t[Ho]=i+"px "+s+"px")}(x[A],C),I&&(x[A][_]=I)}var D=!0;for(var A in y){x[A]=x[A]||{};var P=!c,I=y[A][_];P&&(c=new Iu);var R=c.len();c.reset(),x[A].d=function(t,r,i){var s=So({},t.shape);So(s,r),t.buildPath(i,s);var u=new U0;return u.reset(Cm(t)),i.rebuildPath(u,1),u.generateStr(),u.getStr()}(t,y[A],c);var L=c.len();if(!P&&R!==L){D=!1;break}I&&(x[A][_]=I)}if(!D)for(var A in x)delete x[A].d;if(!s)for(var w=0;w<f;w++){var S=p[w],M=S.targetName;"style"===M&&b(S,x,function(t){return Hs[t]})}for(var k=Sy(x),O=!0,w=1;w<k.length;w++){var B=k[w-1],N=k[w];if(x[B][Ho]!==x[N][Ho]){O=!1;break}h=x[B][Ho]}if(O&&h){for(var A in x)x[A][Ho]&&delete x[A][Ho];r[Ho]=h}if(Sm(k,function(t){return Sy(x[t]).length>0}).length)return Hl(x,i)+" "+u[0]+" both"}(f[S]);p&&h.push(p)}if(h.length){var M=i.zrId+"-cls-"+Hr++;i.cssNodes["."+M]={animation:h.join(",")},r.class=M}}function Hh(t,r,i,s){var u=JSON.stringify(t),c=i.cssStyleCache[u];!c&&(c=i.zrId+"-cls-"+Hr++,i.cssStyleCache[u]=c,i.cssNodes["."+c+(s?":hover":"")]=t),r.class=r.class?r.class+" "+c:c}var Hd=Math.round;function Hp(t){return t&&SS(t.src)}function Hf(t){return t&&Sw(t.toDataURL)}function Hg(t,r,i,s){!function(t,r,i,s){var u,c,h=null==r.opacity?1:r.opacity;if(i instanceof ID){t("opacity",h);return}if(null!=(u=r.fill)&&u!==U1){var p=Ca(r.fill);t("fill",p.color);var f=null!=r.fillOpacity?r.fillOpacity*p.opacity*h:p.opacity*h;(s||f<1)&&t("fill-opacity",f)}else t("fill",U1);if(null!=(c=r.stroke)&&c!==U1){var v=Ca(r.stroke);t("stroke",v.color);var y=r.strokeNoScale?i.getLineScale():1,x=y?(r.lineWidth||0)/y:0,_=null!=r.strokeOpacity?r.strokeOpacity*v.opacity*h:v.opacity*h,b=r.strokeFirst;if((s||1!==x)&&t("stroke-width",x),(s||b)&&t("paint-order",b?"stroke":"fill"),(s||_<1)&&t("stroke-opacity",_),r.lineDash){var w=Na(i),S=w[0],M=w[1];S&&(M=U2(M||0),t("stroke-dasharray",S.join(",")),(M||s)&&t("stroke-dashoffset",M))}else s&&t("stroke-dasharray",U1);for(var A=0;A<U3.length;A++){var C=U3[A];if(s||r[C]!==Ib[C]){var T=r[C]||Ib[C];T&&t(U5[A],T)}}}else s&&t("stroke",U1)}(function(u,c){var h="fill"===u||"stroke"===u;h&&Cf(c)?HM(r,t,u,s):h&&Ch(c)?HA(i,t,u,s):h&&"none"===c?t[u]="transparent":t[u]=c},r,i,!1),function(t,r,i){var s=t.style;if((u=s)&&(u.shadowBlur||u.shadowOffsetX||u.shadowOffsetY)){var u,c,h,p,f=(h=(c=t).style,p=c.getGlobalScale(),[h.shadowColor,(h.shadowBlur||0).toFixed(2),(h.shadowOffsetX||0).toFixed(2),(h.shadowOffsetY||0).toFixed(2),p[0],p[1]].join(",")),v=i.shadowCache,y=v[f];if(!y){var x=t.getGlobalScale(),_=x[0],b=x[1];if(!_||!b)return;var w=s.shadowOffsetX||0,S=s.shadowOffsetY||0,M=s.shadowBlur,A=Ca(s.shadowColor),C=A.opacity,T=A.color;y=i.zrId+"-s"+i.shadowIdx++,i.defs[y]=U7("filter",y,{id:y,x:"-100%",y:"-100%",width:"300%",height:"300%"},[U7("feDropShadow","",{dx:w/_,dy:S/b,stdDeviation:M/2/_+" "+M/2/b,"flood-color":T,"flood-opacity":C})]),v[f]=y}r.filter=Cg(y)}}(i,t,s)}function Hm(t,r){var i=TS(r);i&&(i.each(function(r,i){null!=r&&(t[(U9+i).toLowerCase()]=r+"")}),r.isSilent()&&(t[U9+"silent"]="true"))}function Hv(t){return Co(t[0]-1)&&Co(t[1])&&Co(t[2])&&Co(t[3]-1)}function Hy(t,r,i){var s;if(r&&!(Co((s=r)[4])&&Co(s[5])&&Hv(r))){var u,c=i?10:1e4;t.transform=Hv(r)?"translate("+Hd(r[4]*c)/c+" "+Hd(r[5]*c)/c+")":"matrix("+Cs((u=r)[0])+","+Cs(u[1])+","+Cs(u[2])+","+Cs(u[3])+","+Cl(u[4])+","+Cl(u[5])+")"}}function Hx(t,r,i){for(var s=t.points,u=[],c=0;c<s.length;c++)u.push(Hd(s[c][0]*i)/i),u.push(Hd(s[c][1]*i)/i);r.points=u.join(" ")}function H_(t){return!t.smooth}var Hb={circle:[function(t){var r=Sf(t,function(t){return"string"==typeof t?[t,t]:t});return function(t,i,s){for(var u=0;u<r.length;u++){var c=r[u],h=t[c[0]];null!=h&&(i[c[1]]=Hd(h*s)/s)}}}(["cx","cy","r"])],polyline:[Hx,H_],polygon:[Hx,H_]};function Hw(t,r){var i=t.style,s=t.shape,u=Hb[t.type],c={},h=r.animation,p="path",f=t.style.strokePercent,v=r.compress&&Cm(t)||4;if(!u||r.willUpdate||u[1]&&!u[1](s)||h&&function(t){for(var r=t.animators,i=0;i<r.length;i++)if("shape"===r[i].targetName)return!0;return!1}(t)||f<1){var y=!t.path||t.shapeChanged();!t.path&&t.createPathProxy();var x=t.path;y&&(x.beginPath(),t.buildPath(x,t.shape),t.pathUpdated());var _=x.getVersion(),b=t.__svgPathBuilder;(t.__svgPathVersion!==_||!b||f!==t.__svgPathStrokePercent)&&(!b&&(b=t.__svgPathBuilder=new U0),b.reset(v),x.rebuildPath(b,f),b.generateStr(),t.__svgPathVersion=_,t.__svgPathStrokePercent=f),c.d=b.getStr()}else{p=t.type;var w=Math.pow(10,v);u[0](s,c,w)}return Hy(c,t.transform),Hg(c,i,t,r),Hm(c,t),r.animation&&Hc(t,c,r),r.emphasis&&function(t,r,i){if(!t.ignore){if(t.isSilent()){var s={"pointer-events":"none"};Hh(s,r,i,!0)}else{var u=t.states.emphasis&&t.states.emphasis.style?t.states.emphasis.style:{},c=u.fill;if(!c){var h=t.style&&t.style.fill,p=t.states.select&&t.states.select.style&&t.states.select.style.fill,f=t.currentStates.indexOf("select")>=0&&p||h;f&&(c=Cr(f))}var v=u.lineWidth;v&&(v/=!u.strokeNoScale&&t.transform?t.transform[0]:1);var s={cursor:"pointer"};c&&(s.fill=c),u.stroke&&(s.stroke=u.stroke),v&&(s["stroke-width"]=v),Hh(s,r,i,!0)}}}(t,c,r),U7(p,t.id+"",c)}function HS(t,r){if(t instanceof IM)return Hw(t,r);if(t instanceof ID)return function(t,r){var i,s=t.style,u=s.image;if(u&&!SS(u)){;if((i=u)&&SS(i.src))u=u.src;else Hf(u)&&(u=u.toDataURL())}if(!!u){var c=s.x||0,h=s.y||0,p={href:u,width:s.width,height:s.height};return c&&(p.x=c),h&&(p.y=h),Hy(p,t.transform),Hg(p,s,t,r),Hm(p,t),r.animation&&Hc(t,p,r),U7("image",t.id+"",p)}}(t,r);if(t instanceof IC)return function(t,r){var i,s,u,c=t.style,h=c.text;if(null!=h&&(h+=""),!(!h||isNaN(c.x)||isNaN(c.y))){var p=c.font||wJ,f=c.x||0;var v=(i=c.y||0,s=Tn(p),"top"===(u=c.textBaseline)?i+=s/2:"bottom"===u&&(i-=s/2),i),y={"dominant-baseline":"central","text-anchor":Cu[c.textAlign]||c.textAlign};if(IY(c)){var x="",_=c.fontStyle,b=Ij(c.fontSize);if(!parseFloat(b))return;var w=c.fontFamily||w$,S=c.fontWeight;x+="font-size:"+b+";font-family:"+w+";",_&&"normal"!==_&&(x+="font-style:"+_+";"),S&&"normal"!==S&&(x+="font-weight:"+S+";"),y.style=x}else y.style="font: "+p;return h.match(/\s/)&&(y["xml:space"]="preserve"),f&&(y.x=f),v&&(y.y=v),Hy(y,t.transform),Hg(y,c,t,r),Hm(y,t),r.animation&&Hc(t,y,r),U7("text",t.id+"",y,void 0,h)}}(t,r)}function HM(t,r,i,s){var u,c=t[i],h={gradientUnits:c.global?"userSpaceOnUse":"objectBoundingBox"};if(Cd(c))u="linearGradient",h.x1=c.x,h.y1=c.y,h.x2=c.x2,h.y2=c.y2;else{if(!Cp(c))return;u="radialGradient",h.cx=SO(c.x,.5),h.cy=SO(c.y,.5),h.r=SO(c.r,.5)}for(var p=c.colorStops,f=[],v=0,y=p.length;v<y;++v){var x=100*Cl(p[v].offset)+"%",_=Ca(p[v].color),b=_.color,w=_.opacity,S={offset:x};S["stop-color"]=b,w<1&&(S["stop-opacity"]=w),f.push(U7("stop",v+"",S))}var M=He(U7(u,"",h,f)),A=s.gradientCache,C=A[M];!C&&(C=s.zrId+"-g"+s.gradientIdx++,A[M]=C,h.id=C,s.defs[C]=U7(u,C,h,f)),r[i]=Cg(C)}function HA(t,r,i,s){var u,c,h,p=t.style[i],f=t.getBoundingRect(),v={},y=p.repeat,x="no-repeat"===y,_="repeat-x"===y,b="repeat-y"===y;if(Cc(p)){var w,S=p.imageWidth,M=p.imageHeight,A=void 0,C=p.image;if(SS(C))A=C;else{;if((w=C)&&SS(w.src))A=C.src;else Hf(C)&&(A=C.toDataURL())}if("undefined"==typeof Image){var T="Image width/height must been given explictly in svg-ssr renderer.";Sz(S,T),Sz(M,T)}else if(null==S||null==M){var I=function(t,r){if(t){var i=t.elm,s=S||r.width,u=M||r.height;"pattern"===t.tag&&(_?(u=1,s/=f.width):b&&(s=1,u/=f.height)),t.attrs.width=s,t.attrs.height=u,i&&(i.setAttribute("width",s),i.setAttribute("height",u))}},D=Ew(A,null,t,function(t){x||I(R,t),I(u,t)});D&&D.width&&D.height&&(S=S||D.width,M=M||D.height)}u=U7("image","img",{href:A,width:S,height:M}),v.width=S,v.height=M}else p.svgElement&&(u=Sr(p.svgElement),v.width=p.svgWidth,v.height=p.svgHeight);if(!!u){x?c=h=1:_?(h=1,c=v.width/f.width):b?(c=1,h=v.height/f.height):v.patternUnits="userSpaceOnUse",null!=c&&!isNaN(c)&&(v.width=c),null!=h&&!isNaN(h)&&(v.height=h);var P=Cv(p);P&&(v.patternTransform=P);var R=U7("pattern","",v,[u]),L=He(R),k=s.patternCache,O=k[L];!O&&(O=s.zrId+"-p"+s.patternIdx++,k[L]=O,v.id=O,R=s.defs[O]=U7("pattern",O,v,[u])),r[i]=Cg(O)}}function HC(t){return document.createTextNode(t)}function HT(t,r,i){t.insertBefore(r,i)}function HE(t,r){t.removeChild(r)}function HI(t,r){t.appendChild(r)}function HD(t){return t.parentNode}function HP(t){return t.nextSibling}function HR(t,r){t.textContent=r}var HL=U7("","");function Hk(t){return void 0===t}function HO(t){return void 0!==t}function HB(t,r){var i=t.key===r.key;return t.tag===r.tag&&i}function HN(t){var r,i=t.children,s=t.tag;if(HO(s)){var u=t.elm=U8(s);if(HU(HL,t),Sb(i))for(r=0;r<i.length;++r){var c=i[r];null!=c&&HI(u,HN(c))}else HO(t.text)&&!SC(t.text)&&HI(u,HC(t.text))}else t.elm=HC(t.text);return t.elm}function HF(t,r,i,s,u){for(;s<=u;++s){var c=i[s];null!=c&&HT(t,HN(c),r)}}function Hz(t,r,i,s){for(;i<=s;++i){var u=r[i];null!=u&&(HO(u.tag)?HE(HD(u.elm),u.elm):HE(t,u.elm))}}function HU(t,r){var i,s=r.elm,u=t&&t.attrs||{},c=r.attrs||{};if(u!==c){for(i in c){var h=c[i];u[i]!==h&&(!0===h?s.setAttribute(i,""):!1===h?s.removeAttribute(i):"style"===i?s.style.cssText=h:120!==i.charCodeAt(0)?s.setAttribute(i,h):"xmlns:xlink"===i||"xmlns"===i?s.setAttributeNS("http://www.w3.org/2000/xmlns/",i,h):58===i.charCodeAt(3)?s.setAttributeNS("http://www.w3.org/XML/1998/namespace",i,h):58===i.charCodeAt(5)?s.setAttributeNS(U6,i,h):s.setAttribute(i,h))}for(i in u)!(i in c)&&s.removeAttribute(i)}}function HH(t,r){var i=r.elm=t.elm,s=t.children,u=r.children;if(t!==r)HU(t,r),Hk(r.text)?HO(s)&&HO(u)?s!==u&&!function(t,r,i){for(var s,u,c,h=0,p=0,f=r.length-1,v=r[0],y=r[f],x=i.length-1,_=i[0],b=i[x];h<=f&&p<=x;)null==v?v=r[++h]:null==y?y=r[--f]:null==_?_=i[++p]:null==b?b=i[--x]:HB(v,_)?(HH(v,_),v=r[++h],_=i[++p]):HB(y,b)?(HH(y,b),y=r[--f],b=i[--x]):HB(v,b)?(HH(v,b),HT(t,v.elm,HP(y.elm)),v=r[++h],b=i[--x]):(HB(y,_)?(HH(y,_),HT(t,y.elm,v.elm),y=r[--f]):(Hk(s)&&(s=function(t,r,i){for(var s={},u=r;u<=i;++u){var c=t[u].key;void 0!==c&&(s[c]=u)}return s}(r,h,f)),Hk(u=s[_.key])?HT(t,HN(_),v.elm):(c=r[u]).tag!==_.tag?HT(t,HN(_),v.elm):(HH(c,_),r[u]=void 0,HT(t,c.elm,v.elm))),_=i[++p]);(h<=f||p<=x)&&(h>f?HF(t,null==i[x+1]?null:i[x+1].elm,i,p,x):Hz(t,r,h,f))}(i,s,u):HO(u)?(HO(t.text)&&HR(i,""),HF(i,null,u,0,u.length-1)):HO(s)?Hz(i,s,0,s.length-1):HO(t.text)&&HR(i,""):t.text!==r.text&&(HO(s)&&Hz(i,s,0,s.length-1),HR(i,r.text))}var HG=0,HV=function(){function t(t,r,i){if(this.type="svg",this.refreshHover=HW("refreshHover"),this.configLayer=HW("configLayer"),this.storage=r,this._opts=i=So({},i),this.root=t,this._id="zr"+HG++,this._oldVNode=Hn(i.width,i.height),t&&!i.ssr){var s=this._viewport=document.createElement("div");s.style.cssText="position:relative;overflow:hidden";var u=this._svgDom=this._oldVNode.elm=U8("svg");HU(null,this._oldVNode),s.appendChild(u),t.appendChild(s)}this.resize(i.width,i.height)}return t.prototype.getType=function(){return this.type},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",!function(t,r){if(HB(t,r))HH(t,r);else{var i=t.elm,s=HD(i);HN(r),null!==s&&(HT(s,r.elm,HP(i)),Hz(s,[t],0,0))};}(this._oldVNode,t),this._oldVNode=t}},t.prototype.renderOneToVNode=function(t){return HS(t,Ht(this._id))},t.prototype.renderToVNode=function(t){t=t||{};var r=this.storage.getDisplayList(!0),i=this._width,s=this._height,u=Ht(this._id);u.animation=t.animation,u.willUpdate=t.willUpdate,u.compress=t.compress,u.emphasis=t.emphasis;var c=[],h=this._bgVNode=function(t,r,i,s){var u;if(i&&"none"!==i){if(u=U7("rect","bg",{width:t,height:r,x:"0",y:"0"}),Cf(i))HM({fill:i},u.attrs,"fill",s);else if(Ch(i))HA({style:{fill:i},dirty:Sq,getBoundingRect:function(){return{width:t,height:r}}},u.attrs,"fill",s);else{var c=Ca(i),h=c.color,p=c.opacity;u.attrs.fill=h,p<1&&(u.attrs["fill-opacity"]=p)}}return u}(i,s,this._backgroundColor,u);h&&c.push(h);var p=t.compress?null:this._mainVNode=U7("g","main",{},[]);this._paintList(r,u,p?p.children:c),p&&c.push(p);var f=Sf(Sy(u.defs),function(t){return u.defs[t]});if(f.length&&c.push(U7("defs","defs",{},f)),t.animation){var v,y,x,_,b,w,S,M,A=(v=u.cssNodes,y=u.cssAnims,b=" {"+(_=(x=x={newline:!0}).newline?"\n":""),w=_+"}",S=Sf(Sy(v),function(t){return t+b+Sf(Sy(v[t]),function(r){return r+":"+v[t][r]+";"}).join(_)+w}).join(_),M=Sf(Sy(y),function(t){return"@keyframes "+t+b+Sf(Sy(y[t]),function(r){return r+b+Sf(Sy(y[t][r]),function(i){var s=y[t][r][i];return"d"===i&&(s='path("'+s+'")'),i+":"+s+";"}).join(_)+w}).join(_)+w}).join(_),S||M?["<![CDATA[",S,M,"]]>"].join(_):"");if(A){var C=U7("style","stl",{},[],A);c.push(C)}}return Hn(i,s,c,t.useViewBox)},t.prototype.renderToString=function(t){return t=t||{},He(this.renderToVNode({animation:SO(t.cssAnimation,!0),emphasis:SO(t.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:SO(t.useViewBox,!0)}),{newline:!0})},t.prototype.setBackgroundColor=function(t){this._backgroundColor=t},t.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},t.prototype._paintList=function(t,r,i){for(var s,u,c=t.length,h=[],p=0,f=0,v=0;v<c;v++){var y=t[v];if(!y.invisible){var x=y.__clipPaths,_=x&&x.length||0,b=u&&u.length||0,w=void 0;for(w=Math.max(_-1,b-1);w>=0&&(!x||!u||x[w]!==u[w]);w--);for(var S=b-1;S>w;S--)s=h[--p-1];for(var M=w+1;M<_;M++){var A={};!function(t,r,i){var s=i.clipPathCache,u=i.defs,c=s[t.id];if(!c){var h={id:c=i.zrId+"-c"+i.clipPathIdx++};s[t.id]=c,u[c]=U7("clipPath",c,h,[Hw(t,i)])}r["clip-path"]=Cg(c)}(x[M],A,r);var C=U7("g","clip-g-"+f++,A,[]);(s?s.children:i).push(C),h[p++]=C,s=C}u=x;var T=HS(y,r);T&&(s?s.children:i).push(T)}}},t.prototype.resize=function(t,r){var i=this._opts,s=this.root,u=this._viewport;if(null!=t&&(i.width=t),null!=r&&(i.height=r),s&&u&&(u.style.display="none",t=Ni(s,0,i),r=Ni(s,1,i),u.style.display=""),this._width!==t||this._height!==r){if(this._width=t,this._height=r,u){var c=u.style;c.width=t+"px",c.height=r+"px"}if(Ch(this._backgroundColor))this.refresh();else{var h=this._svgDom;h&&(h.setAttribute("width",t),h.setAttribute("height",r));var p=this._bgVNode&&this._bgVNode.elm;p&&(p.setAttribute("width",t),p.setAttribute("height",r))}}},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},t.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},t.prototype.toDataURL=function(t){var r=this.renderToString(),i="data:image/svg+xml;";return t?(r=Cy(r))&&i+"base64,"+r:i+"charset=UTF-8,"+encodeURIComponent(r)},t}();function HW(t){return function(){}}var Hj=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.hasSymbolVisual=!0,i}return wU(r,t),r.prototype.getInitialData=function(t){return Fq(null,this,{useEncodeDefaulter:!0})},r.prototype.getLegendIcon=function(t){var r=new Tf,i=B8("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);r.add(i),i.setStyle(t.lineStyle);var s=this.getData().getVisual("symbol"),u=this.getData().getVisual("symbolRotate"),c="none"===s?"circle":s,h=.8*t.itemHeight,p=B8(c,(t.itemWidth-h)/2,(t.itemHeight-h)/2,h,h,t.itemStyle.fill);r.add(p),p.setStyle(t.itemStyle);var f="inherit"===t.iconRotate?u:t.iconRotate||0;return p.rotation=f*Math.PI/180,p.setOrigin([t.itemWidth/2,t.itemHeight/2]),c.indexOf("empty")>-1&&(p.style.stroke=p.style.fill,p.style.fill="#fff",p.style.lineWidth=2),r},r.type="series.line",r.dependencies=["grid","polar"],r.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},r}(kw);function HX(t,r){var i=t.mapDimensionsAll("defaultedLabel"),s=i.length;if(1===s){var u=Lx(t,r,i[0]);return null!=u?u+"":null}if(s){for(var c=[],h=0;h<i.length;h++)c.push(Lx(t,r,i[h]));return c.join(" ")}}function HY(t,r){var i=t.mapDimensionsAll("defaultedLabel");if(!Sb(r))return r+"";for(var s=[],u=0;u<i.length;u++){var c=t.getDimensionIndex(i[u]);c>=0&&s.push(r[c])}return s.join(" ")}var H$=function(t){function r(r,i,s,u){var c=t.call(this)||this;return c.updateData(r,i,s,u),c}return wU(r,t),r.prototype._createSymbol=function(t,r,i,s,u){this.removeAll();var c=B8(t,-1,-1,2,2,null,u);c.attr({z2:100,culling:!0,scaleX:s[0]/2,scaleY:s[1]/2}),c.drift=HJ,this._symbolType=t,this.add(c)},r.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},r.prototype.getSymbolType=function(){return this._symbolType},r.prototype.getSymbolPath=function(){return this.childAt(0)},r.prototype.highlight=function(){Dx(this.childAt(0))},r.prototype.downplay=function(){D_(this.childAt(0))},r.prototype.setZ=function(t,r){var i=this.childAt(0);i.zlevel=t,i.z=r},r.prototype.setDraggable=function(t,r){var i=this.childAt(0);i.draggable=t,i.cursor=!r&&t?"move":i.cursor},r.prototype.updateData=function(t,i,s,u){this.silent=!1;var c=t.getItemVisual(i,"symbol")||"circle",h=t.hostModel,p=r.getSymbolSize(t,i),f=c!==this._symbolType,v=u&&u.disableAnimation;if(f){var y=t.getItemVisual(i,"symbolKeepAspect");this._createSymbol(c,t,i,p,y)}else{var x=this.childAt(0);x.silent=!1;var _={scaleX:p[0]/2,scaleY:p[1]/2};v?x.attr(_):DW(x,_,h,i),DZ(x)}if(this._updateCommon(t,i,p,s,u),f){var x=this.childAt(0);if(!v){var _={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:x.style.opacity}};x.scaleX=x.scaleY=0,x.style.opacity=0,Dj(x,_,h,i)}}v&&this.childAt(0).stopAnimation("leave")},r.prototype._updateCommon=function(t,r,i,s,u){var c,h,p,f,v,y,x,_,b,w=this.childAt(0),S=t.hostModel;if(s&&(c=s.emphasisItemStyle,h=s.blurItemStyle,p=s.selectItemStyle,f=s.focus,v=s.blurScope,x=s.labelStatesModels,_=s.hoverScale,b=s.cursorStyle,y=s.emphasisDisabled),!s||t.hasItemOption){var M=s&&s.itemModel?s.itemModel:t.getItemModel(r),A=M.getModel("emphasis");c=A.getModel("itemStyle").getItemStyle(),p=M.getModel(["select","itemStyle"]).getItemStyle(),h=M.getModel(["blur","itemStyle"]).getItemStyle(),f=A.get("focus"),v=A.get("blurScope"),y=A.get("disabled"),x=D1(M),_=A.getShallow("scale"),b=M.getShallow("cursor")}var C=t.getItemVisual(r,"symbolRotate");w.attr("rotation",(C||0)*Math.PI/180||0);var T=Ne(t.getItemVisual(r,"symbolOffset"),i);T&&(w.x=T[0],w.y=T[1]),b&&w.attr("cursor",b);var I=t.getItemVisual(r,"style"),D=I.fill;if(w instanceof ID){var P=w.style;w.useStyle(So({image:P.image,x:P.x,y:P.y,width:P.width,height:P.height},I))}else w.__isEmptyBrush?w.useStyle(So({},I)):w.useStyle(I),w.style.decal=null,w.setColor(D,u&&u.symbolInnerColor),w.style.strokeNoScale=!0;var R=t.getItemVisual(r,"liftZ"),L=this._z2;null!=R?null==L&&(this._z2=w.z2,w.z2+=R):null!=L&&(w.z2=L,this._z2=null);var k=u&&u.useNameLabel;D0(w,x,{labelFetcher:S,labelDataIndex:r,defaultText:function(r){return k?t.getName(r):HX(t,r)},inheritColor:D,defaultOpacity:I.opacity});this._sizeX=i[0]/2,this._sizeY=i[1]/2;var O=w.ensureState("emphasis");O.style=c,w.ensureState("select").style=p,w.ensureState("blur").style=h;var B=null==_||!0===_?Math.max(1.1,3/this._sizeY):isFinite(_)&&_>0?+_:1;O.scaleX=this._sizeX*B,O.scaleY=this._sizeY*B,this.setSymbolScale(1),DR(this,f,v,y)},r.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},r.prototype.fadeOut=function(t,r,i){var s=this.childAt(0),u=I1(this).dataIndex,c=i&&i.animation;if(this.silent=s.silent=!0,i&&i.fadeLabel){var h=s.getTextContent();h&&DY(h,{style:{opacity:0}},r,{dataIndex:u,removeOpt:c,cb:function(){s.removeTextContent()}})}else s.removeTextContent();DY(s,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:u,cb:t,removeOpt:c})},r.getSymbolSize=function(t,r){return B7(t.getItemVisual(r,"symbolSize"))},r}(Tf);function HJ(t,r){this.parent.drift(t,r)}function HZ(t,r,i,s){return r&&!isNaN(r[0])&&!isNaN(r[1])&&!(s.isIgnore&&s.isIgnore(i))&&!(s.clipShape&&!s.clipShape.contain(r[0],r[1]))&&"none"!==t.getItemVisual(i,"symbol")}function HK(t){return null!=t&&!SC(t)&&(t={isIgnore:t}),t||{}}function Hq(t){var r=t.hostModel,i=r.getModel("emphasis");return{emphasisItemStyle:i.getModel("itemStyle").getItemStyle(),blurItemStyle:r.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:r.getModel(["select","itemStyle"]).getItemStyle(),focus:i.get("focus"),blurScope:i.get("blurScope"),emphasisDisabled:i.get("disabled"),hoverScale:i.get("scale"),labelStatesModels:D1(r),cursorStyle:r.get("cursor")}}var HQ=function(){function t(t){this.group=new Tf,this._SymbolCtor=t||H$}return t.prototype.updateData=function(t,r){this._progressiveEls=null,r=HK(r);var i=this.group,s=t.hostModel,u=this._data,c=this._SymbolCtor,h=r.disableAnimation,p=Hq(t),f={disableAnimation:h},v=r.getSymbolPoint||function(r){return t.getItemLayout(r)};!u&&i.removeAll(),t.diff(u).add(function(s){var u=v(s);if(HZ(t,u,s,r)){var h=new c(t,s,p,f);h.setPosition(u),t.setItemGraphicEl(s,h),i.add(h)}}).update(function(y,x){var _=u.getItemGraphicEl(x),b=v(y);if(!HZ(t,b,y,r)){i.remove(_);return}var w=t.getItemVisual(y,"symbol")||"circle",S=_&&_.getSymbolType&&_.getSymbolType();if(!_||S&&S!==w)i.remove(_),(_=new c(t,y,p,f)).setPosition(b);else{_.updateData(t,y,p,f);var M={x:b[0],y:b[1]};h?_.attr(M):DW(_,M,s)}i.add(_),t.setItemGraphicEl(y,_)}).remove(function(t){var r=u.getItemGraphicEl(t);r&&r.fadeOut(function(){i.remove(r)},s)}).execute(),this._getSymbolPoint=v,this._data=t},t.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(r,i){var s=t._getSymbolPoint(i);r.setPosition(s),r.markRedraw()})},t.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=Hq(t),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,r,i){function s(t){!t.isGroup&&(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],i=HK(i);for(var u=t.start;u<t.end;u++){var c=r.getItemLayout(u);if(HZ(r,c,u,i)){var h=new this._SymbolCtor(r,u,this._seriesScope);h.traverse(s),h.setPosition(c),this.group.add(h),r.setItemGraphicEl(u,h),this._progressiveEls.push(h)}}},t.prototype.eachRendered=function(t){Be(this._progressiveEls||this.group,t)},t.prototype.remove=function(t){var r=this.group,i=this._data;i&&t?i.eachItemGraphicEl(function(t){t.fadeOut(function(){r.remove(t)},i.hostModel)}):r.removeAll()},t}();function H0(t,r,i){var s=t.getBaseAxis(),u=t.getOtherAxis(s),c=function(t,r){var i=0,s=t.scale.getExtent();return"start"===r?i=s[0]:"end"===r?i=s[1]:SA(r)&&!isNaN(r)?i=r:s[0]>0?i=s[0]:s[1]<0&&(i=s[1]),i}(u,i),h=s.dim,p=u.dim,f=r.mapDimension(p),v=r.mapDimension(h),y="x"===p||"radius"===p?1:0,x=Sf(t.dimensions,function(t){return r.mapDimension(t)}),_=!1,b=r.getCalculationInfo("stackResultDimension");return FZ(r,x[0])&&(_=!0,x[0]=b),FZ(r,x[1])&&(_=!0,x[1]=b),{dataDimsForPoint:x,valueStart:c,valueAxisDim:p,baseAxisDim:h,stacked:!!_,valueDim:f,baseDim:v,baseDataOffset:y,stackedOverDimension:r.getCalculationInfo("stackedOverDimension")}}function H1(t,r,i,s){var u=NaN;t.stacked&&(u=i.get(i.getCalculationInfo("stackedOverDimension"),s)),isNaN(u)&&(u=t.valueStart);var c=t.baseDataOffset,h=[];return h[c]=i.get(t.baseDim,s),h[1-c]=u,r.dataToPoint(h)}var H2=Math.min,H3=Math.max;function H5(t,r){return isNaN(t)||isNaN(r)}function H4(t,r,i,s,u,c,h,p,f){for(var v,y,x,_,b,w,S=i,M=0;M<s;M++){var A=r[2*S],C=r[2*S+1];if(S>=u||S<0)break;if(H5(A,C)){if(f){S+=c;continue}break}if(S===i)t[c>0?"moveTo":"lineTo"](A,C),x=A,_=C;else{var T=A-v,I=C-y;if(T*T+I*I<.5){S+=c;continue}if(h>0){for(var D=S+c,P=r[2*D],R=r[2*D+1];P===A&&R===C&&M<s;)M++,D+=c,S+=c,P=r[2*D],R=r[2*D+1],A=r[2*S],C=r[2*S+1],T=A-v,I=C-y;var L=M+1;if(f)for(;H5(P,R)&&L<s;)L++,D+=c,P=r[2*D],R=r[2*D+1];var k=.5,O=0,B=0,N=void 0,F=void 0;if(L>=s||H5(P,R))b=A,w=C;else{O=P-v,B=R-y;var z=A-v,U=P-A,H=C-y,G=R-C,V=void 0,W=void 0;if("x"===p){V=Math.abs(z),W=Math.abs(U);var j=O>0?1:-1;b=A-j*V*h,w=C,N=A+j*W*h,F=C}else if("y"===p){V=Math.abs(H),W=Math.abs(G);var X=B>0?1:-1;b=A,w=C-X*V*h,N=A,F=C+X*W*h}else V=Math.sqrt(z*z+H*H),b=A-O*h*(1-(k=(W=Math.sqrt(U*U+G*G))/(W+V))),w=C-B*h*(1-k),N=A+O*h*k,F=C+B*h*k,N=H2(N,H3(P,A)),F=H2(F,H3(R,C)),N=H3(N,H2(P,A)),F=H3(F,H2(R,C)),O=N-A,B=F-C,b=A-O*V/W,w=C-B*V/W,b=H2(b,H3(v,A)),w=H2(w,H3(y,C)),b=H3(b,H2(v,A)),w=H3(w,H2(y,C)),O=A-b,B=C-w,N=A+O*W/V,F=C+B*W/V}t.bezierCurveTo(x,_,b,w,A,C),x=N,_=F}else t.lineTo(A,C)}v=A,y=C,S+=c}return M}var H6=function(){this.smooth=0,this.smoothConstraint=!0},H9=function(t){function r(r){var i=t.call(this,r)||this;return i.type="ec-polyline",i}return wU(r,t),r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new H6},r.prototype.buildPath=function(t,r){var i=r.points,s=0,u=i.length/2;if(r.connectNulls){for(;u>0&&H5(i[2*u-2],i[2*u-1]);u--);for(;s<u&&H5(i[2*s],i[2*s+1]);s++);}for(;s<u;)s+=H4(t,i,s,u,u,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},r.prototype.getPointOn=function(t,r){!this.path&&(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i,s,u=this.path.data,c=Iu.CMD,h="x"===r,p=[],f=0;f<u.length;){var v=u[f++],y=void 0,x=void 0,_=void 0,b=void 0,w=void 0,S=void 0,M=void 0;switch(v){case c.M:i=u[f++],s=u[f++];break;case c.L:if(y=u[f++],x=u[f++],(M=h?(t-i)/(y-i):(t-s)/(x-s))<=1&&M>=0){var A=h?(x-s)*M+s:(y-i)*M+i;return h?[t,A]:[A,t]}i=y,s=x;break;case c.C:y=u[f++],x=u[f++],_=u[f++],b=u[f++],w=u[f++],S=u[f++];var C=h?AC(i,y,_,w,t,p):AC(s,x,b,S,t,p);if(C>0)for(var T=0;T<C;T++){var I=p[T];if(I<=1&&I>=0){var A=h?AM(s,x,b,S,I):AM(i,y,_,w,I);return h?[t,A]:[A,t]}}i=w,s=S}}},r}(IM),H8=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r}(H6),H7=function(t){function r(r){var i=t.call(this,r)||this;return i.type="ec-polygon",i}return wU(r,t),r.prototype.getDefaultShape=function(){return new H8},r.prototype.buildPath=function(t,r){var i=r.points,s=r.stackedOnPoints,u=0,c=i.length/2,h=r.smoothMonotone;if(r.connectNulls){for(;c>0&&H5(i[2*c-2],i[2*c-1]);c--);for(;u<c&&H5(i[2*u],i[2*u+1]);u++);}for(;u<c;){var p=H4(t,i,u,c,c,1,r.smooth,h,r.connectNulls);H4(t,s,u+p-1,p,c,-1,r.stackedOnSmooth,h,r.connectNulls),u+=p+1,t.closePath()}},r}(IM);function Ge(t,r,i,s,u){var c=t.getArea(),h=c.x,p=c.y,f=c.width,v=c.height,y=i.get(["lineStyle","width"])||2;h-=y/2,p-=y/2,f+=y,v+=y,f=Math.ceil(f),h!==Math.floor(h)&&(h=Math.floor(h),f++);var x=new IF({shape:{x:h,y:p,width:f,height:v}});if(r){var _=t.getBaseAxis(),b=_.isHorizontal(),w=_.inverse;b?(w&&(x.shape.x+=f),x.shape.width=0):(!w&&(x.shape.y+=v),x.shape.height=0);var S=Sw(u)?function(t){u(t,x)}:null;Dj(x,{shape:{width:f,height:v,x:h,y:p}},i,null,s,S)}return x}function Gt(t,r,i){var s=t.getArea(),u=TE(s.r0,1),c=TE(s.r,1),h=new Ot({shape:{cx:TE(t.cx,1),cy:TE(t.cy,1),r0:u,r:c,startAngle:s.startAngle,endAngle:s.endAngle,clockwise:s.clockwise}});return r&&("angle"===t.getBaseAxis().dim?h.shape.endAngle=s.startAngle:h.shape.r=u,Dj(h,{shape:{endAngle:s.endAngle,r:c}},i)),h}function Gn(t,r,i,s,u){if(t){if("polar"===t.type)return Gt(t,r,i);else if("cartesian2d"===t.type)return Ge(t,r,i,s,u)}else;return null}function Gr(t,r){return t.type===r}function Gi(t,r){if(t.length===r.length){for(var i=0;i<t.length;i++)if(t[i]!==r[i])return;return!0}}function Ga(t){for(var r=1/0,i=1/0,s=-1/0,u=-1/0,c=0;c<t.length;){var h=t[c++],p=t[c++];!isNaN(h)&&(r=Math.min(h,r),s=Math.max(h,s)),!isNaN(p)&&(i=Math.min(p,i),u=Math.max(p,u))}return[[r,i],[s,u]]}function Go(t,r){var i=Ga(t),s=i[0],u=i[1],c=Ga(r),h=c[0],p=c[1];return Math.max(Math.abs(s[0]-h[0]),Math.abs(s[1]-h[1]),Math.abs(u[0]-p[0]),Math.abs(u[1]-p[1]))}function Gs(t){return SA(t)?t:t?.5:0}function Gl(t,r,i,s){var u=r.getBaseAxis(),c="x"===u.dim||"radius"===u.dim?0:1,h=[],p=0,f=[],v=[],y=[],x=[];if(s){for(p=0;p<t.length;p+=2)!isNaN(t[p])&&!isNaN(t[p+1])&&x.push(t[p],t[p+1]);t=x}for(p=0;p<t.length-2;p+=2)switch(y[0]=t[p+2],y[1]=t[p+3],v[0]=t[p],v[1]=t[p+1],h.push(v[0],v[1]),i){case"end":f[c]=y[c],f[1-c]=v[1-c],h.push(f[0],f[1]);break;case"middle":var _=(v[c]+y[c])/2,b=[];f[c]=b[c]=_,f[1-c]=v[1-c],b[1-c]=y[1-c],h.push(f[0],f[1]),h.push(b[0],b[1]);break;default:f[c]=v[c],f[1-c]=y[1-c],h.push(f[0],f[1])}return h.push(t[p++],t[p++]),h}function Gu(t,r){return[t[2*r],t[2*r+1]]}function Gc(t){if(t.get(["endLabel","show"]))return!0;for(var r=0;r<I9.length;r++)if(t.get([I9[r],"endLabel","show"]))return!0;return!1}function Gh(t,r,i,s){if(!Gr(r,"cartesian2d"))return Gt(r,i,s);var u=s.getModel("endLabel"),c=u.get("valueAnimation"),h=s.getData(),p={lastFrameIndex:0},f=Gc(s)?function(i,s){t._endLabelOnDuring(i,s,h,p,c,u,r)}:null,v=r.getBaseAxis().isHorizontal(),y=Ge(r,i,s,function(){var r=t._endLabel;r&&i&&null!=p.originalX&&r.attr({x:p.originalX,y:p.originalY})},f);if(!s.get("clip",!0)){var x=y.shape,_=Math.max(x.width,x.height);v?(x.y-=_,x.height+=2*_):(x.x-=_,x.width+=2*_)}return f&&f(1,y),y}var Gd=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.prototype.init=function(){var t=new Tf,r=new HQ;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=t},r.prototype.render=function(t,r,i){var s,u=this,c=t.coordinateSystem,h=this.group,p=t.getData(),f=t.getModel("lineStyle"),v=t.getModel("areaStyle"),y=p.getLayout("points")||[],x="polar"===c.type,_=this._coordSys,b=this._symbolDraw,w=this._polyline,S=this._polygon,M=this._lineGroup,A=!r.ssr&&t.get("animation"),C=!v.isEmpty(),T=v.get("origin"),I=H0(c,p,T),D=C&&function(t,r,i){if(!i.valueDim)return[];for(var s=r.count(),u=za(2*s),c=0;c<s;c++){var h=H1(i,t,r,c);u[2*c]=h[0],u[2*c+1]=h[1]}return u}(c,p,I),P=t.get("showSymbol"),R=t.get("connectNulls"),L=P&&!x&&function(t,r,i){var s=t.get("showAllSymbol"),u="auto"===s;if(s&&!u)return;var c=i.getAxesByScale("ordinal")[0];if(!(!c||u&&function(t,r){var i=t.getExtent(),s=Math.abs(i[1]-i[0])/t.scale.count();isNaN(s)&&(s=0);for(var u=r.count(),c=Math.max(1,Math.round(u/5)),h=0;h<u;h+=c)if(1.5*H$.getSymbolSize(r,h)[t.isHorizontal()?1:0]>s)return!1;return!0}(c,r))){var h=r.mapDimension(c.dim),p={};return Sp(c.getViewLabels(),function(t){p[c.scale.getRawOrdinalNumber(t.tickValue)]=1}),function(t){return!p.hasOwnProperty(r.get(h,t))}}}(t,p,c),k=this._data;k&&k.eachItemGraphicEl(function(t,r){t.__temp&&(h.remove(t),k.setItemGraphicEl(r,null))}),!P&&b.remove(),h.add(M);var O=!x&&t.get("step");c&&c.getArea&&t.get("clip",!0)&&(null!=(s=c.getArea()).width?(s.x-=.1,s.y-=.1,s.width+=.2,s.height+=.2):s.r0&&(s.r0-=.5,s.r+=.5)),this._clipShapeForSymbol=s;var B=function(t,r,i){var s,u,c=t.getVisual("visualMeta");if(!c||!c.length||!t.count()||"cartesian2d"!==r.type)return;for(var h=c.length-1;h>=0;h--){var p=t.getDimensionInfo(c[h].dimension);if("x"===(s=p&&p.coordDim)||"y"===s){u=c[h];break}}if(!!u){var f=r.getAxis(s),v=Sf(u.stops,function(t){return{coord:f.toGlobalCoord(f.dataToCoord(t.value)),color:t.color}}),y=v.length,x=u.outerColors.slice();y&&v[0].coord>v[y-1].coord&&(v.reverse(),x.reverse());var _=function(t,r){var i,s,u=[],c=t.length;function h(t,r,i){var s=t.coord,u=A4((i-s)/(r.coord-s),[t.color,r.color]);return{coord:i,color:u}}for(var p=0;p<c;p++){var f=t[p],v=f.coord;if(v<0)i=f;else if(v>r){s?u.push(h(s,f,r)):i&&u.push(h(i,f,0),h(i,f,r));break}else i&&(u.push(h(i,f,0)),i=null),u.push(f),s=f}return u}(v,"x"===s?i.getWidth():i.getHeight()),b=_.length;if(!b&&y)return v[0].coord<0?x[1]?x[1]:v[y-1].color:x[0]?x[0]:v[0].color;var w=_[0].coord-10,S=_[b-1].coord+10,M=S-w;if(M<.001)return"transparent";Sp(_,function(t){t.offset=(t.coord-w)/M}),_.push({offset:b?_[b-1].offset:.5,color:x[1]||"transparent"}),_.unshift({offset:b?_[0].offset:.5,color:x[0]||"transparent"});var A=new OC(0,0,0,0,_,!0);return A[s]=w,A[s+"2"]=S,A}}(p,c,i)||p.getVisual("style")[p.getVisual("drawType")];if(w&&_.type===c.type&&O===this._step){C&&!S?S=this._newPolygon(y,D):S&&!C&&(M.remove(S),S=this._polygon=null),!x&&this._initOrUpdateEndLabel(t,c,P4(B));var N=M.getClipPath();N?Dj(N,{shape:Gh(this,c,!1,t).shape},t):M.setClipPath(Gh(this,c,!0,t)),P&&b.updateData(p,{isIgnore:L,clipShape:s,disableAnimation:!0,getSymbolPoint:function(t){return[y[2*t],y[2*t+1]]}}),(!Gi(this._stackedOnPoints,D)||!Gi(this._points,y))&&(A?this._doUpdateAnimation(p,D,c,i,O,T,R):(O&&(y=Gl(y,c,O,R),D&&(D=Gl(D,c,O,R))),w.setShape({points:y}),S&&S.setShape({points:y,stackedOnPoints:D})))}else P&&b.updateData(p,{isIgnore:L,clipShape:s,disableAnimation:!0,getSymbolPoint:function(t){return[y[2*t],y[2*t+1]]}}),A&&this._initSymbolLabelAnimation(p,c,s),O&&(y=Gl(y,c,O,R),D&&(D=Gl(D,c,O,R))),w=this._newPolyline(y),C?S=this._newPolygon(y,D):S&&(M.remove(S),S=this._polygon=null),!x&&this._initOrUpdateEndLabel(t,c,P4(B)),M.setClipPath(Gh(this,c,!0,t));var F=t.getModel("emphasis"),z=F.get("focus"),U=F.get("blurScope"),H=F.get("disabled");w.useStyle(Ss(f.getLineStyle(),{fill:"none",stroke:B,lineJoin:"bevel"})),DB(w,t,"lineStyle"),w.style.lineWidth>0&&"bolder"===t.get(["emphasis","lineStyle","width"])&&(w.getState("emphasis").style.lineWidth=+w.style.lineWidth+1),I1(w).seriesIndex=t.seriesIndex,DR(w,z,U,H);var G=Gs(t.get("smooth")),V=t.get("smoothMonotone");if(w.setShape({smooth:G,smoothMonotone:V,connectNulls:R}),S){var W=p.getCalculationInfo("stackedOnSeries"),j=0;S.useStyle(Ss(v.getAreaStyle(),{fill:B,opacity:.7,lineJoin:"bevel",decal:p.getVisual("style").decal})),W&&(j=Gs(W.get("smooth"))),S.setShape({smooth:G,stackedOnSmooth:j,smoothMonotone:V,connectNulls:R}),DB(S,t,"areaStyle"),I1(S).seriesIndex=t.seriesIndex,DR(S,z,U,H)}var X=function(t){u._changePolyState(t)};p.eachItemGraphicEl(function(t){t&&(t.onHoverStateChange=X)}),this._polyline.onHoverStateChange=X,this._data=p,this._coordSys=c,this._stackedOnPoints=D,this._points=y,this._step=O,this._valueOrigin=T,t.get("triggerLineEvent")&&(this.packEventData(t,w),S&&this.packEventData(t,S))},r.prototype.packEventData=function(t,r){I1(r).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},r.prototype.highlight=function(t,r,i,s){var u=t.getData(),c=T8(u,s);if(this._changePolyState("emphasis"),c instanceof Array||null==c||!(c>=0))Bu.prototype.highlight.call(this,t,r,i,s);else{var h=u.getLayout("points"),p=u.getItemGraphicEl(c);if(!p){var f=h[2*c],v=h[2*c+1];if(isNaN(f)||isNaN(v)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(f,v))return;var y=t.get("zlevel")||0,x=t.get("z")||0;(p=new H$(u,c)).x=f,p.y=v,p.setZ(y,x);var _=p.getSymbolPath().getTextContent();_&&(_.zlevel=y,_.z=x,_.z2=this._polyline.z2+1),p.__temp=!0,u.setItemGraphicEl(c,p),p.stopSymbolAnimation(!0),this.group.add(p)}p.highlight()}},r.prototype.downplay=function(t,r,i,s){var u=t.getData(),c=T8(u,s);if(this._changePolyState("normal"),null!=c&&c>=0){var h=u.getItemGraphicEl(c);h&&(h.__temp?(u.setItemGraphicEl(c,null),this.group.remove(h)):h.downplay())}else Bu.prototype.downplay.call(this,t,r,i,s)},r.prototype._changePolyState=function(t){var r=this._polygon;Df(this._polyline,t),r&&Df(r,t)},r.prototype._newPolyline=function(t){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new H9({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},r.prototype._newPolygon=function(t,r){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new H7({shape:{points:t,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},r.prototype._initSymbolLabelAnimation=function(t,r,i){var s,u,c=r.getBaseAxis(),h=c.inverse;"cartesian2d"===r.type?(s=c.isHorizontal(),u=!1):"polar"===r.type&&(s="angle"===c.dim,u=!0);var p=t.hostModel,f=p.get("animationDuration");Sw(f)&&(f=f(null));var v=p.get("animationDelay")||0,y=Sw(v)?v(null):v;t.eachItemGraphicEl(function(t,c){if(t){var p=[t.x,t.y],x=void 0,_=void 0,b=void 0;if(i){if(u){var w=r.pointToCoord(p);s?(x=i.startAngle,_=i.endAngle,b=-w[1]/180*Math.PI):(x=i.r0,_=i.r,b=w[0])}else s?(x=i.x,_=i.x+i.width,b=t.x):(x=i.y+i.height,_=i.y,b=t.y)}var S=_===x?0:(b-x)/(_-x);h&&(S=1-S);var M=Sw(v)?v(c):f*S+y,A=t.getSymbolPath(),C=A.getTextContent();t.attr({scaleX:0,scaleY:0}),t.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:M}),C&&C.animateFrom({style:{opacity:0}},{duration:300,delay:M}),A.disableLabelAnimation=!0}})},r.prototype._initOrUpdateEndLabel=function(t,r,i){var s=t.getModel("endLabel");if(Gc(t)){var u,c,h,p,f=t.getData(),v=this._polyline,y=f.getLayout("points");if(!y){v.removeTextContent(),this._endLabel=null;return}var x=this._endLabel;!x&&((x=this._endLabel=new I0({z2:200})).ignoreClip=!0,v.setTextContent(this._endLabel),v.disableLabelAnimation=!0);var _=function(t){for(var r,i,s=t.length/2;s>0;s--){;if(r=t[2*s-2],i=t[2*s-1],!(isNaN(r)||isNaN(i)))break}return s-1}(y);if(_>=0){;D0(v,D1(t,"endLabel"),{inheritColor:i,labelFetcher:t,labelDataIndex:_,defaultText:function(t,r,i){return null!=i?HY(f,i):HX(f,t)},enableTextSetter:!0},(u=s,h=(c=r.getBaseAxis()).isHorizontal(),p=c.inverse,{normal:{align:u.get("align")||(h?p?"right":"left":"center"),verticalAlign:u.get("verticalAlign")||(h?"middle":p?"top":"bottom")}})),v.textConfig.position=null}}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},r.prototype._endLabelOnDuring=function(t,r,i,s,u,c,h){var p=this._endLabel,f=this._polyline;if(p){t<1&&null==s.originalX&&(s.originalX=p.x,s.originalY=p.y);var v=i.getLayout("points"),y=i.hostModel,x=y.get("connectNulls"),_=c.get("precision"),b=c.get("distance")||0,w=h.getBaseAxis(),S=w.isHorizontal(),M=w.inverse,A=r.shape,C=M?S?A.x:A.y+A.height:S?A.x+A.width:A.y,T=(S?b:0)*(M?-1:1),I=(S?0:-b)*(M?-1:1),D=S?"x":"y",P=function(t,r,i){for(var s,u,c=t.length/2,h="x"===i?0:1,p=0,f=-1,v=0;v<c;v++){if(!(isNaN(u=t[2*v+h])||isNaN(t[2*v+1-h]))){if(0===v){s=u;continue}if(s<=r&&u>=r||s>=r&&u<=r){f=v;break}p=v,s=u}}return{range:[p,f],t:(r-s)/(u-s)}}(v,C,D),R=P.range,L=R[1]-R[0],k=void 0;if(L>=1){if(L>1&&!x){var O=Gu(v,R[0]);p.attr({x:O[0]+T,y:O[1]+I}),u&&(k=y.getRawValue(R[0]))}else{var O=f.getPointOn(C,D);O&&p.attr({x:O[0]+T,y:O[1]+I});var B=y.getRawValue(R[0]),N=y.getRawValue(R[1]);u&&(k=El(i,_,B,N,P.t))}s.lastFrameIndex=R[0]}else{var F=1===t||s.lastFrameIndex>0?R[0]:0,O=Gu(v,F);u&&(k=y.getRawValue(F)),p.attr({x:O[0]+T,y:O[1]+I})}if(u){var z=D7(p);"function"==typeof z.setLabelText&&z.setLabelText(k)}}},r.prototype._doUpdateAnimation=function(t,r,i,s,u,c,h){var p=this._polyline,f=this._polygon,v=t.hostModel,y=function(t,r,i,s,u,c,h,p){for(var f,v,y=(f=t,v=[],r.diff(f).add(function(t){v.push({cmd:"+",idx:t})}).update(function(t,r){v.push({cmd:"=",idx:r,idx1:t})}).remove(function(t){v.push({cmd:"-",idx:t})}).execute(),v),x=[],_=[],b=[],w=[],S=[],M=[],A=[],C=H0(u,r,h),T=t.getLayout("points")||[],I=r.getLayout("points")||[],D=0;D<y.length;D++){var P=y[D],R=!0,L=void 0,k=void 0;switch(P.cmd){case"=":L=2*P.idx,k=2*P.idx1;var O=T[L],B=T[L+1],N=I[k],F=I[k+1];(isNaN(O)||isNaN(B))&&(O=N,B=F),x.push(O,B),_.push(N,F),b.push(i[L],i[L+1]),w.push(s[k],s[k+1]),A.push(r.getRawIndex(P.idx1));break;case"+":var z=P.idx,U=C.dataDimsForPoint,H=u.dataToPoint([r.get(U[0],z),r.get(U[1],z)]);k=2*z,x.push(H[0],H[1]),_.push(I[k],I[k+1]);var G=H1(C,u,r,z);b.push(G[0],G[1]),w.push(s[k],s[k+1]),A.push(r.getRawIndex(z));break;case"-":R=!1}R&&(S.push(P),M.push(M.length))}M.sort(function(t,r){return A[t]-A[r]});for(var V=x.length,W=za(V),j=za(V),X=za(V),Y=za(V),$=[],D=0;D<M.length;D++){var J=M[D],Z=2*D,K=2*J;W[Z]=x[K],W[Z+1]=x[K+1],j[Z]=_[K],j[Z+1]=_[K+1],X[Z]=b[K],X[Z+1]=b[K+1],Y[Z]=w[K],Y[Z+1]=w[K+1],$[D]=S[J]}return{current:W,next:j,stackedOnCurrent:X,stackedOnNext:Y,status:$}}(this._data,t,this._stackedOnPoints,r,this._coordSys,0,this._valueOrigin,0),x=y.current,_=y.stackedOnCurrent,b=y.next,w=y.stackedOnNext;if(u&&(x=Gl(y.current,i,u,h),_=Gl(y.stackedOnCurrent,i,u,h),b=Gl(y.next,i,u,h),w=Gl(y.stackedOnNext,i,u,h)),Go(x,b)>3e3||f&&Go(_,w)>3e3){p.stopAnimation(),p.setShape({points:b}),f&&(f.stopAnimation(),f.setShape({points:b,stackedOnPoints:w}));return}p.shape.__points=y.current,p.shape.points=x;var S={shape:{points:b}};y.current!==x&&(S.shape.__points=y.next),p.stopAnimation(),DW(p,S,v),f&&(f.setShape({points:x,stackedOnPoints:_}),f.stopAnimation(),DW(f,{shape:{stackedOnPoints:w}},v),p.shape.points!==f.shape.points&&(f.shape.points=p.shape.points));for(var M=[],A=y.status,C=0;C<A.length;C++)if("="===A[C].cmd){var T=t.getItemGraphicEl(A[C].idx1);T&&M.push({el:T,ptIdx:C})}p.animators&&p.animators.length&&p.animators[0].during(function(){f&&f.dirtyShape();for(var t=p.shape.__points,r=0;r<M.length;r++){var i=M[r].el,s=2*M[r].ptIdx;i.x=t[s],i.y=t[s+1],i.markRedraw()}})},r.prototype.remove=function(t){var r=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(t,s){t.__temp&&(r.remove(t),i.setItemGraphicEl(s,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},r.type="line",r}(Bu);function Gp(t,r){return{seriesType:t,plan:kA(),reset:function(t){var i=t.getData(),s=t.coordinateSystem,u=t.pipelineContext,c=r||u.large;if(!!s){var h=Sf(s.dimensions,function(t){return i.mapDimension(t)}).slice(0,2),p=h.length,f=i.getCalculationInfo("stackResultDimension");FZ(i,h[0])&&(h[0]=f),FZ(i,h[1])&&(h[1]=f);var v=i.getStore(),y=i.getDimensionIndex(h[0]),x=i.getDimensionIndex(h[1]);return p&&{progress:function(t,r){for(var i=t.end-t.start,u=c&&za(i*p),h=[],f=[],_=t.start,b=0;_<t.end;_++){var w=void 0;if(1===p){var S=v.get(y,_);w=s.dataToPoint(S,null,f)}else h[0]=v.get(y,_),h[1]=v.get(x,_),w=s.dataToPoint(h,null,f);c?(u[b++]=w[0],u[b++]=w[1]):r.setItemLayout(_,w.slice())}c&&r.setLayout("points",u)}}}}}}var Gf={average:function(t){for(var r=0,i=0,s=0;s<t.length;s++)!isNaN(t[s])&&(r+=t[s],i++);return 0===i?NaN:r/i},sum:function(t){for(var r=0,i=0;i<t.length;i++)r+=t[i]||0;return r},max:function(t){for(var r=-1/0,i=0;i<t.length;i++)t[i]>r&&(r=t[i]);return isFinite(r)?r:NaN},min:function(t){for(var r=1/0,i=0;i<t.length;i++)t[i]<r&&(r=t[i]);return isFinite(r)?r:NaN},minmax:function(t){for(var r=-1/0,i=-1/0,s=0;s<t.length;s++){var u=t[s],c=Math.abs(u);c>r&&(r=c,i=u)}return isFinite(i)?i:NaN},nearest:function(t){return t[0]}},Gg=function(t){return Math.round(t.length/2)};function Gm(t){return{seriesType:t,reset:function(t,r,i){var s=t.getData(),u=t.get("sampling"),c=t.coordinateSystem,h=s.count();if(h>10&&"cartesian2d"===c.type&&u){var p=c.getBaseAxis(),f=c.getOtherAxis(p),v=p.getExtent(),y=i.getDevicePixelRatio(),x=Math.round(h/(Math.abs(v[1]-v[0])*(y||1)));if(isFinite(x)&&x>1){"lttb"===u&&t.setData(s.lttbDownSample(s.mapDimension(f.dim),1/x));var _=void 0;SS(u)?_=Gf[u]:Sw(u)&&(_=u),_&&t.setData(s.downSample(s.mapDimension(f.dim),1/x,_,Gg))}}}}}var Gv=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.getInitialData=function(t,r){return Fq(null,this,{useEncodeDefaulter:!0})},r.prototype.getMarkerPosition=function(t,r,i){var s=this.coordinateSystem;if(s&&s.clampData){var u=s.clampData(t),c=s.dataToPoint(u);if(i)Sp(s.getAxes(),function(t,i){if("category"===t.type&&null!=r){var s=t.getTicksCoords(),h=t.getTickModel().get("alignWithLabel"),p=u[i],f="x1"===r[i]||"y1"===r[i];if(f&&!h&&(p+=1),!(s.length<2)){if(2===s.length){c[i]=t.toGlobalCoord(t.getExtent()[f?1:0]);return}for(var v=void 0,y=void 0,x=1,_=0;_<s.length;_++){var b=s[_].coord,w=_===s.length-1?s[_-1].tickValue+x:s[_].tickValue;if(w===p){y=b;break}if(w<p)v=b;else if(null!=v&&w>p){y=(b+v)/2;break}1===_&&(x=w-s[0].tickValue)}null==y&&(v?v&&(y=s[s.length-1].coord):y=s[0].coord),c[i]=t.toGlobalCoord(y)}}});else{var h=this.getData(),p=h.getLayout("offset"),f=h.getLayout("size"),v=s.getBaseAxis().isHorizontal()?0:1;c[v]+=p+f/2}return c}return[NaN,NaN]},r.type="series.__base_bar__",r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},r}(kw);kw.registerClass(Gv);var Gy=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.getInitialData=function(){return Fq(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},r.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},r.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>t&&(t=r),t},r.prototype.brushSelector=function(t,r,i){return i.rect(r.getItemLayout(t))},r.type="series.bar",r.dependencies=["grid","polar"],r.defaultOption=Pm(Gv.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),r}(Gv),Gx=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},G_=function(t){function r(r){var i=t.call(this,r)||this;return i.type="sausage",i}return wU(r,t),r.prototype.getDefaultShape=function(){return new Gx},r.prototype.buildPath=function(t,r){var i=r.cx,s=r.cy,u=Math.max(r.r0||0,0),c=Math.max(r.r,0),h=(c-u)*.5,p=u+h,f=r.startAngle,v=r.endAngle,y=r.clockwise,x=2*Math.PI,_=y?v-f<x:f-v<x;!_&&(f=v-(y?x:-x));var b=Math.cos(f),w=Math.sin(f),S=Math.cos(v),M=Math.sin(v);_?(t.moveTo(b*u+i,w*u+s),t.arc(b*p+i,w*p+s,h,-Math.PI+f,f,!y)):t.moveTo(b*c+i,w*c+s),t.arc(i,s,c,f,v,!y),t.arc(S*p+i,M*p+s,h,v-2*Math.PI,v-Math.PI,!y),0!==u&&t.arc(i,s,u,v,f,y)},r}(IM);function Gb(t,r,i){return r*Math.sin(t)*(i?-1:1)}function Gw(t,r,i){return r*Math.cos(t)*(i?1:-1)}function GS(t,r,i){var s=t.get("borderRadius");if(null==s)return i?{cornerRadius:0}:null;!Sb(s)&&(s=[s,s,s,s]);var u=Math.abs(r.r||0-r.r0||0);return{cornerRadius:Sf(s,function(t){return Tr(t,u)})}}var GM=Math.max,GA=Math.min,GC=function(t){function r(){var i=t.call(this)||this;return i.type=r.type,i._isFirstFrame=!0,i}return wU(r,t),r.prototype.render=function(t,r,i,s){this._model=t,this._removeOnRenderedListener(i),this._updateDrawMode(t);var u=t.get("coordinateSystem");("cartesian2d"===u||"polar"===u)&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,r,i):this._renderNormal(t,r,i,s))},r.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},r.prototype.incrementalRender=function(t,r){this._progressiveEls=[],this._incrementalRenderLarge(t,r)},r.prototype.eachRendered=function(t){Be(this._progressiveEls||this.group,t)},r.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(null==this._isLargeDraw||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},r.prototype._renderNormal=function(t,r,i,s){var u,c=this.group,h=t.getData(),p=this._data,f=t.coordinateSystem,v=f.getBaseAxis();"cartesian2d"===f.type?u=v.isHorizontal():"polar"===f.type&&(u="angle"===v.dim);var y=t.isAnimationEnabled()?t:null,x=function(t,r){var i=t.get("realtimeSort",!0),s=r.getBaseAxis();if(i&&"category"===s.type&&"cartesian2d"===r.type)return{baseAxis:s,otherAxis:r.getOtherAxis(s)}}(t,f);x&&this._enableRealtimeSort(x,h,i);var _=t.get("clip",!0)||x,b=function(t,r){var i=t.getArea&&t.getArea();if(Gr(t,"cartesian2d")){var s=t.getBaseAxis();if("category"!==s.type||!s.onBand){var u=r.getLayout("bandWidth");s.isHorizontal()?(i.x-=u,i.width+=2*u):(i.y-=u,i.height+=2*u)}}return i}(f,h);c.removeClipPath();var w=t.get("roundCap",!0),S=t.get("showBackground",!0),M=t.getModel("backgroundStyle"),A=M.get("borderRadius")||0,C=[],T=this._backgroundEls,I=s&&s.isInitSort,D=s&&"changeAxisOrder"===s.type;function P(t){var r=Gk[f.type](h,t),i=function(t,r,i){return new("polar"===t.type?Ot:IF)({shape:GH(r,i,t),silent:!0,z2:0})}(f,u,r);return i.useStyle(M.getItemStyle()),"cartesian2d"===f.type?i.setShape("r",A):i.setShape("cornerRadius",A),C[t]=i,i}h.diff(p).add(function(r){var i=h.getItemModel(r),s=Gk[f.type](h,r,i);if(S&&P(r),!!h.hasValue(r)&&!!GL[f.type](s)){var p=!1;_&&(p=GT[f.type](b,s));var M=GE[f.type](t,h,r,s,u,y,v.model,!1,w);x&&(M.forceLabelAnimation=!0),GB(M,h,r,i,s,t,u,"polar"===f.type),I?M.attr({shape:s}):x?GI(x,y,M,s,r,u,!1,!1):Dj(M,{shape:s},t,r),h.setItemGraphicEl(r,M),c.add(M),M.ignore=p}}).update(function(r,i){var s=h.getItemModel(r),R=Gk[f.type](h,r,s);if(S){var L=void 0;0===T.length?L=P(i):((L=T[i]).useStyle(M.getItemStyle()),"cartesian2d"===f.type?L.setShape("r",A):L.setShape("cornerRadius",A),C[r]=L);var k=Gk[f.type](h,r);DW(L,{shape:GH(u,k,f)},y,r)}var O=p.getItemGraphicEl(i);if(!h.hasValue(r)||!GL[f.type](R)){c.remove(O);return}var B=!1;if(_&&(B=GT[f.type](b,R))&&c.remove(O),O?DZ(O):O=GE[f.type](t,h,r,R,u,y,v.model,!!O,w),x&&(O.forceLabelAnimation=!0),D){var N=O.getTextContent();if(N){var F=D7(N);null!=F.prevValue&&(F.prevValue=F.value)}}else GB(O,h,r,s,R,t,u,"polar"===f.type);I?O.attr({shape:R}):x?GI(x,y,O,R,r,u,!0,D):DW(O,{shape:R},t,r,null),h.setItemGraphicEl(r,O),O.ignore=B,c.add(O)}).remove(function(r){var i=p.getItemGraphicEl(r);i&&DJ(i,t,r)}).execute();var R=this._backgroundGroup||(this._backgroundGroup=new Tf);R.removeAll();for(var L=0;L<C.length;++L)R.add(C[L]);c.add(R),this._backgroundEls=C,this._data=h},r.prototype._renderLarge=function(t,r,i){this._clear(),Gz(t,this.group),this._updateLargeClip(t)},r.prototype._incrementalRenderLarge=function(t,r){this._removeBackground(),Gz(r,this.group,this._progressiveEls,!0)},r.prototype._updateLargeClip=function(t){var r=t.get("clip",!0)&&Gn(t.coordinateSystem,!1,t),i=this.group;r?i.setClipPath(r):i.removeClipPath()},r.prototype._enableRealtimeSort=function(t,r,i){var s=this;if(!!r.count()){var u=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,t,i),this._isFirstFrame=!1;else{var c=function(t){var i=r.getItemGraphicEl(t),s=i&&i.shape;return s&&Math.abs(u.isHorizontal()?s.height:s.width)||0};this._onRendered=function(){s._updateSortWithinSameData(r,c,u,i)},i.getZr().on("rendered",this._onRendered)}}},r.prototype._dataSort=function(t,r,i){var s=[];return t.each(t.mapDimension(r.dim),function(t,r){var u=i(r);u=null==u?NaN:u,s.push({dataIndex:r,mappedValue:u,ordinalNumber:t})}),s.sort(function(t,r){return r.mappedValue-t.mappedValue}),{ordinalNumbers:Sf(s,function(t){return t.ordinalNumber})}},r.prototype._isOrderChangedWithinSameData=function(t,r,i){for(var s=i.scale,u=t.mapDimension(i.dim),c=Number.MAX_VALUE,h=0,p=s.getOrdinalMeta().categories.length;h<p;++h){var f=t.rawIndexOf(u,s.getRawOrdinalNumber(h)),v=f<0?Number.MIN_VALUE:r(t.indexOfRawIndex(f));if(v>c)return!0;c=v}return!1},r.prototype._isOrderDifferentInView=function(t,r){for(var i=r.scale,s=i.getExtent(),u=Math.max(0,s[0]),c=Math.min(s[1],i.getOrdinalMeta().categories.length-1);u<=c;++u)if(t.ordinalNumbers[u]!==i.getRawOrdinalNumber(u))return!0},r.prototype._updateSortWithinSameData=function(t,r,i,s){if(!!this._isOrderChangedWithinSameData(t,r,i)){var u=this._dataSort(t,i,r);this._isOrderDifferentInView(u,i)&&(this._removeOnRenderedListener(s),s.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:u}))}},r.prototype._dispatchInitSort=function(t,r,i){var s=r.baseAxis,u=this._dataSort(t,s,function(i){return t.get(t.mapDimension(r.otherAxis.dim),i)});i.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",isInitSort:!0,axisId:s.index,sortInfo:u})},r.prototype.remove=function(t,r){this._clear(this._model),this._removeOnRenderedListener(r)},r.prototype.dispose=function(t,r){this._removeOnRenderedListener(r)},r.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},r.prototype._clear=function(t){var r=this.group,i=this._data;t&&t.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(r){DJ(r,t,I1(r).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},r.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},r.type="bar",r}(Bu),GT={cartesian2d:function(t,r){var i=r.width<0?-1:1,s=r.height<0?-1:1;i<0&&(r.x+=r.width,r.width=-r.width),s<0&&(r.y+=r.height,r.height=-r.height);var u=t.x+t.width,c=t.y+t.height,h=GM(r.x,t.x),p=GA(r.x+r.width,u),f=GM(r.y,t.y),v=GA(r.y+r.height,c),y=p<h,x=v<f;return r.x=y&&h>u?p:h,r.y=x&&f>c?v:f,r.width=y?0:p-h,r.height=x?0:v-f,i<0&&(r.x+=r.width,r.width=-r.width),s<0&&(r.y+=r.height,r.height=-r.height),y||x},polar:function(t,r){var i=r.r0<=r.r?1:-1;if(i<0){var s=r.r;r.r=r.r0,r.r0=s}var u=GA(r.r,t.r),c=GM(r.r0,t.r0);r.r=u,r.r0=c;var h=u-c<0;if(i<0){var s=r.r;r.r=r.r0,r.r0=s}return h}},GE={cartesian2d:function(t,r,i,s,u,c,h,p,f){var v=new IF({shape:So({},s),z2:1});if(v.__dataIndex=i,v.name="item",c){var y=v.shape;y[u?"height":"width"]=0}return v},polar:function(t,r,i,s,u,c,h,p,f){var v,y,x,_=!u&&f?G_:Ot,b=new _({shape:s,z2:1});b.name="item";var w=GO(u);if(b.calculateTextPosition=(v=w,x=(y=y={isRoundCap:_===G_}).isRoundCap,function(t,r,i){var s=r.position;if(!s||s instanceof Array)return Ti(t,r,i);var u=v(s),c=null!=r.distance?r.distance:5,h=this.shape,p=h.cx,f=h.cy,y=h.r,_=h.r0,b=(y+_)/2,w=h.startAngle,S=h.endAngle,M=(w+S)/2,A=x?Math.abs(y-_)/2:0,C=Math.cos,T=Math.sin,I=p+y*C(w),D=f+y*T(w),P="left",R="top";switch(u){case"startArc":I=p+(_-c)*C(M),D=f+(_-c)*T(M),P="center",R="top";break;case"insideStartArc":I=p+(_+c)*C(M),D=f+(_+c)*T(M),P="center",R="bottom";break;case"startAngle":I=p+b*C(w)+Gb(w,c+A,!1),D=f+b*T(w)+Gw(w,c+A,!1),P="right",R="middle";break;case"insideStartAngle":I=p+b*C(w)+Gb(w,-c+A,!1),D=f+b*T(w)+Gw(w,-c+A,!1),P="left",R="middle";break;case"middle":I=p+b*C(M),D=f+b*T(M),P="center",R="middle";break;case"endArc":I=p+(y+c)*C(M),D=f+(y+c)*T(M),P="center",R="bottom";break;case"insideEndArc":I=p+(y-c)*C(M),D=f+(y-c)*T(M),P="center",R="top";break;case"endAngle":I=p+b*C(S)+Gb(S,c+A,!0),D=f+b*T(S)+Gw(S,c+A,!0),P="left",R="middle";break;case"insideEndAngle":I=p+b*C(S)+Gb(S,-c+A,!0),D=f+b*T(S)+Gw(S,-c+A,!0),P="right",R="middle";break;default:return Ti(t,r,i)}return(t=t||{}).x=I,t.y=D,t.align=P,t.verticalAlign=R,t}),c){var S=b.shape,M=u?"r":"endAngle",A={};S[M]=u?s.r0:s.startAngle,A[M]=s[M],(p?DW:Dj)(b,{shape:A},c)}return b}};function GI(t,r,i,s,u,c,h,p){var f,v;c?(v={x:s.x,width:s.width},f={y:s.y,height:s.height}):(v={y:s.y,height:s.height},f={x:s.x,width:s.width}),!p&&(h?DW:Dj)(i,{shape:f},r,u,null),(h?DW:Dj)(i,{shape:v},r?t.baseAxis.model:null,u)}function GD(t,r){for(var i=0;i<r.length;i++)if(!isFinite(t[r[i]]))return!0;return!1}var GP=["x","y","width","height"],GR=["cx","cy","r","startAngle","endAngle"],GL={cartesian2d:function(t){return!GD(t,GP)},polar:function(t){return!GD(t,GR)}},Gk={cartesian2d:function(t,r,i){var s=t.getItemLayout(r),u=i?function(t,r){var i=t.get(["itemStyle","borderColor"]);return i&&"none"!==i?Math.min(t.get(["itemStyle","borderWidth"])||0,isNaN(r.width)?Number.MAX_VALUE:Math.abs(r.width),isNaN(r.height)?Number.MAX_VALUE:Math.abs(r.height)):0}(i,s):0,c=s.width>0?1:-1,h=s.height>0?1:-1;return{x:s.x+c*u/2,y:s.y+h*u/2,width:s.width-c*u,height:s.height-h*u}},polar:function(t,r,i){var s=t.getItemLayout(r);return{cx:s.cx,cy:s.cy,r0:s.r0,r:s.r,startAngle:s.startAngle,endAngle:s.endAngle,clockwise:s.clockwise}}};function GO(t){var r;return r=t?"Arc":"Angle",function(t){switch(t){case"start":case"insideStart":case"end":case"insideEnd":return t+r;default:return t}}}function GB(t,r,i,s,u,c,h,p){var f,v=r.getItemVisual(i,"style");if(p){if(!c.get("roundCap")){var y=t.shape,x=GS(s.getModel("itemStyle"),y,!0);So(y,x),t.setShape(y)}}else{var _=s.get(["itemStyle","borderRadius"])||0;t.setShape("r",_)}t.useStyle(v);var b=s.getShallow("cursor");b&&t.attr("cursor",b);var w=p?h?u.r>=u.r0?"endArc":"startArc":u.endAngle>=u.startAngle?"endAngle":"startAngle":h?u.height>=0?"bottom":"top":u.width>=0?"right":"left",S=D1(s);D0(t,S,{labelFetcher:c,labelDataIndex:i,defaultText:HX(c.getData(),i),inheritColor:v.fill,defaultOpacity:v.opacity,defaultOutsidePosition:w});var M=t.getTextContent();if(p&&M){var A=s.get(["label","position"]);t.textConfig.inside="middle"===A||null,!function(t,r,i,s){if(SA(s)){t.setTextConfig({rotation:s});return}if(Sb(r)){t.setTextConfig({rotation:0});return}var u,c=t.shape,h=c.clockwise?c.startAngle:c.endAngle,p=c.clockwise?c.endAngle:c.startAngle,f=i(r);switch(f){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":u=(h+p)/2;break;case"startAngle":case"insideStartAngle":u=h;break;case"endAngle":case"insideEndAngle":u=p;break;default:t.setTextConfig({rotation:0});return}var v=1.5*Math.PI-u;"middle"===f&&v>Math.PI/2&&v<1.5*Math.PI&&(v-=Math.PI),t.setTextConfig({rotation:v})}(t,"outside"===A?w:A,GO(h),s.get(["label","rotate"]))}Pe(M,S,c.getRawValue(i),function(t){return HY(r,t)});var C=s.getModel(["emphasis"]);if(DR(t,C.get("focus"),C.get("blurScope"),C.get("disabled")),DB(t,s),null!=(f=u).startAngle&&null!=f.endAngle&&f.startAngle===f.endAngle)t.style.fill="none",t.style.stroke="none",Sp(t.states,function(t){t.style&&(t.style.fill=t.style.stroke="none")})}var GN=function(){},GF=function(t){function r(r){var i=t.call(this,r)||this;return i.type="largeBar",i}return wU(r,t),r.prototype.getDefaultShape=function(){return new GN},r.prototype.buildPath=function(t,r){for(var i=r.points,s=this.baseDimIdx,u=1-this.baseDimIdx,c=[],h=[],p=this.barWidth,f=0;f<i.length;f+=3)h[s]=p,h[u]=i[f+2],c[s]=i[f+s],c[u]=i[f+u],t.rect(c[0],c[1],h[0],h[1])},r}(IM);function Gz(t,r,i,s){var u=t.getData(),c=u.getLayout("valueAxisHorizontal")?1:0,h=u.getLayout("largeDataIndices"),p=u.getLayout("size"),f=t.getModel("backgroundStyle"),v=u.getLayout("largeBackgroundPoints");if(v){var y=new GF({shape:{points:v},incremental:!!s,silent:!0,z2:0});y.baseDimIdx=c,y.largeDataIndices=h,y.barWidth=p,y.useStyle(f.getItemStyle()),r.add(y),i&&i.push(y)}var x=new GF({shape:{points:u.getLayout("largePoints")},incremental:!!s,ignoreCoarsePointer:!0,z2:1});x.baseDimIdx=c,x.largeDataIndices=h,x.barWidth=p,r.add(x),x.useStyle(u.getVisual("style")),I1(x).seriesIndex=t.seriesIndex,!t.get("silent")&&(x.on("mousedown",GU),x.on("mousemove",GU)),i&&i.push(x)}var GU=Bp(function(t){var r=function(t,r,i){for(var s=t.baseDimIdx,u=1-s,c=t.shape.points,h=t.largeDataIndices,p=[],f=[],v=t.barWidth,y=0,x=c.length/3;y<x;y++){var _=3*y;if(f[s]=v,f[u]=c[_+2],p[s]=c[_+s],p[u]=c[_+u],f[u]<0&&(p[u]+=f[u],f[u]=-f[u]),r>=p[0]&&r<=p[0]+f[0]&&i>=p[1]&&i<=p[1]+f[1])return h[y]}return -1}(this,t.offsetX,t.offsetY);I1(this).dataIndex=r>=0?r:null},30,!1);function GH(t,r,i){if(Gr(i,"cartesian2d")){var s=i.getArea();return{x:t?r.x:s.x,y:t?s.y:r.y,width:t?r.width:s.width,height:t?s.height:r.height}}var s=i.getArea();return{cx:s.cx,cy:s.cy,r0:t?s.r0:r.r0,r:t?s.r:r.r,startAngle:t?r.startAngle:0,endAngle:t?r.endAngle:2*Math.PI}}var GG=2*Math.PI,GV=Math.PI/180;function GW(t,r){return Rt(t.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function Gj(t,r){var i,s,u=GW(t,r),c=t.get("center"),h=t.get("radius");!Sb(h)&&(h=[0,h]);var p=TT(u.width,r.getWidth()),f=TT(u.height,r.getHeight()),v=Math.min(p,f),y=TT(h[0],v/2),x=TT(h[1],v/2),_=t.coordinateSystem;if(_){var b=_.dataToPoint(c);i=b[0]||0,s=b[1]||0}else!Sb(c)&&(c=[c,c]),i=TT(c[0],p)+u.x,s=TT(c[1],f)+u.y;return{cx:i,cy:s,r0:y,r:x}}function GX(t,r,i){r.eachSeriesByType(t,function(t){var r=t.getData(),s=r.mapDimension("value"),u=GW(t,i),c=Gj(t,i),h=c.cx,p=c.cy,f=c.r,v=c.r0,y=-t.get("startAngle")*GV,x=t.get("endAngle"),_=t.get("padAngle")*GV;x="auto"===x?y-GG:-x*GV;var b=t.get("minAngle")*GV+_,w=0;r.each(s,function(t){!isNaN(t)&&w++});var S=r.getSum(s),M=Math.PI/(S||w)*2,A=t.get("clockwise"),C=t.get("roseType"),T=t.get("stillShowZeroSum"),I=r.getDataExtent(s);I[0]=0;var D=A?1:-1,P=[y,x],R=D*_/2;Il(P,!A),y=P[0],x=P[1];var L=GY(t);L.startAngle=y,L.endAngle=x,L.clockwise=A;var k=Math.abs(x-y),O=k,B=0,N=y;if(r.setLayout({viewRect:u,r:f}),r.each(s,function(t,i){if(isNaN(t)){r.setItemLayout(i,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:A,cx:h,cy:p,r0:v,r:C?NaN:f});return}(s="area"!==C?0===S&&T?M:t*M:k/w)<b?(s=b,O-=b):B+=t;var s,u=N+D*s,c=0,y=0;_>s?y=c=N+D*s/2:(c=N+R,y=u-R),r.setItemLayout(i,{angle:s,startAngle:c,endAngle:y,clockwise:A,cx:h,cy:p,r0:v,r:C?TC(t,I,[v,f]):f}),N=u}),O<GG&&w){if(O<=.001){var F=k/w;r.each(s,function(t,i){if(!isNaN(t)){var s=r.getItemLayout(i);s.angle=F;var u=0,c=0;F<_?c=u=y+D*(i+.5)*F:(u=y+D*i*F+R,c=y+D*(i+1)*F-R),s.startAngle=u,s.endAngle=c}})}else M=O/B,N=y,r.each(s,function(t,i){if(!isNaN(t)){var s=r.getItemLayout(i),u=s.angle===b?b:t*M,c=0,h=0;u<_?h=c=N+D*u/2:(c=N+R,h=N+D*u-R),s.startAngle=c,s.endAngle=h,N+=D*u}})}})}var GY=T7();function G$(t){return{seriesType:t,reset:function(t,r){var i=r.findComponents({mainType:"legend"});if(!!i&&!!i.length){var s=t.getData();s.filterSelf(function(t){for(var r=s.getName(t),u=0;u<i.length;u++)if(!i[u].isSelected(r))return!1;return!0})}}}}var GJ=Math.PI/180;function GZ(t,r,i,s,u,c,h,p,f,v){if(!(t.length<2)){for(var y=t.length,x=0;x<y;x++)if("outer"===t[x].position&&"labelLine"===t[x].labelAlignTo){var _=t[x].label.x-v;t[x].linePoints[1][0]+=_,t[x].label.x=v}UO(t,f,f+h)&&!function(t){for(var c={list:[],maxY:0},h={list:[],maxY:0},p=0;p<t.length;p++){if("none"===t[p].labelAlignTo){var f=t[p],v=f.label.y>i?h:c,y=Math.abs(f.label.y-i);if(y>=v.maxY){var x=f.label.x-r-f.len2*u,_=s+f.len,w=Math.abs(x)<_?Math.sqrt(y*y/(1-x*x/_/_)):_;v.rB=w,v.maxY=y}v.list.push(f)}}b(c),b(h)}(t)}function b(t){for(var c=t.rB,h=c*c,p=0;p<t.list.length;p++){var f=t.list[p],v=Math.abs(f.label.y-i),y=s+f.len,x=r+(Math.sqrt(y*y*(1-Math.abs(v*v/h)))+f.len2)*u,_=x-f.label.x,b=f.targetTextWidth-_*u;GK(f,b,!0),f.label.x=x}}}function GK(t,r,i){if(void 0===i&&(i=!1),null==t.labelStyleWidth){var s=t.label,u=s.style,c=t.rect,h=u.backgroundColor,p=u.padding,f=p?p[1]+p[3]:0,v=u.overflow,y=c.width+(h?0:f);if(r<y||i){var x=c.height;if(v&&v.match("break")){s.setStyle("backgroundColor",null),s.setStyle("width",r-f);var _=s.getBoundingRect();s.setStyle("width",Math.ceil(_.width)),s.setStyle("backgroundColor",h)}else{var b=r-f,w=r<y?b:i?b>t.unconstrainedWidth?null:b:null;s.setStyle("width",w)}var S=s.getBoundingRect();c.width=S.width;var M=(s.style.margin||0)+2.1;c.height=S.height+M,c.y-=(c.height-x)/2}}}function Gq(t){return"center"===t.position}var GQ=function(t){function r(r,i,s){var u=t.call(this)||this;u.z2=2;var c=new I0;return u.setTextContent(c),u.updateData(r,i,s,!0),u}return wU(r,t),r.prototype.updateData=function(t,r,i,s){var u=t.hostModel,c=t.getItemModel(r),h=c.getModel("emphasis"),p=t.getItemLayout(r),f=So(GS(c.getModel("itemStyle"),p,!0),p);if(isNaN(f.startAngle)){this.setShape(f);return}if(s){this.setShape(f);var v=u.getShallow("animationType");u.ecModel.ssr?(Dj(this,{scaleX:0,scaleY:0},u,{dataIndex:r,isFrom:!0}),this.originX=f.cx,this.originY=f.cy):"scale"===v?(this.shape.r=p.r0,Dj(this,{shape:{r:p.r}},u,r)):null!=i?(this.setShape({startAngle:i,endAngle:i}),Dj(this,{shape:{startAngle:p.startAngle,endAngle:p.endAngle}},u,r)):(this.shape.endAngle=p.startAngle,DW(this,{shape:{endAngle:p.endAngle}},u,r))}else DZ(this),DW(this,{shape:f},u,r);this.useStyle(t.getItemVisual(r,"style")),DB(this,c);var y=(p.startAngle+p.endAngle)/2,x=u.get("selectedOffset"),_=Math.cos(y)*x,b=Math.sin(y)*x,w=c.getShallow("cursor");w&&this.attr("cursor",w),this._updateLabel(u,t,r),this.ensureState("emphasis").shape=So({r:p.r+(h.get("scale")&&h.get("scaleSize")||0)},GS(h.getModel("itemStyle"),p)),So(this.ensureState("select"),{x:_,y:b,shape:GS(c.getModel(["select","itemStyle"]),p)}),So(this.ensureState("blur"),{shape:GS(c.getModel(["blur","itemStyle"]),p)});var S=this.getTextGuideLine(),M=this.getTextContent();S&&So(S.ensureState("select"),{x:_,y:b}),So(M.ensureState("select"),{x:_,y:b}),DR(this,h.get("focus"),h.get("blurScope"),h.get("disabled"))},r.prototype._updateLabel=function(t,r,i){var s=r.getItemModel(i),u=s.getModel("labelLine"),c=r.getItemVisual(i,"style"),h=c&&c.fill,p=c&&c.opacity;D0(this,D1(s),{labelFetcher:r.hostModel,labelDataIndex:i,inheritColor:h,defaultOpacity:p,defaultText:t.getFormattedLabel(i,"normal")||r.getName(i)});var f=this.getTextContent();this.setTextConfig({position:null,rotation:null}),f.attr({z2:10});var v=t.get(["label","position"]);if("outside"!==v&&"outer"!==v)this.removeTextGuideLine();else{var y=this.getTextGuideLine();!y&&(y=new Oh,this.setTextGuideLine(y)),UP(this,UR(s),{stroke:h,opacity:SB(u.get(["lineStyle","opacity"]),p,1)})}},r}(Ot),G0=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.ignoreLabelLineUpdate=!0,r}return wU(r,t),r.prototype.render=function(t,r,i,s){var u,c=t.getData(),h=this._data,p=this.group;if(!h&&c.count()>0){for(var f=c.getItemLayout(0),v=1;isNaN(f&&f.startAngle)&&v<c.count();++v)f=c.getItemLayout(v);f&&(u=f.startAngle)}if(this._emptyCircleSector&&p.remove(this._emptyCircleSector),0===c.count()&&t.get("showEmptyCircle")){var y=GY(t),x=new Ot({shape:So(Gj(t,i),y)});x.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=x,p.add(x)}c.diff(h).add(function(t){var r=new GQ(c,t,u);c.setItemGraphicEl(t,r),p.add(r)}).update(function(t,r){var i=h.getItemGraphicEl(r);i.updateData(c,t,u),i.off("click"),p.add(i),c.setItemGraphicEl(t,i)}).remove(function(r){DJ(h.getItemGraphicEl(r),t,r)}).execute(),!function(t){var r,i,s=t.getData(),u=[],c=!1,h=(t.get("minShowLabelAngle")||0)*GJ,p=s.getLayout("viewRect"),f=s.getLayout("r"),v=p.width,y=p.x,x=p.y,_=p.height;function b(t){t.ignore=!0}s.each(function(t){var p,x,_,w,S=s.getItemGraphicEl(t),M=S.shape,A=S.getTextContent(),C=S.getTextGuideLine(),T=s.getItemModel(t),I=T.getModel("label"),D=I.get("position")||T.get(["emphasis","label","position"]),P=I.get("distanceToLabelLine"),R=I.get("alignTo"),L=TT(I.get("edgeDistance"),v),k=I.get("bleedMargin"),O=T.getModel("labelLine"),B=O.get("length");B=TT(B,v);var N=O.get("length2");if(N=TT(N,v),Math.abs(M.endAngle-M.startAngle)<h){Sp(A.states,b),A.ignore=!0,C&&(Sp(C.states,b),C.ignore=!0);return}if(!!function(t){if(!t.ignore)return!0;for(var r in t.states)if(!1===t.states[r].ignore)return!0;return!1}(A)){var F=(M.startAngle+M.endAngle)/2,z=Math.cos(F),U=Math.sin(F);r=M.cx,i=M.cy;var H="inside"===D||"inner"===D;if("center"===D)p=M.cx,x=M.cy,w="center";else{var G=(H?(M.r+M.r0)/2*z:M.r*z)+r,V=(H?(M.r+M.r0)/2*U:M.r*U)+i;if(p=G+3*z,x=V+3*U,!H){var W=G+z*(B+f-M.r),j=V+U*(B+f-M.r),X=W+(z<0?-1:1)*N;p="edge"===R?z<0?y+L:y+v-L:X+(z<0?-P:P),x=j,_=[[G,V],[W,j],[X,j]]}w=H?"center":"edge"===R?z>0?"right":"left":z>0?"left":"right"}var Y=Math.PI,$=0,J=I.get("rotate");if(SA(J))$=Y/180*J;else if("center"===D)$=0;else if("radial"===J||!0===J)$=z<0?-F+Y:-F;else if("tangential"===J&&"outside"!==D&&"outer"!==D){var Z=Math.atan2(z,U);Z<0&&(Z=2*Y+Z),U>0&&(Z=Y+Z),$=Z-Y}if(c=!!$,A.x=p,A.y=x,A.rotation=$,A.setStyle({verticalAlign:"middle"}),H){A.setStyle({align:w});var K=A.states.select;K&&(K.x+=A.x,K.y+=A.y)}else{var q=A.getBoundingRect().clone();q.applyTransform(A.getComputedTransform());var Q=(A.style.margin||0)+2.1;q.y-=Q/2,q.height+=Q,u.push({label:A,labelLine:C,position:D,len:B,len2:N,minTurnAngle:O.get("minTurnAngle"),maxSurfaceAngle:O.get("maxSurfaceAngle"),surfaceNormal:new MZ(z,U),linePoints:_,textAlign:w,labelDistance:P,labelAlignTo:R,edgeDistance:L,bleedMargin:k,rect:q,unconstrainedWidth:q.width,labelStyleWidth:A.style.width})}S.setTextConfig({inside:H})}}),!c&&t.get("avoidLabelOverlap")&&!function(t,r,i,s,u,c,h,p){for(var f=[],v=[],y=Number.MAX_VALUE,x=-Number.MAX_VALUE,_=0;_<t.length;_++){var b=t[_].label;if(!Gq(t[_]))b.x<r?(y=Math.min(y,b.x),f.push(t[_])):(x=Math.max(x,b.x),v.push(t[_]))}for(var _=0;_<t.length;_++){var w=t[_];if(!Gq(w)&&w.linePoints){if(null!=w.labelStyleWidth)continue;var b=w.label,S=w.linePoints,M=void 0;M="edge"===w.labelAlignTo?b.x<r?S[2][0]-w.labelDistance-h-w.edgeDistance:h+u-w.edgeDistance-S[2][0]-w.labelDistance:"labelLine"===w.labelAlignTo?b.x<r?y-h-w.bleedMargin:h+u-x-w.bleedMargin:b.x<r?b.x-h-w.bleedMargin:h+u-b.x-w.bleedMargin,w.targetTextWidth=M,GK(w,M)}}GZ(v,r,i,s,1,u,c,h,p,x),GZ(f,r,i,s,-1,u,c,h,p,y);for(var _=0;_<t.length;_++){var w=t[_];if(!Gq(w)&&w.linePoints){var b=w.label,S=w.linePoints,A="edge"===w.labelAlignTo,C=b.style.padding,T=C?C[1]+C[3]:0,I=b.style.backgroundColor?0:T,D=w.rect.width+I,P=S[1][0]-S[2][0];A?b.x<r?S[2][0]=h+w.edgeDistance+D+w.labelDistance:S[2][0]=h+u-w.edgeDistance-D-w.labelDistance:(b.x<r?S[2][0]=b.x+w.labelDistance:S[2][0]=b.x-w.labelDistance,S[1][0]=S[2][0]+P),S[1][1]=S[2][1]=b.y}}}(u,r,i,f,v,_,y,x);for(var w=0;w<u.length;w++){var S=u[w],M=S.label,A=S.labelLine,C=isNaN(M.x)||isNaN(M.y);if(M){M.setStyle({align:S.textAlign}),C&&(Sp(M.states,b),M.ignore=!0);var T=M.states.select;T&&(T.x+=M.x,T.y+=M.y)}if(A){var I=S.linePoints;C||!I?(Sp(A.states,b),A.ignore=!0):(UE(I,S.minTurnAngle),!function(t,r,i){if(!(i<=180&&i>0))return;i=i/180*Math.PI,U_.fromArray(t[0]),Ub.fromArray(t[1]),Uw.fromArray(t[2]),MZ.sub(US,Ub,U_),MZ.sub(UM,Uw,Ub);var s=US.len(),u=UM.len();if(!(s<.001)&&!(u<.001)){if(US.scale(1/s),UM.scale(1/u),US.dot(r)<Math.cos(i)){var c=Uv(Ub.x,Ub.y,Uw.x,Uw.y,U_.x,U_.y,UC,!1);UT.fromArray(UC);var h=Math.PI/2,p=h+Math.acos(UM.dot(r))-i;if(p>=h)MZ.copy(UT,Uw);else{UT.scaleAndAdd(UM,c/Math.tan(Math.PI/2-p));var f=Uw.x!==Ub.x?(UT.x-Ub.x)/(Uw.x-Ub.x):(UT.y-Ub.y)/(Uw.y-Ub.y);if(isNaN(f))return;f<0?MZ.copy(UT,Ub):f>1&&MZ.copy(UT,Uw)}UT.toArray(t[1])}}}(I,S.surfaceNormal,S.maxSurfaceAngle),A.setShape({points:I}),M.__hostTarget.textGuideLineConfig={anchor:new MZ(I[0][0],I[0][1])})}}}(t),"expansion"!==t.get("animationTypeUpdate")&&(this._data=c)},r.prototype.dispose=function(){},r.prototype.containPoint=function(t,r){var i=r.getData().getItemLayout(0);if(i){var s=t[0]-i.cx,u=t[1]-i.cy,c=Math.sqrt(s*s+u*u);return c<=i.r&&c>=i.r0}},r.type="pie",r}(Bu);function G1(t,r,i){r=Sb(r)&&{coordDimensions:r}||So({encodeDefine:t.getEncode()},r);var s=t.getSource(),u=new FV(Fj(s,r).dimensions,t);return u.initData(s,i),u}var G2=function(){function t(t,r){this._getDataWithEncodedVisual=t,this._getRawData=r}return t.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},t.prototype.containName=function(t){return this._getRawData().indexOfName(t)>=0},t.prototype.indexOfName=function(t){return this._getDataWithEncodedVisual().indexOfName(t)},t.prototype.getItemVisual=function(t,r){return this._getDataWithEncodedVisual().getItemVisual(t,r)},t}(),G3=T7(),G5=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.prototype.init=function(r){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new G2(Sx(this.getData,this),Sx(this.getRawData,this)),this._defaultLabelLine(r)},r.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},r.prototype.getInitialData=function(){return G1(this,{coordDimensions:["value"],encodeDefaulter:S_(RM,this)})},r.prototype.getDataParams=function(r){var i=this.getData(),s=G3(i),u=s.seats;if(!u){var c=[];i.each(i.mapDimension("value"),function(t){c.push(t)}),u=s.seats=Tk(c,i.hostModel.get("percentPrecision"))}var h=t.prototype.getDataParams.call(this,r);return h.percent=u[r]||0,h.$vars.push("percent"),h},r.prototype._defaultLabelLine=function(t){TQ(t,"labelLine",["show"]);var r=t.labelLine,i=t.emphasis.labelLine;r.show=r.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},r.type="series.pie",r.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},r}(kw),G4=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.hasSymbolVisual=!0,i}return wU(r,t),r.prototype.getInitialData=function(t,r){return Fq(null,this,{useEncodeDefaulter:!0})},r.prototype.getProgressive=function(){var t=this.option.progressive;return null==t?this.option.large?5e3:this.get("progressive"):t},r.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?1e4:this.get("progressiveThreshold"):t},r.prototype.brushSelector=function(t,r,i){return i.point(r.getItemLayout(t))},r.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},r.type="series.scatter",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},r}(kw),G6=function(){},G9=function(t){function r(r){var i=t.call(this,r)||this;return i._off=0,i.hoverDataIdx=-1,i}return wU(r,t),r.prototype.getDefaultShape=function(){return new G6},r.prototype.reset=function(){this.notClear=!1,this._off=0},r.prototype.buildPath=function(t,r){var i,s=r.points,u=r.size,c=this.symbolProxy,h=c.shape,p=t.getContext?t.getContext():t,f=p&&u[0]<4,v=this.softClipShape;if(f){this._ctx=p;return}for(this._ctx=null,i=this._off;i<s.length;){var y=s[i++],x=s[i++];if(!(isNaN(y)||isNaN(x))&&(!v||!!v.contain(y,x)))h.x=y-u[0]/2,h.y=x-u[1]/2,h.width=u[0],h.height=u[1],c.buildPath(t,h,!0)}this.incremental&&(this._off=i,this.notClear=!0)},r.prototype.afterBrush=function(){var t,r=this.shape,i=r.points,s=r.size,u=this._ctx,c=this.softClipShape;if(!!u){for(t=this._off;t<i.length;){var h=i[t++],p=i[t++];if(!(isNaN(h)||isNaN(p))&&(!c||!!c.contain(h,p)))u.fillRect(h-s[0]/2,p-s[1]/2,s[0],s[1])}this.incremental&&(this._off=t,this.notClear=!0)}},r.prototype.findDataIndex=function(t,r){for(var i=this.shape,s=i.points,u=i.size,c=Math.max(u[0],4),h=Math.max(u[1],4),p=s.length/2-1;p>=0;p--){var f=2*p,v=s[f]-c/2,y=s[f+1]-h/2;if(t>=v&&r>=y&&t<=v+c&&r<=y+h)return p}return -1},r.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),s=this.getBoundingRect();return(t=i[0],r=i[1],s.contain(t,r))?(this.hoverDataIdx=this.findDataIndex(t,r))>=0:(this.hoverDataIdx=-1,!1)},r.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape,i=r.points,s=r.size,u=s[0],c=s[1],h=1/0,p=1/0,f=-1/0,v=-1/0,y=0;y<i.length;){var x=i[y++],_=i[y++];h=Math.min(x,h),f=Math.max(x,f),p=Math.min(_,p),v=Math.max(_,v)}t=this._rect=new M4(h-u/2,p-c/2,f-h+u,v-p+c)}return t},r}(IM),G8=function(){function t(){this.group=new Tf}return t.prototype.updateData=function(t,r){this._clear();var i=this._create();i.setShape({points:t.getLayout("points")}),this._setCommon(i,t,r)},t.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(t){if(null!=t.startIndex){var i=(t.endIndex-t.startIndex)*2,s=8*t.startIndex;r=new Float32Array(r.buffer,s,i)}t.setShape("points",r),t.reset()})},t.prototype.incrementalPrepareUpdate=function(t){this._clear()},t.prototype.incrementalUpdate=function(t,r,i){var s=this._newAdded[0],u=r.getLayout("points"),c=s&&s.shape.points;if(c&&c.length<2e4){var h=c.length,p=new Float32Array(h+u.length);p.set(c),p.set(u,h),s.endIndex=t.end,s.setShape({points:p})}else{this._newAdded=[];var f=this._create();f.startIndex=t.start,f.endIndex=t.end,f.incremental=!0,f.setShape({points:u}),this._setCommon(f,r,i)}},t.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},t.prototype._create=function(){var t=new G9({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},t.prototype._setCommon=function(t,r,i){var s=r.hostModel;i=i||{};var u=r.getVisual("symbolSize");t.setShape("size",u instanceof Array?u:[u,u]),t.softClipShape=i.clipShape||null,t.symbolProxy=B8(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var c=t.shape.size[0]<4;t.useStyle(s.getModel("itemStyle").getItemStyle(c?["color","shadowBlur","shadowColor"]:["color"]));var h=r.getVisual("style"),p=h&&h.fill;p&&t.setColor(p);var f=I1(t);f.seriesIndex=s.seriesIndex,t.on("mousemove",function(r){f.dataIndex=null;var i=t.hoverDataIdx;i>=0&&(f.dataIndex=i+(t.startIndex||0))})},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),G7=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.render=function(t,r,i){var s=t.getData();this._updateSymbolDraw(s,t).updateData(s,{clipShape:this._getClipShape(t)}),this._finished=!0},r.prototype.incrementalPrepareRender=function(t,r,i){var s=t.getData();this._updateSymbolDraw(s,t).incrementalPrepareUpdate(s),this._finished=!1},r.prototype.incrementalRender=function(t,r,i){this._symbolDraw.incrementalUpdate(t,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=t.end===r.getData().count()},r.prototype.updateTransform=function(t,r,i){var s=t.getData();if(this.group.dirty(),!this._finished||s.count()>1e4)return{update:!0};var u=Gp("").reset(t,r,i);u.progress&&u.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout(s)},r.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},r.prototype._getClipShape=function(t){if(!!t.get("clip",!0)){var r=t.coordinateSystem;return r&&r.getArea&&r.getArea(.1)}},r.prototype._updateSymbolDraw=function(t,r){var i=this._symbolDraw,s=r.pipelineContext.large;return(!i||s!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=s?new G8:new HQ,this._isLargeDraw=s,this.group.removeAll()),this.group.add(i.group),i},r.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},r.prototype.dispose=function(){},r.type="scatter",r}(Bu),Ve=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.type="grid",r.dependencies=["xAxis","yAxis"],r.layoutMode="box",r.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},r}(Ru),Vt=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Er).models[0]},r.type="cartesian2dAxis",r}(Ru);Sh(Vt,zG);var Vn={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Vr=Si({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Vn),Vi=Si({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},Vn),Va=Si({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},Vi),Vo=Ss({logBase:10},Vi);let Vs={category:Vr,value:Vi,time:Va,log:Vo};var Vl={value:1,category:1,time:1,log:1};function Vu(t,r,i,s){Sp(Vl,function(u,c){var h=Si(Si({},Vs[c],!0),s,!0),p=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r+"Axis."+c,i}return wU(i,t),i.prototype.mergeDefaultAndTheme=function(t,r){var i=Rr(this),s=i?Ra(t):{};Si(t,r.getTheme().get(c+"Axis")),Si(t,this.getDefaultOption()),t.type=Vc(t),i&&Ri(t,s,i)},i.prototype.optionUpdated=function(){"category"===this.option.type&&(this.__ordinalMeta=F1.createByAxisModel(this))},i.prototype.getCategories=function(t){var r=this.option;if("category"===r.type)return t?r.data:this.__ordinalMeta.categories},i.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},i.type=r+"Axis."+c,i.defaultOption=h,i}(i);t.registerComponentModel(p)}),t.registerSubTypeDefaulter(r+"Axis",Vc)}function Vc(t){return t.type||(t.data?"category":"value")}var Vh=function(){function t(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return t.prototype.getAxis=function(t){return this._axes[t]},t.prototype.getAxes=function(){return Sf(this._dimList,function(t){return this._axes[t]},this)},t.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),Sm(this.getAxes(),function(r){return r.scale.type===t})},t.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},t}(),Vd=["x","y"];function Vp(t){return"interval"===t.type||"time"===t.type}var Vf=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=Vd,r}return wU(r,t),r.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!Vp(t)||!Vp(r))return;var i=t.getExtent(),s=r.getExtent(),u=this.dataToPoint([i[0],s[0]]),c=this.dataToPoint([i[1],s[1]]),h=i[1]-i[0],p=s[1]-s[0];if(!!h&&!!p){var f=(c[0]-u[0])/h,v=(c[1]-u[1])/p,y=u[0]-i[0]*f,x=u[1]-s[0]*v,_=this._transform=[f,0,0,v,y,x];this._invTransform=M$([],_)}},r.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},r.prototype.containPoint=function(t){var r=this.getAxis("x"),i=this.getAxis("y");return r.contain(r.toLocalCoord(t[0]))&&i.contain(i.toLocalCoord(t[1]))},r.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},r.prototype.containZone=function(t,r){var i=this.dataToPoint(t),s=this.dataToPoint(r),u=this.getArea(),c=new M4(i[0],i[1],s[0]-i[0],s[1]-i[1]);return u.intersect(c)},r.prototype.dataToPoint=function(t,r,i){i=i||[];var s=t[0],u=t[1];if(this._transform&&null!=s&&isFinite(s)&&null!=u&&isFinite(u))return Md(i,t,this._transform);var c=this.getAxis("x"),h=this.getAxis("y");return i[0]=c.toGlobalCoord(c.dataToCoord(s,r)),i[1]=h.toGlobalCoord(h.dataToCoord(u,r)),i},r.prototype.clampData=function(t,r){var i=this.getAxis("x").scale,s=this.getAxis("y").scale,u=i.getExtent(),c=s.getExtent(),h=i.parse(t[0]),p=s.parse(t[1]);return(r=r||[])[0]=Math.min(Math.max(Math.min(u[0],u[1]),h),Math.max(u[0],u[1])),r[1]=Math.min(Math.max(Math.min(c[0],c[1]),p),Math.max(c[0],c[1])),r},r.prototype.pointToData=function(t,r){var i=[];if(this._invTransform)return Md(i,t,this._invTransform);var s=this.getAxis("x"),u=this.getAxis("y");return i[0]=s.coordToData(s.toLocalCoord(t[0]),r),i[1]=u.coordToData(u.toLocalCoord(t[1]),r),i},r.prototype.getOtherAxis=function(t){return this.getAxis("x"===t.dim?"y":"x")},r.prototype.getArea=function(t){t=t||0;var r=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),s=Math.min(r[0],r[1])-t,u=Math.min(i[0],i[1])-t,c=Math.max(r[0],r[1])-s+t,h=Math.max(i[0],i[1])-u+t;return new M4(s,u,c,h)},r}(Vh),Vg=function(t){function r(r,i,s,u,c){var h=t.call(this,r,i,s)||this;return h.index=0,h.type=u||"value",h.position=c||"bottom",h}return wU(r,t),r.prototype.isHorizontal=function(){var t=this.position;return"top"===t||"bottom"===t},r.prototype.getGlobalExtent=function(t){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),t&&r[0]>r[1]&&r.reverse(),r},r.prototype.pointToData=function(t,r){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),r)},r.prototype.setCategorySortInfo=function(t){if("category"!==this.type)return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},r}(Uu);function Vm(t,r,i){i=i||{};var s=t.coordinateSystem,u=r.axis,c={},h=u.getAxesOnZeroOf()[0],p=u.position,f=h?"onZero":p,v=u.dim,y=s.getRect(),x=[y.x,y.x+y.width,y.y,y.y+y.height],_={left:0,right:1,top:0,bottom:1,onZero:2},b=r.get("offset")||0,w="x"===v?[x[2]-b,x[3]+b]:[x[0]-b,x[1]+b];if(h){var S=h.toGlobalCoord(h.dataToCoord(0));w[_.onZero]=Math.max(Math.min(S,w[1]),w[0])}c.position=["y"===v?w[_[f]]:x[0],"x"===v?w[_[f]]:x[3]],c.rotation=Math.PI/2*("x"===v?0:1);c.labelDirection=c.tickDirection=c.nameDirection=({top:-1,bottom:1,left:-1,right:1})[p],c.labelOffset=h?w[_[p]]-w[_.onZero]:0,r.get(["axisTick","inside"])&&(c.tickDirection=-c.tickDirection),Sk(i.labelInside,r.get(["axisLabel","inside"]))&&(c.labelDirection=-c.labelDirection);var M=r.get(["axisLabel","rotate"]);return c.labelRotate="top"===f?-M:M,c.z2=1,c}function Vv(t){return"cartesian2d"===t.get("coordinateSystem")}function Vy(t){var r={xAxisModel:null,yAxisModel:null};return Sp(r,function(i,s){var u=s.replace(/Model$/,""),c=t.getReferringComponents(u,Er).models[0];r[s]=c}),r}var Vx=Math.log;function V_(t,r,i){var s=zn.prototype,u=s.getTicks.call(i),c=s.getTicks.call(i,!0),h=u.length-1,p=s.getInterval.call(i),f=zk(t,r),v=f.extent,y=f.fixMin,x=f.fixMax;if("log"===t.type){var _=Vx(t.base);v=[Vx(v[0])/_,Vx(v[1])/_]}t.setExtent(v[0],v[1]),t.calcNiceExtent({splitNumber:h,fixMin:y,fixMax:x});var b=s.getExtent.call(t);y&&(v[0]=b[0]),x&&(v[1]=b[1]);var w=s.getInterval.call(t),S=v[0],M=v[1];if(y&&x)w=(M-S)/h;else if(y)for(M=v[0]+w*h;M<v[1]&&isFinite(M)&&isFinite(v[1]);)w=F5(w),M=v[0]+w*h;else if(x)for(S=v[1]-w*h;S>v[0]&&isFinite(S)&&isFinite(v[0]);)w=F5(w),S=v[1]-w*h;else{t.getTicks().length-1>h&&(w=F5(w));var A=w*h;(S=TE((M=Math.ceil(v[1]/w)*w)-A))<0&&v[0]>=0?(S=0,M=TE(A)):M>0&&v[1]<=0&&(M=0,S=-TE(A))}var C=(u[0].value-c[0].value)/p,T=(u[h].value-c[h].value)/p;s.setExtent.call(t,S+w*C,M+w*T),s.setInterval.call(t,w),(C||T)&&s.setNiceExtent.call(t,S+w,M-w)}var Vb=function(){function t(t,r,i){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=Vd,this._initCartesian(t,r,i),this.model=t}return t.prototype.getRect=function(){return this._rect},t.prototype.update=function(t,r){var i=this._axesMap;function s(t){var r,i=Sy(t),s=i.length;if(!!s){for(var u=[],c=s-1;c>=0;c--){var h=t[+i[c]],p=h.model,f=h.scale;F3(f)&&p.get("alignTicks")&&null==p.get("interval")?u.push(h):(zO(f,p),F3(f)&&(r=h))}u.length&&(!r&&zO((r=u.pop()).scale,r.model),Sp(u,function(t){V_(t.scale,t.model,r.scale)}))}}this._updateScale(t,this.model),s(i.x),s(i.y);var u={};Sp(i.x,function(t){VS(i,"y",t,u)}),Sp(i.y,function(t){VS(i,"x",t,u)}),this.resize(this.model,r)},t.prototype.resize=function(t,r,i){var s=t.getBoxLayoutParams(),u=!i&&t.get("containLabel"),c=Rt(s,{width:r.getWidth(),height:r.getHeight()});this._rect=c;var h=this._axesList;function p(){Sp(h,function(t){var r=t.isHorizontal(),i=r?[0,c.width]:[0,c.height],s=t.inverse?1:0;t.setExtent(i[s],i[1-s]),function(t,r){var i=t.getExtent(),s=i[0]+i[1];t.toGlobalCoord="x"===t.dim?function(t){return t+r}:function(t){return s-t+r},t.toLocalCoord="x"===t.dim?function(t){return t-r}:function(t){return s-t+r}}(t,r?c.x:c.y)})}p(),u&&(Sp(h,function(t){if(!t.model.get(["axisLabel","inside"])){var r=function(t){var r,i,s,u=t.model,c=t.scale;if(!(!u.get(["axisLabel","show"])||c.isBlank())){var h=c.getExtent();i=c instanceof ze?c.count():(r=c.getTicks()).length;var p=t.getLabelModel(),f=zN(t),v=1;i>40&&(v=Math.ceil(i/40));for(var y=0;y<i;y+=v){var x=f(r?r[y]:{value:h[0]+y},y),_=function(t,r){var i=r*Math.PI/180,s=t.width,u=t.height,c=s*Math.abs(Math.cos(i))+Math.abs(u*Math.sin(i)),h=s*Math.abs(Math.sin(i))+Math.abs(u*Math.cos(i));return new M4(t.x,t.y,c,h)}(p.getTextRect(x),p.get("rotate")||0);s?s.union(_):s=_}return s}}(t);if(r){var i=t.isHorizontal()?"height":"width",s=t.model.get(["axisLabel","margin"]);c[i]-=r[i]+s,"top"===t.position?c.y+=r.height+s:"left"===t.position&&(c.x+=r.width+s)}}}),p()),Sp(this._coordsList,function(t){t.calcAffineTransform()})},t.prototype.getAxis=function(t,r){var i=this._axesMap[t];if(null!=i)return i[r||0]},t.prototype.getAxes=function(){return this._axesList.slice()},t.prototype.getCartesian=function(t,r){if(null!=t&&null!=r){var i="x"+t+"y"+r;return this._coordsMap[i]}SC(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var s=0,u=this._coordsList;s<u.length;s++)if(u[s].getAxis("x").index===t||u[s].getAxis("y").index===r)return u[s]},t.prototype.getCartesians=function(){return this._coordsList.slice()},t.prototype.convertToPixel=function(t,r,i){var s=this._findConvertTarget(r);return s.cartesian?s.cartesian.dataToPoint(i):s.axis?s.axis.toGlobalCoord(s.axis.dataToCoord(i)):null},t.prototype.convertFromPixel=function(t,r,i){var s=this._findConvertTarget(r);return s.cartesian?s.cartesian.pointToData(i):s.axis?s.axis.coordToData(s.axis.toLocalCoord(i)):null},t.prototype._findConvertTarget=function(t){var r,i,s=t.seriesModel,u=t.xAxisModel||s&&s.getReferringComponents("xAxis",Er).models[0],c=t.yAxisModel||s&&s.getReferringComponents("yAxis",Er).models[0],h=t.gridModel,p=this._coordsList;return s?0>Su(p,r=s.coordinateSystem)&&(r=null):u&&c?r=this.getCartesian(u.componentIndex,c.componentIndex):u?i=this.getAxis("x",u.componentIndex):c?i=this.getAxis("y",c.componentIndex):h&&h.coordinateSystem===this&&(r=this._coordsList[0]),{cartesian:r,axis:i}},t.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},t.prototype._initCartesian=function(t,r,i){var s=this,u=this,c={left:!1,right:!1,top:!1,bottom:!1},h={x:{},y:{}},p={x:0,y:0};if(r.eachComponent("xAxis",f("x"),this),r.eachComponent("yAxis",f("y"),this),!p.x||!p.y){this._axesMap={},this._axesList=[];return}function f(r){return function(i,s){if(!!Vw(i,t)){var f=i.get("position");"x"===r?"top"!==f&&"bottom"!==f&&(f=c.bottom?"top":"bottom"):"left"!==f&&"right"!==f&&(f=c.left?"right":"left"),c[f]=!0;var v=new Vg(r,zB(i),[0,0],i.get("type"),f),y="category"===v.type;v.onBand=y&&i.get("boundaryGap"),v.inverse=i.get("inverse"),i.axis=v,v.model=i,v.grid=u,v.index=s,u._axesList.push(v),h[r][s]=v,p[r]++}}}this._axesMap=h,Sp(h.x,function(r,i){Sp(h.y,function(u,c){var h="x"+i+"y"+c,p=new Vf(h);p.master=s,p.model=t,s._coordsMap[h]=p,s._coordsList.push(p),p.addAxis(r),p.addAxis(u)})})},t.prototype._updateScale=function(t,r){function i(t,r){Sp(zH(t,r.dim),function(i){r.scale.unionExtentFromData(t,i)})}Sp(this._axesList,function(t){if(t.scale.setExtent(1/0,-1/0),"category"===t.type){var r=t.model.get("categorySortInfo");t.scale.setSortInfo(r)}}),t.eachSeries(function(t){if(Vv(t)){var s=Vy(t),u=s.xAxisModel,c=s.yAxisModel;if(!!Vw(u,r)&&!!Vw(c,r)){var h=this.getCartesian(u.componentIndex,c.componentIndex),p=t.getData(),f=h.getAxis("x"),v=h.getAxis("y");i(p,f),i(p,v)}}},this)},t.prototype.getTooltipAxes=function(t){var r=[],i=[];return Sp(this.getCartesians(),function(s){var u=null!=t&&"auto"!==t?s.getAxis(t):s.getBaseAxis(),c=s.getOtherAxis(u);0>Su(r,u)&&r.push(u),0>Su(i,c)&&i.push(c)}),{baseAxes:r,otherAxes:i}},t.create=function(r,i){var s=[];return r.eachComponent("grid",function(u,c){var h=new t(u,r,i);h.name="grid_"+c,h.resize(u,i,!0),u.coordinateSystem=h,s.push(h)}),r.eachSeries(function(t){if(!!Vv(t)){var r=Vy(t),i=r.xAxisModel,s=r.yAxisModel,u=i.getCoordSysModel(),c=u.coordinateSystem;t.coordinateSystem=c.getCartesian(i.componentIndex,s.componentIndex)}}),s},t.dimensions=Vd,t}();function Vw(t,r){return t.getCoordSysModel()===r}function VS(t,r,i,s){i.getAxesOnZeroOf=function(){return u?[u]:[]};var u,c=t[r],h=i.model,p=h.get(["axisLine","onZero"]),f=h.get(["axisLine","onZeroAxisIndex"]);if(!!p){if(null!=f)VM(c[f])&&(u=c[f]);else for(var v in c)if(c.hasOwnProperty(v)&&VM(c[v])&&!s[y(c[v])]){u=c[v];break}u&&(s[y(u)]=!0)}function y(t){return t.dim+"_"+t.index}}function VM(t){var r,i,s;return t&&"category"!==t.type&&"time"!==t.type&&(i=(r=t.scale.getExtent())[0],s=r[1],!(i>0&&s>0||i<0&&s<0))}var VA=Math.PI,VC=function(){function t(t,r){this.group=new Tf,this.opt=r,this.axisModel=t,Ss(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var i=new Tf({x:r.position[0],y:r.position[1],rotation:r.rotation});i.updateTransform(),this._transformGroup=i}return t.prototype.hasBuilder=function(t){return!!VT[t]},t.prototype.add=function(t){VT[t](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(t,r,i){var s,u,c=TB(r-t);return TN(c)?(u=i>0?"top":"bottom",s="center"):TN(c-VA)?(u=i>0?"bottom":"top",s="center"):(u="middle",s=c>0&&c<VA?i>0?"right":"left":i>0?"left":"right"),{rotation:c,textAlign:s,textVerticalAlign:u}},t.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},t.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},t}(),VT={axisLine:function(t,r,i,s){var u=r.get(["axisLine","show"]);if("auto"===u&&t.handleAutoShown&&(u=t.handleAutoShown("axisLine")),!!u){var c=r.axis.getExtent(),h=s.transform,p=[c[0],0],f=[c[1],0],v=p[0]>f[0];h&&(Md(p,p,h),Md(f,f,h));var y=So({lineCap:"round"},r.getModel(["axisLine","lineStyle"]).getLineStyle()),x=new Og({shape:{x1:p[0],y1:p[1],x2:f[0],y2:f[1]},style:y,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});O$(x.shape,x.style.lineWidth),x.anid="line",i.add(x);var _=r.get(["axisLine","symbol"]);if(null!=_){var b=r.get(["axisLine","symbolSize"]);SS(_)&&(_=[_,_]),(SS(b)||SA(b))&&(b=[b,b]);var w=Ne(r.get(["axisLine","symbolOffset"])||0,b),S=b[0],M=b[1];Sp([{rotate:t.rotation+Math.PI/2,offset:w[0],r:0},{rotate:t.rotation-Math.PI/2,offset:w[1],r:Math.sqrt((p[0]-f[0])*(p[0]-f[0])+(p[1]-f[1])*(p[1]-f[1]))}],function(r,s){if("none"!==_[s]&&null!=_[s]){var u=B8(_[s],-S/2,-M/2,S,M,y.stroke,!0),c=r.r+r.offset,h=v?f:p;u.attr({rotation:r.rotate,x:h[0]+c*Math.cos(t.rotation),y:h[1]-c*Math.sin(t.rotation),silent:!0,z2:11}),i.add(u)}})}}},axisTickLabel:function(t,r,i,s){var u=function(t,r,i,s){var u=i.axis,c=i.getModel("axisTick"),h=c.get("show");if("auto"===h&&s.handleAutoShown&&(h=s.handleAutoShown("axisTick")),!(!h||u.scale.isBlank())){for(var p=c.getModel("lineStyle"),f=s.tickDirection*c.get("length"),v=VP(u.getTicksCoords(),r.transform,f,Ss(p.getLineStyle(),{stroke:i.get(["axisLine","lineStyle","color"])}),"ticks"),y=0;y<v.length;y++)t.add(v[y]);return v}}(i,s,r,t),c=function(t,r,i,s){var u=i.axis;if(!(!Sk(s.axisLabelShow,i.get(["axisLabel","show"]))||u.scale.isBlank())){var c=i.getModel("axisLabel"),h=c.get("margin"),p=u.getViewLabels(),f=(Sk(s.labelRotate,c.get("rotate"))||0)*VA/180,v=VC.innerTextLayout(s.rotation,f,s.labelDirection),y=i.getCategories&&i.getCategories(!0),x=[],_=VC.isLabelSilent(i),b=i.get("triggerEvent");return Sp(p,function(f,w){var S="ordinal"===u.scale.type?u.scale.getRawOrdinalNumber(f.tickValue):f.tickValue,M=f.formattedLabel,A=f.rawLabel,C=c;if(y&&y[S]){var T=y[S];SC(T)&&T.textStyle&&(C=new Pp(T.textStyle,c,i.ecModel))}var I=C.getTextColor()||i.get(["axisLine","lineStyle","color"]),D=u.dataToCoord(S),P=C.getShallow("align",!0)||v.textAlign,R=SO(C.getShallow("alignMinLabel",!0),P),L=SO(C.getShallow("alignMaxLabel",!0),P),k=C.getShallow("verticalAlign",!0)||C.getShallow("baseline",!0)||v.textVerticalAlign,O=SO(C.getShallow("verticalAlignMinLabel",!0),k),B=SO(C.getShallow("verticalAlignMaxLabel",!0),k),N=new I0({x:D,y:s.labelOffset+s.labelDirection*h,rotation:v.rotation,silent:_,z2:10+(f.level||0),style:D2(C,{text:M,align:0===w?R:w===p.length-1?L:P,verticalAlign:0===w?O:w===p.length-1?B:k,fill:Sw(I)?I("category"===u.type?A:"value"===u.type?S+"":S,w):I})});if(N.anid="label_"+S,b){var F=VC.makeAxisEventDataBase(i);F.targetType="axisLabel",F.value=A,F.tickIndex=w,"category"===u.type&&(F.dataIndex=S),I1(N).eventData=F}r.add(N),N.updateTransform(),x.push(N),t.add(N),N.decomposeTransform()}),x}}(i,s,r,t);(function(t,r,i){if(!zU(t.axis)){var s=t.get(["axisLabel","showMinLabel"]),u=t.get(["axisLabel","showMaxLabel"]);i=i||[];var c=(r=r||[])[0],h=r[1],p=r[r.length-1],f=r[r.length-2],v=i[0],y=i[1],x=i[i.length-1],_=i[i.length-2];!1===s?(VE(c),VE(v)):VI(c,h)&&(s?(VE(h),VE(y)):(VE(c),VE(v))),!1===u?(VE(p),VE(x)):VI(f,p)&&(u?(VE(f),VE(_)):(VE(p),VE(x)))}})(r,c,u),function(t,r,i,s){var u=i.axis,c=i.getModel("minorTick");if(!c.get("show")||u.scale.isBlank())return;var h=u.getMinorTicksCoords();if(!!h.length)for(var p=c.getModel("lineStyle"),f=s*c.get("length"),v=Ss(p.getLineStyle(),Ss(i.getModel("axisTick").getLineStyle(),{stroke:i.get(["axisLine","lineStyle","color"])})),y=0;y<h.length;y++){for(var x=VP(h[y],r.transform,f,v,"minorticks_"+y),_=0;_<x.length;_++)t.add(x[_])}}(i,s,r,t.tickDirection),r.get(["axisLabel","hideOverlap"])&&UB(UL(Sf(c,function(t){return{label:t,priority:t.z2,defaultAttr:{ignore:t.ignore}}})))},axisName:function(t,r,i,s){var u,c,h=Sk(t.axisName,r.get("name"));if(!!h){var p=r.get("nameLocation"),f=t.nameDirection,v=r.getModel("nameTextStyle"),y=r.get("nameGap")||0,x=r.axis.getExtent(),_=x[0]>x[1]?-1:1,b=["start"===p?x[0]-_*y:"end"===p?x[1]+_*y:(x[0]+x[1])/2,VD(p)?t.labelOffset+f*y:0],w=r.get("nameRotate");null!=w&&(w=w*VA/180),VD(p)?u=VC.innerTextLayout(t.rotation,null!=w?w:t.rotation,f):(u=function(t,r,i,s){var u,c,h=TB(i-t),p=s[0]>s[1],f="start"===r&&!p||"start"!==r&&p;return TN(h-VA/2)?(c=f?"bottom":"top",u="center"):TN(h-1.5*VA)?(c=f?"top":"bottom",u="center"):(c="middle",u=h<1.5*VA&&h>VA/2?f?"left":"right":f?"right":"left"),{rotation:h,textAlign:u,textVerticalAlign:c}}(t.rotation,p,w||0,x),null!=(c=t.axisNameAvailableWidth)&&(isFinite(c=Math.abs(c/Math.sin(u.rotation)))||(c=null)));var S=v.getFont(),M=r.get("nameTruncate",!0)||{},A=M.ellipsis,C=Sk(t.nameTruncateMaxWidth,M.maxWidth,c),T=new I0({x:b[0],y:b[1],rotation:u.rotation,silent:VC.isLabelSilent(r),style:D2(v,{text:h,font:S,overflow:"truncate",width:C,ellipsis:A,fill:v.getTextColor()||r.get(["axisLine","lineStyle","color"]),align:v.get("align")||u.textAlign,verticalAlign:v.get("verticalAlign")||u.textVerticalAlign}),z2:1});if(O8({el:T,componentModel:r,itemName:h}),T.__fullText=h,T.anid="name",r.get("triggerEvent")){var I=VC.makeAxisEventDataBase(r);I.targetType="axisName",I.name=h,I1(T).eventData=I}s.add(T),T.updateTransform(),i.add(T),T.decomposeTransform()}}};function VE(t){t&&(t.ignore=!0)}function VI(t,r){var i=t&&t.getBoundingRect().clone(),s=r&&r.getBoundingRect().clone();if(!!i&&!!s){var u=MG([]);return MX(u,u,-t.rotation),i.applyTransform(MW([],u,t.getLocalTransform())),s.applyTransform(MW([],u,r.getLocalTransform())),i.intersect(s)}}function VD(t){return"middle"===t||"center"===t}function VP(t,r,i,s,u){for(var c=[],h=[],p=[],f=0;f<t.length;f++){var v=t[f].coord;h[0]=v,h[1]=0,p[0]=v,p[1]=i,r&&(Md(h,h,r),Md(p,p,r));var y=new Og({shape:{x1:h[0],y1:h[1],x2:p[0],y2:p[1]},style:s,z2:2,autoBatch:!0,silent:!0});O$(y.shape,y.style.lineWidth),y.anid=u+"_"+t[f].tickValue,c.push(y)}return c}function VR(t,r){return"all"===t||Sb(t)&&Su(t,r)>=0||t===r}function VL(t){var r=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return r&&r.axesInfo[VO(t)]}function Vk(t){return!!t.get(["handle","show"])}function VO(t){return t.type+"||"+t.id}var VB={},VN=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.render=function(r,i,s,u){this.axisPointerClass&&function(t){var r=VL(t);if(!!r){var i=r.axisPointerModel,s=r.axis.scale,u=i.option,c=i.get("status"),h=i.get("value");null!=h&&(h=s.parse(h));var p=Vk(i);null==c&&(u.status=p?"show":"hide");var f=s.getExtent().slice();f[0]>f[1]&&f.reverse(),(null==h||h>f[1])&&(h=f[1]),h<f[0]&&(h=f[0]),u.value=h,p&&(u.status=r.axis.scale.isBlank()?"hide":"show")}}(r),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,s,!0)},r.prototype.updateAxisPointer=function(t,r,i,s){this._doUpdateAxisPointerClass(t,i,!1)},r.prototype.remove=function(t,r){var i=this._axisPointer;i&&i.remove(r)},r.prototype.dispose=function(r,i){this._disposeAxisPointer(i),t.prototype.dispose.apply(this,arguments)},r.prototype._doUpdateAxisPointerClass=function(t,i,s){var u,c=r.getAxisPointerClass(this.axisPointerClass);if(!!c){var h=(u=VL(t))&&u.axisPointerModel;h?(this._axisPointer||(this._axisPointer=new c)).render(t,h,i,s):this._disposeAxisPointer(i)}},r.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},r.registerAxisPointerClass=function(t,r){VB[t]=r},r.getAxisPointerClass=function(t){return t&&VB[t]},r.type="axis",r}(kM),VF=T7();function Vz(t,r,i,s){var u=i.axis;if(u.scale.isBlank())return;var c=i.getModel("splitArea"),h=c.getModel("areaStyle"),p=h.get("color"),f=s.coordinateSystem.getRect(),v=u.getTicksCoords({tickModel:c,clamp:!0});if(!!v.length){var y=p.length,x=VF(t).splitAreaColors,_=SY(),b=0;if(x)for(var w=0;w<v.length;w++){var S=x.get(v[w].tickValue);if(null!=S){b=(S+(y-1)*w)%y;break}}var M=u.toGlobalCoord(v[0].coord),A=h.getAreaStyle();p=Sb(p)?p:[p];for(var w=1;w<v.length;w++){var C=u.toGlobalCoord(v[w].coord),T=void 0,I=void 0,D=void 0,P=void 0;u.isHorizontal()?(T=M,I=f.y,D=C-T,P=f.height,M=T+D):(T=f.x,I=M,D=f.width,P=C-I,M=I+P);var R=v[w-1].tickValue;null!=R&&_.set(R,b),r.add(new IF({anid:null!=R?"area_"+R:null,shape:{x:T,y:I,width:D,height:P},style:Ss({fill:p[b]},A),autoBatch:!0,silent:!0})),b=(b+1)%y}VF(t).splitAreaColors=_}}function VU(t){VF(t).splitAreaColors=null}var VH=["axisLine","axisTickLabel","axisName"],VG=["splitArea","splitLine","minorSplitLine"],VV=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.axisPointerClass="CartesianAxisPointer",i}return wU(r,t),r.prototype.render=function(r,i,s,u){this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new Tf,this.group.add(this._axisGroup),!!r.get("show")){var h=r.getCoordSysModel(),p=Vm(h,r),f=new VC(r,So({handleAutoShown:function(t){for(var i=h.coordinateSystem.getCartesians(),s=0;s<i.length;s++)if(F3(i[s].getOtherAxis(r.axis).scale))return!0;return!1}},p));Sp(VH,f.add,f),this._axisGroup.add(f.getGroup()),Sp(VG,function(t){r.get([t,"show"])&&VW[t](this,this._axisGroup,r,h)},this),!(u&&"changeAxisOrder"===u.type&&u.isInitSort)&&O1(c,this._axisGroup,r),t.prototype.render.call(this,r,i,s,u)}},r.prototype.remove=function(){VU(this)},r.type="cartesianAxis",r}(VN),VW={splitLine:function(t,r,i,s){var u=i.axis;if(!u.scale.isBlank()){var c=i.getModel("splitLine"),h=c.getModel("lineStyle"),p=h.get("color");p=Sb(p)?p:[p];for(var f=s.coordinateSystem.getRect(),v=u.isHorizontal(),y=0,x=u.getTicksCoords({tickModel:c}),_=[],b=[],w=h.getLineStyle(),S=0;S<x.length;S++){var M=u.toGlobalCoord(x[S].coord);v?(_[0]=M,_[1]=f.y,b[0]=M,b[1]=f.y+f.height):(_[0]=f.x,_[1]=M,b[0]=f.x+f.width,b[1]=M);var A=y++%p.length,C=new Og({anid:null!=x[S].tickValue?"line_"+x[S].tickValue:null,autoBatch:!0,shape:{x1:_[0],y1:_[1],x2:b[0],y2:b[1]},style:Ss({stroke:p[A]},w),silent:!0});O$(C.shape,w.lineWidth),r.add(C)}}},minorSplitLine:function(t,r,i,s){var u=i.axis,c=i.getModel("minorSplitLine").getModel("lineStyle"),h=s.coordinateSystem.getRect(),p=u.isHorizontal(),f=u.getMinorTicksCoords();if(!!f.length)for(var v=[],y=[],x=c.getLineStyle(),_=0;_<f.length;_++)for(var b=0;b<f[_].length;b++){var w=u.toGlobalCoord(f[_][b].coord);p?(v[0]=w,v[1]=h.y,y[0]=w,y[1]=h.y+h.height):(v[0]=h.x,v[1]=w,y[0]=h.x+h.width,y[1]=w);var S=new Og({anid:"minor_line_"+f[_][b].tickValue,autoBatch:!0,shape:{x1:v[0],y1:v[1],x2:y[0],y2:y[1]},style:x,silent:!0});O$(S.shape,x.lineWidth),r.add(S)}},splitArea:function(t,r,i,s){Vz(t,r,i,s)}},Vj=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.type="xAxis",r}(VV),VX=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.type=Vj.type,r}return wU(r,t),r.type="yAxis",r}(VV),VY=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.type="grid",r}return wU(r,t),r.prototype.render=function(t,r){this.group.removeAll(),t.get("show")&&this.group.add(new IF({shape:t.coordinateSystem.getRect(),style:Ss({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},r.type="grid",r}(kM),V$={offset:0};function VJ(t){t.registerComponentView(VY),t.registerComponentModel(Ve),t.registerCoordinateSystem("cartesian2d",Vb),Vu(t,"x",Vt,V$),Vu(t,"y",Vt,V$),t.registerComponentView(Vj),t.registerComponentView(VX),t.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function VZ(t){t.eachSeriesByType("radar",function(t){var r=t.getData(),i=[],s=t.coordinateSystem;if(!!s){var u=s.getIndicatorAxes();Sp(u,function(t,c){r.each(r.mapDimension(u[c].dim),function(t,r){i[r]=i[r]||[];var u=s.dataToPoint(t,c);i[r][c]=VK(u)?u:function(t){return[t.cx,t.cy]}(s)})}),r.each(function(t){var u=Sv(i[t],function(t){return VK(t)})||function(t){return[t.cx,t.cy]}(s);i[t].push(u.slice()),r.setItemLayout(t,i[t])})}})}function VK(t){return!isNaN(t[0])&&!isNaN(t[1])}function Vq(t){return[t.cx,t.cy]}function VQ(t){var r=t.polar;if(r){!Sb(r)&&(r=[r]);var i=[];Sp(r,function(r,s){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),t.radar=t.radar||[],!Sb(t.radar)&&(t.radar=[t.radar]),t.radar.push(r)):i.push(r)}),t.polar=i}Sp(t.series,function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)})}var V0=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.render=function(t,r,i){var s=t.coordinateSystem,u=this.group,c=t.getData(),h=this._data;function p(r,i,s,u,c,h){s.removeAll();for(var p=0;p<i.length-1;p++){var f=function(t,r){var i=t.getItemVisual(r,"symbol")||"circle";if("none"!==i){var s=B7(t.getItemVisual(r,"symbolSize")),u=B8(i,-1,-1,2,2),c=t.getItemVisual(r,"symbolRotate")||0;return u.attr({style:{strokeNoScale:!0},z2:100,scaleX:s[0]/2,scaleY:s[1]/2,rotation:c*Math.PI/180||0}),u}}(u,c);f&&(f.__dimIdx=p,r[p]?(f.setPosition(r[p]),et[h?"initProps":"updateProps"](f,{x:i[p][0],y:i[p][1]},t,c)):f.setPosition(i[p]),s.add(f))}}function f(t){return Sf(t,function(t){return[s.cx,s.cy]})}c.diff(h).add(function(r){var i=c.getItemLayout(r);if(!!i){var s=new Ol,u=new Oh,h={shape:{points:i}};s.shape.points=f(i),u.shape.points=f(i),Dj(s,h,t,r),Dj(u,h,t,r);var v=new Tf,y=new Tf;v.add(u),v.add(s),v.add(y),p(u.shape.points,i,y,c,r,!0),c.setItemGraphicEl(r,v)}}).update(function(r,i){var s=h.getItemGraphicEl(i),u=s.childAt(0),f=s.childAt(1),v=s.childAt(2),y={shape:{points:c.getItemLayout(r)}};if(!!y.shape.points)p(u.shape.points,y.shape.points,v,c,r,!1),DZ(f),DZ(u),DW(u,y,t),DW(f,y,t),c.setItemGraphicEl(r,s)}).remove(function(t){u.remove(h.getItemGraphicEl(t))}).execute(),c.eachItemGraphicEl(function(t,r){var i=c.getItemModel(r),s=t.childAt(0),h=t.childAt(1),p=t.childAt(2),f=c.getItemVisual(r,"style"),v=f.fill;u.add(t),s.useStyle(Ss(i.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:v})),DB(s,i,"lineStyle"),DB(h,i,"areaStyle");var y=i.getModel("areaStyle"),x=y.isEmpty()&&y.parentModel.isEmpty();h.ignore=x,Sp(["emphasis","select","blur"],function(t){var r=i.getModel([t,"areaStyle"]),s=r.isEmpty()&&r.parentModel.isEmpty();h.ensureState(t).ignore=s&&x}),h.useStyle(Ss(y.getAreaStyle(),{fill:v,opacity:.7,decal:f.decal}));var _=i.getModel("emphasis"),b=_.getModel("itemStyle").getItemStyle();p.eachChild(function(t){if(t instanceof ID){var s=t.style;t.useStyle(So({image:s.image,x:s.x,y:s.y,width:s.width,height:s.height},f))}else t.useStyle(f),t.setColor(v),t.style.strokeNoScale=!0;t.ensureState("emphasis").style=Sr(b);var u=c.getStore().get(c.getDimensionIndex(t.__dimIdx),r);(null==u||isNaN(u))&&(u=""),D0(t,D1(i),{labelFetcher:c.hostModel,labelDataIndex:r,labelDimIndex:t.__dimIdx,defaultText:u,inheritColor:v,defaultOpacity:f.opacity})}),DR(t,_.get("focus"),_.get("blurScope"),_.get("disabled"))}),this._data=c},r.prototype.remove=function(){this.group.removeAll(),this._data=null},r.type="radar",r}(Bu),V1=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.hasSymbolVisual=!0,i}return wU(r,t),r.prototype.init=function(r){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new G2(Sx(this.getData,this),Sx(this.getRawData,this))},r.prototype.getInitialData=function(t,r){return G1(this,{generateCoord:"indicator_",generateCoordCount:1/0})},r.prototype.formatTooltip=function(t,r,i){var s=this.getData(),u=this.coordinateSystem.getIndicatorAxes(),c=this.getData().getName(t),h=""===c?this.name:c,p=ks(this,t);return L7("section",{header:h,sortBlocks:!0,blocks:Sf(u,function(r){var i=s.get(s.mapDimension(r.dim),t);return L7("nameValue",{markerType:"subItem",markerColor:p,name:r.name,value:i,sortParam:i})})})},r.prototype.getTooltipPosition=function(t){if(null!=t){for(var r=this.getData(),i=this.coordinateSystem,s=r.getValues(Sf(i.dimensions,function(t){return r.mapDimension(t)}),t),u=0,c=s.length;u<c;u++)if(!isNaN(s[u])){var h=i.getIndicatorAxes();return i.coordToPoint(h[u].dataToCoord(s[u]),u)}}},r.type="series.radar",r.dependencies=["radar"],r.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},r}(kw),V2=Vs.value;function V3(t,r){return Ss({show:r},t)}var V5=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),r=this.get("splitNumber"),i=this.get("scale"),s=this.get("axisLine"),u=this.get("axisTick"),c=this.get("axisLabel"),h=this.get("axisName"),p=this.get(["axisName","show"]),f=this.get(["axisName","formatter"]),v=this.get("axisNameGap"),y=this.get("triggerEvent"),x=Sf(this.get("indicator")||[],function(x){null!=x.max&&x.max>0&&!x.min?x.min=0:null!=x.min&&x.min<0&&!x.max&&(x.max=0);var _=h;null!=x.color&&(_=Ss({color:x.color},h));var b=Si(Sr(x),{boundaryGap:t,splitNumber:r,scale:i,axisLine:s,axisTick:u,axisLabel:c,name:x.text,showName:p,nameLocation:"end",nameGap:v,nameTextStyle:_,triggerEvent:y},!1);if(SS(f)){var w=b.name;b.name=f.replace("{value}",null!=w?w:"")}else Sw(f)&&(b.name=f(b.name,b));var S=new Pp(b,null,this.ecModel);return Sh(S,zG.prototype),S.mainType="radar",S.componentIndex=this.componentIndex,S},this);this._indicatorModels=x},r.prototype.getIndicatorModels=function(){return this._indicatorModels},r.type="radar",r.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:Si({lineStyle:{color:"#bbb"}},V2.axisLine),axisLabel:V3(V2.axisLabel,!1),axisTick:V3(V2.axisTick,!1),splitLine:V3(V2.splitLine,!0),splitArea:V3(V2.splitArea,!0),indicator:[]},r}(Ru),V4=["axisLine","axisTickLabel","axisName"],V6=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.render=function(t,r,i){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},r.prototype._buildAxes=function(t){var r=t.coordinateSystem;Sp(Sf(r.getIndicatorAxes(),function(t){var i=t.model.get("showName")?t.name:"";return new VC(t.model,{axisName:i,position:[r.cx,r.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(t){Sp(V4,t.add,t),this.group.add(t.getGroup())},this)},r.prototype._buildSplitLineAndArea=function(t){var r=t.coordinateSystem,i=r.getIndicatorAxes();if(!!i.length){var s=t.get("shape"),u=t.getModel("splitLine"),c=t.getModel("splitArea"),h=u.getModel("lineStyle"),p=c.getModel("areaStyle"),f=u.get("show"),v=c.get("show"),y=h.get("color"),x=p.get("color"),_=Sb(y)?y:[y],b=Sb(x)?x:[x],w=[],S=[];if("circle"===s){for(var M=i[0].getTicksCoords(),A=r.cx,C=r.cy,T=0;T<M.length;T++){if(f){var I=N(w,_,T);w[I].push(new k$({shape:{cx:A,cy:C,r:M[T].coord}}))}if(v&&T<M.length-1){var I=N(S,b,T);S[I].push(new Oi({shape:{cx:A,cy:C,r0:M[T].coord,r:M[T+1].coord}}))}}}else{for(var D,P=Sf(i,function(t,i){var s=t.getTicksCoords();return D=null==D?s.length-1:Math.min(s.length-1,D),Sf(s,function(t){return r.coordToPoint(t.coord,i)})}),R=[],T=0;T<=D;T++){for(var L=[],k=0;k<i.length;k++)L.push(P[k][T]);if(L[0]&&L.push(L[0].slice()),f){var I=N(w,_,T);w[I].push(new Oh({shape:{points:L}}))}if(v&&R){var I=N(S,b,T-1);S[I].push(new Ol({shape:{points:L.concat(R)}}))}R=L.slice().reverse()}}var O=h.getLineStyle(),B=p.getAreaStyle();Sp(S,function(t,r){this.group.add(OX(t,{style:Ss({stroke:"none",fill:b[r%b.length]},B),silent:!0}))},this),Sp(w,function(t,r){this.group.add(OX(t,{style:Ss({fill:"none",stroke:_[r%_.length]},O),silent:!0}))},this)}function N(t,r,i){var s=i%r.length;return t[s]=t[s]||[],s}},r.type="radar",r}(kM),V9=function(t){function r(r,i,s){var u=t.call(this,r,i,s)||this;return u.type="value",u.angle=0,u.name="",u}return wU(r,t),r}(Uu),V8=function(){function t(t,r,i){this.dimensions=[],this._model=t,this._indicatorAxes=Sf(t.getIndicatorModels(),function(t,r){var i="indicator_"+r,s=new V9(i,new zn);return s.name=t.get("name"),s.model=t,t.axis=s,this.dimensions.push(i),s},this),this.resize(t,i)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(t,r){var i=this._indicatorAxes[r];return this.coordToPoint(i.dataToCoord(t),r)},t.prototype.coordToPoint=function(t,r){var i=this._indicatorAxes[r].angle;return[this.cx+t*Math.cos(i),this.cy-t*Math.sin(i)]},t.prototype.pointToData=function(t){var r,i=t[0]-this.cx,s=t[1]-this.cy,u=Math.sqrt(i*i+s*s);i/=u;for(var c=Math.atan2(-(s/=u),i),h=1/0,p=-1,f=0;f<this._indicatorAxes.length;f++){var v=this._indicatorAxes[f],y=Math.abs(c-v.angle);y<h&&(r=v,p=f,h=y)}return[p,+(r&&r.coordToData(u))]},t.prototype.resize=function(t,r){var i=t.get("center"),s=r.getWidth(),u=r.getHeight(),c=Math.min(s,u)/2;this.cx=TT(i[0],s),this.cy=TT(i[1],u),this.startAngle=t.get("startAngle")*Math.PI/180;var h=t.get("radius");(SS(h)||SA(h))&&(h=[0,h]),this.r0=TT(h[0],c),this.r=TT(h[1],c),Sp(this._indicatorAxes,function(t,r){t.setExtent(this.r0,this.r);var i=this.startAngle+r*Math.PI*2/this._indicatorAxes.length;i=Math.atan2(Math.sin(i),Math.cos(i)),t.angle=i},this)},t.prototype.update=function(t,r){var i=this._indicatorAxes,s=this._model;Sp(i,function(t){t.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(r,u){if("radar"===r.get("coordinateSystem")&&t.getComponent("radar",r.get("radarIndex"))===s){var c=r.getData();Sp(i,function(t){t.scale.unionExtentFromData(c,c.mapDimension(t.dim))})}},this);var u=s.get("splitNumber"),c=new zn;c.setExtent(0,u),c.setInterval(1),Sp(i,function(t,r){V_(t.scale,t.model,c)})},t.prototype.convertToPixel=function(t,r,i){return null},t.prototype.convertFromPixel=function(t,r,i){return null},t.prototype.containPoint=function(t){return!1},t.create=function(r,i){var s=[];return r.eachComponent("radar",function(u){var c=new t(u,r,i);s.push(c),u.coordinateSystem=c}),r.eachSeriesByType("radar",function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=s[t.get("radarIndex")||0])}),s},t.dimensions=[],t}();function V7(t){t.registerCoordinateSystem("radar",V8),t.registerComponentModel(V5),t.registerComponentView(V6),t.registerVisual({seriesType:"radar",reset:function(t){var r=t.getData();r.each(function(t){r.setItemVisual(t,"legendIcon","roundRect")}),r.setVisual("legendIcon","roundRect")}})}var We="\0_ec_interaction_mutex";function Wt(t,r){return!!Wn(t)[r]}function Wn(t){return t[We]||(t[We]={})}Fl({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Sq);var Wr=function(t){function r(r){var i=t.call(this)||this;i._zr=r;var s=Sx(i._mousedownHandler,i),u=Sx(i._mousemoveHandler,i),c=Sx(i._mouseupHandler,i),h=Sx(i._mousewheelHandler,i),p=Sx(i._pinchHandler,i);return i.enable=function(t,i){this.disable(),this._opt=Ss(Sr(i)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),(!0===t||"move"===t||"pan"===t)&&(r.on("mousedown",s),r.on("mousemove",u),r.on("mouseup",c)),(!0===t||"scale"===t||"zoom"===t)&&(r.on("mousewheel",h),r.on("pinch",p))},i.disable=function(){r.off("mousedown",s),r.off("mousemove",u),r.off("mouseup",c),r.off("mousewheel",h),r.off("pinch",p)},i}return wU(r,t),r.prototype.isDragging=function(){return this._dragging},r.prototype.isPinching=function(){return this._pinching},r.prototype.setPointerChecker=function(t){this.pointerChecker=t},r.prototype.dispose=function(){this.disable()},r.prototype._mousedownHandler=function(t){if(!MN(t)){for(var r=t.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var i=t.offsetX,s=t.offsetY;this.pointerChecker&&this.pointerChecker(t,i,s)&&(this._x=i,this._y=s,this._dragging=!0)}},r.prototype._mousemoveHandler=function(t){if(!!this._dragging&&!!Wo("moveOnMouseMove",t,this._opt)&&"pinch"!==t.gestureEvent&&!Wn(this._zr).globalPan){var r=t.offsetX,i=t.offsetY,s=this._x,u=this._y;this._x=r,this._y=i,this._opt.preventDefaultMouseMove&&MB(t.event),Wa(this,"pan","moveOnMouseMove",t,{dx:r-s,dy:i-u,oldX:s,oldY:u,newX:r,newY:i,isAvailableBehavior:null})}},r.prototype._mouseupHandler=function(t){!MN(t)&&(this._dragging=!1)},r.prototype._mousewheelHandler=function(t){var r=Wo("zoomOnMouseWheel",t,this._opt),i=Wo("moveOnMouseWheel",t,this._opt),s=t.wheelDelta,u=Math.abs(s),c=t.offsetX,h=t.offsetY;if(0!==s&&(!!r||!!i)){if(r){var p=u>3?1.4:u>1?1.2:1.1;Wi(this,"zoom","zoomOnMouseWheel",t,{scale:s>0?p:1/p,originX:c,originY:h,isAvailableBehavior:null})}if(i){var f=Math.abs(s);Wi(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:(s>0?1:-1)*(f>3?.4:f>1?.15:.05),originX:c,originY:h,isAvailableBehavior:null})}}},r.prototype._pinchHandler=function(t){if(!Wn(this._zr).globalPan){var r=t.pinchScale>1?1.1:1/1.1;Wi(this,"zoom",null,t,{scale:r,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})}},r}(Mv);function Wi(t,r,i,s,u){t.pointerChecker&&t.pointerChecker(s,u.originX,u.originY)&&(MB(s.event),Wa(t,r,i,s,u))}function Wa(t,r,i,s,u){u.isAvailableBehavior=Sx(Wo,null,i,s),t.trigger(r,u)}function Wo(t,r,i){var s=i[t];return!t||s&&(!SS(s)||r.event[s+"Key"])}function Ws(t,r,i){var s=t.target;s.x+=r,s.y+=i,s.dirty()}function Wl(t,r,i,s){var u=t.target,c=t.zoomLimit,h=t.zoom=t.zoom||1;if(h*=r,c){var p=c.min||0;h=Math.max(Math.min(c.max||1/0,h),p)}var f=h/t.zoom;t.zoom=h,u.x-=(i-u.x)*(f-1),u.y-=(s-u.y)*(f-1),u.scaleX*=f,u.scaleY*=f,u.dirty()}var Wu={axisPointer:1,tooltip:1,brush:1};function Wc(t,r,i){var s=r.getComponentByElement(t.topTarget),u=s&&s.coordinateSystem;return s&&s!==i&&!Wu.hasOwnProperty(s.mainType)&&u&&u.model!==i}function Wh(t){SS(t)&&(t=new DOMParser().parseFromString(t,"text/xml"));var r=t;for(9===r.nodeType&&(r=r.firstChild);"svg"!==r.nodeName.toLowerCase()||1!==r.nodeType;)r=r.nextSibling;return r}var Wd={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Wp=Sy(Wd),Wf={"alignment-baseline":"textBaseline","stop-color":"stopColor"},Wg=Sy(Wf),Wm=function(){function t(){this._defs={},this._root=null}return t.prototype.parse=function(t,r){r=r||{};var i,s,u=Wh(t);this._defsUsePending=[];var c=new Tf;this._root=c;var h=[],p=u.getAttribute("viewBox")||"",f=parseFloat(u.getAttribute("width")||r.width),v=parseFloat(u.getAttribute("height")||r.height);isNaN(f)&&(f=null),isNaN(v)&&(v=null),Ww(u,c,null,!0,!1);for(var y=u.firstChild;y;)this._parseNode(y,c,h,null,!1,!1),y=y.nextSibling;if(function(t,r){for(var i=0;i<r.length;i++){var s=r[i];s[0].style[s[1]]=t[s[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],p){var x=WC(p);x.length>=4&&(i={x:parseFloat(x[0]||0),y:parseFloat(x[1]||0),width:parseFloat(x[2]),height:parseFloat(x[3])})}if(i&&null!=f&&null!=v&&(s=WP(i,{x:0,y:0,width:f,height:v}),!r.ignoreViewBox)){var _=c;(c=new Tf).add(_),_.scaleX=_.scaleY=s.scale,_.x=s.x,_.y=s.y}return!r.ignoreRootClip&&null!=f&&null!=v&&c.setClipPath(new IF({shape:{x:0,y:0,width:f,height:v}})),{root:c,width:f,height:v,viewBoxRect:i,viewBoxTransform:s,named:h}},t.prototype._parseNode=function(t,r,i,s,u,c){var h,p=t.nodeName.toLowerCase(),f=s;if("defs"===p&&(u=!0),"text"===p&&(c=!0),"defs"===p||"switch"===p)h=r;else{if(!u){var v=eoh[p];if(v&&SK(eoh,p)){h=v.call(this,t,r);var y=t.getAttribute("name");if(y){var x={name:y,namedFrom:null,svgNodeTagLower:p,el:h};i.push(x),"g"===p&&(f=x)}else s&&i.push({name:s.name,namedFrom:s,svgNodeTagLower:p,el:h});r.add(h)}}var _=Wv[p];if(_&&SK(Wv,p)){var b=_.call(this,t),w=t.getAttribute("id");w&&(this._defs[w]=b)}}if(h&&h.isGroup){for(var S=t.firstChild;S;)1===S.nodeType?this._parseNode(S,h,i,f,u,c):3===S.nodeType&&c&&this._parseText(S,h),S=S.nextSibling}},t.prototype._parseText=function(t,r){var i=new IC({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});W_(r,i),Ww(t,i,this._defsUsePending,!1,!1),function(t,r){var i=r.__selfStyle;if(i){var s=i.textBaseline,u=s;s&&"auto"!==s?"baseline"===s?u="alphabetic":"before-edge"===s||"text-before-edge"===s?u="top":"after-edge"===s||"text-after-edge"===s?u="bottom":("central"===s||"mathematical"===s)&&(u="middle"):u="alphabetic",t.style.textBaseline=u}var c=r.__inheritedStyle;if(c){var h=c.textAlign,p=h;h&&("middle"===h&&(p="center"),t.style.textAlign=p)}}(i,r);var s=i.style,u=s.fontSize;u&&u<9&&(s.fontSize=9,i.scaleX*=u/9,i.scaleY*=u/9);var c=(s.fontSize||s.fontFamily)&&[s.fontStyle,s.fontWeight,(s.fontSize||12)+"px",s.fontFamily||"sans-serif"].join(" ");s.font=c;var h=i.getBoundingRect();return this._textX+=h.width,r.add(i),i},t.internalField=void(eoh={g:function(t,r){var i=new Tf;return W_(r,i),Ww(t,i,this._defsUsePending,!1,!1),i},rect:function(t,r){var i=new IF;return W_(r,i),Ww(t,i,this._defsUsePending,!1,!1),i.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),i.silent=!0,i},circle:function(t,r){var i=new k$;return W_(r,i),Ww(t,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),i.silent=!0,i},line:function(t,r){var i=new Og;return W_(r,i),Ww(t,i,this._defsUsePending,!1,!1),i.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),i.silent=!0,i},ellipse:function(t,r){var i=new kK;return W_(r,i),Ww(t,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),i.silent=!0,i},polygon:function(t,r){var i,s=t.getAttribute("points");s&&(i=Wb(s));var u=new Ol({shape:{points:i||[]},silent:!0});return W_(r,u),Ww(t,u,this._defsUsePending,!1,!1),u},polyline:function(t,r){var i,s=t.getAttribute("points");s&&(i=Wb(s));var u=new Oh({shape:{points:i||[]},silent:!0});return W_(r,u),Ww(t,u,this._defsUsePending,!1,!1),u},image:function(t,r){var i=new ID;return W_(r,i),Ww(t,i,this._defsUsePending,!1,!1),i.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),i.silent=!0,i},text:function(t,r){var i=t.getAttribute("x")||"0",s=t.getAttribute("y")||"0",u=t.getAttribute("dx")||"0",c=t.getAttribute("dy")||"0";this._textX=parseFloat(i)+parseFloat(u),this._textY=parseFloat(s)+parseFloat(c);var h=new Tf;return W_(r,h),Ww(t,h,this._defsUsePending,!1,!0),h},tspan:function(t,r){var i=t.getAttribute("x"),s=t.getAttribute("y");null!=i&&(this._textX=parseFloat(i)),null!=s&&(this._textY=parseFloat(s));var u=t.getAttribute("dx")||"0",c=t.getAttribute("dy")||"0",h=new Tf;return W_(r,h),Ww(t,h,this._defsUsePending,!1,!0),this._textX+=parseFloat(u),this._textY+=parseFloat(c),h},path:function(t,r){var i,s=new kH(kV(t.getAttribute("d")||"",void 0));return W_(r,s),Ww(t,s,this._defsUsePending,!1,!1),s.silent=!0,s}}),t}(),Wv={lineargradient:function(t){var r=new OC(parseInt(t.getAttribute("x1")||"0",10),parseInt(t.getAttribute("y1")||"0",10),parseInt(t.getAttribute("x2")||"10",10),parseInt(t.getAttribute("y2")||"0",10));return Wy(t,r),Wx(t,r),r},radialgradient:function(t){var r=new OT(parseInt(t.getAttribute("cx")||"0",10),parseInt(t.getAttribute("cy")||"0",10),parseInt(t.getAttribute("r")||"0",10));return Wy(t,r),Wx(t,r),r}};function Wy(t,r){"userSpaceOnUse"===t.getAttribute("gradientUnits")&&(r.global=!0)}function Wx(t,r){for(var i=t.firstChild;i;){if(1===i.nodeType&&"stop"===i.nodeName.toLocaleLowerCase()){var s=i.getAttribute("offset"),u=void 0;u=s&&s.indexOf("%")>0?parseInt(s,10)/100:s?parseFloat(s):0;var c={};WD(i,c,c);var h=c.stopColor||i.getAttribute("stop-color")||"#000000";r.colorStops.push({offset:u,color:h})}i=i.nextSibling}}function W_(t,r){t&&t.__inheritedStyle&&(!r.__inheritedStyle&&(r.__inheritedStyle={}),Ss(r.__inheritedStyle,t.__inheritedStyle))}function Wb(t){for(var r=WC(t),i=[],s=0;s<r.length;s+=2){var u=parseFloat(r[s]),c=parseFloat(r[s+1]);i.push([u,c])}return i}function Ww(t,r,i,s,u){var c=r.__inheritedStyle=r.__inheritedStyle||{},h={};1===t.nodeType&&(function(t,r){var i=t.getAttribute("transform");if(i){i=i.replace(/,/g," ");var s=[],u=null;i.replace(WT,function(t,r,i){return s.push(r,i),""});for(var c=s.length-1;c>0;c-=2){var h=s[c],p=s[c-1],f=WC(h);switch(u=u||MH(),p){case"translate":Mj(u,u,[parseFloat(f[0]),parseFloat(f[1]||"0")]);break;case"scale":MY(u,u,[parseFloat(f[0]),parseFloat(f[1]||f[0])]);break;case"rotate":MX(u,u,-parseFloat(f[0])*WE,[parseFloat(f[1]||"0"),parseFloat(f[2]||"0")]);break;case"skewX":MW(u,[1,0,Math.tan(parseFloat(f[0])*WE),1,0,0],u);break;case"skewY":MW(u,[1,Math.tan(parseFloat(f[0])*WE),0,1,0,0],u);break;case"matrix":u[0]=parseFloat(f[0]),u[1]=parseFloat(f[1]),u[2]=parseFloat(f[2]),u[3]=parseFloat(f[3]),u[4]=parseFloat(f[4]),u[5]=parseFloat(f[5])}}r.setLocalTransform(u)}}(t,r),WD(t,c,h),!s&&function(t,r,i){for(var s=0;s<Wp.length;s++){var u=Wp[s],c=t.getAttribute(u);null!=c&&(r[Wd[u]]=c)}for(var s=0;s<Wg.length;s++){var u=Wg[s],c=t.getAttribute(u);null!=c&&(i[Wf[u]]=c)}}(t,c,h)),r.style=r.style||{},null!=c.fill&&(r.style.fill=WM(r,"fill",c.fill,i)),null!=c.stroke&&(r.style.stroke=WM(r,"stroke",c.stroke,i)),Sp(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(t){null!=c[t]&&(r.style[t]=parseFloat(c[t]))}),Sp(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(t){null!=c[t]&&(r.style[t]=c[t])}),u&&(r.__selfStyle=h),c.lineDash&&(r.style.lineDash=Sf(WC(c.lineDash),function(t){return parseFloat(t)})),("hidden"===c.visibility||"collapse"===c.visibility)&&(r.invisible=!0),"none"===c.display&&(r.ignore=!0)}var WS=/^url\(\s*#(.*?)\)/;function WM(t,r,i,s){var u=i&&i.match(WS);if(u){var c=SU(u[1]);s.push([t,r,c]);return}return"none"===i&&(i=null),i}var WA=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function WC(t){return t.match(WA)||[]}var WT=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,WE=Math.PI/180,WI=/([^\s:;]+)\s*:\s*([^:;]+)/g;function WD(t,r,i){var s,u=t.getAttribute("style");if(!!u)for(WI.lastIndex=0;null!=(s=WI.exec(u));){var c=s[1],h=SK(Wd,c)?Wd[c]:null;h&&(r[h]=s[2]);var p=SK(Wf,c)?Wf[c]:null;p&&(i[p]=s[2])}}function WP(t,r){var i=Math.min(r.width/t.width,r.height/t.height);return{scale:i,x:-(t.x+t.width/2)*i+(r.x+r.width/2),y:-(t.y+t.height/2)*i+(r.y+r.height/2)}}for(var WR=SY(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),WL=function(){function t(t,r){this.type="geoSVG",this._usedGraphicMap=SY(),this._freedGraphics=[],this._mapName=t,this._parsedXML=Wh(r)}return t.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var r=function(t){var r=[],i=SY();return Sp(t,function(t){if(null==t.namedFrom){var s=new z3(t.name,t.el);r.push(s),i.set(t.name,s)}}),{regions:r,regionsMap:i}}(t.named),i=r.regions,s=r.regionsMap;this._regions=i,this._regionsMap=s}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},t.prototype._buildGraphic=function(t){try{var r,i;u=(s=t&&(r=t,i={ignoreViewBox:!0,ignoreRootClip:!0},new Wm().parse(r,i))||{}).root,Sz(null!=u)}catch(t){throw Error("Invalid svg format\n"+t.message)}var s,u,c=new Tf;c.add(u),c.isGeoSVGGraphicRoot=!0;var h=s.width,p=s.height,f=s.viewBoxRect,v=this._boundingRect;if(!v){var y=void 0,x=void 0,_=void 0,b=void 0;if(null!=h?(y=0,_=h):f&&(y=f.x,_=f.width),null!=p?(x=0,b=p):f&&(x=f.y,b=f.height),null==y||null==x){var w=u.getBoundingRect();null==y&&(y=w.x,_=w.width),null==x&&(x=w.y,b=w.height)}v=this._boundingRect=new M4(y,x,_,b)}if(f){var S=WP(f,v);u.scaleX=u.scaleY=S.scale,u.x=S.x,u.y=S.y}c.setClipPath(new IF({shape:v.plain()}));var M=[];return Sp(s.named,function(t){null!=WR.get(t.svgNodeTagLower)&&(M.push(t),function(t){t.silent=!1,t.isGroup&&t.traverse(function(t){t.silent=!1})}(t.el))}),{root:c,boundingRect:v,named:M}},t.prototype.useGraphic=function(t){var r=this._usedGraphicMap,i=r.get(t);return i?i:(i=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),r.set(t,i),i)},t.prototype.freeGraphic=function(t){var r=this._usedGraphicMap,i=r.get(t);i&&(r.removeKey(t),this._freedGraphics.push(i))},t}(),Wk=[126,25],WO="",WB=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],WN=0;WN<WB.length;WN++)for(var WF=0;WF<WB[WN].length;WF++)WB[WN][WF][0]/=10.5,WB[WN][WF][1]/=-14,WB[WN][WF][0]+=Wk[0],WB[WN][WF][1]+=Wk[1];var Wz={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]},WU=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],WH=function(){function t(t,r,i){this.type="geoJSON",this._parsedMap=SY(),this._mapName=t,this._specialAreas=i,this._geoJSON=function(t){return SS(t)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(t):Function("return ("+t+");")():t}(r)}return t.prototype.load=function(t,r){r=r||"name";var i=this._parsedMap.get(r);if(!i){var s=this._parseToRegions(r);i=this._parsedMap.set(r,{regions:s,boundingRect:function(t){for(var r,i=0;i<t.length;i++){var s=t[i].getBoundingRect();(r=r||s.clone()).union(s)}return r}(s)})}var u=SY(),c=[];return Sp(i.regions,function(r){var i=r.name;t&&SK(t,i)&&(r=r.cloneShallow(i=t[i])),c.push(r),u.set(i,r)}),{regions:c,boundingRect:i.boundingRect||new M4(0,0,0,0),regionsMap:u}},t.prototype._parseToRegions=function(t){var r,i=this._mapName,s=this._geoJSON;try{r=s?z6(s,t):[]}catch(t){throw Error("Invalid geoJson format\n"+t.message)}return!function(t,r){if("china"===t){for(var i=0;i<r.length;i++)if(r[i].name===WO)return;r.push(new z2(WO,Sf(WB,function(t){return{type:"polygon",exterior:t}}),Wk))}}(i,r),Sp(r,function(t){var r,s,u=t.name;!function(t,r){if("china"===t){var i=Wz[r.name];if(i){var s=r.getCenter();s[0]+=i[0]/10.5,s[1]+=-i[1]/14,r.setCenter(s)}}}(i,t),r=i,s=t,"china"===r&&""===s.name&&s.geometries.push({type:"polygon",exterior:WU[0]});var c=this._specialAreas&&this._specialAreas[u];c&&t.transformTo(c.left,c.top,c.width,c.height)},this),r},t.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},t}(),WG=SY();let WV={registerMap:function(t,r,i){if(r.svg){var s=new WL(t,r.svg);WG.set(t,s)}else{var u=r.geoJson||r.geoJSON;u&&!r.features?i=r.specialAreas:u=r;var s=new WH(t,u,i);WG.set(t,s)}},getGeoResource:function(t){return WG.get(t)},getMapForUser:function(t){var r=WG.get(t);return r&&"geoJSON"===r.type&&r.getMapForUser()},load:function(t,r,i){var s=WG.get(t);if(!!s)return s.load(r,i)}};var WW=["rect","circle","line","ellipse","polygon","polyline","path"],Wj=SY(WW),WX=SY(WW.concat(["g"])),WY=SY(WW.concat(["g"])),W$=T7();function WJ(t){var r=t.getItemStyle(),i=t.get("areaColor");return null!=i&&(r.fill=i),r}function WZ(t){var r=t.style;r&&(r.stroke=r.stroke||r.fill,r.fill=null)}var WK=function(){function t(t){var r=new Tf;this.uid=Pg("ec_map_draw"),this._controller=new Wr(t.getZr()),this._controllerHost={target:r},this.group=r,r.add(this._regionsGroup=new Tf),r.add(this._svgGroup=new Tf)}return t.prototype.draw=function(t,r,i,s,u){var c="geo"===t.mainType,h=t.getData&&t.getData();c&&r.eachComponent({mainType:"series",subType:"map"},function(r){!h&&r.getHostGeoModel()===t&&(h=r.getData())});var p=t.coordinateSystem,f=this._regionsGroup,v=this.group,y=p.getTransformInfo(),x=y.raw,_=y.roam;!f.childAt(0)||u?(v.x=_.x,v.y=_.y,v.scaleX=_.scaleX,v.scaleY=_.scaleY,v.dirty()):DW(v,_,t);var b=h&&h.getVisual("visualMeta")&&h.getVisual("visualMeta").length>0,w={api:i,geo:p,mapOrGeoModel:t,data:h,isVisualEncodedByVisualMap:b,isGeo:c,transformInfoRaw:x};"geoJSON"===p.resourceType?this._buildGeoJSON(w):"geoSVG"===p.resourceType&&this._buildSVG(w),this._updateController(t,r,i),this._updateMapSelectHandler(t,f,i,s)},t.prototype._buildGeoJSON=function(t){var r=this._regionsGroupByName=SY(),i=SY(),s=this._regionsGroup,u=t.transformInfoRaw,c=t.mapOrGeoModel,h=t.data,p=t.geo.projection,f=p&&p.stream;function v(t,r){return r&&(t=r(t)),t&&[t[0]*u.scaleX+u.x,t[1]*u.scaleY+u.y]}function y(t){return{shape:{points:function(t){for(var r=[],i=!f&&p&&p.project,s=0;s<t.length;++s){var u=v(t[s],i);u&&r.push(u)}return r}(t)}}}s.removeAll(),Sp(t.geo.regions,function(u){var x=u.name,_=r.get(x),b=i.get(x)||{},w=b.dataIdx,S=b.regionModel;!_&&(_=r.set(x,new Tf),s.add(_),w=h?h.indexOfName(x):null,S=t.isGeo?c.getRegionModel(x):h?h.getItemModel(w):null,i.set(x,{dataIdx:w,regionModel:S}));var M=[],A=[];Sp(u.geometries,function(t){if("polygon"===t.type){var r=[t.exterior].concat(t.interiors||[]);f&&(r=W3(r,f)),Sp(r,function(t){M.push(new Ol(y(t)))})}else{var i=t.points;f&&(i=W3(i,f,!0)),Sp(i,function(t){A.push(new Oh(y(t)))})}});var C=v(u.getCenter(),p&&p.project);function T(r,i){if(!!r.length){var s=new OM({culling:!0,segmentIgnoreThreshold:1,shape:{paths:r}});_.add(s),Wq(t,s,w,S),WQ(t,s,x,S,c,w,C),i&&(WZ(s),Sp(s.states,WZ))}}T(M),T(A,!0)}),r.each(function(r,s){var u=i.get(s),h=u.dataIdx,p=u.regionModel;W0(t,r,s,p,c,h),W1(t,r,s,p,c),W2(t,r,s,p,c)},this)},t.prototype._buildSVG=function(t){var r=t.geo.map,i=t.transformInfoRaw;this._svgGroup.x=i.x,this._svgGroup.y=i.y,this._svgGroup.scaleX=i.scaleX,this._svgGroup.scaleY=i.scaleY,this._svgResourceChanged(r)&&(this._freeSVG(),this._useSVG(r));var s=this._svgDispatcherMap=SY(),u=!1;Sp(this._svgGraphicRecord.named,function(r){var i=r.name,c=t.mapOrGeoModel,h=t.data,p=r.svgNodeTagLower,f=r.el,v=h?h.indexOfName(i):null,y=c.getRegionModel(i);null!=Wj.get(p)&&f instanceof EU&&Wq(t,f,v,y),f instanceof EU&&(f.culling=!0),f.z2EmphasisLift=0,!r.namedFrom&&(null!=WY.get(p)&&WQ(t,f,i,y,c,v,null),W0(t,f,i,y,c,v),W1(t,f,i,y,c),null!=WX.get(p)&&("self"===W2(t,f,i,y,c)&&(u=!0),(s.get(i)||s.set(i,[])).push(f)))},this),this._enableBlurEntireSVG(u,t)},t.prototype._enableBlurEntireSVG=function(t,r){if(t&&r.isGeo){var i=r.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse(function(t){if(!t.isGroup){Dm(t);var r=t.ensureState("blur").style||{};null==r.opacity&&null!=i&&(r.opacity=i),t.ensureState("emphasis")}})}},t.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},t.prototype.findHighDownDispatchers=function(t,r){if(null==t)return[];var i=r.coordinateSystem;if("geoJSON"===i.resourceType){var s=this._regionsGroupByName;if(s){var u=s.get(t);return u?[u]:[]}}else if("geoSVG"===i.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},t.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},t.prototype._useSVG=function(t){var r=WV.getGeoResource(t);if(r&&"geoSVG"===r.type){var i=r.useGraphic(this.uid);this._svgGroup.add(i.root),this._svgGraphicRecord=i,this._svgMapName=t}},t.prototype._freeSVG=function(){var t=this._svgMapName;if(null!=t){var r=WV.getGeoResource(t);r&&"geoSVG"===r.type&&r.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},t.prototype._updateController=function(t,r,i){var s=t.coordinateSystem,u=this._controller,c=this._controllerHost;c.zoomLimit=t.get("scaleLimit"),c.zoom=s.getZoom(),u.enable(t.get("roam")||!1);var h=t.mainType;function p(){var r={type:"geoRoam",componentType:h};return r[h+"Id"]=t.id,r}u.off("pan").on("pan",function(t){this._mouseDownFlag=!1,Ws(c,t.dx,t.dy),i.dispatchAction(So(p(),{dx:t.dx,dy:t.dy,animation:{duration:0}}))},this),u.off("zoom").on("zoom",function(t){this._mouseDownFlag=!1,Wl(c,t.scale,t.originX,t.originY),i.dispatchAction(So(p(),{totalZoom:c.zoom,zoom:t.scale,originX:t.originX,originY:t.originY,animation:{duration:0}}))},this),u.setPointerChecker(function(r,u,c){return s.containPoint([u,c])&&!Wc(r,i,t)})},t.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var r=t.getTextContent();r&&(r.ignore=W$(r).ignore)})},t.prototype._updateMapSelectHandler=function(t,r,i,s){var u=this;r.off("mousedown"),r.off("click"),t.get("selectedMode")&&(r.on("mousedown",function(){u._mouseDownFlag=!0}),r.on("click",function(t){if(!!u._mouseDownFlag)u._mouseDownFlag=!1}))},t}();function Wq(t,r,i,s){var u=s.getModel("itemStyle"),c=s.getModel(["emphasis","itemStyle"]),h=s.getModel(["blur","itemStyle"]),p=s.getModel(["select","itemStyle"]),f=WJ(u),v=WJ(c),y=WJ(p),x=WJ(h),_=t.data;if(_){var b=_.getItemVisual(i,"style"),w=_.getItemVisual(i,"decal");t.isVisualEncodedByVisualMap&&b.fill&&(f.fill=b.fill),w&&(f.decal=NA(w,t.api))}r.setStyle(f),r.style.strokeNoScale=!0,r.ensureState("emphasis").style=v,r.ensureState("select").style=y,r.ensureState("blur").style=x,Dm(r)}function WQ(t,r,i,s,u,c,h){var p=t.data,f=t.isGeo,v=p&&isNaN(p.get(p.mapDimension("value"),c)),y=p&&p.getItemLayout(c);if(f||v||y&&y.showLabel){var x=f?i:c,_=void 0;(!p||c>=0)&&(_=u);var b=h?{normal:{align:"center",verticalAlign:"middle"}}:null;D0(r,D1(s),{labelFetcher:_,labelDataIndex:x,defaultText:i},b);var w=r.getTextContent();if(w&&(W$(w).ignore=w.ignore,r.textConfig&&h)){var S=r.getBoundingRect().clone();r.textConfig.layoutRect=S,r.textConfig.position=[(h[0]-S.x)/S.width*100+"%",(h[1]-S.y)/S.height*100+"%"]}r.disableLabelAnimation=!0}else r.removeTextContent(),r.removeTextConfig(),r.disableLabelAnimation=null}function W0(t,r,i,s,u,c){t.data?t.data.setItemGraphicEl(c,r):I1(r).eventData={componentType:"geo",componentIndex:u.componentIndex,geoIndex:u.componentIndex,name:i,region:s&&s.option||{}}}function W1(t,r,i,s,u){!t.data&&O8({el:r,componentModel:u,itemName:i,itemTooltipOption:s.get("tooltip")})}function W2(t,r,i,s,u){r.highDownSilentOnTouch=!!u.get("selectedMode");var c,h,p,f,v=s.getModel("emphasis"),y=v.get("focus");if(DR(r,y,v.get("blurScope"),v.get("disabled")),t.isGeo){;c=r,h=u,p=i,(f=I1(c)).componentMainType=h.mainType,f.componentIndex=h.componentIndex,f.componentHighDownName=p}return y}function W3(t,r,i){var s,u=[];function c(){s=[]}function h(){s.length&&(u.push(s),s=[])}var p=r({polygonStart:c,polygonEnd:h,lineStart:c,lineEnd:h,point:function(t,r){isFinite(t)&&isFinite(r)&&s.push([t,r])},sphere:function(){}});return i||p.polygonStart(),Sp(t,function(t){p.lineStart();for(var r=0;r<t.length;r++)p.point(t[r][0],t[r][1]);p.lineEnd()}),i||p.polygonEnd(),u}var W5=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.render=function(t,r,i,s){if(s&&"mapToggleSelect"===s.type&&s.from===this.uid)return;var u=this.group;if(u.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&s&&"geoRoam"===s.type&&this._mapDraw.resetForLabelLayout(),s&&"geoRoam"===s.type&&"series"===s.componentType&&s.seriesId===t.id){var c=this._mapDraw;c&&u.add(c.group)}else if(t.needsDrawMap){var c=this._mapDraw||new WK(i);u.add(c.group),c.draw(t,r,i,this,s),this._mapDraw=c}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(t,r,i)}},r.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},r.prototype._renderSymbols=function(t,r,i){var s=t.originalData,u=this.group;s.each(s.mapDimension("value"),function(r,i){if(isNaN(r))return;var c=s.getItemLayout(i);if(!!c&&!!c.point){var h=c.point,p=c.offset,f=new k$({style:{fill:t.getData().getVisual("style").fill},shape:{cx:h[0]+9*p,cy:h[1],r:3},silent:!0,z2:8+(p?0:11)});if(!p){var v=t.mainSeries.getData(),y=s.getName(i),x=v.indexOfName(y),_=s.getItemModel(i),b=_.getModel("label"),w=v.getItemGraphicEl(x);D0(f,D1(_),{labelFetcher:{getFormattedLabel:function(r,i){return t.getFormattedLabel(x,i)}},defaultText:y}),f.disableLabelAnimation=!0,!b.get("position")&&f.setTextConfig({position:"bottom"}),w.onHoverStateChange=function(t){Df(f,t)}}u.add(f)}})},r.type="map",r}(Bu),W4=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.needsDrawMap=!1,i.seriesGroup=[],i.getTooltipPosition=function(t){if(null!=t){var r=this.getData().getName(t),i=this.coordinateSystem,s=i.getRegion(r);return s&&i.dataToPoint(s.getCenter())}},i}return wU(r,t),r.prototype.getInitialData=function(t){for(var r=G1(this,{coordDimensions:["value"],encodeDefaulter:S_(RM,this)}),i=SY(),s=[],u=0,c=r.count();u<c;u++){var h=r.getName(u);i.set(h,!0)}return Sp(WV.load(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,function(t){var r=t.name;!i.get(r)&&s.push(r)}),r.appendValues([],s),r},r.prototype.getHostGeoModel=function(){var t=this.option.geoIndex;return null!=t?this.ecModel.getComponent("geo",t):null},r.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},r.prototype.getRawValue=function(t){var r=this.getData();return r.get(r.mapDimension("value"),t)},r.prototype.getRegionModel=function(t){var r=this.getData();return r.getItemModel(r.indexOfName(t))},r.prototype.formatTooltip=function(t,r,i){for(var s=this.getData(),u=this.getRawValue(t),c=s.getName(t),h=this.seriesGroup,p=[],f=0;f<h.length;f++){var v=h[f].originalData.indexOfName(c),y=s.mapDimension("value");!isNaN(h[f].originalData.get(y,v))&&p.push(h[f].name)}return L7("section",{header:p.join(", "),noHeader:!p.length,blocks:[L7("nameValue",{name:c,value:u})]})},r.prototype.setZoom=function(t){this.option.zoom=t},r.prototype.setCenter=function(t){this.option.center=t},r.prototype.getLegendIcon=function(t){var r=t.icon||"roundRect",i=B8(r,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return i.setStyle(t.itemStyle),i.style.stroke="none",r.indexOf("empty")>-1&&(i.style.stroke=i.style.fill,i.style.fill="#fff",i.style.lineWidth=2),i},r.type="series.map",r.dependencies=["geo"],r.layoutMode="box",r.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},r}(kw);function W6(t){var r={};t.eachSeriesByType("map",function(t){var i=t.getHostGeoModel(),s=i?"o"+i.id:"i"+t.getMapType();(r[s]=r[s]||[]).push(t)}),Sp(r,function(t,r){for(var i,s,u,c=(i=Sf(t,function(t){return t.getData()}),s=t[0].get("mapValueCalculation"),u={},Sp(i,function(t){t.each(t.mapDimension("value"),function(r,i){var s="ec-"+t.getName(i);u[s]=u[s]||[],!isNaN(r)&&u[s].push(r)})}),i[0].map(i[0].mapDimension("value"),function(t,r){for(var c,h="ec-"+i[0].getName(r),p=0,f=1/0,v=-1/0,y=u[h].length,x=0;x<y;x++)f=Math.min(f,u[h][x]),v=Math.max(v,u[h][x]),p+=u[h][x];return c="min"===s?f:"max"===s?v:"average"===s?p/y:p,0===y?NaN:c})),h=0;h<t.length;h++)t[h].originalData=t[h].getData();for(var h=0;h<t.length;h++)t[h].seriesGroup=t,t[h].needsDrawMap=0===h&&!t[h].getHostGeoModel(),t[h].setData(c.cloneShallow()),t[h].mainSeries=t[0]})}function W9(t){var r={};t.eachSeriesByType("map",function(i){var s=i.getMapType();if(!i.getHostGeoModel()&&!r[s]){var u={};Sp(i.seriesGroup,function(r){var i=r.coordinateSystem,s=r.originalData;r.get("showLegendSymbol")&&t.getComponent("legend")&&s.each(s.mapDimension("value"),function(t,r){var c=s.getName(r),h=i.getRegion(c);if(!(!h||isNaN(t))){var p=u[c]||0,f=i.dataToPoint(h.getCenter());u[c]=p+1,s.setItemLayout(r,{point:f,offset:p})}})});var c=i.getData();c.each(function(t){var r=c.getName(t),i=c.getItemLayout(t)||{};i.showLabel=!u[r],c.setItemLayout(t,i)}),r[s]=!0}})}var W8=Md,W7=function(t){function r(r){var i=t.call(this)||this;return i.type="view",i.dimensions=["x","y"],i._roamTransformable=new C3,i._rawTransformable=new C3,i.name=r,i}return wU(r,t),r.prototype.setBoundingRect=function(t,r,i,s){return this._rect=new M4(t,r,i,s),this._rect},r.prototype.getBoundingRect=function(){return this._rect},r.prototype.setViewRect=function(t,r,i,s){this._transformTo(t,r,i,s),this._viewRect=new M4(t,r,i,s)},r.prototype._transformTo=function(t,r,i,s){var u=this.getBoundingRect(),c=this._rawTransformable;c.transform=u.calculateTransform(new M4(t,r,i,s));var h=c.parent;c.parent=null,c.decomposeTransform(),c.parent=h,this._updateTransform()},r.prototype.setCenter=function(t,r){if(!!t)this._center=[TT(t[0],r.getWidth()),TT(t[1],r.getHeight())],this._updateCenterAndZoom()},r.prototype.setZoom=function(t){t=t||1;var r=this.zoomLimit;r&&(null!=r.max&&(t=Math.min(r.max,t)),null!=r.min&&(t=Math.max(r.min,t))),this._zoom=t,this._updateCenterAndZoom()},r.prototype.getDefaultCenter=function(){var t=this.getBoundingRect();return[t.x+t.width/2,t.y+t.height/2]},r.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},r.prototype.getZoom=function(){return this._zoom||1},r.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},r.prototype._updateCenterAndZoom=function(){var t=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,i=this.getDefaultCenter(),s=this.getCenter(),u=this.getZoom();s=Md([],s,t),i=Md([],i,t),r.originX=s[0],r.originY=s[1],r.x=i[0]-s[0],r.y=i[1]-s[1],r.scaleX=r.scaleY=u,this._updateTransform()},r.prototype._updateTransform=function(){var t=this._roamTransformable,r=this._rawTransformable;r.parent=t,t.updateTransform(),r.updateTransform(),MV(this.transform||(this.transform=[]),r.transform||MH()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],M$(this.invTransform,this.transform),this.decomposeTransform()},r.prototype.getTransformInfo=function(){var t=this._rawTransformable,r=this._roamTransformable,i=new C3;return i.transform=r.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},r.prototype.getViewRect=function(){return this._viewRect},r.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},r.prototype.dataToPoint=function(t,r,i){var s=r?this._rawTransform:this.transform;return i=i||[],s?W8(i,t,s):S1(i,t)},r.prototype.pointToData=function(t){var r=this.invTransform;return r?W8([],t,r):[t[0],t[1]]},r.prototype.convertToPixel=function(t,r,i){var s=je(r);return s===this?s.dataToPoint(i):null},r.prototype.convertFromPixel=function(t,r,i){var s=je(r);return s===this?s.pointToData(i):null},r.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},r.dimensions=["x","y"],r}(C3);function je(t){var r=t.seriesModel;return r?r.coordinateSystem:null}var jt={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},jn=["lng","lat"],jr=function(t){function r(r,i,s){var u,c=t.call(this,r)||this;c.dimensions=jn,c.type="geo",c._nameCoordMap=SY(),c.map=i;var h=s.projection,p=WV.load(i,s.nameMap,s.nameProperty),f=WV.getGeoResource(i);c.resourceType=f?f.type:null;var v=c.regions=p.regions,y=jt[f.type];c._regionsMap=p.regionsMap,c.regions=p.regions;if(c.projection=h,h)for(var x=0;x<v.length;x++){var _=v[x].getBoundingRect(h);(u=u||_.clone()).union(_)}else u=p.boundingRect;return c.setBoundingRect(u.x,u.y,u.width,u.height),c.aspectScale=h?1:SO(s.aspectScale,y.aspectScale),c._invertLongitute=!h&&y.invertLongitute,c}return wU(r,t),r.prototype._transformTo=function(t,r,i,s){var u=this.getBoundingRect(),c=this._invertLongitute;u=u.clone(),c&&(u.y=-u.y-u.height);var h=this._rawTransformable;h.transform=u.calculateTransform(new M4(t,r,i,s));var p=h.parent;h.parent=null,h.decomposeTransform(),h.parent=p,c&&(h.scaleY=-h.scaleY),this._updateTransform()},r.prototype.getRegion=function(t){return this._regionsMap.get(t)},r.prototype.getRegionByCoord=function(t){for(var r=this.regions,i=0;i<r.length;i++){var s=r[i];if("geoJSON"===s.type&&s.contain(t))return r[i]}},r.prototype.addGeoCoord=function(t,r){this._nameCoordMap.set(t,r)},r.prototype.getGeoCoord=function(t){var r=this._regionsMap.get(t);return this._nameCoordMap.get(t)||r&&r.getCenter()},r.prototype.dataToPoint=function(t,r,i){if(SS(t)&&(t=this.getGeoCoord(t)),t){var s=this.projection;return s&&(t=s.project(t)),t&&this.projectedToPoint(t,r,i)}},r.prototype.pointToData=function(t){var r=this.projection;return r&&(t=r.unproject(t)),t&&this.pointToProjected(t)},r.prototype.pointToProjected=function(r){return t.prototype.pointToData.call(this,r)},r.prototype.projectedToPoint=function(r,i,s){return t.prototype.dataToPoint.call(this,r,i,s)},r.prototype.convertToPixel=function(t,r,i){var s=ji(r);return s===this?s.dataToPoint(i):null},r.prototype.convertFromPixel=function(t,r,i){var s=ji(r);return s===this?s.pointToData(i):null},r}(W7);function ji(t){var r=t.geoModel,i=t.seriesModel;return r?r.coordinateSystem:i?i.coordinateSystem||(i.getReferringComponents("geo",Er).models[0]||{}).coordinateSystem:null}Sh(jr,W7);function ja(t,r){var i,s,u,c=t.get("boundingCoords");if(null!=c){var h=c[0],p=c[1];if(isFinite(h[0])&&isFinite(h[1])&&isFinite(p[0])&&isFinite(p[1])){var f=this.projection;if(f){var v=h[0],y=h[1],x=p[0],_=p[1];h=[1/0,1/0],p=[-1/0,-1/0];var b=function(t,r,i,s){for(var u=i-t,c=s-r,v=0;v<=100;v++){var y=v/100,x=f.project([t+u*y,r+c*y]);Mp(h,h,x),Mf(p,p,x)}};b(v,y,x,y),b(x,y,x,_),b(x,_,v,_),b(v,_,x,y)}this.setBoundingRect(h[0],h[1],p[0]-h[0],p[1]-h[1])}}var w=this.getBoundingRect(),S=t.get("layoutCenter"),M=t.get("layoutSize"),A=r.getWidth(),C=r.getHeight(),T=w.width/w.height*this.aspectScale,I=!1;if(S&&M&&(i=[TT(S[0],A),TT(S[1],C)],s=TT(M,Math.min(A,C)),!isNaN(i[0])&&!isNaN(i[1])&&!isNaN(s)&&(I=!0)),I)u={},T>1?(u.width=s,u.height=s/T):(u.height=s,u.width=s*T),u.y=i[1]-u.height/2,u.x=i[0]-u.width/2;else{var D=t.getBoxLayoutParams();D.aspect=T,u=Rt(D,{width:A,height:C})}this.setViewRect(u.x,u.y,u.width,u.height),this.setCenter(t.get("center"),r),this.setZoom(t.get("zoom"))}var jo=new(function(){function t(){this.dimensions=jn}return t.prototype.create=function(t,r){var i=[];function s(t){return{nameProperty:t.get("nameProperty"),aspectScale:t.get("aspectScale"),projection:t.get("projection")}}t.eachComponent("geo",function(t,u){var c=t.get("map"),h=new jr(c+u,c,So({nameMap:t.get("nameMap")},s(t)));h.zoomLimit=t.get("scaleLimit"),i.push(h),t.coordinateSystem=h,h.model=t,h.resize=ja,h.resize(t,r)}),t.eachSeries(function(t){if("geo"===t.get("coordinateSystem")){var r=t.get("geoIndex")||0;t.coordinateSystem=i[r]}});var u={};return t.eachSeriesByType("map",function(t){if(!t.getHostGeoModel()){var r=t.getMapType();u[r]=u[r]||[],u[r].push(t)}}),Sp(u,function(t,u){var c=new jr(u,u,So({nameMap:Sa(Sf(t,function(t){return t.get("nameMap")}))},s(t[0])));c.zoomLimit=Sk.apply(null,Sf(t,function(t){return t.get("scaleLimit")})),i.push(c),c.resize=ja,c.resize(t[0],r),Sp(t,function(t){var r;t.coordinateSystem=c,r=c,Sp(t.get("geoCoord"),function(t,i){r.addGeoCoord(i,t)})})}),i},t.prototype.getFilledRegions=function(t,r,i,s){for(var u=(t||[]).slice(),c=SY(),h=0;h<u.length;h++)c.set(u[h].name,u[h]);return Sp(WV.load(r,i,s).regions,function(t){var r=t.name;c.get(r)||u.push({name:r})}),u},t}()),js=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.init=function(t,r,i){var s=WV.getGeoResource(t.map);if(s&&"geoJSON"===s.type){var u=t.itemStyle=t.itemStyle||{};!("color"in u)&&(u.color="#eee")}this.mergeDefaultAndTheme(t,i),TQ(t,"label",["show"])},r.prototype.optionUpdated=function(){var t=this,r=this.option;r.regions=jo.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var i={};this._optionModelMap=Sg(r.regions||[],function(r,s){var u=s.name;return u&&(r.set(u,new Pp(s,t,t.ecModel)),s.selected&&(i[u]=!0)),r},SY()),!r.selectedMap&&(r.selectedMap=i)},r.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new Pp(null,this,this.ecModel)},r.prototype.getFormattedLabel=function(t,r){var i=this.getRegionModel(t),s="normal"===r?i.get(["label","formatter"]):i.get(["emphasis","label","formatter"]),u={name:t};return Sw(s)?(u.status=r,s(u)):SS(s)?s.replace("{a}",null!=t?t:""):void 0},r.prototype.setZoom=function(t){this.option.zoom=t},r.prototype.setCenter=function(t){this.option.center=t},r.prototype.select=function(t){var r=this.option,i=r.selectedMode;if(!!i)"multiple"!==i&&(r.selectedMap=null),(r.selectedMap||(r.selectedMap={}))[t]=!0},r.prototype.unSelect=function(t){var r=this.option.selectedMap;r&&(r[t]=!1)},r.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},r.prototype.isSelected=function(t){var r=this.option.selectedMap;return!!(r&&r[t])},r.type="geo",r.layoutMode="box",r.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},r}(Ru);function jl(t,r){return t.pointToProjected?t.pointToProjected(r):t.pointToData(r)}function ju(t,r,i,s){var u=t.getZoom(),c=t.getCenter(),h=r.zoom,p=t.projectedToPoint?t.projectedToPoint(c):t.dataToPoint(c);if(null!=r.dx&&null!=r.dy&&(p[0]-=r.dx,p[1]-=r.dy,t.setCenter(jl(t,p),s)),null!=h){if(i){var f=i.min||0;h=Math.max(Math.min(u*h,i.max||1/0),f)/u}t.scaleX*=h,t.scaleY*=h;var v=(r.originX-t.x)*(h-1),y=(r.originY-t.y)*(h-1);t.x-=v,t.y-=y,t.updateTransform(),t.setCenter(jl(t,p),s),t.setZoom(h*u)}return{center:t.getCenter(),zoom:t.getZoom()}}var jc=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.focusBlurEnabled=!0,i}return wU(r,t),r.prototype.init=function(t,r){this._api=r},r.prototype.render=function(t,r,i,s){if(this._model=t,!t.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}!this._mapDraw&&(this._mapDraw=new WK(i));var u=this._mapDraw;u.draw(t,r,i,this,s),u.group.on("click",this._handleRegionClick,this),u.group.silent=t.get("silent"),this.group.add(u.group),this.updateSelectStatus(t,r,i)},r.prototype._handleRegionClick=function(t){var r;BZ(t.target,function(t){return null!=(r=I1(t).eventData)},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},r.prototype.updateSelectStatus=function(t,r,i){var s=this;this._mapDraw.group.traverse(function(t){var r=I1(t).eventData;if(r)return s._model.isSelected(r.name)?i.enterSelect(t):i.leaveSelect(t),!0})},r.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},r.type="geo",r}(kM);function jh(t,r,i){WV.registerMap(t,r,i)}function jd(t){function r(r,i){i.update="geo:updateSelectStatus",t.registerAction(i,function(t,i){var s={},u=[];return i.eachComponent({mainType:"geo",query:t},function(i){i[r](t.name),Sp(i.coordinateSystem.regions,function(t){s[t.name]=i.isSelected(t.name)||!1});var c=[];Sp(s,function(t,r){s[r]&&c.push(r)}),u.push({geoIndex:i.componentIndex,name:c})}),{selected:s,allSelected:u,name:t.name}})}t.registerCoordinateSystem("geo",jo),t.registerComponentModel(js),t.registerComponentView(jc),t.registerImpl("registerMap",jh),t.registerImpl("getMap",function(t){return WV.getMapForUser(t)}),r("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),r("select",{type:"geoSelect",event:"geoselected"}),r("unSelect",{type:"geoUnSelect",event:"geounselected"}),t.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,r,i){var s=t.componentType||"series";r.eachComponent({mainType:s,query:t},function(r){var u=r.coordinateSystem;if("geo"===u.type){var c=ju(u,t,r.get("scaleLimit"),i);r.setCenter&&r.setCenter(c.center),r.setZoom&&r.setZoom(c.zoom),"series"===s&&Sp(r.seriesGroup,function(t){t.setCenter(c.center),t.setZoom(c.zoom)})}})})}function jp(t,r){var i=t.isExpand?t.children:[],s=t.parentNode.children,u=t.hierNode.i?s[t.hierNode.i-1]:null;if(i.length){(function(t){for(var r=t.children,i=r.length,s=0,u=0;--i>=0;){var c=r[i];c.hierNode.prelim+=s,c.hierNode.modifier+=s,u+=c.hierNode.change,s+=c.hierNode.shift+u}})(t);var c=(i[0].hierNode.prelim+i[i.length-1].hierNode.prelim)/2;u?(t.hierNode.prelim=u.hierNode.prelim+r(t,u),t.hierNode.modifier=t.hierNode.prelim-c):t.hierNode.prelim=c}else u&&(t.hierNode.prelim=u.hierNode.prelim+r(t,u));t.parentNode.hierNode.defaultAncestor=function(t,r,i,s){if(r){for(var u=t,c=t,h=c.parentNode.children[0],p=r,f=u.hierNode.modifier,v=c.hierNode.modifier,y=h.hierNode.modifier,x=p.hierNode.modifier;p=jv(p),c=jy(c),p&&c;){u=jv(u),h=jy(h),u.hierNode.ancestor=t;var _=p.hierNode.prelim+x-c.hierNode.prelim-v+s(p,c);_>0&&(function(t,r,i){var s=i/(r.hierNode.i-t.hierNode.i);r.hierNode.change-=s,r.hierNode.shift+=i,r.hierNode.modifier+=i,r.hierNode.prelim+=i,t.hierNode.change+=s}(function(t,r,i){return t.hierNode.ancestor.parentNode===r.parentNode?t.hierNode.ancestor:i}(p,t,i),t,_),v+=_,f+=_),x+=p.hierNode.modifier,v+=c.hierNode.modifier,f+=u.hierNode.modifier,y+=h.hierNode.modifier}p&&!jv(u)&&(u.hierNode.thread=p,u.hierNode.modifier+=x-f),c&&!jy(h)&&(h.hierNode.thread=c,h.hierNode.modifier+=v-y,i=t)}return i}(t,u,t.parentNode.hierNode.defaultAncestor||s[0],r)}function jf(t){var r=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:r},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function jg(t){return arguments.length?t:jx}function jm(t,r){return{x:r*Math.cos(t-=Math.PI/2),y:r*Math.sin(t)}}function jv(t){var r=t.children;return r.length&&t.isExpand?r[r.length-1]:t.hierNode.thread}function jy(t){var r=t.children;return r.length&&t.isExpand?r[0]:t.hierNode.thread}function jx(t,r){return t.parentNode===r.parentNode?1:2}var j_=function(){this.parentPoint=[],this.childPoints=[]},jb=function(t){function r(r){return t.call(this,r)||this}return wU(r,t),r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new j_},r.prototype.buildPath=function(t,r){var i=r.childPoints,s=i.length,u=r.parentPoint,c=i[0],h=i[s-1];if(1===s){t.moveTo(u[0],u[1]),t.lineTo(c[0],c[1]);return}var p=r.orient,f="TB"===p||"BT"===p?0:1,v=1-f,y=TT(r.forkPosition,1),x=[];x[f]=u[f],x[v]=u[v]+(h[v]-u[v])*y,t.moveTo(u[0],u[1]),t.lineTo(x[0],x[1]),t.moveTo(c[0],c[1]),x[f]=c[f],t.lineTo(x[0],x[1]),x[f]=h[f],t.lineTo(x[0],x[1]),t.lineTo(h[0],h[1]);for(var _=1;_<s-1;_++){var b=i[_];t.moveTo(b[0],b[1]),x[f]=b[f],t.lineTo(x[0],x[1])}},r}(IM),jw=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i._mainGroup=new Tf,i}return wU(r,t),r.prototype.init=function(t,r){this._controller=new Wr(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},r.prototype.render=function(t,r,i){var s=t.getData(),u=t.layoutInfo,c=this._mainGroup;"radial"===t.get("layout")?(c.x=u.x+u.width/2,c.y=u.y+u.height/2):(c.x=u.x,c.y=u.y),this._updateViewCoordSys(t,i),this._updateController(t,r,i);var h=this._data;s.diff(h).add(function(r){jS(s,r)&&jM(s,r,null,c,t)}).update(function(r,i){var u=h.getItemGraphicEl(i);if(!jS(s,r)){u&&jT(h,i,u,c,t);return}jM(s,r,u,c,t)}).remove(function(r){var i=h.getItemGraphicEl(r);i&&jT(h,r,i,c,t)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),!0===t.get("expandAndCollapse")&&s.eachItemGraphicEl(function(r,s){r.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:s})})}),this._data=s},r.prototype._updateViewCoordSys=function(t,r){var i=t.getData(),s=[];i.each(function(t){var r=i.getItemLayout(t);r&&!isNaN(r.x)&&!isNaN(r.y)&&s.push([+r.x,+r.y])});var u=[],c=[];EK(s,u,c);var h=this._min,p=this._max;c[0]-u[0]==0&&(u[0]=h?h[0]:u[0]-1,c[0]=p?p[0]:c[0]+1),c[1]-u[1]==0&&(u[1]=h?h[1]:u[1]-1,c[1]=p?p[1]:c[1]+1);var f=t.coordinateSystem=new W7;f.zoomLimit=t.get("scaleLimit"),f.setBoundingRect(u[0],u[1],c[0]-u[0],c[1]-u[1]),f.setCenter(t.get("center"),r),f.setZoom(t.get("zoom")),this.group.attr({x:f.x,y:f.y,scaleX:f.scaleX,scaleY:f.scaleY}),this._min=u,this._max=c},r.prototype._updateController=function(t,r,i){var s=this,u=this._controller,c=this._controllerHost,h=this.group;u.setPointerChecker(function(r,s,u){var c=h.getBoundingRect();return c.applyTransform(h.transform),c.contain(s,u)&&!Wc(r,i,t)}),u.enable(t.get("roam")),c.zoomLimit=t.get("scaleLimit"),c.zoom=t.coordinateSystem.getZoom(),u.off("pan").off("zoom").on("pan",function(r){Ws(c,r.dx,r.dy),i.dispatchAction({seriesId:t.id,type:"treeRoam",dx:r.dx,dy:r.dy})}).on("zoom",function(r){Wl(c,r.scale,r.originX,r.originY),i.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:r.scale,originX:r.originX,originY:r.originY}),s._updateNodeAndLinkScale(t),i.updateLabelLayout()})},r.prototype._updateNodeAndLinkScale=function(t){var r=t.getData(),i=this._getNodeGlobalScale(t);r.eachItemGraphicEl(function(t,r){t.setSymbolScale(i)})},r.prototype._getNodeGlobalScale=function(t){var r=t.coordinateSystem;if("view"!==r.type)return 1;var i=this._nodeScaleRatio,s=r.scaleX||1,u=r.getZoom();return((u-1)*i+1)/s},r.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},r.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},r.type="tree",r}(Bu);function jS(t,r){var i=t.getItemLayout(r);return i&&!isNaN(i.x)&&!isNaN(i.y)}function jM(t,r,i,s,u){var c=!i,h=t.tree.getNodeByDataIndex(r),p=h.getModel(),f=h.getVisual("style").fill,v=!1===h.isExpand&&0!==h.children.length?f:"#fff",y=t.tree.root,x=h.parentNode===y?h:h.parentNode||h,_=t.getItemGraphicEl(x.dataIndex),b=x.getLayout(),w=_?{x:_.__oldX,y:_.__oldY,rawX:_.__radialOldRawX,rawY:_.__radialOldRawY}:b,S=h.getLayout();c?((i=new H$(t,r,null,{symbolInnerColor:v,useNameLabel:!0})).x=w.x,i.y=w.y):i.updateData(t,r,null,{symbolInnerColor:v,useNameLabel:!0}),i.__radialOldRawX=i.__radialRawX,i.__radialOldRawY=i.__radialRawY,i.__radialRawX=S.rawX,i.__radialRawY=S.rawY,s.add(i),t.setItemGraphicEl(r,i),i.__oldX=i.x,i.__oldY=i.y,DW(i,{x:S.x,y:S.y},u);var M=i.getSymbolPath();if("radial"===u.get("layout")){var A=y.children[0],C=A.getLayout(),T=A.children.length,I=void 0,D=void 0;if(S.x===C.x&&!0===h.isExpand&&A.children.length){var P={x:(A.children[0].getLayout().x+A.children[T-1].getLayout().x)/2,y:(A.children[0].getLayout().y+A.children[T-1].getLayout().y)/2};(I=Math.atan2(P.y-C.y,P.x-C.x))<0&&(I=2*Math.PI+I),(D=P.x<C.x)&&(I-=Math.PI)}else(I=Math.atan2(S.y-C.y,S.x-C.x))<0&&(I=2*Math.PI+I),0===h.children.length||0!==h.children.length&&!1===h.isExpand?(D=S.x<C.x)&&(I-=Math.PI):!(D=S.x>C.x)&&(I-=Math.PI);var R=D?"left":"right",L=p.getModel("label"),k=L.get("rotate"),O=Math.PI/180*k,B=M.getTextContent();B&&(M.setTextConfig({position:L.get("position")||R,rotation:null==k?-I:O,origin:"center"}),B.setStyle("verticalAlign","middle"))}var N=p.get(["emphasis","focus"]),F="relative"===N?S$(h.getAncestorsIndices(),h.getDescendantIndices()):"ancestor"===N?h.getAncestorsIndices():"descendant"===N?h.getDescendantIndices():null;F&&(I1(i).focus=F),function(t,r,i,s,u,c,h,p){var f=r.getModel(),v=t.get("edgeShape"),y=t.get("layout"),x=t.getOrient(),_=t.get(["lineStyle","curveness"]),b=t.get("edgeForkPosition"),w=f.getModel("lineStyle").getLineStyle(),S=s.__edge;if("curve"===v)r.parentNode&&r.parentNode!==i&&(!S&&(S=s.__edge=new O_({shape:jE(y,x,_,u,u)})),DW(S,{shape:jE(y,x,_,c,h)},t));else if("polyline"===v&&"orthogonal"===y&&r!==i&&r.children&&0!==r.children.length&&!0===r.isExpand){for(var M=r.children,A=[],C=0;C<M.length;C++){var T=M[C].getLayout();A.push([T.x,T.y])}!S&&(S=s.__edge=new jb({shape:{parentPoint:[h.x,h.y],childPoints:[[h.x,h.y]],orient:x,forkPosition:b}})),DW(S,{shape:{parentPoint:[h.x,h.y],childPoints:A}},t)}S&&!("polyline"===v&&!r.isExpand)&&(S.useStyle(Ss({strokeNoScale:!0,fill:null},w)),DB(S,f,"lineStyle"),Dm(S),p.add(S))}(u,h,y,i,w,b,S,s),i.__edge&&(i.onHoverStateChange=function(r){if("blur"!==r){var s=h.parentNode&&t.getItemGraphicEl(h.parentNode.dataIndex);!(s&&1===s.hoverState)&&Df(i.__edge,r)}})}function jA(t,r,i,s,u){var c=jC(r.tree.root,t),h=c.source,p=c.sourceLayout,f=r.getItemGraphicEl(t.dataIndex);if(!!f){var v=r.getItemGraphicEl(h.dataIndex).__edge,y=f.__edge||(!1===h.isExpand||1===h.children.length?v:void 0),x=s.get("edgeShape"),_=s.get("layout"),b=s.get("orient"),w=s.get(["lineStyle","curveness"]);y&&("curve"===x?DY(y,{shape:jE(_,b,w,p,p),style:{opacity:0}},s,{cb:function(){i.remove(y)},removeOpt:u}):"polyline"===x&&"orthogonal"===s.get("layout")&&DY(y,{shape:{parentPoint:[p.x,p.y],childPoints:[[p.x,p.y]]},style:{opacity:0}},s,{cb:function(){i.remove(y)},removeOpt:u}))}}function jC(t,r){for(var i,s=r.parentNode===t?r:r.parentNode||r;null==(i=s.getLayout());)s=s.parentNode===t?s:s.parentNode||s;return{source:s,sourceLayout:i}}function jT(t,r,i,s,u){var c=t.tree.getNodeByDataIndex(r),h=jC(t.tree.root,c).sourceLayout,p={duration:u.get("animationDurationUpdate"),easing:u.get("animationEasingUpdate")};DY(i,{x:h.x+1,y:h.y+1},u,{cb:function(){s.remove(i),t.setItemGraphicEl(r,null)},removeOpt:p}),i.fadeOut(null,t.hostModel,{fadeLabel:!0,animation:p}),c.children.forEach(function(r){jA(r,t,s,u,p)}),jA(c,t,s,u,p)}function jE(t,r,i,s,u){if("radial"===t){v=s.rawX,x=s.rawY,y=u.rawX,_=u.rawY;var c,h,p,f,v,y,x,_,b=jm(v,x),w=jm(v,x+(_-x)*i),S=jm(y,_+(x-_)*i),M=jm(y,_);return{x1:b.x||0,y1:b.y||0,x2:M.x||0,y2:M.y||0,cpx1:w.x||0,cpy1:w.y||0,cpx2:S.x||0,cpy2:S.y||0}}return v=s.x,x=s.y,y=u.x,_=u.y,("LR"===r||"RL"===r)&&(c=v+(y-v)*i,h=x,p=y+(v-y)*i,f=_),("TB"===r||"BT"===r)&&(c=v,h=x+(_-x)*i,p=y,f=_+(x-_)*i),{x1:v,y1:x,x2:y,y2:_,cpx1:c,cpy1:h,cpx2:p,cpy2:f}}var jI=T7();function jD(t,r){if(function(t){return jI(t).mainData===t}(this)){var i=So({},jI(this).datas);i[this.dataType]=r,jO(r,i,t)}else jB(r,this.dataType,jI(this).mainData,t);return r}function jP(t,r){return t.struct&&t.struct.update(),r}function jR(t,r){return Sp(jI(r).datas,function(i,s){i!==r&&jB(i.cloneShallow(),s,r,t)}),r}function jL(t){var r=jI(this).mainData;return null==t||null==r?r:jI(r).datas[t]}function jk(){var t=jI(this).mainData;return null==t?[{data:t}]:Sf(Sy(jI(t).datas),function(r){return{type:r,data:jI(t).datas[r]}})}function jO(t,r,i){jI(t).datas={},Sp(r,function(r,s){jB(r,s,t,i)})}function jB(t,r,i,s){jI(i).datas[r]=t,jI(t).mainData=i,t.dataType=r,s.struct&&(t[s.structAttr]=s.struct,s.struct[s.datasAttr[r]]=t),t.getLinkedData=jL,t.getLinkedDataAll=jk}let jN=function(t){var r=t.mainData,i=t.datas;!i&&(i={main:r},t.datasAttr={main:"data"}),t.datas=t.mainData=null,jO(r,i,t),Sp(i,function(i){Sp(r.TRANSFERABLE_METHODS,function(r){i.wrapMethod(r,S_(jD,t))})}),r.wrapMethod("cloneShallow",S_(jR,t)),Sp(r.CHANGABLE_METHODS,function(i){r.wrapMethod(i,S_(jP,t))}),Sz(i[r.dataType]===r)};var jF=function(){function t(t,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=r}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(t,r,i){Sw(t)&&(i=r,r=t,t=null),SS(t=t||{})&&(t={order:t});var s,u=t.order||"preorder",c=this[t.attr||"children"];"preorder"===u&&(s=r.call(i,this));for(var h=0;!s&&h<c.length;h++)c[h].eachNode(t,r,i);"postorder"===u&&r.call(i,this)},t.prototype.updateDepthAndHeight=function(t){var r=0;this.depth=t;for(var i=0;i<this.children.length;i++){var s=this.children[i];s.updateDepthAndHeight(t+1),s.height>r&&(r=s.height)}this.height=r+1},t.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var r=0,i=this.children,s=i.length;r<s;r++){var u=i[r].getNodeById(t);if(u)return u}},t.prototype.contains=function(t){if(t===this)return!0;for(var r=0,i=this.children,s=i.length;r<s;r++){var u=i[r].contains(t);if(u)return u}},t.prototype.getAncestors=function(t){for(var r=[],i=t?this:this.parentNode;i;)r.push(i),i=i.parentNode;return r.reverse(),r},t.prototype.getAncestorsIndices=function(){for(var t=[],r=this;r;)t.push(r.dataIndex),r=r.parentNode;return t.reverse(),t},t.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(r){t.push(r.dataIndex)}),t},t.prototype.getValue=function(t){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},t.prototype.setLayout=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,r)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(t)},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,r)},t.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,r=0;r<t.length;++r)if(t[r]===this)return r}return -1},t.prototype.isAncestorOf=function(t){for(var r=t.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},t.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},t}(),jz=function(){function t(t){this.type="tree",this._nodes=[],this.hostModel=t}return t.prototype.eachNode=function(t,r,i){this.root.eachNode(t,r,i)},t.prototype.getNodeByDataIndex=function(t){var r=this.data.getRawIndex(t);return this._nodes[r]},t.prototype.getNodeById=function(t){return this.root.getNodeById(t)},t.prototype.update=function(){for(var t=this.data,r=this._nodes,i=0,s=r.length;i<s;i++)r[i].dataIndex=-1;for(var i=0,s=t.count();i<s;i++)r[t.getRawIndex(i)].dataIndex=i},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(r,i,s){var u=new t(i),c=[],h=1;(function t(r,i){var s=r.value;h=Math.max(h,Sb(s)?s.length:1),c.push(r);var p=new jF(T4(r.name,""),u);i?function(t,r){var i=r.children;if(t.parentNode!==r)i.push(t),t.parentNode=r}(p,i):u.root=p,u._nodes.push(p);var f=r.children;if(f)for(var v=0;v<f.length;v++)t(f[v],p)})(r);u.root.updateDepthAndHeight(0);var p=new FV(Fj(c,{coordDimensions:["value"],dimensionsCount:h}).dimensions,i);return p.initData(c),s&&s(p),jN({mainData:p,struct:u,structAttr:"tree"}),u.update(),u},t}();function jU(t,r,i){if(t&&Su(r,t.type)>=0){var s=i.getData().tree.root,u=t.targetNode;if(SS(u)&&(u=s.getNodeById(u)),u&&s.contains(u))return{node:u};var c=t.targetNodeId;if(null!=c&&(u=s.getNodeById(c)))return{node:u}}}function jH(t){for(var r=[];t;)(t=t.parentNode)&&r.push(t);return r.reverse()}function jG(t,r){return Su(jH(t),r)>=0}function jV(t,r){for(var i=[];t;){var s=t.dataIndex;i.push({name:t.name,dataIndex:s,value:r.getRawValue(s)}),t=t.parentNode}return i.reverse(),i}var jW=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return wU(r,t),r.prototype.getInitialData=function(t){var r={name:t.name,children:t.data},i=new Pp(t.leaves||{},this,this.ecModel),s=jz.createTree(r,this,function(t){t.wrapMethod("getItemModel",function(t,r){var u=s.getNodeByDataIndex(r);return!(u&&u.children.length&&u.isExpand)&&(t.parentModel=i),t})}),u=0;s.eachNode("preorder",function(t){t.depth>u&&(u=t.depth)});var c=t.expandAndCollapse&&t.initialTreeDepth>=0?t.initialTreeDepth:u;return s.root.eachNode("preorder",function(t){var r=t.hostTree.data.getRawDataItem(t.dataIndex);t.isExpand=r&&null!=r.collapsed?!r.collapsed:t.depth<=c}),s.data},r.prototype.getOrient=function(){var t=this.get("orient");return"horizontal"===t?t="LR":"vertical"===t&&(t="TB"),t},r.prototype.setZoom=function(t){this.option.zoom=t},r.prototype.setCenter=function(t){this.option.center=t},r.prototype.formatTooltip=function(t,r,i){for(var s=this.getData().tree,u=s.root.children[0],c=s.getNodeByDataIndex(t),h=c.getValue(),p=c.name;c&&c!==u;)p=c.parentNode.name+"."+p,c=c.parentNode;return L7("nameValue",{name:p,value:h,noValue:isNaN(h)||null==h})},r.prototype.getDataParams=function(r){var i=t.prototype.getDataParams.apply(this,arguments),s=this.getData().tree.getNodeByDataIndex(r);return i.treeAncestors=jV(s,this),i.collapsed=!s.isExpand,i},r.type="series.tree",r.layoutMode="box",r.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},r}(kw);function jj(t,r){for(var i,s=[t];i=s.pop();)if(r(i),i.isExpand){var u=i.children;if(u.length)for(var c=u.length-1;c>=0;c--)s.push(u[c])}}function jX(t,r){t.eachSeriesByType("tree",function(t){(function(t,r){var i,s,u=(i=t,s=r,Rt(i.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()}));t.layoutInfo=u;var c=t.get("layout"),h=0,p=0,f=null;"radial"===c?(h=2*Math.PI,p=Math.min(u.height,u.width)/2,f=jg(function(t,r){return(t.parentNode===r.parentNode?1:2)/t.depth})):(h=u.width,p=u.height,f=jg());var v=t.getData().tree.root,y=v.children[0];if(y){!function(t){t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r,i,s=[t];r=s.pop();)if(i=r.children,r.isExpand&&i.length){for(var u=i.length,c=u-1;c>=0;c--){var h=i[c];h.hierNode={defaultAncestor:null,ancestor:h,prelim:0,modifier:0,change:0,shift:0,i:c,thread:null},s.push(h)}}}(v),!function(t,r,i){for(var s,u=[t],c=[];s=u.pop();)if(c.push(s),s.isExpand){var h=s.children;if(h.length)for(var p=0;p<h.length;p++)u.push(h[p])}for(;s=c.pop();)r(s,i)}(y,jp,f),v.hierNode.modifier=-y.hierNode.prelim,jj(y,jf);var x=y,_=y,b=y;jj(y,function(t){var r=t.getLayout().x;r<x.getLayout().x&&(x=t),r>_.getLayout().x&&(_=t),t.depth>b.depth&&(b=t)});var w=x===_?1:f(x,_)/2,S=w-x.getLayout().x,M=0,A=0,C=0,T=0;if("radial"===c)M=h/(_.getLayout().x+w+S),A=p/(b.depth-1||1),jj(y,function(t){C=(t.getLayout().x+S)*M,T=(t.depth-1)*A;var r=jm(C,T);t.setLayout({x:r.x,y:r.y,rawX:C,rawY:T},!0)});else{var I=t.getOrient();"RL"===I||"LR"===I?(A=p/(_.getLayout().x+w+S),M=h/(b.depth-1||1),jj(y,function(t){T=(t.getLayout().x+S)*A,C="LR"===I?(t.depth-1)*M:h-(t.depth-1)*M,t.setLayout({x:C,y:T},!0)})):("TB"===I||"BT"===I)&&(M=h/(_.getLayout().x+w+S),A=p/(b.depth-1||1),jj(y,function(t){C=(t.getLayout().x+S)*M,T="TB"===I?(t.depth-1)*A:p-(t.depth-1)*A,t.setLayout({x:C,y:T},!0)}))}}})(t,r)})}function jY(t){t.eachSeriesByType("tree",function(t){var r=t.getData();r.tree.eachNode(function(t){var i=t.getModel().getModel("itemStyle").getItemStyle();So(r.ensureUniqueItemVisual(t.dataIndex,"style"),i)})})}var j$=["treemapZoomToNode","treemapRender","treemapMove"];function jJ(t){var r=t.getData().tree,i={};r.eachNode(function(r){for(var s=r;s&&s.depth>1;)s=s.parentNode;var u=RR(t.ecModel,s.name||s.dataIndex+"",i);r.setVisual("decal",u)})}var jZ=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.preventUsingHoverLayer=!0,i}return wU(r,t),r.prototype.getInitialData=function(t,r){var i={name:t.name,children:t.data};(function t(r){var i=0;Sp(r.children,function(r){t(r);var s=r.value;Sb(s)&&(s=s[0]),i+=s});var s=r.value;Sb(s)&&(s=s[0]),(null==s||isNaN(s))&&(s=i),s<0&&(s=0),Sb(r.value)?r.value[0]=s:r.value=s})(i);var s=t.levels||[],u=new Pp({itemStyle:this.designatedVisualItemStyle={}},this,r),c=Sf((s=t.levels=function(t,r){var i,s,u=Tq(r.get("color")),c=Tq(r.get(["aria","decal","decals"]));if(!!u){Sp(t=t||[],function(t){var r=new Pp(t),u=r.get("color"),c=r.get("decal");(r.get(["itemStyle","color"])||u&&"none"!==u)&&(i=!0),(r.get(["itemStyle","decal"])||c&&"none"!==c)&&(s=!0)});var h=t[0]||(t[0]={});return!i&&(h.color=u.slice()),!s&&c&&(h.decal=c.slice()),t}}(s,r))||[],function(t){return new Pp(t,u,r)},this),h=jz.createTree(i,this,function(t){t.wrapMethod("getItemModel",function(t,r){var i=h.getNodeByDataIndex(r),s=i?c[i.depth]:null;return t.parentModel=s||u,t})});return h.data},r.prototype.optionUpdated=function(){this.resetViewRoot()},r.prototype.formatTooltip=function(t,r,i){var s=this.getData(),u=this.getRawValue(t);return L7("nameValue",{name:s.getName(t),value:u})},r.prototype.getDataParams=function(r){var i=t.prototype.getDataParams.apply(this,arguments),s=this.getData().tree.getNodeByDataIndex(r);return i.treeAncestors=jV(s,this),i.treePathInfo=i.treeAncestors,i},r.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},So(this.layoutInfo,t)},r.prototype.mapIdToIndex=function(t){var r=this._idIndexMap;!r&&(r=this._idIndexMap=SY(),this._idIndexMapCount=0);var i=r.get(t);return null==i&&r.set(t,i=this._idIndexMapCount++),i},r.prototype.getViewRoot=function(){return this._viewRoot},r.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},r.prototype.enableAriaDecal=function(){jJ(this)},r.type="series.treemap",r.layoutMode="box",r.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.1024,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},r}(kw),jK=function(){function t(t){this.group=new Tf,t.add(this.group)}return t.prototype.render=function(t,r,i,s){var u=t.getModel("breadcrumb"),c=this.group;if(c.removeAll(),!!u.get("show")&&!!i){var h=u.getModel("itemStyle"),p=u.getModel("emphasis"),f=h.getModel("textStyle"),v=p.getModel(["itemStyle","textStyle"]),y={pos:{left:u.get("left"),right:u.get("right"),top:u.get("top"),bottom:u.get("bottom")},box:{width:r.getWidth(),height:r.getHeight()},emptyItemWidth:u.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(i,y,f),this._renderContent(t,y,h,p,f,v,s),Rn(c,y.pos,y.box)}},t.prototype._prepare=function(t,r,i){for(var s=t;s;s=s.parentNode){var u=T4(s.getModel().get("name"),""),c=Math.max(i.getTextRect(u).width+16,r.emptyItemWidth);r.totalWidth+=c+8,r.renderList.push({node:s,text:u,width:c})}},t.prototype._renderContent=function(t,r,i,s,u,c,h){var p,f,v,y,x,_,b,w,S,M=0,A=r.emptyItemWidth,C=t.get(["breadcrumb","height"]);for(var T=(p=r.pos,y=(f=r.box).width,x=f.height,_=TT(p.left,y),b=TT(p.top,x),w=TT(p.right,y),S=TT(p.bottom,x),(isNaN(_)||isNaN(parseFloat(p.left)))&&(_=0),(isNaN(w)||isNaN(parseFloat(p.right)))&&(w=y),(isNaN(b)||isNaN(parseFloat(p.top)))&&(b=0),(isNaN(S)||isNaN(parseFloat(p.bottom)))&&(S=x),{width:Math.max(w-_-(v=PK(v||0))[1]-v[3],0),height:Math.max(S-b-v[0]-v[2],0)}),I=r.totalWidth,D=r.renderList,P=s.getModel("itemStyle").getItemStyle(),R=D.length-1;R>=0;R--){var L=D[R],k=L.node,O=L.width,B=L.text;I>T.width&&(I-=O-A,O=A,B=null);var N=new Ol({shape:{points:function(t,r,i,s,u,c){var h=[[u?t:t-5,r],[t+i,r],[t+i,r+s],[u?t:t-5,r+s]];return c||h.splice(2,0,[t+i+5,r+s/2]),u||h.push([t,r+s/2]),h}(M,0,O,C,R===D.length-1,0===R)},style:Ss(i.getItemStyle(),{lineJoin:"bevel"}),textContent:new I0({style:D2(u,{text:B})}),textConfig:{position:"inside"},z2:1e5,onclick:S_(h,k)});N.disableLabelAnimation=!0,N.getTextContent().ensureState("emphasis").style=D2(c,{text:B}),N.ensureState("emphasis").style=P,DR(N,s.get("focus"),s.get("blurScope"),s.get("disabled")),this.group.add(N),function(t,r,i){I1(t).eventData={componentType:"series",componentSubType:"treemap",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:i&&i.dataIndex,name:i&&i.name},treePathInfo:i&&jV(i,r)}}(N,t,k),M+=O+8}},t.prototype.remove=function(){this.group.removeAll()},t}(),jq=function(){function t(){this._storage=[],this._elExistsMap={}}return t.prototype.add=function(t,r,i,s,u){return!this._elExistsMap[t.id]&&(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:r,duration:i,delay:s,easing:u}),!0)},t.prototype.finished=function(t){return this._finishedCallback=t,this},t.prototype.start=function(){for(var t=this,r=this._storage.length,i=function(){--r<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},s=0,u=this._storage.length;s<u;s++){var c=this._storage[s];c.el.animateTo(c.target,{duration:c.duration,delay:c.delay,easing:c.easing,setToFinal:!0,done:i,aborted:i})}return this},t}(),jQ="label",j0="upperLabel",j1=100,j2=20,j3=30,j5=Ey([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),j4=function(t){var r=j5(t);return r.stroke=r.fill=r.lineWidth=null,r},j6=T7(),j9=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i._state="ready",i._storage=j8(),i}return wU(r,t),r.prototype.render=function(t,r,i,s){if(!(0>Su(r.findComponents({mainType:"series",subType:"treemap",query:s}),t))){this.seriesModel=t,this.api=i,this.ecModel=r;var u=jU(s,["treemapZoomToNode","treemapRootToNode"],t),c=s&&s.type,h=t.layoutInfo,p=!this._oldTree,f=this._storage,v="treemapRootToNode"===c&&u&&f?{rootNodeGroup:f.nodeGroup[u.node.getRawIndex()],direction:s.direction}:null,y=this._giveContainerGroup(h),x=t.get("animation"),_=this._doRender(y,t,v);!x||p||c&&"treemapZoomToNode"!==c&&"treemapRootToNode"!==c?_.renderFinally():this._doAnimation(y,_,t,v),this._resetController(i),this._renderBreadcrumb(t,i,u)}},r.prototype._giveContainerGroup=function(t){var r=this._containerGroup;return!r&&(r=this._containerGroup=new Tf,this._initEvents(r),this.group.add(r)),r.x=t.x,r.y=t.y,r},r.prototype._doRender=function(t,r,i){var s=r.getData().tree,u=this._oldTree,c=j8(),h=j8(),p=this._storage,f=[];(function t(s,u,v,y,x){function _(t){return t.getId()}function b(_,b){var w=null!=_?s[_]:null,S=null!=b?u[b]:null,M=function(t,r,i,s,u,c,h,p,f,v){if(!h)return;var y=h.getLayout(),x=t.getData(),_=h.getModel();if(x.setItemGraphicEl(h.dataIndex,null),!y||!y.isInView)return;var b=y.width,w=y.height,S=y.borderWidth,M=y.invisible,A=h.getRawIndex(),C=p&&p.getRawIndex(),T=h.viewChildren,I=y.upperHeight,D=T&&T.length,P=_.getModel("itemStyle"),R=_.getModel(["emphasis","itemStyle"]),L=_.getModel(["blur","itemStyle"]),k=_.getModel(["select","itemStyle"]),O=P.get("borderRadius")||0,B=Y("nodeGroup",Tf);if(!!B){if(f.add(B),B.x=y.x||0,B.y=y.y||0,B.markRedraw(),j6(B).nodeWidth=b,j6(B).nodeHeight=w,y.isAboveViewRoot)return B;var N=Y("background",IF,v,j2);N&&function(r,i,s){var u=I1(i);if(u.dataIndex=h.dataIndex,u.seriesIndex=t.seriesIndex,i.setShape({x:0,y:0,width:b,height:w,r:O}),M)W(i);else{i.invisible=!1;var c=h.getVisual("style"),p=c.stroke,f=j4(P);f.fill=p;var v=j5(R);v.fill=R.get("borderColor");var y=j5(L);y.fill=L.get("borderColor");var x=j5(k);if(x.fill=k.get("borderColor"),s){var _=b-2*S;j(i,p,c.opacity,{x:S,y:0,width:_,height:I})}else i.removeTextContent();i.setStyle(f),i.ensureState("emphasis").style=v,i.ensureState("blur").style=y,i.ensureState("select").style=x,Dm(i)}r.add(i)}(B,N,D&&y.upperLabelHeight);var F=_.getModel("emphasis"),z=F.get("focus"),U=F.get("blurScope"),H=F.get("disabled"),G="ancestor"===z?h.getAncestorsIndices():"descendant"===z?h.getDescendantIndices():z;if(D)DF(B)&&DN(B,!1),N&&(DN(N,!H),x.setItemGraphicEl(h.dataIndex,N),DL(N,G,U));else{var V=Y("content",IF,v,j3);V&&function(r,i){var s=I1(i);s.dataIndex=h.dataIndex,s.seriesIndex=t.seriesIndex;var u=Math.max(b-2*S,0),c=Math.max(w-2*S,0);if(i.culling=!0,i.setShape({x:S,y:S,width:u,height:c,r:O}),M)W(i);else{i.invisible=!1;var p=h.getVisual("style"),f=p.fill,v=j4(P);v.fill=f,v.decal=p.decal;var y=j5(R),x=j5(L),_=j5(k);j(i,f,p.opacity,null),i.setStyle(v),i.ensureState("emphasis").style=y,i.ensureState("blur").style=x,i.ensureState("select").style=_,Dm(i)}r.add(i)}(B,V),N.disableMorphing=!0,N&&DF(N)&&DN(N,!1),DN(B,!H),x.setItemGraphicEl(h.dataIndex,B),DL(B,G,U)}return B}function W(t){t.invisible||c.push(t)}function j(r,i,s,u){var c=_.getModel(u?j0:jQ),p=T4(_.get("name"),null),f=c.getShallow("show");D0(r,D1(_,u?j0:jQ),{defaultText:f?p:null,inheritColor:i,defaultOpacity:s,labelFetcher:t,labelDataIndex:h.dataIndex});var v=r.getTextContent();if(!!v){var x=v.style,b=SF(x.padding||0);u&&(r.setTextConfig({layoutRect:u}),v.disableLabelLayout=!0),v.beforeUpdate=function(){var t=Math.max((u?u.width:r.shape.width)-b[1]-b[3],0),i=Math.max((u?u.height:r.shape.height)-b[0]-b[2],0);(x.width!==t||x.height!==i)&&v.setStyle({width:t,height:i})},x.truncateMinChar=2,x.lineOverflow="truncate",X(x,u,y);var w=v.getState("emphasis");X(w?w.style:null,u,y)}}function X(r,i,s){var u=r?r.text:null;if(!i&&s.isLeafRoot&&null!=u){var c=t.get("drillDownIcon",!0);r.text=c?c+" "+u:u}}function Y(t,c,p,f){var v=null!=C&&i[t][C],y=u[t];return v?(i[t][C]=null,function(t,r){var i=t[A]={};r instanceof Tf?(i.oldX=r.x,i.oldY=r.y):i.oldShape=So({},r.shape)}(y,v)):!M&&((v=new c)instanceof EU&&(v.z2=function(t,r){return t*j1+r}(p,f)),function(t,r){var i=t[A]={},c=h.parentNode,p=r instanceof Tf;if(c&&(!s||"drillDown"===s.direction)){var f=0,v=0,y=u.background[c.getRawIndex()];!s&&y&&y.oldShape&&(f=y.oldShape.width,v=y.oldShape.height),p?(i.oldX=0,i.oldY=v):i.oldShape={x:f,y:v,width:0,height:0}}i.fadein=!p}(y,v)),r[t][A]=v}}(r,h,p,i,c,f,w,S,v,x);M&&t(w&&w.viewChildren||[],S&&S.viewChildren||[],M,y,x+1)}y?(u=s,Sp(s,function(t,r){t.isRemoved()||b(r,r)})):new FC(u,s,_,_).add(b).update(b).remove(S_(b,null)).execute()})(s.root?[s.root]:[],u&&u.root?[u.root]:[],t,s===u||!u,0);var v=function(t){var r=j8();return t&&Sp(t,function(t,i){var s=r[i];Sp(t,function(t){t&&(s.push(t),j6(t).willDelete=!0)})}),r}(p);if(this._oldTree=s,this._storage=h,this._controllerHost){var y=this.seriesModel.layoutInfo,x=s.root.getLayout();x.width===y.width&&x.height===y.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:c,willDeleteEls:v,renderFinally:function(){Sp(v,function(t){Sp(t,function(t){t.parent&&t.parent.remove(t)})}),Sp(f,function(t){t.invisible=!0,t.dirty()})}}},r.prototype._doAnimation=function(t,r,i,s){var u=i.get("animationDurationUpdate"),c=i.get("animationEasing"),h=(Sw(u)?0:u)||0,p=(Sw(c)?null:c)||"cubicOut",f=new jq;Sp(r.willDeleteEls,function(t,r){Sp(t,function(t,i){if(!t.invisible){var u,c=t.parent,v=j6(c);if(s&&"drillDown"===s.direction)u=c===s.rootNodeGroup?{shape:{x:0,y:0,width:v.nodeWidth,height:v.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var y=0,x=0;!v.willDelete&&(y=v.nodeWidth/2,x=v.nodeHeight/2),u="nodeGroup"===r?{x:y,y:x,style:{opacity:0}}:{shape:{x:y,y:x,width:0,height:0},style:{opacity:0}}}u&&f.add(t,u,h,0,p)}})}),Sp(this._storage,function(t,i){Sp(t,function(t,s){var u=r.lastsForAnimation[i][s],c={};if(!!u)t instanceof Tf?null!=u.oldX&&(c.x=t.x,c.y=t.y,t.x=u.oldX,t.y=u.oldY):(u.oldShape&&(c.shape=So({},t.shape),t.setShape(u.oldShape)),u.fadein?(t.setStyle("opacity",0),c.style={opacity:1}):1!==t.style.opacity&&(c.style={opacity:1})),f.add(t,c,h,0,p)})},this),this._state="animating",f.finished(Sx(function(){this._state="ready",r.renderFinally()},this)).start()},r.prototype._resetController=function(t){var r=this._controller,i=this._controllerHost;!i&&(this._controllerHost={target:this.group},i=this._controllerHost),!r&&((r=this._controller=new Wr(t.getZr())).enable(this.seriesModel.get("roam")),i.zoomLimit=this.seriesModel.get("scaleLimit"),i.zoom=this.seriesModel.get("zoom"),r.on("pan",Sx(this._onPan,this)),r.on("zoom",Sx(this._onZoom,this)));var s=new M4(0,0,t.getWidth(),t.getHeight());r.setPointerChecker(function(t,r,i){return s.contain(r,i)})},r.prototype._clearController=function(){var t=this._controller;this._controllerHost=null,t&&(t.dispose(),t=null)},r.prototype._onPan=function(t){if("animating"!==this._state&&(Math.abs(t.dx)>3||Math.abs(t.dy)>3)){var r=this.seriesModel.getData().tree.root;if(!r)return;var i=r.getLayout();if(!!i)this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x+t.dx,y:i.y+t.dy,width:i.width,height:i.height}})}},r.prototype._onZoom=function(t){var r=t.originX,i=t.originY,s=t.scale;if("animating"!==this._state){var u=this.seriesModel.getData().tree.root;if(!u)return;var c=u.getLayout();if(!c)return;var h=new M4(c.x,c.y,c.width,c.height),p=null,f=this._controllerHost;p=f.zoomLimit;var v=f.zoom=f.zoom||1;if(v*=s,p){var y=p.min||0;v=Math.max(Math.min(p.max||1/0,v),y)}var x=v/f.zoom;f.zoom=v;var _=this.seriesModel.layoutInfo;r-=_.x,i-=_.y;var b=MH();Mj(b,b,[-r,-i]),MY(b,b,[x,x]),Mj(b,b,[r,i]),h.applyTransform(b),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:h.x,y:h.y,width:h.width,height:h.height}})}},r.prototype._initEvents=function(t){var r=this;t.on("click",function(t){if("ready"!==r._state)return;var i=r.seriesModel.get("nodeClick",!0);if(!i)return;var s=r.findTarget(t.offsetX,t.offsetY);if(!!s){var u=s.node;if(u.getLayout().isLeafRoot)r._rootToNode(s);else if("zoomToNode"===i)r._zoomToNode(s);else if("link"===i){var c=u.hostTree.data.getItemModel(u.dataIndex),h=c.get("link",!0),p=c.get("target",!0)||"blank";h&&P6(h,p)}}},this)},r.prototype._renderBreadcrumb=function(t,r,i){var s=this;!i&&!(i=null!=t.get("leafDepth",!0)?{node:t.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2))&&(i={node:t.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new jK(this.group))).render(t,r,i.node,function(r){"animating"!==s._state&&(jG(t.getViewRoot(),r)?s._rootToNode({node:r}):s._zoomToNode({node:r}))})},r.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=j8(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},r.prototype.dispose=function(){this._clearController()},r.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},r.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},r.prototype.findTarget=function(t,r){var i;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(s){var u=this._storage.background[s.getRawIndex()];if(u){var c=u.transformCoordToLocal(t,r),h=u.shape;if(!(h.x<=c[0])||!(c[0]<=h.x+h.width)||!(h.y<=c[1])||!(c[1]<=h.y+h.height))return!1;i={node:s,offsetX:c[0],offsetY:c[1]}}},this),i},r.type="treemap",r}(Bu);function j8(){return{nodeGroup:[],background:[],content:[]}}var j7=Sp,Xe=function(){function t(r){var i=r.mappingMethod,s=r.type,u=this.option=Sr(r);this.type=s,this.mappingMethod=i,this._normalizeData=Xc[i];var c=t.visualHandlers[s];this.applyVisual=c.applyVisual,this.getColorMapper=c.getColorMapper,this._normalizedToVisual=c._normalizedToVisual[i],"piecewise"===i?(Xt(u),function(t){var r=t.pieceList;t.hasSpecialVisual=!1,Sp(r,function(r,i){r.originIndex=i,null!=r.visual&&(t.hasSpecialVisual=!0)})}(u)):"category"===i?u.categories?function(t){var r=t.categories,i=t.categoryMap={},s=t.visual;if(j7(r,function(t,r){i[t]=r}),!Sb(s)){var u=[];SC(s)?j7(s,function(t,r){var s=i[r];u[null!=s?s:-1]=t}):u[-1]=s,s=Xu(t,u)}for(var c=r.length-1;c>=0;c--)null==s[c]&&(delete i[r[c]],r.pop())}(u):Xt(u,!0):(Sz("linear"!==i||u.dataExtent),Xt(u))}return t.prototype.mapValueToVisual=function(t){var r=this._normalizeData(t);return this._normalizedToVisual(r,t)},t.prototype.getNormalizer=function(){return Sx(this._normalizeData,this)},t.listVisualTypes=function(){return Sy(t.visualHandlers)},t.isValidType=function(r){return t.visualHandlers.hasOwnProperty(r)},t.eachVisual=function(t,r,i){SC(t)?Sp(t,r,i):r.call(i,t)},t.mapVisual=function(r,i,s){var u,c=Sb(r)?[]:SC(r)?{}:(u=!0,null);return t.eachVisual(r,function(t,r){var h=i.call(s,t,r);u?c=h:c[r]=h}),c},t.retrieveVisuals=function(r){var i,s={};return r&&j7(t.visualHandlers,function(t,u){r.hasOwnProperty(u)&&(s[u]=r[u],i=!0)}),i?s:null},t.prepareVisualTypes=function(t){if(Sb(t))t=t.slice();else{if(!SC(t))return[];var r=[];j7(t,function(t,i){r.push(i)}),t=r}return t.sort(function(t,r){return"color"===r&&"color"!==t&&0===t.indexOf("color")?1:-1}),t},t.dependsOn=function(t,r){return"color"===r?!!(t&&0===t.indexOf(r)):t===r},t.findPieceIndex=function(t,r,i){for(var s,u=1/0,c=0,h=r.length;c<h;c++){var p=r[c].value;if(null!=p){if(p===t||SS(p)&&p===t+"")return c;i&&x(p,c)}}for(var c=0,h=r.length;c<h;c++){var f=r[c],v=f.interval,y=f.close;if(v){if(v[0]===-1/0){if(function(t,r,i){return t?r<=i:r<i}(y[1],t,v[1]))return c}else if(v[1]===1/0){if(function(t,r,i){return t?r<=i:r<i}(y[0],v[0],t))return c}else if(function(t,r,i){return t?r<=i:r<i}(y[0],v[0],t)&&function(t,r,i){return t?r<=i:r<i}(y[1],t,v[1]))return c;i&&x(v[0],c),i&&x(v[1],c)}}if(i)return t===1/0?r.length-1:t===-1/0?0:s;function x(r,i){var c=Math.abs(r-t);c<u&&(u=c,s=i)}},t.visualHandlers={color:{applyVisual:Xi("color"),getColorMapper:function(){var t=this.option;return Sx("category"===t.mappingMethod?function(t,r){return r||(t=this._normalizeData(t)),Xa.call(this,t)}:function(r,i,s){var u=!!s;return i||(r=this._normalizeData(r)),s=A3(r,t.parsedVisual,s),u?s:A7(s,"rgba")},this)},_normalizedToVisual:{linear:function(t){return A7(A3(t,this.option.parsedVisual),"rgba")},category:Xa,piecewise:function(t,r){var i=Xl.call(this,r);return null==i&&(i=A7(A3(t,this.option.parsedVisual),"rgba")),i},fixed:Xo}},colorHue:Xn(function(t,r){return A9(t,r)}),colorSaturation:Xn(function(t,r){return A9(t,null,r)}),colorLightness:Xn(function(t,r){return A9(t,null,null,r)}),colorAlpha:Xn(function(t,r){return A8(t,r)}),decal:{applyVisual:Xi("decal"),_normalizedToVisual:{linear:null,category:Xa,piecewise:null,fixed:null}},opacity:{applyVisual:Xi("opacity"),_normalizedToVisual:Xs([0,1])},liftZ:{applyVisual:Xi("liftZ"),_normalizedToVisual:{linear:Xo,category:Xo,piecewise:Xo,fixed:Xo}},symbol:{applyVisual:function(t,r,i){i("symbol",this.mapValueToVisual(t))},_normalizedToVisual:{linear:Xr,category:Xa,piecewise:function(t,r){var i=Xl.call(this,r);return null==i&&(i=Xr.call(this,t)),i},fixed:Xo}},symbolSize:{applyVisual:Xi("symbolSize"),_normalizedToVisual:Xs([0,1])}},t}();function Xt(t,r){var i=t.visual,s=[];SC(i)?j7(i,function(t){s.push(t)}):null!=i&&s.push(i);!r&&1===s.length&&!({color:1,symbol:1}).hasOwnProperty(t.type)&&(s[1]=s[0]),Xu(t,s)}function Xn(t){return{applyVisual:function(r,i,s){var u=this.mapValueToVisual(r);s("color",t(i("color"),u))},_normalizedToVisual:Xs([0,1])}}function Xr(t){var r=this.option.visual;return r[Math.round(TC(t,[0,1],[0,r.length-1],!0))]||{}}function Xi(t){return function(r,i,s){s(t,this.mapValueToVisual(r))}}function Xa(t){var r=this.option.visual;return r[this.option.loop&&-1!==t?t%r.length:t]}function Xo(){return this.option.visual[0]}function Xs(t){return{linear:function(r){return TC(r,t,this.option.visual,!0)},category:Xa,piecewise:function(r,i){var s=Xl.call(this,i);return null==s&&(s=TC(r,t,this.option.visual,!0)),s},fixed:Xo}}function Xl(t){var r=this.option,i=r.pieceList;if(r.hasSpecialVisual){var s=Xe.findPieceIndex(t,i),u=i[s];if(u&&u.visual)return u.visual[this.type]}}function Xu(t,r){return t.visual=r,"color"===t.type&&(t.parsedVisual=Sf(r,function(t){var r=AQ(t);return r||[0,0,0,1]})),r}var Xc={linear:function(t){return TC(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var r=this.option.pieceList,i=Xe.findPieceIndex(t,r,!0);if(null!=i)return TC(i,[0,r.length-1],[0,1],!0)},category:function(t){var r=this.option.categories?this.option.categoryMap[t]:t;return null==r?-1:r},fixed:Sq};function Xh(t,r,i){return t?r<=i:r<i}var Xd=T7();let Xp={seriesType:"treemap",reset:function(t){var r=t.getData().tree.root;if(!r.isRemoved())(function t(r,i,s,u){var c,h=r.getModel(),p=r.getLayout(),f=r.hostTree.data;if(!!p&&!p.invisible&&!!p.isInView){var v=h.getModel("itemStyle"),y=function(t,r,i){var s=So({},r),u=i.designatedVisualItemStyle;return Sp(["color","colorAlpha","colorSaturation"],function(i){u[i]=r[i];var c=t.get(i);u[i]=null,null!=c&&(s[i]=c)}),s}(v,i,u),x=f.ensureUniqueItemVisual(r.dataIndex,"style"),_=v.get("borderColor"),b=v.get("borderColorSaturation");null!=b&&(_=function(t,r){return null!=r?A9(r,null,null,t):null}(b,c=Xf(y))),x.stroke=_;var w=r.viewChildren;if(w&&w.length){var S=function(t,r,i,s,u,c){if(!c||!c.length)return;var h=Xm(r,"color")||null!=u.color&&"none"!==u.color&&(Xm(r,"colorAlpha")||Xm(r,"colorSaturation"));if(!!h){var p=r.get("visualMin"),f=r.get("visualMax"),v=i.dataExtent.slice();null!=p&&p<v[0]&&(v[0]=p),null!=f&&f>v[1]&&(v[1]=f);var y=r.get("colorMappingBy"),x={type:h.name,dataExtent:v,visual:h.range};"color"===x.type&&("index"===y||"id"===y)?(x.mappingMethod="category",x.loop=!0):x.mappingMethod="linear";var _=new Xe(x);return Xd(_).drColorMappingBy=y,_}}(r,h,p,v,y,w);Sp(w,function(r,i){if(r.depth>=s.length||r===s[r.depth]){var c=function(t,r,i,s,u,c){var h=So({},r);if(u){var p=u.type,f="color"===p&&Xd(u).drColorMappingBy,v="index"===f?s:"id"===f?c.mapIdToIndex(i.getId()):i.getValue(t.get("visualDimension"));h[p]=u.mapValueToVisual(v)}return h}(h,y,r,i,S,u);t(r,c,s,u)}})}else c=Xf(y),x.fill=c}})(r,{},t.getViewRoot().getAncestors(),t)}};function Xf(t){var r=Xg(t,"color");if(r){var i=Xg(t,"colorAlpha"),s=Xg(t,"colorSaturation");return s&&(r=A9(r,null,null,s)),i&&(r=A8(r,i)),r}}function Xg(t,r){var i=t[r];if(null!=i&&"none"!==i)return i}function Xm(t,r){var i=t.get(r);return Sb(i)&&i.length?{name:r,range:i}:null}var Xv=Math.max,Xy=Math.min,Xx=Sk,X_=Sp,Xb=["itemStyle","borderWidth"],Xw=["itemStyle","gapWidth"],XS=["upperLabel","show"],XM=["upperLabel","height"];let XA={seriesType:"treemap",reset:function(t,r,i,s){var u=i.getWidth(),c=i.getHeight(),h=t.option,p=Rt(t.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()}),f=h.size||[],v=TT(Xx(p.width,f[0]),u),y=TT(Xx(p.height,f[1]),c),x=s&&s.type,_=jU(s,["treemapZoomToNode","treemapRootToNode"],t),b="treemapRender"===x||"treemapMove"===x?s.rootRect:null,w=t.getViewRoot(),S=jH(w);if("treemapMove"!==x){var M="treemapZoomToNode"===x?function(t,r,i,s,u){var c,h=(r||{}).node,p=[s,u];if(!h||h===i)return p;for(var f=s*u,v=f*t.option.zoomToNodeRatio;c=h.parentNode;){for(var y=0,x=c.children,_=0,b=x.length;_<b;_++)y+=x[_].getValue();var w=h.getValue();if(0===w)return p;v*=y/w;var S=c.getModel(),M=S.get(Xb),A=Math.max(M,XT(S));v+=4*M*M+(3*M+A)*Math.pow(v,.5),v>TO&&(v=TO),h=c}v<f&&(v=f);var C=Math.pow(v/f,.5);return[s*C,u*C]}(t,_,w,v,y):b?[b.width,b.height]:[v,y],A=h.sort;A&&"asc"!==A&&"desc"!==A&&(A="desc");var C={squareRatio:h.squareRatio,sort:A,leafDepth:h.leafDepth};w.hostTree.clearLayouts();var T={x:0,y:0,width:M[0],height:M[1],area:M[0]*M[1]};w.setLayout(T),function t(r,i,s,u){if(r.isRemoved())return;var c,h,p=r.getLayout();c=p.width,h=p.height;var f=r.getModel(),v=f.get(Xb),y=f.get(Xw)/2,x=XT(f),_=Math.max(v,x),b=v-y,w=_-y;r.setLayout({borderWidth:v,upperHeight:_,upperLabelHeight:x},!0),c=Xv(c-2*b,0);var S=c*(h=Xv(h-b-w,0)),M=function(t,r,i,s,u,c){var h=t.children||[],p=s.sort;"asc"!==p&&"desc"!==p&&(p=null);var f=null!=s.leafDepth&&s.leafDepth<=c;if(u&&!f)return t.viewChildren=[];(function(t,r){r&&t.sort(function(t,i){var s="asc"===r?t.getValue()-i.getValue():i.getValue()-t.getValue();return 0===s?"asc"===r?t.dataIndex-i.dataIndex:i.dataIndex-t.dataIndex:s})})(h=Sm(h,function(t){return!t.isRemoved()}),p);var v=function(t,r,i){for(var s,u=0,c=0,h=r.length;c<h;c++)u+=r[c].getValue();var p=t.get("visualDimension");return r&&r.length?"value"===p&&i?(s=[r[r.length-1].getValue(),r[0].getValue()],"asc"===i&&s.reverse()):(s=[1/0,-1/0],X_(r,function(t){var r=t.getValue(p);r<s[0]&&(s[0]=r),r>s[1]&&(s[1]=r)})):s=[NaN,NaN],{sum:u,dataExtent:s}}(r,h,p);if(0===v.sum)return t.viewChildren=[];if(v.sum=function(t,r,i,s,u){if(!s)return i;for(var c=t.get("visibleMin"),h=u.length,p=h,f=h-1;f>=0;f--){var v=u["asc"===s?h-f-1:f].getValue();v/i*r<c&&(p=f,i-=v)}return"asc"===s?u.splice(0,h-p):u.splice(p,h-p),i}(r,i,v.sum,p,h),0===v.sum)return t.viewChildren=[];for(var y=0,x=h.length;y<x;y++){var _=h[y].getValue()/v.sum*i;h[y].setLayout({area:_})}return f&&(h.length&&t.setLayout({isLeafRoot:!0},!0),h.length=0),t.viewChildren=h,t.setLayout({dataExtent:v.dataExtent},!0),h}(r,f,S,i,s,u);if(!!M.length){var A={x:b,y:w,width:c,height:h},C=Xy(c,h),T=1/0,I=[];I.area=0;for(var D=0,P=M.length;D<P;){var R=M[D];I.push(R),I.area+=R.getLayout().area;var L=function(t,r,i){for(var s=0,u=1/0,c=0,h=void 0,p=t.length;c<p;c++)(h=t[c].getLayout().area)&&(h<u&&(u=h),h>s&&(s=h));var f=t.area*t.area,v=r*r*i;return f?Xv(v*s/f,f/(v*u)):1/0}(I,C,i.squareRatio);L<=T?(D++,T=L):(I.area-=I.pop().getLayout().area,XC(I,C,A,y,!1),C=Xy(A.width,A.height),I.length=I.area=0,T=1/0)}if(I.length&&XC(I,C,A,y,!0),!s){var k=f.get("childrenVisibleMin");null!=k&&S<k&&(s=!0)}for(var D=0,P=M.length;D<P;D++)t(M[D],i,s,u+1)}}(w,C,!1,0),T=w.getLayout(),X_(S,function(t,r){var i=(S[r+1]||w).getValue();t.setLayout(So({dataExtent:[i,i],borderWidth:0,upperHeight:0},T))})}var I=t.getData().tree.root;I.setLayout(function(t,r,i){if(r)return{x:r.x,y:r.y};var s={x:0,y:0};if(!i)return s;var u=i.node,c=u.getLayout();if(!c)return s;for(var h=[c.width/2,c.height/2],p=u;p;){var f=p.getLayout();h[0]+=f.x,h[1]+=f.y,p=p.parentNode}return{x:t.width/2-h[0],y:t.height/2-h[1]}}(p,b,_),!0),t.setLayoutInfo(p),function t(r,i,s,u,c){var h=r.getLayout(),p=s[c],f=p&&p===r;if((!p||!!f)&&(c!==s.length||r===u)){r.setLayout({isInView:!0,invisible:!f&&!i.intersect(h),isAboveViewRoot:f},!0);var v=new M4(i.x-h.x,i.y-h.y,i.width,i.height);X_(r.viewChildren||[],function(r){t(r,v,s,u,c+1)})}}(I,new M4(-p.x,-p.y,u,c),S,w,0)}};function XC(t,r,i,s,u){var c=r===i.width?0:1,h=1-c,p=["x","y"],f=["width","height"],v=i[p[c]],y=r?t.area/r:0;(u||y>i[f[h]])&&(y=i[f[h]]);for(var x=0,_=t.length;x<_;x++){var b=t[x],w={},S=y?b.getLayout().area/y:0,M=w[f[h]]=Xv(y-2*s,0),A=i[p[c]]+i[f[c]]-v,C=x===_-1||A<S?A:S,T=w[f[c]]=Xv(C-2*s,0);w[p[h]]=i[p[h]]+Xy(s,M/2),w[p[c]]=v+Xy(s,T/2),v+=C,b.setLayout(w,!0)}i[p[h]]+=y,i[f[h]]-=y}function XT(t){return t.get(XS)?t.get(XM):0}function XE(t){var r=t.findComponents({mainType:"legend"});if(!!r&&!!r.length)t.eachSeriesByType("graph",function(t){var i=t.getCategoriesData(),s=t.getGraph().data,u=i.mapArray(i.getName);s.filterSelf(function(t){var i=s.getItemModel(t).getShallow("category");if(null!=i){SA(i)&&(i=u[i]);for(var c=0;c<r.length;c++)if(!r[c].isSelected(i))return!1}return!0})})}function XI(t){var r={};t.eachSeriesByType("graph",function(t){var i=t.getCategoriesData(),s=t.getData(),u={};i.each(function(s){var c=i.getName(s);u["ec-"+c]=s;var h=i.getItemModel(s),p=h.getModel("itemStyle").getItemStyle();!p.fill&&(p.fill=t.getColorFromPalette(c,r)),i.setItemVisual(s,"style",p);for(var f=["symbol","symbolSize","symbolKeepAspect"],v=0;v<f.length;v++){var y=h.getShallow(f[v],!0);null!=y&&i.setItemVisual(s,f[v],y)}}),i.count()&&s.each(function(t){var r=s.getItemModel(t).getShallow("category");if(null!=r){SS(r)&&(r=u["ec-"+r]);var c=i.getItemVisual(r,"style");So(s.ensureUniqueItemVisual(t,"style"),c);for(var h=["symbol","symbolSize","symbolKeepAspect"],p=0;p<h.length;p++)s.setItemVisual(t,h[p],i.getItemVisual(r,h[p]))}})})}function XD(t){return!(t instanceof Array)&&(t=[t,t]),t}function XP(t){t.eachSeriesByType("graph",function(t){var r=t.getGraph(),i=t.getEdgeData(),s=XD(t.get("edgeSymbol")),u=XD(t.get("edgeSymbolSize"));i.setVisual("fromSymbol",s&&s[0]),i.setVisual("toSymbol",s&&s[1]),i.setVisual("fromSymbolSize",u&&u[0]),i.setVisual("toSymbolSize",u&&u[1]),i.setVisual("style",t.getModel("lineStyle").getLineStyle()),i.each(function(t){var s=i.getItemModel(t),u=r.getEdgeByIndex(t),c=XD(s.getShallow("symbol",!0)),h=XD(s.getShallow("symbolSize",!0)),p=s.getModel("lineStyle").getLineStyle(),f=i.ensureUniqueItemVisual(t,"style");switch(So(f,p),f.stroke){case"source":var v=u.node1.getVisual("style");f.stroke=v&&v.fill;break;case"target":var v=u.node2.getVisual("style");f.stroke=v&&v.fill}c[0]&&u.setVisual("fromSymbol",c[0]),c[1]&&u.setVisual("toSymbol",c[1]),h[0]&&u.setVisual("fromSymbolSize",h[0]),h[1]&&u.setVisual("toSymbolSize",h[1])})})}var XR=function(t){return t.get("autoCurveness")||null},XL=function(t,r){var i=XR(t),s=20,u=[];if(SA(i))s=i;else if(Sb(i)){t.__curvenessList=i;return}r>s&&(s=r);var c=s%2?s+2:s+3;u=[];for(var h=0;h<c;h++)u.push((h%2?h+1:h)/10*(h%2?-1:1));t.__curvenessList=u},Xk=function(t,r,i){var s=[t.id,t.dataIndex].join("."),u=[r.id,r.dataIndex].join(".");return[i.uid,s,u].join("--\x3e")},XO=function(t){var r=t.split("--\x3e");return[r[0],r[2],r[1]].join("--\x3e")},XB=function(t,r){var i=Xk(t.node1,t.node2,r);return r.__edgeMap[i]},XN=function(t,r){var i=r.__edgeMap;return i[t]?i[t].length:0};function XF(t,r,i,s){var u,c,h=XR(r),p=Sb(h);if(!h)return null;var f=XB(t,r);if(!f)return null;for(var v=-1,y=0;y<f.length;y++)if(f[y]===i){v=y;break}var x=(u=t,c=r,XN(Xk(u.node1,u.node2,c),c)+XN(Xk(u.node2,u.node1,c),c));XL(r,x),t.lineStyle=t.lineStyle||{};var _=Xk(t.node1,t.node2,r),b=r.__curvenessList,w=p?0:x%2?0:1;if(f.isForward)return b[w+v];var S=XN(XO(_),r),M=b[v+S+w];return s?p?h&&0===h[0]?(S+w)%2?M:-M:((S%2?0:1)+w)%2?M:-M:(S+w)%2?M:-M:b[v+S+w]}function Xz(t){var r=t.coordinateSystem;if(!r||"view"===r.type){var i=t.getGraph();i.eachNode(function(t){var r=t.getModel();t.setLayout([+r.get("x"),+r.get("y")])}),XU(i,t)}}function XU(t,r){t.eachEdge(function(t,i){var s=SB(t.getModel().get(["lineStyle","curveness"]),-XF(t,r,i,!0),0),u=S2(t.node1.getLayout()),c=S2(t.node2.getLayout()),h=[u,c];+s&&h.push([(u[0]+c[0])/2-(u[1]-c[1])*s,(u[1]+c[1])/2-(c[0]-u[0])*s]),t.setLayout(h)})}function XH(t,r){t.eachSeriesByType("graph",function(t){var r=t.get("layout"),i=t.coordinateSystem;if(i&&"view"!==i.type){var s=t.getData(),u=[];Sp(i.dimensions,function(t){u=u.concat(s.mapDimensionsAll(t))});for(var c=0;c<s.count();c++){for(var h=[],p=!1,f=0;f<u.length;f++){var v=s.get(u[f],c);!isNaN(v)&&(p=!0),h.push(v)}p?s.setItemLayout(c,i.dataToPoint(h)):s.setItemLayout(c,[NaN,NaN])}XU(s.graph,t)}else(!r||"none"===r)&&Xz(t)})}function XG(t){var r=t.coordinateSystem;if("view"!==r.type)return 1;var i=t.option.nodeScaleRatio,s=r.scaleX,u=r.getZoom();return((u-1)*i+1)/s}function XV(t){var r=t.getVisual("symbolSize");return r instanceof Array&&(r=(r[0]+r[1])/2),+r}var XW=Math.PI,Xj=[];function XX(t,r,i,s){var u=t.coordinateSystem;if(u&&"view"!==u.type)return;var c=u.getBoundingRect(),h=t.getData(),p=h.graph,f=c.width/2+c.x,v=c.height/2+c.y,y=Math.min(c.width,c.height)/2,x=h.count();if(h.setLayout({cx:f,cy:v}),!!x){if(i){var _=u.pointToData(s),b=[_[0]-f,_[1]-v];Ma(b,b),Mi(b,b,y),i.setLayout([f+b[0],v+b[1]],!0),X$(i,t.get(["circular","rotateLabel"]),f,v)}XY[r](t,p,h,y,f,v,x),p.eachEdge(function(r,i){var s,u=SB(r.getModel().get(["lineStyle","curveness"]),XF(r,t,i),0),c=S2(r.node1.getLayout()),h=S2(r.node2.getLayout()),p=(c[0]+h[0])/2,y=(c[1]+h[1])/2;+u&&(u*=3,s=[f*u+p*(1-u),v*u+y*(1-u)]),r.setLayout([c,h,s])})}}var XY={value:function(t,r,i,s,u,c,h){var p=0,f=i.getSum("value"),v=2*Math.PI/(f||h);r.eachNode(function(t){var r=t.getValue("value"),i=v*(f?r:1)/2;p+=i,t.setLayout([s*Math.cos(p)+u,s*Math.sin(p)+c]),p+=i})},symbolSize:function(t,r,i,s,u,c,h){var p=0;Xj.length=h;var f=XG(t);r.eachNode(function(t){var r=XV(t);isNaN(r)&&(r=2),r<0&&(r=0);var i=Math.asin((r*=f)/2/s);isNaN(i)&&(i=XW/2),Xj[t.dataIndex]=i,p+=2*i});var v=(2*XW-p)/h/2,y=0;r.eachNode(function(t){var r=v+Xj[t.dataIndex];y+=r,t.getLayout()&&t.getLayout().fixed||t.setLayout([s*Math.cos(y)+u,s*Math.sin(y)+c]),y+=r})}};function X$(t,r,i,s){var u=t.getGraphicEl();if(!!u){var c=t.getModel().get(["label","rotate"])||0,h=u.getSymbolPath();if(r){var p=t.getLayout(),f=Math.atan2(p[1]-s,p[0]-i);f<0&&(f=2*Math.PI+f);var v=p[0]<i;v&&(f-=Math.PI);var y=v?"left":"right";h.setTextConfig({rotation:-f,position:y,origin:"center"});var x=h.ensureState("emphasis");So(x.textConfig||(x.textConfig={}),{position:y})}else h.setTextConfig({rotation:c*=Math.PI/180})}}function XJ(t){t.eachSeriesByType("graph",function(t){"circular"===t.get("layout")&&XX(t,"symbolSize")})}var XZ=S4;function XK(t){t.eachSeriesByType("graph",function(t){var r=t.coordinateSystem;if(!r||"view"===r.type)if("force"===t.get("layout")){var i=t.preservedPoints||{},s=t.getGraph(),u=s.data,c=s.edgeData,h=t.getModel("force"),p=h.get("initLayout");t.preservedPoints?u.each(function(t){var r=u.getId(t);u.setItemLayout(t,i[r]||[NaN,NaN])}):p&&"none"!==p?"circular"===p&&XX(t,"value"):Xz(t);var f=u.getDataExtent("value"),v=c.getDataExtent("value"),y=h.get("repulsion"),x=h.get("edgeLength"),_=Sb(y)?y:[y,y],b=Sb(x)?x:[x,x];b=[b[1],b[0]];var w=u.mapArray("value",function(t,r){var i=u.getItemLayout(r),s=TC(t,f,_);return isNaN(s)&&(s=(_[0]+_[1])/2),{w:s,rep:s,fixed:u.getItemModel(r).get("fixed"),p:!i||isNaN(i[0])||isNaN(i[1])?null:i}}),S=c.mapArray("value",function(r,i){var u=s.getEdgeByIndex(i),c=TC(r,v,b);isNaN(c)&&(c=(b[0]+b[1])/2);var h=u.getModel(),p=SB(u.getModel().get(["lineStyle","curveness"]),-XF(u,t,i,!0),0);return{n1:w[u.node1.dataIndex],n2:w[u.node2.dataIndex],d:c,curveness:p,ignoreForceLayout:h.get("ignoreForceLayout")}}),M=function(t,r,i){for(var s,u,c=i.rect,h=c.width,p=c.height,f=[c.x+h/2,c.y+p/2],v=null==i.gravity?.1:i.gravity,y=0;y<t.length;y++){var x=t[y];!x.p&&(x.p=S0(h*(Math.random()-.5)+f[0],p*(Math.random()-.5)+f[1])),x.pp=S2(x.p),x.edges=null}var _=null==i.friction?.6:i.friction,b=_;return{warmUp:function(){b=.8*_},setFixed:function(r){t[r].fixed=!0},setUnfixed:function(r){t[r].fixed=!1},beforeStep:function(t){s=t},afterStep:function(t){u=t},step:function(i){s&&s(t,r);for(var c=[],h=t.length,p=0;p<r.length;p++){var y=r[p];if(!y.ignoreForceLayout){var x=y.n1,_=y.n2;S6(c,_.p,x.p);var w=S9(c)-y.d,S=_.w/(x.w+_.w);isNaN(S)&&(S=0),Ma(c,c),x.fixed||XZ(x.p,x.p,c,S*w*b),_.fixed||XZ(_.p,_.p,c,-(1-S)*w*b)}}for(var p=0;p<h;p++){var M=t[p];!M.fixed&&(S6(c,f,M.p),XZ(M.p,M.p,c,v*b))}for(var p=0;p<h;p++){for(var x=t[p],A=p+1;A<h;A++){var _=t[A];S6(c,_.p,x.p);var w=S9(c);0===w&&(S3(c,Math.random()-.5,Math.random()-.5),w=1);var C=(x.rep+_.rep)/w/w;x.fixed||XZ(x.pp,x.pp,c,C),_.fixed||XZ(_.pp,_.pp,c,-C)}}for(var T=[],p=0;p<h;p++){var M=t[p];!M.fixed&&(S6(T,M.p,M.pp),XZ(M.p,M.p,T,b),S1(M.pp,M.p))}var I=(b*=.992)<.01;u&&u(t,r,I),i&&i(I)}}}(w,S,{rect:r.getBoundingRect(),gravity:h.get("gravity"),friction:h.get("friction")});M.beforeStep(function(t,r){for(var i=0,u=t.length;i<u;i++)t[i].fixed&&S1(t[i].p,s.getNodeByIndex(i).getLayout())}),M.afterStep(function(t,r,c){for(var h=0,p=t.length;h<p;h++)!t[h].fixed&&s.getNodeByIndex(h).setLayout(t[h].p),i[u.getId(h)]=t[h].p;for(var h=0,p=r.length;h<p;h++){var f=r[h],v=s.getEdgeByIndex(h),y=f.n1.p,x=f.n2.p,_=v.getLayout();(_=_?_.slice():[])[0]=_[0]||[],_[1]=_[1]||[],S1(_[0],y),S1(_[1],x),+f.curveness&&(_[2]=[(y[0]+x[0])/2-(y[1]-x[1])*f.curveness,(y[1]+x[1])/2-(x[0]-y[0])*f.curveness]),v.setLayout(_)}}),t.forceLayout=M,t.preservedPoints=i,M.step()}else t.forceLayout=null})}function Xq(t,r){var i=[];return t.eachSeriesByType("graph",function(t){var s=t.get("coordinateSystem");if(!s||"view"===s){var u,c,h,p=t.getData(),f=p.mapArray(function(t){var r=p.getItemModel(t);return[+r.get("x"),+r.get("y")]}),v=[],y=[];EK(f,v,y),y[0]-v[0]==0&&(y[0]+=1,v[0]-=1),y[1]-v[1]==0&&(y[1]+=1,v[1]-=1);var x=(y[0]-v[0])/(y[1]-v[1]);var _=(u=t,c=r,h=x,Rt(So(u.getBoxLayoutParams(),{aspect:h}),{width:c.getWidth(),height:c.getHeight()}));isNaN(x)&&(v=[_.x,_.y],y=[_.x+_.width,_.y+_.height]);var b=y[0]-v[0],w=y[1]-v[1],S=_.width,M=_.height,A=t.coordinateSystem=new W7;A.zoomLimit=t.get("scaleLimit"),A.setBoundingRect(v[0],v[1],b,w),A.setViewRect(_.x,_.y,S,M),A.setCenter(t.get("center"),r),A.setZoom(t.get("zoom")),i.push(A)}}),i}var XQ=Og.prototype,X0=O_.prototype,X1=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1};function X2(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}(function(t){function r(){return null!==t&&t.apply(this,arguments)||this}wU(r,t)})(X1);var X3=function(t){function r(r){var i=t.call(this,r)||this;return i.type="ec-line",i}return wU(r,t),r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new X1},r.prototype.buildPath=function(t,r){X2(r)?XQ.buildPath.call(this,t,r):X0.buildPath.call(this,t,r)},r.prototype.pointAt=function(t){return X2(this.shape)?XQ.pointAt.call(this,t):X0.pointAt.call(this,t)},r.prototype.tangentAt=function(t){var r=this.shape,i=X2(r)?[r.x2-r.x1,r.y2-r.y1]:X0.tangentAt.call(this,t);return Ma(i,i)},r}(IM),X5=["fromSymbol","toSymbol"];function X4(t){return"_"+t+"Type"}function X6(t,r,i){var s=r.getItemVisual(i,t);if(!s||"none"===s)return s;var u=r.getItemVisual(i,t+"Size"),c=r.getItemVisual(i,t+"Rotate"),h=r.getItemVisual(i,t+"Offset"),p=r.getItemVisual(i,t+"KeepAspect"),f=B7(u),v=Ne(h||0,f);return s+f+v+(c||"")+(p||"")}function X9(t,r,i){var s=r.getItemVisual(i,t);if(!!s&&"none"!==s){var u=r.getItemVisual(i,t+"Size"),c=r.getItemVisual(i,t+"Rotate"),h=r.getItemVisual(i,t+"Offset"),p=r.getItemVisual(i,t+"KeepAspect"),f=B7(u),v=Ne(h||0,f),y=B8(s,-f[0]/2+v[0],-f[1]/2+v[1],f[0],f[1],null,p);return y.__specifiedRotation=null==c||isNaN(c)?void 0:+c*Math.PI/180||0,y.name=t,y}}function X8(t,r){t.x1=r[0][0],t.y1=r[0][1],t.x2=r[1][0],t.y2=r[1][1],t.percent=1;var i=r[2];i?(t.cpx1=i[0],t.cpy1=i[1]):(t.cpx1=NaN,t.cpy1=NaN)}var X7=function(t){function r(r,i,s){var u=t.call(this)||this;return u._createLine(r,i,s),u}return wU(r,t),r.prototype._createLine=function(t,r,i){var s,u,c=t.hostModel;var h=(s=t.getItemLayout(r),X8((u=new X3({name:"line",subPixelOptimize:!0})).shape,s),u);h.shape.percent=0,Dj(h,{shape:{percent:1}},c,r),this.add(h),Sp(X5,function(i){var s=X9(i,t,r);this.add(s),this[X4(i)]=X6(i,t,r)},this),this._updateCommonStl(t,r,i)},r.prototype.updateData=function(t,r,i){var s=t.hostModel,u=this.childOfName("line"),c=t.getItemLayout(r),h={shape:{}};X8(h.shape,c),DW(u,h,s,r),Sp(X5,function(i){var s=X6(i,t,r),u=X4(i);if(this[u]!==s){this.remove(this.childOfName(i));var c=X9(i,t,r);this.add(c)}this[u]=s},this),this._updateCommonStl(t,r,i)},r.prototype.getLinePath=function(){return this.childAt(0)},r.prototype._updateCommonStl=function(t,r,i){var s=t.hostModel,u=this.childOfName("line"),c=i&&i.emphasisLineStyle,h=i&&i.blurLineStyle,p=i&&i.selectLineStyle,f=i&&i.labelStatesModels,v=i&&i.emphasisDisabled,y=i&&i.focus,x=i&&i.blurScope;if(!i||t.hasItemOption){var _=t.getItemModel(r),b=_.getModel("emphasis");c=b.getModel("lineStyle").getLineStyle(),h=_.getModel(["blur","lineStyle"]).getLineStyle(),p=_.getModel(["select","lineStyle"]).getLineStyle(),v=b.get("disabled"),y=b.get("focus"),x=b.get("blurScope"),f=D1(_)}var w=t.getItemVisual(r,"style"),S=w.stroke;u.useStyle(w),u.style.fill=null,u.style.strokeNoScale=!0,u.ensureState("emphasis").style=c,u.ensureState("blur").style=h,u.ensureState("select").style=p,Sp(X5,function(t){var r=this.childOfName(t);if(r){r.setColor(S),r.style.opacity=w.opacity;for(var i=0;i<I9.length;i++){var s=I9[i],c=u.getState(s);if(c){var h=c.style||{},p=r.ensureState(s),f=p.style||(p.style={});null!=h.stroke&&(f[r.__isEmptyBrush?"stroke":"fill"]=h.stroke),null!=h.opacity&&(f.opacity=h.opacity)}}r.markRedraw()}},this);var M=s.getRawValue(r);D0(this,f,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(r,i){return s.getFormattedLabel(r,i,t.dataType)}},inheritColor:S||"#000",defaultOpacity:w.opacity,defaultText:(null==M?t.getName(r):isFinite(M)?TE(M):M)+""});var A=this.getTextContent();if(A){var C=f.normal;A.__align=A.style.align,A.__verticalAlign=A.style.verticalAlign,A.__position=C.get("position")||"middle";var T=C.get("distance");!Sb(T)&&(T=[T,T]),A.__labelDistance=T}this.setTextConfig({position:null,local:!0,inside:!1}),DR(this,y,x,v)},r.prototype.highlight=function(){Dx(this)},r.prototype.downplay=function(){D_(this)},r.prototype.updateLayout=function(t,r){this.setLinePoints(t.getItemLayout(r))},r.prototype.setLinePoints=function(t){var r=this.childOfName("line");X8(r.shape,t),r.dirty()},r.prototype.beforeUpdate=function(){var t=this.childOfName("fromSymbol"),r=this.childOfName("toSymbol"),i=this.getTextContent();if(!t&&!r&&(!i||i.ignore))return;for(var s=1,u=this.parent;u;)u.scaleX&&(s/=u.scaleX),u=u.parent;var c=this.childOfName("line");if(!!this.__dirty||!!c.__dirty){var h=c.shape.percent,p=c.pointAt(0),f=c.pointAt(h),v=S6([],f,p);if(Ma(v,v),t&&(t.setPosition(p),P(t,0),t.scaleX=t.scaleY=s*h,t.markRedraw()),r&&(r.setPosition(f),P(r,1),r.scaleX=r.scaleY=s*h,r.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var y=void 0,x=void 0,_=i.__labelDistance,b=_[0]*s,w=_[1]*s,S=h/2,M=c.tangentAt(S),A=[M[1],-M[0]],C=c.pointAt(S);A[1]>0&&(A[0]=-A[0],A[1]=-A[1]);var T=M[0]<0?-1:1;if("start"!==i.__position&&"end"!==i.__position){var I=-Math.atan2(M[1],M[0]);f[0]<p[0]&&(I=Math.PI+I),i.rotation=I}var D=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":D=-w,x="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":D=w,x="top";break;default:D=0,x="middle"}switch(i.__position){case"end":i.x=v[0]*b+f[0],i.y=v[1]*w+f[1],y=v[0]>.8?"left":v[0]<-.8?"right":"center",x=v[1]>.8?"top":v[1]<-.8?"bottom":"middle";break;case"start":i.x=-v[0]*b+p[0],i.y=-v[1]*w+p[1],y=v[0]>.8?"right":v[0]<-.8?"left":"center",x=v[1]>.8?"bottom":v[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=b*T+p[0],i.y=p[1]+D,y=M[0]<0?"right":"left",i.originX=-b*T,i.originY=-D;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=C[0],i.y=C[1]+D,y="center",i.originY=-D;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-b*T+f[0],i.y=f[1]+D,y=M[0]>=0?"right":"left",i.originX=b*T,i.originY=-D}i.scaleX=i.scaleY=s,i.setStyle({verticalAlign:i.__verticalAlign||x,align:i.__align||y})}}function P(t,r){var i=t.__specifiedRotation;if(null==i){var s=c.tangentAt(r);t.attr("rotation",(1===r?-1:1)*Math.PI/2-Math.atan2(s[1],s[0]))}else t.attr("rotation",i)}},r}(Tf),Ye=function(){function t(t){this.group=new Tf,this._LineCtor=t||X7}return t.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var i=this.group,s=this._lineData;this._lineData=t,!s&&i.removeAll();var u=Yt(t);t.diff(s).add(function(i){r._doAdd(t,i,u)}).update(function(i,c){r._doUpdate(s,t,c,i,u)}).remove(function(t){i.remove(s.getItemGraphicEl(t))}).execute()},t.prototype.updateLayout=function(){var t=this._lineData;if(!!t)t.eachItemGraphicEl(function(r,i){r.updateLayout(t,i)},this)},t.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=Yt(t),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,r){function i(t){!t.isGroup&&!function(t){return t.animators&&t.animators.length>0}(t)&&(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var s=t.start;s<t.end;s++)if(Yr(r.getItemLayout(s))){var u=new this._LineCtor(r,s,this._seriesScope);u.traverse(i),this.group.add(u),r.setItemGraphicEl(s,u),this._progressiveEls.push(u)}},t.prototype.remove=function(){this.group.removeAll()},t.prototype.eachRendered=function(t){Be(this._progressiveEls||this.group,t)},t.prototype._doAdd=function(t,r,i){if(!!Yr(t.getItemLayout(r))){var s=new this._LineCtor(t,r,i);t.setItemGraphicEl(r,s),this.group.add(s)}},t.prototype._doUpdate=function(t,r,i,s,u){var c=t.getItemGraphicEl(i);if(!Yr(r.getItemLayout(s))){this.group.remove(c);return}c?c.updateData(r,s,u):c=new this._LineCtor(r,s,u),r.setItemGraphicEl(s,c),this.group.add(c)},t}();function Yt(t){var r=t.hostModel,i=r.getModel("emphasis");return{lineStyle:r.getModel("lineStyle").getLineStyle(),emphasisLineStyle:i.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:r.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:r.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:i.get("disabled"),blurScope:i.get("blurScope"),focus:i.get("focus"),labelStatesModels:D1(r)}}function Yn(t){return isNaN(t[0])||isNaN(t[1])}function Yr(t){return t&&!Yn(t[0])&&!Yn(t[1])}var Yi=[],Ya=[],Yo=[],Ys=Math.abs;function Yl(t,r,i){for(var s,u=t[0],c=t[1],h=t[2],p=1/0,f=i*i,v=.1,y=.1;y<=.9;y+=.1){Yi[0]=AD(u[0],c[0],h[0],y),Yi[1]=AD(u[1],c[1],h[1],y);var x=Ys(Mu(Yi,r)-f);x<p&&(p=x,s=y)}for(var _=0;_<32;_++){var b=s+v;Ya[0]=AD(u[0],c[0],h[0],s),Ya[1]=AD(u[1],c[1],h[1],s),Yo[0]=AD(u[0],c[0],h[0],b),Yo[1]=AD(u[1],c[1],h[1],b);var x=Mu(Ya,r)-f;if(.01>Ys(x))break;var w=Mu(Yo,r)-f;v/=2,x<0?w>=0?s+=v:s-=v:w>=0?s-=v:s+=v}return s}function Yu(t,r){var i=[],s=[[],[],[]],u=[[],[]],c=[];r/=2,t.eachEdge(function(t,h){var p=t.getLayout(),f=t.getVisual("fromSymbol"),v=t.getVisual("toSymbol");!p.__original&&(p.__original=[S2(p[0]),S2(p[1])],p[2]&&p.__original.push(S2(p[2])));var y=p.__original;if(null!=p[2]){if(S1(s[0],y[0]),S1(s[1],y[2]),S1(s[2],y[1]),f&&"none"!==f){var x=XV(t.node1),_=Yl(s,y[0],x*r);AL(s[0][0],s[1][0],s[2][0],_,i),s[0][0]=i[3],s[1][0]=i[4],AL(s[0][1],s[1][1],s[2][1],_,i),s[0][1]=i[3],s[1][1]=i[4]}if(v&&"none"!==v){var x=XV(t.node2),_=Yl(s,y[1],x*r);AL(s[0][0],s[1][0],s[2][0],_,i),s[1][0]=i[1],s[2][0]=i[2],AL(s[0][1],s[1][1],s[2][1],_,i),s[1][1]=i[1],s[2][1]=i[2]}S1(p[0],s[0]),S1(p[1],s[2]),S1(p[2],s[1])}else{if(S1(u[0],y[0]),S1(u[1],y[1]),S6(c,u[1],u[0]),Ma(c,c),f&&"none"!==f){var x=XV(t.node1);S4(u[0],u[0],c,x*r)}if(v&&"none"!==v){var x=XV(t.node2);S4(u[1],u[1],c,-x*r)}S1(p[0],u[0]),S1(p[1],u[1])}})}function Yc(t){return"view"===t.type}var Yh=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.init=function(t,r){var i=new HQ,s=new Ye,u=this.group;this._controller=new Wr(r.getZr()),this._controllerHost={target:u},u.add(i.group),u.add(s.group),this._symbolDraw=i,this._lineDraw=s,this._firstRender=!0},r.prototype.render=function(t,r,i){var s=this,u=t.coordinateSystem;this._model=t;var c=this._symbolDraw,h=this._lineDraw,p=this.group;if(Yc(u)){var f={x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY};this._firstRender?p.attr(f):DW(p,f,t)}Yu(t.getGraph(),XG(t));var v=t.getData();c.updateData(v);var y=t.getEdgeData();h.updateData(y),this._updateNodeAndLinkScale(),this._updateController(t,r,i),clearTimeout(this._layoutTimeout);var x=t.forceLayout,_=t.get(["force","layoutAnimation"]);x&&this._startForceLayoutIteration(x,_);var b=t.get("layout");v.graph.eachNode(function(r){var i=r.dataIndex,u=r.getGraphicEl(),c=r.getModel();if(!!u){u.off("drag").off("dragend");var h=c.get("draggable");h&&u.on("drag",function(c){switch(b){case"force":x.warmUp(),s._layouting||s._startForceLayoutIteration(x,_),x.setFixed(i),v.setItemLayout(i,[u.x,u.y]);break;case"circular":v.setItemLayout(i,[u.x,u.y]),r.setLayout({fixed:!0},!0),XX(t,"symbolSize",r,[c.offsetX,c.offsetY]),s.updateLayout(t);break;default:v.setItemLayout(i,[u.x,u.y]),XU(t.getGraph(),t),s.updateLayout(t)}}).on("dragend",function(){x&&x.setUnfixed(i)}),u.setDraggable(h,!!c.get("cursor")),"adjacency"===c.get(["emphasis","focus"])&&(I1(u).focus=r.getAdjacentDataIndices())}}),v.graph.eachEdge(function(t){var r=t.getGraphicEl(),i=t.getModel().get(["emphasis","focus"]);if(!!r)"adjacency"===i&&(I1(r).focus={edge:[t.dataIndex],node:[t.node1.dataIndex,t.node2.dataIndex]})});var w="circular"===t.get("layout")&&t.get(["circular","rotateLabel"]),S=v.getLayout("cx"),M=v.getLayout("cy");v.graph.eachNode(function(t){X$(t,w,S,M)}),this._firstRender=!1},r.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},r.prototype._startForceLayoutIteration=function(t,r){var i=this;!function s(){t.step(function(t){i.updateLayout(i._model),(i._layouting=!t)&&(r?i._layoutTimeout=setTimeout(s,16):s())})}()},r.prototype._updateController=function(t,r,i){var s=this,u=this._controller,c=this._controllerHost,h=this.group;if(u.setPointerChecker(function(r,s,u){var c=h.getBoundingRect();return c.applyTransform(h.transform),c.contain(s,u)&&!Wc(r,i,t)}),!Yc(t.coordinateSystem)){u.disable();return}u.enable(t.get("roam")),c.zoomLimit=t.get("scaleLimit"),c.zoom=t.coordinateSystem.getZoom(),u.off("pan").off("zoom").on("pan",function(r){Ws(c,r.dx,r.dy),i.dispatchAction({seriesId:t.id,type:"graphRoam",dx:r.dx,dy:r.dy})}).on("zoom",function(r){Wl(c,r.scale,r.originX,r.originY),i.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:r.scale,originX:r.originX,originY:r.originY}),s._updateNodeAndLinkScale(),Yu(t.getGraph(),XG(t)),s._lineDraw.updateLayout(),i.updateLabelLayout()})},r.prototype._updateNodeAndLinkScale=function(){var t=this._model,r=t.getData(),i=XG(t);r.eachItemGraphicEl(function(t,r){t&&t.setSymbolScale(i)})},r.prototype.updateLayout=function(t){Yu(t.getGraph(),XG(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},r.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},r.type="graph",r}(Bu);function Yd(t){return"_EC_"+t}var Yp=function(){function t(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return t.prototype.isDirected=function(){return this._directed},t.prototype.addNode=function(t,r){t=null==t?""+r:""+t;var i=this._nodesMap;if(!i[Yd(t)]){var s=new Yf(t,r);return s.hostGraph=this,this.nodes.push(s),i[Yd(t)]=s,s}},t.prototype.getNodeByIndex=function(t){var r=this.data.getRawIndex(t);return this.nodes[r]},t.prototype.getNodeById=function(t){return this._nodesMap[Yd(t)]},t.prototype.addEdge=function(t,r,i){var s=this._nodesMap,u=this._edgesMap;if(SA(t)&&(t=this.nodes[t]),SA(r)&&(r=this.nodes[r]),!(t instanceof Yf)&&(t=s[Yd(t)]),!(r instanceof Yf)&&(r=s[Yd(r)]),!!t&&!!r){var c=t.id+"-"+r.id,h=new Yg(t,r,i);return h.hostGraph=this,this._directed&&(t.outEdges.push(h),r.inEdges.push(h)),t.edges.push(h),t!==r&&r.edges.push(h),this.edges.push(h),u[c]=h,h}},t.prototype.getEdgeByIndex=function(t){var r=this.edgeData.getRawIndex(t);return this.edges[r]},t.prototype.getEdge=function(t,r){t instanceof Yf&&(t=t.id),r instanceof Yf&&(r=r.id);var i=this._edgesMap;return this._directed?i[t+"-"+r]:i[t+"-"+r]||i[r+"-"+t]},t.prototype.eachNode=function(t,r){for(var i=this.nodes,s=i.length,u=0;u<s;u++)i[u].dataIndex>=0&&t.call(r,i[u],u)},t.prototype.eachEdge=function(t,r){for(var i=this.edges,s=i.length,u=0;u<s;u++)i[u].dataIndex>=0&&i[u].node1.dataIndex>=0&&i[u].node2.dataIndex>=0&&t.call(r,i[u],u)},t.prototype.breadthFirstTraverse=function(t,r,i,s){if(!(r instanceof Yf)&&(r=this._nodesMap[Yd(r)]),!r)return;for(var u="out"===i?"outEdges":"in"===i?"inEdges":"edges",c=0;c<this.nodes.length;c++)this.nodes[c].__visited=!1;if(!t.call(s,r,null))for(var h=[r];h.length;){for(var p=h.shift(),f=p[u],c=0;c<f.length;c++){var v=f[c],y=v.node1===p?v.node2:v.node1;if(!y.__visited){if(t.call(s,y,p))return;h.push(y),y.__visited=!0}}}},t.prototype.update=function(){for(var t=this.data,r=this.edgeData,i=this.nodes,s=this.edges,u=0,c=i.length;u<c;u++)i[u].dataIndex=-1;for(var u=0,c=t.count();u<c;u++)i[t.getRawIndex(u)].dataIndex=u;r.filterSelf(function(t){var i=s[r.getRawIndex(t)];return i.node1.dataIndex>=0&&i.node2.dataIndex>=0});for(var u=0,c=s.length;u<c;u++)s[u].dataIndex=-1;for(var u=0,c=r.count();u<c;u++)s[r.getRawIndex(u)].dataIndex=u},t.prototype.clone=function(){for(var r=new t(this._directed),i=this.nodes,s=this.edges,u=0;u<i.length;u++)r.addNode(i[u].id,i[u].dataIndex);for(var u=0;u<s.length;u++){var c=s[u];r.addEdge(c.node1.id,c.node2.id,c.dataIndex)}return r},t}(),Yf=function(){function t(t,r){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==t?"":t,this.dataIndex=null==r?-1:r}return t.prototype.degree=function(){return this.edges.length},t.prototype.inDegree=function(){return this.inEdges.length},t.prototype.outDegree=function(){return this.outEdges.length},t.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(t)},t.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},r=0;r<this.edges.length;r++){var i=this.edges[r];if(!(i.dataIndex<0))t.edge.push(i.dataIndex),t.node.push(i.node1.dataIndex,i.node2.dataIndex)}return t},t.prototype.getTrajectoryDataIndices=function(){for(var t=SY(),r=SY(),i=0;i<this.edges.length;i++){var s=this.edges[i];if(!(s.dataIndex<0)){t.set(s.dataIndex,!0);for(var u=[s.node1],c=[s.node2],h=0;h<u.length;){var p=u[h];h++,r.set(p.dataIndex,!0);for(var f=0;f<p.inEdges.length;f++)t.set(p.inEdges[f].dataIndex,!0),u.push(p.inEdges[f].node1)}for(h=0;h<c.length;){var v=c[h];h++,r.set(v.dataIndex,!0);for(var f=0;f<v.outEdges.length;f++)t.set(v.outEdges[f].dataIndex,!0),c.push(v.outEdges[f].node2)}}}return{edge:t.keys(),node:r.keys()}},t}(),Yg=function(){function t(t,r,i){this.dataIndex=-1,this.node1=t,this.node2=r,this.dataIndex=null==i?-1:i}return t.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(t)},t.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},t.prototype.getTrajectoryDataIndices=function(){var t=SY(),r=SY();t.set(this.dataIndex,!0);for(var i=[this.node1],s=[this.node2],u=0;u<i.length;){var c=i[u];u++,r.set(c.dataIndex,!0);for(var h=0;h<c.inEdges.length;h++)t.set(c.inEdges[h].dataIndex,!0),i.push(c.inEdges[h].node1)}for(u=0;u<s.length;){var p=s[u];u++,r.set(p.dataIndex,!0);for(var h=0;h<p.outEdges.length;h++)t.set(p.outEdges[h].dataIndex,!0),s.push(p.outEdges[h].node2)}return{edge:t.keys(),node:r.keys()}},t}();function Ym(t,r){return{getValue:function(i){var s=this[t][r];return s.getStore().get(s.getDimensionIndex(i||"value"),this.dataIndex)},setVisual:function(i,s){this.dataIndex>=0&&this[t][r].setItemVisual(this.dataIndex,i,s)},getVisual:function(i){return this[t][r].getItemVisual(this.dataIndex,i)},setLayout:function(i,s){this.dataIndex>=0&&this[t][r].setItemLayout(this.dataIndex,i,s)},getLayout:function(){return this[t][r].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][r].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][r].getRawIndex(this.dataIndex)}}}Sh(Yf,Ym("hostGraph","data")),Sh(Yg,Ym("hostGraph","edgeData"));function Yv(t,r,i,s,u){for(var c,h=new Yp(s),p=0;p<t.length;p++)h.addNode(Sk(t[p].id,t[p].name,p),p);for(var f=[],v=[],y=0,p=0;p<r.length;p++){var x=r[p],_=x.source,b=x.target;h.addEdge(_,b,y)&&(v.push(x),f.push(Sk(T4(x.id,null),_+" > "+b)),y++)}var w=i.get("coordinateSystem");if("cartesian2d"===w||"polar"===w)c=Fq(t,i);else{var S=RG.get(w),M=S&&S.dimensions||[];0>Su(M,"value")&&M.concat(["value"]),(c=new FV(Fj(t,{coordDimensions:M,encodeDefine:i.getEncode()}).dimensions,i)).initData(t)}var A=new FV(["value"],i);return A.initData(v,f),u&&u(c,A),jN({mainData:c,struct:h,structAttr:"graph",datas:{node:c,edge:A},datasAttr:{node:"data",edge:"edgeData"}}),h.update(),h}var Yy=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.hasSymbolVisual=!0,i}return wU(r,t),r.prototype.init=function(r){t.prototype.init.apply(this,arguments);var i=this;function s(){return i._categoriesData}this.legendVisualProvider=new G2(s,s),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},r.prototype.mergeOption=function(r){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},r.prototype.mergeDefaultAndTheme=function(r){t.prototype.mergeDefaultAndTheme.apply(this,arguments),TQ(r,"edgeLabel",["show"])},r.prototype.getInitialData=function(t,r){var i=t.edges||t.links||[],s=t.data||t.nodes||[],u=this;if(s&&i){!function(t){if(!!XR(t))t.__curvenessList=[],t.__edgeMap={},XL(t)}(this);var c=Yv(s,i,this,!0,function(t,r){t.wrapMethod("getItemModel",function(t){var r=u._categoriesModels[t.getShallow("category")];return r&&(r.parentModel=t.parentModel,t.parentModel=r),t});var i=Pp.prototype.getModel;function s(t,r){var s=i.call(this,t,r);return s.resolveParentPath=c,s}function c(t){if(t&&("label"===t[0]||"label"===t[1])){var r=t.slice();return"label"===t[0]?r[0]="edgeLabel":"label"===t[1]&&(r[1]="edgeLabel"),r}return t}r.wrapMethod("getItemModel",function(t){return t.resolveParentPath=c,t.getModel=s,t})});return Sp(c.edges,function(t){!function(t,r,i,s){if(!!XR(i)){var u=Xk(t,r,i),c=i.__edgeMap,h=c[XO(u)];c[u]&&!h?c[u].isForward=!0:h&&c[u]&&(h.isForward=!0,c[u].isForward=!1),c[u]=c[u]||[],c[u].push(s)}}(t.node1,t.node2,this,t.dataIndex)},this),c.data}},r.prototype.getGraph=function(){return this.getData().graph},r.prototype.getEdgeData=function(){return this.getGraph().edgeData},r.prototype.getCategoriesData=function(){return this._categoriesData},r.prototype.formatTooltip=function(t,r,i){if("edge"===i){var s=this.getData(),u=this.getDataParams(t,i),c=s.graph.getEdgeByIndex(t),h=s.getName(c.node1.dataIndex),p=s.getName(c.node2.dataIndex),f=[];return null!=h&&f.push(h),null!=p&&f.push(p),L7("nameValue",{name:f.join(" > "),value:u.value,noValue:null==u.value})}return kc({series:this,dataIndex:t,multipleSeries:r})},r.prototype._updateCategoriesData=function(){var t=Sf(this.option.categories||[],function(t){return null!=t.value?t:So({value:0},t)}),r=new FV(["value"],this);r.initData(t),this._categoriesData=r,this._categoriesModels=r.mapArray(function(t){return r.getItemModel(t)})},r.prototype.setZoom=function(t){this.option.zoom=t},r.prototype.setCenter=function(t){this.option.center=t},r.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},r.type="series.graph",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},r}(kw),Yx={type:"graphRoam",event:"graphRoam",update:"none"},Y_=function(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0},Yb=function(t){function r(r){var i=t.call(this,r)||this;return i.type="pointer",i}return wU(r,t),r.prototype.getDefaultShape=function(){return new Y_},r.prototype.buildPath=function(t,r){var i=Math.cos,s=Math.sin,u=r.r,c=r.width,h=r.angle,p=r.x-i(h)*c*(c>=u/3?1:2),f=r.y-s(h)*c*(c>=u/3?1:2);h=r.angle-Math.PI/2,t.moveTo(p,f),t.lineTo(r.x+i(h)*c,r.y+s(h)*c),t.lineTo(r.x+i(r.angle)*u,r.y+s(r.angle)*u),t.lineTo(r.x-i(h)*c,r.y-s(h)*c),t.lineTo(p,f)},r}(IM);function Yw(t,r){var i=null==t?"":t+"";return r&&(SS(r)?i=r.replace("{value}",i):Sw(r)&&(i=r(t))),i}var YS=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.render=function(t,r,i){this.group.removeAll();var s,u,c,h,p=t.get(["axisLine","lineStyle","color"]);var f=(s=t,u=i,c=s.get("center"),h=Math.min(u.getWidth(),u.getHeight()),{cx:TT(c[0],u.getWidth()),cy:TT(c[1],u.getHeight()),r:TT(s.get("radius"),h/2)});this._renderMain(t,r,i,p,f),this._data=t.getData()},r.prototype.dispose=function(){},r.prototype._renderMain=function(t,r,i,s,u){var c=this.group,h=t.get("clockwise"),p=-t.get("startAngle")/180*Math.PI,f=-t.get("endAngle")/180*Math.PI,v=t.getModel("axisLine"),y=v.get("roundCap")?G_:Ot,x=v.get("show"),_=v.getModel("lineStyle"),b=_.get("width"),w=[p,f];Il(w,!h),p=w[0];for(var S=(f=w[1])-p,M=p,A=[],C=0;x&&C<s.length;C++){var T=new y({shape:{startAngle:M,endAngle:f=p+S*Math.min(Math.max(s[C][0],0),1),cx:u.cx,cy:u.cy,clockwise:h,r0:u.r-b,r:u.r},silent:!0});T.setStyle({fill:s[C][1]}),T.setStyle(_.getLineStyle(["color","width"])),A.push(T),M=f}A.reverse(),Sp(A,function(t){return c.add(t)});var I=function(t){var r;if(t<=0)return s[0][1];for(r=0;r<s.length;r++)if(s[r][0]>=t&&(0===r?0:s[r-1][0])<t)return s[r][1];return s[r-1][1]};this._renderTicks(t,r,i,I,u,p,f,h,b),this._renderTitleAndDetail(t,r,i,I,u),this._renderAnchor(t,u),this._renderPointer(t,r,i,I,u,p,f,h,b)},r.prototype._renderTicks=function(t,r,i,s,u,c,h,p,f){for(var v,y,x=this.group,_=u.cx,b=u.cy,w=u.r,S=+t.get("min"),M=+t.get("max"),A=t.getModel("splitLine"),C=t.getModel("axisTick"),T=t.getModel("axisLabel"),I=t.get("splitNumber"),D=C.get("splitNumber"),P=TT(A.get("length"),w),R=TT(C.get("length"),w),L=c,k=(h-c)/I,O=k/D,B=A.getModel("lineStyle").getLineStyle(),N=C.getModel("lineStyle").getLineStyle(),F=A.get("distance"),z=0;z<=I;z++){if(v=Math.cos(L),y=Math.sin(L),A.get("show")){var U=F?F+f:f,H=new Og({shape:{x1:v*(w-U)+_,y1:y*(w-U)+b,x2:v*(w-P-U)+_,y2:y*(w-P-U)+b},style:B,silent:!0});"auto"===B.stroke&&H.setStyle({stroke:s(z/I)}),x.add(H)}if(T.get("show")){var U=T.get("distance")+F,G=Yw(TE(z/I*(M-S)+S),T.get("formatter")),V=s(z/I),W=v*(w-P-U)+_,j=y*(w-P-U)+b,X=T.get("rotate"),Y=0;"radial"===X?(Y=-L+2*Math.PI)>Math.PI/2&&(Y+=Math.PI):"tangential"===X?Y=-L-Math.PI/2:SA(X)&&(Y=X*Math.PI/180),0===Y?x.add(new I0({style:D2(T,{text:G,x:W,y:j,verticalAlign:y<-.8?"top":y>.8?"bottom":"middle",align:v<-.4?"left":v>.4?"right":"center"},{inheritColor:V}),silent:!0})):x.add(new I0({style:D2(T,{text:G,x:W,y:j,verticalAlign:"middle",align:"center"},{inheritColor:V}),silent:!0,originX:W,originY:j,rotation:Y}))}if(C.get("show")&&z!==I){var U=C.get("distance");U=U?U+f:f;for(var $=0;$<=D;$++){var J=new Og({shape:{x1:(v=Math.cos(L))*(w-U)+_,y1:(y=Math.sin(L))*(w-U)+b,x2:v*(w-R-U)+_,y2:y*(w-R-U)+b},silent:!0,style:N});"auto"===N.stroke&&J.setStyle({stroke:s((z+$/D)/I)}),x.add(J),L+=O}L-=O}else L+=k}},r.prototype._renderPointer=function(t,r,i,s,u,c,h,p,f){var v=this.group,y=this._data,x=this._progressEls,_=[],b=t.get(["pointer","show"]),w=t.getModel("progress"),S=w.get("show"),M=t.getData(),A=M.mapDimension("value"),C=+t.get("min"),T=+t.get("max"),I=[C,T],D=[c,h];function P(r,i){var s,c=M.getItemModel(r).getModel("pointer"),h=TT(c.get("width"),u.r),p=TT(c.get("length"),u.r),f=t.get(["pointer","icon"]),v=c.get("offsetCenter"),y=TT(v[0],u.r),x=TT(v[1],u.r),_=c.get("keepAspect");return(s=f?B8(f,y-h/2,x-p,h,p,null,_):new Yb({shape:{angle:-Math.PI/2,width:h,r:p,x:y,y:x}})).rotation=-(i+Math.PI/2),s.x=u.cx,s.y=u.cy,s}function R(t,r){var i=w.get("roundCap")?G_:Ot,s=w.get("overlap"),h=s?w.get("width"):f/M.count(),v=s?u.r-h:u.r-(t+1)*h,y=s?u.r:u.r-t*h,x=new i({shape:{startAngle:c,endAngle:r,cx:u.cx,cy:u.cy,clockwise:p,r0:v,r:y}});return s&&(x.z2=T-M.get(A,t)%T),x}(S||b)&&(M.diff(y).add(function(r){var i=M.get(A,r);if(b){var s=P(r,c);Dj(s,{rotation:-((isNaN(+i)?D[0]:TC(i,I,D,!0))+Math.PI/2)},t),v.add(s),M.setItemGraphicEl(r,s)}if(S){var u=R(r,c);Dj(u,{shape:{endAngle:TC(i,I,D,w.get("clip"))}},t),v.add(u),I2(t.seriesIndex,M.dataType,r,u),_[r]=u}}).update(function(r,i){var s=M.get(A,r);if(b){var u=y.getItemGraphicEl(i),h=u?u.rotation:c,p=P(r,h);p.rotation=h,DW(p,{rotation:-((isNaN(+s)?D[0]:TC(s,I,D,!0))+Math.PI/2)},t),v.add(p),M.setItemGraphicEl(r,p)}if(S){var f=x[i],C=R(r,f?f.shape.endAngle:c);DW(C,{shape:{endAngle:TC(s,I,D,w.get("clip"))}},t),v.add(C),I2(t.seriesIndex,M.dataType,r,C),_[r]=C}}).execute(),M.each(function(t){var r=M.getItemModel(t),i=r.getModel("emphasis"),u=i.get("focus"),c=i.get("blurScope"),h=i.get("disabled");if(b){var p=M.getItemGraphicEl(t),f=M.getItemVisual(t,"style"),v=f.fill;if(p instanceof ID){var y=p.style;p.useStyle(So({image:y.image,x:y.x,y:y.y,width:y.width,height:y.height},f))}else p.useStyle(f),"pointer"!==p.type&&p.setColor(v);p.setStyle(r.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===p.style.fill&&p.setStyle("fill",s(TC(M.get(A,t),I,[0,1],!0))),p.z2EmphasisLift=0,DB(p,r),DR(p,u,c,h)}if(S){var x=_[t];x.useStyle(M.getItemVisual(t,"style")),x.setStyle(r.getModel(["progress","itemStyle"]).getItemStyle()),x.z2EmphasisLift=0,DB(x,r),DR(x,u,c,h)}}),this._progressEls=_)},r.prototype._renderAnchor=function(t,r){var i=t.getModel("anchor");if(i.get("show")){var s=i.get("size"),u=i.get("icon"),c=i.get("offsetCenter"),h=i.get("keepAspect"),p=B8(u,r.cx-s/2+TT(c[0],r.r),r.cy-s/2+TT(c[1],r.r),s,s,null,h);p.z2=i.get("showAbove")?1:0,p.setStyle(i.getModel("itemStyle").getItemStyle()),this.group.add(p)}},r.prototype._renderTitleAndDetail=function(t,r,i,s,u){var c=this,h=t.getData(),p=h.mapDimension("value"),f=+t.get("min"),v=+t.get("max"),y=new Tf,x=[],_=[],b=t.isAnimationEnabled(),w=t.get(["pointer","showAbove"]);h.diff(this._data).add(function(t){x[t]=new I0({silent:!0}),_[t]=new I0({silent:!0})}).update(function(t,r){x[t]=c._titleEls[r],_[t]=c._detailEls[r]}).execute(),h.each(function(r){var i=h.getItemModel(r),c=h.get(p,r),S=new Tf,M=s(TC(c,[f,v],[0,1],!0)),A=i.getModel("title");if(A.get("show")){var C=A.get("offsetCenter"),T=u.cx+TT(C[0],u.r),I=u.cy+TT(C[1],u.r),D=x[r];D.attr({z2:w?0:2,style:D2(A,{x:T,y:I,text:h.getName(r),align:"center",verticalAlign:"middle"},{inheritColor:M})}),S.add(D)}var P=i.getModel("detail");if(P.get("show")){var R=P.get("offsetCenter"),L=u.cx+TT(R[0],u.r),k=u.cy+TT(R[1],u.r),O=TT(P.get("width"),u.r),B=TT(P.get("height"),u.r),N=t.get(["progress","show"])?h.getItemVisual(r,"style").fill:M,D=_[r],F=P.get("formatter");D.attr({z2:w?0:2,style:D2(P,{x:L,y:k,text:Yw(c,F),width:isNaN(O)?null:O,height:isNaN(B)?null:B,align:"center",verticalAlign:"middle"},{inheritColor:N})}),Pe(D,{normal:P},c,function(t){return Yw(t,F)}),b&&Pt(D,r,h,t,{getFormattedLabel:function(t,r,i,s,u,h){return Yw(h?h.interpolatedValue:c,F)}}),S.add(D)}y.add(S)}),this.group.add(y),this._titleEls=x,this._detailEls=_},r.type="gauge",r}(Bu),YM=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.visualStyleAccessPath="itemStyle",i}return wU(r,t),r.prototype.getInitialData=function(t,r){return G1(this,["value"])},r.type="series.gauge",r.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},r}(kw),YA=["itemStyle","opacity"],YC=function(t){function r(r,i){var s=t.call(this)||this,u=new Oh,c=new I0;return s.setTextContent(c),s.setTextGuideLine(u),s.updateData(r,i,!0),s}return wU(r,t),r.prototype.updateData=function(t,r,i){var s=t.hostModel,u=t.getItemModel(r),c=t.getItemLayout(r),h=u.getModel("emphasis"),p=u.get(YA);p=null==p?1:p,!i&&DZ(this),this.useStyle(t.getItemVisual(r,"style")),this.style.lineJoin="round",i?(this.setShape({points:c.points}),this.style.opacity=0,Dj(this,{style:{opacity:p}},s,r)):DW(this,{style:{opacity:p},shape:{points:c.points}},s,r),DB(this,u),this._updateLabel(t,r),DR(this,h.get("focus"),h.get("blurScope"),h.get("disabled"))},r.prototype._updateLabel=function(t,r){var i=this.getTextGuideLine(),s=this.getTextContent(),u=t.hostModel,c=t.getItemModel(r),h=t.getItemLayout(r).label,p=t.getItemVisual(r,"style"),f=p.fill;D0(s,D1(c),{labelFetcher:t.hostModel,labelDataIndex:r,defaultOpacity:p.opacity,defaultText:t.getName(r)},{normal:{align:h.textAlign,verticalAlign:h.verticalAlign}}),this.setTextConfig({local:!0,inside:!!h.inside,insideStroke:f,outsideFill:f});var v=h.linePoints;i.setShape({points:v}),this.textGuideLineConfig={anchor:v?new MZ(v[0][0],v[0][1]):null},DW(s,{style:{x:h.x,y:h.y}},u,r),s.attr({rotation:h.rotation,originX:h.x,originY:h.y,z2:10}),UP(this,UR(c),{stroke:f})},r}(Ol),YT=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.ignoreLabelLineUpdate=!0,i}return wU(r,t),r.prototype.render=function(t,r,i){var s=t.getData(),u=this._data,c=this.group;s.diff(u).add(function(t){var r=new YC(s,t);s.setItemGraphicEl(t,r),c.add(r)}).update(function(t,r){var i=u.getItemGraphicEl(r);i.updateData(s,t),c.add(i),s.setItemGraphicEl(t,i)}).remove(function(r){DJ(u.getItemGraphicEl(r),t,r)}).execute(),this._data=s},r.prototype.remove=function(){this.group.removeAll(),this._data=null},r.prototype.dispose=function(){},r.type="funnel",r}(Bu),YE=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.init=function(r){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new G2(Sx(this.getData,this),Sx(this.getRawData,this)),this._defaultLabelLine(r)},r.prototype.getInitialData=function(t,r){return G1(this,{coordDimensions:["value"],encodeDefaulter:S_(RM,this)})},r.prototype._defaultLabelLine=function(t){TQ(t,"labelLine",["show"]);var r=t.labelLine,i=t.emphasis.labelLine;r.show=r.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},r.prototype.getDataParams=function(r){var i=this.getData(),s=t.prototype.getDataParams.call(this,r),u=i.mapDimension("value"),c=i.getSum(u);return s.percent=c?+(i.get(u,r)/c*100).toFixed(2):0,s.$vars.push("percent"),s},r.type="series.funnel",r.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},r}(kw);function YI(t,r){t.eachSeriesByType("funnel",function(t){var i,s,u=t.getData(),c=u.mapDimension("value"),h=t.get("sort");var p=(i=t,s=r,Rt(i.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})),f=t.get("orient"),v=p.width,y=p.height,x=function(t,r){for(var i=t.mapDimension("value"),s=t.mapArray(i,function(t){return t}),u=[],c="ascending"===r,h=0,p=t.count();h<p;h++)u[h]=h;return Sw(r)?u.sort(r):"none"!==r&&u.sort(function(t,r){return c?s[t]-s[r]:s[r]-s[t]}),u}(u,h),_=p.x,b=p.y,w="horizontal"===f?[TT(t.get("minSize"),y),TT(t.get("maxSize"),y)]:[TT(t.get("minSize"),v),TT(t.get("maxSize"),v)],S=u.getDataExtent(c),M=t.get("min"),A=t.get("max");null==M&&(M=Math.min(S[0],0)),null==A&&(A=S[1]);var C=t.get("funnelAlign"),T=t.get("gap"),I=(("horizontal"===f?v:y)-T*(u.count()-1))/u.count(),D=function(t,r){if("horizontal"===f){var i,s=TC(u.get(c,t)||0,[M,A],w,!0),h=void 0;switch(C){case"top":h=b;break;case"center":h=b+(y-s)/2;break;case"bottom":h=b+(y-s)}return[[r,h],[r,h+s]]}var p=TC(u.get(c,t)||0,[M,A],w,!0);switch(C){case"left":i=_;break;case"center":i=_+(v-p)/2;break;case"right":i=_+v-p}return[[i,r],[i+p,r]]};"ascending"===h&&(I=-I,T=-T,"horizontal"===f?_+=v:b+=y,x=x.reverse());for(var P=0;P<x.length;P++){var R=x[P],L=x[P+1],k=u.getItemModel(R);if("horizontal"===f){var O=k.get(["itemStyle","width"]);null==O?O=I:(O=TT(O,v),"ascending"===h&&(O=-O));var B=D(R,_),N=D(L,_+O);_+=O+T,u.setItemLayout(R,{points:B.concat(N.slice().reverse())})}else{var F=k.get(["itemStyle","height"]);null==F?F=I:(F=TT(F,y),"ascending"===h&&(F=-F));var B=D(R,b),N=D(L,b+F);b+=F+T,u.setItemLayout(R,{points:B.concat(N.slice().reverse())})}}!function(t){var r=t.hostModel.get("orient");t.each(function(i){var s,u,c,h,p=t.getItemModel(i),f=p.getModel("label").get("position"),v=p.getModel("labelLine"),y=t.getItemLayout(i),x=y.points,_="inner"===f||"inside"===f||"center"===f||"insideLeft"===f||"insideRight"===f;if(_)"insideLeft"===f?(u=(x[0][0]+x[3][0])/2+5,c=(x[0][1]+x[3][1])/2,s="left"):"insideRight"===f?(u=(x[1][0]+x[2][0])/2-5,c=(x[1][1]+x[2][1])/2,s="right"):(u=(x[0][0]+x[1][0]+x[2][0]+x[3][0])/4,c=(x[0][1]+x[1][1]+x[2][1]+x[3][1])/4,s="center"),h=[[u,c],[u,c]];else{var b=void 0,w=void 0,S=void 0,M=void 0,A=v.get("length");"left"===f?(b=(x[3][0]+x[0][0])/2,w=(x[3][1]+x[0][1])/2,u=(S=b-A)-5,s="right"):"right"===f?(b=(x[1][0]+x[2][0])/2,w=(x[1][1]+x[2][1])/2,u=(S=b+A)+5,s="left"):"top"===f?(b=(x[3][0]+x[0][0])/2,c=(M=(w=(x[3][1]+x[0][1])/2)-A)-5,s="center"):"bottom"===f?(b=(x[1][0]+x[2][0])/2,c=(M=(w=(x[1][1]+x[2][1])/2)+A)+5,s="center"):"rightTop"===f?(b="horizontal"===r?x[3][0]:x[1][0],w="horizontal"===r?x[3][1]:x[1][1],"horizontal"===r?(c=(M=w-A)-5,s="center"):(u=(S=b+A)+5,s="top")):"rightBottom"===f?(b=x[2][0],w=x[2][1],"horizontal"===r?(c=(M=w+A)+5,s="center"):(u=(S=b+A)+5,s="bottom")):"leftTop"===f?(b=x[0][0],w="horizontal"===r?x[0][1]:x[1][1],"horizontal"===r?(c=(M=w-A)-5,s="center"):(u=(S=b-A)-5,s="right")):"leftBottom"===f?(b="horizontal"===r?x[1][0]:x[3][0],w="horizontal"===r?x[1][1]:x[2][1],"horizontal"===r?(c=(M=w+A)+5,s="center"):(u=(S=b-A)-5,s="right")):(b=(x[1][0]+x[2][0])/2,w=(x[1][1]+x[2][1])/2,"horizontal"===r?(c=(M=w+A)+5,s="center"):(u=(S=b+A)+5,s="left")),"horizontal"===r?u=S=b:c=M=w,h=[[b,w],[S,M]]}y.label={linePoints:h,x:u,y:c,verticalAlign:"middle",textAlign:s,inside:_}})}(u)})}var YD=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i._dataGroup=new Tf,i._initialized=!1,i}return wU(r,t),r.prototype.init=function(){this.group.add(this._dataGroup)},r.prototype.render=function(t,r,i,s){this._progressiveEls=null;var u=this._dataGroup,c=t.getData(),h=this._data,p=t.coordinateSystem,f=p.dimensions,v=YL(t);c.diff(h).add(function(t){Yk(YR(c,u,t,f,p),c,t,v)}).update(function(r,i){var s=h.getItemGraphicEl(i),u=YP(c,r,f,p);c.setItemGraphicEl(r,s),DW(s,{shape:{points:u}},t,r),DZ(s),Yk(s,c,r,v)}).remove(function(t){var r=h.getItemGraphicEl(t);u.remove(r)}).execute();if(!this._initialized){this._initialized=!0;var y=function(t,r,i){var s=t.model,u=t.getRect(),c=new IF({shape:{x:u.x,y:u.y,width:u.width,height:u.height}}),h="horizontal"===s.get("layout")?"width":"height";return c.setShape(h,0),Dj(c,{shape:{width:u.width,height:u.height}},r,i),c}(p,t,function(){setTimeout(function(){u.removeClipPath()})});u.setClipPath(y)}this._data=c},r.prototype.incrementalPrepareRender=function(t,r,i){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},r.prototype.incrementalRender=function(t,r,i){for(var s=r.getData(),u=r.coordinateSystem,c=u.dimensions,h=YL(r),p=this._progressiveEls=[],f=t.start;f<t.end;f++){var v=YR(s,this._dataGroup,f,c,u);v.incremental=!0,Yk(v,s,f,h),p.push(v)}},r.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},r.type="parallel",r}(Bu);function YP(t,r,i,s){for(var u=[],c=0;c<i.length;c++){var h=i[c],p=t.get(t.mapDimension(h),r);!function(t,r){return"category"===r?null==t:null==t||isNaN(t)}(p,s.getAxis(h).type)&&u.push(s.dataToPoint(p,h))}return u}function YR(t,r,i,s,u){var c=new Oh({shape:{points:YP(t,i,s,u)},z2:10});return r.add(c),t.setItemGraphicEl(i,c),c}function YL(t){var r,i=t.get("smooth",!0);return!0===i&&(i=.3),(r=i=Tj(i))!=r&&(i=0),{smooth:i}}function Yk(t,r,i,s){t.useStyle(r.getItemVisual(i,"style")),t.style.fill=null,t.setShape("smooth",s.smooth);var u=r.getItemModel(i),c=u.getModel("emphasis");DB(t,u,"lineStyle"),DR(t,c.get("focus"),c.get("blurScope"),c.get("disabled"))}var YO=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.visualStyleAccessPath="lineStyle",i.visualDrawType="stroke",i}return wU(r,t),r.prototype.getInitialData=function(t,r){return Fq(null,this,{useEncodeDefaulter:Sx(YB,null,this)})},r.prototype.getRawIndicesByActiveState=function(t){var r=this.coordinateSystem,i=this.getData(),s=[];return r.eachActiveState(i,function(r,u){t===r&&s.push(i.getRawIndex(u))}),s},r.type="series.parallel",r.dependencies=["parallel"],r.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},r}(kw);function YB(t){var r=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(!!r){var i={};return Sp(r.dimensions,function(t){var r=function(t){return+t.replace("dim","")}(t);i[t]=r}),i}}var YN=["lineStyle","opacity"];let YF={seriesType:"parallel",reset:function(t,r){var i=t.coordinateSystem,s={normal:t.get(["lineStyle","opacity"]),active:t.get("activeOpacity"),inactive:t.get("inactiveOpacity")};return{progress:function(t,r){i.eachActiveState(r,function(t,i){var u=s[t];if("normal"===t&&r.hasItemOption){var c=r.getItemModel(i).get(YN,!0);null!=c&&(u=c)}r.ensureUniqueItemVisual(i,"style").opacity=u},t.start,t.end)}}}};function Yz(t){(function(t){if(!t.parallel){var r=!1;Sp(t.series,function(t){t&&"parallel"===t.type&&(r=!0)}),r&&(t.parallel=[{}])}})(t),function(t){Sp(Tq(t.parallelAxis),function(r){if(!!SC(r)){var i=r.parallelIndex||0,s=Tq(t.parallel)[i];s&&s.parallelAxisDefault&&Si(r,s.parallelAxisDefault,!1)}})}(t)}var YU=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.render=function(t,r,i){this._model=t,this._api=i,!this._handlers&&(this._handlers={},Sp(YH,function(t,r){i.getZr().on(r,this._handlers[r]=Sx(t,this))},this)),Bf(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},r.prototype.dispose=function(t,r){Bg(this,"_throttledDispatchExpand"),Sp(this._handlers,function(t,i){r.getZr().off(i,t)}),this._handlers=null},r.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},r.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(So({type:"parallelAxisExpand"},t))},r.type="parallel",r}(kM),YH={mousedown:function(t){YG(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var r=this._mouseDownPoint;if(YG(this,"click")&&r){var i=[t.offsetX,t.offsetY];if(Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2)>5)return;var s=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);"none"!==s.behavior&&this._dispatchExpand({axisExpandWindow:s.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!this._mouseDownPoint&&!!YG(this,"mousemove")){var r=this._model,i=r.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),s=i.behavior;"jump"===s&&this._throttledDispatchExpand.debounceNextCall(r.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===s?null:{axisExpandWindow:i.axisExpandWindow,animation:"jump"===s?null:{duration:0}})}}};function YG(t,r){var i=t._model;return i.get("axisExpandable")&&i.get("axisExpandTriggerOn")===r}var YV=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.init=function(){t.prototype.init.apply(this,arguments),this.mergeOption({})},r.prototype.mergeOption=function(t){var r=this.option;t&&Si(r,t,!0),this._initDimensions()},r.prototype.contains=function(t,r){var i=t.get("parallelIndex");return null!=i&&r.getComponent("parallel",i)===this},r.prototype.setAxisExpand=function(t){Sp(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(r){t.hasOwnProperty(r)&&(this.option[r]=t[r])},this)},r.prototype._initDimensions=function(){var t=this.dimensions=[],r=this.parallelAxisIndex=[];Sp(Sm(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(t){return(t.get("parallelIndex")||0)===this.componentIndex},this),function(i){t.push("dim"+i.get("dim")),r.push(i.componentIndex)})},r.type="parallel",r.dependencies=["parallelAxis"],r.layoutMode="box",r.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},r}(Ru),YW=function(t){function r(r,i,s,u,c){var h=t.call(this,r,i,s)||this;return h.type=u||"value",h.axisIndex=c,h}return wU(r,t),r.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},r}(Uu);function Yj(t,r,i,s,u,c){t=t||0;var h,p=i[1]-i[0];if(null!=u&&(u=YY(u,[0,p])),null!=c&&(c=Math.max(c,null!=u?u:0)),"all"===s){var f=Math.abs(r[1]-r[0]);f=YY(f,[0,p]),u=c=YY(f,[u,c]),s=0}r[0]=YY(r[0],i),r[1]=YY(r[1],i);var v=YX(r,s);r[s]+=t;var y=u||0,x=i.slice();return v.sign<0?x[0]+=y:x[1]-=y,r[s]=YY(r[s],x),h=YX(r,s),null!=u&&(h.sign!==v.sign||h.span<u)&&(r[1-s]=r[s]+v.sign*u),h=YX(r,s),null!=c&&h.span>c&&(r[1-s]=r[s]+h.sign*c),r}function YX(t,r){var i=t[r]-t[1-r];return{span:Math.abs(i),sign:i>0?-1:i<0?1:r?-1:1}}function YY(t,r){return Math.min(null!=r[1]?r[1]:1/0,Math.max(null!=r[0]?r[0]:-1/0,t))}var Y$=Sp,YJ=Math.min,YZ=Math.max,YK=Math.floor,Yq=Math.ceil,YQ=TE,Y0=Math.PI,Y1=function(){function t(t,r,i){this.type="parallel",this._axesMap=SY(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,r,i)}return t.prototype._init=function(t,r,i){var s=t.dimensions,u=t.parallelAxisIndex;Y$(s,function(t,i){var s=u[i],c=r.getComponent("parallelAxis",s),h=this._axesMap.set(t,new YW(t,zB(c),[0,0],c.get("type"),s)),p="category"===h.type;h.onBand=p&&c.get("boundaryGap"),h.inverse=c.get("inverse"),c.axis=h,h.model=c,h.coordinateSystem=c.coordinateSystem=this},this)},t.prototype.update=function(t,r){this._updateAxesFromSeries(this._model,t)},t.prototype.containPoint=function(t){var r=this._makeLayoutInfo(),i=r.axisBase,s=r.layoutBase,u=r.pixelDimIndex,c=t[1-u],h=t[u];return c>=i&&c<=i+r.axisLength&&h>=s&&h<=s+r.layoutLength},t.prototype.getModel=function(){return this._model},t.prototype._updateAxesFromSeries=function(t,r){r.eachSeries(function(i){if(!!t.contains(i,r)){var s=i.getData();Y$(this.dimensions,function(t){var r=this._axesMap.get(t);r.scale.unionExtentFromData(s,s.mapDimension(t)),zO(r.scale,r.model)},this)}},this)},t.prototype.resize=function(t,r){this._rect=Rt(t.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),this._layoutAxes()},t.prototype.getRect=function(){return this._rect},t.prototype._makeLayoutInfo=function(){var t,r=this._model,i=this._rect,s=["x","y"],u=["width","height"],c=r.get("layout"),h="horizontal"===c?0:1,p=i[u[h]],f=[0,p],v=this.dimensions.length,y=Y2(r.get("axisExpandWidth"),f),x=Y2(r.get("axisExpandCount")||0,[0,v]),_=r.get("axisExpandable")&&v>3&&v>x&&x>1&&y>0&&p>0,b=r.get("axisExpandWindow");b?(t=Y2(b[1]-b[0],f),b[1]=b[0]+t):(t=Y2(y*(x-1),f),(b=[y*(r.get("axisExpandCenter")||YK(v/2))-t/2])[1]=b[0]+t);var w=(p-t)/(v-x);w<3&&(w=0);var S=[YK(YQ(b[0]/y,1))+1,Yq(YQ(b[1]/y,1))-1],M=w/y*b[0];return{layout:c,pixelDimIndex:h,layoutBase:i[s[h]],layoutLength:p,axisBase:i[s[1-h]],axisLength:i[u[1-h]],axisExpandable:_,axisExpandWidth:y,axisCollapseWidth:w,axisExpandWindow:b,axisCount:v,winInnerIndices:S,axisExpandWindow0Pos:M}},t.prototype._layoutAxes=function(){var t=this._rect,r=this._axesMap,i=this.dimensions,s=this._makeLayoutInfo(),u=s.layout;r.each(function(t){var r=[0,s.axisLength],i=t.inverse?1:0;t.setExtent(r[i],r[1-i])}),Y$(i,function(r,i){var c=(s.axisExpandable?function(t,r){var i,s,u=r.layoutLength,c=r.axisExpandWidth,h=r.axisCount,p=r.axisCollapseWidth,f=r.winInnerIndices,v=p,y=!1;return t<f[0]?(i=t*p,s=p):t<=f[1]?(i=r.axisExpandWindow0Pos+t*c-r.axisExpandWindow[0],v=c,y=!0):(i=u-(h-1-t)*p,s=p),{position:i,axisNameAvailableWidth:v,axisLabelShow:y,nameTruncateMaxWidth:s}}:function(t,r){var i=r.layoutLength/(r.axisCount-1);return{position:i*t,axisNameAvailableWidth:i,axisLabelShow:!0}})(i,s),h={horizontal:{x:c.position,y:s.axisLength},vertical:{x:0,y:c.position}},p=[h[u].x+t.x,h[u].y+t.y],f={horizontal:Y0/2,vertical:0}[u],v=MH();MX(v,v,f),Mj(v,v,p),this._axesLayout[r]={position:p,rotation:f,transform:v,axisNameAvailableWidth:c.axisNameAvailableWidth,axisLabelShow:c.axisLabelShow,nameTruncateMaxWidth:c.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},t.prototype.getAxis=function(t){return this._axesMap.get(t)},t.prototype.dataToPoint=function(t,r){return this.axisCoordToPoint(this._axesMap.get(r).dataToCoord(t),r)},t.prototype.eachActiveState=function(t,r,i,s){null==i&&(i=0),null==s&&(s=t.count());var u=this._axesMap,c=this.dimensions,h=[],p=[];Sp(c,function(r){h.push(t.mapDimension(r)),p.push(u.get(r).model)});for(var f=this.hasAxisBrushed(),v=i;v<s;v++){var y=void 0;if(f){y="active";for(var x=t.getValues(h,v),_=0,b=c.length;_<b;_++)if("inactive"===p[_].getActiveState(x[_])){y="inactive";break}}else y="normal";r(y,v)}},t.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,r=this._axesMap,i=!1,s=0,u=t.length;s<u;s++)"normal"!==r.get(t[s]).model.getActiveState()&&(i=!0);return i},t.prototype.axisCoordToPoint=function(t,r){return Oq([t,0],this._axesLayout[r].transform)},t.prototype.getAxisLayout=function(t){return Sr(this._axesLayout[t])},t.prototype.getSlidedAxisExpandWindow=function(t){var r,i=this._makeLayoutInfo(),s=i.pixelDimIndex,u=i.axisExpandWindow.slice(),c=u[1]-u[0],h=[0,i.axisExpandWidth*(i.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:u};var p=t[s]-i.layoutBase-i.axisExpandWindow0Pos,f="slide",v=i.axisCollapseWidth,y=this._model.get("axisExpandSlideTriggerArea"),x=null!=y[0];if(v)x&&v&&p<c*y[0]?(f="jump",r=p-c*y[2]):x&&v&&p>c*(1-y[0])?(f="jump",r=p-c*(1-y[2])):(r=p-c*y[1])>=0&&(r=p-c*(1-y[1]))<=0&&(r=0),(r*=i.axisExpandWidth/v)?Yj(r,u,h,"all"):f="none";else{var _=u[1]-u[0];(u=[YZ(0,h[1]*p/_-_/2)])[1]=YJ(h[1],u[0]+_),u[0]=u[1]-_}return{axisExpandWindow:u,behavior:f}},t}();function Y2(t,r){return YJ(YZ(t,r[0]),r[1])}let Y3={create:function(t,r){var i=[];return t.eachComponent("parallel",function(s,u){var c=new Y1(s,t,r);c.name="parallel_"+u,c.resize(s,r),s.coordinateSystem=c,c.model=s,i.push(c)}),t.eachSeries(function(t){if("parallel"===t.get("coordinateSystem")){var r=t.getReferringComponents("parallel",Er).models[0];t.coordinateSystem=r.coordinateSystem}}),i}};var Y5=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.activeIntervals=[],i}return wU(r,t),r.prototype.getAreaSelectStyle=function(){return Ey([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},r.prototype.setActiveIntervals=function(t){var r=this.activeIntervals=Sr(t);if(r)for(var i=r.length-1;i>=0;i--)TI(r[i])},r.prototype.getActiveState=function(t){var r=this.activeIntervals;if(!r.length)return"normal";if(null==t||isNaN(+t))return"inactive";if(1===r.length){var i=r[0];if(i[0]<=t&&t<=i[1])return"active"}else for(var s=0,u=r.length;s<u;s++)if(r[s][0]<=t&&t<=r[s][1])return"active";return"inactive"},r}(Ru);Sh(Y5,zG);var Y4=Math.min,Y6=Math.max,Y9=Math.pow,Y8="globalPan",Y7={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},$e={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},$t={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},$n=0,$r=function(t){function r(r){var i=t.call(this)||this;return i._track=[],i._covers=[],i._handlers={},i._zr=r,i.group=new Tf,i._uid="brushController_"+$n++,Sp($D,function(t,r){this._handlers[r]=Sx(t,this)},i),i}return wU(r,t),r.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},r.prototype._doEnableBrush=function(t){var r,i,s,u=this._zr;if(!this._enableGlobalPan){;r=u,i=Y8,s=this._uid,Wn(r)[i]=s}Sp(this._handlers,function(t,r){u.on(r,t)}),this._brushType=t.brushType,this._brushOption=Si(Sr($t),t,!0)},r.prototype._doDisableBrush=function(){var t,r,i,s,u=this._zr;t=u,r=Y8,i=this._uid,(s=Wn(t))[r]===i&&(s[r]=null),Sp(this._handlers,function(t,r){u.off(r,t)}),this._brushType=this._brushOption=null},r.prototype.setPanels=function(t){if(t&&t.length){var r=this._panels={};Sp(t,function(t){r[t.panelId]=Sr(t)})}else this._panels=null;return this},r.prototype.mount=function(t){t=t||{};this._enableGlobalPan=t.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=r.getLocalTransform(),this},r.prototype.updateCovers=function(t){t=Sf(t,function(t){return Si(Sr($t),t,!0)});var r=this._covers,i=this._covers=[],s=this,u=this._creatingCover;return new FC(r,t,function(t,r){return c(t.__brushOption,r)},c).add(h).update(h).remove(function(t){r[t]!==u&&s.group.remove(r[t])}).execute(),this;function c(t,r){return(null!=t.id?t.id:"\0-brush-index-"+r)+"-"+t.brushType}function h(c,h){var p=t[c];if(null!=h&&r[h]===u)i[c]=r[h];else{var f=i[c]=null!=h?(r[h].__brushOption=p,r[h]):$a(s,$i(s,p));$l(s,f)}}},r.prototype.unmount=function(){return this.enableBrush(!1),$d(this),this._zr.remove(this.group),this},r.prototype.dispose=function(){this.unmount(),this.off()},r}(Mv);function $i(t,r){var i=$R[r.brushType].createCover(t,r);return i.__brushOption=r,$s(i,r),t.group.add(i),i}function $a(t,r){var i=$u(r);return i.endCreating&&(i.endCreating(t,r),$s(r,r.__brushOption)),r}function $o(t,r){var i=r.__brushOption;$u(r).updateCoverShape(t,r,i.range,i)}function $s(t,r){var i=r.z;null==i&&(i=1e4),t.traverse(function(t){t.z=i,t.z2=i})}function $l(t,r){$u(r).updateCommon(t,r),$o(t,r)}function $u(t){return $R[t.__brushOption.brushType]}function $c(t,r,i){var s,u=t._panels;if(!u)return!0;var c=t._transform;return Sp(u,function(t){t.isTargetByCursor(r,i,c)&&(s=t)}),s}function $h(t,r){var i=t._panels;if(!i)return!0;var s=r.__brushOption.panelId;return null==s||i[s]}function $d(t){var r=t._covers,i=r.length;return Sp(r,function(r){t.group.remove(r)},t),r.length=0,!!i}function $p(t,r){var i=Sf(t._covers,function(t){var r=t.__brushOption,i=Sr(r.range);return{brushType:r.brushType,panelId:r.panelId,range:i}});t.trigger("brush",{areas:i,isEnd:!!r.isEnd,removeOnClick:!!r.removeOnClick})}function $f(t){var r=t.length-1;return r<0&&(r=0),[t[0],t[r]]}function $g(t,r,i,s){var u=new Tf;return u.add(new IF({name:"main",style:$x(i),silent:!0,draggable:!0,cursor:"move",drift:S_($w,t,r,u,["n","s","w","e"]),ondragend:S_($p,r,{isEnd:!0})})),Sp(s,function(i){u.add(new IF({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:S_($w,t,r,u,i),ondragend:S_($p,r,{isEnd:!0})}))}),u}function $m(t,r,i,s){var u=s.brushStyle.lineWidth||0,c=Y6(u,6),h=i[0][0],p=i[1][0],f=h-u/2,v=p-u/2,y=i[0][1],x=i[1][1],_=y-c+u/2,b=x-c+u/2,w=y-h,S=x-p,M=w+u,A=S+u;$y(t,r,"main",h,p,w,S),s.transformable&&($y(t,r,"w",f,v,c,A),$y(t,r,"e",_,v,c,A),$y(t,r,"n",f,v,M,c),$y(t,r,"s",f,b,M,c),$y(t,r,"nw",f,v,c,c),$y(t,r,"ne",_,v,c,c),$y(t,r,"sw",f,b,c,c),$y(t,r,"se",_,b,c,c))}function $v(t,r){var i=r.__brushOption,s=i.transformable,u=r.childAt(0);u.useStyle($x(i)),u.attr({silent:!s,cursor:s?"move":"default"}),Sp([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var u=r.childOfName(i.join("")),c=1===i.length?$b(t,i[0]):function(t,r){var i=[$b(t,r[0]),$b(t,r[1])];return("e"===i[0]||"w"===i[0])&&i.reverse(),i.join("")}(t,i);u&&u.attr({silent:!s,invisible:!s,cursor:s?$e[c]+"-resize":null})})}function $y(t,r,i,s,u,c,h){var p=r.childOfName(i);p&&p.setShape(function(t){var r=Y4(t[0][0],t[1][0]),i=Y4(t[0][1],t[1][1]);return{x:r,y:i,width:Y6(t[0][0],t[1][0])-r,height:Y6(t[0][1],t[1][1])-i}}($A(t,r,[[s,u],[s+c,u+h]])))}function $x(t){return Ss({strokeNoScale:!0},t.brushStyle)}function $_(t,r,i,s){var u=[Y4(t,i),Y4(r,s)],c=[Y6(t,i),Y6(r,s)];return[[u[0],c[0]],[u[1],c[1]]]}function $b(t,r){return({left:"w",right:"e",top:"n",bottom:"s"})[OQ({w:"left",e:"right",n:"top",s:"bottom"}[r],OK(t.group))]}function $w(t,r,i,s,u,c){var h=i.__brushOption,p=t.toRectRange(h.range),f=$M(r,u,c);Sp(s,function(t){var r=Y7[t];p[r[0]][r[1]]+=f[r[0]]}),h.range=t.fromRectRange($_(p[0][0],p[1][0],p[0][1],p[1][1])),$l(r,i),$p(r,{isEnd:!1})}function $S(t,r,i,s){var u=r.__brushOption.range,c=$M(t,i,s);Sp(u,function(t){t[0]+=c[0],t[1]+=c[1]}),$l(t,r),$p(t,{isEnd:!1})}function $M(t,r,i){var s=t.group,u=s.transformCoordToLocal(r,i),c=s.transformCoordToLocal(0,0);return[u[0]-c[0],u[1]-c[1]]}function $A(t,r,i){var s=$h(t,r);return s&&!0!==s?s.clipPath(i,t._transform):Sr(i)}function $C(t){var r=t.event;r.preventDefault&&r.preventDefault()}function $T(t,r,i){return t.childOfName("main").contain(r,i)}function $E(t,r,i,s){var u,c=t._creatingCover,h=t._creatingPanel,p=t._brushOption;if(t._track.push(i.slice()),function(t){var r=t._track;if(!r.length)return!1;var i=r[r.length-1],s=r[0],u=i[0]-s[0],c=i[1]-s[1];return Y9(u*u+c*c,.5)>6}(t)||c){if(h&&!c){"single"===p.brushMode&&$d(t);var f=Sr(p);f.brushType=$I(f.brushType,h),f.panelId=!0===h?null:h.panelId,c=t._creatingCover=$i(t,f),t._covers.push(c)}if(c){var v=$R[$I(t._brushType,h)];c.__brushOption.range=v.getCreatingRange($A(t,c,t._track)),s&&($a(t,c),v.updateCommon(t,c)),$o(t,c),u={isEnd:s}}}else s&&"single"===p.brushMode&&p.removeOnClick&&$c(t,r,i)&&$d(t)&&(u={isEnd:s,removeOnClick:!0});return u}function $I(t,r){return"auto"===t?r.defaultBrushType:t}var $D={mousedown:function(t){if(this._dragging)$P(this,t);else if(!t.target||!t.target.draggable){$C(t);var r=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null,(this._creatingPanel=$c(this,t,r))&&(this._dragging=!0,this._track=[r.slice()])}},mousemove:function(t){var r=t.offsetX,i=t.offsetY,s=this.group.transformCoordToLocal(r,i);if(!function(t,r,i){if(!(!t._brushType||function(t,r,i){var s=t._zr;return r<0||r>s.getWidth()||i<0||i>s.getHeight()}(t,r.offsetX,r.offsetY))){var s=t._zr,u=t._covers,c=$c(t,r,i);if(!t._dragging)for(var h=0;h<u.length;h++){var p=u[h].__brushOption;if(c&&(!0===c||p.panelId===c.panelId)&&$R[p.brushType].contain(u[h],i[0],i[1]))return}c&&s.setCursorStyle("crosshair")}}(this,t,s),this._dragging){$C(t);var u=$E(this,t,s,!1);u&&$p(this,u)}},mouseup:function(t){$P(this,t)}};function $P(t,r){if(t._dragging){$C(r);var i=r.offsetX,s=r.offsetY,u=t.group.transformCoordToLocal(i,s),c=$E(t,r,u,!0);t._dragging=!1,t._track=[],t._creatingCover=null,c&&$p(t,c)}}var $R={lineX:$L(0),lineY:$L(1),rect:{createCover:function(t,r){function i(t){return t}return $g({toRectRange:i,fromRectRange:i},t,r,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var r=$f(t);return $_(r[1][0],r[1][1],r[0][0],r[0][1])},updateCoverShape:function(t,r,i,s){$m(t,r,i,s)},updateCommon:$v,contain:$T},polygon:{createCover:function(t,r){var i=new Tf;return i.add(new Oh({name:"main",style:$x(r),silent:!0})),i},getCreatingRange:function(t){return t},endCreating:function(t,r){r.remove(r.childAt(0)),r.add(new Ol({name:"main",draggable:!0,drift:S_($S,t,r),ondragend:S_($p,t,{isEnd:!0})}))},updateCoverShape:function(t,r,i,s){r.childAt(0).setShape({points:$A(t,r,i)})},updateCommon:$v,contain:$T}};function $L(t){return{createCover:function(r,i){return $g({toRectRange:function(r){var i=[r,[0,100]];return t&&i.reverse(),i},fromRectRange:function(r){return r[t]}},r,i,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(r){var i=$f(r);return[Y4(i[0][t],i[1][t]),Y6(i[0][t],i[1][t])]},updateCoverShape:function(r,i,s,u){var c,h=$h(r,i);if(!0!==h&&h.getLinearBrushOtherExtent)c=h.getLinearBrushOtherExtent(t);else{var p=r._zr;c=[0,[p.getWidth(),p.getHeight()][1-t]]}var f=[s,c];t&&f.reverse(),$m(r,i,f,u)},updateCommon:$v,contain:$T}}function $k(t){return t=$N(t),function(r){return O2(r,t)}}function $O(t,r){return t=$N(t),function(i){var s=null!=r?r:i,u=s?t.width:t.height,c=s?t.x:t.y;return[c,c+(u||0)]}}function $B(t,r,i){var s=$N(t);return function(t,u){return s.contain(u[0],u[1])&&!Wc(t,r,i)}}function $N(t){return M4.create(t)}var $F=["axisLine","axisTickLabel","axisName"],$z=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.init=function(r,i){t.prototype.init.apply(this,arguments),(this._brushController=new $r(i.getZr())).on("brush",Sx(this._onBrush,this))},r.prototype.render=function(t,r,i,s){if(function(t,r,i){return i&&"axisAreaSelect"===i.type&&r.findComponents({mainType:"parallelAxis",query:i})[0]===t}(t,r,s))return;this.axisModel=t,this.api=i,this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new Tf,this.group.add(this._axisGroup),!!t.get("show")){var c=function(t,r){return r.getComponent("parallel",t.get("parallelIndex"))}(t,r),h=c.coordinateSystem,p=t.getAreaSelectStyle(),f=p.width,v=t.axis.dim,y=So({strokeContainThreshold:f},h.getAxisLayout(v)),x=new VC(t,y);Sp($F,x.add,x),this._axisGroup.add(x.getGroup()),this._refreshBrushController(y,p,t,c,f,i),O1(u,this._axisGroup,t)}},r.prototype._refreshBrushController=function(t,r,i,s,u,c){var h=i.axis.getExtent(),p=h[1]-h[0],f=Math.min(30,.1*Math.abs(p)),v=M4.create({x:h[0],y:-u/2,width:p,height:u});v.x-=f,v.width+=2*f,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:$k(v),isTargetByCursor:$B(v,c,s),getLinearBrushOtherExtent:$O(v,0)}]).enableBrush({brushType:"lineX",brushStyle:r,removeOnClick:!0}).updateCovers(function(t){var r=t.axis;return Sf(t.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[r.dataToCoord(t[0],!0),r.dataToCoord(t[1],!0)]}})}(i))},r.prototype._onBrush=function(t){var r=t.areas,i=this.axisModel,s=i.axis,u=Sf(r,function(t){return[s.coordToData(t.range[0],!0),s.coordToData(t.range[1],!0)]});(!i.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:i.id,intervals:u})},r.prototype.dispose=function(){this._brushController.dispose()},r.type="parallelAxis",r}(kM),$U={type:"axisAreaSelect",event:"axisAreaSelected"},$H={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function $G(t){var r;t.registerComponentView(YU),t.registerComponentModel(YV),t.registerCoordinateSystem("parallel",Y3),t.registerPreprocessor(Yz),t.registerComponentModel(Y5),t.registerComponentView($z),Vu(t,"parallel",Y5,$H),(r=t).registerAction($U,function(t,r){r.eachComponent({mainType:"parallelAxis",query:t},function(r){r.axis.model.setActiveIntervals(t.intervals)})}),r.registerAction("parallelAxisExpand",function(t,r){r.eachComponent({mainType:"parallel",query:t},function(r){r.setAxisExpand(t)})})}var $V=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},$W=function(t){function r(r){return t.call(this,r)||this}return wU(r,t),r.prototype.getDefaultShape=function(){return new $V},r.prototype.buildPath=function(t,r){var i=r.extent;t.moveTo(r.x1,r.y1),t.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),"vertical"===r.orient?(t.lineTo(r.x2+i,r.y2),t.bezierCurveTo(r.cpx2+i,r.cpy2,r.cpx1+i,r.cpy1,r.x1+i,r.y1)):(t.lineTo(r.x2,r.y2+i),t.bezierCurveTo(r.cpx2,r.cpy2+i,r.cpx1,r.cpy1+i,r.x1,r.y1+i)),t.closePath()},r.prototype.highlight=function(){Dx(this)},r.prototype.downplay=function(){D_(this)},r}(IM),$j=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i._focusAdjacencyDisabled=!1,i}return wU(r,t),r.prototype.render=function(t,r,i){var s=this,u=t.getGraph(),c=this.group,h=t.layoutInfo,p=h.width,f=h.height,v=t.getData(),y=t.getData("edge"),x=t.get("orient");this._model=t,c.removeAll(),c.x=h.x,c.y=h.y,u.eachEdge(function(r){var i,s,u,h,v,_,b,w,S=new $W,M=I1(S);M.dataIndex=r.dataIndex,M.seriesIndex=t.seriesIndex,M.dataType="edge";var A=r.getModel(),C=A.getModel("lineStyle"),T=C.get("curveness"),I=r.node1.getLayout(),D=r.node1.getModel(),P=D.get("localX"),R=D.get("localY"),L=r.node2.getLayout(),k=r.node2.getModel(),O=k.get("localX"),B=k.get("localY"),N=r.getLayout();S.shape.extent=Math.max(1,N.dy),S.shape.orient=x,"vertical"===x?(i=(null!=P?P*p:I.x)+N.sy,s=(null!=R?R*f:I.y)+I.dy,u=(null!=O?O*p:L.x)+N.ty,h=null!=B?B*f:L.y,v=i,_=s*(1-T)+h*T,b=u,w=s*T+h*(1-T)):(i=(null!=P?P*p:I.x)+I.dx,s=(null!=R?R*f:I.y)+N.sy,u=null!=O?O*p:L.x,h=(null!=B?B*f:L.y)+N.ty,v=i*(1-T)+u*T,_=s,b=i*T+u*(1-T),w=h),S.setShape({x1:i,y1:s,x2:u,y2:h,cpx1:v,cpy1:_,cpx2:b,cpy2:w}),S.useStyle(C.getItemStyle()),$X(S.style,x,r);var F=""+A.get("value"),z=D1(A,"edgeLabel");D0(S,z,{labelFetcher:{getFormattedLabel:function(r,i,s,u,c,h){return t.getFormattedLabel(r,i,"edge",u,SB(c,z.normal&&z.normal.get("formatter"),F),h)}},labelDataIndex:r.dataIndex,defaultText:F}),S.setTextConfig({position:"inside"});var U=A.getModel("emphasis");DB(S,A,"lineStyle",function(t){var i=t.getItemStyle();return $X(i,x,r),i}),c.add(S),y.setItemGraphicEl(r.dataIndex,S);var H=U.get("focus");DR(S,"adjacency"===H?r.getAdjacentDataIndices():"trajectory"===H?r.getTrajectoryDataIndices():H,U.get("blurScope"),U.get("disabled"))}),u.eachNode(function(r){var i=r.getLayout(),s=r.getModel(),u=s.get("localX"),h=s.get("localY"),y=s.getModel("emphasis"),x=s.get(["itemStyle","borderRadius"])||0,_=new IF({shape:{x:null!=u?u*p:i.x,y:null!=h?h*f:i.y,width:i.dx,height:i.dy,r:x},style:s.getModel("itemStyle").getItemStyle(),z2:10});D0(_,D1(s),{labelFetcher:{getFormattedLabel:function(r,i){return t.getFormattedLabel(r,i,"node")}},labelDataIndex:r.dataIndex,defaultText:r.id}),_.disableLabelAnimation=!0,_.setStyle("fill",r.getVisual("color")),_.setStyle("decal",r.getVisual("style").decal),DB(_,s),c.add(_),v.setItemGraphicEl(r.dataIndex,_),I1(_).dataType="node";var b=y.get("focus");DR(_,"adjacency"===b?r.getAdjacentDataIndices():"trajectory"===b?r.getTrajectoryDataIndices():b,y.get("blurScope"),y.get("disabled"))}),v.eachItemGraphicEl(function(r,u){v.getItemModel(u).get("draggable")&&(r.drift=function(r,c){s._focusAdjacencyDisabled=!0,this.shape.x+=r,this.shape.y+=c,this.dirty(),i.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:v.getRawIndex(u),localX:this.shape.x/p,localY:this.shape.y/f})},r.ondragend=function(){s._focusAdjacencyDisabled=!1},r.draggable=!0,r.cursor="move")}),!this._data&&t.isAnimationEnabled()&&c.setClipPath(function(t,r,i){var s=new IF({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return Dj(s,{shape:{width:t.width+20}},r,i),s}(c.getBoundingRect(),t,function(){c.removeClipPath()})),this._data=t.getData()},r.prototype.dispose=function(){},r.type="sankey",r}(Bu);function $X(t,r,i){switch(t.fill){case"source":t.fill=i.node1.getVisual("color"),t.decal=i.node1.getVisual("style").decal;break;case"target":t.fill=i.node2.getVisual("color"),t.decal=i.node2.getVisual("style").decal;break;case"gradient":var s=i.node1.getVisual("color"),u=i.node2.getVisual("color");SS(s)&&SS(u)&&(t.fill=new OC(0,0,+("horizontal"===r),+("vertical"===r),[{color:s,offset:0},{color:u,offset:1}]))}}var $Y=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.getInitialData=function(t,r){var i=t.edges||t.links,s=t.data||t.nodes,u=t.levels;this.levelModels=[];for(var c=this.levelModels,h=0;h<u.length;h++)null!=u[h].depth&&u[h].depth>=0&&(c[u[h].depth]=new Pp(u[h],this,r));if(s&&i)return Yv(s,i,this,!0,function(t,r){t.wrapMethod("getItemModel",function(t,r){var i=t.parentModel,s=i.getData().getItemLayout(r);if(s){var u=s.depth,c=i.levelModels[u];c&&(t.parentModel=c)}return t}),r.wrapMethod("getItemModel",function(t,r){var i=t.parentModel,s=i.getGraph().getEdgeByIndex(r).node1.getLayout();if(s){var u=s.depth,c=i.levelModels[u];c&&(t.parentModel=c)}return t})}).data},r.prototype.setNodePosition=function(t,r){var i=(this.option.data||this.option.nodes)[t];i.localX=r[0],i.localY=r[1]},r.prototype.getGraph=function(){return this.getData().graph},r.prototype.getEdgeData=function(){return this.getGraph().edgeData},r.prototype.formatTooltip=function(t,r,i){function s(t){return isNaN(t)||null==t}if("edge"===i){var u=this.getDataParams(t,i),c=u.data,h=u.value;return L7("nameValue",{name:c.source+" -- "+c.target,value:h,noValue:s(h)})}var p=this.getGraph().getNodeByIndex(t).getLayout().value,f=this.getDataParams(t,i).data.name;return L7("nameValue",{name:null!=f?f+"":null,value:p,noValue:s(p)})},r.prototype.optionUpdated=function(){},r.prototype.getDataParams=function(r,i){var s=t.prototype.getDataParams.call(this,r,i);if(null==s.value&&"node"===i){var u=this.getGraph().getNodeByIndex(r).getLayout().value;s.value=u}return s},r.type="series.sankey",r.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},r}(kw);function $$(t,r){t.eachSeriesByType("sankey",function(t){var i=t.get("nodeWidth"),s=t.get("nodeGap"),u=function(t,r){return Rt(t.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}(t,r);t.layoutInfo=u;var c=u.width,h=u.height,p=t.getGraph(),f=p.nodes,v=p.edges;(function(t){Sp(t,function(t){var r=Math.max($3(t.outEdges,$2),$3(t.inEdges,$2),t.getValue()||0);t.setLayout({value:r},!0)})})(f);var y=0!==Sm(f,function(t){return 0===t.getLayout().value}).length?0:t.get("layoutIterations");(function(t,r,i,s,u,c,h,p,f){(function(t,r,i,s,u,c,h){for(var p=[],f=[],v=[],y=[],x=0,_=0;_<r.length;_++)p[_]=1;for(var _=0;_<t.length;_++)f[_]=t[_].inEdges.length,0===f[_]&&v.push(t[_]);for(var b=-1;v.length;){for(var w=0;w<v.length;w++){var S=v[w],M=S.hostGraph.data.getRawDataItem(S.dataIndex),A=null!=M.depth&&M.depth>=0;A&&M.depth>b&&(b=M.depth),S.setLayout({depth:A?M.depth:x},!0),"vertical"===c?S.setLayout({dy:i},!0):S.setLayout({dx:i},!0);for(var C=0;C<S.outEdges.length;C++){var T=S.outEdges[C];p[r.indexOf(T)]=0;var I=T.node2,D=t.indexOf(I);0==--f[D]&&0>y.indexOf(I)&&y.push(I)}}++x,v=y,y=[]}for(var _=0;_<p.length;_++)if(1===p[_])throw Error("Sankey is a DAG, the original data has cycle!");var P=b>x-1?b:x-1;h&&"left"!==h&&function(t,r,i,s){if("right"===r){for(var u=[],c=t,h=0;c.length;){for(var p=0;p<c.length;p++){var f=c[p];f.setLayout({skNodeHeight:h},!0);for(var v=0;v<f.inEdges.length;v++){var y=f.inEdges[v];0>u.indexOf(y.node1)&&u.push(y.node1)}}c=u,u=[],++h}Sp(t,function(t){!$J(t)&&t.setLayout({depth:Math.max(0,s-t.getLayout().skNodeHeight)},!0)})}else"justify"===r&&function(t,r){Sp(t,function(t){!$J(t)&&!t.outEdges.length&&t.setLayout({depth:r},!0)})}(t,s)}(t,h,c,P),function(t,r,i){Sp(t,function(t){var s=t.getLayout().depth*r;"vertical"===i?t.setLayout({y:s},!0):t.setLayout({x:s},!0)})}(t,"vertical"===c?(u-i)/P:(s-i)/P,c)})(t,r,i,u,c,p,f),function(t,r,i,s,u,c,h){var p=function(t,r){var i=[],s="vertical"===r?"y":"x",u=Es(t,function(t){return t.getLayout()[s]});return u.keys.sort(function(t,r){return t-r}),Sp(u.keys,function(t){i.push(u.buckets.get(t))}),i}(t,h);(function(t,r,i,s,u,c){var h=1/0;Sp(t,function(t){var r=t.length,p=0;Sp(t,function(t){p+=t.getLayout().value});var f="vertical"===c?(s-(r-1)*u)/p:(i-(r-1)*u)/p;f<h&&(h=f)}),Sp(t,function(t){Sp(t,function(t,r){var i=t.getLayout().value*h;"vertical"===c?(t.setLayout({x:r},!0),t.setLayout({dx:i},!0)):(t.setLayout({y:r},!0),t.setLayout({dy:i},!0))})}),Sp(r,function(t){var r=+t.getValue()*h;t.setLayout({dy:r},!0)})})(p,r,i,s,u,h),$Z(p,u,i,s,h);for(var f=1;c>0;c--)(function(t,r,i){Sp(t.slice().reverse(),function(t){Sp(t,function(t){if(t.outEdges.length){var s=$3(t.outEdges,$K,i)/$3(t.outEdges,$2);if(isNaN(s)){var u=t.outEdges.length;s=u?$3(t.outEdges,$q,i)/u:0}if("vertical"===i){var c=t.getLayout().x+(s-$1(t,i))*r;t.setLayout({x:c},!0)}else{var h=t.getLayout().y+(s-$1(t,i))*r;t.setLayout({y:h},!0)}}})})})(p,f*=.99,h),$Z(p,u,i,s,h),function(t,r,i){Sp(t,function(t){Sp(t,function(t){if(t.inEdges.length){var s=$3(t.inEdges,$Q,i)/$3(t.inEdges,$2);if(isNaN(s)){var u=t.inEdges.length;s=u?$3(t.inEdges,$0,i)/u:0}if("vertical"===i){var c=t.getLayout().x+(s-$1(t,i))*r;t.setLayout({x:c},!0)}else{var h=t.getLayout().y+(s-$1(t,i))*r;t.setLayout({y:h},!0)}}})})}(p,f,h),$Z(p,u,i,s,h)}(t,r,c,u,s,h,p),function(t,r){var i="vertical"===r?"x":"y";Sp(t,function(t){t.outEdges.sort(function(t,r){return t.node2.getLayout()[i]-r.node2.getLayout()[i]}),t.inEdges.sort(function(t,r){return t.node1.getLayout()[i]-r.node1.getLayout()[i]})}),Sp(t,function(t){var r=0,i=0;Sp(t.outEdges,function(t){t.setLayout({sy:r},!0),r+=t.getLayout().dy}),Sp(t.inEdges,function(t){t.setLayout({ty:i},!0),i+=t.getLayout().dy})})}(t,p)})(f,v,i,s,c,h,y,t.get("orient"),t.get("nodeAlign"))})}function $J(t){var r=t.hostGraph.data.getRawDataItem(t.dataIndex);return null!=r.depth&&r.depth>=0}function $Z(t,r,i,s,u){var c="vertical"===u?"x":"y";Sp(t,function(t){t.sort(function(t,r){return t.getLayout()[c]-r.getLayout()[c]});for(var h,p,f,v=0,y=t.length,x="vertical"===u?"dx":"dy",_=0;_<y;_++)(f=v-(p=t[_]).getLayout()[c])>0&&(h=p.getLayout()[c]+f,"vertical"===u?p.setLayout({x:h},!0):p.setLayout({y:h},!0)),v=p.getLayout()[c]+p.getLayout()[x]+r;if((f=v-r-("vertical"===u?s:i))>0){h=p.getLayout()[c]-f,"vertical"===u?p.setLayout({x:h},!0):p.setLayout({y:h},!0),v=h;for(var _=y-2;_>=0;--_)(f=(p=t[_]).getLayout()[c]+p.getLayout()[x]+r-v)>0&&(h=p.getLayout()[c]-f,"vertical"===u?p.setLayout({x:h},!0):p.setLayout({y:h},!0)),v=p.getLayout()[c]}})}function $K(t,r){return $1(t.node2,r)*t.getValue()}function $q(t,r){return $1(t.node2,r)}function $Q(t,r){return $1(t.node1,r)*t.getValue()}function $0(t,r){return $1(t.node1,r)}function $1(t,r){return"vertical"===r?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function $2(t){return t.getValue()}function $3(t,r,i){for(var s=0,u=t.length,c=-1;++c<u;){var h=+r(t[c],i);!isNaN(h)&&(s+=h)}return s}function $5(t){t.eachSeriesByType("sankey",function(t){var r=t.getGraph(),i=r.nodes,s=r.edges;if(i.length){var u=1/0,c=-1/0;Sp(i,function(t){var r=t.getLayout().value;r<u&&(u=r),r>c&&(c=r)}),Sp(i,function(r){var i=new Xe({type:"color",mappingMethod:"linear",dataExtent:[u,c],visual:t.get("color")}).mapValueToVisual(r.getLayout().value),s=r.getModel().get(["itemStyle","color"]);null!=s?(r.setVisual("color",s),r.setVisual("style",{fill:s})):(r.setVisual("color",i),r.setVisual("style",{fill:i}))})}s.length&&Sp(s,function(t){var r=t.getModel().get("lineStyle");t.setVisual("style",r)})})}var $4=function(){function t(){}return t.prototype.getInitialData=function(t,r){var i,s,u=r.getComponent("xAxis",this.get("xAxisIndex")),c=r.getComponent("yAxis",this.get("yAxisIndex")),h=u.get("type"),p=c.get("type");"category"===h?(t.layout="horizontal",i=u.getOrdinalMeta(),s=!0):"category"===p?(t.layout="vertical",i=c.getOrdinalMeta(),s=!0):t.layout=t.layout||"horizontal";var f=["x","y"],v="horizontal"===t.layout?0:1,y=this._baseAxisDim=f[v],x=f[1-v],_=[u,c],b=_[v].get("type"),w=_[1-v].get("type"),S=t.data;if(S&&s){var M=[];Sp(S,function(t,r){var i;Sb(t)?(i=t.slice(),t.unshift(r)):Sb(t.value)?((i=So({},t)).value=i.value.slice(),t.value.unshift(r)):i=t,M.push(i)}),t.data=M}var A=this.defaultValueDimensions,C=[{name:y,type:FI(b),ordinalMeta:i,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:x,type:FI(w),dimsDef:A.slice()}];return G1(this,{coordDimensions:C,dimensionsCount:A.length+1,encodeDefaulter:S_(RS,C,this)})},t.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},t}(),$6=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],i.visualDrawType="stroke",i}return wU(r,t),r.type="series.boxplot",r.dependencies=["xAxis","yAxis","grid"],r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},r}(kw);Sh($6,$4,!0);var $9=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.render=function(t,r,i){var s=t.getData(),u=this.group,c=this._data;!this._data&&u.removeAll();var h="horizontal"===t.get("layout")?1:0;s.diff(c).add(function(t){if(s.hasValue(t)){var r=Je(s.getItemLayout(t),s,t,h,!0);s.setItemGraphicEl(t,r),u.add(r)}}).update(function(t,r){var i=c.getItemGraphicEl(r);if(!s.hasValue(t)){u.remove(i);return}var p=s.getItemLayout(t);i?(DZ(i),Jt(p,i,s,t)):i=Je(p,s,t,h),u.add(i),s.setItemGraphicEl(t,i)}).remove(function(t){var r=c.getItemGraphicEl(t);r&&u.remove(r)}).execute(),this._data=s},r.prototype.remove=function(t){var r=this.group,i=this._data;this._data=null,i&&i.eachItemGraphicEl(function(t){t&&r.remove(t)})},r.type="boxplot",r}(Bu),$8=function(){},$7=function(t){function r(r){var i=t.call(this,r)||this;return i.type="boxplotBoxPath",i}return wU(r,t),r.prototype.getDefaultShape=function(){return new $8},r.prototype.buildPath=function(t,r){var i=r.points,s=0;for(t.moveTo(i[s][0],i[s][1]),s++;s<4;s++)t.lineTo(i[s][0],i[s][1]);for(t.closePath();s<i.length;s++)t.moveTo(i[s][0],i[s][1]),s++,t.lineTo(i[s][0],i[s][1])},r}(IM);function Je(t,r,i,s,u){var c=t.ends,h=new $7({shape:{points:u?function(t,r,i){return Sf(t,function(t){return(t=t.slice())[r]=i.initBaseline,t})}(c,s,t):c}});return Jt(t,h,r,i,u),h}function Jt(t,r,i,s,u){var c=i.hostModel;(0,et[u?"initProps":"updateProps"])(r,{shape:{points:t.ends}},c,s),r.useStyle(i.getItemVisual(s,"style")),r.style.strokeNoScale=!0,r.z2=100;var h=i.getItemModel(s),p=h.getModel("emphasis");DB(r,h),DR(r,p.get("focus"),p.get("blurScope"),p.get("disabled"))}var Jn=Sp;function Jr(t){Jn(function(t){var r=[],i=[];return t.eachSeriesByType("boxplot",function(t){var s=t.getBaseAxis(),u=Su(i,s);u<0&&(u=i.length,i[u]=s,r[u]={axis:s,seriesModels:[]}),r[u].seriesModels.push(t)}),r}(t),function(t){var r=t.seriesModels;if(!!r.length)(function(t){var r,i=t.axis,s=t.seriesModels,u=s.length,c=t.boxWidthList=[],h=t.boxOffsetList=[],p=[];if("category"===i.type)r=i.getBandWidth();else{var f=0;Jn(s,function(t){f=Math.max(f,t.getData().count())});var v=i.getExtent();r=Math.abs(v[1]-v[0])/f}Jn(s,function(t){var i=t.get("boxWidth");!Sb(i)&&(i=[i,i]),p.push([TT(i[0],r)||0,TT(i[1],r)||0])});var y=.8*r-2,x=y/u*.3,_=(y-x*(u-1))/u,b=_/2-y/2;Jn(s,function(t,r){h.push(b),b+=x+_,c.push(Math.min(Math.max(_,p[r][0]),p[r][1]))})})(t),Jn(r,function(r,i){(function(t,r,i){var s=t.coordinateSystem,u=t.getData(),c=i/2,h="horizontal"===t.get("layout")?0:1,p=1-h,f=["x","y"],v=u.mapDimension(f[h]),y=u.mapDimensionsAll(f[p]);if(null!=v&&!(y.length<5))for(var x=0;x<u.count();x++){var _=u.get(v,x),b=T(_,y[2],x),w=T(_,y[0],x),S=T(_,y[1],x),M=T(_,y[3],x),A=T(_,y[4],x),C=[];I(C,S,!1),I(C,M,!0),C.push(w,S,A,M),D(C,w),D(C,A),D(C,b),u.setItemLayout(x,{initBaseline:b[p],ends:C})}function T(t,i,c){var f,v=u.get(i,c),y=[];return y[h]=t,y[p]=v,isNaN(t)||isNaN(v)?f=[NaN,NaN]:(f=s.dataToPoint(y),f[h]+=r),f}function I(t,r,i){var s=r.slice(),u=r.slice();s[h]+=c,u[h]-=c,i?t.push(s,u):t.push(u,s)}function D(t,r){var i=r.slice(),s=r.slice();i[h]-=c,s[h]+=c,t.push(i,s)}})(r,t.boxOffsetList[i],t.boxWidthList[i])})})}var Ji={type:"echarts:boxplot",transform:function(t){var r=t.upstream;r.sourceFormat!==Rg&&LD("");var i=function(t,r){for(var i=[],s=[],u=(r=r||{}).boundIQR,c="none"===u||0===u,h=0;h<t.length;h++){var p=TI(t[h].slice()),f=TV(p,.25),v=TV(p,.5),y=TV(p,.75),x=p[0],_=p[p.length-1],b=(null==u?1.5:u)*(y-f),w=c?x:Math.max(x,f-b),S=c?_:Math.min(_,y+b),M=r.itemNameFormatter,A=Sw(M)?M({value:h}):SS(M)?M.replace("{value}",h+""):h+"";i.push([A,w,f,v,y,S]);for(var C=0;C<p.length;C++){var T=p[C];if(T<w||T>S){var I=[A,T];s.push(I)}}}return{boxData:i,outliers:s}}(r.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:i.boxData},{data:i.outliers}]}},Ja=["color","borderColor"],Jo=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.render=function(t,r,i){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},r.prototype.incrementalPrepareRender=function(t,r,i){this._clear(),this._updateDrawMode(t)},r.prototype.incrementalRender=function(t,r,i,s){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,r):this._incrementalRenderNormal(t,r)},r.prototype.eachRendered=function(t){Be(this._progressiveEls||this.group,t)},r.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(null==this._isLargeDraw||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},r.prototype._renderNormal=function(t){var r=t.getData(),i=this._data,s=this.group,u=r.getLayout("isSimpleBox"),c=t.get("clip",!0),h=t.coordinateSystem,p=h.getArea&&h.getArea();!this._data&&s.removeAll(),r.diff(i).add(function(i){if(r.hasValue(i)){var h=r.getItemLayout(i);if(!(c&&Jc(p,h))){var f=Ju(h,i,!0);Dj(f,{shape:{points:h.ends}},t,i),Jh(f,r,i,u),s.add(f),r.setItemGraphicEl(i,f)}}}).update(function(h,f){var v=i.getItemGraphicEl(f);if(!r.hasValue(h)){s.remove(v);return}var y=r.getItemLayout(h);if(c&&Jc(p,y)){s.remove(v);return}v?(DW(v,{shape:{points:y.ends}},t,h),DZ(v)):v=Ju(y,h),Jh(v,r,h,u),s.add(v),r.setItemGraphicEl(h,v)}).remove(function(t){var r=i.getItemGraphicEl(t);r&&s.remove(r)}).execute(),this._data=r},r.prototype._renderLarge=function(t){this._clear(),Jf(t,this.group);var r=t.get("clip",!0)?Gn(t.coordinateSystem,!1,t):null;r?this.group.setClipPath(r):this.group.removeClipPath()},r.prototype._incrementalRenderNormal=function(t,r){for(var i,s=r.getData(),u=s.getLayout("isSimpleBox");null!=(i=t.next());){var c=Ju(s.getItemLayout(i),i);Jh(c,s,i,u),c.incremental=!0,this.group.add(c),this._progressiveEls.push(c)}},r.prototype._incrementalRenderLarge=function(t,r){Jf(r,this.group,this._progressiveEls,!0)},r.prototype.remove=function(t){this._clear()},r.prototype._clear=function(){this.group.removeAll(),this._data=null},r.type="candlestick",r}(Bu),Js=function(){},Jl=function(t){function r(r){var i=t.call(this,r)||this;return i.type="normalCandlestickBox",i}return wU(r,t),r.prototype.getDefaultShape=function(){return new Js},r.prototype.buildPath=function(t,r){var i=r.points;this.__simpleBox?(t.moveTo(i[4][0],i[4][1]),t.lineTo(i[6][0],i[6][1])):(t.moveTo(i[0][0],i[0][1]),t.lineTo(i[1][0],i[1][1]),t.lineTo(i[2][0],i[2][1]),t.lineTo(i[3][0],i[3][1]),t.closePath(),t.moveTo(i[4][0],i[4][1]),t.lineTo(i[5][0],i[5][1]),t.moveTo(i[6][0],i[6][1]),t.lineTo(i[7][0],i[7][1]))},r}(IM);function Ju(t,r,i){var s=t.ends;return new Jl({shape:{points:i?function(t,r){return Sf(t,function(t){return(t=t.slice())[1]=r.initBaseline,t})}(s,t):s},z2:100})}function Jc(t,r){for(var i=!0,s=0;s<r.ends.length;s++)if(t.contain(r.ends[s][0],r.ends[s][1])){i=!1;break}return i}function Jh(t,r,i,s){var u=r.getItemModel(i);t.useStyle(r.getItemVisual(i,"style")),t.style.strokeNoScale=!0,t.__simpleBox=s,DB(t,u)}var Jd=function(){},Jp=function(t){function r(r){var i=t.call(this,r)||this;return i.type="largeCandlestickBox",i}return wU(r,t),r.prototype.getDefaultShape=function(){return new Jd},r.prototype.buildPath=function(t,r){for(var i=r.points,s=0;s<i.length;)if(this.__sign===i[s++]){var u=i[s++];t.moveTo(u,i[s++]),t.lineTo(u,i[s++])}else s+=3},r}(IM);function Jf(t,r,i,s){var u=t.getData(),c=u.getLayout("largePoints"),h=new Jp({shape:{points:c},__sign:1,ignoreCoarsePointer:!0});r.add(h);var p=new Jp({shape:{points:c},__sign:-1,ignoreCoarsePointer:!0});r.add(p);var f=new Jp({shape:{points:c},__sign:0,ignoreCoarsePointer:!0});r.add(f),Jg(1,h,t,u),Jg(-1,p,t,u),Jg(0,f,t,u),s&&(h.incremental=!0,p.incremental=!0),i&&i.push(h,p)}function Jg(t,r,i,s){var u=i.get(["itemStyle",t>0?"borderColor":"borderColor0"])||i.get(["itemStyle",t>0?"color":"color0"]);0===t&&(u=i.get(["itemStyle","borderColorDoji"]));var c=i.getModel("itemStyle").getItemStyle(Ja);r.useStyle(c),r.style.fill=null,r.style.stroke=u}var Jm=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],i}return wU(r,t),r.prototype.getShadowDim=function(){return"open"},r.prototype.brushSelector=function(t,r,i){var s=r.getItemLayout(t);return s&&i.rect(s.brushRect)},r.type="series.candlestick",r.dependencies=["xAxis","yAxis","grid"],r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},r}(kw);Sh(Jm,$4,!0);function Jv(t){if(!!t&&!!Sb(t.series))Sp(t.series,function(t){SC(t)&&"k"===t.type&&(t.type="candlestick")})}var Jy=["itemStyle","borderColor"],Jx=["itemStyle","borderColor0"],J_=["itemStyle","borderColorDoji"],Jb=["itemStyle","color"],Jw=["itemStyle","color0"],JS={seriesType:"candlestick",plan:kA(),performRawSeries:!0,reset:function(t,r){if(!r.isSeriesFiltered(t))return!t.pipelineContext.large&&{progress:function(t,r){for(var i;null!=(i=t.next());){var s,u,c=r.getItemModel(i),h=r.getItemLayout(i).sign,p=c.getItemStyle();p.fill=(s=h,c.get(s>0?Jb:Jw)),p.stroke=(u=h,c.get(0===u?J_:u>0?Jy:Jx)||p.fill),So(r.ensureUniqueItemVisual(i,"style"),p)}}}}},JM={seriesType:"candlestick",plan:kA(),reset:function(t){var r=t.coordinateSystem,i=t.getData(),s=function(t,r){var i,s=t.getBaseAxis(),u="category"===s.type?s.getBandWidth():Math.abs((i=s.getExtent())[1]-i[0])/r.count(),c=TT(SO(t.get("barMaxWidth"),u),u),h=TT(SO(t.get("barMinWidth"),1),u),p=t.get("barWidth");return null!=p?TT(p,u):Math.max(Math.min(u/2,c),h)}(t,i),u=["x","y"],c=i.getDimensionIndex(i.mapDimension("x")),h=Sf(i.mapDimensionsAll("y"),i.getDimensionIndex,i),p=h[0],f=h[1],v=h[2],y=h[3];if(i.setLayout({candleWidth:s,isSimpleBox:s<=1.3}),!(c<0)&&!(h.length<4))return{progress:t.pipelineContext.large?function(i,s){for(var u,h,x=za(4*i.count),_=0,b=[],w=[],S=s.getStore(),M=!!t.get(["itemStyle","borderColorDoji"]);null!=(h=i.next());){var A=S.get(c,h),C=S.get(p,h),T=S.get(f,h),I=S.get(v,h),D=S.get(y,h);if(isNaN(A)||isNaN(I)||isNaN(D)){x[_++]=NaN,_+=3;continue}x[_++]=JA(S,h,C,T,f,M),b[0]=A,b[1]=I,u=r.dataToPoint(b,null,w),x[_++]=u?u[0]:NaN,x[_++]=u?u[1]:NaN,b[1]=D,u=r.dataToPoint(b,null,w),x[_++]=u?u[1]:NaN}s.setLayout("largePoints",x)}:function(t,i){for(var u,h=i.getStore();null!=(u=t.next());){var x=h.get(c,u),_=h.get(p,u),b=h.get(f,u),w=h.get(v,u),S=h.get(y,u),M=Math.min(_,b),A=Math.max(_,b),C=L(M,x),T=L(A,x),I=L(w,x),D=L(S,x),P=[];k(P,T,0),k(P,C,1),P.push(O(D),O(T),O(I),O(C));var R=!!i.getItemModel(u).get(["itemStyle","borderColorDoji"]);i.setItemLayout(u,{sign:JA(h,u,_,b,f,R),initBaseline:_>b?T[1]:C[1],ends:P,brushRect:function(t,r,i){var u=L(t,i),c=L(r,i);return u[0]-=s/2,c[0]-=s/2,{x:u[0],y:u[1],width:s,height:c[1]-u[1]}}(w,S,x)})}function L(t,i){var s=[];return s[0]=i,s[1]=t,isNaN(i)||isNaN(t)?[NaN,NaN]:r.dataToPoint(s)}function k(t,r,i){var u=r.slice(),c=r.slice();u[0]=OZ(u[0]+s/2,1,!1),c[0]=OZ(c[0]-s/2,1,!0),i?t.push(u,c):t.push(c,u)}function O(t){return t[0]=OZ(t[0],1),t}}}}};function JA(t,r,i,s,u,c){var h;return h=i>s?-1:i<s?1:c?0:r>0?t.get(u,r-1)<=s?1:-1:1}function JC(t,r){var i=r.rippleEffectColor||r.color;t.eachChild(function(t){t.attr({z:r.z,zlevel:r.zlevel,style:{stroke:"stroke"===r.brushType?i:null,fill:"fill"===r.brushType?i:null}})})}var JT=function(t){function r(r,i){var s=t.call(this)||this,u=new H$(r,i),c=new Tf;return s.add(u),s.add(c),s.updateData(r,i),s}return wU(r,t),r.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},r.prototype.startEffectAnimation=function(t){for(var r=t.symbolType,i=t.color,s=t.rippleNumber,u=this.childAt(1),c=0;c<s;c++){var h=B8(r,-1,-1,2,2,i);h.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var p=-c/s*t.period+t.effectOffset;h.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(p).start(),h.animateStyle(!0).when(t.period,{opacity:0}).delay(p).start(),u.add(h)}JC(u,t)},r.prototype.updateEffectAnimation=function(t){for(var r=this._effectCfg,i=this.childAt(1),s=["symbolType","period","rippleScale","rippleNumber"],u=0;u<s.length;u++){var c=s[u];if(r[c]!==t[c]){this.stopEffectAnimation(),this.startEffectAnimation(t);return}}JC(i,t)},r.prototype.highlight=function(){Dx(this)},r.prototype.downplay=function(){D_(this)},r.prototype.getSymbolType=function(){var t=this.childAt(0);return t&&t.getSymbolType()},r.prototype.updateData=function(t,r){var i=this,s=t.hostModel;this.childAt(0).updateData(t,r);var u=this.childAt(1),c=t.getItemModel(r),h=t.getItemVisual(r,"symbol"),p=B7(t.getItemVisual(r,"symbolSize")),f=t.getItemVisual(r,"style"),v=f&&f.fill,y=c.getModel("emphasis");u.setScale(p),u.traverse(function(t){t.setStyle("fill",v)});var x=Ne(t.getItemVisual(r,"symbolOffset"),p);x&&(u.x=x[0],u.y=x[1]);var _=t.getItemVisual(r,"symbolRotate");u.rotation=(_||0)*Math.PI/180||0;var b={};b.showEffectOn=s.get("showEffectOn"),b.rippleScale=c.get(["rippleEffect","scale"]),b.brushType=c.get(["rippleEffect","brushType"]),b.period=1e3*c.get(["rippleEffect","period"]),b.effectOffset=r/t.count(),b.z=s.getShallow("z")||0,b.zlevel=s.getShallow("zlevel")||0,b.symbolType=h,b.color=v,b.rippleEffectColor=c.get(["rippleEffect","color"]),b.rippleNumber=c.get(["rippleEffect","number"]),"render"===b.showEffectOn?(this._effectCfg?this.updateEffectAnimation(b):this.startEffectAnimation(b),this._effectCfg=b):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(t){"emphasis"===t?"render"!==b.showEffectOn&&i.startEffectAnimation(b):"normal"===t&&"render"!==b.showEffectOn&&i.stopEffectAnimation()}),this._effectCfg=b,DR(this,y.get("focus"),y.get("blurScope"),y.get("disabled"))},r.prototype.fadeOut=function(t){t&&t()},r}(Tf),JE=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.init=function(){this._symbolDraw=new HQ(JT)},r.prototype.render=function(t,r,i){var s=t.getData(),u=this._symbolDraw;u.updateData(s,{clipShape:this._getClipShape(t)}),this.group.add(u.group)},r.prototype._getClipShape=function(t){var r=t.coordinateSystem,i=r&&r.getArea&&r.getArea();return t.get("clip",!0)?i:null},r.prototype.updateTransform=function(t,r,i){var s=t.getData();this.group.dirty();var u=Gp("").reset(t,r,i);u.progress&&u.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout()},r.prototype._updateGroupTransform=function(t){var r=t.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=MJ(r.getRoamTransform()),this.group.decomposeTransform())},r.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0)},r.type="effectScatter",r}(Bu),JI=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.hasSymbolVisual=!0,i}return wU(r,t),r.prototype.getInitialData=function(t,r){return Fq(null,this,{useEncodeDefaulter:!0})},r.prototype.brushSelector=function(t,r,i){return i.point(r.getItemLayout(t))},r.type="series.effectScatter",r.dependencies=["grid","polar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},r}(kw),JD=function(t){function r(r,i,s){var u=t.call(this)||this;return u.add(u.createLine(r,i,s)),u._updateEffectSymbol(r,i),u}return wU(r,t),r.prototype.createLine=function(t,r,i){return new X7(t,r,i)},r.prototype._updateEffectSymbol=function(t,r){var i=t.getItemModel(r).getModel("effect"),s=i.get("symbolSize"),u=i.get("symbol");!Sb(s)&&(s=[s,s]);var c=t.getItemVisual(r,"style"),h=i.get("color")||c&&c.stroke,p=this.childAt(1);if(this._symbolType!==u&&(this.remove(p),(p=B8(u,-.5,-.5,1,1,h)).z2=100,p.culling=!0,this.add(p)),!!p)p.setStyle("shadowColor",h),p.setStyle(i.getItemStyle(["color"])),p.scaleX=s[0],p.scaleY=s[1],p.setColor(h),this._symbolType=u,this._symbolScale=s,this._updateEffectAnimation(t,i,r)},r.prototype._updateEffectAnimation=function(t,r,i){var s=this.childAt(1);if(!!s){var u=t.getItemLayout(i),c=1e3*r.get("period"),h=r.get("loop"),p=r.get("roundTrip"),f=r.get("constantSpeed"),v=Sk(r.get("delay"),function(r){return r/t.count()*c/3});if(s.ignore=!0,this._updateAnimationPoints(s,u),f>0&&(c=this._getLineLength(s)/f*1e3),c!==this._period||h!==this._loop||p!==this._roundTrip){s.stopAnimation();var y=void 0;y=Sw(v)?v(i):v,s.__t>0&&(y=-c*s.__t),this._animateSymbol(s,c,y,h,p)}this._period=c,this._loop=h,this._roundTrip=p}},r.prototype._animateSymbol=function(t,r,i,s,u){if(r>0){t.__t=0;var c=this,h=t.animate("",s).when(u?2*r:r,{__t:u?2:1}).delay(i).during(function(){c._updateSymbolPosition(t)});!s&&h.done(function(){c.remove(t)}),h.start()}},r.prototype._getLineLength=function(t){return Ms(t.__p1,t.__cp1)+Ms(t.__cp1,t.__p2)},r.prototype._updateAnimationPoints=function(t,r){t.__p1=r[0],t.__p2=r[1],t.__cp1=r[2]||[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]},r.prototype.updateData=function(t,r,i){this.childAt(0).updateData(t,r,i),this._updateEffectSymbol(t,r)},r.prototype._updateSymbolPosition=function(t){var r=t.__p1,i=t.__p2,s=t.__cp1,u=t.__t<1?t.__t:2-t.__t,c=[t.x,t.y],h=c.slice();c[0]=AD(r[0],s[0],i[0],u),c[1]=AD(r[1],s[1],i[1],u);var p=t.__t<1?AP(r[0],s[0],i[0],u):AP(i[0],s[0],r[0],1-u),f=t.__t<1?AP(r[1],s[1],i[1],u):AP(i[1],s[1],r[1],1-u);t.rotation=-Math.atan2(f,p)-Math.PI/2,("line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)&&(void 0!==t.__lastT&&t.__lastT<t.__t?(t.scaleY=1.05*Ms(h,c),1===u&&(c[0]=h[0]+(c[0]-h[0])/2,c[1]=h[1]+(c[1]-h[1])/2)):1===t.__lastT?t.scaleY=2*Ms(r,c):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=c[0],t.y=c[1]},r.prototype.updateLayout=function(t,r){this.childAt(0).updateLayout(t,r);var i=t.getItemModel(r).getModel("effect");this._updateEffectAnimation(t,i,r)},r}(Tf),JP=function(t){function r(r,i,s){var u=t.call(this)||this;return u._createPolyline(r,i,s),u}return wU(r,t),r.prototype._createPolyline=function(t,r,i){var s=new Oh({shape:{points:t.getItemLayout(r)}});this.add(s),this._updateCommonStl(t,r,i)},r.prototype.updateData=function(t,r,i){var s=t.hostModel;DW(this.childAt(0),{shape:{points:t.getItemLayout(r)}},s,r),this._updateCommonStl(t,r,i)},r.prototype._updateCommonStl=function(t,r,i){var s=this.childAt(0),u=t.getItemModel(r),c=i&&i.emphasisLineStyle,h=i&&i.focus,p=i&&i.blurScope,f=i&&i.emphasisDisabled;if(!i||t.hasItemOption){var v=u.getModel("emphasis");c=v.getModel("lineStyle").getLineStyle(),f=v.get("disabled"),h=v.get("focus"),p=v.get("blurScope")}s.useStyle(t.getItemVisual(r,"style")),s.style.fill=null,s.style.strokeNoScale=!0,s.ensureState("emphasis").style=c,DR(this,h,p,f)},r.prototype.updateLayout=function(t,r){this.childAt(0).setShape("points",t.getItemLayout(r))},r}(Tf),JR=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r._lastFrame=0,r._lastFramePercent=0,r}return wU(r,t),r.prototype.createLine=function(t,r,i){return new JP(t,r,i)},r.prototype._updateAnimationPoints=function(t,r){this._points=r;for(var i=[0],s=0,u=1;u<r.length;u++)s+=Ms(r[u-1],r[u]),i.push(s);if(0===s){this._length=0;return}for(var u=0;u<i.length;u++)i[u]/=s;this._offsets=i,this._length=s},r.prototype._getLineLength=function(){return this._length},r.prototype._updateSymbolPosition=function(t){var r,i,s=t.__t<1?t.__t:2-t.__t,u=this._points,c=this._offsets,h=u.length;if(!!c){var p=this._lastFrame;if(s<this._lastFramePercent){;for(i=Math.min(p+1,h-1);i>=0&&!(c[i]<=s);i--);i=Math.min(i,h-2)}else{for(i=p;i<h&&!(c[i]>s);i++);i=Math.min(i-1,h-2)}var f=(s-c[i])/(c[i+1]-c[i]),v=u[i],y=u[i+1];t.x=v[0]*(1-f)+f*y[0],t.y=v[1]*(1-f)+f*y[1];var x=t.__t<1?y[0]-v[0]:v[0]-y[0],_=t.__t<1?y[1]-v[1]:v[1]-y[1];t.rotation=-Math.atan2(_,x)-Math.PI/2,this._lastFrame=i,this._lastFramePercent=s,t.ignore=!1}},r}(JD),JL=function(){this.polyline=!1,this.curveness=0,this.segs=[]},Jk=function(t){function r(r){var i=t.call(this,r)||this;return i._off=0,i.hoverDataIdx=-1,i}return wU(r,t),r.prototype.reset=function(){this.notClear=!1,this._off=0},r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new JL},r.prototype.buildPath=function(t,r){var i,s=r.segs,u=r.curveness;if(r.polyline)for(i=this._off;i<s.length;){var c=s[i++];if(c>0){t.moveTo(s[i++],s[i++]);for(var h=1;h<c;h++)t.lineTo(s[i++],s[i++])}}else for(i=this._off;i<s.length;){var p=s[i++],f=s[i++],v=s[i++],y=s[i++];if(t.moveTo(p,f),u>0){var x=(p+v)/2-(f-y)*u,_=(f+y)/2-(v-p)*u;t.quadraticCurveTo(x,_,v,y)}else t.lineTo(v,y)}this.incremental&&(this._off=i,this.notClear=!0)},r.prototype.findDataIndex=function(t,r){var i=this.shape,s=i.segs,u=i.curveness,c=this.style.lineWidth;if(i.polyline){for(var h=0,p=0;p<s.length;){var f=s[p++];if(f>0){for(var v=s[p++],y=s[p++],x=1;x<f;x++){var _=s[p++],b=s[p++];if(Ic(v,y,_,b,c,t,r))return h}}h++}}else{for(var h=0,p=0;p<s.length;){var v=s[p++],y=s[p++],_=s[p++],b=s[p++];if(u>0){var w=(v+_)/2-(y-b)*u,S=(y+b)/2-(_-v)*u;if(Ih(v,y,w,S,_,b,c,t,r))return h}else if(Ic(v,y,_,b,c,t,r))return h;h++}}return -1},r.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),s=this.getBoundingRect();return(t=i[0],r=i[1],s.contain(t,r))?(this.hoverDataIdx=this.findDataIndex(t,r))>=0:(this.hoverDataIdx=-1,!1)},r.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape.segs,i=1/0,s=1/0,u=-1/0,c=-1/0,h=0;h<r.length;){var p=r[h++],f=r[h++];i=Math.min(p,i),u=Math.max(p,u),s=Math.min(f,s),c=Math.max(f,c)}t=this._rect=new M4(i,s,u,c)}return t},r}(IM),JO=function(){function t(){this.group=new Tf}return t.prototype.updateData=function(t){this._clear();var r=this._create();r.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(r,t)},t.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},t.prototype.incrementalUpdate=function(t,r){var i=this._newAdded[0],s=r.getLayout("linesPoints"),u=i&&i.shape.segs;if(u&&u.length<2e4){var c=u.length,h=new Float32Array(c+s.length);h.set(u),h.set(s,c),i.setShape({segs:h})}else{this._newAdded=[];var p=this._create();p.incremental=!0,p.setShape({segs:s}),this._setCommon(p,r),p.__startIndex=t.start}},t.prototype.remove=function(){this._clear()},t.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},t.prototype._create=function(){var t=new Jk({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},t.prototype._setCommon=function(t,r,i){var s=r.hostModel;t.setShape({polyline:s.get("polyline"),curveness:s.get(["lineStyle","curveness"])}),t.useStyle(s.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var u=r.getVisual("style");u&&u.stroke&&t.setStyle("stroke",u.stroke),t.setStyle("fill",null);var c=I1(t);c.seriesIndex=s.seriesIndex,t.on("mousemove",function(r){c.dataIndex=null;var i=t.hoverDataIdx;i>0&&(c.dataIndex=i+t.__startIndex)})},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),JB={seriesType:"lines",plan:kA(),reset:function(t){var r=t.coordinateSystem;if(!!r){var i=t.get("polyline"),s=t.pipelineContext.large;return{progress:function(u,c){var h=[];if(s){var p=void 0,f=u.end-u.start;if(i){for(var v=0,y=u.start;y<u.end;y++)v+=t.getLineCoordsCount(y);p=new Float32Array(f+2*v)}else p=new Float32Array(4*f);for(var x=0,_=[],y=u.start;y<u.end;y++){var b=t.getLineCoords(y,h);i&&(p[x++]=b);for(var w=0;w<b;w++)_=r.dataToPoint(h[w],!1,_),p[x++]=_[0],p[x++]=_[1]}c.setLayout("linesPoints",p)}else for(var y=u.start;y<u.end;y++){var S=c.getItemModel(y),b=t.getLineCoords(y,h),M=[];if(i)for(var A=0;A<b;A++)M.push(r.dataToPoint(h[A]));else{M[0]=r.dataToPoint(h[0]),M[1]=r.dataToPoint(h[1]);var C=S.get(["lineStyle","curveness"]);+C&&(M[2]=[(M[0][0]+M[1][0])/2-(M[0][1]-M[1][1])*C,(M[0][1]+M[1][1])/2-(M[1][0]-M[0][0])*C])}c.setItemLayout(y,M)}}}}}},JN=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.render=function(t,r,i){var s=t.getData(),u=this._updateLineDraw(s,t),c=t.get("zlevel"),h=t.get(["effect","trailLength"]),p=i.getZr(),f="svg"===p.painter.getType();!f&&p.painter.getLayer(c).clear(!0),null!=this._lastZlevel&&!f&&p.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&h>0&&(f||p.configLayer(c,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(h/10+.9,1),0)})),u.updateData(s);var v=t.get("clip",!0)&&Gn(t.coordinateSystem,!1,t);v?this.group.setClipPath(v):this.group.removeClipPath(),this._lastZlevel=c,this._finished=!0},r.prototype.incrementalPrepareRender=function(t,r,i){var s=t.getData();this._updateLineDraw(s,t).incrementalPrepareUpdate(s),this._clearLayer(i),this._finished=!1},r.prototype.incrementalRender=function(t,r,i){this._lineDraw.incrementalUpdate(t,r.getData()),this._finished=t.end===r.getData().count()},r.prototype.eachRendered=function(t){this._lineDraw&&this._lineDraw.eachRendered(t)},r.prototype.updateTransform=function(t,r,i){var s=t.getData(),u=t.pipelineContext;if(!this._finished||u.large||u.progressiveRender)return{update:!0};var c=JB.reset(t,r,i);c.progress&&c.progress({start:0,end:s.count(),count:s.count()},s),this._lineDraw.updateLayout(),this._clearLayer(i)},r.prototype._updateLineDraw=function(t,r){var i=this._lineDraw,s=this._showEffect(r),u=!!r.get("polyline"),c=r.pipelineContext.large;return(!i||s!==this._hasEffet||u!==this._isPolyline||c!==this._isLargeDraw)&&(i&&i.remove(),i=this._lineDraw=c?new JO:new Ye(u?s?JR:JP:s?JD:X7),this._hasEffet=s,this._isPolyline=u,this._isLargeDraw=c),this.group.add(i.group),i},r.prototype._showEffect=function(t){return!!t.get(["effect","show"])},r.prototype._clearLayer=function(t){var r=t.getZr();"svg"!==r.painter.getType()&&null!=this._lastZlevel&&r.painter.getLayer(this._lastZlevel).clear(!0)},r.prototype.remove=function(t,r){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(r)},r.prototype.dispose=function(t,r){this.remove(t,r)},r.type="lines",r}(Bu),JF="undefined"==typeof Uint32Array?Array:Uint32Array,Jz="undefined"==typeof Float64Array?Array:Float64Array;function JU(t){var r=t.data;r&&r[0]&&r[0][0]&&r[0][0].coord&&(t.data=Sf(r,function(t){var r={coords:[t[0].coord,t[1].coord]};return t[0].name&&(r.fromName=t[0].name),t[1].name&&(r.toName=t[1].name),Sa([r,t[0],t[1]])}))}var JH=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.visualStyleAccessPath="lineStyle",i.visualDrawType="stroke",i}return wU(r,t),r.prototype.init=function(r){r.data=r.data||[],JU(r);var i=this._processFlatCoordsArray(r.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(r.data=new Float32Array(i.count)),t.prototype.init.apply(this,arguments)},r.prototype.mergeOption=function(r){if(JU(r),r.data){var i=this._processFlatCoordsArray(r.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(r.data=new Float32Array(i.count))}t.prototype.mergeOption.apply(this,arguments)},r.prototype.appendData=function(t){var r=this._processFlatCoordsArray(t.data);r.flatCoords&&(this._flatCoords?(this._flatCoords=S$(this._flatCoords,r.flatCoords),this._flatCoordsOffset=S$(this._flatCoordsOffset,r.flatCoordsOffset)):(this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset),t.data=new Float32Array(r.count)),this.getRawData().appendData(t.data)},r.prototype._getCoordsFromItemModel=function(t){var r=this.getData().getItemModel(t),i=r.option instanceof Array?r.option:r.getShallow("coords");return i},r.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[2*t+1]:this._getCoordsFromItemModel(t).length},r.prototype.getLineCoords=function(t,r){if(this._flatCoordsOffset){for(var i=this._flatCoordsOffset[2*t],s=this._flatCoordsOffset[2*t+1],u=0;u<s;u++)r[u]=r[u]||[],r[u][0]=this._flatCoords[i+2*u],r[u][1]=this._flatCoords[i+2*u+1];return s}for(var c=this._getCoordsFromItemModel(t),u=0;u<c.length;u++)r[u]=r[u]||[],r[u][0]=c[u][0],r[u][1]=c[u][1];return c.length},r.prototype._processFlatCoordsArray=function(t){var r=0;if(this._flatCoords&&(r=this._flatCoords.length),SA(t[0])){for(var i=t.length,s=new JF(i),u=new Jz(i),c=0,h=0,p=0,f=0;f<i;){p++;var v=t[f++];s[h++]=c+r,s[h++]=v;for(var y=0;y<v;y++){var x=t[f++],_=t[f++];u[c++]=x,u[c++]=_}}return{flatCoordsOffset:new Uint32Array(s.buffer,0,h),flatCoords:u,count:p}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},r.prototype.getInitialData=function(t,r){var i=new FV(["value"],this);return i.hasItemOption=!1,i.initData(t.data,[],function(t,r,s,u){if(t instanceof Array)return NaN;i.hasItemOption=!0;var c=t.value;if(null!=c)return c instanceof Array?c[u]:c}),i},r.prototype.formatTooltip=function(t,r,i){var s=this.getData().getItemModel(t),u=s.get("name");if(u)return u;var c=s.get("fromName"),h=s.get("toName"),p=[];return null!=c&&p.push(c),null!=h&&p.push(h),L7("nameValue",{name:p.join(" > ")})},r.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},r.prototype.getProgressive=function(){var t=this.option.progressive;return null==t?this.option.large?1e4:this.get("progressive"):t},r.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?2e4:this.get("progressiveThreshold"):t},r.prototype.getZLevelKey=function(){var t=this.getModel("effect"),r=t.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:t.get("show")&&r>0?r+"":""},r.type="series.lines",r.dependencies=["grid","polar","geo","calendar"],r.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},r}(kw);function JG(t){return!(t instanceof Array)&&(t=[t,t]),t}let JV={seriesType:"lines",reset:function(t){var r=JG(t.get("symbol")),i=JG(t.get("symbolSize")),s=t.getData();return s.setVisual("fromSymbol",r&&r[0]),s.setVisual("toSymbol",r&&r[1]),s.setVisual("fromSymbolSize",i&&i[0]),s.setVisual("toSymbolSize",i&&i[1]),{dataEach:s.hasItemOption?function(t,r){var i=t.getItemModel(r),s=JG(i.getShallow("symbol",!0)),u=JG(i.getShallow("symbolSize",!0));s[0]&&t.setItemVisual(r,"fromSymbol",s[0]),s[1]&&t.setItemVisual(r,"toSymbol",s[1]),u[0]&&t.setItemVisual(r,"fromSymbolSize",u[0]),u[1]&&t.setItemVisual(r,"toSymbolSize",u[1])}:null}}};var JW=function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=wK.createCanvas();this.canvas=t}return t.prototype.update=function(t,r,i,s,u,c){var h=this._getBrush(),p=this._getGradient(u,"inRange"),f=this._getGradient(u,"outOfRange"),v=this.pointSize+this.blurSize,y=this.canvas,x=y.getContext("2d"),_=t.length;y.width=r,y.height=i;for(var b=0;b<_;++b){var w=t[b],S=w[0],M=w[1],A=s(w[2]);x.globalAlpha=A,x.drawImage(h,S-v,M-v)}if(!y.width||!y.height)return y;for(var C=x.getImageData(0,0,y.width,y.height),T=C.data,I=0,D=T.length,P=this.minOpacity,R=this.maxOpacity-P;I<D;){var A=T[I+3]/256,L=4*Math.floor(255*A);if(A>0){var k=c(A)?p:f;A>0&&(A=A*R+P),T[I++]=k[L],T[I++]=k[L+1],T[I++]=k[L+2],T[I++]=k[L+3]*A*256}else I+=4}return x.putImageData(C,0,0),y},t.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=wK.createCanvas()),r=this.pointSize+this.blurSize,i=2*r;t.width=i,t.height=i;var s=t.getContext("2d");return s.clearRect(0,0,i,i),s.shadowOffsetX=i,s.shadowBlur=this.blurSize,s.shadowColor="#000",s.beginPath(),s.arc(-r,r,this.pointSize,0,2*Math.PI,!0),s.closePath(),s.fill(),t},t.prototype._getGradient=function(t,r){for(var i=this._gradientPixels,s=i[r]||(i[r]=new Uint8ClampedArray(1024)),u=[0,0,0,0],c=0,h=0;h<256;h++)t[r](h/255,!0,u),s[c++]=u[0],s[c++]=u[1],s[c++]=u[2],s[c++]=u[3];return s},t}();function Jj(t){var r=t.dimensions;return"lng"===r[0]&&"lat"===r[1]}var JX=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.render=function(t,r,i){r.eachComponent("visualMap",function(r){r.eachTargetSeries(function(i){i===t&&(s=r)})});this._progressiveEls=null,this.group.removeAll();var s,u=t.coordinateSystem;"cartesian2d"===u.type||"calendar"===u.type?this._renderOnCartesianAndCalendar(t,i,0,t.getData().count()):Jj(u)&&this._renderOnGeo(u,t,s,i)},r.prototype.incrementalPrepareRender=function(t,r,i){this.group.removeAll()},r.prototype.incrementalRender=function(t,r,i,s){var u=r.coordinateSystem;u&&(Jj(u)?this.render(r,i,s):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(r,s,t.start,t.end,!0)))},r.prototype.eachRendered=function(t){Be(this._progressiveEls||this.group,t)},r.prototype._renderOnCartesianAndCalendar=function(t,r,i,s,u){var c,h,p,f,v=t.coordinateSystem,y=Gr(v,"cartesian2d");if(y){var x=v.getAxis("x"),_=v.getAxis("y");c=x.getBandWidth()+.5,h=_.getBandWidth()+.5,p=x.scale.getExtent(),f=_.scale.getExtent()}for(var b=this.group,w=t.getData(),S=t.getModel(["emphasis","itemStyle"]).getItemStyle(),M=t.getModel(["blur","itemStyle"]).getItemStyle(),A=t.getModel(["select","itemStyle"]).getItemStyle(),C=t.get(["itemStyle","borderRadius"]),T=D1(t),I=t.getModel("emphasis"),D=I.get("focus"),P=I.get("blurScope"),R=I.get("disabled"),L=y?[w.mapDimension("x"),w.mapDimension("y"),w.mapDimension("value")]:[w.mapDimension("time"),w.mapDimension("value")],k=i;k<s;k++){var O=void 0,B=w.getItemVisual(k,"style");if(y){var N=w.get(L[0],k),F=w.get(L[1],k);if(isNaN(w.get(L[2],k))||isNaN(N)||isNaN(F)||N<p[0]||N>p[1]||F<f[0]||F>f[1])continue;var z=v.dataToPoint([N,F]);O=new IF({shape:{x:z[0]-c/2,y:z[1]-h/2,width:c,height:h},style:B})}else{if(isNaN(w.get(L[1],k)))continue;O=new IF({z2:1,shape:v.dataToRect([w.get(L[0],k)]).contentShape,style:B})}if(w.hasItemOption){var U=w.getItemModel(k),H=U.getModel("emphasis");S=H.getModel("itemStyle").getItemStyle(),M=U.getModel(["blur","itemStyle"]).getItemStyle(),A=U.getModel(["select","itemStyle"]).getItemStyle(),C=U.get(["itemStyle","borderRadius"]),D=H.get("focus"),P=H.get("blurScope"),R=H.get("disabled"),T=D1(U)}O.shape.r=C;var G=t.getRawValue(k),V="-";G&&null!=G[2]&&(V=G[2]+""),D0(O,T,{labelFetcher:t,labelDataIndex:k,defaultOpacity:B.opacity,defaultText:V}),O.ensureState("emphasis").style=S,O.ensureState("blur").style=M,O.ensureState("select").style=A,DR(O,D,P,R),O.incremental=u,u&&(O.states.emphasis.hoverLayer=!0),b.add(O),w.setItemGraphicEl(k,O),this._progressiveEls&&this._progressiveEls.push(O)}},r.prototype._renderOnGeo=function(t,r,i,s){var u,c,h,p,f,v,y,x,_,b=i.targetVisuals.inRange,w=i.targetVisuals.outOfRange,S=r.getData(),M=this._hmLayer||this._hmLayer||new JW;M.blurSize=r.get("blurSize"),M.pointSize=r.get("pointSize"),M.minOpacity=r.get("minOpacity"),M.maxOpacity=r.get("maxOpacity");var A=t.getViewRect().clone(),C=t.getRoamTransform();A.applyTransform(C);var T=Math.max(A.x,0),I=Math.max(A.y,0),D=Math.min(A.width+A.x,s.getWidth()),P=Math.min(A.height+A.y,s.getHeight()),R=D-T,L=P-I,k=[S.mapDimension("lng"),S.mapDimension("lat"),S.mapDimension("value")],O=S.mapArray(k,function(r,i,s){var u=t.dataToPoint([r,i]);return u[0]-=T,u[1]-=I,u.push(s),u}),B=i.getExtent();var N="visualMap.continuous"===i.type?(u=B,c=i.option.range,h=u[1]-u[0],c=[(c[0]-u[0])/h,(c[1]-u[0])/h],function(t){return t>=c[0]&&t<=c[1]}):(p=B,f=i.getPieceList(),v=i.option.selected,y=p[1]-p[0],x=(f=Sf(f,function(t){return{interval:[(t.interval[0]-p[0])/y,(t.interval[1]-p[0])/y]}})).length,_=0,function(t){var r;for(r=_;r<x;r++){var i=f[r].interval;if(i[0]<=t&&t<=i[1]){_=r;break}}if(r===x)for(r=_-1;r>=0;r--){var i=f[r].interval;if(i[0]<=t&&t<=i[1]){_=r;break}}return r>=0&&r<x&&v[r]});M.update(O,R,L,b.color.getNormalizer(),{inRange:b.color.getColorMapper(),outOfRange:w.color.getColorMapper()},N);var F=new ID({style:{width:R,height:L,x:T,y:I,image:M.canvas},silent:!0});this.group.add(F)},r.type="heatmap",r}(Bu),JY=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.getInitialData=function(t,r){return Fq(null,this,{generateCoord:"value"})},r.prototype.preventIncremental=function(){var t=RG.get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},r.type="series.heatmap",r.dependencies=["grid","geo","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},r}(kw),J$=["itemStyle","borderWidth"],JJ=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],JZ=new k$,JK=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.render=function(t,r,i){var s=this.group,u=t.getData(),c=this._data,h=t.coordinateSystem,p=h.getBaseAxis().isHorizontal(),f=h.master.getRect(),v={ecSize:{width:i.getWidth(),height:i.getHeight()},seriesModel:t,coordSys:h,coordSysExtent:[[f.x,f.x+f.width],[f.y,f.y+f.height]],isHorizontal:p,valueDim:JJ[+p],categoryDim:JJ[1-+p]};u.diff(c).add(function(t){if(!!u.hasValue(t)){var r=J4(u,t),i=Jq(u,t,r,v),c=J8(u,v,i);u.setItemGraphicEl(t,c),s.add(c),Zr(c,v,i)}}).update(function(t,r){var i=c.getItemGraphicEl(r);if(!u.hasValue(t)){s.remove(i);return}var h=J4(u,t),p=Jq(u,t,h,v),f=Ze(u,p);i&&f!==i.__pictorialShapeStr&&(s.remove(i),u.setItemGraphicEl(t,null),i=null),i?function(t,r,i){var s=i.animationModel,u=i.dataIndex;DW(t.__pictorialBundle,{x:i.bundlePosition[0],y:i.bundlePosition[1]},s,u),i.symbolRepeat?J1(t,r,i,!0):J2(t,r,i,!0),J3(t,i,!0),J5(t,r,i,!0)}(i,v,p):i=J8(u,v,p,!0),u.setItemGraphicEl(t,i),i.__pictorialSymbolMeta=p,s.add(i),Zr(i,v,p)}).remove(function(t){var r=c.getItemGraphicEl(t);r&&J7(c,t,r.__pictorialSymbolMeta.animationModel,r)}).execute();var y=t.get("clip",!0)?Gn(t.coordinateSystem,!1,t):null;return y?s.setClipPath(y):s.removeClipPath(),this._data=u,this.group},r.prototype.remove=function(t,r){var i=this.group,s=this._data;t.get("animation")?s&&s.eachItemGraphicEl(function(r){J7(s,I1(r).dataIndex,t,r)}):i.removeAll()},r.type="pictorialBar",r}(Bu);function Jq(t,r,i,s){var u=t.getItemLayout(r),c=i.get("symbolRepeat"),h=i.get("symbolClip"),p=i.get("symbolPosition")||"start",f=(i.get("symbolRotate")||0)*Math.PI/180||0,v=i.get("symbolPatternSize")||2,y=i.isAnimationEnabled(),x={dataIndex:r,layout:u,itemModel:i,symbolType:t.getItemVisual(r,"symbol")||"circle",style:t.getItemVisual(r,"style"),symbolClip:h,symbolRepeat:c,symbolRepeatDirection:i.get("symbolRepeatDirection"),symbolPatternSize:v,rotation:f,animationModel:y?i:null,hoverScale:y&&i.get(["emphasis","scale"]),z2:i.getShallow("z",!0)||0};(function(t,r,i,s,u){var c,h=s.valueDim,p=t.get("symbolBoundingData"),f=s.coordSys.getOtherAxis(s.coordSys.getBaseAxis()),v=f.toGlobalCoord(f.dataToCoord(0)),y=1-+(i[h.wh]<=0);if(Sb(p)){var x=[JQ(f,p[0])-v,JQ(f,p[1])-v];x[1]<x[0]&&x.reverse(),c=x[y]}else c=null!=p?JQ(f,p)-v:r?s.coordSysExtent[h.index][y]-v:i[h.wh];u.boundingLength=c,r&&(u.repeatCutLength=i[h.wh]),u.pxSign=c>0?1:-1})(i,c,u,s,x),function(t,r,i,s,u,c,h,p,f,v){var y,x=f.valueDim,_=f.categoryDim,b=Math.abs(i[_.wh]),w=t.getItemVisual(r,"symbolSize");(y=Sb(w)?w.slice():null==w?["100%","100%"]:[w,w])[_.index]=TT(y[_.index],b),y[x.index]=TT(y[x.index],s?b:Math.abs(c)),v.symbolSize=y;var S=v.symbolScale=[y[0]/p,y[1]/p];S[x.index]*=(f.isHorizontal?-1:1)*h}(t,r,u,c,h,x.boundingLength,x.pxSign,v,s,x),function(t,r,i,s,u){var c=t.get(J$)||0;c&&(JZ.attr({scaleX:r[0],scaleY:r[1],rotation:i}),JZ.updateTransform(),c/=JZ.getLineScale(),c*=r[s.valueDim.index]),u.valueLineWidth=c||0}(i,x.symbolScale,f,s,x);var _=x.symbolSize,b=Ne(i.get("symbolOffset"),_);return function(t,r,i,s,u,c,h,p,f,v,y,x){var _=y.categoryDim,b=y.valueDim,w=x.pxSign,S=Math.max(r[b.index]+p,0),M=S;if(s){var A=Math.abs(f),C=Sk(t.get("symbolMargin"),"15%")+"",T=!1;C.lastIndexOf("!")===C.length-1&&(T=!0,C=C.slice(0,C.length-1));var I=TT(C,r[b.index]),D=Math.max(S+2*I,0),P=T?0:2*I,R=TX(s),L=R?s:Zi((A+P)/D);I=(A-L*S)/2/(T?L:Math.max(L-1,1)),D=S+2*I,P=T?0:2*I,!R&&"fixed"!==s&&(L=v?Zi((Math.abs(v)+P)/D):0),M=L*D-P,x.repeatTimes=L,x.symbolMargin=I}var k=M/2*w,O=x.pathPosition=[];O[_.index]=i[_.wh]/2,O[b.index]="start"===h?k:"end"===h?f-k:f/2,c&&(O[0]+=c[0],O[1]+=c[1]);var B=x.bundlePosition=[];B[_.index]=i[_.xy],B[b.index]=i[b.xy];var N=x.barRectShape=So({},i);N[b.wh]=w*Math.max(Math.abs(i[b.wh]),Math.abs(O[b.index]+k)),N[_.wh]=i[_.wh];var F=x.clipShape={};F[_.xy]=-i[_.xy],F[_.wh]=y.ecSize[_.wh],F[b.xy]=0,F[b.wh]=i[b.wh]}(i,_,u,c,h,b,p,x.valueLineWidth,x.boundingLength,x.repeatCutLength,s,x),x}function JQ(t,r){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(r)))}function J0(t){var r=t.symbolPatternSize,i=B8(t.symbolType,-r/2,-r/2,r,r);return i.attr({culling:!0}),"image"!==i.type&&i.setStyle({strokeNoScale:!0}),i}function J1(t,r,i,s){var u=t.__pictorialBundle,c=i.symbolSize,h=i.valueLineWidth,p=i.pathPosition,f=r.valueDim,v=i.repeatTimes||0,y=0,x=c[r.valueDim.index]+h+2*i.symbolMargin;for(Zt(t,function(t){t.__pictorialAnimationIndex=y,t.__pictorialRepeatTimes=v,y<v?Zn(t,null,w(y),i,s):Zn(t,null,{scaleX:0,scaleY:0},i,s,function(){u.remove(t)}),y++});y<v;y++){var _=J0(i);_.__pictorialAnimationIndex=y,_.__pictorialRepeatTimes=v,u.add(_);var b=w(y);Zn(_,{x:b.x,y:b.y,scaleX:0,scaleY:0},{scaleX:b.scaleX,scaleY:b.scaleY,rotation:b.rotation},i,s)}function w(t){var r=p.slice(),s=i.pxSign,u=t;return("start"===i.symbolRepeatDirection?s>0:s<0)&&(u=v-1-t),r[f.index]=x*(u-v/2+.5)+p[f.index],{x:r[0],y:r[1],scaleX:i.symbolScale[0],scaleY:i.symbolScale[1],rotation:i.rotation}}}function J2(t,r,i,s){var u=t.__pictorialBundle,c=t.__pictorialMainPath;c?Zn(c,null,{x:i.pathPosition[0],y:i.pathPosition[1],scaleX:i.symbolScale[0],scaleY:i.symbolScale[1],rotation:i.rotation},i,s):(c=t.__pictorialMainPath=J0(i),u.add(c),Zn(c,{x:i.pathPosition[0],y:i.pathPosition[1],scaleX:0,scaleY:0,rotation:i.rotation},{scaleX:i.symbolScale[0],scaleY:i.symbolScale[1]},i,s))}function J3(t,r,i){var s=So({},r.barRectShape),u=t.__pictorialBarRect;u?Zn(u,null,{shape:s},r,i):((u=t.__pictorialBarRect=new IF({z2:2,shape:s,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,t.add(u))}function J5(t,r,i,s){if(i.symbolClip){var u=t.__pictorialClipPath,c=So({},i.clipShape),h=r.valueDim,p=i.animationModel,f=i.dataIndex;if(u)DW(u,{shape:c},p,f);else{c[h.wh]=0,u=new IF({shape:c}),t.__pictorialBundle.setClipPath(u),t.__pictorialClipPath=u;var v={};v[h.wh]=i.clipShape[h.wh],et[s?"updateProps":"initProps"](u,{shape:v},p,f)}}}function J4(t,r){var i=t.getItemModel(r);return i.getAnimationDelayParams=J6,i.isAnimationEnabled=J9,i}function J6(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function J9(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function J8(t,r,i,s){var u=new Tf,c=new Tf;return u.add(c),u.__pictorialBundle=c,c.x=i.bundlePosition[0],c.y=i.bundlePosition[1],i.symbolRepeat?J1(u,r,i):J2(u,r,i),J3(u,i,s),J5(u,r,i,s),u.__pictorialShapeStr=Ze(t,i),u.__pictorialSymbolMeta=i,u}function J7(t,r,i,s){var u=s.__pictorialBarRect;u&&u.removeTextContent();var c=[];Zt(s,function(t){c.push(t)}),s.__pictorialMainPath&&c.push(s.__pictorialMainPath),s.__pictorialClipPath&&(i=null),Sp(c,function(t){DY(t,{scaleX:0,scaleY:0},i,r,function(){s.parent&&s.parent.remove(s)})}),t.setItemGraphicEl(r,null)}function Ze(t,r){return[t.getItemVisual(r.dataIndex,"symbol")||"none",!!r.symbolRepeat,!!r.symbolClip].join(":")}function Zt(t,r,i){Sp(t.__pictorialBundle.children(),function(s){s!==t.__pictorialBarRect&&r.call(i,s)})}function Zn(t,r,i,s,u,c){r&&t.attr(r),s.symbolClip&&!u?i&&t.attr(i):i&&et[u?"updateProps":"initProps"](t,i,s.animationModel,s.dataIndex,c)}function Zr(t,r,i){var s=i.dataIndex,u=i.itemModel,c=u.getModel("emphasis"),h=c.getModel("itemStyle").getItemStyle(),p=u.getModel(["blur","itemStyle"]).getItemStyle(),f=u.getModel(["select","itemStyle"]).getItemStyle(),v=u.getShallow("cursor"),y=c.get("focus"),x=c.get("blurScope"),_=c.get("scale");Zt(t,function(t){if(t instanceof ID){var r=t.style;t.useStyle(So({image:r.image,x:r.x,y:r.y,width:r.width,height:r.height},i.style))}else t.useStyle(i.style);var s=t.ensureState("emphasis");s.style=h,_&&(s.scaleX=1.1*t.scaleX,s.scaleY=1.1*t.scaleY),t.ensureState("blur").style=p,t.ensureState("select").style=f,v&&(t.cursor=v),t.z2=i.z2});var b=r.valueDim.posDesc[+(i.boundingLength>0)],w=t.__pictorialBarRect;w.ignoreClip=!0,D0(w,D1(u),{labelFetcher:r.seriesModel,labelDataIndex:s,defaultText:HX(r.seriesModel.getData(),s),inheritColor:i.style.fill,defaultOpacity:i.style.opacity,defaultOutsidePosition:b}),DR(t,y,x,c.get("disabled"))}function Zi(t){var r=Math.round(t);return 1e-4>Math.abs(t-r)?r:Math.ceil(t)}var Za=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.hasSymbolVisual=!0,i.defaultSymbol="roundRect",i}return wU(r,t),r.prototype.getInitialData=function(r){return r.stack=null,t.prototype.getInitialData.apply(this,arguments)},r.type="series.pictorialBar",r.dependencies=["grid"],r.defaultOption=Pm(Gv.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),r}(Gv),Zo=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i._layers=[],i}return wU(r,t),r.prototype.render=function(t,r,i){var s=t.getData(),u=this,c=this.group,h=t.getLayerSeries(),p=s.getLayout("layoutInfo"),f=p.rect,v=p.boundaryGap;function y(t){return t.name}c.x=0,c.y=f.y+v[0];var x=new FC(this._layersSeries||[],h,y,y),_=[];function b(r,i,p){var f,v,y=u._layers;if("remove"===r){c.remove(y[i]);return}for(var x=[],b=[],w=h[i].indices,S=0;S<w.length;S++){var M=s.getItemLayout(w[S]),A=M.x,C=M.y0,T=M.y;x.push(A,C),b.push(A,C+T),f=s.getItemVisual(w[S],"style")}var I=s.getItemLayout(w[0]),D=t.getModel("label").get("margin"),P=t.getModel("emphasis");if("add"===r){var R=_[i]=new Tf;v=new H7({shape:{points:x,stackedOnPoints:b,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),R.add(v),c.add(R),t.isAnimationEnabled()&&v.setClipPath(function(t,r,i){var s=new IF({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return Dj(s,{shape:{x:t.x-50,width:t.width+100,height:t.height+20}},r,i),s}(v.getBoundingRect(),t,function(){v.removeClipPath()}))}else{var R=y[p];v=R.childAt(0),c.add(R),_[i]=R,DW(v,{shape:{points:x,stackedOnPoints:b}},t),DZ(v)}D0(v,D1(t),{labelDataIndex:w[S-1],defaultText:s.getName(w[S-1]),inheritColor:f.fill},{normal:{verticalAlign:"middle"}}),v.setTextConfig({position:null,local:!0});var L=v.getTextContent();L&&(L.x=I.x-D,L.y=I.y0+I.y/2),v.useStyle(f),s.setItemGraphicEl(i,v),DB(v,t),DR(v,P.get("focus"),P.get("blurScope"),P.get("disabled"))}x.add(Sx(b,this,"add")).update(Sx(b,this,"update")).remove(Sx(b,this,"remove")).execute(),this._layersSeries=h,this._layers=_},r.type="themeRiver",r}(Bu),Zs=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.init=function(r){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new G2(Sx(this.getData,this),Sx(this.getRawData,this))},r.prototype.fixData=function(t){var r=t.length,i={},s=Es(t,function(t){return!i.hasOwnProperty(t[0]+"")&&(i[t[0]+""]=-1),t[2]}),u=[];s.buckets.each(function(t,r){u.push({name:r,dataList:t})});for(var c=u.length,h=0;h<c;++h){for(var p=u[h].name,f=0;f<u[h].dataList.length;++f){var v=u[h].dataList[f][0]+"";i[v]=h}for(var v in i)i.hasOwnProperty(v)&&i[v]!==h&&(i[v]=h,t[r]=[v,0,p],r++)}return t},r.prototype.getInitialData=function(t,r){for(var i=this.getReferringComponents("singleAxis",Er).models[0].get("type"),s=Sm(t.data,function(t){return void 0!==t[2]}),u=this.fixData(s||[]),c=[],h=this.nameMap=SY(),p=0,f=0;f<u.length;++f)c.push(u[f][2]),!h.get(u[f][2])&&(h.set(u[f][2],p),p++);var v=new FV(Fj(u,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:FI(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,this);return v.initData(u),v},r.prototype.getLayerSeries=function(){for(var t=this.getData(),r=t.count(),i=[],s=0;s<r;++s)i[s]=s;var u=t.mapDimension("single"),c=Es(i,function(r){return t.get("name",r)}),h=[];return c.buckets.each(function(r,i){r.sort(function(r,i){return t.get(u,r)-t.get(u,i)}),h.push({name:i,indices:r})}),h},r.prototype.getAxisTooltipData=function(t,r,i){!Sb(t)&&(t=t?[t]:[]);for(var s,u=this.getData(),c=this.getLayerSeries(),h=[],p=c.length,f=0;f<p;++f){for(var v=Number.MAX_VALUE,y=-1,x=c[f].indices.length,_=0;_<x;++_){var b=u.get(t[0],c[f].indices[_]),w=Math.abs(b-r);w<=v&&(s=b,v=w,y=c[f].indices[_])}h.push(y)}return{dataIndices:h,nestestValue:s}},r.prototype.formatTooltip=function(t,r,i){var s=this.getData();return L7("nameValue",{name:s.getName(t),value:s.get(s.mapDimension("value"),t)})},r.type="series.themeRiver",r.dependencies=["singleAxis"],r.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},r}(kw);function Zl(t,r){t.eachSeriesByType("themeRiver",function(t){var r=t.getData(),i=t.coordinateSystem,s={},u=i.getRect();s.rect=u;var c=t.get("boundaryGap"),h=i.getAxis();s.boundaryGap=c,"horizontal"===h.orient?(c[0]=TT(c[0],u.height),c[1]=TT(c[1],u.height),Zu(r,t,u.height-c[0]-c[1])):(c[0]=TT(c[0],u.width),c[1]=TT(c[1],u.width),Zu(r,t,u.width-c[0]-c[1])),r.setLayout("layoutInfo",s)})}function Zu(t,r,i){if(!!t.count())for(var s,u=r.coordinateSystem,c=r.getLayerSeries(),h=t.mapDimension("single"),p=t.mapDimension("value"),f=Sf(c,function(r){return Sf(r.indices,function(r){var i=u.dataToPoint(t.get(h,r));return i[1]=t.get(p,r),i})}),v=function(t){for(var r=t.length,i=t[0].length,s=[],u=[],c=0,h=0;h<i;++h){for(var p=0,f=0;f<r;++f)p+=t[f][h][1];p>c&&(c=p),s.push(p)}for(var v=0;v<i;++v)u[v]=(c-s[v])/2;c=0;for(var y=0;y<i;++y){var x=s[y]+u[y];x>c&&(c=x)}return{y0:u,max:c}}(f),y=v.y0,x=i/v.max,_=c.length,b=c[0].indices.length,w=0;w<b;++w){s=y[w]*x,t.setItemLayout(c[0].indices[w],{layerIndex:0,x:f[0][w][0],y0:s,y:f[0][w][1]*x});for(var S=1;S<_;++S)s+=f[S-1][w][1]*x,t.setItemLayout(c[S].indices[w],{layerIndex:S,x:f[S][w][0],y0:s,y:f[S][w][1]*x})}}var Zc=function(t){function r(r,i,s,u){var c=t.call(this)||this;c.z2=2,c.textConfig={inside:!0},I1(c).seriesIndex=i.seriesIndex;var h=new I0({z2:4,silent:r.getModel().get(["label","silent"])});return c.setTextContent(h),c.updateData(!0,r,i,s,u),c}return wU(r,t),r.prototype.updateData=function(t,r,i,s,u){this.node=r,r.piece=this,i=i||this._seriesModel,s=s||this._ecModel;var c=this;I1(c).dataIndex=r.dataIndex;var h=r.getModel(),p=h.getModel("emphasis"),f=r.getLayout(),v=So({},f);v.label=null;var y=r.getVisual("style");y.lineJoin="bevel";var x=r.getVisual("decal");x&&(y.decal=NA(x,u));var _=GS(h.getModel("itemStyle"),v,!0);So(v,_),Sp(I9,function(t){var r=c.ensureState(t),i=h.getModel([t,"itemStyle"]);r.style=i.getItemStyle();var s=GS(i,v);s&&(r.shape=s)}),t?(c.setShape(v),c.shape.r=f.r0,Dj(c,{shape:{r:f.r}},i,r.dataIndex)):(DW(c,{shape:v},i),DZ(c)),c.useStyle(y),this._updateLabel(i);var b=h.getShallow("cursor");b&&c.attr("cursor",b),this._seriesModel=i||this._seriesModel,this._ecModel=s||this._ecModel;var w=p.get("focus");DR(this,"ancestor"===w?r.getAncestorsIndices():"descendant"===w?r.getDescendantIndices():w,p.get("blurScope"),p.get("disabled"))},r.prototype._updateLabel=function(t){var r=this,i=this.node.getModel(),s=i.getModel("label"),u=this.node.getLayout(),c=u.endAngle-u.startAngle,h=(u.startAngle+u.endAngle)/2,p=Math.cos(h),f=Math.sin(h),v=this,y=v.getTextContent(),x=this.node.dataIndex,_=s.get("minAngle")/180*Math.PI,b=s.get("show")&&!(null!=_&&Math.abs(c)<_);function w(t,r){var i=t.get(r);return null==i?s.get(r):i}y.ignore=!b,Sp(I8,function(s){var _,b="normal"===s?i.getModel("label"):i.getModel([s,"label"]),S="normal"===s,M=S?y:y.ensureState(s),A=t.getFormattedLabel(x,s);S&&(A=A||r.node.name),M.style=D2(b,{},null,"normal"!==s,!0),A&&(M.style.text=A);var C=b.get("show");null!=C&&!S&&(M.ignore=!C);var T=w(b,"position"),I=S?v:v.states[s],D=I.style.fill;I.textConfig={outsideFill:"inherit"===b.get("color")?D:null,inside:"outside"!==T};var P=w(b,"distance")||0,R=w(b,"align"),L=w(b,"rotate"),k=.5*Math.PI,O=1.5*Math.PI,B=Ip("tangential"===L?Math.PI/2-h:h),N=B>k&&!TN(B-k)&&B<O;"outside"===T?(_=u.r+P,R=N?"right":"left"):R&&"center"!==R?"left"===R?(_=u.r0+P,R=N?"right":"left"):"right"===R&&(_=u.r-P,R=N?"left":"right"):(_=c===2*Math.PI&&0===u.r0?0:(u.r+u.r0)/2,R="center"),M.style.align=R,M.style.verticalAlign=w(b,"verticalAlign")||"middle",M.x=_*p+u.cx,M.y=_*f+u.cy;var F=0;"radial"===L?F=Ip(-h)+(N?Math.PI:0):"tangential"===L?F=Ip(Math.PI/2-h)+(N?Math.PI:0):SA(L)&&(F=L*Math.PI/180),M.rotation=Ip(F)}),y.dirtyStyle()},r}(Ot),Zh="sunburstRootToNode",Zd="sunburstHighlight",Zp=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.render=function(t,r,i,s){var u=this;this.seriesModel=t,this.api=i,this.ecModel=r;var c=t.getData(),h=c.tree.root,p=t.getViewRoot(),f=this.group,v=t.get("renderLabelForZeroData"),y=[];p.eachNode(function(t){y.push(t)}),function(s,u){if(0!==s.length||0!==u.length)new FC(u,s,p,p).add(y).update(y).remove(S_(y,null)).execute();function p(t){return t.getId()}function y(p,y){(function(s,u){if(!v&&s&&!s.getValue()&&(s=null),s!==h&&u!==h){if(u&&u.piece)s?(u.piece.updateData(!1,s,t,r,i),c.setItemGraphicEl(s.dataIndex,u.piece)):function(t){if(!!t)t.piece&&(f.remove(t.piece),t.piece=null)}(u);else if(s){var p=new Zc(s,t,r,i);f.add(p),c.setItemGraphicEl(s.dataIndex,p)}}})(null==p?null:s[p],null==y?null:u[y])}}(y,this._oldChildren||[]),function(s,c){c.depth>0?(u.virtualPiece?u.virtualPiece.updateData(!1,s,t,r,i):(u.virtualPiece=new Zc(s,t,r,i),f.add(u.virtualPiece)),c.piece.off("click"),u.virtualPiece.on("click",function(t){u._rootToNode(c.parentNode)})):u.virtualPiece&&(f.remove(u.virtualPiece),u.virtualPiece=null)}(h,p),this._initEvents(),this._oldChildren=y},r.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",function(r){var i=!1;t.seriesModel.getViewRoot().eachNode(function(s){if(!i&&s.piece&&s.piece===r.target){var u=s.getModel().get("nodeClick");if("rootToNode"===u)t._rootToNode(s);else if("link"===u){var c=s.getModel(),h=c.get("link");h&&P6(h,c.get("target",!0)||"_blank")}i=!0}})})},r.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:Zh,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},r.prototype.containPoint=function(t,r){var i=r.getData().getItemLayout(0);if(i){var s=t[0]-i.cx,u=t[1]-i.cy,c=Math.sqrt(s*s+u*u);return c<=i.r&&c>=i.r0}},r.type="sunburst",r}(Bu),Zf=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.ignoreStyleOnData=!0,i}return wU(r,t),r.prototype.getInitialData=function(t,r){var i={name:t.name,children:t.data};(function t(r){var i=0;Sp(r.children,function(r){t(r);var s=r.value;Sb(s)&&(s=s[0]),i+=s});var s=r.value;Sb(s)&&(s=s[0]),(null==s||isNaN(s))&&(s=i),s<0&&(s=0),Sb(r.value)?r.value[0]=s:r.value=s})(i);var s=this._levelModels=Sf(t.levels||[],function(t){return new Pp(t,this,r)},this),u=jz.createTree(i,this,function(t){t.wrapMethod("getItemModel",function(t,r){var i=s[u.getNodeByDataIndex(r).depth];return i&&(t.parentModel=i),t})});return u.data},r.prototype.optionUpdated=function(){this.resetViewRoot()},r.prototype.getDataParams=function(r){var i=t.prototype.getDataParams.apply(this,arguments),s=this.getData().tree.getNodeByDataIndex(r);return i.treePathInfo=jV(s,this),i},r.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},r.prototype.getViewRoot=function(){return this._viewRoot},r.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},r.prototype.enableAriaDecal=function(){jJ(this)},r.type="series.sunburst",r.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},r}(kw),Zg=Math.PI/180;function Zm(t,r,i){r.eachSeriesByType(t,function(t){var r=t.get("center"),s=t.get("radius");!Sb(s)&&(s=[0,s]),!Sb(r)&&(r=[r,r]);var u=i.getWidth(),c=i.getHeight(),h=Math.min(u,c),p=TT(r[0],u),f=TT(r[1],c),v=TT(s[0],h/2),y=TT(s[1],h/2),x=-t.get("startAngle")*Zg,_=t.get("minAngle")*Zg,b=t.getData().tree.root,w=t.getViewRoot(),S=w.depth,M=t.get("sort");null!=M&&function t(r,i){var s=r.children||[];r.children=function(t,r){if(Sw(r)){var i=Sf(t,function(t,r){var i=t.getValue();return{params:{depth:t.depth,height:t.height,dataIndex:t.dataIndex,getValue:function(){return i}},index:r}});return i.sort(function(t,i){return r(t.params,i.params)}),Sf(i,function(r){return t[r.index]})}var s="asc"===r;return t.sort(function(t,r){var i=(t.getValue()-r.getValue())*(s?1:-1);return 0===i?(t.dataIndex-r.dataIndex)*(s?-1:1):i})}(s,i),s.length&&Sp(r.children,function(r){t(r,i)})}(w,M);var A=0;Sp(w.children,function(t){!isNaN(t.getValue())&&A++});var C=w.getValue(),T=Math.PI/(C||A)*2,I=w.depth>0,D=(y-v)/(w.height-(I?-1:1)||1),P=t.get("clockwise"),R=t.get("stillShowZeroSum"),L=P?1:-1,k=function(r,i){if(!!r){var s=i;if(r!==b){var u=r.getValue(),c=0===C&&R?T:u*T;c<_&&(c=_),s=i+L*c;var y=r.depth-S-(I?-1:1),x=v+D*y,w=v+D*(y+1),M=t.getLevelModel(r);if(M){var A=M.get("r0",!0),O=M.get("r",!0),B=M.get("radius",!0);null!=B&&(A=B[0],O=B[1]),null!=A&&(x=TT(A,h/2)),null!=O&&(w=TT(O,h/2))}r.setLayout({angle:c,startAngle:i,endAngle:s,clockwise:P,cx:p,cy:f,r0:x,r:w})}if(r.children&&r.children.length){var N=0;Sp(r.children,function(t){N+=k(t,i+N)})}return s-i}};if(I){var O=v+D,B=2*Math.PI;b.setLayout({angle:B,startAngle:x,endAngle:x+B,clockwise:P,cx:p,cy:f,r0:v,r:O})}k(w,x)})}function Zv(t){var r={};t.eachSeriesByType("sunburst",function(t){var i=t.getData(),s=i.tree;s.eachNode(function(u){var c=u.getModel().getModel("itemStyle").getItemStyle();!c.fill&&(c.fill=function(t,i,s){for(var u=t;u&&u.depth>1;)u=u.parentNode;var c=i.getColorFromPalette(u.name||u.dataIndex+"",r);return t.depth>1&&SS(c)&&(c=A1(c,(t.depth-1)/(s-1)*.5)),c}(u,t,s.root.height)),So(i.ensureUniqueItemVisual(u.dataIndex,"style"),c)})})}var Zy={color:"fill",borderColor:"stroke"},Zx={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},Z_=T7(),Zb=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},r.prototype.getInitialData=function(t,r){return Fq(null,this)},r.prototype.getDataParams=function(r,i,s){var u=t.prototype.getDataParams.call(this,r,i);return s&&(u.info=Z_(s).info),u},r.type="series.custom",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},r}(kw);function Zw(t,r){return r=r||[0,0],Sf(["x","y"],function(i,s){var u=this.getAxis(i),c=r[s],h=t[s]/2;return"category"===u.type?u.getBandWidth():Math.abs(u.dataToCoord(c-h)-u.dataToCoord(c+h))},this)}function ZS(t,r){return r=r||[0,0],Sf([0,1],function(i){var s=r[i],u=t[i]/2,c=[],h=[];return c[i]=s-u,h[i]=s+u,c[1-i]=h[1-i]=r[1-i],Math.abs(this.dataToPoint(c)[i]-this.dataToPoint(h)[i])},this)}function ZM(t,r){var i=this.getAxis(),s=r instanceof Array?r[0]:r,u=(t instanceof Array?t[0]:t)/2;return"category"===i.type?i.getBandWidth():Math.abs(i.dataToCoord(s-u)-i.dataToCoord(s+u))}function ZA(t,r){return r=r||[0,0],Sf(["Radius","Angle"],function(i,s){var u=this["get"+i+"Axis"](),c=r[s],h=t[s]/2,p="category"===u.type?u.getBandWidth():Math.abs(u.dataToCoord(c-h)-u.dataToCoord(c+h));return"Angle"===i&&(p=p*Math.PI/180),p},this)}function ZC(t,r,i,s){return t&&(t.legacy||!1!==t.legacy&&!i&&!s&&"tspan"!==r&&("text"===r||SK(t,"text")))}function ZT(t,r,i){var s,u,c;if("text"===r)c=t;else{c={},SK(t,"text")&&(c.text=t.text),SK(t,"rich")&&(c.rich=t.rich),SK(t,"textFill")&&(c.fill=t.textFill),SK(t,"textStroke")&&(c.stroke=t.textStroke),SK(t,"fontFamily")&&(c.fontFamily=t.fontFamily),SK(t,"fontSize")&&(c.fontSize=t.fontSize),SK(t,"fontStyle")&&(c.fontStyle=t.fontStyle),SK(t,"fontWeight")&&(c.fontWeight=t.fontWeight),u={type:"text",style:c,silent:!0},s={};var h=SK(t,"textPosition");i?s.position=h?t.textPosition:"inside":h&&(s.position=t.textPosition),SK(t,"textPosition")&&(s.position=t.textPosition),SK(t,"textOffset")&&(s.offset=t.textOffset),SK(t,"textRotation")&&(s.rotation=t.textRotation),SK(t,"textDistance")&&(s.distance=t.textDistance)}return ZE(c,t),Sp(c.rich,function(t){ZE(t,t)}),{textConfig:s,textContent:u}}function ZE(t,r){if(!!r)r.font=r.textFont||r.font,SK(r,"textStrokeWidth")&&(t.lineWidth=r.textStrokeWidth),SK(r,"textAlign")&&(t.align=r.textAlign),SK(r,"textVerticalAlign")&&(t.verticalAlign=r.textVerticalAlign),SK(r,"textLineHeight")&&(t.lineHeight=r.textLineHeight),SK(r,"textWidth")&&(t.width=r.textWidth),SK(r,"textHeight")&&(t.height=r.textHeight),SK(r,"textBackgroundColor")&&(t.backgroundColor=r.textBackgroundColor),SK(r,"textPadding")&&(t.padding=r.textPadding),SK(r,"textBorderColor")&&(t.borderColor=r.textBorderColor),SK(r,"textBorderWidth")&&(t.borderWidth=r.textBorderWidth),SK(r,"textBorderRadius")&&(t.borderRadius=r.textBorderRadius),SK(r,"textBoxShadowColor")&&(t.shadowColor=r.textBoxShadowColor),SK(r,"textBoxShadowBlur")&&(t.shadowBlur=r.textBoxShadowBlur),SK(r,"textBoxShadowOffsetX")&&(t.shadowOffsetX=r.textBoxShadowOffsetX),SK(r,"textBoxShadowOffsetY")&&(t.shadowOffsetY=r.textBoxShadowOffsetY)}function ZI(t,r,i){t.textPosition=t.textPosition||i.position||"inside",null!=i.offset&&(t.textOffset=i.offset),null!=i.rotation&&(t.textRotation=i.rotation),null!=i.distance&&(t.textDistance=i.distance);var s=t.textPosition.indexOf("inside")>=0,u=t.fill||"#000";ZD(t,r);var c=null==t.textFill;return s?c&&(t.textFill=i.insideFill||"#fff",!t.textStroke&&i.insideStroke&&(t.textStroke=i.insideStroke),t.textStroke||(t.textStroke=u),null==t.textStrokeWidth&&(t.textStrokeWidth=2)):(c&&(t.textFill=t.fill||i.outsideFill||"#000"),!t.textStroke&&i.outsideStroke&&(t.textStroke=i.outsideStroke)),t.text=r.text,t.rich=r.rich,Sp(r.rich,function(t){ZD(t,t)}),t}function ZD(t,r){if(!!r)SK(r,"fill")&&(t.textFill=r.fill),SK(r,"stroke")&&(t.textStroke=r.fill),SK(r,"lineWidth")&&(t.textStrokeWidth=r.lineWidth),SK(r,"font")&&(t.font=r.font),SK(r,"fontStyle")&&(t.fontStyle=r.fontStyle),SK(r,"fontWeight")&&(t.fontWeight=r.fontWeight),SK(r,"fontSize")&&(t.fontSize=r.fontSize),SK(r,"fontFamily")&&(t.fontFamily=r.fontFamily),SK(r,"align")&&(t.textAlign=r.align),SK(r,"verticalAlign")&&(t.textVerticalAlign=r.verticalAlign),SK(r,"lineHeight")&&(t.textLineHeight=r.lineHeight),SK(r,"width")&&(t.textWidth=r.width),SK(r,"height")&&(t.textHeight=r.height),SK(r,"backgroundColor")&&(t.textBackgroundColor=r.backgroundColor),SK(r,"padding")&&(t.textPadding=r.padding),SK(r,"borderColor")&&(t.textBorderColor=r.borderColor),SK(r,"borderWidth")&&(t.textBorderWidth=r.borderWidth),SK(r,"borderRadius")&&(t.textBorderRadius=r.borderRadius),SK(r,"shadowColor")&&(t.textBoxShadowColor=r.shadowColor),SK(r,"shadowBlur")&&(t.textBoxShadowBlur=r.shadowBlur),SK(r,"shadowOffsetX")&&(t.textBoxShadowOffsetX=r.shadowOffsetX),SK(r,"shadowOffsetY")&&(t.textBoxShadowOffsetY=r.shadowOffsetY),SK(r,"textShadowColor")&&(t.textShadowColor=r.textShadowColor),SK(r,"textShadowBlur")&&(t.textShadowBlur=r.textShadowBlur),SK(r,"textShadowOffsetX")&&(t.textShadowOffsetX=r.textShadowOffsetX),SK(r,"textShadowOffsetY")&&(t.textShadowOffsetY=r.textShadowOffsetY)}var ZP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},ZR=Sy(ZP);Sg(C5,function(t,r){return t[r]=1,t},{}),C5.join(", ");var ZL=["","style","shape","extra"],Zk=T7();function ZO(t,r,i,s,u){var c=t+"Animation",h=DG(t,s,u)||{},p=Zk(r).userDuring;return h.duration>0&&(h.during=p?Sx(ZG,{el:r,userDuring:p}):null,h.setToFinal=!0,h.scope=t),So(h,i[c]),h}function ZB(t,r,i,s){var u=(s=s||{}).dataIndex,c=s.isInit,h=s.clearStyle,p=i.isAnimationEnabled(),f=Zk(t),v=r.style;f.userDuring=r.during;var y={},x={};if(function(t,r,i){for(var s=0;s<ZR.length;s++){var u=ZR[s],c=ZP[u],h=r[u];h&&(i[c[0]]=h[0],i[c[1]]=h[1])}for(var s=0;s<C5.length;s++){var p=C5[s];null!=r[p]&&(i[p]=r[p])}}(t,r,x),ZW("shape",r,x),ZW("extra",r,x),!c&&p&&(function(t,r,i){for(var s=r.transition,u=Zz(s)?C5:Tq(s||[]),c=0;c<u.length;c++){var h=u[c];if("style"!==h&&"shape"!==h&&"extra"!==h){var p=t[h];i[h]=p}}}(t,r,y),ZV("shape",t,r,y),ZV("extra",t,r,y),function(t,r,i,s){if(!!i){var u,c=t.style;if(c){var h=i.transition,p=r.transition;if(h&&!Zz(h)){var f=Tq(h);u||(u=s.style={});for(var v=0;v<f.length;v++){var y=f[v],x=c[y];u[y]=x}}else if(t.getAnimationStyleProps&&(Zz(p)||Zz(h)||Su(p,"style")>=0)){var _=t.getAnimationStyleProps(),b=_?_.style:null;if(b){u||(u=s.style={});for(var w=Sy(i),v=0;v<w.length;v++){var y=w[v];if(b[y]){var x=c[y];u[y]=x}}}}}}}(t,r,v,y)),x.style=v,function(t,r,i){var s=r.style;if(!t.isGroup&&s){if(i){t.useStyle({});for(var u=t.animators,c=0;c<u.length;c++){var h=u[c];"style"===h.targetName&&h.changeTarget(t.style)}}t.setStyle(s)}r&&(r.style=null,r&&t.attr(r),r.style=s)}(t,x,h),function(t,r){SK(r,"silent")&&(t.silent=r.silent),SK(r,"ignore")&&(t.ignore=r.ignore),t instanceof EU&&SK(r,"invisible")&&(t.invisible=r.invisible),t instanceof IM&&SK(r,"autoBatch")&&(t.autoBatch=r.autoBatch)}(t,r),p){if(c){var _={};Sp(ZL,function(t){var i=t?r[t]:r;i&&i.enterFrom&&(t&&(_[t]=_[t]||{}),So(t?_[t]:_,i.enterFrom))});var b=ZO("enter",t,r,i,u);b.duration>0&&t.animateFrom(_,b)}else(function(t,r,i,s,u){if(u){var c=ZO("update",t,r,s,i);c.duration>0&&t.animateFrom(u,c)}})(t,r,u||0,i,y)}ZN(t,r),v?t.dirty():t.markRedraw()}function ZN(t,r){for(var i=Zk(t).leaveToProps,s=0;s<ZL.length;s++){var u=ZL[s],c=u?r[u]:r;c&&c.leaveTo&&(!i&&(i=Zk(t).leaveToProps={}),u&&(i[u]=i[u]||{}),So(u?i[u]:i,c.leaveTo))}}function ZF(t,r,i,s){if(t){var u=t.parent,c=Zk(t).leaveToProps;if(c){var h=ZO("update",t,r,i,0);h.done=function(){u.remove(t),s&&s()},t.animateTo(c,h)}else u.remove(t),s&&s()}}function Zz(t){return"all"===t}var ZU={},ZH={setTransform:function(t,r){return ZU.el[t]=r,this},getTransform:function(t){return ZU.el[t]},setShape:function(t,r){var i=ZU.el;return(i.shape||(i.shape={}))[t]=r,i.dirtyShape&&i.dirtyShape(),this},getShape:function(t){var r=ZU.el.shape;if(r)return r[t]},setStyle:function(t,r){var i=ZU.el,s=i.style;return s&&(s[t]=r,i.dirtyStyle&&i.dirtyStyle()),this},getStyle:function(t){var r=ZU.el.style;if(r)return r[t]},setExtra:function(t,r){return(ZU.el.extra||(ZU.el.extra={}))[t]=r,this},getExtra:function(t){var r=ZU.el.extra;if(r)return r[t]}};function ZG(){var t=this.el;if(!!t){var r=Zk(t).userDuring,i=this.userDuring;if(r!==i){this.el=this.userDuring=null;return}ZU.el=t,i(ZH)}}function ZV(t,r,i,s){var u,c=i[t];if(!!c){var h=r[t];if(h){var p=i.transition,f=c.transition;if(f){if(u||(u=s[t]={}),Zz(f))So(u,h);else{for(var v=Tq(f),y=0;y<v.length;y++){var x=v[y],_=h[x];u[x]=_}}}else if(Zz(p)||Su(p,t)>=0){u||(u=s[t]={});for(var b=Sy(h),y=0;y<b.length;y++){var x=b[y],_=h[x];(function(t,r){return Sd(t)?t!==r:null!=t&&isFinite(t)})(c[x],_)&&(u[x]=_)}}}}}function ZW(t,r,i){var s=r[t];if(!!s)for(var u=i[t]={},c=Sy(s),h=0;h<c.length;h++){var p=c[h];u[p]=CM(s[p])}}var Zj=T7(),ZX=["percent","easing","shape","style","extra"];function ZY(t){t.stopAnimation("keyframe"),t.attr(Zj(t))}function Z$(t,r,i){if(!i.isAnimationEnabled()||!r)return;if(Sb(r)){Sp(r,function(r){Z$(t,r,i)});return}var s=r.keyframes,u=r.duration;if(i&&null==u){var c=DG("enter",i,0);u=c&&c.duration}if(!!s&&!!u){var h=Zj(t);Sp(ZL,function(i){var c;if(i&&!t[i])return;if(s.sort(function(t,r){return t.percent-r.percent}),Sp(s,function(s){var p=t.animators,f=i?s[i]:s;if(!f)return;var v=Sy(f);if(!i&&(v=Sm(v,function(t){return 0>Su(ZX,t)})),!!v.length){!c&&((c=t.animate(i,r.loop,!0)).scope="keyframe");for(var y=0;y<p.length;y++)p[y]!==c&&p[y].targetName===c.targetName&&p[y].stopTracks(v);i&&(h[i]=h[i]||{});var x=i?h[i]:h;Sp(v,function(r){x[r]=((i?t[i]:t)||{})[r]}),c.whenWithKeys(u*s.percent,f,v,s.easing)}}),!!c)c.delay(r.delay||0).duration(u).start(r.easing)})}}var ZJ="emphasis",ZZ="normal",ZK="blur",Zq="select",ZQ=[ZZ,ZJ,ZK,Zq],Z0={normal:["itemStyle"],emphasis:[ZJ,"itemStyle"],blur:[ZK,"itemStyle"],select:[Zq,"itemStyle"]},Z1={normal:["label"],emphasis:[ZJ,"label"],blur:[ZK,"label"],select:[Zq,"label"]},Z2=["x","y"],Z3={normal:{},emphasis:{},blur:{},select:{}},Z5={cartesian2d:function(t){var r=t.master.getRect();return{coordSys:{type:"cartesian2d",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:function(r){return t.dataToPoint(r)},size:Sx(Zw,t)}}},geo:function(t){var r=t.getBoundingRect();return{coordSys:{type:"geo",x:r.x,y:r.y,width:r.width,height:r.height,zoom:t.getZoom()},api:{coord:function(r){return t.dataToPoint(r)},size:Sx(ZS,t)}}},single:function(t){var r=t.getRect();return{coordSys:{type:"singleAxis",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:function(r){return t.dataToPoint(r)},size:Sx(ZM,t)}}},polar:function(t){var r=t.getRadiusAxis(),i=t.getAngleAxis(),s=r.getExtent();return s[0]>s[1]&&s.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:s[1],r0:s[0]},api:{coord:function(s){var u=r.dataToRadius(s[0]),c=i.dataToAngle(s[1]),h=t.coordToPoint([u,c]);return h.push(u,c*Math.PI/180),h},size:Sx(ZA,t)}}},calendar:function(t){var r=t.getRect(),i=t.getRangeInfo();return{coordSys:{type:"calendar",x:r.x,y:r.y,width:r.width,height:r.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:i.start,end:i.end,weeks:i.weeks,dayCount:i.allDay}},api:{coord:function(r,i){return t.dataToPoint(r,i)}}}}};function Z4(t){return t instanceof IM}function Z6(t){return t instanceof EU}var Z9=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.render=function(t,r,i,s){this._progressiveEls=null;var u=this._data,c=t.getData(),h=this.group,p=Kt(t,c,r,i);!u&&h.removeAll(),c.diff(u).add(function(r){Kn(i,null,r,p(r,s),t,h,c)}).remove(function(r){var i=u.getItemGraphicEl(r);i&&ZF(i,Z_(i).option,t)}).update(function(r,f){Kn(i,u.getItemGraphicEl(f),r,p(r,s),t,h,c)}).execute();var f=t.get("clip",!0)?Gn(t.coordinateSystem,!1,t):null;f?h.setClipPath(f):h.removeClipPath(),this._data=c},r.prototype.incrementalPrepareRender=function(t,r,i){this.group.removeAll(),this._data=null},r.prototype.incrementalRender=function(t,r,i,s,u){var c=r.getData(),h=Kt(r,c,i,s),p=this._progressiveEls=[];function f(t){!t.isGroup&&(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}for(var v=t.start;v<t.end;v++){var y=Kn(null,null,v,h(v,u),r,this.group,c);y&&(y.traverse(f),p.push(y))}},r.prototype.eachRendered=function(t){Be(this._progressiveEls||this.group,t)},r.prototype.filterForExposedEvent=function(t,r,i,s){var u=r.element;if(null==u||i.name===u)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===u)return!0;return!1},r.type="custom",r}(Bu);function Z8(t){var r,i=t.type;if("path"===i){var s=t.shape,u=null!=s.width&&null!=s.height?{x:s.x||0,y:s.y||0,width:s.width,height:s.height}:null,c=Kh(s);Z_(r=OV(c,null,u,s.layout||"center")).customPathData=c}else if("image"===i)Z_(r=new ID({})).customImagePath=t.style.image;else if("text"===i)r=new I0({});else if("group"===i)r=new Tf;else if("compoundPath"===i)throw Error('"compoundPath" is not supported yet.');else{var h=OG(i);!h&&LD(""),r=new h}return Z_(r).customGraphicType=i,r.name=t.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function Z7(t,r,i,s,u,c,h){ZY(r);var p=u&&u.normal.cfg;p&&r.setTextConfig(p),s&&null==s.transition&&(s.transition=Z2);var f=s&&s.style;if(f){"text"===r.type&&(SK(f,"textFill")&&(f.fill=f.textFill),SK(f,"textStroke")&&(f.stroke=f.textStroke));var v=void 0,y=Z4(r)?f.decal:null;t&&y&&(y.dirty=!0,v=NA(y,t)),f.__decalPattern=v}if(Z6(r)&&f){var v=f.__decalPattern;v&&(f.decal=v)}ZB(r,s,c,{dataIndex:i,isInit:h,clearStyle:!0}),Z$(r,s.keyframeAnimation,c)}function Ke(t,r,i,s,u){var c=r.isGroup?null:r,h=u&&u[t].cfg;if(c){var p=c.ensureState(t);if(!1===s){var f=c.getState(t);f&&(f.style=null)}else p.style=s||null;h&&(p.textConfig=h),Dm(c)}}function Kt(t,r,i,s){var u,c,h=t.get("renderItem"),p=t.coordinateSystem,f={};p&&(f=p.prepareCustoms?p.prepareCustoms(p):Z5[p.type](p));for(var v=Ss({getWidth:s.getWidth,getHeight:s.getHeight,getZr:s.getZr,getDevicePixelRatio:s.getDevicePixelRatio,value:function(t,i){return null==i&&(i=u),r.getStore().get(r.getDimensionIndex(t||0),i)},style:function(i,s){null==s&&(s=u);var c=r.getItemVisual(s,"style"),h=c&&c.fill,p=c&&c.opacity,f=C(s,ZZ).getItemStyle();null!=h&&(f.fill=h),null!=p&&(f.opacity=p);var v={inheritColor:SS(h)?h:"#000"},y=T(s,ZZ),x=D2(y,null,v,!1,!0);x.text=y.getShallow("show")?SO(t.getFormattedLabel(s,ZZ),HX(r,s)):null;var _=D3(y,v,!1);return D(i,f),f=ZI(f,x,_),i&&I(f,i),f.legacy=!0,f},ordinalRawValue:function(t,i){null==i&&(i=u),t=t||0;var s=r.getDimensionInfo(t);if(!s){var c=r.getDimensionIndex(t);return c>=0?r.getStore().get(c,i):void 0}var h=r.get(s.name,i),p=s&&s.ordinalMeta;return p?p.categories[h]:h},styleEmphasis:function(i,s){null==s&&(s=u);var c=C(s,ZJ).getItemStyle(),h=T(s,ZJ),p=D2(h,null,null,!0,!0);p.text=h.getShallow("show")?SB(t.getFormattedLabel(s,ZJ),t.getFormattedLabel(s,ZZ),HX(r,s)):null;var f=D3(h,null,!0);return D(i,c),c=ZI(c,p,f),i&&I(c,i),c.legacy=!0,c},visual:function(t,i){if(null==i&&(i=u),SK(Zy,t)){var s=r.getItemVisual(i,"style");return s?s[Zy[t]]:null}if(SK(Zx,t))return r.getItemVisual(i,t)},barLayout:function(t){if("cartesian2d"===p.type)return function(t){var r=[],i=t.axis,s="axis0";if("category"===i.type){for(var u=i.getBandWidth(),c=0;c<t.count;c++)r.push(Ss({bandWidth:u,axisKey:s,stackId:zo+c},t));for(var h=zh(r),p=[],c=0;c<t.count;c++){var f=h[s][zo+c];f.offsetCenter=f.offset+f.width/2,p.push(f)}return p}}(Ss({axis:p.getBaseAxis()},t))},currentSeriesIndices:function(){return i.getCurrentSeriesIndices()},font:function(t){return D8(t,i)}},f.api||{}),y={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:f.coordSys,dataInsideLength:r.count(),encode:function(t){var r={};return Sp(t.dimensions,function(i){var s=t.getDimensionInfo(i);if(!s.isExtraCoord){var u=s.coordDim;(r[u]=r[u]||[])[s.coordDimIndex]=t.getDimensionIndex(i)}}),r}(t.getData())},x={},_={},b={},w={},S=0;S<ZQ.length;S++){var M=ZQ[S];b[M]=t.getModel(Z0[M]),w[M]=t.getModel(Z1[M])}function A(t){return t===u?c||(c=r.getItemModel(t)):r.getItemModel(t)}function C(t,i){return r.hasItemOption?t===u?x[i]||(x[i]=A(t).getModel(Z0[i])):A(t).getModel(Z0[i]):b[i]}function T(t,i){return r.hasItemOption?t===u?_[i]||(_[i]=A(t).getModel(Z1[i])):A(t).getModel(Z1[i]):w[i]}return function(t,i){return u=t,c=null,x={},_={},h&&h(Ss({dataIndexInside:t,dataIndex:r.getRawIndex(t),actionType:i?i.type:null},y),v)};function I(t,r){for(var i in r)SK(r,i)&&(t[i]=r[i])}function D(t,r){t&&(t.textFill&&(r.textFill=t.textFill),t.textPosition&&(r.textPosition=t.textPosition))}}function Kn(t,r,i,s,u,c,h){if(!s){c.remove(r);return}var p=Kr(t,r,i,s,u,c);return p&&h.setItemGraphicEl(i,p),p&&DR(p,s.focus,s.blurScope,s.emphasisDisabled),p}function Kr(t,r,i,s,u,c){var h,p,f=-1,v=r;r&&Ki(r,s,u)&&(f=Su(c.childrenRef(),r),r=null);var y=!r,x=r;if(x)x.clearStates();else if(x=Z8(s),v){;h=v,(p=x).copyTransform(h),Z6(p)&&Z6(h)&&(p.setStyle(h.style),p.z=h.z,p.z2=h.z2,p.zlevel=h.zlevel,p.invisible=h.invisible,p.ignore=h.ignore,Z4(p)&&Z4(h)&&p.setShape(h.shape))}!1===s.morph?x.disableMorphing=!0:x.disableMorphing&&(x.disableMorphing=!1),Z3.normal.cfg=Z3.normal.conOpt=Z3.emphasis.cfg=Z3.emphasis.conOpt=Z3.blur.cfg=Z3.blur.conOpt=Z3.select.cfg=Z3.select.conOpt=null,Z3.isLegacy=!1,function(t,r,i,s,u,c){if(!t.isGroup){Ka(i,null,c),Ka(i,ZJ,c);var h=c.normal.conOpt,p=c.emphasis.conOpt,f=c.blur.conOpt,v=c.select.conOpt;if(null!=h||null!=p||null!=v||null!=f){var y=t.getTextContent();if(!1===h)y&&t.removeTextContent();else{h=c.normal.conOpt=h||{type:"text"},y?y.clearStates():(y=Z8(h),t.setTextContent(y)),Z7(null,y,r,h,null,s,u);for(var x=h&&h.style,_=0;_<ZQ.length;_++){var b=ZQ[_];if(b!==ZZ){var w=c[b].conOpt;Ke(b,y,w,Ks(h,w,b),null)}}x?y.dirty():y.markRedraw()}}}}(x,i,s,u,y,Z3),function(t,r,i,s,u){var c=i.clipPath;if(!1===c)t&&t.getClipPath()&&t.removeClipPath();else if(c){var h=t.getClipPath();if(h&&Ki(h,c,s)&&(h=null),!h){h=Z8(c);t.setClipPath(h)}Z7(null,h,r,c,null,s,u)}}(x,i,s,u,y),Z7(t,x,i,s,Z3,u,y),SK(s,"info")&&(Z_(x).info=s.info);for(var _=0;_<ZQ.length;_++){var b=ZQ[_];if(b!==ZZ){var w=Ko(s,b),S=Ks(s,w,b);Ke(b,x,w,S,Z3)}}return!function(t,r,i){if(!t.isGroup){var s=i.currentZ,u=i.currentZLevel;t.z=s,t.zlevel=u;var c=r.z2;null!=c&&(t.z2=c||0);for(var h=0;h<ZQ.length;h++)(function(t,r,i){var s=i===ZZ,u=s?r:Ko(r,i),c=u?u.z2:null;null!=c&&((s?t:t.ensureState(i)).z2=c||0)})(t,r,ZQ[h])}}(x,s,u),"group"===s.type&&function(t,r,i,s,u){var c=s.children,h=c?c.length:0,p=s.$mergeChildren,f="byName"===p||s.diffChildrenByName,v=!1===p;if(!!h||!!f||!!v){if(f){(function(t){new FC(t.oldChildren,t.newChildren,Kl,Kl,t).add(Ku).update(Ku).remove(Kc).execute()})({api:t,oldChildren:r.children()||[],newChildren:c||[],dataIndex:i,seriesModel:u,group:r});return}v&&r.removeAll();for(var y=0;y<h;y++){var x=c[y],_=r.childAt(y);x?(null==x.ignore&&(x.ignore=!1),Kr(t,_,i,x,u,r)):_.ignore=!0}for(var b=r.childCount()-1;b>=y;b--){var w=r.childAt(b);(function(t,r,i){r&&ZF(r,Z_(t).option,i)})(r,w,u)}}}(t,x,i,s,u),f>=0?c.replaceAt(x,f):c.add(x),x}function Ki(t,r,i){var s=Z_(t),u=r.type,c=r.shape,h=r.style;return i.isUniversalTransitionEnabled()||null!=u&&u!==s.customGraphicType||"path"===u&&function(t){return t&&(SK(t,"pathData")||SK(t,"d"))}(c)&&Kh(c)!==s.customPathData||"image"===u&&SK(h,"image")&&h.image!==s.customImagePath}function Ka(t,r,i){var s=r?Ko(t,r):t,u=r?Ks(t,s,ZJ):t.style,c=t.type,h=s?s.textConfig:null,p=t.textContent,f=p?r?Ko(p,r):p:null;if(u&&(i.isLegacy||ZC(u,c,!!h,!!f))){i.isLegacy=!0;var v=ZT(u,c,!r);!h&&v.textConfig&&(h=v.textConfig),!f&&v.textContent&&(f=v.textContent)}if(!r&&f){var y=f;y.type||(y.type="text")}var x=r?i[r]:i.normal;x.cfg=h,x.conOpt=f}function Ko(t,r){return r?t?t[r]:null:t}function Ks(t,r,i){var s=r&&r.style;return null==s&&i===ZJ&&t&&(s=t.styleEmphasis),s}function Kl(t,r){var i=t&&t.name;return null!=i?i:"e\0\0"+r}function Ku(t,r){var i=this.context,s=null!=t?i.newChildren[t]:null,u=null!=r?i.oldChildren[r]:null;Kr(i.api,u,i.dataIndex,s,i.seriesModel,i.group)}function Kc(t){var r=this.context,i=r.oldChildren[t];i&&ZF(i,Z_(i).option,r.seriesModel)}function Kh(t){return t&&(t.pathData||t.d)}var Kd=T7(),Kp=Sr,Kf=function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(t,r,i,s){var u=r.get("value"),c=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=i,!!s||this._lastValue!==u||this._lastStatus!==c){this._lastValue=u,this._lastStatus=c;var h=this._group,p=this._handle;if(!c||"hide"===c){h&&h.hide(),p&&p.hide();return}h&&h.show(),p&&p.show();var f={};this.makeElOption(f,u,t,r,i);var v=f.graphicKey;v!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=v;var y=this._moveAnimation=this.determineAnimation(t,r);if(h){var x=S_(Kg,r,y);this.updatePointerEl(h,f,x),this.updateLabelEl(h,f,x,r)}else h=this._group=new Tf,this.createPointerEl(h,f,t,r),this.createLabelEl(h,f,t,r),i.getZr().add(h);Ky(h,r,!0),this._renderHandle(u)}},t.prototype.remove=function(t){this.clear(t)},t.prototype.dispose=function(t){this.clear(t)},t.prototype.determineAnimation=function(t,r){var i=r.get("animation"),s=t.axis,u="category"===s.type,c=r.get("snap");if(!c&&!u)return!1;if("auto"===i||null==i){var h=this.animationThreshold;if(u&&s.getBandWidth()>h)return!0;if(c){var p=VL(t).seriesDataCount,f=s.getExtent();return Math.abs(f[0]-f[1])/p>h}return!1}return!0===i},t.prototype.makeElOption=function(t,r,i,s,u){},t.prototype.createPointerEl=function(t,r,i,s){var u=r.pointer;if(u){var c=Kd(t).pointerEl=new et[u.type](Kp(r.pointer));t.add(c)}},t.prototype.createLabelEl=function(t,r,i,s){if(r.label){var u=Kd(t).labelEl=new I0(Kp(r.label));t.add(u),Km(u,s)}},t.prototype.updatePointerEl=function(t,r,i){var s=Kd(t).pointerEl;s&&r.pointer&&(s.setStyle(r.pointer.style),i(s,{shape:r.pointer.shape}))},t.prototype.updateLabelEl=function(t,r,i,s){var u=Kd(t).labelEl;u&&(u.setStyle(r.label.style),i(u,{x:r.label.x,y:r.label.y}),Km(u,s))},t.prototype._renderHandle=function(t){if(!this._dragging&&!!this.updateHandleTransform){var r,i=this._axisPointerModel,s=this._api.getZr(),u=this._handle,c=i.getModel("handle"),h=i.get("status");if(!c.get("show")||!h||"hide"===h){u&&s.remove(u),this._handle=null;return}!this._handle&&(r=!0,u=this._handle=O5(c.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(t){MB(t.event)},onmousedown:Sx(this._onHandleDragMove,this,0,0),drift:Sx(this._onHandleDragMove,this),ondragend:Sx(this._onHandleDragEnd,this)}),s.add(u)),Ky(u,i,!1),u.setStyle(c.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var p=c.get("size");!Sb(p)&&(p=[p,p]),u.scaleX=p[0]/2,u.scaleY=p[1]/2,Bf(this,"_doDispatchAxisPointer",c.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,r)}},t.prototype._moveHandleToValue=function(t,r){Kg(this._axisPointerModel,!r&&this._moveAnimation,this._handle,Kv(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(t,r){var i=this._handle;if(!!i){this._dragging=!0;var s=this.updateHandleTransform(Kv(i),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=s,i.stopAnimation(),i.attr(Kv(s)),Kd(i).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){if(!!this._handle){var t=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){if(this._dragging=!1,!!this._handle){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),i=this._group,s=this._handle;r&&i&&(this._lastGraphicKey=null,i&&r.remove(i),s&&r.remove(s),this._group=null,this._handle=null,this._payloadInfo=null),Bg(this,"_doDispatchAxisPointer")},t.prototype.doClear=function(){},t.prototype.buildLabel=function(t,r,i){return{x:t[i=i||0],y:t[1-i],width:r[i],height:r[1-i]}},t}();function Kg(t,r,i,s){!function t(r,i){if(!(SC(r)&&SC(i)))return r===i;var s=!0;return Sp(i,function(i,u){s=s&&t(r[u],i)}),!!s}(Kd(i).lastProp,s)&&(Kd(i).lastProp=s,r?DW(i,s,t):(i.stopAnimation(),i.attr(s)))}function Km(t,r){t[r.get(["label","show"])?"show":"hide"]()}function Kv(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function Ky(t,r,i){var s=r.get("z"),u=r.get("zlevel");t&&t.traverse(function(t){"group"!==t.type&&(null!=s&&(t.z=s),null!=u&&(t.zlevel=u),t.silent=i)})}function Kx(t){var r,i=t.get("type"),s=t.getModel(i+"Style");return"line"===i?(r=s.getLineStyle()).fill=null:"shadow"===i&&((r=s.getAreaStyle()).stroke=null),r}function K_(t,r,i,s,u){var c=Kb(i.get("value"),r.axis,r.ecModel,i.get("seriesDataIndices"),{precision:i.get(["label","precision"]),formatter:i.get(["label","formatter"])}),h=i.getModel("label"),p=PK(h.get("padding")||0),f=h.getFont(),v=C7(c,f),y=u.position,x=v.width+p[1]+p[3],_=v.height+p[0]+p[2],b=u.align;"right"===b&&(y[0]-=x),"center"===b&&(y[0]-=x/2);var w=u.verticalAlign;"bottom"===w&&(y[1]-=_),"middle"===w&&(y[1]-=_/2),function(t,r,i,s){var u=s.getWidth(),c=s.getHeight();t[0]=Math.min(t[0]+r,u)-r,t[1]=Math.min(t[1]+i,c)-i,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}(y,x,_,s);var S=h.get("backgroundColor");(!S||"auto"===S)&&(S=r.get(["axisLine","lineStyle","color"])),t.label={x:y[0],y:y[1],style:D2(h,{text:c,font:f,fill:h.getTextColor(),padding:p,backgroundColor:S}),z2:10}}function Kb(t,r,i,s,u){t=r.scale.parse(t);var c=r.scale.getLabel({value:t},{precision:u.precision}),h=u.formatter;if(h){var p={value:zF(r,{value:t}),axisDimension:r.dim,axisIndex:r.index,seriesData:[]};Sp(s,function(t){var r=i.getSeriesByIndex(t.seriesIndex),s=t.dataIndexInside,u=r&&r.getDataParams(s);u&&p.seriesData.push(u)}),SS(h)?c=h.replace("{value}",c):Sw(h)&&(c=h(p))}return c}function Kw(t,r,i){var s=MH();return MX(s,s,i.rotation),Mj(s,s,i.position),Oq([t.dataToCoord(r),(i.labelOffset||0)+(i.labelDirection||1)*(i.labelMargin||0)],s)}function KS(t,r,i,s,u,c){var h=VC.innerTextLayout(i.rotation,0,i.labelDirection);i.labelMargin=u.get(["label","margin"]),K_(r,s,u,c,{position:Kw(s.axis,t,i),align:h.textAlign,verticalAlign:h.textVerticalAlign})}function KM(t,r,i){return{x1:t[i=i||0],y1:t[1-i],x2:r[i],y2:r[1-i]}}function KA(t,r,i){return{x:t[i=i||0],y:t[1-i],width:r[i],height:r[1-i]}}function KC(t,r,i,s,u,c){return{cx:t,cy:r,r0:i,r:s,startAngle:u,endAngle:c,clockwise:!0}}var KT=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.prototype.makeElOption=function(t,r,i,s,u){var c=i.axis,h=c.grid,p=s.get("type"),f=KE(h,c).getOtherAxis(c).getGlobalExtent(),v=c.toGlobalCoord(c.dataToCoord(r,!0));if(p&&"none"!==p){var y=Kx(s),x=KI[p](c,v,f);x.style=y,t.graphicKey=x.type,t.pointer=x}KS(r,t,Vm(h.model,i),i,s,u)},r.prototype.getHandleTransform=function(t,r,i){var s=Vm(r.axis.grid.model,r,{labelInside:!1});s.labelMargin=i.get(["handle","margin"]);var u=Kw(r.axis,t,s);return{x:u[0],y:u[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},r.prototype.updateHandleTransform=function(t,r,i,s){var u=i.axis,c=u.grid,h=u.getGlobalExtent(!0),p=KE(c,u).getOtherAxis(u).getGlobalExtent(),f="x"===u.dim?0:1,v=[t.x,t.y];v[f]+=r[f],v[f]=Math.min(h[1],v[f]),v[f]=Math.max(h[0],v[f]);var y=(p[1]+p[0])/2,x=[y,y];return x[f]=v[f],{x:v[0],y:v[1],rotation:t.rotation,cursorPoint:x,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][f]}},r}(Kf);function KE(t,r){var i={};return i[r.dim+"AxisIndex"]=r.index,t.getCartesian(i)}var KI={line:function(t,r,i){return{type:"Line",subPixelOptimize:!0,shape:KM([r,i[0]],[r,i[1]],KD(t))}},shadow:function(t,r,i){var s=Math.max(1,t.getBandWidth()),u=i[1]-i[0];return{type:"Rect",shape:KA([r-s/2,i[0]],[s,u],KD(t))}}};function KD(t){return"x"===t.dim?0:1}var KP=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.type="axisPointer",r.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},r}(Ru),KR=T7();function KL(t,r,i){if(!wY.node){var s=r.getZr();KR(s).records||(KR(s).records={}),function(t,r){if(!KR(t).initialized)KR(t).initialized=!0,i("click",S_(KO,"click")),i("mousemove",S_(KO,"mousemove")),i("globalout",Kk);function i(i,s){t.on(i,function(i){var u=function(t){var r={showTip:[],hideTip:[]},i=function(s){var u=r[s.type];u?u.push(s):(s.dispatchAction=i,t.dispatchAction(s))};return{dispatchAction:i,pendings:r}}(r);Sp(KR(t).records,function(t){t&&s(t,i,u.dispatchAction)}),function(t,r){var i,s=t.showTip.length,u=t.hideTip.length;s?i=t.showTip[s-1]:u&&(i=t.hideTip[u-1]),i&&(i.dispatchAction=null,r.dispatchAction(i))}(u.pendings,r)})}}(s,r),(KR(s).records[t]||(KR(s).records[t]={})).handler=i}}function Kk(t,r,i){t.handler("leave",null,i)}function KO(t,r,i,s){r.handler(t,i,s)}function KB(t,r){if(!wY.node){var i=r.getZr();(KR(i).records||{})[t]&&(KR(i).records[t]=null)}}var KN=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.render=function(t,r,i){var s=r.getComponent("tooltip"),u=t.get("triggerOn")||s&&s.get("triggerOn")||"mousemove|click";KL("axisPointer",i,function(t,r,i){"none"!==u&&("leave"===t||u.indexOf(t)>=0)&&i({type:"updateAxisPointer",currTrigger:t,x:r&&r.offsetX,y:r&&r.offsetY})})},r.prototype.remove=function(t,r){KB("axisPointer",r)},r.prototype.dispose=function(t,r){KB("axisPointer",r)},r.type="axisPointer",r}(kM);function KF(t,r){var i,s=[],u=t.seriesIndex;if(null==u||!(i=r.getSeriesByIndex(u)))return{point:[]};var c=i.getData(),h=T8(c,t);if(null==h||h<0||Sb(h))return{point:[]};var p=c.getItemGraphicEl(h),f=i.coordinateSystem;if(i.getTooltipPosition)s=i.getTooltipPosition(h)||[];else if(f&&f.dataToPoint){if(t.isStacked){var v=f.getBaseAxis(),y=f.getOtherAxis(v).dim,x=v.dim,_="x"===y||"radius"===y?1:0,b=c.mapDimension(x),w=[];w[_]=c.get(b,h),w[1-_]=c.get(c.getCalculationInfo("stackResultDimension"),h),s=f.dataToPoint(w)||[]}else s=f.dataToPoint(c.getValues(Sf(f.dimensions,function(t){return c.mapDimension(t)}),h))||[]}else if(p){var S=p.getBoundingRect().clone();S.applyTransform(p.transform),s=[S.x+S.width/2,S.y+S.height/2]}return{point:s,el:p}}var Kz=T7();function KU(t,r,i){var s=t.currTrigger,u=[t.x,t.y],c=t.dispatchAction||Sx(i.dispatchAction,i),h=r.getComponent("axisPointer").coordSysAxesInfo;if(!!h){Kj(u)&&(u=KF({seriesIndex:t.seriesIndex,dataIndex:t.dataIndex},r).point);var p=Kj(u),f=t.axesInfo,v=h.axesInfo,y="leave"===s||Kj(u),x={},_={},b={list:[],map:{}},w={showPointer:S_(KG,_),showTooltip:S_(KV,b)};Sp(h.coordSysMap,function(t,r){var i=p||t.containPoint(u);Sp(h.coordSysAxesInfo[r],function(t,r){var s=t.axis,c=function(t,r){for(var i=0;i<(t||[]).length;i++){var s=t[i];if(r.axis.dim===s.axisDim&&r.axis.model.componentIndex===s.axisIndex)return s}}(f,t);if(!y&&i&&(!f||c)){var h=c&&c.value;null==h&&!p&&(h=s.pointToData(u)),null!=h&&KH(t,h,w,!1,x)}})});var S={};return Sp(v,function(t,r){var i=t.linkGroup;i&&!_[r]&&Sp(i.axesInfo,function(r,s){var u=_[s];if(r!==t&&u){var c=u.value;i.mapper&&(c=t.axis.scale.parse(i.mapper(c,KW(r),KW(t)))),S[t.key]=c}})}),Sp(S,function(t,r){KH(v[r],t,w,!0,x)}),function(t,r,i){var s=i.axesInfo=[];Sp(r,function(r,i){var u=r.axisPointerModel.option,c=t[i];c?(r.useHandle||(u.status="show"),u.value=c.value,u.seriesDataIndices=(c.payloadBatch||[]).slice()):r.useHandle||(u.status="hide"),"show"===u.status&&s.push({axisDim:r.axis.dim,axisIndex:r.axis.model.componentIndex,value:u.value})})}(_,v,x),function(t,r,i,s){if(Kj(r)||!t.list.length){s({type:"hideTip"});return}var u=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};s({type:"showTip",escapeConnect:!0,x:r[0],y:r[1],tooltipOption:i.tooltipOption,position:i.position,dataIndexInside:u.dataIndexInside,dataIndex:u.dataIndex,seriesIndex:u.seriesIndex,dataByCoordSys:t.list})}(b,u,t,c),function(t,r,i){var s=i.getZr(),u="axisPointerLastHighlights",c=Kz(s)[u]||{},h=Kz(s)[u]={};Sp(t,function(t,r){var i=t.axisPointerModel.option;"show"===i.status&&t.triggerEmphasis&&Sp(i.seriesDataIndices,function(t){h[t.seriesIndex+" | "+t.dataIndex]=t})});var p=[],f=[];Sp(c,function(t,r){h[r]||f.push(t)}),Sp(h,function(t,r){c[r]||p.push(t)}),f.length&&i.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:f}),p.length&&i.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:p})}(v,c,i),x}}function KH(t,r,i,s,u){var c=t.axis;if(!c.scale.isBlank()&&!!c.containData(r)){if(!t.involveSeries){i.showPointer(t,r);return}var h=function(t,r){var i=r.axis,s=i.dim,u=t,c=[],h=Number.MAX_VALUE,p=-1;return Sp(r.seriesModels,function(r,f){var v,y,x=r.getData().mapDimensionsAll(s);if(r.getAxisTooltipData){var _=r.getAxisTooltipData(x,t,i);y=_.dataIndices,v=_.nestestValue}else{if(!(y=r.getData().indicesOfNearest(x[0],t,"category"===i.type?.5:null)).length)return;v=r.getData().get(x[0],y[0])}if(null!=v&&!!isFinite(v)){var b=t-v,w=Math.abs(b);w<=h&&((w<h||b>=0&&p<0)&&(h=w,p=b,u=v,c.length=0),Sp(y,function(t){c.push({seriesIndex:r.seriesIndex,dataIndexInside:t,dataIndex:r.getData().getRawIndex(t)})}))}}),{payloadBatch:c,snapToValue:u}}(r,t),p=h.payloadBatch,f=h.snapToValue;p[0]&&null==u.seriesIndex&&So(u,p[0]),!s&&t.snap&&c.containData(f)&&null!=f&&(r=f),i.showPointer(t,r,p),i.showTooltip(t,h,f)}}function KG(t,r,i,s){t[r.key]={value:i,payloadBatch:s}}function KV(t,r,i,s){var u=i.payloadBatch,c=r.axis,h=c.model,p=r.axisPointerModel;if(!!r.triggerTooltip&&!!u.length){var f=r.coordSys.model,v=VO(f),y=t.map[v];!y&&(y=t.map[v]={coordSysId:f.id,coordSysIndex:f.componentIndex,coordSysType:f.type,coordSysMainType:f.mainType,dataByAxis:[]},t.list.push(y)),y.dataByAxis.push({axisDim:c.dim,axisIndex:h.componentIndex,axisType:h.type,axisId:h.id,value:s,valueLabelOpt:{precision:p.get(["label","precision"]),formatter:p.get(["label","formatter"])},seriesDataIndices:u.slice()})}}function KW(t){var r=t.axis.model,i={},s=i.axisDim=t.axis.dim;return i.axisIndex=i[s+"AxisIndex"]=r.componentIndex,i.axisName=i[s+"AxisName"]=r.name,i.axisId=i[s+"AxisId"]=r.id,i}function Kj(t){return!t||null==t[0]||isNaN(t[0])||null==t[1]||isNaN(t[1])}function KX(t){VN.registerAxisPointerClass("CartesianAxisPointer",KT),t.registerComponentModel(KP),t.registerComponentView(KN),t.registerPreprocessor(function(t){if(t){t.axisPointer&&0!==t.axisPointer.length||(t.axisPointer={});var r=t.axisPointer.link;r&&!Sb(r)&&(t.axisPointer.link=[r])}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(t,r){var i,s;t.getComponent("axisPointer").coordSysAxesInfo=(function(t,r,i){var s=r.getComponent("tooltip"),u=r.getComponent("axisPointer"),c=u.get("link",!0)||[],h=[];Sp(i.getCoordinateSystems(),function(i){if(!!i.axisPointerEnabled){var p=VO(i.model),f=t.coordSysAxesInfo[p]={};t.coordSysMap[p]=i;var v=i.model.getModel("tooltip",s);if(Sp(i.getAxes(),S_(b,!1,null)),i.getTooltipAxes&&s&&v.get("show")){var y="axis"===v.get("trigger"),x="cross"===v.get(["axisPointer","type"]),_=i.getTooltipAxes(v.get(["axisPointer","axis"]));(y||x)&&Sp(_.baseAxes,S_(b,!x||"cross",y)),x&&Sp(_.otherAxes,S_(b,"cross",!1))}}function b(s,p,y){var x=y.model.getModel("axisPointer",u),_=x.get("show");if(!!_&&("auto"!==_||!!s||!!Vk(x))){null==p&&(p=x.get("triggerTooltip"));var b=(x=s?function(t,r,i,s,u,c){var h=r.getModel("axisPointer"),p={};Sp(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(t){p[t]=Sr(h.get(t))}),p.snap="category"!==t.type&&!!c,"cross"===h.get("type")&&(p.type="line");var f=p.label||(p.label={});if(null==f.show&&(f.show=!1),"cross"===u){var v=h.get(["label","show"]);if(f.show=null==v||v,!c){var y=p.lineStyle=h.get("crossStyle");y&&Ss(f,y.textStyle)}}return t.model.getModel("axisPointer",new Pp(p,i,s))}(y,v,u,r,s,p):x).get("snap"),w=x.get("triggerEmphasis"),S=VO(y.model),M=p||b||"category"===y.type,A=t.axesInfo[S]={key:S,axis:y,coordSys:i,axisPointerModel:x,triggerTooltip:p,triggerEmphasis:w,involveSeries:M,snap:b,useHandle:Vk(x),seriesModels:[],linkGroup:null};f[S]=A,t.seriesInvolved=t.seriesInvolved||M;var C=function(t,r){for(var i=r.model,s=r.dim,u=0;u<t.length;u++){var c=t[u]||{};if(VR(c[s+"AxisId"],i.id)||VR(c[s+"AxisIndex"],i.componentIndex)||VR(c[s+"AxisName"],i.name))return u}}(c,y);if(null!=C){var T=h[C]||(h[C]={axesInfo:{}});T.axesInfo[S]=A,T.mapper=c[C].mapper,A.linkGroup=T}}}})}(s={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}},i=t,r),s.seriesInvolved&&function(t,r){r.eachSeries(function(r){var i=r.coordinateSystem,s=r.get(["tooltip","trigger"],!0),u=r.get(["tooltip","show"],!0);if(!!i&&"none"!==s&&!1!==s&&"item"!==s&&!1!==u&&!1!==r.get(["axisPointer","show"],!0))Sp(t.coordSysAxesInfo[VO(i.model)],function(t){var s=t.axis;i.getAxis(s.dim)===s&&(t.seriesModels.push(r),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=r.getData().count())})})}(s,i),s)}),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},KU)}var KY=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.prototype.makeElOption=function(t,r,i,s,u){var c=i.axis;"angle"===c.dim&&(this.animationThreshold=Math.PI/18);var h=c.polar,p=h.getOtherAxis(c).getExtent(),f=c.dataToCoord(r),v=s.get("type");if(v&&"none"!==v){var y=Kx(s),x=K$[v](c,h,f,p);x.style=y,t.graphicKey=x.type,t.pointer=x}var _=s.get(["label","margin"]),b=function(t,r,i,s,u){var c,h,p,f=r.axis,v=f.dataToCoord(t),y=s.getAngleAxis().getExtent()[0];y=y/180*Math.PI;var x=s.getRadiusAxis().getExtent();if("radius"===f.dim){var _=MH();MX(_,_,y),Mj(_,_,[s.cx,s.cy]),c=Oq([v,-u],_);var b=r.getModel("axisLabel").get("rotate")||0,w=VC.innerTextLayout(y,b*Math.PI/180,-1);h=w.textAlign,p=w.textVerticalAlign}else{var S=x[1];c=s.coordToPoint([S+u,v]);var M=s.cx,A=s.cy;h=Math.abs(c[0]-M)/S<.3?"center":c[0]>M?"left":"right",p=Math.abs(c[1]-A)/S<.3?"middle":c[1]>A?"top":"bottom"}return{position:c,align:h,verticalAlign:p}}(r,i,s,h,_);K_(t,i,s,u,b)},r}(Kf),K$={line:function(t,r,i,s){return"angle"===t.dim?{type:"Line",shape:KM(r.coordToPoint([s[0],i]),r.coordToPoint([s[1],i]))}:{type:"Circle",shape:{cx:r.cx,cy:r.cy,r:i}}},shadow:function(t,r,i,s){var u=Math.max(1,t.getBandWidth()),c=Math.PI/180;return"angle"===t.dim?{type:"Sector",shape:KC(r.cx,r.cy,s[0],s[1],(-i-u/2)*c,(-i+u/2)*c)}:{type:"Sector",shape:KC(r.cx,r.cy,i-u/2,i+u/2,0,2*Math.PI)}}},KJ=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.findAxisModel=function(t){var r;return this.ecModel.eachComponent(t,function(t){t.getCoordSysModel()===this&&(r=t)},this),r},r.type="polar",r.dependencies=["radiusAxis","angleAxis"],r.defaultOption={z:0,center:["50%","50%"],radius:"80%"},r}(Ru),KZ=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Er).models[0]},r.type="polarAxis",r}(Ru);Sh(KZ,zG);var KK=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.type="angleAxis",r}(KZ),Kq=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.type="radiusAxis",r}(KZ),KQ=function(t){function r(r,i){return t.call(this,"radius",r,i)||this}return wU(r,t),r.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)["radius"===this.dim?0:1]},r}(Uu);KQ.prototype.dataToRadius=Uu.prototype.dataToCoord,KQ.prototype.radiusToData=Uu.prototype.coordToData;var K0=T7(),K1=function(t){function r(r,i){return t.call(this,"angle",r,i||[0,360])||this}return wU(r,t),r.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)["radius"===this.dim?0:1]},r.prototype.calculateCategoryInterval=function(){var t=this.getLabelModel(),r=this.scale,i=r.getExtent(),s=r.count();if(i[1]-i[0]<1)return 0;var u=i[0],c=Math.abs(this.dataToCoord(u+1)-this.dataToCoord(u)),h=Math.max(C7(null==u?"":u+"",t.getFont(),"center","top").height,7)/c;isNaN(h)&&(h=1/0);var p=Math.max(0,Math.floor(h)),f=K0(this.model),v=f.lastAutoInterval,y=f.lastTickCount;return null!=v&&null!=y&&1>=Math.abs(v-p)&&1>=Math.abs(y-s)&&v>p?p=v:(f.lastTickCount=s,f.lastAutoInterval=p),p},r}(Uu);K1.prototype.dataToAngle=Uu.prototype.dataToCoord,K1.prototype.angleToData=Uu.prototype.coordToData;var K2=["radius","angle"],K3=function(){function t(t){this.dimensions=K2,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new KQ,this._angleAxis=new K1,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return t.prototype.containPoint=function(t){var r=this.pointToCoord(t);return this._radiusAxis.contain(r[0])&&this._angleAxis.contain(r[1])},t.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},t.prototype.getAxis=function(t){return this["_"+t+"Axis"]},t.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},t.prototype.getAxesByScale=function(t){var r=[],i=this._angleAxis,s=this._radiusAxis;return i.scale.type===t&&r.push(i),s.scale.type===t&&r.push(s),r},t.prototype.getAngleAxis=function(){return this._angleAxis},t.prototype.getRadiusAxis=function(){return this._radiusAxis},t.prototype.getOtherAxis=function(t){var r=this._angleAxis;return t===r?this._radiusAxis:r},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},t.prototype.getTooltipAxes=function(t){var r=null!=t&&"auto"!==t?this.getAxis(t):this.getBaseAxis();return{baseAxes:[r],otherAxes:[this.getOtherAxis(r)]}},t.prototype.dataToPoint=function(t,r){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],r),this._angleAxis.dataToAngle(t[1],r)])},t.prototype.pointToData=function(t,r){var i=this.pointToCoord(t);return[this._radiusAxis.radiusToData(i[0],r),this._angleAxis.angleToData(i[1],r)]},t.prototype.pointToCoord=function(t){var r=t[0]-this.cx,i=t[1]-this.cy,s=this.getAngleAxis(),u=s.getExtent(),c=Math.min(u[0],u[1]),h=Math.max(u[0],u[1]);s.inverse?c=h-360:h=c+360;var p=Math.sqrt(r*r+i*i);r/=p;for(var f=Math.atan2(-(i/=p),r)/Math.PI*180,v=f<c?1:-1;f<c||f>h;)f+=360*v;return[p,f]},t.prototype.coordToPoint=function(t){var r=t[0],i=t[1]/180*Math.PI;return[Math.cos(i)*r+this.cx,-Math.sin(i)*r+this.cy]},t.prototype.getArea=function(){var t=this.getAngleAxis(),r=this.getRadiusAxis().getExtent().slice();r[0]>r[1]&&r.reverse();var i=t.getExtent(),s=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:r[0],r:r[1],startAngle:-i[0]*s,endAngle:-i[1]*s,clockwise:t.inverse,contain:function(t,r){var i=t-this.cx,s=r-this.cy,u=i*i+s*s-1e-4,c=this.r,h=this.r0;return u<=c*c&&u>=h*h}}},t.prototype.convertToPixel=function(t,r,i){return K5(r)===this?this.dataToPoint(i):null},t.prototype.convertFromPixel=function(t,r,i){return K5(r)===this?this.pointToData(i):null},t}();function K5(t){var r=t.seriesModel,i=t.polarModel;return i&&i.coordinateSystem||r&&r.coordinateSystem}function K4(t,r){var i=this,s=i.getAngleAxis(),u=i.getRadiusAxis();if(s.scale.setExtent(1/0,-1/0),u.scale.setExtent(1/0,-1/0),t.eachSeries(function(t){if(t.coordinateSystem===i){var r=t.getData();Sp(zH(r,"radius"),function(t){u.scale.unionExtentFromData(r,t)}),Sp(zH(r,"angle"),function(t){s.scale.unionExtentFromData(r,t)})}}),zO(s.scale,s.model),zO(u.scale,u.model),"category"===s.type&&!s.onBand){var c=s.getExtent(),h=360/s.scale.count();s.inverse?c[1]+=h:c[1]-=h,s.setExtent(c[0],c[1])}}function K6(t,r){var i;if(t.type=r.get("type"),t.scale=zB(r),t.onBand=r.get("boundaryGap")&&"category"===t.type,t.inverse=r.get("inverse"),"angleAxis"===r.mainType){t.inverse=t.inverse!==r.get("clockwise");var s=r.get("startAngle"),u=null!==(i=r.get("endAngle"))&&void 0!==i?i:s+(t.inverse?-360:360);t.setExtent(s,u)}r.axis=t,t.model=r}let K9={dimensions:K2,create:function(t,r){var i=[];return t.eachComponent("polar",function(t,s){var u,c,h,p,f,v,y,x,_,b,w=new K3(s+"");w.update=K4;var S=w.getRadiusAxis(),M=w.getAngleAxis(),A=t.findAxisModel("radiusAxis"),C=t.findAxisModel("angleAxis");K6(S,A),K6(M,C),u=w,c=t,h=r,p=c.get("center"),f=h.getWidth(),v=h.getHeight(),u.cx=TT(p[0],f),u.cy=TT(p[1],v),y=u.getRadiusAxis(),x=Math.min(f,v)/2,null==(_=c.get("radius"))?_=[0,"100%"]:Sb(_)||(_=[0,_]),b=[TT(_[0],x),TT(_[1],x)],y.inverse?y.setExtent(b[1],b[0]):y.setExtent(b[0],b[1]),i.push(w),t.coordinateSystem=w,w.model=t}),t.eachSeries(function(t){if("polar"===t.get("coordinateSystem")){var r=t.getReferringComponents("polar",Er).models[0];t.coordinateSystem=r.coordinateSystem}}),i}};var K8=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function K7(t,r,i){r[1]>r[0]&&(r=r.slice().reverse());var s=t.coordToPoint([r[0],i]),u=t.coordToPoint([r[1],i]);return{x1:s[0],y1:s[1],x2:u[0],y2:u[1]}}function qe(t){return t.getRadiusAxis().inverse?0:1}function qt(t){var r=t[0],i=t[t.length-1];r&&i&&1e-4>Math.abs(Math.abs(r.coord-i.coord)-360)&&t.pop()}var qn=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.axisPointerClass="PolarAxisPointer",i}return wU(r,t),r.prototype.render=function(t,r){if(this.group.removeAll(),!!t.get("show")){var i=t.axis,s=i.polar,u=s.getRadiusAxis().getExtent(),c=i.getTicksCoords(),h=i.getMinorTicksCoords(),p=Sf(i.getViewLabels(),function(t){t=Sr(t);var r=i.scale,s="ordinal"===r.type?r.getRawOrdinalNumber(t.tickValue):t.tickValue;return t.coord=i.dataToCoord(s),t});qt(p),qt(c),Sp(K8,function(r){t.get([r,"show"])&&(!i.scale.isBlank()||"axisLine"===r)&&qr[r](this.group,t,s,c,h,u,p)},this)}},r.type="angleAxis",r}(VN),qr={axisLine:function(t,r,i,s,u,c){var h,p=r.getModel(["axisLine","lineStyle"]),f=i.getAngleAxis(),v=Math.PI/180,y=f.getExtent(),x=qe(i),_=x?0:1,b=360===Math.abs(y[1]-y[0])?"Circle":"Arc";(h=0===c[_]?new et[b]({shape:{cx:i.cx,cy:i.cy,r:c[x],startAngle:-y[0]*v,endAngle:-y[1]*v,clockwise:f.inverse},style:p.getLineStyle(),z2:1,silent:!0}):new Oi({shape:{cx:i.cx,cy:i.cy,r:c[x],r0:c[_]},style:p.getLineStyle(),z2:1,silent:!0})).style.fill=null,t.add(h)},axisTick:function(t,r,i,s,u,c){var h=r.getModel("axisTick"),p=(h.get("inside")?-1:1)*h.get("length"),f=c[qe(i)],v=Sf(s,function(t){return new Og({shape:K7(i,[f,f+p],t.coord)})});t.add(OX(v,{style:Ss(h.getModel("lineStyle").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})}))},minorTick:function(t,r,i,s,u,c){if(!!u.length){for(var h=r.getModel("axisTick"),p=r.getModel("minorTick"),f=(h.get("inside")?-1:1)*p.get("length"),v=c[qe(i)],y=[],x=0;x<u.length;x++)for(var _=0;_<u[x].length;_++)y.push(new Og({shape:K7(i,[v,v+f],u[x][_].coord)}));t.add(OX(y,{style:Ss(p.getModel("lineStyle").getLineStyle(),Ss(h.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(t,r,i,s,u,c,h){var p=r.getCategories(!0),f=r.getModel("axisLabel"),v=f.get("margin"),y=r.get("triggerEvent");Sp(h,function(s,u){var h=f,x=s.tickValue,_=c[qe(i)],b=i.coordToPoint([_+v,s.coord]),w=i.cx,S=i.cy,M=Math.abs(b[0]-w)/_<.3?"center":b[0]>w?"left":"right",A=Math.abs(b[1]-S)/_<.3?"middle":b[1]>S?"top":"bottom";if(p&&p[x]){var C=p[x];SC(C)&&C.textStyle&&(h=new Pp(C.textStyle,f,f.ecModel))}var T=new I0({silent:VC.isLabelSilent(r),style:D2(h,{x:b[0],y:b[1],fill:h.getTextColor()||r.get(["axisLine","lineStyle","color"]),text:s.formattedLabel,align:M,verticalAlign:A})});if(t.add(T),y){var I=VC.makeAxisEventDataBase(r);I.targetType="axisLabel",I.value=s.rawLabel,I1(T).eventData=I}},this)},splitLine:function(t,r,i,s,u,c){var h=r.getModel("splitLine").getModel("lineStyle"),p=h.get("color"),f=0;p=p instanceof Array?p:[p];for(var v=[],y=0;y<s.length;y++){var x=f++%p.length;v[x]=v[x]||[],v[x].push(new Og({shape:K7(i,c,s[y].coord)}))}for(var y=0;y<v.length;y++)t.add(OX(v[y],{style:Ss({stroke:p[y%p.length]},h.getLineStyle()),silent:!0,z:r.get("z")}))},minorSplitLine:function(t,r,i,s,u,c){if(!!u.length){for(var h=r.getModel("minorSplitLine").getModel("lineStyle"),p=[],f=0;f<u.length;f++)for(var v=0;v<u[f].length;v++)p.push(new Og({shape:K7(i,c,u[f][v].coord)}));t.add(OX(p,{style:h.getLineStyle(),silent:!0,z:r.get("z")}))}},splitArea:function(t,r,i,s,u,c){if(!!s.length){var h=r.getModel("splitArea").getModel("areaStyle"),p=h.get("color"),f=0;p=p instanceof Array?p:[p];for(var v=[],y=Math.PI/180,x=-s[0].coord*y,_=Math.min(c[0],c[1]),b=Math.max(c[0],c[1]),w=r.get("clockwise"),S=1,M=s.length;S<=M;S++){var A=S===M?s[0].coord:s[S].coord,C=f++%p.length;v[C]=v[C]||[],v[C].push(new Ot({shape:{cx:i.cx,cy:i.cy,r0:_,r:b,startAngle:x,endAngle:-A*y,clockwise:w},silent:!0})),x=-A*y}for(var S=0;S<v.length;S++)t.add(OX(v[S],{style:Ss({fill:p[S%p.length]},h.getAreaStyle()),silent:!0}))}}},qi=["axisLine","axisTickLabel","axisName"],qa=["splitLine","splitArea","minorSplitLine"],qo=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.axisPointerClass="PolarAxisPointer",i}return wU(r,t),r.prototype.render=function(t,r){if(this.group.removeAll(),!!t.get("show")){var i=this._axisGroup,s=this._axisGroup=new Tf;this.group.add(s);var u=t.axis,c=u.polar,h=c.getAngleAxis(),p=u.getTicksCoords(),f=u.getMinorTicksCoords(),v=h.getExtent()[0],y=u.getExtent(),x=function(t,r,i){return{position:[t.cx,t.cy],rotation:i/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:r.getModel("axisLabel").get("rotate"),z2:1}}(c,t,v),_=new VC(t,x);Sp(qi,_.add,_),s.add(_.getGroup()),O1(i,s,t),Sp(qa,function(r){t.get([r,"show"])&&!u.scale.isBlank()&&qs[r](this.group,t,c,v,y,p,f)},this)}},r.type="radiusAxis",r}(VN),qs={splitLine:function(t,r,i,s,u,c){var h=r.getModel("splitLine").getModel("lineStyle"),p=h.get("color"),f=0,v=i.getAngleAxis(),y=Math.PI/180,x=v.getExtent(),_=360===Math.abs(x[1]-x[0])?"Circle":"Arc";p=p instanceof Array?p:[p];for(var b=[],w=0;w<c.length;w++){var S=f++%p.length;b[S]=b[S]||[],b[S].push(new et[_]({shape:{cx:i.cx,cy:i.cy,r:Math.max(c[w].coord,0),startAngle:-x[0]*y,endAngle:-x[1]*y,clockwise:v.inverse}}))}for(var w=0;w<b.length;w++)t.add(OX(b[w],{style:Ss({stroke:p[w%p.length],fill:null},h.getLineStyle()),silent:!0}))},minorSplitLine:function(t,r,i,s,u,c,h){if(!!h.length){for(var p=r.getModel("minorSplitLine").getModel("lineStyle"),f=[],v=0;v<h.length;v++)for(var y=0;y<h[v].length;y++)f.push(new k$({shape:{cx:i.cx,cy:i.cy,r:h[v][y].coord}}));t.add(OX(f,{style:Ss({fill:null},p.getLineStyle()),silent:!0}))}},splitArea:function(t,r,i,s,u,c){if(!!c.length){var h=r.getModel("splitArea").getModel("areaStyle"),p=h.get("color"),f=0;p=p instanceof Array?p:[p];for(var v=[],y=c[0].coord,x=1;x<c.length;x++){var _=f++%p.length;v[_]=v[_]||[],v[_].push(new Ot({shape:{cx:i.cx,cy:i.cy,r0:y,r:c[x].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),y=c[x].coord}for(var x=0;x<v.length;x++)t.add(OX(v[x],{style:Ss({fill:p[x%p.length]},h.getAreaStyle()),silent:!0}))}}};function ql(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function qu(t,r){return r.dim+t.model.componentIndex}let qc=function(t,r,i){var s={},u=function(t){var r={};Sp(t,function(t,i){var s=t.getData(),u=t.coordinateSystem,c=u.getBaseAxis(),h=qu(u,c),p=c.getExtent(),f="category"===c.type?c.getBandWidth():Math.abs(p[1]-p[0])/s.count(),v=r[h]||{bandWidth:f,remainedWidth:f,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},y=v.stacks;r[h]=v;var x=ql(t);!y[x]&&v.autoWidthCount++,y[x]=y[x]||{width:0,maxWidth:0};var _=TT(t.get("barWidth"),f),b=TT(t.get("barMaxWidth"),f),w=t.get("barGap"),S=t.get("barCategoryGap");_&&!y[x].width&&(_=Math.min(v.remainedWidth,_),y[x].width=_,v.remainedWidth-=_),b&&(y[x].maxWidth=b),null!=w&&(v.gap=w),null!=S&&(v.categoryGap=S)});var i={};return Sp(r,function(t,r){i[r]={};var s,u=t.stacks,c=t.bandWidth,h=TT(t.categoryGap,c),p=TT(t.gap,1),f=t.remainedWidth,v=t.autoWidthCount,y=(f-h)/(v+(v-1)*p);y=Math.max(y,0),Sp(u,function(t,r){var i=t.maxWidth;i&&i<y&&(i=Math.min(i,f),t.width&&(i=Math.min(i,t.width)),f-=i,t.width=i,v--)}),y=Math.max(y=(f-h)/(v+(v-1)*p),0);var x=0;Sp(u,function(t,r){!t.width&&(t.width=y),s=t,x+=t.width*(1+p)}),s&&(x-=s.width*p);var _=-x/2;Sp(u,function(t,s){i[r][s]=i[r][s]||{offset:_,width:t.width},_+=t.width*(1+p)})}),i}(Sm(r.getSeriesByType(t),function(t){return!r.isSeriesFiltered(t)&&t.coordinateSystem&&"polar"===t.coordinateSystem.type}));r.eachSeriesByType(t,function(t){if("polar"===t.coordinateSystem.type){var r=t.getData(),i=t.coordinateSystem,c=i.getBaseAxis(),h=qu(i,c),p=ql(t),f=u[h][p],v=f.offset,y=f.width,x=i.getOtherAxis(c),_=t.coordinateSystem.cx,b=t.coordinateSystem.cy,w=t.get("barMinHeight")||0,S=t.get("barMinAngle")||0;s[p]=s[p]||[];for(var M=r.mapDimension(x.dim),A=r.mapDimension(c.dim),C=FZ(r,M),T="radius"!==c.dim||!t.get("roundCap",!0),I=x.model.get("startValue"),D=x.dataToCoord(I||0),P=0,R=r.count();P<R;P++){var L=r.get(M,P),k=r.get(A,P),O=L>=0?"p":"n",B=D;C&&(!s[p][k]&&(s[p][k]={p:D,n:D}),B=s[p][k][O]);var N=void 0,F=void 0,z=void 0,U=void 0;if("radius"===x.dim){var H=x.dataToCoord(L)-D,G=c.dataToCoord(k);Math.abs(H)<w&&(H=(H<0?-1:1)*w),N=B,F=B+H,U=(z=G-v)-y,C&&(s[p][k][O]=F)}else{var V=x.dataToCoord(L,T)-D,W=c.dataToCoord(k);Math.abs(V)<S&&(V=(V<0?-1:1)*S),F=(N=W+v)+y,z=B,U=B+V,C&&(s[p][k][O]=U)}r.setItemLayout(P,{cx:_,cy:b,r0:N,r:F,startAngle:-z*Math.PI/180,endAngle:-U*Math.PI/180,clockwise:z>=U})}}})};var qh={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},qd={splitNumber:5},qp=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.type="polar",r}(kM);function qf(t,r){r=r||{};var i=t.coordinateSystem,s=t.axis,u={},c=s.position,h=s.orient,p=i.getRect(),f=[p.x,p.x+p.width,p.y,p.y+p.height],v={horizontal:{top:f[2],bottom:f[3]},vertical:{left:f[0],right:f[1]}};u.position=["vertical"===h?v.vertical[c]:f[0],"horizontal"===h?v.horizontal[c]:f[3]];u.rotation=Math.PI/2*({horizontal:0,vertical:1})[h];u.labelDirection=u.tickDirection=u.nameDirection=({top:-1,bottom:1,right:1,left:-1})[c],t.get(["axisTick","inside"])&&(u.tickDirection=-u.tickDirection),Sk(r.labelInside,t.get(["axisLabel","inside"]))&&(u.labelDirection=-u.labelDirection);var y=r.rotate;return null==y&&(y=t.get(["axisLabel","rotate"])),u.labelRotation="top"===c?-y:y,u.z2=1,u}var qg=["axisLine","axisTickLabel","axisName"],qm=["splitArea","splitLine"],qv=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.axisPointerClass="SingleAxisPointer",i}return wU(r,t),r.prototype.render=function(r,i,s,u){var c=this.group;c.removeAll();var h=this._axisGroup;this._axisGroup=new Tf;var p=qf(r),f=new VC(r,p);Sp(qg,f.add,f),c.add(this._axisGroup),c.add(f.getGroup()),Sp(qm,function(t){r.get([t,"show"])&&qy[t](this,this.group,this._axisGroup,r)},this),O1(h,this._axisGroup,r),t.prototype.render.call(this,r,i,s,u)},r.prototype.remove=function(){VU(this)},r.type="singleAxis",r}(VN),qy={splitLine:function(t,r,i,s){var u=s.axis;if(!u.scale.isBlank()){var c=s.getModel("splitLine"),h=c.getModel("lineStyle"),p=h.get("color");p=p instanceof Array?p:[p];for(var f=h.get("width"),v=s.coordinateSystem.getRect(),y=u.isHorizontal(),x=[],_=0,b=u.getTicksCoords({tickModel:c}),w=[],S=[],M=0;M<b.length;++M){var A=u.toGlobalCoord(b[M].coord);y?(w[0]=A,w[1]=v.y,S[0]=A,S[1]=v.y+v.height):(w[0]=v.x,w[1]=A,S[0]=v.x+v.width,S[1]=A);var C=new Og({shape:{x1:w[0],y1:w[1],x2:S[0],y2:S[1]},silent:!0});O$(C.shape,f);var T=_++%p.length;x[T]=x[T]||[],x[T].push(C)}for(var I=h.getLineStyle(["color"]),M=0;M<x.length;++M)r.add(OX(x[M],{style:Ss({stroke:p[M%p.length]},I),silent:!0}))}},splitArea:function(t,r,i,s){Vz(t,i,s,s)}},qx=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.getCoordSysModel=function(){return this},r.type="singleAxis",r.layoutMode="box",r.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},r}(Ru);Sh(qx,zG.prototype);var q_=function(t){function r(r,i,s,u,c){var h=t.call(this,r,i,s)||this;return h.type=u||"value",h.position=c||"bottom",h}return wU(r,t),r.prototype.isHorizontal=function(){var t=this.position;return"top"===t||"bottom"===t},r.prototype.pointToData=function(t,r){return this.coordinateSystem.pointToData(t)[0]},r}(Uu),qb=["single"],qw=function(){function t(t,r,i){this.type="single",this.dimension="single",this.dimensions=qb,this.axisPointerEnabled=!0,this.model=t,this._init(t,r,i)}return t.prototype._init=function(t,r,i){var s=new q_(this.dimension,zB(t),[0,0],t.get("type"),t.get("position")),u="category"===s.type;s.onBand=u&&t.get("boundaryGap"),s.inverse=t.get("inverse"),s.orient=t.get("orient"),t.axis=s,s.model=t,s.coordinateSystem=this,this._axis=s},t.prototype.update=function(t,r){t.eachSeries(function(t){if(t.coordinateSystem===this){var r=t.getData();Sp(r.mapDimensionsAll(this.dimension),function(t){this._axis.scale.unionExtentFromData(r,t)},this),zO(this._axis.scale,this._axis.model)}},this)},t.prototype.resize=function(t,r){this._rect=Rt({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:r.getWidth(),height:r.getHeight()}),this._adjustAxis()},t.prototype.getRect=function(){return this._rect},t.prototype._adjustAxis=function(){var t=this._rect,r=this._axis,i=r.isHorizontal(),s=i?[0,t.width]:[0,t.height],u=r.inverse?1:0;r.setExtent(s[u],s[1-u]),this._updateAxisTransform(r,i?t.x:t.y)},t.prototype._updateAxisTransform=function(t,r){var i=t.getExtent(),s=i[0]+i[1],u=t.isHorizontal();t.toGlobalCoord=u?function(t){return t+r}:function(t){return s-t+r},t.toLocalCoord=u?function(t){return t-r}:function(t){return s-t+r}},t.prototype.getAxis=function(){return this._axis},t.prototype.getBaseAxis=function(){return this._axis},t.prototype.getAxes=function(){return[this._axis]},t.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},t.prototype.containPoint=function(t){var r=this.getRect(),i=this.getAxis();return"horizontal"===i.orient?i.contain(i.toLocalCoord(t[0]))&&t[1]>=r.y&&t[1]<=r.y+r.height:i.contain(i.toLocalCoord(t[1]))&&t[0]>=r.y&&t[0]<=r.y+r.height},t.prototype.pointToData=function(t){var r=this.getAxis();return[r.coordToData(r.toLocalCoord(t["horizontal"===r.orient?0:1]))]},t.prototype.dataToPoint=function(t){var r=this.getAxis(),i=this.getRect(),s=[],u="horizontal"===r.orient?0:1;return t instanceof Array&&(t=t[0]),s[u]=r.toGlobalCoord(r.dataToCoord(+t)),s[1-u]=0===u?i.y+i.height/2:i.x+i.width/2,s},t.prototype.convertToPixel=function(t,r,i){return qS(r)===this?this.dataToPoint(i):null},t.prototype.convertFromPixel=function(t,r,i){return qS(r)===this?this.pointToData(i):null},t}();function qS(t){var r=t.seriesModel,i=t.singleAxisModel;return i&&i.coordinateSystem||r&&r.coordinateSystem}let qM={create:function(t,r){var i=[];return t.eachComponent("singleAxis",function(s,u){var c=new qw(s,t,r);c.name="single_"+u,c.resize(s,r),s.coordinateSystem=c,i.push(c)}),t.eachSeries(function(t){if("singleAxis"===t.get("coordinateSystem")){var r=t.getReferringComponents("singleAxis",Er).models[0];t.coordinateSystem=r&&r.coordinateSystem}}),i},dimensions:qb};var qA=["x","y"],qC=["width","height"],qT=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.prototype.makeElOption=function(t,r,i,s,u){var c=i.axis,h=c.coordinateSystem,p=qD(h,1-qI(c)),f=h.dataToPoint(r)[0],v=s.get("type");if(v&&"none"!==v){var y=Kx(s),x=qE[v](c,f,p);x.style=y,t.graphicKey=x.type,t.pointer=x}KS(r,t,qf(i),i,s,u)},r.prototype.getHandleTransform=function(t,r,i){var s=qf(r,{labelInside:!1});s.labelMargin=i.get(["handle","margin"]);var u=Kw(r.axis,t,s);return{x:u[0],y:u[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},r.prototype.updateHandleTransform=function(t,r,i,s){var u=i.axis,c=u.coordinateSystem,h=qI(u),p=qD(c,h),f=[t.x,t.y];f[h]+=r[h],f[h]=Math.min(p[1],f[h]),f[h]=Math.max(p[0],f[h]);var v=qD(c,1-h),y=(v[1]+v[0])/2,x=[y,y];return x[h]=f[h],{x:f[0],y:f[1],rotation:t.rotation,cursorPoint:x,tooltipOption:{verticalAlign:"middle"}}},r}(Kf),qE={line:function(t,r,i){return{type:"Line",subPixelOptimize:!0,shape:KM([r,i[0]],[r,i[1]],qI(t))}},shadow:function(t,r,i){var s=t.getBandWidth(),u=i[1]-i[0];return{type:"Rect",shape:KA([r-s/2,i[0]],[s,u],qI(t))}}};function qI(t){return t.isHorizontal()?0:1}function qD(t,r){var i=t.getRect();return[i[qA[r]],i[qA[r]]+i[qC[r]]]}var qP=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.type="single",r}(kM),qR=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.init=function(r,i,s){var u=Ra(r);t.prototype.init.apply(this,arguments),qL(r,u)},r.prototype.mergeOption=function(r){t.prototype.mergeOption.apply(this,arguments),qL(this.option,r)},r.prototype.getCellSize=function(){return this.option.cellSize},r.type="calendar",r.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},r}(Ru);function qL(t,r){var i,s=t.cellSize;1===(i=Sb(s)?s:t.cellSize=[s,s]).length&&(i[1]=i[0]);var u=Sf([0,1],function(t){var s,u;if(null!=(s=r)[P7[u=t][0]]||null!=s[P7[u][1]]&&null!=s[P7[u][2]])i[t]="auto";return null!=i[t]&&"auto"!==i[t]});Ri(t,r,{type:"box",ignoreSize:u})}var qk=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.render=function(t,r,i){var s=this.group;s.removeAll();var u=t.coordinateSystem,c=u.getRangeInfo(),h=u.getOrient(),p=r.getLocaleModel();this._renderDayRect(t,c,s),this._renderLines(t,c,h,s),this._renderYearText(t,c,h,s),this._renderMonthText(t,p,h,s),this._renderWeekText(t,p,c,h,s)},r.prototype._renderDayRect=function(t,r,i){for(var s=t.coordinateSystem,u=t.getModel("itemStyle").getItemStyle(),c=s.getCellWidth(),h=s.getCellHeight(),p=r.start.time;p<=r.end.time;p=s.getNextNDay(p,1).time){var f=s.dataToRect([p],!1).tl,v=new IF({shape:{x:f[0],y:f[1],width:c,height:h},cursor:"default",style:u});i.add(v)}},r.prototype._renderLines=function(t,r,i,s){var u=this,c=t.coordinateSystem,h=t.getModel(["splitLine","lineStyle"]).getLineStyle(),p=t.get(["splitLine","show"]),f=h.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var v=r.start,y=0;v.time<=r.end.time;y++){_(v.formatedDate),0===y&&(v=c.getDateInfo(r.start.y+"-"+r.start.m));var x=v.date;x.setMonth(x.getMonth()+1),v=c.getDateInfo(x)}function _(r){u._firstDayOfMonth.push(c.getDateInfo(r)),u._firstDayPoints.push(c.dataToRect([r],!1).tl);var f=u._getLinePointsOfOneWeek(t,r,i);u._tlpoints.push(f[0]),u._blpoints.push(f[f.length-1]),p&&u._drawSplitline(f,h,s)}_(c.getNextNDay(r.end.time,1).formatedDate),p&&this._drawSplitline(u._getEdgesPoints(u._tlpoints,f,i),h,s),p&&this._drawSplitline(u._getEdgesPoints(u._blpoints,f,i),h,s)},r.prototype._getEdgesPoints=function(t,r,i){var s=[t[0].slice(),t[t.length-1].slice()],u="horizontal"===i?0:1;return s[0][u]=s[0][u]-r/2,s[1][u]=s[1][u]+r/2,s},r.prototype._drawSplitline=function(t,r,i){var s=new Oh({z2:20,shape:{points:t},style:r});i.add(s)},r.prototype._getLinePointsOfOneWeek=function(t,r,i){for(var s=t.coordinateSystem,u=s.getDateInfo(r),c=[],h=0;h<7;h++){var p=s.getNextNDay(u.time,h),f=s.dataToRect([p.time],!1);c[2*p.day]=f.tl,c[2*p.day+1]=f["horizontal"===i?"bl":"tr"]}return c},r.prototype._formatterLabel=function(t,r){if(SS(t)&&t){var i,s;return i=t,Sp(r,function(t,r){i=i.replace("{"+r+"}",t)}),i}return Sw(t)?t(r):r.nameMap},r.prototype._yearTextPositionControl=function(t,r,i,s,u){var c=r[0],h=r[1],p=["center","bottom"];"bottom"===s?(h+=u,p=["center","top"]):"left"===s?c-=u:"right"===s?(c+=u,p=["center","top"]):h-=u;var f=0;return("left"===s||"right"===s)&&(f=Math.PI/2),{rotation:f,x:c,y:h,style:{align:p[0],verticalAlign:p[1]}}},r.prototype._renderYearText=function(t,r,i,s){var u=t.getModel("yearLabel");if(!!u.get("show")){var c=u.get("margin"),h=u.get("position");!h&&(h="horizontal"!==i?"top":"left");var p=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],f=(p[0][0]+p[1][0])/2,v=(p[0][1]+p[1][1])/2,y="horizontal"===i?0:1,x={top:[f,p[y][1]],bottom:[f,p[1-y][1]],left:[p[1-y][0],v],right:[p[y][0],v]},_=r.start.y;+r.end.y>+r.start.y&&(_=_+"-"+r.end.y);var b=u.get("formatter"),w={start:r.start.y,end:r.end.y,nameMap:_},S=new I0({z2:30,style:D2(u,{text:this._formatterLabel(b,w)})});S.attr(this._yearTextPositionControl(S,x[h],i,h,c)),s.add(S)}},r.prototype._monthTextPositionControl=function(t,r,i,s,u){var c="left",h="top",p=t[0],f=t[1];return"horizontal"===i?(f+=u,r&&(c="center"),"start"===s&&(h="bottom")):(p+=u,r&&(h="middle"),"start"===s&&(c="right")),{x:p,y:f,align:c,verticalAlign:h}},r.prototype._renderMonthText=function(t,r,i,s){var u=t.getModel("monthLabel");if(!!u.get("show")){var c=u.get("nameMap"),h=u.get("margin"),p=u.get("position"),f=u.get("align"),v=[this._tlpoints,this._blpoints];if(!c||SS(c)){if(c)r=Py[c]||r;c=r.get(["time","monthAbbr"])||[]}var y="start"===p?0:1,x="horizontal"===i?0:1;h="start"===p?-h:h;for(var _="center"===f,b=0;b<v[y].length-1;b++){var w=v[y][b].slice(),S=this._firstDayOfMonth[b];if(_){var M=this._firstDayPoints[b];w[x]=(M[x]+v[0][b+1][x])/2}var A=u.get("formatter"),C=c[+S.m-1],T={yyyy:S.y,yy:(S.y+"").slice(2),MM:S.m,M:+S.m,nameMap:C},I=new I0({z2:30,style:So(D2(u,{text:this._formatterLabel(A,T)}),this._monthTextPositionControl(w,_,i,p,h))});s.add(I)}}},r.prototype._weekTextPositionControl=function(t,r,i,s,u){var c="center",h="middle",p=t[0],f=t[1],v="start"===i;return"horizontal"===r?(p=p+s+(v?1:-1)*u[0]/2,c=v?"right":"left"):(f=f+s+(v?1:-1)*u[1]/2,h=v?"bottom":"top"),{x:p,y:f,align:c,verticalAlign:h}},r.prototype._renderWeekText=function(t,r,i,s,u){var c=t.getModel("dayLabel");if(!!c.get("show")){var h=t.coordinateSystem,p=c.get("position"),f=c.get("nameMap"),v=c.get("margin"),y=h.getFirstDayOfWeek();if(!f||SS(f)){if(f)r=Py[f]||r;f=r.get(["time","dayOfWeekShort"])||Sf(r.get(["time","dayOfWeekAbbr"]),function(t){return t[0]})}var x=h.getNextNDay(i.end.time,7-i.lweek).time,_=[h.getCellWidth(),h.getCellHeight()];v=TT(v,Math.min(_[1],_[0])),"start"===p&&(x=h.getNextNDay(i.start.time,-(7+i.fweek)).time,v=-v);for(var b=0;b<7;b++){var w=h.getNextNDay(x,b),S=h.dataToRect([w.time],!1).center,M=b,A=new I0({z2:30,style:So(D2(c,{text:f[M=Math.abs((b+y)%7)]}),this._weekTextPositionControl(S,s,p,v,_))});u.add(A)}}},r.type="calendar",r}(kM),qO=function(){function t(r,i,s){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=r}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(t){var r=(t=Tz(t)).getFullYear(),i=t.getMonth()+1,s=i<10?"0"+i:""+i,u=t.getDate(),c=u<10?"0"+u:""+u,h=t.getDay();return{y:r+"",m:s,d:c,day:h=Math.abs((h+7-this.getFirstDayOfWeek())%7),time:t.getTime(),formatedDate:r+"-"+s+"-"+c,date:t}},t.prototype.getNextNDay=function(t,r){return 0===(r=r||0)?this.getDateInfo(t):((t=new Date(this.getDateInfo(t).time)).setDate(t.getDate()+r),this.getDateInfo(t))},t.prototype.update=function(t,r){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var i=this._rangeInfo.weeks||1,s=["width","height"],u=this._model.getCellSize().slice(),c=this._model.getBoxLayoutParams(),h="horizontal"===this._orient?[i,7]:[7,i];Sp([0,1],function(t){v(u,t)&&(c[s[t]]=u[t]*h[t])});var p={width:r.getWidth(),height:r.getHeight()},f=this._rect=Rt(c,p);function v(t,r){return null!=t[r]&&"auto"!==t[r]}Sp([0,1],function(t){!v(u,t)&&(u[t]=f[s[t]]/h[t])}),this._sw=u[0],this._sh=u[1]},t.prototype.dataToPoint=function(t,r){Sb(t)&&(t=t[0]),null==r&&(r=!0);var i=this.getDateInfo(t),s=this._rangeInfo,u=i.formatedDate;if(r&&!(i.time>=s.start.time&&i.time<s.end.time+864e5))return[NaN,NaN];var c=i.day,h=this._getRangeInfo([s.start.time,u]).nthWeek;return"vertical"===this._orient?[this._rect.x+c*this._sw+this._sw/2,this._rect.y+h*this._sh+this._sh/2]:[this._rect.x+h*this._sw+this._sw/2,this._rect.y+c*this._sh+this._sh/2]},t.prototype.pointToData=function(t){var r=this.pointToDate(t);return r&&r.time},t.prototype.dataToRect=function(t,r){var i=this.dataToPoint(t,r);return{contentShape:{x:i[0]-(this._sw-this._lineWidth)/2,y:i[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:i,tl:[i[0]-this._sw/2,i[1]-this._sh/2],tr:[i[0]+this._sw/2,i[1]-this._sh/2],br:[i[0]+this._sw/2,i[1]+this._sh/2],bl:[i[0]-this._sw/2,i[1]+this._sh/2]}},t.prototype.pointToDate=function(t){var r=Math.floor((t[0]-this._rect.x)/this._sw)+1,i=Math.floor((t[1]-this._rect.y)/this._sh)+1,s=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(i,r-1,s):this._getDateByWeeksAndDay(r,i-1,s)},t.prototype.convertToPixel=function(t,r,i){var s=qB(r);return s===this?s.dataToPoint(i):null},t.prototype.convertFromPixel=function(t,r,i){var s=qB(r);return s===this?s.pointToData(i):null},t.prototype.containPoint=function(t){return!1},t.prototype._initRangeOption=function(){var t,r=this._model.get("range");if(Sb(r)&&1===r.length&&(r=r[0]),Sb(r))t=r;else{var i=r.toString();if(/^\d{4}$/.test(i)&&(t=[i+"-01-01",i+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(i)){var s=this.getDateInfo(i),u=s.date;u.setMonth(u.getMonth()+1);var c=this.getNextNDay(u,-1);t=[s.formatedDate,c.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(i)&&(t=[i,i])}if(!t)return r;var h=this._getRangeInfo(t);return h.start.time>h.end.time&&t.reverse(),t},t.prototype._getRangeInfo=function(t){var r,i=[this.getDateInfo(t[0]),this.getDateInfo(t[1])];i[0].time>i[1].time&&(r=!0,i.reverse());var s=Math.floor(i[1].time/864e5)-Math.floor(i[0].time/864e5)+1,u=new Date(i[0].time),c=u.getDate(),h=i[1].date.getDate();u.setDate(c+s-1);var p=u.getDate();if(p!==h){for(var f=u.getTime()-i[1].time>0?1:-1;(p=u.getDate())!==h&&(u.getTime()-i[1].time)*f>0;)s-=f,u.setDate(p-f)}var v=Math.floor((s+i[0].day+6)/7),y=r?-v+1:v-1;return r&&i.reverse(),{range:[i[0].formatedDate,i[1].formatedDate],start:i[0],end:i[1],allDay:s,weeks:v,nthWeek:y,fweek:i[0].day,lweek:i[1].day}},t.prototype._getDateByWeeksAndDay=function(t,r,i){var s=this._getRangeInfo(i);if(t>s.weeks||0===t&&r<s.fweek||t===s.weeks&&r>s.lweek)return null;var u=(t-1)*7-s.fweek+r,c=new Date(s.start.time);return c.setDate(+s.start.d+u),this.getDateInfo(c)},t.create=function(r,i){var s=[];return r.eachComponent("calendar",function(u){var c=new t(u,r,i);s.push(c),u.coordinateSystem=c}),r.eachSeries(function(t){"calendar"===t.get("coordinateSystem")&&(t.coordinateSystem=s[t.get("calendarIndex")||0])}),s},t.dimensions=["time","value"],t}();function qB(t){var r=t.calendarModel,i=t.seriesModel;return r?r.coordinateSystem:i?i.coordinateSystem:null}function qN(t,r){var i;return Sp(r,function(r){null!=t[r]&&"auto"!==t[r]&&(i=!0)}),i}var qF=["transition","enterFrom","leaveTo"],qz=qF.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function qU(t,r,i){if(i&&(!t[i]&&r[i]&&(t[i]={}),t=t[i],r=r[i]),!!t&&!!r)for(var s=i?qF:qz,u=0;u<s.length;u++){var c=s[u];null==t[c]&&null!=r[c]&&(t[c]=r[c])}}var qH=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.preventAutoZ=!0,i}return wU(r,t),r.prototype.mergeOption=function(r,i){var s=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,r,i),this.option.elements=s},r.prototype.optionUpdated=function(t,r){var i=this.option,s=(r?i:t).elements,u=i.elements=r?[]:i.elements,c=[];this._flatten(s,c,null);var h=T2(u,c,"normalMerge"),p=this._elOptionsToUpdate=[];Sp(h,function(t,r){var i,s,c,h,f,v,y=t.newOption;if(!!y)p.push(y),!function(t,r){var i=t.existing;if(r.id=t.keyInfo.id,!r.type&&i&&(r.type=i.type),null==r.parentId){var s=r.parentOption;s?r.parentId=s.id:i&&(r.parentId=i.parentId)}r.parentOption=null}(t,y),i=u,s=r,h=So({},c=y),f=i[s],"merge"===(v=c.$action||"merge")?f?(Si(f,h,!0),Ri(f,h,{ignoreSize:!0}),Ro(c,f),qU(c,f),qU(c,f,"shape"),qU(c,f,"style"),qU(c,f,"extra"),c.clipPath=f.clipPath):i[s]=h:"replace"===v?i[s]=h:"remove"===v&&f&&(i[s]=null),!function(t,r){if(!!t)t.hv=r.hv=[qN(r,["left","right"]),qN(r,["top","bottom"])],"group"===t.type&&(null==t.width&&(t.width=r.width=0),null==t.height&&(t.height=r.height=0))}(u[r],y)},this),i.elements=Sm(u,function(t){return t&&delete t.$action,null!=t})},r.prototype._flatten=function(t,r,i){Sp(t,function(t){if(!!t){i&&(t.parentOption=i),r.push(t);var s=t.children;s&&s.length&&this._flatten(s,r,t),delete t.children}},this)},r.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},r.type="graphic",r.defaultOption={elements:[]},r}(Ru),qG={path:null,compoundPath:null,group:Tf,image:ID,text:I0},qV=T7(),qW=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.init=function(){this._elMap=SY()},r.prototype.render=function(t,r,i){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,i)},r.prototype._updateElements=function(t){var r=t.useElOptionsToUpdate();if(!!r){var i=this._elMap,s=this.group,u=t.get("z"),c=t.get("zlevel");Sp(r,function(r){var h=T4(r.id,null),p=null!=h?i.get(h):null,f=T4(r.parentId,null),v=null!=f?i.get(f):s,y=r.type,x=r.style;"text"===y&&x&&r.hv&&r.hv[1]&&(x.textVerticalAlign=x.textBaseline=x.verticalAlign=x.align=null);var _=r.textContent,b=r.textConfig;if(x&&ZC(x,y,!!b,!!_)){var w=ZT(x,y,!0);!b&&w.textConfig&&(b=r.textConfig=w.textConfig),!_&&w.textContent&&(_=w.textContent)}var S=function(t){return t=So({},t),Sp(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(P8),function(r){delete t[r]}),t}(r),M=r.$action||"merge",A="merge"===M,C="replace"===M;if(A){var T=!p,I=p;T?I=qX(h,v,r.type,i):(I&&(qV(I).isNew=!1),ZY(I)),I&&(ZB(I,S,t,{isInit:T}),q$(I,r,u,c))}else if(C){qY(p,r,i,t);var D=qX(h,v,r.type,i);D&&(ZB(D,S,t,{isInit:!0}),q$(D,r,u,c))}else"remove"===M&&(ZN(p,r),qY(p,r,i,t));var P=i.get(h);if(P&&_){if(A){var R=P.getTextContent();R?R.attr(_):P.setTextContent(new I0(_))}else C&&P.setTextContent(new I0(_))}if(P){var L=r.clipPath;if(L){var k=L.type,O=void 0,T=!1;if(A){var B=P.getClipPath();O=(T=!B||qV(B).type!==k)?qj(k):B}else C&&(T=!0,O=qj(k));P.setClipPath(O),ZB(O,L,t,{isInit:T}),Z$(O,L.keyframeAnimation,t)}var N=qV(P);P.setTextConfig(b),N.option=r,function(t,r,i){var s=I1(t).eventData;!t.silent&&!t.ignore&&!s&&(s=I1(t).eventData={componentType:"graphic",componentIndex:r.componentIndex,name:t.name}),s&&(s.info=i.info)}(P,t,r),O8({el:P,componentModel:t,itemName:P.name,itemTooltipOption:r.tooltip}),Z$(P,r.keyframeAnimation,t)}})}},r.prototype._relocate=function(t,r){for(var i=t.option.elements,s=this.group,u=this._elMap,c=r.getWidth(),h=r.getHeight(),p=["x","y"],f=0;f<i.length;f++){var v=i[f],y=T4(v.id,null),x=null!=y?u.get(y):null;if(!!x&&!!x.isGroup){var _=x.parent,b=_===s,w=qV(x),S=qV(_);w.width=TT(w.option.width,b?c:S.width)||0,w.height=TT(w.option.height,b?h:S.height)||0}}for(var f=i.length-1;f>=0;f--){var v=i[f],y=T4(v.id,null),x=null!=y?u.get(y):null;if(!!x){var _=x.parent,S=qV(_),M=_===s?{width:c,height:h}:{width:S.width,height:S.height},A={},C=Rn(x,v,M,null,{hv:v.hv,boundingMode:v.bounding},A);if(!qV(x).isNew&&C){for(var T=v.transition,I={},D=0;D<p.length;D++){var P=p[D],R=A[P];T&&(Zz(T)||Su(T,P)>=0)?I[P]=R:x[P]=R}DW(x,I,t,0)}else x.attr(A)}}},r.prototype._clear=function(){var t=this,r=this._elMap;r.each(function(i){qY(i,qV(i).option,r,t._lastGraphicModel)}),this._elMap=SY()},r.prototype.dispose=function(){this._clear()},r.type="graphic",r}(kM);function qj(t){var r=SK(qG,t)?qG[t]:OG(t),i=new r({});return qV(i).type=t,i}function qX(t,r,i,s){var u=qj(i);return r.add(u),s.set(t,u),qV(u).id=t,qV(u).isNew=!0,u}function qY(t,r,i,s){t&&t.parent&&("group"===t.type&&t.traverse(function(t){qY(t,r,i,s)}),ZF(t,r,s),i.removeKey(qV(t).id))}function q$(t,r,i,s){!t.isGroup&&Sp([["cursor",EU.prototype.cursor],["zlevel",s||0],["z",i||0],["z2",0]],function(i){var s=i[0];SK(r,s)?t[s]=SO(r[s],i[1]):null==t[s]&&(t[s]=i[1])}),Sp(Sy(r),function(i){if(0===i.indexOf("on")){var s=r[i];t[i]=Sw(s)?s:null}}),SK(r,"draggable")&&(t.draggable=r.draggable),null!=r.name&&(t.name=r.name),null!=r.id&&(t.id=r.id)}var qJ=["x","y","radius","angle","single"],qZ=["cartesian2d","polar","singleAxis"];function qK(t){return t+"Axis"}function qq(t){var r=t.ecModel,i={infoList:[],infoMap:SY()};return t.eachTargetAxis(function(t,s){var u=r.getComponent(qK(t),s);if(!u)return;var c=u.getCoordSysModel();if(!!c){var h=c.uid,p=i.infoMap.get(h);!p&&(p={model:c,axisModels:[]},i.infoList.push(p),i.infoMap.set(h,p)),p.axisModels.push(u)}}),i}var qQ=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(t){!this.indexMap[t]&&(this.indexList.push(t),this.indexMap[t]=!0)},t}(),q0=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i._autoThrottle=!0,i._noTarget=!0,i._rangePropMode=["percent","percent"],i}return wU(r,t),r.prototype.init=function(t,r,i){var s=q1(t);this.settledOption=s,this.mergeDefaultAndTheme(t,i),this._doInit(s)},r.prototype.mergeOption=function(t){var r=q1(t);Si(this.option,t,!0),Si(this.settledOption,r,!0),this._doInit(r)},r.prototype._doInit=function(t){var r=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var i=this.settledOption;Sp([["start","startValue"],["end","endValue"]],function(t,s){"value"===this._rangePropMode[s]&&(r[t[0]]=i[t[0]]=null)},this),this._resetTarget()},r.prototype._resetTarget=function(){var t=this.get("orient",!0),r=this._targetAxisInfoMap=SY();this._fillSpecifiedTargetAxis(r)?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(t){t.indexList.length&&(this._noTarget=!1)},this)},r.prototype._fillSpecifiedTargetAxis=function(t){var r=!1;return Sp(qJ,function(i){var s=this.getReferringComponents(qK(i),Ei);if(!!s.specified){r=!0;var u=new qQ;Sp(s.models,function(t){u.add(t.componentIndex)}),t.set(i,u)}},this),r},r.prototype._fillAutoTargetAxisByOrient=function(t,r){var i=this.ecModel,s=!0,u="vertical"===r?"y":"x",c=i.findComponents({mainType:u+"Axis"});h(c,u);if(s){var c=i.findComponents({mainType:"singleAxis",filter:function(t){return t.get("orient",!0)===r}});h(c,"single")}function h(r,i){var u=r[0];if(!!u){var c=new qQ;if(c.add(u.componentIndex),t.set(i,c),s=!1,"x"===i||"y"===i){var h=u.getReferringComponents("grid",Er).models[0];h&&Sp(r,function(t){u.componentIndex!==t.componentIndex&&h===t.getReferringComponents("grid",Er).models[0]&&c.add(t.componentIndex)})}}}s&&Sp(qJ,function(r){if(!!s){var u=i.findComponents({mainType:qK(r),filter:function(t){return"category"===t.get("type",!0)}});if(u[0]){var c=new qQ;c.add(u[0].componentIndex),t.set(r,c),s=!1}}},this)},r.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(r){t||(t=r)},this),"y"===t?"vertical":"horizontal"},r.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},r.prototype._updateRangeUse=function(t){var r=this._rangePropMode,i=this.get("rangeMode");Sp([["start","startValue"],["end","endValue"]],function(s,u){var c=null!=t[s[0]],h=null!=t[s[1]];c&&!h?r[u]="percent":!c&&h?r[u]="value":i?r[u]=i[u]:c&&(r[u]="percent")})},r.prototype.noTarget=function(){return this._noTarget},r.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(r,i){null==t&&(t=this.ecModel.getComponent(qK(r),i))},this),t},r.prototype.eachTargetAxis=function(t,r){this._targetAxisInfoMap.each(function(i,s){Sp(i.indexList,function(i){t.call(r,s,i)})})},r.prototype.getAxisProxy=function(t,r){var i=this.getAxisModel(t,r);if(i)return i.__dzAxisProxy},r.prototype.getAxisModel=function(t,r){var i=this._targetAxisInfoMap.get(t);if(i&&i.indexMap[r])return this.ecModel.getComponent(qK(t),r)},r.prototype.setRawRange=function(t){var r=this.option,i=this.settledOption;Sp([["start","startValue"],["end","endValue"]],function(s){(null!=t[s[0]]||null!=t[s[1]])&&(r[s[0]]=i[s[0]]=t[s[0]],r[s[1]]=i[s[1]]=t[s[1]])},this),this._updateRangeUse(t)},r.prototype.setCalculatedRange=function(t){var r=this.option;Sp(["start","startValue","end","endValue"],function(i){r[i]=t[i]})},r.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},r.prototype.getValueRange=function(t,r){if(null!=t||null!=r)return this.getAxisProxy(t,r).getDataValueWindow();var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()},r.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var r,i=this._targetAxisInfoMap.keys(),s=0;s<i.length;s++){for(var u=i[s],c=this._targetAxisInfoMap.get(u),h=0;h<c.indexList.length;h++){var p=this.getAxisProxy(u,c.indexList[h]);if(p.hostedBy(this))return p;!r&&(r=p)}}return r},r.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},r.prototype.getOrient=function(){return this._orient},r.type="dataZoom",r.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],r.defaultOption={z:4,filterMode:"filter",start:0,end:100},r}(Ru);function q1(t){var r={};return Sp(["start","end","startValue","endValue","throttle"],function(i){t.hasOwnProperty(i)&&(r[i]=t[i])}),r}var q2=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.type="dataZoom.select",r}(q0),q3=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.render=function(t,r,i,s){this.dataZoomModel=t,this.ecModel=r,this.api=i},r.type="dataZoom",r}(kM),q5=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.type="dataZoom.select",r}(q3),q4=Sp,q6=TI,q9=function(){function t(t,r,i,s){this._dimName=t,this._axisIndex=r,this.ecModel=s,this._dataZoomModel=i}return t.prototype.hostedBy=function(t){return this._dataZoomModel===t},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(r){if(Su(qZ,r.get("coordinateSystem"))>=0){var i=qK(this._dimName),s=r.getReferringComponents(i,Er).models[0];s&&this._axisIndex===s.componentIndex&&t.push(r)}},this),t},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return Sr(this._minMaxSpan)},t.prototype.calculateDataWindow=function(t){var r,i=this._dataExtent,s=this.getAxisModel().axis.scale,u=this._dataZoomModel.getRangePropMode(),c=[0,100],h=[],p=[];q4(["start","end"],function(f,v){var y=t[f],x=t[f+"Value"];"percent"===u[v]?(null==y&&(y=c[v]),x=s.parse(TC(y,c,i))):(r=!0,y=TC(x=null==x?i[v]:s.parse(x),i,c)),p[v]=null==x||isNaN(x)?i[v]:x,h[v]=null==y||isNaN(y)?c[v]:y}),q6(p),q6(h);var f=this._minMaxSpan;function v(t,r,i,u,c){var h=c?"Span":"ValueSpan";Yj(0,t,i,"all",f["min"+h],f["max"+h]);for(var p=0;p<2;p++)r[p]=TC(t[p],i,u,!0),c&&(r[p]=s.parse(r[p]))}return r?v(p,h,i,c,!1):v(h,p,c,i,!0),{valueWindow:p,percentWindow:h}},t.prototype.reset=function(t){if(t===this._dataZoomModel){var r=this.getTargetSeriesModels();this._dataExtent=function(t,r,i){var s=[1/0,-1/0];q4(i,function(t){var i,u,c;i=s,u=t.getData(),c=r,u&&Sp(zH(u,c),function(t){var r=u.getApproximateExtent(t);r[0]<i[0]&&(i[0]=r[0]),r[1]>i[1]&&(i[1]=r[1])})});var u=t.getAxisModel(),c=zR(u.axis.scale,u,s).calculate();return[c.min,c.max]}(this,this._dimName,r),this._updateMinMaxSpan();var i=this.calculateDataWindow(t.settledOption);this._valueWindow=i.valueWindow,this._percentWindow=i.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(t,r){if(t!==this._dataZoomModel)return;var i=this._dimName,s=this.getTargetSeriesModels(),u=t.get("filterMode"),c=this._valueWindow;if("none"!==u)q4(s,function(t){var r=t.getData(),s=r.mapDimensionsAll(i);if(!!s.length){if("weakFilter"===u){var h=r.getStore(),p=Sf(s,function(t){return r.getDimensionIndex(t)},r);r.filterSelf(function(t){for(var r,i,u,f=0;f<s.length;f++){var v=h.get(p[f],t),y=!isNaN(v),x=v<c[0],_=v>c[1];if(y&&!x&&!_)return!0;y&&(u=!0),x&&(r=!0),_&&(i=!0)}return u&&r&&i})}else q4(s,function(i){if("empty"===u)t.setData(r=r.map(i,function(t){return function(t){return t>=c[0]&&t<=c[1]}(t)?t:NaN}));else{var s={};s[i]=c,r.selectRange(s)}});q4(s,function(t){r.setApproximateExtent(c,t)})}})},t.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},r=this._dataZoomModel,i=this._dataExtent;q4(["min","max"],function(s){var u=r.get(s+"Span"),c=r.get(s+"ValueSpan");null!=c&&(c=this.getAxisModel().axis.scale.parse(c)),null!=c?u=TC(i[0]+c,i,[0,100],!0):null!=u&&(c=TC(u,[0,100],i,!0)-i[0]),t[s+"Span"]=u,t[s+"ValueSpan"]=c},this)},t.prototype._setAxisModel=function(){var t=this.getAxisModel(),r=this._percentWindow,i=this._valueWindow;if(!!r){var s=TR(i,[0,500]);s=Math.min(s,20);var u=t.axis.scale.rawExtentInfo;0!==r[0]&&u.setDeterminedMinMax("min",+i[0].toFixed(s)),100!==r[1]&&u.setDeterminedMinMax("max",+i[1].toFixed(s)),u.freeze()}},t}();let q8={getTargetSeries:function(t){function r(r){t.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(s,u){var c=t.getComponent(qK(s),u);r(s,u,c,i)})})}r(function(t,r,i,s){i.__dzAxisProxy=null});var i=[];r(function(r,s,u,c){!u.__dzAxisProxy&&(u.__dzAxisProxy=new q9(r,s,c,t),i.push(u.__dzAxisProxy))});var s=SY();return Sp(i,function(t){Sp(t.getTargetSeriesModels(),function(t){s.set(t.uid,t)})}),s},overallReset:function(t,r){t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(r,i){t.getAxisProxy(r,i).reset(t)}),t.eachTargetAxis(function(i,s){t.getAxisProxy(i,s).filterData(t,r)})}),t.eachComponent("dataZoom",function(t){var r=t.findRepresentativeAxisProxy();if(r){var i=r.getDataPercentWindow(),s=r.getDataValueWindow();t.setCalculatedRange({start:i[0],end:i[1],startValue:s[0],endValue:s[1]})}})}};var q7=!1;function Qe(t){if(!q7)q7=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,q8),!function(t){t.registerAction("dataZoom",function(t,r){Sp(function(t,r){var i,s=SY(),u=[],c=SY();t.eachComponent({mainType:"dataZoom",query:r},function(t){!c.get(t.uid)&&p(t)});do i=!1,t.eachComponent("dataZoom",h);while(i);function h(t){!c.get(t.uid)&&function(t){var r=!1;return t.eachTargetAxis(function(t,i){var u=s.get(t);u&&u[i]&&(r=!0)}),r}(t)&&(p(t),i=!0)}function p(t){c.set(t.uid,!0),u.push(t),function(t){t.eachTargetAxis(function(t,r){(s.get(t)||s.set(t,[]))[r]=!0})}(t)}return u}(r,t),function(r){r.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}(t),t.registerSubTypeDefaulter("dataZoom",function(){return"slider"})}function Qt(t){t.registerComponentModel(q2),t.registerComponentView(q5),Qe(t)}var Qn=function(){},Qr={};function Qi(t,r){Qr[t]=r}function Qa(t){return Qr[t]}var Qo=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var r=this.ecModel;Sp(this.option.feature,function(t,i){var s=Qr[i];s&&(s.getDefaultOption&&(s.defaultOption=s.getDefaultOption(r)),Si(t,s.defaultOption))})},r.type="toolbox",r.layoutMode={type:"box",ignoreSize:!0},r.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},r}(Ru);function Qs(t,r){var i=PK(r.get("padding")),s=r.getItemStyle(["color","opacity"]);return s.fill=r.get("backgroundColor"),t=new IF({shape:{x:t.x-i[3],y:t.y-i[0],width:t.width+i[1]+i[3],height:t.height+i[0]+i[2],r:r.get("borderRadius")},style:s,silent:!0,z2:-1})}var Ql=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.prototype.render=function(t,r,i,s){var u,c,h,p,f,v,y,x=this.group;if(x.removeAll(),!!t.get("show")){var _=+t.get("itemSize"),b="vertical"===t.get("orient"),w=t.get("feature")||{},S=this._features||(this._features={}),M=[];Sp(w,function(t,r){M.push(r)}),new FC(this._featureNames||[],M).add(A).update(A).remove(S_(A,null)).execute(),this._featureNames=M;u=x,c=t,h=i,p=c.getBoxLayoutParams(),f=c.get("padding"),y=Rt(p,v={width:h.getWidth(),height:h.getHeight()},f),Re(c.get("orient"),u,c.get("itemGap"),y.width,y.height),Rn(u,p,v,f),x.add(Qs(x.getBoundingRect(),t)),b||x.eachChild(function(t){var r=t.__title,s=t.ensureState("emphasis"),u=s.textConfig||(s.textConfig={}),c=t.getTextContent(),h=c&&c.ensureState("emphasis");if(h&&!Sw(h)&&r){var p=h.style||(h.style={}),f=C7(r,I0.makeFont(p)),v=t.x+x.x,y=t.y+x.y+_,b=!1;y+f.height>i.getHeight()&&(u.position="top",b=!0);var w=b?-5-f.height:_+10;v+f.width/2>i.getWidth()?(u.position=["100%",w],p.align="right"):v-f.width/2<0&&(u.position=[0,w],p.align="left")}})}function A(u,c){var h,p=M[u],f=M[c],v=w[p],y=new Pp(v,t,t.ecModel);if(s&&null!=s.newTitle&&s.featureName===p&&(v.title=s.newTitle),p&&!f){if(function(t){return 0===t.indexOf("my")}(p))h={onclick:y.option.onclick,featureName:p};else{var A=Qr[p];if(!A)return;h=new A}S[p]=h}else if(!(h=S[f]))return;h.uid=Pg("toolbox-feature"),h.model=y,h.ecModel=r,h.api=i;var C=h instanceof Qn;if(!p&&f){C&&h.dispose&&h.dispose(r,i);return}if(!y.get("show")||C&&h.unusable){C&&h.remove&&h.remove(r,i);return}(function(s,u,c){var h,p,f=s.getModel("iconStyle"),v=s.getModel(["emphasis","iconStyle"]),y=u instanceof Qn&&u.getIcons?u.getIcons():s.get("icon"),w=s.get("title")||{};SS(y)?(h={})[c]=y:h=y,SS(w)?(p={})[c]=w:p=w;var S=s.iconPaths={};Sp(h,function(c,h){var y=O5(c,{},{x:-_/2,y:-_/2,width:_,height:_});y.setStyle(f.getItemStyle()),y.ensureState("emphasis").style=v.getItemStyle();var w=new I0({style:{text:p[h],align:v.get("textAlign"),borderRadius:v.get("textBorderRadius"),padding:v.get("textPadding"),fill:null,font:D8({fontStyle:v.get("textFontStyle"),fontFamily:v.get("textFontFamily"),fontSize:v.get("textFontSize"),fontWeight:v.get("textFontWeight")},r)},ignore:!0});y.setTextContent(w),O8({el:y,componentModel:t,itemName:h,formatterParamsExtra:{title:p[h]}}),y.__title=p[h],y.on("mouseover",function(){var r=v.getItemStyle(),s=b?null==t.get("right")&&"right"!==t.get("left")?"right":"left":null==t.get("bottom")&&"bottom"!==t.get("top")?"bottom":"top";w.setStyle({fill:v.get("textFill")||r.fill||r.stroke||"#000",backgroundColor:v.get("textBackgroundColor")}),y.setTextConfig({position:v.get("textPosition")||s}),w.ignore=!t.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){"emphasis"!==s.get(["iconStatus",h])&&i.leaveEmphasis(this),w.hide()}),("emphasis"===s.get(["iconStatus",h])?Dx:D_)(y),x.add(y),y.on("click",Sx(u.onclick,u,r,i,h)),S[h]=y})})(y,h,p),y.setIconStatus=function(t,r){var i=this.option,s=this.iconPaths;i.iconStatus=i.iconStatus||{},i.iconStatus[t]=r,s[t]&&("emphasis"===r?Dx:D_)(s[t])},h instanceof Qn&&h.render&&h.render(y,r,i,s)}},r.prototype.updateView=function(t,r,i,s){Sp(this._features,function(t){t instanceof Qn&&t.updateView&&t.updateView(t.model,r,i,s)})},r.prototype.remove=function(t,r){Sp(this._features,function(i){i instanceof Qn&&i.remove&&i.remove(t,r)}),this.group.removeAll()},r.prototype.dispose=function(t,r){Sp(this._features,function(i){i instanceof Qn&&i.dispose&&i.dispose(t,r)})},r.type="toolbox",r}(kM),Qu=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.prototype.onclick=function(t,r){var i=this.model,s=i.get("name")||t.get("title.0.text")||"echarts",u="svg"===r.getZr().painter.getType(),c=u?"svg":i.get("type",!0)||"png",h=r.getConnectedDataURL({type:c,backgroundColor:i.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),p=wY.browser;if("function"!=typeof MouseEvent||!p.newEdge&&(p.ie||p.edge)){if(window.navigator.msSaveOrOpenBlob||u){var f=h.split(","),v=f[0].indexOf("base64")>-1,y=u?decodeURIComponent(f[1]):f[1];v&&(y=window.atob(y));var x=s+"."+c;if(window.navigator.msSaveOrOpenBlob){for(var _=y.length,b=new Uint8Array(_);_--;)b[_]=y.charCodeAt(_);var w=new Blob([b]);window.navigator.msSaveOrOpenBlob(w,x)}else{var S=document.createElement("iframe");document.body.appendChild(S);var M=S.contentWindow,A=M.document;A.open("image/svg+xml","replace"),A.write(y),A.close(),M.focus(),A.execCommand("SaveAs",!0,x),document.body.removeChild(S)}}else{var C=i.get("lang"),T='<body style="margin:0;"><img src="'+h+'" style="max-width:100%;" title="'+(C&&C[0]||"")+'" /></body>',I=window.open();I.document.write(T),I.document.title=s}}else{var D=document.createElement("a");D.download=s+"."+c,D.target="_blank",D.href=h;var P=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});D.dispatchEvent(P)}},r.getDefaultOption=function(t){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},r}(Qn),Qc="__ec_magicType_stack__",Qh=[["line","bar"],["stack"]],Qd=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.prototype.getIcons=function(){var t=this.model,r=t.get("icon"),i={};return Sp(t.get("type"),function(t){r[t]&&(i[t]=r[t])}),i},r.getDefaultOption=function(t){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},r.prototype.onclick=function(t,r,i){var s,u=this.model,c=u.get(["seriesIndex",i]);if(!!Qp[i]){var h={series:[]};Sp(Qh,function(t){Su(t,i)>=0&&Sp(t,function(t){u.setIconStatus(t,"normal")})}),u.setIconStatus(i,"emphasis"),t.eachComponent({mainType:"series",query:null==c?null:{seriesIndex:c}},function(t){var r=t.subType,s=t.id,c=Qp[i](r,s,t,u);c&&(Ss(c,t.option),h.series.push(c));var p=t.coordinateSystem;if(p&&"cartesian2d"===p.type&&("line"===i||"bar"===i)){var f=p.getAxesByScale("ordinal")[0];if(f){var v=f.dim+"Axis",y=t.getReferringComponents(v,Er).models[0].componentIndex;h[v]=h[v]||[];for(var x=0;x<=y;x++)h[v][y]=h[v][y]||{};h[v][y].boundaryGap="bar"===i}}});var p=i;"stack"===i&&(s=Si({stack:u.option.title.tiled,tiled:u.option.title.stack},u.option.title),"emphasis"!==u.get(["iconStatus",i])&&(p="tiled")),r.dispatchAction({type:"changeMagicType",currentType:p,newOption:h,newTitle:s,featureName:"magicType"})}},r}(Qn),Qp={line:function(t,r,i,s){if("bar"===t)return Si({id:r,type:"line",data:i.get("data"),stack:i.get("stack"),markPoint:i.get("markPoint"),markLine:i.get("markLine")},s.get(["option","line"])||{},!0)},bar:function(t,r,i,s){if("line"===t)return Si({id:r,type:"bar",data:i.get("data"),stack:i.get("stack"),markPoint:i.get("markPoint"),markLine:i.get("markLine")},s.get(["option","bar"])||{},!0)},stack:function(t,r,i,s){var u=i.get("stack")===Qc;if("line"===t||"bar"===t)return s.setIconStatus("stack",u?"normal":"emphasis"),Si({id:r,stack:u?"":Qc},s.get(["option","stack"])||{},!0)}};Fl({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,r){r.mergeOption(t.newOption)});var Qf=Array(60).join("-");function Qg(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var Qm=RegExp("[	]+","g"),Qv=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.prototype.onclick=function(t,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var i=r.getDom(),s=this.model;this._dom&&i.removeChild(this._dom);var u=document.createElement("div");u.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",u.style.backgroundColor=s.get("backgroundColor")||"#fff";var c=document.createElement("h4"),h=s.get("lang")||[];c.innerHTML=h[0]||s.get("title"),c.style.cssText="margin:10px 20px",c.style.color=s.get("textColor");var p=document.createElement("div"),f=document.createElement("textarea");p.style.cssText="overflow:auto";var v=s.get("optionToContent"),y=s.get("contentToOption"),x=function(t){var r,i,s,u,c,h=(r={},i=[],s=[],t.eachRawSeries(function(t){var u=t.coordinateSystem;if(u&&("cartesian2d"===u.type||"polar"===u.type)){var c=u.getBaseAxis();if("category"===c.type){var h=c.dim+"_"+c.index;!r[h]&&(r[h]={categoryAxis:c,valueAxis:u.getOtherAxis(c),series:[]},s.push({axisDim:c.dim,axisIndex:c.index})),r[h].series.push(t)}else i.push(t)}else i.push(t)}),{seriesGroupByCategoryAxis:r,other:i,meta:s});return{value:Sm([(u=h.seriesGroupByCategoryAxis,c=[],Sp(u,function(t,r){var i=t.categoryAxis,s=t.valueAxis.dim,u=[" "].concat(Sf(t.series,function(t){return t.name})),h=[i.model.getCategories()];Sp(t.series,function(t){var r=t.getRawData();h.push(t.getRawData().mapArray(r.mapDimension(s),function(t){return t}))});for(var p=[u.join("	")],f=0;f<h[0].length;f++){for(var v=[],y=0;y<h.length;y++)v.push(h[y][f]);p.push(v.join("	"))}c.push(p.join("\n"))}),c.join("\n\n"+Qf+"\n\n")),Sf(h.other,function(t){var r=t.getRawData(),i=[t.name],s=[];return r.each(r.dimensions,function(){for(var t=arguments.length,u=arguments[t-1],c=r.getName(u),h=0;h<t-1;h++)s[h]=arguments[h];i.push((c?c+"	":"")+s.join("	"))}),i.join("\n")}).join("\n\n"+Qf+"\n\n")],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join("\n\n"+Qf+"\n\n"),meta:h.meta}}(t);if(Sw(v)){var _=v(r.getOption());SS(_)?p.innerHTML=_:SI(_)&&p.appendChild(_)}else{f.readOnly=s.get("readOnly");var b=f.style;b.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",b.color=s.get("textColor"),b.borderColor=s.get("textareaBorderColor"),b.backgroundColor=s.get("textareaColor"),f.value=x.value,p.appendChild(f)}var w=x.meta,S=document.createElement("div");S.style.cssText="position:absolute;bottom:5px;left:0;right:0";var M="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",A=document.createElement("div"),C=document.createElement("div");M+=";background-color:"+s.get("buttonColor")+(";color:"+s.get("buttonTextColor"));var T=this;function I(){i.removeChild(u),T._dom=null}MO(A,"click",I),MO(C,"click",function(){var t,i,s,u,c;if(null==y&&null!=v||null!=y&&null==v){I();return}try{if(Sw(y))t=y(p,r.getOption());else{;i=f.value,s=w,u=i.split(RegExp("\n*"+Qf+"\n*","g")),c={series:[]},Sp(u,function(t,r){if(function(t){if(t.slice(0,t.indexOf("\n")).indexOf("	")>=0)return!0}(t)){var i=function(t){for(var r=t.split(/\n+/g),i=Qg(r.shift()).split(Qm),s=[],u=Sf(i,function(t){return{name:t,data:[]}}),c=0;c<r.length;c++){var h=Qg(r[c]).split(Qm);s.push(h.shift());for(var p=0;p<h.length;p++)u[p]&&(u[p].data[c]=h[p])}return{series:u,categories:s}}(t),u=s[r],h=u.axisDim+"Axis";u&&(c[h]=c[h]||[],c[h][u.axisIndex]={data:i.categories},c.series=c.series.concat(i.series))}else{var i=function(t){for(var r=t.split(/\n+/g),i=Qg(r.shift()),s=[],u=0;u<r.length;u++){var c=Qg(r[u]);if(!!c){var h=c.split(Qm),p="",f=void 0,v=!1;isNaN(h[0])?(v=!0,p=h[0],h=h.slice(1),s[u]={name:p,value:[]},f=s[u].value):f=s[u]=[];for(var y=0;y<h.length;y++)f.push(+h[y]);1===f.length&&(v?s[u].value=f[0]:s[u]=f[0])}}return{name:i,data:s}}(t);c.series.push(i)}}),t=c}}catch(t){throw I(),Error("Data view format error "+t)}t&&r.dispatchAction({type:"changeDataView",newOption:t}),I()}),A.innerHTML=h[1],C.innerHTML=h[2],C.style.cssText=A.style.cssText=M,s.get("readOnly")||S.appendChild(C),S.appendChild(A),u.appendChild(c),u.appendChild(p),u.appendChild(S),p.style.height=i.clientHeight-80+"px",i.appendChild(u),this._dom=u},r.prototype.remove=function(t,r){this._dom&&r.getDom().removeChild(this._dom)},r.prototype.dispose=function(t,r){this.remove(t,r)},r.getDefaultOption=function(t){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},r}(Qn);Fl({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,r){var i=[];Sp(t.newOption.series,function(t){var s=r.getSeriesByName(t.name)[0];if(s){var u,c,h=s.get("data");i.push({name:t.name,data:(u=t.data,c=h,Sf(u,function(t,r){var i=c&&c[r];if(!SC(i)||Sb(i))return t;!(SC(t)&&!Sb(t))&&(t={value:t});var s=null!=i.name&&null==t.name;return t=Ss(t,i),s&&delete t.name,t}))})}else i.push(So({type:"scatter"},t))}),r.mergeOption(Ss({series:i},t.newOption))});var Qy=Sp,Qx=T7();function Q_(t){var r=Qx(t);return!r.snapshots&&(r.snapshots=[{}]),r.snapshots}var Qb=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.prototype.onclick=function(t,r){Qx(t).snapshots=null,r.dispatchAction({type:"restore",from:this.uid})},r.getDefaultOption=function(t){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])}},r}(Qn);Fl({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,r){r.resetOption("recreate")});var Qw=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],QS=function(){function t(t,r,i){var s=this;this._targetInfoList=[];var u=QA(r,t);Sp(QC,function(t,r){(!i||!i.include||Su(i.include,r)>=0)&&t(u,s._targetInfoList)})}return t.prototype.setOutputRanges=function(t,r){return this.matchOutputRanges(t,r,function(t,r,i){if((t.coordRanges||(t.coordRanges=[])).push(r),!t.coordRange){t.coordRange=r;var s=QI[t.brushType](0,i,r);t.__rangeOffset={offset:QP[t.brushType](s.values,t.range,[1,1]),xyMinMax:s.xyMinMax}}}),t},t.prototype.matchOutputRanges=function(t,r,i){Sp(t,function(t){var s=this.findTargetInfo(t,r);s&&!0!==s&&Sp(s.coordSyses,function(s){var u=QI[t.brushType](1,s,t.range,!0);i(t,u.values,s,r)})},this)},t.prototype.setInputRanges=function(t,r){Sp(t,function(t){var i=this.findTargetInfo(t,r);if(t.range=t.range||[],i&&!0!==i){t.panelId=i.panelId;var s=QI[t.brushType](0,i.coordSys,t.coordRange),u=t.__rangeOffset;t.range=u?QP[t.brushType](s.values,u.offset,function(t,r){var i=QL(t),s=QL(r),u=[i[0]/s[0],i[1]/s[1]];return isNaN(u[0])&&(u[0]=1),isNaN(u[1])&&(u[1]=1),u}(s.xyMinMax,u.xyMinMax)):s.values}},this)},t.prototype.makePanelOpts=function(t,r){return Sf(this._targetInfoList,function(i){var s=i.getPanelRect();return{panelId:i.panelId,defaultBrushType:r?r(i):null,clipPath:$k(s),isTargetByCursor:$B(s,t,i.coordSysModel),getLinearBrushOtherExtent:$O(s)}})},t.prototype.controlSeries=function(t,r,i){var s=this.findTargetInfo(t,i);return!0===s||s&&Su(s.coordSyses,r.coordinateSystem)>=0},t.prototype.findTargetInfo=function(t,r){for(var i=this._targetInfoList,s=QA(r,t),u=0;u<i.length;u++){var c=i[u],h=t.panelId;if(h){if(c.panelId===h)return c}else for(var p=0;p<QT.length;p++)if(QT[p](s,c))return c}return!0},t}();function QM(t){return t[0]>t[1]&&t.reverse(),t}function QA(t,r){return Et(t,r,{includeMainTypes:Qw})}var QC={grid:function(t,r){var i=t.xAxisModels,s=t.yAxisModels,u=t.gridModels,c=SY(),h={},p={};if(!!i||!!s||!!u)Sp(i,function(t){var r=t.axis.grid.model;c.set(r.id,r),h[r.id]=!0}),Sp(s,function(t){var r=t.axis.grid.model;c.set(r.id,r),p[r.id]=!0}),Sp(u,function(t){c.set(t.id,t),h[t.id]=!0,p[t.id]=!0}),c.each(function(t){var u=t.coordinateSystem,c=[];Sp(u.getCartesians(),function(t,r){(Su(i,t.getAxis("x").model)>=0||Su(s,t.getAxis("y").model)>=0)&&c.push(t)}),r.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:c[0],coordSyses:c,getPanelRect:QE.grid,xAxisDeclared:h[t.id],yAxisDeclared:p[t.id]})})},geo:function(t,r){Sp(t.geoModels,function(t){var i=t.coordinateSystem;r.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:i,coordSyses:[i],getPanelRect:QE.geo})})}},QT=[function(t,r){var i=t.xAxisModel,s=t.yAxisModel,u=t.gridModel;return!u&&i&&(u=i.axis.grid.model),!u&&s&&(u=s.axis.grid.model),u&&u===r.gridModel},function(t,r){var i=t.geoModel;return i&&i===r.geoModel}],QE={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,r=t.getBoundingRect().clone();return r.applyTransform(OK(t)),r}},QI={lineX:S_(QD,0),lineY:S_(QD,1),rect:function(t,r,i,s){var u=t?r.pointToData([i[0][0],i[1][0]],s):r.dataToPoint([i[0][0],i[1][0]],s),c=t?r.pointToData([i[0][1],i[1][1]],s):r.dataToPoint([i[0][1],i[1][1]],s),h=[QM([u[0],c[0]]),QM([u[1],c[1]])];return{values:h,xyMinMax:h}},polygon:function(t,r,i,s){var u=[[1/0,-1/0],[1/0,-1/0]];return{values:Sf(i,function(i){var c=t?r.pointToData(i,s):r.dataToPoint(i,s);return u[0][0]=Math.min(u[0][0],c[0]),u[1][0]=Math.min(u[1][0],c[1]),u[0][1]=Math.max(u[0][1],c[0]),u[1][1]=Math.max(u[1][1],c[1]),c}),xyMinMax:u}}};function QD(t,r,i,s){var u=i.getAxis(["x","y"][t]),c=QM(Sf([0,1],function(t){return r?u.coordToData(u.toLocalCoord(s[t]),!0):u.toGlobalCoord(u.dataToCoord(s[t]))})),h=[];return h[t]=c,h[1-t]=[NaN,NaN],{values:c,xyMinMax:h}}var QP={lineX:S_(QR,0),lineY:S_(QR,1),rect:function(t,r,i){return[[t[0][0]-i[0]*r[0][0],t[0][1]-i[0]*r[0][1]],[t[1][0]-i[1]*r[1][0],t[1][1]-i[1]*r[1][1]]]},polygon:function(t,r,i){return Sf(t,function(t,s){return[t[0]-i[0]*r[s][0],t[1]-i[1]*r[s][1]]})}};function QR(t,r,i,s){return[r[0]-s[t]*i[0],r[1]-s[t]*i[1]]}function QL(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var Qk=Sp,QO=TK+"toolbox-dataZoom_",QB=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.prototype.render=function(t,r,i,s){!this._brushController&&(this._brushController=new $r(i.getZr()),this._brushController.on("brush",Sx(this._onBrush,this)).mount()),function(t,r,i,s,u){var c=i._isZoomActive;s&&"takeGlobalCursor"===s.type&&(c="dataZoomSelect"===s.key&&s.dataZoomSelectActive),i._isZoomActive=c,t.setIconStatus("zoom",c?"emphasis":"normal");var h=new QS(QF(t),r,{include:["grid"]}).makePanelOpts(u,function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"});i._brushController.setPanels(h).enableBrush(!!c&&!!h.length&&{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()})}(t,r,this,s,i),function(t,r){t.setIconStatus("back",Q_(r).length>1?"emphasis":"normal")}(t,r)},r.prototype.onclick=function(t,r,i){QN[i].call(this)},r.prototype.remove=function(t,r){this._brushController&&this._brushController.unmount()},r.prototype.dispose=function(t,r){this._brushController&&this._brushController.dispose()},r.prototype._onBrush=function(t){var r,i,s,u=t.areas;if(!!t.isEnd&&!!u.length){var c={},h=this.ecModel;this._brushController.updateCovers([]),new QS(QF(this.model),h,{include:["grid"]}).matchOutputRanges(u,h,function(t,r,i){if("cartesian2d"===i.type){var s=t.brushType;"rect"===s?(p("x",i,r[0]),p("y",i,r[1])):p({lineX:"x",lineY:"y"}[s],i,r)}}),r=h,i=c,s=Q_(r),Qy(i,function(t,i){for(var u=s.length-1;u>=0&&!s[u][i];u--);if(u<0){var c=r.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(c){var h=c.getPercentRange();s[0][i]={dataZoomId:i,start:h[0],end:h[1]}}}}),s.push(i),this._dispatchZoomAction(c)}function p(t,r,i){var s=r.getAxis(t),u=s.model,p=function(t,r,i){var s;return i.eachComponent({mainType:"dataZoom",subType:"select"},function(i){i.getAxisModel(t,r.componentIndex)&&(s=i)}),s}(t,u,h),f=p.findRepresentativeAxisProxy(u).getMinMaxSpan();(null!=f.minValueSpan||null!=f.maxValueSpan)&&(i=Yj(0,i.slice(),s.scale.getExtent(),0,f.minValueSpan,f.maxValueSpan)),p&&(c[p.id]={dataZoomId:p.id,startValue:i[0],endValue:i[1]})}},r.prototype._dispatchZoomAction=function(t){var r=[];Qk(t,function(t,i){r.push(Sr(t))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},r.getDefaultOption=function(t){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},r}(Qn),QN={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){var t,r,i;this._dispatchZoomAction((r=(t=Q_(this.ecModel))[t.length-1],t.length>1&&t.pop(),i={},Qy(r,function(r,s){for(var u=t.length-1;u>=0;u--)if(r=t[u][s]){i[s]=r;break}}),i))}};function QF(t){var r={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return null==r.xAxisIndex&&null==r.xAxisId&&(r.xAxisIndex="all"),null==r.yAxisIndex&&null==r.yAxisId&&(r.yAxisIndex="all"),r}!function(t,r){Sz(null==RE.get(t)&&r),RE.set(t,r)}("dataZoom",function(t){var r=t.getComponent("toolbox",0),i=["feature","dataZoom"];if(!!r&&null!=r.get(i)){var s=r.getModel(i),u=[],c=Et(t,QF(s));return Qk(c.xAxisModels,function(t){return h(t,"xAxis","xAxisIndex")}),Qk(c.yAxisModels,function(t){return h(t,"yAxis","yAxisIndex")}),u}function h(t,r,i){var c=t.componentIndex,h={type:"select",$fromToolbox:!0,filterMode:s.get("filterMode",!0)||"filter",id:QO+r+c};h[i]=c,u.push(h)}});var Qz=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.type="tooltip",r.dependencies=["axisPointer"],r.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},r}(Ru);function QU(t){var r=t.get("confine");return null!=r?!!r:"richText"===t.get("renderMode")}function QH(t){if(!!wY.domSupported){for(var r=document.documentElement.style,i=0,s=t.length;i<s;i++)if(t[i]in r)return t[i]}}var QG=QH(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),QV=QH(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function QW(t,r){if(!t)return r;r=PZ(r,!0);var i=t.indexOf(r);return(t=-1===i?r:"-"+t.slice(0,i)+"-"+r).toLowerCase()}var Qj=QW(QV,"transition"),QX=QW(QG,"transform"),QY="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(wY.transform3dSupported?"will-change:transform;":"");function Q$(t,r,i){var s=t.toFixed(0)+"px",u=r.toFixed(0)+"px";if(!wY.transformSupported)return i?"top:"+u+";left:"+s+";":[["top",u],["left",s]];var c=wY.transform3dSupported,h="translate"+(c?"3d":"")+"("+s+","+u+(c?",0":"")+")";return i?"top:0;left:0;"+QX+":"+h+";":[["top",0],["left",0],[QG,h]]}function QJ(t,r,i,s,u){var c=r&&r.painter;if(i){var h,p,f,v=c&&c.getViewportRoot();if(v){;h=t,p=v,f=i,MS(Mw,p,s,u,!0)&&MS(h,f,Mw[0],Mw[1])}}else{t[0]=s,t[1]=u;var y=c&&c.getViewportRootOffset();y&&(t[0]+=y.offsetLeft,t[1]+=y.offsetTop)}t[2]=t[0]/r.getWidth(),t[3]=t[1]/r.getHeight()}var QZ=function(){function t(t,r){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,wY.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var s=this._zr=t.getZr(),u=r.appendTo,c=u&&(SS(u)?document.querySelector(u):SI(u)?u:Sw(u)&&u(t.getDom()));QJ(this._styleCoord,s,c,t.getWidth()/2,t.getHeight()/2),(c||t.getDom()).appendChild(i),this._api=t,this._container=c;var h=this;i.onmouseenter=function(){h._enterable&&(clearTimeout(h._hideTimeout),h._show=!0),h._inContent=!0},i.onmousemove=function(t){if(t=t||window.event,!h._enterable){var r=s.handler;Mk(s.painter.getViewportRoot(),t,!0),r.dispatch("mousemove",t)}},i.onmouseleave=function(){h._inContent=!1,h._enterable&&h._show&&h.hideLater(h._hideDelay)}}return t.prototype.update=function(t){if(!this._container){var r,i,s,u=this._api.getDom();var c=(i="position",(s=(r=u).currentStyle||document.defaultView&&document.defaultView.getComputedStyle(r))?i?s[i]:s:null),h=u.style;"absolute"!==h.position&&"absolute"!==c&&(h.position="relative")}var p=t.get("alwaysShowContent");p&&this._moveIfResized(),this._alwaysShowContent=p,this.el.className=t.get("className")||""},t.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var i,s,u,c,h,p,f,v,y,x,_,b,w,S,M,A,C,T,I,D,P,R,L,k,O,B=this.el,N=B.style,F=this._styleCoord;if(B.innerHTML){;N.cssText=QY+(i=t,s=!this._firstShow,u=this._longHide,c=[],h=i.get("transitionDuration"),p=i.get("backgroundColor"),f=i.get("shadowBlur"),v=i.get("shadowColor"),y=i.get("shadowOffsetX"),x=i.get("shadowOffsetY"),_=i.getModel("textStyle"),b=kl(i,"html"),c.push("box-shadow:"+(y+"px "+x+"px "+f+"px ")+v),s&&h&&c.push((w=h,S=u,C="opacity"+(A=" "+w/2+"s "+(M="cubic-bezier(0.23,1,0.32,1)"))+",visibility"+A,!S&&(A=" "+w+"s "+M,C+=wY.transformSupported?","+QX+A:",left"+A+",top"+A),Qj+":"+C)),p&&c.push("background-color:"+p),Sp(["width","color","radius"],function(t){var r="border-"+t,s=PZ(r),u=i.get(s);null!=u&&c.push(r+":"+u+("color"===t?"":"px"))}),c.push((I=[],D=(T=_).get("fontSize"),(P=T.getTextColor())&&I.push("color:"+P),I.push("font:"+T.getFont()),D&&I.push("line-height:"+Math.round(3*D/2)+"px"),R=T.get("textShadowColor"),L=T.get("textShadowBlur")||0,k=T.get("textShadowOffsetX")||0,O=T.get("textShadowOffsetY")||0,R&&L&&I.push("text-shadow:"+k+"px "+O+"px "+L+"px "+R),Sp(["decoration","align"],function(t){var r=T.get(t);r&&I.push("text-"+t+":"+r)}),I.join(";"))),null!=b&&c.push("padding:"+PK(b).join("px ")+"px"),c.join(";")+";")+Q$(F[0],F[1],!0)+("border-color:"+P4(r))+";"+(t.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none")}else N.display="none";this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(t,r,i,s,u){var c=this.el;if(null==t){c.innerHTML="";return}var h="";if(SS(u)&&"item"===i.get("trigger")&&!QU(i)&&(h=function(t,r,i){if(!SS(i)||"inside"===i)return"";var s,u,c=t.get("backgroundColor"),h=t.get("borderWidth");r=P4(r);var p=s="left"===(s=i)?"right":"right"===s?"left":"top"===s?"bottom":"top",f=Math.max(1.5*Math.round(h),6),v="",y=QX+":";Su(["left","right"],p)>-1?(v+="top:50%",y+="translateY(-50%) rotate("+(u="left"===p?-225:-45)+"deg)"):(v+="left:50%",y+="translateX(-50%) rotate("+(u="top"===p?225:45)+"deg)");var x=u*Math.PI/180,_=f+h,b=_*Math.abs(Math.cos(x))+_*Math.abs(Math.sin(x));v+=";"+p+":-"+Math.round(((b-Math.SQRT2*h)/2+Math.SQRT2*h-(b-_)/2)*100)/100+"px";var w=r+" solid "+h+"px;";return'<div style="'+["position:absolute;width:"+f+"px;height:"+f+"px;z-index:-1;",v+";"+y+";","border-bottom:"+w,"border-right:"+w,"background-color:"+c+";"].join("")+'"></div>'}(i,s,u)),SS(t))c.innerHTML=t+h;else if(t){c.innerHTML="",!Sb(t)&&(t=[t]);for(var p=0;p<t.length;p++)SI(t[p])&&t[p].parentNode!==c&&c.appendChild(t[p]);if(h&&c.childNodes.length){var f=document.createElement("div");f.innerHTML=h,c.appendChild(f)}}},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},t.prototype.moveTo=function(t,r){var i=this._styleCoord;if(QJ(i,this._zr,this._container,t,r),null!=i[0]&&null!=i[1]){var s=this.el.style;Sp(Q$(i[0],i[1]),function(t){s[t[0]]=t[1]})}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},t.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",wY.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},t.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Sx(this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},t}(),QK=function(){function t(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),Q0(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return t.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized(),this._alwaysShowContent=r},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(t,r,i,s,u){var c=this;SC(t)&&LD(""),this.el&&this._zr.remove(this.el);var h=i.getModel("textStyle");this.el=new I0({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:s,textShadowColor:h.get("textShadowColor"),fill:i.get(["textStyle","color"]),padding:kl(i,"richText"),verticalAlign:"top",align:"left"},z:i.get("z")}),Sp(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(t){c.el.style[t]=i.get(t)}),Sp(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(t){c.el.style[t]=h.get(t)||0}),this._zr.add(this.el);var p=this;this.el.on("mouseover",function(){p._enterable&&(clearTimeout(p._hideTimeout),p._show=!0),p._inContent=!0}),this.el.on("mouseout",function(){p._enterable&&p._show&&p.hideLater(p._hideDelay),p._inContent=!1})},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),i=QQ(t.style);return[r.width+i.left+i.right,r.height+i.top+i.bottom]},t.prototype.moveTo=function(t,r){var i=this.el;if(i){var s=this._styleCoord;Q0(s,this._zr,t,r),t=s[0],r=s[1];var u=i.style,c=Qq(u.borderWidth||0),h=QQ(u);i.x=t+c+h.left,i.y=r+c+h.top,i.markRedraw()}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Sx(this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}();function Qq(t){return Math.max(0,t)}function QQ(t){var r=Qq(t.shadowBlur||0),i=Qq(t.shadowOffsetX||0),s=Qq(t.shadowOffsetY||0);return{left:Qq(r-i),right:Qq(r+i),top:Qq(r-s),bottom:Qq(r+s)}}function Q0(t,r,i,s){t[0]=i,t[1]=s,t[2]=t[0]/r.getWidth(),t[3]=t[1]/r.getHeight()}var Q1=new IF({shape:{x:-1,y:-1,width:2,height:2}}),Q2=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.init=function(t,r){if(!wY.node&&!!r.getDom()){var i,s=t.getComponent("tooltip");var u=this._renderMode="auto"===(i=s.get("renderMode"))?wY.domSupported?"html":"richText":i||"html";this._tooltipContent="richText"===u?new QK(r):new QZ(r,{appendTo:s.get("appendToBody",!0)?"body":s.get("appendTo",!0)})}},r.prototype.render=function(t,r,i){if(!wY.node&&!!i.getDom()){this.group.removeAll(),this._tooltipModel=t,this._ecModel=r,this._api=i;var s=this._tooltipContent;s.update(t),s.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&t.get("transitionDuration")?Bf(this,"_updatePosition",50,"fixRate"):Bg(this,"_updatePosition")}},r.prototype._initGlobalListener=function(){var t=this._tooltipModel.get("triggerOn");KL("itemTooltip",this._api,Sx(function(r,i,s){"none"!==t&&(t.indexOf(r)>=0?this._tryShow(i,s):"leave"===r&&this._hide(s))},this))},r.prototype._keepShow=function(){var t=this._tooltipModel,r=this._ecModel,i=this._api,s=t.get("triggerOn");if(null!=this._lastX&&null!=this._lastY&&"none"!==s&&"click"!==s){var u=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){i.isDisposed()||u.manuallyShowTip(t,r,i,{x:u._lastX,y:u._lastY,dataByCoordSys:u._lastDataByCoordSys})})}},r.prototype.manuallyShowTip=function(t,r,i,s){if(s.from!==this.uid&&!wY.node&&!!i.getDom()){var u=Q5(s,i);this._ticket="";var c=s.dataByCoordSys,h=function(t,r,i){var s,u=En(t).queryOptionMap,c=u.keys()[0];if(!c||"series"===c)return;var h=Ea(r,c,u.get(c),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(!!h){if(i.getViewOfComponentModel(h).group.traverse(function(r){var i=I1(r).tooltipConfig;if(i&&i.name===t.name)return s=r,!0}),s)return{componentMainType:c,componentIndex:h.componentIndex,el:s}}}(s,r,i);if(h){var p=h.el.getBoundingRect().clone();p.applyTransform(h.el.transform),this._tryShow({offsetX:p.x+p.width/2,offsetY:p.y+p.height/2,target:h.el,position:s.position,positionDefault:"bottom"},u)}else if(s.tooltip&&null!=s.x&&null!=s.y)Q1.x=s.x,Q1.y=s.y,Q1.update(),I1(Q1).tooltipConfig={name:null,option:s.tooltip},this._tryShow({offsetX:s.x,offsetY:s.y,target:Q1},u);else if(c)this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,dataByCoordSys:c,tooltipOption:s.tooltipOption},u);else if(null!=s.seriesIndex){if(this._manuallyAxisShowTip(t,r,i,s))return;var f=KF(s,r),v=f.point[0],y=f.point[1];null!=v&&null!=y&&this._tryShow({offsetX:v,offsetY:y,target:f.el,position:s.position,positionDefault:"bottom"},u)}else null!=s.x&&null!=s.y&&(i.dispatchAction({type:"updateAxisPointer",x:s.x,y:s.y}),this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,target:i.getZr().findHover(s.x,s.y).target},u))}},r.prototype.manuallyHideTip=function(t,r,i,s){var u=this._tooltipContent;this._tooltipModel&&u.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,s.from!==this.uid&&this._hide(Q5(s,i))},r.prototype._manuallyAxisShowTip=function(t,r,i,s){var u=s.seriesIndex,c=s.dataIndex,h=r.getComponent("axisPointer").coordSysAxesInfo;if(null==u||null==c||null==h)return;var p=r.getSeriesByIndex(u);if(!!p&&"axis"===Q3([p.getData().getItemModel(c),p,(p.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return i.dispatchAction({type:"updateAxisPointer",seriesIndex:u,dataIndex:c,position:s.position}),!0},r.prototype._tryShow=function(t,r){var i,s,u=t.target;if(!!this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var c=t.dataByCoordSys;if(c&&c.length)this._showAxisTooltip(c,t);else if(u){;if("legend"===I1(u).ssrType)return;this._lastDataByCoordSys=null,BZ(u,function(t){return null!=I1(t).dataIndex?(i=t,!0):null!=I1(t).tooltipConfig?(s=t,!0):void 0},!0),i?this._showSeriesItemTooltip(t,i,r):s?this._showComponentItemTooltip(t,s,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},r.prototype._showOrMove=function(t,r){var i=t.get("showDelay");r=Sx(r,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(r,i):r()},r.prototype._showAxisTooltip=function(t,r){var i=this._ecModel,s=this._tooltipModel,u=[r.offsetX,r.offsetY],c=Q3([r.tooltipOption],s),h=this._renderMode,p=[],f=L7("section",{blocks:[],noHeader:!0}),v=[],y=new ku;Sp(t,function(t){Sp(t.dataByAxis,function(t){var r=i.getComponent(t.axisDim+"Axis",t.axisIndex),u=t.value;if(!!r&&null!=u){var c=Kb(u,r.axis,i,t.seriesDataIndices,t.valueLabelOpt),x=L7("section",{header:c,noHeader:!SU(c),sortBlocks:!0,blocks:[]});f.blocks.push(x),Sp(t.seriesDataIndices,function(f){var _=i.getSeriesByIndex(f.seriesIndex),b=f.dataIndexInside,w=_.getDataParams(b);if(!(w.dataIndex<0)){w.axisDim=t.axisDim,w.axisIndex=t.axisIndex,w.axisType=t.axisType,w.axisId=t.axisId,w.axisValue=zF(r.axis,{value:u}),w.axisValueLabel=c,w.marker=y.makeTooltipMarker("item",P4(w.color),h);var S=Lw(_.formatTooltip(b,!0,null)),M=S.frag;if(M){var A=Q3([_],s).get("valueFormatter");x.blocks.push(A?So({valueFormatter:A},M):M)}S.text&&v.push(S.text),p.push(w)}})}})}),f.blocks.reverse(),v.reverse();var x=r.position,_=ki(f,y,h,c.get("order"),i.get("useUTC"),c.get("textStyle"));_&&v.unshift(_);var b="richText"===h?"\n\n":"<br/>",w=v.join(b);this._showOrMove(c,function(){this._updateContentNotChangedOnAxis(t,p)?this._updatePosition(c,x,u[0],u[1],this._tooltipContent,p):this._showTooltipContent(c,w,p,Math.random()+"",u[0],u[1],x,null,y)})},r.prototype._showSeriesItemTooltip=function(t,r,i){var s=this._ecModel,u=I1(r),c=u.seriesIndex,h=s.getSeriesByIndex(c),p=u.dataModel||h,f=u.dataIndex,v=u.dataType,y=p.getData(v),x=this._renderMode,_=t.positionDefault,b=Q3([y.getItemModel(f),p,h&&(h.coordinateSystem||{}).model],this._tooltipModel,_?{position:_}:null),w=b.get("trigger");if(null==w||"item"===w){var S=p.getDataParams(f,v),M=new ku;S.marker=M.makeTooltipMarker("item",P4(S.color),x);var A=Lw(p.formatTooltip(f,!1,v)),C=b.get("order"),T=b.get("valueFormatter"),I=A.frag,D=I?ki(T?So({valueFormatter:T},I):I,M,x,C,s.get("useUTC"),b.get("textStyle")):A.text,P="item_"+p.name+"_"+f;this._showOrMove(b,function(){this._showTooltipContent(b,D,S,P,t.offsetX,t.offsetY,t.position,t.target,M)}),i({type:"showTip",dataIndexInside:f,dataIndex:y.getRawIndex(f),seriesIndex:c,from:this.uid})}},r.prototype._showComponentItemTooltip=function(t,r,i){var s="html"===this._renderMode,u=I1(r),c=u.tooltipConfig.option||{},h=c.encodeHTMLContent;if(SS(c)){var p=c;c={content:p,formatter:p},h=!0}h&&s&&c.content&&((c=Sr(c)).content=MT(c.content));var f=[c],v=this._ecModel.getComponent(u.componentMainType,u.componentIndex);v&&f.push(v),f.push({formatter:c.content});var y=t.positionDefault,x=Q3(f,this._tooltipModel,y?{position:y}:null),_=x.get("content"),b=Math.random()+"",w=new ku;this._showOrMove(x,function(){var i=Sr(x.get("formatterParams")||{});this._showTooltipContent(x,_,i,b,t.offsetX,t.offsetY,t.position,r,w)}),i({type:"showTip",from:this.uid})},r.prototype._showTooltipContent=function(t,r,i,s,u,c,h,p,f){if(this._ticket="",!!t.get("showContent")&&!!t.get("show")){var v=this._tooltipContent;v.setEnterable(t.get("enterable"));var y=t.get("formatter");h=h||t.get("position");var x=r,_=this._getNearestPoint([u,c],i,t.get("trigger"),t.get("borderColor")).color;if(y){if(SS(y)){var b=t.ecModel.get("useUTC"),w=Sb(i)?i[0]:i,S=w&&w.axisType&&w.axisType.indexOf("time")>=0;x=y,S&&(x=PL(w.axisValue,x,b)),x=P1(x,i,!0)}else if(Sw(y)){var M=Sx(function(r,s){r===this._ticket&&(v.setContent(s,f,t,_,h),this._updatePosition(t,h,u,c,v,i,p))},this);this._ticket=s,x=y(i,s,M)}else x=y}v.setContent(x,f,t,_,h),v.show(t,_),this._updatePosition(t,h,u,c,v,i,p)}},r.prototype._getNearestPoint=function(t,r,i,s){return"axis"===i||Sb(r)?{color:s||("html"===this._renderMode?"#fff":"none")}:Sb(r)?void 0:{color:s||r.color||r.borderColor}},r.prototype._updatePosition=function(t,r,i,s,u,c,h){var p=this._api.getWidth(),f=this._api.getHeight();r=r||t.get("position");var v=u.getSize(),y=t.get("align"),x=t.get("verticalAlign"),_=h&&h.getBoundingRect().clone();if(h&&_.applyTransform(h.transform),Sw(r)&&(r=r([i,s],c,u.el,_,{viewSize:[p,f],contentSize:v.slice()})),Sb(r))i=TT(r[0],p),s=TT(r[1],f);else if(SC(r)){var b=r;b.width=v[0],b.height=v[1];var w=Rt(b,{width:p,height:f});i=w.x,s=w.y,y=null,x=null}else if(SS(r)&&h){var S=function(t,r,i,s){var u=i[0],c=i[1],h=Math.ceil(Math.SQRT2*s)+8,p=0,f=0,v=r.width,y=r.height;switch(t){case"inside":p=r.x+v/2-u/2,f=r.y+y/2-c/2;break;case"top":p=r.x+v/2-u/2,f=r.y-c-h;break;case"bottom":p=r.x+v/2-u/2,f=r.y+y+h;break;case"left":p=r.x-u-h,f=r.y+y/2-c/2;break;case"right":p=r.x+v+h,f=r.y+y/2-c/2}return[p,f]}(r,_,v,t.get("borderWidth"));i=S[0],s=S[1]}else{var S=function(t,r,i,s,u,c,h){var p=i.getSize(),f=p[0],v=p[1];return null!=c&&(t+f+c+2>s?t-=f+c:t+=c),null!=h&&(r+v+h>u?r-=v+h:r+=h),[t,r]}(i,s,u,p,f,y?null:20,x?null:20);i=S[0],s=S[1]}if(y&&(i-=Q4(y)?v[0]/2:"right"===y?v[0]:0),x&&(s-=Q4(x)?v[1]/2:"bottom"===x?v[1]:0),QU(t)){var S=function(t,r,i,s,u){var c=i.getSize(),h=c[0],p=c[1];return t=Math.min(t+h,s)-h,r=Math.min(r+p,u)-p,[t=Math.max(t,0),r=Math.max(r,0)]}(i,s,u,p,f);i=S[0],s=S[1]}u.moveTo(i,s)},r.prototype._updateContentNotChangedOnAxis=function(t,r){var i=this._lastDataByCoordSys,s=this._cbParamsList,u=!!i&&i.length===t.length;return u&&Sp(i,function(i,c){var h=i.dataByAxis||[],p=(t[c]||{}).dataByAxis||[];(u=u&&h.length===p.length)&&Sp(h,function(t,i){var c=p[i]||{},h=t.seriesDataIndices||[],f=c.seriesDataIndices||[];(u=u&&t.value===c.value&&t.axisType===c.axisType&&t.axisId===c.axisId&&h.length===f.length)&&Sp(h,function(t,r){var i=f[r];u=u&&t.seriesIndex===i.seriesIndex&&t.dataIndex===i.dataIndex}),s&&Sp(t.seriesDataIndices,function(t){var i=t.seriesIndex,c=r[i],h=s[i];c&&h&&h.data!==c.data&&(u=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=r,!!u},r.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},r.prototype.dispose=function(t,r){if(!wY.node&&!!r.getDom())Bg(this,"_updatePosition"),this._tooltipContent.dispose(),KB("itemTooltip",r)},r.type="tooltip",r}(kM);function Q3(t,r,i){var s,u=r.ecModel;i?(s=new Pp(i,u,u),s=new Pp(r.option,s,u)):s=r;for(var c=t.length-1;c>=0;c--){var h=t[c];h&&(h instanceof Pp&&(h=h.get("tooltip",!0)),SS(h)&&(h={formatter:h}),h&&(s=new Pp(h,s,u)))}return s}function Q5(t,r){return t.dispatchAction||Sx(r.dispatchAction,r)}function Q4(t){return"center"===t||"middle"===t}var Q6=["rect","polygon","keep","clear"];function Q9(t,r){var i=Tq(t?t.brush:[]);if(!!i.length){var s=[];Sp(i,function(t){var r=t.hasOwnProperty("toolbox")?t.toolbox:[];r instanceof Array&&(s=s.concat(r))});var u=t&&t.toolbox;Sb(u)&&(u=u[0]),!u&&(u={feature:{}},t.toolbox=[u]);var c=u.feature||(u.feature={}),h=c.brush||(c.brush={}),p=h.type||(h.type=[]);p.push.apply(p,s),function(t){var r={};Sp(t,function(t){r[t]=1}),t.length=0,Sp(r,function(r,i){t.push(i)})}(p),r&&!p.length&&p.push.apply(p,Q6)}}var Q8=Sp;function Q7(t){if(t){for(var r in t)if(t.hasOwnProperty(r))return!0}}function eee(t,r,i){var s={};return Q8(r,function(r){var u=s[r]=function(){var t=function(){};return t.prototype.__hidden=t.prototype,new t}();Q8(t[r],function(t,s){if(!!Xe.isValidType(s)){var c={type:s,visual:t};i&&i(c,r),u[s]=new Xe(c),"opacity"===s&&((c=Sr(c)).type="colorAlpha",u.__hidden.__alphaForOpacity=new Xe(c))}})}),s}function eet(t,r,i){var s;Sp(i,function(t){r.hasOwnProperty(t)&&Q7(r[t])&&(s=!0)}),s&&Sp(i,function(i){r.hasOwnProperty(i)&&Q7(r[i])?t[i]=Sr(r[i]):delete t[i]})}var een={lineX:eer(0),lineY:eer(1),rect:{point:function(t,r,i){return t&&i.boundingRect.contain(t[0],t[1])},rect:function(t,r,i){return t&&i.boundingRect.intersect(t)}},polygon:{point:function(t,r,i){return t&&i.boundingRect.contain(t[0],t[1])&&zJ(i.range,t[0],t[1])},rect:function(t,r,i){var s=i.range;if(!t||s.length<=1)return!1;var u=t.x,c=t.y,h=t.width,p=t.height,f=s[0];if(zJ(s,u,c)||zJ(s,u+h,c)||zJ(s,u,c+p)||zJ(s,u+h,c+p)||M4.create(t).contain(f[0],f[1])||O4(u,c,u+h,c,s)||O4(u,c,u,c+p,s)||O4(u+h,c,u+h,c+p,s)||O4(u,c+p,u+h,c+p,s))return!0}}};function eer(t){var r=["x","y"],i=["width","height"];return{point:function(r,i,s){if(r){var u=s.range;return eei(r[t],u)}},rect:function(s,u,c){if(s){var h=c.range,p=[s[r[t]],s[r[t]]+s[i[t]]];return p[1]<p[0]&&p.reverse(),eei(p[0],h)||eei(p[1],h)||eei(h[0],p)||eei(h[1],p)}}}}function eei(t,r){return r[0]<=t&&t<=r[1]}var eea=["inBrush","outOfBrush"],eeo="__ecBrushSelect",ees="__ecInBrushSelectEvent";function eel(t){t.eachComponent({mainType:"brush"},function(r){(r.brushTargetManager=new QS(r.option,t)).setInputRanges(r.areas,t)})}function eeu(t,r,i){var s,u,c=[];t.eachComponent({mainType:"brush"},function(t){i&&"takeGlobalCursor"===i.type&&t.setBrushOption("brush"===i.key?i.brushOption:{brushType:!1})}),eel(t),t.eachComponent({mainType:"brush"},function(r,i){var h={brushId:r.id,brushIndex:i,brushName:r.name,areas:Sr(r.areas),selected:[]};c.push(h);var p=r.option,f=p.brushLink,v=[],y=[],x=[],_=!1;!i&&(s=p.throttleType,u=p.throttleDelay);var b=Sf(r.areas,function(t){var r,i,s,u=eed[t.brushType],c=Ss({boundingRect:u?u(t):void 0},t);return c.selectors=(i=(r=c).brushType,s={point:function(t){return een[i].point(t,s,r)},rect:function(t){return een[i].rect(t,s,r)}}),c}),w=eee(r.option,eea,function(t){t.mappingMethod="fixed"});function S(t){return"all"===f||!!v[t]}function M(t){return!!t.length}Sb(f)&&Sp(f,function(t){v[t]=1}),t.eachSeries(function(i,s){var u=x[s]=[];"parallel"===i.subType?function(t,r){var i=t.coordinateSystem;_=_||i.hasAxisBrushed(),S(r)&&i.eachActiveState(t.getData(),function(t,r){"active"===t&&(y[r]=1)})}(i,s):function(i,s,u){if(!(!i.brushSelector||function(t,r){var i=t.option.seriesIndex;return null!=i&&"all"!==i&&(Sb(i)?0>Su(i,r):r!==i)}(r,s))){if(Sp(b,function(s){r.brushTargetManager.controlSeries(s,i,t)&&u.push(s),_=_||M(u)}),S(s)&&M(u)){var c=i.getData();c.each(function(t){eeh(i,u,c,t)&&(y[t]=1)})}}}(i,s,u)});t.eachSeries(function(t,r){var i={seriesId:t.id,seriesIndex:r,seriesName:t.name,dataIndex:[]};h.selected.push(i);var s=x[r],u=t.getData(),c=S(r)?function(t){return y[t]?(i.dataIndex.push(u.getRawIndex(t)),"inBrush"):"outOfBrush"}:function(r){return eeh(t,s,u,r)?(i.dataIndex.push(u.getRawIndex(r)),"inBrush"):"outOfBrush"};(S(r)?_:M(s))&&function(t,r,i,s,u,c){var h,p={};function f(t){return Bj(i,h,t)}function v(t,r){BY(i,h,t,r)}function y(t,u){h=t;var c=i.getRawDataItem(h);if(!c||!1!==c.visualMap)for(var y=s.call(void 0,t),x=r[y],_=p[y],b=0,w=_.length;b<w;b++){var S=_[b];x[S]&&x[S].applyVisual(t,f,v)}}Sp(t,function(t){var i=Xe.prepareVisualTypes(r[t]);p[t]=i}),null==c?i.each(y):i.each([c],y)}(eea,w,u,c)})}),function(t,r,i,s,u){if(!u)return;var c=t.getZr();if(!c[ees])!c[eeo]&&(c[eeo]=eec),Bf(c,eeo,i,r)(t,s)}(r,s,u,c,i)}function eec(t,r){if(!t.isDisposed()){var i=t.getZr();i[ees]=!0,t.dispatchAction({type:"brushSelect",batch:r}),i[ees]=!1}}function eeh(t,r,i,s){for(var u=0,c=r.length;u<c;u++){var h=r[u];if(t.brushSelector(s,i,h.selectors,h))return!0}}var eed={rect:function(t){return eep(t.range)},polygon:function(t){for(var r,i=t.range,s=0,u=i.length;s<u;s++){r=r||[[1/0,-1/0],[1/0,-1/0]];var c=i[s];c[0]<r[0][0]&&(r[0][0]=c[0]),c[0]>r[0][1]&&(r[0][1]=c[0]),c[1]<r[1][0]&&(r[1][0]=c[1]),c[1]>r[1][1]&&(r[1][1]=c[1])}return r&&eep(r)}};function eep(t){return new M4(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var eef=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.init=function(t,r){this.ecModel=t,this.api=r,this.model,(this._brushController=new $r(r.getZr())).on("brush",Sx(this._onBrush,this)).mount()},r.prototype.render=function(t,r,i,s){this.model=t,this._updateController(t,r,i,s)},r.prototype.updateTransform=function(t,r,i,s){eel(r),this._updateController(t,r,i,s)},r.prototype.updateVisual=function(t,r,i,s){this.updateTransform(t,r,i,s)},r.prototype.updateView=function(t,r,i,s){this._updateController(t,r,i,s)},r.prototype._updateController=function(t,r,i,s){s&&s.$from===t.id||this._brushController.setPanels(t.brushTargetManager.makePanelOpts(i)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},r.prototype.dispose=function(){this._brushController.dispose()},r.prototype._onBrush=function(t){var r=this.model.id,i=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:Sr(i),$from:r}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:Sr(i),$from:r})},r.type="brush",r}(kM),eeg=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.areas=[],i.brushOption={},i}return wU(r,t),r.prototype.optionUpdated=function(t,r){var i=this.option;r||eet(i,t,["inBrush","outOfBrush"]);var s=i.inBrush=i.inBrush||{};i.outOfBrush=i.outOfBrush||{color:"#ddd"},!s.hasOwnProperty("liftZ")&&(s.liftZ=5)},r.prototype.setAreas=function(t){if(!!t)this.areas=Sf(t,function(t){return eem(this.option,t)},this)},r.prototype.setBrushOption=function(t){this.brushOption=eem(this.option,t),this.brushType=this.brushOption.brushType},r.type="brush",r.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],r.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},r}(Ru);function eem(t,r){return Si({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new Pp(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},r,!0)}var eev=["rect","polygon","lineX","lineY","keep","clear"],eey=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return wU(r,t),r.prototype.render=function(t,r,i){var s,u,c;r.eachComponent({mainType:"brush"},function(t){s=t.brushType,u=t.brushOption.brushMode||"single",c=c||!!t.areas.length}),this._brushType=s,this._brushMode=u,Sp(t.get("type",!0),function(r){t.setIconStatus(r,("keep"===r?"multiple"===u:"clear"===r?c:r===s)?"emphasis":"normal")})},r.prototype.updateView=function(t,r,i){this.render(t,r,i)},r.prototype.getIcons=function(){var t=this.model,r=t.get("icon",!0),i={};return Sp(t.get("type",!0),function(t){r[t]&&(i[t]=r[t])}),i},r.prototype.onclick=function(t,r,i){var s=this._brushType,u=this._brushMode;"clear"===i?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===i?s:s!==i&&i,brushMode:"keep"===i?"multiple"===u?"single":"multiple":u}})},r.getDefaultOption=function(t){return{show:!0,type:eev.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])}},r}(Qn),eex=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.layoutMode={type:"box",ignoreSize:!0},i}return wU(r,t),r.type="title",r.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},r}(Ru),ee_=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.render=function(t,r,i){if(this.group.removeAll(),!!t.get("show")){var s=this.group,u=t.getModel("textStyle"),c=t.getModel("subtextStyle"),h=t.get("textAlign"),p=SO(t.get("textBaseline"),t.get("textVerticalAlign")),f=new I0({style:D2(u,{text:t.get("text"),fill:u.getTextColor()},{disableBox:!0}),z2:10}),v=f.getBoundingRect(),y=t.get("subtext"),x=new I0({style:D2(c,{text:y,fill:c.getTextColor(),y:v.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),_=t.get("link"),b=t.get("sublink"),w=t.get("triggerEvent",!0);f.silent=!_&&!w,x.silent=!b&&!w,_&&f.on("click",function(){P6(_,"_"+t.get("target"))}),b&&x.on("click",function(){P6(b,"_"+t.get("subtarget"))}),I1(f).eventData=I1(x).eventData=w?{componentType:"title",componentIndex:t.componentIndex}:null,s.add(f),y&&s.add(x);var S=s.getBoundingRect(),M=t.getBoxLayoutParams();M.width=S.width,M.height=S.height;var A=Rt(M,{width:i.getWidth(),height:i.getHeight()},t.get("padding"));!h&&("middle"===(h=t.get("left")||t.get("right"))&&(h="center"),"right"===h?A.x+=A.width:"center"===h&&(A.x+=A.width/2)),!p&&("center"===(p=t.get("top")||t.get("bottom"))&&(p="middle"),"bottom"===p?A.y+=A.height:"middle"===p&&(A.y+=A.height/2),p=p||"top"),s.x=A.x,s.y=A.y,s.markRedraw();var C={align:h,verticalAlign:p};f.setStyle(C),x.setStyle(C),S=s.getBoundingRect();var T=A.margin,I=t.getItemStyle(["color","opacity"]);I.fill=t.get("backgroundColor");var D=new IF({shape:{x:S.x-T[3],y:S.y-T[0],width:S.width+T[1]+T[3],height:S.height+T[0]+T[2],r:t.get("borderRadius")},style:I,subPixelOptimize:!0,silent:!0});s.add(D)}},r.type="title",r}(kM),eeb=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.layoutMode="box",i}return wU(r,t),r.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),this._initData()},r.prototype.mergeOption=function(r){t.prototype.mergeOption.apply(this,arguments),this._initData()},r.prototype.setCurrentIndex=function(t){null==t&&(t=this.option.currentIndex);var r=this._data.count();this.option.loop?t=(t%r+r)%r:(t>=r&&(t=r-1),t<0&&(t=0)),this.option.currentIndex=t},r.prototype.getCurrentIndex=function(){return this.option.currentIndex},r.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},r.prototype.setPlayState=function(t){this.option.autoPlay=!!t},r.prototype.getPlayState=function(){return!!this.option.autoPlay},r.prototype._initData=function(){var t,r=this.option,i=r.data||[],s=r.axisType,u=this._names=[];"category"===s?(t=[],Sp(i,function(r,i){var s,c=T4(T1(r),"");SC(r)?(s=Sr(r)).value=i:s=i,t.push(s),u.push(c)})):t=i;(this._data=new FV([{name:"value",type:{category:"ordinal",time:"time",value:"number"}[s]||"number"}],this)).initData(t,u)},r.prototype.getData=function(){return this._data},r.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},r.type="timeline",r.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},r}(Ru),eew=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.type="timeline.slider",r.defaultOption=Pm(eeb.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),r}(eeb);Sh(eew,Lb.prototype);var eeS=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.type="timeline",r}(kM),eeM=function(t){function r(r,i,s,u){var c=t.call(this,r,i,s)||this;return c.type=u||"value",c}return wU(r,t),r.prototype.getLabelModel=function(){return this.model.getModel("label")},r.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},r}(Uu),eeA=Math.PI,eeC=T7(),eeT=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.init=function(t,r){this.api=r},r.prototype.render=function(t,r,i){if(this.model=t,this.api=i,this.ecModel=r,this.group.removeAll(),t.get("show",!0)){var s=this._layout(t,i),u=this._createGroup("_mainGroup"),c=this._createGroup("_labelGroup"),h=this._axis=this._createAxis(s,t);t.formatTooltip=function(t){return L7("nameValue",{noName:!0,value:h.scale.getLabel({value:t})})},Sp(["AxisLine","AxisTick","Control","CurrentPointer"],function(r){this["_render"+r](s,u,h,t)},this),this._renderAxisLabel(s,c,h,t),this._position(s,t)}this._doPlayStop(),this._updateTicksStatus()},r.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},r.prototype.dispose=function(){this._clearTimer()},r.prototype._layout=function(t,r){var i,s,u,c,h=t.get(["label","position"]),p=t.get("orient"),f=function(t,r){return Rt(t.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()},t.get("padding"))}(t,r),v={horizontal:"center",vertical:(i=null==h||"auto"===h?"horizontal"===p?f.y+f.height/2<r.getHeight()/2?"-":"+":f.x+f.width/2<r.getWidth()/2?"+":"-":SS(h)?({horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}})[p][h]:h)>=0||"+"===i?"left":"right"},y={horizontal:i>=0||"+"===i?"top":"bottom",vertical:"middle"},x="vertical"===p?f.height:f.width,_=t.getModel("controlStyle"),b=_.get("show",!0),w=b?_.get("itemSize"):0,S=b?_.get("itemGap"):0,M=w+S,A=t.get(["label","rotate"])||0;A=A*eeA/180;var C=_.get("position",!0),T=b&&_.get("showPlayBtn",!0),I=b&&_.get("showPrevBtn",!0),D=b&&_.get("showNextBtn",!0),P=0,R=x;"left"===C||"bottom"===C?(T&&(s=[0,0],P+=M),I&&(u=[P,0],P+=M)):(T&&(s=[R-w,0],R-=M),I&&(u=[0,0],P+=M)),D&&(c=[R-w,0],R-=M);var L=[P,R];return t.get("inverse")&&L.reverse(),{viewRect:f,mainLength:x,orient:p,rotation:({horizontal:0,vertical:eeA/2})[p],labelRotation:A,labelPosOpt:i,labelAlign:t.get(["label","align"])||v[p],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||y[p],playPosition:s,prevBtnPosition:u,nextBtnPosition:c,axisExtent:L,controlSize:w,controlGap:S}},r.prototype._position=function(t,r){var i=this._mainGroup,s=this._labelGroup,u=t.viewRect;if("vertical"===t.orient){var c=MH(),h=u.x,p=u.y+u.height;Mj(c,c,[-h,-p]),MX(c,c,-eeA/2),Mj(c,c,[h,p]),(u=u.clone()).applyTransform(c)}var f=M(u),v=M(i.getBoundingRect()),y=M(s.getBoundingRect()),x=[i.x,i.y],_=[s.x,s.y];_[0]=x[0]=f[0][0];var b=t.labelPosOpt;if(null==b||SS(b)){var w="+"===b?0:1;A(x,v,f,1,w),A(_,y,f,1,1-w)}else{var w=b>=0?0:1;A(x,v,f,1,w),_[1]=x[1]+b}function S(t){t.originX=f[0][0]-t.x,t.originY=f[1][0]-t.y}function M(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function A(t,r,i,s,u){t[s]+=i[s][u]-r[s][u]}i.setPosition(x),s.setPosition(_),i.rotation=s.rotation=t.rotation,S(i),S(s)},r.prototype._createAxis=function(t,r){var i=r.getData(),s=r.get("axisType"),u=function(t,r){if(r=r||t.get("type"))switch(r){case"category":return new ze({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new zv({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new zn}}(r,s);u.getTicks=function(){return i.mapArray(["value"],function(t){return{value:t}})};var c=i.getDataExtent("value");u.setExtent(c[0],c[1]),u.calcNiceTicks();var h=new eeM("value",u,t.axisExtent,s);return h.model=r,h},r.prototype._createGroup=function(t){var r=this[t]=new Tf;return this.group.add(r),r},r.prototype._renderAxisLine=function(t,r,i,s){var u=i.getExtent();if(!!s.get(["lineStyle","show"])){var c=new Og({shape:{x1:u[0],y1:0,x2:u[1],y2:0},style:So({lineCap:"round"},s.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});r.add(c);var h=this._progressLine=new Og({shape:{x1:u[0],x2:this._currentPointer?this._currentPointer.x:u[0],y1:0,y2:0},style:Ss({lineCap:"round",lineWidth:c.style.lineWidth},s.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});r.add(h)}},r.prototype._renderAxisTick=function(t,r,i,s){var u=this,c=s.getData(),h=i.scale.getTicks();this._tickSymbols=[],Sp(h,function(t){var h=i.dataToCoord(t.value),p=c.getItemModel(t.value),f=p.getModel("itemStyle"),v=p.getModel(["emphasis","itemStyle"]),y=p.getModel(["progress","itemStyle"]),x=eeE(p,f,r,{x:h,y:0,onclick:Sx(u._changeTimeline,u,t.value)});x.ensureState("emphasis").style=v.getItemStyle(),x.ensureState("progress").style=y.getItemStyle(),DP(x);var _=I1(x);p.get("tooltip")?(_.dataIndex=t.value,_.dataModel=s):_.dataIndex=_.dataModel=null,u._tickSymbols.push(x)})},r.prototype._renderAxisLabel=function(t,r,i,s){var u=this;if(!!i.getLabelModel().get("show")){var c=s.getData(),h=i.getViewLabels();this._tickLabels=[],Sp(h,function(s){var h=s.tickValue,p=c.getItemModel(h),f=p.getModel("label"),v=p.getModel(["emphasis","label"]),y=p.getModel(["progress","label"]),x=new I0({x:i.dataToCoord(s.tickValue),y:0,rotation:t.labelRotation-t.rotation,onclick:Sx(u._changeTimeline,u,h),silent:!1,style:D2(f,{text:s.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});x.ensureState("emphasis").style=D2(v),x.ensureState("progress").style=D2(y),r.add(x),DP(x),eeC(x).dataIndex=h,u._tickLabels.push(x)})}},r.prototype._renderControl=function(t,r,i,s){var u=t.controlSize,c=t.rotation,h=s.getModel("controlStyle").getItemStyle(),p=s.getModel(["emphasis","controlStyle"]).getItemStyle(),f=s.getPlayState(),v=s.get("inverse",!0);function y(t,i,f,v){if(!!t){var y=Tr(SO(s.get(["controlStyle",i+"BtnSize"]),u),u),x=function(t,r,i,s){var u=s.style,c=O5(t.get(["controlStyle",r]),s||{},new M4(i[0],i[1],i[2],i[3]));return u&&c.setStyle(u),c}(s,i+"Icon",[0,-y/2,y,y],{x:t[0],y:t[1],originX:u/2,originY:0,rotation:v?-c:0,rectHover:!0,style:h,onclick:f});x.ensureState("emphasis").style=p,r.add(x),DP(x)}}y(t.nextBtnPosition,"next",Sx(this._changeTimeline,this,v?"-":"+")),y(t.prevBtnPosition,"prev",Sx(this._changeTimeline,this,v?"+":"-")),y(t.playPosition,f?"stop":"play",Sx(this._handlePlayClick,this,!f),!0)},r.prototype._renderCurrentPointer=function(t,r,i,s){var u=s.getData(),c=s.getCurrentIndex(),h=u.getItemModel(c).getModel("checkpointStyle"),p=this;this._currentPointer=eeE(h,h,this._mainGroup,{},this._currentPointer,{onCreate:function(t){t.draggable=!0,t.drift=Sx(p._handlePointerDrag,p),t.ondragend=Sx(p._handlePointerDragend,p),eeI(t,p._progressLine,c,i,s,!0)},onUpdate:function(t){eeI(t,p._progressLine,c,i,s)}})},r.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},r.prototype._handlePointerDrag=function(t,r,i){this._clearTimer(),this._pointerChangeTimeline([i.offsetX,i.offsetY])},r.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},r.prototype._pointerChangeTimeline=function(t,r){var i=this._toAxisCoord(t)[0],s=TI(this._axis.getExtent().slice());i>s[1]&&(i=s[1]),i<s[0]&&(i=s[0]),this._currentPointer.x=i,this._currentPointer.markRedraw();var u=this._progressLine;u&&(u.shape.x2=i,u.dirty());var c=this._findNearestTick(i),h=this.model;(r||c!==h.getCurrentIndex()&&h.get("realtime"))&&this._changeTimeline(c)},r.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var r=t.model;t._changeTimeline(r.getCurrentIndex()+(r.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},r.prototype._toAxisCoord=function(t){return Oq(t,this._mainGroup.getLocalTransform(),!0)},r.prototype._findNearestTick=function(t){var r,i=this.model.getData(),s=1/0,u=this._axis;return i.each(["value"],function(i,c){var h=Math.abs(u.dataToCoord(i)-t);h<s&&(s=h,r=c)}),r},r.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},r.prototype._changeTimeline=function(t){var r=this.model.getCurrentIndex();"+"===t?t=r+1:"-"===t&&(t=r-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},r.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),r=this._tickSymbols,i=this._tickLabels;if(r)for(var s=0;s<r.length;s++)r&&r[s]&&r[s].toggleState("progress",s<t);if(i)for(var s=0;s<i.length;s++)i&&i[s]&&i[s].toggleState("progress",eeC(i[s]).dataIndex<=t)},r.type="timeline.slider",r}(eeS);function eeE(t,r,i,s,u,c){var h=r.get("color");u?(u.setColor(h),i.add(u),c&&c.onUpdate(u)):((u=B8(t.get("symbol"),-1,-1,2,2,h)).setStyle("strokeNoScale",!0),i.add(u),c&&c.onCreate(u));var p=r.getItemStyle(["color"]);u.setStyle(p),s=Si({rectHover:!0,z2:100},s,!0);var f=B7(t.get("symbolSize"));s.scaleX=f[0]/2,s.scaleY=f[1]/2;var v=Ne(t.get("symbolOffset"),f);v&&(s.x=(s.x||0)+v[0],s.y=(s.y||0)+v[1]);var y=t.get("symbolRotate");return s.rotation=(y||0)*Math.PI/180||0,u.attr(s),u.updateTransform(),u}function eeI(t,r,i,s,u,c){if(!t.dragging){var h=u.getModel("checkpointStyle"),p=s.dataToCoord(u.getData().get("value",i));if(c||!h.get("animation",!0))t.attr({x:p,y:0}),r&&r.attr({shape:{x2:p}});else{var f={duration:h.get("animationDuration",!0),easing:h.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:p,y:0},f),r&&r.animateTo({shape:{x2:p}},f)}}}function eeD(t){var r=t&&t.timeline;!Sb(r)&&(r=r?[r]:[]),Sp(r,function(t){if(!!t)(function(t){var r=t.type,i={number:"value",time:"time"};if(i[r]&&(t.axisType=i[r],delete t.type),eeP(t),eeR(t,"controlPosition")){var s=t.controlStyle||(t.controlStyle={});!eeR(s,"position")&&(s.position=t.controlPosition),"none"===s.position&&!eeR(s,"show")&&(s.show=!1,delete s.position),delete t.controlPosition}Sp(t.data||[],function(t){SC(t)&&!Sb(t)&&(!eeR(t,"value")&&eeR(t,"name")&&(t.value=t.name),eeP(t))})})(t)})}function eeP(t){var r=t.itemStyle||(t.itemStyle={}),i=r.emphasis||(r.emphasis={}),s=t.label||t.label||{},u=s.normal||(s.normal={}),c={normal:1,emphasis:1};Sp(s,function(t,r){!c[r]&&!eeR(u,r)&&(u[r]=t)}),i.label&&!eeR(s,"emphasis")&&(s.emphasis=i.label,delete i.label)}function eeR(t,r){return t.hasOwnProperty(r)}function eeL(t,r){if(!t)return!1;for(var i=Sb(t)?t:[t],s=0;s<i.length;s++)if(i[s]&&i[s][r])return!0;return!1}function eek(t){TQ(t,"label",["show"])}var eeO=T7(),eeB=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.createdBySelf=!1,i}return wU(r,t),r.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),this._mergeOption(t,i,!1,!0)},r.prototype.isAnimationEnabled=function(){if(wY.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},r.prototype.mergeOption=function(t,r){this._mergeOption(t,r,!1,!1)},r.prototype._mergeOption=function(t,r,i,s){var u=this.mainType;!i&&r.eachSeries(function(t){var i=t.get(this.mainType,!0),c=eeO(t)[u];if(!i||!i.data){eeO(t)[u]=null;return}c?c._mergeOption(i,r,!0):(s&&eek(i),Sp(i.data,function(t){t instanceof Array?(eek(t[0]),eek(t[1])):eek(t)}),So(c=this.createMarkerModelFromSeries(i,this,r),{mainType:this.mainType,seriesIndex:t.seriesIndex,name:t.name,createdBySelf:!0}),c.__hostSeries=t),eeO(t)[u]=c},this)},r.prototype.formatTooltip=function(t,r,i){var s=this.getData(),u=this.getRawValue(t),c=s.getName(t);return L7("section",{header:this.name,blocks:[L7("nameValue",{name:c,value:u,noName:!c,noValue:null==u})]})},r.prototype.getData=function(){return this._data},r.prototype.setData=function(t){this._data=t},r.prototype.getDataParams=function(t,r){var i=Lb.prototype.getDataParams.call(this,t,r),s=this.__hostSeries;return s&&(i.seriesId=s.id,i.seriesName=s.name,i.seriesType=s.subType),i},r.getMarkerModelFromSeries=function(t,r){return eeO(t)[r]},r.type="marker",r.dependencies=["series","grid","polar","geo"],r}(Ru);Sh(eeB,Lb.prototype);var eeN=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.createMarkerModelFromSeries=function(t,i,s){return new r(t,i,s)},r.type="markPoint",r.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},r}(eeB);function eeF(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function eez(t,r,i,s,u,c){var h=[],p=FZ(r,s)?r.getCalculationInfo("stackResultDimension"):s,f=eej(r,p,t),v=r.indicesOfNearest(p,f)[0];h[u]=r.get(i,v),h[c]=r.get(p,v);var y=r.get(s,v),x=TD(r.get(s,v));return(x=Math.min(x,20))>=0&&(h[c]=+h[c].toFixed(x)),[h,y]}var eeU={min:S_(eez,"min"),max:S_(eez,"max"),average:S_(eez,"average"),median:S_(eez,"median")};function eeH(t,r){if(!!r){var i,s=t.getData(),u=t.coordinateSystem,c=u&&u.dimensions;if(!(!isNaN(parseFloat((i=r).x))&&!isNaN(parseFloat(i.y)))&&!Sb(r.coord)&&Sb(c)){var h=eeG(r,s,u,t);if((r=Sr(r)).type&&eeU[r.type]&&h.baseAxis&&h.valueAxis){var p=Su(c,h.baseAxis.dim),f=Su(c,h.valueAxis.dim),v=eeU[r.type](s,h.baseDataDim,h.valueDataDim,p,f);r.coord=v[0],r.value=v[1]}else r.coord=[null!=r.xAxis?r.xAxis:r.radiusAxis,null!=r.yAxis?r.yAxis:r.angleAxis]}if(null!=r.coord&&Sb(c)){for(var y=r.coord,x=0;x<2;x++)eeU[y[x]]&&(y[x]=eej(s,s.mapDimension(c[x]),y[x]))}else r.coord=[];return r}}function eeG(t,r,i,s){var u={};return null!=t.valueIndex||null!=t.valueDim?(u.valueDataDim=null!=t.valueIndex?r.getDimension(t.valueIndex):t.valueDim,u.valueAxis=i.getAxis(function(t,r){var i=t.getData().getDimensionInfo(r);return i&&i.coordDim}(s,u.valueDataDim)),u.baseAxis=i.getOtherAxis(u.valueAxis),u.baseDataDim=r.mapDimension(u.baseAxis.dim)):(u.baseAxis=s.getBaseAxis(),u.valueAxis=i.getOtherAxis(u.baseAxis),u.baseDataDim=r.mapDimension(u.baseAxis.dim),u.valueDataDim=r.mapDimension(u.valueAxis.dim)),u}function eeV(t,r){return!t||!t.containData||!r.coord||!!eeF(r)||t.containData(r.coord)}function eeW(t,r){return t?function(t,i,s,u){return LP(u<2?t.coord&&t.coord[u]:t.value,r[u])}:function(t,i,s,u){return LP(t.value,r[u])}}function eej(t,r,i){if("average"===i){var s=0,u=0;return t.each(r,function(t,r){!isNaN(t)&&(s+=t,u++)}),s/u}if("median"===i)return t.getMedian(r);return t.getDataExtent(r)["max"===i?1:0]}var eeX=T7(),eeY=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.init=function(){this.markerGroupMap=SY()},r.prototype.render=function(t,r,i){var s=this,u=this.markerGroupMap;u.each(function(t){eeX(t).keep=!1}),r.eachSeries(function(t){var u=eeB.getMarkerModelFromSeries(t,s.type);u&&s.renderSeries(t,u,r,i)}),u.each(function(t){eeX(t).keep||s.group.remove(t.group)})},r.prototype.markKeep=function(t){eeX(t).keep=!0},r.prototype.toggleBlurSeries=function(t,r){var i=this;Sp(t,function(t){var s=eeB.getMarkerModelFromSeries(t,i.type);s&&s.getData().eachItemGraphicEl(function(t){if(t)r?Dp(t,Dl):Dp(t,Du)})})},r.type="marker",r}(kM);function ee$(t,r,i){var s=r.coordinateSystem;t.each(function(u){var c,h=t.getItemModel(u),p=TT(h.get("x"),i.getWidth()),f=TT(h.get("y"),i.getHeight());if(isNaN(p)||isNaN(f)){if(r.getMarkerPosition)c=r.getMarkerPosition(t.getValues(t.dimensions,u));else if(s){var v=t.get(s.dimensions[0],u),y=t.get(s.dimensions[1],u);c=s.dataToPoint([v,y])}}else c=[p,f];!isNaN(p)&&(c[0]=p),!isNaN(f)&&(c[1]=f),t.setItemLayout(u,c)})}var eeJ=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.updateTransform=function(t,r,i){r.eachSeries(function(t){var r=eeB.getMarkerModelFromSeries(t,"markPoint");r&&(ee$(r.getData(),t,i),this.markerGroupMap.get(t.id).updateLayout())},this)},r.prototype.renderSeries=function(t,r,i,s){var u=t.coordinateSystem,c=t.id,h=t.getData(),p=this.markerGroupMap,f=p.get(c)||p.set(c,new HQ),v=function(t,r,i){var s,u=new FV(s=t?Sf(t&&t.dimensions,function(t){return So(So({},r.getData().getDimensionInfo(r.getData().mapDimension(t))||{}),{name:t,ordinalMeta:null})}):[{name:"value",type:"float"}],i),c=Sf(i.get("data"),S_(eeH,r));t&&(c=Sm(c,S_(eeV,t)));var h=eeW(!!t,s);return u.initData(c,null,h),u}(u,t,r);r.setData(v),ee$(r.getData(),t,s),v.each(function(t){var i=v.getItemModel(t),s=i.getShallow("symbol"),u=i.getShallow("symbolSize"),c=i.getShallow("symbolRotate"),p=i.getShallow("symbolOffset"),f=i.getShallow("symbolKeepAspect");if(Sw(s)||Sw(u)||Sw(c)||Sw(p)){var y=r.getRawValue(t),x=r.getDataParams(t);Sw(s)&&(s=s(y,x)),Sw(u)&&(u=u(y,x)),Sw(c)&&(c=c(y,x)),Sw(p)&&(p=p(y,x))}var _=i.getModel("itemStyle").getItemStyle(),b=BX(h,"color");!_.fill&&(_.fill=b),v.setItemVisual(t,{symbol:s,symbolSize:u,symbolRotate:c,symbolOffset:p,symbolKeepAspect:f,style:_})}),f.updateData(v),this.group.add(f.group),v.eachItemGraphicEl(function(t){t.traverse(function(t){I1(t).dataModel=r})}),this.markKeep(f),f.group.silent=r.get("silent")||t.get("silent")},r.type="markPoint",r}(eeY),eeZ=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.createMarkerModelFromSeries=function(t,i,s){return new r(t,i,s)},r.type="markLine",r.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},r}(eeB),eeK=T7(),eeq=function(t,r,i,s){var u,c=t.getData();if(Sb(s))u=s;else{var h=s.type;if("min"===h||"max"===h||"average"===h||"median"===h||null!=s.xAxis||null!=s.yAxis){var p=void 0,f=void 0;if(null!=s.yAxis||null!=s.xAxis)p=r.getAxis(null!=s.yAxis?"y":"x"),f=Sk(s.yAxis,s.xAxis);else{var v=eeG(s,c,r,t);p=v.valueAxis;var y=FK(c,v.valueDataDim);f=eej(c,y,h)}var x="x"===p.dim?0:1,_=1-x,b=Sr(s),w={coord:[]};b.type=null,b.coord=[],b.coord[_]=-1/0,w.coord[_]=1/0;var S=i.get("precision");S>=0&&SA(f)&&(f=+f.toFixed(Math.min(S,20))),b.coord[x]=w.coord[x]=f,u=[b,w,{type:h,valueIndex:s.valueIndex,value:f}]}else u=[]}var M=[eeH(t,u[0]),eeH(t,u[1]),So({},u[2])];return M[2].type=M[2].type||null,Si(M[2],M[0]),Si(M[2],M[1]),M};function eeQ(t){return!isNaN(t)&&!isFinite(t)}function ee0(t,r,i,s){var u=1-t,c=s.dimensions[t];return eeQ(r[u])&&eeQ(i[u])&&r[t]===i[t]&&s.getAxis(c).containData(r[t])}function ee1(t,r){if("cartesian2d"===t.type){var i=r[0].coord,s=r[1].coord;if(i&&s&&(ee0(1,i,s,t)||ee0(0,i,s,t)))return!0}return eeV(t,r[0])&&eeV(t,r[1])}function ee2(t,r,i,s,u){var c,h=s.coordinateSystem,p=t.getItemModel(r),f=TT(p.get("x"),u.getWidth()),v=TT(p.get("y"),u.getHeight());if(isNaN(f)||isNaN(v)){if(s.getMarkerPosition)c=s.getMarkerPosition(t.getValues(t.dimensions,r));else{var y=h.dimensions,x=t.get(y[0],r),_=t.get(y[1],r);c=h.dataToPoint([x,_])}if(Gr(h,"cartesian2d")){var b=h.getAxis("x"),w=h.getAxis("y"),y=h.dimensions;eeQ(t.get(y[0],r))?c[0]=b.toGlobalCoord(b.getExtent()[i?0:1]):eeQ(t.get(y[1],r))&&(c[1]=w.toGlobalCoord(w.getExtent()[i?0:1]))}!isNaN(f)&&(c[0]=f),!isNaN(v)&&(c[1]=v)}else c=[f,v];t.setItemLayout(r,c)}var ee3=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.updateTransform=function(t,r,i){r.eachSeries(function(t){var r=eeB.getMarkerModelFromSeries(t,"markLine");if(r){var s=r.getData(),u=eeK(r).from,c=eeK(r).to;u.each(function(r){ee2(u,r,!0,t,i),ee2(c,r,!1,t,i)}),s.each(function(t){s.setItemLayout(t,[u.getItemLayout(t),c.getItemLayout(t)])}),this.markerGroupMap.get(t.id).updateLayout()}},this)},r.prototype.renderSeries=function(t,r,i,s){var u=t.coordinateSystem,c=t.id,h=t.getData(),p=this.markerGroupMap,f=p.get(c)||p.set(c,new Ye);this.group.add(f.group);var v=function(t,r,i){var s,u=new FV(s=t?Sf(t&&t.dimensions,function(t){return So(So({},r.getData().getDimensionInfo(r.getData().mapDimension(t))||{}),{name:t,ordinalMeta:null})}):[{name:"value",type:"float"}],i),c=new FV(s,i),h=new FV([],i),p=Sf(i.get("data"),S_(eeq,r,t,i));t&&(p=Sm(p,S_(ee1,t)));var f=eeW(!!t,s);return u.initData(Sf(p,function(t){return t[0]}),null,f),c.initData(Sf(p,function(t){return t[1]}),null,f),h.initData(Sf(p,function(t){return t[2]})),h.hasItemOption=!0,{from:u,to:c,line:h}}(u,t,r),y=v.from,x=v.to,_=v.line;eeK(r).from=y,eeK(r).to=x,r.setData(_);var b=r.get("symbol"),w=r.get("symbolSize"),S=r.get("symbolRotate"),M=r.get("symbolOffset");function A(r,i,u){var c=r.getItemModel(i);ee2(r,i,u,t,s);var p=c.getModel("itemStyle").getItemStyle();null==p.fill&&(p.fill=BX(h,"color")),r.setItemVisual(i,{symbolKeepAspect:c.get("symbolKeepAspect"),symbolOffset:SO(c.get("symbolOffset",!0),M[u?0:1]),symbolRotate:SO(c.get("symbolRotate",!0),S[u?0:1]),symbolSize:SO(c.get("symbolSize"),w[u?0:1]),symbol:SO(c.get("symbol",!0),b[u?0:1]),style:p})}!Sb(b)&&(b=[b,b]),!Sb(w)&&(w=[w,w]),!Sb(S)&&(S=[S,S]),!Sb(M)&&(M=[M,M]),v.from.each(function(t){A(y,t,!0),A(x,t,!1)}),_.each(function(t){var r=_.getItemModel(t).getModel("lineStyle").getLineStyle();_.setItemLayout(t,[y.getItemLayout(t),x.getItemLayout(t)]),null==r.stroke&&(r.stroke=y.getItemVisual(t,"style").fill),_.setItemVisual(t,{fromSymbolKeepAspect:y.getItemVisual(t,"symbolKeepAspect"),fromSymbolOffset:y.getItemVisual(t,"symbolOffset"),fromSymbolRotate:y.getItemVisual(t,"symbolRotate"),fromSymbolSize:y.getItemVisual(t,"symbolSize"),fromSymbol:y.getItemVisual(t,"symbol"),toSymbolKeepAspect:x.getItemVisual(t,"symbolKeepAspect"),toSymbolOffset:x.getItemVisual(t,"symbolOffset"),toSymbolRotate:x.getItemVisual(t,"symbolRotate"),toSymbolSize:x.getItemVisual(t,"symbolSize"),toSymbol:x.getItemVisual(t,"symbol"),style:r})}),f.updateData(_),v.line.eachItemGraphicEl(function(t){I1(t).dataModel=r,t.traverse(function(t){I1(t).dataModel=r})}),this.markKeep(f),f.group.silent=r.get("silent")||t.get("silent")},r.type="markLine",r}(eeY),ee5=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.createMarkerModelFromSeries=function(t,i,s){return new r(t,i,s)},r.type="markArea",r.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},r}(eeB),ee4=T7(),ee6=function(t,r,i,s){var u=s[0],c=s[1];if(!!u&&!!c){var h=eeH(t,u),p=eeH(t,c),f=h.coord,v=p.coord;f[0]=Sk(f[0],-1/0),f[1]=Sk(f[1],-1/0),v[0]=Sk(v[0],1/0),v[1]=Sk(v[1],1/0);var y=Sa([{},h,p]);return y.coord=[h.coord,p.coord],y.x0=h.x,y.y0=h.y,y.x1=p.x,y.y1=p.y,y}};function ee9(t){return!isNaN(t)&&!isFinite(t)}function ee8(t,r,i,s){var u=1-t;return ee9(r[u])&&ee9(i[u])}function ee7(t,r){var i,s,u,c=r.coord[0],h=r.coord[1],p={coord:c,x:r.x0,y:r.y0},f={coord:h,x:r.x1,y:r.y1};if(Gr(t,"cartesian2d")){;if(c&&h&&(ee8(1,c,h,t)||ee8(0,c,h,t)))return!0;return i=t,s=p,u=f,!i||!i.containZone||!s.coord||!u.coord||!!eeF(s)||!!eeF(u)||i.containZone(s.coord,u.coord)}return eeV(t,p)||eeV(t,f)}function ete(t,r,i,s,u){var c,h=s.coordinateSystem,p=t.getItemModel(r),f=TT(p.get(i[0]),u.getWidth()),v=TT(p.get(i[1]),u.getHeight());if(isNaN(f)||isNaN(v)){if(s.getMarkerPosition){var y=t.getValues(["x0","y0"],r),x=t.getValues(["x1","y1"],r),_=h.clampData(y),b=h.clampData(x),w=[];"x0"===i[0]?w[0]=_[0]>b[0]?x[0]:y[0]:w[0]=_[0]>b[0]?y[0]:x[0],"y0"===i[1]?w[1]=_[1]>b[1]?x[1]:y[1]:w[1]=_[1]>b[1]?y[1]:x[1],c=s.getMarkerPosition(w,i,!0)}else{var S=t.get(i[0],r),M=t.get(i[1],r),A=[S,M];h.clampData&&h.clampData(A,A),c=h.dataToPoint(A,!0)}if(Gr(h,"cartesian2d")){var C=h.getAxis("x"),T=h.getAxis("y"),S=t.get(i[0],r),M=t.get(i[1],r);ee9(S)?c[0]=C.toGlobalCoord(C.getExtent()["x0"===i[0]?0:1]):ee9(M)&&(c[1]=T.toGlobalCoord(T.getExtent()["y0"===i[1]?0:1]))}!isNaN(f)&&(c[0]=f),!isNaN(v)&&(c[1]=v)}else c=[f,v];return c}var ett=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],etn=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.updateTransform=function(t,r,i){r.eachSeries(function(t){var r=eeB.getMarkerModelFromSeries(t,"markArea");if(r){var s=r.getData();s.each(function(r){var u=Sf(ett,function(u){return ete(s,r,u,t,i)});s.setItemLayout(r,u),s.getItemGraphicEl(r).setShape("points",u)})}},this)},r.prototype.renderSeries=function(t,r,i,s){var u=t.coordinateSystem,c=t.id,h=t.getData(),p=this.markerGroupMap,f=p.get(c)||p.set(c,{group:new Tf});this.group.add(f.group),this.markKeep(f);var v=function(t,r,i){if(t){var s,u,c=Sf(t&&t.dimensions,function(t){var i=r.getData();return So(So({},i.getDimensionInfo(i.mapDimension(t))||{}),{name:t,ordinalMeta:null})});s=new FV(u=Sf(["x0","y0","x1","y1"],function(t,r){return{name:t,type:c[r%2].type}}),i)}else s=new FV(u=[{name:"value",type:"float"}],i);var h=Sf(i.get("data"),S_(ee6,r,t,i));t&&(h=Sm(h,S_(ee7,t)));var p=t?function(t,r,i,s){return LP(t.coord[Math.floor(s/2)][s%2],u[s])}:function(t,r,i,s){return LP(t.value,u[s])};return s.initData(h,null,p),s.hasItemOption=!0,s}(u,t,r);r.setData(v),v.each(function(r){var i=Sf(ett,function(i){return ete(v,r,i,t,s)}),c=u.getAxis("x").scale,p=u.getAxis("y").scale,f=c.getExtent(),y=p.getExtent(),x=[c.parse(v.get("x0",r)),c.parse(v.get("x1",r))],_=[p.parse(v.get("y0",r)),p.parse(v.get("y1",r))];TI(x),TI(_);var b=!(f[0]>x[1]||f[1]<x[0]||y[0]>_[1]||y[1]<_[0]);v.setItemLayout(r,{points:i,allClipped:!b});var w=v.getItemModel(r).getModel("itemStyle").getItemStyle(),S=BX(h,"color");!w.fill&&(w.fill=S,SS(w.fill)&&(w.fill=A8(w.fill,.4))),!w.stroke&&(w.stroke=S),v.setItemVisual(r,"style",w)}),v.diff(ee4(f).data).add(function(t){var r=v.getItemLayout(t);if(!r.allClipped){var i=new Ol({shape:{points:r.points}});v.setItemGraphicEl(t,i),f.group.add(i)}}).update(function(t,i){var s=ee4(f).data.getItemGraphicEl(i),u=v.getItemLayout(t);u.allClipped?s&&f.group.remove(s):(s?DW(s,{shape:{points:u.points}},r,t):s=new Ol({shape:{points:u.points}}),v.setItemGraphicEl(t,s),f.group.add(s))}).remove(function(t){var r=ee4(f).data.getItemGraphicEl(t);f.group.remove(r)}).execute(),v.eachItemGraphicEl(function(t,i){var s=v.getItemModel(i),u=v.getItemVisual(i,"style");t.useStyle(v.getItemVisual(i,"style")),D0(t,D1(s),{labelFetcher:r,labelDataIndex:i,defaultText:v.getName(i)||"",inheritColor:SS(u.fill)?A8(u.fill,1):"#000"}),DB(t,s),DR(t,null,null,s.get(["emphasis","disabled"])),I1(t).dataModel=r}),ee4(f).data=v,f.group.silent=r.get("silent")||t.get("silent")},r.type="markArea",r}(eeY),etr=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.layoutMode={type:"box",ignoreSize:!0},i}return wU(r,t),r.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected||{},this._updateSelector(t)},r.prototype.mergeOption=function(r,i){t.prototype.mergeOption.call(this,r,i),this._updateSelector(r)},r.prototype._updateSelector=function(t){var r=t.selector,i=this.ecModel;!0===r&&(r=t.selector=["all","inverse"]),Sb(r)&&Sp(r,function(t,s){var u,c;SS(t)&&(t={type:t}),r[s]=Si(t,(u=i,"all"===(c=t.type)?{type:"all",title:u.getLocaleModel().get(["legend","selector","all"])}:"inverse"===c?{type:"inverse",title:u.getLocaleModel().get(["legend","selector","inverse"])}:void 0))})},r.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var r=!1,i=0;i<t.length;i++){var s=t[i].get("name");if(this.isSelected(s)){this.select(s),r=!0;break}}r||this.select(t[0].get("name"))}},r.prototype._updateData=function(t){var r=[],i=[];t.eachRawSeries(function(s){var u,c=s.name;if(i.push(c),s.legendVisualProvider){var h=s.legendVisualProvider.getAllNames();!t.isSeriesFiltered(s)&&(i=i.concat(h)),h.length?r=r.concat(h):u=!0}else u=!0;u&&T6(s)&&r.push(s.name)}),this._availableNames=i;var s=this.get("data")||r,u=SY(),c=Sf(s,function(t){return((SS(t)||SA(t))&&(t={name:t}),u.get(t.name))?null:(u.set(t.name,!0),new Pp(t,this,this.ecModel))},this);this._data=Sm(c,function(t){return!!t})},r.prototype.getData=function(){return this._data},r.prototype.select=function(t){var r=this.option.selected;"single"===this.get("selectedMode")&&Sp(this._data,function(t){r[t.get("name")]=!1}),r[t]=!0},r.prototype.unSelect=function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},r.prototype.toggleSelected=function(t){var r=this.option.selected;!r.hasOwnProperty(t)&&(r[t]=!0),this[r[t]?"unSelect":"select"](t)},r.prototype.allSelect=function(){var t=this._data,r=this.option.selected;Sp(t,function(t){r[t.get("name",!0)]=!0})},r.prototype.inverseSelect=function(){var t=this._data,r=this.option.selected;Sp(t,function(t){var i=t.get("name",!0);!r.hasOwnProperty(i)&&(r[i]=!0),r[i]=!r[i]})},r.prototype.isSelected=function(t){var r=this.option.selected;return!(r.hasOwnProperty(t)&&!r[t])&&Su(this._availableNames,t)>=0},r.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},r.type="legend.plain",r.dependencies=["series"],r.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},r}(Ru),eti=S_,eta=Sp,eto=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.newlineDisabled=!1,i}return wU(r,t),r.prototype.init=function(){this.group.add(this._contentGroup=new Tf),this.group.add(this._selectorGroup=new Tf),this._isFirstRender=!0},r.prototype.getContentGroup=function(){return this._contentGroup},r.prototype.getSelectorGroup=function(){return this._selectorGroup},r.prototype.render=function(t,r,i){var s=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var u=t.get("align"),c=t.get("orient");(!u||"auto"===u)&&(u="right"===t.get("left")&&"vertical"===c?"right":"left");var h=t.get("selector",!0),p=t.get("selectorPosition",!0);h&&(!p||"auto"===p)&&(p="horizontal"===c?"end":"start"),this.renderInner(u,t,r,i,h,c,p);var f=t.getBoxLayoutParams(),v={width:i.getWidth(),height:i.getHeight()},y=t.get("padding"),x=Rt(f,v,y),_=this.layoutInner(t,u,x,s,h,p),b=Rt(Ss({width:_.width,height:_.height},f),v,y);this.group.x=b.x-_.x,this.group.y=b.y-_.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Qs(_,t))}},r.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},r.prototype.renderInner=function(t,r,i,s,u,c,h){var p=this.getContentGroup(),f=SY(),v=r.get("selectedMode"),y=[];i.eachRawSeries(function(t){t.get("legendHoverLink")||y.push(t.id)}),eta(r.getData(),function(u,c){var h=u.get("name");if(!this.newlineDisabled&&(""===h||"\n"===h)){var x=new Tf;x.newline=!0,p.add(x);return}var _=i.getSeriesByName(h)[0];if(!f.get(h))if(_){var b=_.getData(),w=b.getVisual("legendLineStyle")||{},S=b.getVisual("legendIcon"),M=b.getVisual("style"),A=this._createItem(_,h,c,u,r,t,w,M,S,v,s);A.on("click",eti(ets,h,null,s,y)).on("mouseover",eti(etu,_.name,null,s,y)).on("mouseout",eti(etc,_.name,null,s,y)),i.ssr&&A.eachChild(function(t){var r=I1(t);r.seriesIndex=_.seriesIndex,r.dataIndex=c,r.ssrType="legend"}),f.set(h,!0)}else i.eachRawSeries(function(p){if(!f.get(h)){if(p.legendVisualProvider){var x=p.legendVisualProvider;if(!x.containName(h))return;var _=x.indexOfName(h),b=x.getItemVisual(_,"style"),w=x.getItemVisual(_,"legendIcon"),S=AQ(b.fill);S&&0===S[3]&&(S[3]=.2,b=So(So({},b),{fill:A7(S,"rgba")}));var M=this._createItem(p,h,c,u,r,t,{},b,w,v,s);M.on("click",eti(ets,null,h,s,y)).on("mouseover",eti(etu,null,h,s,y)).on("mouseout",eti(etc,null,h,s,y)),i.ssr&&M.eachChild(function(t){var r=I1(t);r.seriesIndex=p.seriesIndex,r.dataIndex=c,r.ssrType="legend"}),f.set(h,!0)}}},this)},this),u&&this._createSelector(u,r,s,c,h)},r.prototype._createSelector=function(t,r,i,s,u){var c=this.getSelectorGroup();eta(t,function(t){var s=t.type,u=new I0({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:"all"===s?"legendAllSelect":"legendInverseSelect"})}});c.add(u),D0(u,{normal:r.getModel("selectorLabel"),emphasis:r.getModel(["emphasis","selectorLabel"])},{defaultText:t.title}),DP(u)})},r.prototype._createItem=function(t,r,i,s,u,c,h,p,f,v,y){var x=t.visualDrawType,_=u.get("itemWidth"),b=u.get("itemHeight"),w=u.isSelected(r),S=s.get("symbolRotate"),M=s.get("symbolKeepAspect"),A=s.get("icon"),C=function(t,r,i,s,u,c,h){function p(t,r){"auto"===t.lineWidth&&(t.lineWidth=r.lineWidth>0?2:0),eta(t,function(i,s){"inherit"===t[s]&&(t[s]=r[s])})}var f=r.getModel("itemStyle"),v=f.getItemStyle(),y=0===t.lastIndexOf("empty",0)?"fill":"stroke",x=f.getShallow("decal");v.decal=x&&"inherit"!==x?NA(x,h):s.decal,"inherit"===v.fill&&(v.fill=s[u]),"inherit"===v.stroke&&(v.stroke=s[y]),"inherit"===v.opacity&&(v.opacity=("fill"===u?s:i).opacity),p(v,s);var _=r.getModel("lineStyle"),b=_.getLineStyle();if(p(b,i),"auto"===v.fill&&(v.fill=s.fill),"auto"===v.stroke&&(v.stroke=s.fill),"auto"===b.stroke&&(b.stroke=s.fill),!c){var w=r.get("inactiveBorderWidth"),S=v[y];v.lineWidth="auto"===w?s.lineWidth>0&&S?2:0:v.lineWidth,v.fill=r.get("inactiveColor"),v.stroke=r.get("inactiveBorderColor"),b.stroke=_.get("inactiveColor"),b.lineWidth=_.get("inactiveWidth")}return{itemStyle:v,lineStyle:b}}(f=A||f||"roundRect",s,h,p,x,w,y),T=new Tf,I=s.getModel("textStyle");if(Sw(t.getLegendIcon)&&(!A||"inherit"===A))T.add(t.getLegendIcon({itemWidth:_,itemHeight:b,icon:f,iconRotate:S,itemStyle:C.itemStyle,lineStyle:C.lineStyle,symbolKeepAspect:M}));else{var D="inherit"===A&&t.getData().getVisual("symbol")?"inherit"===S?t.getData().getVisual("symbolRotate"):S:0;T.add(function(t){var r=t.icon||"roundRect",i=B8(r,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);return i.setStyle(t.itemStyle),i.rotation=(t.iconRotate||0)*Math.PI/180,i.setOrigin([t.itemWidth/2,t.itemHeight/2]),r.indexOf("empty")>-1&&(i.style.stroke=i.style.fill,i.style.fill="#fff",i.style.lineWidth=2),i}({itemWidth:_,itemHeight:b,icon:f,iconRotate:D,itemStyle:C.itemStyle,lineStyle:C.lineStyle,symbolKeepAspect:M}))}var P=u.get("formatter"),R=r;SS(P)&&P?R=P.replace("{name}",null!=r?r:""):Sw(P)&&(R=P(r));var L=w?I.getTextColor():s.get("inactiveColor");T.add(new I0({style:D2(I,{text:R,x:"left"===c?_+5:-5,y:b/2,fill:L,align:c,verticalAlign:"middle"},{inheritColor:L})}));var k=new IF({shape:T.getBoundingRect(),style:{fill:"transparent"}}),O=s.getModel("tooltip");return O.get("show")&&O8({el:k,componentModel:u,itemName:r,itemTooltipOption:O.option}),T.add(k),T.eachChild(function(t){t.silent=!0}),k.silent=!v,this.getContentGroup().add(T),DP(T),T.__legendDataIndex=i,T},r.prototype.layoutInner=function(t,r,i,s,u,c){var h=this.getContentGroup(),p=this.getSelectorGroup();Re(t.get("orient"),h,t.get("itemGap"),i.width,i.height);var f=h.getBoundingRect(),v=[-f.x,-f.y];if(p.markRedraw(),h.markRedraw(),!u)return h.x=v[0],h.y=v[1],this.group.getBoundingRect();Re("horizontal",p,t.get("selectorItemGap",!0));var y=p.getBoundingRect(),x=[-y.x,-y.y],_=t.get("selectorButtonGap",!0),b=t.getOrient().index,w=0===b?"width":"height",S=0===b?"height":"width",M=0===b?"y":"x";"end"===c?x[b]+=f[w]+_:v[b]+=y[w]+_,x[1-b]+=f[S]/2-y[S]/2,p.x=x[0],p.y=x[1],h.x=v[0],h.y=v[1];var A={x:0,y:0};return A[w]=f[w]+_+y[w],A[S]=Math.max(f[S],y[S]),A[M]=Math.min(0,y[M]+x[1-b]),A},r.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},r.type="legend.plain",r}(kM);function ets(t,r,i,s){etc(t,r,i,s),i.dispatchAction({type:"legendToggleSelect",name:null!=t?t:r}),etu(t,r,i,s)}function etl(t){for(var r,i=t.getZr().storage.getDisplayList(),s=0,u=i.length;s<u&&!(r=i[s].states.emphasis);)s++;return r&&r.hoverLayer}function etu(t,r,i,s){!etl(i)&&i.dispatchAction({type:"highlight",seriesName:t,name:r,excludeSeriesId:s})}function etc(t,r,i,s){!etl(i)&&i.dispatchAction({type:"downplay",seriesName:t,name:r,excludeSeriesId:s})}function eth(t){var r=t.findComponents({mainType:"legend"});r&&r.length&&t.filterSeries(function(t){for(var i=0;i<r.length;i++)if(!r[i].isSelected(t.name))return!1;return!0})}function etd(t,r,i){var s,u={},c="toggleSelected"===t;return i.eachComponent("legend",function(i){c&&null!=s?i[s?"select":"unSelect"](r.name):"allSelect"===t||"inverseSelect"===t?i[t]():(i[t](r.name),s=i.isSelected(r.name)),Sp(i.getData(),function(t){var r=t.get("name");if("\n"!==r&&""!==r){var s=i.isSelected(r);u.hasOwnProperty(r)?u[r]=u[r]&&s:u[r]=s}})}),"allSelect"===t||"inverseSelect"===t?{selected:u}:{name:r.name,selected:u}}function etp(t){var r;t.registerComponentModel(etr),t.registerComponentView(eto),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,eth),t.registerSubTypeDefaulter("legend",function(){return"plain"}),(r=t).registerAction("legendToggleSelect","legendselectchanged",S_(etd,"toggleSelected")),r.registerAction("legendAllSelect","legendselectall",S_(etd,"allSelect")),r.registerAction("legendInverseSelect","legendinverseselect",S_(etd,"inverseSelect")),r.registerAction("legendSelect","legendselected",S_(etd,"select")),r.registerAction("legendUnSelect","legendunselected",S_(etd,"unSelect"))}var etf=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},r.prototype.init=function(r,i,s){var u=Ra(r);t.prototype.init.call(this,r,i,s),etg(this,r,u)},r.prototype.mergeOption=function(r,i){t.prototype.mergeOption.call(this,r,i),etg(this,this.option,r)},r.type="legend.scroll",r.defaultOption=Pm(etr.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),r}(etr);function etg(t,r,i){var s=t.getOrient(),u=[1,1];u[s.index]=0,Ri(r,i,{type:"box",ignoreSize:!!u})}var etm=["width","height"],etv=["x","y"],ety=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.newlineDisabled=!0,i._currentIndex=0,i}return wU(r,t),r.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new Tf),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Tf)},r.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},r.prototype.renderInner=function(r,i,s,u,c,h,p){var f=this;t.prototype.renderInner.call(this,r,i,s,u,c,h,p);var v=this._controllerGroup,y=i.get("pageIconSize",!0),x=Sb(y)?y:[y,y];b("pagePrev",0);var _=i.getModel("pageTextStyle");function b(t,r){var s=O5(i.get("pageIcons",!0)[i.getOrient().name][r],{onclick:Sx(f._pageGo,f,t+"DataIndex",i,u)},{x:-x[0]/2,y:-x[1]/2,width:x[0],height:x[1]});s.name=t,v.add(s)}v.add(new I0({name:"pageText",style:{text:"xx/xx",fill:_.getTextColor(),font:_.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),b("pageNext",1)},r.prototype.layoutInner=function(t,r,i,s,u,c){var h=this.getSelectorGroup(),p=t.getOrient().index,f=etm[p],v=etv[p],y=etm[1-p],x=etv[1-p];u&&Re("horizontal",h,t.get("selectorItemGap",!0));var _=t.get("selectorButtonGap",!0),b=h.getBoundingRect(),w=[-b.x,-b.y],S=Sr(i);u&&(S[f]=i[f]-b[f]-_);var M=this._layoutContentAndController(t,s,S,p,f,y,x,v);if(u){if("end"===c)w[p]+=M[f]+_;else{var A=b[f]+_;w[p]-=A,M[v]-=A}M[f]+=b[f]+_,w[1-p]+=M[x]+M[y]/2-b[y]/2,M[y]=Math.max(M[y],b[y]),M[x]=Math.min(M[x],b[x]+w[1-p]),h.x=w[0],h.y=w[1],h.markRedraw()}return M},r.prototype._layoutContentAndController=function(t,r,i,s,u,c,h,p){var f=this.getContentGroup(),v=this._containerGroup,y=this._controllerGroup;Re(t.get("orient"),f,t.get("itemGap"),s?i.width:null,s?null:i.height),Re("horizontal",y,t.get("pageButtonItemGap",!0));var x=f.getBoundingRect(),_=y.getBoundingRect(),b=this._showController=x[u]>i[u],w=[-x.x,-x.y];!r&&(w[s]=f[p]);var S=[0,0],M=[-_.x,-_.y],A=SO(t.get("pageButtonGap",!0),t.get("itemGap",!0));b&&("end"===t.get("pageButtonPosition",!0)?M[s]+=i[u]-_[u]:S[s]+=_[u]+A),M[1-s]+=x[c]/2-_[c]/2,f.setPosition(w),v.setPosition(S),y.setPosition(M);var C={x:0,y:0};if(C[u]=b?i[u]:x[u],C[c]=Math.max(x[c],_[c]),C[h]=Math.min(0,_[h]+M[1-s]),v.__rectSize=i[u],b){var T={x:0,y:0};T[u]=Math.max(i[u]-_[u]-A,0),T[c]=C[c],v.setClipPath(new IF({shape:T})),v.__rectSize=T[u]}else y.eachChild(function(t){t.attr({invisible:!0,silent:!0})});var I=this._getPageInfo(t);return null!=I.pageIndex&&DW(f,{x:I.contentPosition[0],y:I.contentPosition[1]},b?t:null),this._updatePageInfoView(t,I),C},r.prototype._pageGo=function(t,r,i){var s=this._getPageInfo(r)[t];null!=s&&i.dispatchAction({type:"legendScroll",scrollDataIndex:s,legendId:r.id})},r.prototype._updatePageInfoView=function(t,r){var i=this._controllerGroup;Sp(["pagePrev","pageNext"],function(s){var u=null!=r[s+"DataIndex"],c=i.childOfName(s);c&&(c.setStyle("fill",u?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),c.cursor=u?"pointer":"default")});var s=i.childOfName("pageText"),u=t.get("pageFormatter"),c=r.pageIndex,h=null!=c?c+1:0,p=r.pageCount;s&&u&&s.setStyle("text",SS(u)?u.replace("{current}",null==h?"":h+"").replace("{total}",null==p?"":p+""):u({current:h,total:p}))},r.prototype._getPageInfo=function(t){var r=t.get("scrollDataIndex",!0),i=this.getContentGroup(),s=this._containerGroup.__rectSize,u=t.getOrient().index,c=etm[u],h=etv[u],p=this._findTargetItemIndex(r),f=i.children(),v=f[p],y=f.length,x=y?1:0,_={contentPosition:[i.x,i.y],pageCount:x,pageIndex:x-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!v)return _;var b=C(v);_.contentPosition[u]=-b.s;for(var w=p+1,S=b,M=b,A=null;w<=y;++w)(!(A=C(f[w]))&&M.e>S.s+s||A&&!T(A,S.s))&&(S=M.i>S.i?M:A)&&(null==_.pageNextDataIndex&&(_.pageNextDataIndex=S.i),++_.pageCount),M=A;for(var w=p-1,S=b,M=b,A=null;w>=-1;--w)(!(A=C(f[w]))||!T(M,A.s))&&S.i<M.i&&(M=S,null==_.pagePrevDataIndex&&(_.pagePrevDataIndex=S.i),++_.pageCount,++_.pageIndex),S=A;return _;function C(t){if(t){var r=t.getBoundingRect(),i=r[h]+t[h];return{s:i,e:i+r[c],i:t.__legendDataIndex}}}function T(t,r){return t.e>=r&&t.s<=r+s}},r.prototype._findTargetItemIndex=function(t){var r,i;if(!this._showController)return 0;return this.getContentGroup().eachChild(function(s,u){var c=s.__legendDataIndex;null==i&&null!=c&&(i=u),c===t&&(r=u)}),null!=r?r:i},r.type="legend.scroll",r}(eto);function etx(t){FS(etp),t.registerComponentModel(etf),t.registerComponentView(ety),!function(t){t.registerAction("legendScroll","legendscroll",function(t,r){var i=t.scrollDataIndex;null!=i&&r.eachComponent({mainType:"legend",subType:"scroll",query:t},function(t){t.setScrollDataIndex(i)})})}(t)}var et_=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.type="dataZoom.inside",r.defaultOption=Pm(q0.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),r}(q0),etb=T7();function etw(t,r){if(r){t.removeKey(r.model.uid);var i=r.controller;i&&i.dispose()}}function etS(t,r){!t.isDisposed()&&t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:r})}function etM(t,r,i,s){return t.coordinateSystem.containPoint([i,s])}var etA=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.type="dataZoom.inside",r}return wU(r,t),r.prototype.render=function(r,i,s){if(t.prototype.render.apply(this,arguments),r.noTarget()){this._clear();return}this.range=r.getPercentRange(),!function(t,r,i){etb(t).coordSysRecordMap.each(function(t){var s=t.dataZoomInfoMap.get(r.uid);s&&(s.getRange=i)})}(s,r,{pan:Sx(etC.pan,this),zoom:Sx(etC.zoom,this),scrollMove:Sx(etC.scrollMove,this)})},r.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){!function(t,r){for(var i=etb(t).coordSysRecordMap,s=i.keys(),u=0;u<s.length;u++){var c=s[u],h=i.get(c),p=h.dataZoomInfoMap;if(p){var f=r.uid;p.get(f)&&(p.removeKey(f),!p.keys().length&&etw(i,h))}}}(this.api,this.dataZoomModel),this.range=null},r.type="dataZoom.inside",r}(q3),etC={zoom:function(t,r,i,s){var u=this.range,c=u.slice(),h=t.axisModels[0];if(!!h){var p=etE[r](null,[s.originX,s.originY],h,i,t),f=(p.signal>0?p.pixelStart+p.pixelLength-p.pixel:p.pixel-p.pixelStart)/p.pixelLength*(c[1]-c[0])+c[0],v=Math.max(1/s.scale,0);c[0]=(c[0]-f)*v+f,c[1]=(c[1]-f)*v+f;var y=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Yj(0,c,[0,100],0,y.minSpan,y.maxSpan),this.range=c,u[0]!==c[0]||u[1]!==c[1])return c}},pan:etT(function(t,r,i,s,u,c){var h=etE[s]([c.oldX,c.oldY],[c.newX,c.newY],r,u,i);return h.signal*(t[1]-t[0])*h.pixel/h.pixelLength}),scrollMove:etT(function(t,r,i,s,u,c){return etE[s]([0,0],[c.scrollDelta,c.scrollDelta],r,u,i).signal*(t[1]-t[0])*c.scrollDelta})};function etT(t){return function(r,i,s,u){var c=this.range,h=c.slice(),p=r.axisModels[0];if(!!p){if(Yj(t(h,p,r,i,s,u),h,[0,100],"all"),this.range=h,c[0]!==h[0]||c[1]!==h[1])return h}}}var etE={grid:function(t,r,i,s,u){var c=i.axis,h={},p=u.model.coordinateSystem.getRect();return t=t||[0,0],"x"===c.dim?(h.pixel=r[0]-t[0],h.pixelLength=p.width,h.pixelStart=p.x,h.signal=c.inverse?1:-1):(h.pixel=r[1]-t[1],h.pixelLength=p.height,h.pixelStart=p.y,h.signal=c.inverse?-1:1),h},polar:function(t,r,i,s,u){var c=i.axis,h={},p=u.model.coordinateSystem,f=p.getRadiusAxis().getExtent(),v=p.getAngleAxis().getExtent();return t=t?p.pointToCoord(t):[0,0],r=p.pointToCoord(r),"radiusAxis"===i.mainType?(h.pixel=r[0]-t[0],h.pixelLength=f[1]-f[0],h.pixelStart=f[0],h.signal=c.inverse?1:-1):(h.pixel=r[1]-t[1],h.pixelLength=v[1]-v[0],h.pixelStart=v[0],h.signal=c.inverse?-1:1),h},singleAxis:function(t,r,i,s,u){var c=i.axis,h=u.model.coordinateSystem.getRect(),p={};return t=t||[0,0],"horizontal"===c.orient?(p.pixel=r[0]-t[0],p.pixelLength=h.width,p.pixelStart=h.x,p.signal=c.inverse?1:-1):(p.pixel=r[1]-t[1],p.pixelLength=h.height,p.pixelStart=h.y,p.signal=c.inverse?-1:1),p}};function etI(t){Qe(t),t.registerComponentModel(et_),t.registerComponentView(etA),!function(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,function(t,r){var i=etb(r),s=i.coordSysRecordMap||(i.coordSysRecordMap=SY());s.each(function(t){t.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(t){Sp(qq(t).infoList,function(i){var u,c,h,p,f=i.model.uid;var v=s.get(f)||s.set(f,(u=r,p=(h={model:c=i.model,containsPoint:S_(etM,c),dispatchAction:S_(etS,u),dataZoomInfoMap:null,controller:null}).controller=new Wr(u.getZr()),Sp(["pan","zoom","scrollMove"],function(t){p.on(t,function(r){var i=[];h.dataZoomInfoMap.each(function(s){if(!!r.isAvailableBehavior(s.model.option)){var u=(s.getRange||{})[t],c=u&&u(s.dzReferCoordSysInfo,h.model.mainType,h.controller,r);!s.model.get("disabled",!0)&&c&&i.push({dataZoomId:s.model.id,start:c[0],end:c[1]})}}),i.length&&h.dispatchAction(i)})}),h));(v.dataZoomInfoMap||(v.dataZoomInfoMap=SY())).set(t.uid,{dzReferCoordSysInfo:i,model:t,getRange:null})})}),s.each(function(t){var r,i,u,c,h,p=t.controller,f=t.dataZoomInfoMap;if(f){var v=f.keys()[0];null!=v&&(h=f.get(v))}if(!h){etw(s,t);return}var y=(i="type_",u={type_true:2,type_move:1,type_false:0,type_undefined:-1},c=!0,f.each(function(t){var s=t.model,h=!s.get("disabled",!0)&&(!s.get("zoomLock",!0)||"move");u[i+h]>u[i+r]&&(r=h),c=c&&s.get("preventDefaultMouseMove",!0)}),{controlType:r,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!c}});p.enable(y.controlType,y.opt),p.setPointerChecker(t.containsPoint),Bf(t,"dispatchAction",h.model.get("throttle",!0),"fixRate")})})}(t)}var etD=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.type="dataZoom.slider",r.layoutMode="box",r.defaultOption=Pm(q0.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),r}(q0),etP="horizontal",etR="vertical",etL=["line","bar","candlestick","scatter"],etk={easing:"cubicOut",duration:100,delay:0},etO=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i._displayables={},i}return wU(r,t),r.prototype.init=function(t,r){this.api=r,this._onBrush=Sx(this._onBrush,this),this._onBrushEnd=Sx(this._onBrushEnd,this)},r.prototype.render=function(r,i,s,u){if(t.prototype.render.apply(this,arguments),Bf(this,"_dispatchZoomAction",r.get("throttle"),"fixRate"),this._orient=r.getOrient(),!1===r.get("show")){this.group.removeAll();return}if(r.noTarget()){this._clear(),this.group.removeAll();return}(!u||"dataZoom"!==u.type||u.from!==this.uid)&&this._buildView(),this._updateView()},r.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){Bg(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},r.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var r=this._displayables.sliderGroup=new Tf;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(r),this._positionGroup()},r.prototype._resetLocation=function(){var t=this.dataZoomModel,r=this.api,i=t.get("brushSelect"),s=this._findCoordRect(),u={width:r.getWidth(),height:r.getHeight()},c=this._orient===etP?{right:u.width-s.x-s.width,top:u.height-30-7-(i?7:0),width:s.width,height:30}:{right:7,top:s.y,width:30,height:s.height},h=Ra(t.option);Sp(["right","top","width","height"],function(t){"ph"===h[t]&&(h[t]=c[t])});var p=Rt(h,u);this._location={x:p.x,y:p.y},this._size=[p.width,p.height],this._orient===etR&&this._size.reverse()},r.prototype._positionGroup=function(){var t=this.group,r=this._location,i=this._orient,s=this.dataZoomModel.getFirstTargetAxisModel(),u=s&&s.get("inverse"),c=this._displayables.sliderGroup,h=(this._dataShadowInfo||{}).otherAxisInverse;c.attr(i!==etP||u?i===etP&&u?{scaleY:h?1:-1,scaleX:-1}:i!==etR||u?{scaleY:h?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:h?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:h?1:-1,scaleX:1});var p=t.getBoundingRect([c]);t.x=r.x-p.x,t.y=r.y-p.y,t.markRedraw()},r.prototype._getViewExtent=function(){return[0,this._size[0]]},r.prototype._renderBackground=function(){var t=this.dataZoomModel,r=this._size,i=this._displayables.sliderGroup,s=t.get("brushSelect");i.add(new IF({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var u=new IF({shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:"transparent"},z2:0,onclick:Sx(this._onClickPanel,this)}),c=this.api.getZr();s?(u.on("mousedown",this._onBrushStart,this),u.cursor="crosshair",c.on("mousemove",this._onBrush),c.on("mouseup",this._onBrushEnd)):(c.off("mousemove",this._onBrush),c.off("mouseup",this._onBrushEnd)),i.add(u)},r.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!t)return;var r=this._size,i=this._shadowSize||[],s=t.series,u=s.getRawData(),c=s.getShadowDim&&s.getShadowDim(),h=c&&u.getDimensionInfo(c)?s.getShadowDim():t.otherDim;if(null!=h){var p=this._shadowPolygonPts,f=this._shadowPolylinePts;if(u!==this._shadowData||h!==this._shadowDim||r[0]!==i[0]||r[1]!==i[1]){var v,y=u.getDataExtent(h),x=(y[1]-y[0])*.3;y=[y[0]-x,y[1]+x];var _=[0,r[1]],b=[0,r[0]],w=[[r[0],0],[0,0]],S=[],M=b[1]/(u.count()-1),A=0,C=Math.round(u.count()/r[0]);u.each([h],function(t,r){if(C>0&&r%C){A+=M;return}var i=null==t||isNaN(t)||""===t,s=i?0:TC(t,y,_,!0);i&&!v&&r?(w.push([w[w.length-1][0],0]),S.push([S[S.length-1][0],0])):!i&&v&&(w.push([A,0]),S.push([A,0])),w.push([A,s]),S.push([A,s]),A+=M,v=i}),p=this._shadowPolygonPts=w,f=this._shadowPolylinePts=S}this._shadowData=u,this._shadowDim=h,this._shadowSize=[r[0],r[1]];for(var T=this.dataZoomModel,I=0;I<3;I++){var D=function(t){var r=T.getModel(t?"selectedDataBackground":"dataBackground"),i=new Tf,s=new Ol({shape:{points:p},segmentIgnoreThreshold:1,style:r.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),u=new Oh({shape:{points:f},segmentIgnoreThreshold:1,style:r.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return i.add(s),i.add(u),i}(1===I);this._displayables.sliderGroup.add(D),this._displayables.dataShadowSegs.push(D)}}},r.prototype._prepareDataShadowInfo=function(){var t,r=this.dataZoomModel,i=r.get("showDataShadow");if(!1!==i){var s=this.ecModel;return r.eachTargetAxis(function(u,c){Sp(r.getAxisProxy(u,c).getTargetSeriesModels(),function(r){if(!(t||!0!==i&&0>Su(etL,r.get("type")))){var h,p=s.getComponent(qK(u),c).axis,f=function(t){return({x:"y",y:"x",radius:"angle",angle:"radius"})[t]}(u),v=r.coordinateSystem;null!=f&&v.getOtherAxis&&(h=v.getOtherAxis(p).inverse),f=r.getData().mapDimension(f),t={thisAxis:p,series:r,thisDim:u,otherDim:f,otherAxisInverse:h}}},this)},this),t}},r.prototype._renderHandle=function(){var t=this.group,r=this._displayables,i=r.handles=[null,null],s=r.handleLabels=[null,null],u=this._displayables.sliderGroup,c=this._size,h=this.dataZoomModel,p=this.api,f=h.get("borderRadius")||0,v=h.get("brushSelect"),y=r.filler=new IF({silent:v,style:{fill:h.get("fillerColor")},textConfig:{position:"inside"}});u.add(y),u.add(new IF({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:c[0],height:c[1],r:f},style:{stroke:h.get("dataBackgroundColor")||h.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),Sp([0,1],function(r){var c=h.get("handleIcon");!B4[c]&&0>c.indexOf("path://")&&0>c.indexOf("image://")&&(c="path://"+c);var p=B8(c,-1,0,2,2,null,!0);p.attr({cursor:etB(this._orient),draggable:!0,drift:Sx(this._onDragMove,this,r),ondragend:Sx(this._onDragEnd,this),onmouseover:Sx(this._showDataInfo,this,!0),onmouseout:Sx(this._showDataInfo,this,!1),z2:5});var f=p.getBoundingRect(),v=h.get("handleSize");this._handleHeight=TT(v,this._size[1]),this._handleWidth=f.width/f.height*this._handleHeight,p.setStyle(h.getModel("handleStyle").getItemStyle()),p.style.strokeNoScale=!0,p.rectHover=!0,p.ensureState("emphasis").style=h.getModel(["emphasis","handleStyle"]).getItemStyle(),DP(p);var y=h.get("handleColor");null!=y&&(p.style.fill=y),u.add(i[r]=p);var x=h.getModel("textStyle");t.add(s[r]=new I0({silent:!0,invisible:!0,style:D2(x,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:x.getTextColor(),font:x.getFont()}),z2:10}))},this);var x=y;if(v){var _=TT(h.get("moveHandleSize"),c[1]),b=r.moveHandle=new IF({style:h.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:c[1]-.5,height:_}}),w=.8*_,S=r.moveHandleIcon=B8(h.get("moveHandleIcon"),-w/2,-w/2,w,w,"#fff",!0);S.silent=!0,S.y=c[1]+_/2-.5,b.ensureState("emphasis").style=h.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var M=Math.min(c[1]/2,Math.max(_,10));(x=r.moveZone=new IF({invisible:!0,shape:{y:c[1]-M,height:_+M}})).on("mouseover",function(){p.enterEmphasis(b)}).on("mouseout",function(){p.leaveEmphasis(b)}),u.add(b),u.add(S),u.add(x)}x.attr({draggable:!0,cursor:etB(this._orient),drift:Sx(this._onDragMove,this,"all"),ondragstart:Sx(this._showDataInfo,this,!0),ondragend:Sx(this._onDragEnd,this),onmouseover:Sx(this._showDataInfo,this,!0),onmouseout:Sx(this._showDataInfo,this,!1)})},r.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),r=this._getViewExtent();this._handleEnds=[TC(t[0],[0,100],r,!0),TC(t[1],[0,100],r,!0)]},r.prototype._updateInterval=function(t,r){var i=this.dataZoomModel,s=this._handleEnds,u=this._getViewExtent(),c=i.findRepresentativeAxisProxy().getMinMaxSpan(),h=[0,100];Yj(r,s,u,i.get("zoomLock")?"all":t,null!=c.minSpan?TC(c.minSpan,h,u,!0):null,null!=c.maxSpan?TC(c.maxSpan,h,u,!0):null);var p=this._range,f=this._range=TI([TC(s[0],u,h,!0),TC(s[1],u,h,!0)]);return!p||p[0]!==f[0]||p[1]!==f[1]},r.prototype._updateView=function(t){var r=this._displayables,i=this._handleEnds,s=TI(i.slice()),u=this._size;Sp([0,1],function(t){var s=r.handles[t],c=this._handleHeight;s.attr({scaleX:c/2,scaleY:c/2,x:i[t]+(t?-1:1),y:u[1]/2-c/2})},this),r.filler.setShape({x:s[0],y:0,width:s[1]-s[0],height:u[1]});var c={x:s[0],width:s[1]-s[0]};r.moveHandle&&(r.moveHandle.setShape(c),r.moveZone.setShape(c),r.moveZone.getBoundingRect(),r.moveHandleIcon&&r.moveHandleIcon.attr("x",c.x+c.width/2));for(var h=r.dataShadowSegs,p=[0,s[0],s[1],u[0]],f=0;f<h.length;f++){var v=h[f],y=v.getClipPath();!y&&(y=new IF,v.setClipPath(y)),y.setShape({x:p[f],y:0,width:p[f+1]-p[f],height:u[1]})}this._updateDataInfo(t)},r.prototype._updateDataInfo=function(t){var r=this.dataZoomModel,i=this._displayables,s=i.handleLabels,u=this._orient,c=["",""];if(r.get("showDetail")){var h=r.findRepresentativeAxisProxy();if(h){var p=h.getAxisModel().axis,f=this._range,v=t?h.calculateDataWindow({start:f[0],end:f[1]}).valueWindow:h.getDataValueWindow();c=[this._formatLabel(v[0],p),this._formatLabel(v[1],p)]}}var y=TI(this._handleEnds.slice());function x(t){var r=OK(i.handles[t].parent,this.group),h=OQ(0===t?"right":"left",r),p=this._handleWidth/2+5,f=Oq([y[t]+(0===t?-p:p),this._size[1]/2],r);s[t].setStyle({x:f[0],y:f[1],verticalAlign:u===etP?"middle":h,align:u===etP?h:"center",text:c[t]})}x.call(this,0),x.call(this,1)},r.prototype._formatLabel=function(t,r){var i=this.dataZoomModel,s=i.get("labelFormatter"),u=i.get("labelPrecision");(null==u||"auto"===u)&&(u=r.getPixelPrecision());var c=null==t||isNaN(t)?"":"category"===r.type||"time"===r.type?r.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(u,20));return Sw(s)?s(t,c):SS(s)?s.replace("{value}",c):c},r.prototype._showDataInfo=function(t){t=this._dragging||t;var r=this._displayables,i=r.handleLabels;i[0].attr("invisible",!t),i[1].attr("invisible",!t),r.moveHandle&&this.api[t?"enterEmphasis":"leaveEmphasis"](r.moveHandle,1)},r.prototype._onDragMove=function(t,r,i,s){this._dragging=!0,MB(s.event);var u=Oq([r,i],this._displayables.sliderGroup.getLocalTransform(),!0),c=this._updateInterval(t,u[0]),h=this.dataZoomModel.get("realtime");this._updateView(!h),c&&h&&this._dispatchZoomAction(!0)},r.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),this.dataZoomModel.get("realtime")||this._dispatchZoomAction(!1)},r.prototype._onClickPanel=function(t){var r=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(i[0]<0)&&!(i[0]>r[0])&&!(i[1]<0)&&!(i[1]>r[1])){var s=this._handleEnds,u=(s[0]+s[1])/2,c=this._updateInterval("all",i[0]-u);this._updateView(),c&&this._dispatchZoomAction(!1)}},r.prototype._onBrushStart=function(t){var r=t.offsetX,i=t.offsetY;this._brushStart=new MZ(r,i),this._brushing=!0,this._brushStartTime=+new Date},r.prototype._onBrushEnd=function(t){if(!this._brushing)return;var r=this._displayables.brushRect;if(this._brushing=!1,!r)return;r.attr("ignore",!0);var i=r.shape;if(!(+new Date-this._brushStartTime<200&&5>Math.abs(i.width))){var s=this._getViewExtent(),u=[0,100];this._range=TI([TC(i.x,s,u,!0),TC(i.x+i.width,s,u,!0)]),this._handleEnds=[i.x,i.x+i.width],this._updateView(),this._dispatchZoomAction(!1)}},r.prototype._onBrush=function(t){this._brushing&&(MB(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},r.prototype._updateBrushRect=function(t,r){var i=this._displayables,s=this.dataZoomModel,u=i.brushRect;!u&&(u=i.brushRect=new IF({silent:!0,style:s.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(u)),u.attr("ignore",!1);var c=this._brushStart,h=this._displayables.sliderGroup,p=h.transformCoordToLocal(t,r),f=h.transformCoordToLocal(c.x,c.y),v=this._size;p[0]=Math.max(Math.min(v[0],p[0]),0),u.setShape({x:f[0],y:0,width:p[0]-f[0],height:v[1]})},r.prototype._dispatchZoomAction=function(t){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?etk:null,start:r[0],end:r[1]})},r.prototype._findCoordRect=function(){var t,r=qq(this.dataZoomModel).infoList;if(!t&&r.length){var i=r[0].model.coordinateSystem;t=i.getRect&&i.getRect()}if(!t){var s=this.api.getWidth(),u=this.api.getHeight();t={x:.2*s,y:.2*u,width:.6*s,height:.6*u}}return t},r.type="dataZoom.slider",r}(q3);function etB(t){return"vertical"===t?"ns-resize":"ew-resize"}function etN(t){t.registerComponentModel(etD),t.registerComponentView(etO),Qe(t)}var etF={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};let etz={get:function(t,r,i){var s=Sr((etF[t]||{})[r]);return i&&Sb(s)?s[s.length-1]:s}};var etU=Xe.mapVisual,etH=Xe.eachVisual,etG=Sp,etV=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.stateList=["inRange","outOfRange"],i.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],i.layoutMode={type:"box",ignoreSize:!0},i.dataBound=[-1/0,1/0],i.targetVisuals={},i.controllerVisuals={},i}return wU(r,t),r.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i)},r.prototype.optionUpdated=function(t,r){var i=this.option;r||eet(i,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},r.prototype.resetVisual=function(t){var r=this.stateList;t=Sx(t,this),this.controllerVisuals=eee(this.option.controller,r,t),this.targetVisuals=eee(this.option.target,r,t)},r.prototype.getItemSymbol=function(){return null},r.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,r=[];return null==t||"all"===t?this.ecModel.eachSeries(function(t,i){r.push(i)}):r=Tq(t),r},r.prototype.eachTargetSeries=function(t,r){Sp(this.getTargetSeriesIndices(),function(i){var s=this.ecModel.getSeriesByIndex(i);s&&t.call(r,s)},this)},r.prototype.isTargetSeries=function(t){var r=!1;return this.eachTargetSeries(function(i){i===t&&(r=!0)}),r},r.prototype.formatValueText=function(t,r,i){var s,u=this.option,c=u.precision,h=this.dataBound,p=u.formatter;i=i||["<",">"],Sb(t)&&(t=t.slice(),s=!0);var f=r?t:s?[v(t[0]),v(t[1])]:v(t);if(SS(p))return p.replace("{value}",s?f[0]:f).replace("{value2}",s?f[1]:f);if(Sw(p))return s?p(t[0],t[1]):p(t);if(!s)return f;return t[0]===h[0]?i[0]+" "+f[1]:t[1]===h[1]?i[1]+" "+f[0]:f[0]+" - "+f[1];function v(t){return t===h[0]?"min":t===h[1]?"max":(+t).toFixed(Math.min(c,20))}},r.prototype.resetExtent=function(){var t=this.option,r=TI([t.min,t.max]);this._dataExtent=r},r.prototype.getDataDimensionIndex=function(t){var r=this.option.dimension;if(null!=r)return t.getDimensionIndex(r);for(var i=t.dimensions,s=i.length-1;s>=0;s--){var u=i[s],c=t.getDimensionInfo(u);if(!c.isCalculationCoord)return c.storeDimIndex}},r.prototype.getExtent=function(){return this._dataExtent.slice()},r.prototype.completeVisualOption=function(){var t=this.ecModel,r=this.option,i={inRange:r.inRange,outOfRange:r.outOfRange},s=r.target||(r.target={}),u=r.controller||(r.controller={});Si(s,i),Si(u,i);var c=this.isCategory();function h(i){Sb(r.color)&&!i.inRange&&(i.inRange={color:r.color.slice().reverse()}),i.inRange=i.inRange||{color:t.get("gradientColor")}}h.call(this,s),h.call(this,u),(function(t,r,i){var s=t[r],u=t[i];s&&!u&&(u=t[i]={},etG(s,function(t,r){if(!!Xe.isValidType(r)){var i=etz.get(r,"inactive",c);null!=i&&(u[r]=i,"color"===r&&!u.hasOwnProperty("opacity")&&!u.hasOwnProperty("colorAlpha")&&(u.opacity=[0,0]))}}))}).call(this,s,"inRange","outOfRange"),(function(t){var r=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,i=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,s=this.get("inactiveColor"),u=this.getItemSymbol()||"roundRect";etG(this.stateList,function(h){var p=this.itemSize,f=t[h];!f&&(f=t[h]={color:c?s:[s]}),null==f.symbol&&(f.symbol=r&&Sr(r)||(c?u:[u])),null==f.symbolSize&&(f.symbolSize=i&&Sr(i)||(c?p[0]:[p[0],p[0]])),f.symbol=etU(f.symbol,function(t){return"none"===t?u:t});var v=f.symbolSize;if(null!=v){var y=-1/0;etH(v,function(t){t>y&&(y=t)}),f.symbolSize=etU(v,function(t){return TC(t,[0,y],[0,p[0]],!0)})}},this)}).call(this,u)},r.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},r.prototype.isCategory=function(){return!!this.option.categories},r.prototype.setSelected=function(t){},r.prototype.getSelected=function(){return null},r.prototype.getValueState=function(t){return null},r.prototype.getVisualMeta=function(t){return null},r.type="visualMap",r.dependencies=["series"],r.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},r}(Ru),etW=[20,140],etj=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.optionUpdated=function(r,i){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()}),this._resetRange()},r.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(null==r[0]||isNaN(r[0]))&&(r[0]=20),(null==r[1]||isNaN(r[1]))&&(r[1]=140)},r.prototype._resetRange=function(){var t=this.getExtent(),r=this.option.range;!r||r.auto?(t.auto=1,this.option.range=t):Sb(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],t[0]),r[1]=Math.min(r[1],t[1]))},r.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),Sp(this.stateList,function(t){var r=this.option.controller[t].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},r.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},r.prototype.getSelected=function(){var t=this.getExtent(),r=TI((this.get("range")||[]).slice());return r[0]>t[1]&&(r[0]=t[1]),r[1]>t[1]&&(r[1]=t[1]),r[0]<t[0]&&(r[0]=t[0]),r[1]<t[0]&&(r[1]=t[0]),r},r.prototype.getValueState=function(t){var r=this.option.range,i=this.getExtent();return(r[0]<=i[0]||r[0]<=t)&&(r[1]>=i[1]||t<=r[1])?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(t){var r=[];return this.eachTargetSeries(function(i){var s=[],u=i.getData();u.each(this.getDataDimensionIndex(u),function(r,i){t[0]<=r&&r<=t[1]&&s.push(i)},this),r.push({seriesId:i.id,dataIndex:s})},this),r},r.prototype.getVisualMeta=function(t){var r=etX(this,"outOfRange",this.getExtent()),i=etX(this,"inRange",this.option.range.slice()),s=[];function u(r,i){s.push({value:r,color:t(r,i)})}for(var c=0,h=0,p=i.length,f=r.length;h<f&&(!i.length||r[h]<=i[0]);h++)r[h]<i[c]&&u(r[h],"outOfRange");for(var v=1;c<p;c++,v=0)v&&s.length&&u(i[c],"outOfRange"),u(i[c],"inRange");for(var v=1;h<f;h++)(!i.length||i[i.length-1]<r[h])&&(v&&(s.length&&u(s[s.length-1].value,"outOfRange"),v=0),u(r[h],"outOfRange"));var y=s.length;return{stops:s,outerColors:[y?s[0].color:"transparent",y?s[y-1].color:"transparent"]}},r.type="visualMap.continuous",r.defaultOption=Pm(etV.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),r}(etV);function etX(t,r,i){if(i[0]===i[1])return i.slice();for(var s=(i[1]-i[0])/200,u=i[0],c=[],h=0;h<=200&&u<i[1];h++)c.push(u),u+=s;return c.push(i[1]),c}var etY=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i.autoPositionValues={left:1,right:1,top:1,bottom:1},i}return wU(r,t),r.prototype.init=function(t,r){this.ecModel=t,this.api=r},r.prototype.render=function(t,r,i,s){if(this.visualMapModel=t,!1===t.get("show")){this.group.removeAll();return}this.doRender(t,r,i,s)},r.prototype.renderBackground=function(t){var r=this.visualMapModel,i=PK(r.get("padding")||0),s=t.getBoundingRect();t.add(new IF({z2:-1,silent:!0,shape:{x:s.x-i[3],y:s.y-i[0],width:s.width+i[3]+i[1],height:s.height+i[0]+i[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},r.prototype.getControllerVisual=function(t,r,i){var s=(i=i||{}).forceState,u=this.visualMapModel,c={};if("color"===r){var h=u.get("contentColor");c.color=h}function p(t){return c[t]}function f(t,r){c[t]=r}var v=u.controllerVisuals[s||u.getValueState(t)];return Sp(Xe.prepareVisualTypes(v),function(s){var u=v[s];i.convertOpacityToAlpha&&"opacity"===s&&(s="colorAlpha",u=v.__alphaForOpacity),Xe.dependsOn(s,r)&&u&&u.applyVisual(t,p,f)}),c[r]},r.prototype.positionGroup=function(t){var r=this.visualMapModel,i=this.api;Rn(t,r.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},r.prototype.doRender=function(t,r,i,s){},r.type="visualMap",r}(kM),et$=[["left","right","width"],["top","bottom","height"]];function etJ(t,r,i){var s=t.option,u=s.align;if(null!=u&&"auto"!==u)return u;for(var c={width:r.getWidth(),height:r.getHeight()},h="horizontal"===s.orient?1:0,p=et$[h],f=[0,null,10],v={},y=0;y<3;y++)v[et$[1-h][y]]=f[y],v[p[y]]=2===y?i[0]:s[p[y]];var x=[["x","width",3],["y","height",0]][h],_=Rt(v,c,s.padding);return p[(_.margin[x[2]]||0)+_[x[0]]+.5*_[x[1]]<.5*c[x[1]]?0:1]}function etZ(t,r){return Sp(t||[],function(t){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(r?r.componentIndex:"")}),t}var etK=TC,etq=Math.min,etQ=Math.max,et0=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i._shapes={},i._dataInterval=[],i._handleEnds=[],i._hoverLinkDataIndices=[],i}return wU(r,t),r.prototype.init=function(r,i){t.prototype.init.call(this,r,i),this._hoverLinkFromSeriesMouseOver=Sx(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=Sx(this._hideIndicator,this)},r.prototype.doRender=function(t,r,i,s){(!s||"selectDataRange"!==s.type||s.from!==this.uid)&&this._buildView()},r.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,r=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(r);var i=t.get("text");this._renderEndsText(r,i,0),this._renderEndsText(r,i,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},r.prototype._renderEndsText=function(t,r,i){if(!!r){var s=r[1-i];s=null!=s?s+"":"";var u=this.visualMapModel,c=u.get("textGap"),h=u.itemSize,p=this._shapes.mainGroup,f=this._applyTransform([h[0]/2,0===i?-c:h[1]+c],p),v=this._applyTransform(0===i?"bottom":"top",p),y=this._orient,x=this.visualMapModel.textStyleModel;this.group.add(new I0({style:D2(x,{x:f[0],y:f[1],verticalAlign:"horizontal"===y?"middle":v,align:"horizontal"===y?v:"center",text:s})}))}},r.prototype._renderBar=function(t){var r=this.visualMapModel,i=this._shapes,s=r.itemSize,u=this._orient,c=this._useHandle,h=etJ(r,this.api,s),p=i.mainGroup=this._createBarGroup(h),f=new Tf;p.add(f),f.add(i.outOfRange=et1()),f.add(i.inRange=et1(null,c?et3(this._orient):null,Sx(this._dragHandle,this,"all",!1),Sx(this._dragHandle,this,"all",!0))),f.setClipPath(new IF({shape:{x:0,y:0,width:s[0],height:s[1],r:3}}));var v=r.textStyleModel.getTextRect(""),y=etQ(v.width,v.height);c&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(r,p,0,s,y,u),this._createHandle(r,p,1,s,y,u)),this._createIndicator(r,p,s,y,u),t.add(p)},r.prototype._createHandle=function(t,r,i,s,u,c){var h=Sx(this._dragHandle,this,i,!1),p=Sx(this._dragHandle,this,i,!0),f=Tr(t.get("handleSize"),s[0]),v=B8(t.get("handleIcon"),-f/2,-f/2,f,f,null,!0),y=et3(this._orient);v.attr({cursor:y,draggable:!0,drift:h,ondragend:p,onmousemove:function(t){MB(t.event)}}),v.x=s[0]/2,v.useStyle(t.getModel("handleStyle").getItemStyle()),v.setStyle({strokeNoScale:!0,strokeFirst:!0}),v.style.lineWidth*=2,v.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),DN(v,!0),r.add(v);var x=new I0({cursor:y,draggable:!0,drift:h,onmousemove:function(t){MB(t.event)},ondragend:p,style:D2(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});x.ensureState("blur").style={opacity:.1},x.stateTransition={duration:200},this.group.add(x);var _=[f,0],b=this._shapes;b.handleThumbs[i]=v,b.handleLabelPoints[i]=_,b.handleLabels[i]=x},r.prototype._createIndicator=function(t,r,i,s,u){var c=Tr(t.get("indicatorSize"),i[0]),h=B8(t.get("indicatorIcon"),-c/2,-c/2,c,c,null,!0);h.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var p=t.getModel("indicatorStyle").getItemStyle();if(h instanceof ID){var f=h.style;h.useStyle(So({image:f.image,x:f.x,y:f.y,width:f.width,height:f.height},p))}else h.useStyle(p);r.add(h);var v=new I0({silent:!0,invisible:!0,style:D2(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});this.group.add(v);var y=[("horizontal"===u?s/2:6)+i[0]/2,0],x=this._shapes;x.indicator=h,x.indicatorLabel=v,x.indicatorLabelPoint=y,this._firstShowIndicator=!0},r.prototype._dragHandle=function(t,r,i,s){if(!!this._useHandle){if(this._dragging=!r,!r){var u=this._applyTransform([i,s],this._shapes.mainGroup,!0);this._updateInterval(t,u[1]),this._hideIndicator(),this._updateView()}!this.visualMapModel.get("realtime")===r&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?this._hovering||this._clearHoverLinkToSeries():et2(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},r.prototype._resetInterval=function(){var t=this.visualMapModel,r=this._dataInterval=t.getSelected(),i=t.getExtent(),s=[0,t.itemSize[1]];this._handleEnds=[etK(r[0],i,s,!0),etK(r[1],i,s,!0)]},r.prototype._updateInterval=function(t,r){r=r||0;var i=this.visualMapModel,s=this._handleEnds,u=[0,i.itemSize[1]];Yj(r,s,u,t,0);var c=i.getExtent();this._dataInterval=[etK(s[0],u,c,!0),etK(s[1],u,c,!0)]},r.prototype._updateView=function(t){var r=this.visualMapModel,i=r.getExtent(),s=this._shapes,u=[0,r.itemSize[1]],c=t?u:this._handleEnds,h=this._createBarVisual(this._dataInterval,i,c,"inRange"),p=this._createBarVisual(i,i,u,"outOfRange");s.inRange.setStyle({fill:h.barColor}).setShape("points",h.barPoints),s.outOfRange.setStyle({fill:p.barColor}).setShape("points",p.barPoints),this._updateHandle(c,h)},r.prototype._createBarVisual=function(t,r,i,s){var u={forceState:s,convertOpacityToAlpha:!0},c=this._makeColorGradient(t,u),h=[this.getControllerVisual(t[0],"symbolSize",u),this.getControllerVisual(t[1],"symbolSize",u)],p=this._createBarPoints(i,h);return{barColor:new OC(0,0,0,1,c),barPoints:p,handlesColor:[c[0].color,c[c.length-1].color]}},r.prototype._makeColorGradient=function(t,r){var i=[],s=(t[1]-t[0])/100;i.push({color:this.getControllerVisual(t[0],"color",r),offset:0});for(var u=1;u<100;u++){var c=t[0]+s*u;if(c>t[1])break;i.push({color:this.getControllerVisual(c,"color",r),offset:u/100})}return i.push({color:this.getControllerVisual(t[1],"color",r),offset:1}),i},r.prototype._createBarPoints=function(t,r){var i=this.visualMapModel.itemSize;return[[i[0]-r[0],t[0]],[i[0],t[0]],[i[0],t[1]],[i[0]-r[1],t[1]]]},r.prototype._createBarGroup=function(t){var r=this._orient,i=this.visualMapModel.get("inverse");return new Tf("horizontal"!==r||i?"horizontal"===r&&i?{scaleX:"bottom"===t?-1:1,rotation:-Math.PI/2}:"vertical"!==r||i?{scaleX:"left"===t?1:-1}:{scaleX:"left"===t?1:-1,scaleY:-1}:{scaleX:"bottom"===t?1:-1,rotation:Math.PI/2})},r.prototype._updateHandle=function(t,r){if(!!this._useHandle){var i=this._shapes,s=this.visualMapModel,u=i.handleThumbs,c=i.handleLabels,h=s.itemSize,p=s.getExtent();Sp([0,1],function(f){var v=u[f];v.setStyle("fill",r.handlesColor[f]),v.y=t[f];var y=etK(t[f],[0,h[1]],p,!0),x=this.getControllerVisual(y,"symbolSize");v.scaleX=v.scaleY=x/h[0],v.x=h[0]-x/2;var _=Oq(i.handleLabelPoints[f],OK(v,this.group));c[f].setStyle({x:_[0],y:_[1],text:s.formatValueText(this._dataInterval[f]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",i.mainGroup):"center"})},this)}},r.prototype._showIndicator=function(t,r,i,s){var u=this.visualMapModel,c=u.getExtent(),h=u.itemSize,p=[0,h[1]],f=this._shapes,v=f.indicator;if(!!v){v.attr("invisible",!1);var y=this.getControllerVisual(t,"color",{convertOpacityToAlpha:!0}),x=this.getControllerVisual(t,"symbolSize"),_=etK(t,c,p,!0),b=h[0]-x/2,w={x:v.x,y:v.y};v.y=_,v.x=b;var S=Oq(f.indicatorLabelPoint,OK(v,this.group)),M=f.indicatorLabel;M.attr("invisible",!1);var A=this._applyTransform("left",f.mainGroup),C="horizontal"===this._orient;M.setStyle({text:(i||"")+u.formatValueText(r),verticalAlign:C?A:"middle",align:C?"center":A});var T={x:b,y:_,style:{fill:y}},I={style:{x:S[0],y:S[1]}};if(u.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var D={duration:100,easing:"cubicInOut",additive:!0};v.x=w.x,v.y=w.y,v.animateTo(T,D),M.animateTo(I,D)}else v.attr(T),M.attr(I);this._firstShowIndicator=!1;var P=this._shapes.handleLabels;if(P)for(var R=0;R<P.length;R++)this.api.enterBlur(P[R])}},r.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(r){if(t._hovering=!0,!t._dragging){var i=t.visualMapModel.itemSize,s=t._applyTransform([r.offsetX,r.offsetY],t._shapes.mainGroup,!0,!0);s[1]=etq(etQ(0,s[1]),i[1]),t._doHoverLinkToSeries(s[1],0<=s[0]&&s[0]<=i[0])}}).on("mouseout",function(){t._hovering=!1,t._dragging||t._clearHoverLinkToSeries()})},r.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},r.prototype._doHoverLinkToSeries=function(t,r){var i=this.visualMapModel,s=i.itemSize;if(!!i.option.hoverLink){var u=[0,s[1]],c=i.getExtent();t=etq(etQ(u[0],t),u[1]);var h=function(t,r,i){var s=6,u=t.get("hoverLinkDataSize");return u&&(s=etK(u,r,i,!0)/2),s}(i,c,u),p=[t-h,t+h],f=etK(t,u,c,!0),v=[etK(p[0],u,c,!0),etK(p[1],u,c,!0)];p[0]<u[0]&&(v[0]=-1/0),p[1]>u[1]&&(v[1]=1/0),r&&(v[0]===-1/0?this._showIndicator(f,v[1],"< ",h):v[1]===1/0?this._showIndicator(f,v[0],"> ",h):this._showIndicator(f,f," ",h));var y=this._hoverLinkDataIndices,x=[];(r||et2(i))&&(x=this._hoverLinkDataIndices=i.findTargetDataIndices(v));var _=function(t,r){var i={},s={};return u(t||[],i),u(r||[],s,i),[c(i),c(s)];function u(t,r,i){for(var s=0,u=t.length;s<u;s++){var c=T4(t[s].seriesId,null);if(null==c)return;for(var h=Tq(t[s].dataIndex),p=i&&i[c],f=0,v=h.length;f<v;f++){var y=h[f];p&&p[y]?p[y]=null:(r[c]||(r[c]={}))[y]=1}}}function c(t,r){var i=[];for(var s in t)if(t.hasOwnProperty(s)&&null!=t[s]){if(r)i.push(+s);else{var u=c(t[s],!0);u.length&&i.push({seriesId:s,dataIndex:u})}}return i}}(y,x);this._dispatchHighDown("downplay",etZ(_[0],i)),this._dispatchHighDown("highlight",etZ(_[1],i))}},r.prototype._hoverLinkFromSeriesMouseOver=function(t){if(BZ(t.target,function(t){var i=I1(t);if(null!=i.dataIndex)return r=i,!0},!0),!r)return;var r,i=this.ecModel.getSeriesByIndex(r.seriesIndex),s=this.visualMapModel;if(!!s.isTargetSeries(i)){var u=i.getData(r.dataType),c=u.getStore().get(s.getDataDimensionIndex(u),r.dataIndex);!isNaN(c)&&this._showIndicator(c,c)}},r.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var i=0;i<r.length;i++)this.api.leaveBlur(r[i])},r.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",etZ(t,this.visualMapModel)),t.length=0},r.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},r.prototype._applyTransform=function(t,r,i,s){var u=OK(r,s?null:this.group);return Sb(t)?Oq(t,u,i):OQ(t,u,i)},r.prototype._dispatchHighDown=function(t,r){r&&r.length&&this.api.dispatchAction({type:t,batch:r})},r.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},r.type="visualMap.continuous",r}(etY);function et1(t,r,i,s){return new Ol({shape:{points:t},draggable:!!i,cursor:r,drift:i,onmousemove:function(t){MB(t.event)},ondragend:s})}function et2(t){var r=t.get("hoverLinkOnHandle");return!!(null==r?t.get("realtime"):r)}function et3(t){return"vertical"===t?"ns-resize":"ew-resize"}var et5={type:"selectDataRange",event:"dataRangeSelected",update:"update"},et4=function(t,r){r.eachComponent({mainType:"visualMap",query:t},function(r){r.setSelected(t.selected)})},et6=[{createOnAllSeries:!0,reset:function(t,r){var i=[];return r.eachComponent("visualMap",function(r){var s,u,c,h,p,f=t.pipelineContext;if(!!r.isTargetSeries(t)&&(!f||!f.large))i.push((s=r.stateList,u=r.targetVisuals,c=Sx(r.getValueState,r),h=r.getDataDimensionIndex(t.getData()),p={},Sp(s,function(t){var r=Xe.prepareVisualTypes(u[t]);p[t]=r}),{progress:function(t,r){function i(t){return Bj(r,v,t)}function s(t,i){BY(r,v,t,i)}null!=h&&(f=r.getDimensionIndex(h));for(var f,v,y=r.getStore();null!=(v=t.next());){var x=r.getRawDataItem(v);if(!x||!1!==x.visualMap)for(var _=null!=h?y.get(f,v):v,b=c(_),w=u[b],S=p[b],M=0,A=S.length;M<A;M++){var C=S[M];w[C]&&w[C].applyVisual(_,i,s)}}}}))}),i}},{createOnAllSeries:!0,reset:function(t,r){var i=t.getData(),s=[];r.eachComponent("visualMap",function(r){if(r.isTargetSeries(t)){var u=r.getVisualMeta(Sx(et9,null,t,r))||{stops:[],outerColors:[]},c=r.getDataDimensionIndex(i);c>=0&&(u.dimension=c,s.push(u))}}),t.getData().setVisual("visualMeta",s)}}];function et9(t,r,i,s){for(var u=r.targetVisuals[s],c=Xe.prepareVisualTypes(u),h={color:BX(t.getData(),"color")},p=0,f=c.length;p<f;p++){var v=c[p],y=u["opacity"===v?"__alphaForOpacity":v];y&&y.applyVisual(i,x,_)}return h.color;function x(t){return h[t]}function _(t,r){h[t]=r}}var et8=Sp;function et7(t){var r=t&&t.visualMap;!Sb(r)&&(r=r?[r]:[]),et8(r,function(t){if(!!t){ene(t,"splitList")&&!ene(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var r=t.pieces;r&&Sb(r)&&et8(r,function(t){SC(t)&&(ene(t,"start")&&!ene(t,"min")&&(t.min=t.start),ene(t,"end")&&!ene(t,"max")&&(t.max=t.end))})}})}function ene(t,r){return t&&t.hasOwnProperty&&t.hasOwnProperty(r)}var ent=!1;function enn(t){if(!ent)ent=!0,t.registerSubTypeDefaulter("visualMap",function(t){return t.categories||(t.pieces?t.pieces.length>0:t.splitNumber>0)&&!t.calculable?"piecewise":"continuous"}),t.registerAction(et5,et4),Sp(et6,function(r){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,r)}),t.registerPreprocessor(et7)}function enr(t){t.registerComponentModel(etj),t.registerComponentView(et0),enn(t)}var eni=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i._pieceList=[],i}return wU(r,t),r.prototype.optionUpdated=function(r,i){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var s=this._mode=this._determineMode();this._pieceList=[],ena[this._mode].call(this,this._pieceList),this._resetSelected(r,i);var u=this.option.categories;this.resetVisual(function(t,r){"categories"===s?(t.mappingMethod="category",t.categories=Sr(u)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=Sf(this._pieceList,function(t){return t=Sr(t),"inRange"!==r&&(t.visual=null),t}))})},r.prototype.completeVisualOption=function(){var r=this.option,i={},s=Xe.listVisualTypes(),u=this.isCategory();function c(t,r,i){return t&&t[r]&&t[r].hasOwnProperty(i)}Sp(r.pieces,function(t){Sp(s,function(r){t.hasOwnProperty(r)&&(i[r]=1)})}),Sp(i,function(t,i){var s=!1;Sp(this.stateList,function(t){s=s||c(r,t,i)||c(r.target,t,i)},this),s||Sp(this.stateList,function(t){(r[t]||(r[t]={}))[i]=etz.get(i,"inRange"===t?"active":"inactive",u)})},this),t.prototype.completeVisualOption.apply(this,arguments)},r.prototype._resetSelected=function(t,r){var i=this.option,s=this._pieceList,u=(r?i:t).selected||{};if(i.selected=u,Sp(s,function(t,r){var i=this.getSelectedMapKey(t);!u.hasOwnProperty(i)&&(u[i]=!0)},this),"single"===i.selectedMode){var c=!1;Sp(s,function(t,r){var i=this.getSelectedMapKey(t);u[i]&&(c?u[i]=!1:c=!0)},this)}},r.prototype.getItemSymbol=function(){return this.get("itemSymbol")},r.prototype.getSelectedMapKey=function(t){return"categories"===this._mode?t.value+"":t.index+""},r.prototype.getPieceList=function(){return this._pieceList},r.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},r.prototype.setSelected=function(t){this.option.selected=Sr(t)},r.prototype.getValueState=function(t){var r=Xe.findPieceIndex(t,this._pieceList);return null!=r&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(t){var r=[],i=this._pieceList;return this.eachTargetSeries(function(s){var u=[],c=s.getData();c.each(this.getDataDimensionIndex(c),function(r,s){Xe.findPieceIndex(r,i)===t&&u.push(s)},this),r.push({seriesId:s.id,dataIndex:u})},this),r},r.prototype.getRepresentValue=function(t){var r;if(this.isCategory())r=t.value;else if(null!=t.value)r=t.value;else{var i=t.interval||[];r=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return r},r.prototype.getVisualMeta=function(t){if(!this.isCategory()){var r=[],i=["",""],s=this;var u=this._pieceList.slice();if(u.length){var c=u[0].interval[0];c!==-1/0&&u.unshift({interval:[-1/0,c]}),(c=u[u.length-1].interval[1])!==1/0&&u.push({interval:[c,1/0]})}else u.push({interval:[-1/0,1/0]});var h=-1/0;return Sp(u,function(t){var r=t.interval;r&&(r[0]>h&&p([h,r[0]],"outOfRange"),p(r.slice()),h=r[1])},this),{stops:r,outerColors:i}}function p(u,c){var h=s.getRepresentValue({interval:u});!c&&(c=s.getValueState(h));var p=t(h,c);u[0]===-1/0?i[0]=p:u[1]===1/0?i[1]=p:r.push({value:u[0],color:p},{value:u[1],color:p})}},r.type="visualMap.piecewise",r.defaultOption=Pm(etV.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),r}(etV),ena={splitNumber:function(t){var r=this.option,i=Math.min(r.precision,20),s=this.getExtent(),u=r.splitNumber;u=Math.max(parseInt(u,10),1),r.splitNumber=u;for(var c=(s[1]-s[0])/u;+c.toFixed(i)!==c&&i<5;)i++;r.precision=i,c=+c.toFixed(i),r.minOpen&&t.push({interval:[-1/0,s[0]],close:[0,0]});for(var h=0,p=s[0];h<u;p+=c,h++){var f=h===u-1?s[1]:p+c;t.push({interval:[p,f],close:[1,1]})}r.maxOpen&&t.push({interval:[s[1],1/0],close:[0,0]}),TW(t),Sp(t,function(t,r){t.index=r,t.text=this.formatValueText(t.interval)},this)},categories:function(t){var r=this.option;Sp(r.categories,function(r){t.push({text:this.formatValueText(r,!0),value:r})},this),eno(r,t)},pieces:function(t){var r=this.option;Sp(r.pieces,function(r,i){!SC(r)&&(r={value:r});var s={text:"",index:i};if(null!=r.label&&(s.text=r.label),r.hasOwnProperty("value")){var u=s.value=r.value;s.interval=[u,u],s.close=[1,1]}else{for(var c=s.interval=[],h=s.close=[0,0],p=[1,0,1],f=[-1/0,1/0],v=[],y=0;y<2;y++){for(var x=[["gte","gt","min"],["lte","lt","max"]][y],_=0;_<3&&null==c[y];_++)c[y]=r[x[_]],h[y]=p[_],v[y]=2===_;null==c[y]&&(c[y]=f[y])}v[0]&&c[1]===1/0&&(h[0]=0),v[1]&&c[0]===-1/0&&(h[1]=0);c[0]===c[1]&&h[0]&&h[1]&&(s.value=c[0])}s.visual=Xe.retrieveVisuals(r),t.push(s)},this),eno(r,t),TW(t),Sp(t,function(t){var r=t.close,i=[["<",""][r[1]],[">",""][r[0]]];t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,i)},this)}};function eno(t,r){var i=t.inverse;("vertical"===t.orient?!i:i)&&r.reverse()}var ens=function(t){function r(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=r.type,i}return wU(r,t),r.prototype.doRender=function(){var t=this.group;t.removeAll();var r=this.visualMapModel,i=r.get("textGap"),s=r.textStyleModel,u=s.getFont(),c=s.getTextColor(),h=this._getItemAlign(),p=r.itemSize,f=this._getViewData(),v=f.endsText,y=Sk(r.get("showLabel",!0),!v);v&&this._renderEndsText(t,v[0],p,y,h),Sp(f.viewPieceList,function(s){var f=s.piece,v=new Tf;v.onclick=Sx(this._onItemClick,this,f),this._enableHoverLink(v,s.indexInModelPieceList);var x=r.getRepresentValue(f);if(this._createItemSymbol(v,x,[0,0,p[0],p[1]]),y){var _=this.visualMapModel.getValueState(x);v.add(new I0({style:{x:"right"===h?-i:p[0]+i,y:p[1]/2,text:f.text,verticalAlign:"middle",align:h,font:u,fill:c,opacity:"outOfRange"===_?.5:1}}))}t.add(v)},this),v&&this._renderEndsText(t,v[1],p,y,h),Re(r.get("orient"),t,r.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},r.prototype._enableHoverLink=function(t,r){var i=this;t.on("mouseover",function(){return s("highlight")}).on("mouseout",function(){return s("downplay")});var s=function(t){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:t,batch:etZ(s.findTargetDataIndices(r),s)})}},r.prototype._getItemAlign=function(){var t=this.visualMapModel,r=t.option;if("vertical"===r.orient)return etJ(t,this.api,t.itemSize);var i=r.align;return(!i||"auto"===i)&&(i="left"),i},r.prototype._renderEndsText=function(t,r,i,s,u){if(!!r){var c=new Tf,h=this.visualMapModel.textStyleModel;c.add(new I0({style:D2(h,{x:s?"right"===u?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:s?u:"center",text:r})})),t.add(c)}},r.prototype._getViewData=function(){var t=this.visualMapModel,r=Sf(t.getPieceList(),function(t,r){return{piece:t,indexInModelPieceList:r}}),i=t.get("text"),s=t.get("orient"),u=t.get("inverse");return("horizontal"===s?u:!u)?r.reverse():i&&(i=i.slice().reverse()),{viewPieceList:r,endsText:i}},r.prototype._createItemSymbol=function(t,r,i){t.add(B8(this.getControllerVisual(r,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(r,"color")))},r.prototype._onItemClick=function(t){var r=this.visualMapModel,i=r.option,s=i.selectedMode;if(!!s){var u=Sr(i.selected),c=r.getSelectedMapKey(t);"single"===s||!0===s?(u[c]=!0,Sp(u,function(t,r){u[r]=r===c})):u[c]=!u[c],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:u})}},r.type="visualMap.piecewise",r}(etY);function enl(t){t.registerComponentModel(eni),t.registerComponentView(ens),enn(t)}var enu={label:{enabled:!0},decal:{show:!1}},enc=T7(),enh={};function end(t,r){var i=t.getModel("aria");if(!!i.get("enabled")){var s=Sr(enu);Si(s.label,t.getLocaleModel().get("aria"),!1),Si(i.option,s,!1),function(){if(i.getModel("decal").get("show")){var r=SY();t.eachSeries(function(t){if(!t.isColorBySeries()){var i=r.get(t.type);!i&&(i={},r.set(t.type,i)),enc(t).scope=i}}),t.eachRawSeries(function(r){if(!t.isSeriesFiltered(r)){if(Sw(r.enableAriaDecal)){r.enableAriaDecal();return}var i=r.getData();if(r.isColorBySeries()){var s=RR(r.ecModel,r.name,enh,t.getSeriesCount()),u=i.getVisual("decal");i.setVisual("decal",v(u,s))}else{var c=r.getRawData(),h={},p=enc(r).scope;i.each(function(t){h[i.getRawIndex(t)]=t});var f=c.count();c.each(function(t){var s=h[t],u=c.getName(t)||t+"",y=RR(r.ecModel,u,p,f),x=i.getItemVisual(s,"decal");i.setItemVisual(s,"decal",v(x,y))})}}function v(t,r){var i=t?So(So({},r),t):r;return i.dirty=!0,i}})}}(),function(){var s,c,h=r.getZr().dom;if(!h)return;var p=t.getLocaleModel().get("aria"),f=i.getModel("label");if(f.option=Ss(f.option,p),!f.get("enabled"))return;if(f.get("description")){h.setAttribute("aria-label",f.get("description"));return}var v=t.getSeriesCount(),y=f.get(["data","maxCount"])||10,x=Math.min(v,f.get(["series","maxCount"])||10);if(!(v<1)){var _=function(){var r=t.get("title");return r&&r.length&&(r=r[0]),r&&r.text}();if(_){;c=u(f.get(["general","withTitle"]),{title:_})}else c=f.get(["general","withoutTitle"]);var b=[];c+=u(v>1?f.get(["series","multiple","prefix"]):f.get(["series","single","prefix"]),{seriesCount:v}),t.eachSeries(function(r,i){if(i<x){var s=void 0,c=r.get("name")?"withName":"withoutName";s=u(s=v>1?f.get(["series","multiple",c]):f.get(["series","single",c]),{seriesId:r.seriesIndex,seriesName:r.get("name"),seriesType:function(r){var i=t.getLocaleModel().get(["series","typeNames"]);return i[r]||i.chart}(r.subType)});var h=r.getData();h.count()>y?s+=u(f.get(["data","partialData"]),{displayCnt:y}):s+=f.get(["data","allData"]);for(var p=f.get(["data","separator","middle"]),_=f.get(["data","separator","end"]),w=[],S=0;S<h.count();S++)if(S<y){var M=h.getName(S),A=h.getValues(S),C=f.get(["data",M?"withName":"withoutName"]);w.push(u(C,{name:M,value:A.join(p)}))}s+=w.join(p)+_,b.push(s)}});var w=f.getModel(["series","multiple","separator"]),S=w.get("middle"),M=w.get("end");c+=b.join(S)+M,h.setAttribute("aria-label",c)}}()}function u(t,r){if(!SS(t))return t;var i=t;return Sp(r,function(t,r){i=i.replace(RegExp("\\{\\s*"+r+"\\s*\\}","g"),t)}),i}}function enp(t){if(!!t&&!!t.aria){var r=t.aria;null!=r.show&&(r.enabled=r.show),r.label=r.label||{},Sp(["description","general","series","data"],function(t){null!=r[t]&&(r.label[t]=r[t])})}}var enf={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},eng=function(){function t(t){null==(this._condVal=SS(t)?new RegExp(t):SR(t)?t:null)&&LD("")}return t.prototype.evaluate=function(t){var r=typeof t;return SS(r)?this._condVal.test(t):!!SA(r)&&this._condVal.test(t+"")},t}(),enm=function(){function t(){}return t.prototype.evaluate=function(){return this.value},t}(),env=function(){function t(){}return t.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(!t[r].evaluate())return!1;return!0},t}(),eny=function(){function t(){}return t.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(t[r].evaluate())return!0;return!1},t}(),enx=function(){function t(){}return t.prototype.evaluate=function(){return!this.child.evaluate()},t}(),en_=function(){function t(){}return t.prototype.evaluate=function(){for(var t=!!this.valueParser,r=(0,this.getValue)(this.valueGetterParam),i=t?this.valueParser(r):null,s=0;s<this.subCondList.length;s++)if(!this.subCondList[s].evaluate(t?i:r))return!1;return!0},t}();function enb(t,r){if(!0===t||!1===t){var i=new enm;return i.value=t,i}if(!function(t){return SC(t)&&!Sd(t)}(t)&&LD(""),t.and)return enw("and",t,r);if(t.or)return enw("or",t,r);if(t.not)return function(t,r){var i=t.not;!enS(i)&&LD("");var s=new enx;return s.child=enb(i,r),!s.child&&LD(""),s}(t,r);return function(t,r){var i=r.prepareGetValue(t),s=[],u=Sy(t),c=t.parser;for(var h=c?(f=c,LR.get(f)):null,p=0;p<u.length;p++){var f,v,y,x=u[p];if(!("parser"===x||r.valueGetterAttrMap.get(x))){var _=SK(enf,x)?enf[x]:x,b=t[x],w=h?h(b):b;var S=(v=_,y=w,("eq"===v||"ne"===v?new LN("eq"===v,y):SK(Lk,v)?new LO(v,y):null)||"reg"===_&&new eng(w));!S&&LD(""),s.push(S)}}!s.length&&LD("");var M=new en_;return M.valueGetterParam=i,M.valueParser=h,M.getValue=r.getValue,M.subCondList=s,M}(t,r)}function enw(t,r,i){var s=r[t];!Sb(s)&&LD(""),!s.length&&LD("");var u="and"===t?new env:new eny;return u.children=Sf(s,function(t){return enb(t,i)}),!u.children.length&&LD(""),u}function enS(t){return SC(t)&&!Sd(t)}var enM=function(){function t(t,r){this._cond=enb(t,r)}return t.prototype.evaluate=function(){return this._cond.evaluate()},t}(),enA={type:"echarts:filter",transform:function(t){var r,i,s=t.upstream;for(var u=(r=t.config,new enM(r,{valueGetterAttrMap:SY({dimension:!0}),prepareGetValue:function(t){var r=t.dimension;!SK(t,"dimension")&&LD("");var i=s.getDimensionInfo(r);return!i&&LD(""),{dimIdx:i.index}},getValue:function(t){return s.retrieveValueFromItem(i,t.dimIdx)}})),c=[],h=0,p=s.count();h<p;h++)i=s.getRawDataItem(h),u.evaluate()&&c.push(i);return{data:c}}},enC={type:"echarts:sort",transform:function(t){var r=t.upstream,i=t.config,s=Tq(i);!s.length&&LD("");var u=[];Sp(s,function(t){var i,s=t.dimension,c=t.order,h=t.parser,p=t.incomparable;null==s&&LD(""),"asc"!==c&&"desc"!==c&&LD(""),p&&"min"!==p&&"max"!==p&&LD(""),"asc"!==c&&"desc"!==c&&LD("");var f=r.getDimensionInfo(s);!f&&LD("");var v=h?(i=h,LR.get(i)):null;h&&!v&&LD(""),u.push({dimIdx:f.index,parser:v,comparator:new LB(c,p)})});var c=r.sourceFormat;c!==Rg&&c!==Rm&&LD("");for(var h=[],p=0,f=r.count();p<f;p++)h.push(r.getRawDataItem(p));return h.sort(function(t,i){for(var s=0;s<u.length;s++){var c=u[s],h=r.retrieveValueFromItem(t,c.dimIdx),p=r.retrieveValueFromItem(i,c.dimIdx);c.parser&&(h=c.parser(h),p=c.parser(p));var f=c.comparator.evaluate(h,p);if(0!==f)return f}return 0}),{data:h}}},enT=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.type="dataset",r}return wU(r,t),r.prototype.init=function(r,i,s){t.prototype.init.call(this,r,i,s),this._sourceManager=new L1(this),L2(this)},r.prototype.mergeOption=function(r,i){t.prototype.mergeOption.call(this,r,i),L2(this)},r.prototype.optionUpdated=function(){this._sourceManager.dirty()},r.prototype.getSourceManager=function(){return this._sourceManager},r.type="dataset",r.defaultOption={seriesLayoutBy:R_},r}(Ru),enE=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.type="dataset",r}return wU(r,t),r.type="dataset",r}(kM),enI=Iu.CMD;function enD(t,r){return 1e-5>Math.abs(t-r)}function enP(t){var r,i,s,u,c,h=t.data,p=t.len(),f=[],v=0,y=0,x=0,_=0;function b(t,i){r&&r.length>2&&f.push(r),r=[t,i]}function w(t,i,s,u){!(enD(t,s)&&enD(i,u))&&r.push(t,i,s,u,s,u)}for(var S=0;S<p;){var M=h[S++],A=1===S;switch(A&&(v=h[S],y=h[S+1],x=v,_=y,(M===enI.L||M===enI.C||M===enI.Q)&&(r=[x,_])),M){case enI.M:v=x=h[S++],y=_=h[S++],b(x,_);break;case enI.L:i=h[S++],w(v,y,i,s=h[S++]),v=i,y=s;break;case enI.C:r.push(h[S++],h[S++],h[S++],h[S++],v=h[S++],y=h[S++]);break;case enI.Q:i=h[S++],s=h[S++],u=h[S++],c=h[S++],r.push(v+2/3*(i-v),y+2/3*(s-y),u+2/3*(i-u),c+2/3*(s-c),u,c),v=u,y=c;break;case enI.A:var C=h[S++],T=h[S++],I=h[S++],D=h[S++],P=h[S++],R=h[S++]+P;S+=1;var L=!h[S++];i=Math.cos(P)*I+C,s=Math.sin(P)*D+T,A?b(x=i,_=s):w(v,y,i,s),v=Math.cos(R)*I+C,y=Math.sin(R)*D+T;for(var k=(L?-1:1)*Math.PI/2,O=P;L?O>R:O<R;O+=k){var B=L?Math.max(O+k,R):Math.min(O+k,R);!function(t,i,s,u,c,h){var p=4*Math.tan(Math.abs(i-t)/4)/3,f=i<t?-1:1,v=Math.cos(t),y=Math.sin(t),x=Math.cos(i),_=Math.sin(i),b=x*c+s,w=_*h+u,S=c*p*f,M=h*p*f;r.push(v*c+s-S*y,y*h+u+M*v,b+S*_,w-M*x,b,w)}(O,B,C,T,I,D)}break;case enI.R:x=v=h[S++],_=y=h[S++],i=x+h[S++],s=_+h[S++],b(i,_),w(i,_,i,s),w(i,s,x,s),w(x,s,x,_),w(x,_,i,_);break;case enI.Z:r&&w(v,y,x,_),v=x,y=_}}return r&&r.length>2&&f.push(r),f}function enR(t,r,i){var s=Math.ceil(Math.sqrt(Math.abs(t[r]/t[1-r])*i)),u=Math.floor(i/s);0===u&&(u=1,s=i);for(var c=[],h=0;h<s;h++)c.push(u);var p=i-s*u;if(p>0)for(var h=0;h<p;h++)c[h%s]+=1;return c}function enL(t,r,i){for(var s=t.r0,u=t.r,c=t.startAngle,h=Math.abs(t.endAngle-c),p=h*u,f=u-s,v=p>Math.abs(f),y=enR([p,f],v?0:1,r),x=(v?h:f)/y.length,_=0;_<y.length;_++){for(var b=(v?f:h)/y[_],w=0;w<y[_];w++){var S={};v?(S.startAngle=c+x*_,S.endAngle=c+x*(_+1),S.r0=s+b*w,S.r=s+b*(w+1)):(S.startAngle=c+b*w,S.endAngle=c+b*(w+1),S.r0=s+x*_,S.r=s+x*(_+1)),S.clockwise=t.clockwise,S.cx=t.cx,S.cy=t.cy,i.push(S)}}}function enk(t,r,i,s){return t*s-i*r}function enO(t,r){var i=t[t.length-1];if(!i||i[0]!==r[0]||i[1]!==r[1])t.push(r)}function enB(t){var r=t.points,i=[],s=[];EK(r,i,s);var u=new M4(i[0],i[1],s[0]-i[0],s[1]-i[1]),c=u.width,h=u.height,p=u.x,f=u.y,v=new MZ,y=new MZ;return c>h?(v.x=y.x=p+c/2,v.y=f,y.y=f+h):(v.y=y.y=f+h/2,v.x=p,y.x=p+c),function(t,r,i){for(var s=t.length,u=[],c=0;c<s;c++){var h=t[c],p=t[(c+1)%s],f=function(t,r,i,s,u,c,h,p){var f=i-t,v=s-r,y=h-u,x=p-c,_=y*v-f*x;if(1e-6>Math.abs(_))return null;var b=((t-u)*x-y*(r-c))/_;return b<0||b>1?null:new MZ(b*f+t,b*v+r)}(h[0],h[1],p[0],p[1],r.x,r.y,i.x,i.y);f&&u.push({projPt:function(t,r,i){var s=new MZ;MZ.sub(s,i,r),s.normalize();var u=new MZ;return MZ.sub(u,t,r),u.dot(s)}(f,r,i),pt:f,idx:c})}if(u.length<2)return[{points:t},{points:t}];u.sort(function(t,r){return t.projPt-r.projPt});var v=u[0],y=u[u.length-1];if(y.idx<v.idx){var x=v;v=y,y=x}for(var _=[v.pt.x,v.pt.y],b=[y.pt.x,y.pt.y],w=[_],S=[b],c=v.idx+1;c<=y.idx;c++)enO(w,t[c].slice());enO(w,b),enO(w,_);for(var c=y.idx+1;c<=v.idx+s;c++)enO(S,t[c%s].slice());return enO(S,_),enO(S,b),[{points:w},{points:S}]}(r,v,y)}function enN(t,r,i,s){if(1===i)s.push(r);else{var u=Math.floor(i/2),c=t(r);enN(t,c[0],u,s),enN(t,c[1],i-u,s)}return s}function enF(t,r){for(var i=t.length,s=t[i-2],u=t[i-1],c=[],h=0;h<r.length;)c[h++]=s,c[h++]=u;return c}function enz(t){for(var r=0,i=0,s=0,u=t.length,c=0,h=u-2;c<u;h=c,c+=2){var p=t[h],f=t[h+1],v=t[c],y=t[c+1],x=p*y-v*f;r+=x,i+=(p+v)*x,s+=(f+y)*x}return 0===r?[t[0]||0,t[1]||0]:[i/r/3,s/r/3,r]}function enU(t){return t.__isCombineMorphing}var enH="__mOriginal_";function enG(t,r,i){var s=enH+r,u=t[s]||t[r];!t[s]&&(t[s]=t[r]);var c=i.replace,h=i.after,p=i.before;t[r]=function(){var t,r=arguments;return p&&p.apply(this,r),t=c?c.apply(this,r):u.apply(this,r),h&&h.apply(this,r),t}}function enV(t,r){var i=enH+r;t[i]&&(t[r]=t[i],t[i]=null)}function enW(t,r){for(var i=0;i<t.length;i++){for(var s=t[i],u=0;u<s.length;){var c=s[u],h=s[u+1];s[u++]=r[0]*c+r[2]*h+r[4],s[u++]=r[1]*c+r[3]*h+r[5]}}}function enj(t,r){var i=t.getUpdatedPathProxy(),s=r.getUpdatedPathProxy(),u=function(t,r){for(var i,s,u,c=[],h=[],p=0;p<Math.max(t.length,r.length);p++){var f=t[p],v=r[p],y=void 0,x=void 0;f?v?(y=(i=function(t,r){var i=t.length,s=r.length;if(i===s)return[t,r];for(var u=[],c=[],h=i<s?t:r,p=Math.min(i,s),f=Math.abs(s-i)/6,v=Math.ceil(f/((p-2)/6))+1,y=[h[0],h[1]],x=f,_=2;_<p;){var b=h[_-2],w=h[_-1],S=h[_++],M=h[_++],A=h[_++],C=h[_++],T=h[_++],I=h[_++];if(x<=0){y.push(S,M,A,C,T,I);continue}for(var D=Math.min(x,v-1)+1,P=1;P<=D;P++){var R=P/D;AE(b,S,A,T,R,u),AE(w,M,C,I,R,c),b=u[3],w=c[3],y.push(u[1],c[1],u[2],c[2],b,w),S=u[5],M=c[5],A=u[6],C=c[6]}x-=D-1}return h===t?[y,r]:[t,y]}(f,v))[0],x=i[1],s=y,u=x):(x=enF(u||f,f),y=f):(y=enF(s||v,v),x=v),c.push(y),h.push(x)}return[c,h]}(enP(i),enP(s)),c=u[0],h=u[1],p=t.getComputedTransform(),f=r.getComputedTransform();p&&enW(c,p),f&&enW(h,f),enG(r,"updateTransform",{replace:function(){this.transform=null}}),r.transform=null;var v=function(t,r,i,s){for(var u,c=[],h=0;h<t.length;h++){var p,f=t[h],v=r[h],y=enz(f),x=enz(v);null==u&&(u=y[2]<0!=x[2]<0);var _=[],b=[],w=0,S=1/0,M=[],A=f.length;u&&(f=function(t){for(var r=[],i=t.length,s=0;s<i;s+=2)r[s]=t[i-s-2],r[s+1]=t[i-s-1];return r}(f));for(var C=6*function(t,r,i,s){for(var u=(t.length-2)/6,c=1/0,h=0,p=t.length,f=p-2,v=0;v<u;v++){for(var y=6*v,x=0,_=0;_<p;_+=2){var b=0===_?y:(y+_-2)%f+2,w=t[b]-i[0],S=t[b+1]-i[1],M=r[_]-s[0],A=r[_+1]-s[1],C=M-w,T=A-S;x+=C*C+T*T}x<c&&(c=x,h=v)}return h}(f,v,y,x),T=A-2,I=0;I<T;I+=2){var D=(C+I)%T+2;_[I+2]=f[D]-y[0],_[I+3]=f[D+1]-y[1]}_[0]=f[C]-y[0],_[1]=f[C+1]-y[1],!0;for(var P=s/i,R=-s/2;R<=s/2;R+=P){for(var L=Math.sin(R),k=Math.cos(R),O=0,I=0;I<f.length;I+=2){var B=_[I],N=_[I+1],F=v[I]-x[0],z=v[I+1]-x[1],U=F*k-z*L,H=F*L+z*k;M[I]=U,M[I+1]=H;var G=U-B,V=H-N;O+=G*G+V*V}if(O<S){S=O,w=R;for(var W=0;W<M.length;W++)b[W]=M[W]}}c.push({from:_,to:b,fromCp:y,toCp:x,rotation:-w})}return c}(c,h,10,Math.PI),y=[];enG(r,"buildPath",{replace:function(t){for(var i=r.__morphT,s=1-i,u=[],c=0;c<v.length;c++){var h=v[c],p=h.from,f=h.to,x=h.rotation*i,_=h.fromCp,b=h.toCp,w=Math.sin(x),S=Math.cos(x);Mh(u,_,b,i);for(var M=0;M<p.length;M+=2){var A=p[M],C=p[M+1],T=f[M],I=f[M+1],D=A*s+T*i,P=C*s+I*i;y[M]=D*S-P*w+u[0],y[M+1]=D*w+P*S+u[1]}var R=y[0],L=y[1];t.moveTo(R,L);for(var M=2;M<p.length;){var T=y[M++],I=y[M++],k=y[M++],O=y[M++],B=y[M++],N=y[M++];R===T&&L===I&&k===B&&O===N?t.lineTo(B,N):t.bezierCurveTo(T,I,k,O,B,N),R=B,L=N}}}})}function enX(t,r,i){if(!t||!r)return r;var s=i.done,u=i.during;return enj(t,r),r.__morphT=0,r.animateTo({__morphT:1},Ss({during:function(t){r.dirtyShape(),u&&u(t)},done:function(){enV(r,"buildPath"),enV(r,"updateTransform"),r.__morphT=-1,r.createPathProxy(),r.dirtyShape(),s&&s()}},i)),r}function enY(t){var r=1/0,i=1/0,s=-1/0,u=-1/0,c=Sf(t,function(t){var c=t.getBoundingRect(),h=t.getComputedTransform(),p=c.x+c.width/2+(h?h[4]:0),f=c.y+c.height/2+(h?h[5]:0);return r=Math.min(p,r),i=Math.min(f,i),s=Math.max(p,s),u=Math.max(f,u),[p,f]});return Sf(c,function(c,h){return{cp:c,z:function(t,r,i,s,u,c){t=u===i?0:Math.round(32767*(t-i)/(u-i)),r=c===s?0:Math.round(32767*(r-s)/(c-s));for(var h,p=0,f=32768;f>0;f/=2){var v=0,y=0;(t&f)>0&&(v=1),(r&f)>0&&(y=1),p+=f*f*(3*v^y),0===y&&(1===v&&(t=f-1-t,r=f-1-r),h=t,t=r,r=h)}return p}(c[0],c[1],r,i,s,u),path:t[h]}}).sort(function(t,r){return t.z-r.z}).map(function(t){return t.path})}function en$(t){return function(t,r){var i,s=[],u=t.shape;switch(t.type){case"rect":!function(t,r,i){for(var s=t.width,u=t.height,c=s>u,h=enR([s,u],c?0:1,r),p=c?"width":"height",f=c?"height":"width",v=c?"x":"y",y=c?"y":"x",x=t[p]/h.length,_=0;_<h.length;_++){for(var b=t[f]/h[_],w=0;w<h[_];w++){var S={};S[v]=_*x,S[y]=w*b,S[p]=x,S[f]=b,S.x+=t.x,S.y+=t.y,i.push(S)}}}(u,r,s),i=IF;break;case"sector":enL(u,r,s),i=Ot;break;case"circle":enL({r0:0,r:u.r,startAngle:0,endAngle:2*Math.PI,cx:u.cx,cy:u.cy},r,s),i=Ot;break;default:var c=t.getComputedTransform(),h=c?Math.sqrt(Math.max(c[0]*c[0]+c[1]*c[1],c[2]*c[2]+c[3]*c[3])):1,p=Sf(function(t,r){var i=enP(t),s=[];r=r||1;for(var u=0;u<i.length;u++){var c=i[u],h=[],p=c[0],f=c[1];h.push(p,f);for(var v=2;v<c.length;){var y=c[v++],x=c[v++],_=c[v++],b=c[v++],w=c[v++],S=c[v++];!function t(r,i,s,u,c,h,p,f,v,y){if(enD(r,s)&&enD(i,u)&&enD(c,p)&&enD(h,f)){v.push(p,f);return}var x=2/y,_=x*x,b=p-r,w=f-i,S=Math.sqrt(b*b+w*w);b/=S,w/=S;var M=s-r,A=u-i,C=c-p,T=h-f,I=M*M+A*A,D=C*C+T*T;if(I<_&&D<_){v.push(p,f);return}var P=b*M+w*A,R=-b*C-w*T;if(I-P*P<_&&P>=0&&D-R*R<_&&R>=0){v.push(p,f);return}var L=[],k=[];AE(r,s,c,p,.5,L),AE(i,u,h,f,.5,k),t(L[0],k[0],L[1],k[1],L[2],k[2],L[3],k[3],v,y),t(L[4],k[4],L[5],k[5],L[6],k[6],L[7],k[7],v,y)}(p,f,y,x,_,b,w,S,h,r),p=w,f=S}s.push(h)}return s}(t.getUpdatedPathProxy(),h),function(t){return function(t){for(var r=[],i=0;i<t.length;)r.push([t[i++],t[i++]]);return r}(t)}),f=p.length;if(0===f)enN(enB,{points:p[0]},r,s);else if(f===r)for(var v=0;v<f;v++)s.push({points:p[v]});else{var y=0,x=Sf(p,function(t){var r=[],i=[];EK(t,r,i);var s=(i[1]-r[1])*(i[0]-r[0]);return y+=s,{poly:t,area:s}});x.sort(function(t,r){return r.area-t.area});for(var _=r,v=0;v<f;v++){var b=x[v];if(_<=0)break;var w=v===f-1?_:Math.ceil(b.area/y*r);if(!(w<0))enN(enB,{points:b.poly},w,s),_-=w}}i=Ol}if(!i)return function(t,r){for(var i=[],s=0;s<r;s++)i.push(kj(t));return i}(t,r);for(var S=[],v=0;v<s.length;v++){var M,A,C=new i;C.setShape(s[v]),M=t,(A=C).setStyle(M.style),A.z=M.z,A.z2=M.z2,A.zlevel=M.zlevel,S.push(C)}return S}(t.path,t.count)}function enJ(){return{fromIndividuals:[],toIndividuals:[],count:0}}function enZ(t){return Sb(t[0])}function enK(t,r){for(var i=[],s=t.length,u=0;u<s;u++)i.push({one:t[u],many:[]});for(var u=0;u<r.length;u++){var c=r[u].length,h=void 0;for(h=0;h<c;h++)i[h%s].many.push(r[u][h])}for(var p=0,u=s-1;u>=0;u--)if(!i[u].many.length){var f=i[p].many;if(f.length<=1){if(!p)return i;p=0}var c=f.length,v=Math.ceil(c/2);i[u].many=f.slice(v,c),i[p].many=f.slice(0,v),p++}return i}var enq={clone:function(t){for(var r=[],i=1-Math.pow(1-t.path.style.opacity,1/t.count),s=0;s<t.count;s++){var u=kj(t.path);u.setStyle("opacity",i),r.push(u)}return r},split:null};function enQ(t,r,i,s,u,c){if(!t.length||!r.length)return;var h,p,f=DG("update",s,u);if(!!(f&&f.duration>0)){var v=s.getModel("universalTransition").get("delay"),y=Object.assign({setToFinal:!0},f);if(Sb(t[0]))h=t,p=r;if(Sb(r[0]))h=r,p=t;for(var x=h?h===t:t.length>r.length,_=h?enK(p,h):enK(x?r:t,[x?t:r]),b=0,w=0;w<_.length;w++)b+=_[w].many.length;for(var S=0,w=0;w<_.length;w++)!function t(r,s,u,h,p){var f=r.many,x=r.one;if(1!==f.length||p){for(var _=Ss({dividePath:enq[i],individualDelay:v&&function(t,r,i,s){return v(t+u,h)}},y),b=s?function(t,r,i){var s=[];!function t(r){for(var i=0;i<r.length;i++){var u=r[i];enU(u)?t(u.childrenRef()):u instanceof IM&&s.push(u)}}(t);var u=s.length;if(!u)return enJ();var c=(i.dividePath||en$)({path:r,count:u});if(c.length!==u)return enJ();s=enY(s),c=enY(c);for(var h=i.done,p=i.during,f=i.individualDelay,v=new C3,y=0;y<u;y++){var x=s[y],_=c[y];_.parent=r,_.copyTransform(v),!f&&enj(x,_)}function b(t){for(var r=0;r<c.length;r++)c[r].addSelfToZr(t)}function w(){r.__isCombineMorphing=!1,r.__morphT=-1,r.childrenRef=null,enV(r,"addSelfToZr"),enV(r,"removeSelfFromZr")}r.__isCombineMorphing=!0,r.childrenRef=function(){return c},enG(r,"addSelfToZr",{after:function(t){b(t)}}),enG(r,"removeSelfFromZr",{after:function(t){for(var r=0;r<c.length;r++)c[r].removeSelfFromZr(t)}});var S=c.length;if(f){for(var M=S,A=function(){0==--M&&(w(),h&&h())},y=0;y<S;y++){var C=f?Ss({delay:(i.delay||0)+f(y,S,s[y],c[y]),done:A},i):i;enX(s[y],c[y],C)}}else r.__morphT=0,r.animateTo({__morphT:1},Ss({during:function(t){for(var i=0;i<S;i++){var s=c[i];s.__morphT=r.__morphT,s.dirtyShape()}p&&p(t)},done:function(){w();for(var r=0;r<t.length;r++)enV(t[r],"updateTransform");h&&h()}},i));return r.__zr&&b(r.__zr),{fromIndividuals:s,toIndividuals:c,count:S}}(f,x,_):function(t,r,i){var s=r.length,u=[],c=i.dividePath||en$;if(enU(t)){!function t(r){for(var i=0;i<r.length;i++){var s=r[i];enU(s)?t(s.childrenRef()):s instanceof IM&&u.push(s)}}(t.childrenRef());var h=u.length;if(h<s){for(var p=0,f=h;f<s;f++)u.push(kj(u[p++%h]))}u.length=s}else{u=c({path:t,count:s});for(var v=t.getComputedTransform(),f=0;f<u.length;f++)u[f].setLocalTransform(v);if(u.length!==s)return enJ()}u=enY(u),r=enY(r);for(var y=i.individualDelay,f=0;f<s;f++){var x=y?Ss({delay:(i.delay||0)+y(f,s,u[f],r[f])},i):i;enX(u[f],r[f],x)}return{fromIndividuals:u,toIndividuals:r,count:r.length}}(x,f,_),w=b.fromIndividuals,S=b.toIndividuals,M=w.length,A=0;A<M;A++){var C=v?Ss({delay:v(A,M)},y):y;c(w[A],S[A],s?f[A]:r.one,s?r.one:f[A],C)}}else{var T=s?f[0]:x,I=s?x:f[0];if(enU(T))t({many:[T],one:I},!0,u,h,!0);else{var C=v?Ss({delay:v(u,h)},y):y;enX(T,I,C),c(T,I,T,I,C)}}}(_[w],x,S,b),S+=_[w].many.length}}function en0(t){if(!t)return[];if(Sb(t)){for(var r=[],i=0;i<t.length;i++)r.push(en0(t[i]));return r}var s=[];return t.traverse(function(t){t instanceof IM&&!t.disableMorphing&&!t.invisible&&!t.ignore&&s.push(t)}),s}var en1=T7();function en2(t,r,i,s){var u=function(t,r){for(var i=t.dimensions,s=0;s<i.length;s++){var u=t.getDimensionInfo(i[s]);if(u&&0===u.otherDims[r])return i[s]}}(t,s?"itemChildGroupId":"itemGroupId");if(u)return function(t,r,i){var s=t.getDimensionInfo(i),u=s&&s.ordinalMeta;if(s){var c=t.get(s.name,r);return u&&u.categories[c]||c+""}}(t,r,u);var c=t.getRawDataItem(r),h=s?"childGroupId":"groupId";if(c&&c[h])return c[h]+"";if(!s)return i||t.getId(r)}function en3(t){var r=[];return Sp(t,function(t){var i=t.data,s=t.dataGroupId;if(!(i.count()>1e4))for(var u=i.getIndices(),c=0;c<u.length;c++)r.push({data:i,groupId:en2(i,c,s,!1),childGroupId:en2(i,c,s,!0),divide:t.divide,dataIndex:c})}),r}function en5(t,r,i){t.traverse(function(t){t instanceof IM&&Dj(t,{style:{opacity:0}},r,{dataIndex:i,isFrom:!0})})}function en4(t){if(t.parent){var r=t.getComputedTransform();t.setLocalTransform(r),t.parent.remove(t)}}function en6(t){t.stopAnimation(),t.isGroup&&t.traverse(function(t){t.stopAnimation()})}function en9(t,r,i){var s=en3(t),u=en3(r);function c(t,r,i,s,u){(i||t)&&r.animateFrom({style:i&&i!==t?So(So({},i.style),t.style):t.style},u)}var h=!1,p=0,f=SY(),v=SY();s.forEach(function(t){t.groupId&&f.set(t.groupId,!0),t.childGroupId&&v.set(t.childGroupId,!0)});for(var y=0;y<u.length;y++){var x=u[y].groupId;if(v.get(x)){p=1;break}var _=u[y].childGroupId;if(_&&f.get(_)){p=2;break}}function b(t,r){return function(i){var s=i.data,u=i.dataIndex;return r?s.getId(u):t?1===p?i.childGroupId:i.groupId:2===p?i.childGroupId:i.groupId}}var w=function(t,r){var i=t.length;if(i!==r.length)return!1;for(var s=0;s<i;s++){var u=t[s],c=r[s];if(u.data.getId(u.dataIndex)!==c.data.getId(c.dataIndex))return!1}return!0}(s,u),S={};if(!w)for(var y=0;y<u.length;y++){var M=u[y],A=M.data.getItemGraphicEl(M.dataIndex);A&&(S[A.id]=!0)}function C(t,r){var i,p,f,v=s[r],y=u[t],x=y.data.hostModel,_=v.data.getItemGraphicEl(v.dataIndex),b=y.data.getItemGraphicEl(y.dataIndex);if(_===b){;b&&(i=b,p=y.dataIndex,(f=DG("update",x,p))&&i.traverse(function(t){if(t instanceof EU){var r=DH(t).oldStyle;r&&t.animateFrom({style:r},f)}}));return}if(!_||!S[_.id])b&&(en6(b),_?(en6(_),en4(_),h=!0,enQ(en0(_),en0(b),y.divide,x,t,c)):en5(b,x,t))}new FC(s,u,b(!0,w),b(!1,w),null,"multiple").update(C).updateManyToOne(function(t,r){var i=u[t],p=i.data,f=p.hostModel,v=p.getItemGraphicEl(i.dataIndex),y=Sm(Sf(r,function(t){return s[t].data.getItemGraphicEl(s[t].dataIndex)}),function(t){return t&&t!==v&&!S[t.id]});v&&(en6(v),y.length?(Sp(y,function(t){en6(t),en4(t)}),h=!0,enQ(en0(y),en0(v),i.divide,f,t,c)):en5(v,f,i.dataIndex))}).updateOneToMany(function(t,r){var i=s[r],p=i.data.getItemGraphicEl(i.dataIndex);if(!p||!S[p.id]){var f=Sm(Sf(t,function(t){return u[t].data.getItemGraphicEl(u[t].dataIndex)}),function(t){return t&&t!==p}),v=u[t[0]].data.hostModel;f.length&&(Sp(f,function(t){return en6(t)}),p?(en6(p),en4(p),h=!0,enQ(en0(p),en0(f),i.divide,v,t[0],c)):Sp(f,function(r){return en5(r,v,t[0])}))}}).updateManyToMany(function(t,r){new FC(r,t,function(t){return s[t].data.getId(s[t].dataIndex)},function(t){return u[t].data.getId(u[t].dataIndex)}).update(function(i,s){C(t[i],r[s])}).execute()}).execute(),h&&Sp(r,function(t){var r=t.data.hostModel,s=r&&i.getViewOfSeriesModel(r),u=DG("update",r,0);s&&r.isAnimationEnabled()&&u&&u.duration>0&&s.group.traverse(function(t){t instanceof IM&&!t.animators.length&&t.animateFrom({style:{opacity:0}},u)})})}function en8(t){var r=t.getModel("universalTransition").get("seriesKey");return r?r:t.id}function en7(t){return Sb(t)?t.sort().join(","):t}function ere(t){if(t.hostModel)return t.hostModel.getModel("universalTransition").get("divideShape")}function ert(t,r){for(var i=0;i<t.length;i++)if(null!=r.seriesIndex&&r.seriesIndex===t[i].seriesIndex||null!=r.seriesId&&r.seriesId===t[i].id)return i}FS([function(t){t.registerPainter("canvas",U$)}]),FS([function(t){t.registerPainter("svg",HV)}]),FS([function(t){t.registerChartView(Gd),t.registerSeriesModel(Hj),t.registerLayout(Gp("line",!0)),t.registerVisual({seriesType:"line",reset:function(t){var r=t.getData(),i=t.getModel("lineStyle").getLineStyle();i&&!i.stroke&&(i.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",i)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,Gm("line"))},function(t){t.registerChartView(GC),t.registerSeriesModel(Gy),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,S_(zd,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,zp("bar")),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,Gm("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,r){var i=t.componentType||"series";r.eachComponent({mainType:i,query:t},function(r){t.sortInfo&&r.axis.setCategorySortInfo(t.sortInfo)})})},function(t){t.registerChartView(G0),t.registerSeriesModel(G5),B$("pie",t.registerAction),t.registerLayout(S_(GX,"pie")),t.registerProcessor(G$("pie")),t.registerProcessor({seriesType:"pie",reset:function(t,r){var i=t.getData();i.filterSelf(function(t){var r=i.mapDimension("value"),s=i.get(r,t);return(!SA(s)||!!isNaN(s)||!(s<0))&&!0})}})},function(t){FS(VJ),t.registerSeriesModel(G4),t.registerChartView(G7),t.registerLayout(Gp("scatter"))},function(t){FS(V7),t.registerChartView(V0),t.registerSeriesModel(V1),t.registerLayout(VZ),t.registerProcessor(G$("radar")),t.registerPreprocessor(VQ)},function(t){FS(jd),t.registerChartView(W5),t.registerSeriesModel(W4),t.registerLayout(W9),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,W6),B$("map",t.registerAction)},function(t){var r;t.registerChartView(jw),t.registerSeriesModel(jW),t.registerLayout(jX),t.registerVisual(jY),(r=t).registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"tree",query:t},function(r){var i=t.dataIndex,s=r.getData().tree.getNodeByDataIndex(i);s.isExpand=!s.isExpand})}),r.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,r,i){r.eachComponent({mainType:"series",subType:"tree",query:t},function(r){var s=ju(r.coordinateSystem,t,void 0,i);r.setCenter&&r.setCenter(s.center),r.setZoom&&r.setZoom(s.zoom)})})},function(t){t.registerSeriesModel(jZ),t.registerChartView(j9),t.registerVisual(Xp),t.registerLayout(XA),!function(t){for(var r=0;r<j$.length;r++)t.registerAction({type:j$[r],update:"updateView"},Sq);t.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,r){r.eachComponent({mainType:"series",subType:"treemap",query:t},function(r,i){var s=jU(t,["treemapZoomToNode","treemapRootToNode"],r);if(s){var u=r.getViewRoot();u&&(t.direction=jG(u,s.node)?"rollUp":"drillDown"),r.resetViewRoot(s.node)}})})}(t)},function(t){t.registerChartView(Yh),t.registerSeriesModel(Yy),t.registerProcessor(XE),t.registerVisual(XI),t.registerVisual(XP),t.registerLayout(XH),t.registerLayout(t.PRIORITY.VISUAL.POST_CHART_LAYOUT,XJ),t.registerLayout(XK),t.registerCoordinateSystem("graphView",{dimensions:W7.dimensions,create:Xq}),t.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},Sq),t.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},Sq),t.registerAction(Yx,function(t,r,i){r.eachComponent({mainType:"series",query:t},function(r){var s=ju(r.coordinateSystem,t,void 0,i);r.setCenter&&r.setCenter(s.center),r.setZoom&&r.setZoom(s.zoom)})})},function(t){t.registerChartView(YS),t.registerSeriesModel(YM)},function(t){t.registerChartView(YT),t.registerSeriesModel(YE),t.registerLayout(YI),t.registerProcessor(G$("funnel"))},function(t){FS($G),t.registerChartView(YD),t.registerSeriesModel(YO),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,YF)},function(t){t.registerChartView($j),t.registerSeriesModel($Y),t.registerLayout($$),t.registerVisual($5),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"sankey",query:t},function(r){r.setNodePosition(t.dataIndex,[t.localX,t.localY])})})},function(t){t.registerSeriesModel($6),t.registerChartView($9),t.registerLayout(Jr),t.registerTransform(Ji)},function(t){t.registerChartView(Jo),t.registerSeriesModel(Jm),t.registerPreprocessor(Jv),t.registerVisual(JS),t.registerLayout(JM)},function(t){t.registerChartView(JE),t.registerSeriesModel(JI),t.registerLayout(Gp("effectScatter"))},function(t){t.registerChartView(JN),t.registerSeriesModel(JH),t.registerLayout(JB),t.registerVisual(JV)},function(t){t.registerChartView(JX),t.registerSeriesModel(JY)},function(t){t.registerChartView(JK),t.registerSeriesModel(Za),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,S_(zd,"pictorialBar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,zp("pictorialBar"))},function(t){t.registerChartView(Zo),t.registerSeriesModel(Zs),t.registerLayout(Zl),t.registerProcessor(G$("themeRiver"))},function(t){var r;t.registerChartView(Zp),t.registerSeriesModel(Zf),t.registerLayout(S_(Zm,"sunburst")),t.registerProcessor(S_(G$,"sunburst")),t.registerVisual(Zv),(r=t).registerAction({type:Zh,update:"updateView"},function(t,r){r.eachComponent({mainType:"series",subType:"sunburst",query:t},function(r,i){var s=jU(t,[Zh],r);if(s){var u=r.getViewRoot();u&&(t.direction=jG(u,s.node)?"rollUp":"drillDown"),r.resetViewRoot(s.node)}})}),r.registerAction({type:Zd,update:"none"},function(t,r,i){t=So({},t),r.eachComponent({mainType:"series",subType:"sunburst",query:t},function(r){var i=jU(t,[Zd],r);i&&(t.dataIndex=i.node.dataIndex)});i.dispatchAction(So(t,{type:"highlight"}))}),r.registerAction({type:"sunburstUnhighlight",update:"updateView"},function(t,r,i){t=So({},t);i.dispatchAction(So(t,{type:"downplay"}))})},function(t){t.registerChartView(Z9),t.registerSeriesModel(Zb)}]),FS(function(t){FS(VJ),FS(KX)}),FS(function(t){FS(KX),VN.registerAxisPointerClass("PolarAxisPointer",KY),t.registerCoordinateSystem("polar",K9),t.registerComponentModel(KJ),t.registerComponentView(qp),Vu(t,"angle",KK,qh),Vu(t,"radius",Kq,qd),t.registerComponentView(qn),t.registerComponentView(qo),t.registerLayout(S_(qc,"bar"))}),FS(jd),FS(function(t){FS(KX),VN.registerAxisPointerClass("SingleAxisPointer",qT),t.registerComponentView(qP),t.registerComponentView(qv),t.registerComponentModel(qx),Vu(t,"single",qx,qx.defaultOption),t.registerCoordinateSystem("single",qM)}),FS($G),FS(function(t){t.registerComponentModel(qR),t.registerComponentView(qk),t.registerCoordinateSystem("calendar",qO)}),FS(function(t){t.registerComponentModel(qH),t.registerComponentView(qW),t.registerPreprocessor(function(t){var r=t.graphic;Sb(r)?r[0]&&r[0].elements?t.graphic=[t.graphic[0]]:t.graphic=[{elements:r}]:r&&!r.elements&&(t.graphic=[{elements:[r]}])})}),FS(function(t){var r,i,s,u,c;t.registerComponentModel(Qo),t.registerComponentView(Ql),r=Qu,Qr.saveAsImage=r,i=Qd,Qr.magicType=i,s=Qv,Qr.dataView=s,u=QB,Qr.dataZoom=u,c=Qb,Qr.restore=c,FS(Qt)}),FS(function(t){FS(KX),t.registerComponentModel(Qz),t.registerComponentView(Q2),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Sq),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Sq)}),FS(KX),FS(function(t){var r;t.registerComponentView(eef),t.registerComponentModel(eeg),t.registerPreprocessor(Q9),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,eeu),t.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,r){r.eachComponent({mainType:"brush",query:t},function(r){r.setAreas(t.areas)})}),t.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},Sq),t.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},Sq),r=eey,Qr.brush=r}),FS(function(t){t.registerComponentModel(eex),t.registerComponentView(ee_)}),FS(function(t){var r;t.registerComponentModel(eew),t.registerComponentView(eeT),t.registerSubTypeDefaulter("timeline",function(){return"slider"}),(r=t).registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,r,i){var s=r.getComponent("timeline");return s&&null!=t.currentIndex&&(s.setCurrentIndex(t.currentIndex),!s.get("loop",!0)&&s.isIndexMax()&&s.getPlayState()&&(s.setPlayState(!1),i.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),r.resetOption("timeline",{replaceMerge:s.get("replaceMerge",!0)}),Ss({currentIndex:s.option.currentIndex},t)}),r.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,r){var i=r.getComponent("timeline");i&&null!=t.playState&&i.setPlayState(t.playState)}),t.registerPreprocessor(eeD)}),FS(function(t){t.registerComponentModel(eeN),t.registerComponentView(eeJ),t.registerPreprocessor(function(t){eeL(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}),FS(function(t){t.registerComponentModel(eeZ),t.registerComponentView(ee3),t.registerPreprocessor(function(t){eeL(t.series,"markLine")&&(t.markLine=t.markLine||{})})}),FS(function(t){t.registerComponentModel(ee5),t.registerComponentView(etn),t.registerPreprocessor(function(t){eeL(t.series,"markArea")&&(t.markArea=t.markArea||{})})}),FS(function(t){FS(etp),FS(etx)}),FS(function(t){FS(etI),FS(etN)}),FS(etI),FS(etN),FS(function(t){FS(enr),FS(enl)}),FS(enr),FS(enl),FS(function(t){t.registerPreprocessor(enp),t.registerVisual(t.PRIORITY.VISUAL.ARIA,end)}),FS(function(t){t.registerTransform(enA),t.registerTransform(enC)}),FS(function(t){t.registerComponentModel(enT),t.registerComponentView(enE)}),FS(function(t){t.registerUpdateLifecycle("series:beforeupdate",function(t,r,i){Sp(Tq(i.seriesTransition),function(t){Sp(Tq(t.to),function(t){for(var r=i.updatedSeries,s=0;s<r.length;s++)(null!=t.seriesIndex&&t.seriesIndex===r[s].seriesIndex||null!=t.seriesId&&t.seriesId===r[s].id)&&(r[s][kp]=!0)})})}),t.registerUpdateLifecycle("series:transition",function(t,r,i){var s=en1(r);if(s.oldSeries&&i.updatedSeries&&i.optionChanged){var u=i.seriesTransition;if(u)Sp(Tq(u),function(t){var u,c,h,p,f,v;u=t,c=s,h=i,p=r,f=[],v=[],Sp(Tq(u.from),function(t){var r=ert(c.oldSeries,t);r>=0&&f.push({dataGroupId:c.oldDataGroupIds[r],data:c.oldData[r],divide:ere(c.oldData[r]),groupIdDim:t.dimension})}),Sp(Tq(u.to),function(t){var r=ert(h.updatedSeries,t);if(r>=0){var i=h.updatedSeries[r].getData();v.push({dataGroupId:c.oldDataGroupIds[r],data:i,divide:ere(i),groupIdDim:t.dimension})}}),f.length>0&&v.length>0&&en9(f,v,p)});else{var c,h,p,f,v,y=(c=s,h=i,p=SY(),f=SY(),v=SY(),Sp(c.oldSeries,function(t,r){var i=c.oldDataGroupIds[r],s=c.oldData[r],u=en8(t),h=en7(u);f.set(h,{dataGroupId:i,data:s}),Sb(u)&&Sp(u,function(t){v.set(t,{key:h,dataGroupId:i,data:s})})}),Sp(h.updatedSeries,function(t){if(t.isUniversalTransitionEnabled()&&t.isAnimationEnabled()){var r=t.get("dataGroupId"),i=t.getData(),s=en8(t),u=en7(s),c=f.get(u);if(c)p.set(u,{oldSeries:[{dataGroupId:c.dataGroupId,divide:ere(c.data),data:c.data}],newSeries:[{dataGroupId:r,divide:ere(i),data:i}]});else if(Sb(s)){var h=[];Sp(s,function(t){var r=f.get(t);r.data&&h.push({dataGroupId:r.dataGroupId,divide:ere(r.data),data:r.data})}),h.length&&p.set(u,{oldSeries:h,newSeries:[{dataGroupId:r,data:i,divide:ere(i)}]})}else{var y=v.get(s);if(y){var x=p.get(y.key);!x&&(x={oldSeries:[{dataGroupId:y.dataGroupId,data:y.data,divide:ere(y.data)}],newSeries:[]},p.set(y.key,x)),x.newSeries.push({dataGroupId:r,data:i,divide:ere(i)})}}}}),p);Sp(y.keys(),function(t){var i=y.get(t);en9(i.oldSeries,i.newSeries,r)})}Sp(i.updatedSeries,function(t){t[kp]&&(t[kp]=!1)})}for(var x=t.getSeries(),_=s.oldSeries=[],b=s.oldDataGroupIds=[],w=s.oldData=[],S=0;S<x.length;S++){var M=x[S].getData();1e4>M.count()&&(_.push(x[S]),b.push(x[S].get("dataGroupId")),w.push(M))}})}),FS(Uj);var ern=i("8611");function err(t,r){var i={};return r.forEach(function(r){i[r]=t[r]}),i}function eri(t){return"function"==typeof t}var era=i("3341"),ero=i.n(era),ers=function(t){function r(r){var i=t.call(this,r)||this;return i.echarts=r.echarts,i.ele=null,i.isInitialResize=!0,i}return wD(r,t),r.prototype.componentDidMount=function(){this.renderNewEcharts()},r.prototype.componentDidUpdate=function(t){var r=this.props.shouldSetOption;if(!eri(r)||!!r(t,this.props)){if(!ero()(t.theme,this.props.theme)||!ero()(t.opts,this.props.opts)||!ero()(t.onEvents,this.props.onEvents)){this.dispose(),this.renderNewEcharts();return}var i=["option","notMerge","lazyUpdate","showLoading","loadingOption"];!ero()(err(this.props,i),err(t,i))&&this.updateEChartsOption(),(!ero()(t.style,this.props.style)||!ero()(t.className,this.props.className))&&this.resize()}},r.prototype.componentWillUnmount=function(){this.dispose()},r.prototype.getEchartsInstance=function(){return this.echarts.getInstanceByDom(this.ele)||this.echarts.init(this.ele,this.props.theme,this.props.opts)},r.prototype.dispose=function(){if(this.ele){try{(0,ern.clear)(this.ele)}catch(t){}this.echarts.dispose(this.ele)}},r.prototype.renderNewEcharts=function(){var t=this,r=this.props,i=r.onEvents,s=r.onChartReady,u=this.updateEChartsOption();this.bindEvents(u,i||{}),eri(s)&&s(u),this.ele&&(0,ern.bind)(this.ele,function(){t.resize()})},r.prototype.bindEvents=function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&!function(r,i){if("string"==typeof r&&eri(i))t.on(r,function(r){i(r,t)})}(i,r[i])},r.prototype.updateEChartsOption=function(){var t=this.props,r=t.option,i=t.notMerge,s=t.lazyUpdate,u=t.showLoading,c=t.loadingOption,h=this.getEchartsInstance();return h.setOption(r,void 0!==i&&i,void 0!==s&&s),u?h.showLoading(void 0===c?null:c):h.hideLoading(),h},r.prototype.resize=function(){var t=this.getEchartsInstance();if(!this.isInitialResize)try{t.resize()}catch(t){}this.isInitialResize=!1},r.prototype.render=function(){var t=this,r=this.props,i=r.style,s=r.className,u=wP({height:300},i);return pI.createElement("div",{ref:function(r){t.ele=r},style:u,className:"echarts-for-react "+(void 0===s?"":s)})},r}(pI.PureComponent),erl=function(t){function r(r){var i=t.call(this,r)||this;return i.echarts=el,i}return wD(r,t),r}(ers);let eru=t=>{let{tankId:r}=t,i=(0,pI.useRef)(null),[s,u]=(0,pI.useState)(),[c,h]=(0,pI.useState)(),[p,f]=(0,pI.useState)([]),[v,y]=(0,pI.useState)([]),[x,_]=(0,pI.useState)(),b=(0,pI.useCallback)(async t=>{let r=await we(t);if(!r){u(null),y([]);return}let i=Array.from({length:r.maxCycle},(t,r)=>{let i=String(r+1);return{name:`cycle${i}`,value:i}});u(r),y(i)},[]),w=(0,pI.useCallback)(async function(t,r){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;h(wE(wT(t,await wt(r,s)))),setTimeout(()=>{var t;return null===(t=i.current)||void 0===t?void 0:t.getEchartsInstance().resize()},500)},[]),S=(0,pI.useCallback)(async(t,r)=>{f((await wn(t,r)).map(t=>({name:"Mortality"===t.typeCd?"":t.typeCd,started:t.startDate,updated:t.updtDate})))},[]),M=(0,pI.useCallback)(t=>_(t),[]);return(0,pI.useEffect)(()=>void b(r),[b,r]),(0,pI.useEffect)(()=>void(s&&s.enabled&&w(s,r,s.maxCycle??1)),[s,w,r]),(0,pI.useEffect)(()=>void(s&&s.enabled&&S(r,s.maxCycle??1)),[s,S,r]),(0,eu.jsxs)(eu.Fragment,{children:[(0,eu.jsxs)("div",{className:"flex justify-between px-4 pb-0 pt-4",children:[(0,eu.jsxs)("h3",{className:"text-xl font-semibold text-slate-900",children:[null==s?void 0:s.farmNm," ",r]}),(0,eu.jsx)(ww,{options:v,value:x,onChange:M})]}),c&&(0,eu.jsx)(erl,{className:"!h-[600px] w-full px-3",ref:i,option:c,notMerge:!0}),(0,eu.jsxs)("div",{className:"flex flex-wrap p-8",children:[(0,eu.jsxs)("div",{className:"w-1/2 flex-0",children:[(0,eu.jsx)("b",{className:"text-sm",children:""}),(0,eu.jsx)("div",{className:"flex flex-col gap-4 pt-4 text-xs",children:p.map(t=>(0,eu.jsxs)("span",{children:[t.name,": ",t.started]},t.name))})]}),(0,eu.jsxs)("div",{className:"w-1/2 flex-0 text-right",children:[(0,eu.jsx)("b",{className:"text-sm",children:" "}),(0,eu.jsx)("div",{className:"flex flex-col gap-4 pt-4 text-xs",children:p.map(t=>(0,eu.jsxs)("span",{children:[t.name,": ",t.updated]},t.name))})]})]})]})},erc=async t=>{try{let r=new URL("http://172.30.1.1:59095/growth");r.search=new URLSearchParams({tankId:t,year:"2024",month:"7"}).toString();let i=await fetch(r.toString());return await i.json()}catch(t){return[]}},erh=t=>{let r=[],i=[],s=[];t.forEach(t=>{i.push(t.widthInCm),s.push(t.weightInKg),r.push([t.widthInCm,t.weightInKg])});let u=Math.min(...i),c=Math.max(...i),h=(c-u)*.1,p=Math.min(...s),f=Math.max(...s),v=(f-p)*.1;return{xAxis:{type:"value",name:"",min:u-h,max:c+h,nameTextStyle:{fontSize:16,fontWeight:"bold"}},yAxis:{type:"value",name:"",min:p-v,max:f+v,nameTextStyle:{fontSize:16,fontWeight:"bold"}},series:[{type:"scatter",data:r,symbolSize:20}],tooltip:{trigger:"item",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},formatter:function(r){let i=t[r.dataIndex];return`: ${i.collectDate}<br>: ${i.weightInKg}<br>: ${i.lengthInCm}<br>: ${i.widthInCm}<br>: ${i.intankDate}`}},dataZoom:[{type:"inside",xAxisIndex:0,filterMode:"none"},{type:"inside",yAxisIndex:0,filterMode:"none"}]}},erd=t=>{let{tankId:r}=t,i=(0,pI.useRef)(null),[s,u]=(0,pI.useState)(),c=(0,pI.useCallback)(async t=>{u(erh(await erc(t)))},[]);return(0,pI.useEffect)(()=>void c(r),[c,r]),(0,eu.jsxs)(eu.Fragment,{children:[(0,eu.jsx)("div",{className:"flex justify-between px-4 pb-0 pt-4",children:(0,eu.jsx)("h3",{className:"text-xl font-semibold text-slate-900",children:" "})}),s&&(0,eu.jsx)(erl,{className:"!h-[600px] w-full px-3",ref:i,option:s,notMerge:!0})]})},erp=xg()(xx(t=>({mode:"default",setMode:r=>{t(()=>({mode:r}))}}))),erf=async t=>{try{let r=new URL("http://172.30.1.1:59095/samples");r.search=new URLSearchParams({tankId:t}).toString();let i=await fetch(r.toString());return await i.json()}catch(t){return[]}};i("2611"),i("4992"),i("5660"),i("1022"),i("3733"),i("9567"),i("8057"),i("3128"),i("874"),i("2256"),i("443"),i("701"),i("5242"),i("646"),i("1309"),i("4887"),i("9818"),i("9964"),i("3231"),i("4646"),i("2479"),i("7295"),i("1985"),i("3243"),i("4958"),i("8725");var erg=i("6483"),erm=i.n(erg);let erv=t=>t.map(t=>{let r={};return Object.values(JSON.parse(t.jsonValues)).forEach(t=>{let[[i,s]]=Object.entries(t);r[i]=parseInt(s)}),{data:r,id:t.id,sensorAreaName:t.sensorAreaName,sigunguCd:t.sigunguCd,sigunguNm:t.sigunguNm,farmCd:t.farmCd,farmNm:t.farmNm,tankCd:t.tankCd,tankNm:t.tankNm,dataGubun:t.dataGubun,guardAt:t.guardAt,regDt:t.regDt,collectDate:new Date(t.collectDate)}}).sort((t,r)=>t.collectDate.getTime()-r.collectDate.getTime()),ery=function(t){var r;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{xAxisName:"()",smooth:!0};let s=Array.isArray(r=t)&&0!==r.length?Object.entries(r.reduce((t,r)=>{if(!r.collectDate)return t;let i=erm()(r.collectDate).format("YYYY-MM-DD HH:mm");return!t[i]&&(t[i]=[]),t[i].push(r),t},{})).map(t=>{let[r,i]=t,s={...i[0]};return s.data=i.reduce((t,r)=>({...t,...r.data}),{}),s.collectDate=erm()(r).toDate(),s}):[],u=s.map(t=>t.data),c=Array.from(new Set(u.reduce((t,r)=>[...t,...Object.keys(r)],[]))),h=Array.from({length:u.length},(t,r)=>s[r].collectDate.getMinutes()),p=c.map(t=>({name:t,type:"line",stack:"total",smooth:i.smooth??!1,areaStyle:i.area?{}:void 0,emphasis:{focus:"series"},data:u.map(r=>r[t]||0)}));return{title:i.title?{text:i.title,subtext:i.subtitle,left:"center"}:void 0,tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter:function(t){let r=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm";return erm()(t).format(r)}(s[t[0].dataIndex].collectDate);return t.forEach(t=>{r+=`<div style="margin: 0px 0 0;line-height:1;">
${t.marker}
<span style="font-size:14px;color:#666;font-weight:400;margin-left:2px">${t.seriesName}</span>
<span style="float:right;margin-left:20px;font-size:14px;color:#666;font-weight:900">${t.data}</span>
<div style="clear:both"></div>
</div>`}),r}},legend:{data:c,bottom:"0%"},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:h,name:i.xAxisName,nameLocation:"middle",nameGap:30,nameTextStyle:{fontSize:16,fontWeight:"bold"}},yAxis:{type:"value",name:i.yAxisName,nameLocation:"middle",nameGap:50},series:p}},erx=t=>{let{tankId:r}=t,i=(0,pI.useRef)(null),[s,u]=(0,pI.useState)(),c=(0,pI.useCallback)(async t=>{u(ery(erv(await erf(t)))),setTimeout(()=>{var t;return null===(t=i.current)||void 0===t?void 0:t.getEchartsInstance().resize()},500)},[]);return(0,pI.useEffect)(()=>void c(r),[c,r]),(0,eu.jsxs)(eu.Fragment,{children:[(0,eu.jsx)("div",{className:"flex justify-between px-4 pb-0 pt-4",children:(0,eu.jsx)("h3",{className:"text-xl font-semibold text-slate-900",children:" "})}),s&&(0,eu.jsx)(erl,{className:"!h-[600px] w-full px-3",ref:i,option:s,notMerge:!0})]})},er_="65AF1-RT",erb=t=>{let{tankId:r}=t,i=erp(t=>t.mode);if(r)return r.startsWith(er_)?"default"===i?(0,eu.jsx)(eru,{tankId:r}):(0,eu.jsx)(erd,{tankId:r}):r.startsWith("TMP-")?null:(0,eu.jsx)(erx,{tankId:r})},erw=t=>{let{tankId:r}=t,{mode:i,setMode:s}=erp();if(r){if(r.startsWith(er_)){let t="default"===i;return(0,eu.jsx)(bJ,{className:"h-10 justify-center p-1",onPointerDown:()=>s(t?"complex":"default"),children:(0,eu.jsx)("span",{className:"px-2",children:t?" ":" "})})}return null}},erS=t=>{let{data:r}=t,i=(0,pI.useCallback)(t=>t?(0,eu.jsxs)("div",{className:"grid pb-2 pl-1 pt-0.5",children:[(0,eu.jsx)("span",{children:t.title}),(0,eu.jsx)("span",{className:"text-xs font-medium text-slate-400",children:t.tankId})]}):"",[]),s=(0,pI.useCallback)(t=>(0,eu.jsx)(erb,{tankId:null==t?void 0:t.tankId}),[]),u=(0,pI.useCallback)(t=>(0,eu.jsx)(erw,{tankId:null==t?void 0:t.tankId}),[]);return(0,eu.jsxs)(eu.Fragment,{children:[(0,eu.jsx)("ambientLight",{intensity:1.3,color:"#e2e8f0"}),(0,eu.jsx)(xP,{data:r}),(0,eu.jsx)(b8,{renderTitle:i,renderContent:s,extraButtons:u})]})};function erM(){let t=function(){let t="undefined"==typeof document;return"useSyncExternalStore"in pD&&(0,pD.useSyncExternalStore)(()=>()=>{},()=>!1,()=>!t)}(),[r,i]=pI.useState(bC.isHandoffComplete);return r&&!1===bC.isHandoffComplete&&i(!1),pI.useEffect(()=>{!0!==r&&i(!0)},[r]),pI.useEffect(()=>bC.handoff(),[]),!t&&r}"undefined"!=typeof process&&"undefined"!=typeof globalThis&&"undefined"!=typeof Element&&(null==(eod=null==process?void 0:process.env)?void 0:eod.NODE_ENV)==="test"&&void 0===(null==(eop=null==Element?void 0:Element.prototype)?void 0:eop.getAnimations)&&(Element.prototype.getAnimations=function(){return[]});var erA=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(erA||{});let erC=(0,pI.createContext)(null);erC.displayName="OpenClosedContext";var erT=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(erT||{});function erE(){return(0,pI.useContext)(erC)}function erI({value:t,children:r}){return pI.createElement(erC.Provider,{value:t},r)}function erD(t){var r;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||(null!=(r=t.as)?r:erB)!==pI.Fragment||1===pI.Children.count(t.children)}let erP=(0,pI.createContext)(null);erP.displayName="TransitionContext";var erR=(t=>(t.Visible="visible",t.Hidden="hidden",t))(erR||{});let erL=(0,pI.createContext)(null);function erk(t){return"children"in t?erk(t.children):t.current.filter(({el:t})=>null!==t.current).filter(({state:t})=>"visible"===t).length>0}function erO(t,r){let i;let s=bD(t),u=(0,pI.useRef)([]),c=(i=(0,pI.useRef)(!1),bI(()=>(i.current=!0,()=>{i.current=!1}),[]),i),h=bE(),p=bP((t,r=bz.Hidden)=>{let i=u.current.findIndex(({el:r})=>r===t);-1!==i&&(bN(r,{[bz.Unmount](){u.current.splice(i,1)},[bz.Hidden](){u.current[i].state="hidden"}}),h.microTask(()=>{var t;!erk(u)&&c.current&&(null==(t=s.current)||t.call(s))}))}),f=bP(t=>{let r=u.current.find(({el:r})=>r===t);return r?"visible"!==r.state&&(r.state="visible"):u.current.push({el:t,state:"visible"}),()=>p(t,bz.Unmount)}),v=(0,pI.useRef)([]),y=(0,pI.useRef)(Promise.resolve()),x=(0,pI.useRef)({enter:[],leave:[]}),_=bP((t,i,s)=>{v.current.splice(0),r&&(r.chains.current[i]=r.chains.current[i].filter(([r])=>r!==t)),null==r||r.chains.current[i].push([t,new Promise(t=>{v.current.push(t)})]),null==r||r.chains.current[i].push([t,new Promise(t=>{Promise.all(x.current[i].map(([t,r])=>r)).then(()=>t())})]),"enter"===i?y.current=y.current.then(()=>null==r?void 0:r.wait.current).then(()=>s(i)):s(i)}),b=bP((t,r,i)=>{Promise.all(x.current[r].splice(0).map(([t,r])=>r)).then(()=>{var t;null==(t=v.current.shift())||t()}).then(()=>i(r))});return(0,pI.useMemo)(()=>({children:u,register:f,unregister:p,onStart:_,onStop:b,wait:y,chains:x}),[f,p,u,_,b,x,y])}erL.displayName="NestingContext";let erB=pI.Fragment,erN=bF.RenderStrategy,erF=bj(function(t,r){let{show:i,appear:s=!1,unmount:u=!0,...c}=t,h=(0,pI.useRef)(null),p=wf(...erD(t)?[h,r]:null===r?[]:[r]);erM();let f=erE();if(void 0===i&&null!==f&&(i=(f&erT.Open)===erT.Open),void 0===i)throw Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[v,y]=(0,pI.useState)(i?"visible":"hidden"),x=erO(()=>{i||y("hidden")}),[_,b]=(0,pI.useState)(!0),w=(0,pI.useRef)([i]);bI(()=>{!1!==_&&w.current[w.current.length-1]!==i&&(w.current.push(i),b(!1))},[w,i]);let S=(0,pI.useMemo)(()=>({show:i,appear:s,initial:_}),[i,s,_]);bI(()=>{i?y("visible"):erk(x)||null===h.current||y("hidden")},[i,x]);let M={unmount:u},A=bP(()=>{var r;_&&b(!1),null==(r=t.beforeEnter)||r.call(t)}),C=bP(()=>{var r;_&&b(!1),null==(r=t.beforeLeave)||r.call(t)}),T=bU();return pI.createElement(erL.Provider,{value:x},pI.createElement(erP.Provider,{value:S},T({ourProps:{...M,as:pI.Fragment,children:pI.createElement(erz,{ref:p,...M,...c,beforeEnter:A,beforeLeave:C})},theirProps:{},defaultTag:pI.Fragment,features:erN,visible:"visible"===v,name:"Transition"})))}),erz=bj(function(t,r){var i,s;let{transition:u=!0,beforeEnter:c,afterEnter:h,beforeLeave:p,afterLeave:f,enter:v,enterFrom:y,enterTo:x,entered:_,leave:b,leaveFrom:w,leaveTo:S,...M}=t,[A,C]=(0,pI.useState)(null),T=(0,pI.useRef)(null),I=erD(t),D=wf(...I?[T,r,C]:null===r?[]:[r]),P=null==(i=M.unmount)||i?bz.Unmount:bz.Hidden,{show:R,appear:L,initial:k}=function(){let t=(0,pI.useContext)(erP);if(null===t)throw Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}(),[O,B]=(0,pI.useState)(R?"visible":"hidden"),N=function(){let t=(0,pI.useContext)(erL);if(null===t)throw Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}(),{register:F,unregister:z}=N;bI(()=>F(T),[F,T]),bI(()=>{if(P===bz.Hidden&&T.current){if(R&&"visible"!==O){B("visible");return}return bN(O,{hidden:()=>z(T),visible:()=>F(T)})}},[O,T,F,z,R,P]);let U=erM();bI(()=>{if(I&&U&&"visible"===O&&null===T.current)throw Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[T,O,U,I]);let H=k&&!L,G=L&&R&&k,V=(0,pI.useRef)(!1),W=erO(()=>{V.current||(B("hidden"),z(T))},N),j=bP(t=>{V.current=!0;W.onStart(T,t?"enter":"leave",t=>{"enter"===t?null==c||c():"leave"===t&&(null==p||p())})}),X=bP(t=>{let r=t?"enter":"leave";V.current=!1,W.onStop(T,r,t=>{"enter"===t?null==h||h():"leave"===t&&(null==f||f())}),"leave"!==r||erk(W)||(B("hidden"),z(T))});(0,pI.useEffect)(()=>{I&&u||(j(R),X(R))},[R,I,u]);let[,Y]=function(t,r,i,s){let[u,c]=(0,pI.useState)(i),{hasFlag:h,addFlag:p,removeFlag:f}=function(t=0){let[r,i]=(0,pI.useState)(t),s=(0,pI.useCallback)(t=>i(t),[r]),u=(0,pI.useCallback)(t=>i(r=>r|t),[r]),c=(0,pI.useCallback)(t=>(r&t)===t,[r]);return{flags:r,setFlag:s,addFlag:u,hasFlag:c,removeFlag:(0,pI.useCallback)(t=>i(r=>r&~t),[i]),toggleFlag:(0,pI.useCallback)(t=>i(r=>r^t),[i])}}(t&&u?3:0),v=(0,pI.useRef)(!1),y=(0,pI.useRef)(!1);return bI(()=>{var u;if(t){if(i&&c(!0),!r){i&&p(3);return}return null==(u=null==s?void 0:s.start)||u.call(s,i),function(t,{prepare:r,run:i,done:s,inFlight:u}){let c=bT();return function(t,{inFlight:r,prepare:i}){if(null!=r&&r.current){i();return}let s=t.style.transition;t.style.transition="none",i(),t.offsetHeight,t.style.transition=s}(t,{prepare:r,inFlight:u}),c.nextFrame(()=>{i(),c.requestAnimationFrame(()=>{c.add(function(t,r){var i,s;let u=bT();if(!t)return u.dispose;let c=!1;u.add(()=>{c=!0});let h=null!=(s=null==(i=t.getAnimations)?void 0:i.call(t).filter(t=>t instanceof CSSTransition))?s:[];return 0===h.length?r():Promise.allSettled(h.map(t=>t.finished)).then(()=>{c||r()}),u.dispose}(t,s))})}),c.dispose}(r,{inFlight:v,prepare(){y.current?y.current=!1:y.current=v.current,v.current=!0,y.current||(i?(p(3),f(4)):(p(4),f(2)))},run(){y.current?i?(f(3),p(4)):(f(4),p(3)):i?f(1):p(1)},done(){var t;y.current&&"function"==typeof r.getAnimations&&r.getAnimations().length>0||(v.current=!1,f(7),i||c(!1),null==(t=null==s?void 0:s.end)||t.call(s,i))}})}},[t,i,r,bE()]),t?[u,{closed:h(1),enter:h(2),leave:h(4),transition:h(2)||h(4)}]:[i,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}(!(!u||!I||!U||H),A,R,{start:j,end:X}),$=bX({ref:D,className:(null==(s=bB(M.className,G&&v,G&&y,Y.enter&&v,Y.enter&&Y.closed&&y,Y.enter&&!Y.closed&&x,Y.leave&&b,Y.leave&&!Y.closed&&w,Y.leave&&Y.closed&&S,!Y.transition&&R&&_))?void 0:s.trim())||void 0,...function(t){let r={};for(let i in t)!0===t[i]&&(r[`data-${i}`]="");return r}(Y)}),J=0;"visible"===O&&(J|=erT.Open),"hidden"===O&&(J|=erT.Closed),Y.enter&&(J|=erT.Opening),Y.leave&&(J|=erT.Closing);let Z=bU();return pI.createElement(erL.Provider,{value:W},pI.createElement(erI,{value:J},Z({ourProps:$,theirProps:M,defaultTag:erB,features:erN,visible:"visible"===O,name:"Transition.Child"})))}),erU=bj(function(t,r){let i=null!==(0,pI.useContext)(erP),s=null!==erE();return pI.createElement(pI.Fragment,null,!i&&s?pI.createElement(erF,{ref:r,...t}):pI.createElement(erz,{ref:r,...t}))}),erH=Object.assign(erF,{Child:erU,Root:erF}),erG=t=>{let{isOpen:r=!1,onClose:i,title:s,children:u,extraButtons:c}=t,h=(0,pI.useCallback)(t=>{t.target===t.currentTarget&&(null==i||i())},[i]);return(0,eu.jsxs)(erH,{show:r,as:pI.Fragment,children:[(0,eu.jsx)(erH.Child,{as:pI.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,eu.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"})}),(0,eu.jsx)("div",{className:"fixed inset-0 overflow-y-auto",onPointerDown:h,children:(0,eu.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",onPointerDown:h,children:(0,eu.jsx)(erH.Child,{as:pI.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,eu.jsxs)("div",{className:gj(`
                w-full max-w-md transform overflow-hidden rounded-lg bg-white
                p-4 shadow-xl transition-all
              `),children:[(0,eu.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,eu.jsx)("h3",{className:"text-lg font-medium",children:s}),(0,eu.jsxs)("div",{className:"flex gap-2",children:[c,(0,eu.jsx)("button",{onPointerDown:i,className:`
                      rounded-full p-1 transition-colors

                      hover:bg-gray-100
                    `,children:(0,eu.jsx)(b2,{className:"h-5 w-5 text-gray-500"})})]})]}),(0,eu.jsx)("div",{className:"mt-2 max-h-96 overflow-y-auto",children:u})]})})})})]})},erV=b0("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),erW=b0("ClipboardCopy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]),erj={models:[]},erX=xg()(xx((t,r)=>({importData:erj,setImportData:r=>{t(()=>({importData:r}))},getImportData:()=>r().importData}))),erY=()=>{let[t,r]=(0,pI.useState)(!1),[i,s]=(0,pI.useState)(!1),u=erX(t=>t.importData),c=xG(t=>t.isFullscreen),h=(0,pI.useMemo)(()=>{var t;return t=-1,new xK(-1)},[]),p=(0,pI.useMemo)(()=>JSON.stringify(u.models,null,2),[u]),f=(0,pI.useCallback)(()=>{window.navigator.clipboard.writeText(p),window.clearTimeout(h.value),s(!0),h.value=window.setTimeout(()=>s(!1),3e3)},[h,p]);return(0,eu.jsxs)("div",{className:"fixed left-0 top-0 p-3",style:{zIndex:c?0:50},children:[(0,eu.jsx)(bJ,{onPointerDown:()=>r(!0),children:"JSON"}),(0,eu.jsx)(erG,{title:"Models",isOpen:t,onClose:()=>r(!1),extraButtons:(0,eu.jsx)("button",{onPointerDown:f,className:`
              rounded-full p-1 transition-colors

              hover:bg-slate-100
            `,children:i?(0,eu.jsx)(erV,{className:"h-5 w-5 text-slate-500"}):(0,eu.jsx)(erW,{className:"h-5 w-5 text-slate-500"})}),children:(0,eu.jsx)("pre",{className:"rounded border bg-slate-50 p-3 text-xs",children:p})})]})},er$=()=>{let{scene:t,controls:r}=fw(),i=xb(t=>t.focused),s=b4(t=>t.config.cameraController);return(0,pI.useEffect)(()=>{if(!!r)if(i){let u=t.getObjectByName(i.objectName).position.toArray().map((t,r)=>t+s.focusedOffset[r]);r.setLookAt(...s.focusedPosition,...u,!0),r.zoomTo(s.focusedZoom,!0)}else r.setLookAt(...s.unfocusedPosition,0,0,0,!0),r.zoomTo(s.unfocusedZoom,!0)},[s.focusedOffset,s.focusedPosition,s.focusedZoom,s.unfocusedPosition,s.unfocusedZoom,r,i,t]),(0,eu.jsx)(eu.Fragment,{})};function erJ(...t){return r=>t.forEach(t=>{var i,s;return i=t,s=r,void("function"==typeof i?i(s):null!=i&&(i.current=s))})}function erZ(...t){return pI.useCallback(erJ(...t),t)}var erK=pI.forwardRef((t,r)=>{let{children:i,...s}=t,u=pI.Children.toArray(i),c=u.find(er0);if(c){let t=c.props.children,i=u.map(r=>r!==c?r:pI.Children.count(t)>1?pI.Children.only(null):pI.isValidElement(t)?t.props.children:null);return(0,eu.jsx)(erq,{...s,ref:r,children:pI.isValidElement(t)?pI.cloneElement(t,void 0,i):null})}return(0,eu.jsx)(erq,{...s,ref:r,children:i})});erK.displayName="Slot";var erq=pI.forwardRef((t,r)=>{let{children:i,...s}=t;if(pI.isValidElement(i)){let t=function(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?t.ref:(i=(r=Object.getOwnPropertyDescriptor(t,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?t.props.ref:t.props.ref||t.ref}(i);return pI.cloneElement(i,{...function(t,r){let i={...r};for(let s in r){let u=t[s],c=r[s];/^on[A-Z]/.test(s)?u&&c?i[s]=(...t)=>{c(...t),u(...t)}:u&&(i[s]=u):"style"===s?i[s]={...u,...c}:"className"===s&&(i[s]=[u,c].filter(Boolean).join(" "))}return{...t,...i}}(s,i.props),ref:r?erJ(r,t):t})}return pI.Children.count(i)>1?pI.Children.only(null):null});erq.displayName="SlotClone";var erQ=({children:t})=>(0,eu.jsx)(eu.Fragment,{children:t});function er0(t){return pI.isValidElement(t)&&t.type===erQ}var er1=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((t,r)=>{let i=pI.forwardRef((t,i)=>{let{asChild:s,...u}=t,c=s?erK:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,eu.jsx)(c,{...u,ref:i})});return i.displayName=`Primitive.${r}`,{...t,[r]:i}},{}),er2=globalThis?.document?pI.useLayoutEffect:()=>{},er3=pI.forwardRef((t,r)=>{let{container:i,...s}=t,[u,c]=pI.useState(!1);er2(()=>c(!0),[]);let h=i||u&&globalThis?.document?.body;return h?wr.createPortal((0,eu.jsx)(er1.div,{...s,ref:r}),h):null});er3.displayName="Portal";var er5=Object.prototype.hasOwnProperty;function er4(t,r){var i,s;if(t===r)return!0;if(t&&r&&(i=t.constructor)===r.constructor){if(i===Date)return t.getTime()===r.getTime();if(i===RegExp)return t.toString()===r.toString();if(i===Array){if((s=t.length)===r.length)for(;s--&&er4(t[s],r[s]););return -1===s}if(!i||"object"==typeof t){for(i in s=0,t)if(er5.call(t,i)&&++s&&!er5.call(r,i)||!(i in r)||!er4(t[i],r[i]))return!1;return Object.keys(r).length===s}}return t!=t&&r!=r}function er6(t,r){if(Object.is(t,r))return!0;if("object"!=typeof t||null===t||"object"!=typeof r||null===r)return!1;let i=Object.keys(t);if(i.length!==Object.keys(r).length)return!1;for(let s=0;s<i.length;s++)if(!Object.prototype.hasOwnProperty.call(r,i[s])||!Object.is(t[i[s]],r[i[s]]))return!1;return!0}var er9=function(t,r,i,s){this.name=t,this.fn=r,this.args=i,this.modifiers=s};function er8(t,r){return void 0===r&&(r="simple"),"object"==typeof t?t[r]:t}function er7(t,r,i){if(!t.length)return er8(r);var s=t.shift(),u=er7(t,r,i);return s.perform(u,i)}er9.prototype._test=function(t){var r=this.fn;try{er7(this.modifiers.slice(),r,this)(t)}catch(t){r=function(){return!1}}try{return er7(this.modifiers.slice(),r,this)(t)}catch(t){return!1}},er9.prototype._check=function(t){try{er7(this.modifiers.slice(),this.fn,this)(t)}catch(t){if(er7(this.modifiers.slice(),function(t){return t},this)(!1))return}if(!er7(this.modifiers.slice(),this.fn,this)(t))throw null},er9.prototype._testAsync=function(t){var r=this;return new Promise(function(i,s){(function t(r,i,s){if(!r.length)return function(t){return Promise.resolve(er8(i,"async")(t))};var u=r.shift(),c=t(r,i,s);return u.performAsync(c,s)})(r.modifiers.slice(),r.fn,r)(t).then(function(r){r?i(t):s(null)}).catch(function(t){return s(t)})})};var eie=function(t,r,i){this.name=t,this.perform=r,this.performAsync=i},eit=function(t){function r(i,s,u,c){for(var h=[],p=arguments.length-4;p-- >0;)h[p]=arguments[p+4];t.call(this,h),t.captureStackTrace&&t.captureStackTrace(this,r),this.rule=i,this.value=s,this.cause=u,this.target=c}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r}(Error),ein=function(t,r){void 0===t&&(t=[]),void 0===r&&(r=[]),this.chain=t,this.nextRuleModifiers=r};ein.prototype._applyRule=function(t,r){var i=this;return function(){for(var s=[],u=arguments.length;u--;)s[u]=arguments[u];return i.chain.push(new er9(r,t.apply(i,s),s,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}},ein.prototype._applyModifier=function(t,r){return this.nextRuleModifiers.push(new eie(r,t.simple,t.async)),this},ein.prototype._clone=function(){return new ein(this.chain.slice(),this.nextRuleModifiers.slice())},ein.prototype.test=function(t){return this.chain.every(function(r){return r._test(t)})},ein.prototype.testAll=function(t){var r=[];return this.chain.forEach(function(i){try{i._check(t)}catch(s){r.push(new eit(i,t,s))}}),r},ein.prototype.check=function(t){this.chain.forEach(function(r){try{r._check(t)}catch(i){throw new eit(r,t,i)}})},ein.prototype.testAsync=function(t){var r=this;return new Promise(function(i,s){(function t(r,i,s,u){if(i.length){var c=i.shift();c._testAsync(r).then(function(){t(r,i,s,u)},function(t){u(new eit(c,r,t))})}else s(r)})(t,r.chain.slice(),i,s)})};var eir=function(t,r){return!!r&&"string"==typeof t&&0===t.trim().length||null==t};function eii(){return"undefined"!=typeof Proxy?function t(r){return new Proxy(r,{get:function(i,s){if(s in i)return i[s];var u=t(r._clone());return s in eio?u._applyModifier(eio[s],s):s in eia?u._applyRule(eia[s],s):s in eiu?u._applyRule(eiu[s],s):void 0}})}(new ein):function t(r){var i=function(r,i){return Object.keys(r).forEach(function(s){i[s]=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return t(i._clone())._applyRule(r[s],s).apply(void 0,u)}}),i},s=i(eiu,r),u=i(eia,s);return Object.keys(eio).forEach(function(r){Object.defineProperty(u,r,{get:function(){return t(u._clone())._applyModifier(eio[r],r)}})}),u}(new ein)}var eia={};eii.extend=function(t){Object.assign(eia,t)},eii.clearCustomRules=function(){eia={}};var eio={not:{simple:function(t){return function(r){return!t(r)}},async:function(t){return function(r){return Promise.resolve(t(r)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(t){return function(r){return eil(r).some(function(r){try{return t(r)}catch(t){return!1}})}},async:function(t){return function(r){return Promise.all(eil(r).map(function(r){try{return t(r).catch(function(){return!1})}catch(t){return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(t){return function(r){return!1!==r&&eil(r).every(t)}},async:function(t){return function(r){return Promise.all(eil(r).map(t)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(t,r){return function(i){return eis(r)&&i&&"object"==typeof i?Object.keys(r.args[0]).length===Object.keys(i).length&&t(i):t(i)}},async:function(t,r){return function(i){return Promise.resolve(t(i)).then(function(t){return eis(r)&&i&&"object"==typeof i?Object.keys(r.args[0]).length===Object.keys(i).length&&t:t}).catch(function(){return!1})}}}};function eis(t){return t&&"schema"===t.name&&t.args.length>0&&"object"==typeof t.args[0]}function eil(t){return"string"==typeof t?t.split(""):t}var eiu={equal:function(t){return function(r){return r==t}},exact:function(t){return function(r){return r===t}},number:function(t){return void 0===t&&(t=!0),function(r){return"number"==typeof r&&(t||isFinite(r))}},integer:function(){return function(t){return(Number.isInteger||eih)(t)}},numeric:function(){return function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},string:function(){return eic("string")},boolean:function(){return eic("boolean")},undefined:function(){return eic("undefined")},null:function(){return eic("null")},array:function(){return eic("array")},object:function(){return eic("object")},instanceOf:function(t){return function(r){return r instanceof t}},pattern:function(t){return function(r){return t.test(r)}},lowercase:function(){return function(t){return"boolean"==typeof t||t===t.toLowerCase()&&""!==t.trim()}},uppercase:function(){return function(t){return t===t.toUpperCase()&&""!==t.trim()}},vowel:function(){return function(t){return/^[aeiou]+$/i.test(t)}},consonant:function(){return function(t){return/^(?=[^aeiou])([a-z]+)$/i.test(t)}},first:function(t){return function(r){return r[0]==t}},last:function(t){return function(r){return r[r.length-1]==t}},empty:function(){return function(t){return 0===t.length}},length:function(t,r){return function(i){return i.length>=t&&i.length<=(r||t)}},minLength:function(t){return function(r){return r.length>=t}},maxLength:function(t){return function(r){return r.length<=t}},negative:function(){return function(t){return t<0}},positive:function(){return function(t){return t>=0}},between:function(t,r){return function(i){return i>=t&&i<=r}},range:function(t,r){return function(i){return i>=t&&i<=r}},lessThan:function(t){return function(r){return r<t}},lessThanOrEqual:function(t){return function(r){return r<=t}},greaterThan:function(t){return function(r){return r>t}},greaterThanOrEqual:function(t){return function(r){return r>=t}},even:function(){return function(t){return t%2==0}},odd:function(){return function(t){return t%2!=0}},includes:function(t){return function(r){return~r.indexOf(t)}},schema:function(t){return function(t){return{simple:function(r){var i=[];if(Object.keys(t).forEach(function(s){var u=t[s];try{u.check((r||{})[s])}catch(t){t.target=s,i.push(t)}}),i.length>0)throw i;return!0},async:function(r){var i=[];return Promise.all(Object.keys(t).map(function(s){return t[s].testAsync((r||{})[s]).catch(function(t){t.target=s,i.push(t)})})).then(function(){if(i.length>0)throw i;return!0})}}}(t)},passesAnyOf:function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return function(r){return t.some(function(t){return t.test(r)})}},optional:function(t,r){return void 0===r&&(r=!1),{simple:function(i){return eir(i,r)||void 0===t.check(i)},async:function(i){return eir(i,r)||t.testAsync(i)}}}};function eic(t){return function(r){return Array.isArray(r)&&"array"===t||null===r&&"null"===t||typeof r===t}}function eih(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}var eid="colors",eip="sizes",eif="space",eig={gap:eif,gridGap:eif,columnGap:eif,gridColumnGap:eif,rowGap:eif,gridRowGap:eif,inset:eif,insetBlock:eif,insetBlockEnd:eif,insetBlockStart:eif,insetInline:eif,insetInlineEnd:eif,insetInlineStart:eif,margin:eif,marginTop:eif,marginRight:eif,marginBottom:eif,marginLeft:eif,marginBlock:eif,marginBlockEnd:eif,marginBlockStart:eif,marginInline:eif,marginInlineEnd:eif,marginInlineStart:eif,padding:eif,paddingTop:eif,paddingRight:eif,paddingBottom:eif,paddingLeft:eif,paddingBlock:eif,paddingBlockEnd:eif,paddingBlockStart:eif,paddingInline:eif,paddingInlineEnd:eif,paddingInlineStart:eif,top:eif,right:eif,bottom:eif,left:eif,scrollMargin:eif,scrollMarginTop:eif,scrollMarginRight:eif,scrollMarginBottom:eif,scrollMarginLeft:eif,scrollMarginX:eif,scrollMarginY:eif,scrollMarginBlock:eif,scrollMarginBlockEnd:eif,scrollMarginBlockStart:eif,scrollMarginInline:eif,scrollMarginInlineEnd:eif,scrollMarginInlineStart:eif,scrollPadding:eif,scrollPaddingTop:eif,scrollPaddingRight:eif,scrollPaddingBottom:eif,scrollPaddingLeft:eif,scrollPaddingX:eif,scrollPaddingY:eif,scrollPaddingBlock:eif,scrollPaddingBlockEnd:eif,scrollPaddingBlockStart:eif,scrollPaddingInline:eif,scrollPaddingInlineEnd:eif,scrollPaddingInlineStart:eif,fontSize:"fontSizes",background:eid,backgroundColor:eid,backgroundImage:eid,borderImage:eid,border:eid,borderBlock:eid,borderBlockEnd:eid,borderBlockStart:eid,borderBottom:eid,borderBottomColor:eid,borderColor:eid,borderInline:eid,borderInlineEnd:eid,borderInlineStart:eid,borderLeft:eid,borderLeftColor:eid,borderRight:eid,borderRightColor:eid,borderTop:eid,borderTopColor:eid,caretColor:eid,color:eid,columnRuleColor:eid,fill:eid,outline:eid,outlineColor:eid,stroke:eid,textDecorationColor:eid,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:eip,minBlockSize:eip,maxBlockSize:eip,inlineSize:eip,minInlineSize:eip,maxInlineSize:eip,width:eip,minWidth:eip,maxWidth:eip,height:eip,minHeight:eip,maxHeight:eip,flexBasis:eip,gridTemplateColumns:eip,gridTemplateRows:eip,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},eim=(t,r)=>"function"==typeof r?{"()":Function.prototype.toString.call(r)}:r,eiv=()=>{let t=Object.create(null);return(r,i,...s)=>{let u=JSON.stringify(r,eim);return u in t?t[u]:t[u]=i(r,...s)}},eiy=Symbol.for("sxs.internal"),eix=(t,r)=>Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)),ei_=t=>{for(let r in t)return!0;return!1},{hasOwnProperty:eib}=Object.prototype,eiw=t=>t.includes("-")?t:t.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),eiS=/\s+(?![^()]*\))/,eiM=t=>r=>t(..."string"==typeof r?String(r).split(eiS):[r]),eiA={appearance:t=>({WebkitAppearance:t,appearance:t}),backfaceVisibility:t=>({WebkitBackfaceVisibility:t,backfaceVisibility:t}),backdropFilter:t=>({WebkitBackdropFilter:t,backdropFilter:t}),backgroundClip:t=>({WebkitBackgroundClip:t,backgroundClip:t}),boxDecorationBreak:t=>({WebkitBoxDecorationBreak:t,boxDecorationBreak:t}),clipPath:t=>({WebkitClipPath:t,clipPath:t}),content:t=>({content:t.includes('"')||t.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(t)?t:`"${t}"`}),hyphens:t=>({WebkitHyphens:t,hyphens:t}),maskImage:t=>({WebkitMaskImage:t,maskImage:t}),maskSize:t=>({WebkitMaskSize:t,maskSize:t}),tabSize:t=>({MozTabSize:t,tabSize:t}),textSizeAdjust:t=>({WebkitTextSizeAdjust:t,textSizeAdjust:t}),userSelect:t=>({WebkitUserSelect:t,userSelect:t}),marginBlock:eiM((t,r)=>({marginBlockStart:t,marginBlockEnd:r||t})),marginInline:eiM((t,r)=>({marginInlineStart:t,marginInlineEnd:r||t})),maxSize:eiM((t,r)=>({maxBlockSize:t,maxInlineSize:r||t})),minSize:eiM((t,r)=>({minBlockSize:t,minInlineSize:r||t})),paddingBlock:eiM((t,r)=>({paddingBlockStart:t,paddingBlockEnd:r||t})),paddingInline:eiM((t,r)=>({paddingInlineStart:t,paddingInlineEnd:r||t}))},eiC=/([\d.]+)([^]*)/,eiT=(t,r)=>t.length?t.reduce((t,i)=>(t.push(...r.map(t=>t.includes("&")?t.replace(/&/g,/[ +>|~]/.test(i)&&/&.*&/.test(t)?`:is(${i})`:i):i+" "+t)),t),[]):r,eiE=(t,r)=>t in eiI&&"string"==typeof r?r.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(r,i,s,u)=>i+("stretch"===s?`-moz-available${u};${eiw(t)}:${i}-webkit-fill-available`:`-moz-fit-content${u};${eiw(t)}:${i}fit-content`)+u):String(r),eiI={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},eiD=t=>t?t+"-":"",eiP=(t,r,i)=>t.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(t,s,u,c,h)=>"$"==c==!!u?t:(s||"--"==c?"calc(":"")+"var(--"+("$"===c?eiD(r)+(h.includes("$")?"":eiD(i))+h.replace(/\$/g,"-"):h)+")"+(s||"--"==c?"*"+(s||"")+(u||"1")+")":"")),eiR=/\s*,\s*(?![^()]*\))/,eiL=Object.prototype.toString,eik=(t,r,i,s,u)=>{let c,h,p;let f=(t,r,i)=>{let v,y;let x=t=>{var _;for(v in t){let b=64===v.charCodeAt(0);for(y of b&&Array.isArray(t[v])?t[v]:[t[v]]){let t=/[A-Z]/.test(_=v)?_:_.replace(/-[^]/g,t=>t[1].toUpperCase()),w="object"==typeof y&&y&&y.toString===eiL&&(!s.utils[t]||!r.length);if(t in s.utils&&!w){let r=s.utils[t];if(r!==h){h=r,x(r(y)),h=null;continue}}else if(t in eiA){let r=eiA[t];if(r!==p){p=r,x(r(y)),p=null;continue}}if(b&&(v=(v.slice(1)in s.media?"@media "+s.media[v.slice(1)]:v).replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(t,r,i,s,u,c)=>{let h=eiC.test(r),p=.0625*(h?-1:1),[f,v]=h?[s,r]:[r,s];return"("+("="===i[0]?"":">"===i[0]===h?"max-":"min-")+f+":"+("="!==i[0]&&1===i.length?v.replace(eiC,(t,r,s)=>Number(r)+p*(">"===i?1:-1)+s):v)+(u?") and ("+(">"===u[0]?"min-":"max-")+f+":"+(1===u.length?c.replace(eiC,(t,r,i)=>Number(r)+p*(">"===u?-1:1)+i):c):"")+")"})),w){let t=b?i.concat(v):[...i],s=b?[...r]:eiT(r,v.split(eiR));void 0!==c&&u(eiO(...c)),c=void 0,f(y,s,t)}else void 0===c&&(c=[[],r,i]),v=b||36!==v.charCodeAt(0)?v:`--${eiD(s.prefix)}${v.slice(1).replace(/\$/g,"-")}`,y=w?y:"number"==typeof y?y&&t in eiB?String(y)+"px":String(y):eiP(eiE(t,null==y?"":y),s.prefix,s.themeMap[t]),c[0].push(`${b?`${v} `:`${eiw(v)}:`}${y}`)}}};x(t),void 0!==c&&u(eiO(...c)),c=void 0};f(t,r,i)},eiO=(t,r,i)=>`${i.map(t=>`${t}{`).join("")}${r.length?`${r.join(",")}{`:""}${t.join(";")}${r.length?"}":""}${Array(i.length?i.length+1:0).join("}")}`,eiB={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},eiN=t=>String.fromCharCode(t+(t>25?39:97)),eiF=t=>(t=>{let r,i="";for(r=Math.abs(t);r>52;r=r/52|0)i=eiN(r%52)+i;return eiN(r%52)+i})(((t,r)=>{let i=r.length;for(;i;)t=33*t^r.charCodeAt(--i);return t})(5381,JSON.stringify(t))>>>0),eiz=["themed","global","styled","onevar","resonevar","allvar","inline"],eiU=t=>{if(t.href&&!t.href.startsWith(location.origin))return!1;try{return!!t.cssRules}catch(t){return!1}},eiH=t=>{let r;let i=()=>{let{cssRules:t}=r.sheet;return[].map.call(t,(i,s)=>{let{cssText:u}=i,c="";if(u.startsWith("--sxs"))return"";if(t[s-1]&&(c=t[s-1].cssText).startsWith("--sxs")){if(!i.cssRules.length)return"";for(let t in r.rules)if(r.rules[t].group===i)return`--sxs{--sxs:${[...r.rules[t].cache].join(" ")}}${u}`;return i.cssRules.length?`${c}${u}`:""}return u}).join("")},s=()=>{if(r){let{rules:t,sheet:i}=r;if(!i.deleteRule){for(;3===Object(Object(i.cssRules)[0]).type;)i.cssRules.splice(0,1);i.cssRules=[]}for(let r in t)delete t[r]}for(let u of Object(t).styleSheets||[])if(eiU(u)){for(let t=0,c=u.cssRules;c[t];++t){let h=Object(c[t]);if(1!==h.type)continue;let p=Object(c[t+1]);if(4!==p.type)continue;++t;let{cssText:f}=h;if(!f.startsWith("--sxs"))continue;let v=f.slice(14,-3).trim().split(/\s+/),y=eiz[v[0]];y&&(r||(r={sheet:u,reset:s,rules:{},toString:i}),r.rules[y]={group:p,index:t,cache:new Set(v)})}if(r)break}if(!r){let u=(t,r)=>({type:r,cssRules:[],insertRule(t,r){this.cssRules.splice(r,0,u(t,{import:3,undefined:1}[(t.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return"@media{}"===t?`@media{${[].map.call(this.cssRules,t=>t.cssText).join("")}}`:t}});r={sheet:t?(t.head||t).appendChild(document.createElement("style")).sheet:u("","text/css"),rules:{},reset:s,toString:i}}let{sheet:u,rules:c}=r;for(let t=eiz.length-1;t>=0;--t){let r=eiz[t];if(!c[r]){let i=eiz[t+1],s=c[i]?c[i].index:u.cssRules.length;u.insertRule("@media{}",s),u.insertRule(`--sxs{--sxs:${t}}`,s),c[r]={group:u.cssRules[s+1],index:s,cache:new Set([t])}}eiG(c[r])}};return s(),r},eiG=t=>{let r=t.group,i=r.cssRules.length;t.apply=t=>{try{r.insertRule(t,i),++i}catch(t){}}},eiV=Symbol(),eiW=eiv(),eij=(t,r)=>eiW(t,()=>(...i)=>{let s={type:null,composers:new Set};for(let r of i)if(null!=r){if(r[eiy])for(let t of(null==s.type&&(s.type=r[eiy].type),r[eiy].composers))s.composers.add(t);else r.constructor!==Object||r.$$typeof?null==s.type&&(s.type=r):s.composers.add(eiX(r,t))}return null==s.type&&(s.type="span"),s.composers.size||s.composers.add(["PJLV",{},[],[],{},[]]),eiY(t,s,r)}),eiX=({variants:t,compoundVariants:r,defaultVariants:i,...s},u)=>{let c=`${eiD(u.prefix)}c-${eiF(s)}`,h=[],p=[],f=Object.create(null),v=[];for(let t in i)f[t]=String(i[t]);if("object"==typeof t&&t)for(let r in t){eib.call(f,r)||(f[r]="undefined");let i=t[r];for(let t in i){let s={[r]:String(t)};"undefined"===String(t)&&v.push(r);let u=i[t],c=[s,u,!ei_(u)];h.push(c)}}if("object"==typeof r&&r)for(let t of r){let{css:r,...i}=t;for(let t in r="object"==typeof r&&r||{},i)i[t]=String(i[t]);let s=[i,r,!ei_(r)];p.push(s)}return[c,s,h,p,f,v]},eiY=(t,r,i)=>{let[s,u,c,h]=ei$(r.composers),p="function"==typeof r.type||r.type.$$typeof?(t=>{function r(){for(let i=0;i<r[eiV].length;i++){let[s,u]=r[eiV][i];t.rules[s].apply(u)}return r[eiV]=[],null}return r[eiV]=[],r.rules={},eiz.forEach(t=>r.rules[t]={apply:i=>r[eiV].push([t,i])}),r})(i):null,f=(p||i).rules,v=`.${s}${u.length>1?`:where(.${u.slice(1).join(".")})`:""}`,y=y=>{let{css:x,..._}=y="object"==typeof y&&y||eiZ,b={};for(let t in c)if(delete _[t],t in y){let r=y[t];"object"==typeof r&&r?b[t]={"@initial":c[t],...r}:(r=String(r),b[t]="undefined"!==r||h.has(t)?r:c[t])}else b[t]=c[t];let w=new Set([...u]);for(let[s,u,c,h]of r.composers){i.rules.styled.cache.has(s)||(i.rules.styled.cache.add(s),eik(u,[`.${s}`],[],t,t=>{f.styled.apply(t)}));let r=eiJ(c,b,t.media),p=eiJ(h,b,t.media,!0);for(let u of r)if(void 0!==u)for(let[r,c,h]of u){let u=`${s}-${eiF(c)}-${r}`;w.add(u);let p=(h?i.rules.resonevar:i.rules.onevar).cache,v=h?f.resonevar:f.onevar;p.has(u)||(p.add(u),eik(c,[`.${u}`],[],t,t=>{v.apply(t)}))}for(let r of p)if(void 0!==r)for(let[u,c]of r){let r=`${s}-${eiF(c)}-${u}`;w.add(r),i.rules.allvar.cache.has(r)||(i.rules.allvar.cache.add(r),eik(c,[`.${r}`],[],t,t=>{f.allvar.apply(t)}))}}if("object"==typeof x&&x){let r=`${s}-i${eiF(x)}-css`;w.add(r),i.rules.inline.cache.has(r)||(i.rules.inline.cache.add(r),eik(x,[`.${r}`],[],t,t=>{f.inline.apply(t)}))}for(let t of String(y.className||"").trim().split(/\s+/))t&&w.add(t);let S=_.className=[...w].join(" ");return{type:r.type,className:S,selector:v,props:_,toString:()=>S,deferredInjector:p}};return eix(y,{className:s,selector:v,[eiy]:r,toString:()=>(i.rules.styled.cache.has(s)||y(),s)})},ei$=t=>{let r="",i=[],s={},u=[];for(let[c,,,,h,p]of t)for(let t in""===r&&(r=c),i.push(c),u.push(...p),h){let r=h[t];(void 0===s[t]||"undefined"!==r||p.includes(r))&&(s[t]=r)}return[r,i,s,new Set(u)]},eiJ=(t,r,i,s)=>{let u=[];c:for(let[c,h,p]of t){if(p)continue;let t,f=0,v=!1;for(t in c){let s=c[t],u=r[t];if(u!==s){if("object"!=typeof u||!u)continue c;{let t,r,c=0;for(let h in u){if(s===String(u[h])){if("@initial"!==h){let t=h.slice(1);(r=r||[]).push(t in i?i[t]:h.replace(/^@media ?/,"")),v=!0}f+=c,t=!0}++c}if(r&&r.length&&(h={["@media "+r.join(", ")]:h}),!t)continue c}}}(u[f]=u[f]||[]).push([s?"cv":`${t}-${c[t]}`,h,v])}return u},eiZ={},eiK=eiv(),eiq=(t,r)=>eiK(t,()=>(...i)=>{let s=()=>{for(let s of i){let i=eiF(s="object"==typeof s&&s||{});if(!r.rules.global.cache.has(i)){if(r.rules.global.cache.add(i),"@import"in s){let t=[].indexOf.call(r.sheet.cssRules,r.rules.themed.group)-1;for(let i of[].concat(s["@import"]))i=i.includes('"')||i.includes("'")?i:`"${i}"`,r.sheet.insertRule(`@import ${i};`,t++);delete s["@import"]}eik(s,[],[],t,t=>{r.rules.global.apply(t)})}}return""};return eix(s,{toString:s})}),eiQ=eiv(),ei0=(t,r)=>eiQ(t,()=>i=>{let s=`${eiD(t.prefix)}k-${eiF(i)}`,u=()=>{if(!r.rules.global.cache.has(s)){r.rules.global.cache.add(s);let u=[];eik(i,[],[],t,t=>u.push(t));let c=`@keyframes ${s}{${u.join("")}}`;r.rules.global.apply(c)}return s};return eix(u,{get name(){return u()},toString:u})}),ei1=class{constructor(t,r,i,s){this.token=null==t?"":String(t),this.value=null==r?"":String(r),this.scale=null==i?"":String(i),this.prefix=null==s?"":String(s)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+eiD(this.prefix)+eiD(this.scale)+this.token}toString(){return this.computedValue}},ei2=eiv(),ei3=(t,r)=>ei2(t,()=>(i,s)=>{s="object"==typeof i&&i||Object(s);let u=`.${i=(i="string"==typeof i?i:"")||`${eiD(t.prefix)}t-${eiF(s)}`}`,c={},h=[];for(let r in s)for(let i in c[r]={},s[r]){let u=`--${eiD(t.prefix)}${r}-${i}`,p=eiP(String(s[r][i]),t.prefix,r);c[r][i]=new ei1(i,p,r,t.prefix),h.push(`${u}:${p}`)}let p=()=>{if(h.length&&!r.rules.themed.cache.has(i)){r.rules.themed.cache.add(i);let u=`${s===t.theme?":root,":""}.${i}{${h.join(";")}}`;r.rules.themed.apply(u)}return i};return{...c,get className(){return p()},selector:u,toString:p}}),ei5=eiv(),ei4,ei6,ei9,ei8,ei7,eae,eat,ean,ear,eai,eaa,eao,eas,eal,eau,eac,eah,ead,eap,eaf,eag,eam,eav,eay,eax,ea_,eab,eaw,eaS,eaM,eaA,eaC,eaT,eaE,eaI,eaD,eaP,eaR,eaL,eak,eaO,eaB,eaN,eaF,eaz,eaU,eaH,eaG,eaV,eaW,eaj,eaX,eaY,ea$,eaJ,eaZ,eaK,eaq,eaQ,ea0,ea1,ea2,ea3,ea5,ea4,ea6,ea9,ea8,ea7,eoe,eot,eon,eor,eoi,eoa,eoo,eos,eol,eou,eoc,eoh,eod,eop,eof,eog=eiv(),eom=t=>{let r=(t=>{let r=!1,i=ei5(t,t=>{r=!0;let i="prefix"in(t="object"==typeof t&&t||{})?String(t.prefix):"",s="object"==typeof t.media&&t.media||{},u="object"==typeof t.root?t.root||null:globalThis.document||null,c="object"==typeof t.theme&&t.theme||{},h={prefix:i,media:s,theme:c,themeMap:"object"==typeof t.themeMap&&t.themeMap||{...eig},utils:"object"==typeof t.utils&&t.utils||{}},p=eiH(u),f={css:eij(h,p),globalCss:eiq(h,p),keyframes:ei0(h,p),createTheme:ei3(h,p),reset(){p.reset(),f.theme.toString()},theme:{},sheet:p,config:h,prefix:i,getCssText:p.toString,toString:p.toString};return String(f.theme=f.createTheme(c)),f});return r||i.reset(),i})(t);return r.styled=(({config:t,sheet:r})=>eog(t,()=>{let i=eij(t,r);return(...t)=>{let r=i(...t),s=r[eiy].type,u=pI.forwardRef((t,i)=>{let u=t&&t.as||s,{props:c,deferredInjector:h}=r(t);return delete c.as,c.ref=i,h?pI.createElement(pI.Fragment,null,pI.createElement(u,c),pI.createElement(h,null)):pI.createElement(u,c)});return u.className=r.className,u.displayName=`Styled.${s.displayName||s.name||s}`,u.selector=r.selector,u.toString=()=>r.selector,u[eiy]=r[eiy],u}}))(r),r},eov=()=>eof||(eof=eom());let eoy={toVector:(t,r)=>(void 0===t&&(t=r),Array.isArray(t)?t:[t,t]),add:(t,r)=>[t[0]+r[0],t[1]+r[1]],sub:(t,r)=>[t[0]-r[0],t[1]-r[1]],addTo(t,r){t[0]+=r[0],t[1]+=r[1]},subTo(t,r){t[0]-=r[0],t[1]-=r[1]}};function eox(t,r,i){return 0===r||Math.abs(r)===1/0?Math.pow(t,5*i):t*r*i/(r+i*t)}function eo_(t,r,i,s=.15){if(0===s)return Math.max(r,Math.min(t,i));return t<r?-eox(r-t,i-r,s)+r:t>i?+eox(t-i,i-r,s)+i:t}function eob(t,r,i){var s;return(r="symbol"==typeof(s=function(t,r){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,r||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(r,"string"))?s:String(s))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function eow(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,s)}return i}function eoS(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?eow(Object(i),!0).forEach(function(r){eob(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):eow(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}let eoM={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function eoA(t){return t?t[0].toUpperCase()+t.slice(1):""}let eoC=["enter","leave"],eoT=["gotpointercapture","lostpointercapture"];function eoE(t){return"touches"in t}function eoI(t){return eoE(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function eoD(t){var r;return eoE(t)?("touchend"===(r=t).type||"touchcancel"===r.type?r.changedTouches:r.targetTouches)[0]:t}function eoP(t){let r=eoD(t);return eoE(t)?r.identifier:r.pointerId}function eoR(t){let r=eoD(t);return[r.clientX,r.clientY]}function eoL(t,...r){return"function"==typeof t?t(...r):t}function eok(){}function eoO(t,r){return Object.assign({},r,t||{})}class eoB{constructor(t,r,i){this.ctrl=t,this.args=r,this.key=i,!this.state&&(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){let{state:t,shared:r,ingKey:i,args:s}=this;r[i]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=s,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){let r=this.state,i=this.config;!r._active&&(this.reset(),this.computeInitial(),r._active=!0,r.target=t.target,r.currentTarget=t.currentTarget,r.lastOffset=i.from?eoL(i.from,r):r.offset,r.offset=r.lastOffset,r.startTime=r.timeStamp=t.timeStamp)}computeValues(t){let r=this.state;r._values=t,r.values=this.config.transform(t)}computeInitial(){let t=this.state;t._initial=t._values,t.initial=t.values}compute(t){let{state:r,config:i,shared:s}=this;r.args=this.args;let u=0;if(t&&(r.event=t,i.preventDefault&&t.cancelable&&r.event.preventDefault(),r.type=t.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,function(t){let r={};if("buttons"in t&&(r.buttons=t.buttons),"shiftKey"in t){let{shiftKey:i,altKey:s,metaKey:u,ctrlKey:c}=t;Object.assign(r,{shiftKey:i,altKey:s,metaKey:u,ctrlKey:c})}return r}(t)),s.down=s.pressed=s.buttons%2==1||s.touches>0,u=t.timeStamp-r.timeStamp,r.timeStamp=t.timeStamp,r.elapsedTime=r.timeStamp-r.startTime),r._active){let t=r._delta.map(Math.abs);eoy.addTo(r._distance,t)}this.axisIntent&&this.axisIntent(t);let[c,h]=r._movement,[p,f]=i.threshold,{_step:v,values:y}=r;if(i.hasCustomTransform?(!1===v[0]&&(v[0]=Math.abs(c)>=p&&y[0]),!1===v[1]&&(v[1]=Math.abs(h)>=f&&y[1])):(!1===v[0]&&(v[0]=Math.abs(c)>=p&&Math.sign(c)*p),!1===v[1]&&(v[1]=Math.abs(h)>=f&&Math.sign(h)*f)),r.intentional=!1!==v[0]||!1!==v[1],!r.intentional)return;let x=[0,0];if(i.hasCustomTransform){let[t,r]=y;x[0]=!1!==v[0]?t-v[0]:0,x[1]=!1!==v[1]?r-v[1]:0}else x[0]=!1!==v[0]?c-v[0]:0,x[1]=!1!==v[1]?h-v[1]:0;this.restrictToAxis&&!r._blocked&&this.restrictToAxis(x);let _=r.offset,b=r._active&&!r._blocked||r.active;b&&(r.first=r._active&&!r.active,r.last=!r._active&&r.active,r.active=s[this.ingKey]=r._active,t&&(r.first&&("bounds"in i&&(r._bounds=eoL(i.bounds,r)),this.setup&&this.setup()),r.movement=x,this.computeOffset()));let[w,S]=r.offset,[[M,A],[C,T]]=r._bounds;r.overflow=[w<M?-1:w>A?1:0,S<C?-1:S>T?1:0],r._movementBound[0]=!!r.overflow[0]&&(!1===r._movementBound[0]?r._movement[0]:r._movementBound[0]),r._movementBound[1]=!!r.overflow[1]&&(!1===r._movementBound[1]?r._movement[1]:r._movementBound[1]);let I=r._active&&i.rubberband||[0,0];if(r.offset=function(t,[r,i],[s,u]){let[[c,h],[p,f]]=t;return[eo_(r,c,h,s),eo_(i,p,f,u)]}(r._bounds,r.offset,I),r.delta=eoy.sub(r.offset,_),this.computeMovement(),b&&(!r.last||u>32)){r.delta=eoy.sub(r.offset,_);let t=r.delta.map(Math.abs);eoy.addTo(r.distance,t),r.direction=r.delta.map(Math.sign),r._direction=r._delta.map(Math.sign),!r.first&&u>0&&(r.velocity=[t[0]/u,t[1]/u],r.timeDelta=u)}}emit(){let t=this.state,r=this.shared,i=this.config;if(!t._active&&this.clean(),(t._blocked||!t.intentional)&&!t._force&&!i.triggerAllEvents)return;let s=this.handler(eoS(eoS(eoS({},r),t),{},{[this.aliasKey]:t.values}));void 0!==s&&(t.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class eoN extends eoB{constructor(...t){super(...t),eob(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=eoy.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=eoy.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){let r=this.state,i=this.config;if(!r.axis&&t){let s="object"==typeof i.axisThreshold?i.axisThreshold[eoI(t)]:i.axisThreshold;r.axis=function([t,r],i){let s=Math.abs(t),u=Math.abs(r);return s>u&&s>i?"x":u>s&&u>i?"y":void 0}(r._movement,s)}r._blocked=(i.lockDirection||!!i.axis)&&!r.axis||!!i.axis&&i.axis!==r.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0}}}let eoF=t=>t,eoz={enabled:(t=!0)=>t,eventOptions:(t,r,i)=>eoS(eoS({},i.shared.eventOptions),t),preventDefault:(t=!1)=>t,triggerAllEvents:(t=!1)=>t,rubberband(t=0){switch(t){case!0:return[.15,.15];case!1:return[0,0];default:return eoy.toVector(t)}},from:t=>"function"==typeof t?t:null!=t?eoy.toVector(t):void 0,transform(t,r,i){let s=t||i.shared.transform;return this.hasCustomTransform=!!s,s||eoF},threshold:t=>eoy.toVector(t,0)},eoU=0,eoH=eoS(eoS({},eoz),{},{axis(t,r,{axis:i}){if(this.lockDirection="lock"===i,!this.lockDirection)return i},axisThreshold:(t=eoU)=>t,bounds(t={}){if("function"==typeof t)return r=>eoH.bounds(t(r));if("current"in t)return()=>t.current;if("function"==typeof HTMLElement&&t instanceof HTMLElement)return t;let{left:r=-1/0,right:i=1/0,top:s=-1/0,bottom:u=1/0}=t;return[[r,i],[s,u]]}}),eoG={ArrowRight:(t,r=1)=>[t*r,0],ArrowLeft:(t,r=1)=>[-1*t*r,0],ArrowUp:(t,r=1)=>[0,-1*t*r],ArrowDown:(t,r=1)=>[0,t*r]},eoV="undefined"!=typeof window&&window.document&&window.document.createElement;function eoW(){return eoV&&"ontouchstart"in window}let eoj={isBrowser:eoV,gesture:function(){try{return"constructor"in GestureEvent}catch(t){return!1}}(),touch:eoW(),touchscreen:eoW()||eoV&&window.navigator.maxTouchPoints>1,pointer:eoV&&"onpointerdown"in window,pointerLock:eoV&&"exitPointerLock"in window.document},eoX=10,eoY={mouse:0,touch:0,pen:8},eo$=eoS(eoS({},eoH),{},{device(t,r,{pointer:{touch:i=!1,lock:s=!1,mouse:u=!1}={}}){return(this.pointerLock=s&&eoj.pointerLock,eoj.touch&&i)?"touch":this.pointerLock?"mouse":eoj.pointer&&!u?"pointer":eoj.touch?"touch":"mouse"},preventScrollAxis(t,r,{preventScroll:i}){if(this.preventScrollDelay="number"==typeof i?i:i||void 0===i&&t?250:void 0,eoj.touchscreen&&!1!==i)return t||(void 0!==i?"y":void 0)},pointerCapture(t,r,{pointer:{capture:i=!0,buttons:s=1,keys:u=!0}={}}){return this.pointerButtons=s,this.keys=u,!this.pointerLock&&"pointer"===this.device&&i},threshold(t,r,{filterTaps:i=!1,tapsThreshold:s=3,axis:u}){let c=eoy.toVector(t,i?s:u?1:0);return this.filterTaps=i,this.tapsThreshold=s,c},swipe({velocity:t=.5,distance:r=50,duration:i=250}={}){return{velocity:this.transform(eoy.toVector(t)),distance:this.transform(eoy.toVector(r)),duration:i}},delay(t=0){switch(t){case!0:return 180;case!1:return 0;default:return t}},axisThreshold:t=>t?eoS(eoS({},eoY),t):eoY,keyboardDisplacement:(t=eoX)=>t});eoS(eoS({},eoz),{},{device(t,r,{shared:i,pointer:{touch:s=!1}={}}){if(i.target&&!eoj.touch&&eoj.gesture)return"gesture";if(eoj.touch&&s)return"touch";if(eoj.touchscreen){if(eoj.pointer)return"pointer";if(eoj.touch)return"touch"}},bounds(t,r,{scaleBounds:i={},angleBounds:s={}}){let u=t=>{let r=eoO(eoL(i,t),{min:-1/0,max:1/0});return[r.min,r.max]},c=t=>{let r=eoO(eoL(s,t),{min:-1/0,max:1/0});return[r.min,r.max]};return"function"!=typeof i&&"function"!=typeof s?[u(),c()]:t=>[u(t),c(t)]},threshold(t,r,i){return this.lockDirection="lock"===i.axis,eoy.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey:t=>void 0===t?"ctrlKey":t,pinchOnWheel:(t=!0)=>t}),eoS(eoS({},eoH),{},{mouseOnly:(t=!0)=>t}),eoS(eoS({},eoH),{},{mouseOnly:(t=!0)=>t});let eoJ=new Map,eoZ=new Map,eoK={key:"drag",engine:class t extends eoN{constructor(...t){super(...t),eob(this,"ingKey","dragging")}reset(){super.reset();let t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){let t=this.state;if(t._bounds instanceof HTMLElement){let r=t._bounds.getBoundingClientRect(),i=t.currentTarget.getBoundingClientRect(),s={left:r.left-i.left+t.offset[0],right:r.right-i.right+t.offset[0],top:r.top-i.top+t.offset[1],bottom:r.bottom-i.bottom+t.offset[1]};t._bounds=eoH.bounds(s)}}cancel(){let t=this.state;!t.canceled&&(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){let r=this.config,i=this.state;if(null!=t.buttons&&(Array.isArray(r.pointerButtons)?!r.pointerButtons.includes(t.buttons):-1!==r.pointerButtons&&r.pointerButtons!==t.buttons))return;let s=this.ctrl.setEventIds(t);r.pointerCapture&&t.target.setPointerCapture(t.pointerId),(!s||!(s.size>1)||!i._pointerActive)&&(this.start(t),this.setupPointer(t),i._pointerId=eoP(t),i._pointerActive=!0,this.computeValues(eoR(t)),this.computeInitial(),r.preventScrollAxis&&"mouse"!==eoI(t)?(i._active=!1,this.setupScrollPrevention(t)):r.delay>0?(this.setupDelayTrigger(t),r.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){let r=this.state;r._active=!0,r._preventScroll=!0,r._delayed=!1,this.compute(t),this.emit()}pointerMove(t){let r=this.state,i=this.config;if(!r._pointerActive)return;let s=eoP(t);if(void 0!==r._pointerId&&s!==r._pointerId)return;let u=eoR(t);if(document.pointerLockElement===t.target?r._delta=[t.movementX,t.movementY]:(r._delta=eoy.sub(u,r._values),this.computeValues(u)),eoy.addTo(r._movement,r._delta),this.compute(t),r._delayed&&r.intentional){this.timeoutStore.remove("dragDelay"),r.active=!1,this.startPointerDrag(t);return}if(i.preventScrollAxis&&!r._preventScroll){if(!r.axis)return;if(r.axis===i.preventScrollAxis||"xy"===i.preventScrollAxis){r._active=!1,this.clean();return}this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch(t){}let r=this.state,i=this.config;if(!r._active||!r._pointerActive)return;let s=eoP(t);if(void 0!==r._pointerId&&s!==r._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);let[u,c]=r._distance;if(r.tap=u<=i.tapsThreshold&&c<=i.tapsThreshold,r.tap&&i.filterTaps)r._force=!0;else{let[t,s]=r._delta,[u,c]=r._movement,[h,p]=i.swipe.velocity,[f,v]=i.swipe.distance,y=i.swipe.duration;if(r.elapsedTime<y){let i=Math.abs(t/r.timeDelta),y=Math.abs(s/r.timeDelta);i>h&&Math.abs(u)>f&&(r.swipe[0]=Math.sign(t)),y>p&&Math.abs(c)>v&&(r.swipe[1]=Math.sign(s))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){let r=this.config,i=r.device;r.pointerLock&&t.currentTarget.requestPointerLock(),!r.pointerCapture&&(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,function(t){"persist"in t&&"function"==typeof t.persist&&t.persist()}(t);let r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){let r=eoG[t.key];if(r){let i=this.state,s=t.shiftKey?10:t.altKey?.1:1;this.start(t),i._delta=r(this.config.keyboardDisplacement,s),i._keyboardActive=!0,eoy.addTo(i._movement,i._delta),this.compute(t),this.emit()}}keyUp(t){t.key in eoG&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){let r=this.config.device;t(r,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(r,"change",this.pointerMove.bind(this)),t(r,"end",this.pointerUp.bind(this)),t(r,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},resolver:eo$},eoq={target(t){if(t)return()=>"current"in t?t.current:t},enabled:(t=!0)=>t,window:(t=eoj.isBrowser?window:void 0)=>t,eventOptions:({passive:t=!0,capture:r=!1}={})=>({passive:t,capture:r}),transform:t=>t},eoQ=["target","eventOptions","window","enabled","transform"];function eo0(t={},r){let i={};for(let[s,u]of Object.entries(r))switch(typeof u){case"function":i[s]=u.call(i,t[s],s,t);break;case"object":i[s]=eo0(t[s],u);break;case"boolean":u&&(i[s]=t[s])}return i}class eo1{constructor(t,r){eob(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=r}add(t,r,i,s,u){let c=this._listeners,h=function(t,r=""){let i=eoM[t];return t+(i&&i[r]||r)}(r,i),p=eoS(eoS({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),u);t.addEventListener(h,s,p);let f=()=>{t.removeEventListener(h,s,p),c.delete(f)};return c.add(f),f}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class eo2{constructor(){eob(this,"_timeouts",new Map)}add(t,r,i=140,...s){this.remove(t),this._timeouts.set(t,window.setTimeout(r,i,...s))}remove(t){let r=this._timeouts.get(t);r&&window.clearTimeout(r)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class eo3{constructor(t){eob(this,"gestures",new Set),eob(this,"_targetEventStore",new eo1(this)),eob(this,"gestureEventStores",{}),eob(this,"gestureTimeoutStores",{}),eob(this,"handlers",{}),eob(this,"config",{}),eob(this,"pointerIds",new Set),eob(this,"touchIds",new Set),eob(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(t,r){r.drag&&eo5(t,"drag"),r.wheel&&eo5(t,"wheel"),r.scroll&&eo5(t,"scroll"),r.move&&eo5(t,"move"),r.pinch&&eo5(t,"pinch"),r.hover&&eo5(t,"hover")}(this,t)}setEventIds(t){if(eoE(t)){var r;return this.touchIds=new Set(Array.from((r=t).touches).filter(t=>{var i,s;return t.target===r.currentTarget||(null===(i=r.currentTarget)||void 0===i||null===(s=i.contains)||void 0===s?void 0:s.call(i,t.target))}).map(t=>t.identifier)),this.touchIds}if("pointerId"in t)return"pointerup"===t.type||"pointercancel"===t.type?this.pointerIds.delete(t.pointerId):"pointerdown"===t.type&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,r){this.handlers=t,this.nativeHandlers=r}applyConfig(t,r){this.config=function(t,r,i={}){let{target:s,eventOptions:u,window:c,enabled:h,transform:p}=t,f=function(t,r){if(null==t)return{};var i,s,u=function(t,r){if(null==t)return{};var i,s,u={},c=Object.keys(t);for(s=0;s<c.length;s++)i=c[s],!(r.indexOf(i)>=0)&&(u[i]=t[i]);return u}(t,r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(s=0;s<c.length;s++){if(i=c[s],!(r.indexOf(i)>=0))Object.prototype.propertyIsEnumerable.call(t,i)&&(u[i]=t[i])}}return u}(t,eoQ);if(i.shared=eo0({target:s,eventOptions:u,window:c,enabled:h,transform:p},eoq),r){let t=eoZ.get(r);i[r]=eo0(eoS({shared:i.shared},f),t)}else for(let t in f){let r=eoZ.get(t);r&&(i[t]=eo0(eoS({shared:i.shared},f[t]),r))}return i}(t,r,this.config)}clean(){for(let t of(this._targetEventStore.clean(),this.gestures))this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){let r;let i=this.config.shared,s={};if(!i.target||!!(r=i.target())){if(i.enabled){for(let i of this.gestures){let u=this.config[i],c=eo4(s,u.eventOptions,!!r);u.enabled&&new(eoJ.get(i))(this,t,i).bind(c)}let u=eo4(s,i.eventOptions,!!r);for(let r in this.nativeHandlers)u(r,"",i=>this.nativeHandlers[r](eoS(eoS({},this.state.shared),{},{event:i,args:t})),void 0,!0)}for(let t in s)s[t]=function(...t){return 0===t.length?eok:1===t.length?t[0]:function(){let r;for(let i of t)r=i.apply(this,arguments)||r;return r}}(...s[t]);if(!r)return s;for(let t in s){let{device:i,capture:u,passive:c}=function(t){let r=t.substring(2).toLowerCase(),i=!!~r.indexOf("passive");i&&(r=r.replace("passive",""));let s=eoT.includes(r)?"capturecapture":"capture",u=!!~r.indexOf(s);return u&&(r=r.replace("capture","")),{device:r,capture:u,passive:i}}(t);this._targetEventStore.add(r,i,"",s[t],{capture:u,passive:c})}}}}function eo5(t,r){t.gestures.add(r),t.gestureEventStores[r]=new eo1(t,r),t.gestureTimeoutStores[r]=new eo2}let eo4=(t,r,i)=>(s,u,c,h={},p=!1)=>{var f,v;let y=null!==(f=h.capture)&&void 0!==f?f:r.capture,x=null!==(v=h.passive)&&void 0!==v?v:r.passive,_=p?s:function(t,r="",i=!1){let s=eoM[t],u=s&&s[r]||r;return"on"+eoA(t)+eoA(u)+(!function(t=!1,r){return t&&!eoC.includes(r)}(i,u)?"":"Capture")}(s,u,y);i&&x&&(_+="Passive"),t[_]=t[_]||[],t[_].push(c)},eo6=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function eo9(t,r,i,s,u,c){if(!t.has(i)||!EngineMap.has(s))return;let h=i+"Start",p=i+"End";u[s]=t=>{let s;return t.first&&h in r&&r[h](t),i in r&&(s=r[i](t)),t.last&&p in r&&r[p](t),s},c[s]=c[s]||{}}function eo8(t,r={},i,s){let u=pI.useMemo(()=>new eo3(t),[]);if(u.applyHandlers(t,s),u.applyConfig(r,i),pI.useEffect(u.effect.bind(u)),pI.useEffect(()=>u.clean.bind(u),[]),void 0===r.target)return u.bind.bind(u)}function eo7(t,r,{checkForDefaultPrevented:i=!0}={}){return function(s){if(t?.(s),!1===i||!s.defaultPrevented)return r?.(s)}}function ese(t){let r=pI.useRef(t);return pI.useEffect(()=>{r.current=t}),pI.useMemo(()=>(...t)=>r.current?.(...t),[])}var est="dismissableLayer.update",esn=pI.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),esr=pI.forwardRef((t,r)=>{let{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:c,onInteractOutside:h,onDismiss:p,...f}=t,v=pI.useContext(esn),[y,x]=pI.useState(null),_=y?.ownerDocument??globalThis?.document,[,b]=pI.useState({}),w=erZ(r,t=>x(t)),S=Array.from(v.layers),[M]=[...v.layersWithOutsidePointerEventsDisabled].slice(-1),A=S.indexOf(M),C=y?S.indexOf(y):-1,T=v.layersWithOutsidePointerEventsDisabled.size>0,I=C>=A,D=function(t,r=globalThis?.document){let i=ese(t),s=pI.useRef(!1),u=pI.useRef(()=>{});return pI.useEffect(()=>{let t=t=>{if(t.target&&!s.current){let s=function(){esa("dismissableLayer.pointerDownOutside",i,c,{discrete:!0})},c={originalEvent:t};"touch"===t.pointerType?(r.removeEventListener("click",u.current),u.current=s,r.addEventListener("click",u.current,{once:!0})):s()}else r.removeEventListener("click",u.current);s.current=!1},c=window.setTimeout(()=>{r.addEventListener("pointerdown",t)},0);return()=>{window.clearTimeout(c),r.removeEventListener("pointerdown",t),r.removeEventListener("click",u.current)}},[r,i]),{onPointerDownCapture:()=>s.current=!0}}(t=>{let r=t.target,i=[...v.branches].some(t=>t.contains(r));I&&!i&&(u?.(t),h?.(t),!t.defaultPrevented&&p?.())},_),P=function(t,r=globalThis?.document){let i=ese(t),s=pI.useRef(!1);return pI.useEffect(()=>{let t=t=>{t.target&&!s.current&&esa("dismissableLayer.focusOutside",i,{originalEvent:t},{discrete:!1})};return r.addEventListener("focusin",t),()=>r.removeEventListener("focusin",t)},[r,i]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}(t=>{let r=t.target;![...v.branches].some(t=>t.contains(r))&&(c?.(t),h?.(t),!t.defaultPrevented&&p?.())},_);return!function(t,r=globalThis?.document){let i=ese(t);pI.useEffect(()=>{let t=t=>{"Escape"===t.key&&i(t)};return r.addEventListener("keydown",t,{capture:!0}),()=>r.removeEventListener("keydown",t,{capture:!0})},[i,r])}(t=>{!(C!==v.layers.size-1)&&(s?.(t),!t.defaultPrevented&&p&&(t.preventDefault(),p()))},_),pI.useEffect(()=>{if(y)return i&&(0===v.layersWithOutsidePointerEventsDisabled.size&&(ede=_.body.style.pointerEvents,_.body.style.pointerEvents="none"),v.layersWithOutsidePointerEventsDisabled.add(y)),v.layers.add(y),esi(),()=>{i&&1===v.layersWithOutsidePointerEventsDisabled.size&&(_.body.style.pointerEvents=ede)}},[y,_,i,v]),pI.useEffect(()=>()=>{y&&(v.layers.delete(y),v.layersWithOutsidePointerEventsDisabled.delete(y),esi())},[y,v]),pI.useEffect(()=>{let t=()=>b({});return document.addEventListener(est,t),()=>document.removeEventListener(est,t)},[]),(0,eu.jsx)(er1.div,{...f,ref:w,style:{pointerEvents:T?I?"auto":"none":void 0,...t.style},onFocusCapture:eo7(t.onFocusCapture,P.onFocusCapture),onBlurCapture:eo7(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:eo7(t.onPointerDownCapture,D.onPointerDownCapture)})});esr.displayName="DismissableLayer";pI.forwardRef((t,r)=>{let i=pI.useContext(esn),s=pI.useRef(null),u=erZ(r,s);return pI.useEffect(()=>{let t=s.current;if(t)return i.branches.add(t),()=>{i.branches.delete(t)}},[i.branches]),(0,eu.jsx)(er1.div,{...t,ref:u})}).displayName="DismissableLayerBranch";function esi(){let t=new CustomEvent(est);document.dispatchEvent(t)}function esa(t,r,i,{discrete:s}){let u=i.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:i});if(r&&u.addEventListener(t,r,{once:!0}),s){var h,p;h=u,p=c,h&&wr.flushSync(()=>h.dispatchEvent(p))}else u.dispatchEvent(c)}var eso=pD["useId".toString()]||(()=>void 0),ess=0;let esl=["top","right","bottom","left"],esu=Math.min,esc=Math.max,esh=Math.round,esd=Math.floor,esp=t=>({x:t,y:t}),esf={left:"right",right:"left",bottom:"top",top:"bottom"},esg={start:"end",end:"start"};function esm(t,r,i){return esc(t,esu(r,i))}function esv(t,r){return"function"==typeof t?t(r):t}function esy(t){return t.split("-")[0]}function esx(t){return t.split("-")[1]}function es_(t){return"x"===t?"y":"x"}function esb(t){return"y"===t?"height":"width"}function esw(t){return["top","bottom"].includes(esy(t))?"y":"x"}function esS(t){return es_(esw(t))}function esM(t){return t.replace(/start|end/g,t=>esg[t])}function esA(t){return t.replace(/left|right|bottom|top/g,t=>esf[t])}function esC(t){return"number"!=typeof t?{top:0,right:0,bottom:0,left:0,...t}:{top:t,right:t,bottom:t,left:t}}function esT(t){let{x:r,y:i,width:s,height:u}=t;return{width:s,height:u,top:i,left:r,right:r+s,bottom:i+u,x:r,y:i}}function esE(t,r,i){let s,{reference:u,floating:c}=t,h=esw(r),p=es_(esw(r)),f=esb(p),v=esy(r),y="y"===h,x=u.x+u.width/2-c.width/2,_=u.y+u.height/2-c.height/2,b=u[f]/2-c[f]/2;switch(v){case"top":s={x:x,y:u.y-c.height};break;case"bottom":s={x:x,y:u.y+u.height};break;case"right":s={x:u.x+u.width,y:_};break;case"left":s={x:u.x-c.width,y:_};break;default:s={x:u.x,y:u.y}}switch(esx(r)){case"start":s[p]-=b*(i&&y?-1:1);break;case"end":s[p]+=b*(i&&y?-1:1)}return s}let esI=async(t,r,i)=>{let{placement:s="bottom",strategy:u="absolute",middleware:c=[],platform:h}=i,p=c.filter(Boolean),f=await (null==h.isRTL?void 0:h.isRTL(r)),v=await h.getElementRects({reference:t,floating:r,strategy:u}),{x:y,y:x}=esE(v,s,f),_=s,b={},w=0;for(let i=0;i<p.length;i++){let{name:c,fn:S}=p[i],{x:M,y:A,data:C,reset:T}=await S({x:y,y:x,initialPlacement:s,placement:_,strategy:u,middlewareData:b,rects:v,platform:h,elements:{reference:t,floating:r}});y=null!=M?M:y,x=null!=A?A:x,b={...b,[c]:{...b[c],...C}},T&&w<=50&&(w++,"object"==typeof T&&(T.placement&&(_=T.placement),T.rects&&(v=!0===T.rects?await h.getElementRects({reference:t,floating:r,strategy:u}):T.rects),{x:y,y:x}=esE(v,_,f)),i=-1)}return{x:y,y:x,placement:_,strategy:u,middlewareData:b}};async function esD(t,r){var i;void 0===r&&(r={});let{x:s,y:u,platform:c,rects:h,elements:p,strategy:f}=t,{boundary:v="clippingAncestors",rootBoundary:y="viewport",elementContext:x="floating",altBoundary:_=!1,padding:b=0}=esv(r,t),w=esC(b),S=p[_?"floating"===x?"reference":"floating":x],M=esT(await c.getClippingRect({element:null==(i=await (null==c.isElement?void 0:c.isElement(S)))||i?S:S.contextElement||await (null==c.getDocumentElement?void 0:c.getDocumentElement(p.floating)),boundary:v,rootBoundary:y,strategy:f})),A="floating"===x?{x:s,y:u,width:h.floating.width,height:h.floating.height}:h.reference,C=await (null==c.getOffsetParent?void 0:c.getOffsetParent(p.floating)),T=await (null==c.isElement?void 0:c.isElement(C))&&await (null==c.getScale?void 0:c.getScale(C))||{x:1,y:1},I=esT(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:p,rect:A,offsetParent:C,strategy:f}):A);return{top:(M.top-I.top+w.top)/T.y,bottom:(I.bottom-M.bottom+w.bottom)/T.y,left:(M.left-I.left+w.left)/T.x,right:(I.right-M.right+w.right)/T.x}}function esP(t,r){return{top:t.top-r.height,right:t.right-r.width,bottom:t.bottom-r.height,left:t.left-r.width}}function esR(t){return esl.some(r=>t[r]>=0)}async function esL(t,r){let{placement:i,platform:s,elements:u}=t,c=await (null==s.isRTL?void 0:s.isRTL(u.floating)),h=esy(i),p=esx(i),f="y"===esw(i),v=["left","top"].includes(h)?-1:1,y=c&&f?-1:1,x=esv(r,t),{mainAxis:_,crossAxis:b,alignmentAxis:w}="number"==typeof x?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:x.mainAxis||0,crossAxis:x.crossAxis||0,alignmentAxis:x.alignmentAxis};return p&&"number"==typeof w&&(b="end"===p?-1*w:w),f?{x:b*y,y:_*v}:{x:_*v,y:b*y}}function esk(){return"undefined"!=typeof window}function esO(t){return esF(t)?(t.nodeName||"").toLowerCase():"#document"}function esB(t){var r;return(null==t||null==(r=t.ownerDocument)?void 0:r.defaultView)||window}function esN(t){var r;return null==(r=(esF(t)?t.ownerDocument:t.document)||window.document)?void 0:r.documentElement}function esF(t){return!!esk()&&(t instanceof Node||t instanceof esB(t).Node)}function esz(t){return!!esk()&&(t instanceof Element||t instanceof esB(t).Element)}function esU(t){return!!esk()&&(t instanceof HTMLElement||t instanceof esB(t).HTMLElement)}function esH(t){return!!esk()&&"undefined"!=typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof esB(t).ShadowRoot)}function esG(t){let{overflow:r,overflowX:i,overflowY:s,display:u}=esY(t);return/auto|scroll|overlay|hidden|clip/.test(r+s+i)&&!["inline","contents"].includes(u)}function esV(t){return[":popover-open",":modal"].some(r=>{try{return t.matches(r)}catch(t){return!1}})}function esW(t){let r=esj(),i=esz(t)?esY(t):t;return"none"!==i.transform||"none"!==i.perspective||!!i.containerType&&"normal"!==i.containerType||!r&&!!i.backdropFilter&&"none"!==i.backdropFilter||!r&&!!i.filter&&"none"!==i.filter||["transform","perspective","filter"].some(t=>(i.willChange||"").includes(t))||["paint","layout","strict","content"].some(t=>(i.contain||"").includes(t))}function esj(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function esX(t){return["html","body","#document"].includes(esO(t))}function esY(t){return esB(t).getComputedStyle(t)}function es$(t){return esz(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function esJ(t){if("html"===esO(t))return t;let r=t.assignedSlot||t.parentNode||esH(t)&&t.host||esN(t);return esH(r)?r.host:r}function esZ(t,r,i){var s;void 0===r&&(r=[]),void 0===i&&(i=!0);let u=function t(r){let i=esJ(r);return esX(i)?r.ownerDocument?r.ownerDocument.body:r.body:esU(i)&&esG(i)?i:t(i)}(t),c=u===(null==(s=t.ownerDocument)?void 0:s.body),h=esB(u);if(c){let t=esK(h);return r.concat(h,h.visualViewport||[],esG(u)?u:[],t&&i?esZ(t):[])}return r.concat(u,esZ(u,[],i))}function esK(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function esq(t){let r=esY(t),i=parseFloat(r.width)||0,s=parseFloat(r.height)||0,u=esU(t),c=u?t.offsetWidth:i,h=u?t.offsetHeight:s,p=esh(i)!==c||esh(s)!==h;return p&&(i=c,s=h),{width:i,height:s,$:p}}function esQ(t){return esz(t)?t:t.contextElement}function es0(t){let r=esQ(t);if(!esU(r))return esp(1);let i=r.getBoundingClientRect(),{width:s,height:u,$:c}=esq(r),h=(c?esh(i.width):i.width)/s,p=(c?esh(i.height):i.height)/u;return(!h||!Number.isFinite(h))&&(h=1),(!p||!Number.isFinite(p))&&(p=1),{x:h,y:p}}let es1=esp(0);function es2(t){let r=esB(t);return esj()&&r.visualViewport?{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}:es1}function es3(t,r,i,s){var u,c,h;void 0===r&&(r=!1),void 0===i&&(i=!1);let p=t.getBoundingClientRect(),f=esQ(t),v=esp(1);r&&(s?esz(s)&&(v=es0(s)):v=es0(t));let y=(u=f,void 0===(c=i)&&(c=!1),(h=s)&&(!c||h===esB(u))&&c)?es2(f):esp(0),x=(p.left+y.x)/v.x,_=(p.top+y.y)/v.y,b=p.width/v.x,w=p.height/v.y;if(f){let t=esB(f),r=s&&esz(s)?esB(s):s,i=t,u=esK(i);for(;u&&s&&r!==i;){let t=es0(u),r=u.getBoundingClientRect(),s=esY(u),c=r.left+(u.clientLeft+parseFloat(s.paddingLeft))*t.x,h=r.top+(u.clientTop+parseFloat(s.paddingTop))*t.y;x*=t.x,_*=t.y,b*=t.x,w*=t.y,x+=c,_+=h,u=esK(i=esB(u))}}return esT({width:b,height:w,x,y:_})}function es5(t,r){let i=es$(t).scrollLeft;return r?r.left+i:es3(esN(t)).left+i}function es4(t,r,i){void 0===i&&(i=!1);let s=t.getBoundingClientRect(),u=s.left+r.scrollLeft-(i?0:es5(t,s));return{x:u,y:s.top+r.scrollTop}}function es6(t,r,i){let s;if("viewport"===r)s=function(t,r){let i=esB(t),s=esN(t),u=i.visualViewport,c=s.clientWidth,h=s.clientHeight,p=0,f=0;if(u){c=u.width,h=u.height;let t=esj();(!t||t&&"fixed"===r)&&(p=u.offsetLeft,f=u.offsetTop)}return{width:c,height:h,x:p,y:f}}(t,i);else if("document"===r)s=function(t){let r=esN(t),i=es$(t),s=t.ownerDocument.body,u=esc(r.scrollWidth,r.clientWidth,s.scrollWidth,s.clientWidth),c=esc(r.scrollHeight,r.clientHeight,s.scrollHeight,s.clientHeight),h=-i.scrollLeft+es5(t),p=-i.scrollTop;return"rtl"===esY(s).direction&&(h+=esc(r.clientWidth,s.clientWidth)-u),{width:u,height:c,x:h,y:p}}(esN(t));else if(esz(r))s=function(t,r){let i=es3(t,!0,"fixed"===r),s=i.top+t.clientTop,u=i.left+t.clientLeft,c=esU(t)?es0(t):esp(1),h=t.clientWidth*c.x,p=t.clientHeight*c.y,f=u*c.x;return{width:h,height:p,x:f,y:s*c.y}}(r,i);else{let i=es2(t);s={x:r.x-i.x,y:r.y-i.y,width:r.width,height:r.height}}return esT(s)}function es9(t){return"static"===esY(t).position}function es8(t,r){if(!esU(t)||"fixed"===esY(t).position)return null;if(r)return r(t);let i=t.offsetParent;return esN(t)===i&&(i=i.ownerDocument.body),i}function es7(t,r){let i=esB(t);if(esV(t))return i;if(!esU(t)){let r=esJ(t);for(;r&&!esX(r);){if(esz(r)&&!es9(r))return r;r=esJ(r)}return i}let s=es8(t,r);for(;s&&["table","td","th"].includes(esO(s))&&es9(s);)s=es8(s,r);return s&&esX(s)&&es9(s)&&!esW(s)?i:s||function(t){let r=esJ(t);for(;esU(r)&&!esX(r);){if(esW(r))return r;if(esV(r))break;r=esJ(r)}return null}(t)||i}let ele=async function(t){let r=this.getOffsetParent||es7,i=this.getDimensions,s=await i(t.floating);return{reference:function(t,r,i){let s=esU(r),u=esN(r),c="fixed"===i,h=es3(t,!0,c,r),p={scrollLeft:0,scrollTop:0},f=esp(0);if(s||!s&&!c){if(("body"!==esO(r)||esG(u))&&(p=es$(r)),s){let t=es3(r,!0,c,r);f.x=t.x+r.clientLeft,f.y=t.y+r.clientTop}else u&&(f.x=es5(u))}let v=!u||s||c?esp(0):es4(u,p),y=h.left+p.scrollLeft-f.x-v.x;return{x:y,y:h.top+p.scrollTop-f.y-v.y,width:h.width,height:h.height}}(t.reference,await r(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}},elt={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:r,rect:i,offsetParent:s,strategy:u}=t,c="fixed"===u,h=esN(s),p=!!r&&esV(r.floating);if(s===h||p&&c)return i;let f={scrollLeft:0,scrollTop:0},v=esp(1),y=esp(0),x=esU(s);if((x||!x&&!c)&&(("body"!==esO(s)||esG(h))&&(f=es$(s)),esU(s))){let t=es3(s);v=es0(s),y.x=t.x+s.clientLeft,y.y=t.y+s.clientTop}let _=!h||x||c?esp(0):es4(h,f,!0);return{width:i.width*v.x,height:i.height*v.y,x:i.x*v.x-f.scrollLeft*v.x+y.x+_.x,y:i.y*v.y-f.scrollTop*v.y+y.y+_.y}},getDocumentElement:esN,getClippingRect:function(t){let{element:r,boundary:i,rootBoundary:s,strategy:u}=t,c=[..."clippingAncestors"===i?esV(r)?[]:function(t,r){let i=r.get(t);if(i)return i;let s=esZ(t,[],!1).filter(t=>esz(t)&&"body"!==esO(t)),u=null,c="fixed"===esY(t).position,h=c?esJ(t):t;for(;esz(h)&&!esX(h);){let r=esY(h),i=esW(h);!i&&"fixed"===r.position&&(u=null),(c?!i&&!u:!i&&"static"===r.position&&!!u&&["absolute","fixed"].includes(u.position)||esG(h)&&!i&&function t(r,i){let s=esJ(r);return!(s===i||!esz(s)||esX(s))&&("fixed"===esY(s).position||t(s,i))}(t,h))?s=s.filter(t=>t!==h):u=r,h=esJ(h)}return r.set(t,s),s}(r,this._c):[].concat(i),s],h=c[0],p=c.reduce((t,i)=>{let s=es6(r,i,u);return t.top=esc(s.top,t.top),t.right=esu(s.right,t.right),t.bottom=esu(s.bottom,t.bottom),t.left=esc(s.left,t.left),t},es6(r,h,u));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}},getOffsetParent:es7,getElementRects:ele,getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){let{width:r,height:i}=esq(t);return{width:r,height:i}},getScale:es0,isElement:esz,isRTL:function(t){return"rtl"===esY(t).direction}},eln=t=>({name:"arrow",options:t,async fn(r){let{x:i,y:s,placement:u,rects:c,platform:h,elements:p,middlewareData:f}=r,{element:v,padding:y=0}=esv(t,r)||{};if(null==v)return{};let x=esC(y),_={x:i,y:s},b=es_(esw(u)),w=esb(b),S=await h.getDimensions(v),M="y"===b,A=M?"clientHeight":"clientWidth",C=c.reference[w]+c.reference[b]-_[b]-c.floating[w],T=_[b]-c.reference[b],I=await (null==h.getOffsetParent?void 0:h.getOffsetParent(v)),D=I?I[A]:0;(!D||!await (null==h.isElement?void 0:h.isElement(I)))&&(D=p.floating[A]||c.floating[w]);let P=D/2-S[w]/2-1,R=esu(x[M?"top":"left"],P),L=esu(x[M?"bottom":"right"],P),k=D-S[w]-L,O=D/2-S[w]/2+(C/2-T/2),B=esc(R,esu(O,k)),N=!f.arrow&&null!=esx(u)&&O!==B&&c.reference[w]/2-(O<R?R:L)-S[w]/2<0,F=N?O<R?O-R:O-k:0;return{[b]:_[b]+F,data:{[b]:B,centerOffset:O-B-F,...N&&{alignmentOffset:F}},reset:N}}}),elr=(t,r,i)=>{let s=new Map,u={platform:elt,...i},c={...u.platform,_c:s};return esI(t,r,{...u,platform:c})};var eli="undefined"!=typeof document?pI.useLayoutEffect:pI.useEffect;function ela(t,r){let i,s,u;if(t===r)return!0;if(typeof t!=typeof r)return!1;if("function"==typeof t&&t.toString()===r.toString())return!0;if(t&&r&&"object"==typeof t){if(Array.isArray(t)){if((i=t.length)!==r.length)return!1;for(s=i;0!=s--;)if(!ela(t[s],r[s]))return!1;return!0}if((i=(u=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(s=i;0!=s--;)if(!({}).hasOwnProperty.call(r,u[s]))return!1;for(s=i;0!=s--;){let i=u[s];if("_owner"!==i||!t.$$typeof){if(!ela(t[i],r[i]))return!1}}return!0}return t!=t&&r!=r}function elo(t){return"undefined"==typeof window?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function els(t,r){let i=elo(t);return Math.round(r*i)/i}function ell(t){let r=pI.useRef(t);return eli(()=>{r.current=t}),r}let elu=t=>({name:"arrow",options:t,fn(r){var i;let{element:s,padding:u}="function"==typeof t?t(r):t;if(s&&(i=s,({}).hasOwnProperty.call(i,"current")))return null!=s.current?eln({element:s.current,padding:u}).fn(r):{};return s?eln({element:s,padding:u}).fn(r):{}}}),elc=(t,r)=>({...function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(r){var i,s;let{x:u,y:c,placement:h,middlewareData:p}=r,f=await esL(r,t);return h===(null==(i=p.offset)?void 0:i.placement)&&null!=(s=p.arrow)&&s.alignmentOffset?{}:{x:u+f.x,y:c+f.y,data:{...f,placement:h}}}}}(t),options:[t,r]}),elh=(t,r)=>({...function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(r){let{x:i,y:s,placement:u}=r,{mainAxis:c=!0,crossAxis:h=!1,limiter:p={fn:t=>{let{x:r,y:i}=t;return{x:r,y:i}}},...f}=esv(t,r),v={x:i,y:s},y=await esD(r,f),x=esw(esy(u)),_=es_(x),b=v[_],w=v[x];if(c){let t="y"===_?"top":"left",r="y"===_?"bottom":"right",i=b+y[t],s=b-y[r];b=esc(i,esu(b,s))}if(h){let t="y"===x?"top":"left",r="y"===x?"bottom":"right",i=w+y[t],s=w-y[r];w=esc(i,esu(w,s))}let S=p.fn({...r,[_]:b,[x]:w});return{...S,data:{x:S.x-i,y:S.y-s,enabled:{[_]:c,[x]:h}}}}}}(t),options:[t,r]}),eld=(t,r)=>({...function(t){return void 0===t&&(t={}),{options:t,fn(r){let{x:i,y:s,placement:u,rects:c,middlewareData:h}=r,{offset:p=0,mainAxis:f=!0,crossAxis:v=!0}=esv(t,r),y={x:i,y:s},x=esw(u),_=es_(x),b=y[_],w=y[x],S=esv(p,r),M="number"==typeof S?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(f){let t="y"===_?"height":"width",r=c.reference[_]-c.floating[t]+M.mainAxis,i=c.reference[_]+c.reference[t]-M.mainAxis;b<r?b=r:b>i&&(b=i)}if(v){var A,C;let t="y"===_?"width":"height",r=["top","left"].includes(esy(u)),i=c.reference[x]-c.floating[t]+(r&&(null==(A=h.offset)?void 0:A[x])||0)+(r?0:M.crossAxis),s=c.reference[x]+c.reference[t]+(r?0:(null==(C=h.offset)?void 0:C[x])||0)-(r?M.crossAxis:0);w<i?w=i:w>s&&(w=s)}return{[_]:b,[x]:w}}}}(t),options:[t,r]}),elp=(t,r)=>({...function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(r){var i,s,u,c,h;let{placement:p,middlewareData:f,rects:v,initialPlacement:y,platform:x,elements:_}=r,{mainAxis:b=!0,crossAxis:w=!0,fallbackPlacements:S,fallbackStrategy:M="bestFit",fallbackAxisSideDirection:A="none",flipAlignment:C=!0,...T}=esv(t,r);if(null!=(i=f.arrow)&&i.alignmentOffset)return{};let I=esy(p),D=esw(y),P=esy(y)===y,R=await (null==x.isRTL?void 0:x.isRTL(_.floating)),L=S||(P||!C?[esA(y)]:function(t){let r=esA(t);return[esM(t),r,esM(r)]}(y)),k="none"!==A;!S&&k&&L.push(...function(t,r,i,s){let u=esx(t),c=function(t,r,i){let s=["left","right"],u=["right","left"];switch(t){case"top":case"bottom":if(i)return r?u:s;return r?s:u;case"left":case"right":return r?["top","bottom"]:["bottom","top"];default:return[]}}(esy(t),"start"===i,s);return u&&(c=c.map(t=>t+"-"+u),r&&(c=c.concat(c.map(esM)))),c}(y,C,A,R));let O=[y,...L],B=await esD(r,T),N=[],F=(null==(s=f.flip)?void 0:s.overflows)||[];if(b&&N.push(B[I]),w){let t=function(t,r,i){void 0===i&&(i=!1);let s=esx(t),u=es_(esw(t)),c=esb(u),h="x"===u?s===(i?"end":"start")?"right":"left":"start"===s?"bottom":"top";return r.reference[c]>r.floating[c]&&(h=esA(h)),[h,esA(h)]}(p,v,R);N.push(B[t[0]],B[t[1]])}if(F=[...F,{placement:p,overflows:N}],!N.every(t=>t<=0)){let t=((null==(u=f.flip)?void 0:u.index)||0)+1,r=O[t];if(r)return{data:{index:t,overflows:F},reset:{placement:r}};let i=null==(c=F.filter(t=>t.overflows[0]<=0).sort((t,r)=>t.overflows[1]-r.overflows[1])[0])?void 0:c.placement;if(!i)switch(M){case"bestFit":{let t=null==(h=F.filter(t=>{if(k){let r=esw(t.placement);return r===D||"y"===r}return!0}).map(t=>[t.placement,t.overflows.filter(t=>t>0).reduce((t,r)=>t+r,0)]).sort((t,r)=>t[1]-r[1])[0])?void 0:h[0];t&&(i=t);break}case"initialPlacement":i=y}if(p!==i)return{reset:{placement:i}}}return{}}}}(t),options:[t,r]}),elf=(t,r)=>({...function(t){return void 0===t&&(t={}),{name:"size",options:t,async fn(r){var i,s;let u,c;let{placement:h,rects:p,platform:f,elements:v}=r,{apply:y=()=>{},...x}=esv(t,r),_=await esD(r,x),b=esy(h),w=esx(h),S="y"===esw(h),{width:M,height:A}=p.floating;"top"===b||"bottom"===b?(u=b,c=w===(await (null==f.isRTL?void 0:f.isRTL(v.floating))?"start":"end")?"left":"right"):(c=b,u="end"===w?"top":"bottom");let C=A-_.top-_.bottom,T=M-_.left-_.right,I=esu(A-_[u],C),D=esu(M-_[c],T),P=!r.middlewareData.shift,R=I,L=D;if(null!=(i=r.middlewareData.shift)&&i.enabled.x&&(L=T),null!=(s=r.middlewareData.shift)&&s.enabled.y&&(R=C),P&&!w){let t=esc(_.left,0),r=esc(_.right,0),i=esc(_.top,0),s=esc(_.bottom,0);S?L=M-2*(0!==t||0!==r?t+r:esc(_.left,_.right)):R=A-2*(0!==i||0!==s?i+s:esc(_.top,_.bottom))}await y({...r,availableWidth:L,availableHeight:R});let k=await f.getDimensions(v.floating);return M!==k.width||A!==k.height?{reset:{rects:!0}}:{}}}}(t),options:[t,r]}),elg=(t,r)=>({...function(t){return void 0===t&&(t={}),{name:"hide",options:t,async fn(r){let{rects:i}=r,{strategy:s="referenceHidden",...u}=esv(t,r);switch(s){case"referenceHidden":{let t=esP(await esD(r,{...u,elementContext:"reference"}),i.reference);return{data:{referenceHiddenOffsets:t,referenceHidden:esR(t)}}}case"escaped":{let t=esP(await esD(r,{...u,altBoundary:!0}),i.floating);return{data:{escapedOffsets:t,escaped:esR(t)}}}default:return{}}}}}(t),options:[t,r]}),elm=(t,r)=>({...elu(t),options:[t,r]});var elv=pI.forwardRef((t,r)=>{let{children:i,width:s=10,height:u=5,...c}=t;return(0,eu.jsx)(er1.svg,{...c,ref:r,width:s,height:u,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?i:(0,eu.jsx)("polygon",{points:"0,0 30,0 15,10"})})});elv.displayName="Arrow";var ely="Popper",[elx,el_]=function(t,r=[]){let i=[],s=()=>{let r=i.map(t=>pI.createContext(t));return function(i){let s=i?.[t]||r;return pI.useMemo(()=>({[`__scope${t}`]:{...i,[t]:s}}),[i,s])}};return s.scopeName=t,[function(r,s){let u=pI.createContext(s),c=i.length;function h(r){let{scope:i,children:s,...h}=r,p=i?.[t][c]||u,f=pI.useMemo(()=>h,Object.values(h));return(0,eu.jsx)(p.Provider,{value:f,children:s})}return i=[...i,s],h.displayName=r+"Provider",[h,function(i,h){let p=h?.[t][c]||u,f=pI.useContext(p);if(f)return f;if(void 0!==s)return s;throw Error(`\`${i}\` must be used within \`${r}\``)}]},function(...t){let r=t[0];if(1===t.length)return r;let i=()=>{let i=t.map(t=>({useScope:t(),scopeName:t.scopeName}));return function(t){let s=i.reduce((r,{useScope:i,scopeName:s})=>{let u=i(t)[`__scope${s}`];return{...r,...u}},{});return pI.useMemo(()=>({[`__scope${r.scopeName}`]:s}),[s])}};return i.scopeName=r.scopeName,i}(s,...r)]}(ely),[elb,elw]=elx(ely),elS=t=>{let{__scopePopper:r,children:i}=t,[s,u]=pI.useState(null);return(0,eu.jsx)(elb,{scope:r,anchor:s,onAnchorChange:u,children:i})};elS.displayName=ely;var elM="PopperAnchor",elA=pI.forwardRef((t,r)=>{let{__scopePopper:i,virtualRef:s,...u}=t,c=elw(elM,i),h=pI.useRef(null),p=erZ(r,h);return pI.useEffect(()=>{c.onAnchorChange(s?.current||h.current)}),s?null:(0,eu.jsx)(er1.div,{...u,ref:p})});elA.displayName=elM;var elC="PopperContent",[elT,elE]=elx(elC),elI=pI.forwardRef((t,r)=>{let{__scopePopper:i,side:s="bottom",sideOffset:u=0,align:c="center",alignOffset:h=0,arrowPadding:p=0,avoidCollisions:f=!0,collisionBoundary:v=[],collisionPadding:y=0,sticky:x="partial",hideWhenDetached:_=!1,updatePositionStrategy:b="optimized",onPlaced:w,...S}=t,M=elw(elC,i),[A,C]=pI.useState(null),T=erZ(r,t=>C(t)),[I,D]=pI.useState(null),P=function(t){let[r,i]=pI.useState(void 0);return er2(()=>{if(t){i({width:t.offsetWidth,height:t.offsetHeight});let r=new ResizeObserver(r=>{let s,u;if(!Array.isArray(r)||!r.length)return;let c=r[0];if("borderBoxSize"in c){let t=c.borderBoxSize,r=Array.isArray(t)?t[0]:t;s=r.inlineSize,u=r.blockSize}else s=t.offsetWidth,u=t.offsetHeight;i({width:s,height:u})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}i(void 0)},[t]),r}(I),R=P?.width??0,L=P?.height??0,k="number"==typeof y?y:{top:0,right:0,bottom:0,left:0,...y},O=Array.isArray(v)?v:[v],B=O.length>0,N={padding:k,boundary:O.filter(elL),altBoundary:B},{refs:F,floatingStyles:z,placement:U,isPositioned:H,middlewareData:G}=function(t){void 0===t&&(t={});let{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:u,elements:{reference:c,floating:h}={},transform:p=!0,whileElementsMounted:f,open:v}=t,[y,x]=pI.useState({x:0,y:0,strategy:i,placement:r,middlewareData:{},isPositioned:!1}),[_,b]=pI.useState(s);!ela(_,s)&&b(s);let[w,S]=pI.useState(null),[M,A]=pI.useState(null),C=pI.useCallback(t=>{t!==P.current&&(P.current=t,S(t))},[]),T=pI.useCallback(t=>{t!==R.current&&(R.current=t,A(t))},[]),I=c||w,D=h||M,P=pI.useRef(null),R=pI.useRef(null),L=pI.useRef(y),k=null!=f,O=ell(f),B=ell(u),N=ell(v),F=pI.useCallback(()=>{if(!P.current||!R.current)return;let t={placement:r,strategy:i,middleware:_};B.current&&(t.platform=B.current),elr(P.current,R.current,t).then(t=>{let r={...t,isPositioned:!1!==N.current};z.current&&!ela(L.current,r)&&(L.current=r,wr.flushSync(()=>{x(r)}))})},[_,r,i,B,N]);eli(()=>{!1===v&&L.current.isPositioned&&(L.current.isPositioned=!1,x(t=>({...t,isPositioned:!1})))},[v]);let z=pI.useRef(!1);eli(()=>(z.current=!0,()=>{z.current=!1}),[]),eli(()=>{if(I&&(P.current=I),D&&(R.current=D),I&&D){if(O.current)return O.current(I,D,F);F()}},[I,D,F,O,k]);let U=pI.useMemo(()=>({reference:P,floating:R,setReference:C,setFloating:T}),[C,T]),H=pI.useMemo(()=>({reference:I,floating:D}),[I,D]),G=pI.useMemo(()=>{let t={position:i,left:0,top:0};if(!H.floating)return t;let r=els(H.floating,y.x),s=els(H.floating,y.y);return p?{...t,transform:"translate("+r+"px, "+s+"px)",...elo(H.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:r,top:s}},[i,p,H.floating,y.x,y.y]);return pI.useMemo(()=>({...y,update:F,refs:U,elements:H,floatingStyles:G}),[y,F,U,H,G])}({strategy:"fixed",placement:s+("center"!==c?"-"+c:""),whileElementsMounted:(...t)=>(function(t,r,i,s){let u;void 0===s&&(s={});let{ancestorScroll:c=!0,ancestorResize:h=!0,elementResize:p="function"==typeof ResizeObserver,layoutShift:f="function"==typeof IntersectionObserver,animationFrame:v=!1}=s,y=esQ(t),x=c||h?[...y?esZ(y):[],...esZ(r)]:[];x.forEach(t=>{c&&t.addEventListener("scroll",i,{passive:!0}),h&&t.addEventListener("resize",i)});let _=y&&f?function(t,r){let i,s=null,u=esN(t);function c(){var t;clearTimeout(i),null==(t=s)||t.disconnect(),s=null}return!function h(p,f){void 0===p&&(p=!1),void 0===f&&(f=1),c();let{left:v,top:y,width:x,height:_}=t.getBoundingClientRect();if(!p&&r(),!x||!_)return;let b=esd(y),w=esd(u.clientWidth-(v+x)),S=esd(u.clientHeight-(y+_)),M=esd(v),A={rootMargin:-b+"px "+-w+"px "+-S+"px "+-M+"px",threshold:esc(0,esu(1,f))||1},C=!0;function T(t){let r=t[0].intersectionRatio;if(r!==f){if(!C)return h();r?h(!1,r):i=setTimeout(()=>{h(!1,1e-7)},1e3)}C=!1}try{s=new IntersectionObserver(T,{...A,root:u.ownerDocument})}catch(t){s=new IntersectionObserver(T,A)}s.observe(t)}(!0),c}(y,i):null,b=-1,w=null;p&&(w=new ResizeObserver(t=>{let[s]=t;s&&s.target===y&&w&&(w.unobserve(r),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var t;null==(t=w)||t.observe(r)})),i()}),y&&!v&&w.observe(y),w.observe(r));let S=v?es3(t):null;return v&&function r(){let s=es3(t);S&&(s.x!==S.x||s.y!==S.y||s.width!==S.width||s.height!==S.height)&&i(),S=s,u=requestAnimationFrame(r)}(),i(),()=>{var t;x.forEach(t=>{c&&t.removeEventListener("scroll",i),h&&t.removeEventListener("resize",i)}),null==_||_(),null==(t=w)||t.disconnect(),w=null,v&&cancelAnimationFrame(u)}})(...t,{animationFrame:"always"===b}),elements:{reference:M.anchor},middleware:[elc({mainAxis:u+L,alignmentAxis:h}),f&&elh({mainAxis:!0,crossAxis:!1,limiter:"partial"===x?eld():void 0,...N}),f&&elp({...N}),elf({...N,apply:({elements:t,rects:r,availableWidth:i,availableHeight:s})=>{let{width:u,height:c}=r.reference,h=t.floating.style;h.setProperty("--radix-popper-available-width",`${i}px`),h.setProperty("--radix-popper-available-height",`${s}px`),h.setProperty("--radix-popper-anchor-width",`${u}px`),h.setProperty("--radix-popper-anchor-height",`${c}px`)}}),I&&elm({element:I,padding:p}),elk({arrowWidth:R,arrowHeight:L}),_&&elg({strategy:"referenceHidden",...N})]}),[V,W]=elO(U),j=ese(w);er2(()=>{H&&j?.()},[H,j]);let X=G.arrow?.x,Y=G.arrow?.y,$=G.arrow?.centerOffset!==0,[J,Z]=pI.useState();return er2(()=>{A&&Z(window.getComputedStyle(A).zIndex)},[A]),(0,eu.jsx)("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:H?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[G.transformOrigin?.x,G.transformOrigin?.y].join(" "),...G.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:(0,eu.jsx)(elT,{scope:i,placedSide:V,onArrowChange:D,arrowX:X,arrowY:Y,shouldHideArrow:$,children:(0,eu.jsx)(er1.div,{"data-side":V,"data-align":W,...S,ref:T,style:{...S.style,animation:H?void 0:"none"}})})})});elI.displayName=elC;var elD="PopperArrow",elP={top:"bottom",right:"left",bottom:"top",left:"right"},elR=pI.forwardRef(function(t,r){let{__scopePopper:i,...s}=t,u=elE(elD,i),c=elP[u.placedSide];return(0,eu.jsx)("span",{ref:u.onArrowChange,style:{position:"absolute",left:u.arrowX,top:u.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[u.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[u.placedSide],visibility:u.shouldHideArrow?"hidden":void 0},children:(0,eu.jsx)(elv,{...s,ref:r,style:{...s.style,display:"block"}})})});function elL(t){return null!==t}elR.displayName=elD;var elk=t=>({name:"transformOrigin",options:t,fn(r){let{placement:i,rects:s,middlewareData:u}=r,c=u.arrow?.centerOffset!==0,h=c?0:t.arrowWidth,p=c?0:t.arrowHeight,[f,v]=elO(i),y={start:"0%",center:"50%",end:"100%"}[v],x=(u.arrow?.x??0)+h/2,_=(u.arrow?.y??0)+p/2,b="",w="";return"bottom"===f?(b=c?y:`${x}px`,w=`${-p}px`):"top"===f?(b=c?y:`${x}px`,w=`${s.floating.height+p}px`):"right"===f?(b=`${-p}px`,w=c?y:`${_}px`):"left"===f&&(b=`${s.floating.width+p}px`,w=c?y:`${_}px`),{data:{x:b,y:w}}}});function elO(t){let[r,i="center"]=t.split("-");return[r,i]}var elB=t=>{let{present:r,children:i}=t,s=function(t){var r,i;let[s,u]=pI.useState(),c=pI.useRef({}),h=pI.useRef(t),p=pI.useRef("none");let[f,v]=(r=t?"mounted":"unmounted",i={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},pI.useReducer((t,r)=>i[t][r]??t,r));return pI.useEffect(()=>{let t=elN(c.current);p.current="mounted"===f?t:"none"},[f]),er2(()=>{let r=c.current,i=h.current;if(i!==t){let s=p.current,u=elN(r);t?v("MOUNT"):"none"===u||r?.display==="none"?v("UNMOUNT"):i&&s!==u?v("ANIMATION_OUT"):v("UNMOUNT"),h.current=t}},[t,v]),er2(()=>{if(s){let t;let r=s.ownerDocument.defaultView??window,i=i=>{let u=elN(c.current).includes(i.animationName);if(i.target===s&&u&&(v("ANIMATION_END"),!h.current)){let i=s.style.animationFillMode;s.style.animationFillMode="forwards",t=r.setTimeout(()=>{"forwards"===s.style.animationFillMode&&(s.style.animationFillMode=i)})}},u=t=>{t.target===s&&(p.current=elN(c.current))};return s.addEventListener("animationstart",u),s.addEventListener("animationcancel",i),s.addEventListener("animationend",i),()=>{r.clearTimeout(t),s.removeEventListener("animationstart",u),s.removeEventListener("animationcancel",i),s.removeEventListener("animationend",i)}}v("ANIMATION_END")},[s,v]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:pI.useCallback(t=>{t&&(c.current=getComputedStyle(t)),u(t)},[])}}(r),u="function"==typeof i?i({present:s.isPresent}):pI.Children.only(i),c=erZ(s.ref,function(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?t.ref:(i=(r=Object.getOwnPropertyDescriptor(t,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?t.props.ref:t.props.ref||t.ref}(u));return"function"==typeof i||s.isPresent?pI.cloneElement(u,{ref:c}):null};elB.displayName="Presence";function elN(t){return t?.animationName||"none"}var elF=pI.forwardRef((t,r)=>(0,eu.jsx)(er1.span,{...t,ref:r,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));elF.displayName="VisuallyHidden";var[elz,elU]=function(t,r=[]){let i=[],s=()=>{let r=i.map(t=>pI.createContext(t));return function(i){let s=i?.[t]||r;return pI.useMemo(()=>({[`__scope${t}`]:{...i,[t]:s}}),[i,s])}};return s.scopeName=t,[function(r,s){let u=pI.createContext(s),c=i.length;i=[...i,s];let h=r=>{let{scope:i,children:s,...h}=r,p=i?.[t]?.[c]||u,f=pI.useMemo(()=>h,Object.values(h));return(0,eu.jsx)(p.Provider,{value:f,children:s})};return h.displayName=r+"Provider",[h,function(i,h){let p=h?.[t]?.[c]||u,f=pI.useContext(p);if(f)return f;if(void 0!==s)return s;throw Error(`\`${i}\` must be used within \`${r}\``)}]},function(...t){let r=t[0];if(1===t.length)return r;let i=()=>{let i=t.map(t=>({useScope:t(),scopeName:t.scopeName}));return function(t){let s=i.reduce((r,{useScope:i,scopeName:s})=>{let u=i(t)[`__scope${s}`];return{...r,...u}},{});return pI.useMemo(()=>({[`__scope${r.scopeName}`]:s}),[s])}};return i.scopeName=r.scopeName,i}(s,...r)]}("Tooltip",[el_]),elH=el_(),elG="TooltipProvider",elV="tooltip.open",[elW,elj]=elz(elG);var elX="Tooltip",[elY,el$]=elz(elX),elJ=t=>{let{__scopeTooltip:r,children:i,open:s,defaultOpen:u=!1,onOpenChange:c,disableHoverableContent:h,delayDuration:p}=t,f=elj(elX,t.__scopeTooltip),v=elH(r),[y,x]=pI.useState(null),_=function(t){let[r,i]=pI.useState(eso());return er2(()=>{i(t=>t??String(ess++))},[t]),t||(r?`radix-${r}`:"")}(),b=pI.useRef(0),w=h??f.disableHoverableContent,S=p??f.delayDuration,M=pI.useRef(!1),[A=!1,C]=function({prop:t,defaultProp:r,onChange:i=()=>{}}){let[s,u]=function({defaultProp:t,onChange:r}){let i=pI.useState(t),[s]=i,u=pI.useRef(s),c=ese(r);return pI.useEffect(()=>{u.current!==s&&(c(s),u.current=s)},[s,u,c]),i}({defaultProp:r,onChange:i}),c=void 0!==t,h=c?t:s,p=ese(i);return[h,pI.useCallback(r=>{if(c){let i="function"==typeof r?r(t):r;i!==t&&p(i)}else u(r)},[c,t,u,p])]}({prop:s,defaultProp:u,onChange:t=>{t?(f.onOpen(),document.dispatchEvent(new CustomEvent(elV))):f.onClose(),c?.(t)}}),T=pI.useMemo(()=>A?M.current?"delayed-open":"instant-open":"closed",[A]),I=pI.useCallback(()=>{window.clearTimeout(b.current),b.current=0,M.current=!1,C(!0)},[C]),D=pI.useCallback(()=>{window.clearTimeout(b.current),b.current=0,C(!1)},[C]),P=pI.useCallback(()=>{window.clearTimeout(b.current),b.current=window.setTimeout(()=>{M.current=!0,C(!0),b.current=0},S)},[S,C]);return pI.useEffect(()=>()=>{b.current&&(window.clearTimeout(b.current),b.current=0)},[]),(0,eu.jsx)(elS,{...v,children:(0,eu.jsx)(elY,{scope:r,contentId:_,open:A,stateAttribute:T,trigger:y,onTriggerChange:x,onTriggerEnter:pI.useCallback(()=>{f.isOpenDelayed?P():I()},[f.isOpenDelayed,P,I]),onTriggerLeave:pI.useCallback(()=>{w?D():(window.clearTimeout(b.current),b.current=0)},[D,w]),onOpen:I,onClose:D,disableHoverableContent:w,children:i})})};elJ.displayName=elX;var elZ="TooltipTrigger",elK=pI.forwardRef((t,r)=>{let{__scopeTooltip:i,...s}=t,u=el$(elZ,i),c=elj(elZ,i),h=elH(i),p=erZ(r,pI.useRef(null),u.onTriggerChange),f=pI.useRef(!1),v=pI.useRef(!1),y=pI.useCallback(()=>f.current=!1,[]);return pI.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),(0,eu.jsx)(elA,{asChild:!0,...h,children:(0,eu.jsx)(er1.button,{"aria-describedby":u.open?u.contentId:void 0,"data-state":u.stateAttribute,...s,ref:p,onPointerMove:eo7(t.onPointerMove,t=>{"touch"!==t.pointerType&&!v.current&&!c.isPointerInTransitRef.current&&(u.onTriggerEnter(),v.current=!0)}),onPointerLeave:eo7(t.onPointerLeave,()=>{u.onTriggerLeave(),v.current=!1}),onPointerDown:eo7(t.onPointerDown,()=>{f.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:eo7(t.onFocus,()=>{!f.current&&u.onOpen()}),onBlur:eo7(t.onBlur,u.onClose),onClick:eo7(t.onClick,u.onClose)})})});elK.displayName=elZ;var elq="TooltipPortal",[elQ,el0]=elz(elq,{forceMount:void 0});var el1="TooltipContent",el2=pI.forwardRef((t,r)=>{let i=el0(el1,t.__scopeTooltip),{forceMount:s=i.forceMount,side:u="top",...c}=t,h=el$(el1,t.__scopeTooltip);return(0,eu.jsx)(elB,{present:s||h.open,children:h.disableHoverableContent?(0,eu.jsx)(el6,{side:u,...c,ref:r}):(0,eu.jsx)(el3,{side:u,...c,ref:r})})}),el3=pI.forwardRef((t,r)=>{let i=el$(el1,t.__scopeTooltip),s=elj(el1,t.__scopeTooltip),u=pI.useRef(null),c=erZ(r,u),[h,p]=pI.useState(null),{trigger:f,onClose:v}=i,y=u.current,{onPointerInTransitChange:x}=s,_=pI.useCallback(()=>{p(null),x(!1)},[x]),b=pI.useCallback((t,r)=>{let i=t.currentTarget,s={x:t.clientX,y:t.clientY},u=function(t,r){let i=Math.abs(r.top-t.y),s=Math.abs(r.bottom-t.y),u=Math.abs(r.right-t.x),c=Math.abs(r.left-t.x);switch(Math.min(i,s,u,c)){case c:return"left";case u:return"right";case i:return"top";case s:return"bottom";default:throw Error("unreachable")}}(s,i.getBoundingClientRect()),c=function(t,r,i=5){let s=[];switch(r){case"top":s.push({x:t.x-i,y:t.y+i},{x:t.x+i,y:t.y+i});break;case"bottom":s.push({x:t.x-i,y:t.y-i},{x:t.x+i,y:t.y-i});break;case"left":s.push({x:t.x+i,y:t.y-i},{x:t.x+i,y:t.y+i});break;case"right":s.push({x:t.x-i,y:t.y-i},{x:t.x-i,y:t.y+i})}return s}(s,u);p(function(t){let r=t.slice();return r.sort((t,r)=>{if(t.x<r.x)return -1;if(t.x>r.x)return 1;if(t.y<r.y)return -1;else if(t.y>r.y)return 1;else return 0}),function(t){if(t.length<=1)return t.slice();let r=[];for(let i=0;i<t.length;i++){let s=t[i];for(;r.length>=2;){let t=r[r.length-1],i=r[r.length-2];if((t.x-i.x)*(s.y-i.y)>=(t.y-i.y)*(s.x-i.x))r.pop();else break}r.push(s)}r.pop();let i=[];for(let r=t.length-1;r>=0;r--){let s=t[r];for(;i.length>=2;){let t=i[i.length-1],r=i[i.length-2];if((t.x-r.x)*(s.y-r.y)>=(t.y-r.y)*(s.x-r.x))i.pop();else break}i.push(s)}return(i.pop(),1===r.length&&1===i.length&&r[0].x===i[0].x&&r[0].y===i[0].y)?r:r.concat(i)}(r)}([...c,...function(t){let{top:r,right:i,bottom:s,left:u}=t;return[{x:u,y:r},{x:i,y:r},{x:i,y:s},{x:u,y:s}]}(r.getBoundingClientRect())])),x(!0)},[x]);return pI.useEffect(()=>()=>_(),[_]),pI.useEffect(()=>{if(f&&y){let t=t=>b(t,y),r=t=>b(t,f);return f.addEventListener("pointerleave",t),y.addEventListener("pointerleave",r),()=>{f.removeEventListener("pointerleave",t),y.removeEventListener("pointerleave",r)}}},[f,y,b,_]),pI.useEffect(()=>{if(h){let t=t=>{let r=t.target,i={x:t.clientX,y:t.clientY},s=f?.contains(r)||y?.contains(r),u=!function(t,r){let{x:i,y:s}=t,u=!1;for(let t=0,c=r.length-1;t<r.length;c=t++){let h=r[t].x,p=r[t].y,f=r[c].x,v=r[c].y;p>s!=v>s&&i<(f-h)*(s-p)/(v-p)+h&&(u=!u)}return u}(i,h);s?_():u&&(_(),v())};return document.addEventListener("pointermove",t),()=>document.removeEventListener("pointermove",t)}},[f,y,h,v,_]),(0,eu.jsx)(el6,{...t,ref:c})}),[el5,el4]=elz(elX,{isInside:!1}),el6=pI.forwardRef((t,r)=>{let{__scopeTooltip:i,children:s,"aria-label":u,onEscapeKeyDown:c,onPointerDownOutside:h,...p}=t,f=el$(el1,i),v=elH(i),{onClose:y}=f;return pI.useEffect(()=>(document.addEventListener(elV,y),()=>document.removeEventListener(elV,y)),[y]),pI.useEffect(()=>{if(f.trigger){let t=t=>{let r=t.target;r?.contains(f.trigger)&&y()};return window.addEventListener("scroll",t,{capture:!0}),()=>window.removeEventListener("scroll",t,{capture:!0})}},[f.trigger,y]),(0,eu.jsx)(esr,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:h,onFocusOutside:t=>t.preventDefault(),onDismiss:y,children:(0,eu.jsxs)(elI,{"data-state":f.stateAttribute,...v,...p,ref:r,style:{...p.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,eu.jsx)(erQ,{children:s}),(0,eu.jsx)(el5,{scope:i,isInside:!0,children:(0,eu.jsx)(elF,{id:f.contentId,role:"tooltip",children:u||s})})]})})});el2.displayName=el1;var el9="TooltipArrow",el8=pI.forwardRef((t,r)=>{let{__scopeTooltip:i,...s}=t,u=elH(i);return el4(el9,i).isInside?null:(0,eu.jsx)(elR,{...u,...s,ref:r})});el8.displayName=el9;function el7(t,r){if(null==t)return{};var i,s,u=function(t,r){if(null==t)return{};var i,s,u={},c=Object.keys(t);for(s=0;s<c.length;s++)i=c[s],!(r.indexOf(i)>=0)&&(u[i]=t[i]);return u}(t,r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(s=0;s<c.length;s++){if(i=c[s],!(r.indexOf(i)>=0))Object.prototype.propertyIsEnumerable.call(t,i)&&(u[i]=t[i])}}return u}!function(t){t[t.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",t[t.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",t[t.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",t[t.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",t[t.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",t[t.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",t[t.THEME_ERROR=6]="THEME_ERROR",t[t.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",t[t.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",t[t.EMPTY_KEY=9]="EMPTY_KEY"}(W||(W={}));let eue={[W.UNSUPPORTED_INPUT]:(t,r)=>[`An input with type \`${t}\` input was found at path \`${r}\` but it's not supported yet.`],[W.NO_COMPONENT_FOR_TYPE]:(t,r)=>[`Type \`${t}\` found at path \`${r}\` can't be displayed in panel because no component supports it yet.`],[W.UNKNOWN_INPUT]:(t,r)=>[`input at path \`${t}\` is not recognized.`,r],[W.DUPLICATE_KEYS]:(t,r,i)=>[`Key \`${t}\` of path \`${r}\` already exists at path \`${i}\`. Even nested keys need to be unique. Rename one of the keys.`],[W.ALREADY_REGISTERED_TYPE]:t=>[`Type ${t} has already been registered. You can't register a component with the same type.`],[W.CLIPBOARD_ERROR]:t=>["Error copying the value",t],[W.THEME_ERROR]:(t,r)=>[`Error accessing the theme \`${t}.${r}\` value.`],[W.PATH_DOESNT_EXIST]:t=>[`Error getting the value at path \`${t}\`. There is probably an error in your \`render\` function.`],[W.PATH_DOESNT_EXIST]:t=>[`Error accessing the value at path \`${t}\``],[W.INPUT_TYPE_OVERRIDE]:(t,r,i)=>[`Input at path \`${t}\` already exists with type: \`${r}\`. Its type cannot be overridden with type \`${i}\`.`],[W.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function eut(t,r,...i){let[s,...u]=eue[r](...i);console[t]("LEVA: "+s,...u)}let eun=eut.bind(null,"warn"),eur=eut.bind(null,"log"),eui=["value"],eua=["schema"],euo=["value"],eus=[],eul={};function euu(t){let{value:r}=t,i=el7(t,eui);for(let t of eus){let s=t(r,i);if(s)return s}}function euc(t,r){let{schema:i}=r,s=el7(r,eua);if(t in eul){eun(W.ALREADY_REGISTERED_TYPE,t);return}eus.push((r,s)=>i(r,s)&&t),eul[t]=s}let euh=()=>"__CUSTOM__PLUGIN__"+Math.random().toString(36).substr(2,9);function eud(t){return t}function eup(t,r,i,s){let{normalize:u}=eul[t];if(u)return u(r,i,s);if("object"!=typeof r||!("value"in r))return{value:r};let{value:c}=r;return{value:c,settings:el7(r,euo)}}function euf(t,r,i){let{format:s}=eul[t];return s?s(r,i):r}function eug(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,s)}return i}function eum(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?eug(Object(i),!0).forEach(function(r){var s,u,c;s=t,u=r,c=i[r],u in s?Object.defineProperty(s,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[u]=c}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):eug(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}let euv=(t,r,i)=>t>i?i:t<r?r:t,euy=t=>{if(""===t||"number"==typeof t)return t;try{let r=function t(r){if(isNaN(Number(r))){if(euM.test(r)){let i=r.replace(euM,(r,i)=>String(t(i)));return t(i)}if(euA.test(r))return t(r.replace(euA,(t,r,i)=>String(Math.pow(Number(r),Number(i)))));else if(euC.test(r))return t(r.replace(euC,(t,r,i)=>String(Number(r)*Number(i))));else if(euT.test(r))return t(r.replace(euT,(t,r,i)=>{if(0!=i)return String(Number(r)/Number(i));throw Error("Division by zero")}));else if(euE.test(r))return t(r.replace(euE,(t,r,i)=>String(Number(r)+Number(i))));else if(euI.test(r))return t(r.replace(euI,(t,r,i)=>String(Number(r)-Number(i))))}return Number(r)}(t);if(!isNaN(r))return r}catch(t){}return parseFloat(t)},eux=Math.log(10);function eu_(t){let r=Math.abs(+String(t).replace(".",""));if(0===r)return .01;for(;0!==r&&r%10==0;)r/=10;return Math.max(Math.pow(10,Math.floor(Math.log10(Math.abs(t)))-(Math.floor(Math.log(r)/eux)+1)),.001)}let eub=(t,r,i)=>i===r?0:(euv(t,r,i)-r)/(i-r),euw=(t,r,i)=>t*(i-r)+r,euS=()=>"_"+Math.random().toString(36).substr(2,9),euM=/\(([0-9+\-*/^ .]+)\)/,euA=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,euC=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,euT=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,euE=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,euI=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function euD(t){return"[object Object]"===Object.prototype.toString.call(t)}let euP=t=>euD(t)&&0===Object.keys(t).length;!function(t){t.BUTTON="BUTTON",t.BUTTON_GROUP="BUTTON_GROUP",t.MONITOR="MONITOR",t.FOLDER="FOLDER"}(j||(j={})),!function(t){t.SELECT="SELECT",t.IMAGE="IMAGE",t.NUMBER="NUMBER",t.COLOR="COLOR",t.STRING="STRING",t.BOOLEAN="BOOLEAN",t.INTERVAL="INTERVAL",t.VECTOR3D="VECTOR3D",t.VECTOR2D="VECTOR2D"}(X||(X={}));let euR=["type","__customInput"],euL=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],euk=["type"];function euO(t,r,i,s,u){let{value:c,type:h,settings:p}=t;t.value=euN({type:h,value:c,settings:p},r,i,s),t.fromPanel=u}let euB=function(t,r,i){this.type="LEVA_ERROR",this.message="LEVA: "+t,this.previousValue=r,this.error=i};function euN({type:t,value:r,settings:i},s,u,c){let h;let p="SELECT"!==t&&"function"==typeof s?s(r):s;try{h=function(t,r,i,s,u,c){let{sanitize:h}=eul[t];return h?h(r,i,s,u,c):r}(t,p,i,r,u,c)}catch(t){throw new euB(`The value \`${s}\` did not result in a correct value.`,r,t)}return er4(h,r)?r:h}let euF=(t,r,i=!1)=>{let s=0;return function(){let u=arguments,c=i&&!s,h=()=>t.apply(this,u);window.clearTimeout(s),s=window.setTimeout(h,r),c&&h()}},euz=t=>t.shiftKey?5:t.altKey?.2:1,euU=["value"],euH=["min","max"],euG=(t,{min:r=-1/0,max:i=1/0,suffix:s})=>{let u=parseFloat(t);if(""===t||isNaN(u))throw Error("Invalid number");let c=euv(u,r,i);return s?c+s:c},euV=t=>{let{value:r}=t,i=el7(t,euU),{min:s=-1/0,max:u=1/0}=i,c=el7(i,euH),h=parseFloat(r),p="string"==typeof r?r.substring((""+h).length):void 0;h=euv(h,s,u);let f=i.step;!f&&(Number.isFinite(s)?f=Number.isFinite(u)?+(Math.abs(u-s)/100).toPrecision(1):+(Math.abs(h-s)/100).toPrecision(1):Number.isFinite(u)&&(f=+(Math.abs(u-h)/100).toPrecision(1)));let v=f?10*eu_(f):eu_(h);return f=f||v/10,{value:p?h+p:h,settings:eum({initialValue:h,step:f,pad:Math.round(euv(Math.log10(1/v),0,2)),min:s,max:u,suffix:p},c)}},euW=(t,{step:r,initialValue:i})=>{let s=Math.round((t-i)/r);return i+s*r};var euj=Object.freeze({__proto__:null,schema:t=>{if("number"==typeof t)return!0;if("string"==typeof t){let r=parseFloat(t);return!isNaN(r)&&t.substring((""+r).length).trim().length<4}return!1},sanitize:euG,format:(t,{pad:r=0,suffix:i})=>{let s=parseFloat(t).toFixed(r);return i?s+i:s},normalize:euV,sanitizeStep:euW});function euX(){return(euX=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}).apply(this,arguments)}let euY=(0,pI.createContext)({});function eu$(){return(0,pI.useContext)(euY)}let euJ=(0,pI.createContext)(null),euZ=(0,pI.createContext)(null),euK=(0,pI.createContext)(null);function euq(){return(0,pI.useContext)(euZ)}let euQ=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function eu0(t,r){let[i,s]=t.split(" "),u={};return"none"!==i&&(u.boxShadow=`${r.inset?"inset ":""}0 0 0 $borderWidths${[r.key]} $colors${"default"!==i&&i||r.borderColor}`),s&&(u.backgroundColor=s),u}let eu1={$inputStyle:()=>t=>eu0(t,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>t=>eu0(t,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>t=>eu0(t,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>t=>eu0(t,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:eu2,css:eu3,createTheme:eu5,globalCss:eu4,keyframes:eu6}=eom({prefix:"leva",theme:euQ(),utils:eum(eum({},eu1),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:t=>({"&:focus":eu1.$focusStyle()(t)}),$focusWithin:t=>({"&:focus-within":eu1.$focusStyle()(t)}),$hover:t=>({"&:hover":eu1.$hoverStyle()(t)}),$active:t=>({"&:active":eu1.$activeStyle()(t)})})}),eu9=eu4({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function eu8(t,r){let{theme:i}=(0,pI.useContext)(euJ);if(!(t in i)||!(r in i[t]))return eun(W.THEME_ERROR,t,r),"";let s=r;for(;;){let r=i[t][s];if("string"!=typeof r||"$"!==r.charAt(0))return r;s=r.substr(1)}}let eu7=eu2("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),ece=eu2("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${eu7}`]:{paddingLeft:0}}),ect=eu2(ece,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),ecn=eu2("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),ecr=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],eci=["onUpdate"];function eca(t){let{innerLabel:r,value:i,onUpdate:s,onChange:u,onKeyDown:c,type:h,id:p,inputType:f="text",rows:v=0}=t,y=el7(t,ecr),{id:x,emitOnEditStart:_,emitOnEditEnd:b,disabled:w}=eu$(),S=(0,pI.useRef)(null),M=v>0,A=(0,pI.useCallback)(t=>r=>{t(r.currentTarget.value)},[]);pI.useEffect(()=>{let t=S.current,r=A(t=>{s(t),b()});return null==t||t.addEventListener("blur",r),()=>null==t?void 0:t.removeEventListener("blur",r)},[A,s,b]);let C=(0,pI.useCallback)(t=>{"Enter"===t.key&&A(s)(t)},[A,s]),T=Object.assign({as:M?"textarea":"input"},M?{rows:v}:{},y);return pI.createElement(ecn,{textArea:M},r&&"string"==typeof r?pI.createElement(ece,null,r):r,pI.createElement(eu7,euX({levaType:h,ref:S,id:p||x,type:f,autoComplete:"off",spellCheck:"false",value:i,onChange:A(u),onFocus:()=>_(),onKeyPress:C,onKeyDown:c,disabled:w},T)))}function eco(t){let{onUpdate:r}=t,i=el7(t,eci),s=(0,pI.useCallback)(t=>r(euy(t)),[r]),u=(0,pI.useCallback)(t=>{let i="ArrowUp"===t.key?1:"ArrowDown"===t.key?-1:0;if(i){t.preventDefault();let s=t.altKey?.1:t.shiftKey?10:1;r(t=>parseFloat(t)+i*s)}},[r]);return pI.createElement(eca,euX({},i,{onUpdate:s,onKeyDown:u,type:"number"}))}let ecs=eu2("div",{}),ecl=eu2("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),ecu=eu2("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${ecl}::after`]:{opacity:.6},[`${ecs}:hover > & + ${ecl}::after`]:{opacity:.6},[`${ecs}:hover > & > svg`]:{opacity:1}}),ecc=eu2("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${ecs}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),ech=eu2("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${ecc} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),ecd=eu2(ech,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),ecp=eu2("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),ecf=eu2("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),ecg=eu2("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),ecm=eu2("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${ecg}`]:{pointerEvents:"auto"}}}}}),ecv=eu2("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),ecy=eu2("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),ecx=eu2(el8,{fill:"$toolTipBackground"});function ec_({children:t}){let{className:r}=(0,pI.useContext)(euJ);return pI.createElement(er3,{className:r},t)}let ecb=["align"];function ecw(){let{id:t,disable:r,disabled:i}=eu$();return pI.createElement(pI.Fragment,null,pI.createElement(ecf,{id:t+"__disable",type:"checkbox",checked:!i,onChange:()=>r(!i)}),pI.createElement("label",{htmlFor:t+"__disable"}))}function ecS(t){let{id:r,optional:i,hint:s}=eu$(),u=t.htmlFor||(r?{htmlFor:r}:null),c=s||"string"!=typeof t.children?null:{title:t.children};return pI.createElement(pI.Fragment,null,i&&pI.createElement(ecw,null),void 0!==s?pI.createElement(elJ,null,pI.createElement(elK,{asChild:!0},pI.createElement(ecg,euX({},u,t))),pI.createElement(el2,{side:"top",sideOffset:2},pI.createElement(ecy,null,s,pI.createElement(ecx,null)))):pI.createElement(ecg,euX({},u,c,t)))}function ecM(t){let{align:r}=t,i=el7(t,ecb),{value:s,label:u,key:c,disabled:h}=eu$(),{hideCopyButton:p}=(0,pI.useContext)(euK),f=!p&&void 0!==c,[v,y]=(0,pI.useState)(!1),x=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[c]:null!=s?s:""})),y(!0)}catch(t){eun(W.CLIPBOARD_ERROR,{[c]:s})}};return pI.createElement(ecp,{align:r,onPointerLeave:()=>y(!1)},pI.createElement(ecS,i),f&&!h&&pI.createElement("div",{title:`Click to copy ${"string"==typeof u?u:c} value`},v?pI.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},pI.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),pI.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):pI.createElement("svg",{onClick:x,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},pI.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),pI.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}let ecA=["toggled"],ecC=eu2("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function ecT(t){let{toggled:r}=t,i=el7(t,ecA);return pI.createElement(ecC,euX({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${r?0:-90}deg)`}},i),pI.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}let ecE=["input"];function ecI(t){let{input:r}=t,i=el7(t,ecE);return r?pI.createElement(ecd,i):pI.createElement(ech,i)}function ecD({value:t,type:r,settings:i,setValue:s}){let[u,c]=(0,pI.useState)(euf(r,t,i)),h=(0,pI.useRef)(t),p=(0,pI.useRef)(i);p.current=i;let f=(0,pI.useCallback)(t=>c(euf(r,t,p.current)),[r]),v=(0,pI.useCallback)(t=>{try{s(t)}catch(i){let{type:t,previousValue:r}=i;if("LEVA_ERROR"!==t)throw i;f(r)}},[f,s]);return(0,pI.useEffect)(()=>{!er4(t,h.current)&&f(t),h.current=t},[t,f]),{displayValue:u,onChange:c,onUpdate:v}}function ecP(t,r){var i,s,u;let{emitOnEditStart:c,emitOnEditEnd:h}=eu$();return i=r=>{r.first&&(document.body.classList.add("leva__panel__dragged"),null==c||c());let i=t(r);return r.last&&(document.body.classList.remove("leva__panel__dragged"),null==h||h()),i},s=r,u=eoK,eoJ.set(u.key,u.engine),eoZ.set(u.key,u.resolver),eo8({drag:i},s||{},"drag")}function ecR(){let t=(0,pI.useRef)(null),r=(0,pI.useRef)({x:0,y:0}),i=(0,pI.useCallback)(i=>{Object.assign(r.current,i),t.current&&(t.current.style.transform=`translate3d(${r.current.x}px, ${r.current.y}px, 0)`)},[]);return[t,i]}let ecL=["__refCount"],eck=(t,r)=>t[r]?el7(t[r],ecL):null,ecO=eu2("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),ecB=eu2("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),ecN=eu2("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),ecF=eu2("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),ecz=eu2("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function ecU({value:t,min:r,max:i,onDrag:s,step:u,initialValue:c}){let h=(0,pI.useRef)(null),p=(0,pI.useRef)(null),f=(0,pI.useRef)(0),v=eu8("sizes","scrubberWidth"),y=ecP(({event:y,first:x,xy:[_],movement:[b],memo:w})=>{if(x){let{width:s,left:u}=h.current.getBoundingClientRect();f.current=s-parseFloat(v),w=(null==y?void 0:y.target)===p.current?t:euw((_-u)/s,r,i)}return s(euW(w+euw(b/f.current,0,i-r),{step:u,initialValue:c})),w}),x=eub(t,r,i);return pI.createElement(ecF,euX({ref:h},y()),pI.createElement(ecB,null,pI.createElement(ecz,{style:{left:0,right:`${(1-x)*100}%`}})),pI.createElement(ecN,{ref:p,style:{left:`calc(${x} * (100% - ${v}))`}}))}let ecH=pI.memo(({label:t,onUpdate:r,step:i,innerLabelTrim:s})=>{let[u,c]=(0,pI.useState)(!1),h=ecP(({active:t,delta:[s],event:u,memo:h=0})=>(c(t),Math.abs(h+=s/2)>=1&&(r(t=>parseFloat(t)+Math.floor(h)*i*euz(u)),h=0),h));return pI.createElement(ect,euX({dragging:u,title:t.length>1?t:""},h()),t.slice(0,s))});function ecG({label:t,id:r,displayValue:i,onUpdate:s,onChange:u,settings:c,innerLabelTrim:h=1}){let p=h>0&&pI.createElement(ecH,{label:t,step:c.step,onUpdate:s,innerLabelTrim:h});return pI.createElement(eco,{id:r,value:String(i),onUpdate:s,onChange:u,innerLabel:p})}let{sanitizeStep:ecV}=euj;var ecW=eum({component:function(){let t=eu$(),{label:r,value:i,onUpdate:s,settings:u,id:c}=t,{min:h,max:p}=u,f=p!==1/0&&h!==-1/0;return pI.createElement(ecI,{input:!0},pI.createElement(ecM,null,r),pI.createElement(ecO,{hasRange:f},f&&pI.createElement(ecU,euX({value:parseFloat(i),onDrag:s},u)),pI.createElement(ecG,euX({},t,{id:c,label:"value",innerLabelTrim:f?0:1}))))}},el7(euj,["sanitizeStep"])),ecj=Object.freeze({__proto__:null,schema:(t,r)=>eii().schema({options:eii().passesAnyOf(eii().object(),eii().array())}).test(r),sanitize:(t,{values:r})=>{if(0>r.indexOf(t))throw Error("Selected value doesn't match Select options");return t},format:(t,{values:r})=>r.indexOf(t),normalize:t=>{let r,i,{value:s,options:u}=t;return Array.isArray(u)?(i=u,r=u.map(t=>String(t))):(i=Object.values(u),r=Object.keys(u)),"value"in t?!i.includes(s)&&(r.unshift(String(s)),i.unshift(s)):s=i[0],!Object.values(u).includes(s)&&(u[String(s)]=s),{value:s,settings:{keys:r,values:i}}}});let ecX=eu2("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),ecY=eu2("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),ec$=eu2("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${ecY}:focus + &`]:{$focusStyle:""},[`${ecY}:hover + &`]:{$hoverStyle:""}});function ecJ({displayValue:t,value:r,onUpdate:i,id:s,settings:u,disabled:c}){let{keys:h,values:p}=u,f=(0,pI.useRef)();return r===p[t]&&(f.current=h[t]),pI.createElement(ecX,null,pI.createElement(ecY,{id:s,value:t,onChange:t=>i(p[Number(t.currentTarget.value)]),disabled:c},h.map((t,r)=>pI.createElement("option",{key:t,value:r},t))),pI.createElement(ec$,null,f.current),pI.createElement(ecT,{toggled:!0}))}var ecZ=eum({component:function(){let{label:t,value:r,displayValue:i,onUpdate:s,id:u,disabled:c,settings:h}=eu$();return pI.createElement(ecI,{input:!0},pI.createElement(ecM,null,t),pI.createElement(ecJ,{id:u,value:r,displayValue:i,onUpdate:s,settings:h,disabled:c}))}},ecj),ecK=Object.freeze({__proto__:null,schema:t=>eii().string().test(t),sanitize:t=>{if("string"!=typeof t)throw Error("Invalid string");return t},normalize:({value:t,editable:r=!0,rows:i=!1})=>({value:t,settings:{editable:r,rows:"number"==typeof i?i:i?5:0}})});let ecq=["displayValue","onUpdate","onChange","editable"],ecQ=eu2("div",{whiteSpace:"pre-wrap"});function ec0(t){let{displayValue:r,onUpdate:i,onChange:s,editable:u=!0}=t,c=el7(t,ecq);return u?pI.createElement(eca,euX({value:r,onUpdate:i,onChange:s},c)):pI.createElement(ecQ,null,r)}var ec1=eum({component:function(){let{label:t,settings:r,displayValue:i,onUpdate:s,onChange:u}=eu$();return pI.createElement(ecI,{input:!0},pI.createElement(ecM,null,t),pI.createElement(ec0,euX({displayValue:i,onUpdate:s,onChange:u},r)))}},ecK),ec2=Object.freeze({__proto__:null,schema:t=>eii().boolean().test(t),sanitize:t=>{if("boolean"!=typeof t)throw Error("Invalid boolean");return t}});let ec3=eu2("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function ec5({value:t,onUpdate:r,id:i,disabled:s}){return pI.createElement(ec3,null,pI.createElement("input",{id:i,type:"checkbox",checked:t,onChange:t=>r(t.currentTarget.checked),disabled:s}),pI.createElement("label",{htmlFor:i},pI.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},pI.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}var ec4=eum({component:function(){let{label:t,value:r,onUpdate:i,disabled:s,id:u}=eu$();return pI.createElement(ecI,{input:!0},pI.createElement(ecM,null,t),pI.createElement(ec5,{value:r,onUpdate:i,id:u,disabled:s}))}},ec2);let ec6=["locked"];function ec9({value:t,id:r,valueKey:i,settings:s,onUpdate:u,innerLabelTrim:c}){let h=(0,pI.useRef)(t[i]);h.current=t[i];let p=(0,pI.useCallback)(t=>u({[i]:euN({type:"NUMBER",value:h.current,settings:s},t)}),[u,s,i]),f=ecD({type:"NUMBER",value:t[i],settings:s,setValue:p});return pI.createElement(ecG,{id:r,label:i,value:t[i],displayValue:f.displayValue,onUpdate:f.onUpdate,onChange:f.onChange,settings:s,innerLabelTrim:c})}let ec8=eu2("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function ec7(t){let{locked:r}=t,i=el7(t,ec6);return pI.createElement("svg",euX({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),r?pI.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):pI.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function ehe({value:t,onUpdate:r,settings:i,innerLabelTrim:s}){let{id:u,setSettings:c}=eu$(),{lock:h,locked:p}=i;return pI.createElement(ec8,{withLock:h},h&&pI.createElement(ec7,{locked:p,onClick:()=>c({locked:!p})}),Object.keys(t).map((c,h)=>pI.createElement(ec9,{id:0===h?u:`${u}.${c}`,key:c,valueKey:c,value:t,settings:i[c],onUpdate:r,innerLabelTrim:s})))}let eht=(t,r)=>{let i={},s=0,u=1/0;for(let c in Object.entries(t).forEach(([t,c])=>{i[t]=euV(eum({value:c},r[t])).settings,s=Math.max(s,i[t].step),u=Math.min(u,i[t].pad)}),i){let{step:t,min:h,max:p}=r[c]||{};!isFinite(t)&&(!isFinite(h)||!isFinite(p))&&(i[c].step=s,i[c].pad=u)}return i},ehn=["lock"],ehr=["value"];function ehi(t,r,i){var s,u;if((Array.isArray(t)?"array":"object")===r)return t;return"array"===r?Object.values(t):(s=t,u=i,s.reduce((t,r,i)=>Object.assign(t,{[u[i]]:r}),{}))}let eha=(t,r,i)=>{let s=ehi(t,"object",r.keys);for(let t in s)s[t]=euG(s[t],r[t]);let u=Object.keys(s),c={};if(u.length===r.keys.length)c=s;else{let t=ehi(i,"object",r.keys);if(1===u.length&&r.locked){let r=u[0],i=s[r],h=t[r],p=0!==h?i/h:1;for(let s in t)s===r?c[r]=i:c[s]=t[s]*p}else c=eum(eum({},t),s)}return ehi(c,r.format,r.keys)},eho=(t,r)=>ehi(t,"object",r.keys),ehs=t=>!!t&&("step"in t||"min"in t||"max"in t);function ehl(t){return{schema:function(t){let r=eii().array().length(t).every.number(),i=r=>{if(!r||"object"!=typeof r)return!1;let i=Object.values(r);return i.length===t&&i.every(t=>isFinite(t))};return t=>r.test(t)||i(t)}(t.length),normalize:r=>{let{value:i}=r;return function(t,r,i=[]){let{lock:s=!1}=r,u=el7(r,ehn),c=Array.isArray(t)?"array":"object",h="object"===c?Object.keys(t):i,p=ehi(t,"object",h),f=eht(p,ehs(u)?h.reduce((t,r)=>Object.assign(t,{[r]:u}),{}):u);return{value:"array"===c?t:p,settings:eum(eum({},f),{},{format:c,keys:h,lock:s,locked:!1})}}(i,el7(r,ehr),t)},format:(t,r)=>eho(t,r),sanitize:(t,r,i)=>eha(t,r,i)}}var ehu={grad:.9,turn:360,rad:360/(2*Math.PI)},ehc=function(t){return"string"==typeof t?t.length>0:"number"==typeof t},ehh=function(t,r,i){return void 0===r&&(r=0),void 0===i&&(i=Math.pow(10,r)),Math.round(i*t)/i+0},ehd=function(t,r,i){return void 0===r&&(r=0),void 0===i&&(i=1),t>i?i:t>r?t:r},ehp=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},ehf=function(t){return{r:ehd(t.r,0,255),g:ehd(t.g,0,255),b:ehd(t.b,0,255),a:ehd(t.a)}},ehg=function(t){return{r:ehh(t.r),g:ehh(t.g),b:ehh(t.b),a:ehh(t.a,3)}},ehm=/^#([0-9a-f]{3,8})$/i,ehv=function(t){var r=t.toString(16);return r.length<2?"0"+r:r},ehy=function(t){var r=t.r,i=t.g,s=t.b,u=t.a,c=Math.max(r,i,s),h=c-Math.min(r,i,s),p=h?c===r?(i-s)/h:c===i?2+(s-r)/h:4+(r-i)/h:0;return{h:60*(p<0?p+6:p),s:c?h/c*100:0,v:c/255*100,a:u}},ehx=function(t){var r=t.h,i=t.s,s=t.v,u=t.a;r=r/360*6,i/=100,s/=100;var c=Math.floor(r),h=s*(1-i),p=s*(1-(r-c)*i),f=s*(1-(1-r+c)*i),v=c%6;return{r:255*[s,p,h,h,f,s][v],g:255*[f,s,s,p,h,h][v],b:255*[h,h,f,s,s,p][v],a:u}},eh_=function(t){return{h:ehp(t.h),s:ehd(t.s,0,100),l:ehd(t.l,0,100),a:ehd(t.a)}},ehb=function(t){return{h:ehh(t.h),s:ehh(t.s),l:ehh(t.l),a:ehh(t.a,3)}},ehw=function(t){var r,i;return ehx((r=t.s,{h:t.h,s:(r*=((i=t.l)<50?i:100-i)/100)>0?2*r/(i+r)*100:0,v:i+r,a:t.a}))},ehS=function(t){var r,i,s,u;return{h:(r=ehy(t)).h,s:(u=(200-(i=r.s))*(s=r.v)/100)>0&&u<200?i*s/100/(u<=100?u:200-u)*100:0,l:u/2,a:r.a}},ehM=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ehA=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ehC=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ehT=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ehE={string:[[function(t){var r=ehm.exec(t);return r?(t=r[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?ehh(parseInt(t[3]+t[3],16)/255,2):1}:6===t.length||8===t.length?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:8===t.length?ehh(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var r=ehC.exec(t)||ehT.exec(t);return r?r[2]!==r[4]||r[4]!==r[6]?null:ehf({r:Number(r[1])/(r[2]?100/255:1),g:Number(r[3])/(r[4]?100/255:1),b:Number(r[5])/(r[6]?100/255:1),a:void 0===r[7]?1:Number(r[7])/(r[8]?100:1)}):null},"rgb"],[function(t){var r,i,s=ehM.exec(t)||ehA.exec(t);if(!s)return null;return ehw(eh_({h:(r=s[1],void 0===(i=s[2])&&(i="deg"),Number(r)*(ehu[i]||1)),s:Number(s[3]),l:Number(s[4]),a:void 0===s[5]?1:Number(s[5])/(s[6]?100:1)}))},"hsl"]],object:[[function(t){var r=t.r,i=t.g,s=t.b,u=t.a;return ehc(r)&&ehc(i)&&ehc(s)?ehf({r:Number(r),g:Number(i),b:Number(s),a:Number(void 0===u?1:u)}):null},"rgb"],[function(t){var r=t.h,i=t.s,s=t.l,u=t.a;return ehc(r)&&ehc(i)&&ehc(s)?ehw(eh_({h:Number(r),s:Number(i),l:Number(s),a:Number(void 0===u?1:u)})):null},"hsl"],[function(t){var r,i=t.h,s=t.s,u=t.v,c=t.a;if(!ehc(i)||!ehc(s)||!ehc(u))return null;return ehx({h:ehp((r={h:Number(i),s:Number(s),v:Number(u),a:Number(void 0===c?1:c)}).h),s:ehd(r.s,0,100),v:ehd(r.v,0,100),a:ehd(r.a)})},"hsv"]]},ehI=function(t,r){for(var i=0;i<r.length;i++){var s=r[i][0](t);if(s)return[s,r[i][1]]}return[null,void 0]},ehD=function(t){return"string"==typeof t?ehI(t.trim(),ehE.string):"object"==typeof t&&null!==t?ehI(t,ehE.object):[null,void 0]},ehP=function(t,r){var i=ehS(t);return{h:i.h,s:ehd(i.s+100*r,0,100),l:i.l,a:i.a}},ehR=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},ehL=function(t,r){var i=ehS(t);return{h:i.h,s:i.s,l:ehd(i.l+100*r,0,100),a:i.a}},ehk=function(){function t(t){this.parsed=ehD(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return null!==this.parsed},t.prototype.brightness=function(){return ehh(ehR(this.rgba),2)},t.prototype.isDark=function(){return .5>ehR(this.rgba)},t.prototype.isLight=function(){return ehR(this.rgba)>=.5},t.prototype.toHex=function(){var t,r,i,s,u,c;return r=(t=ehg(this.rgba)).r,i=t.g,s=t.b,c=(u=t.a)<1?ehv(ehh(255*u)):"","#"+ehv(r)+ehv(i)+ehv(s)+c},t.prototype.toRgb=function(){return ehg(this.rgba)},t.prototype.toRgbString=function(){var t,r,i,s,u;return r=(t=ehg(this.rgba)).r,i=t.g,s=t.b,(u=t.a)<1?"rgba("+r+", "+i+", "+s+", "+u+")":"rgb("+r+", "+i+", "+s+")"},t.prototype.toHsl=function(){return ehb(ehS(this.rgba))},t.prototype.toHslString=function(){var t,r,i,s,u;return r=(t=ehb(ehS(this.rgba))).h,i=t.s,s=t.l,(u=t.a)<1?"hsla("+r+", "+i+"%, "+s+"%, "+u+")":"hsl("+r+", "+i+"%, "+s+"%)"},t.prototype.toHsv=function(){var t;return{h:ehh((t=ehy(this.rgba)).h),s:ehh(t.s),v:ehh(t.v),a:ehh(t.a,3)}},t.prototype.invert=function(){var t;return ehO({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a})},t.prototype.saturate=function(t){return void 0===t&&(t=.1),ehO(ehP(this.rgba,t))},t.prototype.desaturate=function(t){return void 0===t&&(t=.1),ehO(ehP(this.rgba,-t))},t.prototype.grayscale=function(){return ehO(ehP(this.rgba,-1))},t.prototype.lighten=function(t){return void 0===t&&(t=.1),ehO(ehL(this.rgba,t))},t.prototype.darken=function(t){return void 0===t&&(t=.1),ehO(ehL(this.rgba,-t))},t.prototype.rotate=function(t){return void 0===t&&(t=15),this.hue(this.hue()+t)},t.prototype.alpha=function(t){var r;return"number"==typeof t?ehO({r:(r=this.rgba).r,g:r.g,b:r.b,a:t}):ehh(this.rgba.a,3)},t.prototype.hue=function(t){var r=ehS(this.rgba);return"number"==typeof t?ehO({h:t,s:r.s,l:r.l,a:r.a}):ehh(r.h)},t.prototype.isEqual=function(t){return this.toHex()===ehO(t).toHex()},t}(),ehO=function(t){return t instanceof ehk?t:new ehk(t)},ehB=[];function ehN(){return(ehN=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}).apply(this,arguments)}function ehF(t,r){if(null==t)return{};var i,s,u={},c=Object.keys(t);for(s=0;s<c.length;s++)r.indexOf(i=c[s])>=0||(u[i]=t[i]);return u}function ehz(t){var r=(0,pI.useRef)(t),i=(0,pI.useRef)(function(t){r.current&&r.current(t)});return r.current=t,i.current}var ehU=function(t,r,i){return void 0===r&&(r=0),void 0===i&&(i=1),t>i?i:t<r?r:t},ehH=function(t){return"touches"in t},ehG=function(t){return t&&t.ownerDocument.defaultView||self},ehV=function(t,r,i){var s=t.getBoundingClientRect(),u=ehH(r)?function(t,r){for(var i=0;i<t.length;i++)if(t[i].identifier===r)return t[i];return t[0]}(r.touches,i):r;return{left:ehU((u.pageX-(s.left+ehG(t).pageXOffset))/s.width),top:ehU((u.pageY-(s.top+ehG(t).pageYOffset))/s.height)}},ehW=function(t){ehH(t)||t.preventDefault()},ehj=pI.memo(function(t){var r=t.onMove,i=t.onKey,s=ehF(t,["onMove","onKey"]),u=(0,pI.useRef)(null),c=ehz(r),h=ehz(i),p=(0,pI.useRef)(null),f=(0,pI.useRef)(!1),v=(0,pI.useMemo)(function(){var t=function(t){ehW(t),(ehH(t)?t.touches.length>0:t.buttons>0)&&u.current?c(ehV(u.current,t,p.current)):i(!1)},r=function(){return i(!1)};function i(i){var s=f.current,c=ehG(u.current),h=i?c.addEventListener:c.removeEventListener;h(s?"touchmove":"mousemove",t),h(s?"touchend":"mouseup",r)}return[function(t){var r,s=t.nativeEvent,h=u.current;if(h&&(ehW(s),r=s,(!f.current||ehH(r))&&h)){if(ehH(s)){f.current=!0;var v=s.changedTouches||[];v.length&&(p.current=v[0].identifier)}h.focus(),c(ehV(h,s,p.current)),i(!0)}},function(t){var r=t.which||t.keyCode;r<37||r>40||(t.preventDefault(),h({left:39===r?.05:37===r?-.05:0,top:40===r?.05:38===r?-.05:0}))},i]},[h,c]),y=v[0],x=v[1],_=v[2];return(0,pI.useEffect)(function(){return _},[_]),pI.createElement("div",ehN({},s,{onTouchStart:y,onMouseDown:y,className:"react-colorful__interactive",ref:u,onKeyDown:x,tabIndex:0,role:"slider"}))}),ehX=function(t){return t.filter(Boolean).join(" ")},ehY=function(t){var r=t.color,i=t.left,s=t.top,u=ehX(["react-colorful__pointer",t.className]);return pI.createElement("div",{className:u,style:{top:100*(void 0===s?.5:s)+"%",left:100*i+"%"}},pI.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:r}}))},eh$=function(t,r,i){return void 0===r&&(r=0),void 0===i&&(i=Math.pow(10,r)),Math.round(i*t)/i},ehJ=function(t){return"#"===t[0]&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?eh$(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:8===t.length?eh$(parseInt(t.substring(6,8),16)/255,2):1}},ehZ=function(t,r){return void 0===r&&(r="deg"),Number(t)*(null[r]||1)},ehK=function(t){var r=t.s,i=t.l;return{h:t.h,s:(r*=(i<50?i:100-i)/100)>0?2*r/(i+r)*100:0,v:i+r,a:t.a}},ehq=function(t){var r=t.s,i=t.v,s=t.a,u=(200-r)*i/100;return{h:eh$(t.h),s:eh$(u>0&&u<200?r*i/100/(u<=100?u:200-u)*100:0),l:eh$(u/2),a:eh$(s,2)}},ehQ=function(t){var r=ehq(t);return"hsl("+r.h+", "+r.s+"%, "+r.l+"%)"},eh0=function(t){var r=ehq(t);return"hsla("+r.h+", "+r.s+"%, "+r.l+"%, "+r.a+")"},eh1=function(t){var r=t.h,i=t.s,s=t.v,u=t.a;r=r/360*6,i/=100,s/=100;var c=Math.floor(r),h=s*(1-i),p=s*(1-(r-c)*i),f=s*(1-(1-r+c)*i),v=c%6;return{r:eh$(255*[s,p,h,h,f,s][v]),g:eh$(255*[f,s,s,p,h,h][v]),b:eh$(255*[h,h,f,s,s,p][v]),a:eh$(u,2)}},eh2=function(t){var r=t.toString(16);return r.length<2?"0"+r:r},eh3=function(t){var r=t.r,i=t.g,s=t.b,u=t.a,c=u<1?eh2(eh$(255*u)):"";return"#"+eh2(r)+eh2(i)+eh2(s)+c},eh5=function(t){var r=t.r,i=t.g,s=t.b,u=t.a,c=Math.max(r,i,s),h=c-Math.min(r,i,s),p=h?c===r?(i-s)/h:c===i?2+(s-r)/h:4+(r-i)/h:0;return{h:eh$(60*(p<0?p+6:p)),s:eh$(c?h/c*100:0),v:eh$(c/255*100),a:u}},eh4=function(t){return{h:eh$(t.h),s:eh$(t.s),v:eh$(t.v),a:eh$(t.a,2)}},eh6=pI.memo(function(t){var r=t.hue,i=t.onChange,s=ehX(["react-colorful__hue",t.className]);return pI.createElement("div",{className:s},pI.createElement(ehj,{onMove:function(t){i({h:360*t.left})},onKey:function(t){i({h:ehU(r+360*t.left,0,360)})},"aria-label":"Hue","aria-valuenow":eh$(r),"aria-valuemax":"360","aria-valuemin":"0"},pI.createElement(ehY,{className:"react-colorful__hue-pointer",left:r/360,color:ehQ({h:r,s:100,v:100,a:1})})))}),eh9=pI.memo(function(t){var r=t.hsva,i=t.onChange,s={backgroundColor:ehQ({h:r.h,s:100,v:100,a:1})};return pI.createElement("div",{className:"react-colorful__saturation",style:s},pI.createElement(ehj,{onMove:function(t){i({s:100*t.left,v:100-100*t.top})},onKey:function(t){i({s:ehU(r.s+100*t.left,0,100),v:ehU(r.v-100*t.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+eh$(r.s)+"%, Brightness "+eh$(r.v)+"%"},pI.createElement(ehY,{className:"react-colorful__saturation-pointer",top:1-r.v/100,left:r.s/100,color:ehQ(r)})))}),eh8=function(t,r){if(t===r)return!0;for(var i in t)if(t[i]!==r[i])return!1;return!0};function eh7(t,r,i){var s=ehz(i),u=(0,pI.useState)(function(){return t.toHsva(r)}),c=u[0],h=u[1],p=(0,pI.useRef)({color:r,hsva:c});return(0,pI.useEffect)(function(){if(!t.equal(r,p.current.color)){var i=t.toHsva(r);p.current={hsva:i,color:r},h(i)}},[r,t]),(0,pI.useEffect)(function(){var r;eh8(c,p.current.hsva)||t.equal(r=t.fromHsva(c),p.current.color)||(p.current={hsva:c,color:r},s(r))},[c,t,s]),[c,(0,pI.useCallback)(function(t){h(function(r){return Object.assign({},r,t)})},[])]}var ede,edt,edn="undefined"!=typeof window?pI.useLayoutEffect:pI.useEffect,edr=new Map,edi=function(t){edn(function(){var r=t.current?t.current.ownerDocument:document;if(void 0!==r&&!edr.has(r)){var s=r.createElement("style");s.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',edr.set(r,s);var u=edt||i.nc;u&&s.setAttribute("nonce",u),r.head.appendChild(s)}},[])},eda=function(t){var r=t.className,i=t.colorModel,s=t.color,u=void 0===s?i.defaultColor:s,c=t.onChange,h=ehF(t,["className","colorModel","color","onChange"]),p=(0,pI.useRef)(null);edi(p);var f=eh7(i,u,c),v=f[0],y=f[1],x=ehX(["react-colorful",r]);return pI.createElement("div",ehN({},h,{ref:p,className:x}),pI.createElement(eh9,{hsva:v,onChange:y}),pI.createElement(eh6,{hue:v.h,onChange:y,className:"react-colorful__last-control"}))},edo=function(t){var r=t.className,i=t.hsva,s=t.onChange,u={backgroundImage:"linear-gradient(90deg, "+eh0(Object.assign({},i,{a:0}))+", "+eh0(Object.assign({},i,{a:1}))+")"},c=ehX(["react-colorful__alpha",r]),h=eh$(100*i.a);return pI.createElement("div",{className:c},pI.createElement("div",{className:"react-colorful__alpha-gradient",style:u}),pI.createElement(ehj,{onMove:function(t){s({a:t.left})},onKey:function(t){s({a:ehU(i.a+t.left)})},"aria-label":"Alpha","aria-valuetext":h+"%","aria-valuenow":h,"aria-valuemin":"0","aria-valuemax":"100"},pI.createElement(ehY,{className:"react-colorful__alpha-pointer",left:i.a,color:eh0(i)})))},eds=function(t){var r=t.className,i=t.colorModel,s=t.color,u=void 0===s?i.defaultColor:s,c=t.onChange,h=ehF(t,["className","colorModel","color","onChange"]),p=(0,pI.useRef)(null);edi(p);var f=eh7(i,u,c),v=f[0],y=f[1],x=ehX(["react-colorful",r]);return pI.createElement("div",ehN({},h,{ref:p,className:x}),pI.createElement(eh9,{hsva:v,onChange:y}),pI.createElement(eh6,{hue:v.h,onChange:y}),pI.createElement(edo,{hsva:v,onChange:y,className:"react-colorful__last-control"}))},edl={defaultColor:{r:0,g:0,b:0,a:1},toHsva:eh5,fromHsva:eh1,equal:eh8},edu=function(t){return pI.createElement(eds,ehN({},t,{colorModel:edl}))},edc={defaultColor:{r:0,g:0,b:0},toHsva:function(t){return eh5({r:t.r,g:t.g,b:t.b,a:1})},fromHsva:function(t){var r;return{r:(r=eh1(t)).r,g:r.g,b:r.b}},equal:eh8},edh=function(t){return pI.createElement(eda,ehN({},t,{colorModel:edc}))},edd=/^#?([0-9A-F]{3,8})$/i,edp=function(t){var r=t.color,i=void 0===r?"":r,s=t.onChange,u=t.onBlur,c=t.escape,h=t.validate,p=t.format,f=t.process,v=ehF(t,["color","onChange","onBlur","escape","validate","format","process"]),y=o(function(){return c(i)}),x=y[0],_=y[1],b=ehz(s),w=ehz(u),S=a(function(t){var r=c(t.target.value);_(r),h(r)&&b(f?f(r):r)},[c,f,h,b]),M=a(function(t){h(t.target.value)||_(c(i)),w(t)},[i,c,h,w]);return n(function(){_(c(i))},[i,c]),e.createElement("input",ehN({},v,{value:p?p(x):x,spellCheck:"false",onChange:S,onBlur:M}))},edf=function(t){return"#"+t},edg=i("507"),edm=i.n(edg),edv=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function edy(t,r){var i=function(t){var r=t.name;if(r&&-1!==r.lastIndexOf(".")&&!t.type){var i=r.split(".").pop().toLowerCase(),s=edv.get(i);s&&Object.defineProperty(t,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return t}(t);if("string"!=typeof i.path){var s=t.webkitRelativePath;Object.defineProperty(i,"path",{value:"string"==typeof r?r:"string"==typeof s&&s.length>0?s:t.name,writable:!1,configurable:!1,enumerable:!0})}return i}var edx=[".DS_Store","Thumbs.db"];function ed_(t){return"object"==typeof t&&null!==t}function edb(t){return t.filter(function(t){return -1===edx.indexOf(t.name)})}function edw(t){if(null===t)return[];for(var r=[],i=0;i<t.length;i++){var s=t[i];r.push(s)}return r}function edS(t){if("function"!=typeof t.webkitGetAsEntry)return edM(t);var r=t.webkitGetAsEntry();return r&&r.isDirectory?edC(r):edM(t)}function edM(t){var r=t.getAsFile();return r?Promise.resolve(edy(r)):Promise.reject(t+" is not a File")}function edA(t){return wR(this,void 0,void 0,function(){return wL(this,function(r){return[2,t.isDirectory?edC(t):function(t){return wR(this,void 0,void 0,function(){return wL(this,function(r){return[2,new Promise(function(r,i){t.file(function(i){r(edy(i,t.fullPath))},function(t){i(t)})})]})})}(t)]})})}function edC(t){var r=t.createReader();return new Promise(function(t,i){var s=[];!function u(){var c=this;r.readEntries(function(r){return wR(c,void 0,void 0,function(){var c;return wL(this,function(h){switch(h.label){case 0:if(r.length)return[3,5];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.all(s)];case 2:return t(h.sent()),[3,4];case 3:return i(h.sent()),[3,4];case 4:return[3,6];case 5:c=Promise.all(r.map(edA)),s.push(c),u(),h.label=6;case 6:return[2]}})})},function(t){i(t)})}()})}var edT=i("1253");function edE(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,s)}return i}function edI(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?edE(Object(i),!0).forEach(function(r){edD(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):edE(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function edD(t,r,i){return r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function edP(t){return(edP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function edR(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var i,s,u=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=u){var c=[],h=!0,p=!1;try{for(u=u.call(t);!(h=(i=u.next()).done)&&(c.push(i.value),!r||c.length!==r);h=!0);}catch(t){p=!0,s=t}finally{try{!h&&null!=u.return&&u.return()}finally{if(p)throw s}}return c}}(t,r)||function(t,r){if(t){if("string"==typeof t)return edL(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);if("Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return edL(t,r)}}(t,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function edL(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,s=Array(r);i<r;i++)s[i]=t[i];return s}var edk=function(t){var r=Array.isArray(t=Array.isArray(t)&&1===t.length?t[0]:t)?"one of ".concat(t.join(", ")):t;return{code:"file-invalid-type",message:"File type must be ".concat(r)}},edO=function(t){return{code:"file-too-large",message:"File is larger than ".concat(t," ").concat(1===t?"byte":"bytes")}},edB=function(t){return{code:"file-too-small",message:"File is smaller than ".concat(t," ").concat(1===t?"byte":"bytes")}},edN={code:"too-many-files",message:"Too many files"};function edF(t,r){var i="application/x-moz-file"===t.type||(0,edT.default)(t,r);return[i,i?null:edk(r)]}function edz(t,r,i){if(edU(t.size)){if(edU(r)&&edU(i)){if(t.size>i)return[!1,edO(i)];if(t.size<r)return[!1,edB(r)]}else if(edU(r)&&t.size<r)return[!1,edB(r)];else if(edU(i)&&t.size>i)return[!1,edO(i)]}return[!0,null]}function edU(t){return null!=t}function edH(t){return"function"==typeof t.isPropagationStopped?t.isPropagationStopped():void 0!==t.cancelBubble&&t.cancelBubble}function edG(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(t){return"Files"===t||"application/x-moz-file"===t}):!!t.target&&!!t.target.files}function edV(t){t.preventDefault()}function edW(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return function(t){for(var i=arguments.length,s=Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];return r.some(function(r){return!edH(t)&&r&&r.apply(void 0,[t].concat(s)),edH(t)})}}var edj=["children"],edX=["open"],edY=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],ed$=["refKey","onChange","onClick"];function edJ(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var i,s,u=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=u){var c=[],h=!0,p=!1;try{for(u=u.call(t);!(h=(i=u.next()).done)&&(c.push(i.value),!r||c.length!==r);h=!0);}catch(t){p=!0,s=t}finally{try{!h&&null!=u.return&&u.return()}finally{if(p)throw s}}return c}}(t,r)||edZ(t,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function edZ(t,r){if(t){if("string"==typeof t)return edK(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);if("Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return edK(t,r)}}function edK(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,s=Array(r);i<r;i++)s[i]=t[i];return s}function edq(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,s)}return i}function edQ(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?edq(Object(i),!0).forEach(function(r){ed0(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):edq(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function ed0(t,r,i){return r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function ed1(t,r){if(null==t)return{};var i,s,u=function(t,r){if(null==t)return{};var i,s,u={},c=Object.keys(t);for(s=0;s<c.length;s++)i=c[s],!(r.indexOf(i)>=0)&&(u[i]=t[i]);return u}(t,r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(s=0;s<c.length;s++){if(i=c[s],!(r.indexOf(i)>=0))Object.prototype.propertyIsEnumerable.call(t,i)&&(u[i]=t[i])}}return u}var ed2=(0,pI.forwardRef)(function(t,r){var i=t.children,s=ed4(ed1(t,edj)),u=s.open,c=ed1(s,edX);return(0,pI.useImperativeHandle)(r,function(){return{open:u}},[u]),pI.createElement(pI.Fragment,null,i(edQ(edQ({},c),{},{open:u})))});ed2.displayName="Dropzone";var ed3={disabled:!1,getFilesFromEvent:function(t){return wR(this,void 0,void 0,function(){return wL(this,function(r){if(ed_(t)&&function(t){return ed_(t.dataTransfer)}(t))return[2,function(t,r){return wR(this,void 0,void 0,function(){var i;return wL(this,function(s){switch(s.label){case 0:if(null===t)return[2,[]];if(!t.items)return[3,2];if(i=edw(t.items).filter(function(t){return"file"===t.kind}),"drop"!==r)return[2,i];return[4,Promise.all(i.map(edS))];case 1:return[2,edb(function t(r){return r.reduce(function(r,i){return function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(function(t,r){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var s,u,c=i.call(t),h=[];try{for(;(void 0===r||r-- >0)&&!(s=c.next()).done;)h.push(s.value)}catch(t){u={error:t}}finally{try{s&&!s.done&&(i=c.return)&&i.call(c)}finally{if(u)throw u.error}}return h}(arguments[r]));return t}(r,Array.isArray(i)?t(i):[i])},[])}(s.sent()))];case 2:return[2,edb(edw(t.files).map(function(t){return edy(t)}))]}})})}(t.dataTransfer,t.type)];if(function(t){return ed_(t)&&ed_(t.target)}(t))return[2,function(t){return edw(t.target.files).map(function(t){return edy(t)})}(t)];if(Array.isArray(t)&&t.every(function(t){return"getFile"in t&&"function"==typeof t.getFile}))return[2,function(t){return wR(this,void 0,void 0,function(){return wL(this,function(r){switch(r.label){case 0:return[4,Promise.all(t.map(function(t){return t.getFile()}))];case 1:return[2,r.sent().map(function(t){return edy(t)})]}})})}(t)];return[2,[]]})})},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};ed2.defaultProps=ed3,ed2.propTypes={children:edm().func,accept:edm().oneOfType([edm().string,edm().arrayOf(edm().string)]),multiple:edm().bool,preventDropOnDocument:edm().bool,noClick:edm().bool,noKeyboard:edm().bool,noDrag:edm().bool,noDragEventsBubbling:edm().bool,minSize:edm().number,maxSize:edm().number,maxFiles:edm().number,disabled:edm().bool,getFilesFromEvent:edm().func,onFileDialogCancel:edm().func,onFileDialogOpen:edm().func,useFsAccessApi:edm().bool,onDragEnter:edm().func,onDragLeave:edm().func,onDragOver:edm().func,onDrop:edm().func,onDropAccepted:edm().func,onDropRejected:edm().func,validator:edm().func};var ed5={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function ed4(){var t,r,i,s,u,c,h,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=edQ(edQ({},ed3),p),v=f.accept,y=f.disabled,x=f.getFilesFromEvent,_=f.maxSize,b=f.minSize,w=f.multiple,S=f.maxFiles,M=f.onDragEnter,A=f.onDragLeave,C=f.onDragOver,T=f.onDrop,I=f.onDropAccepted,D=f.onDropRejected,P=f.onFileDialogCancel,R=f.onFileDialogOpen,L=f.useFsAccessApi,k=f.preventDropOnDocument,O=f.noClick,B=f.noKeyboard,N=f.noDrag,F=f.noDragEventsBubbling,z=f.validator,U=(0,pI.useMemo)(function(){return"function"==typeof R?R:ed9},[R]),H=(0,pI.useMemo)(function(){return"function"==typeof P?P:ed9},[P]),G=(0,pI.useRef)(null),V=(0,pI.useRef)(null),W=edJ((0,pI.useReducer)(ed6,ed5),2),j=W[0],X=W[1],Y=j.isFocused,$=j.isFileDialogActive,J=j.draggedFiles,Z=(0,pI.useRef)("undefined"!=typeof window&&window.isSecureContext&&L&&"showOpenFilePicker"in window),K=function(){!Z.current&&$&&setTimeout(function(){V.current&&!V.current.files.length&&(X({type:"closeDialog"}),H())},300)};(0,pI.useEffect)(function(){return window.addEventListener("focus",K,!1),function(){window.removeEventListener("focus",K,!1)}},[V,$,H,Z]);var q=(0,pI.useRef)([]),Q=function(t){if(!(G.current&&G.current.contains(t.target)))t.preventDefault(),q.current=[]};(0,pI.useEffect)(function(){return k&&(document.addEventListener("dragover",edV,!1),document.addEventListener("drop",Q,!1)),function(){k&&(document.removeEventListener("dragover",edV),document.removeEventListener("drop",Q))}},[G,k]);var ee=(0,pI.useCallback)(function(t){var r;t.preventDefault(),t.persist(),ep(t),q.current=[].concat(function(t){if(Array.isArray(t))return edK(t)}(r=q.current)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||edZ(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t.target]),edG(t)&&Promise.resolve(x(t)).then(function(r){if(!edH(t)||!!F)X({draggedFiles:r,isDragActive:!0,type:"setDraggedFiles"}),M&&M(t)})},[x,M,F]),et=(0,pI.useCallback)(function(t){t.preventDefault(),t.persist(),ep(t);var r=edG(t);if(r&&t.dataTransfer)try{t.dataTransfer.dropEffect="copy"}catch(t){}return r&&C&&C(t),!1},[C,F]),en=(0,pI.useCallback)(function(t){t.preventDefault(),t.persist(),ep(t);var r=q.current.filter(function(t){return G.current&&G.current.contains(t)}),i=r.indexOf(t.target);if(-1!==i&&r.splice(i,1),q.current=r,!(r.length>0))X({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),edG(t)&&A&&A(t)},[G,A,F]),er=(0,pI.useCallback)(function(t,r){var i=[],s=[];t.forEach(function(t){var r=edJ(edF(t,v),2),u=r[0],c=r[1],h=edJ(edz(t,b,_),2),p=h[0],f=h[1],y=z?z(t):null;if(u&&p&&!y)i.push(t);else{var x=[c,f];y&&(x=x.concat(y)),s.push({file:t,errors:x.filter(function(t){return t})})}}),(!w&&i.length>1||w&&S>=1&&i.length>S)&&(i.forEach(function(t){s.push({file:t,errors:[edN]})}),i.splice(0)),X({acceptedFiles:i,fileRejections:s,type:"setFiles"}),T&&T(i,s,r),s.length>0&&D&&D(s,r),i.length>0&&I&&I(i,r)},[X,w,v,b,_,S,T,I,D,z]),ei=(0,pI.useCallback)(function(t){t.preventDefault(),t.persist(),ep(t),q.current=[],edG(t)&&Promise.resolve(x(t)).then(function(r){if(!edH(t)||!!F)er(r,t)}),X({type:"reset"})},[x,er,F]),ea=(0,pI.useCallback)(function(){if(Z.current){X({type:"openDialog"}),U();var t,r={multiple:w,types:[{description:"everything",accept:Array.isArray(t="string"==typeof(t=v)?t.split(","):t)?t.filter(function(t){return"audio/*"===t||"video/*"===t||"image/*"===t||"text/*"===t||/\w+\/[-+.\w]+/g.test(t)}).reduce(function(t,r){return edI(edI({},t),{},edD({},r,[]))},{}):{}}]};window.showOpenFilePicker(r).then(function(t){return x(t)}).then(function(t){er(t,null),X({type:"closeDialog"})}).catch(function(t){var r,i;if((r=t)instanceof DOMException&&("AbortError"===r.name||r.code===r.ABORT_ERR))H(t),X({type:"closeDialog"});else{;if((i=t)instanceof DOMException&&("SecurityError"===i.name||i.code===i.SECURITY_ERR))Z.current=!1,V.current&&(V.current.value=null,V.current.click())}});return}V.current&&(X({type:"openDialog"}),U(),V.current.value=null,V.current.click())},[X,U,H,L,er,v,w]),eo=(0,pI.useCallback)(function(t){if(!!G.current&&!!G.current.isEqualNode(t.target))(" "===t.key||"Enter"===t.key||32===t.keyCode||13===t.keyCode)&&(t.preventDefault(),ea())},[G,ea]),es=(0,pI.useCallback)(function(){X({type:"focus"})},[]),el=(0,pI.useCallback)(function(){X({type:"blur"})},[]),eu=(0,pI.useCallback)(function(){if(!O)(function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return -1!==(t=r).indexOf("MSIE")||-1!==t.indexOf("Trident/")||-1!==r.indexOf("Edge/")})()?setTimeout(ea,0):ea()},[O,ea]),ec=function(t){return y?null:t},eh=function(t){return B?null:ec(t)},ed=function(t){return N?null:ec(t)},ep=function(t){F&&t.stopPropagation()},ef=(0,pI.useMemo)(function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.refKey,i=t.role,s=t.onKeyDown,u=t.onFocus,c=t.onBlur,h=t.onClick,p=t.onDragEnter,f=t.onDragOver,v=t.onDragLeave,x=t.onDrop,_=ed1(t,edY);return edQ(edQ(ed0({onKeyDown:eh(edW(s,eo)),onFocus:eh(edW(u,es)),onBlur:eh(edW(c,el)),onClick:ec(edW(h,eu)),onDragEnter:ed(edW(p,ee)),onDragOver:ed(edW(f,et)),onDragLeave:ed(edW(v,en)),onDrop:ed(edW(x,ei)),role:"string"==typeof i&&""!==i?i:"button"},void 0===r?"ref":r,G),y||B?{}:{tabIndex:0}),_)}},[G,eo,es,el,eu,ee,et,en,ei,B,N,y]),eg=(0,pI.useCallback)(function(t){t.stopPropagation()},[]),em=(0,pI.useMemo)(function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.refKey,i=t.onChange,s=t.onClick,u=ed1(t,ed$);return edQ(edQ({},ed0({accept:v,multiple:w,type:"file",style:{display:"none"},onChange:ec(edW(i,ei)),onClick:ec(edW(s,eg)),tabIndex:-1},void 0===r?"ref":r,V)),u)}},[V,v,w,ei,y]),ev=J.length;var ey=ev>0&&(r=(t={files:J,accept:v,minSize:b,maxSize:_,multiple:w,maxFiles:S}).files,i=t.accept,s=t.minSize,u=t.maxSize,c=t.multiple,h=t.maxFiles,(!!c||!(r.length>1))&&(!c||!(h>=1)||!(r.length>h))&&r.every(function(t){var r=edR(edF(t,i),1)[0],c=edR(edz(t,s,u),1)[0];return r&&c}));return edQ(edQ({},j),{},{isDragAccept:ey,isDragReject:ev>0&&!ey,isFocused:Y&&!y,getRootProps:ef,getInputProps:em,rootRef:G,inputRef:V,open:ec(ea)})}function ed6(t,r){switch(r.type){case"focus":return edQ(edQ({},t),{},{isFocused:!0});case"blur":return edQ(edQ({},t),{},{isFocused:!1});case"openDialog":return edQ(edQ({},ed5),{},{isFileDialogActive:!0});case"closeDialog":return edQ(edQ({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":var i=r.isDragActive,s=r.draggedFiles;return edQ(edQ({},t),{},{draggedFiles:s,isDragActive:i});case"setFiles":return edQ(edQ({},t),{},{acceptedFiles:r.acceptedFiles,fileRejections:r.fileRejections});case"reset":return edQ({},ed5);default:return t}}function ed9(){}var ed8=Object.defineProperty,ed7=Object.getOwnPropertySymbols,epe=Object.prototype.hasOwnProperty,ept=Object.prototype.propertyIsEnumerable,epn=(t,r,i)=>r in t?ed8(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i;let epr=(t,r)=>{let i;try{i=JSON.parse(t)}catch(t){}void 0!==i&&r(i)},epi=t=>(r,i,s)=>{let u=s.subscribe;return s.subscribe=(t,r,i)=>{let c=t;if(r){let u=(null==i?void 0:i.equalityFn)||Object.is,h=t(s.getState());c=i=>{let s=t(i);if(!u(h,s)){let t=h;r(h=s,t)}},(null==i?void 0:i.fireImmediately)&&r(h,h)}return u(c)},t(r,i,s)};var epa=Object.defineProperty,epo=Object.getOwnPropertySymbols,eps=Object.prototype.hasOwnProperty,epl=Object.prototype.propertyIsEnumerable,epu=(t,r,i)=>r in t?epa(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,epc=i("1378"),eph=i.n(epc);let epd=(...t)=>t.filter(Boolean).join(".");function epp(t,r){return(0,pI.useMemo)(t,function(t,r){let i=(0,pI.useRef)();return!(r?er4:er6)(t,i.current)&&(i.current=t),i.current}(r,!0))}let epf=t=>{let[r,i]=(0,pI.useState)(t.getVisiblePaths());return(0,pI.useEffect)(()=>{i(t.getVisiblePaths());let r=t.useStore.subscribe(t.getVisiblePaths,i,{equalityFn:er6});return()=>r()},[t]),r};function epg(t=3){let r=(0,pI.useRef)(null),i=(0,pI.useRef)(null),[s,u]=(0,pI.useState)(!1),c=(0,pI.useCallback)(()=>u(!0),[]),h=(0,pI.useCallback)(()=>u(!1),[]);return(0,pI.useLayoutEffect)(()=>{if(s){let{bottom:s,top:u,left:c}=r.current.getBoundingClientRect(),{height:h}=i.current.getBoundingClientRect(),p=s+h>window.innerHeight-40?"up":"down";i.current.style.position="fixed",i.current.style.zIndex="10000",i.current.style.left=c+"px","down"===p?i.current.style.top=s+t+"px":i.current.style.bottom=window.innerHeight-u+t+"px"}},[t,s]),{popinRef:r,wrapperRef:i,shown:s,show:c,hide:h}}!function(t){t.forEach(function(t){0>ehB.indexOf(t)&&(t(ehk,ehE),ehB.push(t))})}([function(t,r){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var u in i)s[i[u]]=u;var c={};t.prototype.toName=function(r){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var u,h=s[this.toHex()];if(h)return h;if(null==r?void 0:r.closest){var p=this.toRgb(),f=1/0,v="black";if(!c.length)for(var y in i)c[y]=new t(i[y]).toRgb();for(var x in i){var _=(u=c[x],Math.pow(p.r-u.r,2)+Math.pow(p.g-u.g,2)+Math.pow(p.b-u.b,2));_<f&&(f=_,v=x)}return v}},r.string.push([function(r){var s=r.toLowerCase(),u="transparent"===s?"#0000":i[s];return u?new t(u).toRgb():null},"name"])}]);let epm={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};eii.extend({color:()=>t=>ehO(t).isValid()});function epv(t,{format:r,hasAlpha:i,isString:s}){let u=t[epm[r]+(s&&"hex"!==r?"String":"")]();return"object"!=typeof u||i?u:function(t,r){let i=eum({},t);return r.forEach(r=>r in t&&delete i[r]),i}(u,["a"])}let epy=(t,r)=>{let i=ehO(t);if(!i.isValid())throw Error("Invalid color");return epv(i,r)};var epx=Object.freeze({__proto__:null,schema:t=>eii().color().test(t),sanitize:epy,format:(t,r)=>epv(ehO(t),eum(eum({},r),{},{isString:!0,format:"hex"})),normalize:({value:t})=>{let r=ehD(t)[1],i="object"==typeof t?"a"in t:"hex"===r&&8===t.length||/^(rgba)|(hsla)|(hsva)/.test(t),s={format:"name"===r?"hex":r,hasAlpha:i,isString:"string"==typeof t};return{value:epy(t,s),settings:s}}});let ep_=eu2("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:'url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')',$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),epb=eu2("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),epw=eu2("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function epS(t,r){return"rgb"!==r?ehO(t).toRgb():t}function epM({value:t,displayValue:r,settings:i,onUpdate:s}){let{emitOnEditStart:u,emitOnEditEnd:c}=eu$(),{format:h,hasAlpha:p}=i,{popinRef:f,wrapperRef:v,shown:y,show:x,hide:_}=epg(),b=(0,pI.useRef)(0),[w,S]=(0,pI.useState)(()=>epS(t,h)),M=()=>{S(epS(t,h)),x(),u()},A=()=>{_(),c(),window.clearTimeout(b.current)},C=()=>{b.current=window.setTimeout(A,500)};return(0,pI.useEffect)(()=>()=>window.clearTimeout(b.current),[]),pI.createElement(pI.Fragment,null,pI.createElement(ep_,{ref:f,active:y,onClick:()=>M(),style:{color:r}}),y&&pI.createElement(ec_,null,pI.createElement(ecv,{onPointerUp:A}),pI.createElement(epw,{ref:v,onMouseEnter:()=>window.clearTimeout(b.current),onMouseLeave:t=>0===t.buttons&&C()},pI.createElement(p?edu:edh,{color:w,onChange:s}))))}var epA=eum({component:function(){let{value:t,displayValue:r,label:i,onChange:s,onUpdate:u,settings:c}=eu$();return pI.createElement(ecI,{input:!0},pI.createElement(ecM,null,i),pI.createElement(epb,null,pI.createElement(epM,{value:t,displayValue:r,onChange:s,onUpdate:u,settings:c}),pI.createElement(eca,{value:r,onChange:s,onUpdate:u})))}},epx),epC=eum({component:function(){let{label:t,displayValue:r,onUpdate:i,settings:s}=eu$();return pI.createElement(ecI,{input:!0},pI.createElement(ecM,null,t),pI.createElement(ehe,{value:r,settings:s,onUpdate:i}))}},ehl(["x","y","z"]));let epT=eu2("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),epE=eu2("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function epI({value:t,settings:r,onUpdate:i}){let s=(0,pI.useRef)(),u=(0,pI.useRef)(0),c=(0,pI.useRef)(0),h=(0,pI.useRef)(1),[p,f]=(0,pI.useState)(!1),[v,y]=(0,pI.useState)(!1),[x,_]=ecR(),b=(0,pI.useRef)(null),w=(0,pI.useRef)(null);(0,pI.useLayoutEffect)(()=>{if(p){let{top:t,left:r,width:i,height:s}=b.current.getBoundingClientRect();w.current.style.left=r+i/2+"px",w.current.style.top=t+s/2+"px"}},[p]);let{keys:[S,M],joystick:A}=r,C="invertY"===A?1:-1,{[S]:{step:T},[M]:{step:I}}=r,D=eu8("sizes","joystickWidth"),P=eu8("sizes","joystickHeight"),R=.8*parseFloat(D)/2,L=.8*parseFloat(P)/2,k=(0,pI.useCallback)(()=>{!s.current&&(y(!0),u.current&&_({x:u.current*R}),c.current&&_({y:-(c.current*L)}),s.current=window.setInterval(()=>{i(t=>{let r=T*u.current*h.current,i=C*I*c.current*h.current;return Array.isArray(t)?{[S]:t[0]+r,[M]:t[1]+i}:{[S]:t[S]+r,[M]:t[M]+i}})},16))},[R,L,i,_,T,I,S,M,C]),O=(0,pI.useCallback)(()=>{window.clearTimeout(s.current),s.current=void 0,y(!1)},[]);(0,pI.useEffect)(()=>{function t(t){h.current=euz(t)}return window.addEventListener("keydown",t),window.addEventListener("keyup",t),()=>{window.clearTimeout(s.current),window.removeEventListener("keydown",t),window.removeEventListener("keyup",t)}},[]);let B=ecP(({first:r,active:s,delta:[p,v],movement:[y,x]})=>{r&&f(!0);let b=euv(y,-R,R),w=euv(x,-L,L);u.current=Math.abs(y)>Math.abs(b)?Math.sign(y-b):0,c.current=Math.abs(x)>Math.abs(w)?Math.sign(w-x):0;let A=t[S],D=t[M];s?(!u.current&&(A+=p*T*h.current,_({x:b})),!c.current&&(D-=C*v*I*h.current,_({y:w})),u.current||c.current?k():O(),i({[S]:A,[M]:D})):(f(!1),u.current=0,c.current=0,_({x:0,y:0}),O())});return pI.createElement(epT,euX({ref:b},B()),p&&pI.createElement(ec_,null,pI.createElement(epE,{ref:w,isOutOfBounds:v},pI.createElement("div",null),pI.createElement("span",{ref:x}))))}let epD=eu2("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}}),epP=["joystick"],epR=ehl(["x","y"]);var epL=eum(eum({component:function(){let{label:t,displayValue:r,onUpdate:i,settings:s}=eu$();return pI.createElement(ecI,{input:!0},pI.createElement(ecM,null,t),pI.createElement(epD,{withJoystick:!!s.joystick},s.joystick&&pI.createElement(epI,{value:r,settings:s,onUpdate:i}),pI.createElement(ehe,{value:r,settings:s,onUpdate:i})))}},epR),{},{normalize:t=>{let{joystick:r=!0}=t,i=el7(t,epP),{value:s,settings:u}=epR.normalize(i);return{value:s,settings:eum(eum({},u),{},{joystick:r})}}}),epk=Object.freeze({__proto__:null,sanitize:t=>{if(void 0!==t){if(t instanceof File)try{return URL.createObjectURL(t)}catch(t){return}if("string"==typeof t&&0===t.indexOf("blob:"))return t;throw Error(`Invalid image format [undefined | blob |\xa0File].`)}},schema:(t,r)=>"object"==typeof r&&"image"in r,normalize:({image:t})=>({value:t})});let epO=eu2("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),epB=eu2("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),epN=eu2("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),epF=eu2("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),epz=eu2("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),epU=eu2("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});var epH=eum({component:function(){let{label:t,value:r,onUpdate:i,disabled:s}=eu$(),{popinRef:u,wrapperRef:c,shown:h,show:p,hide:f}=epg(),v=(0,pI.useCallback)(t=>{t.length&&i(t[0])},[i]),y=(0,pI.useCallback)(t=>{t.stopPropagation(),i(void 0)},[i]),{getRootProps:x,getInputProps:_,isDragAccept:b}=ed4({maxFiles:1,accept:"image/*",onDrop:v,disabled:s});return pI.createElement(ecI,{input:!0},pI.createElement(ecM,null,t),pI.createElement(epO,null,pI.createElement(epN,{ref:u,hasImage:!!r,onPointerDown:()=>!!r&&p(),onPointerUp:f,style:{backgroundImage:r?`url(${r})`:"none"}}),h&&!!r&&pI.createElement(ec_,null,pI.createElement(ecv,{onPointerUp:f,style:{cursor:"pointer"}}),pI.createElement(epF,{ref:c,style:{backgroundImage:`url(${r})`}})),pI.createElement(epB,x({isDragAccept:b}),pI.createElement("input",_()),pI.createElement(epz,null,b?"drop image":"click or drop")),pI.createElement(epU,{onClick:y,disabled:!r})))}},epk);let epG=eii().number(),epV=t=>({min:t[0],max:t[1]}),epW=(t,{bounds:[r,i]},s)=>{let u=Array.isArray(t)?epV(t):t,{min:c,max:h}=eum(eum({},{min:s[0],max:s[1]}),u);return[euv(Number(c),r,Math.max(r,h)),euv(Number(h),Math.min(i,c),i)]};var epj=Object.freeze({__proto__:null,schema:(t,r)=>eii().array().length(2).every.number().test(t)&&eii().schema({min:epG,max:epG}).test(r),format:epV,sanitize:epW,normalize:({value:t,min:r,max:i})=>{let s={min:r,max:i},u=eht(epV(t),{min:s,max:s}),c=[r,i],h=eum(eum({},u),{},{bounds:c});return{value:epW(epV(t),h,t),settings:h}}});let epX=["value","bounds","onDrag"],epY=["bounds"],ep$=eu2("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function epJ(t){let{value:r,bounds:[i,s],onDrag:u}=t,c=el7(t,epX),h=(0,pI.useRef)(null),p=(0,pI.useRef)(null),f=(0,pI.useRef)(null),v=(0,pI.useRef)(0),y=eu8("sizes","scrubberWidth"),x=ecP(({event:t,first:x,xy:[_],movement:[b],memo:w={}})=>{if(x){let{width:u,left:c}=h.current.getBoundingClientRect();v.current=u-parseFloat(y);let x=(null==t?void 0:t.target)===p.current||(null==t?void 0:t.target)===f.current;w.pos=euw((_-c)/u,i,s);let b=Math.abs(w.pos-r.min)-Math.abs(w.pos-r.max);w.key=b<0||0===b&&w.pos<=r.min?"min":"max",x&&(w.pos=r[w.key])}let S=w.pos+euw(b/v.current,0,s-i);return u({[w.key]:ecV(S,c[w.key])}),w}),_=`calc(${eub(r.min,i,s)} * (100% - ${y} - 8px) + 4px)`,b=`calc(${1-eub(r.max,i,s)} * (100% - ${y} - 8px) + 4px)`;return pI.createElement(ecF,euX({ref:h},x()),pI.createElement(ecB,null,pI.createElement(ecz,{style:{left:_,right:b}})),pI.createElement(ecN,{position:"left",ref:p,style:{left:_}}),pI.createElement(ecN,{position:"right",ref:f,style:{right:b}}))}var epZ=eum({component:function(){let{label:t,displayValue:r,onUpdate:i,settings:s}=eu$(),u=el7(s,epY);return pI.createElement(pI.Fragment,null,pI.createElement(ecI,{input:!0},pI.createElement(ecM,null,t),pI.createElement(ep$,null,pI.createElement(epJ,euX({value:r},s,{onDrag:i})),pI.createElement(ehe,{value:r,settings:u,onUpdate:i,innerLabelTrim:0}))))}},epj);let epK=()=>{let t=new Map;return{on:(r,i)=>{let s=t.get(r);void 0===s&&(s=new Set,t.set(r,s)),s.add(i)},off:(r,i)=>{let s=t.get(r);if(void 0!==s)s.delete(i),0===s.size&&t.delete(r)},emit:(r,...i)=>{let s=t.get(r);if(void 0!==s)for(let t of s)t(...i)}}},epq=["type","value"],epQ=["onChange","transient","onEditStart","onEditEnd"],ep0=function(){let t=pL(epi(()=>({data:{}}))),r=epK();this.storeId=euS(),this.useStore=t;let i={},s=new Set;this.getVisiblePaths=()=>{let t=this.getData(),r=Object.keys(t),u=[];Object.entries(i).forEach(([t,i])=>{i.render&&r.some(r=>0===r.indexOf(t))&&!i.render(this.get)&&u.push(t+".")});let c=[];return s.forEach(r=>{r in t&&t[r].__refCount>0&&u.every(t=>-1===r.indexOf(t))&&(!t[r].render||t[r].render(this.get))&&c.push(r)}),c},this.setOrderedPaths=t=>{t.forEach(t=>s.add(t))},this.orderPaths=t=>(this.setOrderedPaths(t),t),this.disposePaths=r=>{t.setState(t=>{let i=t.data;return r.forEach(t=>{if(t in i){let r=i[t];r.__refCount--,0===r.__refCount&&r.type in j&&delete i[t]}}),{data:i}})},this.dispose=()=>{t.setState(()=>({data:{}}))},this.getFolderSettings=t=>i[t]||{},this.getData=()=>t.getState().data,this.addData=(r,i)=>{t.setState(t=>{let s=t.data;return Object.entries(r).forEach(([t,r])=>{let u=s[t];if(u){let{type:t,value:s}=r,c=el7(r,epq);t!==u.type?eun(W.INPUT_TYPE_OVERRIDE,t):((0===u.__refCount||i)&&Object.assign(u,c),u.__refCount++)}else s[t]=eum(eum({},r),{},{__refCount:1})}),{data:s}})},this.setValueAtPath=(r,i,s)=>{t.setState(t=>{let u=t.data;return euO(u[r],i,r,this,s),{data:u}})},this.setSettingsAtPath=(r,i)=>{t.setState(t=>{let s=t.data;return s[r].settings=eum(eum({},s[r].settings),i),{data:s}})},this.disableInputAtPath=(r,i)=>{t.setState(t=>{let s=t.data;return s[r].disabled=i,{data:s}})},this.set=(r,i)=>{t.setState(t=>{let s=t.data;return Object.entries(r).forEach(([t,r])=>{try{euO(s[t],r,void 0,void 0,i)}catch(t){}}),{data:s}})},this.getInput=t=>{try{return this.getData()[t]}catch(r){eun(W.PATH_DOESNT_EXIST,t)}},this.get=t=>{var r;return null===(r=this.getInput(t))||void 0===r?void 0:r.value},this.emitOnEditStart=t=>{r.emit(`onEditStart:${t}`,this.get(t),t,eum(eum({},this.getInput(t)),{},{get:this.get}))},this.emitOnEditEnd=t=>{r.emit(`onEditEnd:${t}`,this.get(t),t,eum(eum({},this.getInput(t)),{},{get:this.get}))},this.subscribeToEditStart=(t,i)=>{let s=`onEditStart:${t}`;return r.on(s,i),()=>r.off(s,i)},this.subscribeToEditEnd=(t,i)=>{let s=`onEditEnd:${t}`;return r.on(s,i),()=>r.off(s,i)};let u=(t,r,s)=>{let c={};return Object.entries(t).forEach(([t,h])=>{if(""===t)return eun(W.EMPTY_KEY);let p=epd(r,t);if(h.type===j.FOLDER)Object.assign(c,u(h.schema,p,s)),!(p in i)&&(i[p]=h.settings);else if(t in s)eun(W.DUPLICATE_KEYS,t,p,s[t].path);else{let r=function(t,r,i,s){let u=function t(r,i,s={},u){var c,h;let p;if("object"!=typeof r||Array.isArray(r))return{type:u,input:r,options:eum({key:i,label:i,optional:!1,disabled:!1,order:0},s)};if("__customInput"in r){let{type:s,__customInput:u}=r;return t(u,i,el7(r,euR),s)}let{render:f,label:v,optional:y,order:x=0,disabled:_,hint:b,onChange:w,onEditStart:S,onEditEnd:M,transient:A}=r,C=el7(r,euL),T=eum({render:f,key:i,label:null!=v?v:i,hint:b,transient:null!=A?A:!!w,onEditStart:S,onEditEnd:M,disabled:_,optional:y,order:x},s),{type:I}=C,D=el7(C,euk);return(I=null!=u?u:I)in j?{type:I,input:D,options:T}:{type:I,input:p=u&&euD(D)&&"value"in D?D.value:euP(D)?void 0:D,options:eum(eum({},T),{},{onChange:w,optional:null!==(c=T.optional)&&void 0!==c&&c,disabled:null!==(h=T.disabled)&&void 0!==h&&h})}}(t,r),{type:c,input:h,options:p}=u;if(c)return c in j?u:{type:c,input:eup(c,h,i,s),options:p};let f=euu(h);return f?{type:f,input:eup(f,h,i,s),options:p}:!!(f=euu({value:h}))&&{type:f,input:eup(f,{value:h},i,s),options:p}}(h,t,p,c);if(r){let{type:i,options:u,input:h}=r,{onChange:f,transient:v,onEditStart:y,onEditEnd:x}=u,_=el7(u,epQ);c[p]=eum(eum(eum({type:i},_),h),{},{fromPanel:!0}),s[t]={path:p,onChange:f,transient:v,onEditStart:y,onEditEnd:x}}else eun(W.UNKNOWN_INPUT,p,h)}}),c};this.getDataFromSchema=t=>{let r={};return[u(t,"",r),r]}},ep1=new ep0,ep2={collapsed:!1},ep3=t=>"__levaInput"in t,ep5=(t,r)=>{let i={},s=r?r.toLowerCase():null;return t.forEach(t=>{let[r,u]=function(t){let r=t.split(".");return[r.pop(),r.join(".")||void 0]}(t);(!s||r.toLowerCase().indexOf(s)>-1)&&eph()(i,u,{[r]:{__levaInput:!0,path:t}})}),i},ep4=["type","label","path","valueKey","value","settings","setValue","disabled"];function ep6(t){let{type:r,label:i,path:s,valueKey:u,value:c,settings:h,setValue:p,disabled:f}=t,v=el7(t,ep4),{displayValue:y,onChange:x,onUpdate:_}=ecD({type:r,value:c,settings:h,setValue:p}),b=eul[r].component;return b?pI.createElement(euY.Provider,{value:eum({key:u,path:s,id:""+s,label:i,displayValue:y,value:c,onChange:x,onUpdate:_,settings:h,setValue:p,disabled:f},v)},pI.createElement(ecm,{disabled:f},pI.createElement(b,null))):(eun(W.NO_COMPONENT_FOR_TYPE,r,s),null)}let ep9=eu2("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}}),ep8=eu2("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),ep7=eu2("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),efe=({label:t,opts:r})=>{let i="string"==typeof t&&""===t.trim()?null:t,s=r;return"object"==typeof r.opts&&(void 0!==s.label&&(i=r.label),s=r.opts),{label:i,opts:s}},eft=eu2("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),efn=(0,pI.forwardRef)(function({initialValue:t},r){let i=eu8("colors","highlight3"),s=eu8("colors","elevation2"),u=eu8("colors","highlight1"),[c,h]=(0,pI.useMemo)(()=>[ehO(u).alpha(.4).toRgbString(),ehO(u).alpha(.1).toRgbString()],[u]),p=(0,pI.useRef)([t]),f=(0,pI.useRef)(t),v=(0,pI.useRef)(t),y=(0,pI.useRef)(),x=(0,pI.useCallback)((t,r)=>{if(!t)return;let{width:u,height:y}=t,x=new Path2D,_=u/100,b=.05*y;for(let t=0;t<p.current.length;t++){let r=eub(p.current[t],f.current,v.current),i=_*t,s=y-r*(y-2*b)-b;x.lineTo(i,s)}r.clearRect(0,0,u,y);let w=new Path2D(x);w.lineTo(_*(p.current.length+1),y),w.lineTo(0,y),w.lineTo(0,0);let S=r.createLinearGradient(0,0,0,y);S.addColorStop(0,c),S.addColorStop(1,h),r.fillStyle=S,r.fill(w),r.strokeStyle=s,r.lineJoin="round",r.lineWidth=14,r.stroke(x),r.strokeStyle=i,r.lineWidth=2,r.stroke(x)},[i,s,c,h]),[_,b]=function(t){let r=(0,pI.useRef)(null),i=(0,pI.useRef)(null),s=(0,pI.useRef)(!1);return(0,pI.useEffect)(()=>{let u=euF(()=>{r.current.width=r.current.offsetWidth*window.devicePixelRatio,r.current.height=r.current.offsetHeight*window.devicePixelRatio,t(r.current,i.current)},250);return window.addEventListener("resize",u),!s.current&&(u(),s.current=!0),()=>window.removeEventListener("resize",u)},[t]),(0,pI.useEffect)(()=>{i.current=r.current.getContext("2d")},[]),[r,i]}(x);return(0,pI.useImperativeHandle)(r,()=>({frame:t=>{var r,i;(void 0===f.current||t<f.current)&&(f.current=t),(void 0===v.current||t>v.current)&&(v.current=t),r=p.current,i=t,r.push(i),r.length>100&&r.shift(),y.current=requestAnimationFrame(()=>x(_.current,b.current))}}),[_,b,x]),(0,pI.useEffect)(()=>()=>cancelAnimationFrame(y.current),[]),pI.createElement(eft,{ref:_})}),efr=t=>Number.isFinite(t)?t.toPrecision(2):t.toString(),efi=(0,pI.forwardRef)(function({initialValue:t},r){let[i,s]=(0,pI.useState)(efr(t));return(0,pI.useImperativeHandle)(r,()=>({frame:t=>s(efr(t))}),[]),pI.createElement("div",null,i)});function efa(t){return"function"==typeof t?t():t.current}let efo=["type","label","key"],efs={[j.BUTTON]:function({onClick:t,settings:r,label:i}){let s=euq();return pI.createElement(ecI,null,pI.createElement(ep9,{disabled:r.disabled,onClick:()=>t(s.get)},i))},[j.BUTTON_GROUP]:function(t){let{label:r,opts:i}=efe(t),s=euq();return pI.createElement(ecI,{input:!!r},r&&pI.createElement(ecM,null,r),pI.createElement(ep8,null,Object.entries(i).map(([t,r])=>pI.createElement(ep7,{key:t,onClick:()=>r(s.get)},t))))},[j.MONITOR]:function({label:t,objectOrFn:r,settings:i}){let s=(0,pI.useRef)(),u=(0,pI.useRef)(efa(r));return(0,pI.useEffect)(()=>{let t=window.setInterval(()=>{var t;!document.hidden&&(null===(t=s.current)||void 0===t||t.frame(efa(r)))},i.interval);return()=>window.clearInterval(t)},[r,i.interval]),pI.createElement(ecI,{input:!0},pI.createElement(ecM,{align:"top"},t),i.graph?pI.createElement(efn,{ref:s,initialValue:u.current}):pI.createElement(efi,{ref:s,initialValue:u.current}))}},efl=pI.memo(({path:t})=>{let[r,{set:i,setSettings:s,disable:u,storeId:c,emitOnEditStart:h,emitOnEditEnd:p}]=function(t){let r=euq(),[i,s]=(0,pI.useState)(eck(r.getData(),t)),u=(0,pI.useCallback)(i=>r.setValueAtPath(t,i,!0),[t,r]),c=(0,pI.useCallback)(i=>r.setSettingsAtPath(t,i),[t,r]),h=(0,pI.useCallback)(i=>r.disableInputAtPath(t,i),[t,r]),p=(0,pI.useCallback)(()=>r.emitOnEditStart(t),[t,r]),f=(0,pI.useCallback)(()=>r.emitOnEditEnd(t),[t,r]);return(0,pI.useEffect)(()=>{s(eck(r.getData(),t));let i=r.useStore.subscribe(r=>eck(r.data,t),s,{equalityFn:er6});return()=>i()},[r,t]),[i,{set:u,setSettings:c,disable:h,storeId:r.storeId,emitOnEditStart:p,emitOnEditEnd:f}]}(t);if(!r)return null;let{type:f,label:v,key:y}=r,x=el7(r,efo);if(f in j){let r=efs[f];return pI.createElement(r,euX({label:v,path:t},x))}return f in eul?pI.createElement(ep6,euX({key:c+t,type:f,label:v,storeId:c,path:t,valueKey:y,setValue:i,setSettings:s,disable:u,emitOnEditStart:h,emitOnEditEnd:p},x)):(eur(W.UNSUPPORTED_INPUT,f,t),null)});function efu({toggle:t,toggled:r,name:i}){return pI.createElement(ecu,{onClick:()=>t()},pI.createElement(ecT,{toggled:r}),pI.createElement("div",null,i))}let efc=({name:t,path:r,tree:i})=>{let s=euq(),u=epd(r,t),{collapsed:c,color:h}=s.getFolderSettings(u),[p,f]=(0,pI.useState)(!c),v=(0,pI.useRef)(null),y=eu8("colors","folderWidgetColor"),x=eu8("colors","folderTextColor");return(0,pI.useLayoutEffect)(()=>{v.current.style.setProperty("--leva-colors-folderWidgetColor",h||y),v.current.style.setProperty("--leva-colors-folderTextColor",h||x)},[h,y,x]),pI.createElement(ecs,{ref:v},pI.createElement(efu,{name:t,toggled:p,toggle:()=>f(t=>!t)}),pI.createElement(efh,{parent:u,tree:i,toggled:p}))},efh=pI.memo(({isRoot:t=!1,fill:r=!1,flat:i=!1,parent:s,tree:u,toggled:c})=>{let{wrapperRef:h,contentRef:p}=function(t){let r=(0,pI.useRef)(null),i=(0,pI.useRef)(null),s=(0,pI.useRef)(!0);return(0,pI.useLayoutEffect)(()=>{!t&&(r.current.style.height="0px",r.current.style.overflow="hidden")},[]),(0,pI.useEffect)(()=>{let u;if(s.current){s.current=!1;return}let c=r.current,h=()=>{t&&(c.style.removeProperty("height"),c.style.removeProperty("overflow"),i.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};c.addEventListener("transitionend",h,{once:!0});let{height:p}=i.current.getBoundingClientRect();return c.style.height=p+"px",!t&&(c.style.overflow="hidden",u=window.setTimeout(()=>c.style.height="0px",50)),()=>{c.removeEventListener("transitionend",h),clearTimeout(u)}},[t]),{wrapperRef:r,contentRef:i}}(c),f=euq(),v=([t,r])=>{var i;return(ep3(r)?null===(i=f.getInput(r.path))||void 0===i?void 0:i.order:f.getFolderSettings(epd(s,t)).order)||0},y=Object.entries(u).sort((t,r)=>v(t)-v(r));return pI.createElement(ecl,{ref:h,isRoot:t,fill:r,flat:i},pI.createElement(ecc,{ref:p,isRoot:t,toggled:c},y.map(([t,r])=>ep3(r)?pI.createElement(efl,{key:r.path,valueKey:r.valueKey,path:r.path}):pI.createElement(efc,{key:t,name:t,path:s,tree:r}))))}),efd=eu2("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${ecd}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),efp=eu2("i",{$flexCenter:"",width:40,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),eff=eu2("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),efg=eu2("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${efp}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),efm=eu2("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),efv=eu2("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:40}}}}),efy=pI.forwardRef(({setFilter:t,toggle:r},i)=>{let[s,u]=(0,pI.useState)(""),c=(0,pI.useMemo)(()=>euF(t,250),[t]),h=()=>{t(""),u("")};return(0,pI.useEffect)(()=>{c(s)},[s,c]),pI.createElement(pI.Fragment,null,pI.createElement(efm,{ref:i,value:s,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:t=>t.stopPropagation(),onChange:t=>{let i=t.currentTarget.value;r(!0),u(i)}}),pI.createElement(efp,{onClick:()=>h(),style:{visibility:s?"visible":"hidden"}},pI.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},pI.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function efx({setFilter:t,onDrag:r,onDragStart:i,onDragEnd:s,toggle:u,toggled:c,title:h,drag:p,filterEnabled:f,from:v}){let[y,x]=(0,pI.useState)(!1),_=(0,pI.useRef)(null);(0,pI.useEffect)(()=>{var t,r;y?null===(t=_.current)||void 0===t||t.focus():null===(r=_.current)||void 0===r||r.blur()},[y]);let b=ecP(({offset:[t,u],first:c,last:h})=>{r({x:t,y:u}),c&&i({x:t,y:u}),h&&s({x:t,y:u})},{filterTaps:!0,from:({offset:[t,r]})=>[(null==v?void 0:v.x)||t,(null==v?void 0:v.y)||r]});return(0,pI.useEffect)(()=>{let t=t=>{"L"===t.key&&t.shiftKey&&t.metaKey&&x(t=>!t)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),pI.createElement(pI.Fragment,null,pI.createElement(eff,{mode:p?"drag":void 0},pI.createElement(efp,{active:!c,onClick:()=>u()},pI.createElement(ecT,{toggled:c,width:12,height:8})),pI.createElement(efv,euX({},p?b():{},{drag:p,filterEnabled:f}),void 0===h&&p?pI.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},pI.createElement("circle",{cx:"2",cy:"2",r:"2"}),pI.createElement("circle",{cx:"14",cy:"2",r:"2"}),pI.createElement("circle",{cx:"26",cy:"2",r:"2"}),pI.createElement("circle",{cx:"2",cy:"12",r:"2"}),pI.createElement("circle",{cx:"14",cy:"12",r:"2"}),pI.createElement("circle",{cx:"26",cy:"12",r:"2"})):h),f&&pI.createElement(efp,{active:y,onClick:()=>x(t=>!t)},pI.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},pI.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),pI.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),pI.createElement(efg,{toggled:y},pI.createElement(efy,{ref:_,setFilter:t,toggle:u})))}let ef_=["store","hidden","theme","collapsed"];function efb(t){let{store:r,hidden:i=!1,theme:s,collapsed:u=!1}=t,c=el7(t,ef_),h=epp(()=>(function(t){let r=euQ();if(!t)return{theme:r,className:""};Object.keys(t).forEach(i=>{Object.assign(r[i],t[i])});let i=eu5(r);return{theme:r,className:i.className}})(s),[s]),[p,f]=(0,pI.useState)(!u),v="object"==typeof u?!u.collapsed:p,y=(0,pI.useMemo)(()=>"object"==typeof u?t=>{"function"==typeof t?u.onChange(!t(!u.collapsed)):u.onChange(!t)}:f,[u]);return!r||i?null:pI.createElement(euJ.Provider,{value:h},pI.createElement(efw,euX({store:r},c,{toggled:v,setToggle:y,rootClass:h.className})))}let efw=pI.memo(({store:t,rootClass:r,fill:i=!1,flat:s=!1,neverHide:u=!1,oneLineLabels:c=!1,titleBar:h={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:p=!1,toggled:f,setToggle:v})=>{var y,x;let _=epf(t),[b,w]=(0,pI.useState)(""),S=(0,pI.useMemo)(()=>ep5(_,b),[_,b]),[M,A]=ecR(),C=u||_.length>0,T="object"==typeof h&&h.title||void 0,I="object"!=typeof h||null===(y=h.drag)||void 0===y||y,D="object"!=typeof h||null===(x=h.filter)||void 0===x||x,P="object"==typeof h&&h.position||void 0,R="object"==typeof h&&h.onDrag||void 0,L="object"==typeof h&&h.onDragStart||void 0,k="object"==typeof h&&h.onDragEnd||void 0;return pI.useEffect(()=>{A({x:null==P?void 0:P.x,y:null==P?void 0:P.y})},[P,A]),eu9(),pI.createElement(euK.Provider,{value:{hideCopyButton:p}},pI.createElement(efd,{ref:M,className:r,fill:i,flat:s,oneLineLabels:c,hideTitleBar:!h,style:{display:C?"block":"none"}},h&&pI.createElement(efx,{onDrag:t=>{A(t),null==R||R(t)},onDragStart:t=>null==L?void 0:L(t),onDragEnd:t=>null==k?void 0:k(t),setFilter:w,toggle:t=>v(r=>null!=t?t:!r),toggled:f,title:T,drag:I,filterEnabled:D,from:P}),C&&pI.createElement(euZ.Provider,{value:t},pI.createElement(efh,{isRoot:!0,fill:i,flat:s,tree:S,toggled:f}))))}),efS=["isRoot"],efM=!1,efA=null;function efC(t){let{isRoot:r=!1}=t,i=el7(t,efS);return(0,pI.useEffect)(()=>(efM=!0,!r&&efA&&(efA.remove(),efA=null),()=>{!r&&(efM=!1)}),[r]),pI.createElement(efb,euX({store:ep1},i))}function efT(t,r,i,s,u){var c,h,p,f,v,y,x,_,b;let w,S,M,A,C;let{folderName:T,schema:I,folderSettings:D,hookSettings:P,deps:R}=(c=t,h=r,p=i,f=s,v=u,"string"==typeof c?(C=c,w=h,Array.isArray(p)?A=p:p&&("store"in p?(M=p,A=f):(S=p,Array.isArray(f)?A=f:(M=f,A=v)))):(w=c,Array.isArray(h)?A=h:(M=h,A=p)),{schema:w,folderName:C,folderSettings:S,hookSettings:M,deps:A||[]}),L="function"==typeof I,k=(0,pI.useRef)(!1),O=(0,pI.useRef)(!0),B=epp(()=>{var t,r;k.current=!0;let i="function"==typeof I?I():I;return T?{[T]:(t=i,r=D,{type:j.FOLDER,schema:t,settings:eum(eum({},ep2),r)})}:i},R);y=!(null!=P&&P.store),(0,pI.useEffect)(()=>{y&&!efM&&(!efA&&(efA=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(efA),!function(t,r){let i=console.error;console.error=()=>{},wr.render(t,r),console.error=i}(pI.createElement(efC,{isRoot:!0}),efA))),efM=!0)},[y]);let[N]=(0,pI.useState)(()=>(null==P?void 0:P.store)||ep1),[F,z]=(0,pI.useMemo)(()=>N.getDataFromSchema(B),[N,B]),[U,H,G,V,W]=(0,pI.useMemo)(()=>{let t=[],r=[],i={},s={},u={};return Object.values(z).forEach(({path:c,onChange:h,onEditStart:p,onEditEnd:f,transient:v})=>{t.push(c),h?(i[c]=h,!v&&r.push(c)):r.push(c),p&&(s[c]=p),f&&(u[c]=f)}),[t,r,i,s,u]},[z]),X=(0,pI.useMemo)(()=>N.orderPaths(U),[U,N]);let Y=(x=N,_=H,b=F,x.useStore(t=>{var r,i,s;return r=eum(eum({},b),t.data),i=_,Object.entries((s=r,i.reduce((t,r)=>(s&&s.hasOwnProperty(r)&&(t[r]=s[r]),t),{}))).reduce((t,[,{value:r,disabled:i,key:s}])=>(t[s]=i?void 0:r,t),{})},er6)),$=(0,pI.useCallback)(t=>{let r=Object.entries(t).reduce((t,[r,i])=>Object.assign(t,{[z[r].path]:i}),{});N.set(r,!1)},[N,z]),J=(0,pI.useCallback)(t=>N.get(z[t].path),[N,z]);return((0,pI.useEffect)(()=>{let t=!O.current&&k.current;return N.addData(F,t),O.current=!1,k.current=!1,()=>N.disposePaths(X)},[N,X,F]),(0,pI.useEffect)(()=>{let t=[];return Object.entries(G).forEach(([r,i])=>{i(N.get(r),r,eum({initial:!0,get:N.get},N.getInput(r)));let s=N.useStore.subscribe(t=>{let i=t.data[r];return[i.disabled?void 0:i.value,i]},([t,s])=>i(t,r,eum({initial:!1,get:N.get},s)),{equalityFn:er6});t.push(s)}),()=>t.forEach(t=>t())},[N,G]),(0,pI.useEffect)(()=>{let t=[];return Object.entries(V).forEach(([r,i])=>t.push(N.subscribeToEditStart(r,i))),Object.entries(W).forEach(([r,i])=>t.push(N.subscribeToEditEnd(r,i))),()=>t.forEach(t=>t())},[V,W,N]),L)?[Y,$,J]:Y}euc(X.SELECT,ecZ),euc(X.IMAGE,epH),euc(X.NUMBER,ecW),euc(X.COLOR,epA),euc(X.STRING,ec1),euc(X.BOOLEAN,ec4),euc(X.INTERVAL,epZ),euc(X.VECTOR3D,epC),euc(X.VECTOR2D,epL);let efE={collapsed:!0},efI=()=>{let{config:t,setConfig:r}=b4(),i=efT("Environment",t.environments,efE),s=efT("Camera",t.cameraController,efE),u=efT("UI",t.floatingUI,efE);return(0,pI.useEffect)(()=>r("environments",i),[i,r]),(0,pI.useEffect)(()=>r("cameraController",s),[s,r]),(0,pI.useEffect)(()=>r("floatingUI",u),[u,r]),null},efD=(0,pI.forwardRef)((t,r)=>{let{data:i}=t,{setImportData:s,getImportData:u}=erX();return(0,pI.useEffect)(()=>{s(i??erj)},[i,s]),(0,pI.useImperativeHandle)(r,()=>({getData:()=>u()})),(0,eu.jsxs)("div",{className:gj("fixed left-0 top-0 !size-full slate-300"),children:[(0,eu.jsxs)(f9,{...gX.props.canvas,children:[(0,eu.jsx)(efI,{}),(0,eu.jsx)(ys,{}),(0,eu.jsx)(er$,{}),(0,eu.jsx)(pI.Suspense,{fallback:null,children:(0,eu.jsx)(erS,{data:i})})]}),(0,eu.jsx)(erY,{})]})});efD.displayName="App";let efP=(t,r)=>{let i=ec.createRoot(t),s=(0,pI.createRef)();return i.render((0,eu.jsx)(pI.StrictMode,{children:(0,eu.jsx)(efD,{ref:s,...r})})),s.current}})(),s})());