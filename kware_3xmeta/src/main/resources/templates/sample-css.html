<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default}">

<th:block layout:fragment="center-image">
  <th:block th:with="backtitle='테스트 화면', title1=${title1}, title2=${title2}, leftImg='', rightImg=''">
    <th:block th:replace="fragments/center-image :: center-image-title(${backtitle}, ${title1}, ${title2}, ${leftImg}, ${rightImg})"></th:block>
  </th:block>
</th:block>


<th:block layout:fragment="content">
  <div class="my-account-wrapper pb-100 pt-30">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">

          <!-- My Account Page Start -->
          <div class="myaccount-page-wrapper">

            <div class="row">

              <!-- 오른쪽 컨텐츠 영역 // -->
              <div class="col-lg-12 col-md-12">
                <div class="tab-content">

                  <!-- [6] css 탭 -->
                  <div class="tab-pane fade show active" id="css-custom" role="tabpanel">
                    <div class="row info-row" style="margin-bottom: 25px;" data-aos="fade-up" data-aos-delay="200">

                      <!-- 탭 컨텐츠 영역 -->
                      <div class="myaccount-content">
                        <h3></h3>
                        <div class="account-details-form">
                          <div>

                            <div class="row custom-row">
                              <div class="col-lg-6 info-col">
                                <div class="single-input-item">
                                  <label for="userNm" class="custom-label">인풋</label>
                                  <input class="form-control custom-input" type="text" id="userNm" name="userNm" placeholder="이름을 입력하세요.">
                                </div>
                              </div>
                              <div class="col-lg-6 info-col">
                                <div class="single-input-item">
                                  <label for="userId" class="custom-label">인풋 disable</label>
                                  <input class="form-control custom-input" type="text" id="userId" name="userId" readonly="" disabled="" value="userId">
                                </div>
                              </div>
                            </div>

                            <div class="row custom-row">
                              <div class="col-lg-6">
                                <label for="userGroup-form" class="custom-label">라디오</label>
                                <div id="userGroup-form" class="custom-check-form-flex">
                                  <div class="form-check">
                                    <input type="radio" id="user-radio-0" name="userStatus-change" class="form-check-input" value="radio1" >
                                    <label class="form-check-label" for="user-radio-0">라디오1</label>
                                  </div>
                                  <div class="form-check">
                                    <input type="radio" id="user-radio-1" name="userStatus-change" class="form-check-input" value="radio2" checked="" >
                                    <label class="form-check-label" for="user-radio-1">라디오2</label>
                                  </div>
                                  <div class="form-check">
                                    <input type="radio" id="user-radio-2" name="userStatus-change" class="form-check-input" value="radio3" >
                                    <label class="form-check-label" for="user-radio-2">라디오3</label>
                                  </div>
                                </div>
                              </div>

                              <div class="col-lg-6">
                                <label for="userJbgd-form" class="custom-label">체크박스</label>
                                <div id="userJbgd-form" class="custom-check-form-flex">
                                  <div class="form-check">
                                    <input type="checkbox" id="user-checkbox-0" name="userJbgd-change" class="form-check-input" value="APPROVED" >
                                    <label class="form-check-label" for="user-checkbox-0">체크박스1</label>
                                  </div>
                                  <div class="form-check">
                                    <input type="checkbox" id="user-checkbox-1" name="userJbgd-change" class="form-check-input" value="WAIT" checked="" >
                                    <label class="form-check-label" for="user-checkbox-1">체크박스2</label>
                                  </div>
                                  <div class="form-check">
                                    <input type="checkbox" id="user-checkbox-2" name="userJbgd-change" class="form-check-input" value="STOP" >
                                    <label class="form-check-label" for="user-checkbox-2">체크박스3</label>
                                  </div>
                                </div>
                              </div>
                            </div>

                            <div class="row custom-row">
                              <div class="col-lg-6 info-col">
                                <label for="userDept" class="custom-label">인풋 그룹</label>
                                <div class="input-group">
                                  <input type="text" id="userDept" name="userDept" class="form-control custom-input"  placeholder="그룹/부서를 선택하세요.">
                                  <button class="custom-button" id="userDept-choose" type="button" data-bs-toggle="modal" data-bs-target="#searchModal">선택</button>
                                </div>
                              </div>
                              <div class="col-lg-6 info-col">
                                <div class="single-input-item">
                                  <label for="userTel" class="custom-label">연락처</label>
                                  <input class="form-control custom-input" type="text" id="userTel" name="userTel" value="010-1234-5678" placeholder="010-1234-5678">
                                </div>
                              </div>
                            </div>

                            <div class="row custom-row">
                              <div class="col-lg-6">
                                <div style="margin-bottom: 20px;">
                                  <label for="userTeam2" class="custom-label">팀명</label>
                                  <div>
                                    <select class="select2 form-select round border_line" id="userTeam2" name="userTeam" multiple>
                                      <option value="">팀명 전체</option>
                                      <option value="test1">팀명1</option>
                                      <option value="test2">팀명2</option>
                                      <option value="test3">팀명3</option>
                                      <option value="test4">팀명4</option>
                                    </select>
                                  </div>
                                </div>
                              </div>
                              <div class="col-lg-6 info-col">
                                <div class="single-input-item">
                                  <label for="userAddr" class="custom-label">주소</label>
                                  <textarea class="form-control custom-textarea" id="userAddr" name="userAddr" placeholder="주소를 입력하세요"></textarea>
                                </div>
                              </div>
                            </div>

                            <div class="row custom-row">
                              <div class="col-lg-6">
                                <div class="single-input-item">
                                  <div for="type" class="required">select</div>
                                  <select class="nice-select nice-select-style-1 custom-select" id="typeSelect" name="type">
                                    <option value="" disabled selected>-- Select Type --</option>
                                    <option value="test01">test01</option>
                                    <option value="test01">test01</option>
                                    <option value="test01">test01</option>
                                    <option value="test01">test01</option>
                                    <option value="test01">test01</option>
                                    <option value="test01">test01</option>
                                  </select>
                                </div>
                              </div>
                              <div class="col-lg-6">
                                <div>
                                  <label class="form-label custom-label" for="startDate">날짜</label>
                                  <input type="date" class="form-control custom-input mb-4" id="startDate" name="startDate"/>
                                </div>
                              </div>
                            </div>

                            <div class="row custom-row">
                              <div class="col-lg-6">
                                <div>
                                  <label for="upload-container-1" class="form-label custom-label">썸네일</label>
                                  <div>
                                    <div id="upload-container-1" style="display: none;"></div>
                                    <img src="/assets/images/page/detail/profile_noimage.png"  alt="Profile" id="profile-thumbnail-id-1" class="profile-img">
                                  </div>
                                  <div class="custom-btn-wrap">
                                    <button class="custom-button" id="delete-btn">삭제</button>
                                    <button class="custom-button" id="upload-btn">업로드</button>
                                  </div>
                                </div>
                              </div>
                              <div class="col-lg-6 info-col">
                                <div>
                                  <label for="upload-container-userDoc" class="custom-label">증빙서류</label>
                                  <div>
                                    <div id="upload-container-userDoc" class="mt-1"></div>
                                  </div>
                                </div>
                              </div>
                            </div>

                            <div class="custom-btn-wrap">
                              <button class="custom-button" id="cancel-btn">취소</button>
                              <button class="custom-button" id="save-btn">변경 적용</button>
                            </div>

                          </form>

                        </div>
                      </div>

                    </div>
                  </div>

                </div>
              </div>
              <!-- // 오른쪽 컨텐츠 영역 -->

            </div>
          </div>
          <!-- My Account Page End -->

        </div>
      </div>
    </div>
  </div>
</th:block>

<th:block layout:fragment="script">
  <script th:inline="javascript">

    /* ==== css custom ==== */
    const uploader = new Upload("#upload-container-userDoc", '100%', 250);

    const profileUploader = new ThumbnailUpload("#upload-container-1")

    $(function () {

      initUploader(null)
      initThumbnail(null)

      $("#userTeam2").select2({
        placeholder: "팀 선택",
        language: {
          noResults: function() {
            return "검색 결과가 없습니다.";
          }
        }
      });

      $("#upload-btn").on('click', function() {
        newImageUpload();
      });

      $("#delete-btn").on('click', function () {
        defaultProfile();
      });

      $("#save-btn").on('click', function () {
        let FileAdd = [], FileDel = [];
        const uploadThumbnail = profileUploader.getTempThumbnailFile();
        if(uploadThumbnail.hasOwnProperty('fileId')) FileAdd.push(uploadThumbnail);
        FileDel = profileUploader.getRemoveFile();
        console.log("[profile] file add : ", FileAdd)
        console.log("[profile] file del : ", FileDel)

        const FileAdd2 = uploader.getTempFileUrls()
        const FileDel2 = uploader.getRemoveFileUrls()
        console.log("[업로더] file add : ", FileAdd2)
        console.log("[업로더] file del : ", FileDel2)
      })

    });

    function initThumbnail(fileUid) {
      FileUtil.loadEditFiles(fileUid, profileUploader);      // ** 필수
      profileUploader.setThumbNail("profile-thumbnail-id-1");  // ** 만일 썸네일 이미지를 보여줄 경우, <img> id 값을 입력
      // profileUploader.usePromise();                          // ** 만일 이미지 업로드 및 삭제 시점을 잡아야 하는 경우 사용
    }

    function defaultProfile() {
      const targets = [
        profileUploader.getTempThumbnailFile(),
        profileUploader.getThumbnailStaticUpload()
      ];
      for (const file of targets) {
        if (file.hasOwnProperty('fileId')) {
          profileUploader.removeThumbnailFile(file, 'removed-by-user');
        }
      }
    }

    function newImageUpload() {
      profileUploader.openFileUpload();
    }

    function initUploader(fileUid) {
      FileUtil.loadEditFiles(fileUid, uploader);
      uploader.setUploadInfo(10);
      console.log("init upload")
    }

  </script>
</th:block>
</html>